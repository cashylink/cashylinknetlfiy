const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-Ck_thcuJ.js","./card-SlwaggFS.js","./BrandLogo-BV6Nd5YH.js","./brandingService-C3FKjfeb.js","./whatsappService-D7s14JCG.js","./arrow-left-BDVMu6ut.js","./star-CXUVfJ8s.js","./crown-Bkdmlc37.js","./download-DFIibxe-.js","./zap-CQJoEO-g.js","./shield-DSoskD-c.js","./chart-column-DoUryAXS.js","./circle-check-big-DcMEd0KV.js","./SubscriptionsPage-BW6M_1kO.js","./contentService-Cxdf08Uc.js","./calendar-DYpYXkMW.js","./AuthPage-Bk33vzoa.js","./TopUpPage-D1sGJ46Q.js","./select-QKdc2TYn.js","./AdminTopupsPage-2d09w3qZ.js","./AdminNotificationsPage-DrTU2ja9.js","./label-_mnIMROJ.js","./textarea-DK4Tmvmm.js","./link-BcnlpFfX.js","./UserRegisterPage-BkStJ7GT.js","./alert-NHJmLZVr.js","./wallet-MP5ofXFw.js","./user-plus-ClfWlz3y.js","./phone-fkjnGVtI.js","./store-i3EEOQHb.js","./UserAccountSetupPage-DfkNvLbN.js","./DashboardLoginPage-Dx1dVP9h.js","./ProtectedDashboard-C8t-KjRB.js","./badge-Cq-GDK1F.js","./MasterPinDialog-CDin1iyv.js","./circle-alert-BbiXZQj6.js","./profitService-4r9FqAF7.js","./dollar-sign-bNLkxbzG.js","./circle-x-CAZlwHZs.js","./ProtectedUserDashboard-C-4M1qmw.js","./broadcastService-DGqqg97J.js","./MerchantDashboard-MhD3X7nR.js","./dropdown-menu-MkPhHRIa.js","./index-CS8iiUxP.js","./WalletsManagement-B4QYl-Sx.js","./progress-BOoGedvV.js","./square-pen-CHl7RpbW.js","./PendingApprovalPage-Cwm_Vl7i.js","./freeTrialService-BwabY7bi.js","./AdminLogin-K9PWWH_Q.js","./ProtectedAdminDashboard-B6elE5YX.js","./ProfileIcon-DCyirBaq.js","./switch-CNGODERG.js","./separator-Dk6MyxBB.js","./save-DZtCbiME.js","./users-D_RD5-UM.js","./AuthTestPage-DIITkwbv.js","./ProfileSettingsPage-B-oVcHqn.js","./walletSelectionPinService-DoL5ZSmj.js","./TransactionsPage-ByCAGb8I.js","./MaintenanceDialog-BLQvmu15.js","./WalletAdditionPage-C24d5nZ3.js","./ReferralsPage-D564qIVT.js","./CPanelPage-DnPtgr8M.js","./CPanelLoginPage-Zrepfhau.js","./UserDashboardPage-BRKQ-meY.js"])))=>i.map(i=>d[i]);
var q2=Object.defineProperty;var yT=t=>{throw TypeError(t)};var H2=(t,e,n)=>e in t?q2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Cg=(t,e,n)=>H2(t,typeof e!="symbol"?e+"":e,n),Dg=(t,e,n)=>e.has(t)||yT("Cannot "+n);var K=(t,e,n)=>(Dg(t,e,"read from private field"),n?n.call(t):e.get(t)),ct=(t,e,n)=>e.has(t)?yT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>(Dg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Mn=(t,e,n)=>(Dg(t,e,"access private method"),n);var Th=(t,e,n,r)=>({set _(s){qe(t,e,s,n)},get _(){return K(t,e,r)}});function K2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Vx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mx={exports:{}},lm={},Fx={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd=Symbol.for("react.element"),G2=Symbol.for("react.portal"),Q2=Symbol.for("react.fragment"),Y2=Symbol.for("react.strict_mode"),J2=Symbol.for("react.profiler"),X2=Symbol.for("react.provider"),Z2=Symbol.for("react.context"),eL=Symbol.for("react.forward_ref"),tL=Symbol.for("react.suspense"),nL=Symbol.for("react.memo"),rL=Symbol.for("react.lazy"),vT=Symbol.iterator;function sL(t){return t===null||typeof t!="object"?null:(t=vT&&t[vT]||t["@@iterator"],typeof t=="function"?t:null)}var Ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jx=Object.assign,$x={};function Tc(t,e,n){this.props=t,this.context=e,this.refs=$x,this.updater=n||Ux}Tc.prototype.isReactComponent={};Tc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bx(){}Bx.prototype=Tc.prototype;function Jw(t,e,n){this.props=t,this.context=e,this.refs=$x,this.updater=n||Ux}var Xw=Jw.prototype=new Bx;Xw.constructor=Jw;jx(Xw,Tc.prototype);Xw.isPureReactComponent=!0;var wT=Array.isArray,zx=Object.prototype.hasOwnProperty,Zw={current:null},Wx={key:!0,ref:!0,__self:!0,__source:!0};function qx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)zx.call(e,r)&&!Wx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Bd,type:t,key:i,ref:o,props:s,_owner:Zw.current}}function iL(t,e){return{$$typeof:Bd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function e_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bd}function oL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _T=/\/+/g;function kg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oL(""+t.key):e.toString(36)}function ff(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bd:case G2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+kg(o,0):r,wT(s)?(n="",t!=null&&(n=t.replace(_T,"$&/")+"/"),ff(s,e,n,"",function(c){return c})):s!=null&&(e_(s)&&(s=iL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(_T,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",wT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+kg(i,a);o+=ff(i,e,n,l,s)}else if(l=sL(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+kg(i,a++),o+=ff(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ih(t,e,n){if(t==null)return t;var r=[],s=0;return ff(t,r,"","",function(i){return e.call(n,i,s++)}),r}function aL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},pf={transition:null},lL={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:pf,ReactCurrentOwner:Zw};function Hx(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Ih,forEach:function(t,e,n){Ih(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ih(t,function(){e++}),e},toArray:function(t){return Ih(t,function(e){return e})||[]},only:function(t){if(!e_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=Tc;nt.Fragment=Q2;nt.Profiler=J2;nt.PureComponent=Jw;nt.StrictMode=Y2;nt.Suspense=tL;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lL;nt.act=Hx;nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zx.call(e,l)&&!Wx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Bd,type:t.type,key:s,ref:i,props:r,_owner:o}};nt.createContext=function(t){return t={$$typeof:Z2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:X2,_context:t},t.Consumer=t};nt.createElement=qx;nt.createFactory=function(t){var e=qx.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:eL,render:t}};nt.isValidElement=e_;nt.lazy=function(t){return{$$typeof:rL,_payload:{_status:-1,_result:t},_init:aL}};nt.memo=function(t,e){return{$$typeof:nL,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=pf.transition;pf.transition={};try{t()}finally{pf.transition=e}};nt.unstable_act=Hx;nt.useCallback=function(t,e){return rr.current.useCallback(t,e)};nt.useContext=function(t){return rr.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};nt.useEffect=function(t,e){return rr.current.useEffect(t,e)};nt.useId=function(){return rr.current.useId()};nt.useImperativeHandle=function(t,e,n){return rr.current.useImperativeHandle(t,e,n)};nt.useInsertionEffect=function(t,e){return rr.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return rr.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return rr.current.useMemo(t,e)};nt.useReducer=function(t,e,n){return rr.current.useReducer(t,e,n)};nt.useRef=function(t){return rr.current.useRef(t)};nt.useState=function(t){return rr.current.useState(t)};nt.useSyncExternalStore=function(t,e,n){return rr.current.useSyncExternalStore(t,e,n)};nt.useTransition=function(){return rr.current.useTransition()};nt.version="18.3.1";Fx.exports=nt;var S=Fx.exports;const j=Vx(S),t_=K2({__proto__:null,default:j},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cL=S,uL=Symbol.for("react.element"),dL=Symbol.for("react.fragment"),hL=Object.prototype.hasOwnProperty,fL=cL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pL={key:!0,ref:!0,__self:!0,__source:!0};function Kx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hL.call(e,r)&&!pL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:uL,type:t,key:i,ref:o,props:s,_owner:fL.current}}lm.Fragment=dL;lm.jsx=Kx;lm.jsxs=Kx;Mx.exports=lm;var I=Mx.exports,Gx={exports:{}},kr={},Qx={exports:{}},Yx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var oe=F.length;F.push(q);e:for(;0<oe;){var de=oe-1>>>1,Q=F[de];if(0<s(Q,q))F[de]=q,F[oe]=Q,oe=de;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],oe=F.pop();if(oe!==q){F[0]=oe;e:for(var de=0,Q=F.length,Ce=Q>>>1;de<Ce;){var be=2*(de+1)-1,Ve=F[be],Ge=be+1,Se=F[Ge];if(0>s(Ve,oe))Ge<Q&&0>s(Se,Ve)?(F[de]=Se,F[Ge]=oe,de=Ge):(F[de]=Ve,F[be]=oe,de=be);else if(Ge<Q&&0>s(Se,oe))F[de]=Se,F[Ge]=oe,de=Ge;else break e}}return q}function s(F,q){var oe=F.sortIndex-q.sortIndex;return oe!==0?oe:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,_=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=F)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function R(F){if(m=!1,w(F),!_)if(n(l)!==null)_=!0,ee(D);else{var q=n(c);q!==null&&z(R,q.startTime-F)}}function D(F,q){_=!1,m&&(m=!1,E(A),A=-1),p=!0;var oe=f;try{for(w(q),h=n(l);h!==null&&(!(h.expirationTime>q)||F&&!k());){var de=h.callback;if(typeof de=="function"){h.callback=null,f=h.priorityLevel;var Q=de(h.expirationTime<=q);q=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===n(l)&&r(l),w(q)}else r(l);h=n(l)}if(h!==null)var Ce=!0;else{var be=n(c);be!==null&&z(R,be.startTime-q),Ce=!1}return Ce}finally{h=null,f=oe,p=!1}}var L=!1,x=null,A=-1,b=5,P=-1;function k(){return!(t.unstable_now()-P<b)}function O(){if(x!==null){var F=t.unstable_now();P=F;var q=!0;try{q=x(!0,F)}finally{q?C():(L=!1,x=null)}}else L=!1}var C;if(typeof y=="function")C=function(){y(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,te=B.port2;B.port1.onmessage=O,C=function(){te.postMessage(null)}}else C=function(){v(O,0)};function ee(F){x=F,L||(L=!0,C())}function z(F,q){A=v(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||p||(_=!0,ee(D))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var oe=f;f=q;try{return F()}finally{f=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var oe=f;f=F;try{return q()}finally{f=oe}},t.unstable_scheduleCallback=function(F,q,oe){var de=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?de+oe:de):oe=de,F){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=oe+Q,F={id:d++,callback:q,priorityLevel:F,startTime:oe,expirationTime:Q,sortIndex:-1},oe>de?(F.sortIndex=oe,e(c,F),n(l)===null&&F===n(c)&&(m?(E(A),A=-1):m=!0,z(R,oe-de))):(F.sortIndex=Q,e(l,F),_||p||(_=!0,ee(D))),F},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(F){var q=f;return function(){var oe=f;f=q;try{return F.apply(this,arguments)}finally{f=oe}}}})(Yx);Qx.exports=Yx;var mL=Qx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gL=S,Cr=mL;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jx=new Set,Ju={};function Ua(t,e){Hl(t,e),Hl(t+"Capture",e)}function Hl(t,e){for(Ju[t]=e,t=0;t<e.length;t++)Jx.add(e[t])}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ky=Object.prototype.hasOwnProperty,yL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ET={},TT={};function vL(t){return Ky.call(TT,t)?!0:Ky.call(ET,t)?!1:yL.test(t)?TT[t]=!0:(ET[t]=!0,!1)}function wL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _L(t,e,n,r){if(e===null||typeof e>"u"||wL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var n_=/[\-:]([a-z])/g;function r_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(n_,r_);Dn[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(n_,r_);Dn[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(n_,r_);Dn[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function s_(t,e,n,r){var s=Dn.hasOwnProperty(e)?Dn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_L(e,n,s,r)&&(n=null),r||s===null?vL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var di=gL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sh=Symbol.for("react.element"),fl=Symbol.for("react.portal"),pl=Symbol.for("react.fragment"),i_=Symbol.for("react.strict_mode"),Gy=Symbol.for("react.profiler"),Xx=Symbol.for("react.provider"),Zx=Symbol.for("react.context"),o_=Symbol.for("react.forward_ref"),Qy=Symbol.for("react.suspense"),Yy=Symbol.for("react.suspense_list"),a_=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),eR=Symbol.for("react.offscreen"),IT=Symbol.iterator;function eu(t){return t===null||typeof t!="object"?null:(t=IT&&t[IT]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,Ng;function gu(t){if(Ng===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ng=e&&e[1]||""}return`
`+Ng+t}var Og=!1;function Lg(t,e){if(!t||Og)return"";Og=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Og=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gu(t):""}function EL(t){switch(t.tag){case 5:return gu(t.type);case 16:return gu("Lazy");case 13:return gu("Suspense");case 19:return gu("SuspenseList");case 0:case 2:case 15:return t=Lg(t.type,!1),t;case 11:return t=Lg(t.type.render,!1),t;case 1:return t=Lg(t.type,!0),t;default:return""}}function Jy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pl:return"Fragment";case fl:return"Portal";case Gy:return"Profiler";case i_:return"StrictMode";case Qy:return"Suspense";case Yy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zx:return(t.displayName||"Context")+".Consumer";case Xx:return(t._context.displayName||"Context")+".Provider";case o_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case a_:return e=t.displayName||null,e!==null?e:Jy(t.type)||"Memo";case Oi:e=t._payload,t=t._init;try{return Jy(t(e))}catch{}}return null}function TL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jy(e);case 8:return e===i_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IL(t){var e=tR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bh(t){t._valueTracker||(t._valueTracker=IL(t))}function nR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xy(t,e){var n=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ST(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=po(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rR(t,e){e=e.checked,e!=null&&s_(t,"checked",e,!1)}function Zy(t,e){rR(t,e);var n=po(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ev(t,e.type,n):e.hasOwnProperty("defaultValue")&&ev(t,e.type,po(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ev(t,e,n){(e!=="number"||qf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yu=Array.isArray;function Al(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+po(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function AT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(yu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:po(n)}}function sR(t,e){var n=po(e.value),r=po(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ah,oR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ah=Ah||document.createElement("div"),Ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SL=["Webkit","ms","Moz","O"];Object.keys(Ru).forEach(function(t){SL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ru[e]=Ru[t]})});function aR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ru.hasOwnProperty(t)&&Ru[t]?(""+e).trim():e+"px"}function lR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=aR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var bL=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rv(t,e){if(e){if(bL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function sv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=null;function l_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ov=null,xl=null,Rl=null;function RT(t){if(t=qd(t)){if(typeof ov!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=fm(e),ov(t.stateNode,t.type,e))}}function cR(t){xl?Rl?Rl.push(t):Rl=[t]:xl=t}function uR(){if(xl){var t=xl,e=Rl;if(Rl=xl=null,RT(t),e)for(t=0;t<e.length;t++)RT(e[t])}}function dR(t,e){return t(e)}function hR(){}var Vg=!1;function fR(t,e,n){if(Vg)return t(e,n);Vg=!0;try{return dR(t,e,n)}finally{Vg=!1,(xl!==null||Rl!==null)&&(hR(),uR())}}function Zu(t,e){var n=t.stateNode;if(n===null)return null;var r=fm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var av=!1;if(ei)try{var tu={};Object.defineProperty(tu,"passive",{get:function(){av=!0}}),window.addEventListener("test",tu,tu),window.removeEventListener("test",tu,tu)}catch{av=!1}function AL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Pu=!1,Hf=null,Kf=!1,lv=null,xL={onError:function(t){Pu=!0,Hf=t}};function RL(t,e,n,r,s,i,o,a,l){Pu=!1,Hf=null,AL.apply(xL,arguments)}function PL(t,e,n,r,s,i,o,a,l){if(RL.apply(this,arguments),Pu){if(Pu){var c=Hf;Pu=!1,Hf=null}else throw Error(ne(198));Kf||(Kf=!0,lv=c)}}function ja(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function PT(t){if(ja(t)!==t)throw Error(ne(188))}function CL(t){var e=t.alternate;if(!e){if(e=ja(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return PT(s),t;if(i===r)return PT(s),e;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function mR(t){return t=CL(t),t!==null?gR(t):null}function gR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gR(t);if(e!==null)return e;t=t.sibling}return null}var yR=Cr.unstable_scheduleCallback,CT=Cr.unstable_cancelCallback,DL=Cr.unstable_shouldYield,kL=Cr.unstable_requestPaint,on=Cr.unstable_now,NL=Cr.unstable_getCurrentPriorityLevel,c_=Cr.unstable_ImmediatePriority,vR=Cr.unstable_UserBlockingPriority,Gf=Cr.unstable_NormalPriority,OL=Cr.unstable_LowPriority,wR=Cr.unstable_IdlePriority,cm=null,xs=null;function LL(t){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(cm,t,void 0,(t.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:FL,VL=Math.log,ML=Math.LN2;function FL(t){return t>>>=0,t===0?32:31-(VL(t)/ML|0)|0}var xh=64,Rh=4194304;function vu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=vu(a):(i&=o,i!==0&&(r=vu(i)))}else o=n&~s,o!==0?r=vu(o):i!==0&&(r=vu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-es(e),s=1<<n,r|=t[n],e&=~s;return r}function UL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-es(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=UL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function cv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _R(){var t=xh;return xh<<=1,!(xh&4194240)&&(xh=64),t}function Mg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-es(e),t[e]=n}function $L(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-es(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function u_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-es(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _t=0;function ER(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TR,d_,IR,SR,bR,uv=!1,Ph=[],Ji=null,Xi=null,Zi=null,ed=new Map,td=new Map,Vi=[],BL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DT(t,e){switch(t){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":ed.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":td.delete(e.pointerId)}}function nu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qd(e),e!==null&&d_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zL(t,e,n,r,s){switch(e){case"focusin":return Ji=nu(Ji,t,e,n,r,s),!0;case"dragenter":return Xi=nu(Xi,t,e,n,r,s),!0;case"mouseover":return Zi=nu(Zi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ed.set(i,nu(ed.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,td.set(i,nu(td.get(i)||null,t,e,n,r,s)),!0}return!1}function AR(t){var e=Zo(t.target);if(e!==null){var n=ja(e);if(n!==null){if(e=n.tag,e===13){if(e=pR(n),e!==null){t.blockedOn=e,bR(t.priority,function(){IR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);iv=r,n.target.dispatchEvent(r),iv=null}else return e=qd(n),e!==null&&d_(e),t.blockedOn=n,!1;e.shift()}return!0}function kT(t,e,n){mf(t)&&n.delete(e)}function WL(){uv=!1,Ji!==null&&mf(Ji)&&(Ji=null),Xi!==null&&mf(Xi)&&(Xi=null),Zi!==null&&mf(Zi)&&(Zi=null),ed.forEach(kT),td.forEach(kT)}function ru(t,e){t.blockedOn===e&&(t.blockedOn=null,uv||(uv=!0,Cr.unstable_scheduleCallback(Cr.unstable_NormalPriority,WL)))}function nd(t){function e(s){return ru(s,t)}if(0<Ph.length){ru(Ph[0],t);for(var n=1;n<Ph.length;n++){var r=Ph[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ji!==null&&ru(Ji,t),Xi!==null&&ru(Xi,t),Zi!==null&&ru(Zi,t),ed.forEach(e),td.forEach(e),n=0;n<Vi.length;n++)r=Vi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vi.length&&(n=Vi[0],n.blockedOn===null);)AR(n),n.blockedOn===null&&Vi.shift()}var Pl=di.ReactCurrentBatchConfig,Yf=!0;function qL(t,e,n,r){var s=_t,i=Pl.transition;Pl.transition=null;try{_t=1,h_(t,e,n,r)}finally{_t=s,Pl.transition=i}}function HL(t,e,n,r){var s=_t,i=Pl.transition;Pl.transition=null;try{_t=4,h_(t,e,n,r)}finally{_t=s,Pl.transition=i}}function h_(t,e,n,r){if(Yf){var s=dv(t,e,n,r);if(s===null)Kg(t,e,r,Jf,n),DT(t,r);else if(zL(s,t,e,n,r))r.stopPropagation();else if(DT(t,r),e&4&&-1<BL.indexOf(t)){for(;s!==null;){var i=qd(s);if(i!==null&&TR(i),i=dv(t,e,n,r),i===null&&Kg(t,e,r,Jf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Kg(t,e,r,null,n)}}var Jf=null;function dv(t,e,n,r){if(Jf=null,t=l_(r),t=Zo(t),t!==null)if(e=ja(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jf=t,null}function xR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NL()){case c_:return 1;case vR:return 4;case Gf:case OL:return 16;case wR:return 536870912;default:return 16}default:return 16}}var qi=null,f_=null,gf=null;function RR(){if(gf)return gf;var t,e=f_,n=e.length,r,s="value"in qi?qi.value:qi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return gf=s.slice(t,1<r?1-r:void 0)}function yf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ch(){return!0}function NT(){return!1}function Nr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ch:NT,this.isPropagationStopped=NT,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ch)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ch)},persist:function(){},isPersistent:Ch}),e}var Ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p_=Nr(Ic),Wd=Qt({},Ic,{view:0,detail:0}),KL=Nr(Wd),Fg,Ug,su,um=Qt({},Wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==su&&(su&&t.type==="mousemove"?(Fg=t.screenX-su.screenX,Ug=t.screenY-su.screenY):Ug=Fg=0,su=t),Fg)},movementY:function(t){return"movementY"in t?t.movementY:Ug}}),OT=Nr(um),GL=Qt({},um,{dataTransfer:0}),QL=Nr(GL),YL=Qt({},Wd,{relatedTarget:0}),jg=Nr(YL),JL=Qt({},Ic,{animationName:0,elapsedTime:0,pseudoElement:0}),XL=Nr(JL),ZL=Qt({},Ic,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eV=Nr(ZL),tV=Qt({},Ic,{data:0}),LT=Nr(tV),nV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sV[t])?!!e[t]:!1}function m_(){return iV}var oV=Qt({},Wd,{key:function(t){if(t.key){var e=nV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m_,charCode:function(t){return t.type==="keypress"?yf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aV=Nr(oV),lV=Qt({},um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VT=Nr(lV),cV=Qt({},Wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m_}),uV=Nr(cV),dV=Qt({},Ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),hV=Nr(dV),fV=Qt({},um,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pV=Nr(fV),mV=[9,13,27,32],g_=ei&&"CompositionEvent"in window,Cu=null;ei&&"documentMode"in document&&(Cu=document.documentMode);var gV=ei&&"TextEvent"in window&&!Cu,PR=ei&&(!g_||Cu&&8<Cu&&11>=Cu),MT=" ",FT=!1;function CR(t,e){switch(t){case"keyup":return mV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ml=!1;function yV(t,e){switch(t){case"compositionend":return DR(e);case"keypress":return e.which!==32?null:(FT=!0,MT);case"textInput":return t=e.data,t===MT&&FT?null:t;default:return null}}function vV(t,e){if(ml)return t==="compositionend"||!g_&&CR(t,e)?(t=RR(),gf=f_=qi=null,ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PR&&e.locale!=="ko"?null:e.data;default:return null}}var wV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wV[t.type]:e==="textarea"}function kR(t,e,n,r){cR(r),e=Xf(e,"onChange"),0<e.length&&(n=new p_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Du=null,rd=null;function _V(t){zR(t,0)}function dm(t){var e=vl(t);if(nR(e))return t}function EV(t,e){if(t==="change")return e}var NR=!1;if(ei){var $g;if(ei){var Bg="oninput"in document;if(!Bg){var jT=document.createElement("div");jT.setAttribute("oninput","return;"),Bg=typeof jT.oninput=="function"}$g=Bg}else $g=!1;NR=$g&&(!document.documentMode||9<document.documentMode)}function $T(){Du&&(Du.detachEvent("onpropertychange",OR),rd=Du=null)}function OR(t){if(t.propertyName==="value"&&dm(rd)){var e=[];kR(e,rd,t,l_(t)),fR(_V,e)}}function TV(t,e,n){t==="focusin"?($T(),Du=e,rd=n,Du.attachEvent("onpropertychange",OR)):t==="focusout"&&$T()}function IV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dm(rd)}function SV(t,e){if(t==="click")return dm(e)}function bV(t,e){if(t==="input"||t==="change")return dm(e)}function AV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ss=typeof Object.is=="function"?Object.is:AV;function sd(t,e){if(ss(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ky.call(e,s)||!ss(t[s],e[s]))return!1}return!0}function BT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zT(t,e){var n=BT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=BT(n)}}function LR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VR(){for(var t=window,e=qf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qf(t.document)}return e}function y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xV(t){var e=VR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LR(n.ownerDocument.documentElement,n)){if(r!==null&&y_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zT(n,i);var o=zT(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RV=ei&&"documentMode"in document&&11>=document.documentMode,gl=null,hv=null,ku=null,fv=!1;function WT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fv||gl==null||gl!==qf(r)||(r=gl,"selectionStart"in r&&y_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ku&&sd(ku,r)||(ku=r,r=Xf(hv,"onSelect"),0<r.length&&(e=new p_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gl)))}function Dh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yl={animationend:Dh("Animation","AnimationEnd"),animationiteration:Dh("Animation","AnimationIteration"),animationstart:Dh("Animation","AnimationStart"),transitionend:Dh("Transition","TransitionEnd")},zg={},MR={};ei&&(MR=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function hm(t){if(zg[t])return zg[t];if(!yl[t])return t;var e=yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in MR)return zg[t]=e[n];return t}var FR=hm("animationend"),UR=hm("animationiteration"),jR=hm("animationstart"),$R=hm("transitionend"),BR=new Map,qT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(t,e){BR.set(t,e),Ua(e,[t])}for(var Wg=0;Wg<qT.length;Wg++){var qg=qT[Wg],PV=qg.toLowerCase(),CV=qg[0].toUpperCase()+qg.slice(1);Ao(PV,"on"+CV)}Ao(FR,"onAnimationEnd");Ao(UR,"onAnimationIteration");Ao(jR,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao($R,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);Ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ua("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DV=new Set("cancel close invalid load scroll toggle".split(" ").concat(wu));function HT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PL(r,e,void 0,t),t.currentTarget=null}function zR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;HT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;HT(s,a,c),i=l}}}if(Kf)throw t=lv,Kf=!1,lv=null,t}function Ot(t,e){var n=e[vv];n===void 0&&(n=e[vv]=new Set);var r=t+"__bubble";n.has(r)||(WR(e,t,2,!1),n.add(r))}function Hg(t,e,n){var r=0;e&&(r|=4),WR(n,t,r,e)}var kh="_reactListening"+Math.random().toString(36).slice(2);function id(t){if(!t[kh]){t[kh]=!0,Jx.forEach(function(n){n!=="selectionchange"&&(DV.has(n)||Hg(n,!1,t),Hg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kh]||(e[kh]=!0,Hg("selectionchange",!1,e))}}function WR(t,e,n,r){switch(xR(e)){case 1:var s=qL;break;case 4:s=HL;break;default:s=h_}n=s.bind(null,e,n,t),s=void 0,!av||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Kg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Zo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}fR(function(){var c=i,d=l_(n),h=[];e:{var f=BR.get(t);if(f!==void 0){var p=p_,_=t;switch(t){case"keypress":if(yf(n)===0)break e;case"keydown":case"keyup":p=aV;break;case"focusin":_="focus",p=jg;break;case"focusout":_="blur",p=jg;break;case"beforeblur":case"afterblur":p=jg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=OT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=QL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=uV;break;case FR:case UR:case jR:p=XL;break;case $R:p=hV;break;case"scroll":p=KL;break;case"wheel":p=pV;break;case"copy":case"cut":case"paste":p=eV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=VT}var m=(e&4)!==0,v=!m&&t==="scroll",E=m?f!==null?f+"Capture":null:f;m=[];for(var y=c,w;y!==null;){w=y;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,E!==null&&(R=Zu(y,E),R!=null&&m.push(od(y,R,w)))),v)break;y=y.return}0<m.length&&(f=new p(f,_,null,n,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==iv&&(_=n.relatedTarget||n.fromElement)&&(Zo(_)||_[ti]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=c,_=_?Zo(_):null,_!==null&&(v=ja(_),_!==v||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=c),p!==_)){if(m=OT,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=VT,R="onPointerLeave",E="onPointerEnter",y="pointer"),v=p==null?f:vl(p),w=_==null?f:vl(_),f=new m(R,y+"leave",p,n,d),f.target=v,f.relatedTarget=w,R=null,Zo(d)===c&&(m=new m(E,y+"enter",_,n,d),m.target=w,m.relatedTarget=v,R=m),v=R,p&&_)t:{for(m=p,E=_,y=0,w=m;w;w=Ya(w))y++;for(w=0,R=E;R;R=Ya(R))w++;for(;0<y-w;)m=Ya(m),y--;for(;0<w-y;)E=Ya(E),w--;for(;y--;){if(m===E||E!==null&&m===E.alternate)break t;m=Ya(m),E=Ya(E)}m=null}else m=null;p!==null&&KT(h,f,p,m,!1),_!==null&&v!==null&&KT(h,v,_,m,!0)}}e:{if(f=c?vl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var D=EV;else if(UT(f))if(NR)D=bV;else{D=IV;var L=TV}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=SV);if(D&&(D=D(t,c))){kR(h,D,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&ev(f,"number",f.value)}switch(L=c?vl(c):window,t){case"focusin":(UT(L)||L.contentEditable==="true")&&(gl=L,hv=c,ku=null);break;case"focusout":ku=hv=gl=null;break;case"mousedown":fv=!0;break;case"contextmenu":case"mouseup":case"dragend":fv=!1,WT(h,n,d);break;case"selectionchange":if(RV)break;case"keydown":case"keyup":WT(h,n,d)}var x;if(g_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ml?CR(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(PR&&n.locale!=="ko"&&(ml||A!=="onCompositionStart"?A==="onCompositionEnd"&&ml&&(x=RR()):(qi=d,f_="value"in qi?qi.value:qi.textContent,ml=!0)),L=Xf(c,A),0<L.length&&(A=new LT(A,t,null,n,d),h.push({event:A,listeners:L}),x?A.data=x:(x=DR(n),x!==null&&(A.data=x)))),(x=gV?yV(t,n):vV(t,n))&&(c=Xf(c,"onBeforeInput"),0<c.length&&(d=new LT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=x))}zR(h,e)})}function od(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zu(t,n),i!=null&&r.unshift(od(t,i,s)),i=Zu(t,e),i!=null&&r.push(od(t,i,s))),t=t.return}return r}function Ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Zu(n,i),l!=null&&o.unshift(od(n,l,a))):s||(l=Zu(n,i),l!=null&&o.push(od(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kV=/\r\n?/g,NV=/\u0000|\uFFFD/g;function GT(t){return(typeof t=="string"?t:""+t).replace(kV,`
`).replace(NV,"")}function Nh(t,e,n){if(e=GT(e),GT(t)!==e&&n)throw Error(ne(425))}function Zf(){}var pv=null,mv=null;function gv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yv=typeof setTimeout=="function"?setTimeout:void 0,OV=typeof clearTimeout=="function"?clearTimeout:void 0,QT=typeof Promise=="function"?Promise:void 0,LV=typeof queueMicrotask=="function"?queueMicrotask:typeof QT<"u"?function(t){return QT.resolve(null).then(t).catch(VV)}:yv;function VV(t){setTimeout(function(){throw t})}function Gg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),nd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);nd(e)}function eo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function YT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),Es="__reactFiber$"+Sc,ad="__reactProps$"+Sc,ti="__reactContainer$"+Sc,vv="__reactEvents$"+Sc,MV="__reactListeners$"+Sc,FV="__reactHandles$"+Sc;function Zo(t){var e=t[Es];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ti]||n[Es]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=YT(t);t!==null;){if(n=t[Es])return n;t=YT(t)}return e}t=n,n=t.parentNode}return null}function qd(t){return t=t[Es]||t[ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function fm(t){return t[ad]||null}var wv=[],wl=-1;function xo(t){return{current:t}}function Vt(t){0>wl||(t.current=wv[wl],wv[wl]=null,wl--)}function Rt(t,e){wl++,wv[wl]=t.current,t.current=e}var mo={},Gn=xo(mo),fr=xo(!1),Ia=mo;function Kl(t,e){var n=t.type.contextTypes;if(!n)return mo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pr(t){return t=t.childContextTypes,t!=null}function ep(){Vt(fr),Vt(Gn)}function JT(t,e,n){if(Gn.current!==mo)throw Error(ne(168));Rt(Gn,e),Rt(fr,n)}function qR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,TL(t)||"Unknown",s));return Qt({},n,r)}function tp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mo,Ia=Gn.current,Rt(Gn,t),Rt(fr,fr.current),!0}function XT(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=qR(t,e,Ia),r.__reactInternalMemoizedMergedChildContext=t,Vt(fr),Vt(Gn),Rt(Gn,t)):Vt(fr),Rt(fr,n)}var Bs=null,pm=!1,Qg=!1;function HR(t){Bs===null?Bs=[t]:Bs.push(t)}function UV(t){pm=!0,HR(t)}function Ro(){if(!Qg&&Bs!==null){Qg=!0;var t=0,e=_t;try{var n=Bs;for(_t=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bs=null,pm=!1}catch(s){throw Bs!==null&&(Bs=Bs.slice(t+1)),yR(c_,Ro),s}finally{_t=e,Qg=!1}}return null}var _l=[],El=0,np=null,rp=0,Lr=[],Vr=0,Sa=null,qs=1,Hs="";function jo(t,e){_l[El++]=rp,_l[El++]=np,np=t,rp=e}function KR(t,e,n){Lr[Vr++]=qs,Lr[Vr++]=Hs,Lr[Vr++]=Sa,Sa=t;var r=qs;t=Hs;var s=32-es(r)-1;r&=~(1<<s),n+=1;var i=32-es(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qs=1<<32-es(e)+s|n<<s|r,Hs=i+t}else qs=1<<i|n<<s|r,Hs=t}function v_(t){t.return!==null&&(jo(t,1),KR(t,1,0))}function w_(t){for(;t===np;)np=_l[--El],_l[El]=null,rp=_l[--El],_l[El]=null;for(;t===Sa;)Sa=Lr[--Vr],Lr[Vr]=null,Hs=Lr[--Vr],Lr[Vr]=null,qs=Lr[--Vr],Lr[Vr]=null}var Ar=null,Ir=null,jt=!1,Jr=null;function GR(t,e){var n=Fr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ZT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ar=t,Ir=eo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ar=t,Ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sa!==null?{id:qs,overflow:Hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ar=t,Ir=null,!0):!1;default:return!1}}function _v(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ev(t){if(jt){var e=Ir;if(e){var n=e;if(!ZT(t,e)){if(_v(t))throw Error(ne(418));e=eo(n.nextSibling);var r=Ar;e&&ZT(t,e)?GR(r,n):(t.flags=t.flags&-4097|2,jt=!1,Ar=t)}}else{if(_v(t))throw Error(ne(418));t.flags=t.flags&-4097|2,jt=!1,Ar=t}}}function eI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ar=t}function Oh(t){if(t!==Ar)return!1;if(!jt)return eI(t),jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gv(t.type,t.memoizedProps)),e&&(e=Ir)){if(_v(t))throw QR(),Error(ne(418));for(;e;)GR(t,e),e=eo(e.nextSibling)}if(eI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ir=eo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ir=null}}else Ir=Ar?eo(t.stateNode.nextSibling):null;return!0}function QR(){for(var t=Ir;t;)t=eo(t.nextSibling)}function Gl(){Ir=Ar=null,jt=!1}function __(t){Jr===null?Jr=[t]:Jr.push(t)}var jV=di.ReactCurrentBatchConfig;function iu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Lh(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tI(t){var e=t._init;return e(t._payload)}function YR(t){function e(E,y){if(t){var w=E.deletions;w===null?(E.deletions=[y],E.flags|=16):w.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=so(E,y),E.index=0,E.sibling=null,E}function i(E,y,w){return E.index=w,t?(w=E.alternate,w!==null?(w=w.index,w<y?(E.flags|=2,y):w):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,w,R){return y===null||y.tag!==6?(y=ny(w,E.mode,R),y.return=E,y):(y=s(y,w),y.return=E,y)}function l(E,y,w,R){var D=w.type;return D===pl?d(E,y,w.props.children,R,w.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Oi&&tI(D)===y.type)?(R=s(y,w.props),R.ref=iu(E,y,w),R.return=E,R):(R=Sf(w.type,w.key,w.props,null,E.mode,R),R.ref=iu(E,y,w),R.return=E,R)}function c(E,y,w,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ry(w,E.mode,R),y.return=E,y):(y=s(y,w.children||[]),y.return=E,y)}function d(E,y,w,R,D){return y===null||y.tag!==7?(y=va(w,E.mode,R,D),y.return=E,y):(y=s(y,w),y.return=E,y)}function h(E,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ny(""+y,E.mode,w),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sh:return w=Sf(y.type,y.key,y.props,null,E.mode,w),w.ref=iu(E,null,y),w.return=E,w;case fl:return y=ry(y,E.mode,w),y.return=E,y;case Oi:var R=y._init;return h(E,R(y._payload),w)}if(yu(y)||eu(y))return y=va(y,E.mode,w,null),y.return=E,y;Lh(E,y)}return null}function f(E,y,w,R){var D=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:a(E,y,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sh:return w.key===D?l(E,y,w,R):null;case fl:return w.key===D?c(E,y,w,R):null;case Oi:return D=w._init,f(E,y,D(w._payload),R)}if(yu(w)||eu(w))return D!==null?null:d(E,y,w,R,null);Lh(E,w)}return null}function p(E,y,w,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(w)||null,a(y,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Sh:return E=E.get(R.key===null?w:R.key)||null,l(y,E,R,D);case fl:return E=E.get(R.key===null?w:R.key)||null,c(y,E,R,D);case Oi:var L=R._init;return p(E,y,w,L(R._payload),D)}if(yu(R)||eu(R))return E=E.get(w)||null,d(y,E,R,D,null);Lh(y,R)}return null}function _(E,y,w,R){for(var D=null,L=null,x=y,A=y=0,b=null;x!==null&&A<w.length;A++){x.index>A?(b=x,x=null):b=x.sibling;var P=f(E,x,w[A],R);if(P===null){x===null&&(x=b);break}t&&x&&P.alternate===null&&e(E,x),y=i(P,y,A),L===null?D=P:L.sibling=P,L=P,x=b}if(A===w.length)return n(E,x),jt&&jo(E,A),D;if(x===null){for(;A<w.length;A++)x=h(E,w[A],R),x!==null&&(y=i(x,y,A),L===null?D=x:L.sibling=x,L=x);return jt&&jo(E,A),D}for(x=r(E,x);A<w.length;A++)b=p(x,E,A,w[A],R),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?A:b.key),y=i(b,y,A),L===null?D=b:L.sibling=b,L=b);return t&&x.forEach(function(k){return e(E,k)}),jt&&jo(E,A),D}function m(E,y,w,R){var D=eu(w);if(typeof D!="function")throw Error(ne(150));if(w=D.call(w),w==null)throw Error(ne(151));for(var L=D=null,x=y,A=y=0,b=null,P=w.next();x!==null&&!P.done;A++,P=w.next()){x.index>A?(b=x,x=null):b=x.sibling;var k=f(E,x,P.value,R);if(k===null){x===null&&(x=b);break}t&&x&&k.alternate===null&&e(E,x),y=i(k,y,A),L===null?D=k:L.sibling=k,L=k,x=b}if(P.done)return n(E,x),jt&&jo(E,A),D;if(x===null){for(;!P.done;A++,P=w.next())P=h(E,P.value,R),P!==null&&(y=i(P,y,A),L===null?D=P:L.sibling=P,L=P);return jt&&jo(E,A),D}for(x=r(E,x);!P.done;A++,P=w.next())P=p(x,E,A,P.value,R),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?A:P.key),y=i(P,y,A),L===null?D=P:L.sibling=P,L=P);return t&&x.forEach(function(O){return e(E,O)}),jt&&jo(E,A),D}function v(E,y,w,R){if(typeof w=="object"&&w!==null&&w.type===pl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Sh:e:{for(var D=w.key,L=y;L!==null;){if(L.key===D){if(D=w.type,D===pl){if(L.tag===7){n(E,L.sibling),y=s(L,w.props.children),y.return=E,E=y;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Oi&&tI(D)===L.type){n(E,L.sibling),y=s(L,w.props),y.ref=iu(E,L,w),y.return=E,E=y;break e}n(E,L);break}else e(E,L);L=L.sibling}w.type===pl?(y=va(w.props.children,E.mode,R,w.key),y.return=E,E=y):(R=Sf(w.type,w.key,w.props,null,E.mode,R),R.ref=iu(E,y,w),R.return=E,E=R)}return o(E);case fl:e:{for(L=w.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(E,y.sibling),y=s(y,w.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=ry(w,E.mode,R),y.return=E,E=y}return o(E);case Oi:return L=w._init,v(E,y,L(w._payload),R)}if(yu(w))return _(E,y,w,R);if(eu(w))return m(E,y,w,R);Lh(E,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,w),y.return=E,E=y):(n(E,y),y=ny(w,E.mode,R),y.return=E,E=y),o(E)):n(E,y)}return v}var Ql=YR(!0),JR=YR(!1),sp=xo(null),ip=null,Tl=null,E_=null;function T_(){E_=Tl=ip=null}function I_(t){var e=sp.current;Vt(sp),t._currentValue=e}function Tv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Cl(t,e){ip=t,E_=Tl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cr=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(E_!==t)if(t={context:t,memoizedValue:e,next:null},Tl===null){if(ip===null)throw Error(ne(308));Tl=t,ip.dependencies={lanes:0,firstContext:t}}else Tl=Tl.next=t;return e}var ea=null;function S_(t){ea===null?ea=[t]:ea.push(t)}function XR(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,S_(e)):(n.next=s.next,s.next=n),e.interleaved=n,ni(t,r)}function ni(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Li=!1;function b_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function to(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ft&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ni(t,n)}return s=r.interleaved,s===null?(e.next=e,S_(r)):(e.next=s.next,s.next=e),r.interleaved=e,ni(t,n)}function vf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,u_(t,n)}}function nI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function op(t,e,n,r){var s=t.updateQueue;Li=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,m=a;switch(f=e,p=n,m.tag){case 1:if(_=m.payload,typeof _=="function"){h=_.call(p,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=m.payload,f=typeof _=="function"?_.call(p,h,f):_,f==null)break e;h=Qt({},h,f);break e;case 2:Li=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Aa|=o,t.lanes=o,t.memoizedState=h}}function rI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var Hd={},Rs=xo(Hd),ld=xo(Hd),cd=xo(Hd);function ta(t){if(t===Hd)throw Error(ne(174));return t}function A_(t,e){switch(Rt(cd,e),Rt(ld,t),Rt(Rs,Hd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nv(e,t)}Vt(Rs),Rt(Rs,e)}function Yl(){Vt(Rs),Vt(ld),Vt(cd)}function eP(t){ta(cd.current);var e=ta(Rs.current),n=nv(e,t.type);e!==n&&(Rt(ld,t),Rt(Rs,n))}function x_(t){ld.current===t&&(Vt(Rs),Vt(ld))}var Ht=xo(0);function ap(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yg=[];function R_(){for(var t=0;t<Yg.length;t++)Yg[t]._workInProgressVersionPrimary=null;Yg.length=0}var wf=di.ReactCurrentDispatcher,Jg=di.ReactCurrentBatchConfig,ba=0,Gt=null,yn=null,Sn=null,lp=!1,Nu=!1,ud=0,$V=0;function Fn(){throw Error(ne(321))}function P_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ss(t[n],e[n]))return!1;return!0}function C_(t,e,n,r,s,i){if(ba=i,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wf.current=t===null||t.memoizedState===null?qV:HV,t=n(r,s),Nu){i=0;do{if(Nu=!1,ud=0,25<=i)throw Error(ne(301));i+=1,Sn=yn=null,e.updateQueue=null,wf.current=KV,t=n(r,s)}while(Nu)}if(wf.current=cp,e=yn!==null&&yn.next!==null,ba=0,Sn=yn=Gt=null,lp=!1,e)throw Error(ne(300));return t}function D_(){var t=ud!==0;return ud=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Gt.memoizedState=Sn=t:Sn=Sn.next=t,Sn}function Br(){if(yn===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=yn.next;var e=Sn===null?Gt.memoizedState:Sn.next;if(e!==null)Sn=e,yn=t;else{if(t===null)throw Error(ne(310));yn=t,t={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Sn===null?Gt.memoizedState=Sn=t:Sn=Sn.next=t}return Sn}function dd(t,e){return typeof e=="function"?e(t):e}function Xg(t){var e=Br(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=yn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((ba&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Gt.lanes|=d,Aa|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ss(r,e.memoizedState)||(cr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Gt.lanes|=i,Aa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zg(t){var e=Br(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ss(i,e.memoizedState)||(cr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tP(){}function nP(t,e){var n=Gt,r=Br(),s=e(),i=!ss(r.memoizedState,s);if(i&&(r.memoizedState=s,cr=!0),r=r.queue,k_(iP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Sn!==null&&Sn.memoizedState.tag&1){if(n.flags|=2048,hd(9,sP.bind(null,n,r,s,e),void 0,null),An===null)throw Error(ne(349));ba&30||rP(n,e,s)}return s}function rP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sP(t,e,n,r){e.value=n,e.getSnapshot=r,oP(e)&&aP(t)}function iP(t,e,n){return n(function(){oP(e)&&aP(t)})}function oP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ss(t,n)}catch{return!0}}function aP(t){var e=ni(t,1);e!==null&&ts(e,t,1,-1)}function sI(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dd,lastRenderedState:t},e.queue=t,t=t.dispatch=WV.bind(null,Gt,t),[e.memoizedState,t]}function hd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lP(){return Br().memoizedState}function _f(t,e,n,r){var s=ms();Gt.flags|=t,s.memoizedState=hd(1|e,n,void 0,r===void 0?null:r)}function mm(t,e,n,r){var s=Br();r=r===void 0?null:r;var i=void 0;if(yn!==null){var o=yn.memoizedState;if(i=o.destroy,r!==null&&P_(r,o.deps)){s.memoizedState=hd(e,n,i,r);return}}Gt.flags|=t,s.memoizedState=hd(1|e,n,i,r)}function iI(t,e){return _f(8390656,8,t,e)}function k_(t,e){return mm(2048,8,t,e)}function cP(t,e){return mm(4,2,t,e)}function uP(t,e){return mm(4,4,t,e)}function dP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hP(t,e,n){return n=n!=null?n.concat([t]):null,mm(4,4,dP.bind(null,e,t),n)}function N_(){}function fP(t,e){var n=Br();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&P_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pP(t,e){var n=Br();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&P_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function mP(t,e,n){return ba&21?(ss(n,e)||(n=_R(),Gt.lanes|=n,Aa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cr=!0),t.memoizedState=n)}function BV(t,e){var n=_t;_t=n!==0&&4>n?n:4,t(!0);var r=Jg.transition;Jg.transition={};try{t(!1),e()}finally{_t=n,Jg.transition=r}}function gP(){return Br().memoizedState}function zV(t,e,n){var r=ro(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yP(t))vP(e,n);else if(n=XR(t,e,n,r),n!==null){var s=er();ts(n,t,r,s),wP(n,e,r)}}function WV(t,e,n){var r=ro(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yP(t))vP(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ss(a,o)){var l=e.interleaved;l===null?(s.next=s,S_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=XR(t,e,s,r),n!==null&&(s=er(),ts(n,t,r,s),wP(n,e,r))}}function yP(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function vP(t,e){Nu=lp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,u_(t,n)}}var cp={readContext:$r,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},qV={readContext:$r,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:iI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_f(4194308,4,dP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _f(4194308,4,t,e)},useInsertionEffect:function(t,e){return _f(4,2,t,e)},useMemo:function(t,e){var n=ms();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ms();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zV.bind(null,Gt,t),[r.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:sI,useDebugValue:N_,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=sI(!1),e=t[0];return t=BV.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Gt,s=ms();if(jt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),An===null)throw Error(ne(349));ba&30||rP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,iI(iP.bind(null,r,i,t),[t]),r.flags|=2048,hd(9,sP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ms(),e=An.identifierPrefix;if(jt){var n=Hs,r=qs;n=(r&~(1<<32-es(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ud++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$V++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HV={readContext:$r,useCallback:fP,useContext:$r,useEffect:k_,useImperativeHandle:hP,useInsertionEffect:cP,useLayoutEffect:uP,useMemo:pP,useReducer:Xg,useRef:lP,useState:function(){return Xg(dd)},useDebugValue:N_,useDeferredValue:function(t){var e=Br();return mP(e,yn.memoizedState,t)},useTransition:function(){var t=Xg(dd)[0],e=Br().memoizedState;return[t,e]},useMutableSource:tP,useSyncExternalStore:nP,useId:gP,unstable_isNewReconciler:!1},KV={readContext:$r,useCallback:fP,useContext:$r,useEffect:k_,useImperativeHandle:hP,useInsertionEffect:cP,useLayoutEffect:uP,useMemo:pP,useReducer:Zg,useRef:lP,useState:function(){return Zg(dd)},useDebugValue:N_,useDeferredValue:function(t){var e=Br();return yn===null?e.memoizedState=t:mP(e,yn.memoizedState,t)},useTransition:function(){var t=Zg(dd)[0],e=Br().memoizedState;return[t,e]},useMutableSource:tP,useSyncExternalStore:nP,useId:gP,unstable_isNewReconciler:!1};function Hr(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Iv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gm={isMounted:function(t){return(t=t._reactInternals)?ja(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=er(),s=ro(t),i=Qs(r,s);i.payload=e,n!=null&&(i.callback=n),e=to(t,i,s),e!==null&&(ts(e,t,s,r),vf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=er(),s=ro(t),i=Qs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=to(t,i,s),e!==null&&(ts(e,t,s,r),vf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=er(),r=ro(t),s=Qs(n,r);s.tag=2,e!=null&&(s.callback=e),e=to(t,s,r),e!==null&&(ts(e,t,r,n),vf(e,t,r))}};function oI(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!sd(n,r)||!sd(s,i):!0}function _P(t,e,n){var r=!1,s=mo,i=e.contextType;return typeof i=="object"&&i!==null?i=$r(i):(s=pr(e)?Ia:Gn.current,r=e.contextTypes,i=(r=r!=null)?Kl(t,s):mo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function aI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gm.enqueueReplaceState(e,e.state,null)}function Sv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},b_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$r(i):(i=pr(e)?Ia:Gn.current,s.context=Kl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Iv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gm.enqueueReplaceState(s,s.state,null),op(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Jl(t,e){try{var n="",r=e;do n+=EL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ey(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GV=typeof WeakMap=="function"?WeakMap:Map;function EP(t,e,n){n=Qs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dp||(dp=!0,Lv=r),bv(t,e)},n}function TP(t,e,n){n=Qs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bv(t,e),typeof r!="function"&&(no===null?no=new Set([this]):no.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=lM.bind(null,t,e,n),e.then(t,t))}function cI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uI(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qs(-1,1),e.tag=2,to(n,e,1))),n.lanes|=1),t)}var QV=di.ReactCurrentOwner,cr=!1;function Jn(t,e,n,r){e.child=t===null?JR(e,null,n,r):Ql(e,t.child,n,r)}function dI(t,e,n,r,s){n=n.render;var i=e.ref;return Cl(e,s),r=C_(t,e,n,r,i,s),n=D_(),t!==null&&!cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ri(t,e,s)):(jt&&n&&v_(e),e.flags|=1,Jn(t,e,r,s),e.child)}function hI(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,IP(t,e,i,r,s)):(t=Sf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:sd,n(o,r)&&t.ref===e.ref)return ri(t,e,s)}return e.flags|=1,t=so(i,r),t.ref=e.ref,t.return=e,e.child=t}function IP(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(sd(i,r)&&t.ref===e.ref)if(cr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cr=!0);else return e.lanes=t.lanes,ri(t,e,s)}return Av(t,e,n,r,s)}function SP(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Sl,vr),vr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Sl,vr),vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Rt(Sl,vr),vr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Rt(Sl,vr),vr|=r;return Jn(t,e,s,n),e.child}function bP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Av(t,e,n,r,s){var i=pr(n)?Ia:Gn.current;return i=Kl(e,i),Cl(e,s),n=C_(t,e,n,r,i,s),r=D_(),t!==null&&!cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ri(t,e,s)):(jt&&r&&v_(e),e.flags|=1,Jn(t,e,n,s),e.child)}function fI(t,e,n,r,s){if(pr(n)){var i=!0;tp(e)}else i=!1;if(Cl(e,s),e.stateNode===null)Ef(t,e),_P(e,n,r),Sv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$r(c):(c=pr(n)?Ia:Gn.current,c=Kl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&aI(e,o,r,c),Li=!1;var f=e.memoizedState;o.state=f,op(e,r,o,s),l=e.memoizedState,a!==r||f!==l||fr.current||Li?(typeof d=="function"&&(Iv(e,n,d,r),l=e.memoizedState),(a=Li||oI(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ZR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hr(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$r(l):(l=pr(n)?Ia:Gn.current,l=Kl(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&aI(e,o,r,l),Li=!1,f=e.memoizedState,o.state=f,op(e,r,o,s);var _=e.memoizedState;a!==h||f!==_||fr.current||Li?(typeof p=="function"&&(Iv(e,n,p,r),_=e.memoizedState),(c=Li||oI(e,n,c,r,f,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return xv(t,e,n,r,i,s)}function xv(t,e,n,r,s,i){bP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&XT(e,n,!1),ri(t,e,i);r=e.stateNode,QV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ql(e,t.child,null,i),e.child=Ql(e,null,a,i)):Jn(t,e,a,i),e.memoizedState=r.state,s&&XT(e,n,!0),e.child}function AP(t){var e=t.stateNode;e.pendingContext?JT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JT(t,e.context,!1),A_(t,e.containerInfo)}function pI(t,e,n,r,s){return Gl(),__(s),e.flags|=256,Jn(t,e,n,r),e.child}var Rv={dehydrated:null,treeContext:null,retryLane:0};function Pv(t){return{baseLanes:t,cachePool:null,transitions:null}}function xP(t,e,n){var r=e.pendingProps,s=Ht.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rt(Ht,s&1),t===null)return Ev(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wm(o,r,0,null),t=va(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pv(n),e.memoizedState=Rv,t):O_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return YV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=so(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=so(a,i):(i=va(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Pv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Rv,r}return i=t.child,t=i.sibling,r=so(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function O_(t,e){return e=wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vh(t,e,n,r){return r!==null&&__(r),Ql(e,t.child,null,n),t=O_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function YV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ey(Error(ne(422))),Vh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wm({mode:"visible",children:r.children},s,0,null),i=va(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ql(e,t.child,null,o),e.child.memoizedState=Pv(o),e.memoizedState=Rv,i);if(!(e.mode&1))return Vh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ne(419)),r=ey(i,r,void 0),Vh(t,e,o,r)}if(a=(o&t.childLanes)!==0,cr||a){if(r=An,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ni(t,s),ts(r,t,s,-1))}return j_(),r=ey(Error(ne(421))),Vh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ir=eo(s.nextSibling),Ar=e,jt=!0,Jr=null,t!==null&&(Lr[Vr++]=qs,Lr[Vr++]=Hs,Lr[Vr++]=Sa,qs=t.id,Hs=t.overflow,Sa=e),e=O_(e,r.children),e.flags|=4096,e)}function mI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tv(t.return,e,n)}function ty(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function RP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Jn(t,e,r.children,n),r=Ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mI(t,n,e);else if(t.tag===19)mI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rt(Ht,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ap(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ty(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ap(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ty(e,!0,n,null,i);break;case"together":ty(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ef(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ri(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Aa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=so(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=so(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JV(t,e,n){switch(e.tag){case 3:AP(e),Gl();break;case 5:eP(e);break;case 1:pr(e.type)&&tp(e);break;case 4:A_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Rt(sp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rt(Ht,Ht.current&1),e.flags|=128,null):n&e.child.childLanes?xP(t,e,n):(Rt(Ht,Ht.current&1),t=ri(t,e,n),t!==null?t.sibling:null);Rt(Ht,Ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rt(Ht,Ht.current),r)break;return null;case 22:case 23:return e.lanes=0,SP(t,e,n)}return ri(t,e,n)}var PP,Cv,CP,DP;PP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cv=function(){};CP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ta(Rs.current);var i=null;switch(n){case"input":s=Xy(t,s),r=Xy(t,r),i=[];break;case"select":s=Qt({},s,{value:void 0}),r=Qt({},r,{value:void 0}),i=[];break;case"textarea":s=tv(t,s),r=tv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zf)}rv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ju.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ju.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ot("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};DP=function(t,e,n,r){n!==r&&(e.flags|=4)};function ou(t,e){if(!jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XV(t,e,n){var r=e.pendingProps;switch(w_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return pr(e.type)&&ep(),Un(e),null;case 3:return r=e.stateNode,Yl(),Vt(fr),Vt(Gn),R_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jr!==null&&(Fv(Jr),Jr=null))),Cv(t,e),Un(e),null;case 5:x_(e);var s=ta(cd.current);if(n=e.type,t!==null&&e.stateNode!=null)CP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Un(e),null}if(t=ta(Rs.current),Oh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Es]=e,r[ad]=i,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(s=0;s<wu.length;s++)Ot(wu[s],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":ST(r,i),Ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ot("invalid",r);break;case"textarea":AT(r,i),Ot("invalid",r)}rv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Nh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Nh(r.textContent,a,t),s=["children",""+a]):Ju.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ot("scroll",r)}switch(n){case"input":bh(r),bT(r,i,!0);break;case"textarea":bh(r),xT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Zf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Es]=e,t[ad]=r,PP(t,e,!1,!1),e.stateNode=t;e:{switch(o=sv(n,r),n){case"dialog":Ot("cancel",t),Ot("close",t),s=r;break;case"iframe":case"object":case"embed":Ot("load",t),s=r;break;case"video":case"audio":for(s=0;s<wu.length;s++)Ot(wu[s],t);s=r;break;case"source":Ot("error",t),s=r;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),s=r;break;case"details":Ot("toggle",t),s=r;break;case"input":ST(t,r),s=Xy(t,r),Ot("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qt({},r,{value:void 0}),Ot("invalid",t);break;case"textarea":AT(t,r),s=tv(t,r),Ot("invalid",t);break;default:s=r}rv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?lR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&oR(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Xu(t,l):typeof l=="number"&&Xu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ju.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ot("scroll",t):l!=null&&s_(t,i,l,o))}switch(n){case"input":bh(t),bT(t,r,!1);break;case"textarea":bh(t),xT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+po(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Al(t,!!r.multiple,i,!1):r.defaultValue!=null&&Al(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)DP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=ta(cd.current),ta(Rs.current),Oh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Es]=e,(i=r.nodeValue!==n)&&(t=Ar,t!==null))switch(t.tag){case 3:Nh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Es]=e,e.stateNode=r}return Un(e),null;case 13:if(Vt(Ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&Ir!==null&&e.mode&1&&!(e.flags&128))QR(),Gl(),e.flags|=98560,i=!1;else if(i=Oh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[Es]=e}else Gl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),i=!1}else Jr!==null&&(Fv(Jr),Jr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ht.current&1?vn===0&&(vn=3):j_())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return Yl(),Cv(t,e),t===null&&id(e.stateNode.containerInfo),Un(e),null;case 10:return I_(e.type._context),Un(e),null;case 17:return pr(e.type)&&ep(),Un(e),null;case 19:if(Vt(Ht),i=e.memoizedState,i===null)return Un(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ou(i,!1);else{if(vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ap(t),o!==null){for(e.flags|=128,ou(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rt(Ht,Ht.current&1|2),e.child}t=t.sibling}i.tail!==null&&on()>Xl&&(e.flags|=128,r=!0,ou(i,!1),e.lanes=4194304)}else{if(!r)if(t=ap(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ou(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!jt)return Un(e),null}else 2*on()-i.renderingStartTime>Xl&&n!==1073741824&&(e.flags|=128,r=!0,ou(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=on(),e.sibling=null,n=Ht.current,Rt(Ht,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return U_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vr&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function ZV(t,e){switch(w_(e),e.tag){case 1:return pr(e.type)&&ep(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yl(),Vt(fr),Vt(Gn),R_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x_(e),null;case 13:if(Vt(Ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Gl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(Ht),null;case 4:return Yl(),null;case 10:return I_(e.type._context),null;case 22:case 23:return U_(),null;case 24:return null;default:return null}}var Mh=!1,Wn=!1,eM=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Il(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){en(t,e,r)}else n.current=null}function Dv(t,e,n){try{n()}catch(r){en(t,e,r)}}var gI=!1;function tM(t,e){if(pv=Yf,t=VR(),y_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mv={focusedElem:t,selectionRange:n},Yf=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var m=_.memoizedProps,v=_.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?m:Hr(e.type,m),v);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(R){en(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return _=gI,gI=!1,_}function Ou(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dv(e,n,i)}s=s.next}while(s!==r)}}function ym(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kP(t){var e=t.alternate;e!==null&&(t.alternate=null,kP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Es],delete e[ad],delete e[vv],delete e[MV],delete e[FV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NP(t){return t.tag===5||t.tag===3||t.tag===4}function yI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zf));else if(r!==4&&(t=t.child,t!==null))for(Nv(t,e,n),t=t.sibling;t!==null;)Nv(t,e,n),t=t.sibling}function Ov(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ov(t,e,n),t=t.sibling;t!==null;)Ov(t,e,n),t=t.sibling}var Rn=null,Qr=!1;function bi(t,e,n){for(n=n.child;n!==null;)OP(t,e,n),n=n.sibling}function OP(t,e,n){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(cm,n)}catch{}switch(n.tag){case 5:Wn||Il(n,e);case 6:var r=Rn,s=Qr;Rn=null,bi(t,e,n),Rn=r,Qr=s,Rn!==null&&(Qr?(t=Rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rn.removeChild(n.stateNode));break;case 18:Rn!==null&&(Qr?(t=Rn,n=n.stateNode,t.nodeType===8?Gg(t.parentNode,n):t.nodeType===1&&Gg(t,n),nd(t)):Gg(Rn,n.stateNode));break;case 4:r=Rn,s=Qr,Rn=n.stateNode.containerInfo,Qr=!0,bi(t,e,n),Rn=r,Qr=s;break;case 0:case 11:case 14:case 15:if(!Wn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dv(n,e,o),s=s.next}while(s!==r)}bi(t,e,n);break;case 1:if(!Wn&&(Il(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){en(n,e,a)}bi(t,e,n);break;case 21:bi(t,e,n);break;case 22:n.mode&1?(Wn=(r=Wn)||n.memoizedState!==null,bi(t,e,n),Wn=r):bi(t,e,n);break;default:bi(t,e,n)}}function vI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eM),e.forEach(function(r){var s=uM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rn=a.stateNode,Qr=!1;break e;case 3:Rn=a.stateNode.containerInfo,Qr=!0;break e;case 4:Rn=a.stateNode.containerInfo,Qr=!0;break e}a=a.return}if(Rn===null)throw Error(ne(160));OP(i,o,s),Rn=null,Qr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){en(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LP(e,t),e=e.sibling}function LP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wr(e,t),ps(t),r&4){try{Ou(3,t,t.return),ym(3,t)}catch(m){en(t,t.return,m)}try{Ou(5,t,t.return)}catch(m){en(t,t.return,m)}}break;case 1:Wr(e,t),ps(t),r&512&&n!==null&&Il(n,n.return);break;case 5:if(Wr(e,t),ps(t),r&512&&n!==null&&Il(n,n.return),t.flags&32){var s=t.stateNode;try{Xu(s,"")}catch(m){en(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&rR(s,i),sv(a,o);var c=sv(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?lR(s,h):d==="dangerouslySetInnerHTML"?oR(s,h):d==="children"?Xu(s,h):s_(s,d,h,c)}switch(a){case"input":Zy(s,i);break;case"textarea":sR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Al(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Al(s,!!i.multiple,i.defaultValue,!0):Al(s,!!i.multiple,i.multiple?[]:"",!1))}s[ad]=i}catch(m){en(t,t.return,m)}}break;case 6:if(Wr(e,t),ps(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){en(t,t.return,m)}}break;case 3:if(Wr(e,t),ps(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nd(e.containerInfo)}catch(m){en(t,t.return,m)}break;case 4:Wr(e,t),ps(t);break;case 13:Wr(e,t),ps(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(M_=on())),r&4&&vI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Wn=(c=Wn)||d,Wr(e,t),Wn=c):Wr(e,t),ps(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ve=t,d=t.child;d!==null;){for(h=ve=d;ve!==null;){switch(f=ve,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ou(4,f,f.return);break;case 1:Il(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(m){en(r,n,m)}}break;case 5:Il(f,f.return);break;case 22:if(f.memoizedState!==null){_I(h);continue}}p!==null?(p.return=f,ve=p):_I(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=aR("display",o))}catch(m){en(t,t.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){en(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wr(e,t),ps(t),r&4&&vI(t);break;case 21:break;default:Wr(e,t),ps(t)}}function ps(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NP(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Xu(s,""),r.flags&=-33);var i=yI(t);Ov(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yI(t);Nv(t,a,o);break;default:throw Error(ne(161))}}catch(l){en(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nM(t,e,n){ve=t,VP(t)}function VP(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Mh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Wn;a=Mh;var c=Wn;if(Mh=o,(Wn=l)&&!c)for(ve=s;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?EI(s):l!==null?(l.return=o,ve=l):EI(s);for(;i!==null;)ve=i,VP(i),i=i.sibling;ve=s,Mh=a,Wn=c}wI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ve=i):wI(t)}}function wI(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wn||ym(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Hr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&rI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&nd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Wn||e.flags&512&&kv(e)}catch(f){en(e,e.return,f)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function _I(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function EI(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ym(4,e)}catch(l){en(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){en(e,s,l)}}var i=e.return;try{kv(e)}catch(l){en(e,i,l)}break;case 5:var o=e.return;try{kv(e)}catch(l){en(e,o,l)}}}catch(l){en(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var rM=Math.ceil,up=di.ReactCurrentDispatcher,L_=di.ReactCurrentOwner,Ur=di.ReactCurrentBatchConfig,ft=0,An=null,fn=null,Cn=0,vr=0,Sl=xo(0),vn=0,fd=null,Aa=0,vm=0,V_=0,Lu=null,lr=null,M_=0,Xl=1/0,$s=null,dp=!1,Lv=null,no=null,Fh=!1,Hi=null,hp=0,Vu=0,Vv=null,Tf=-1,If=0;function er(){return ft&6?on():Tf!==-1?Tf:Tf=on()}function ro(t){return t.mode&1?ft&2&&Cn!==0?Cn&-Cn:jV.transition!==null?(If===0&&(If=_R()),If):(t=_t,t!==0||(t=window.event,t=t===void 0?16:xR(t.type)),t):1}function ts(t,e,n,r){if(50<Vu)throw Vu=0,Vv=null,Error(ne(185));zd(t,n,r),(!(ft&2)||t!==An)&&(t===An&&(!(ft&2)&&(vm|=n),vn===4&&Mi(t,Cn)),mr(t,r),n===1&&ft===0&&!(e.mode&1)&&(Xl=on()+500,pm&&Ro()))}function mr(t,e){var n=t.callbackNode;jL(t,e);var r=Qf(t,t===An?Cn:0);if(r===0)n!==null&&CT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&CT(n),e===1)t.tag===0?UV(TI.bind(null,t)):HR(TI.bind(null,t)),LV(function(){!(ft&6)&&Ro()}),n=null;else{switch(ER(r)){case 1:n=c_;break;case 4:n=vR;break;case 16:n=Gf;break;case 536870912:n=wR;break;default:n=Gf}n=WP(n,MP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function MP(t,e){if(Tf=-1,If=0,ft&6)throw Error(ne(327));var n=t.callbackNode;if(Dl()&&t.callbackNode!==n)return null;var r=Qf(t,t===An?Cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fp(t,r);else{e=r;var s=ft;ft|=2;var i=UP();(An!==t||Cn!==e)&&($s=null,Xl=on()+500,ya(t,e));do try{oM();break}catch(a){FP(t,a)}while(!0);T_(),up.current=i,ft=s,fn!==null?e=0:(An=null,Cn=0,e=vn)}if(e!==0){if(e===2&&(s=cv(t),s!==0&&(r=s,e=Mv(t,s))),e===1)throw n=fd,ya(t,0),Mi(t,r),mr(t,on()),n;if(e===6)Mi(t,r);else{if(s=t.current.alternate,!(r&30)&&!sM(s)&&(e=fp(t,r),e===2&&(i=cv(t),i!==0&&(r=i,e=Mv(t,i))),e===1))throw n=fd,ya(t,0),Mi(t,r),mr(t,on()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:$o(t,lr,$s);break;case 3:if(Mi(t,r),(r&130023424)===r&&(e=M_+500-on(),10<e)){if(Qf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yv($o.bind(null,t,lr,$s),e);break}$o(t,lr,$s);break;case 4:if(Mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-es(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rM(r/1960))-r,10<r){t.timeoutHandle=yv($o.bind(null,t,lr,$s),r);break}$o(t,lr,$s);break;case 5:$o(t,lr,$s);break;default:throw Error(ne(329))}}}return mr(t,on()),t.callbackNode===n?MP.bind(null,t):null}function Mv(t,e){var n=Lu;return t.current.memoizedState.isDehydrated&&(ya(t,e).flags|=256),t=fp(t,e),t!==2&&(e=lr,lr=n,e!==null&&Fv(e)),t}function Fv(t){lr===null?lr=t:lr.push.apply(lr,t)}function sM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ss(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mi(t,e){for(e&=~V_,e&=~vm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-es(e),r=1<<n;t[n]=-1,e&=~r}}function TI(t){if(ft&6)throw Error(ne(327));Dl();var e=Qf(t,0);if(!(e&1))return mr(t,on()),null;var n=fp(t,e);if(t.tag!==0&&n===2){var r=cv(t);r!==0&&(e=r,n=Mv(t,r))}if(n===1)throw n=fd,ya(t,0),Mi(t,e),mr(t,on()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$o(t,lr,$s),mr(t,on()),null}function F_(t,e){var n=ft;ft|=1;try{return t(e)}finally{ft=n,ft===0&&(Xl=on()+500,pm&&Ro())}}function xa(t){Hi!==null&&Hi.tag===0&&!(ft&6)&&Dl();var e=ft;ft|=1;var n=Ur.transition,r=_t;try{if(Ur.transition=null,_t=1,t)return t()}finally{_t=r,Ur.transition=n,ft=e,!(ft&6)&&Ro()}}function U_(){vr=Sl.current,Vt(Sl)}function ya(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OV(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch(w_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ep();break;case 3:Yl(),Vt(fr),Vt(Gn),R_();break;case 5:x_(r);break;case 4:Yl();break;case 13:Vt(Ht);break;case 19:Vt(Ht);break;case 10:I_(r.type._context);break;case 22:case 23:U_()}n=n.return}if(An=t,fn=t=so(t.current,null),Cn=vr=e,vn=0,fd=null,V_=vm=Aa=0,lr=Lu=null,ea!==null){for(e=0;e<ea.length;e++)if(n=ea[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ea=null}return t}function FP(t,e){do{var n=fn;try{if(T_(),wf.current=cp,lp){for(var r=Gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lp=!1}if(ba=0,Sn=yn=Gt=null,Nu=!1,ud=0,L_.current=null,n===null||n.return===null){vn=1,fd=e,fn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Cn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=cI(o);if(p!==null){p.flags&=-257,uI(p,o,a,i,e),p.mode&1&&lI(i,c,e),e=p,l=c;var _=e.updateQueue;if(_===null){var m=new Set;m.add(l),e.updateQueue=m}else _.add(l);break e}else{if(!(e&1)){lI(i,c,e),j_();break e}l=Error(ne(426))}}else if(jt&&a.mode&1){var v=cI(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),uI(v,o,a,i,e),__(Jl(l,a));break e}}i=l=Jl(l,a),vn!==4&&(vn=2),Lu===null?Lu=[i]:Lu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=EP(i,l,e);nI(i,E);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(no===null||!no.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=TP(i,a,e);nI(i,R);break e}}i=i.return}while(i!==null)}$P(n)}catch(D){e=D,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function UP(){var t=up.current;return up.current=cp,t===null?cp:t}function j_(){(vn===0||vn===3||vn===2)&&(vn=4),An===null||!(Aa&268435455)&&!(vm&268435455)||Mi(An,Cn)}function fp(t,e){var n=ft;ft|=2;var r=UP();(An!==t||Cn!==e)&&($s=null,ya(t,e));do try{iM();break}catch(s){FP(t,s)}while(!0);if(T_(),ft=n,up.current=r,fn!==null)throw Error(ne(261));return An=null,Cn=0,vn}function iM(){for(;fn!==null;)jP(fn)}function oM(){for(;fn!==null&&!DL();)jP(fn)}function jP(t){var e=zP(t.alternate,t,vr);t.memoizedProps=t.pendingProps,e===null?$P(t):fn=e,L_.current=null}function $P(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZV(n,e),n!==null){n.flags&=32767,fn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vn=6,fn=null;return}}else if(n=XV(n,e,vr),n!==null){fn=n;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=t}while(e!==null);vn===0&&(vn=5)}function $o(t,e,n){var r=_t,s=Ur.transition;try{Ur.transition=null,_t=1,aM(t,e,n,r)}finally{Ur.transition=s,_t=r}return null}function aM(t,e,n,r){do Dl();while(Hi!==null);if(ft&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($L(t,i),t===An&&(fn=An=null,Cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fh||(Fh=!0,WP(Gf,function(){return Dl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ur.transition,Ur.transition=null;var o=_t;_t=1;var a=ft;ft|=4,L_.current=null,tM(t,n),LP(n,t),xV(mv),Yf=!!pv,mv=pv=null,t.current=n,nM(n),kL(),ft=a,_t=o,Ur.transition=i}else t.current=n;if(Fh&&(Fh=!1,Hi=t,hp=s),i=t.pendingLanes,i===0&&(no=null),LL(n.stateNode),mr(t,on()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(dp)throw dp=!1,t=Lv,Lv=null,t;return hp&1&&t.tag!==0&&Dl(),i=t.pendingLanes,i&1?t===Vv?Vu++:(Vu=0,Vv=t):Vu=0,Ro(),null}function Dl(){if(Hi!==null){var t=ER(hp),e=Ur.transition,n=_t;try{if(Ur.transition=null,_t=16>t?16:t,Hi===null)var r=!1;else{if(t=Hi,Hi=null,hp=0,ft&6)throw Error(ne(331));var s=ft;for(ft|=4,ve=t.current;ve!==null;){var i=ve,o=i.child;if(ve.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ve=c;ve!==null;){var d=ve;switch(d.tag){case 0:case 11:case 15:Ou(8,d,i)}var h=d.child;if(h!==null)h.return=d,ve=h;else for(;ve!==null;){d=ve;var f=d.sibling,p=d.return;if(kP(d),d===c){ve=null;break}if(f!==null){f.return=p,ve=f;break}ve=p}}}var _=i.alternate;if(_!==null){var m=_.child;if(m!==null){_.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ve=o;else e:for(;ve!==null;){if(i=ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ou(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ve=E;break e}ve=i.return}}var y=t.current;for(ve=y;ve!==null;){o=ve;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ve=w;else e:for(o=y;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ym(9,a)}}catch(D){en(a,a.return,D)}if(a===o){ve=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ve=R;break e}ve=a.return}}if(ft=s,Ro(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(cm,t)}catch{}r=!0}return r}finally{_t=n,Ur.transition=e}}return!1}function II(t,e,n){e=Jl(n,e),e=EP(t,e,1),t=to(t,e,1),e=er(),t!==null&&(zd(t,1,e),mr(t,e))}function en(t,e,n){if(t.tag===3)II(t,t,n);else for(;e!==null;){if(e.tag===3){II(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(no===null||!no.has(r))){t=Jl(n,t),t=TP(e,t,1),e=to(e,t,1),t=er(),e!==null&&(zd(e,1,t),mr(e,t));break}}e=e.return}}function lM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&n,An===t&&(Cn&n)===n&&(vn===4||vn===3&&(Cn&130023424)===Cn&&500>on()-M_?ya(t,0):V_|=n),mr(t,e)}function BP(t,e){e===0&&(t.mode&1?(e=Rh,Rh<<=1,!(Rh&130023424)&&(Rh=4194304)):e=1);var n=er();t=ni(t,e),t!==null&&(zd(t,e,n),mr(t,n))}function cM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BP(t,n)}function uM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),BP(t,n)}var zP;zP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fr.current)cr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cr=!1,JV(t,e,n);cr=!!(t.flags&131072)}else cr=!1,jt&&e.flags&1048576&&KR(e,rp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ef(t,e),t=e.pendingProps;var s=Kl(e,Gn.current);Cl(e,n),s=C_(null,e,r,t,s,n);var i=D_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(r)?(i=!0,tp(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,b_(e),s.updater=gm,e.stateNode=s,s._reactInternals=e,Sv(e,r,t,n),e=xv(null,e,r,!0,i,n)):(e.tag=0,jt&&i&&v_(e),Jn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ef(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=hM(r),t=Hr(r,t),s){case 0:e=Av(null,e,r,t,n);break e;case 1:e=fI(null,e,r,t,n);break e;case 11:e=dI(null,e,r,t,n);break e;case 14:e=hI(null,e,r,Hr(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),Av(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),fI(t,e,r,s,n);case 3:e:{if(AP(e),t===null)throw Error(ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ZR(t,e),op(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Jl(Error(ne(423)),e),e=pI(t,e,r,n,s);break e}else if(r!==s){s=Jl(Error(ne(424)),e),e=pI(t,e,r,n,s);break e}else for(Ir=eo(e.stateNode.containerInfo.firstChild),Ar=e,jt=!0,Jr=null,n=JR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gl(),r===s){e=ri(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return eP(e),t===null&&Ev(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gv(r,s)?o=null:i!==null&&gv(r,i)&&(e.flags|=32),bP(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&Ev(e),null;case 13:return xP(t,e,n);case 4:return A_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ql(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),dI(t,e,r,s,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Rt(sp,r._currentValue),r._currentValue=o,i!==null)if(ss(i.value,o)){if(i.children===s.children&&!fr.current){e=ri(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Qs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Tv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ne(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Jn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Cl(e,n),s=$r(s),r=r(s),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,s=Hr(r,e.pendingProps),s=Hr(r.type,s),hI(t,e,r,s,n);case 15:return IP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),Ef(t,e),e.tag=1,pr(r)?(t=!0,tp(e)):t=!1,Cl(e,n),_P(e,r,s),Sv(e,r,s,n),xv(null,e,r,!0,t,n);case 19:return RP(t,e,n);case 22:return SP(t,e,n)}throw Error(ne(156,e.tag))};function WP(t,e){return yR(t,e)}function dM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,e,n,r){return new dM(t,e,n,r)}function $_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hM(t){if(typeof t=="function")return $_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===o_)return 11;if(t===a_)return 14}return 2}function so(t,e){var n=t.alternate;return n===null?(n=Fr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")$_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pl:return va(n.children,s,i,e);case i_:o=8,s|=8;break;case Gy:return t=Fr(12,n,e,s|2),t.elementType=Gy,t.lanes=i,t;case Qy:return t=Fr(13,n,e,s),t.elementType=Qy,t.lanes=i,t;case Yy:return t=Fr(19,n,e,s),t.elementType=Yy,t.lanes=i,t;case eR:return wm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xx:o=10;break e;case Zx:o=9;break e;case o_:o=11;break e;case a_:o=14;break e;case Oi:o=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Fr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function va(t,e,n,r){return t=Fr(7,t,r,e),t.lanes=n,t}function wm(t,e,n,r){return t=Fr(22,t,r,e),t.elementType=eR,t.lanes=n,t.stateNode={isHidden:!1},t}function ny(t,e,n){return t=Fr(6,t,null,e),t.lanes=n,t}function ry(t,e,n){return e=Fr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mg(0),this.expirationTimes=Mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function B_(t,e,n,r,s,i,o,a,l){return t=new fM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},b_(i),t}function pM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qP(t){if(!t)return mo;t=t._reactInternals;e:{if(ja(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(pr(n))return qR(t,n,e)}return e}function HP(t,e,n,r,s,i,o,a,l){return t=B_(n,r,!0,t,s,i,o,a,l),t.context=qP(null),n=t.current,r=er(),s=ro(n),i=Qs(r,s),i.callback=e??null,to(n,i,s),t.current.lanes=s,zd(t,s,r),mr(t,r),t}function _m(t,e,n,r){var s=e.current,i=er(),o=ro(s);return n=qP(n),e.context===null?e.context=n:e.pendingContext=n,e=Qs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=to(s,e,o),t!==null&&(ts(t,s,o,i),vf(t,s,o)),o}function pp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function SI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function z_(t,e){SI(t,e),(t=t.alternate)&&SI(t,e)}function mM(){return null}var KP=typeof reportError=="function"?reportError:function(t){console.error(t)};function W_(t){this._internalRoot=t}Em.prototype.render=W_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));_m(t,e,null,null)};Em.prototype.unmount=W_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xa(function(){_m(null,t,null,null)}),e[ti]=null}};function Em(t){this._internalRoot=t}Em.prototype.unstable_scheduleHydration=function(t){if(t){var e=SR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vi.length&&e!==0&&e<Vi[n].priority;n++);Vi.splice(n,0,t),n===0&&AR(t)}};function q_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bI(){}function gM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=pp(o);i.call(c)}}var o=HP(e,r,t,0,null,!1,!1,"",bI);return t._reactRootContainer=o,t[ti]=o.current,id(t.nodeType===8?t.parentNode:t),xa(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=pp(l);a.call(c)}}var l=B_(t,0,!1,null,null,!1,!1,"",bI);return t._reactRootContainer=l,t[ti]=l.current,id(t.nodeType===8?t.parentNode:t),xa(function(){_m(e,l,n,r)}),l}function Im(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=pp(o);a.call(l)}}_m(e,o,t,s)}else o=gM(n,e,t,s,r);return pp(o)}TR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vu(e.pendingLanes);n!==0&&(u_(e,n|1),mr(e,on()),!(ft&6)&&(Xl=on()+500,Ro()))}break;case 13:xa(function(){var r=ni(t,1);if(r!==null){var s=er();ts(r,t,1,s)}}),z_(t,1)}};d_=function(t){if(t.tag===13){var e=ni(t,134217728);if(e!==null){var n=er();ts(e,t,134217728,n)}z_(t,134217728)}};IR=function(t){if(t.tag===13){var e=ro(t),n=ni(t,e);if(n!==null){var r=er();ts(n,t,e,r)}z_(t,e)}};SR=function(){return _t};bR=function(t,e){var n=_t;try{return _t=t,e()}finally{_t=n}};ov=function(t,e,n){switch(e){case"input":if(Zy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fm(r);if(!s)throw Error(ne(90));nR(r),Zy(r,s)}}}break;case"textarea":sR(t,n);break;case"select":e=n.value,e!=null&&Al(t,!!n.multiple,e,!1)}};dR=F_;hR=xa;var yM={usingClientEntryPoint:!1,Events:[qd,vl,fm,cR,uR,F_]},au={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vM={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mR(t),t===null?null:t.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||mM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{cm=Uh.inject(vM),xs=Uh}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yM;kr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q_(e))throw Error(ne(200));return pM(t,e,null,n)};kr.createRoot=function(t,e){if(!q_(t))throw Error(ne(299));var n=!1,r="",s=KP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=B_(t,1,!1,null,null,n,!1,r,s),t[ti]=e.current,id(t.nodeType===8?t.parentNode:t),new W_(e)};kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=mR(e),t=t===null?null:t.stateNode,t};kr.flushSync=function(t){return xa(t)};kr.hydrate=function(t,e,n){if(!Tm(e))throw Error(ne(200));return Im(null,t,e,!0,n)};kr.hydrateRoot=function(t,e,n){if(!q_(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=KP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=HP(e,null,t,1,n??null,s,!1,i,o),t[ti]=e.current,id(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Em(e)};kr.render=function(t,e,n){if(!Tm(e))throw Error(ne(200));return Im(null,t,e,!1,n)};kr.unmountComponentAtNode=function(t){if(!Tm(t))throw Error(ne(40));return t._reactRootContainer?(xa(function(){Im(null,null,t,!1,function(){t._reactRootContainer=null,t[ti]=null})}),!0):!1};kr.unstable_batchedUpdates=F_;kr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tm(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Im(t,e,n,!1,r)};kr.version="18.3.1-next-f1338f8080-20240426";function GP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GP)}catch(t){console.error(t)}}GP(),Gx.exports=kr;var Kd=Gx.exports;const QP=Vx(Kd);var YP,AI=Kd;YP=AI.createRoot,AI.hydrateRoot;const wM="modulepreload",_M=function(t,e){return new URL(t,e).href},xI={},Z=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=_M(c,r),c in xI)return;xI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const m=o[_];if(m.href===c&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":wM,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((_,m)=>{p.addEventListener("load",_),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},EM=1,TM=1e6;let sy=0;function IM(){return sy=(sy+1)%Number.MAX_SAFE_INTEGER,sy.toString()}const iy=new Map,RI=t=>{if(iy.has(t))return;const e=setTimeout(()=>{iy.delete(t),Mu({type:"REMOVE_TOAST",toastId:t})},TM);iy.set(t,e)},SM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,EM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?RI(n):t.toasts.forEach(r=>{RI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},bf=[];let Af={toasts:[]};function Mu(t){Af=SM(Af,t),bf.forEach(e=>{e(Af)})}function bM({...t}){const e=IM(),n=s=>Mu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Mu({type:"DISMISS_TOAST",toastId:e});return Mu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function H_(){const[t,e]=S.useState(Af);return S.useEffect(()=>(bf.push(e),()=>{const n=bf.indexOf(e);n>-1&&bf.splice(n,1)}),[t]),{...t,toast:bM,dismiss:n=>Mu({type:"DISMISS_TOAST",toastId:n})}}function xt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function PI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function JP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=PI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():PI(t[s],null)}}}}function kn(...t){return S.useCallback(JP(...t),t)}function AM(t,e){const n=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return I.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function bc(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:p,..._}=h,m=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,v=S.useMemo(()=>_,Object.values(_));return I.jsx(m.Provider,{value:v,children:p})};c.displayName=i+"Provider";function d(h,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,_=S.useContext(p);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,xM(s,...e)]}function xM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function pd(t){const e=PM(t),n=S.forwardRef((r,s)=>{const{children:i,...o}=r,a=S.Children.toArray(i),l=a.find(DM);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return I.jsx(e,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return I.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var RM=pd("Slot");function PM(t){const e=S.forwardRef((n,r)=>{const{children:s,...i}=n;if(S.isValidElement(s)){const o=NM(s),a=kM(i,s.props);return s.type!==S.Fragment&&(a.ref=r?JP(r,o):o),S.cloneElement(s,a)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var XP=Symbol("radix.slottable");function CM(t){const e=({children:n})=>I.jsx(I.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=XP,e}function DM(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===XP}function kM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function NM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function OM(t){const e=t+"CollectionProvider",[n,r]=bc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:E}=m,y=j.useRef(null),w=j.useRef(new Map).current;return I.jsx(s,{scope:v,itemMap:w,collectionRef:y,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=pd(a),c=j.forwardRef((m,v)=>{const{scope:E,children:y}=m,w=i(a,E),R=kn(v,w.collectionRef);return I.jsx(l,{ref:R,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=pd(d),p=j.forwardRef((m,v)=>{const{scope:E,children:y,...w}=m,R=j.useRef(null),D=kn(v,R),L=i(d,E);return j.useEffect(()=>(L.itemMap.set(R,{ref:R,...w}),()=>void L.itemMap.delete(R))),I.jsx(f,{[h]:"",ref:D,children:y})});p.displayName=d;function _(m){const v=i(t+"CollectionConsumer",m);return j.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((L,x)=>w.indexOf(L.ref.current)-w.indexOf(x.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},_,r]}var LM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yt=LM.reduce((t,e)=>{const n=pd(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function ZP(t,e){t&&Kd.flushSync(()=>t.dispatchEvent(e))}function ks(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function VM(t,e=globalThis==null?void 0:globalThis.document){const n=ks(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var MM="DismissableLayer",Uv="dismissableLayer.update",FM="dismissableLayer.pointerDownOutside",UM="dismissableLayer.focusOutside",CI,e1=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sm=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(e1),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=S.useState({}),_=kn(e,x=>h(x)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=m.indexOf(v),y=d?m.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,R=y>=E,D=$M(x=>{const A=x.target,b=[...c.branches].some(P=>P.contains(A));!R||b||(s==null||s(x),o==null||o(x),x.defaultPrevented||a==null||a())},f),L=BM(x=>{const A=x.target;[...c.branches].some(P=>P.contains(A))||(i==null||i(x),o==null||o(x),x.defaultPrevented||a==null||a())},f);return VM(x=>{y===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(CI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),DI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=CI)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),DI())},[d,c]),S.useEffect(()=>{const x=()=>p({});return document.addEventListener(Uv,x),()=>document.removeEventListener(Uv,x)},[]),I.jsx(Yt.div,{...l,ref:_,style:{pointerEvents:w?R?"auto":"none":void 0,...t.style},onFocusCapture:xt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:xt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:xt(t.onPointerDownCapture,D.onPointerDownCapture)})});Sm.displayName=MM;var jM="DismissableLayerBranch",t1=S.forwardRef((t,e)=>{const n=S.useContext(e1),r=S.useRef(null),s=kn(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),I.jsx(Yt.div,{...t,ref:s})});t1.displayName=jM;function $M(t,e=globalThis==null?void 0:globalThis.document){const n=ks(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){n1(FM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function BM(t,e=globalThis==null?void 0:globalThis.document){const n=ks(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&n1(UM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function DI(){const t=new CustomEvent(Uv);document.dispatchEvent(t)}function n1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?ZP(s,i):s.dispatchEvent(i)}var zM=Sm,WM=t1,si=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},qM="Portal",K_=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);si(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?QP.createPortal(I.jsx(Yt.div,{...r,ref:e}),o):null});K_.displayName=qM;function HM(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var $a=t=>{const{present:e,children:n}=t,r=KM(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=kn(r.ref,GM(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};$a.displayName="Presence";function KM(t){const[e,n]=S.useState(),r=S.useRef(null),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=HM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=jh(r.current);i.current=a==="mounted"?c:"none"},[a]),si(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=jh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),si(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const m=jh(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&m&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(i.current=jh(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function jh(t){return(t==null?void 0:t.animationName)||"none"}function GM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var QM=t_[" useInsertionEffect ".trim().toString()]||si;function G_({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=YM({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const f=JM(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function YM({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),s=S.useRef(n),i=S.useRef(e);return QM(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function JM(t){return typeof t=="function"}var XM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZM="VisuallyHidden",bm=S.forwardRef((t,e)=>I.jsx(Yt.span,{...t,ref:e,style:{...XM,...t.style}}));bm.displayName=ZM;var eF=bm,Q_="ToastProvider",[Y_,tF,nF]=OM("Toast"),[r1]=bc("Toast",[nF]),[rF,Am]=r1(Q_),s1=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=S.useState(null),[c,d]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Q_}\`. Expected non-empty \`string\`.`),I.jsx(Y_.Provider,{scope:e,children:I.jsx(rF,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>d(p=>p+1),[]),onToastRemove:S.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};s1.displayName=Q_;var i1="ToastViewport",sF=["F8"],jv="toast.viewportPause",$v="toast.viewportResume",o1=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=sF,label:s="Notifications ({hotkey})",...i}=t,o=Am(i1,n),a=tF(n),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=kn(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;S.useEffect(()=>{const v=E=>{var w;r.length!==0&&r.every(R=>E[R]||E.code===R)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),S.useEffect(()=>{const v=l.current,E=h.current;if(_&&v&&E){const y=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(jv);E.dispatchEvent(L),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent($v);E.dispatchEvent(L),o.isClosePausedRef.current=!1}},R=L=>{!v.contains(L.relatedTarget)&&w()},D=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",y),v.addEventListener("focusout",R),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",D),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",R),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",D),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[_,o.isClosePausedRef]);const m=S.useCallback(({tabbingDirection:v})=>{const y=a().map(w=>{const R=w.ref.current,D=[R,...yF(R)];return v==="forwards"?D:D.reverse()});return(v==="forwards"?y.reverse():y).flat()},[a]);return S.useEffect(()=>{const v=h.current;if(v){const E=y=>{var D,L,x;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const A=document.activeElement,b=y.shiftKey;if(y.target===v&&b){(D=c.current)==null||D.focus();return}const O=m({tabbingDirection:b?"backwards":"forwards"}),C=O.findIndex(B=>B===A);oy(O.slice(C+1))?y.preventDefault():b?(L=c.current)==null||L.focus():(x=d.current)==null||x.focus()}};return v.addEventListener("keydown",E),()=>v.removeEventListener("keydown",E)}},[a,m]),I.jsxs(WM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&I.jsx(Bv,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});oy(v)}}),I.jsx(Y_.Slot,{scope:n,children:I.jsx(Yt.ol,{tabIndex:-1,...i,ref:f})}),_&&I.jsx(Bv,{ref:d,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});oy(v)}})]})});o1.displayName=i1;var a1="ToastFocusProxy",Bv=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Am(a1,n);return I.jsx(bm,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Bv.displayName=a1;var Gd="Toast",iF="toast.swipeStart",oF="toast.swipeMove",aF="toast.swipeCancel",lF="toast.swipeEnd",l1=S.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=G_({prop:r,defaultProp:s??!0,onChange:i,caller:Gd});return I.jsx($a,{present:n||a,children:I.jsx(dF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ks(t.onPause),onResume:ks(t.onResume),onSwipeStart:xt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:xt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});l1.displayName=Gd;var[cF,uF]=r1(Gd,{onClose(){}}),dF=S.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,..._}=t,m=Am(Gd,n),[v,E]=S.useState(null),y=kn(e,B=>E(B)),w=S.useRef(null),R=S.useRef(null),D=s||m.duration,L=S.useRef(0),x=S.useRef(D),A=S.useRef(0),{onToastAdd:b,onToastRemove:P}=m,k=ks(()=>{var te;(v==null?void 0:v.contains(document.activeElement))&&((te=m.viewport)==null||te.focus()),o()}),O=S.useCallback(B=>{!B||B===1/0||(window.clearTimeout(A.current),L.current=new Date().getTime(),A.current=window.setTimeout(k,B))},[k]);S.useEffect(()=>{const B=m.viewport;if(B){const te=()=>{O(x.current),c==null||c()},ee=()=>{const z=new Date().getTime()-L.current;x.current=x.current-z,window.clearTimeout(A.current),l==null||l()};return B.addEventListener(jv,ee),B.addEventListener($v,te),()=>{B.removeEventListener(jv,ee),B.removeEventListener($v,te)}}},[m.viewport,D,l,c,O]),S.useEffect(()=>{i&&!m.isClosePausedRef.current&&O(D)},[i,D,m.isClosePausedRef,O]),S.useEffect(()=>(b(),()=>P()),[b,P]);const C=S.useMemo(()=>v?m1(v):null,[v]);return m.viewport?I.jsxs(I.Fragment,{children:[C&&I.jsx(hF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),I.jsx(cF,{scope:n,onClose:k,children:Kd.createPortal(I.jsx(Y_.ItemSlot,{scope:n,children:I.jsx(zM,{asChild:!0,onEscapeKeyDown:xt(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||k(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:I.jsx(Yt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,..._,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:xt(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:xt(t.onPointerDown,B=>{B.button===0&&(w.current={x:B.clientX,y:B.clientY})}),onPointerMove:xt(t.onPointerMove,B=>{if(!w.current)return;const te=B.clientX-w.current.x,ee=B.clientY-w.current.y,z=!!R.current,F=["left","right"].includes(m.swipeDirection),q=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,oe=F?q(0,te):0,de=F?0:q(0,ee),Q=B.pointerType==="touch"?10:2,Ce={x:oe,y:de},be={originalEvent:B,delta:Ce};z?(R.current=Ce,$h(oF,h,be,{discrete:!1})):kI(Ce,m.swipeDirection,Q)?(R.current=Ce,$h(iF,d,be,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(te)>Q||Math.abs(ee)>Q)&&(w.current=null)}),onPointerUp:xt(t.onPointerUp,B=>{const te=R.current,ee=B.target;if(ee.hasPointerCapture(B.pointerId)&&ee.releasePointerCapture(B.pointerId),R.current=null,w.current=null,te){const z=B.currentTarget,F={originalEvent:B,delta:te};kI(te,m.swipeDirection,m.swipeThreshold)?$h(lF,p,F,{discrete:!0}):$h(aF,f,F,{discrete:!0}),z.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),hF=t=>{const{__scopeToast:e,children:n,...r}=t,s=Am(Gd,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return mF(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:I.jsx(K_,{asChild:!0,children:I.jsx(bm,{...r,children:i&&I.jsxs(I.Fragment,{children:[s.label," ",n]})})})},fF="ToastTitle",c1=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return I.jsx(Yt.div,{...r,ref:e})});c1.displayName=fF;var pF="ToastDescription",u1=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return I.jsx(Yt.div,{...r,ref:e})});u1.displayName=pF;var d1="ToastAction",h1=S.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?I.jsx(p1,{altText:n,asChild:!0,children:I.jsx(J_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${d1}\`. Expected non-empty \`string\`.`),null)});h1.displayName=d1;var f1="ToastClose",J_=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=uF(f1,n);return I.jsx(p1,{asChild:!0,children:I.jsx(Yt.button,{type:"button",...r,ref:e,onClick:xt(t.onClick,s.onClose)})})});J_.displayName=f1;var p1=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return I.jsx(Yt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function m1(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),gF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...m1(r))}}),e}function $h(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?ZP(s,i):s.dispatchEvent(i)}var kI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function mF(t=()=>{}){const e=ks(t);si(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function gF(t){return t.nodeType===t.ELEMENT_NODE}function yF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function oy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var vF=s1,g1=o1,y1=l1,v1=c1,w1=u1,_1=h1,E1=J_;function T1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=T1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function I1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=T1(t))&&(r&&(r+=" "),r+=e);return r}const NI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,OI=I1,S1=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return OI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=NI(d)||NI(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(_=>{let[m,v]=_;return Array.isArray(v)?v.includes({...i,...a}[m]):{...i,...a}[m]===v})?[...c,h,f]:c},[]);return OI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),b1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,..._F,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:b1("lucide",s),...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(t,e)=>{const n=S.forwardRef(({className:r,...s},i)=>S.createElement(EF,{ref:i,iconNode:e,className:b1(`lucide-${wF(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Ct("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=Ct("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=Ct("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=Ct("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Ct("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Ct("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=Ct("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=Ct("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=Ct("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=Ct("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=Ct("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=Ct("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Ct("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Ct("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=Ct("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=Ct("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Ct("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=Ct("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=Ct("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Ct("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Ct("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=Ct("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Ct("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Ct("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=Ct("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=Ct("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Z_="-",$F=t=>{const e=zF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Z_);return a[0]===""&&a.length!==1&&a.shift(),x1(a,e)||BF(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},x1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?x1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Z_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},UI=/^\[(.+)\]$/,BF=t=>{if(UI.test(t)){const e=UI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},zF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return qF(Object.entries(t.classGroups),n).forEach(([i,o])=>{zv(o,r,i,e)}),r},zv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:jI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(WF(s)){zv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{zv(o,jI(e,i),n,r)})})},jI=(t,e)=>{let n=t;return e.split(Z_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},WF=t=>t.isThemeGetter,qF=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,HF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},R1="!",KF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let E=a[v];if(c===0){if(E===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(E==="/"){h=v;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(R1),_=p?f.substring(1):f,m=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:_,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},GF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},QF=t=>({cache:HF(t.cacheSize),parseClassName:KF(t),...$F(t)}),YF=/\s+/,JF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(YF);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let _=!!p,m=r(_?f.substring(0,p):f);if(!m){if(!_){a=c+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=c+(a.length>0?" "+a:a);continue}_=!1}const v=GF(d).join(":"),E=h?v+R1:v,y=E+m;if(i.includes(y))continue;i.push(y);const w=s(m,_);for(let R=0;R<w.length;++R){const D=w[R];i.push(E+D)}a=c+(a.length>0?" "+a:a)}return a};function XF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=P1(e))&&(r&&(r+=" "),r+=n);return r}const P1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=P1(t[r]))&&(n&&(n+=" "),n+=e);return n};function ZF(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=QF(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=JF(l,n);return s(l,d),d}return function(){return i(XF.apply(null,arguments))}}const Nt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},C1=/^\[(?:([a-z-]+):)?(.+)\]$/i,eU=/^\d+\/\d+$/,tU=new Set(["px","full","screen"]),nU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Us=t=>kl(t)||tU.has(t)||eU.test(t),Ai=t=>Ac(t,"length",pU),kl=t=>!!t&&!Number.isNaN(Number(t)),ly=t=>Ac(t,"number",kl),lu=t=>!!t&&Number.isInteger(Number(t)),aU=t=>t.endsWith("%")&&kl(t.slice(0,-1)),Ye=t=>C1.test(t),xi=t=>nU.test(t),lU=new Set(["length","size","percentage"]),cU=t=>Ac(t,lU,D1),uU=t=>Ac(t,"position",D1),dU=new Set(["image","url"]),hU=t=>Ac(t,dU,gU),fU=t=>Ac(t,"",mU),cu=()=>!0,Ac=(t,e,n)=>{const r=C1.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},pU=t=>rU.test(t)&&!sU.test(t),D1=()=>!1,mU=t=>iU.test(t),gU=t=>oU.test(t),yU=()=>{const t=Nt("colors"),e=Nt("spacing"),n=Nt("blur"),r=Nt("brightness"),s=Nt("borderColor"),i=Nt("borderRadius"),o=Nt("borderSpacing"),a=Nt("borderWidth"),l=Nt("contrast"),c=Nt("grayscale"),d=Nt("hueRotate"),h=Nt("invert"),f=Nt("gap"),p=Nt("gradientColorStops"),_=Nt("gradientColorStopPositions"),m=Nt("inset"),v=Nt("margin"),E=Nt("opacity"),y=Nt("padding"),w=Nt("saturate"),R=Nt("scale"),D=Nt("sepia"),L=Nt("skew"),x=Nt("space"),A=Nt("translate"),b=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Ye,e],O=()=>[Ye,e],C=()=>["",Us,Ai],B=()=>["auto",kl,Ye],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",Ye],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[kl,Ye];return{cacheSize:500,separator:":",theme:{colors:[cu],spacing:[Us,Ai],blur:["none","",xi,Ye],brightness:de(),borderColor:[t],borderRadius:["none","","full",xi,Ye],borderSpacing:O(),borderWidth:C(),contrast:de(),grayscale:q(),hueRotate:de(),invert:q(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[aU,Ai],inset:k(),margin:k(),opacity:de(),padding:O(),saturate:de(),scale:de(),sepia:q(),skew:de(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[xi]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),Ye]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lu,Ye]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",lu,Ye]}],"grid-cols":[{"grid-cols":[cu]}],"col-start-end":[{col:["auto",{span:["full",lu,Ye]},Ye]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[cu]}],"row-start-end":[{row:["auto",{span:[lu,Ye]},Ye]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ye,e]}],"min-w":[{"min-w":[Ye,e,"min","max","fit"]}],"max-w":[{"max-w":[Ye,e,"none","full","min","max","fit","prose",{screen:[xi]},xi]}],h:[{h:[Ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xi,Ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ly]}],"font-family":[{font:[cu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",kl,ly]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Us,Ye]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Us,Ai]}],"underline-offset":[{"underline-offset":["auto",Us,Ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),uU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[Us,Ye]}],"outline-w":[{outline:[Us,Ai]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Us,Ai]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xi,fU]}],"shadow-color":[{shadow:[cu]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",xi,Ye]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[lu,Ye]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Us,Ai,ly]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vU=ZF(yU);function Nn(...t){return vU(I1(t))}const wU=vF,k1=S.forwardRef(({className:t,...e},n)=>I.jsx(g1,{ref:n,className:Nn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));k1.displayName=g1.displayName;const _U=S1("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),N1=S.forwardRef(({className:t,variant:e,...n},r)=>I.jsx(y1,{ref:r,className:Nn(_U({variant:e}),t),...n}));N1.displayName=y1.displayName;const EU=S.forwardRef(({className:t,...e},n)=>I.jsx(_1,{ref:n,className:Nn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));EU.displayName=_1.displayName;const O1=S.forwardRef(({className:t,...e},n)=>I.jsx(E1,{ref:n,className:Nn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:I.jsx(X_,{className:"h-4 w-4"})}));O1.displayName=E1.displayName;const L1=S.forwardRef(({className:t,...e},n)=>I.jsx(v1,{ref:n,className:Nn("text-sm font-semibold",t),...e}));L1.displayName=v1.displayName;const V1=S.forwardRef(({className:t,...e},n)=>I.jsx(w1,{ref:n,className:Nn("text-sm opacity-90",t),...e}));V1.displayName=w1.displayName;function TU(){const{toasts:t}=H_();return I.jsxs(wU,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return I.jsxs(N1,{...i,children:[I.jsxs("div",{className:"grid gap-1",children:[n&&I.jsx(L1,{children:n}),r&&I.jsx(V1,{children:r})]}),s,I.jsx(O1,{})]},e)}),I.jsx(k1,{})]})}var mp=["light","dark"],e0="(prefers-color-scheme: dark)",IU=typeof window>"u",t0=S.createContext(void 0),SU={setTheme:t=>{},themes:[]},M1=()=>{var t;return(t=S.useContext(t0))!=null?t:SU},bU=t=>S.useContext(t0)?t.children:S.createElement(xU,{...t}),AU=["light","dark"],xU=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=AU,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=S.useState(()=>$I(s,o)),[p,_]=S.useState(()=>$I(s)),m=l?Object.values(l):i,v=S.useCallback(R=>{let D=R;if(!D)return;R==="system"&&n&&(D=BI());let L=l?l[D]:D,x=e?PU():null,A=document.documentElement;if(a==="class"?(A.classList.remove(...m),L&&A.classList.add(L)):L?A.setAttribute(a,L):A.removeAttribute(a),r){let b=mp.includes(o)?o:null,P=mp.includes(D)?D:b;A.style.colorScheme=P}x==null||x()},[]),E=S.useCallback(R=>{let D=typeof R=="function"?R(R):R;f(D);try{localStorage.setItem(s,D)}catch{}},[t]),y=S.useCallback(R=>{let D=BI(R);_(D),h==="system"&&n&&!t&&v("system")},[h,t]);S.useEffect(()=>{let R=window.matchMedia(e0);return R.addListener(y),y(R),()=>R.removeListener(y)},[y]),S.useEffect(()=>{let R=D=>{if(D.key!==s)return;let L=D.newValue||o;E(L)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[E]),S.useEffect(()=>{v(t??h)},[t,h]);let w=S.useMemo(()=>({theme:h,setTheme:E,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,E,t,p,n,i]);return S.createElement(t0.Provider,{value:w},S.createElement(RU,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:m,nonce:d}),c)},RU=S.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?mp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(_,m=!1,v=!0)=>{let E=o?o[_]:_,y=m?_+"|| ''":`'${E}'`,w="";return s&&v&&!m&&mp.includes(_)&&(w+=`d.style.colorScheme = '${_}';`),n==="class"?m||E?w+=`c.add(${y})`:w+="null":E&&(w+=`d[s](n,${y})`),w},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${e0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),$I=(t,e)=>{if(IU)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},PU=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},BI=t=>(t||(t=window.matchMedia(e0)),t.matches?"dark":"light"),CU=t=>{switch(t){case"success":return NU;case"info":return LU;case"warning":return OU;case"error":return VU;default:return null}},DU=Array(12).fill(0),kU=({visible:t,className:e})=>j.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},j.createElement("div",{className:"sonner-spinner"},DU.map((n,r)=>j.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),NU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),LU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),VU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),MU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},j.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),j.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),FU=()=>{let[t,e]=j.useState(document.hidden);return j.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Wv=1,UU=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Wv++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],j.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if($U(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Wv++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},or=new UU,jU=(t,e)=>{let n=(e==null?void 0:e.id)||Wv++;return or.addToast({title:t,...e,id:n}),n},$U=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",BU=jU,zU=()=>or.toasts,WU=()=>or.getActiveToasts(),jn=Object.assign(BU,{success:or.success,info:or.info,warning:or.warning,error:or.error,custom:or.custom,message:or.message,promise:or.promise,dismiss:or.dismiss,loading:or.loading},{getHistory:zU,getToasts:WU});function qU(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}qU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Bh(t){return t.label!==void 0}var HU=3,KU="32px",GU="16px",zI=4e3,QU=356,YU=14,JU=20,XU=200;function qr(...t){return t.filter(Boolean).join(" ")}function ZU(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var e4=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:_,interacting:m,setHeights:v,visibleToasts:E,heights:y,index:w,toasts:R,expanded:D,removeToast:L,defaultRichColors:x,closeButton:A,style:b,cancelButtonStyle:P,actionButtonStyle:k,className:O="",descriptionClassName:C="",duration:B,position:te,gap:ee,loadingIcon:z,expandByDefault:F,classNames:q,icons:oe,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:Q}=t,[Ce,be]=j.useState(null),[Ve,Ge]=j.useState(null),[Se,zt]=j.useState(!1),[Qe,$e]=j.useState(!1),[We,Wt]=j.useState(!1),[Dt,Ln]=j.useState(!1),[gr,_n]=j.useState(!1),[ie,U]=j.useState(0),[Y,H]=j.useState(0),re=j.useRef(p.duration||B||zI),he=j.useRef(null),le=j.useRef(null),me=w===0,De=w+1<=E,ke=p.type,Te=p.dismissible!==!1,Xe=p.className||"",ye=p.descriptionClassName||"",ge=j.useMemo(()=>y.findIndex(pe=>pe.toastId===p.id)||0,[y,p.id]),Oe=j.useMemo(()=>{var pe;return(pe=p.closeButton)!=null?pe:A},[p.closeButton,A]),It=j.useMemo(()=>p.duration||B||zI,[p.duration,B]),ut=j.useRef(0),Me=j.useRef(0),tt=j.useRef(0),Be=j.useRef(null),[mn,St]=te.split("-"),dt=j.useMemo(()=>y.reduce((pe,J,ae)=>ae>=ge?pe:pe+J.height,0),[y,ge]),fe=FU(),vt=p.invert||f,at=ke==="loading";Me.current=j.useMemo(()=>ge*ee+dt,[ge,dt]),j.useEffect(()=>{re.current=It},[It]),j.useEffect(()=>{zt(!0)},[]),j.useEffect(()=>{let pe=le.current;if(pe){let J=pe.getBoundingClientRect().height;return H(J),v(ae=>[{toastId:p.id,height:J,position:p.position},...ae]),()=>v(ae=>ae.filter(je=>je.toastId!==p.id))}},[v,p.id]),j.useLayoutEffect(()=>{if(!Se)return;let pe=le.current,J=pe.style.height;pe.style.height="auto";let ae=pe.getBoundingClientRect().height;pe.style.height=J,H(ae),v(je=>je.find(Ne=>Ne.toastId===p.id)?je.map(Ne=>Ne.toastId===p.id?{...Ne,height:ae}:Ne):[{toastId:p.id,height:ae,position:p.position},...je])},[Se,p.title,p.description,v,p.id]);let qt=j.useCallback(()=>{$e(!0),U(Me.current),v(pe=>pe.filter(J=>J.toastId!==p.id)),setTimeout(()=>{L(p)},XU)},[p,L,v,Me]);j.useEffect(()=>{if(p.promise&&ke==="loading"||p.duration===1/0||p.type==="loading")return;let pe;return D||m||Q&&fe?(()=>{if(tt.current<ut.current){let J=new Date().getTime()-ut.current;re.current=re.current-J}tt.current=new Date().getTime()})():re.current!==1/0&&(ut.current=new Date().getTime(),pe=setTimeout(()=>{var J;(J=p.onAutoClose)==null||J.call(p,p),qt()},re.current)),()=>clearTimeout(pe)},[D,m,p,ke,Q,fe,qt]),j.useEffect(()=>{p.delete&&qt()},[qt,p.delete]);function mt(){var pe,J,ae;return oe!=null&&oe.loading?j.createElement("div",{className:qr(q==null?void 0:q.loader,(pe=p==null?void 0:p.classNames)==null?void 0:pe.loader,"sonner-loader"),"data-visible":ke==="loading"},oe.loading):z?j.createElement("div",{className:qr(q==null?void 0:q.loader,(J=p==null?void 0:p.classNames)==null?void 0:J.loader,"sonner-loader"),"data-visible":ke==="loading"},z):j.createElement(kU,{className:qr(q==null?void 0:q.loader,(ae=p==null?void 0:p.classNames)==null?void 0:ae.loader),visible:ke==="loading"})}return j.createElement("li",{tabIndex:0,ref:le,className:qr(O,Xe,q==null?void 0:q.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[ke],(n=p==null?void 0:p.classNames)==null?void 0:n[ke]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:x,"data-styled":!(p.jsx||p.unstyled||_),"data-mounted":Se,"data-promise":!!p.promise,"data-swiped":gr,"data-removed":Qe,"data-visible":De,"data-y-position":mn,"data-x-position":St,"data-index":w,"data-front":me,"data-swiping":We,"data-dismissible":Te,"data-type":ke,"data-invert":vt,"data-swipe-out":Dt,"data-swipe-direction":Ve,"data-expanded":!!(D||F&&Se),style:{"--index":w,"--toasts-before":w,"--z-index":R.length-w,"--offset":`${Qe?ie:Me.current}px`,"--initial-height":F?"auto":`${Y}px`,...b,...p.style},onDragEnd:()=>{Wt(!1),be(null),Be.current=null},onPointerDown:pe=>{at||!Te||(he.current=new Date,U(Me.current),pe.target.setPointerCapture(pe.pointerId),pe.target.tagName!=="BUTTON"&&(Wt(!0),Be.current={x:pe.clientX,y:pe.clientY}))},onPointerUp:()=>{var pe,J,ae,je;if(Dt||!Te)return;Be.current=null;let Ne=Number(((pe=le.current)==null?void 0:pe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ae=Number(((J=le.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),rt=new Date().getTime()-((ae=he.current)==null?void 0:ae.getTime()),gt=Ce==="x"?Ne:Ae,Ft=Math.abs(gt)/rt;if(Math.abs(gt)>=JU||Ft>.11){U(Me.current),(je=p.onDismiss)==null||je.call(p,p),Ge(Ce==="x"?Ne>0?"right":"left":Ae>0?"down":"up"),qt(),Ln(!0),_n(!1);return}Wt(!1),be(null)},onPointerMove:pe=>{var J,ae,je,Ne;if(!Be.current||!Te||((J=window.getSelection())==null?void 0:J.toString().length)>0)return;let Ae=pe.clientY-Be.current.y,rt=pe.clientX-Be.current.x,gt=(ae=t.swipeDirections)!=null?ae:ZU(te);!Ce&&(Math.abs(rt)>1||Math.abs(Ae)>1)&&be(Math.abs(rt)>Math.abs(Ae)?"x":"y");let Ft={x:0,y:0};Ce==="y"?(gt.includes("top")||gt.includes("bottom"))&&(gt.includes("top")&&Ae<0||gt.includes("bottom")&&Ae>0)&&(Ft.y=Ae):Ce==="x"&&(gt.includes("left")||gt.includes("right"))&&(gt.includes("left")&&rt<0||gt.includes("right")&&rt>0)&&(Ft.x=rt),(Math.abs(Ft.x)>0||Math.abs(Ft.y)>0)&&_n(!0),(je=le.current)==null||je.style.setProperty("--swipe-amount-x",`${Ft.x}px`),(Ne=le.current)==null||Ne.style.setProperty("--swipe-amount-y",`${Ft.y}px`)}},Oe&&!p.jsx?j.createElement("button",{"aria-label":de,"data-disabled":at,"data-close-button":!0,onClick:at||!Te?()=>{}:()=>{var pe;qt(),(pe=p.onDismiss)==null||pe.call(p,p)},className:qr(q==null?void 0:q.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=oe==null?void 0:oe.close)!=null?i:MU):null,p.jsx||S.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:j.createElement(j.Fragment,null,ke||p.icon||p.promise?j.createElement("div",{"data-icon":"",className:qr(q==null?void 0:q.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||mt():null,p.type!=="loading"?p.icon||(oe==null?void 0:oe[ke])||CU(ke):null):null,j.createElement("div",{"data-content":"",className:qr(q==null?void 0:q.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},j.createElement("div",{"data-title":"",className:qr(q==null?void 0:q.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?j.createElement("div",{"data-description":"",className:qr(C,ye,q==null?void 0:q.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),S.isValidElement(p.cancel)?p.cancel:p.cancel&&Bh(p.cancel)?j.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||P,onClick:pe=>{var J,ae;Bh(p.cancel)&&Te&&((ae=(J=p.cancel).onClick)==null||ae.call(J,pe),qt())},className:qr(q==null?void 0:q.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,S.isValidElement(p.action)?p.action:p.action&&Bh(p.action)?j.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||k,onClick:pe=>{var J,ae;Bh(p.action)&&((ae=(J=p.action).onClick)==null||ae.call(J,pe),!pe.defaultPrevented&&qt())},className:qr(q==null?void 0:q.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function WI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function t4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?GU:KU;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var n4=S.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:_=HU,toastOptions:m,dir:v=WI(),gap:E=YU,loadingIcon:y,icons:w,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:D}=t,[L,x]=j.useState([]),A=j.useMemo(()=>Array.from(new Set([r].concat(L.filter(Q=>Q.position).map(Q=>Q.position)))),[L,r]),[b,P]=j.useState([]),[k,O]=j.useState(!1),[C,B]=j.useState(!1),[te,ee]=j.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=j.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=j.useRef(null),oe=j.useRef(!1),de=j.useCallback(Q=>{x(Ce=>{var be;return(be=Ce.find(Ve=>Ve.id===Q.id))!=null&&be.delete||or.dismiss(Q.id),Ce.filter(({id:Ve})=>Ve!==Q.id)})},[]);return j.useEffect(()=>or.subscribe(Q=>{if(Q.dismiss){x(Ce=>Ce.map(be=>be.id===Q.id?{...be,delete:!0}:be));return}setTimeout(()=>{QP.flushSync(()=>{x(Ce=>{let be=Ce.findIndex(Ve=>Ve.id===Q.id);return be!==-1?[...Ce.slice(0,be),{...Ce[be],...Q},...Ce.slice(be+1)]:[Q,...Ce]})})})}),[]),j.useEffect(()=>{if(d!=="system"){ee(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ee("dark"):ee("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:Ce})=>{ee(Ce?"dark":"light")})}catch{Q.addListener(({matches:be})=>{try{ee(be?"dark":"light")}catch(Ve){console.error(Ve)}})}},[d]),j.useEffect(()=>{L.length<=1&&O(!1)},[L]),j.useEffect(()=>{let Q=Ce=>{var be,Ve;s.every(Ge=>Ce[Ge]||Ce.code===Ge)&&(O(!0),(be=z.current)==null||be.focus()),Ce.code==="Escape"&&(document.activeElement===z.current||(Ve=z.current)!=null&&Ve.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[s]),j.useEffect(()=>{if(z.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,oe.current=!1)}},[z.current]),j.createElement("section",{ref:e,"aria-label":`${R} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((Q,Ce)=>{var be;let[Ve,Ge]=Q.split("-");return L.length?j.createElement("ol",{key:Q,dir:v==="auto"?WI():v,tabIndex:-1,ref:z,className:a,"data-sonner-toaster":!0,"data-theme":te,"data-y-position":Ve,"data-lifted":k&&L.length>1&&!i,"data-x-position":Ge,style:{"--front-toast-height":`${((be=b[0])==null?void 0:be.height)||0}px`,"--width":`${QU}px`,"--gap":`${E}px`,...p,...t4(l,c)},onBlur:Se=>{oe.current&&!Se.currentTarget.contains(Se.relatedTarget)&&(oe.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:Se=>{Se.target instanceof HTMLElement&&Se.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,q.current=Se.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{C||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Se=>{Se.target instanceof HTMLElement&&Se.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},L.filter(Se=>!Se.position&&Ce===0||Se.position===Q).map((Se,zt)=>{var Qe,$e;return j.createElement(e4,{key:Se.id,icons:w,index:zt,toast:Se,defaultRichColors:h,duration:(Qe=m==null?void 0:m.duration)!=null?Qe:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:_,closeButton:($e=m==null?void 0:m.closeButton)!=null?$e:o,interacting:C,position:Q,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:de,toasts:L.filter(We=>We.position==Se.position),heights:b.filter(We=>We.position==Se.position),setHeights:P,expandByDefault:i,gap:E,loadingIcon:y,expanded:k,pauseWhenPageIsHidden:D,swipeDirections:t.swipeDirections})})):null}))});const r4=({...t})=>{const{theme:e="system"}=M1();return I.jsx(n4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var s4=t_[" useId ".trim().toString()]||(()=>{}),i4=0;function cy(t){const[e,n]=S.useState(s4());return si(()=>{n(r=>r??String(i4++))},[t]),t||(e?`radix-${e}`:"")}const o4=["top","right","bottom","left"],go=Math.min,_r=Math.max,gp=Math.round,zh=Math.floor,Ps=t=>({x:t,y:t}),a4={left:"right",right:"left",bottom:"top",top:"bottom"},l4={start:"end",end:"start"};function qv(t,e,n){return _r(t,go(e,n))}function ii(t,e){return typeof t=="function"?t(e):t}function oi(t){return t.split("-")[0]}function xc(t){return t.split("-")[1]}function n0(t){return t==="x"?"y":"x"}function r0(t){return t==="y"?"height":"width"}const c4=new Set(["top","bottom"]);function Is(t){return c4.has(oi(t))?"y":"x"}function s0(t){return n0(Is(t))}function u4(t,e,n){n===void 0&&(n=!1);const r=xc(t),s=s0(t),i=r0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=yp(o)),[o,yp(o)]}function d4(t){const e=yp(t);return[Hv(t),e,Hv(e)]}function Hv(t){return t.replace(/start|end/g,e=>l4[e])}const qI=["left","right"],HI=["right","left"],h4=["top","bottom"],f4=["bottom","top"];function p4(t,e,n){switch(t){case"top":case"bottom":return n?e?HI:qI:e?qI:HI;case"left":case"right":return e?h4:f4;default:return[]}}function m4(t,e,n,r){const s=xc(t);let i=p4(oi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Hv)))),i}function yp(t){return t.replace(/left|right|bottom|top/g,e=>a4[e])}function g4(t){return{top:0,right:0,bottom:0,left:0,...t}}function F1(t){return typeof t!="number"?g4(t):{top:t,right:t,bottom:t,left:t}}function vp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function KI(t,e,n){let{reference:r,floating:s}=t;const i=Is(e),o=s0(e),a=r0(o),l=oi(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(xc(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const y4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=KI(c,r,l),f=r,p={},_=0;for(let m=0;m<a.length;m++){const{name:v,fn:E}=a[m],{x:y,y:w,data:R,reset:D}=await E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=y??d,h=w??h,p={...p,[v]:{...p[v],...R}},D&&_<=50&&(_++,typeof D=="object"&&(D.placement&&(f=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:d,y:h}=KI(c,f,l)),m=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function md(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ii(e,t),_=F1(p),v=a[f?h==="floating"?"reference":"floating":h],E=vp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},D=vp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(E.top-D.top+_.top)/R.y,bottom:(D.bottom-E.bottom+_.bottom)/R.y,left:(E.left-D.left+_.left)/R.x,right:(D.right-E.right+_.right)/R.x}}const v4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=ii(t,e)||{};if(c==null)return{};const h=F1(d),f={x:n,y:r},p=s0(s),_=r0(p),m=await o.getDimensions(c),v=p==="y",E=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",R=i.reference[_]+i.reference[p]-f[p]-i.floating[_],D=f[p]-i.reference[p],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=L?L[w]:0;(!x||!await(o.isElement==null?void 0:o.isElement(L)))&&(x=a.floating[w]||i.floating[_]);const A=R/2-D/2,b=x/2-m[_]/2-1,P=go(h[E],b),k=go(h[y],b),O=P,C=x-m[_]-k,B=x/2-m[_]/2+A,te=qv(O,B,C),ee=!l.arrow&&xc(s)!=null&&B!==te&&i.reference[_]/2-(B<O?P:k)-m[_]/2<0,z=ee?B<O?B-O:B-C:0;return{[p]:f[p]+z,data:{[p]:te,centerOffset:B-te-z,...ee&&{alignmentOffset:z}},reset:ee}}}),w4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:m=!0,...v}=ii(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=oi(s),y=Is(a),w=oi(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=f||(w||!m?[yp(a)]:d4(a)),L=_!=="none";!f&&L&&D.push(...m4(a,m,_,R));const x=[a,...D],A=await md(e,v),b=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(A[E]),h){const B=u4(s,o,R);b.push(A[B[0]],A[B[1]])}if(P=[...P,{placement:s,overflows:b}],!b.every(B=>B<=0)){var k,O;const B=(((k=i.flip)==null?void 0:k.index)||0)+1,te=x[B];if(te&&(!(h==="alignment"?y!==Is(te):!1)||P.every(F=>Is(F.placement)===y?F.overflows[0]>0:!0)))return{data:{index:B,overflows:P},reset:{placement:te}};let ee=(O=P.filter(z=>z.overflows[0]<=0).sort((z,F)=>z.overflows[1]-F.overflows[1])[0])==null?void 0:O.placement;if(!ee)switch(p){case"bestFit":{var C;const z=(C=P.filter(F=>{if(L){const q=Is(F.placement);return q===y||q==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(q=>q>0).reduce((q,oe)=>q+oe,0)]).sort((F,q)=>F[1]-q[1])[0])==null?void 0:C[0];z&&(ee=z);break}case"initialPlacement":ee=a;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function GI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function QI(t){return o4.some(e=>t[e]>=0)}const _4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ii(t,e);switch(r){case"referenceHidden":{const i=await md(e,{...s,elementContext:"reference"}),o=GI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:QI(o)}}}case"escaped":{const i=await md(e,{...s,altBoundary:!0}),o=GI(i,n.floating);return{data:{escapedOffsets:o,escaped:QI(o)}}}default:return{}}}}},U1=new Set(["left","top"]);async function E4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=oi(n),a=xc(n),l=Is(n)==="y",c=U1.has(o)?-1:1,d=i&&l?-1:1,h=ii(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(p=a==="end"?_*-1:_),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const T4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await E4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},I4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:E,y}=v;return{x:E,y}}},...l}=ii(t,e),c={x:n,y:r},d=await md(e,l),h=Is(oi(s)),f=n0(h);let p=c[f],_=c[h];if(i){const v=f==="y"?"top":"left",E=f==="y"?"bottom":"right",y=p+d[v],w=p-d[E];p=qv(y,p,w)}if(o){const v=h==="y"?"top":"left",E=h==="y"?"bottom":"right",y=_+d[v],w=_-d[E];_=qv(y,_,w)}const m=a.fn({...e,[f]:p,[h]:_});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[h]:o}}}}}},S4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ii(t,e),d={x:n,y:r},h=Is(s),f=n0(h);let p=d[f],_=d[h];const m=ii(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=f==="y"?"height":"width",R=i.reference[f]-i.floating[w]+v.mainAxis,D=i.reference[f]+i.reference[w]-v.mainAxis;p<R?p=R:p>D&&(p=D)}if(c){var E,y;const w=f==="y"?"width":"height",R=U1.has(oi(s)),D=i.reference[h]-i.floating[w]+(R&&((E=o.offset)==null?void 0:E[h])||0)+(R?0:v.crossAxis),L=i.reference[h]+i.reference[w]+(R?0:((y=o.offset)==null?void 0:y[h])||0)-(R?v.crossAxis:0);_<D?_=D:_>L&&(_=L)}return{[f]:p,[h]:_}}}},b4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ii(t,e),d=await md(e,c),h=oi(s),f=xc(s),p=Is(s)==="y",{width:_,height:m}=i.floating;let v,E;h==="top"||h==="bottom"?(v=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,v=f==="end"?"top":"bottom");const y=m-d.top-d.bottom,w=_-d.left-d.right,R=go(m-d[v],y),D=go(_-d[E],w),L=!e.middlewareData.shift;let x=R,A=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=y),L&&!f){const P=_r(d.left,0),k=_r(d.right,0),O=_r(d.top,0),C=_r(d.bottom,0);p?A=_-2*(P!==0||k!==0?P+k:_r(d.left,d.right)):x=m-2*(O!==0||C!==0?O+C:_r(d.top,d.bottom))}await l({...e,availableWidth:A,availableHeight:x});const b=await o.getDimensions(a.floating);return _!==b.width||m!==b.height?{reset:{rects:!0}}:{}}}};function xm(){return typeof window<"u"}function Rc(t){return j1(t)?(t.nodeName||"").toLowerCase():"#document"}function xr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Vs(t){var e;return(e=(j1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function j1(t){return xm()?t instanceof Node||t instanceof xr(t).Node:!1}function is(t){return xm()?t instanceof Element||t instanceof xr(t).Element:!1}function Ns(t){return xm()?t instanceof HTMLElement||t instanceof xr(t).HTMLElement:!1}function YI(t){return!xm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xr(t).ShadowRoot}const A4=new Set(["inline","contents"]);function Qd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=os(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!A4.has(s)}const x4=new Set(["table","td","th"]);function R4(t){return x4.has(Rc(t))}const P4=[":popover-open",":modal"];function Rm(t){return P4.some(e=>{try{return t.matches(e)}catch{return!1}})}const C4=["transform","translate","scale","rotate","perspective"],D4=["transform","translate","scale","rotate","perspective","filter"],k4=["paint","layout","strict","content"];function i0(t){const e=o0(),n=is(t)?os(t):t;return C4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||D4.some(r=>(n.willChange||"").includes(r))||k4.some(r=>(n.contain||"").includes(r))}function N4(t){let e=yo(t);for(;Ns(e)&&!Zl(e);){if(i0(e))return e;if(Rm(e))return null;e=yo(e)}return null}function o0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O4=new Set(["html","body","#document"]);function Zl(t){return O4.has(Rc(t))}function os(t){return xr(t).getComputedStyle(t)}function Pm(t){return is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yo(t){if(Rc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||YI(t)&&t.host||Vs(t);return YI(e)?e.host:e}function $1(t){const e=yo(t);return Zl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ns(e)&&Qd(e)?e:$1(e)}function gd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=$1(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=xr(s);if(i){const a=Kv(o);return e.concat(o,o.visualViewport||[],Qd(s)?s:[],a&&n?gd(a):[])}return e.concat(s,gd(s,[],n))}function Kv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function B1(t){const e=os(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ns(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=gp(n)!==i||gp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function a0(t){return is(t)?t:t.contextElement}function Nl(t){const e=a0(t);if(!Ns(e))return Ps(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=B1(e);let o=(i?gp(n.width):n.width)/r,a=(i?gp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const L4=Ps(0);function z1(t){const e=xr(t);return!o0()||!e.visualViewport?L4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function V4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==xr(t)?!1:e}function Ra(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=a0(t);let o=Ps(1);e&&(r?is(r)&&(o=Nl(r)):o=Nl(t));const a=V4(i,n,r)?z1(i):Ps(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=xr(i),p=r&&is(r)?xr(r):r;let _=f,m=Kv(_);for(;m&&r&&p!==_;){const v=Nl(m),E=m.getBoundingClientRect(),y=os(m),w=E.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,R=E.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=w,c+=R,_=xr(m),m=Kv(_)}}return vp({width:d,height:h,x:l,y:c})}function Cm(t,e){const n=Pm(t).scrollLeft;return e?e.left+n:Ra(Vs(t)).left+n}function W1(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Cm(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function M4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Vs(r),a=e?Rm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Ps(1);const d=Ps(0),h=Ns(r);if((h||!h&&!i)&&((Rc(r)!=="body"||Qd(o))&&(l=Pm(r)),Ns(r))){const p=Ra(r);c=Nl(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?W1(o,l):Ps(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function F4(t){return Array.from(t.getClientRects())}function U4(t){const e=Vs(t),n=Pm(t),r=t.ownerDocument.body,s=_r(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=_r(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Cm(t);const a=-n.scrollTop;return os(r).direction==="rtl"&&(o+=_r(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const JI=25;function j4(t,e){const n=xr(t),r=Vs(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=o0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Cm(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,_=Math.abs(r.clientWidth-h.clientWidth-p);_<=JI&&(i-=_)}else c<=JI&&(i+=c);return{width:i,height:o,x:a,y:l}}const $4=new Set(["absolute","fixed"]);function B4(t,e){const n=Ra(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ns(t)?Nl(t):Ps(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function XI(t,e,n){let r;if(e==="viewport")r=j4(t,n);else if(e==="document")r=U4(Vs(t));else if(is(e))r=B4(e,n);else{const s=z1(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return vp(r)}function q1(t,e){const n=yo(t);return n===e||!is(n)||Zl(n)?!1:os(n).position==="fixed"||q1(n,e)}function z4(t,e){const n=e.get(t);if(n)return n;let r=gd(t,[],!1).filter(a=>is(a)&&Rc(a)!=="body"),s=null;const i=os(t).position==="fixed";let o=i?yo(t):t;for(;is(o)&&!Zl(o);){const a=os(o),l=i0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&$4.has(s.position)||Qd(o)&&!l&&q1(t,o))?r=r.filter(d=>d!==o):s=a,o=yo(o)}return e.set(t,r),r}function W4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Rm(e)?[]:z4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=XI(e,d,s);return c.top=_r(h.top,c.top),c.right=go(h.right,c.right),c.bottom=go(h.bottom,c.bottom),c.left=_r(h.left,c.left),c},XI(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function q4(t){const{width:e,height:n}=B1(t);return{width:e,height:n}}function H4(t,e,n){const r=Ns(e),s=Vs(e),i=n==="fixed",o=Ra(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ps(0);function c(){l.x=Cm(s)}if(r||!r&&!i)if((Rc(e)!=="body"||Qd(s))&&(a=Pm(e)),r){const p=Ra(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?W1(s,a):Ps(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function uy(t){return os(t).position==="static"}function ZI(t,e){if(!Ns(t)||os(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Vs(t)===n&&(n=n.ownerDocument.body),n}function H1(t,e){const n=xr(t);if(Rm(t))return n;if(!Ns(t)){let s=yo(t);for(;s&&!Zl(s);){if(is(s)&&!uy(s))return s;s=yo(s)}return n}let r=ZI(t,e);for(;r&&R4(r)&&uy(r);)r=ZI(r,e);return r&&Zl(r)&&uy(r)&&!i0(r)?n:r||N4(t)||n}const K4=async function(t){const e=this.getOffsetParent||H1,n=this.getDimensions,r=await n(t.floating);return{reference:H4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function G4(t){return os(t).direction==="rtl"}const Q4={convertOffsetParentRelativeRectToViewportRelativeRect:M4,getDocumentElement:Vs,getClippingRect:W4,getOffsetParent:H1,getElementRects:K4,getClientRects:F4,getDimensions:q4,getScale:Nl,isElement:is,isRTL:G4};function K1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Y4(t,e){let n=null,r;const s=Vs(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const _=zh(h),m=zh(s.clientWidth-(d+f)),v=zh(s.clientHeight-(h+p)),E=zh(d),w={rootMargin:-_+"px "+-m+"px "+-v+"px "+-E+"px",threshold:_r(0,go(1,l))||1};let R=!0;function D(L){const x=L[0].intersectionRatio;if(x!==l){if(!R)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!K1(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(D,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,w)}n.observe(t)}return o(!0),i}function J4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=a0(t),d=s||i?[...c?gd(c):[],...gd(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?Y4(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(E=>{let[y]=E;y&&y.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let _,m=l?Ra(t):null;l&&v();function v(){const E=Ra(t);m&&!K1(m,E)&&n(),m=E,_=requestAnimationFrame(v)}return n(),()=>{var E;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(E=p)==null||E.disconnect(),p=null,l&&cancelAnimationFrame(_)}}const X4=T4,Z4=I4,ej=w4,tj=b4,nj=_4,eS=v4,rj=S4,sj=(t,e,n)=>{const r=new Map,s={platform:Q4,...n},i={...s.platform,_c:r};return y4(t,e,{...s,platform:i})};var ij=typeof document<"u",oj=function(){},xf=ij?S.useLayoutEffect:oj;function wp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!wp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!wp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function G1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function tS(t,e){const n=G1(t);return Math.round(e*n)/n}function dy(t){const e=S.useRef(t);return xf(()=>{e.current=t}),e}function aj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=S.useState(r);wp(f,r)||p(r);const[_,m]=S.useState(null),[v,E]=S.useState(null),y=S.useCallback(F=>{F!==L.current&&(L.current=F,m(F))},[]),w=S.useCallback(F=>{F!==x.current&&(x.current=F,E(F))},[]),R=i||_,D=o||v,L=S.useRef(null),x=S.useRef(null),A=S.useRef(d),b=l!=null,P=dy(l),k=dy(s),O=dy(c),C=S.useCallback(()=>{if(!L.current||!x.current)return;const F={placement:e,strategy:n,middleware:f};k.current&&(F.platform=k.current),sj(L.current,x.current,F).then(q=>{const oe={...q,isPositioned:O.current!==!1};B.current&&!wp(A.current,oe)&&(A.current=oe,Kd.flushSync(()=>{h(oe)}))})},[f,e,n,k,O]);xf(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const B=S.useRef(!1);xf(()=>(B.current=!0,()=>{B.current=!1}),[]),xf(()=>{if(R&&(L.current=R),D&&(x.current=D),R&&D){if(P.current)return P.current(R,D,C);C()}},[R,D,C,P,b]);const te=S.useMemo(()=>({reference:L,floating:x,setReference:y,setFloating:w}),[y,w]),ee=S.useMemo(()=>({reference:R,floating:D}),[R,D]),z=S.useMemo(()=>{const F={position:n,left:0,top:0};if(!ee.floating)return F;const q=tS(ee.floating,d.x),oe=tS(ee.floating,d.y);return a?{...F,transform:"translate("+q+"px, "+oe+"px)",...G1(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:oe}},[n,a,ee.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:C,refs:te,elements:ee,floatingStyles:z}),[d,C,te,ee,z])}const lj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?eS({element:r.current,padding:s}).fn(n):{}:r?eS({element:r,padding:s}).fn(n):{}}}},cj=(t,e)=>({...X4(t),options:[t,e]}),uj=(t,e)=>({...Z4(t),options:[t,e]}),dj=(t,e)=>({...rj(t),options:[t,e]}),hj=(t,e)=>({...ej(t),options:[t,e]}),fj=(t,e)=>({...tj(t),options:[t,e]}),pj=(t,e)=>({...nj(t),options:[t,e]}),mj=(t,e)=>({...lj(t),options:[t,e]});var gj="Arrow",Q1=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return I.jsx(Yt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:I.jsx("polygon",{points:"0,0 30,0 15,10"})})});Q1.displayName=gj;var yj=Q1;function Y1(t){const[e,n]=S.useState(void 0);return si(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var l0="Popper",[J1,X1]=bc(l0),[vj,Z1]=J1(l0),eC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return I.jsx(vj,{scope:e,anchor:r,onAnchorChange:s,children:n})};eC.displayName=l0;var tC="PopperAnchor",nC=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Z1(tC,n),o=S.useRef(null),a=kn(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:I.jsx(Yt.div,{...s,ref:a})});nC.displayName=tC;var c0="PopperContent",[wj,_j]=J1(c0),rC=S.forwardRef((t,e)=>{var Se,zt,Qe,$e,We,Wt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:_,...m}=t,v=Z1(c0,n),[E,y]=S.useState(null),w=kn(e,Dt=>y(Dt)),[R,D]=S.useState(null),L=Y1(R),x=(L==null?void 0:L.width)??0,A=(L==null?void 0:L.height)??0,b=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(c)?c:[c],O=k.length>0,C={padding:P,boundary:k.filter(Tj),altBoundary:O},{refs:B,floatingStyles:te,placement:ee,isPositioned:z,middlewareData:F}=aj({strategy:"fixed",placement:b,whileElementsMounted:(...Dt)=>J4(...Dt,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[cj({mainAxis:s+A,alignmentAxis:o}),l&&uj({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?dj():void 0,...C}),l&&hj({...C}),fj({...C,apply:({elements:Dt,rects:Ln,availableWidth:gr,availableHeight:_n})=>{const{width:ie,height:U}=Ln.reference,Y=Dt.floating.style;Y.setProperty("--radix-popper-available-width",`${gr}px`),Y.setProperty("--radix-popper-available-height",`${_n}px`),Y.setProperty("--radix-popper-anchor-width",`${ie}px`),Y.setProperty("--radix-popper-anchor-height",`${U}px`)}}),R&&mj({element:R,padding:a}),Ij({arrowWidth:x,arrowHeight:A}),f&&pj({strategy:"referenceHidden",...C})]}),[q,oe]=oC(ee),de=ks(_);si(()=>{z&&(de==null||de())},[z,de]);const Q=(Se=F.arrow)==null?void 0:Se.x,Ce=(zt=F.arrow)==null?void 0:zt.y,be=((Qe=F.arrow)==null?void 0:Qe.centerOffset)!==0,[Ve,Ge]=S.useState();return si(()=>{E&&Ge(window.getComputedStyle(E).zIndex)},[E]),I.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:z?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ve,"--radix-popper-transform-origin":[($e=F.transformOrigin)==null?void 0:$e.x,(We=F.transformOrigin)==null?void 0:We.y].join(" "),...((Wt=F.hide)==null?void 0:Wt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:I.jsx(wj,{scope:n,placedSide:q,onArrowChange:D,arrowX:Q,arrowY:Ce,shouldHideArrow:be,children:I.jsx(Yt.div,{"data-side":q,"data-align":oe,...m,ref:w,style:{...m.style,animation:z?void 0:"none"}})})})});rC.displayName=c0;var sC="PopperArrow",Ej={top:"bottom",right:"left",bottom:"top",left:"right"},iC=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=_j(sC,r),o=Ej[i.placedSide];return I.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:I.jsx(yj,{...s,ref:n,style:{...s.style,display:"block"}})})});iC.displayName=sC;function Tj(t){return t!==null}var Ij=t=>({name:"transformOrigin",options:t,fn(e){var v,E,y;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=oC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let _="",m="";return c==="bottom"?(_=o?h:`${f}px`,m=`${-l}px`):c==="top"?(_=o?h:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,m=o?h:`${p}px`):c==="left"&&(_=`${r.floating.width+l}px`,m=o?h:`${p}px`),{data:{x:_,y:m}}}});function oC(t){const[e,n="center"]=t.split("-");return[e,n]}var BK=eC,Sj=nC,bj=rC,Aj=iC,[Dm]=bc("Tooltip",[X1]),u0=X1(),aC="TooltipProvider",xj=700,nS="tooltip.open",[Rj,lC]=Dm(aC),cC=t=>{const{__scopeTooltip:e,delayDuration:n=xj,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),I.jsx(Rj,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};cC.displayName=aC;var uC="Tooltip",[zK,km]=Dm(uC),Gv="TooltipTrigger",Pj=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=km(Gv,n),i=lC(Gv,n),o=u0(n),a=S.useRef(null),l=kn(e,a,s.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),I.jsx(Sj,{asChild:!0,...o,children:I.jsx(Yt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:xt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:xt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:xt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:xt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:xt(t.onBlur,s.onClose),onClick:xt(t.onClick,s.onClose)})})});Pj.displayName=Gv;var Cj="TooltipPortal",[WK,Dj]=Dm(Cj,{forceMount:void 0}),ec="TooltipContent",dC=S.forwardRef((t,e)=>{const n=Dj(ec,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=km(ec,t.__scopeTooltip);return I.jsx($a,{present:r||o.open,children:o.disableHoverableContent?I.jsx(hC,{side:s,...i,ref:e}):I.jsx(kj,{side:s,...i,ref:e})})}),kj=S.forwardRef((t,e)=>{const n=km(ec,t.__scopeTooltip),r=lC(ec,t.__scopeTooltip),s=S.useRef(null),i=kn(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=S.useCallback(()=>{a(null),h(!1)},[h]),p=S.useCallback((_,m)=>{const v=_.currentTarget,E={x:_.clientX,y:_.clientY},y=Mj(E,v.getBoundingClientRect()),w=Fj(E,y),R=Uj(m.getBoundingClientRect()),D=$j([...w,...R]);a(D),h(!0)},[h]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&d){const _=v=>p(v,d),m=v=>p(v,l);return l.addEventListener("pointerleave",_),d.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",_),d.removeEventListener("pointerleave",m)}}},[l,d,p,f]),S.useEffect(()=>{if(o){const _=m=>{const v=m.target,E={x:m.clientX,y:m.clientY},y=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),w=!jj(E,o);y?f():w&&(f(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,d,o,c,f]),I.jsx(hC,{...t,ref:i})}),[Nj,Oj]=Dm(uC,{isInside:!1}),Lj=CM("TooltipContent"),hC=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=km(ec,n),c=u0(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(nS,d),()=>document.removeEventListener(nS,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),I.jsx(Sm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:I.jsxs(bj,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[I.jsx(Lj,{children:r}),I.jsx(Nj,{scope:n,isInside:!0,children:I.jsx(eF,{id:l.contentId,role:"tooltip",children:s||r})})]})})});dC.displayName=ec;var fC="TooltipArrow",Vj=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=u0(n);return Oj(fC,n).isInside?null:I.jsx(Aj,{...s,...r,ref:e})});Vj.displayName=fC;function Mj(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Fj(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Uj(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function jj(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function $j(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Bj(e)}function Bj(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var zj=cC,pC=dC;const Wj=zj,qj=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>I.jsx(pC,{ref:r,sideOffset:e,className:Nn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));qj.displayName=pC.displayName;var Nm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hj={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ui,Yw,mx,Kj=(mx=class{constructor(){ct(this,Ui,Hj);ct(this,Yw,!1)}setTimeoutProvider(t){qe(this,Ui,t)}setTimeout(t,e){return K(this,Ui).setTimeout(t,e)}clearTimeout(t){K(this,Ui).clearTimeout(t)}setInterval(t,e){return K(this,Ui).setInterval(t,e)}clearInterval(t){K(this,Ui).clearInterval(t)}},Ui=new WeakMap,Yw=new WeakMap,mx),_p=new Kj;function Gj(t){setTimeout(t,0)}var Om=typeof window>"u"||"Deno"in globalThis;function Xn(){}function Qj(t,e){return typeof t=="function"?t(e):t}function Yj(t){return typeof t=="number"&&t>=0&&t!==1/0}function Jj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qv(t,e){return typeof t=="function"?t(e):t}function Xj(t,e){return typeof t=="function"?t(e):t}function rS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==d0(o,e.options))return!1}else if(!vd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function sS(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(yd(e.options.mutationKey)!==yd(i))return!1}else if(!vd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function d0(t,e){return((e==null?void 0:e.queryKeyHashFn)||yd)(t)}function yd(t){return JSON.stringify(t,(e,n)=>Yv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function vd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>vd(t[n],e[n])):!1}var Zj=Object.prototype.hasOwnProperty;function mC(t,e){if(t===e)return t;const n=iS(t)&&iS(e);if(!n&&!(Yv(t)&&Yv(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:Zj.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=mC(h,f);a[d]=p,p===h&&l++}return s===o&&l===s?t:a}function qK(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function iS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yv(t){if(!oS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!oS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function oS(t){return Object.prototype.toString.call(t)==="[object Object]"}function e3(t){return new Promise(e=>{_p.setTimeout(e,t)})}function t3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?mC(t,e):e}function n3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function r3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var h0=Symbol();function gC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===h0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function HK(t,e){return typeof t=="function"?t(...e):!!t}var da,ji,Fl,gx,s3=(gx=class extends Nm{constructor(){super();ct(this,da);ct(this,ji);ct(this,Fl);qe(this,Fl,e=>{if(!Om&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,ji)||this.setEventListener(K(this,Fl))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ji))==null||e.call(this),qe(this,ji,void 0))}setEventListener(e){var n;qe(this,Fl,e),(n=K(this,ji))==null||n.call(this),qe(this,ji,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,da)!==e&&(qe(this,da,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,da)=="boolean"?K(this,da):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},da=new WeakMap,ji=new WeakMap,Fl=new WeakMap,gx),yC=new s3;function i3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function o3(t){var n;let e;if((n=t.then(r=>(e=r,r),Xn))==null||n.catch(Xn),e!==void 0)return{data:e}}function vC(t){return t}function a3(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function l3(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(Xn),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function c3(t){return t.state.isPaused}function u3(t){return t.state.status==="success"}function d3(t){return!0}function h3(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??c3,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[a3(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??u3,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??d3,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??vC,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[l3(f,o,i)]:[]);return{mutations:r,queries:a}}function f3(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??vC,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,p;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(p=n==null?void 0:n.defaultOptions)==null?void 0:p.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:p,promise:_,dehydratedAt:m})=>{var L,x;const v=_?o3(_):void 0,E=h.data===void 0?v==null?void 0:v.data:h.data,y=E===void 0?E:i(E);let w=s.get(f);const R=(w==null?void 0:w.state.status)==="pending",D=(w==null?void 0:w.state.fetchStatus)==="fetching";if(w){const A=v&&m!==void 0&&m>w.state.dataUpdatedAt;if(h.dataUpdatedAt>w.state.dataUpdatedAt||A){const{fetchStatus:b,...P}=h;w.setState({...P,data:y})}}else w=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(x=n==null?void 0:n.defaultOptions)==null?void 0:x.queries,queryKey:d,queryHash:f,meta:p},{...h,data:y,fetchStatus:"idle",status:y!==void 0?"success":h.status});_&&!R&&!D&&(m===void 0||m>w.state.dataUpdatedAt)&&w.fetch(void 0,{initialPromise:Promise.resolve(_).then(i)}).catch(Xn)})}var p3=Gj;function m3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=p3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Zn=m3(),Ul,$i,jl,yx,g3=(yx=class extends Nm{constructor(){super();ct(this,Ul,!0);ct(this,$i);ct(this,jl);qe(this,jl,e=>{if(!Om&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,$i)||this.setEventListener(K(this,jl))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,$i))==null||e.call(this),qe(this,$i,void 0))}setEventListener(e){var n;qe(this,jl,e),(n=K(this,$i))==null||n.call(this),qe(this,$i,e(this.setOnline.bind(this)))}setOnline(e){K(this,Ul)!==e&&(qe(this,Ul,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,Ul)}},Ul=new WeakMap,$i=new WeakMap,jl=new WeakMap,yx),Ep=new g3;function y3(t){return Math.min(1e3*2**t,3e4)}function wC(t){return(t??"online")==="online"?Ep.isOnline():!0}var Jv=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function _C(t){let e=!1,n=0,r;const s=i3(),i=()=>s.status!=="pending",o=m=>{var v;if(!i()){const E=new Jv(m);f(E),(v=t.onCancel)==null||v.call(t,E)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>yC.isFocused()&&(t.networkMode==="always"||Ep.isOnline())&&t.canRun(),d=()=>wC(t.networkMode)&&t.canRun(),h=m=>{i()||(r==null||r(),s.resolve(m))},f=m=>{i()||(r==null||r(),s.reject(m))},p=()=>new Promise(m=>{var v;r=E=>{(i()||c())&&m(E)},(v=t.onPause)==null||v.call(t)}).then(()=>{var m;r=void 0,i()||(m=t.onContinue)==null||m.call(t)}),_=()=>{if(i())return;let m;const v=n===0?t.initialPromise:void 0;try{m=v??t.fn()}catch(E){m=Promise.reject(E)}Promise.resolve(m).then(h).catch(E=>{var L;if(i())return;const y=t.retry??(Om?0:3),w=t.retryDelay??y3,R=typeof w=="function"?w(n,E):w,D=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,E);if(e||!D){f(E);return}n++,(L=t.onFail)==null||L.call(t,n,E),e3(R).then(()=>c()?void 0:p()).then(()=>{e?f(E):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?_():p().then(_),s)}}var ha,vx,EC=(vx=class{constructor(){ct(this,ha)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yj(this.gcTime)&&qe(this,ha,_p.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Om?1/0:5*60*1e3))}clearGcTimeout(){K(this,ha)&&(_p.clearTimeout(K(this,ha)),qe(this,ha,void 0))}},ha=new WeakMap,vx),fa,$l,Or,pa,Tn,Ud,ma,Kr,js,wx,v3=(wx=class extends EC{constructor(n){super();ct(this,Kr);ct(this,fa);ct(this,$l);ct(this,Or);ct(this,pa);ct(this,Tn);ct(this,Ud);ct(this,ma);qe(this,ma,!1),qe(this,Ud,n.defaultOptions),this.setOptions(n.options),this.observers=[],qe(this,pa,n.client),qe(this,Or,K(this,pa).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,qe(this,fa,lS(this.options)),this.state=n.state??K(this,fa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Tn))==null?void 0:n.promise}setOptions(n){if(this.options={...K(this,Ud),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=lS(this.options);r.data!==void 0&&(this.setState(aS(r.data,r.dataUpdatedAt)),qe(this,fa,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,Or).remove(this)}setData(n,r){const s=t3(this.state.data,n,this.options);return Mn(this,Kr,js).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Mn(this,Kr,js).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Tn))==null?void 0:s.promise;return(i=K(this,Tn))==null||i.cancel(n),r?r.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,fa))}isActive(){return this.observers.some(n=>Xj(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Qv(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Jj(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Tn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Tn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,Or).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Tn)&&(K(this,ma)?K(this,Tn).cancel({revert:!0}):K(this,Tn).cancelRetry()),this.scheduleGc()),K(this,Or).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mn(this,Kr,js).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,p,_,m,v,E,y,w,R;if(this.state.fetchStatus!=="idle"&&((c=K(this,Tn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Tn))return K(this,Tn).continueRetry(),K(this,Tn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const D=this.observers.find(L=>L.options.queryFn);D&&this.setOptions(D.options)}const s=new AbortController,i=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(qe(this,ma,!0),s.signal)})},o=()=>{const D=gC(this.options,r),x=(()=>{const A={client:K(this,pa),queryKey:this.queryKey,meta:this.meta};return i(A),A})();return qe(this,ma,!1),this.options.persister?this.options.persister(D,x,this):D(x)},l=(()=>{const D={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:K(this,pa),state:this.state,fetchFn:o};return i(D),D})();(d=this.options.behavior)==null||d.onFetch(l,this),qe(this,$l,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Mn(this,Kr,js).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),qe(this,Tn,_C({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:D=>{D instanceof Jv&&D.revert&&this.setState({...K(this,$l),fetchStatus:"idle"}),s.abort()},onFail:(D,L)=>{Mn(this,Kr,js).call(this,{type:"failed",failureCount:D,error:L})},onPause:()=>{Mn(this,Kr,js).call(this,{type:"pause"})},onContinue:()=>{Mn(this,Kr,js).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const D=await K(this,Tn).start();if(D===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(D),(_=(p=K(this,Or).config).onSuccess)==null||_.call(p,D,this),(v=(m=K(this,Or).config).onSettled)==null||v.call(m,D,this.state.error,this),D}catch(D){if(D instanceof Jv){if(D.silent)return K(this,Tn).promise;if(D.revert){if(this.state.data===void 0)throw D;return this.state.data}}throw Mn(this,Kr,js).call(this,{type:"error",error:D}),(y=(E=K(this,Or).config).onError)==null||y.call(E,D,this),(R=(w=K(this,Or).config).onSettled)==null||R.call(w,this.state.data,D,this),D}finally{this.scheduleGc()}}},fa=new WeakMap,$l=new WeakMap,Or=new WeakMap,pa=new WeakMap,Tn=new WeakMap,Ud=new WeakMap,ma=new WeakMap,Kr=new WeakSet,js=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...w3(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...aS(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return qe(this,$l,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Zn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,Or).notify({query:this,type:"updated",action:n})})},wx);function w3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:wC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function aS(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function lS(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function cS(t){return{onFetch:(e,n)=>{var d,h,f,p,_;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},E=gC(e.options,e.fetchOptions),y=async(w,R,D)=>{if(m)return Promise.reject();if(R==null&&w.pages.length)return Promise.resolve(w);const x=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:R,direction:D?"backward":"forward",meta:e.options.meta};return v(k),k})(),A=await E(x),{maxPages:b}=e.options,P=D?r3:n3;return{pages:P(w.pages,A,b),pageParams:P(w.pageParams,R,b)}};if(s&&i.length){const w=s==="backward",R=w?_3:uS,D={pages:i,pageParams:o},L=R(r,D);a=await y(D,L,w)}else{const w=t??i.length;do{const R=l===0?o[0]??r.initialPageParam:uS(r,a);if(l>0&&R==null)break;a=await y(a,R),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var m,v;return(v=(m=e.options).persister)==null?void 0:v.call(m,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function uS(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function _3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var jd,ys,Yn,ga,vs,ki,_x,E3=(_x=class extends EC{constructor(n){super();ct(this,vs);ct(this,jd);ct(this,ys);ct(this,Yn);ct(this,ga);qe(this,jd,n.client),this.mutationId=n.mutationId,qe(this,Yn,n.mutationCache),qe(this,ys,[]),this.state=n.state||T3(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,ys).includes(n)||(K(this,ys).push(n),this.clearGcTimeout(),K(this,Yn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){qe(this,ys,K(this,ys).filter(r=>r!==n)),this.scheduleGc(),K(this,Yn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,ys).length||(this.state.status==="pending"?this.scheduleGc():K(this,Yn).remove(this))}continue(){var n;return((n=K(this,ga))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,p,_,m,v,E,y,w,R,D,L,x,A,b,P;const r=()=>{Mn(this,vs,ki).call(this,{type:"continue"})},s={client:K(this,jd),meta:this.options.meta,mutationKey:this.options.mutationKey};qe(this,ga,_C({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(k,O)=>{Mn(this,vs,ki).call(this,{type:"failed",failureCount:k,error:O})},onPause:()=>{Mn(this,vs,ki).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,Yn).canRun(this)}));const i=this.state.status==="pending",o=!K(this,ga).canStart();try{if(i)r();else{Mn(this,vs,ki).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=K(this,Yn).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&Mn(this,vs,ki).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const k=await K(this,ga).start();return await((f=(h=K(this,Yn).config).onSuccess)==null?void 0:f.call(h,k,n,this.state.context,this,s)),await((_=(p=this.options).onSuccess)==null?void 0:_.call(p,k,n,this.state.context,s)),await((v=(m=K(this,Yn).config).onSettled)==null?void 0:v.call(m,k,null,this.state.variables,this.state.context,this,s)),await((y=(E=this.options).onSettled)==null?void 0:y.call(E,k,null,n,this.state.context,s)),Mn(this,vs,ki).call(this,{type:"success",data:k}),k}catch(k){try{throw await((R=(w=K(this,Yn).config).onError)==null?void 0:R.call(w,k,n,this.state.context,this,s)),await((L=(D=this.options).onError)==null?void 0:L.call(D,k,n,this.state.context,s)),await((A=(x=K(this,Yn).config).onSettled)==null?void 0:A.call(x,void 0,k,this.state.variables,this.state.context,this,s)),await((P=(b=this.options).onSettled)==null?void 0:P.call(b,void 0,k,n,this.state.context,s)),k}finally{Mn(this,vs,ki).call(this,{type:"error",error:k})}}finally{K(this,Yn).runNext(this)}}},jd=new WeakMap,ys=new WeakMap,Yn=new WeakMap,ga=new WeakMap,vs=new WeakSet,ki=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Zn.batch(()=>{K(this,ys).forEach(s=>{s.onMutationUpdate(n)}),K(this,Yn).notify({mutation:this,type:"updated",action:n})})},_x);function T3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zs,Gr,$d,Ex,I3=(Ex=class extends Nm{constructor(e={}){super();ct(this,zs);ct(this,Gr);ct(this,$d);this.config=e,qe(this,zs,new Set),qe(this,Gr,new Map),qe(this,$d,0)}build(e,n,r){const s=new E3({client:e,mutationCache:this,mutationId:++Th(this,$d)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){K(this,zs).add(e);const n=Wh(e);if(typeof n=="string"){const r=K(this,Gr).get(n);r?r.push(e):K(this,Gr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(K(this,zs).delete(e)){const n=Wh(e);if(typeof n=="string"){const r=K(this,Gr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&K(this,Gr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Wh(e);if(typeof n=="string"){const r=K(this,Gr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Wh(e);if(typeof n=="string"){const s=(r=K(this,Gr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zn.batch(()=>{K(this,zs).forEach(e=>{this.notify({type:"removed",mutation:e})}),K(this,zs).clear(),K(this,Gr).clear()})}getAll(){return Array.from(K(this,zs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>sS(n,r))}findAll(e={}){return this.getAll().filter(n=>sS(e,n))}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Zn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xn))))}},zs=new WeakMap,Gr=new WeakMap,$d=new WeakMap,Ex);function Wh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ws,Tx,S3=(Tx=class extends Nm{constructor(e={}){super();ct(this,ws);this.config=e,qe(this,ws,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??d0(s,n);let o=this.get(i);return o||(o=new v3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,ws).has(e.queryHash)||(K(this,ws).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,ws).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,ws).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,ws).get(e)}getAll(){return[...K(this,ws).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>rS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>rS(e,r)):n}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ws=new WeakMap,Tx),Zt,Bi,zi,Bl,zl,Wi,Wl,ql,Ix,b3=(Ix=class{constructor(t={}){ct(this,Zt);ct(this,Bi);ct(this,zi);ct(this,Bl);ct(this,zl);ct(this,Wi);ct(this,Wl);ct(this,ql);qe(this,Zt,t.queryCache||new S3),qe(this,Bi,t.mutationCache||new I3),qe(this,zi,t.defaultOptions||{}),qe(this,Bl,new Map),qe(this,zl,new Map),qe(this,Wi,0)}mount(){Th(this,Wi)._++,K(this,Wi)===1&&(qe(this,Wl,yC.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,Zt).onFocus())})),qe(this,ql,Ep.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,Zt).onOnline())})))}unmount(){var t,e;Th(this,Wi)._--,K(this,Wi)===0&&((t=K(this,Wl))==null||t.call(this),qe(this,Wl,void 0),(e=K(this,ql))==null||e.call(this),qe(this,ql,void 0))}isFetching(t){return K(this,Zt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,Bi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,Zt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=K(this,Zt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Qv(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return K(this,Zt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,Zt).get(r.queryHash),i=s==null?void 0:s.state.data,o=Qj(e,i);if(o!==void 0)return K(this,Zt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Zn.batch(()=>K(this,Zt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,Zt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,Zt);Zn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,Zt);return Zn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zn.batch(()=>K(this,Zt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Xn).catch(Xn)}invalidateQueries(t,e={}){return Zn.batch(()=>(K(this,Zt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zn.batch(()=>K(this,Zt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,Zt).build(this,e);return n.isStaleByTime(Qv(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xn).catch(Xn)}fetchInfiniteQuery(t){return t.behavior=cS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xn).catch(Xn)}ensureInfiniteQueryData(t){return t.behavior=cS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ep.isOnline()?K(this,Bi).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,Zt)}getMutationCache(){return K(this,Bi)}getDefaultOptions(){return K(this,zi)}setDefaultOptions(t){qe(this,zi,t)}setQueryDefaults(t,e){K(this,Bl).set(yd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,Bl).values()],n={};return e.forEach(r=>{vd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){K(this,zl).set(yd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,zl).values()],n={};return e.forEach(r=>{vd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,zi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=d0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===h0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,zi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,Zt).clear(),K(this,Bi).clear()}},Zt=new WeakMap,Bi=new WeakMap,zi=new WeakMap,Bl=new WeakMap,zl=new WeakMap,Wi=new WeakMap,Wl=new WeakMap,ql=new WeakMap,Ix),TC=S.createContext(void 0),QK=t=>{const e=S.useContext(TC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},A3=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),I.jsx(TC.Provider,{value:t,children:e})),x3=["added","removed","updated"];function dS(t){return x3.includes(t)}async function R3({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();f3(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function hS({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:h3(t,r)};await e.persistClient(s)}function P3(t){const e=t.queryClient.getQueryCache().subscribe(r=>{dS(r.type)&&hS(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{dS(r.type)&&hS(t)});return()=>{e(),n()}}function C3(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=R3(t).then(()=>{e||(n=P3(t))});return[r,s]}function hy(){}function D3({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:k3(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:hy,restoreClient:hy,removeClient:hy}}function k3(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=_p.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wd.apply(this,arguments)}var Ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ki||(Ki={}));const fS="popstate";function N3(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Tp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_d(s)}return IC(e,n,null,t)}function O3(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Ba(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Tp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:_d(i))}function r(s,i){f0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return IC(e,n,r,t)}function ln(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function f0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L3(){return Math.random().toString(36).substr(2,8)}function pS(t,e){return{usr:t.state,key:t.key,idx:e}}function Tp(t,e,n,r){return n===void 0&&(n=null),wd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ba(e):e,{state:n,key:e&&e.key||r||L3()})}function _d(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ba(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function IC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ki.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(wd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ki.Pop;let v=d(),E=v==null?null:v-c;c=v,l&&l({action:a,location:m.location,delta:E})}function f(v,E){a=Ki.Push;let y=Tp(m.location,v,E);n&&n(y,v),c=d()+1;let w=pS(y,c),R=m.createHref(y);try{o.pushState(w,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(R)}i&&l&&l({action:a,location:m.location,delta:1})}function p(v,E){a=Ki.Replace;let y=Tp(m.location,v,E);n&&n(y,v),c=d();let w=pS(y,c),R=m.createHref(y);o.replaceState(w,"",R),i&&l&&l({action:a,location:m.location,delta:0})}function _(v){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:_d(v);return y=y.replace(/ $/,"%20"),ln(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let m={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(fS,h),l=v,()=>{s.removeEventListener(fS,h),l=null}},createHref(v){return e(s,v)},createURL:_,encodeLocation(v){let E=_(v);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:p,go(v){return o.go(v)}};return m}var mS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mS||(mS={}));function V3(t,e,n){return n===void 0&&(n="/"),M3(t,e,n)}function M3(t,e,n,r){let s=typeof e=="string"?Ba(e):e,i=p0(s.pathname||"/",n);if(i==null)return null;let o=SC(t);F3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Y3(i);a=K3(o[l],c)}return a}function SC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ln(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=io([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(ln(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),SC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:q3(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of bC(i.path))s(i,o,l)}),e}function bC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=bC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function F3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:H3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const U3=/^:[\w-]+$/,j3=3,$3=2,B3=1,z3=10,W3=-2,gS=t=>t==="*";function q3(t,e){let n=t.split("/"),r=n.length;return n.some(gS)&&(r+=W3),e&&(r+=$3),n.filter(s=>!gS(s)).reduce((s,i)=>s+(U3.test(i)?j3:i===""?B3:z3),r)}function H3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function K3(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=G3({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:io([i,h.pathname]),pathnameBase:e6(io([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=io([i,h.pathnameBase]))}return o}function G3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Q3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let m=a[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const _=a[h];return p&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Q3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),f0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Y3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return f0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function p0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function J3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ba(t):t;return{pathname:n?n.startsWith("/")?n:X3(n,e):e,search:t6(r),hash:n6(s)}}function X3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function fy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function m0(t,e){let n=Z3(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function g0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ba(t):(s=wd({},t),ln(!s.pathname||!s.pathname.includes("?"),fy("?","pathname","search",s)),ln(!s.pathname||!s.pathname.includes("#"),fy("#","pathname","hash",s)),ln(!s.search||!s.search.includes("#"),fy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=J3(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const io=t=>t.join("/").replace(/\/\/+/g,"/"),e6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,n6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AC=["post","put","patch","delete"];new Set(AC);const s6=["get",...AC];new Set(s6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}const y0=S.createContext(null),i6=S.createContext(null),Po=S.createContext(null),Lm=S.createContext(null),hi=S.createContext({outlet:null,matches:[],isDataRoute:!1}),xC=S.createContext(null);function o6(t,e){let{relative:n}=e===void 0?{}:e;Pc()||ln(!1);let{basename:r,navigator:s}=S.useContext(Po),{hash:i,pathname:o,search:a}=PC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:io([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Pc(){return S.useContext(Lm)!=null}function Ms(){return Pc()||ln(!1),S.useContext(Lm).location}function RC(t){S.useContext(Po).static||S.useLayoutEffect(t)}function Cc(){let{isDataRoute:t}=S.useContext(hi);return t?w6():a6()}function a6(){Pc()||ln(!1);let t=S.useContext(y0),{basename:e,future:n,navigator:r}=S.useContext(Po),{matches:s}=S.useContext(hi),{pathname:i}=Ms(),o=JSON.stringify(m0(s,n.v7_relativeSplatPath)),a=S.useRef(!1);return RC(()=>{a.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=g0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:io([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function YK(){let{matches:t}=S.useContext(hi),e=t[t.length-1];return e?e.params:{}}function PC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(Po),{matches:s}=S.useContext(hi),{pathname:i}=Ms(),o=JSON.stringify(m0(s,r.v7_relativeSplatPath));return S.useMemo(()=>g0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function l6(t,e){return c6(t,e)}function c6(t,e,n,r){Pc()||ln(!1);let{navigator:s}=S.useContext(Po),{matches:i}=S.useContext(hi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ms(),d;if(e){var h;let v=typeof e=="string"?Ba(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||ln(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let _=V3(t,{pathname:p}),m=p6(_&&_.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:io([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:io([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&m?S.createElement(Lm.Provider,{value:{location:Ed({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ki.Pop}},m):m}function u6(){let t=v6(),e=r6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const d6=S.createElement(u6,null);class h6 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(hi.Provider,{value:this.props.routeContext},S.createElement(xC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f6(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(y0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(hi.Provider,{value:e},r)}function p6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||ln(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,_=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,_=!1,m=null,v=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,m=h.route.errorElement||d6,l&&(c<0&&f===0?(_6("route-fallback"),_=!0,v=null):c===f&&(_=!0,v=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),y=()=>{let w;return p?w=m:_?w=v:h.route.Component?w=S.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,S.createElement(f6,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(h6,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var CC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CC||{}),DC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(DC||{});function m6(t){let e=S.useContext(y0);return e||ln(!1),e}function g6(t){let e=S.useContext(i6);return e||ln(!1),e}function y6(t){let e=S.useContext(hi);return e||ln(!1),e}function kC(t){let e=y6(),n=e.matches[e.matches.length-1];return n.route.id||ln(!1),n.route.id}function v6(){var t;let e=S.useContext(xC),n=g6(),r=kC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function w6(){let{router:t}=m6(CC.UseNavigateStable),e=kC(DC.UseNavigateStable),n=S.useRef(!1);return RC(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ed({fromRouteId:e},i)))},[t,e])}const yS={};function _6(t,e,n){yS[t]||(yS[t]=!0)}function NC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function JK(t){let{to:e,replace:n,state:r,relative:s}=t;Pc()||ln(!1);let{future:i,static:o}=S.useContext(Po),{matches:a}=S.useContext(hi),{pathname:l}=Ms(),c=Cc(),d=g0(e,m0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Ee(t){ln(!1)}function OC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ki.Pop,navigator:i,static:o=!1,future:a}=t;Pc()&&ln(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Ed({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ba(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:_="default"}=r,m=S.useMemo(()=>{let v=p0(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:_},navigationType:s}},[l,d,h,f,p,_,s]);return m==null?null:S.createElement(Po.Provider,{value:c},S.createElement(Lm.Provider,{children:n,value:m}))}function vS(t){let{children:e,location:n}=t;return l6(Xv(e),n)}new Promise(()=>{});function Xv(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,Xv(r.props.children,i));return}r.type!==Ee&&ln(!1),!r.props.index||!r.props.children||ln(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zv.apply(this,arguments)}function E6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function T6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function I6(t,e){return t.button===0&&(!e||e==="_self")&&!T6(t)}function ew(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function S6(t,e){let n=ew(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const b6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],A6="6";try{window.__reactRouterVersion=A6}catch{}const x6="startTransition",Ip=t_[x6];function R6(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=N3({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Ip?Ip(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>NC(r),[r]),S.createElement(OC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function P6(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=O3({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Ip?Ip(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>NC(r),[r]),S.createElement(OC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const C6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",D6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k6=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=E6(e,b6),{basename:p}=S.useContext(Po),_,m=!1;if(typeof c=="string"&&D6.test(c)&&(_=c,C6))try{let w=new URL(window.location.href),R=c.startsWith("//")?new URL(w.protocol+c):new URL(c),D=p0(R.pathname,p);R.origin===w.origin&&D!=null?c=D+R.search+R.hash:m=!0}catch{}let v=o6(c,{relative:s}),E=N6(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(w){r&&r(w),w.defaultPrevented||E(w)}return S.createElement("a",Zv({},f,{href:_||v,onClick:m||i?r:y,ref:n,target:l}))});var wS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wS||(wS={}));var _S;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_S||(_S={}));function N6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Cc(),c=Ms(),d=PC(t,{relative:o});return S.useCallback(h=>{if(I6(h,n)){h.preventDefault();let f=r!==void 0?r:_d(c)===_d(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function XK(t){let e=S.useRef(ew(t)),n=S.useRef(!1),r=Ms(),s=S.useMemo(()=>S6(r.search,n.current?null:e.current),[r.search]),i=Cc(),o=S.useCallback((a,l)=>{const c=ew(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const LC=S.createContext(void 0),O6=({children:t})=>{const[e,n]=S.useState("medium"),[r,s]=S.useState(!1),[i,o]=S.useState(!1);S.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),S.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),S.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),S.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return I.jsx(LC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},ZK=()=>{const t=S.useContext(LC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},L6=S1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ho=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?RM:"button";return I.jsx(o,{className:Nn(L6({variant:e,size:n,className:t})),ref:i,...s})});Ho.displayName="Button";const tw=S.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),I.jsx("input",{type:e,className:Nn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});tw.displayName="Input";const V6=()=>{};var ES={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},M6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},v0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new F6;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class F6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U6=function(t){const e=VC(t);return v0.encodeByteArray(e,!0)},Sp=function(t){return U6(t).replace(/\./g,"")},MC=function(t){try{return v0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=()=>FC().__FIREBASE_DEFAULTS__,$6=()=>{if(typeof process>"u"||typeof ES>"u")return;const t=ES.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MC(t[1]);return e&&JSON.parse(e)},Vm=()=>{try{return V6()||j6()||$6()||B6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z6=t=>{var e,n;return(n=(e=Vm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},UC=t=>{const e=z6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jC=()=>{var t;return(t=Vm())==null?void 0:t.config},W6=t=>{var e;return(e=Vm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Sp(JSON.stringify(n)),Sp(JSON.stringify(o)),""].join(".")}const Fu={};function H6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?t.emulator.push(e):t.prod.push(e);return t}function K6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let TS=!1;function $C(t,e){if(typeof window>"u"||typeof document>"u"||!fi(window.location.host)||Fu[t]===e||Fu[t]||TS)return;Fu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=H6().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{TS=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=K6(r),p=n("text"),_=document.getElementById(p)||document.createElement("span"),m=n("learnmore"),v=document.getElementById(m)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),d(v,m);const R=c();l(y,E),w.append(y,_,v,R),document.body.appendChild(w)}i?(_.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function BC(){var e;const t=(e=Vm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X6(){const t=On();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zC(){return!BC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WC(){return!BC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _0(){try{return typeof indexedDB=="object"}catch{return!1}}function Z6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$="FirebaseError";class cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e$,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?t$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cs(s,a,r)}}function t$(t,e){return t.replace(n$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const n$=/\{\$([^}]+)}/g;function tc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(IS(i)&&IS(o)){if(!tc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function IS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _u(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Eu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function r$(t,e){const n=new s$(t,e);return n.subscribe.bind(n)}class s${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");i$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=py),s.error===void 0&&(s.error=py),s.complete===void 0&&(s.complete=py);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function py(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class as{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l$(e))try{this.getOrInitializeService({instanceIdentifier:Bo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bo){return this.instances.has(e)}getOptions(e=Bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bo){return this.component?this.component.multipleInstances?e:Bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a$(t){return t===Bo?void 0:t}function l$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new o$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const u$={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},d$=st.INFO,h$={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},f$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=h$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=d$,this._logHandler=f$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const p$=(t,e)=>e.some(n=>t instanceof n);let SS,bS;function m$(){return SS||(SS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g$(){return bS||(bS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HC=new WeakMap,rw=new WeakMap,KC=new WeakMap,my=new WeakMap,E0=new WeakMap;function y$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(oo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&HC.set(n,t)}).catch(()=>{}),E0.set(e,t),e}function v$(t){if(rw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});rw.set(t,e)}let sw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function w$(t){sw=t(sw)}function _$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gy(this),e,...n);return KC.set(r,e.sort?e.sort():[e]),oo(r)}:g$().includes(t)?function(...e){return t.apply(gy(this),e),oo(HC.get(this))}:function(...e){return oo(t.apply(gy(this),e))}}function E$(t){return typeof t=="function"?_$(t):(t instanceof IDBTransaction&&v$(t),p$(t,m$())?new Proxy(t,sw):t)}function oo(t){if(t instanceof IDBRequest)return y$(t);if(my.has(t))return my.get(t);const e=E$(t);return e!==t&&(my.set(t,e),E0.set(e,t)),e}const gy=t=>E0.get(t);function T$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=oo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(oo(o.result),l.oldVersion,l.newVersion,oo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const I$=["get","getKey","getAll","getAllKeys","count"],S$=["put","add","delete","clear"],yy=new Map;function AS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yy.get(e))return yy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=S$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||I$.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return yy.set(e,i),i}w$(t=>({...t,get:(e,n,r)=>AS(e,n)||t.get(e,n,r),has:(e,n)=>!!AS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iw="@firebase/app",xS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Mm("@firebase/app"),x$="@firebase/app-compat",R$="@firebase/analytics-compat",P$="@firebase/analytics",C$="@firebase/app-check-compat",D$="@firebase/app-check",k$="@firebase/auth",N$="@firebase/auth-compat",O$="@firebase/database",L$="@firebase/data-connect",V$="@firebase/database-compat",M$="@firebase/functions",F$="@firebase/functions-compat",U$="@firebase/installations",j$="@firebase/installations-compat",$$="@firebase/messaging",B$="@firebase/messaging-compat",z$="@firebase/performance",W$="@firebase/performance-compat",q$="@firebase/remote-config",H$="@firebase/remote-config-compat",K$="@firebase/storage",G$="@firebase/storage-compat",Q$="@firebase/firestore",Y$="@firebase/ai",J$="@firebase/firestore-compat",X$="firebase",Z$="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="[DEFAULT]",eB={[iw]:"fire-core",[x$]:"fire-core-compat",[P$]:"fire-analytics",[R$]:"fire-analytics-compat",[D$]:"fire-app-check",[C$]:"fire-app-check-compat",[k$]:"fire-auth",[N$]:"fire-auth-compat",[O$]:"fire-rtdb",[L$]:"fire-data-connect",[V$]:"fire-rtdb-compat",[M$]:"fire-fn",[F$]:"fire-fn-compat",[U$]:"fire-iid",[j$]:"fire-iid-compat",[$$]:"fire-fcm",[B$]:"fire-fcm-compat",[z$]:"fire-perf",[W$]:"fire-perf-compat",[q$]:"fire-rc",[H$]:"fire-rc-compat",[K$]:"fire-gcs",[G$]:"fire-gcs-compat",[Q$]:"fire-fst",[J$]:"fire-fst-compat",[Y$]:"fire-vertex","fire-js":"fire-js",[X$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=new Map,tB=new Map,aw=new Map;function RS(t,e){try{t.container.addComponent(e)}catch(n){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Os(t){const e=t.name;if(aw.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;aw.set(e,t);for(const n of bp.values())RS(n,t);for(const n of tB.values())RS(n,t);return!0}function Fm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Er(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new Dc("app","Firebase",nB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=Z$;function GC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ow,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ao.create("bad-app-name",{appName:String(s)});if(n||(n=jC()),!n)throw ao.create("no-options");const i=bp.get(s);if(i){if(tc(n,i.options)&&tc(r,i.config))return i;throw ao.create("duplicate-app",{appName:s})}const o=new c$(s);for(const l of aw.values())o.addComponent(l);const a=new rB(n,r,o);return bp.set(s,a),a}function QC(t=ow){const e=bp.get(t);if(!e&&t===ow&&jC())return GC();if(!e)throw ao.create("no-app",{appName:t});return e}function Rr(t,e,n){let r=eB[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(o.join(" "));return}Os(new as(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="firebase-heartbeat-database",iB=1,Td="firebase-heartbeat-store";let vy=null;function YC(){return vy||(vy=T$(sB,iB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Td)}catch(n){console.warn(n)}}}}).catch(t=>{throw ao.create("idb-open",{originalErrorMessage:t.message})})),vy}async function oB(t){try{const n=(await YC()).transaction(Td),r=await n.objectStore(Td).get(JC(t));return await n.done,r}catch(e){if(e instanceof cs)ai.warn(e.message);else{const n=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ai.warn(n.message)}}}async function PS(t,e){try{const r=(await YC()).transaction(Td,"readwrite");await r.objectStore(Td).put(e,JC(t)),await r.done}catch(n){if(n instanceof cs)ai.warn(n.message);else{const r=ao.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ai.warn(r.message)}}}function JC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=1024,lB=30;class cB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=CS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>lB){const o=hB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ai.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=CS(),{heartbeatsToSend:r,unsentEntries:s}=uB(this._heartbeatsCache.heartbeats),i=Sp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ai.warn(n),""}}}function CS(){return new Date().toISOString().substring(0,10)}function uB(t,e=aB){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),DS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),DS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _0()?Z6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return PS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return PS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function DS(t){return Sp(JSON.stringify({version:2,heartbeats:t})).length}function hB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(t){Os(new as("platform-logger",e=>new b$(e),"PRIVATE")),Os(new as("heartbeat",e=>new cB(e),"PRIVATE")),Rr(iw,xS,t),Rr(iw,xS,"esm2020"),Rr("fire-js","")}fB("");function XC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pB=XC,ZC=new Dc("auth","Firebase",XC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=new Mm("@firebase/auth");function mB(t,...e){Ap.logLevel<=st.WARN&&Ap.warn(`Auth (${Yd}): ${t}`,...e)}function Rf(t,...e){Ap.logLevel<=st.ERROR&&Ap.error(`Auth (${Yd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,...e){throw I0(t,...e)}function T0(t,...e){return I0(t,...e)}function eD(t,e,n){const r={...pB(),[e]:n};return new Dc("auth","Firebase",r).create(e,{appName:t.name})}function lo(t){return eD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZC.create(t,...e)}function it(t,e,...n){if(!t)throw I0(e,...n)}function Ks(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rf(e),new Error(e)}function xp(t,e){t||Ks(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function tD(){return kS()==="http:"||kS()==="https:"}function kS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tD()||Y6()||"connection"in navigator)?navigator.onLine:!0}function vB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.shortDelay=e,this.longDelay=n,xp(n>e,"Short delay should be less than long delay!"),this.isMobile=G6()||J6()}get(){return yB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e){xp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TB=new Jd(3e4,6e4);function pi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fs(t,e,n,r,s={}){return rD(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=qC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return Q6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&fi(t.emulatorConfig.host)&&(c.credentials="include"),nD.fetch()(await sD(t,t.config.apiHost,n,a),c)})}async function rD(t,e,n){t._canInitEmulator=!1;const r={..._B,...e};try{const s=new SB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw qh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw qh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw qh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eD(t,d,c);Pa(t,d)}}catch(s){if(s instanceof cs)throw s;Pa(t,"network-request-failed",{message:String(s)})}}async function Um(t,e,n,r,s={}){const i=await Fs(t,e,n,r,s);return"mfaPendingCredential"in i&&Pa(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function sD(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?wB(t.config,s):`${t.config.apiScheme}://${s}`;return EB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function IB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(T0(this.auth,"network-request-failed")),TB.get())})}}function qh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=T0(t,e,r);return s.customData._tokenResponse=n,s}function NS(t){return t!==void 0&&t.enterprise!==void 0}class bB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AB(t,e){return Fs(t,"GET","/v2/recaptchaConfig",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xB(t,e){return Fs(t,"POST","/v1/accounts:delete",e)}async function Rp(t,e){return Fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RB(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),s=S0(r);it(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Uu(wy(s.auth_time)),issuedAtTime:Uu(wy(s.iat)),expirationTime:Uu(wy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function wy(t){return Number(t)*1e3}function S0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rf("JWT malformed, contained fewer than 3 sections"),null;try{const s=MC(n);return s?JSON.parse(s):(Rf("Failed to decode base64 JWT payload"),null)}catch(s){return Rf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function OS(t){const e=S0(t);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cs&&PB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Id(t,Rp(e,{idToken:n}));it(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?iD(s.providerUserInfo):[],o=kB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function DB(t){const e=Tt(t);await Pp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB(t,e){const n=await rD(t,{},async()=>{const r=qC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await sD(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&fi(t.emulatorConfig.host)&&(l.credentials="include"),nD.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OB(t,e){return Fs(t,"POST","/v2/accounts:revokeToken",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=OS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await NB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ol;return r&&(it(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(it(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(it(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e){it(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new CB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Id(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RB(this,e)}reload(){return DB(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(lo(this.auth));const e=await this.getIdToken();return await Id(this,xB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:_,stsTokenManager:m}=n;it(h&&m,e,"internal-error");const v=Ol.fromJSON(this.name,m);it(typeof h=="string",e,"internal-error"),Ri(r,e.name),Ri(s,e.name),it(typeof f=="boolean",e,"internal-error"),it(typeof p=="boolean",e,"internal-error"),Ri(i,e.name),Ri(o,e.name),Ri(a,e.name),Ri(l,e.name),Ri(c,e.name),Ri(d,e.name);const E=new Zr({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return _&&Array.isArray(_)&&(E.providerData=_.map(y=>({...y}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ol;s.updateFromServerResponse(n);const i=new Zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];it(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?iD(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ol;a.updateFromIdToken(r);const l=new Zr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new lw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new Map;function na(t){xp(t instanceof Function,"Expected a class definition");let e=LS.get(t);return e?(xp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oD.type="NONE";const cw=oD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t,e,n){return`firebase:${t}:${e}:${n}`}class Ll{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=_y(this.userKey,s.apiKey,i),this.fullPersistenceKey=_y("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rp(this.auth,{idToken:e}).catch(()=>{});return n?Zr._fromGetAccountInfoResponse(this.auth,n,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ll(na(cw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||na(cw);const o=_y(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Rp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Zr._fromGetAccountInfoResponse(e,f,d)}else h=Zr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ll(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ll(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cD(e))return"Blackberry";if(uD(e))return"Webos";if(VB(e))return"Safari";if((e.includes("chrome/")||MB(e))&&!e.includes("edge/"))return"Chrome";if(lD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LB(t=On()){return/firefox\//i.test(t)}function VB(t=On()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MB(t=On()){return/crios\//i.test(t)}function aD(t=On()){return/iemobile/i.test(t)}function lD(t=On()){return/android/i.test(t)}function cD(t=On()){return/blackberry/i.test(t)}function uD(t=On()){return/webos/i.test(t)}function FB(t=On()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UB(){return X6()&&document.documentMode===10}function jB(t=On()){return FB(t)||lD(t)||uD(t)||cD(t)||/windows phone/i.test(t)||aD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t,e=[]){let n;switch(t){case"Browser":n=VS(On());break;case"Worker":n=`${VS(On())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(t,e={}){return Fs(t,"GET","/v2/passwordPolicy",pi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB=6;class WB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MS(this),this.idTokenSubscription=new MS(this),this.beforeStateQueue=new $B(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=na(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rp(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(lo(this));const n=e?Tt(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BB(this),n=new WB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&na(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&mB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function kc(t){return Tt(t)}class MS{constructor(e){this.auth=e,this.observer=null,this.addObserver=r$(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HB(t){b0=t}function KB(t){return b0.loadJS(t)}function GB(){return b0.recaptchaEnterpriseScript}class QB{constructor(){this.enterprise=new YB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const JB="recaptcha-enterprise",hD="NO_RECAPTCHA";class XB{constructor(e){this.type=JB,this.auth=kc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{AB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;NS(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(hD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&NS(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=GB();l.length!==0&&(l+=a),KB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function FS(t,e,n,r=!1,s=!1){const i=new XB(t);let o;if(s)o=hD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Cp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await FS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await FS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(t,e){const n=Fm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(tc(i,e??{}))return s;Pa(s,"already-initialized")}return n.initialize({options:e})}function e5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(na);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ks("not implemented")}_getIdTokenResponse(e){return Ks("not implemented")}_linkToIdToken(e,n){return Ks("not implemented")}_getReauthenticationResolver(e){return Ks("not implemented")}}async function n5(t,e){return Fs(t,"POST","/v1/accounts:update",e)}async function r5(t,e){return Fs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(t,e){return Um(t,"POST","/v1/accounts:signInWithPassword",pi(t,e))}async function i5(t,e){return Fs(t,"POST","/v1/accounts:sendOobCode",pi(t,e))}async function o5(t,e){return i5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e){return Um(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}async function l5(t,e){return Um(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends t5{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(e,n,"signInWithPassword",s5);case"emailLink":return a5(e,{email:this._email,oobCode:this._password});default:Pa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(e,r,"signUpPassword",r5);case"emailLink":return l5(e,{idToken:n,email:this._email,oobCode:this._password});default:Pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u5(t){const e=_u(Eu(t)).link,n=e?_u(Eu(e)).deep_link_id:null,r=_u(Eu(t)).deep_link_id;return(r?_u(Eu(r)).link:null)||r||n||e||t}class A0{constructor(e){const n=_u(Eu(e)),r=n.apiKey??null,s=n.oobCode??null,i=c5(n.mode??null);it(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=u5(e);try{return new A0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.providerId=Nc.PROVIDER_ID}static credential(e,n){return Sd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=A0.parseLink(n);return it(r,"argument-error"),Sd._fromEmailAndCode(e,r.code,r.tenantId)}}Nc.PROVIDER_ID="password";Nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e){return Um(t,"POST","/v1/accounts:signUp",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zr._fromIdTokenResponse(e,r,s),o=US(r);return new nc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=US(r);return new nc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function US(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends cs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Dp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Dp(e,n,r,s)}}function fD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Dp._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(t,e,n=!1){const{auth:r}=t;if(Er(r.app))return Promise.reject(lo(r));const s="reauthenticate";try{const i=await Id(t,fD(r,s,e,t),n);it(i.idToken,r,"internal-error");const o=S0(i.idToken);it(o,r,"internal-error");const{sub:a}=o;return it(t.uid===a,r,"user-mismatch"),nc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Pa(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e,n=!1){if(Er(t.app))return Promise.reject(lo(t));const r="signIn",s=await fD(t,r,e),i=await nc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function p5(t,e){return f5(kc(t),e)}async function tG(t,e){return h5(Tt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t){const e=kc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m5(t,e,n){const r=kc(t);await Cp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",o5)}async function jS(t,e,n){if(Er(t.app))return Promise.reject(lo(t));const r=kc(t),o=await Cp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&pD(t),l}),a=await nc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function g5(t,e,n){return Er(t.app)?Promise.reject(lo(t)):p5(Tt(t),Nc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t,e){return Fs(t,"POST","/v1/accounts:createAuthUri",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e){const n=tD()?gB():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await y5(Tt(t),r);return s||[]}function nG(t,e){return w5(Tt(t),null,e)}async function w5(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Id(t,n5(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e){return Tt(t).setPersistence(e)}function E5(t,e,n,r){return Tt(t).onAuthStateChanged(e,n,r)}function $S(t){return Tt(t).signOut()}const BS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(BS,"1"),this.storage.removeItem(BS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=1e3,I5=10;class gD extends mD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);UB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,I5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},T5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gD.type="LOCAL";const yD=gD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD extends mD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vD.type="SESSION";const S5=vD;new Jd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Jd(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Jd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Jd(5e3,15e3);var zS="@firebase/auth",WS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x5(t){Os(new as("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;it(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dD(t)},c=new qB(r,s,i,l);return e5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Os(new as("auth-internal",e=>{const n=kc(e.getProvider("auth").getImmediate());return(r=>new b5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(zS,WS,A5(t)),Rr(zS,WS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=5*60;W6("authIdTokenMaxAge");function P5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}HB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=T0("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",P5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x5("Browser");var C5="firebase",D5="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(C5,D5,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=new Map,N5={activated:!1,tokenObservers:[]},O5={initialized:!1,enabled:!1};function ls(t){return k5.get(t)||{...N5}}function wD(){return O5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="https://content-firebaseappcheck.googleapis.com/v1";const V5="exchangeDebugToken",qS={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},rG=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new nw,this.pending.promise.catch(n=>{}),await F5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new nw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function F5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Gi=new Dc("appCheck","AppCheck",U5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){if(!ls(t).activated)throw Gi.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw Gi.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw Gi.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Gi.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Gi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function TD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${L5}/projects/${n}/apps/${r}:${V5}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="firebase-app-check-database",$5=1,uw="firebase-app-check-store";let Hh=null;function B5(){return Hh||(Hh=new Promise((t,e)=>{try{const n=indexedDB.open(j5,$5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Gi.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(uw,{keyPath:"compositeKey"})}}}catch(n){e(Gi.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Hh)}function z5(t,e){return W5(q5(t),e)}async function W5(t,e){const r=(await B5()).transaction(uw,"readwrite"),i=r.objectStore(uw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Gi.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function q5(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Mm("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e){return _0()?z5(t,e).catch(n=>{Tu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){return wD().enabled}async function SD(){const t=wD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5={error:"UNKNOWN_ERROR"};function K5(t){return v0.encodeString(JSON.stringify(t),!1)}async function dw(t,e=!1,n=!1){const r=t.app;_D(r);const s=ls(r);let i=s.token,o;if(i&&!Iu(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Iu(c)?i=c:await Ey(r,void 0))}if(!e&&i&&Iu(i))return{token:i.token};let a=!1;if(ID())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=ED(TD(r,await SD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Ey(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Tu.warn(c.message):n&&Tu.error(c),Ty(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await ls(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Tu.warn(c.message):n&&Tu.error(c),o=c}let l;return i?o?Iu(i)?l={token:i.token,internalError:o}:l=Ty(o):(l={token:i.token},s.token=i,await Ey(r,i)):l=Ty(o),a&&J5(r,l),l}async function G5(t){const e=t.app;_D(e);const{provider:n}=ls(e);if(ID()){const r=await SD(),{token:s}=await ED(TD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function Q5(t,e,n,r){const{app:s}=t,i=ls(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Iu(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),HS(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>HS(t))}function bD(t,e){const n=ls(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function HS(t){const{app:e}=t,n=ls(e);let r=n.tokenRefresher;r||(r=Y5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Y5(t){const{app:e}=t;return new M5(async()=>{const n=ls(e);let r;if(n.token?r=await dw(t,!0):r=await dw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ls(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},qS.RETRIAL_MIN_WAIT,qS.RETRIAL_MAX_WAIT)}function J5(t,e){const n=ls(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Iu(t){return t.expireTimeMillis-Date.now()>0}function Ty(t){return{token:K5(H5),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=ls(this.app);for(const n of e)bD(this.app,n.next);return Promise.resolve()}}function Z5(t,e){return new X5(t,e)}function e9(t){return{getToken:e=>dw(t,e),getLimitedUseToken:()=>G5(t),addTokenListener:e=>Q5(t,"INTERNAL",e),removeTokenListener:e=>bD(t.app,e)}}const t9="@firebase/app-check",n9="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="app-check",KS="app-check-internal";function s9(){Os(new as(r9,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Z5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(KS).initialize()})),Os(new as(KS,t=>{const e=t.getProvider("app-check").getImmediate();return e9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rr(t9,n9)}s9();var GS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var co,AD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,A){function b(){}b.prototype=A.prototype,x.F=A.prototype,x.prototype=new b,x.prototype.constructor=x,x.D=function(P,k,O){for(var C=Array(arguments.length-2),B=2;B<arguments.length;B++)C[B-2]=arguments[B];return A.prototype[k].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,A,b){b||(b=0);const P=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)P[k]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(k=0;k<16;++k)P[k]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=x.g[0],b=x.g[1],k=x.g[2];let O=x.g[3],C;C=A+(O^b&(k^O))+P[0]+3614090360&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(k^A&(b^k))+P[1]+3905402710&4294967295,O=A+(C<<12&4294967295|C>>>20),C=k+(b^O&(A^b))+P[2]+606105819&4294967295,k=O+(C<<17&4294967295|C>>>15),C=b+(A^k&(O^A))+P[3]+3250441966&4294967295,b=k+(C<<22&4294967295|C>>>10),C=A+(O^b&(k^O))+P[4]+4118548399&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(k^A&(b^k))+P[5]+1200080426&4294967295,O=A+(C<<12&4294967295|C>>>20),C=k+(b^O&(A^b))+P[6]+2821735955&4294967295,k=O+(C<<17&4294967295|C>>>15),C=b+(A^k&(O^A))+P[7]+4249261313&4294967295,b=k+(C<<22&4294967295|C>>>10),C=A+(O^b&(k^O))+P[8]+1770035416&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(k^A&(b^k))+P[9]+2336552879&4294967295,O=A+(C<<12&4294967295|C>>>20),C=k+(b^O&(A^b))+P[10]+4294925233&4294967295,k=O+(C<<17&4294967295|C>>>15),C=b+(A^k&(O^A))+P[11]+2304563134&4294967295,b=k+(C<<22&4294967295|C>>>10),C=A+(O^b&(k^O))+P[12]+1804603682&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(k^A&(b^k))+P[13]+4254626195&4294967295,O=A+(C<<12&4294967295|C>>>20),C=k+(b^O&(A^b))+P[14]+2792965006&4294967295,k=O+(C<<17&4294967295|C>>>15),C=b+(A^k&(O^A))+P[15]+1236535329&4294967295,b=k+(C<<22&4294967295|C>>>10),C=A+(k^O&(b^k))+P[1]+4129170786&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^k&(A^b))+P[6]+3225465664&4294967295,O=A+(C<<9&4294967295|C>>>23),C=k+(A^b&(O^A))+P[11]+643717713&4294967295,k=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(k^O))+P[0]+3921069994&4294967295,b=k+(C<<20&4294967295|C>>>12),C=A+(k^O&(b^k))+P[5]+3593408605&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^k&(A^b))+P[10]+38016083&4294967295,O=A+(C<<9&4294967295|C>>>23),C=k+(A^b&(O^A))+P[15]+3634488961&4294967295,k=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(k^O))+P[4]+3889429448&4294967295,b=k+(C<<20&4294967295|C>>>12),C=A+(k^O&(b^k))+P[9]+568446438&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^k&(A^b))+P[14]+3275163606&4294967295,O=A+(C<<9&4294967295|C>>>23),C=k+(A^b&(O^A))+P[3]+4107603335&4294967295,k=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(k^O))+P[8]+1163531501&4294967295,b=k+(C<<20&4294967295|C>>>12),C=A+(k^O&(b^k))+P[13]+2850285829&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^k&(A^b))+P[2]+4243563512&4294967295,O=A+(C<<9&4294967295|C>>>23),C=k+(A^b&(O^A))+P[7]+1735328473&4294967295,k=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(k^O))+P[12]+2368359562&4294967295,b=k+(C<<20&4294967295|C>>>12),C=A+(b^k^O)+P[5]+4294588738&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^k)+P[8]+2272392833&4294967295,O=A+(C<<11&4294967295|C>>>21),C=k+(O^A^b)+P[11]+1839030562&4294967295,k=O+(C<<16&4294967295|C>>>16),C=b+(k^O^A)+P[14]+4259657740&4294967295,b=k+(C<<23&4294967295|C>>>9),C=A+(b^k^O)+P[1]+2763975236&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^k)+P[4]+1272893353&4294967295,O=A+(C<<11&4294967295|C>>>21),C=k+(O^A^b)+P[7]+4139469664&4294967295,k=O+(C<<16&4294967295|C>>>16),C=b+(k^O^A)+P[10]+3200236656&4294967295,b=k+(C<<23&4294967295|C>>>9),C=A+(b^k^O)+P[13]+681279174&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^k)+P[0]+3936430074&4294967295,O=A+(C<<11&4294967295|C>>>21),C=k+(O^A^b)+P[3]+3572445317&4294967295,k=O+(C<<16&4294967295|C>>>16),C=b+(k^O^A)+P[6]+76029189&4294967295,b=k+(C<<23&4294967295|C>>>9),C=A+(b^k^O)+P[9]+3654602809&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^k)+P[12]+3873151461&4294967295,O=A+(C<<11&4294967295|C>>>21),C=k+(O^A^b)+P[15]+530742520&4294967295,k=O+(C<<16&4294967295|C>>>16),C=b+(k^O^A)+P[2]+3299628645&4294967295,b=k+(C<<23&4294967295|C>>>9),C=A+(k^(b|~O))+P[0]+4096336452&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~k))+P[7]+1126891415&4294967295,O=A+(C<<10&4294967295|C>>>22),C=k+(A^(O|~b))+P[14]+2878612391&4294967295,k=O+(C<<15&4294967295|C>>>17),C=b+(O^(k|~A))+P[5]+4237533241&4294967295,b=k+(C<<21&4294967295|C>>>11),C=A+(k^(b|~O))+P[12]+1700485571&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~k))+P[3]+2399980690&4294967295,O=A+(C<<10&4294967295|C>>>22),C=k+(A^(O|~b))+P[10]+4293915773&4294967295,k=O+(C<<15&4294967295|C>>>17),C=b+(O^(k|~A))+P[1]+2240044497&4294967295,b=k+(C<<21&4294967295|C>>>11),C=A+(k^(b|~O))+P[8]+1873313359&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~k))+P[15]+4264355552&4294967295,O=A+(C<<10&4294967295|C>>>22),C=k+(A^(O|~b))+P[6]+2734768916&4294967295,k=O+(C<<15&4294967295|C>>>17),C=b+(O^(k|~A))+P[13]+1309151649&4294967295,b=k+(C<<21&4294967295|C>>>11),C=A+(k^(b|~O))+P[4]+4149444226&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~k))+P[11]+3174756917&4294967295,O=A+(C<<10&4294967295|C>>>22),C=k+(A^(O|~b))+P[2]+718787259&4294967295,k=O+(C<<15&4294967295|C>>>17),C=b+(O^(k|~A))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.v=function(x,A){A===void 0&&(A=x.length);const b=A-this.blockSize,P=this.C;let k=this.h,O=0;for(;O<A;){if(k==0)for(;O<=b;)s(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<A;)if(P[k++]=x.charCodeAt(O++),k==this.blockSize){s(this,P),k=0;break}}else for(;O<A;)if(P[k++]=x[O++],k==this.blockSize){s(this,P),k=0;break}}this.h=k,this.o+=A},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;A=this.o*8;for(var b=x.length-8;b<x.length;++b)x[b]=A&255,A/=256;for(this.v(x),x=Array(16),A=0,b=0;b<4;++b)for(let P=0;P<32;P+=8)x[A++]=this.g[b]>>>P&255;return x};function i(x,A){var b=a;return Object.prototype.hasOwnProperty.call(b,x)?b[x]:b[x]=A(x)}function o(x,A){this.h=A;const b=[];let P=!0;for(let k=x.length-1;k>=0;k--){const O=x[k]|0;P&&O==A||(b[k]=O,P=!1)}this.g=b}var a={};function l(x){return-128<=x&&x<128?i(x,function(A){return new o([A|0],A<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(x<0)return v(c(-x));const A=[];let b=1;for(let P=0;x>=b;P++)A[P]=x/b|0,b*=4294967296;return new o(A,0)}function d(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return v(d(x.substring(1),A));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(A,8));let P=h;for(let O=0;O<x.length;O+=8){var k=Math.min(8,x.length-O);const C=parseInt(x.substring(O,O+k),A);k<8?(k=c(Math.pow(A,k)),P=P.j(k).add(c(C))):(P=P.j(b),P=P.add(c(C)))}return P}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-v(this).m();let x=0,A=1;for(let b=0;b<this.g.length;b++){const P=this.i(b);x+=(P>=0?P:4294967296+P)*A,A*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(_(this))return"0";if(m(this))return"-"+v(this).toString(x);const A=c(Math.pow(x,6));var b=this;let P="";for(;;){const k=R(b,A).g;b=E(b,k.j(A));let O=((b.g.length>0?b.g[0]:b.h)>>>0).toString(x);if(b=k,_(b))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function _(x){if(x.h!=0)return!1;for(let A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function m(x){return x.h==-1}t.l=function(x){return x=E(this,x),m(x)?-1:_(x)?0:1};function v(x){const A=x.g.length,b=[];for(let P=0;P<A;P++)b[P]=~x.g[P];return new o(b,~x.h).add(f)}t.abs=function(){return m(this)?v(this):this},t.add=function(x){const A=Math.max(this.g.length,x.g.length),b=[];let P=0;for(let k=0;k<=A;k++){let O=P+(this.i(k)&65535)+(x.i(k)&65535),C=(O>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);P=C>>>16,O&=65535,C&=65535,b[k]=C<<16|O}return new o(b,b[b.length-1]&-2147483648?-1:0)};function E(x,A){return x.add(v(A))}t.j=function(x){if(_(this)||_(x))return h;if(m(this))return m(x)?v(this).j(v(x)):v(v(this).j(x));if(m(x))return v(this.j(v(x)));if(this.l(p)<0&&x.l(p)<0)return c(this.m()*x.m());const A=this.g.length+x.g.length,b=[];for(var P=0;P<2*A;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<x.g.length;k++){const O=this.i(P)>>>16,C=this.i(P)&65535,B=x.i(k)>>>16,te=x.i(k)&65535;b[2*P+2*k]+=C*te,y(b,2*P+2*k),b[2*P+2*k+1]+=O*te,y(b,2*P+2*k+1),b[2*P+2*k+1]+=C*B,y(b,2*P+2*k+1),b[2*P+2*k+2]+=O*B,y(b,2*P+2*k+2)}for(x=0;x<A;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=A;x<2*A;x++)b[x]=0;return new o(b,0)};function y(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function w(x,A){this.g=x,this.h=A}function R(x,A){if(_(A))throw Error("division by zero");if(_(x))return new w(h,h);if(m(x))return A=R(v(x),A),new w(v(A.g),v(A.h));if(m(A))return A=R(x,v(A)),new w(v(A.g),A.h);if(x.g.length>30){if(m(x)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var b=f,P=A;P.l(x)<=0;)b=D(b),P=D(P);var k=L(b,1),O=L(P,1);for(P=L(P,2),b=L(b,2);!_(P);){var C=O.add(P);C.l(x)<=0&&(k=k.add(b),O=C),P=L(P,1),b=L(b,1)}return A=E(x,k.j(A)),new w(k,A)}for(k=h;x.l(A)>=0;){for(b=Math.max(1,Math.floor(x.m()/A.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=c(b),C=O.j(A);m(C)||C.l(x)>0;)b-=P,O=c(b),C=O.j(A);_(O)&&(O=f),k=k.add(O),x=E(x,C)}return new w(k,x)}t.B=function(x){return R(this,x).h},t.and=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)&x.i(P);return new o(b,this.h&x.h)},t.or=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)|x.i(P);return new o(b,this.h|x.h)},t.xor=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)^x.i(P);return new o(b,this.h^x.h)};function D(x){const A=x.g.length+1,b=[];for(let P=0;P<A;P++)b[P]=x.i(P)<<1|x.i(P-1)>>>31;return new o(b,x.h)}function L(x,A){const b=A>>5;A%=32;const P=x.g.length-b,k=[];for(let O=0;O<P;O++)k[O]=A>0?x.i(O+b)>>>A|x.i(O+b+1)<<32-A:x.i(O+b);return new o(k,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,co=o}).apply(typeof GS<"u"?GS:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xD,Su,RD,Pf,hw,PD,CD,DD;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var g=0;g<u.length;++g){var T=u[g];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var T=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var M=u[N];if(!(M in T))break e;T=T[M]}u=u[u.length-1],N=T[u],g=g(N),g!=N&&g!=null&&e(T,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var T=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&T.push([N,g[N]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,T){return u.call.apply(u.bind,arguments)}function c(u,g,T){return c=l,c.apply(null,arguments)}function d(u,g){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,g){function T(){}T.prototype=g.prototype,u.Z=g.prototype,u.prototype=new T,u.prototype.constructor=u,u.Ob=function(N,M,$){for(var ce=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ce[Je-2]=arguments[Je];return g.prototype[M].apply(N,ce)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const g=u.length;if(g>0){const T=Array(g);for(let N=0;N<g;N++)T[N]=u[N];return T}return[]}function _(u,g){for(let N=1;N<arguments.length;N++){const M=arguments[N];var T=typeof M;if(T=T!="object"?T:M?Array.isArray(M)?"array":T:"null",T=="array"||T=="object"&&typeof M.length=="number"){T=u.length||0;const $=M.length||0;u.length=T+$;for(let ce=0;ce<$;ce++)u[T+ce]=M[ce]}else u.push(M)}}class m{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){o.setTimeout(()=>{throw u},0)}function E(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class y{constructor(){this.h=this.g=null}add(g,T){const N=w.get();N.set(g,T),this.h?this.h.next=N:this.g=N,this.h=N}}var w=new m(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let D,L=!1,x=new y,A=()=>{const u=Promise.resolve(void 0);D=()=>{u.then(b)}};function b(){for(var u;u=E();){try{u.h.call(u.g)}catch(T){v(T)}var g=w;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const T=()=>{};o.addEventListener("test",T,g),o.removeEventListener("test",T,g)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function B(u,g){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(B,k),B.prototype.init=function(u,g){const T=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(T=="mouseover"?g=u.fromElement:T=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),ee=0;function z(u,g,T,N,M){this.listener=u,this.proxy=null,this.src=g,this.type=T,this.capture=!!N,this.ha=M,this.key=++ee,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u,g,T){for(const N in u)g.call(T,u[N],N,u)}function oe(u,g){for(const T in u)g.call(void 0,u[T],T,u)}function de(u){const g={};for(const T in u)g[T]=u[T];return g}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(u,g){let T,N;for(let M=1;M<arguments.length;M++){N=arguments[M];for(T in N)u[T]=N[T];for(let $=0;$<Q.length;$++)T=Q[$],Object.prototype.hasOwnProperty.call(N,T)&&(u[T]=N[T])}}function be(u){this.src=u,this.g={},this.h=0}be.prototype.add=function(u,g,T,N,M){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const ce=Ge(u,g,N,M);return ce>-1?(g=u[ce],T||(g.fa=!1)):(g=new z(g,this.src,$,!!N,M),g.fa=T,u.push(g)),g};function Ve(u,g){const T=g.type;if(T in u.g){var N=u.g[T],M=Array.prototype.indexOf.call(N,g,void 0),$;($=M>=0)&&Array.prototype.splice.call(N,M,1),$&&(F(g),u.g[T].length==0&&(delete u.g[T],u.h--))}}function Ge(u,g,T,N){for(let M=0;M<u.length;++M){const $=u[M];if(!$.da&&$.listener==g&&$.capture==!!T&&$.ha==N)return M}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),zt={};function Qe(u,g,T,N,M){if(Array.isArray(g)){for(let $=0;$<g.length;$++)Qe(u,g[$],T,N,M);return null}return T=U(T),u&&u[te]?u.J(g,T,a(N)?!!N.capture:!1,M):$e(u,g,T,!1,N,M)}function $e(u,g,T,N,M,$){if(!g)throw Error("Invalid event type");const ce=a(M)?!!M.capture:!!M;let Je=_n(u);if(Je||(u[Se]=Je=new be(u)),T=Je.add(g,T,N,ce,$),T.proxy)return T;if(N=We(),T.proxy=N,N.src=u,N.listener=T,u.addEventListener)O||(M=ce),M===void 0&&(M=!1),u.addEventListener(g.toString(),N,M);else if(u.attachEvent)u.attachEvent(Ln(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function We(){function u(T){return g.call(u.src,u.listener,T)}const g=gr;return u}function Wt(u,g,T,N,M){if(Array.isArray(g))for(var $=0;$<g.length;$++)Wt(u,g[$],T,N,M);else N=a(N)?!!N.capture:!!N,T=U(T),u&&u[te]?(u=u.i,$=String(g).toString(),$ in u.g&&(g=u.g[$],T=Ge(g,T,N,M),T>-1&&(F(g[T]),Array.prototype.splice.call(g,T,1),g.length==0&&(delete u.g[$],u.h--)))):u&&(u=_n(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ge(g,T,N,M)),(T=u>-1?g[u]:null)&&Dt(T))}function Dt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[te])Ve(g.i,u);else{var T=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(T,N,u.capture):g.detachEvent?g.detachEvent(Ln(T),N):g.addListener&&g.removeListener&&g.removeListener(N),(T=_n(g))?(Ve(T,u),T.h==0&&(T.src=null,g[Se]=null)):F(u)}}}function Ln(u){return u in zt?zt[u]:zt[u]="on"+u}function gr(u,g){if(u.da)u=!0;else{g=new B(g,this);const T=u.listener,N=u.ha||u.src;u.fa&&Dt(u),u=T.call(N,g)}return u}function _n(u){return u=u[Se],u instanceof be?u:null}var ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function U(u){return typeof u=="function"?u:(u[ie]||(u[ie]=function(g){return u.handleEvent(g)}),u[ie])}function Y(){P.call(this),this.i=new be(this),this.M=this,this.G=null}h(Y,P),Y.prototype[te]=!0,Y.prototype.removeEventListener=function(u,g,T,N){Wt(this,u,g,T,N)};function H(u,g){var T,N=u.G;if(N)for(T=[];N;N=N.G)T.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new k(g,u);else if(g instanceof k)g.target=g.target||u;else{var M=g;g=new k(N,u),Ce(g,M)}M=!0;let $,ce;if(T)for(ce=T.length-1;ce>=0;ce--)$=g.g=T[ce],M=re($,N,!0,g)&&M;if($=g.g=u,M=re($,N,!0,g)&&M,M=re($,N,!1,g)&&M,T)for(ce=0;ce<T.length;ce++)$=g.g=T[ce],M=re($,N,!1,g)&&M}Y.prototype.N=function(){if(Y.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const T=u.g[g];for(let N=0;N<T.length;N++)F(T[N]);delete u.g[g],u.h--}}this.G=null},Y.prototype.J=function(u,g,T,N){return this.i.add(String(u),g,!1,T,N)},Y.prototype.K=function(u,g,T,N){return this.i.add(String(u),g,!0,T,N)};function re(u,g,T,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let M=!0;for(let $=0;$<g.length;++$){const ce=g[$];if(ce&&!ce.da&&ce.capture==T){const Je=ce.listener,gn=ce.ha||ce.src;ce.fa&&Ve(u.i,ce),M=Je.call(gn,N)!==!1&&M}}return M&&!N.defaultPrevented}function he(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function le(u){u.g=he(()=>{u.g=null,u.i&&(u.i=!1,le(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class me extends P{constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(u){P.call(this),this.h=u,this.g={}}h(De,P);var ke=[];function Te(u){q(u.g,function(g,T){this.g.hasOwnProperty(T)&&Dt(g)},u),u.g={}}De.prototype.N=function(){De.Z.N.call(this),Te(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=o.JSON.stringify,ye=o.JSON.parse,ge=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Oe(){}function It(){}var ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){k.call(this,"d")}h(Me,k);function tt(){k.call(this,"c")}h(tt,k);var Be={},mn=null;function St(){return mn=mn||new Y}Be.Ia="serverreachability";function dt(u){k.call(this,Be.Ia,u)}h(dt,k);function fe(u){const g=St();H(g,new dt(g))}Be.STAT_EVENT="statevent";function vt(u,g){k.call(this,Be.STAT_EVENT,u),this.stat=g}h(vt,k);function at(u){const g=St();H(g,new vt(g,u))}Be.Ja="timingevent";function qt(u,g){k.call(this,Be.Ja,u),this.size=g}h(qt,k);function mt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function pe(){this.g=!0}pe.prototype.ua=function(){this.g=!1};function J(u,g,T,N,M,$){u.info(function(){if(u.g)if($){var ce="",Je=$.split("&");for(let bt=0;bt<Je.length;bt++){var gn=Je[bt].split("=");if(gn.length>1){const En=gn[0];gn=gn[1];const fs=En.split("_");ce=fs.length>=2&&fs[1]=="type"?ce+(En+"="+gn+"&"):ce+(En+"=redacted&")}}}else ce=null;else ce=$;return"XMLHTTP REQ ("+N+") [attempt "+M+"]: "+g+`
`+T+`
`+ce})}function ae(u,g,T,N,M,$,ce){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+M+"]: "+g+`
`+T+`
`+$+" "+ce})}function je(u,g,T,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ae(u,T)+(N?" "+N:"")})}function Ne(u,g){u.info(function(){return"TIMEOUT: "+g})}pe.prototype.info=function(){};function Ae(u,g){if(!u.g)return g;if(!g)return null;try{const $=JSON.parse(g);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var T=$[u];if(!(T.length<2)){var N=T[1];if(Array.isArray(N)&&!(N.length<1)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(let ce=1;ce<N.length;ce++)N[ce]=""}}}}return Xe($)}catch{return g}}var rt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ft;function xn(){}h(xn,Oe),xn.prototype.g=function(){return new XMLHttpRequest},Ft=new xn;function ir(u){return encodeURIComponent(String(u))}function vi(u){var g=1;u=u.split(":");const T=[];for(;g>0&&u.length;)T.push(u.shift()),g--;return u.length&&T.push(u.join(":")),T}function Vn(u,g,T,N){this.j=u,this.i=g,this.l=T,this.S=N||1,this.V=new De(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wi}function wi(){this.i=null,this.g="",this.h=!1}var qa={},Ha={};function Oo(u,g,T){u.M=1,u.A=ph(hs(g)),u.u=T,u.R=!0,Ka(u,null)}function Ka(u,g){u.F=Date.now(),fh(u),u.B=hs(u.A);var T=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),QE(T.i,"t",N),u.C=0,T=u.j.L,u.h=new wi,u.g=fT(u.j,T?g:null,!u.u),u.P>0&&(u.O=new me(c(u.Y,u,u.g),u.P)),g=u.V,T=u.g,N=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(ke[0]=M.toString()),M=ke);for(let $=0;$<M.length;$++){const ce=Qe(T,M[$],N||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),fe(),J(u.i,u.v,u.B,u.l,u.S,u.u)}Vn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Ti(u)==3?g.j():this.Y(u)},Vn.prototype.Y=function(u){try{if(u==this.g)e:{const Je=Ti(this.g),gn=this.g.ya(),bt=this.g.ca();if(!(Je<3)&&(Je!=3||this.g&&(this.h.h||this.g.la()||nT(this.g)))){this.K||Je!=4||gn==7||(gn==8||bt<=0?fe(3):fe(2)),wg(this);var g=this.g.ca();this.X=g;var T=lt(this);if(this.o=g==200,ae(this.i,this.v,this.B,this.l,this.S,Je,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,M=this.g;if((N=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(N)){var $=N;break t}}$=null}if(u=$)je(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_g(this,u);else{this.o=!1,this.m=3,at(12),Lo(this),Wc(this);break e}}if(this.R){u=!0;let En;for(;!this.K&&this.C<T.length;)if(En=P2(this,T),En==Ha){Je==4&&(this.m=4,at(14),u=!1),je(this.i,this.l,null,"[Incomplete Response]");break}else if(En==qa){this.m=4,at(15),je(this.i,this.l,T,"[Invalid Chunk]"),u=!1;break}else je(this.i,this.l,En,null),_g(this,En);if(zr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||T.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)je(this.i,this.l,T,"[Invalid Chunked Response]"),Lo(this),Wc(this);else if(T.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Rg(ce),ce.P=!0,at(11))}}else je(this.i,this.l,T,null),_g(this,T);Je==4&&Lo(this),this.o&&!this.K&&(Je==4?cT(this.j,this):(this.o=!1,fh(this)))}else z2(this.g),g==400&&T.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),Lo(this),Wc(this)}}}catch{}finally{}};function lt(u){if(!zr(u))return u.g.la();const g=nT(u.g);if(g==="")return"";let T="";const N=g.length,M=Ti(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Lo(u),Wc(u),"";u.h.i=new o.TextDecoder}for(let $=0;$<N;$++)u.h.h=!0,T+=u.h.i.decode(g[$],{stream:!(M&&$==N-1)});return g.length=0,u.h.g+=T,u.C=0,u.h.g}function zr(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function P2(u,g){var T=u.C,N=g.indexOf(`
`,T);return N==-1?Ha:(T=Number(g.substring(T,N)),isNaN(T)?qa:(N+=1,N+T>g.length?Ha:(g=g.slice(N,N+T),u.C=N+T,g)))}Vn.prototype.cancel=function(){this.K=!0,Lo(this)};function fh(u){u.T=Date.now()+u.H,FE(u,u.H)}function FE(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=mt(c(u.aa,u),g)}function wg(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Vn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ne(this.i,this.B),this.M!=2&&(fe(),at(17)),Lo(this),this.m=2,Wc(this)):FE(this,this.T-u)};function Wc(u){u.j.I==0||u.K||cT(u.j,u)}function Lo(u){wg(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Te(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function _g(u,g){try{var T=u.j;if(T.I!=0&&(T.g==u||Eg(T.h,u))){if(!u.L&&Eg(T.h,u)&&T.I==3){try{var N=T.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var M=N;if(M[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<u.F)wh(T),yh(T);else break e;xg(T),at(18)}}else T.xa=M[1],0<T.xa-T.K&&M[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=mt(c(T.Va,T),6e3));$E(T.h)<=1&&T.ta&&(T.ta=void 0)}else Mo(T,11)}else if((u.L||T.g==u)&&wh(T),!C(g))for(M=T.Ba.g.parse(g),g=0;g<M.length;g++){let bt=M[g];const En=bt[0];if(!(En<=T.K))if(T.K=En,bt=bt[1],T.I==2)if(bt[0]=="c"){T.M=bt[1],T.ba=bt[2];const fs=bt[3];fs!=null&&(T.ka=fs,T.j.info("VER="+T.ka));const Fo=bt[4];Fo!=null&&(T.za=Fo,T.j.info("SVER="+T.za));const Ii=bt[5];Ii!=null&&typeof Ii=="number"&&Ii>0&&(N=1.5*Ii,T.O=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const Si=u.g;if(Si){const Eh=Si.g?Si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eh){var $=N.h;$.g||Eh.indexOf("spdy")==-1&&Eh.indexOf("quic")==-1&&Eh.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Tg($,$.h),$.h=null))}if(N.G){const Pg=Si.g?Si.g.getResponseHeader("X-HTTP-Session-Id"):null;Pg&&(N.wa=Pg,kt(N.J,N.G,Pg))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-u.F,T.j.info("Handshake RTT: "+T.T+"ms")),N=T;var ce=u;if(N.na=hT(N,N.L?N.ba:null,N.W),ce.L){BE(N.h,ce);var Je=ce,gn=N.O;gn&&(Je.H=gn),Je.D&&(wg(Je),fh(Je)),N.g=ce}else aT(N);T.i.length>0&&vh(T)}else bt[0]!="stop"&&bt[0]!="close"||Mo(T,7);else T.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Mo(T,7):Ag(T):bt[0]!="noop"&&T.l&&T.l.qa(bt),T.A=0)}}fe(4)}catch{}}var C2=class{constructor(u,g){this.g=u,this.map=g}};function UE(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $E(u){return u.h?1:u.g?u.g.size:0}function Eg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Tg(u,g){u.g?u.g.add(g):u.h=g}function BE(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}UE.prototype.cancel=function(){if(this.i=zE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function zE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const T of u.g.values())g=g.concat(T.G);return g}return p(u.i)}var WE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function D2(u,g){if(u){u=u.split("&");for(let T=0;T<u.length;T++){const N=u[T].indexOf("=");let M,$=null;N>=0?(M=u[T].substring(0,N),$=u[T].substring(N+1)):M=u[T],g(M,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function _i(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof _i?(this.l=u.l,qc(this,u.j),this.o=u.o,this.g=u.g,Hc(this,u.u),this.h=u.h,Ig(this,YE(u.i)),this.m=u.m):u&&(g=String(u).match(WE))?(this.l=!1,qc(this,g[1]||"",!0),this.o=Kc(g[2]||""),this.g=Kc(g[3]||"",!0),Hc(this,g[4]),this.h=Kc(g[5]||"",!0),Ig(this,g[6]||"",!0),this.m=Kc(g[7]||"")):(this.l=!1,this.i=new Qc(null,this.l))}_i.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Gc(g,qE,!0),":");var T=this.g;return(T||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Gc(g,qE,!0),"@"),u.push(ir(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&u.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&u.push("/"),u.push(Gc(T,T.charAt(0)=="/"?O2:N2,!0))),(T=this.i.toString())&&u.push("?",T),(T=this.m)&&u.push("#",Gc(T,V2)),u.join("")},_i.prototype.resolve=function(u){const g=hs(this);let T=!!u.j;T?qc(g,u.j):T=!!u.o,T?g.o=u.o:T=!!u.g,T?g.g=u.g:T=u.u!=null;var N=u.h;if(T)Hc(g,u.u);else if(T=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var M=g.h.lastIndexOf("/");M!=-1&&(N=g.h.slice(0,M+1)+N)}if(M=N,M==".."||M==".")N="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){N=M.lastIndexOf("/",0)==0,M=M.split("/");const $=[];for(let ce=0;ce<M.length;){const Je=M[ce++];Je=="."?N&&ce==M.length&&$.push(""):Je==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),N&&ce==M.length&&$.push("")):($.push(Je),N=!0)}N=$.join("/")}else N=M}return T?g.h=N:T=u.i.toString()!=="",T?Ig(g,YE(u.i)):T=!!u.m,T&&(g.m=u.m),g};function hs(u){return new _i(u)}function qc(u,g,T){u.j=T?Kc(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Hc(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Ig(u,g,T){g instanceof Qc?(u.i=g,M2(u.i,u.l)):(T||(g=Gc(g,L2)),u.i=new Qc(g,u.l))}function kt(u,g,T){u.i.set(g,T)}function ph(u){return kt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Kc(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gc(u,g,T){return typeof u=="string"?(u=encodeURI(u).replace(g,k2),T&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function k2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qE=/[#\/\?@]/g,N2=/[#\?:]/g,O2=/[#\?]/g,L2=/[#\?@]/g,V2=/#/g;function Qc(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Vo(u){u.g||(u.g=new Map,u.h=0,u.i&&D2(u.i,function(g,T){u.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}t=Qc.prototype,t.add=function(u,g){Vo(this),this.i=null,u=Ga(this,u);let T=this.g.get(u);return T||this.g.set(u,T=[]),T.push(g),this.h+=1,this};function HE(u,g){Vo(u),g=Ga(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function KE(u,g){return Vo(u),g=Ga(u,g),u.g.has(g)}t.forEach=function(u,g){Vo(this),this.g.forEach(function(T,N){T.forEach(function(M){u.call(g,M,N,this)},this)},this)};function GE(u,g){Vo(u);let T=[];if(typeof g=="string")KE(u,g)&&(T=T.concat(u.g.get(Ga(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)T=T.concat(u[g]);return T}t.set=function(u,g){return Vo(this),this.i=null,u=Ga(this,u),KE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=GE(this,u),u.length>0?String(u[0]):g):g};function QE(u,g,T){HE(u,g),T.length>0&&(u.i=null,u.g.set(Ga(u,g),p(T)),u.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var T=g[N];const M=ir(T);T=GE(this,T);for(let $=0;$<T.length;$++){let ce=M;T[$]!==""&&(ce+="="+ir(T[$])),u.push(ce)}}return this.i=u.join("&")};function YE(u){const g=new Qc;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Ga(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function M2(u,g){g&&!u.j&&(Vo(u),u.i=null,u.g.forEach(function(T,N){const M=N.toLowerCase();N!=M&&(HE(this,N),QE(this,M,T))},u)),u.j=g}function F2(u,g){const T=new pe;if(o.Image){const N=new Image;N.onload=d(Ei,T,"TestLoadImage: loaded",!0,g,N),N.onerror=d(Ei,T,"TestLoadImage: error",!1,g,N),N.onabort=d(Ei,T,"TestLoadImage: abort",!1,g,N),N.ontimeout=d(Ei,T,"TestLoadImage: timeout",!1,g,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function U2(u,g){const T=new pe,N=new AbortController,M=setTimeout(()=>{N.abort(),Ei(T,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then($=>{clearTimeout(M),$.ok?Ei(T,"TestPingServer: ok",!0,g):Ei(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Ei(T,"TestPingServer: error",!1,g)})}function Ei(u,g,T,N,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),N(T)}catch{}}function j2(){this.g=new ge}function Sg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Sg,Oe),Sg.prototype.g=function(){return new mh(this.i,this.h)};function mh(u,g){Y.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(mh,Y),t=mh.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Jc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jc(this)),this.g&&(this.readyState=3,Jc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;JE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function JE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Yc(this):Jc(this),this.readyState==3&&JE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Yc(this))},t.Na=function(u){this.g&&(this.response=u,Yc(this))},t.ga=function(){this.g&&Yc(this)};function Yc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Jc(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,u.push(T[0]+": "+T[1]),T=g.next();return u.join(`\r
`)};function Jc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(mh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function XE(u){let g="";return q(u,function(T,N){g+=N,g+=":",g+=T,g+=`\r
`}),g}function bg(u,g,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=XE(T),typeof u=="string"?T!=null&&ir(T):kt(u,g,T))}function Xt(u){Y.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Xt,Y);var $2=/^https?$/i,B2=["POST","PUT"];t=Xt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ft.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch($){ZE(this,$);return}if(u=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var M in N)T.set(M,N[M]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const $ of N.keys())T.set($,N.get($));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find($=>$.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(B2,g,void 0)>=0)||N||M||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ce]of T)this.g.setRequestHeader($,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){ZE(this,$)}};function ZE(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,eT(u),gh(u)}function eT(u){u.A||(u.A=!0,H(u,"complete"),H(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,H(this,"complete"),H(this,"abort"),gh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gh(this,!0)),Xt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tT(this):this.Xa())},t.Xa=function(){tT(this)};function tT(u){if(u.h&&typeof i<"u"){if(u.v&&Ti(u)==4)setTimeout(u.Ca.bind(u),0);else if(H(u,"readystatechange"),Ti(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var N;if(N=$===0){let ce=String(u.D).match(WE)[1]||null;!ce&&o.self&&o.self.location&&(ce=o.self.location.protocol.slice(0,-1)),N=!$2.test(ce?ce.toLowerCase():"")}T=N}if(T)H(u,"complete"),H(u,"success");else{u.o=6;try{var M=Ti(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",eT(u)}}finally{gh(u)}}}}function gh(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const T=u.g;u.g=null,g||H(u,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ti(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ti(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ye(g)}};function nT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function z2(u){const g={};u=(u.g&&Ti(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(C(u[N]))continue;var T=vi(u[N]);const M=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const $=g[M]||[];g[M]=$,$.push(T)}oe(g,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xc(u,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[u]||g}function rT(u){this.za=0,this.i=[],this.j=new pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xc("baseRetryDelayMs",5e3,u),this.Za=Xc("retryDelaySeedMs",1e4,u),this.Ta=Xc("forwardChannelMaxRetries",2,u),this.va=Xc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new UE(u&&u.concurrentRequestLimit),this.Ba=new j2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=rT.prototype,t.ka=8,t.I=1,t.connect=function(u,g,T,N){at(0),this.W=u,this.H=g||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.J=hT(this,null,this.W),vh(this)};function Ag(u){if(sT(u),u.I==3){var g=u.V++,T=hs(u.J);if(kt(T,"SID",u.M),kt(T,"RID",g),kt(T,"TYPE","terminate"),Zc(u,T),g=new Vn(u,u.j,g),g.M=2,g.A=ph(hs(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=g.A,T=!0),T||(g.g=fT(g.j,null),g.g.ea(g.A)),g.F=Date.now(),fh(g)}dT(u)}function yh(u){u.g&&(Rg(u),u.g.cancel(),u.g=null)}function sT(u){yh(u),u.v&&(o.clearTimeout(u.v),u.v=null),wh(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function vh(u){if(!jE(u.h)&&!u.m){u.m=!0;var g=u.Ea;D||A(),L||(D(),L=!0),x.add(g,u),u.D=0}}function W2(u,g){return $E(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=mt(c(u.Ea,u,g),uT(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Vn(this,this.j,u);let $=this.o;if(this.U&&($?($=de($),Ce($,this.U)):$=this.U),this.u!==null||this.R||(M.J=$,$=null),this.S)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=oT(this,M,g),T=hs(this.J),kt(T,"RID",u),kt(T,"CVER",22),this.G&&kt(T,"X-HTTP-Session-Id",this.G),Zc(this,T),$&&(this.R?g="headers="+ir(XE($))+"&"+g:this.u&&bg(T,this.u,$)),Tg(this.h,M),this.Ra&&kt(T,"TYPE","init"),this.S?(kt(T,"$req",g),kt(T,"SID","null"),M.U=!0,Oo(M,T,null)):Oo(M,T,g),this.I=2}}else this.I==3&&(u?iT(this,u):this.i.length==0||jE(this.h)||iT(this))};function iT(u,g){var T;g?T=g.l:T=u.V++;const N=hs(u.J);kt(N,"SID",u.M),kt(N,"RID",T),kt(N,"AID",u.K),Zc(u,N),u.u&&u.o&&bg(N,u.u,u.o),T=new Vn(u,u.j,T,u.D+1),u.u===null&&(T.J=u.o),g&&(u.i=g.G.concat(u.i)),g=oT(u,T,1e3),T.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Tg(u.h,T),Oo(T,N,g)}function Zc(u,g){u.H&&q(u.H,function(T,N){kt(g,N,T)}),u.l&&q({},function(T,N){kt(g,N,T)})}function oT(u,g,T){T=Math.min(u.i.length,T);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Je=-1;for(;;){const gn=["count="+T];Je==-1?T>0?(Je=M[0].g,gn.push("ofs="+Je)):Je=0:gn.push("ofs="+Je);let bt=!0;for(let En=0;En<T;En++){var $=M[En].g;const fs=M[En].map;if($-=Je,$<0)Je=Math.max(0,M[En].g-100),bt=!1;else try{$="req"+$+"_"||"";try{var ce=fs instanceof Map?fs:Object.entries(fs);for(const[Fo,Ii]of ce){let Si=Ii;a(Ii)&&(Si=Xe(Ii)),gn.push($+Fo+"="+encodeURIComponent(Si))}}catch(Fo){throw gn.push($+"type="+encodeURIComponent("_badmap")),Fo}}catch{N&&N(fs)}}if(bt){ce=gn.join("&");break e}}ce=void 0}return u=u.i.splice(0,T),g.G=u,ce}function aT(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;D||A(),L||(D(),L=!0),x.add(g,u),u.A=0}}function xg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=mt(c(u.Da,u),uT(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,lT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=mt(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),yh(this),lT(this))};function Rg(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function lT(u){u.g=new Vn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=hs(u.na);kt(g,"RID","rpc"),kt(g,"SID",u.M),kt(g,"AID",u.K),kt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&kt(g,"TO",u.ia),kt(g,"TYPE","xmlhttp"),Zc(u,g),u.u&&u.o&&bg(g,u.u,u.o),u.O&&(u.g.H=u.O);var T=u.g;u=u.ba,T.M=1,T.A=ph(hs(g)),T.u=null,T.R=!0,Ka(T,u)}t.Va=function(){this.C!=null&&(this.C=null,yh(this),xg(this),at(19))};function wh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function cT(u,g){var T=null;if(u.g==g){wh(u),Rg(u),u.g=null;var N=2}else if(Eg(u.h,g))T=g.G,BE(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){T=g.u?g.u.length:0,g=Date.now()-g.F;var M=u.D;N=St(),H(N,new qt(N,T)),vh(u)}else aT(u);else if(M=g.m,M==3||M==0&&g.X>0||!(N==1&&W2(u,g)||N==2&&xg(u)))switch(T&&T.length>0&&(g=u.h,g.i=g.i.concat(T)),M){case 1:Mo(u,5);break;case 4:Mo(u,10);break;case 3:Mo(u,6);break;default:Mo(u,2)}}}function uT(u,g){let T=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(T*=2),T*g}function Mo(u,g){if(u.j.info("Error code "+g),g==2){var T=c(u.bb,u),N=u.Ua;const M=!N;N=new _i(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qc(N,"https"),ph(N),M?F2(N.toString(),T):U2(N.toString(),T)}else at(2);u.I=0,u.l&&u.l.pa(g),dT(u),sT(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function dT(u){if(u.I=0,u.ja=[],u.l){const g=zE(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ja,g),_(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function hT(u,g,T){var N=T instanceof _i?hs(T):new _i(T);if(N.g!="")g&&(N.g=g+"."+N.g),Hc(N,N.u);else{var M=o.location;N=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;const $=new _i(null);N&&qc($,N),g&&($.g=g),M&&Hc($,M),T&&($.h=T),N=$}return T=u.G,g=u.wa,T&&g&&kt(N,T,g),kt(N,"VER",u.ka),Zc(u,N),N}function fT(u,g,T){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Xt(new Sg({ab:T})):new Xt(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pT(){}t=pT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _h(){}_h.prototype.g=function(u,g){return new yr(u,g)};function yr(u,g){Y.call(this),this.g=new rT(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Qa(this)}h(yr,Y),yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){Ag(this.g)},yr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var T={};T.__data__=u,u=T}else this.v&&(T={},T.__data__=Xe(u),u=T);g.i.push(new C2(g.Ya++,u)),g.I==3&&vh(g)},yr.prototype.N=function(){this.g.l=null,delete this.j,Ag(this.g),delete this.g,yr.Z.N.call(this)};function mT(u){Me.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const T in g){u=T;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(mT,Me);function gT(){tt.call(this),this.status=1}h(gT,tt);function Qa(u){this.g=u}h(Qa,pT),Qa.prototype.ra=function(){H(this.g,"a")},Qa.prototype.qa=function(u){H(this.g,new mT(u))},Qa.prototype.pa=function(u){H(this.g,new gT)},Qa.prototype.oa=function(){H(this.g,"b")},_h.prototype.createWebChannel=_h.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,DD=function(){return new _h},CD=function(){return St()},PD=Be,hw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,Pf=rt,gt.COMPLETE="complete",RD=gt,It.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",Y.prototype.listen=Y.prototype.J,Su=It,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa,xD=Xt}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const QS="@firebase/firestore",YS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new Mm("@firebase/firestore");function al(){return vo.logLevel}function kD(t){vo.setLogLevel(t)}function X(t,...e){if(vo.logLevel<=st.DEBUG){const n=e.map(x0);vo.debug(`Firestore (${Oc}): ${t}`,...n)}}function an(t,...e){if(vo.logLevel<=st.ERROR){const n=e.map(x0);vo.error(`Firestore (${Oc}): ${t}`,...n)}}function wo(t,...e){if(vo.logLevel<=st.WARN){const n=e.map(x0);vo.warn(`Firestore (${Oc}): ${t}`,...n)}}function x0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ND(t,r,n)}function ND(t,e,n){let r=`FIRESTORE (${Oc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw an(r),new Error(r)}function Pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ND(e,s,r)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bn.UNAUTHENTICATED))}shutdown(){}}class o9{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new i9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class a9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new a9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new JS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=u9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function fw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Iy(s)===Iy(i)?Ke(s,i):Iy(s)?1:-1}return Ke(t.length,e.length)}const d9=55296,h9=57343;function Iy(t){const e=t.charCodeAt(0);return e>=d9&&e<=h9}function rc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function LD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="__name__";class gs{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ke(e.length,n.length)}static compareSegments(e,n){const r=gs.isNumericId(e),s=gs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gs.extractNumericId(e).compare(gs.extractNumericId(n)):fw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return co.fromString(e.substring(4,e.length-2))}}class yt extends gs{construct(e,n,r){return new yt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new yt(n)}static emptyPath(){return new yt([])}}const f9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends gs{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return f9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XS}static keyField(){return new $t([XS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(yt.fromString(e))}static fromName(e){return new ue(yt.fromString(e).popFirst(5))}static empty(){return new ue(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e,n){if(!n)throw new se(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MD(t,e,n,r){if(e===!0&&r===!0)throw new se(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZS(t){if(!ue.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eb(t){if(ue.isDocumentKey(t))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $m(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$m(t);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function p9(t,e){if(e<=0)throw new se(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Xd(t,e){if(!FD(t))throw new se(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=-62135596800,nb=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*nb);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tb)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nb}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xd(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:pn("string",pt._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new pt(0,0))}static max(){return new Le(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=-1;class kp{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function pw(t){return t.fields.find(e=>e.kind===2)}function zo(t){return t.fields.filter(e=>e.kind!==2)}kp.UNKNOWN_ID=-1;class Cf{constructor(e,n){this.fieldPath=e,this.kind=n}}class bd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new bd(0,Dr.min())}}function UD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new Dr(s,ue.empty(),e)}function jD(t){return new Dr(t.readTime,t.key,sc)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(Le.min(),ue.empty(),sc)}static max(){return new Dr(Le.max(),ue.empty(),sc)}}function R0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==$D)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="SimpleDb";class Bm{static open(e,n,r,s){try{return new Bm(n,e.transaction(s,r))}catch(i){throw new ju(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new jr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ju(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=P0(r.target.error);this.S.reject(new ju(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(X(wr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new g9(n)}}class uo{static delete(e){return X(wr,"Removing database:",e),Ko(FC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!_0())return!1;if(uo.F())return!0;const e=On(),n=uo.M(e),r=0<n&&n<10,s=zD(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,uo.M(On())===12.2&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(X(wr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new se(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new se(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ju(e,o))},s.onupgradeneeded=i=>{X(wr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{X(wr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Bm.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(X(wr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function zD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class m9{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ko(this.U.delete())}}class ju extends se{constructor(e,n){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Do(t){return t.name==="IndexedDbTransactionError"}class g9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(X(wr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(X(wr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ko(r)}add(e){return X(wr,"ADD",this.store.name,e,e),Ko(this.store.add(e))}get(e){return Ko(this.store.get(e)).next(n=>(n===void 0&&(n=null),X(wr,"GET",this.store.name,e,n),n))}delete(e){return X(wr,"DELETE",this.store.name,e),Ko(this.store.delete(e))}count(){return X(wr,"COUNT",this.store.name),Ko(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){X(wr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=P0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new m9(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ko(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=P0(r.target.error);n(s)}})}let rb=!1;function P0(t){const e=uo.M(On());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rb||(rb=!0,setTimeout(()=>{throw r},0)),r}}return t}const $u="IndexBackfiller";class y9{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){X($u,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();X($u,`Documents written: ${n}`)}catch(n){Do(n)?X($u,"Ignoring IndexedDB error during index backfill: ",n):await Co(n)}await this.re(6e4)})}}class v9{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return X($u,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(X($u,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=jD(i);R0(o,r)>0&&(r=o)}),new Dr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ur.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=-1;function zm(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function WD(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="";function Kn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sb(e)),e=w9(t.get(n),e);return sb(e)}function w9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Np:n+="";break;default:n+=i}}return n}function sb(t){return t+Np+""}function Ss(t){const e=t.length;if(Pe(e>=2,64408,{path:t}),e===2)return Pe(t.charAt(0)===Np&&t.charAt(1)==="",56145,{path:t}),yt.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Np,i);switch((o<0||o>n)&&we(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:we(61167,{path:t})}i=o+2}return new yt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="remoteDocuments",Zd="owner",Ja="owner",xd="mutationQueues",_9="userId",Yr="mutations",ib="batchId",ra="userMutationsIndex",ob=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e){return[t,Kn(e)]}function qD(t,e,n){return[t,Kn(e),n]}const E9={},ic="documentMutations",Op="remoteDocumentsV14",T9=["prefixPath","collectionGroup","readTime","documentId"],kf="documentKeyIndex",I9=["prefixPath","collectionGroup","documentId"],HD="collectionGroupIndex",S9=["collectionGroup","readTime","prefixPath","documentId"],Rd="remoteDocumentGlobal",mw="remoteDocumentGlobalKey",oc="targets",KD="queryTargetsIndex",b9=["canonicalId","targetId"],ac="targetDocuments",A9=["targetId","path"],C0="documentTargetsIndex",x9=["path","targetId"],Lp="targetGlobalKey",_a="targetGlobal",Pd="collectionParents",R9=["collectionId","parent"],lc="clientMetadata",P9="clientId",Wm="bundles",C9="bundleId",qm="namedQueries",D9="name",D0="indexConfiguration",k9="indexId",gw="collectionGroupIndex",N9="collectionGroup",Bu="indexState",O9=["indexId","uid"],GD="sequenceNumberIndex",L9=["uid","sequenceNumber"],zu="indexEntries",V9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QD="documentKeyIndex",M9=["indexId","uid","orderedDocumentKey"],Hm="documentOverlays",F9=["userId","collectionPath","documentId"],yw="collectionPathOverlayIndex",U9=["userId","collectionPath","largestBatchId"],YD="collectionGroupOverlayIndex",j9=["userId","collectionGroup","largestBatchId"],k0="globals",$9="name",JD=[xd,Yr,ic,Wo,oc,Zd,_a,ac,lc,Rd,Pd,Wm,qm],B9=[...JD,Hm],XD=[xd,Yr,ic,Op,oc,Zd,_a,ac,lc,Rd,Pd,Wm,qm,Hm],ZD=XD,N0=[...ZD,D0,Bu,zu],z9=N0,ek=[...N0,k0],W9=ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw extends BD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function wn(t,e){const n=_e(t);return uo.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||Pn.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Pn.RED,this.left=s??Pn.EMPTY,this.right=i??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Pn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lb(this.data.getIterator())}getIteratorFrom(e){return new lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new dr([])}unionWith(e){let n=new Et($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nk("Invalid base64 string: "+i):i}}(e);return new rn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const q9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=q9.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ci(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="server_timestamp",sk="__type__",ik="__previous_value__",ok="__local_write_time__";function O0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sk])==null?void 0:r.stringValue)===rk}function Km(t){const e=t.mapValue.fields[ik];return O0(e)?Km(e):e}function Cd(t){const e=li(t.mapValue.fields[ok].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Vp="(default)";class _o{constructor(e,n){this.projectId=e,this.database=n||Vp}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database===Vp}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="__type__",ak="__max__",Qi={mapValue:{fields:{__type__:{stringValue:ak}}}},V0="__vector__",cc="value",Nf={nullValue:"NULL_VALUE"};function Eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?O0(t)?4:lk(t)?9007199254740991:Gm(t)?10:11:we(28295,{value:t})}function Ls(t,e){if(t===e)return!0;const n=Eo(t);if(n!==Eo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cd(t).isEqual(Cd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=li(s.timestampValue),a=li(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ci(s.bytesValue).isEqual(ci(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ut(s.geoPointValue.latitude)===Ut(i.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ut(s.integerValue)===Ut(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ut(s.doubleValue),a=Ut(i.doubleValue);return o===a?Ad(o)===Ad(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return rc(t.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(ab(o)!==ab(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ls(o[l],a[l])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Dd(t,e){return(t.values||[]).find(n=>Ls(n,e))!==void 0}function To(t,e){if(t===e)return 0;const n=Eo(t),r=Eo(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ut(i.integerValue||i.doubleValue),l=Ut(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cb(t.timestampValue,e.timestampValue);case 4:return cb(Cd(t),Cd(e));case 5:return fw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ci(i),l=ci(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ke(a[c],l[c]);if(d!==0)return d}return Ke(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ke(Ut(i.latitude),Ut(o.latitude));return a!==0?a:Ke(Ut(i.longitude),Ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ub(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,p,_,m;const a=i.fields||{},l=o.fields||{},c=(f=a[cc])==null?void 0:f.arrayValue,d=(p=l[cc])==null?void 0:p.arrayValue,h=Ke(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((m=d==null?void 0:d.values)==null?void 0:m.length)||0);return h!==0?h:ub(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Qi.mapValue&&o===Qi.mapValue)return 0;if(i===Qi.mapValue)return 1;if(o===Qi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=fw(l[h],d[h]);if(f!==0)return f;const p=To(a[l[h]],c[d[h]]);if(p!==0)return p}return Ke(l.length,d.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function cb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=li(t),r=li(e),s=Ke(n.seconds,r.seconds);return s!==0?s:Ke(n.nanos,r.nanos)}function ub(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=To(n[s],r[s]);if(i)return i}return Ke(n.length,r.length)}function uc(t){return ww(t)}function ww(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ww(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ww(n.fields[o])}`;return s+"}"}(t.mapValue):we(61005,{value:t})}function Of(t){switch(Eo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Km(t);return e?16+Of(e):16;case 5:return 2*t.stringValue.length;case 6:return ci(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Of(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ko(r.fields,(i,o)=>{s+=i.length+Of(o)}),s}(t.mapValue);default:throw we(13486,{value:t})}}function kd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _w(t){return!!t&&"integerValue"in t}function Nd(t){return!!t&&"arrayValue"in t}function db(t){return!!t&&"nullValue"in t}function hb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lf(t){return!!t&&"mapValue"in t}function Gm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[L0])==null?void 0:r.stringValue)===V0}function Wu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wu(t.arrayValue.values[n]);return e}return{...t}}function lk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ak}const ck={mapValue:{fields:{[L0]:{stringValue:V0},[cc]:{arrayValue:{}}}}};function K9(t){return"nullValue"in t?Nf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?kd(_o.empty(),ue.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Gm(t)?ck:{mapValue:{}}:we(35942,{value:t})}function G9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?kd(_o.empty(),ue.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?ck:"mapValue"in t?Gm(t)?{mapValue:{}}:Qi:we(61959,{value:t})}function fb(t,e){const n=To(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pb(t,e){const n=To(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wu(n)}setAll(e){let n=$t.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Wu(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Lf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ko(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new qn(Wu(this.value))}}function uk(t){const e=[];return ko(t.fields,(n,r)=>{const s=new $t([n]);if(Lf(r)){const i=uk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nn(e,0,Le.min(),Le.min(),Le.min(),qn.empty(),0)}static newFoundDocument(e,n,r,s){return new nn(e,1,n,Le.min(),r,s,0)}static newNoDocument(e,n){return new nn(e,2,n,Le.min(),Le.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Le.min(),Le.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.position=e,this.inclusive=n}}function mb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),n.key):r=To(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{}class ot extends dk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Y9(e,n,r):n==="array-contains"?new Z9(e,r):n==="in"?new yk(e,r):n==="not-in"?new ez(e,r):n==="array-contains-any"?new tz(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new J9(e,r):new X9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(To(n,this.value)):n!==null&&Eo(this.value)===Eo(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends dk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new wt(e,n)}matches(e){return hc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hc(t){return t.op==="and"}function Ew(t){return t.op==="or"}function M0(t){return hk(t)&&hc(t)}function hk(t){for(const e of t.filters)if(e instanceof wt)return!1;return!0}function Tw(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+uc(t.value);if(M0(t))return t.filters.map(e=>Tw(e)).join(",");{const e=t.filters.map(n=>Tw(n)).join(",");return`${t.op}(${e})`}}function fk(t,e){return t instanceof ot?function(r,s){return s instanceof ot&&r.op===s.op&&r.field.isEqual(s.field)&&Ls(r.value,s.value)}(t,e):t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&fk(o,s.filters[a]),!0):!1}(t,e):void we(19439)}function pk(t,e){const n=t.filters.concat(e);return wt.create(n,t.op)}function mk(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${uc(n.value)}`}(t):t instanceof wt?function(n){return n.op.toString()+" {"+n.getFilters().map(mk).join(" ,")+"}"}(t):"Filter"}class Y9 extends ot{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class J9 extends ot{constructor(e,n){super(e,"in",n),this.keys=gk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X9 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=gk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class Z9 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nd(n)&&Dd(n.arrayValue,this.value)}}class yk extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dd(this.value.arrayValue,n)}}class ez extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dd(this.value.arrayValue,n)}}class tz extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Iw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new nz(t,e,n,r,s,i,o)}function Ca(t){const e=_e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Tw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uc(r)).join(",")),e.Te=n}return e.Te}function eh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gb(t.startAt,e.startAt)&&gb(t.endAt,e.endAt)}function Mp(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Fp(t,e){return t.filters.filter(n=>n instanceof ot&&n.field.isEqual(e))}function yb(t,e,n){let r=Nf,s=!0;for(const i of Fp(t,e)){let o=Nf,a=!0;switch(i.op){case"<":case"<=":o=K9(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Nf}fb({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];fb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function vb(t,e,n){let r=Qi,s=!0;for(const i of Fp(t,e)){let o=Qi,a=!0;switch(i.op){case">=":case">":o=G9(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Qi}pb({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];pb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vk(t,e,n,r,s,i,o,a){return new Lc(t,e,n,r,s,i,o,a)}function th(t){return new Lc(t)}function wb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wk(t){return t.collectionGroup!==null}function qu(t){const e=_e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Et($t.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Od(i,r))}),n.has($t.keyField().canonicalString())||e.Ie.push(new Od($t.keyField(),r))}return e.Ie}function Pr(t){const e=_e(t);return e.Ee||(e.Ee=rz(e,qu(t))),e.Ee}function rz(t,e){if(t.limitType==="F")return Iw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Od(s.field,i)});const n=t.endAt?new dc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dc(t.startAt.position,t.startAt.inclusive):null;return Iw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sw(t,e){const n=t.filters.concat([e]);return new Lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Up(t,e,n){return new Lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qm(t,e){return eh(Pr(t),Pr(e))&&t.limitType===e.limitType}function _k(t){return`${Ca(Pr(t))}|lt:${t.limitType}`}function ll(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mk(s)).join(", ")}]`),zm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>uc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>uc(s)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function nh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ue.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of qu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=mb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,qu(r),s)||r.endAt&&!function(o,a,l){const c=mb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,qu(r),s))}(t,e)}function Ek(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Tk(t){return(e,n)=>{let r=!1;for(const s of qu(t)){const i=sz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sz(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?To(l,c):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return tk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=new Pt(ue.comparator);function Sr(){return iz}const Ik=new Pt(ue.comparator);function bu(...t){let e=Ik;for(const n of t)e=e.insert(n.key,n);return e}function Sk(t){let e=Ik;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bs(){return Hu()}function bk(){return Hu()}function Hu(){return new mi(t=>t.toString(),(t,e)=>t.isEqual(e))}const oz=new Pt(ue.comparator),az=new Et(ue.comparator);function et(...t){let e=az;for(const n of t)e=e.add(n);return e}const lz=new Et(Ke);function F0(){return lz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function Ak(t){return{integerValue:""+t}}function cz(t,e){return WD(e)?Ak(e):U0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this._=void 0}}function uz(t,e,n){return t instanceof fc?function(s,i){const o={fields:{[sk]:{stringValue:rk},[ok]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&O0(i)&&(i=Km(i)),i&&(o.fields[ik]=i),{mapValue:o}}(n,e):t instanceof Da?Rk(t,e):t instanceof pc?Pk(t,e):function(s,i){const o=xk(s,i),a=_b(o)+_b(s.Ae);return _w(o)&&_w(s.Ae)?Ak(a):U0(s.serializer,a)}(t,e)}function dz(t,e,n){return t instanceof Da?Rk(t,e):t instanceof pc?Pk(t,e):n}function xk(t,e){return t instanceof Ld?function(r){return _w(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class fc extends Ym{}class Da extends Ym{constructor(e){super(),this.elements=e}}function Rk(t,e){const n=Ck(e);for(const r of t.elements)n.some(s=>Ls(s,r))||n.push(r);return{arrayValue:{values:n}}}class pc extends Ym{constructor(e){super(),this.elements=e}}function Pk(t,e){let n=Ck(e);for(const r of t.elements)n=n.filter(s=>!Ls(s,r));return{arrayValue:{values:n}}}class Ld extends Ym{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _b(t){return Ut(t.integerValue||t.doubleValue)}function Ck(t){return Nd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.field=e,this.transform=n}}function hz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Da&&s instanceof Da||r instanceof pc&&s instanceof pc?rc(r.elements,s.elements,Ls):r instanceof Ld&&s instanceof Ld?Ls(r.Ae,s.Ae):r instanceof fc&&s instanceof fc}(t.transform,e.transform)}class fz{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jm{}function Dk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xm(t.key,Hn.none()):new Vc(t.key,t.data,Hn.none());{const n=t.data,r=qn.empty();let s=new Et($t.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new gi(t.key,r,new dr(s.toArray()),Hn.none())}}function pz(t,e,n){t instanceof Vc?function(s,i,o){const a=s.value.clone(),l=Tb(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gi?function(s,i,o){if(!Vf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Tb(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(kk(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ku(t,e,n,r){return t instanceof Vc?function(i,o,a,l){if(!Vf(i.precondition,o))return a;const c=i.value.clone(),d=Ib(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof gi?function(i,o,a,l){if(!Vf(i.precondition,o))return a;const c=Ib(i.fieldTransforms,l,o),d=o.data;return d.setAll(kk(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Vf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=xk(r.transform,s||null);i!=null&&(n===null&&(n=qn.empty()),n.set(r.field,i))}return n||null}function Eb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&rc(r,s,(i,o)=>hz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vc extends Jm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gi extends Jm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Tb(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,dz(o,a,n[s]))}return r}function Ib(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,uz(i,o,e))}return r}class Xm extends Jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nk extends Jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ku(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ku(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Dk(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,(n,r)=>Eb(n,r))&&rc(this.baseMutations,e.baseMutations,(n,r)=>Eb(n,r))}}class B0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return oz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new B0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z0=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,ht;function yz(t){switch(t){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function Ok(t){if(t===void 0)return an("GRPC error has no .code"),W.UNKNOWN;switch(t){case dn.OK:return W.OK;case dn.CANCELLED:return W.CANCELLED;case dn.UNKNOWN:return W.UNKNOWN;case dn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case dn.INTERNAL:return W.INTERNAL;case dn.UNAVAILABLE:return W.UNAVAILABLE;case dn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case dn.NOT_FOUND:return W.NOT_FOUND;case dn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case dn.ABORTED:return W.ABORTED;case dn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case dn.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:t})}}(ht=dn||(dn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=new co([4294967295,4294967295],0);function Sb(t){const e=vz().encode(t),n=new AD;return n.update(e),new Uint8Array(n.digest())}function bb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new co([n,r],0),new co([s,i],0)]}class W0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Au(`Invalid padding: ${n}`);if(r<0)throw new Au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Au(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=co.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(co.fromNumber(r)));return s.compare(wz)===1&&(s=new co([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sb(e),[r,s]=bb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new W0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Sb(e),[r,s]=bb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rh(Le.min(),s,new Pt(Ke),Sr(),et())}}class sh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sh(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Lk{constructor(e,n){this.targetId=e,this.Ce=n}}class Vk{constructor(e,n,r=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ab{constructor(){this.ve=0,this.Fe=xb(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),n=et(),r=et();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we(38017,{changeType:i})}}),new sh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=xb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _z{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sr(),this.Je=Qh(),this.He=Qh(),this.Ye=new Pt(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Mp(i))if(r===0){const o=new ue(i.path);this.et(n,o,nn.newNoDocument(o,Le.min()))}else Pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ci(r).toUint8Array()}catch(l){if(l instanceof nk)return wo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new W0(o,s,i)}catch(l){return wo(l instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Mp(a.target)){const l=new ue(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,nn.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=et();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new rh(e,n,this.Ye,this.je,r);return this.je=Sr(),this.Je=Qh(),this.He=Qh(),this.Ye=new Pt(Ke),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ab,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Et(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Et(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ab),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qh(){return new Pt(ue.comparator)}function xb(){return new Pt(ue.comparator)}const Ez={asc:"ASCENDING",desc:"DESCENDING"},Tz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iz={and:"AND",or:"OR"};class Sz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bw(t,e){return t.useProto3Json||zm(e)?e:{value:e}}function mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bz(t,e){return mc(t,e.toTimestamp())}function tr(t){return Pe(!!t,49232),Le.fromTimestamp(function(n){const r=li(n);return new pt(r.seconds,r.nanos)}(t))}function q0(t,e){return Aw(t,e).canonicalString()}function Aw(t,e){const n=function(s){return new yt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Fk(t){const e=yt.fromString(t);return Pe(Kk(e),10190,{key:e.toString()}),e}function jp(t,e){return q0(t.databaseId,e.path)}function Ea(t,e){const n=Fk(e);if(n.get(1)!==t.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue($k(n))}function Uk(t,e){return q0(t.databaseId,e)}function jk(t){const e=Fk(t);return e.length===4?yt.emptyPath():$k(e)}function xw(t){return new yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $k(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Rb(t,e,n){return{name:jp(t,e),fields:n.value.mapValue.fields}}function Az(t,e,n){const r=Ea(t,e.name),s=tr(e.updateTime),i=e.createTime?tr(e.createTime):Le.min(),o=new qn({mapValue:{fields:e.fields}}),a=nn.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function xz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string",58123),rn.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?W.UNKNOWN:Ok(c.code);return new se(d,c.message||"")}(o);n=new Vk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ea(t,r.document.name),i=tr(r.document.updateTime),o=r.document.createTime?tr(r.document.createTime):Le.min(),a=new qn({mapValue:{fields:r.document.fields}}),l=nn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Mf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ea(t,r.document),i=r.readTime?tr(r.readTime):Le.min(),o=nn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Mf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ea(t,r.document),i=r.removedTargetIds||[];n=new Mf([],i,s,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new gz(s,i),a=r.targetId;n=new Lk(a,o)}}return n}function $p(t,e){let n;if(e instanceof Vc)n={update:Rb(t,e.key,e.value)};else if(e instanceof Xm)n={delete:jp(t,e.key)};else if(e instanceof gi)n={update:Rb(t,e.key,e.data),updateMask:Nz(e.fieldMask)};else{if(!(e instanceof Nk))return we(16599,{Vt:e.type});n={verify:jp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw we(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bz(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we(27497)}(t,e.precondition)),n}function Rw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Hn.updateTime(tr(i.updateTime)):i.exists!==void 0?Hn.exists(i.exists):Hn.none()}(e.currentDocument):Hn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Pe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new fc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Da(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new pc(d)}else"increment"in a?l=new Ld(o,a.increment):we(16584,{proto:a});const c=$t.fromServerFormat(a.fieldPath);return new j0(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Ea(t,e.update.name),i=new qn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new dr(c.map(d=>$t.fromServerFormat(d)))}(e.updateMask);return new gi(s,i,o,n,r)}return new Vc(s,i,n,r)}if(e.delete){const s=Ea(t,e.delete);return new Xm(s,n)}if(e.verify){const s=Ea(t,e.verify);return new Nk(s,n)}return we(1463,{proto:e})}function Rz(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?tr(s.updateTime):tr(i);return o.isEqual(Le.min())&&(o=tr(i)),new fz(o,s.transformResults||[])}(n,e))):[]}function Bk(t,e){return{documents:[Uk(t,e.path)]}}function zk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uk(t,s);const i=function(c){if(c.length!==0)return Hk(wt.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:cl(f.field),direction:Cz(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=bw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function Wk(t){let e=jk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=qk(h);return f instanceof wt&&M0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(_){return new Od(ul(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,zm(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new dc(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new dc(p,f)}(n.endAt)),vk(e,s,o,i,a,"F",l,c)}function Pz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ul(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ul(n.unaryFilter.field);return ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ul(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ul(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(ul(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wt.create(n.compositeFilter.filters.map(r=>qk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function Cz(t){return Ez[t]}function Dz(t){return Tz[t]}function kz(t){return Iz[t]}function cl(t){return{fieldPath:t.canonicalString()}}function ul(t){return $t.fromServerFormat(t.fieldPath)}function Hk(t){return t instanceof ot?function(n){if(n.op==="=="){if(hb(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(db(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hb(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(db(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:Dz(n.op),value:n.value}}}(t):t instanceof wt?function(n){const r=n.getFilters().map(s=>Hk(s));return r.length===1?r[0]:{compositeFilter:{op:kz(n.op),filters:r}}}(t):we(54877,{filter:t})}function Nz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Kk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r,s,i=Le.min(),o=Le.min(),a=rn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.yt=e}}function Oz(t,e){let n;if(e.document)n=Az(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ue.fromSegments(e.noDocument.path),s=Na(e.noDocument.readTime);n=nn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const r=ue.fromSegments(e.unknownDocument.path),s=Na(e.unknownDocument.version);n=nn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new pt(s[0],s[1]);return Le.fromTimestamp(i)}(e.readTime)),n}function Pb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:jp(i,o.key),fields:o.data.value.mapValue.fields,updateTime:mc(i,o.version.toTimestamp()),createTime:mc(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ka(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:ka(e.version)}}return r}function Bp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ka(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Na(t){const e=new pt(t.seconds,t.nanoseconds);return Le.fromTimestamp(e)}function Go(t,e){const n=(e.baseMutations||[]).map(i=>Rw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Rw(t.yt,i)),s=pt.fromMillis(e.localWriteTimeMs);return new $0(e.batchId,s,n,r)}function xu(t){const e=Na(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Na(t.lastLimboFreeSnapshotVersion):Le.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Pe(o===1,1966,{count:o}),Pr(th(jk(i.documents[0])))}(t.query):function(i){return Pr(Wk(i))}(t.query),new Gs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,rn.fromBase64String(t.resumeToken))}function Qk(t,e){const n=ka(e.snapshotVersion),r=ka(e.lastLimboFreeSnapshotVersion);let s;s=Mp(e.target)?Bk(t.yt,e.target):zk(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ca(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Yk(t){const e=Wk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Up(e,e.limit,"L"):e}function Sy(t,e){return new z0(e.largestBatchId,Rw(t.yt,e.overlayMutation))}function Cb(t,e){const n=e.path.lastSegment();return[t,Kn(e.path.popLast()),n]}function Db(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ka(r.readTime),documentKey:Kn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{getBundleMetadata(e,n){return kb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Na(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return kb(e).put(function(s){return{bundleId:s.id,createTime:ka(tr(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Nb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Yk(i.bundledQuery),readTime:Na(i.readTime)}}(r)})}saveNamedQuery(e,n){return Nb(e).put(function(s){return{name:s.name,readTime:ka(tr(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function kb(t){return wn(t,Wm)}function Nb(t){return wn(t,qm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Zm(e,r)}getOverlay(e,n){return uu(e).get(Cb(this.userId,n)).next(r=>r?Sy(this.serializer,r):null)}getOverlays(e,n){const r=bs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new z0(n,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Kn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(uu(e).Z(yw,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=bs(),i=Kn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return uu(e).J(yw,o).next(a=>{for(const l of a){const c=Sy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=bs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return uu(e).ee({index:YD,range:a},(l,c,d)=>{const h=Sy(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return uu(e).put(function(s,i,o){const[a,l,c]=Cb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:$p(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function uu(t){return wn(t,Hm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{bt(e){return wn(e,k0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?rn.fromUint8Array(r):rn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ut(e.integerValue));else if("doubleValue"in e){const r=Ut(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ad(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=li(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ci(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?lk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Gm(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):we(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=cc,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ut(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ue.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Qo.Kt=new Qo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=255;function Mz(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Ob(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=Mz(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class Fz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=Ob(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=Ob(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Za),this.sn(255)}_n(){this.an(Za),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Za?(this.sn(Za),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Za?(this.an(Za),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Uz{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class jz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class du{constructor(){this.cn=new Fz,this.ln=new Uz(this.cn),this.hn=new jz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Yo(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Ff(this.En),directionalValue:Ff(this.dn),orderedDocumentKey:Ff(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Pi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Lb(t.En,e.En),n!==0?n:(n=Lb(t.dn,e.dn),n!==0?n:ue.comparator(t.In,e.In)))}function Lb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Ff(t){return WC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function Vb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class Mb{constructor(e){this.mn=new Et((n,r)=>$t.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Pe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=pw(e);if(n!==void 0&&!this.wn(n))return!1;const r=zo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Et($t.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Cf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Cf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Cf(r.field,r.dir==="asc"?0:1)));return new kp(kp.UNKNOWN_ID,this.collectionId,n,bd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){var n,r;if(Pe(t instanceof ot||t instanceof wt,20012),t instanceof ot){if(t instanceof yk){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ot.create(t.field,"==",i)))||[];return wt.create(s,"or")}return t}const e=t.filters.map(s=>Jk(s));return wt.create(e,t.op)}function $z(t){if(t.getFilters().length===0)return[];const e=Dw(Jk(t));return Pe(Xk(e),7391),Pw(e)||Cw(e)?[e]:e.getFilters()}function Pw(t){return t instanceof ot}function Cw(t){return t instanceof wt&&M0(t)}function Xk(t){return Pw(t)||Cw(t)||function(n){if(n instanceof wt&&Ew(n)){for(const r of n.getFilters())if(!Pw(r)&&!Cw(r))return!1;return!0}return!1}(t)}function Dw(t){if(Pe(t instanceof ot||t instanceof wt,34018),t instanceof ot)return t;if(t.filters.length===1)return Dw(t.filters[0]);const e=t.filters.map(r=>Dw(r));let n=wt.create(e,t.op);return n=zp(n),Xk(n)?n:(Pe(n instanceof wt,64498),Pe(hc(n),40251),Pe(n.filters.length>1,57927),n.filters.reduce((r,s)=>H0(r,s)))}function H0(t,e){let n;return Pe(t instanceof ot||t instanceof wt,38388),Pe(e instanceof ot||e instanceof wt,25473),n=t instanceof ot?e instanceof ot?function(s,i){return wt.create([s,i],"and")}(t,e):Fb(t,e):e instanceof ot?Fb(e,t):function(s,i){if(Pe(s.filters.length>0&&i.filters.length>0,48005),hc(s)&&hc(i))return pk(s,i.getFilters());const o=Ew(s)?s:i,a=Ew(s)?i:s,l=o.filters.map(c=>H0(c,a));return wt.create(l,"or")}(t,e),zp(n)}function Fb(t,e){if(hc(e))return pk(e,t.getFilters());{const n=e.filters.map(r=>H0(t,r));return wt.create(n,"or")}}function zp(t){if(Pe(t instanceof ot||t instanceof wt,11850),t instanceof ot)return t;const e=t.getFilters();if(e.length===1)return zp(e[0]);if(hk(t))return t;const n=e.map(s=>zp(s)),r=[];return n.forEach(s=>{s instanceof ot?r.push(s):s instanceof wt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:wt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(){this.Cn=new K0}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Dr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class K0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(yt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="IndexedDbIndexManager",Yh=new Uint8Array(0);class zz{constructor(e,n){this.databaseId=n,this.vn=new K0,this.Fn=new mi(r=>Ca(r),(r,s)=>eh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:Kn(s)};return jb(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[LD(n),""],!1,!0);return jb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Ss(o.parent))}return r})}addFieldIndex(e,n){const r=hu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=tl(e);return i.next(a=>{o.put(Db(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=hu(e),s=tl(e),i=el(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=hu(e),r=el(e),s=tl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Mb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=el(e);let s=!0;const i=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=et();const a=[];return V.forEach(i,(l,c)=>{X(Ub,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${Ca(n)}`);const d=function(w,R){const D=pw(R);if(D===void 0)return null;for(const L of Fp(w,D.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(w,R){const D=new Map;for(const L of zo(R))for(const x of Fp(w,L.fieldPath))switch(x.op){case"==":case"in":D.set(L.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return D.set(L.fieldPath.canonicalString(),x.value),Array.from(D.values())}return null}(c,l),f=function(w,R){const D=[];let L=!0;for(const x of zo(R)){const A=x.kind===0?yb(w,x.fieldPath,w.startAt):vb(w,x.fieldPath,w.startAt);D.push(A.value),L&&(L=A.inclusive)}return new dc(D,L)}(c,l),p=function(w,R){const D=[];let L=!0;for(const x of zo(R)){const A=x.kind===0?vb(w,x.fieldPath,w.endAt):yb(w,x.fieldPath,w.endAt);D.push(A.value),L&&(L=A.inclusive)}return new dc(D,L)}(c,l),_=this.On(l,c,f),m=this.On(l,c,p),v=this.Nn(l,c,h),E=this.Bn(l.indexId,d,_,f.inclusive,m,p.inclusive,v);return V.forEach(E,y=>r.Y(y,n.limit).next(w=>{w.forEach(R=>{const D=ue.fromSegments(R.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=$z(wt.create(e.filters,"and")).map(r=>Iw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):Yh,p=this.kn(e,f,r[h%c],s),_=this.qn(e,f,i[h%c],o),m=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(p,_,m))}return d}kn(e,n,r,s){const i=new Yo(e,ue.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Yo(e,ue.empty(),n,r);return s?i.An():i}xn(e,n){const r=new Mb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Et($t.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new du;for(const s of zo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Qo.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new du;return Qo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new du;return Qo.Kt.Dt(kd(this.databaseId,n),r.Pn(function(i){const o=zo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new du);let i=0;for(const o of zo(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Nd(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);Qo.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new du;l.seed(a.un()),Qo.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ot&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=hu(e),s=tl(e);return(n?r.J(gw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new bd(h.sequenceNumber,new Dr(Na(h.readTime),new ue(Ss(h.documentKey)),h.largestBatchId)):bd.empty(),p=d.fields.map(([_,m])=>new Cf($t.fromServerFormat(_),m));return new kp(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ke(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=hu(e),i=tl(e);return this.Gn(e).next(o=>s.J(gw,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(Db(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?V.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return el(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return el(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=el(e);let i=new Et(Pi);return s.ee({index:QD,range:IDBKeyRange.only([r.indexId,this.uid,Ff(this.$n(r,n))])},(o,a)=>{i=i.add(new Yo(r.indexId,n,Vb(a.arrayValue),Vb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new Et(Pi);const s=this.Qn(n,e);if(s==null)return r;const i=pw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Nd(o))for(const a of o.arrayValue.values||[])r=r.add(new Yo(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Yo(n.indexId,e.key,Yh,s));return r}Jn(e,n,r,s,i){X(Ub,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const p=l.getIterator(),_=c.getIterator();let m=Xa(p),v=Xa(_);for(;m||v;){let E=!1,y=!1;if(m&&v){const w=d(m,v);w<0?y=!0:w>0&&(E=!0)}else m!=null?y=!0:E=!0;E?(h(v),v=Xa(_)):y?(f(m),m=Xa(p)):(m=Xa(p),v=Xa(_))}}(s,i,Pi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return tl(e).ee({index:GD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Pi(o,a)).filter((o,a,l)=>!a||Pi(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Pi(o,e),l=Pi(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Yh,ue.empty()),l=s[o+1].Vn(this.uid,Yh,ue.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Pi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($b)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||we(44426))).next($b)}}function jb(t){return wn(t,Pd)}function el(t){return wn(t,zu)}function hu(t){return wn(t,D0)}function tl(t){return wn(t,Bu)}function $b(t){Pe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;R0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Dr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zk=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t,e,n){const r=t.store(Yr),s=t.store(ic),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Pe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=qD(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return V.waitFor(i).next(()=>c)}function Wp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw we(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(Zk,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);class eg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Pe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new eg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ci(e).ee({index:ra,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=dl(e),o=Ci(e);return o.add({}).next(a=>{Pe(typeof a=="number",49019);const l=new $0(a,n,r,s),c=function(p,_,m){const v=m.baseMutations.map(y=>$p(p.yt,y)),E=m.mutations.map(y=>$p(p.yt,y));return{userId:_,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,l),d=[];let h=new Et((f,p)=>Ke(f.canonicalString(),p.canonicalString()));for(const f of s){const p=qD(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(p,E9))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ci(e).get(n).next(r=>r?(Pe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Go(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ci(e).ee({index:ra,range:s},(o,a,l)=>{a.userId===this.userId&&(Pe(a.batchId>=r,47524,{tr:r}),i=Go(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=wa;return Ci(e).ee({index:ra,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,wa],[this.userId,Number.POSITIVE_INFINITY]);return Ci(e).J(ra,n).next(r=>r.map(s=>Go(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Df(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return dl(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Ss(d);if(c===this.userId&&n.path.isEqual(f))return Ci(e).get(h).next(p=>{if(!p)throw we(61480,{nr:o,batchId:h});Pe(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:h}),i.push(Go(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Ke);const s=[];return n.forEach(i=>{const o=Df(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=dl(e).ee({range:a},(c,d,h)=>{const[f,p,_]=c,m=Ss(p);f===this.userId&&i.path.isEqual(m)?r=r.add(_):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Df(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Et(Ke);return dl(e).ee({range:o},(l,c,d)=>{const[h,f,p]=l,_=Ss(f);h===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(p)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ci(e).get(i).next(o=>{if(o===null)throw we(35274,{batchId:i});Pe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Go(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return eN(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return dl(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Ss(i[1]);s.push(l)}else a.done()}).next(()=>{Pe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return tN(e,this.userId,n)}_r(e){return nN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:wa,lastStreamToken:""})}}function tN(t,e,n){const r=Df(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return dl(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Ci(t){return wn(t,Yr)}function dl(t){return wn(t,ic)}function nN(t){return wn(t,xd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oa(0)}static cr(){return new Oa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Oa(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Le.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>nl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Pe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return nl(e).ee((o,a)=>{const l=xu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return nl(e).ee((r,s)=>{const i=xu(s);n(i)})}lr(e){return zb(e).get(Lp).next(n=>(Pe(n!==null,2888),n))}hr(e,n){return zb(e).put(Lp,n)}Pr(e,n){return nl(e).put(Qk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ca(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return nl(e).ee({range:s,index:KD},(o,a,l)=>{const c=xu(a);eh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Fi(e);return n.forEach(o=>{const a=Kn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=Fi(e);return V.forEach(n,i=>{const o=Kn(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Fi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Fi(e);let i=et();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Ss(o[1]),d=new ue(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=Kn(n.path),s=IDBKeyRange.bound([r],[LD(r)],!1,!0);let i=0;return Fi(e).ee({index:C0,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return nl(e).get(n).next(r=>r?xu(r):null)}}function nl(t){return wn(t,oc)}function zb(t){return wn(t,_a)}function Fi(t){return wn(t,ac)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="LruGarbageCollector",rN=1048576;function qb([t,e],[n,r]){const s=Ke(t,n);return s===0?Ke(e,r):s}class qz{constructor(e){this.Ir=e,this.buffer=new Et(qb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(Wb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Do(n)?X(Wb,"Ignoring IndexedDB error during garbage collection: ",n):await Co(n)}await this.Vr(3e5)})}}class Hz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(ur.ce);const r=new qz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Bb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),al()<=st.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function iN(t,e){return new Hz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n){this.db=e,this.garbageCollector=iN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return Jh(e,r)}removeReference(e,n,r){return Jh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Jh(e,n)}br(e,n){return function(s,i){let o=!1;return nN(s).te(a=>tN(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Le.min()),Fi(e).delete(function(h){return[0,Kn(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Jh(e,n)}Sr(e,n){const r=Fi(e);let s,i=ur.ce;return r.ee({index:C0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==ur.ce&&n(new ue(Ss(s)),i),i=c,s=l):i=ur.ce}).next(()=>{i!==ur.ce&&n(new ue(Ss(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jh(t,e){return Fi(t).put(function(r,s){return{targetId:0,path:Kn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.changes=new mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Uo(e).put(r)}removeEntry(e,n,r){return Uo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=nn.newInvalidDocument(n);return Uo(e).ee({index:kf,range:IDBKeyRange.only(fu(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:nn.newInvalidDocument(n)};return Uo(e).ee({index:kf,range:IDBKeyRange.only(fu(n))},(s,i)=>{r={document:this.Cr(n,i),size:Wp(i)}}).next(()=>r)}getEntries(e,n){let r=Sr();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Sr(),s=new Pt(ue.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Wp(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let s=new Et(Gb);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(fu(s.first()),fu(s.last())),o=s.getIterator();let a=o.getNext();return Uo(e).ee({index:kf,range:i},(l,c,d)=>{const h=ue.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Gb(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(fu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Bp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Sr();for(const h of c){const f=this.Cr(ue.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(nh(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Sr();const o=Kb(n,r),a=Kb(n,Dr.max());return Uo(e).ee({index:HD,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(ue.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new Qz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Hb(e).get(mw).next(n=>(Pe(!!n,20021),n))}Dr(e,n){return Hb(e).put(mw,n)}Cr(e,n){if(n){const r=Oz(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return nn.newInvalidDocument(e)}}function aN(t){return new Gz(t)}class Qz extends oN{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new mi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Et((i,o)=>Ke(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Pb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Wp(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Pb(this.Nr.serializer,o.convertToNoDocument(Le.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Hb(t){return wn(t,Rd)}function Uo(t){return wn(t,Op)}function fu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kb(t,e){const n=e.documentKey.path.toArray();return[t,Bp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Gb(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ke(n[i],r[i]),s)return s;return s=Ke(n.length,r.length),s||(s=Ke(n[n.length-2],r[r.length-2]),s||Ke(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ku(r.mutation,s,dr.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=et()){const s=bs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=bu();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,et()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Sr();const o=Hu(),a=function(){return Hu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof gi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ku(d.mutation,c,d.mutation.getFieldMask(),pt.now())):o.set(c.key,dr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new Yz(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Hu();let s=new Pt((o,a)=>o-a),i=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||dr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||et()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=bk();d.forEach(f=>{if(!i.has(f)){const p=Dk(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(bs());let a=sc,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,et())).next(d=>({batchId:a,changes:Sk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let s=bu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=bu();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,f){return new Lc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,nn.newInvalidDocument(d)))});let a=bu();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Ku(d.mutation,c,dr.empty(),pt.now()),nh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tr(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Yk(s.bundledQuery),readTime:tr(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.overlays=new Pt(ue.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=bs(),i=n.length+1,o=new ue(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=bs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=bs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new z0(n,r));let i=this.qr.get(n);i===void 0&&(i=et(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.Qr=new Et(In.$r),this.Ur=new Et(In.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new In(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new In(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ue(new yt([])),r=new In(n,e),s=new In(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new yt([])),r=new In(n,e),s=new In(n,e+1);let i=et();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new In(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class In{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Et(In.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new In(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?wa:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new In(n,0),s=new In(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Ke);return n.forEach(s=>{const i=new In(s,0),o=new In(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ue.isDocumentKey(i)||(i=i.child(""));const o=new In(new ue(i),0);let a=new Et(Ke);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new In(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new In(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e){this.ri=e,this.docs=function(){return new Pt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nn.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Sr();const o=n.path,a=new ue(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||R0(jD(d),r)<=0||(s.has(d.key)||nh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nW(this)}getSize(e){return V.resolve(this.size)}}class nW extends oN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.persistence=e,this.si=new mi(n=>Ca(n),eh),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new G0,this.targetCount=0,this.ai=Oa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Oa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n){this.ui={},this.overlays={},this.ci=new ur(0),this.li=!1,this.li=!0,this.hi=new Zz,this.referenceDelegate=e(this),this.Pi=new rW(this),this.indexManager=new Bz,this.remoteDocumentCache=function(s){return new tW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Gk(n),this.Ii=new Jz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new eW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new sW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class sW extends BD{constructor(e){super(),this.currentSequenceNumber=e}}class tg{constructor(e){this.persistence=e,this.Ri=new G0,this.Vi=null}static mi(e){return new tg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=ue.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Le.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class qp{constructor(e,n){this.persistence=e,this.pi=new mi(r=>Kn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=iN(this,n)}static mi(e,n){return new qp(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Le.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Of(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Bm("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Zd)}(e),function(l){l.createObjectStore(xd,{keyPath:_9}),l.createObjectStore(Yr,{keyPath:ib,autoIncrement:!0}).createIndex(ra,ob,{unique:!0}),l.createObjectStore(ic)}(e),Qb(e),function(l){l.createObjectStore(Wo)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(ac),l.deleteObjectStore(oc),l.deleteObjectStore(_a)}(e),Qb(e)),o=o.next(()=>function(l){const c=l.store(_a),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return c.put(Lp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(Yr).J().next(h=>{l.deleteObjectStore(Yr),l.createObjectStore(Yr,{keyPath:ib,autoIncrement:!0}).createIndex(ra,ob,{unique:!0});const f=c.store(Yr),p=h.map(_=>f.put(_));return V.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(lc,{keyPath:P9})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Rd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Wm,{keyPath:C9})})(e),function(l){l.createObjectStore(qm,{keyPath:D9})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Hm,{keyPath:F9});c.createIndex(yw,U9,{unique:!1}),c.createIndex(YD,j9,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Op,{keyPath:T9});c.createIndex(kf,I9),c.createIndex(HD,S9)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(Wo))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(D0,{keyPath:k9,autoIncrement:!0}).createIndex(gw,N9,{unique:!1}),l.createObjectStore(Bu,{keyPath:O9}).createIndex(GD,L9,{unique:!1}),l.createObjectStore(zu,{keyPath:V9}).createIndex(QD,M9,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Bu).clear()}).next(()=>{n.objectStore(zu).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(k0,{keyPath:$9})})(e)})),r<18&&s>=18&&WC()&&(o=o.next(()=>{n.objectStore(Bu).clear()}).next(()=>{n.objectStore(zu).clear()})),o}wi(e){let n=0;return e.store(Wo).ee((r,s)=>{n+=Wp(s)}).next(()=>{const r={byteSize:n};return e.store(Rd).put(mw,r)})}yi(e){const n=e.store(xd),r=e.store(Yr);return n.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,wa],[i.userId,i.lastAcknowledgedBatchId]);return r.J(ra,o).next(a=>V.forEach(a,l=>{Pe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Go(this.serializer,l);return eN(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(ac),r=e.store(Wo);return e.store(_a).get(Lp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new yt(o),c=function(h){return[0,Kn(h)]}(l);i.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:Kn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,n){e.createObjectStore(Pd,{keyPath:R9});const r=n.store(Pd),s=new K0,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Kn(l)})}};return n.store(Wo).ee({X:!0},(o,a)=>{const l=new yt(o);return i(l.popLast())}).next(()=>n.store(ic).ee({X:!0},([o,a,l],c)=>{const d=Ss(a);return i(d.popLast())}))}Di(e){const n=e.store(oc);return n.ee((r,s)=>{const i=xu(s),o=Qk(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(Wo),s=[];return r.ee((i,o)=>{const a=n.store(Op),l=function(h){return h.document?new ue(yt.fromString(h.document.name).popFirst(5)):h.noDocument?ue.fromSegments(h.noDocument.path):h.unknownDocument?ue.fromSegments(h.unknownDocument.path):we(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}Fi(e,n){const r=n.store(Yr),s=aN(this.serializer),i=new Q0(tg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??et();Go(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const d=new Bn(c),h=Zm.wt(this.serializer,d),f=i.getIndexManager(d),p=eg.wt(d,this.serializer,f,i.referenceDelegate);return new lN(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new vw(n,ur.ce),l).next()})})}}function Qb(t){t.createObjectStore(ac,{keyPath:A9}).createIndex(C0,x9,{unique:!0}),t.createObjectStore(oc,{keyPath:"targetId"}).createIndex(KD,b9,{unique:!0}),t.createObjectStore(_a)}const Di="IndexedDbPersistence",by=18e5,Ay=5e3,xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oW="main";class Y0{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!Y0.v())throw new se(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kz(this,s),this.$i=n+oW,this.serializer=new Gk(l),this.Ui=new uo(this.$i,this.Ni,new iW(this.serializer)),this.hi=new Vz,this.Pi=new Wz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aN(this.serializer),this.Ii=new Lz,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&an(Di,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,xy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new ur(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Do(e))return X(Di,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X(Di,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return pu(e).get(Ja).next(n=>V.resolve(this.es(n)))}ts(e){return Xh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,by)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=wn(n,lc);return r.J().next(s=>{const i=this.ss(s,by),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):pu(e).get(Ja).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Ay)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,xy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xh(e).J().next(r=>this.ss(r,Ay).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&X(Di,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Zd,lc],e=>{const n=new vw(e,ur.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Xh(e).J().next(n=>this.ss(n,by).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return eg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Zm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){X(Di,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?W9:l===17?ek:l===16?z9:l===15?N0:l===14?ZD:l===13?XD:l===12?B9:l===11?JD:void we(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new vw(a,this.ci?this.ci.next():ur.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw an(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new se(W.FAILED_PRECONDITION,$D);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return pu(e).get(Ja).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Ay)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new se(W.FAILED_PRECONDITION,xy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pu(e).put(Ja,n)}static v(){return uo.v()}Zi(e){const n=pu(e);return n.get(Ja).next(r=>this.es(r)?(X(Di,"Releasing primary lease."),n.delete(Ja)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(an(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;zC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return X(Di,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return an(Di,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){an("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pu(t){return wn(t,Zd)}function Xh(t){return wn(t,lc)}function cN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=et(),s=et();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new J0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return zC()?8:zD(On())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new aW;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(al()<=st.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(al()<=st.DEBUG&&X("QueryEngine","Query:",ll(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(al()<=st.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(n))):V.resolve())}ys(e,n){if(wb(n))return V.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Up(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=et(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Up(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return wb(n)||s.isEqual(Le.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(al()<=st.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ll(n)),this.vs(e,o,n,UD(s,sc)).next(a=>a))})}Ds(e,n){let r=new Et(Tk(e));return n.forEach((s,i)=>{nh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return al()<=st.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",ll(n)),this.ps.getDocumentsMatchingQuery(e,n,Dr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="LocalStore",lW=3e8;class cW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Pt(Ke),this.xs=new mi(i=>Ca(i),eh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function dN(t,e,n,r){return new cW(t,e,n,r)}async function hN(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=et();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function uW(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=V.resolve();return f.forEach(_=>{p=p.next(()=>d.getEntry(l,_)).next(m=>{const v=c.docVersions.get(_);Pe(v!==null,48541),m.version.compareTo(v)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),d.addEntry(m)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=et();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function fN(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function dW(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(rn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(m,v,E){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=lW?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,d)&&a.push(n.Pi.updateTargetData(i,p))});let l=Sr(),c=et();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(hW(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Le.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function hW(t,e,n){let r=et(),s=et();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Sr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X(X0,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function fW(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wa),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hp(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Gs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function gc(t,e,n){const r=_e(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Do(o))throw o;X(X0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Kp(t,e,n){const r=_e(t);let s=Le.min(),i=et();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=_e(l),f=h.xs.get(d);return f!==void 0?V.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,Pr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Le.min(),n?i:et())).next(a=>(gN(r,Ek(e),a),{documents:a,Qs:i})))}function pN(t,e){const n=_e(t),r=_e(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function mN(t,e){const n=_e(t),r=n.Os.get(e)||Le.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,UD(r,sc),Number.MAX_SAFE_INTEGER)).then(s=>(gN(n,e,s),s))}function gN(t,e,n){let r=t.Os.get(e)||Le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firestore_clients";function Yb(t,e){return`${yN}_${t}_${e}`}const vN="firestore_mutations";function Jb(t,e,n){let r=`${vN}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const wN="firestore_targets";function Ry(t,e){return`${wN}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="SharedClientState";class Gp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new se(s.error.code,s.error.message))),o?new Gp(e,n,s.state,i):(an(_s,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new se(r.error.code,r.error.message))),i?new Gu(e,r.state,s):(an(_s,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=F0();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=WD(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Qp(e,i):(an(_s,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Z0{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Z0(n.clientId,n.onlineState):(an(_s,`Failed to parse online state: ${e}`),null)}}class kw{constructor(){this.activeTargetIds=F0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Py{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Pt(Ke),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Yb(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new kw),this.ro=new RegExp(`^${yN}_${o}_([^_]*)$`),this.io=new RegExp(`^${vN}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${wN}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Yb(this.persistenceKey,r));if(s){const i=Qp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ry(this.persistenceKey,e));if(s){const i=Gu.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ry(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return X(_s,"READ",e,n),n}setItem(e,n){X(_s,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){X(_s,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(X(_s,"EVENT",n.key,n.newValue),n.key===this.eo)return void an("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=ur.ce;if(i!=null)try{const a=JSON.parse(i);Pe(typeof a=="number",30636,{So:i}),o=a}catch(a){an(_s,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==ur.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Gp(this.currentUser,e,n,r),i=Jb(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Jb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Ry(this.persistenceKey,e),i=new Gu(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Qp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Gp.Ws(new Bn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Gu.Ws(s,n)}uo(e){return Z0.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);X(_s,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=F0();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class _N{constructor(){this.Mo=new kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="ConnectivityMonitor";class Zb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(Xb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(Xb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh=null;function Nw(){return Zh===null?Zh=function(){return 268435456+Math.round(2147483648*Math.random())}():Zh++,"0x"+Zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="RestConnection",mW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Vp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Nw(),a=this.zo(e,n.toUriEncodedString());X(Cy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=fi(c);return this.Jo(e,a,l,r,d).then(h=>(X(Cy,`Received RPC '${e}' ${o}: `,h),h),h=>{throw wo(Cy,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=mW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class vW extends gW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Nw();return new Promise((a,l)=>{const c=new xD;c.setWithCredentials(!0),c.listenOnce(RD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Pf.NO_ERROR:const h=c.getResponseJson();X($n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Pf.TIMEOUT:X($n,`RPC '${e}' ${o} timed out`),l(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const f=c.getStatus();if(X($n,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const m=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(y)>=0?y:W.UNKNOWN}(_.status);l(new se(m,_.message))}else l(new se(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new se(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{X($n,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);X($n,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Nw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DD(),a=CD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");X($n,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,p=!1;const _=new yW({Yo:v=>{p?X($n,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(X($n,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),X($n,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),m=(v,E,y)=>{v.listen(E,w=>{try{y(w)}catch(R){setTimeout(()=>{throw R},0)}})};return m(h,Su.EventType.OPEN,()=>{p||(X($n,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),m(h,Su.EventType.CLOSE,()=>{p||(p=!0,X($n,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(h))}),m(h,Su.EventType.ERROR,v=>{p||(p=!0,wo($n,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),_.a_(new se(W.UNAVAILABLE,"The operation could not be completed")))}),m(h,Su.EventType.MESSAGE,v=>{var E;if(!p){const y=v.data[0];Pe(!!y,16349);const w=y,R=(w==null?void 0:w.error)||((E=w[0])==null?void 0:E.error);if(R){X($n,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let L=function(b){const P=dn[b];if(P!==void 0)return Ok(P)}(D),x=R.message;L===void 0&&(L=W.INTERNAL,x="Unknown error status: "+D+" with message "+R.message),p=!0,_.a_(new se(L,x)),h.close()}else X($n,`RPC '${e}' stream ${s} received:`,y),_.u_(y)}}),m(a,PD.STAT_EVENT,v=>{v.stat===hw.PROXY?X($n,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===hw.NOPROXY&&X($n,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return typeof window<"u"?window:null}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t){return new Sz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="PersistentStream";class IN{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(an(n.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new se(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(eA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(eA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wW extends IN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xz(this.serializer,e),r=function(i){if(!("targetChange"in i))return Le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?tr(o.readTime):Le.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=xw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Mp(l)?{documents:Bk(i,l)}:{query:zk(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Mk(i,o.resumeToken);const c=bw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=mc(i,o.snapshotVersion.toTimestamp());const c=bw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Pz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=xw(this.serializer),n.removeTarget=e,this.q_(n)}}class _W extends IN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Rz(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$p(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{}class TW extends EW{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Aw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(W.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Aw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class IW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(an(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="RemoteStore";class SW{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{za(this)&&(X(La,"Restarting streams for network reachability change."),await async function(l){const c=_e(l);c.Ea.add(4),await Mc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await ih(c)}(this))})}),this.Ra=new IW(r,s)}}async function ih(t){if(za(t))for(const e of t.da)await e(!0)}async function Mc(t){for(const e of t.da)await e(!1)}function rg(t,e){const n=_e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nE(n)?tE(n):Uc(n).O_()&&eE(n,e))}function yc(t,e){const n=_e(t),r=Uc(n);n.Ia.delete(e),r.O_()&&SN(n,e),n.Ia.size===0&&(r.O_()?r.L_():za(n)&&n.Ra.set("Unknown"))}function eE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uc(t).Y_(e)}function SN(t,e){t.Va.Ue(e),Uc(t).Z_(e)}function tE(t){t.Va=new _z({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Uc(t).start(),t.Ra.ua()}function nE(t){return za(t)&&!Uc(t).x_()&&t.Ia.size>0}function za(t){return _e(t).Ea.size===0}function bN(t){t.Va=void 0}async function bW(t){t.Ra.set("Online")}async function AW(t){t.Ia.forEach((e,n)=>{eE(t,e)})}async function xW(t,e){bN(t),nE(t)?(t.Ra.ha(e),tE(t)):t.Ra.set("Unknown")}async function RW(t,e,n){if(t.Ra.set("Online"),e instanceof Vk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){X(La,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yp(t,r)}else if(e instanceof Mf?t.Va.Ze(e):e instanceof Lk?t.Va.st(e):t.Va.tt(e),!n.isEqual(Le.min()))try{const r=await fN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(rn.EMPTY_BYTE_STRING,d.snapshotVersion)),SN(i,l);const h=new Gs(d.target,l,c,d.sequenceNumber);eE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X(La,"Failed to raise snapshot:",r),await Yp(t,r)}}async function Yp(t,e,n){if(!Do(e))throw e;t.Ea.add(1),await Mc(t),t.Ra.set("Offline"),n||(n=()=>fN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(La,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ih(t)})}function AN(t,e){return e().catch(n=>Yp(t,n,e))}async function Fc(t){const e=_e(t),n=Io(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wa;for(;PW(e);)try{const s=await fW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,CW(e,s)}catch(s){await Yp(e,s)}xN(e)&&RN(e)}function PW(t){return za(t)&&t.Ta.length<10}function CW(t,e){t.Ta.push(e);const n=Io(t);n.O_()&&n.X_&&n.ea(e.mutations)}function xN(t){return za(t)&&!Io(t).x_()&&t.Ta.length>0}function RN(t){Io(t).start()}async function DW(t){Io(t).ra()}async function kW(t){const e=Io(t);for(const n of t.Ta)e.ea(n.mutations)}async function NW(t,e,n){const r=t.Ta.shift(),s=B0.from(r,e,n);await AN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fc(t)}async function OW(t,e){e&&Io(t).X_&&await async function(r,s){if(function(o){return yz(o)&&o!==W.ABORTED}(s.code)){const i=r.Ta.shift();Io(r).B_(),await AN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fc(r)}}(t,e),xN(t)&&RN(t)}async function tA(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),X(La,"RemoteStore received new credentials");const r=za(n);n.Ea.add(3),await Mc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ih(n)}async function Ow(t,e){const n=_e(t);e?(n.Ea.delete(2),await ih(n)):e||(n.Ea.add(2),await Mc(n),n.Ra.set("Unknown"))}function Uc(t){return t.ma||(t.ma=function(n,r,s){const i=_e(n);return i.sa(),new wW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:bW.bind(null,t),t_:AW.bind(null,t),r_:xW.bind(null,t),H_:RW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),nE(t)?tE(t):t.Ra.set("Unknown")):(await t.ma.stop(),bN(t))})),t.ma}function Io(t){return t.fa||(t.fa=function(n,r,s){const i=_e(n);return i.sa(),new _W(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:DW.bind(null,t),r_:OW.bind(null,t),ta:kW.bind(null,t),na:NW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fc(t)):(await t.fa.stop(),t.Ta.length>0&&(X(La,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new rE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oh(t,e){if(an("AsyncQueue",`${e}: ${t}`),Do(t))return new se(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{static emptySet(e){return new Vl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=bu(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.ga=new Pt(ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class vc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vc(e,n,Vl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class VW{constructor(){this.queries=rA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=_e(n),i=s.queries;s.queries=rA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new se(W.ABORTED,"Firestore shutting down"))}}function rA(){return new mi(t=>_k(t),Qm)}async function sE(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new LW,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=oh(o,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&oE(n)}async function iE(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MW(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&oE(n)}function FW(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function oE(t){t.Ca.forEach(e=>{e.next()})}var Lw,sA;(sA=Lw||(Lw={})).Ma="default",sA.Cache="cache";class aE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.key=e}}class CN{constructor(e){this.key=e}}class DN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=Tk(e),this.tu=new Vl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new nA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=nh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?_!==m&&(r.track({type:3,doc:p}),v=!0):this.su(f,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),i=m?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(p,_){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:v})}};return m(p)-m(_)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new vc(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new CN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new PN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jc="SyncEngine";class UW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jW{constructor(e){this.key=e,this.hu=!1}}class $W{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new mi(a=>_k(a),Qm),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(ue.comparator),this.Au=new Map,this.Ru=new G0,this.Vu={},this.mu=new Map,this.fu=Oa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BW(t,e,n=!0){const r=sg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await kN(r,e,n,!0),s}async function zW(t,e){const n=sg(t);await kN(n,e,!0,!1)}async function kN(t,e,n,r){const s=await Hp(t.localStore,Pr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await lE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&rg(t.remoteStore,s),a}async function lE(t,e,n,r,s){t.pu=(h,f,p)=>async function(m,v,E,y){let w=v.view.ru(E);w.Cs&&(w=await Kp(m.localStore,v.query,!1).then(({documents:x})=>v.view.ru(x,w)));const R=y&&y.targetChanges.get(v.targetId),D=y&&y.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(w,m.isPrimaryClient,R,D);return Vw(m,v.targetId,L.au),L.snapshot}(t,h,f,p);const i=await Kp(t.localStore,e,!0),o=new DN(e,i.Qs),a=o.ru(i.documents),l=sh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Vw(t,n,c.au);const d=new UW(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function WW(t,e,n){const r=_e(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Qm(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yc(r.remoteStore,s.targetId),wc(r,s.targetId)}).catch(Co)):(wc(r,s.targetId),await gc(r.localStore,s.targetId,!0))}async function qW(t,e){const n=_e(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yc(n.remoteStore,r.targetId))}async function HW(t,e,n){const r=hE(t);try{const s=await function(o,a){const l=_e(o),c=pt.now(),d=a.reduce((p,_)=>p.add(_.key),et());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Sr(),m=et();return l.Ns.getEntries(p,d).next(v=>{_=v,_.forEach((E,y)=>{y.isValidDocument()||(m=m.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,_)).next(v=>{h=v;const E=[];for(const y of a){const w=mz(y,h.get(y.key).overlayedDocument);w!=null&&E.push(new gi(y.key,w,uk(w.value.mapValue),Hn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(v=>{f=v;const E=v.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(p,v.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Sk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Pt(Ke)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await No(r,s.changes),await Fc(r.remoteStore)}catch(s){const i=oh(s,"Failed to persist write");n.reject(i)}}async function NN(t,e){const n=_e(t);try{const r=await dW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Pe(o.hu,14607):s.removedDocuments.size>0&&(Pe(o.hu,42227),o.hu=!1))}),await No(n,r,e)}catch(r){await Co(r)}}function iA(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=_e(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&oE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KW(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Pt(ue.comparator);o=o.insert(i,nn.newNoDocument(i,Le.min()));const a=et().add(i),l=new rh(Le.min(),new Map,new Pt(Ke),o,a);await NN(r,l),r.du=r.du.remove(i),r.Au.delete(e),dE(r)}else await gc(r.localStore,e,!1).then(()=>wc(r,e,n)).catch(Co)}async function GW(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await uW(n.localStore,e);uE(n,r,null),cE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await No(n,s)}catch(s){await Co(s)}}async function QW(t,e,n){const r=_e(t);try{const s=await function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);uE(r,e,n),cE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await No(r,s)}catch(s){await Co(s)}}function cE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uE(t,e,n){const r=_e(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function wc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ON(t,r)})}function ON(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(yc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),dE(t))}function Vw(t,e,n){for(const r of n)r instanceof PN?(t.Ru.addReference(r.key,e),YW(t,r)):r instanceof CN?(X(jc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ON(t,r.key)):we(19791,{wu:r})}function YW(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(jc,"New document in limbo: "+n),t.Eu.add(r),dE(t))}function dE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(yt.fromString(e)),r=t.fu.next();t.Au.set(r,new jW(n)),t.du=t.du.insert(n,r),rg(t.remoteStore,new Gs(Pr(th(n.path)),r,"TargetPurposeLimboResolution",ur.ce))}}async function No(t,e,n){const r=_e(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=J0.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=_e(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.Es,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>V.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Do(h))throw h;X(X0,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Ms.get(f),_=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(f,m)}}}(r.localStore,i))}async function JW(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){X(jc,"User change. New user:",e.toKey());const r=await hN(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new se(W.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await No(n,r.Ls)}}function XW(t,e){const n=_e(t),r=n.Au.get(e);if(r&&r.hu)return et().add(r.key);{let s=et();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function ZW(t,e){const n=_e(t),r=await Kp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Vw(n,e.targetId,s.au),s}async function e7(t,e){const n=_e(t);return mN(n.localStore,e).then(r=>No(n,r))}async function t7(t,e,n,r){const s=_e(t),i=await function(a,l){const c=_e(a),d=_e(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Fc(s.remoteStore):n==="acknowledged"||n==="rejected"?(uE(s,e,r||null),cE(s,e),function(a,l){_e(_e(a).mutationQueue).ir(l)}(s.localStore,e)):we(6720,"Unknown batchState",{Su:n}),await No(s,i)):X(jc,"Cannot apply mutation batch with id: "+e)}async function n7(t,e){const n=_e(t);if(sg(n),hE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await oA(n,r.toArray());n.gu=!0,await Ow(n.remoteStore,!0);for(const i of s)rg(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(wc(n,o),gc(n.localStore,o,!0))),yc(n.remoteStore,o)}),await s,await oA(n,r),function(o){const a=_e(o);a.Au.forEach((l,c)=>{yc(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Pt(ue.comparator)}(n),n.gu=!1,await Ow(n.remoteStore,!1)}}async function oA(t,e,n){const r=_e(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Hp(r.localStore,Pr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await ZW(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await pN(r.localStore,o);a=await Hp(r.localStore,c),await lE(r,LN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function LN(t){return vk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function r7(t){return function(n){return _e(_e(n).persistence).Ts()}(_e(t).localStore)}async function s7(t,e,n,r){const s=_e(t);if(s.gu)return void X(jc,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await mN(s.localStore,Ek(i[0])),a=rh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",rn.EMPTY_BYTE_STRING);await No(s,o,a);break}case"rejected":await gc(s.localStore,e,!0),wc(s,e,r);break;default:we(64155,n)}}async function i7(t,e,n){const r=sg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){X(jc,"Adding an already active target "+s);continue}const i=await pN(r.localStore,s),o=await Hp(r.localStore,i);await lE(r,LN(i),o.targetId,!1,o.resumeToken),rg(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await gc(r.localStore,s,!1).then(()=>{yc(r.remoteStore,s),wc(r,s)}).catch(Co)}}function sg(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KW.bind(null,e),e.Pu.H_=MW.bind(null,e.eventManager),e.Pu.yu=FW.bind(null,e.eventManager),e}function hE(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QW.bind(null,e),e}class Vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ng(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dN(this.persistence,new uN,e.initialUser,this.serializer)}Cu(e){return new Q0(tg.mi,this.serializer)}Du(e){return new _N}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vd.provider={build:()=>new Vd};class o7 extends Vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pe(this.persistence.referenceDelegate instanceof qp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Q0(r=>qp.mi(r,n),this.serializer)}}class VN extends Vd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await hE(this.xu.syncEngine),await Fc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return dN(this.persistence,new uN,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new sN(r,e.asyncQueue,n)}Mu(e,n){const r=new v9(n,this.persistence);return new y9(e.asyncQueue,r)}Cu(e){const n=cN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Y0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,EN(),Uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new _N}}class a7 extends VN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Py&&(this.sharedClientState.syncEngine={Co:t7.bind(null,n),vo:s7.bind(null,n),Fo:i7.bind(null,n),Ts:r7.bind(null,n),Do:e7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await n7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=EN();if(!Py.v(n))throw new se(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Py(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Md{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JW.bind(null,this.syncEngine),await Ow(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VW}()}createDatastore(e){const n=ng(e.databaseInfo.databaseId),r=function(i){return new vW(i)}(e.databaseInfo);return function(i,o,a,l){return new TW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new SW(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>iA(this.syncEngine,n,0),function(){return Zb.v()?new Zb:new pW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new $W(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=_e(s);X(La,"RemoteStore shutting down."),i.Ea.add(5),await Mc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Md.provider={build:()=>new Md};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):an("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="FirestoreClient";class l7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Bn.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X(So,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(So,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=oh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dy(t,e){t.asyncQueue.verifyOperationInProgress(),X(So,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await hN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function aA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pE(t);X(So,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>tA(e.remoteStore,s)),t._onlineComponents=e}async function pE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(So,"Using user provided OfflineComponentProvider");try{await Dy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wo("Error using user provided cache. Falling back to memory cache: "+n),await Dy(t,new Vd)}}else X(So,"Using default OfflineComponentProvider"),await Dy(t,new o7(void 0));return t._offlineComponents}async function mE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(So,"Using user provided OnlineComponentProvider"),await aA(t,t._uninitializedComponentsProvider._online)):(X(So,"Using default OnlineComponentProvider"),await aA(t,new Md))),t._onlineComponents}function MN(t){return pE(t).then(e=>e.persistence)}function FN(t){return pE(t).then(e=>e.localStore)}function UN(t){return mE(t).then(e=>e.remoteStore)}function c7(t){return mE(t).then(e=>e.syncEngine)}async function Jp(t){const e=await mE(t),n=e.eventManager;return n.onListen=BW.bind(null,e.syncEngine),n.onUnlisten=WW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qW.bind(null,e.syncEngine),n}function u7(t){return t.asyncQueue.enqueue(async()=>{const e=await MN(t),n=await UN(t);return e.setNetworkEnabled(!0),function(s){const i=_e(s);return i.Ea.delete(0),ih(i)}(n)})}function d7(t){return t.asyncQueue.enqueue(async()=>{const e=await MN(t),n=await UN(t);return e.setNetworkEnabled(!1),async function(s){const i=_e(s);i.Ea.add(0),await Mc(i),i.Ra.set("Offline")}(n)})}function h7(t,e){const n=new jr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=_e(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new se(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=oh(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await FN(t),e,n)),n.promise}function f7(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new fE({next:f=>{d.Nu(),o.enqueueAndForget(()=>iE(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new aE(th(a.path),d,{includeMetadataChanges:!0,qa:!0});return sE(i,h)}(await Jp(t),t.asyncQueue,e,n,r)),r.promise}function p7(t,e){const n=new jr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Kp(s,i,!0),l=new DN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=oh(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await FN(t),e,n)),n.promise}function m7(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new fE({next:f=>{d.Nu(),o.enqueueAndForget(()=>iE(i,h)),f.fromCache&&l.source==="server"?c.reject(new se(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new aE(a,d,{includeMetadataChanges:!0,qa:!0});return sE(i,h)}(await Jp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="firestore.googleapis.com",cA=!0;class uA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g7,this.ssl=cA}else this.host=e.host,this.ssl=e.ssl??cA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rN)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OD;switch(r.type){case"firstParty":return new l9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lA.get(n);r&&(X("ComponentProvider","Removing Datastore"),lA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xd(n,Bt._jsonSchema))return new Bt(e,r||null,new ue(yt.fromString(n.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:pn("string",Bt._jsonSchemaVersion),referencePath:pn("string")};class Ys extends us{constructor(e,n,r){super(e,n,th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new ue(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function Re(t,e,...n){if(t=Tt(t),VD("collection","path",e),t instanceof gE){const r=yt.fromString(e,...n);return eb(r),new Ys(t,null,r)}{if(!(t instanceof Bt||t instanceof Ys))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return eb(r),new Ys(t.firestore,null,r)}}function Ie(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=jm.newId()),VD("doc","path",e),t instanceof gE){const r=yt.fromString(e,...n);return ZS(r),new Bt(t,null,new ue(r))}{if(!(t instanceof Bt||t instanceof Ys))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return ZS(r),new Bt(t.firestore,t instanceof Ys?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="AsyncQueue";class hA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TN(this,"async_queue_retry"),this._c=()=>{const r=Uf();r&&X(dA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Uf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new jr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Do(e))throw e;X(dA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,an("INTERNAL UNHANDLED ERROR: ",fA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=rE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&we(47125,{Pc:fA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function fA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class nr extends gE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new hA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hA(e),this._firestoreClient=void 0,await e}}}function $N(t,e,n){n||(n=Vp);const r=Fm(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(tc(i,e))return s;throw new se(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rN)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fi(e.host)&&w0(e.host),r.initialize({options:e,instanceIdentifier:n})}function yi(t){if(t._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BN(t),t._firestoreClient}function BN(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new H9(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,jN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new l7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function y7(t,e){wo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return zN(t,Md.provider,{build:r=>new VN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function v7(t){wo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();zN(t,Md.provider,{build:n=>new a7(n,e.cacheSizeBytes)})}function zN(t,e,n){if((t=cn(t,nr))._firestoreClient||t._terminated)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new se(W.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},BN(t)}function yE(t){return u7(yi(t=cn(t,nr)))}function vE(t){return d7(yi(t=cn(t,nr)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(rn.fromBase64String(e))}catch(n){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xd(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:pn("string",Tr._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ns._jsonSchemaVersion}}static fromJSON(e){if(Xd(e,ns._jsonSchema))return new ns(e.latitude,e.longitude)}}ns._jsonSchemaVersion="firestore/geoPoint/1.0",ns._jsonSchema={type:pn("string",ns._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:rs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xd(e,rs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new rs(e.vectorValues);throw new se(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rs._jsonSchemaVersion="firestore/vectorValue/1.0",rs._jsonSchema={type:pn("string",rs._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=/^__.*__$/;class _7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vc(e,this.data,n,this.fieldTransforms)}}class WN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class ig{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qN(this.Ac)&&w7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ng(e)}Cc(e,n,r,s=!1){return new ig({Ac:e,methodName:n,Dc:r,path:$t.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function og(t){const e=t._freezeSettings(),n=ng(t._databaseId);return new E7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);EE("Data must be an object, but it was:",o,r);const a=KN(r,o);let l,c;if(i.merge)l=new dr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Mw(e,h,n);if(!o.contains(f))throw new se(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);QN(d,f)||d.push(f)}l=new dr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new _7(new qn(a),l,c)}class ag extends $c{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ag}}function T7(t,e,n){return new ig({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wE extends $c{_toFieldTransform(e){return new j0(e.path,new fc)}isEqual(e){return e instanceof wE}}class _E extends $c{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=T7(this,e,!0),r=this.vc.map(i=>Bc(i,n)),s=new Da(r);return new j0(e.path,s)}isEqual(e){return e instanceof _E&&tc(this.vc,e.vc)}}function I7(t,e,n,r){const s=t.Cc(1,e,n);EE("Data must be an object, but it was:",s,r);const i=[],o=qn.empty();ko(r,(l,c)=>{const d=TE(e,l,n);c=Tt(c);const h=s.yc(d);if(c instanceof ag)i.push(d);else{const f=Bc(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new dr(i);return new WN(o,a,s.fieldTransforms)}function S7(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Mw(e,r,n)],l=[s];if(i.length%2!=0)throw new se(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Mw(e,i[f])),l.push(i[f+1]);const c=[],d=qn.empty();for(let f=a.length-1;f>=0;--f)if(!QN(c,a[f])){const p=a[f];let _=l[f];_=Tt(_);const m=o.yc(p);if(_ instanceof ag)c.push(p);else{const v=Bc(_,m);v!=null&&(c.push(p),d.set(p,v))}}const h=new dr(c);return new WN(d,h,o.fieldTransforms)}function b7(t,e,n,r=!1){return Bc(n,t.Cc(r?4:3,e))}function Bc(t,e){if(GN(t=Tt(t)))return EE("Unsupported field value:",e,t),KN(t,e);if(t instanceof $c)return function(r,s){if(!qN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Bc(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=pt.fromDate(r);return{timestampValue:mc(s.serializer,i)}}if(r instanceof pt){const i=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(s.serializer,i)}}if(r instanceof ns)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tr)return{bytesValue:Mk(s.serializer,r._byteString)};if(r instanceof Bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:q0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rs)return function(o,a){return{mapValue:{fields:{[L0]:{stringValue:V0},[cc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return U0(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${$m(r)}`)}(t,e)}function KN(t,e){const n={};return tk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(r,s)=>{const i=Bc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function GN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof ns||t instanceof Tr||t instanceof Bt||t instanceof $c||t instanceof rs)}function EE(t,e,n){if(!GN(n)||!FD(n)){const r=$m(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Mw(t,e,n){if((e=Tt(e))instanceof ah)return e._internalPath;if(typeof e=="string")return TE(t,e);throw Xp("Field path arguments must be of type string or ",t,!1,void 0,n)}const A7=new RegExp("[~\\*/\\[\\]]");function TE(t,e,n){if(e.search(A7)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ah(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new se(W.INVALID_ARGUMENT,a+t+l)}function QN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x7 extends YN{data(){return super.data()}}function lg(t,e){return typeof e=="string"?TE(t,e):e instanceof ah?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IE{}class cg extends IE{}function ze(t,e,...n){let r=[];e instanceof IE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof ug).length,a=i.filter(l=>l instanceof lh).length;if(o>1||o>0&&a>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class lh extends cg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lh(e,n,r)}_apply(e){const n=this._parse(e);return XN(e._query,n),new us(e.firestore,e.converter,Sw(e._query,n))}_parse(e){const n=og(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gA(h,d);const _=[];for(const m of h)_.push(mA(l,i,m));f={arrayValue:{values:_}}}else f=mA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gA(h,d),f=b7(a,o,h,d==="in"||d==="not-in");return ot.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fe(t,e,n){const r=e,s=lg("where",t);return lh._create(s,r,n)}class ug extends IE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ug(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)XN(o,l),o=Sw(o,l)}(e._query,n),new us(e.firestore,e.converter,Sw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends cg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Od(i,o)}(e._query,this._field,this._direction);return new us(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Lc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Cs(t,e="asc"){const n=e,r=lg("orderBy",t);return dg._create(r,n)}class hg extends cg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hg(e,n,r)}_apply(e){return new us(e.firestore,e.converter,Up(e._query,this._limit,this._limitType))}}function ho(t){return p9("limit",t),hg._create("limit",t,"F")}function mA(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wk(e)&&n.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(yt.fromString(n));if(!ue.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kd(t,new ue(r))}if(n instanceof Bt)return kd(t,n._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$m(n)}.`)}function gA(t,e){if(!Array.isArray(t)||t.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XN(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZN{convertValue(e,n="none"){switch(Eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ko(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[cc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ut(o.doubleValue));return new rs(n)}convertGeoPoint(e){return new ns(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Km(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cd(e));default:return null}}convertTimestamp(e){const n=li(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=yt.fromString(e);Pe(Kk(r),9688,{name:e});const s=new _o(r.get(1),r.get(3)),i=new ue(r.popFirst(5));return s.isEqual(n)||an(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends YN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:pn("string",Js._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class Qu extends Js{data(e={}){return super.data(e)}}class Xs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qu(this._firestore,this._userDataWriter,r.key,r,new sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Qu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Qu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:R7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){t=cn(t,Bt);const e=cn(t.firestore,nr);return f7(yi(e),t._key).then(n=>nO(e,t,n))}Xs._jsonSchemaVersion="firestore/querySnapshot/1.0",Xs._jsonSchema={type:pn("string",Xs._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};class ch extends ZN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function tO(t){t=cn(t,Bt);const e=cn(t.firestore,nr),n=yi(e),r=new ch(e);return h7(n,t._key).then(s=>new Js(e,r,t._key,s,new sa(s!==null&&s.hasLocalMutations,!0),t.converter))}function He(t){t=cn(t,us);const e=cn(t.firestore,nr),n=yi(e),r=new ch(e);return JN(t._query),m7(n,t._query).then(s=>new Xs(e,r,t,s))}function P7(t){t=cn(t,us);const e=cn(t.firestore,nr),n=yi(e),r=new ch(e);return p7(n,t._query).then(s=>new Xs(e,r,t,s))}function tn(t,e,n){t=cn(t,Bt);const r=cn(t.firestore,nr),s=eO(t.converter,e,n);return uh(r,[HN(og(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Hn.none())])}function un(t,e,n,...r){t=cn(t,Bt);const s=cn(t.firestore,nr),i=og(s);let o;return o=typeof(e=Tt(e))=="string"||e instanceof ah?S7(i,"updateDoc",t._key,e,n,r):I7(i,"updateDoc",t._key,e),uh(s,[o.toMutation(t._key,Hn.exists(!0))])}function bn(t){return uh(cn(t.firestore,nr),[new Xm(t._key,Hn.none())])}function Ds(t,e){const n=cn(t.firestore,nr),r=Ie(t),s=eO(t.converter,e);return uh(n,[HN(og(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}function ui(t,...e){var l,c,d;t=Tt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(pA(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof Bt)o=cn(t.firestore,nr),a=th(t._key.path),i={next:h=>{e[r]&&e[r](nO(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=cn(t,us);o=cn(h.firestore,nr),a=h._query;const f=new ch(o);i={next:p=>{e[r]&&e[r](new Xs(o,f,h,p))},error:e[r+1],complete:e[r+2]},JN(t._query)}return function(f,p,_,m){const v=new fE(m),E=new aE(p,v,_);return f.asyncQueue.enqueueAndForget(async()=>sE(await Jp(f),E)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>iE(await Jp(f),E))}}(yi(o),a,s,i)}function uh(t,e){return function(r,s){const i=new jr;return r.asyncQueue.enqueueAndForget(async()=>HW(await c7(r),s,i)),i.promise}(yi(t),e)}function nO(t,e,n){const r=n.docs.get(e._key),s=new ch(t);return new Js(t,s,e._key,r,new sa(n.hasPendingWrites,n.fromCache),e.converter)}function Ue(){return new wE("serverTimestamp")}function C7(...t){return new _E("arrayUnion",t)}(function(e,n=!0){(function(s){Oc=s})(Yd),Os(new as("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new nr(new o9(r.getProvider("auth-internal")),new c9(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Rr(QS,YS,e),Rr(QS,YS,"esm2020")})();const hn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:ZN,Bytes:Tr,CollectionReference:Ys,DocumentReference:Bt,DocumentSnapshot:Js,FieldPath:ah,FieldValue:$c,Firestore:nr,FirestoreError:se,GeoPoint:ns,Query:us,QueryCompositeFilterConstraint:ug,QueryConstraint:cg,QueryDocumentSnapshot:Qu,QueryFieldFilterConstraint:lh,QueryLimitConstraint:hg,QueryOrderByConstraint:dg,QuerySnapshot:Xs,SnapshotMetadata:sa,Timestamp:pt,VectorValue:rs,_AutoId:jm,_ByteString:rn,_DatabaseId:_o,_DocumentKey:ue,_EmptyAuthCredentialsProvider:OD,_FieldPath:$t,_cast:cn,_logWarn:wo,_validateIsNotUsedTogether:MD,addDoc:Ds,arrayUnion:C7,collection:Re,deleteDoc:bn,disableNetwork:vE,doc:Ie,enableIndexedDbPersistence:y7,enableMultiTabIndexedDbPersistence:v7,enableNetwork:yE,ensureFirestoreConfigured:yi,executeWrite:uh,getDoc:Kt,getDocFromCache:tO,getDocs:He,getDocsFromCache:P7,initializeFirestore:$N,limit:ho,onSnapshot:ui,orderBy:Cs,query:ze,serverTimestamp:Ue,setDoc:tn,setLogLevel:kD,updateDoc:un,where:Fe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7="type.googleapis.com/google.protobuf.Int64Value",k7="type.googleapis.com/google.protobuf.UInt64Value";function rO(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Zp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Zp(e));if(typeof t=="function"||typeof t=="object")return rO(t,e=>Zp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function _c(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case D7:case k7:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>_c(e)):typeof t=="function"||typeof t=="object"?rO(t,e=>_c(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hr extends cs{constructor(e,n,r){super(`${SE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,hr.prototype)}}function N7(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function em(t,e){let n=N7(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!yA[o])return new hr("internal","internal");n=yA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=_c(s))}}catch{}return n==="ok"?null:new hr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Er(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="us-central1",L7=/^data: (.*?)(?:\n|$)/;function V7(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new hr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class M7{constructor(e,n,r,s,i=Fw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new O7(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Fw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function F7(t,e,n){const r=fi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(w0(t.emulatorOrigin+"/backends"),$C("Functions",!0))}function U7(t,e,n){const r=s=>$7(t,e,s,{});return r.stream=(s,i)=>z7(t,e,s,i),r}function sO(t){return t.emulatorOrigin&&fi(t.emulatorOrigin)?"include":void 0}async function j7(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:sO(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function iO(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function $7(t,e,n,r){const s=t._url(e);return B7(t,s,n,r)}async function B7(t,e,n,r){n=Zp(n);const s={data:n},i=await iO(t,r),o=r.timeout||7e4,a=V7(o),l=await Promise.race([j7(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new hr("cancelled","Firebase Functions instance was deleted.");const c=em(l.status,l.json);if(c)throw c;if(!l.json)throw new hr("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new hr("internal","Response is missing data field.");return{data:_c(d)}}function z7(t,e,n,r){const s=t._url(e);return W7(t,s,n,r||{})}async function W7(t,e,n,r){var f;n=Zp(n);const s={data:n},i=await iO(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:sO(t)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const m=new hr("cancelled","Request was cancelled.");return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}const _=em(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let a,l;const c=new Promise((p,_)=>{a=p,l=_});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const p=new hr("cancelled","Request was cancelled.");l(p)});const d=o.body.getReader(),h=q7(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:_,done:m}=await p.read();return{value:_,done:m}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function q7(t,e,n,r){const s=(o,a)=>{const l=o.match(L7);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(_c(d.result));return}if("message"in d){a.enqueue(_c(d.message));return}if("error"in d){const h=em(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof hr){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new hr("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new hr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof hr?c:em(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const vA="@firebase/functions",wA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="auth-internal",K7="app-check-internal",G7="messaging-internal";function Q7(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(H7),o=n.getProvider(G7),a=n.getProvider(K7);return new M7(s,i,o,a,r)};Os(new as(SE,e,"PUBLIC").setMultipleInstances(!0)),Rr(vA,wA,t),Rr(vA,wA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t=QC(),e=Fw){const r=Fm(Tt(t),SE).getImmediate({identifier:e}),s=UC("functions");return s&&J7(r,...s),r}function J7(t,e,n){F7(Tt(t),e,n)}function oG(t,e,n){return U7(Tt(t),e)}Q7();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="firebasestorage.googleapis.com",aO="storageBucket",X7=2*60*1e3,Z7=10*60*1e3,e8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt extends cs{constructor(e,n,r=0){super(ky(e),`Firebase Storage: ${n} (${ky(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ky(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mt||(Mt={}));function ky(t){return"storage/"+t}function bE(){const t="An unknown error occurred, please check the error payload for server response.";return new Jt(Mt.UNKNOWN,t)}function t8(t){return new Jt(Mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function n8(t){return new Jt(Mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function r8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jt(Mt.UNAUTHENTICATED,t)}function s8(){return new Jt(Mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function i8(t){return new Jt(Mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function lO(){return new Jt(Mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cO(){return new Jt(Mt.CANCELED,"User canceled the upload/download.")}function o8(t){return new Jt(Mt.INVALID_URL,"Invalid URL '"+t+"'.")}function a8(t){return new Jt(Mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function l8(){return new Jt(Mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aO+"' property when initializing the app?")}function uO(){return new Jt(Mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function c8(){return new Jt(Mt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function u8(){return new Jt(Mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function d8(t){return new Jt(Mt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uw(t){return new Jt(Mt.INVALID_ARGUMENT,t)}function dO(){return new Jt(Mt.APP_DELETED,"The Firebase app was deleted.")}function h8(t){return new Jt(Mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yu(t,e){return new Jt(Mt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mu(t){throw new Jt(Mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=br.makeFromUrl(e,n)}catch{return new br(e,"")}if(r.path==="")return r;throw a8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),_={bucket:1,path:3},m=n===oO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",E=new RegExp(`^https?://${m}/${s}/${v}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:p,indices:_,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<w.length;R++){const D=w[R],L=D.regex.exec(e);if(L){const x=L[D.indices.bucket];let A=L[D.indices.path];A||(A=""),r=new br(x,A),D.postModify(r);break}}if(r==null)throw o8(e);return r}}class f8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function f(){i&&clearTimeout(i)}function p(v,...E){if(c){f();return}if(v){f(),d.call(null,v,...E);return}if(l()||o){f(),d.call(null,v,...E);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let _=!1;function m(v){_||(_=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,m(!0)},n),m}function m8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){return t!==void 0}function y8(t){return typeof t=="function"}function v8(t){return typeof t=="object"&&!Array.isArray(t)}function fg(t){return typeof t=="string"||t instanceof String}function _A(t){return AE()&&t instanceof Blob}function AE(){return typeof Blob<"u"}function EA(t,e,n,r){if(r<e)throw Uw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Uw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function hO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ta;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ta||(Ta={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,m)=>{this.resolve_=_,this.reject_=m,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ef(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ta.NO_ERROR,l=i.getStatus();if(!a||fO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ta.ABORT;r(!1,new ef(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ef(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());g8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=bE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?dO():cO();o(l)}else{const l=lO();o(l)}};this.canceled_?n(!1,new ef(!1,null,!0)):this.backoffId_=p8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&m8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ef{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function I8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function S8(t,e,n,r,s,i,o=!0,a=!1){const l=hO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return T8(d,e),_8(d,n),E8(d,i),I8(d,r),new w8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A8(...t){const e=b8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(AE())return new Blob(t);throw new Jt(Mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function x8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(t){if(typeof atob>"u")throw d8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ny{constructor(e,n){this.data=e,this.contentType=n||null}}function P8(t,e){switch(t){case As.RAW:return new Ny(pO(e));case As.BASE64:case As.BASE64URL:return new Ny(mO(t,e));case As.DATA_URL:return new Ny(D8(e),k8(e))}throw bE()}function pO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function C8(t){let e;try{e=decodeURIComponent(t)}catch{throw Yu(As.DATA_URL,"Malformed data URL.")}return pO(e)}function mO(t,e){switch(t){case As.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Yu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case As.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Yu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=R8(e)}catch(s){throw s.message.includes("polyfill")?s:Yu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class gO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Yu(As.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=N8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function D8(t){const e=new gO(t);return e.base64?mO(As.BASE64,e.rest):C8(e.rest)}function k8(t){return new gO(t).contentType}function N8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){let r=0,s="";_A(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(_A(this.data_)){const r=this.data_,s=x8(r,e,n);return s===null?null:new Ws(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ws(r,!0)}}static getBlob(...e){if(AE()){const n=e.map(r=>r instanceof Ws?r.data_:r);return new Ws(A8.apply(null,n))}else{const n=e.map(o=>fg(o)?P8(As.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ws(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){let e;try{e=JSON.parse(t)}catch{return null}return v8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function vO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t,e){return e}class Qn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||V8}}let tf=null;function M8(t){return!fg(t)||t.length<2?t:vO(t)}function xE(){if(tf)return tf;const t=[];t.push(new Qn("bucket")),t.push(new Qn("generation")),t.push(new Qn("metageneration")),t.push(new Qn("name","fullPath",!0));function e(i,o){return M8(o)}const n=new Qn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Qn("size");return s.xform=r,t.push(s),t.push(new Qn("timeCreated")),t.push(new Qn("updated")),t.push(new Qn("md5Hash",null,!0)),t.push(new Qn("cacheControl",null,!0)),t.push(new Qn("contentDisposition",null,!0)),t.push(new Qn("contentEncoding",null,!0)),t.push(new Qn("contentLanguage",null,!0)),t.push(new Qn("contentType",null,!0)),t.push(new Qn("metadata","customMetadata",!0)),tf=t,tf}function F8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new br(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function U8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return F8(r,t),r}function wO(t,e,n){const r=yO(e);return r===null?null:U8(t,r,n)}function j8(t,e,n,r){const s=yO(e);if(s===null||!fg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=dh(f,n,r),_=hO({alt:"media",token:c});return p+_})[0]}function _O(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class zc{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){if(!t)throw bE()}function RE(t,e){function n(r,s){const i=wO(t,s,e);return Zs(i!==null),i}return n}function $8(t,e){function n(r,s){const i=wO(t,s,e);return Zs(i!==null),j8(i,s,t.host,t._protocol)}return n}function hh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=s8():s=r8():n.getStatus()===402?s=n8(t.bucket):n.getStatus()===403?s=i8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function EO(t){const e=hh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=t8(t.path)),i.serverResponse=s.serverResponse,i}return n}function B8(t,e,n){const r=e.fullServerUrl(),s=dh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new zc(s,i,RE(t,n),o);return a.errorHandler=EO(e),a}function z8(t,e,n){const r=e.fullServerUrl(),s=dh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new zc(s,i,$8(t,n),o);return a.errorHandler=EO(e),a}function W8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function TO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=W8(null,e)),r}function IO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let R=0;R<2;R++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=TO(e,r,s),d=_O(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Ws.getBlob(h,r,f);if(p===null)throw uO();const _={name:c.fullPath},m=dh(i,t.host,t._protocol),v="POST",E=t.maxUploadRetryTime,y=new zc(m,v,RE(t,n),E);return y.urlParams=_,y.headers=o,y.body=p.uploadData(),y.errorHandler=hh(e),y}class tm{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function PE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Zs(!1)}return Zs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function q8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=TO(e,r,s),a={name:o.fullPath},l=dh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=_O(o,n),f=t.maxUploadRetryTime;function p(m){PE(m);let v;try{v=m.getResponseHeader("X-Goog-Upload-URL")}catch{Zs(!1)}return Zs(fg(v)),v}const _=new zc(l,c,p,f);return _.urlParams=a,_.headers=d,_.body=h,_.errorHandler=hh(e),_}function H8(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=PE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zs(!1)}h||Zs(!1);const f=Number(h);return Zs(!isNaN(f)),new tm(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new zc(n,o,i,a);return l.headers=s,l.errorHandler=hh(e),l}const TA=256*1024;function K8(t,e,n,r,s,i,o,a){const l=new tm(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw c8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let p="";d===0?p="finalize":c===d?p="upload, finalize":p="upload";const _={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(h,f);if(m===null)throw uO();function v(R,D){const L=PE(R,["active","final"]),x=l.current+d,A=r.size();let b;return L==="final"?b=RE(e,i)(R,D):b=null,new tm(x,A,L==="final",b)}const E="POST",y=e.maxUploadRetryTime,w=new zc(n,E,v,y);return w.headers=_,w.body=m.uploadData(),w.progressCallback=a||null,w.errorHandler=hh(t),w}const ar={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Oy(t){switch(t){case"running":case"pausing":case"canceling":return ar.RUNNING;case"paused":return ar.PAUSED;case"success":return ar.SUCCESS;case"canceled":return ar.CANCELED;case"error":return ar.ERROR;default:return ar.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,n,r){if(y8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Q8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ta.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ta.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ta.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw mu("cannot .send() more than once");if(fi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Y8 extends Q8{initXhr(){this.xhr_.responseType="text"}}function Jo(){return new Y8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=xE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Mt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(fO(s.status,[]))if(i)s=lO();else{this.sleepTime=Math.max(this.sleepTime*2,e8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Mt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=q8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Jo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=H8(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Jo,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=TA*this._chunkMultiplier,n=new tm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=K8(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Jo,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){TA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=B8(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Jo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=IO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Jo,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=cO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Oy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new G8(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Oy(this._state)){case ar.SUCCESS:rl(this._resolve.bind(null,this.snapshot))();break;case ar.CANCELED:case ar.ERROR:const n=this._reject;rl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Oy(this._state)){case ar.RUNNING:case ar.PAUSED:e.next&&rl(e.next.bind(e,this.snapshot))();break;case ar.SUCCESS:e.complete&&rl(e.complete.bind(e))();break;case ar.CANCELED:case ar.ERROR:e.error&&rl(e.error.bind(e,this._error))();break;default:e.error&&rl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this._service=e,n instanceof br?this._location=n:this._location=br.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Va(e,n)}get root(){const e=new br(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vO(this._location.path)}get storage(){return this._service}get parent(){const e=O8(this._location.path);if(e===null)return null;const n=new br(this._location.bucket,e);return new Va(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h8(e)}}function X8(t,e,n){t._throwIfRoot("uploadBytes");const r=IO(t.storage,t._location,xE(),new Ws(e,!0),n);return t.storage.makeRequestWithTokens(r,Jo).then(s=>({metadata:s,ref:t}))}function Z8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new J8(t,new Ws(e),n)}function eq(t){t._throwIfRoot("getDownloadURL");const e=z8(t.storage,t._location,xE());return t.storage.makeRequestWithTokens(e,Jo).then(n=>{if(n===null)throw u8();return n})}function tq(t,e){const n=L8(t._location.path,e),r=new br(t._location.bucket,n);return new Va(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){return/^[A-Za-z]+:\/\//.test(t)}function rq(t,e){return new Va(t,e)}function SO(t,e){if(t instanceof CE){const n=t;if(n._bucket==null)throw l8();const r=new Va(n,n._bucket);return e!=null?SO(r,e):r}else return e!==void 0?tq(t,e):t}function sq(t,e){if(e&&nq(e)){if(t instanceof CE)return rq(t,e);throw Uw("To use ref(service, url), the first argument must be a Storage instance.")}else return SO(t,e)}function IA(t,e){const n=e==null?void 0:e[aO];return n==null?null:br.makeFromBucketSpec(n,t)}function iq(t,e,n,r={}){t.host=`${e}:${n}`;const s=fi(e);s&&(w0(`https://${t.host}/b`),$C("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:q6(i,t.app.options.projectId))}class CE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=oO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X7,this._maxUploadRetryTime=Z7,this._requests=new Set,s!=null?this._bucket=br.makeFromBucketSpec(s,this._host):this._bucket=IA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=br.makeFromBucketSpec(this._url,e):this._bucket=IA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){EA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){EA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Va(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new f8(dO());{const o=S8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const SA="@firebase/storage",bA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="storage";function aG(t,e,n){return t=Tt(t),X8(t,e,n)}function oq(t,e,n){return t=Tt(t),Z8(t,e,n)}function aq(t){return t=Tt(t),eq(t)}function lq(t,e){return t=Tt(t),sq(t,e)}function AO(t=QC(),e){t=Tt(t);const r=Fm(t,bO).getImmediate({identifier:e}),s=UC("storage");return s&&cq(r,...s),r}function cq(t,e,n,r={}){iq(t,e,n,r)}function uq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new CE(n,r,s,e,Yd)}function dq(){Os(new as(bO,uq,"PUBLIC").setMultipleInstances(!0)),Rr(SA,bA,""),Rr(SA,bA,"esm2020")}dq();const hq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},jw={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:jw.projectId,authDomain:jw.authDomain,emulatorMode:!1});const pg=GC(jw);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const At=ZB(pg,{persistence:[yD,cw]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const G=$N(pg,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{kD("error")}catch{}const fq=Y7(pg,"us-central1"),pq=AO(pg);console.log(" Firebase initialized successfully");const mq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(mq,100);let qo=0;const Ly=3,gq=1e3,xO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&qo<Ly){qo++;const r=Math.min(gq*Math.pow(2,qo-1),1e4);console.log(` Attempting to reconnect (${qo}/${Ly}) in ${r}ms...`);try{await vE(G),await new Promise(s=>setTimeout(s,r)),await yE(G),console.log(" Firestore reconnected successfully"),qo=0}catch(s){console.error(" Failed to reconnect:",s),qo>=Ly&&(console.error(" Maximum reconnection attempts reached."),yq())}}},yq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await yE(G),qo=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await vE(G),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(xO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Lt=Object.freeze(Object.defineProperty({__proto__:null,auth:At,db:G,functions:fq,handleFirestoreError:xO,storage:pq},Symbol.toStringTag,{value:"Module"})),Ze=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},vq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Ma=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Ma(n)).filter(n=>n!==void 0);if(t instanceof Date||!vq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Ma(r);s!==void 0&&(e[n]=s)}return e},jf={async create(t){await tn(Ie(G,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ue()})},async getById(t){const e=Ie(G,"profiles",t),n=await Kt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Ze(r.createdAt)}}return null},async update(t,e){const n=Ie(G,"profiles",t);await un(n,{...e,updatedAt:Ue()})},async getByShopId(t){const e=ze(Re(G,"profiles"),Fe("shopId","==",t));return(await He(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Ze(s.createdAt)}})}},$w={async create(t){return(await Ds(Re(G,"referrals"),{...t,createdAt:Ue(),updatedAt:Ue()})).id},async getByReferrerId(t){try{const e=ze(Re(G,"referrals"),Fe("referrerId","==",t),Cs("createdAt","desc"));return(await He(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),updatedAt:Ze(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=ze(Re(G,"referrals"),Fe("referrerId","==",t));return(await He(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Ze(i.data().createdAt),updatedAt:Ze(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=ze(Re(G,"referrals"),Fe("referralCode","==",t),ho(1)),n=await He(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),updatedAt:Ze(r.data().updatedAt)}},async updateStatus(t,e){await un(Ie(G,"referrals",t),{status:e,updatedAt:Ue()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},RO={async getByUserId(t){const e=ze(Re(G,"profiles"),Fe("userId","==",t)),n=await He(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Ze(s.createdAt),updatedAt:Ze(s.updatedAt)}}return null},async update(t,e){const n=ze(Re(G,"profiles"),Fe("userId","==",t)),r=await He(n);if(!r.empty){const s=Ie(G,"profiles",r.docs[0].id);await un(s,{...e,updatedAt:Ue()})}}},Yi={async create(t){return(await Ds(Re(G,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ue(),updatedAt:Ue()})).id},async getByMerchantId(t){const e=ze(Re(G,"merchantWallets"),Fe("merchantUserId","==",t)),r=(await He(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Ze(l.createdAt),updatedAt:Ze(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=ze(Re(G,"wallets"),Fe("userId","==",t));return(await He(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Ze(l.createdAt),updatedAt:Ze(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=Ie(G,"merchantWallets",t),n=await Kt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Ze(r.createdAt),updatedAt:Ze(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=ze(Re(G,"merchantWallets"),Fe("iccid","==",t)),n=await He(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:Ze(s.createdAt),updatedAt:Ze(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=ze(Re(G,"merchantWallets"),Fe("msisdn","==",t)),r=await He(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Ze(l.createdAt),updatedAt:Ze(l.updatedAt)}}const s=ze(Re(G,"merchantWallets")),i=await He(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Ze(l.createdAt),updatedAt:Ze(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Ie(G,"merchantWallets",t);await un(n,{...e,updatedAt:Ue()})},async updateUsage(t,e,n){const r=Ie(G,"merchantWallets",t),s={updatedAt:Ue()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await un(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=ze(Re(G,"merchantWallets"),Fe("msisdn","in",o)),c=(await He(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await un(d.ref,{merchantUserId:e,updatedAt:Ue()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Ie(G,"merchantWallets",t);await bn(e)}},DE={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Z(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>im);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ue(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Ds(Re(G,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Z(async()=>{const{ProfitService:d}=await import("./profitService-4r9FqAF7.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await Yi.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),p=Number(t.amount||0),_=String((t==null?void 0:t.originType)||"").trim()==="withdraw",m=String(t.txnType||"")==="receive";_||m?await Yi.updateUsage(c,void 0,f+p):await Yi.updateUsage(c,h+p,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let p="";if(h)try{const m=await Yi.getById(h);p=String((m==null?void 0:m.msisdn)||(m==null?void 0:m.label)||h).trim()}catch{}let _="";f==="withdraw"?_=p?`   ${c}   ${p}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?_=`   ${c}   ${p||" "}   ${d||""}    ${r}`:_=p?`  ${c}   ${p}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=ze(Re(G,"transactions"),Fe("shopId","==",t),Cs("createdAt","desc"));return(await He(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),confirmedAt:r.data().confirmedAt?Ze(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=ze(Re(G,"transactions"),Fe("merchantUserId","==",t),Cs("createdAt","desc"));return(await He(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt),confirmedAt:r.data().confirmedAt?Ze(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=ze(Re(G,"transactions"),Fe("merchantUserId","==",t)),n=ze(Re(G,"transactions"),Fe("userId","==",t)),[r,s]=await Promise.all([He(e),He(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Ze(c.createdAt),confirmedAt:c.confirmedAt?Ze(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=Ie(G,"transactions",t);await un(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function wq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await DE.create(e);return(async()=>{try{const{calculateCommission:r}=await Z(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>im);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Mr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Mr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await Z(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>Ww);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const _q="https://summer-cake-5149.alkaptin2030.workers.dev",PO={async getTelegramWorkerUrl(){var t;try{const e=Ie(G,"systemSettings","core"),n=await Kt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Ie(G,"systemSettings","core");await tn(e,{telegramWorkerUrl:t,updatedAt:Ue()},{merge:!0})}},Eq={async send(t,e){try{const n=await Mr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await PO.getTelegramWorkerUrl()||_q).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},Tq={async log(t,e,n,r,s){await Ds(Re(G,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ue()})},async getLogs(t=100){const e=ze(Re(G,"auditLogs"),Cs("createdAt","desc"),ho(t));return(await He(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Ze(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=ze(Re(G,"deletedTransactions"),Cs("deletedAt","desc"));return(await He(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Ze(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=ze(Re(G,"deletedTransactions"),Fe("userId","==",t),Cs("deletedAt","desc"));return(await He(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Ze(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=ze(Re(G,"deletedTransactions"),Fe("userId","==",t));return(await He(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Ze(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ue(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Ds(Re(G,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=ze(Re(G,"deletedTransactions"),Fe("originalTransactionId","==",t),Fe("userId","==",e)),r=await He(n);r.empty?await Ds(Re(G,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Ue()}):await Promise.all(r.docs.map(s=>un(s.ref,{permanent:!0,deletedAt:Ue()}))),console.log("    :",t);try{const s=ze(Re(G,"userTransactions"),Fe("userId","==",e)),o=(await He(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>bn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Ie(G,"transactions",t);(await Kt(s)).exists()&&(console.log("     transactions  "),await bn(s));const o=ze(Re(G,"transactions"),Fe("transactionId","==",t)),a=await He(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>bn(d.ref))));const l=ze(Re(G,"transactions"),Fe("originalTransactionId","==",t)),c=await He(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>bn(d.ref))));try{const d=ze(Re(G,"deletedTransactions"),Fe("userId","==",e),Fe("originalTransactionId","==",t)),h=await He(d),f=h.docs.map(_=>{var m;return String(((m=_.data())==null?void 0:m.reference)||"")}).filter(Boolean),p=h.docs.map(_=>{var m;return String(((m=_.data())==null?void 0:m.transactionId)||"")}).filter(Boolean);for(const _ of f){const m=ze(Re(G,"transactions"),Fe("reference","==",_)),v=await He(m);v.empty||(console.log(`  ${v.size}   transactions  reference=${_}`),await Promise.all(v.docs.map(E=>bn(E.ref))))}for(const _ of p){try{const E=Ie(G,"transactions",_);(await Kt(E)).exists()&&(console.log("     transactions  :",_),await bn(E))}catch{}const m=ze(Re(G,"transactions"),Fe("transactionId","==",_)),v=await He(m);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${_}`),await Promise.all(v.docs.map(E=>bn(E.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},CO={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=Ie(G,"daily_reports_archive",e);return await tn(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Ue()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=ze(Re(G,"daily_reports_archive"),Fe("userId","==",t),ho(e)),a=await He(o);let l=[];try{l=(await He(ze(Re(G,"deletedDailyArchives"),Fe("userId","==",t)))).docs.map(_=>{var m,v;return{id:_.id,reportDate:String(((m=_.data())==null?void 0:m.reportDate)||""),archiveId:String(((v=_.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(p,_)=>l.some(m=>m.archiveId&&m.archiveId===p||m.reportDate&&m.reportDate===_),d=a.docs.map(p=>({id:p.id,userId:String(p.data().userId),reportDate:String(p.data().reportDate),totalTransactions:Number(p.data().totalTransactions||0),totalAmount:Number(p.data().totalAmount||0),totalWithdrawn:Number(p.data().totalWithdrawn||0),totalSent:Number(p.data().totalSent||0),profit:p.data().profit!==void 0?Number(p.data().profit):void 0,walletId:p.data().walletId??null,createdAt:Ze(p.data().createdAt||p.data().updatedAt)})).filter(p=>!c(p.id,p.reportDate)),h=new Map;for(const p of d){const _=h.get(p.reportDate);(!_||(((r=(n=p.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=_.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(p.reportDate,p)}const f=Array.from(h.values());return f.sort((p,_)=>p.reportDate<_.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=ze(Re(G,"daily_reports_archive"),Fe("userId","==",t)),s=await He(r);let i=0;for(const o of s.docs){const a=Ze(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await bn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=ze(Re(G,"daily_reports_archive"),Fe("userId","==",t)),s=(await He(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Ze(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await bn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=ze(Re(G,"daily_reports_archive"),Fe("userId","==",t)),n=await He(e);let r=0;for(const s of n.docs)try{await bn(s.ref),r++}catch{const o=s.data();try{await Ds(Re(G,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Ue()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Mr={async getUserData(t){try{console.log("     :",{userId:t});const e=Ie(G,"users",t),n=await Kt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Ze(r.createdAt),updatedAt:Ze(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=ze(Re(G,"deletedTransactions"),Fe("userId","==",t));return ui(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data();if(!((i==null?void 0:i.permanent)===!0))return;const a=String((i==null?void 0:i.originalTransactionId)||""),l=String((i==null?void 0:i.transactionId)||""),c=String((i==null?void 0:i.reference)||"");a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptById(t,l),c&&this.removeLocalReceiptByRef(t,c)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=Ie(G,"users",t),r=Ma(e);await tn(n,{...r||{},updatedAt:Ue()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Ie(G,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Ma(r);let i={};try{const l=await Kt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ue()};console.log("   :",o);let a=3;for(;a>0;)try{await tn(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=ze(Re(G,"userTransactions"),Fe("userId","==",t),Cs("createdAt","desc"),ho(200));e=await He(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=ze(Re(G,"userTransactions"),Fe("userId","==",t));e=await He(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:Ze(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=ze(Re(G,"deletedTransactions"),Fe("userId","==",t),Fe("reference","==",o));if(!(await He(c)).empty)return console.log("          ."),"skip-deleted"}{const c=ze(Re(G,"deletedTransactions"),Fe("userId","==",t),Fe("permanent","==",!0)),d=await He(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(p=>!!p).map(p=>String(p));if(d.docs.find(p=>{const _=p.data(),m=String(_.originalTransactionId||_.transactionId||p.id||""),v=String(_.reference||"");return m&&h.includes(m)||v&&h.includes(v)}))return console.log("        /   ."),"skip-deleted"}}const a=ze(Re(G,"deletedTransactions"),Fe("userId","==",t),Cs("deletedAt","desc"),ho(20)),l=await He(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=10*60*1e3;if(l.docs.find(m=>{const v=m.data(),E=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,w=Number(v.amount||0),R=v.createdAt?new Date(String(v.createdAt)):f;return Math.abs(R.getTime()-f.getTime())<=p&&w===h&&E===c&&y===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=ze(Re(G,"userTransactions"),Fe("userId","==",t));if(s.transactionId){const m=ze(Re(G,"userTransactions"),Fe("userId","==",t),Fe("transactionId","==",s.transactionId)),v=await He(m);if(!v.empty){const E=v.docs[0];return await un(Ie(G,"userTransactions",E.id),{...s,uploadedAt:Ue()}),E.id}}if(s.reference){const m=ze(Re(G,"userTransactions"),Fe("userId","==",t),Fe("reference","==",s.reference)),v=await He(m);if(!v.empty){const E=v.docs[0];return await un(Ie(G,"userTransactions",E.id),{...s,uploadedAt:Ue()}),E.id}}const a=ze(Re(G,"userTransactions"),Fe("userId","==",t),Cs("createdAt","desc"),ho(20)),l=await He(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=5*60*1e3,_=l.docs.find(m=>{const v=m.data(),E=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,w=Number(v.amount||0),R=Ze(v.createdAt);return Math.abs(R.getTime()-f.getTime())<=p&&w===h&&E===c&&y===d});if(_)return await un(Ie(G,"userTransactions",_.id),{...s,uploadedAt:Ue()}),_.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Ds(Re(G,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Ue(),uploadedAt:Ue()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Ie(G,"userTransactions",e),a=await Kt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await bn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=ze(Re(G,"userTransactions"),Fe("userId","==",t)),r=await He(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(p=>p===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[ze(Re(G,"userTransactions"),Fe("merchantUserId","==",t)),ze(Re(G,"userTransactions"),Fe("createdBy","==",t))];for(const o of i)try{const l=(await He(o)).docs.filter(c=>{var f,p;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((p=d.receipt)==null?void 0:p.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await bn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Ie(G,"transactions",e);if((await Kt(a)).exists())console.log("     transactions   "),await bn(a);else{const c=ze(Re(G,"transactions"),Fe("transactionId","==",e)),d=await He(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(p=>bn(p.ref))));const h=ze(Re(G,"transactions"),Fe("originalTransactionId","==",e)),f=await He(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(p=>bn(p.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},Bw={async getToday(t){const e=Ie(G,"dailyStats",t,"today","data"),n=await Kt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Ie(G,"dailyStats",t,"today","data");await tn(n,{...Ma(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Ie(G,"dailyStats",t,"history",e);await tn(r,Ma(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},Iq={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Ue()};return(await Ds(Re(G,"installments"),n)).id},listenByUser(t,e){const n=ze(Re(G,"installments"),Fe("userId","==",t));return ui(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await un(Ie(G,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await bn(Ie(G,"installments",t)),!0}},nf=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:Iq,auditLogService:Tq,dailyReportsArchiveService:CO,dailyStatsService:Bw,merchantWalletService:Yi,profileService:jf,profileServiceExtra:RO,recordAutoTransaction:wq,referralService:$w,sanitizeFirestoreData:Ma,systemSettingsService:PO,telegramNotifier:Eq,transactionService:DE,userDataService:Mr},Symbol.toStringTag,{value:"Module"}));var hl=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(hl||{});const Sq=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},rf=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},bq=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},lG=async(t,e,n,r)=>{try{const s=new Date,i=Sq(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Ie(G,"users",t);if(await un(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},AA=async t=>{try{const e=Ie(G,"users",t);await un(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},cG=async t=>{try{const e=Ie(G,"users",t),n=await Kt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},uG=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},dG=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=bq(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},hG=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ec;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ec||(Ec={}));class Vy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Aq=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},xq=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:Aq(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const _=s(),m=a(h);let v;const E=async()=>(!v&&_ in f?v=typeof f[_]=="function"?v=await f[_]():v=f[_]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),y=(A,b)=>{var P,k;if(m){const O=m==null?void 0:m.methods.find(C=>b===C.name);if(O)return O.rtype==="promise"?C=>n.nativePromise(h,b.toString(),C):(C,B)=>n.nativeCallback(h,b.toString(),C,B);if(A)return(P=A[b])===null||P===void 0?void 0:P.bind(A)}else{if(A)return(k=A[b])===null||k===void 0?void 0:k.bind(A);throw new Vy(`"${h}" plugin is not implemented on ${_}`,Ec.Unimplemented)}},w=A=>{let b;const P=(...k)=>{const O=E().then(C=>{const B=y(C,A);if(B){const te=B(...k);return b=te==null?void 0:te.remove,te}else throw new Vy(`"${h}.${A}()" is not implemented on ${_}`,Ec.Unimplemented)});return A==="addListener"&&(O.remove=async()=>b()),O};return P.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:A,writable:!1,configurable:!1}),P},R=w("addListener"),D=w("removeListener"),L=(A,b)=>{const P=R({eventName:A},b),k=async()=>{const C=await P;D({eventName:A,callbackId:C},b)},O=new Promise(C=>P.then(()=>C({remove:k})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},O},x=new Proxy({},{get(A,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return m?L:R;case"removeListener":return D;default:return w(b)}}});return r[h]=x,c.set(h,{name:h,proxy:x,platforms:new Set([...Object.keys(f),...m?[_]:[]])}),x};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Vy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Rq=t=>t.Capacitor=xq(t),xe=Rq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),mg=xe.registerPlugin;class DO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new xe.Exception(e,Ec.Unimplemented)}unavailable(e="not available"){return new xe.Exception(e,Ec.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const xA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),RA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Pq extends DO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=RA(s).trim(),i=RA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=xA(e.key),r=xA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}mg("CapacitorCookies",{web:()=>new Pq});const Cq=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Dq=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},kq=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,Nq=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Dq(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Oq extends DO{async request(e){const n=Nq(e,e.webFetchExtra),r=kq(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Cq(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}mg("CapacitorHttp",{web:()=>new Oq});const Xo=mg("Preferences",{web:()=>Z(()=>import("./web-DTJv7uRY.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),sf=Object.freeze(Object.defineProperty({__proto__:null,Preferences:Xo},Symbol.toStringTag,{value:"Module"})),Lq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},kO=S.createContext(void 0);function Wa(){const t=S.useContext(kO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Vq=({children:t})=>{var x,A;const[e,n]=S.useState(null),[r,s]=S.useState(null),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,d]=S.useState(!0),h=async b=>{var P,k,O,C,B,te,ee,z,F,q,oe,de,Q,Ce,be,Ve;try{const Ge=Ie(G,"profiles",b);let Se=!1;try{const Qe=await tO(Ge);if(Qe.exists()){const $e=Qe.data(),We={userId:Qe.id,shopId:$e.shopId,role:$e.role,fullName:$e.fullName,phone:$e.phone,shopName:$e.shopName||null,approved:$e.approved,avatarId:$e.avatarId,bridgeLink:$e.bridgeLink||null,bridgeDeviceId:$e.bridgeDeviceId||null,showWithdrawNote:$e.showWithdrawNote!==void 0?!!$e.showWithdrawNote:!0,isReceiptNoteEnabled:$e.isReceiptNoteEnabled!==void 0?!!$e.isReceiptNoteEnabled:!0,smsReadingEnabled:$e.smsReadingEnabled!==void 0?!!$e.smsReadingEnabled:!0,smsAutoRegisterEnabled:$e.smsAutoRegisterEnabled!==void 0?!!$e.smsAutoRegisterEnabled:!1,createdAt:((k=(P=$e.createdAt)==null?void 0:P.toDate)==null?void 0:k.call(P))||new Date,updatedAt:((C=(O=$e.updatedAt)==null?void 0:O.toDate)==null?void 0:C.call(O))||new Date,trialStarted:$e.trialStarted||!1,trialStartDate:(te=(B=$e.trialStartDate)==null?void 0:B.toDate)==null?void 0:te.call(B),trialEndDate:(z=(ee=$e.trialEndDate)==null?void 0:ee.toDate)==null?void 0:z.call(ee),trialExpired:$e.trialExpired||!1};s(We),Se=!0,d(!1)}}catch(Qe){console.log("Cache profile not available:",(Qe==null?void 0:Qe.code)||Qe)}try{if(!Se){const Qe=localStorage.getItem(`profile_cache_${b}`);if(Qe){const $e=JSON.parse(Qe);s($e),Se=!0,d(!1)}}}catch{}if(!Se)for(let Qe=0;Qe<3;Qe++)try{const $e=await Kt(Ge);if($e.exists()){const We=$e.data(),Wt={userId:$e.id,shopId:We.shopId,role:We.role,fullName:We.fullName,phone:We.phone,sim1Number:We.sim1Number||null,sim2Number:We.sim2Number||null,shopName:We.shopName||null,approved:We.approved,avatarId:We.avatarId,bridgeLink:We.bridgeLink||null,bridgeDeviceId:We.bridgeDeviceId||null,showWithdrawNote:We.showWithdrawNote!==void 0?!!We.showWithdrawNote:!0,isReceiptNoteEnabled:We.isReceiptNoteEnabled!==void 0?!!We.isReceiptNoteEnabled:!0,smsReadingEnabled:We.smsReadingEnabled!==void 0?!!We.smsReadingEnabled:!0,smsAutoRegisterEnabled:We.smsAutoRegisterEnabled!==void 0?!!We.smsAutoRegisterEnabled:!1,createdAt:((q=(F=We.createdAt)==null?void 0:F.toDate)==null?void 0:q.call(F))||new Date,updatedAt:((de=(oe=We.updatedAt)==null?void 0:oe.toDate)==null?void 0:de.call(oe))||new Date,trialStarted:We.trialStarted||!1,trialStartDate:(Ce=(Q=We.trialStartDate)==null?void 0:Q.toDate)==null?void 0:Ce.call(Q),trialEndDate:(Ve=(be=We.trialEndDate)==null?void 0:be.toDate)==null?void 0:Ve.call(be),trialExpired:We.trialExpired||!1};s(Wt);try{localStorage.setItem(`profile_cache_${$e.id}`,JSON.stringify(Wt))}catch{}Se=!0,d(!1);break}}catch{}return ui(Ge,async Qe=>{var $e,We,Wt,Dt,Ln,gr,_n,ie;if(Qe.exists()){const U=Qe.data(),Y={userId:Qe.id,shopId:U.shopId,role:U.role,fullName:U.fullName,phone:U.phone,sim1Number:U.sim1Number||null,sim2Number:U.sim2Number||null,shopName:U.shopName||null,approved:U.approved,avatarId:U.avatarId,bridgeLink:U.bridgeLink||null,bridgeDeviceId:U.bridgeDeviceId||null,showWithdrawNote:U.showWithdrawNote!==void 0?!!U.showWithdrawNote:!0,isReceiptNoteEnabled:U.isReceiptNoteEnabled!==void 0?!!U.isReceiptNoteEnabled:!0,smsReadingEnabled:U.smsReadingEnabled!==void 0?!!U.smsReadingEnabled:!0,smsAutoRegisterEnabled:U.smsAutoRegisterEnabled!==void 0?!!U.smsAutoRegisterEnabled:!1,createdAt:((We=($e=U.createdAt)==null?void 0:$e.toDate)==null?void 0:We.call($e))||new Date,updatedAt:((Dt=(Wt=U.updatedAt)==null?void 0:Wt.toDate)==null?void 0:Dt.call(Wt))||new Date,trialStarted:U.trialStarted||!1,trialStartDate:(gr=(Ln=U.trialStartDate)==null?void 0:Ln.toDate)==null?void 0:gr.call(Ln),trialEndDate:(ie=(_n=U.trialEndDate)==null?void 0:_n.toDate)==null?void 0:ie.call(_n),trialExpired:U.trialExpired||!1};s(Y);try{localStorage.setItem(`profile_cache_${Qe.id}`,JSON.stringify(Y))}catch{}Se||(Se=!0,d(!1))}else if(!Se)try{const U=await RO.getByUserId(b);if(U){const Y={userId:b,shopId:U.shopId,role:U.role||"user",fullName:U.fullName||null,phone:U.phone||null,shopName:U.shopName||null,approved:U.approved??!1,avatarId:U.avatarId||void 0,bridgeLink:U.bridgeLink||null,bridgeDeviceId:U.bridgeDeviceId||null,createdAt:Ue(),updatedAt:Ue()};await tn(Ie(G,"profiles",b),Y,{merge:!0}),s({...U,userId:b,createdAt:U.createdAt||new Date,updatedAt:U.updatedAt||new Date})}else await p(b)}catch(U){console.error("Profile migration/create error:",U)}finally{Se=!0,d(!1)}},Qe=>{console.error("Profile listener error:",Qe);try{d(!1)}catch{}})}catch(Ge){return console.error("Error setting up profile listener:",Ge),await p(b),d(!1),()=>{}}},f=async b=>{try{const P=Ie(G,"users",b.uid);(await Kt(P)).exists()?(await un(P,{lastLogin:Ue(),updatedAt:Ue()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",b.uid)):(await tn(P,{email:b.email||"",displayName:b.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ue(),updatedAt:Ue(),lastLogin:Ue()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",b.uid))}catch(P){console.error(" ensureAdminUserDoc error:",P)}},p=async(b,P,k,O,C)=>{var B,te;try{console.log("Creating default profile for user:",b);const ee=$w.generateReferralCode(b);let z=null;const F={userId:b,shopId:"default-shop",role:"user",fullName:P||" ",phone:k||null,shopName:O||null,approved:!1,referralCode:ee,referredBy:C||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!0,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(F),console.log("Created temporary profile:",F);try{const{doc:q,setDoc:oe,serverTimestamp:de}=await Z(async()=>{const{doc:Ve,setDoc:Ge,serverTimestamp:Se}=await Promise.resolve().then(()=>hn);return{doc:Ve,setDoc:Ge,serverTimestamp:Se}},void 0,import.meta.url),{db:Q}=await Z(async()=>{const{db:Ve}=await Promise.resolve().then(()=>Lt);return{db:Ve}},void 0,import.meta.url),Ce={email:((B=At.currentUser)==null?void 0:B.email)||"",displayName:P||" ",phone:k||null,shopName:O||null,isActive:!1,referralCode:ee,referredBy:C||null,createdAt:de(),lastLogin:null,updatedAt:de()};if(console.log("Attempting to add user to admin collection with data:",Ce),await oe(q(Q,"users",b),Ce,{merge:!0}),console.log(" User successfully added to admin collection:",Ce),C)try{const{query:Ve,collection:Ge,where:Se,limit:zt,getDocs:Qe}=await Z(async()=>{const{query:Dt,collection:Ln,where:gr,limit:_n,getDocs:ie}=await Promise.resolve().then(()=>hn);return{query:Dt,collection:Ln,where:gr,limit:_n,getDocs:ie}},void 0,import.meta.url),{db:$e}=await Z(async()=>{const{db:Dt}=await Promise.resolve().then(()=>Lt);return{db:Dt}},void 0,import.meta.url),We=Ve(Ge($e,"users"),Se("referralCode","==",C),zt(1)),Wt=await Qe(We);Wt.empty?console.log(" Referral code not found in users collection:",C):(z=Wt.docs[0].id,await $w.create({referrerId:z,referredUserId:b,referredUserEmail:((te=At.currentUser)==null?void 0:te.email)||"",referralCode:C,status:"completed"}),console.log(" Referral record created successfully for referrer:",z))}catch(Ve){console.error(" Error creating referral record:",Ve)}const be=await Kt(q(Q,"users",b));be.exists()?console.log(" User document verified in Firestore:",be.data()):console.log(" User document not found after creation")}catch(q){console.error(" Error adding user to admin collection:",q)}try{const{addDoc:q,collection:oe,serverTimestamp:de}=await Z(async()=>{const{addDoc:Ge,collection:Se,serverTimestamp:zt}=await Promise.resolve().then(()=>hn);return{addDoc:Ge,collection:Se,serverTimestamp:zt}},void 0,import.meta.url),{db:Q}=await Z(async()=>{const{db:Ge}=await Promise.resolve().then(()=>Lt);return{db:Ge}},void 0,import.meta.url),be=(await q(oe(Q,"shops"),{name:O||" ",ownerId:b,createdAt:de(),updatedAt:de(),isActive:!0})).id;await jf.create({userId:b,shopId:be,role:"user",fullName:" ",phone:null});try{await jf.update(b,{referralCode:ee,referredBy:z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(Ge){console.warn(" Failed to update profile with referral fields:",Ge)}const Ve=await jf.getById(b);Ve&&(s(Ve),console.log("Updated with Firebase profile:",Ve))}catch(q){console.error("Error creating profile:",q),console.log("Using local profile - Firebase unavailable")}}catch(ee){console.error("Error creating default profile:",ee)}};S.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const b=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const P=localStorage.getItem("demoUser"),k=localStorage.getItem("demoProfile");if(P&&k){console.log(" Found demo user in localStorage");try{const C=JSON.parse(P),B=JSON.parse(k);n(C),s(B),clearTimeout(b),d(!1);return}catch(C){console.error("Error parsing demo user data:",C),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const O=E5(At,async C=>{if(console.log(" Auth state changed:",{uid:C==null?void 0:C.uid,email:C==null?void 0:C.email,emailVerified:C==null?void 0:C.emailVerified,timestamp:new Date().toISOString()}),n(C),C){console.log(" User authenticated, starting profile hydration for:",C.uid);try{await Xo.set({key:"current_user_id",value:C.uid}),console.log(" Synced current_user_id to Native:",C.uid)}catch(B){console.error("Failed to sync user ID to native:",B)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(C.uid),y(),f(C)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await Xo.remove({key:"current_user_id"}),await Xo.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(b)});return()=>{clearTimeout(b),O()}},[]),S.useEffect(()=>{const b=async()=>{try{await w(),await y()}catch{}};try{window.addEventListener("app:softRefresh",b)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",b)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=i==null?void 0:i.subscription,P=b==null?void 0:b.endDate,k=P!=null&&P.toDate?P.toDate():P?new Date(P):null;let O=null;const C=async()=>{try{const B=new Date;b&&b.isActive===!0&&k&&!isNaN(k.getTime())&&B>k&&(await AA(e.uid),await y())}catch{}};return C(),O=setInterval(C,36e5),()=>{try{clearInterval(O)}catch{}}},[e==null?void 0:e.uid,(x=i==null?void 0:i.subscription)==null?void 0:x.endDate,(A=i==null?void 0:i.subscription)==null?void 0:A.isActive]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=Mr.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{b==null||b()}catch{}}},[e==null?void 0:e.uid]);const _=async(b,P,k,O,C,B)=>{try{const te=(b||"").trim().toLowerCase(),ee=(P||"").trim();console.log(" Attempting to sign up user:",te);const z=await jS(At,te,ee);console.log(" Sign up successful:",z.user.uid),await p(z.user.uid,k,O,C,B),await f(z.user);try{await h(z.user.uid),await y()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(te){console.error(" Sign up error:",te);let ee="    ";return te.code==="auth/email-already-in-use"?ee="    ":te.code==="auth/weak-password"?ee="   ":te.code==="auth/invalid-email"&&(ee="   "),{error:{...te,message:ee}}}},m=async(b,P)=>{var C;const k=(b||"").trim().toLowerCase(),O=(P||"").trim();try{const B=de=>de.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),te=de=>de.replace(/[-]/g,Q=>String("0123456789"["".indexOf(Q)])).replace(/[-]/g,Q=>String("0123456789"["".indexOf(Q)])),ee=de=>de.replace(/[0-9]/g,Q=>""[Number(Q)]),z=de=>te(B(de));if(console.log(" Attempting to sign in user:",k),k==="test@example.com"&&O==="123456"){console.log(" Demo user login detected");const de={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},Q={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(de)),localStorage.setItem("demoProfile",JSON.stringify(Q)),n(de),s(Q),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let F;const q=[z(O),B(O),ee(B(O))];let oe=null;for(const de of q)try{de!==O&&console.log(" Trying password variant"),F=await g5(At,k,de);break}catch(Q){if(oe=Q,(Q==null?void 0:Q.code)!=="auth/wrong-password"&&(Q==null?void 0:Q.code)!=="auth/invalid-credential")throw Q}if(!F)throw oe||new Error("auth/invalid-credential");console.log(" Sign in successful:",F.user.uid);try{if((await Kt(Ie(G,"deletedUsers",F.user.uid))).exists())return console.log(" User is deleted, signing out"),await $S(At),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(de){console.error("Error checking deleted users:",de)}await f(F.user);try{await h(F.user.uid),await y()}catch{}return{error:null}}catch(B){if(console.error(" Sign in error:",B),k==="test@example.com"&&B.code==="auth/user-not-found"){console.log(" Creating test user...");try{const z=await jS(At,k,O);return console.log(" Test user created:",z.user.uid),await p(z.user.uid," ","01000000000"," "),{error:null}}catch(z){return console.error(" Error creating test user:",z),{error:z}}}let te="    ",ee=B==null?void 0:B.code;if(ee==="auth/invalid-credential")try{const z=await v5(At,((C=B==null?void 0:B.customData)==null?void 0:C.email)||"");Array.isArray(z)&&z.length===0?(ee="auth/user-not-found",te="     "):(ee="auth/wrong-password",te="   ")}catch{te="      "}else ee==="auth/invalid-email"?te="    ":ee==="auth/user-not-found"?te="     ":ee==="auth/wrong-password"?te="   ":ee==="auth/too-many-requests"&&(te="      ");return{error:{...B,code:ee,message:te}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await $S(At);try{await Xo.remove({key:"selected_wallet_id"}),await Xo.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const k=(()=>{try{const O=typeof window<"u"?window:null,C=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),B=typeof window<"u"&&window.location.protocol==="file:",te=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return C||B||te||typeof import.meta<"u"&&Lq&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(k)}catch{window.location.href=k}}catch(b){console.error("Sign out error:",b)}},E=async b=>{try{return await m5(At,b),{error:null}}catch(P){console.error("Reset password error:",P);let k="        ";return P.code==="auth/user-not-found"?k="     ":P.code==="auth/invalid-email"&&(k="   "),{error:{...P,message:k}}}},y=async()=>{var b,P;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{const k=Ie(G,"users",e.uid);try{const C=await Kt(k);if(C.exists()){const B=C.data();o(B);const te=((b=B==null?void 0:B.branchPackage)==null?void 0:b.status)==="active";let ee=!1;te?ee=!0:ee=rf(B.subscription),l(ee)}}catch{}return ui(k,async C=>{var B,te,ee,z,F,q,oe,de;if(C.exists()){const Q=C.data();o(Q),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:Q.subscription,subscriptionExists:!!Q.subscription,planType:(B=Q.subscription)==null?void 0:B.planType,isActive:(te=Q.subscription)==null?void 0:te.isActive,startDate:(ee=Q.subscription)==null?void 0:ee.startDate,endDate:(z=Q.subscription)==null?void 0:z.endDate,activatedBy:(F=Q.subscription)==null?void 0:F.activatedBy,activatedAt:(q=Q.subscription)==null?void 0:q.activatedAt,isOnFreeTrial:Q.isOnFreeTrial,freeTrialEndDate:Q.freeTrialEndDate,branchPackageStatus:(oe=Q==null?void 0:Q.branchPackage)==null?void 0:oe.status});const Ce=((de=Q==null?void 0:Q.branchPackage)==null?void 0:de.status)==="active";let be=!1;Ce?(console.log(" Branch package is active, granting access"),be=!0):be=rf(Q.subscription),l(be),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:be,isOnFreeTrial:Q.isOnFreeTrial,hasActiveBranchPackage:Ce,reason:Ce?"Branch package active":Q.subscription?Q.subscription.isActive?Q.subscription.planType==="lifetime"?"Lifetime plan":Q.subscription.endDate?new Date>new Date(Q.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const Ve=Q.subscription,Ge=Ve==null?void 0:Ve.planType,Se=Ve==null?void 0:Ve.endDate,zt=Se!=null&&Se.toDate?Se.toDate():Se?new Date(Se):null,Qe=new Date;Ve&&Ve.isActive===!0&&zt&&!isNaN(zt.getTime())&&Qe>zt&&(await AA(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:Ge,endDate:zt}))}catch(Ve){console.warn("Failed to auto-deactivate expired subscription:",Ve)}}},C=>{console.error(" Subscription listener error:",C),(async()=>{var B;try{const te=await Kt(k);if(te.exists()){const ee=te.data();o(ee);const z=((B=ee==null?void 0:ee.branchPackage)==null?void 0:B.status)==="active";let F=!1;z?F=!0:F=rf(ee.subscription),l(F)}}catch{}})()})}catch(k){console.error("Error setting up subscription listener:",k);try{const O=await Kt(Ie(G,"users",e.uid));if(O.exists()){const C=O.data();o(C);const B=((P=C==null?void 0:C.branchPackage)==null?void 0:P.status)==="active";let te=!1;B?te=!0:te=rf(C.subscription),l(te)}}catch{}}},w=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await y()}catch(b){console.error("Error refreshing profile:",b)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:_,signIn:m,signOut:v,resetPassword:E,updateUserProfile:async b=>{if(e)try{const P={updatedAt:Ue()};if(b.fullName!==void 0&&(P.fullName=b.fullName),b.phone!==void 0&&(P.phone=b.phone),b.sim1Number!==void 0){const k=(b.sim1Number||"").trim();P.sim1Number=k.length?k:null}if(b.sim2Number!==void 0){const k=(b.sim2Number||"").trim();P.sim2Number=k.length?k:null}if(b.bridgeLink!==void 0){const k=(b.bridgeLink||"").trim();P.bridgeLink=k.length?k:null}if(b.bridgeDeviceId!==void 0){const k=(b.bridgeDeviceId||"").trim();P.bridgeDeviceId=k.length?k:null}b.showWithdrawNote!==void 0&&(P.showWithdrawNote=!!b.showWithdrawNote),b.isReceiptNoteEnabled!==void 0&&(P.isReceiptNoteEnabled=!!b.isReceiptNoteEnabled),b.smsReadingEnabled!==void 0&&(P.smsReadingEnabled=!!b.smsReadingEnabled),b.smsAutoRegisterEnabled!==void 0&&(P.smsAutoRegisterEnabled=!!b.smsAutoRegisterEnabled),await un(Ie(G,"profiles",e.uid),P),await h(e.uid)}catch(P){console.error("Error updating user profile:",P)}},updateAvatarId:async b=>{if(e)try{await un(Ie(G,"profiles",e.uid),{avatarId:b,updatedAt:Ue()}),await h(e.uid)}catch(P){console.error("Error updating avatarId:",P)}},refreshProfile:w,checkSubscriptionStatus:y};return I.jsx(kO.Provider,{value:L,children:t})};function Mq(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var gg="Checkbox",[Fq]=bc(gg),[Uq,kE]=Fq(gg);function jq(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,p]=G_({prop:n,defaultProp:s??!1,onChange:l,caller:gg}),[_,m]=S.useState(null),[v,E]=S.useState(null),y=S.useRef(!1),w=_?!!o||!!_.closest("form"):!0,R={checked:f,disabled:i,setChecked:p,control:_,setControl:m,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:fo(s)?!1:s,isFormControl:w,bubbleInput:v,setBubbleInput:E};return I.jsx(Uq,{scope:e,...R,children:$q(h)?h(R):r})}var NO="CheckboxTrigger",OO=S.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:_}=kE(NO,t),m=kn(s,d),v=S.useRef(l);return S.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const y=()=>h(v.current);return E.addEventListener("reset",y),()=>E.removeEventListener("reset",y)}},[i,h]),I.jsx(Yt.button,{type:"button",role:"checkbox","aria-checked":fo(l)?"mixed":l,"aria-required":c,"data-state":UO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:m,onKeyDown:xt(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:xt(n,E=>{h(y=>fo(y)?!0:!y),_&&p&&(f.current=E.isPropagationStopped(),f.current||E.stopPropagation())})})});OO.displayName=NO;var NE=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return I.jsx(jq,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>I.jsxs(I.Fragment,{children:[I.jsx(OO,{...h,ref:e,__scopeCheckbox:n}),f&&I.jsx(FO,{__scopeCheckbox:n})]})})});NE.displayName=gg;var LO="CheckboxIndicator",VO=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=kE(LO,n);return I.jsx($a,{present:r||fo(i.checked)||i.checked===!0,children:I.jsx(Yt.span,{"data-state":UO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});VO.displayName=LO;var MO="CheckboxBubbleInput",FO=S.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:p}=kE(MO,t),_=kn(n,p),m=Mq(i),v=Y1(r);S.useEffect(()=>{const y=f;if(!y)return;const w=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(w,"checked").set,L=!s.current;if(m!==i&&D){const x=new Event("click",{bubbles:L});y.indeterminate=fo(i),D.call(y,fo(i)?!1:i),y.dispatchEvent(x)}},[f,m,i,s]);const E=S.useRef(fo(i)?!1:i);return I.jsx(Yt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:_,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});FO.displayName=MO;function $q(t){return typeof t=="function"}function fo(t){return t==="indeterminate"}function UO(t){return fo(t)?"indeterminate":t?"checked":"unchecked"}const jO=S.forwardRef(({className:t,...e},n)=>I.jsx(NE,{ref:n,className:Nn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:I.jsx(VO,{className:Nn("flex items-center justify-center text-current"),children:I.jsx(AF,{className:"h-4 w-4"})})}));jO.displayName=NE.displayName;const nm=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(!0),{signIn:d,user:h,checkSubscriptionStatus:f,loading:p}=Wa(),_=Cc();S.useEffect(()=>{try{h&&!p&&_("/user/dashboard")}catch{}},[h,p,_]),S.useEffect(()=>{try{const y=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;y&&e(y)}catch{}try{const y=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;y==="true"?c(!0):y==="false"&&c(!1)}catch{}(async()=>{var y,w;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const R=await((w=(y=navigator.credentials).get)==null?void 0:w.call(y,{password:!0,mediation:"optional"}));R&&R.type==="password"&&(R.id&&e(R.id),R.password&&r(R.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const R=sessionStorage.getItem("cashy:rememberedPassword");R&&!n&&r(R)}catch{}}catch{}})()},[]);const m=async y=>{if(y.preventDefault(),o){jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){jn.error("   .      .");return}const w=(t||"").trim().toLowerCase(),R=(n||"").trim();if(console.log("    :",{email:w,password:"***"}),!t||!n){jn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(w)){jn.error("    ");return}a(!0);try{try{await _5(At,l?yD:S5);try{window.localStorage.setItem("cashy:rememberLogin",l?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:D}=await d(w,R);if(console.log(" SignIn result:",{error:D}),D){console.error("    :",D);const L=D==null?void 0:D.code;L==="auth/user-not-found"?jn.error("     "):L==="auth/wrong-password"?jn.error("   "):L==="auth/invalid-credential"?jn.error("      "):L==="auth/too-many-requests"?jn.error("      "):jn.error((D==null?void 0:D.message)||"    ")}else{console.log("    !"),jn.success("   !");try{if(l&&navigator.credentials&&window.PasswordCredential){const L=new window.PasswordCredential({id:w,name:w,password:R});await navigator.credentials.store(L)}if(l)try{sessionStorage.setItem("cashy:rememberedPassword",R)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(D){console.error("   :",D),jn.error("   ")}finally{a(!1)}},v=y=>{if(o){y.preventDefault(),y.stopPropagation(),jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){y.preventDefault(),y.stopPropagation(),jn.error("   .      .");return}t||jn.error("   "),n||jn.error("   ");const w=(t||"").trim().toLowerCase();w&&!/^\S+@\S+\.\S+$/.test(w)&&jn.error("    ")},E=()=>{_("/user/forgot-password")};return S.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const y=document.documentElement,w=document.body,R=y.style.overflow,D=w.style.overflow,L=y.style.overscrollBehaviorY,x=w.style.overscrollBehaviorY;return y.style.overflow="hidden",w.style.overflow="hidden",y.style.overscrollBehaviorY="none",w.style.overscrollBehaviorY="none",()=>{y.style.overflow=R||"",w.style.overflow=D||"",y.style.overscrollBehaviorY=L||"",w.style.overscrollBehaviorY=x||""}},[]),I.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:I.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:I.jsx(UF,{className:"w-10 h-10 text-white"})}),I.jsx("div",{className:"flex items-center justify-center mb-2",children:I.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),I.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),I.jsx("p",{className:"text-white/80",children:"    "})]}),I.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[I.jsxs("form",{onSubmit:m,className:"space-y-6",autoComplete:"on",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),I.jsxs("div",{className:"relative",children:[I.jsx(VI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),I.jsx(tw,{id:"username",type:"email",placeholder:"  ",value:t,onChange:y=>{const w=y.target.value;e(w);try{window.localStorage.setItem("cashy:lastEmail",w)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),I.jsxs("div",{className:"relative",children:[I.jsx(NF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),I.jsx(tw,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:y=>r(y.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),I.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?I.jsx(PF,{className:"w-5 h-5"}):I.jsx(CF,{className:"w-5 h-5"})})]}),I.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[I.jsx(jO,{id:"rememberLogin",checked:l,onCheckedChange:y=>c(!!y)}),I.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),I.jsx("div",{className:"flex justify-end",children:I.jsxs(Ho,{type:"button",variant:"ghost",size:"sm",onClick:E,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[I.jsx(VI,{className:"w-4 h-4 ml-1"}),"  "]})}),I.jsx("button",{type:"submit",onClick:v,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?I.jsxs("div",{className:"flex items-center justify-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):I.jsxs("div",{className:"flex items-center justify-center",children:[I.jsx(IF,{className:"w-5 h-5 ml-2"})," "]})})]}),I.jsxs("div",{className:"mt-6 text-center space-y-3",children:[I.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",I.jsx(k6,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),I.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",I.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",I.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),I.jsx("div",{className:"mt-6 text-center",children:I.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},Bq=Object.freeze(Object.defineProperty({__proto__:null,default:nm},Symbol.toStringTag,{value:"Module"})),zq=()=>{const t=Cc(),e=Ms(),{signOut:n,user:r,userSubscription:s}=Wa(),{toast:i}=H_(),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=[{id:"home",label:"",icon:kF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:DF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:SF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:MI,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:TF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:ay,path:"/transactions"},{id:"settings",label:"",icon:FI,path:"/profile-settings"}],h=[{id:"installment",label:"",icon:bF,action:()=>{var v;a(!1);const m=(v=s==null?void 0:s.subscription)==null?void 0:v.planType;if(m===hl.TAHWEELA||m===hl.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:jF,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:RF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:MF,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:ay,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:FF,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:MI,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:xF,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:OF,action:()=>{a(!1);const v=`   
  : ${(r==null?void 0:r.email)||" "}`,E=encodeURIComponent(v);window.open(`https://wa.me/201000392539?text=${E}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:LI,action:async()=>{a(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],f=[{id:"shop-expenses-settings",label:" ",icon:ay,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:FI,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:LI,action:async()=>{c(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],p=(m,v,E,y)=>{var x;const R=((x=s==null?void 0:s.subscription)==null?void 0:x.planType)===hl.TAHWEELA,D=A=>["/user/dashboard","/profile-settings"].includes(A),L=A=>A==="debts";if(E){if(R&&!L(y)&&!D(m)){i({title:"  ",description:"      .",variant:"destructive"});return}E()}else if(v&&m==="/add"){if(R){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!v){if(R&&!D(m)){i({title:"  ",description:"      .",variant:"destructive"});return}t(m)}},_=m=>e.pathname===m;return I.jsxs("div",{className:"mobile-bottom-nav",children:[o&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),I.jsx("div",{className:"floating-actions-container",children:h.map((m,v)=>I.jsxs("div",{className:"floating-action-button",onClick:()=>{var y;if(((y=s==null?void 0:s.subscription)==null?void 0:y.planType)===hl.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}m.action()},style:{"--action-color":m.color,"--animation-delay":`${v*.1}s`},children:[I.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:I.jsx(m.icon,{className:"action-icon"})}),I.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),l&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),I.jsx("div",{className:"floating-actions-container",children:f.map((m,v)=>I.jsxs("div",{className:"floating-action-button",onClick:()=>{var w;const E=(w=s==null?void 0:s.subscription)==null?void 0:w.planType,y=new Set(["logout","profile-settings"]);if(E===hl.TAHWEELA&&!y.has(m.id)){i({title:"  ",description:"      .",variant:"destructive"});return}m.action()},style:{"--action-color":m.color,"--animation-delay":`${v*.1}s`},children:[I.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:I.jsx(m.icon,{className:"action-icon"})}),I.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),I.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(m=>{const v=m.icon,E=_(m.path);return I.jsxs("button",{onClick:()=>p(m.path,m.isSpecial,m.action,m.id),className:`mobile-nav-item ${E?"active":""} ${m.isSpecial?"special":""}`,type:"button","aria-label":m.label,children:[I.jsx("div",{className:`nav-icon-container ${m.isSpecial?"special-icon":""} ${m.isSpecial&&m.id==="add"&&o?"special-open":""}`,children:I.jsx(v,{className:`nav-icon ${E?"active-icon":""} ${m.isSpecial?"special-icon-svg":""} ${m.isSpecial&&m.id==="add"&&o?"rotated":""} ${m.isSpecial&&m.id==="settings"&&l?"rotated":""}`})}),!m.isSpecial&&I.jsx("span",{className:`nav-label ${E?"active-label":""}`,children:m.label})]},m.id)})})]})};var Sx,bx;const ia=(bx=(Sx=import.meta)==null?void 0:Sx.env)==null?void 0:bx.VITE_ANDROID_DOWNLOAD_URL;var Ax,xx;const oa=(xx=(Ax=import.meta)==null?void 0:Ax.env)==null?void 0:xx.VITE_PC_DOWNLOAD_URL;var Rx,Px;const aa=(Px=(Rx=import.meta)==null?void 0:Rx.env)==null?void 0:Px.VITE_PC32_DOWNLOAD_URL;var Cx,Dx;const la=(Dx=(Cx=import.meta)==null?void 0:Cx.env)==null?void 0:Dx.VITE_ANDROID_VERSION;var kx,Nx;const ca=(Nx=(kx=import.meta)==null?void 0:kx.env)==null?void 0:Nx.VITE_PC_VERSION;var Ox,Lx;const ua=(Lx=(Ox=import.meta)==null?void 0:Ox.env)==null?void 0:Lx.VITE_PC32_VERSION;function sn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function Wq(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const bo=["siteContent","appDownloads"],rm=["siteContent","desktop_updates"],sm=["siteContent","android_updates"],Fd="appDownloadsCache";function qq(){try{const e=localStorage.getItem(Fd);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||ia,pcUrl:(n==null?void 0:n.pcUrl)||oa,pc32Url:(n==null?void 0:n.pc32Url)||aa,androidVersion:(n==null?void 0:n.androidVersion)||la,pcVersion:(n==null?void 0:n.pcVersion)||ca,pc32Version:(n==null?void 0:n.pc32Version)||ua,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=sn(r.pcUrl)),r.androidVersion||(r.androidVersion=sn(r.androidUrl)),r.pc32Version||(r.pc32Version=sn(r.pc32Url)),r}}catch{}const t={androidUrl:ia,pcUrl:oa,pc32Url:aa,androidVersion:la,pcVersion:ca,pc32Version:ua};return t.pcVersion||(t.pcVersion=sn(t.pcUrl)),t.androidVersion||(t.androidVersion=sn(t.androidUrl)),t.pc32Version||(t.pc32Version=sn(t.pc32Url)),t}async function Hq(){try{const t=await Kt(Ie(G,bo[0],bo[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(Fd,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||ia,pcUrl:(n==null?void 0:n.pcUrl)||oa,pc32Url:(n==null?void 0:n.pc32Url)||aa,androidVersion:(n==null?void 0:n.androidVersion)||la,pcVersion:(n==null?void 0:n.pcVersion)||ca,pc32Version:(n==null?void 0:n.pc32Version)||ua,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=sn(r.pcUrl)),r.androidVersion||(r.androidVersion=sn(r.androidUrl)),r.pc32Version||(r.pc32Version=sn(r.pc32Url)),r}const e={androidUrl:ia,pcUrl:oa,pc32Url:aa,androidVersion:la,pcVersion:ca,pc32Version:ua};return e.pcVersion||(e.pcVersion=sn(e.pcUrl)),e.androidVersion||(e.androidVersion=sn(e.androidUrl)),e.pc32Version||(e.pc32Version=sn(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(Fd);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||ia,pcUrl:(i==null?void 0:i.pcUrl)||oa,pc32Url:(i==null?void 0:i.pc32Url)||aa,androidVersion:(i==null?void 0:i.androidVersion)||la,pcVersion:(i==null?void 0:i.pcVersion)||ca,pc32Version:(i==null?void 0:i.pc32Version)||ua,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=sn(o.pcUrl)),o.androidVersion||(o.androidVersion=sn(o.androidUrl)),o.pc32Version||(o.pc32Version=sn(o.pc32Url)),o}}catch{}const r={androidUrl:ia,pcUrl:oa,pc32Url:aa,androidVersion:la,pcVersion:ca,pc32Version:ua};return r.pcVersion||(r.pcVersion=sn(r.pcUrl)),r.androidVersion||(r.androidVersion=sn(r.androidUrl)),r.pc32Version||(r.pc32Version=sn(r.pc32Url)),r}}function Kq(t){try{const e=Ie(G,bo[0],bo[1]);return ui(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||ia,pcUrl:(s==null?void 0:s.pcUrl)||oa,pc32Url:(s==null?void 0:s.pc32Url)||aa,androidVersion:(s==null?void 0:s.androidVersion)||la,pcVersion:(s==null?void 0:s.pcVersion)||ca,pc32Version:(s==null?void 0:s.pc32Version)||ua,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=sn(i.pcUrl)),i.androidVersion||(i.androidVersion=sn(i.androidUrl)),i.pc32Version||(i.pc32Version=sn(i.pc32Url));try{localStorage.setItem(Fd,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(Fd);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function Gq(t,e,n,r,s,i=12e4){const o=AO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=lq(o,l);return new Promise((d,h)=>{const f=oq(c,t);let p=!1;const _=setTimeout(()=>{p=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",m=>{const v=Math.round(m.bytesTransferred/m.totalBytes*100);s&&s(v)},m=>{clearTimeout(_),h(m)},async()=>{try{if(clearTimeout(_),p)return;const m=await aq(c),v={updatedAt:Ue(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=m,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=m,r&&(v.pcVersion=r)):(v.pc32Url=m,r&&(v.pc32Version=r));const E=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=tn(Ie(G,bo[0],bo[1]),v,{merge:!0});let w=!1;const R=new Promise(D=>setTimeout(()=>{w=!0,D()},E));try{await Promise.race([y,R])}catch(D){console.warn(" Firestore write error, proceeding with URL only:",D)}w&&console.warn(" Firestore update timed out;             ."),d(m)}catch(m){h(m)}})})}async function Qq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ue(),updatedBy:e||"admin"};await tn(Ie(G,bo[0],bo[1]),r,{merge:!0})}async function Yq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ue(),updatedBy:e||"admin"};await tn(Ie(G,rm[0],rm[1]),r,{merge:!0})}function $O(t){try{const e=Ie(G,rm[0],rm[1]);return ui(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function BO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function Jq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ue(),updatedBy:e||"admin"};await tn(Ie(G,sm[0],sm[1]),r,{merge:!0})}function Xq(t){try{const e=Ie(G,sm[0],sm[1]);return ui(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const Zq=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:Hq,getCachedOrEnvAppDownloads:qq,listenAndroidUpdates:Xq,listenAppDownloads:Kq,listenDesktopUpdates:$O,resolveDownloadUrl:Wq,selectDesktopUrl:BO,setAndroidUpdateInfo:Jq,setAppDownloadLinks:Qq,setDesktopUpdateInfo:Yq,uploadAppBinaryResumable:Gq},Symbol.toStringTag,{value:"Module"})),eH=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=j.useState(!1),[s,i]=j.useState(!1),[o,a]=j.useState(!1),[l,c]=j.useState(0),[d,h]=j.useState(""),[f,p]=j.useState(!1),_=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(D){console.warn("failed to minimize",D)}},m=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(D){console.warn("failed to close",D)}},v=async()=>{if(!f){p(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>p(!1),600);return}try{window.location.reload()}catch{}}catch(D){console.warn("failed to soft refresh",D),p(!1)}}};if(j.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(D=>{const L=(D==null?void 0:D.percent)==null?0:Number(D.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(D){console.warn("update init failed",D)}},[e,t]),j.useEffect(()=>{const D=$O(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const A=BO({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(A)}});return()=>{try{D()}catch{}}},[]),!e)return null;const[y,w]=j.useState(!1),R=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),w(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),w(!0))}catch(D){console.warn("window toggle failed",D)}};return I.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[I.jsx("button",{type:"button","aria-label":"",title:"",onClick:m,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:I.jsx(X_,{className:"w-5 h-5"})}),I.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:I.jsx(A1,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),I.jsx("button",{type:"button","aria-label":"",title:"",onClick:_,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:I.jsx(LF,{className:"w-5 h-5"})}),I.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:R,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:I.jsx(VF,{className:"w-5 h-5"})})]})},zw=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=S.useState(`${n}logo.svg`),[i,o]=S.useState(0),a=S.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return I.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:I.jsxs("div",{className:"flex flex-col items-center justify-center",children:[I.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),I.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},PA=mg("AppLauncher",{web:()=>Z(()=>import("./web-CwYSDaHQ.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function tH(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{xe&&xe.getPlatform()!=="web"&&(PA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{xe&&xe.getPlatform()!=="web"&&PA.openUrl({url:n})}catch{}}}function zO(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function nH(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?zO(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function fG(t,e,n){const r=zO(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function rH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function sH(t){const e=rH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function pG(t,e,n){const r=nH(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=sH(t||e);tH(r,s)}async function iH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function OE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function oH(t,e,n=0){const r=OE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const im=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:OE,calculateProfit:oH},Symbol.toStringTag,{value:"Module"})),aH=t=>t==="withdraw"||t==="receive"?"receive":"send",lH=async t=>{if(!t)return null;const e=ze(Re(G,"transactions"),Fe("reference","==",t),ho(1)),n=await He(e);return n.empty?null:n.docs[0].id},cH=async t=>{var e;try{const n=await Xo.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return HO(t||((e=At.currentUser)==null?void 0:e.uid)||"")||null},My=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await Yi.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},WO=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await lH(t.reference);if(e)return{id:e,duplicate:!0};const n=aH(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await My(t.receiverMsisdn);if(o||(o=await My(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await My(a))}r=o||await cH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await DE.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await iH(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=OE(t.amount,n);await Mr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},$f=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},qO=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=At.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(_=>$f(_)).filter(_=>!!_):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=_=>String(_||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(_=>({walletId:String((_==null?void 0:_.id)||""),msisdn:$f(String((_==null?void 0:_.phone)||(_==null?void 0:_.msisdn)||"")),isDefault:!!(_!=null&&_.isDefault)})).filter(_=>_.walletId&&_.msisdn):[],h=(await Yi.getByMerchantId(r)||[]).map(_=>({walletId:String((_==null?void 0:_.id)||""),msisdn:$f(String((_==null?void 0:_.msisdn)||"")),isDefault:!!(_!=null&&_.isDefault)})).filter(_=>_.walletId&&_.msisdn),f=[...c,...h],p=new Map;for(const _ of s){const m=l(_);for(const v of f){const E=l(v.msisdn);if(v.msisdn===_){p.set(v.walletId,v.msisdn);continue}if(E.slice(-5)===m.slice(-5)){p.set(v.walletId,v.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",p.size)}catch{}if(p.size===1){const[_,m]=Array.from(p.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:_,msisdn:m})}catch{}return{walletId:_,msisdn:m}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function uH(t,e){try{const n=i=>$f(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function dH(t){var e;try{const n=t.userId||((e=At.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await qO(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");return a&&o[a]&&o[a].walletId?{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")}:l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId?{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")}:null}catch{return null}}function hH(t){var e;try{const r=`simWalletBindings_${t.userId||((e=At.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const fH=()=>{var n,r;const t=(r=(n=import.meta)==null?void 0:n.env)==null?void 0:r.VITE_CLOUDFLARE_SMS_WEBHOOK_URL;return t||"https://frosty-sun-0baf.alkaptin2030.workers.dev/"},HO=t=>{var e,n;try{const r=t||((e=At.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function KO(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||{};try{console.log(" APP RECEIVED SMS ",r)}catch{}const s=String(r.text||""),i=String(r.sender||r.msisdn||""),o=((n=At.currentUser)==null?void 0:n.uid)||"",a=HO(o)||"",l=void 0,c=fH();if(!s||!o||!a)return;const d=new Date().toISOString().slice(0,16).replace("T"," ");try{await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,sender:i,timestamp:d,walletId:a,userId:o,shopId:l})})}catch{}}catch{}};return window.addEventListener("mobileSmsReceived",t),()=>{window.removeEventListener("mobileSmsReceived",t)}}const bl=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:hH,detectWalletFromSim:uH,identifyWalletBySim:qO,initMobileSmsBridge:KO,processMobileTransactionNotification:WO,resolveWalletBySimOrSlot:dH},Symbol.toStringTag,{value:"Module"})),pH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},mH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},gH=()=>{var t,e;try{const n=((t=At.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},yH=()=>{var t;try{const e=((t=At.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},vH=async(t,e)=>{var w;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(s.includes("vodafone")||i.includes("vodafone")))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=pH(n),d=mH(n);if(!c||c<=0)return;const h=((w=At.currentUser)==null?void 0:w.uid)||"",f=gH()||void 0,p=yH()||"",_=f||"default-line";if(!h||!f||!p)return;const m=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,v=`VF-${btoa(unescape(encodeURIComponent(m))).slice(0,24)}`,E=a?"withdraw":l?"transfer":"withdraw",y={type:E,amount:c,provider:"vodafone_cash",shopId:p,lineId:_,walletId:f,senderMsisdn:E==="transfer"&&d||void 0,receiverMsisdn:E==="withdraw"&&d||void 0,reference:v,createdBy:h,merchantUserId:h,note:"  "};try{await WO(y)}catch{}},Xr={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Mr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Mr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Mr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=Xr.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=Xr.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Mr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=Xr.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=Xr.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=Xr.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Mr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},wH=Xr,mG=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:wH,reportsService:Xr},Symbol.toStringTag,{value:"Module"})),om={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Ie(G,"walletLimits",t),s={updatedAt:Ue(),ownerId:(n=At.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await tn(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Ie(G,"walletLimits",t);try{const s=await Kt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||pt.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:pt.now()};return await tn(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Ue(),ownerId:(e=At.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Ie(G,"walletLimits",t);return await tn(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Ue(),updatedAt:Ue(),ownerId:(e=At.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Ie(G,"walletLimits",t);return await tn(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Ue(),updatedAt:Ue(),ownerId:(e=At.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Ie(G,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Ue()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await tn(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=Ie(G,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:Ue()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await tn(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Ie(G,"walletLimits",t);return await tn(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Ue(),lastMonthlyReset:Ue(),updatedAt:Ue(),ownerId:(e=At.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},Ww=Object.freeze(Object.defineProperty({__proto__:null,default:om,walletDailyLimitsService:om},Symbol.toStringTag,{value:"Module"}));class _H{constructor(){Cg(this,"intervalId",null);Cg(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=At.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await Bw.getToday(n);await Bw.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await Xr.syncReportsDataFromFirebase(e);const n=Xr.getReportsData(e);if(!n.lastDailyResetDate||!Xr.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Mr.getUserTransactions(e),l=y=>{const w=String(y||"").toLowerCase();return["completed","confirmed","success"].includes(w)?"completed":["failed","error"].includes(w)?"failed":["cancelled","canceled"].includes(w)?"cancelled":"pending"},c=(a||[]).filter(y=>{var R,D;const w=(R=y==null?void 0:y.createdAt)!=null&&R.toDate?y.createdAt.toDate():(y==null?void 0:y.createdAt)instanceof Date?y.createdAt:new Date(y==null?void 0:y.createdAt);return((D=w==null?void 0:w.toDateString)==null?void 0:D.call(w))===o&&l(y==null?void 0:y.status)==="completed"}),d=c.length,h=c.reduce((y,w)=>y+Number(w.amount||0),0),f=y=>{const w=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return w==="withdraw"||w==="withdrawal"||w==="receive"},p=y=>{const w=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return w==="send"||w==="transfer"},_=c.filter(f).reduce((y,w)=>{const R=w.withdrawnAmount!==void 0?Number(w.withdrawnAmount):Number(w.amount||0);return y+R},0),m=c.filter(p).reduce((y,w)=>{const R=w.sentAmount!==void 0?Number(w.sentAmount):Number(w.amount||0);return y+R},0),v=c.reduce((y,w)=>y+Number(Xr.calculateTransactionProfit(w)||0),0),E=new Date(i).toISOString().slice(0,10);await CO.add({userId:e,reportDate:E,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(_.toFixed(2)),totalSent:Number(m.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",E)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await Yi.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await om.resetDailyLimits(i)}catch{}if(r)try{await om.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const CA=new _H,Fy=768;function EH(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Fy-1}px)`),r=()=>{e(window.innerWidth<Fy)};return n.addEventListener("change",r),e(window.innerWidth<Fy),()=>n.removeEventListener("change",r)},[]),!!t}function TH(){const[t,e]=S.useState("default"),[n,r]=S.useState(!1);return S.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const GO=S.createContext(void 0);function IH({children:t}){const{profile:e,user:n,loading:r}=Wa(),[s,i]=S.useState(null),[o,a]=S.useState(null),[l,c]=S.useState(!0);S.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),S.useEffect(()=>{const h=()=>{const p=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const _=localStorage.getItem(p);i(_||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=p=>{const _=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!p.key||p.key!==_))try{const m=localStorage.getItem(_);i(m||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return I.jsx(GO.Provider,{value:d,children:t})}function SH(){const t=S.useContext(GO);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var Uy="focusScope.autoFocusOnMount",jy="focusScope.autoFocusOnUnmount",DA={bubbles:!1,cancelable:!0},bH="FocusScope",QO=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=ks(s),d=ks(i),h=S.useRef(null),f=kn(e,m=>l(m)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let m=function(w){if(p.paused||!a)return;const R=w.target;a.contains(R)?h.current=R:Ni(h.current,{select:!0})},v=function(w){if(p.paused||!a)return;const R=w.relatedTarget;R!==null&&(a.contains(R)||Ni(h.current,{select:!0}))},E=function(w){if(document.activeElement===document.body)for(const D of w)D.removedNodes.length>0&&Ni(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const y=new MutationObserver(E);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,p.paused]),S.useEffect(()=>{if(a){NA.add(p);const m=document.activeElement;if(!a.contains(m)){const E=new CustomEvent(Uy,DA);a.addEventListener(Uy,c),a.dispatchEvent(E),E.defaultPrevented||(AH(DH(YO(a)),{select:!0}),document.activeElement===m&&Ni(a))}return()=>{a.removeEventListener(Uy,c),setTimeout(()=>{const E=new CustomEvent(jy,DA);a.addEventListener(jy,d),a.dispatchEvent(E),E.defaultPrevented||Ni(m??document.body,{select:!0}),a.removeEventListener(jy,d),NA.remove(p)},0)}}},[a,c,d,p]);const _=S.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,E=document.activeElement;if(v&&E){const y=m.currentTarget,[w,R]=xH(y);w&&R?!m.shiftKey&&E===R?(m.preventDefault(),n&&Ni(w,{select:!0})):m.shiftKey&&E===w&&(m.preventDefault(),n&&Ni(R,{select:!0})):E===y&&m.preventDefault()}},[n,r,p.paused]);return I.jsx(Yt.div,{tabIndex:-1,...o,ref:f,onKeyDown:_})});QO.displayName=bH;function AH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ni(r,{select:e}),document.activeElement!==n)return}function xH(t){const e=YO(t),n=kA(e,t),r=kA(e.reverse(),t);return[n,r]}function YO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function kA(t,e){for(const n of t)if(!RH(n,{upTo:e}))return n}function RH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function PH(t){return t instanceof HTMLInputElement&&"select"in t}function Ni(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&PH(t)&&e&&t.select()}}var NA=CH();function CH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=OA(t,e),t.unshift(e)},remove(e){var n;t=OA(t,e),(n=t[0])==null||n.resume()}}}function OA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function DH(t){return t.filter(e=>e.tagName!=="A")}var $y=0;function kH(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??LA()),document.body.insertAdjacentElement("beforeend",t[1]??LA()),$y++,()=>{$y===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),$y--}},[])}function LA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ts=function(){return Ts=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ts.apply(this,arguments)};function JO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function NH(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Bf="right-scroll-bar-position",zf="width-before-scroll-bar",OH="with-scroll-bars-hidden",LH="--removed-body-scroll-bar-size";function By(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function VH(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var MH=typeof window<"u"?S.useLayoutEffect:S.useEffect,VA=new WeakMap;function FH(t,e){var n=VH(null,function(r){return t.forEach(function(s){return By(s,r)})});return MH(function(){var r=VA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||By(a,null)}),i.forEach(function(a){s.has(a)||By(a,o)})}VA.set(n,t)},[t]),n}function UH(t){return t}function jH(t,e){e===void 0&&(e=UH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function $H(t){t===void 0&&(t={});var e=jH(null);return e.options=Ts({async:!0,ssr:!1},t),e}var XO=function(t){var e=t.sideCar,n=JO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Ts({},n))};XO.isSideCarExport=!0;function BH(t,e){return t.useMedium(e),XO}var ZO=$H(),zy=function(){},yg=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:zy,onWheelCapture:zy,onTouchMoveCapture:zy}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,_=t.noIsolation,m=t.inert,v=t.allowPinchZoom,E=t.as,y=E===void 0?"div":E,w=t.gapMode,R=JO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=f,L=FH([n,e]),x=Ts(Ts({},R),s);return S.createElement(S.Fragment,null,d&&S.createElement(D,{sideCar:ZO,removeScrollBar:c,shards:h,noRelative:p,noIsolation:_,inert:m,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?S.cloneElement(S.Children.only(a),Ts(Ts({},x),{ref:L})):S.createElement(y,Ts({},x,{className:l,ref:L}),a))});yg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yg.classNames={fullWidth:zf,zeroRight:Bf};var zH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=zH();return e&&t.setAttribute("nonce",e),t}function qH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function HH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var KH=function(){var t=0,e=null;return{add:function(n){t==0&&(e=WH())&&(qH(e,n),HH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},GH=function(){var t=KH();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},e2=function(){var t=GH(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},QH={left:0,top:0,right:0,gap:0},Wy=function(t){return parseInt(t||"",10)||0},YH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Wy(n),Wy(r),Wy(s)]},JH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return QH;var e=YH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},XH=e2(),Ml="data-scroll-locked",ZH=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(OH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ml,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bf,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(zf,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Bf," .").concat(Bf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(zf," .").concat(zf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ml,`] {
    `).concat(LH,": ").concat(a,`px;
  }
`)},MA=function(){var t=parseInt(document.body.getAttribute(Ml)||"0",10);return isFinite(t)?t:0},eK=function(){S.useEffect(function(){return document.body.setAttribute(Ml,(MA()+1).toString()),function(){var t=MA()-1;t<=0?document.body.removeAttribute(Ml):document.body.setAttribute(Ml,t.toString())}},[])},tK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;eK();var i=S.useMemo(function(){return JH(s)},[s]);return S.createElement(XH,{styles:ZH(i,!e,s,n?"":"!important")})},qw=!1;if(typeof window<"u")try{var of=Object.defineProperty({},"passive",{get:function(){return qw=!0,!0}});window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{qw=!1}var sl=qw?{passive:!1}:!1,nK=function(t){return t.tagName==="TEXTAREA"},t2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nK(t)&&n[e]==="visible")},rK=function(t){return t2(t,"overflowY")},sK=function(t){return t2(t,"overflowX")},FA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=n2(t,r);if(s){var i=r2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},iK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},oK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},n2=function(t,e){return t==="v"?rK(e):sK(e)},r2=function(t,e){return t==="v"?iK(e):oK(e)},aK=function(t,e){return t==="h"&&e==="rtl"?-1:1},lK=function(t,e,n,r,s){var i=aK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=r2(t,a),_=p[0],m=p[1],v=p[2],E=m-v-i*_;(_||E)&&n2(t,a)&&(h+=E,f+=_);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},af=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},UA=function(t){return[t.deltaX,t.deltaY]},jA=function(t){return t&&"current"in t?t.current:t},cK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dK=0,il=[];function hK(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(dK++)[0],i=S.useState(e2)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=NH([t.lockRef.current],(t.shards||[]).map(jA),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var E=af(m),y=n.current,w="deltaX"in m?m.deltaX:y[0]-E[0],R="deltaY"in m?m.deltaY:y[1]-E[1],D,L=m.target,x=Math.abs(w)>Math.abs(R)?"h":"v";if("touches"in m&&x==="h"&&L.type==="range")return!1;var A=FA(x,L);if(!A)return!0;if(A?D=x:(D=x==="v"?"h":"v",A=FA(x,L)),!A)return!1;if(!r.current&&"changedTouches"in m&&(w||R)&&(r.current=D),!D)return!0;var b=r.current||D;return lK(b,v,m,b==="h"?w:R)},[]),l=S.useCallback(function(m){var v=m;if(!(!il.length||il[il.length-1]!==i)){var E="deltaY"in v?UA(v):af(v),y=e.current.filter(function(D){return D.name===v.type&&(D.target===v.target||v.target===D.shadowParent)&&cK(D.delta,E)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(jA).filter(Boolean).filter(function(D){return D.contains(v.target)}),R=w.length>0?a(v,w[0]):!o.current.noIsolation;R&&v.cancelable&&v.preventDefault()}}},[]),c=S.useCallback(function(m,v,E,y){var w={name:m,delta:v,target:E,should:y,shadowParent:fK(E)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(R){return R!==w})},1)},[]),d=S.useCallback(function(m){n.current=af(m),r.current=void 0},[]),h=S.useCallback(function(m){c(m.type,UA(m),m.target,a(m,t.lockRef.current))},[]),f=S.useCallback(function(m){c(m.type,af(m),m.target,a(m,t.lockRef.current))},[]);S.useEffect(function(){return il.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,sl),document.addEventListener("touchmove",l,sl),document.addEventListener("touchstart",d,sl),function(){il=il.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,sl),document.removeEventListener("touchmove",l,sl),document.removeEventListener("touchstart",d,sl)}},[]);var p=t.removeScrollBar,_=t.inert;return S.createElement(S.Fragment,null,_?S.createElement(i,{styles:uK(s)}):null,p?S.createElement(tK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function fK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pK=BH(ZO,hK);var s2=S.forwardRef(function(t,e){return S.createElement(yg,Ts({},t,{ref:e,sideCar:pK}))});s2.classNames=yg.classNames;var mK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ol=new WeakMap,lf=new WeakMap,cf={},qy=0,i2=function(t){return t&&(t.host||i2(t.parentNode))},gK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=i2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},yK=function(t,e,n,r){var s=gK(e,Array.isArray(t)?t:[t]);cf[n]||(cf[n]=new WeakMap);var i=cf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),_=p!==null&&p!=="false",m=(ol.get(f)||0)+1,v=(i.get(f)||0)+1;ol.set(f,m),i.set(f,v),o.push(f),m===1&&_&&lf.set(f,!0),v===1&&f.setAttribute(n,"true"),_||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return d(e),a.clear(),qy++,function(){o.forEach(function(h){var f=ol.get(h)-1,p=i.get(h)-1;ol.set(h,f),i.set(h,p),f||(lf.has(h)||h.removeAttribute(r),lf.delete(h)),p||h.removeAttribute(n)}),qy--,qy||(ol=new WeakMap,ol=new WeakMap,lf=new WeakMap,cf={})}},vK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=mK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),yK(r,s,n,"aria-hidden")):function(){return null}},vg="Dialog",[o2,gG]=bc(vg),[wK,ds]=o2(vg),a2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=G_({prop:r,defaultProp:s??!1,onChange:i,caller:vg});return I.jsx(wK,{scope:e,triggerRef:a,contentRef:l,contentId:cy(),titleId:cy(),descriptionId:cy(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};a2.displayName=vg;var l2="DialogTrigger",c2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ds(l2,n),i=kn(e,s.triggerRef);return I.jsx(Yt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ME(s.open),...r,ref:i,onClick:xt(t.onClick,s.onOpenToggle)})});c2.displayName=l2;var LE="DialogPortal",[_K,u2]=o2(LE,{forceMount:void 0}),d2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ds(LE,e);return I.jsx(_K,{scope:e,forceMount:n,children:S.Children.map(r,o=>I.jsx($a,{present:n||i.open,children:I.jsx(K_,{asChild:!0,container:s,children:o})}))})};d2.displayName=LE;var am="DialogOverlay",h2=S.forwardRef((t,e)=>{const n=u2(am,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ds(am,t.__scopeDialog);return i.modal?I.jsx($a,{present:r||i.open,children:I.jsx(TK,{...s,ref:e})}):null});h2.displayName=am;var EK=pd("DialogOverlay.RemoveScroll"),TK=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ds(am,n);return I.jsx(s2,{as:EK,allowPinchZoom:!0,shards:[s.contentRef],children:I.jsx(Yt.div,{"data-state":ME(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Fa="DialogContent",f2=S.forwardRef((t,e)=>{const n=u2(Fa,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ds(Fa,t.__scopeDialog);return I.jsx($a,{present:r||i.open,children:i.modal?I.jsx(IK,{...s,ref:e}):I.jsx(SK,{...s,ref:e})})});f2.displayName=Fa;var IK=S.forwardRef((t,e)=>{const n=ds(Fa,t.__scopeDialog),r=S.useRef(null),s=kn(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return vK(i)},[]),I.jsx(p2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:xt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:xt(t.onFocusOutside,i=>i.preventDefault())})}),SK=S.forwardRef((t,e)=>{const n=ds(Fa,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return I.jsx(p2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),p2=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ds(Fa,n),l=S.useRef(null),c=kn(e,l);return kH(),I.jsxs(I.Fragment,{children:[I.jsx(QO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:I.jsx(Sm,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":ME(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(bK,{titleId:a.titleId}),I.jsx(xK,{contentRef:l,descriptionId:a.descriptionId})]})]})}),VE="DialogTitle",m2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ds(VE,n);return I.jsx(Yt.h2,{id:s.titleId,...r,ref:e})});m2.displayName=VE;var g2="DialogDescription",y2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ds(g2,n);return I.jsx(Yt.p,{id:s.descriptionId,...r,ref:e})});y2.displayName=g2;var v2="DialogClose",w2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ds(v2,n);return I.jsx(Yt.button,{type:"button",...r,ref:e,onClick:xt(t.onClick,()=>s.onOpenChange(!1))})});w2.displayName=v2;function ME(t){return t?"open":"closed"}var _2="DialogTitleWarning",[yG,E2]=AM(_2,{contentName:Fa,titleName:VE,docsSlug:"dialog"}),bK=({titleId:t})=>{const e=E2(_2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},AK="DialogDescriptionWarning",xK=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${E2(AK).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},RK=a2,PK=c2,CK=d2,T2=h2,I2=f2,S2=m2,b2=y2,DK=w2;const $A=RK,vG=PK,kK=CK,A2=S.forwardRef(({className:t,...e},n)=>I.jsx(T2,{ref:n,className:Nn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));A2.displayName=T2.displayName;const Hw=S.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>I.jsxs(kK,{children:[I.jsx(A2,{}),I.jsxs(I2,{ref:o,className:Nn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&I.jsxs(DK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[I.jsx(X_,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hw.displayName=I2.displayName;const Kw=({className:t,...e})=>I.jsx("div",{className:Nn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Kw.displayName="DialogHeader";const NK=({className:t,...e})=>I.jsx("div",{className:Nn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});NK.displayName="DialogFooter";const Gw=S.forwardRef(({className:t,...e},n)=>I.jsx(S2,{ref:n,className:Nn("text-lg font-semibold leading-none tracking-tight",t),...e}));Gw.displayName=S2.displayName;const Qw=S.forwardRef(({className:t,...e},n)=>I.jsx(b2,{ref:n,className:Nn("text-sm text-muted-foreground",t),...e}));Qw.displayName=b2.displayName;const OK={},BA=j.lazy(()=>Z(()=>import("./Index-BOQ7d5bH.js"),[],import.meta.url)),uf=j.lazy(()=>Z(()=>import("./LandingPage-Ck_thcuJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),zA=j.lazy(()=>Z(()=>import("./SubscriptionsPage-BW6M_1kO.js"),__vite__mapDeps([13,1,4,14,15,6,7,5,12]),import.meta.url)),WA=j.lazy(()=>Z(()=>import("./AuthPage-Bk33vzoa.js"),__vite__mapDeps([16,1,2,3,8]),import.meta.url)),df=j.lazy(()=>Z(()=>import("./TopUpPage-D1sGJ46Q.js"),__vite__mapDeps([17,1,18]),import.meta.url)),qA=j.lazy(()=>Z(()=>import("./AdminTopupsPage-2d09w3qZ.js"),__vite__mapDeps([19,18]),import.meta.url)),HA=j.lazy(()=>Z(()=>import("./AdminNotificationsPage-DrTU2ja9.js"),__vite__mapDeps([20,1,21,22,23]),import.meta.url)),hf=j.lazy(()=>Z(()=>import("./UserRegisterPage-BkStJ7GT.js"),__vite__mapDeps([24,1,21,25,26,27,28,29]),import.meta.url)),KA=j.lazy(()=>Z(()=>import("./UserAccountSetupPage-DfkNvLbN.js"),__vite__mapDeps([30,1,21,25,29,28,12]),import.meta.url)),GA=j.lazy(()=>Z(()=>import("./ForgotPasswordCodePage-HPzyWAKF.js"),[],import.meta.url)),QA=j.lazy(()=>Z(()=>import("./DashboardLoginPage-Dx1dVP9h.js"),__vite__mapDeps([31,1,10]),import.meta.url)),YA=j.lazy(()=>Z(()=>import("./ProtectedDashboard-C8t-KjRB.js"),__vite__mapDeps([32,1,33,18,34,21,10,35,36,37,26,12,38]),import.meta.url)),Wf=j.lazy(()=>Z(()=>import("./ProtectedUserDashboard-C-4M1qmw.js"),__vite__mapDeps([39,40,23,34,21,10,35]),import.meta.url)),JA=j.lazy(()=>Z(()=>import("./MerchantDashboard-MhD3X7nR.js"),__vite__mapDeps([41,42,18,43,33,44,1,45,21,46]),import.meta.url)),XA=j.lazy(()=>Z(()=>import("./PendingApprovalPage-Cwm_Vl7i.js"),__vite__mapDeps([47,48,10]),import.meta.url)),ZA=j.lazy(()=>Z(()=>import("./AdminLogin-K9PWWH_Q.js"),__vite__mapDeps([49,10]),import.meta.url)),ex=j.lazy(()=>Z(()=>import("./ProtectedAdminDashboard-B6elE5YX.js"),__vite__mapDeps([50,14,3,51,42,18,43,21,34,10,35,52,1,22,25,33,53,4,28,54,55,40,15,9,7,8,12,38]),import.meta.url)),tx=j.lazy(()=>Z(()=>import("./AuthTestPage-DIITkwbv.js"),__vite__mapDeps([56,1,21]),import.meta.url)),nx=j.lazy(()=>Z(()=>import("./ProfileSettingsPage-B-oVcHqn.js"),__vite__mapDeps([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url)),rx=j.lazy(()=>Z(()=>import("./TransactionsPage-ByCAGb8I.js"),__vite__mapDeps([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url)),sx=j.lazy(()=>Z(()=>import("./WalletAdditionPage-C24d5nZ3.js"),__vite__mapDeps([61,1,21,18,5,26,28,35]),import.meta.url)),ix=j.lazy(()=>Z(()=>import("./ReferralsPage-D564qIVT.js"),__vite__mapDeps([62,1,33,25,27,23,12,55,38]),import.meta.url)),ox=j.lazy(()=>Z(()=>import("./CPanelPage-DnPtgr8M.js"),__vite__mapDeps([63,1,21]),import.meta.url)),ax=j.lazy(()=>Z(()=>import("./CPanelLoginPage-Zrepfhau.js"),__vite__mapDeps([64,21,1,10]),import.meta.url)),lx=j.lazy(()=>Z(()=>import("./NotFound-Dy2-tAFC.js"),[],import.meta.url)),cx=j.lazy(()=>Z(()=>import("./PrivacyPolicyPage-CFqL25zK.js"),[],import.meta.url)),x2=new b3({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=D3({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});C3({queryClient:x2,persister:t,maxAge:24*60*60*1e3})}catch{}const LK=()=>{if(!((xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return I.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:I.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:I.jsx(A1,{className:"w-5 h-5"})})})},ux=()=>{const t=Ms(),{user:e,loading:n}=Wa(),r=(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?I.jsx(zq,{}):null},dx=()=>{var _n;const t=EH(),{profile:e,user:n}=Wa(),{shopId:r}=SH();Ms();const s=Cc(),{toast:i}=H_(),[o,a]=j.useState(!1),[l,c]=j.useState(null),[d,h]=j.useState(!1),[f,p]=j.useState(null),[_,m]=j.useState(!1),[v,E]=j.useState(""),[y,w]=j.useState(""),[R,D]=j.useState(null),[L,x]=j.useState(null),A=j.useRef(null),b=j.useRef(null),P=j.useRef(!1),k=j.useRef(null),O=j.useRef(()=>{try{const ie=localStorage.getItem("sms_suppressed_ids")||"[]",U=Array.isArray(JSON.parse(ie))?JSON.parse(ie):[];return new Set(U.map(Y=>String(Y||"")))}catch{return new Set}}),[C,B]=j.useState(!1);TH();const[te,ee]=j.useState(!1),[z,F]=j.useState(null),[q,oe]=j.useState(""),[de,Q]=j.useState(!1),[Ce,be]=j.useState(!1),[Ve,Ge]=j.useState(""),[Se,zt]=j.useState(""),Qe=j.useCallback(()=>{try{const ie=window.AudioContext||window.webkitAudioContext;if(!ie)return;const U=new ie,Y=U.createOscillator(),H=U.createGain();Y.type="sine",H.gain.setValueAtTime(0,U.currentTime),Y.connect(H),H.connect(U.destination);const re=U.currentTime;Y.frequency.setValueAtTime(800,re),H.gain.linearRampToValueAtTime(.15,re+.02),Y.start(re),Y.frequency.exponentialRampToValueAtTime(1200,re+.08),H.gain.exponentialRampToValueAtTime(1e-5,re+.32),Y.stop(re+.35)}catch{}},[]),$e=ie=>{try{const U=String(ie||"").replace(/[^0-9+]/g,"");if(!U)return"";if(U.startsWith("+20")){const Y=U.slice(3);return Y.startsWith("1")?"0"+Y:Y}if(U.startsWith("20")){const Y=U.slice(2);return Y.startsWith("1")?"0"+Y:Y}return U.startsWith("0")?U:/^(10|11|12|15)/.test(U)?"0"+U:U}catch{return""}},We=ie=>{try{const U=String(ie||""),Y=U.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i),H=Y?parseFloat(String(Y[1]).replace(",",".")):0,re=U.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i),he=re?$e(re[1]):void 0,le=U.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),me=U.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),De=le?String(le[1]).trim():me?String(me[1]).trim():void 0,ke=U.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),Te=U.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),Xe=ke?String(ke[1]).trim():void 0;return{amount:H,sender:he,senderName:De,reference:Xe||(Te?String(Te[1]).trim():void 0)}}catch{return{amount:0}}};j.useEffect(()=>{(async()=>{var ie;try{if(!te||!z){Q(!1);return}const{auth:U}=await Z(async()=>{const{auth:he}=await Promise.resolve().then(()=>Lt);return{auth:he}},void 0,import.meta.url),Y=((ie=U.currentUser)==null?void 0:ie.uid)||"",H=Y?`selectedWallet_${Y}`:"selectedWallet_default",re=localStorage.getItem(H)||"";if(!re){Q(!0);return}try{const{merchantWalletService:he}=await Z(async()=>{const{merchantWalletService:De}=await Promise.resolve().then(()=>nf);return{merchantWalletService:De}},void 0,import.meta.url),le=await he.getById(re),me=le&&le.defaultWithdrawCommission!=null;Q(!me)}catch{Q(!0)}}catch{Q(!0)}})()},[te,z]);const Wt=async ie=>{try{const{merchantWalletService:U,detectWalletFromSim:Y}=await Z(async()=>{const{merchantWalletService:Te,detectWalletFromSim:Xe}=await Promise.resolve().then(()=>bl);return{merchantWalletService:Te,detectWalletFromSim:Xe}},void 0,import.meta.url),H=(n==null?void 0:n.uid)||"";if(!H)return;const re=`wallets_${H}`,he=typeof localStorage<"u"?localStorage.getItem(re):null,le=he?JSON.parse(he):[],me=await U.getByMerchantId(H),De=[...(Array.isArray(le)?le:[]).map(Te=>({id:String((Te==null?void 0:Te.id)||""),phone:String((Te==null?void 0:Te.phone)||(Te==null?void 0:Te.msisdn)||""),isDefault:!!(Te!=null&&Te.isDefault)})),...(Array.isArray(me)?me:[]).map(Te=>({id:String((Te==null?void 0:Te.id)||""),msisdn:String((Te==null?void 0:Te.msisdn)||""),isDefault:!!(Te!=null&&Te.isDefault)}))],ke=await Y(ie||[],De);if(ke&&ke.walletId)try{localStorage.setItem(`selectedWallet_${H}`,ke.walletId)}catch{}}catch{}};S.useEffect(()=>{const ie=U=>{try{vH((U==null?void 0:U.detail)||{},{toast:i})}catch{}};try{window.addEventListener("vfNotificationReceived",ie)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",ie)}catch{}}},[i]),S.useEffect(()=>{const ie=async U=>{var Y;try{const H=(U==null?void 0:U.detail)||{},re=Number(H.amount||0),he=String(H.sender||""),le=Array.isArray(H.activeSimMsisdns)?H.activeSimMsisdns.map(Oe=>String(Oe||"")):[];try{console.log("VF Auto SMS  activeSimMsisdns",le)}catch{}const me=String(H.text||""),De=We(me),ke=De.amount||re;if(!ke||ke<=0||!px(me,String(H.sender||"")))return;const{auth:Xe}=await Z(async()=>{const{auth:Oe}=await Promise.resolve().then(()=>Lt);return{auth:Oe}},void 0,import.meta.url),ye=((Y=Xe.currentUser)==null?void 0:Y.uid)||"";let ge=r||"";if(!ye){try{i({title:"  ",description:"   "})}catch{}return}if(!ge)try{const{doc:Oe,getDoc:It}=await Z(async()=>{const{doc:tt,getDoc:Be}=await Promise.resolve().then(()=>hn);return{doc:tt,getDoc:Be}},void 0,import.meta.url),{db:ut}=await Z(async()=>{const{db:tt}=await Promise.resolve().then(()=>Lt);return{db:tt}},void 0,import.meta.url),Me=await It(Oe(ut,"profiles",ye));if(Me.exists()){const tt=Me.data(),Be=String((tt==null?void 0:tt.shopId)||"").trim();Be&&(ge=Be)}}catch{}if(!ge){try{i({title:"  ",description:"   "})}catch{}return}try{const{doc:Oe,getDoc:It}=await Z(async()=>{const{doc:Ne,getDoc:Ae}=await Promise.resolve().then(()=>hn);return{doc:Ne,getDoc:Ae}},void 0,import.meta.url),{db:ut}=await Z(async()=>{const{db:Ne}=await Promise.resolve().then(()=>Lt);return{db:Ne}},void 0,import.meta.url);let Me="",tt="",Be=!0,mn=!1;try{const Ne=await It(Oe(ut,"profiles",ye));if(Ne.exists()){const Ae=Ne.data();Be=(Ae==null?void 0:Ae.smsReadingEnabled)!==void 0?!!Ae.smsReadingEnabled:!0,mn=(Ae==null?void 0:Ae.smsAutoRegisterEnabled)===!0}}catch{}try{const Ne=localStorage.getItem(`sim1Number_${ye}`)??localStorage.getItem("sim1Number"),Ae=localStorage.getItem(`sim2Number_${ye}`)??localStorage.getItem("sim2Number");Me=String(Ne||"").trim(),tt=String(Ae||"").trim()}catch{}try{const{Preferences:Ne}=await Z(async()=>{const{Preferences:gt}=await Promise.resolve().then(()=>sf);return{Preferences:gt}},void 0,import.meta.url),Ae=await Ne.get({key:"sim1_number"}),rt=await Ne.get({key:"sim2_number"});!Me&&(Ae!=null&&Ae.value)&&(Me=String(Ae.value).trim()),!tt&&(rt!=null&&rt.value)&&(tt=String(rt.value).trim())}catch{}if(!Be)return;const St=String((H==null?void 0:H.simNumber)||"");let dt=le&&le.length>0?le:St?[St]:[];Array.isArray(le)&&le.length===1&&Me&&(dt=[Me]),dt.length===0&&(dt=[Me,tt].filter(Boolean));try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(dt))}catch{}const fe=St||dt[0]||"";if(fe)try{localStorage.setItem("lastSmsSimMsisdn",fe)}catch{}const{resolveWalletBySimOrSlot:vt,bindSlotWalletMapping:at,merchantWalletService:qt}=await Z(async()=>{const{resolveWalletBySimOrSlot:Ne,bindSlotWalletMapping:Ae,merchantWalletService:rt}=await Promise.resolve().then(()=>bl);return{resolveWalletBySimOrSlot:Ne,bindSlotWalletMapping:Ae,merchantWalletService:rt}},void 0,import.meta.url),mt=ye;let pe=await vt({simNumbers:dt,userId:mt});if(!pe&&dt.length>0){try{await Wt(dt)}catch{}const Ne=localStorage.getItem(`selectedWallet_${mt}`)||"";if(Ne)try{const Ae=await qt.getById(Ne);pe={walletId:Ne,msisdn:String((Ae==null?void 0:Ae.msisdn)||"")}}catch{}}if(pe&&pe.walletId){try{localStorage.setItem(`selectedWallet_${mt}`,pe.walletId)}catch{}try{at({userId:mt,walletId:pe.walletId,msisdn:pe.msisdn})}catch{}}const J=De.reference||"",ae=(pe==null?void 0:pe.msisdn)||(ye?await Hy(ye):""),je={amount:ke,sender:De.sender||he,senderName:De.senderName,text:me,simNumber:fe};if(mn)try{await Dt(je)}catch{}else{try{const{addDoc:Ne,collection:Ae,serverTimestamp:rt}=await Z(async()=>{const{addDoc:xn,collection:ir,serverTimestamp:vi}=await Promise.resolve().then(()=>hn);return{addDoc:xn,collection:ir,serverTimestamp:vi}},void 0,import.meta.url),{db:gt}=await Z(async()=>{const{db:xn}=await Promise.resolve().then(()=>Lt);return{db:xn}},void 0,import.meta.url),Ft=await Ne(Ae(gt,"pendingSmsPopups"),{userId:ye,shopId:ge,payload:{...je,reference:J,walletMsisdn:ae},status:"pending",createdAt:rt()});F({...je,reference:J,providerLabel:"VF-Cash",walletMsisdn:ae,popupId:Ft.id})}catch{F({...je,reference:J,providerLabel:"VF-Cash",walletMsisdn:ae})}ee(!0);try{Qe()}catch{}}}catch{}}catch{}};try{window.addEventListener("vfCashTransactionDetected",ie)}catch{}return()=>{try{window.removeEventListener("vfCashTransactionDetected",ie)}catch{}}},[i,r]),S.useEffect(()=>{const ie=async U=>{var Y;try{const H=(U==null?void 0:U.detail)||{},re=String(H.text||"");if(!re||!/\s*\s*/.test(re)||!px(re,String(H.sender||"")))return;const{auth:le}=await Z(async()=>{const{auth:ke}=await Promise.resolve().then(()=>Lt);return{auth:ke}},void 0,import.meta.url),me=((Y=le.currentUser)==null?void 0:Y.uid)||"";let De=r||"";if(!me){try{i({title:"  ",description:"   "})}catch{}return}if(!De)try{const{doc:ke,getDoc:Te}=await Z(async()=>{const{doc:ge,getDoc:Oe}=await Promise.resolve().then(()=>hn);return{doc:ge,getDoc:Oe}},void 0,import.meta.url),{db:Xe}=await Z(async()=>{const{db:ge}=await Promise.resolve().then(()=>Lt);return{db:ge}},void 0,import.meta.url),ye=await Te(ke(Xe,"profiles",me));if(ye.exists()){const ge=ye.data(),Oe=String((ge==null?void 0:ge.shopId)||"").trim();Oe&&(De=Oe)}}catch{}if(!De){try{i({title:"  ",description:"   "})}catch{}return}try{const{doc:ke,getDoc:Te}=await Z(async()=>{const{doc:J,getDoc:ae}=await Promise.resolve().then(()=>hn);return{doc:J,getDoc:ae}},void 0,import.meta.url),{db:Xe}=await Z(async()=>{const{db:J}=await Promise.resolve().then(()=>Lt);return{db:J}},void 0,import.meta.url);let ye="",ge="",Oe=!0,It=!1;try{const J=await Te(ke(Xe,"profiles",me));if(J.exists()){const ae=J.data();Oe=(ae==null?void 0:ae.smsReadingEnabled)!==void 0?!!ae.smsReadingEnabled:!0,It=(ae==null?void 0:ae.smsAutoRegisterEnabled)===!0}}catch{}try{const J=localStorage.getItem(`sim1Number_${me}`)??localStorage.getItem("sim1Number"),ae=localStorage.getItem(`sim2Number_${me}`)??localStorage.getItem("sim2Number");ye=String(J||"").trim(),ge=String(ae||"").trim()}catch{}try{const{Preferences:J}=await Z(async()=>{const{Preferences:Ne}=await Promise.resolve().then(()=>sf);return{Preferences:Ne}},void 0,import.meta.url),ae=await J.get({key:"sim1_number"}),je=await J.get({key:"sim2_number"});!ye&&(ae!=null&&ae.value)&&(ye=String(ae.value).trim()),!ge&&(je!=null&&je.value)&&(ge=String(je.value).trim())}catch{}if(!Oe)return;const ut=String(H.msisdn||"");try{console.log("VF SMS Broadcast  subId",H==null?void 0:H.subId,"msisdn",ut)}catch{}let Me=Array.isArray(H.activeSimMsisdns)?H.activeSimMsisdns:ut?[ut]:[];if(Array.isArray(H.activeSimMsisdns)&&H.activeSimMsisdns.length===1&&ye&&(Me=[ye]),Me.length===0){const J=Number((H==null?void 0:H.slot)||(H==null?void 0:H.subId)||-1);J===1&&ye?Me=[ye]:J===2&&ge?Me=[ge]:Me=[ye,ge].filter(Boolean)}try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(Me))}catch{}const tt=ut||Me[0]||"";if(tt)try{localStorage.setItem("lastSmsSimMsisdn",tt)}catch{}const{resolveWalletBySimOrSlot:Be,bindSlotWalletMapping:mn,merchantWalletService:St}=await Z(async()=>{const{resolveWalletBySimOrSlot:J,bindSlotWalletMapping:ae,merchantWalletService:je}=await Promise.resolve().then(()=>bl);return{resolveWalletBySimOrSlot:J,bindSlotWalletMapping:ae,merchantWalletService:je}},void 0,import.meta.url),dt=me;let fe=await Be({simNumbers:Me,subId:Number((H==null?void 0:H.subId)||-1),slotIndex:Number((H==null?void 0:H.slot)||-1),userId:dt});if(!fe&&Me.length>0){try{await Wt(Me)}catch{}const J=localStorage.getItem(`selectedWallet_${dt}`)||"";if(J)try{const ae=await St.getById(J);fe={walletId:J,msisdn:String((ae==null?void 0:ae.msisdn)||"")}}catch{}}if(fe&&fe.walletId){try{localStorage.setItem(`selectedWallet_${dt}`,fe.walletId)}catch{}try{const J=`selectedWallet_${dt}_${De}`;localStorage.setItem(J,fe.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:fe.walletId}}))}catch{}try{const{Preferences:J}=await Z(async()=>{const{Preferences:ae}=await Promise.resolve().then(()=>sf);return{Preferences:ae}},void 0,import.meta.url);await J.set({key:"selected_wallet_id",value:fe.walletId}),await J.set({key:"current_user_id",value:dt})}catch{}try{mn({userId:dt,subId:Number((H==null?void 0:H.subId)||-1),slotIndex:Number((H==null?void 0:H.slot)||-1),walletId:fe.walletId,msisdn:fe.msisdn})}catch{}}const vt=We(re),at=vt.amount||0;if(!at||at<=0)return;const qt=vt.reference||"",mt=(fe==null?void 0:fe.msisdn)||(me?await Hy(me):""),pe={amount:at,sender:vt.sender||String(H.sender||""),senderName:vt.senderName,text:re,simNumber:tt};if(It)try{await Dt(pe)}catch{}else{try{const{addDoc:J,collection:ae,serverTimestamp:je}=await Z(async()=>{const{addDoc:rt,collection:gt,serverTimestamp:Ft}=await Promise.resolve().then(()=>hn);return{addDoc:rt,collection:gt,serverTimestamp:Ft}},void 0,import.meta.url),{db:Ne}=await Z(async()=>{const{db:rt}=await Promise.resolve().then(()=>Lt);return{db:rt}},void 0,import.meta.url),Ae=await J(ae(Ne,"pendingSmsPopups"),{userId:me,shopId:De,payload:{...pe,reference:qt,walletMsisdn:mt},status:"pending",createdAt:je()});F({...pe,reference:qt,providerLabel:"VF-Cash",walletMsisdn:mt,popupId:Ae.id})}catch{F({...pe,reference:qt,providerLabel:"VF-Cash",walletMsisdn:mt})}ee(!0);try{Qe()}catch{}}}catch{}}catch{}};try{window.addEventListener("mobileSmsReceived",ie)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",ie)}catch{}}},[i,r]);const Dt=async ie=>{var U,Y,H,re,he;try{const le=ie||z;if(!le)return;const{amount:me,sender:De,text:ke,simNumber:Te,senderName:Xe}=le,ye=String(ke||"");let ge=Number(me||0);if(!ge||ge<=0){const J=ye.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);ge=J?parseFloat(String(J[1]).replace(",",".")):0}let Oe=String(De||"").trim();if(!Oe){const J=ye.match(/\s+\s+(\d+)/i);Oe=J?$e(J[1]):""}let It=String((le==null?void 0:le.reference)||"").trim();if(!It){const J=ye.match(/\s*\s*([\d\.]+)/i);It=J?String(J[1]).trim():String(Date.now())}if(!ge||ge<=0){try{i({title:"      ",variant:"destructive"})}catch{}return}const{auth:ut}=await Z(async()=>{const{auth:J}=await Promise.resolve().then(()=>Lt);return{auth:J}},void 0,import.meta.url),Me=((U=ut.currentUser)==null?void 0:U.uid)||"";let tt=r||"";if(!Me){try{i({title:"  ",description:"   "})}catch{}return}if(!tt)try{const{doc:J,getDoc:ae}=await Z(async()=>{const{doc:Ae,getDoc:rt}=await Promise.resolve().then(()=>hn);return{doc:Ae,getDoc:rt}},void 0,import.meta.url),{db:je}=await Z(async()=>{const{db:Ae}=await Promise.resolve().then(()=>Lt);return{db:Ae}},void 0,import.meta.url),Ne=await ae(J(je,"profiles",Me));if(Ne.exists()){const Ae=Ne.data(),rt=String((Ae==null?void 0:Ae.shopId)||"").trim();rt&&(tt=rt)}}catch{}if(!tt){try{i({title:"  ",description:"   "})}catch{}return}let Be=await MK(Me);if(!Be)try{const{doc:J,getDoc:ae}=await Z(async()=>{const{doc:lt,getDoc:zr}=await Promise.resolve().then(()=>hn);return{doc:lt,getDoc:zr}},void 0,import.meta.url),{db:je}=await Z(async()=>{const{db:lt}=await Promise.resolve().then(()=>Lt);return{db:lt}},void 0,import.meta.url);let Ne="",Ae="";try{const lt=await ae(J(je,"profiles",Me));if(lt.exists()){const zr=lt.data();Ne=String((zr==null?void 0:zr.sim1Number)||"").trim(),Ae=String((zr==null?void 0:zr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:rt}=await Z(async()=>{const{detectWalletFromSim:lt}=await Promise.resolve().then(()=>bl);return{detectWalletFromSim:lt}},void 0,import.meta.url),{merchantWalletService:gt}=await Z(async()=>{const{merchantWalletService:lt}=await Promise.resolve().then(()=>nf);return{merchantWalletService:lt}},void 0,import.meta.url),Ft=`wallets_${Me}`,xn=localStorage.getItem(Ft),ir=xn?JSON.parse(xn):[],vi=await gt.getByMerchantId(Me),Vn=(Array.isArray(ir)?ir:[]).map(lt=>({id:String((lt==null?void 0:lt.id)||""),phone:String((lt==null?void 0:lt.phone)||(lt==null?void 0:lt.msisdn)||""),isDefault:!!(lt!=null&&lt.isDefault)})),wi=(Array.isArray(vi)?vi:[]).map(lt=>({id:String((lt==null?void 0:lt.id)||""),msisdn:String((lt==null?void 0:lt.msisdn)||""),isDefault:!!(lt!=null&&lt.isDefault)})),qa=[...Vn,...wi],Ha=Te||String(localStorage.getItem("lastSmsSimMsisdn")||"");let Oo=(Ha?[Ha]:[]).filter(Boolean);Oo.length===0&&(Oo=[Ne,Ae].filter(Boolean));const Ka=await rt(Oo,qa);if(Ka&&Ka.walletId){Be=Ka.walletId;try{localStorage.setItem(`selectedWallet_${Me}`,Be)}catch{}}}catch{}if(!Be){try{i({title:"   ",description:"       "})}catch{}return}try{const J=Me;try{localStorage.setItem(`selectedWallet_${J}`,Be)}catch{}try{localStorage.setItem(`selectedWallet_${J}_${tt}`,Be)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Be}}))}catch{}try{const{Preferences:ae}=await Z(async()=>{const{Preferences:je}=await Promise.resolve().then(()=>sf);return{Preferences:je}},void 0,import.meta.url);await ae.set({key:"selected_wallet_id",value:Be}),await ae.set({key:"current_user_id",value:J})}catch{}}catch{}const{recordAutoTransaction:mn,userDataService:St}=await Z(async()=>{const{recordAutoTransaction:J,userDataService:ae}=await Promise.resolve().then(()=>nf);return{recordAutoTransaction:J,userDataService:ae}},void 0,import.meta.url),dt=q&&q.trim()!==""?Math.max(0,parseFloat(q)):null;let fe=0;if(dt!=null)fe=dt;else try{const{merchantWalletService:J}=await Z(async()=>{const{merchantWalletService:Ne}=await Promise.resolve().then(()=>nf);return{merchantWalletService:Ne}},void 0,import.meta.url),ae=await J.getById(String(Be)),je=ae&&ae.defaultWithdrawCommission;if(je!=null)fe=Math.round((Number(je)||0)*Number(ge)/1e3*100)/100;else{const{calculateCommission:Ne}=await Z(async()=>{const{calculateCommission:Ae}=await Promise.resolve().then(()=>im);return{calculateCommission:Ae}},void 0,import.meta.url);fe=Ne(Number(ge),"receive")}}catch{const{calculateCommission:J}=await Z(async()=>{const{calculateCommission:ae}=await Promise.resolve().then(()=>im);return{calculateCommission:ae}},void 0,import.meta.url);fe=J(Number(ge),"receive")}try{const{walletDailyLimitsService:J}=await Z(async()=>{const{walletDailyLimitsService:je}=await Promise.resolve().then(()=>Ww);return{walletDailyLimitsService:je}},void 0,import.meta.url),ae=await J.canPerformOperation(String(Be),Math.max(0,Number(ge||0)),"withdraw");if(!ae.canPerform)try{i({title:"  ",description:String(ae.message||"      "),variant:"destructive"})}catch{}}catch{}const vt=It||`${ye}|${Date.now()}`,at=Te||String(localStorage.getItem("lastSmsSimMsisdn")||""),mt=String((le==null?void 0:le.walletMsisdn)||"").trim()||at||await Hy(Me)||"",pe=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(Ce)try{const J=await St.getUserData(Me),ae=Array.isArray(J==null?void 0:J.debts)?J.debts:[],je=pe==="add"?Number(ge)+Number(fe):Number(ge),Ae=[{id:`DEBT-${Date.now()}`,debtorName:Ve||Xe||Oe||"",amount:Math.round(Number(je)*100)/100,reason:Se||"  VodafoneCash",customerId:void 0,mobile:Oe,status:"pending",createdAt:new Date},...ae];await St.updateUserData(Me,{debts:Ae}),ee(!1),F(null);try{i({title:"  ",description:"      "})}catch{}return}catch{}try{const J=await mn({shopId:tt,lineId:mt,walletId:Be,amount:ge,note:"SMS-VF-ManualConfirm",provider:"vodafone_cash",createdBy:Me,senderMsisdn:Oe,senderName:Xe,reference:vt,text:ye});try{const ae=(ie==null?void 0:ie.popupId)||(z==null?void 0:z.popupId)||"";if(ae){const{doc:je,updateDoc:Ne,serverTimestamp:Ae}=await Z(async()=>{const{doc:gt,updateDoc:Ft,serverTimestamp:xn}=await Promise.resolve().then(()=>hn);return{doc:gt,updateDoc:Ft,serverTimestamp:xn}},void 0,import.meta.url),{db:rt}=await Z(async()=>{const{db:gt}=await Promise.resolve().then(()=>Lt);return{db:gt}},void 0,import.meta.url);try{await Ne(je(rt,"pendingSmsPopups",ae),{status:"confirmed",confirmedAt:Ae()})}catch{}try{(H=(Y=O.current)==null?void 0:Y.add)==null||H.call(Y,ae);const gt=Array.from(O.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(gt))}catch{}}}catch{}try{const ae=Math.max(0,Number(ge||0)),{doc:je,getDoc:Ne,updateDoc:Ae}=await Z(async()=>{const{doc:Vn,getDoc:wi,updateDoc:qa}=await Promise.resolve().then(()=>hn);return{doc:Vn,getDoc:wi,updateDoc:qa}},void 0,import.meta.url),{db:rt}=await Z(async()=>{const{db:Vn}=await Promise.resolve().then(()=>Lt);return{db:Vn}},void 0,import.meta.url),gt=je(rt,"dashboardData",tt),Ft=await Ne(gt);let xn=Ft.exists()?Number(((re=Ft.data())==null?void 0:re.cashBalance)||0):0;const ir=Ft.exists()?((he=Ft.data())==null?void 0:he.walletBalances)||{}:{},vi=Number(ir[Be]||0);ir[Be]=vi+ae,xn=xn-ae+Math.max(0,fe),await Ae(gt,{cashBalance:xn,walletBalances:ir,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:xn}}))}catch{}try{const{walletDailyLimitsService:Vn}=await Z(async()=>{const{walletDailyLimitsService:wi}=await Promise.resolve().then(()=>Ww);return{walletDailyLimitsService:wi}},void 0,import.meta.url);await Vn.updateUsage(String(Be),ae,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Be)}}))}catch{}}catch{}}catch{}(async()=>{try{const ae=fe;await St.saveUserTransaction(Me,{type:"withdraw",amount:ge,withdrawnAmount:ge,commission:ae,status:"completed",createdAt:new Date,senderMsisdn:Oe,receiverMsisdn:mt,senderName:Xe,walletId:Be,fromWallet:Be,lineId:mt,provider:"vodafone_cash",reference:vt,transactionId:J})}catch{}})(),ee(!1),F(null);try{i({title:`     ${J}`})}catch{}}catch(J){try{i({title:String((J==null?void 0:J.message)||"  "),variant:"destructive"})}catch{}}}catch{}};S.useEffect(()=>{try{CA.start()}catch{}return()=>{try{CA.stop()}catch{}}},[]),S.useEffect(()=>{(async()=>{try{if(!(n!=null&&n.uid))return;const ie=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),U=String(localStorage.getItem("android_installed_version")||"").trim(),Y=localStorage.getItem("android_last_ack_code"),H=localStorage.getItem("android_installed_code"),re=Y?Number(Y):null,he=H?Number(H):null,le=ie||U,me=re??he??null;le&&E(le),me&&x(me);const{doc:De,getDoc:ke}=await Z(async()=>{const{doc:ye,getDoc:ge}=await Promise.resolve().then(()=>hn);return{doc:ye,getDoc:ge}},void 0,import.meta.url),{db:Te}=await Z(async()=>{const{db:ye}=await Promise.resolve().then(()=>Lt);return{db:ye}},void 0,import.meta.url),Xe=await ke(De(Te,"profiles",n.uid));if(Xe.exists()){const ye=Xe.data(),ge=String((ye==null?void 0:ye.lastAckAndroidVersion)||(ye==null?void 0:ye.androidInstalledVersion)||(ye==null?void 0:ye.lastAckUpdateId)||"").trim(),Oe=typeof(ye==null?void 0:ye.lastAckAndroidCode)=="number"?ye.lastAckAndroidCode:typeof(ye==null?void 0:ye.androidInstalledCode)=="number"?ye.androidInstalledCode:null,It=(Me,tt)=>{const Be=String(Me||"").replace(/^v/i,"").split(".").map(St=>parseInt(St,10)||0),mn=String(tt||"").replace(/^v/i,"").split(".").map(St=>parseInt(St,10)||0);for(let St=0;St<Math.max(Be.length,mn.length);St++){const dt=Be[St]||0,fe=mn[St]||0;if(dt>fe)return 1;if(dt<fe)return-1}return 0};let ut=!1;if(typeof Oe=="number"&&typeof me=="number"?ut=Oe>me:typeof Oe=="number"&&me==null?ut=!0:ge&&le?ut=It(ge,le)>0:ge&&!le&&(ut=!0),ut){if(ge){try{localStorage.setItem("android_installed_version",ge)}catch{}E(ge)}if(typeof Oe=="number"){try{localStorage.setItem("android_installed_code",String(Oe))}catch{}x(Oe)}}else if(typeof Oe=="number"&&me==null){try{localStorage.setItem("android_installed_code",String(Oe))}catch{}x(Oe)}}}catch{}})()},[n==null?void 0:n.uid]),S.useEffect(()=>{try{const U=String((window==null?void 0:window.__nativeAppVersion)||"").trim();U&&w(U);const Y=window==null?void 0:window.__nativeAppVersionCode;if(typeof Y=="number"){D(Y);try{localStorage.setItem("android_installed_code",String(Y))}catch{}}try{U&&localStorage.setItem("android_installed_version",U)}catch{}}catch{}const ie=U=>{var Y,H;try{const re=String((((Y=U==null?void 0:U.detail)==null?void 0:Y.version)??"")||"").trim(),he=(H=U==null?void 0:U.detail)==null?void 0:H.code;re&&w(re);try{re&&localStorage.setItem("android_installed_version",re)}catch{}typeof he=="number"&&D(he)}catch{}};try{window.addEventListener("native-app-version",ie)}catch{}return()=>{try{window.removeEventListener("native-app-version",ie)}catch{}}},[]),S.useEffect(()=>{try{const ie=(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android",U=String(y||"").trim();if(!ie||!U||!(n!=null&&n.uid))return;(async()=>{try{const{doc:Y,setDoc:H,serverTimestamp:re}=await Z(async()=>{const{doc:le,setDoc:me,serverTimestamp:De}=await Promise.resolve().then(()=>hn);return{doc:le,setDoc:me,serverTimestamp:De}},void 0,import.meta.url),{db:he}=await Z(async()=>{const{db:le}=await Promise.resolve().then(()=>Lt);return{db:le}},void 0,import.meta.url);await H(Y(he,"profiles",n.uid),{androidInstalledVersion:U,androidInstalledAt:re()},{merge:!0});try{localStorage.setItem("android_installed_version",U)}catch{}}catch{}})()}catch{}},[y,n==null?void 0:n.uid]),S.useEffect(()=>{xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android"&&(async()=>{try{await Z(()=>import("./ProtectedUserDashboard-C-4M1qmw.js"),__vite__mapDeps([39,40,23,34,21,10,35]),import.meta.url),await Z(()=>import("./UserDashboardPage-BRKQ-meY.js"),__vite__mapDeps([65,1,33,18,21,34,10,35,26,6,46,45,28,5,53,15,11,37,51,42,43,52,38,12,60,4,8,36,29,40,22,44,48,58,7]),import.meta.url),await Z(()=>Promise.resolve().then(()=>Bq),void 0,import.meta.url),await Z(()=>import("./ProfileSettingsPage-B-oVcHqn.js"),__vite__mapDeps([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url),await Z(()=>import("./TransactionsPage-ByCAGb8I.js"),__vite__mapDeps([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url)}catch{}})()},[]),S.useEffect(()=>{if(!t)return;const ie=document.createElement("style");ie.setAttribute("data-disable-pull-to-refresh","true"),ie.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(ie);let U=0,Y=null;const H=he=>{var le,me;U=((me=(le=he.touches)==null?void 0:le[0])==null?void 0:me.clientY)||0,Y=he.target},re=he=>{var ye,ge;const le=((ge=(ye=he.touches)==null?void 0:ye[0])==null?void 0:ge.clientY)||0,me=document.scrollingElement||document.documentElement,De=me.scrollTop||window.scrollY||0,ke=me.scrollHeight-me.clientHeight||0,Te=Y||null,Xe=(()=>{let Oe=Te;for(;Oe&&Oe!==document.body;){const ut=window.getComputedStyle(Oe).overflowY;if((ut==="auto"||ut==="scroll")&&Oe.scrollHeight>Oe.clientHeight)return!0;Oe=Oe.parentElement}return!1})();!Xe&&De<=0&&le>U&&he.cancelable&&he.preventDefault(),!Xe&&De>=ke&&le<U&&he.cancelable&&he.preventDefault()};return document.addEventListener("touchstart",H,{passive:!0}),document.addEventListener("touchmove",re,{passive:!1}),()=>{document.removeEventListener("touchstart",H),document.removeEventListener("touchmove",re);try{document.head.removeChild(ie)}catch{}}},[t]),S.useEffect(()=>{if(!((xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"))return;try{const H=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=H,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const H=(window.location.assign||(re=>{})).bind(window.location);window.__originalAssign=H,window.location.assign=re=>{try{if(String(re||"").startsWith("/user/dashboard")){s("/user/dashboard");return}}catch{}try{H(re)}catch{}}}catch{}let U=null,Y=!1;return(async()=>{try{const{listenAndroidUpdates:H}=await Z(async()=>{const{listenAndroidUpdates:re}=await Promise.resolve().then(()=>Zq);return{listenAndroidUpdates:re}},void 0,import.meta.url);U=H(re=>{if(Y)return;const he=String((re==null?void 0:re.version)||"").trim(),le=String((re==null?void 0:re.url)||"").trim(),me=String((re==null?void 0:re.notes)||"").trim(),De=!!(re!=null&&re.force),ke=typeof(re==null?void 0:re.code)=="number"?re.code:void 0,Te=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),Xe=String(v||Te||"").trim(),ye=(fe,vt)=>{const at=String(fe||"").replace(/^v/i,"").split(".").map(mt=>parseInt(mt,10)||0),qt=String(vt||"").replace(/^v/i,"").split(".").map(mt=>parseInt(mt,10)||0);for(let mt=0;mt<Math.max(at.length,qt.length);mt++){const pe=at[mt]||0,J=qt[mt]||0;if(pe>J)return 1;if(pe<J)return-1}return 0},ge=String(y||"").trim(),Oe=String(localStorage.getItem("android_installed_version")||"").trim(),It=localStorage.getItem("android_installed_code"),ut=It?Number(It):null,Me=[R,L,ut].filter(fe=>typeof fe=="number").reduce((fe,vt)=>fe===void 0?vt:Math.max(fe,vt),void 0),tt=typeof ke=="number"&&typeof Me=="number"?ke>Me:void 0,Be=(()=>{const fe=[ge,Xe,Oe].filter(Boolean);return fe.length===0?"":fe.reduce((vt,at)=>ye(at,vt)>0?at:vt)})(),mn=ye(he,Be)>0;if(!!le&&(!!he||typeof ke=="number")&&(tt!==void 0?tt:mn)){const fe="   ",vt=`${me?me+`
`:""} : ${he}`;c({title:fe,message:vt,apkUrl:le,force:De,versionId:he,versionCode:ke}),a(!0)}else try{a(!1)}catch{}})}catch{}})(),()=>{Y=!0;try{typeof U=="function"&&U()}catch{}}},[v,y]),S.useEffect(()=>{const ie=Y=>{const H=(Y==null?void 0:Y.detail)||{};try{A.current&&(clearTimeout(A.current),A.current=null)}catch{}try{b.current&&(clearInterval(b.current),b.current=null)}catch{}h(!0),p({percent:H.percent??null,downloaded:H.downloaded??0,total:H.total??0})},U=()=>{try{A.current&&(clearTimeout(A.current),A.current=null)}catch{}try{b.current&&(clearInterval(b.current),b.current=null)}catch{}h(!1),m(!0),p({percent:100,downloaded:((f==null?void 0:f.total)??(f==null?void 0:f.downloaded)??0)||0,total:(f==null?void 0:f.total)??0});try{const Y=String((l==null?void 0:l.versionId)||"").trim();if(Y){try{localStorage.setItem("android_last_ack_version_id",Y)}catch{}try{localStorage.setItem("android_installed_version",Y)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:H,setDoc:re,serverTimestamp:he}=await Z(async()=>{const{doc:me,setDoc:De,serverTimestamp:ke}=await Promise.resolve().then(()=>hn);return{doc:me,setDoc:De,serverTimestamp:ke}},void 0,import.meta.url),{db:le}=await Z(async()=>{const{db:me}=await Promise.resolve().then(()=>Lt);return{db:me}},void 0,import.meta.url);await re(H(le,"profiles",n.uid),{lastAckAndroidVersion:Y,androidInstalledVersion:Y,lastAckAt:he(),androidInstalledAt:he()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",ie),window.addEventListener("androidUpdateDownloaded",U),()=>{window.removeEventListener("androidUpdateProgress",ie),window.removeEventListener("androidUpdateDownloaded",U)}},[]),S.useEffect(()=>((async()=>{var ie;try{const{auth:U}=await Z(async()=>{const{auth:Xe}=await Promise.resolve().then(()=>Lt);return{auth:Xe}},void 0,import.meta.url),Y=((ie=U.currentUser)==null?void 0:ie.uid)||"";if(!Y)return;const{db:H}=await Z(async()=>{const{db:Xe}=await Promise.resolve().then(()=>Lt);return{db:Xe}},void 0,import.meta.url),{collection:re,query:he,where:le,onSnapshot:me}=await Z(async()=>{const{collection:Xe,query:ye,where:ge,onSnapshot:Oe}=await Promise.resolve().then(()=>hn);return{collection:Xe,query:ye,where:ge,onSnapshot:Oe}},void 0,import.meta.url),De=he(re(H,"pendingSmsPopups"),le("userId","==",Y),le("status","==","pending")),ke=Date.now(),Te=me(De,Xe=>{var ye,ge,Oe,It,ut,Me,tt,Be,mn;try{const St=typeof Xe.docChanges=="function"?Xe.docChanges():[];for(const dt of St){if(dt.type==="added"){const fe=dt.doc.data()||{},vt=dt.doc.id;if((ge=(ye=O.current)==null?void 0:ye.has)!=null&&ge.call(ye,vt))continue;try{const Ne=fe.createdAt||fe.timestamp||(fe.payload||{}).createdAt||(fe.payload||{}).timestamp,Ae=Ne&&typeof Ne.toMillis=="function"?Ne.toMillis():typeof fe.createdAtMs=="number"?fe.createdAtMs:typeof(fe.payload||{}).createdAtMs=="number"?(fe.payload||{}).createdAtMs:null;if(typeof Ae=="number"&&Ae<ke)continue}catch{}const at=fe.amount??((Oe=fe.payload)==null?void 0:Oe.amount)??null,qt=fe.sender??((It=fe.payload)==null?void 0:It.sender)??"",mt=fe.senderName??((ut=fe.payload)==null?void 0:ut.senderName)??"",pe=fe.reference??((Me=fe.payload)==null?void 0:Me.reference)??"",J=fe.text??((tt=fe.payload)==null?void 0:tt.text)??"",ae=fe.simNumber??((Be=fe.payload)==null?void 0:Be.simNumber)??"",je=fe.walletMsisdn??((mn=fe.payload)==null?void 0:mn.walletMsisdn)??"";F({amount:at,sender:qt,senderName:mt,reference:pe,text:J,simNumber:ae,walletMsisdn:je,providerLabel:"VF-Cash",popupId:vt}),ee(!0);try{Qe()}catch{}}if(dt.type==="removed"){const fe=dt.doc.id,vt=(z==null?void 0:z.popupId)||"";vt&&vt===fe&&(ee(!1),F(null))}}}catch{}});k.current=Te}catch{}})(),()=>{try{const ie=k.current;typeof ie=="function"&&ie()}catch{}}),[n==null?void 0:n.uid]),S.useEffect(()=>{const ie=(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android",U=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(ie||U)return;let Y=!1;return(async()=>{try{const H="0.0.0",re=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!re.ok)return;const he=await re.json(),le=String((he==null?void 0:he.version)||"0.0.0"),me=!!(he!=null&&he.force);if(!Y&&((ke,Te)=>{const Xe=String(ke).split(".").map(ge=>parseInt(ge,10)||0),ye=String(Te).split(".").map(ge=>parseInt(ge,10)||0);for(let ge=0;ge<Math.max(Xe.length,ye.length);ge++){const Oe=Xe[ge]||0,It=ye[ge]||0;if(Oe>It)return 1;if(Oe<It)return-1}return 0})(le,H)>0){if(me){try{window.location.reload()}catch{}return}try{i({title:"  ",description:` ${le}      `})}catch{}}}catch{}})(),()=>{Y=!0}},[]);const Ln=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),gr=(()=>{const ie=(Y,H)=>{const re=String(Y||"").replace(/^v/i,"").split(".").map(le=>parseInt(le,10)||0),he=String(H||"").replace(/^v/i,"").split(".").map(le=>parseInt(le,10)||0);for(let le=0;le<Math.max(re.length,he.length);le++){const me=re[le]||0,De=he[le]||0;if(me>De)return 1;if(me<De)return-1}return 0},U=[y,v,Ln].filter(Boolean);return U.length===0?"":U.reduce((Y,H)=>ie(H,Y)>0?H:Y)})();return I.jsxs(I.Fragment,{children:[C&&(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"&&I.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:I.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:I.jsx("span",{className:"text-2xl",children:"!"})}),I.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),I.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),I.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:I.jsx(Ho,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),o&&l&&I.jsx($A,{open:o,onOpenChange:ie=>{l!=null&&l.force||a(ie)},children:I.jsxs(Hw,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[I.jsxs(Kw,{className:"text-center",children:[I.jsx(Gw,{className:"text-base md:text-lg font-bold text-gray-900",children:l.title}),I.jsx(Qw,{className:"text-sm text-gray-700 whitespace-pre-line",children:l.message}),I.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:gr?`  : v${gr}`:""})]}),I.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!l.force&&!d&&!_&&I.jsx(Ho,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>a(!1),children:""}),!_&&I.jsx(Ho,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const ie=String((l==null?void 0:l.versionId)||"").trim(),U=l==null?void 0:l.versionCode;if(ie)try{localStorage.setItem("android_last_ack_version_id",ie)}catch{}if(typeof U=="number")try{localStorage.setItem("android_last_ack_code",String(U))}catch{}if((async()=>{try{if(n!=null&&n.uid&&ie){const{doc:H,setDoc:re,serverTimestamp:he}=await Z(async()=>{const{doc:De,setDoc:ke,serverTimestamp:Te}=await Promise.resolve().then(()=>hn);return{doc:De,setDoc:ke,serverTimestamp:Te}},void 0,import.meta.url),{db:le}=await Z(async()=>{const{db:De}=await Promise.resolve().then(()=>Lt);return{db:De}},void 0,import.meta.url),me={lastAckAndroidVersion:ie,lastAckAt:he()};typeof U=="number"&&(me.lastAckAndroidCode=U),await re(H(le,"profiles",n.uid),me,{merge:!0})}}catch{}})(),(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"){const H=l.apkUrl,re=`cashy://update?url=${encodeURIComponent(H)}`;h(!0),p({percent:0,downloaded:0,total:0});try{b.current&&clearInterval(b.current),b.current=setInterval(()=>{p(he=>{const le=typeof(he==null?void 0:he.percent)=="number"?he.percent:0,me=P.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(le+me))),downloaded:(he==null?void 0:he.downloaded)??0,total:(he==null?void 0:he.total)??0}})},600)}catch{}window.location.href=re;try{A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{try{P.current=!1}catch{}try{A.current=null}catch{}},8e3)}catch{}}else{const H=l.apkUrl;try{window.open(H,"_blank")}catch{}}}catch{}},children:d?" ...":" "}),_&&I.jsx(Ho,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"){a(!1);try{const U=String((l==null?void 0:l.versionId)||"").trim();if(U){try{localStorage.setItem("android_last_ack_version_id",U)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:Y,setDoc:H,serverTimestamp:re}=await Z(async()=>{const{doc:De,setDoc:ke,serverTimestamp:Te}=await Promise.resolve().then(()=>hn);return{doc:De,setDoc:ke,serverTimestamp:Te}},void 0,import.meta.url),{db:he}=await Z(async()=>{const{db:De}=await Promise.resolve().then(()=>Lt);return{db:De}},void 0,import.meta.url),le={lastAckAndroidVersion:U,androidInstalledVersion:U,lastAckAt:re(),androidInstalledAt:re()},me=l==null?void 0:l.versionCode;if(typeof me=="number"){le.lastAckAndroidCode=me,le.androidInstalledCode=me;try{localStorage.setItem("android_installed_code",String(me)),localStorage.setItem("android_last_ack_code",String(me))}catch{}}await H(Y(he,"profiles",n.uid),le,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),d&&I.jsxs("div",{className:"mt-3 text-center",children:[I.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:I.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((f==null?void 0:f.percent)||0)))}%`}})}),I.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((f==null?void 0:f.percent)||0),"%"]})]})]})}),I.jsx($A,{open:te,onOpenChange:async ie=>{var U,Y;if(ee(ie),!ie){try{const H=(z==null?void 0:z.popupId)||"";if(H){const{db:re}=await Z(async()=>{const{db:De}=await Promise.resolve().then(()=>Lt);return{db:De}},void 0,import.meta.url),{doc:he,updateDoc:le,serverTimestamp:me}=await Z(async()=>{const{doc:De,updateDoc:ke,serverTimestamp:Te}=await Promise.resolve().then(()=>hn);return{doc:De,updateDoc:ke,serverTimestamp:Te}},void 0,import.meta.url);try{await le(he(re,"pendingSmsPopups",H),{status:"dismissed",dismissedAt:me()})}catch{}try{(Y=(U=O.current)==null?void 0:U.add)==null||Y.call(U,H);const De=Array.from(O.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(De))}catch{}}}catch{}be(!1),oe(""),Ge(""),zt("")}},children:I.jsxs(Hw,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[I.jsxs(Kw,{children:[I.jsx(Gw,{children:z!=null&&z.providerLabel?I.jsxs(I.Fragment,{children:["   ",I.jsx("span",{className:"text-red-600",children:z.providerLabel})]}):"   "}),I.jsx(Qw,{})]}),I.jsxs("div",{className:"space-y-2 text-sm",children:[I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsxs("span",{className:"font-bold",children:[(_n=z==null?void 0:z.amount)==null?void 0:_n.toLocaleString()," "]})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" "}),I.jsx("span",{className:"font-mono",children:(z==null?void 0:z.sender)||""})]}),(z==null?void 0:z.simNumber)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" "}),I.jsx("span",{className:"font-mono",children:z==null?void 0:z.simNumber})]}),(z==null?void 0:z.senderName)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsx("span",{children:z==null?void 0:z.senderName})]}),(z==null?void 0:z.reference)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsx("span",{className:"font-mono",children:z==null?void 0:z.reference})]}),(z==null?void 0:z.walletMsisdn)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsx("span",{className:"font-mono",children:z==null?void 0:z.walletMsisdn})]}),de&&I.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[I.jsx("span",{className:"flex-1",children:"  ()"}),I.jsx("input",{type:"number",step:"0.01",min:"0",value:q,onChange:ie=>oe(ie.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),I.jsx("div",{className:"pt-2",children:I.jsx("button",{type:"button",className:`w-full rounded-md px-3 py-2 text-sm font-medium ${Ce?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-800"}`,onClick:()=>be(!Ce),children:Ce?" ":""})}),Ce&&I.jsxs("div",{className:"space-y-2 pt-2",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("span",{className:"flex-1",children:" "}),I.jsx("input",{type:"text",value:Ve,onChange:ie=>Ge(ie.target.value),className:"w-48 border rounded px-2 py-1",placeholder:" "})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("span",{className:"flex-1",children:""}),I.jsx("input",{type:"text",value:Se,onChange:ie=>zt(ie.target.value),className:"w-48 border rounded px-2 py-1",placeholder:""})]})]})]}),I.jsx("div",{className:"pt-3",children:I.jsx(Ho,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const ie=String((z==null?void 0:z.text)||""),U=ie.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),Y=U?parseFloat(String(U[1]).replace(",",".")):Number((z==null?void 0:z.amount)||0),H=ie.match(/\s+\s+(\d+)/i),re=String((z==null?void 0:z.sender)||(H?H[1]:"")||""),he=ie.match(/\s*\s*([\d\.]+)/i),le=String((z==null?void 0:z.reference)||(he?he[1]:String(Date.now())));Dt({...z,amount:Y,sender:re,reference:le})}catch{Dt()}},children:" "})})]})})]})},hx=()=>{const t=Ms(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?I.jsxs(I.Fragment,{children:[I.jsx(TU,{}),I.jsx(r4,{})]}):null},fx=()=>{const{user:t,loading:e}=Wa();return e?I.jsx(zw,{}):t?I.jsx(Wf,{}):I.jsx(nm,{})},VK=()=>I.jsx(A3,{client:x2,children:I.jsx(O6,{children:I.jsxs(Wj,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android")&&I.jsx(eH,{}),I.jsx(LK,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&OK||xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android")?I.jsxs(P6,{children:[I.jsx(dx,{}),I.jsx(hx,{}),I.jsx(S.Suspense,{fallback:I.jsx(zw,{}),children:I.jsxs(vS,{children:[I.jsx(Ee,{path:"/",element:xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android"?I.jsx(fx,{}):I.jsx(uf,{})}),I.jsx(Ee,{path:"/dashboard-redirect",element:I.jsx(BA,{})}),I.jsx(Ee,{path:"/landing",element:I.jsx(uf,{})}),I.jsx(Ee,{path:"/subscriptions",element:I.jsx(zA,{})}),I.jsx(Ee,{path:"/auth",element:I.jsx(WA,{})}),I.jsx(Ee,{path:"/user/login",element:I.jsx(nm,{})}),I.jsx(Ee,{path:"/user/forgot-password",element:I.jsx(GA,{})}),I.jsx(Ee,{path:"/user/register",element:I.jsx(hf,{})}),I.jsx(Ee,{path:"/register",element:I.jsx(hf,{})}),I.jsx(Ee,{path:"/user/account-setup",element:I.jsx(KA,{})}),I.jsx(Ee,{path:"/user/pending-approval",element:I.jsx(XA,{})}),I.jsx(Ee,{path:"/user/dashboard",element:I.jsx(Wf,{})}),I.jsx(Ee,{path:"/branch/:shopId/dashboard",element:I.jsx(Wf,{})}),I.jsx(Ee,{path:"/user/add-wallet",element:I.jsx(sx,{})}),I.jsx(Ee,{path:"/admin/login",element:I.jsx(ZA,{})}),I.jsx(Ee,{path:"/admin/dashboard",element:I.jsx(ex,{})}),I.jsx(Ee,{path:"/admin/topups",element:I.jsx(qA,{})}),I.jsx(Ee,{path:"/admin/notifications",element:I.jsx(HA,{})}),I.jsx(Ee,{path:"/profile-settings",element:I.jsx(nx,{})}),I.jsx(Ee,{path:"/transactions",element:I.jsx(rx,{})}),I.jsx(Ee,{path:"/referrals",element:I.jsx(ix,{})}),I.jsx(Ee,{path:"/privacy-policy",element:I.jsx(cx,{})}),I.jsx(Ee,{path:"/cpanel",element:I.jsx(ox,{})}),I.jsx(Ee,{path:"/cpanel/login",element:I.jsx(ax,{})}),I.jsx(Ee,{path:"/auth-test",element:I.jsx(tx,{})}),I.jsx(Ee,{path:"/topup",element:I.jsx(df,{})}),I.jsx(Ee,{path:"/recharge",element:I.jsx(df,{})}),I.jsx(Ee,{path:"/merchant/*",element:I.jsx(JA,{})}),I.jsx(Ee,{path:"/dashboard/login",element:I.jsx(QA,{})}),I.jsx(Ee,{path:"/dashboard",element:I.jsx(YA,{})}),I.jsx(Ee,{path:"*",element:I.jsx(lx,{})})]})}),I.jsx(ux,{})]}):I.jsxs(R6,{children:[I.jsx(dx,{}),I.jsx(hx,{}),I.jsx(S.Suspense,{fallback:I.jsx(zw,{}),children:I.jsxs(vS,{children:[I.jsx(Ee,{path:"/",element:xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android"?I.jsx(fx,{}):I.jsx(uf,{})}),I.jsx(Ee,{path:"/dashboard-redirect",element:I.jsx(BA,{})}),I.jsx(Ee,{path:"/landing",element:I.jsx(uf,{})}),I.jsx(Ee,{path:"/subscriptions",element:I.jsx(zA,{})}),I.jsx(Ee,{path:"/auth",element:I.jsx(WA,{})}),I.jsx(Ee,{path:"/user/login",element:I.jsx(nm,{})}),I.jsx(Ee,{path:"/user/forgot-password",element:I.jsx(GA,{})}),I.jsx(Ee,{path:"/user/register",element:I.jsx(hf,{})}),I.jsx(Ee,{path:"/register",element:I.jsx(hf,{})}),I.jsx(Ee,{path:"/user/account-setup",element:I.jsx(KA,{})}),I.jsx(Ee,{path:"/user/pending-approval",element:I.jsx(XA,{})}),I.jsx(Ee,{path:"/user/dashboard",element:I.jsx(Wf,{})}),I.jsx(Ee,{path:"/user/add-wallet",element:I.jsx(sx,{})}),I.jsx(Ee,{path:"/admin/login",element:I.jsx(ZA,{})}),I.jsx(Ee,{path:"/admin/dashboard",element:I.jsx(ex,{})}),I.jsx(Ee,{path:"/admin/topups",element:I.jsx(qA,{})}),I.jsx(Ee,{path:"/admin/notifications",element:I.jsx(HA,{})}),I.jsx(Ee,{path:"/profile-settings",element:I.jsx(nx,{})}),I.jsx(Ee,{path:"/transactions",element:I.jsx(rx,{})}),I.jsx(Ee,{path:"/referrals",element:I.jsx(ix,{})}),I.jsx(Ee,{path:"/privacy-policy",element:I.jsx(cx,{})}),I.jsx(Ee,{path:"/cpanel",element:I.jsx(ox,{})}),I.jsx(Ee,{path:"/cpanel/login",element:I.jsx(ax,{})}),I.jsx(Ee,{path:"/auth-test",element:I.jsx(tx,{})}),I.jsx(Ee,{path:"/topup",element:I.jsx(df,{})}),I.jsx(Ee,{path:"/recharge",element:I.jsx(df,{})}),I.jsx(Ee,{path:"/merchant/*",element:I.jsx(JA,{})}),I.jsx(Ee,{path:"/dashboard/login",element:I.jsx(QA,{})}),I.jsx(Ee,{path:"/dashboard",element:I.jsx(YA,{})}),I.jsx(Ee,{path:"*",element:I.jsx(lx,{})})]})}),I.jsx(ux,{})]})]})})}),px=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},Hy=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await Z(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>bl);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},MK=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await Z(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>bl);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(p=>!!(p!=null&&p.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},R2=S.createContext(void 0),FK=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!1),[i,o]=S.useState(null),{profile:a,user:l}=Wa();S.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),p=localStorage.getItem("cashier_shift_active"),_=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),p&&s(p==="true"),_&&o(Number(_))}catch{}},[]),S.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=Ie(G,"cashierShift",a.shopId);let p=null;return(async()=>{try{(await Kt(f)).exists()||await tn(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),p=ui(f,m=>{if(m.exists()){const v=m.data(),E=(v==null?void 0:v.shiftUser)||null,y=!!(v!=null&&v.isShiftActive),w=(v==null?void 0:v.shiftStartAt)??null;let R=E;if(!R)try{const D=localStorage.getItem("cashier_shift_user"),L=D?JSON.parse(D):null;L&&(R=L)}catch{}n(R),s(y),o(typeof w=="number"?w:w?Number(w):null);try{R?localStorage.setItem("cashier_shift_user",JSON.stringify(R)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",y?"true":"false"),w!=null&&localStorage.setItem("cashier_shift_start_at",String(w))}catch{}}},m=>{console.warn("cashierShift snapshot error:",m)})}catch(_){console.warn("Failed to init cashierShift doc:",_)}})(),()=>{p&&p()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const p=Ie(G,"cashierShift",a.shopId);un(p,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const p=Ie(G,"cashierShift",a.shopId);un(p,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const _=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,m=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let E=localStorage.getItem(_);if(E==null){const w=localStorage.getItem(m);if(w!=null){E=w;try{localStorage.setItem(_,w),localStorage.removeItem(m)}catch{}}}if(E==null&&(l!=null&&l.uid)){const w=localStorage.getItem("cashBalance"),R=localStorage.getItem("userCashBalance");if(w!=null){try{localStorage.setItem(_,w),localStorage.removeItem("cashBalance")}catch{}E=w}else if(R!=null){try{localStorage.setItem(_,R),localStorage.removeItem("userCashBalance")}catch{}E=R}}const y=localStorage.getItem(v);E?localStorage.setItem("shiftStartDrawerFunds",E):localStorage.setItem("shiftStartDrawerFunds","0"),y?localStorage.setItem("shiftStartWalletBalances",y):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const p=Ie(G,"dashboardData",a.shopId),_=await Kt(p);if(_.exists()){const m=_.data(),v=Number((m==null?void 0:m.cashBalance)??0),E=(m==null?void 0:m.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),w=localStorage.getItem("shiftStartWalletBalances"),R=y?parseFloat(y):0,D=w?JSON.parse(w):{},L=!y||!Number.isFinite(R)||R===0,x=!w||Object.keys(D||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),x&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(E||{}))}catch{}}}catch(p){console.warn("Shift start Firebase read failed:",p)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=Ie(G,"cashierShift",a.shopId);un(f,{isShiftActive:!1})}}catch{}};return I.jsx(R2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},wG=()=>{const t=S.useContext(R2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{KO()}catch{}const UK=()=>{const{theme:t="system"}=M1();return S.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};YP(document.getElementById("root")).render(I.jsx(bU,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:I.jsx(Vq,{children:I.jsx(FK,{children:I.jsxs(IH,{children:[I.jsx(VK,{}),I.jsx(UK,{})]})})})}));export{Ms as $,IF as A,Ho as B,jn as C,lG as D,PF as E,rf as F,g5 as G,tn as H,tw as I,Ct as J,Kt as K,k6 as L,OF as M,JK as N,un as O,$w as P,xF as Q,j as R,hl as S,Nn as T,UF as U,S1 as V,$A as W,Hw as X,Kw as Y,Gw as Z,NK as _,Cc as a,Sj as a$,Xr as a0,Mr as a1,bc as a2,OM as a3,cy as a4,Yt as a5,xt as a6,kn as a7,G_ as a8,ks as a9,aq as aA,pq as aB,Qw as aC,Nc as aD,tG as aE,Mq as aF,Y1 as aG,ZK as aH,M1 as aI,zO as aJ,LF as aK,uG as aL,dG as aM,hG as aN,bq as aO,fG as aP,tH as aQ,$a as aR,bM as aS,SH as aT,P7 as aU,Tq as aV,bF as aW,DF as aX,jF as aY,X1 as aZ,BK as a_,DO as aa,Kq as ab,MF as ac,Z as ad,jf as ae,wG as af,EH as ag,xe as ah,LI as ai,SF as aj,tO as ak,OE as al,zw as am,FI as an,vS as ao,Ee as ap,Yi as aq,MI as ar,RF as as,cG as at,om as au,Fe as av,X_ as aw,C7 as ax,lq as ay,aG as az,XK as b,AO as b$,K_ as b0,vK as b1,ZP as b2,kH as b3,s2 as b4,pd as b5,QO as b6,Sm as b7,bj as b8,Aj as b9,t3 as bA,Zn as bB,HK as bC,QK as bD,DE as bE,oH as bF,ay as bG,pt as bH,vG as bI,Eq as bJ,gG as bK,RK as bL,CK as bM,yG as bN,I2 as bO,CM as bP,S2 as bQ,b2 as bR,DK as bS,T2 as bT,PK as bU,L6 as bV,YK as bW,CO as bX,Xo as bY,nH as bZ,pG as b_,JP as ba,AF as bb,si as bc,XM as bd,Kd as be,nG as bf,$O as bg,BO as bh,FF as bi,Xq as bj,Jq as bk,bn as bl,AA as bm,Yq as bn,Nm as bo,i3 as bp,Xj as bq,qK as br,Qv as bs,Xn as bt,Om as bu,Yj as bv,Jj as bw,_p as bx,yC as by,w3 as bz,H_ as c,Iq as c0,TF as c1,hn as c2,Lt as c3,nf as c4,sf as c5,Zq as c6,mG as c7,Ww as c8,Hq as d,Wq as e,At as f,qq as g,Re as h,G as i,I as j,He as k,ho as l,oG as m,fq as n,Cs as o,Ds as p,ze as q,S as r,Ue as s,VI as t,Wa as u,NF as v,CF as w,m5 as x,Ie as y,ui as z};
//# sourceMappingURL=index-tnWDkOuX.js.map
