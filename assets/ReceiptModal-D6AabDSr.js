import{l as Ce,u as ke,R as n,j as t,af as q,ag as K,ah as Z,ai as ee,as as Pe,C as Ee,f as Me,M as oe,B as f,at as Ie,au as ze,G as ce,H as me,J as pe,av as A,aw as Te,ax as De,ay as Le,az as Re,aA as _e,aB as Ae,h as Oe,y as Be,z as Fe}from"./index-CzMrJEuC.js";import{f as b}from"./SimCardsAccessDialog-p84rP6ZI.js";import{S as xe}from"./separator-CRdC0eUh.js";import{B as P}from"./badge-D-234tiw.js";import{h as fe}from"./html2canvas.esm-BfYXEYrK.js";import{C as We}from"./circle-check-big-CujdvfsP.js";import{P as Ue}from"./printer-BxRsauDr.js";import{D as Ve}from"./download-CJ061BPe.js";import"./select-DHMtOuee.js";const tt=({isOpen:he,onClose:E,transaction:e,onPrint:Ge,onDelete:O,onComplete:B})=>{const{toast:o}=Ce(),{profile:c}=ke(),m=(c==null?void 0:c.userId)||void 0,ue=n.useMemo(()=>{try{const s=m?`receiptNoteEnabled_${m}`:"receiptNoteEnabled",l=localStorage.getItem(s)??localStorage.getItem("receiptNoteEnabled");return l===null?!0:l==="true"}catch{return!0}},[m]),[ge,M]=n.useState(!1),[F,I]=n.useState(""),[W,z]=n.useState(!1),[te,j]=n.useState(""),[se,le]=n.useState(!1),[ye,$]=n.useState(!1),[U,S]=n.useState(""),[V,C]=n.useState(!1),[re,u]=n.useState(""),G=n.useRef(null),[ie,ae]=n.useState(!1),[g,H]=n.useState("");if(n.useEffect(()=>{if(!(e!=null&&e.receiver_msisdn))return;const s=x=>{let d=String(x||"").replace(/[^0-9]/g,"");return d.startsWith("20")&&(d="0"+d.slice(2)),d.startsWith("0")?d:/^(10|11|12|15)/.test(d)?"0"+d:d},l=m||"default",i=localStorage.getItem(`sim1Number_${l}`)||localStorage.getItem("sim1Number"),r=localStorage.getItem(`sim2Number_${l}`)||localStorage.getItem("sim2Number"),a=s(e.receiver_msisdn);i&&s(i)===a?H("SIM 1"):r&&s(r)===a?H("SIM 2"):H("")},[e,m]),!e)return null;const we=s=>{switch(s){case"completed":return t.jsx(P,{className:"bg-green-100 text-green-800 border-green-200",children:"Ù…ÙƒØªÙ…Ù„Ø©"});case"pending":return t.jsx(P,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"});case"failed":return t.jsx(P,{className:"bg-red-100 text-red-800 border-red-200",children:"ÙØ§Ø´Ù„Ø©"});default:return t.jsx(P,{className:"bg-gray-100 text-gray-800 border-gray-200",children:s})}},de=s=>s==="transfer"?"ØªØ­ÙˆÙŠÙ„":"Ø³Ø­Ø¨",Q=(()=>{const s=e,l=String((s==null?void 0:s.description)||""),i=String((s==null?void 0:s.title)||"");if(l.includes("ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙ†Ù‡")||l.includes("ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙŠÙ†Ù‡")||l.includes("machine transfer")||i.includes("ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙ†Ù‡")||i.includes("ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙŠÙ†Ù‡"))return"ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙŠÙ†Ù‡";if(String((s==null?void 0:s.txnType)||"").toLowerCase()==="sales"||String((s==null?void 0:s.type)||"").toLowerCase()==="sales"||i.includes("Ø¥ÙŠØµØ§Ù„ Ù…Ø¨ÙŠØ¹Ø§Øª")||String((s==null?void 0:s.senderMsisdn)||"")==="Ù…Ø¨ÙŠØ¹Ø§Øª")return"Ù…Ø¨ÙŠØ¹Ø§Øª";const r=i||de(e.type),a=String((s==null?void 0:s.provider)||"").toLowerCase(),x=String((s==null?void 0:s.note)||"").toLowerCase(),d=a.includes("vodafone")?"vf-cash":a.includes("instapay")?"instapay":"",v=x.includes("vodafone")?"vf-cash":x.includes("instapay")?"instapay":"",y=d||v;return r==="Ø³Ø­Ø¨"&&y?`Ø³Ø­Ø¨ ${y}`:r==="Ø¥ÙŠØµØ§Ù„ ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙŠÙ†Ù‡"?"ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙŠÙ†Ù‡":r})(),be=s=>new Date(s).toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=s=>{if((s==null?void 0:s.totalCharged)!==void 0&&(s==null?void 0:s.totalCharged)!==null)return Number(s.totalCharged)||0;const l=Number((s==null?void 0:s.commission)||0),i=Number((s==null?void 0:s.fee)||0),r=Number(s.amount||0),a=s==null?void 0:s.commissionMode,x=(s==null?void 0:s.type)||"transfer";return String(x)==="withdraw"||a==="add"?r+l+i:r},je=X(e),ve=s=>{switch(s){case"completed":return"Ù…ÙƒØªÙ…Ù„Ø©";case"pending":return"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©";case"failed":return"ÙØ§Ø´Ù„Ø©";default:return s}},Ne=()=>{try{const s=ve(e.status),l=Q,i=(e==null?void 0:e.shopName)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",r=(e==null?void 0:e.cashierName)||"",a=e.reference||e.id,x=new Date(e.createdAt).toLocaleString("ar-EG"),d=b(e.amount),v=b(e.commission||0),y=b((e==null?void 0:e.fee)||0),T=b(X(e)),k=String(e.note||"").trim(),D=String((c==null?void 0:c.phone)||"").trim(),J=(()=>{try{const Y=m?`receiptNoteEnabled_${m}`:"receiptNoteEnabled",R=localStorage.getItem(Y)??localStorage.getItem("receiptNoteEnabled");return R===null?!0:R==="true"}catch{return!0}})(),p=e.type==="withdraw"?"#dc2626":"#16a34a",L=`
        <div class="receipt-root" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 520px; margin: 0 auto; padding: 24px; background: #fff; direction: rtl;">
          <div style="text-align: center; margin-bottom: 20px; border-bottom: 2px solid ${p}; padding-bottom: 16px;">
            <h1 style="color: ${p}; margin: 0 0 6px 0; font-size: 26px;">Ø¥ÙŠØµØ§Ù„ ${l}</h1>
            <p style="color: #666; font-size: 14px; margin: 0;">Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹: ${a}</p>
            <p style="color: #888; font-size: 13px; margin: 6px 0 0 0;">${x}</p>
          </div>

          <div style="background: #f8fafc; border-radius: 12px; padding: 16px; margin-bottom: 16px;">
            <h3 style="color: #1e293b; margin: 0 0 12px 0; font-size: 16px;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø­Ù„</h3>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <span style="font-weight: 600; color: #475569;">Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„:</span>
              <span style="color: #1e293b;">${i}</span>
            </div>
            ${r?`<div style="display:flex; justify-content:space-between;">
              <span style="font-weight:600; color:#475569;">Ø§Ù„ÙƒØ§Ø´ÙŠØ±:</span>
              <span style="color:#1e293b;">${r}</span>
            </div>`:""}
          </div>

          <div style="background: #fff; border: 2px solid #e2e8f0; border-radius: 12px; padding: 16px;">
            <h3 style="color: #1e293b; margin: 0 0 12px 0; font-size: 16px;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</h3>

            <div style="display:flex; justify-content:space-between; margin-bottom:8px; padding:6px 0; border-bottom:1px solid #f1f5f9;">
              <span style="font-weight:600; color:#475569;">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©:</span>
              <span style="color:${p}; font-weight:600;">${l}</span>
            </div>

            <div style="display:flex; justify-content:space-between; margin-bottom:8px; padding:6px 0; border-bottom:1px solid #f1f5f9;">
              <span style="font-weight:600; color:#475569;">Ø§Ù„Ø­Ø§Ù„Ø©:</span>
              <span style="color:${e.status==="completed"?"#16a34a":e.status==="pending"?"#ca8a04":"#dc2626"}; font-weight:600;">${s}</span>
            </div>
            ${String((e==null?void 0:e.txnType)||"").toLowerCase()==="sales"||String((e==null?void 0:e.type)||"").toLowerCase()==="sales"?`
            <div style="display:flex; justify-content:space-between; margin-bottom:8px; padding:6px 0; border-bottom:1px solid #f1f5f9;">
              <span style="font-weight:600; color:#475569;">Ø§Ù„Ù…Ù†ØªØ¬:</span>
              <span style="font-weight:600; color:#1e293b;">${(e==null?void 0:e.saleProductName)||"Ù…Ù†ØªØ¬"}</span>
            </div>
            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">Ø§Ù„ÙƒÙ…ÙŠØ©:</span>
              <span style="font-weight:600; color:#1e293b;">${(e==null?void 0:e.saleQuantity)??""}</span>
            </div>
            `:""}

            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">Ù…Ù†:</span>
              <span style="font-family:monospace;">${Q.includes("ØªØ­ÙˆÙŠÙ„ Ù…ÙƒÙŠÙ†Ù‡")?e.senderName||"Ù…Ø§ÙƒÙŠÙ†Ø©":e.sender_msisdn}</span>
            </div>
            ${e!=null&&e.senderName?`<div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø³Ù„:</span>
              <span>${e.senderName}</span>
            </div>`:""}
            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">Ø¥Ù„Ù‰:</span>
              <div style="display:flex; align-items:center;">
                ${g?`<span style="background:${g==="SIM 1"?"#eff6ff":"#f3e8ff"}; color:${g==="SIM 1"?"#1d4ed8":"#7e22ce"}; padding:2px 6px; border-radius:4px; font-size:11px; margin-left:6px; border:1px solid ${g==="SIM 1"?"#bfdbfe":"#e9d5ff"}; font-weight:bold;">${g}</span>`:""}
                <span style="font-family:monospace;">${e.receiver_msisdn}</span>
              </div>
            </div>

            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">Ø§Ù„Ù…Ø¨Ù„Øº:</span>
              <span style="font-weight:600;" dir="ltr"><span style="font-family:monospace;">${d}</span>&nbsp;Ø¬Ù†ÙŠÙ‡</span>
            </div>
            ${e.commission>0?`<div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©:</span>
              <span dir="ltr"><span style="font-family:monospace;">${v}</span>&nbsp;Ø¬Ù†ÙŠÙ‡</span>
            </div>`:""}
            ${((e==null?void 0:e.fee)||0)>0?`<div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">Ø§Ù„Ø±Ø³ÙˆÙ…:</span>
              <span dir="ltr"><span style="font-family:monospace;">${y}</span>&nbsp;Ø¬Ù†ÙŠÙ‡</span>
            </div>`:""}

            <div style="display:flex; justify-content:space-between; margin-top:10px; font-weight:700; font-size:16px;">
              <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
              <span style="color:${p};" dir="ltr"><span style="font-family:monospace;">${T}</span>&nbsp;Ø¬Ù†ÙŠÙ‡</span>
            </div>
          </div>
          ${J&&k?`
          <div style="background:#eff6ff; border:1px solid #bfdbfe; border-radius:10px; padding:12px; margin-top:12px; display:flex; gap:8px;">
            <div style="color:${p};">ğŸ—’ï¸</div>
            <div style="color:${p}; font-size:13px; word-break:break-word;">${k}</div>
          </div>
          `:""}
          <div style="margin-top: 16px; font-size: 13px; color: #475569; border-top: 1px solid #e2e8f0; padding-top: 10px; text-align: center;">
            ${D?`
            <div>
              ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ¬ÙˆØ¯ Ø£ÙŠ Ø´ÙƒÙˆÙ‰ Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø­Ù„ Ø¹Ù„Ù‰ Ø±Ù‚Ù…: <span style="direction:ltr; unicode-bidi:embed; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;">${D}</span>
            </div>
            `:""}
            <div style="margin-top:6px;">
              <a href="https://cashy-link.com" target="_blank" style="font-size: 12px; color: ${p}; text-decoration: none; direction: ltr; unicode-bidi: embed; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;">cashy-link.com</a>
            </div>
          </div>
        </div>
      `,N=window.open("","_blank");if(!N)return;N.document.write(`
        <html>
          <head>
            <title>Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© - ${a}</title>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <style>
              body { margin: 0; padding: 20px; background: #f8fafc; }
              @media print { body { background: white; } }
              .receipt-root, .receipt-root * { color: ${p} !important; }
            </style>
          </head>
          <body dir="rtl">
            ${L}
          </body>
        </html>
      `),N.document.close(),N.print()}catch{}},$e=async()=>{var s;try{const l=e.type==="transfer"?e.receiver_msisdn:e.sender_msisdn,i=Te(l);if(!De(i)){o({title:"Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ØºÙŠØ± ØµØ§Ù„Ø­",description:`Ø§Ù„Ø±Ù‚Ù…: ${l}`,duration:3e3});return}const r=G.current;if(!r){o({title:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¥ÙŠØµØ§Ù„",description:"Ø£Ø¹Ø¯ ÙØªØ­ Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø«Ù… Ø­Ø§ÙˆÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©",duration:3e3});return}try{await((s=document.fonts)==null?void 0:s.ready)}catch{}const a=1080,x=Math.max(2,Math.ceil(window.devicePixelRatio||1)),d=await fe(r,{scale:x,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:r.scrollWidth,height:r.scrollHeight,scrollX:0,scrollY:0});let v=d;try{const h=d.height/d.width,w=document.createElement("canvas");w.width=a,w.height=Math.round(a*h);const _=w.getContext("2d");_&&(_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(d,0,0,w.width,w.height),v=w)}catch{}const y=await new Promise(h=>v.toBlob(h,"image/png"));if(!y){o({title:"ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„",duration:3e3});return}const T=`receipt-${e.reference||e.id}.png`,k=new File([y],T,{type:"image/png"});if(navigator.canShare&&navigator.canShare({files:[k]}))try{await navigator.share({files:[k],title:"ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„",text:"ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"})}catch{}const D=Le(),J=`public/receipts/${T}`,p=Re(D,J);await _e(p,y,{contentType:"image/png"});const L=await Ae(p),N=de(e.type),Y=e.reference||e.id,R=X(e),ne=`Ø¥ÙŠØµØ§Ù„ ${N} - Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${R}Â Ø¬Ù†ÙŠÙ‡ - Ø§Ù„Ù…Ø±Ø¬Ø¹: ${Y||""}`;try{const h=`${ne}
${L}`,w=Oe(i,h);window.open(w,"_blank")}catch{}try{await Be(Fe,"sendWhatsAppImage")({to:i,imageUrl:L,caption:ne}),o({title:"ØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§",description:"ØªÙ… ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ ÙˆØ³ÙŠØµÙ„Ù‡ Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø£ÙŠØ¶Ù‹Ø§",duration:3e3})}catch{o({title:"ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§",description:"ØªÙ… ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©Ø› ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Cloud API Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ",duration:4e3})}}catch{o({title:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©",description:"Ø¬Ø±Ù‘Ø¨ Ù…Ø¬Ø¯Ø¯Ø§Ù‹",duration:3e3})}},Se=async()=>{try{const s=G.current;if(!s){o({title:"ØªØ¹Ø°Ù‘Ø± Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠØµØ§Ù„",description:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥ÙŠØµØ§Ù„",duration:3e3});return}const i=(await fe(s,{scale:2,useCORS:!0,backgroundColor:"#ffffff"})).toDataURL("image/png"),r=`receipt-${e.reference||e.id}.png`,a=document.createElement("a");a.href=i,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),o({title:"ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠØµØ§Ù„",description:`ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©: ${r}`,duration:2e3})}catch{o({title:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠØµØ§Ù„",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©",duration:3e3})}};return t.jsxs(t.Fragment,{children:[t.jsx(q,{open:he,onOpenChange:E,children:t.jsxs(K,{className:"max-w-md md:max-w-sm w-full mx-auto overflow-hidden md:scale-[0.95] lg:scale-[0.9]",dir:"rtl",children:[t.jsx(Z,{className:"text-center",children:t.jsxs(ee,{className:`flex items-center justify-center gap-2 text-xl md:text-lg font-bold ${e.type==="withdraw"?"text-red-600":"text-green-600"}`,children:[t.jsx(Pe,{className:"h-6 w-6"}),"Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"]})}),t.jsx("div",{ref:G,children:t.jsx(Ee,{className:"border-2 border-primary/20 overflow-hidden rounded-xl",children:t.jsxs(Me,{className:"p-6 md:p-4 space-y-4 md:space-y-3 break-words md:text-[13px]",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h3",{className:`text-lg font-bold ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"cashy link"}),t.jsxs("p",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:["Ø¥ÙŠØµØ§Ù„ ",Q]}),we(e.status),(e==null?void 0:e.shopName)&&t.jsxs("p",{className:`text-sm font-semibold ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:["Ø§Ù„Ù…Ø­Ù„: ",e.shopName]}),(e==null?void 0:e.cashierName)&&t.jsxs("p",{className:`text-xs ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:["Ø§Ù„ÙƒØ§Ø´ÙŠØ±: ",e.cashierName]})]}),t.jsx(xe,{}),t.jsxs("div",{className:"space-y-3 break-words",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©:"}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.id})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ù…Ù†:"}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.sender_msisdn})]}),(e==null?void 0:e.senderName)&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø³Ù„:"}),t.jsx("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:e.senderName})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø¥Ù„Ù‰:"}),t.jsxs("div",{className:"flex items-center gap-2",children:[g&&t.jsx(P,{variant:"outline",className:`${g==="SIM 1"?"bg-blue-50 text-blue-700 border-blue-200":"bg-purple-50 text-purple-700 border-purple-200"} h-5 px-1.5 text-[10px]`,children:g}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.receiver_msisdn})]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ù„Ù…Ø¨Ù„Øº:"}),t.jsxs("span",{className:`text-sm font-semibold ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(e.amount)}),"Â Ø¬Ù†ÙŠÙ‡"]})]}),e.commission>0&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©:"}),t.jsxs("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(e.commission||0)}),"Â Ø¬Ù†ÙŠÙ‡"]})]}),((e==null?void 0:e.fee)||0)>0&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ù„Ø±Ø³ÙˆÙ…:"}),t.jsxs("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(e.fee||0)}),"Â Ø¬Ù†ÙŠÙ‡"]})]}),(String((e==null?void 0:e.txnType)||"").toLowerCase()==="sales"||String((e==null?void 0:e.type)||"").toLowerCase()==="sales")&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ù„Ù…Ù†ØªØ¬:"}),t.jsx("span",{className:`text-sm font-semibold ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:(e==null?void 0:e.saleProductName)||"Ù…Ù†ØªØ¬"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ù„ÙƒÙ…ÙŠØ©:"}),t.jsx("span",{className:`text-sm font-semibold ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:(e==null?void 0:e.saleQuantity)??""})]})]}),t.jsx(xe,{}),t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg md:text-base",children:[t.jsx("span",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:"}),t.jsxs("span",{className:`${e.type==="withdraw"?"text-red-600":"text-green-600"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(je)}),"Â Ø¬Ù†ÙŠÙ‡"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ù„ØªØ§Ø±ÙŠØ®:"}),t.jsx("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:be(e.createdAt)})]}),e.reference&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"Ø§Ù„Ù…Ø±Ø¬Ø¹:"}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.reference})]})]}),ue&&String(e.note||"").trim()&&t.jsxs("div",{className:`p-3 rounded-md border flex gap-2 ${e.type==="withdraw"?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:[t.jsx(oe,{className:`h-4 w-4 ${e.type==="withdraw"?"text-red-600":"text-green-600"}`}),t.jsx("div",{className:`text-sm break-words ${e.type==="withdraw"?"text-red-800":"text-green-800"}`,children:String(e.note||"").trim()})]}),t.jsxs("div",{className:`pt-2 mt-2 border-t text-xs text-center ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:[String((c==null?void 0:c.phone)||"").trim()&&t.jsxs("div",{children:["ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ¬ÙˆØ¯ Ø£ÙŠ Ø´ÙƒÙˆÙ‰ Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø­Ù„ Ø¹Ù„Ù‰ Ø±Ù‚Ù…: ",t.jsx("span",{dir:"ltr",className:"font-mono",children:String((c==null?void 0:c.phone)||"").trim()})]}),t.jsx("a",{href:"https://cashy-link.com",target:"_blank",rel:"noopener noreferrer",dir:"ltr",className:`block mt-1 hover:underline font-mono ${e.type==="withdraw"?"text-red-600":"text-green-600"}`,children:"cashy-link.com"})]})]})})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 pt-3",children:[O&&t.jsx(f,{onClick:()=>{j(""),I(""),z(!1),M(!0)},variant:"destructive",size:"sm","aria-label":"Ø­Ø°Ù Ø§Ù„Ø¥ÙŠØµØ§Ù„",title:"Ø­Ø°Ù Ø§Ù„Ø¥ÙŠØµØ§Ù„",className:"w-full h-9 px-2 justify-center",children:t.jsx(Ie,{className:"h-4 w-4"})}),B&&e.status==="pending"&&t.jsxs(f,{onClick:()=>{u(""),S(""),C(!1),$(!0)},className:"w-full h-9 px-3 bg-emerald-600 hover:bg-emerald-700 text-white",size:"sm",children:[t.jsx(We,{className:"h-4 w-4 mr-1"}),"Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"]}),t.jsx(f,{onClick:$e,className:"w-full h-9 px-2 bg-green-600 hover:bg-green-700 text-white justify-center",size:"sm","aria-label":"Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",title:"Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",children:t.jsx(oe,{className:"h-4 w-4"})}),t.jsx(f,{onClick:Ne,className:"w-full h-9 px-2 bg-blue-600 hover:bg-blue-700 text-white justify-center",size:"sm","aria-label":"Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„",title:"Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„",children:t.jsx(Ue,{className:"h-4 w-4"})}),t.jsx(f,{onClick:Se,variant:"outline",size:"sm","aria-label":"Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠØµØ§Ù„",title:"Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠØµØ§Ù„",className:"w-full h-9 px-2 justify-center",children:t.jsx(Ve,{className:"h-4 w-4"})}),t.jsx(f,{onClick:E,variant:"outline",size:"sm","aria-label":"Ø¥ØºÙ„Ø§Ù‚",title:"Ø¥ØºÙ„Ø§Ù‚",className:"w-full h-9 px-2 justify-center",children:t.jsx(ze,{className:"h-4 w-4"})})]})]})}),t.jsx(q,{open:ge,onOpenChange:M,children:t.jsxs(K,{className:"sm:max-w-md",dir:"rtl",children:[t.jsx(Z,{children:t.jsxs(ee,{className:"flex items-center gap-2 text-center justify-center",children:[t.jsx(ce,{className:"h-5 w-5 text-red-600"}),"ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"]})}),t.jsx("div",{className:"text-center text-sm text-gray-600 mb-4",children:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù„ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"deletePin",className:"text-right block",children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"deletePin",type:W?"text":"password",autoComplete:"off",value:F,onChange:s=>I(s.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ",className:"pr-10 w-full border rounded-md h-10 px-3",dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>z(!W),className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:W?t.jsx(me,{className:"h-4 w-4"}):t.jsx(pe,{className:"h-4 w-4"})})]})]}),te&&t.jsx("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:te}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx(f,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{M(!1),I(""),j(""),z(!1)},disabled:se,children:"Ø¥Ù„ØºØ§Ø¡"}),t.jsx(f,{type:"button",className:"flex-1 bg-red-600 hover:bg-red-700",disabled:se,onClick:async()=>{j(""),le(!0);try{if(!await A.hasMasterPin(m)){j("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± Ù…ÙØ¹ÙŠÙÙ‘Ù†ØŒ ÙŠØ±Ø¬Ù‰ ØªØ¹ÙŠÙŠÙ†Ù‡ Ø£ÙˆÙ„Ø§Ù‹"),o({title:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± Ù…ÙØ¹ÙŠÙÙ‘Ù†",description:"ÙŠØ±Ø¬Ù‰ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù…Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø³Ø±ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø°Ù.",variant:"destructive"});return}if(!F){j("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ");return}if(!await A.verifyMasterPin(F,m)){j("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­"),o({title:"Ø±Ù‚Ù… Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­",description:"ØªØ¹Ø°Ø± ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø°Ù Ø¨Ø³Ø¨Ø¨ Ø±Ù‚Ù… Ø³Ø±ÙŠ Ø®Ø§Ø·Ø¦.",variant:"destructive"});return}try{O&&e&&O(e.id),M(!1),I(""),j(""),z(!1),E()}catch{}}finally{le(!1)}},children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù"})]})]})]})}),t.jsx(q,{open:ye,onOpenChange:s=>{s?$(!0):($(!1),S(""),u(""),C(!1))},children:t.jsxs(K,{className:"sm:max-w-md",dir:"rtl",children:[t.jsx(Z,{children:t.jsxs(ee,{className:"flex items-center gap-2 text-center justify-center",children:[t.jsx(ce,{className:"h-5 w-5 text-emerald-600"}),"ØªØ£ÙƒÙŠØ¯ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"]})}),t.jsx("div",{className:"text-center text-sm text-gray-600 mb-4",children:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù„ØªØ£ÙƒÙŠØ¯ Ø¥ÙƒÙ…Ø§Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ù…Ø¤Ø¬Ù„Ø©"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"completePin",className:"text-right block",children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"completePin",type:V?"text":"password",autoComplete:"off",value:U,onChange:s=>S(s.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ",className:"pr-10 w-full border rounded-md h-10 px-3",dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>C(!V),className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:V?t.jsx(me,{className:"h-4 w-4"}):t.jsx(pe,{className:"h-4 w-4"})})]})]}),re&&t.jsx("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:re}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx(f,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{$(!1),S(""),u(""),C(!1)},disabled:ie,children:"Ø¥Ù„ØºØ§Ø¡"}),t.jsx(f,{type:"button",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:ie,onClick:async()=>{u(""),ae(!0);try{if(!await A.hasMasterPin(m)){u("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± Ù…ÙØ¹ÙŠÙÙ‘Ù†ØŒ ÙŠØ±Ø¬Ù‰ ØªØ¹ÙŠÙŠÙ†Ù‡ Ø£ÙˆÙ„Ø§Ù‹"),o({title:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± Ù…ÙØ¹ÙŠÙÙ‘Ù†",description:"ÙŠØ±Ø¬Ù‰ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù…Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø³Ø±ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„.",variant:"destructive"});return}if(!U){u("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ");return}if(!await A.verifyMasterPin(U,m)){u("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­"),o({title:"Ø±Ù‚Ù… Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­",description:"ØªØ¹Ø°Ø± ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø¨Ø³Ø¨Ø¨ Ø±Ù‚Ù… Ø³Ø±ÙŠ Ø®Ø§Ø·Ø¦.",variant:"destructive"});return}try{B&&e&&B(e.id),$(!1),S(""),u(""),C(!1),E()}catch{}}finally{ae(!1)}},children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„"})]})]})]})})]})};export{tt as default};
//# sourceMappingURL=ReceiptModal-D6AabDSr.js.map
