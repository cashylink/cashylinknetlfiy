const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-Ck_thcuJ-BiJcasai.js","./card-SlwaggFS-CAdsFCUe.js","./BrandLogo-BV6Nd5YH-BylwUelN.js","./brandingService-C3FKjfeb-arb6OpRj.js","./whatsappService-D7s14JCG-CHFrP19C.js","./arrow-left-BDVMu6ut-Bh3YlyBY.js","./star-CXUVfJ8s-CXzfOlXH.js","./crown-Bkdmlc37-LFwz8dsS.js","./download-DFIibxe--BxHqrDcR.js","./zap-CQJoEO-g-C2hv6kwh.js","./shield-DSoskD-c-Cy9u9Dod.js","./chart-column-DoUryAXS-BdNWdJcU.js","./circle-check-big-DcMEd0KV-kvVPwXiq.js","./SubscriptionsPage-BW6M_1kO-3tWWvnmC.js","./contentService-Cxdf08Uc-DC8T435J.js","./calendar-DYpYXkMW-opeuviNG.js","./AuthPage-Bk33vzoa-6dYamBzu.js","./TopUpPage-D1sGJ46Q-Dyn2XGKk.js","./select-QKdc2TYn-CHN9ZvrB.js","./AdminTopupsPage-2d09w3qZ-BVhMex6M.js","./AdminNotificationsPage-DrTU2ja9-BsABTxfv.js","./label-_mnIMROJ-DCx9a6ad.js","./textarea-DK4Tmvmm-BLT-W9oy.js","./link-BcnlpFfX-0X6LnnsC.js","./UserRegisterPage-BkStJ7GT-C5fh_Ph1.js","./alert-NHJmLZVr-DrufTycw.js","./wallet-MP5ofXFw-CDPV0DMK.js","./user-plus-ClfWlz3y-BefGpS5r.js","./phone-fkjnGVtI-D5yZCm03.js","./store-i3EEOQHb-BqQT5qw5.js","./UserAccountSetupPage-DfkNvLbN-z4cczItS.js","./DashboardLoginPage-Dx1dVP9h-Bb8eHzVY.js","./ProtectedDashboard-C8t-KjRB-DudbAKrz.js","./badge-Cq-GDK1F-DDXBwU_3.js","./MasterPinDialog-CDin1iyv-DlTaZHso.js","./circle-alert-BbiXZQj6-CYYPNIuO.js","./profitService-4r9FqAF7-CduXHB_-.js","./dollar-sign-bNLkxbzG-DZad4YjE.js","./circle-x-CAZlwHZs-DZdNBdmE.js","./ProtectedUserDashboard-C-4M1qmw-Cd43hNsh.js","./broadcastService-DGqqg97J-DRJTOIRh.js","./MerchantDashboard-MhD3X7nR-BEquAvEY.js","./dropdown-menu-MkPhHRIa-CyVuRxiX.js","./index-CS8iiUxP-G3EfImZz.js","./WalletsManagement-B4QYl-Sx-CNmEEzPU.js","./progress-BOoGedvV-B6WhIHhL.js","./square-pen-CHl7RpbW-BMzFK7_G.js","./PendingApprovalPage-Cwm_Vl7i-BRxxKWZd.js","./freeTrialService-BwabY7bi-Do-h6uD3.js","./AdminLogin-K9PWWH_Q-DH1-xAKl.js","./ProtectedAdminDashboard-B6elE5YX-CKyuwSd4.js","./ProfileIcon-DCyirBaq-_qtyOTam.js","./switch-CNGODERG-BZo1O1B3.js","./separator-Dk6MyxBB-NxpaJVcK.js","./save-DZtCbiME-Dh0ZOdVa.js","./users-D_RD5-UM-wUG5gghE.js","./AuthTestPage-DIITkwbv-xUUTcmQe.js","./ProfileSettingsPage-B-oVcHqn-B0T1w4hD.js","./walletSelectionPinService-DoL5ZSmj-2gN5ExkA.js","./TransactionsPage-ByCAGb8I-D2VC8Ull.js","./MaintenanceDialog-BLQvmu15-BOct_vhE.js","./WalletAdditionPage-C24d5nZ3-BQHsSbCA.js","./ReferralsPage-D564qIVT-DAsrUuh_.js","./CPanelPage-DnPtgr8M-CtMbrlwV.js","./CPanelLoginPage-Zrepfhau-pOVr-oQE.js","./UserDashboardPage-BRKQ-meY-DTnfM6w2.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const eM="modulepreload",tM=function(t,e){return new URL(t,e).href},B1={},dt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=tM(c,r),c in B1)return;B1[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let w=a.length-1;w>=0;w--){const m=a[w];if(m.href===c&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":eM,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((w,m)=>{f.addEventListener("load",w),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Ct=(t,e=Ct,n=e.f||(e.f=["./LandingPage-Ck_thcuJ.js","./card-SlwaggFS.js","./BrandLogo-BV6Nd5YH.js","./brandingService-C3FKjfeb.js","./whatsappService-D7s14JCG.js","./arrow-left-BDVMu6ut.js","./star-CXUVfJ8s.js","./crown-Bkdmlc37.js","./download-DFIibxe-.js","./zap-CQJoEO-g.js","./shield-DSoskD-c.js","./chart-column-DoUryAXS.js","./circle-check-big-DcMEd0KV.js","./SubscriptionsPage-BW6M_1kO.js","./contentService-Cxdf08Uc.js","./calendar-DYpYXkMW.js","./AuthPage-Bk33vzoa.js","./TopUpPage-D1sGJ46Q.js","./select-QKdc2TYn.js","./AdminTopupsPage-2d09w3qZ.js","./AdminNotificationsPage-DrTU2ja9.js","./label-_mnIMROJ.js","./textarea-DK4Tmvmm.js","./link-BcnlpFfX.js","./UserRegisterPage-BkStJ7GT.js","./alert-NHJmLZVr.js","./wallet-MP5ofXFw.js","./user-plus-ClfWlz3y.js","./phone-fkjnGVtI.js","./store-i3EEOQHb.js","./UserAccountSetupPage-DfkNvLbN.js","./DashboardLoginPage-Dx1dVP9h.js","./ProtectedDashboard-C8t-KjRB.js","./badge-Cq-GDK1F.js","./MasterPinDialog-CDin1iyv.js","./circle-alert-BbiXZQj6.js","./profitService-4r9FqAF7.js","./dollar-sign-bNLkxbzG.js","./circle-x-CAZlwHZs.js","./ProtectedUserDashboard-C-4M1qmw.js","./broadcastService-DGqqg97J.js","./MerchantDashboard-MhD3X7nR.js","./dropdown-menu-MkPhHRIa.js","./index-CS8iiUxP.js","./WalletsManagement-B4QYl-Sx.js","./progress-BOoGedvV.js","./square-pen-CHl7RpbW.js","./PendingApprovalPage-Cwm_Vl7i.js","./freeTrialService-BwabY7bi.js","./AdminLogin-K9PWWH_Q.js","./ProtectedAdminDashboard-B6elE5YX.js","./ProfileIcon-DCyirBaq.js","./switch-CNGODERG.js","./separator-Dk6MyxBB.js","./save-DZtCbiME.js","./users-D_RD5-UM.js","./AuthTestPage-DIITkwbv.js","./ProfileSettingsPage-B-oVcHqn.js","./walletSelectionPinService-DoL5ZSmj.js","./TransactionsPage-ByCAGb8I.js","./MaintenanceDialog-BLQvmu15.js","./WalletAdditionPage-C24d5nZ3.js","./ReferralsPage-D564qIVT.js","./CPanelPage-DnPtgr8M.js","./CPanelLoginPage-Zrepfhau.js","./UserDashboardPage-BRKQ-meY.js"]))=>t.map(r=>n[r]);var nM=Object.defineProperty,rk=t=>{throw TypeError(t)},rM=(t,e,n)=>e in t?nM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z1=(t,e,n)=>rM(t,typeof e!="symbol"?e+"":e,n),i0=(t,e,n)=>e.has(t)||rk("Cannot "+n),H=(t,e,n)=>(i0(t,e,"read from private field"),n?n.call(t):e.get(t)),lt=(t,e,n)=>e.has(t)?rk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(i0(t,e,"write to private field"),e.set(t,n),n),Zn=(t,e,n)=>(i0(t,e,"access private method"),n),rv=(t,e,n,r)=>({set _(s){Qe(t,e,s)},get _(){return H(t,e,r)}});function sM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function sk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ik={exports:{}},bm={},ak={exports:{}},nt={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var qd=Symbol.for("react.element"),iM=Symbol.for("react.portal"),aM=Symbol.for("react.fragment"),oM=Symbol.for("react.strict_mode"),lM=Symbol.for("react.profiler"),cM=Symbol.for("react.provider"),uM=Symbol.for("react.context"),dM=Symbol.for("react.forward_ref"),hM=Symbol.for("react.suspense"),fM=Symbol.for("react.memo"),pM=Symbol.for("react.lazy"),$1=Symbol.iterator;function mM(t){return t===null||typeof t!="object"?null:(t=$1&&t[$1]||t["@@iterator"],typeof t=="function"?t:null)}var ok={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lk=Object.assign,ck={};function yc(t,e,n){this.props=t,this.context=e,this.refs=ck,this.updater=n||ok}yc.prototype.isReactComponent={};yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uk(){}uk.prototype=yc.prototype;function a0(t,e,n){this.props=t,this.context=e,this.refs=ck,this.updater=n||ok}var o0=a0.prototype=new uk;o0.constructor=a0;lk(o0,yc.prototype);o0.isPureReactComponent=!0;var W1=Array.isArray,dk=Object.prototype.hasOwnProperty,l0={current:null},hk={key:!0,ref:!0,__self:!0,__source:!0};function fk(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)dk.call(e,r)&&!hk.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:qd,type:t,key:i,ref:a,props:s,_owner:l0.current}}function gM(t,e){return{$$typeof:qd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function c0(t){return typeof t=="object"&&t!==null&&t.$$typeof===qd}function yM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var q1=/\/+/g;function qg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yM(""+t.key):e.toString(36)}function gf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qd:case iM:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+qg(a,0):r,W1(s)?(n="",t!=null&&(n=t.replace(q1,"$&/")+"/"),gf(s,e,n,"",function(c){return c})):s!=null&&(c0(s)&&(s=gM(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(q1,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",W1(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+qg(i,o);a+=gf(i,e,n,l,s)}else if(l=mM(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+qg(i,o++),a+=gf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function kh(t,e,n){if(t==null)return t;var r=[],s=0;return gf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function vM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},yf={transition:null},wM={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:yf,ReactCurrentOwner:l0};function pk(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:kh,forEach:function(t,e,n){kh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kh(t,function(){e++}),e},toArray:function(t){return kh(t,function(e){return e})||[]},only:function(t){if(!c0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=yc;nt.Fragment=aM;nt.Profiler=lM;nt.PureComponent=a0;nt.StrictMode=oM;nt.Suspense=hM;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wM;nt.act=pk;nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lk({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=l0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)dk.call(e,l)&&!hk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:qd,type:t.type,key:s,ref:i,props:r,_owner:a}};nt.createContext=function(t){return t={$$typeof:uM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cM,_context:t},t.Consumer=t};nt.createElement=fk;nt.createFactory=function(t){var e=fk.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:dM,render:t}};nt.isValidElement=c0;nt.lazy=function(t){return{$$typeof:pM,_payload:{_status:-1,_result:t},_init:vM}};nt.memo=function(t,e){return{$$typeof:fM,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=yf.transition;yf.transition={};try{t()}finally{yf.transition=e}};nt.unstable_act=pk;nt.useCallback=function(t,e){return rr.current.useCallback(t,e)};nt.useContext=function(t){return rr.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};nt.useEffect=function(t,e){return rr.current.useEffect(t,e)};nt.useId=function(){return rr.current.useId()};nt.useImperativeHandle=function(t,e,n){return rr.current.useImperativeHandle(t,e,n)};nt.useInsertionEffect=function(t,e){return rr.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return rr.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return rr.current.useMemo(t,e)};nt.useReducer=function(t,e,n){return rr.current.useReducer(t,e,n)};nt.useRef=function(t){return rr.current.useRef(t)};nt.useState=function(t){return rr.current.useState(t)};nt.useSyncExternalStore=function(t,e,n){return rr.current.useSyncExternalStore(t,e,n)};nt.useTransition=function(){return rr.current.useTransition()};nt.version="18.3.1";ak.exports=nt;var _=ak.exports;const V=sk(_),u0=sM({__proto__:null,default:V},[_]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var bM=_,SM=Symbol.for("react.element"),EM=Symbol.for("react.fragment"),IM=Object.prototype.hasOwnProperty,_M=bM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xM={key:!0,ref:!0,__self:!0,__source:!0};function mk(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)IM.call(e,r)&&!xM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:SM,type:t,key:i,ref:a,props:s,_owner:_M.current}}bm.Fragment=EM;bm.jsx=mk;bm.jsxs=mk;ik.exports=bm;var I=ik.exports,gk={exports:{}},Pr={},yk={exports:{}},vk={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(U,M){var Q=U.length;U.push(M);e:for(;0<Q;){var Ee=Q-1>>>1,oe=U[Ee];if(0<s(oe,M))U[Ee]=M,U[Q]=oe,Q=Ee;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var M=U[0],Q=U.pop();if(Q!==M){U[0]=Q;e:for(var Ee=0,oe=U.length,he=oe>>>1;Ee<he;){var ue=2*(Ee+1)-1,Be=U[ue],Fe=ue+1,ce=U[Fe];if(0>s(Be,Q))Fe<oe&&0>s(ce,Be)?(U[Ee]=ce,U[Fe]=Q,Ee=Fe):(U[Ee]=Be,U[ue]=Q,Ee=ue);else if(Fe<oe&&0>s(ce,Q))U[Ee]=ce,U[Fe]=Q,Ee=Fe;else break e}}return M}function s(U,M){var Q=U.sortIndex-M.sortIndex;return Q!==0?Q:U.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,h=null,p=3,f=!1,w=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=U)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function C(U){if(m=!1,E(U),!w)if(n(l)!==null)w=!0,fe(O);else{var M=n(c);M!==null&&de(C,M.startTime-U)}}function O(U,M){w=!1,m&&(m=!1,v(T),T=-1),f=!0;var Q=p;try{for(E(M),h=n(l);h!==null&&(!(h.expirationTime>M)||U&&!R());){var Ee=h.callback;if(typeof Ee=="function"){h.callback=null,p=h.priorityLevel;var oe=Ee(h.expirationTime<=M);M=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(l)&&r(l),E(M)}else r(l);h=n(l)}if(h!==null)var he=!0;else{var ue=n(c);ue!==null&&de(C,ue.startTime-M),he=!1}return he}finally{h=null,p=Q,f=!1}}var L=!1,x=null,T=-1,k=5,D=-1;function R(){return!(t.unstable_now()-D<k)}function P(){if(x!==null){var U=t.unstable_now();D=U;var M=!0;try{M=x(!0,U)}finally{M?N():(L=!1,x=null)}}else L=!1}var N;if(typeof y=="function")N=function(){y(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,le=$.port2;$.port1.onmessage=P,N=function(){le.postMessage(null)}}else N=function(){b(P,0)};function fe(U){x=U,L||(L=!0,N())}function de(U,M){T=b(function(){U(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||f||(w=!0,fe(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var Q=p;p=M;try{return U()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,M){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=p;p=U;try{return M()}finally{p=Q}},t.unstable_scheduleCallback=function(U,M,Q){var Ee=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Ee+Q:Ee):Q=Ee,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Q+oe,U={id:d++,callback:M,priorityLevel:U,startTime:Q,expirationTime:oe,sortIndex:-1},Q>Ee?(U.sortIndex=Q,e(c,U),n(l)===null&&U===n(c)&&(m?(v(T),T=-1):m=!0,de(C,Q-Ee))):(U.sortIndex=oe,e(l,U),w||f||(w=!0,fe(O))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var M=p;return function(){var Q=p;p=M;try{return U.apply(this,arguments)}finally{p=Q}}}})(vk);yk.exports=vk;var TM=yk.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var kM=_,Ar=TM;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wk=new Set,nd={};function Mo(t,e){Vl(t,e),Vl(t+"Capture",e)}function Vl(t,e){for(nd[t]=e,t=0;t<e.length;t++)wk.add(e[t])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sv=Object.prototype.hasOwnProperty,CM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H1={},K1={};function DM(t){return sv.call(K1,t)?!0:sv.call(H1,t)?!1:CM.test(t)?K1[t]=!0:(H1[t]=!0,!1)}function NM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AM(t,e,n,r){if(e===null||typeof e>"u"||NM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var On={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){On[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];On[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){On[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){On[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){On[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){On[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){On[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){On[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){On[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var d0=/[\-:]([a-z])/g;function h0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(d0,h0);On[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(d0,h0);On[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(d0,h0);On[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){On[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});On.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){On[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function f0(t,e,n,r){var s=On.hasOwnProperty(e)?On[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AM(e,n,s,r)&&(n=null),r||s===null?DM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pi=kM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ch=Symbol.for("react.element"),ml=Symbol.for("react.portal"),gl=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),iv=Symbol.for("react.profiler"),bk=Symbol.for("react.provider"),Sk=Symbol.for("react.context"),m0=Symbol.for("react.forward_ref"),av=Symbol.for("react.suspense"),ov=Symbol.for("react.suspense_list"),g0=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),Ek=Symbol.for("react.offscreen"),G1=Symbol.iterator;function Gc(t){return t===null||typeof t!="object"?null:(t=G1&&t[G1]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Hg;function vu(t){if(Hg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hg=e&&e[1]||""}return`
`+Hg+t}var Kg=!1;function Gg(t,e){if(!t||Kg)return"";Kg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Kg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vu(t):""}function RM(t){switch(t.tag){case 5:return vu(t.type);case 16:return vu("Lazy");case 13:return vu("Suspense");case 19:return vu("SuspenseList");case 0:case 2:case 15:return t=Gg(t.type,!1),t;case 11:return t=Gg(t.type.render,!1),t;case 1:return t=Gg(t.type,!0),t;default:return""}}function lv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gl:return"Fragment";case ml:return"Portal";case iv:return"Profiler";case p0:return"StrictMode";case av:return"Suspense";case ov:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sk:return(t.displayName||"Context")+".Consumer";case bk:return(t._context.displayName||"Context")+".Provider";case m0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case g0:return e=t.displayName||null,e!==null?e:lv(t.type)||"Memo";case Ui:e=t._payload,t=t._init;try{return lv(t(e))}catch{}}return null}function PM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lv(e);case 8:return e===p0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ca(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ik(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OM(t){var e=Ik(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dh(t){t._valueTracker||(t._valueTracker=OM(t))}function _k(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ik(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cv(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Q1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ca(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xk(t,e){e=e.checked,e!=null&&f0(t,"checked",e,!1)}function uv(t,e){xk(t,e);var n=ca(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dv(t,e.type,n):e.hasOwnProperty("defaultValue")&&dv(t,e.type,ca(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function J1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dv(t,e,n){(e!=="number"||Qf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wu=Array.isArray;function Cl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ca(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(wu(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ca(n)}}function Tk(t,e){var n=ca(e.value),r=ca(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function X1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nh,Ck=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nh=Nh||document.createElement("div"),Nh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LM=["Webkit","ms","Moz","O"];Object.keys(Ru).forEach(function(t){LM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ru[e]=Ru[t]})});function Dk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ru.hasOwnProperty(t)&&Ru[t]?(""+e).trim():e+"px"}function Nk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Dk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var MM=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pv(t,e){if(e){if(MM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function mv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gv=null;function y0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yv=null,Dl=null,Nl=null;function Z1(t){if(t=Gd(t)){if(typeof yv!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=xm(e),yv(t.stateNode,t.type,e))}}function Ak(t){Dl?Nl?Nl.push(t):Nl=[t]:Dl=t}function Rk(){if(Dl){var t=Dl,e=Nl;if(Nl=Dl=null,Z1(t),e)for(t=0;t<e.length;t++)Z1(e[t])}}function Pk(t,e){return t(e)}function Ok(){}var Qg=!1;function Lk(t,e,n){if(Qg)return t(e,n);Qg=!0;try{return Pk(t,e,n)}finally{Qg=!1,(Dl!==null||Nl!==null)&&(Ok(),Rk())}}function sd(t,e){var n=t.stateNode;if(n===null)return null;var r=xm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var vv=!1;if(ii)try{var Qc={};Object.defineProperty(Qc,"passive",{get:function(){vv=!0}}),window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{vv=!1}function UM(t,e,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Pu=!1,Jf=null,Yf=!1,wv=null,jM={onError:function(t){Pu=!0,Jf=t}};function FM(t,e,n,r,s,i,a,o,l){Pu=!1,Jf=null,UM.apply(jM,arguments)}function VM(t,e,n,r,s,i,a,o,l){if(FM.apply(this,arguments),Pu){if(Pu){var c=Jf;Pu=!1,Jf=null}else throw Error(ee(198));Yf||(Yf=!0,wv=c)}}function Uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eE(t){if(Uo(t)!==t)throw Error(ee(188))}function BM(t){var e=t.alternate;if(!e){if(e=Uo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return eE(s),t;if(i===r)return eE(s),e;i=i.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function Uk(t){return t=BM(t),t!==null?jk(t):null}function jk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jk(t);if(e!==null)return e;t=t.sibling}return null}var Fk=Ar.unstable_scheduleCallback,tE=Ar.unstable_cancelCallback,zM=Ar.unstable_shouldYield,$M=Ar.unstable_requestPaint,cn=Ar.unstable_now,WM=Ar.unstable_getCurrentPriorityLevel,v0=Ar.unstable_ImmediatePriority,Vk=Ar.unstable_UserBlockingPriority,Xf=Ar.unstable_NormalPriority,qM=Ar.unstable_LowPriority,Bk=Ar.unstable_IdlePriority,Sm=null,Ds=null;function HM(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Sm,t,void 0,(t.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:QM,KM=Math.log,GM=Math.LN2;function QM(t){return t>>>=0,t===0?32:31-(KM(t)/GM|0)|0}var Ah=64,Rh=4194304;function bu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=bu(o):(i&=a,i!==0&&(r=bu(i)))}else a=n&~s,a!==0?r=bu(a):i!==0&&(r=bu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zr(e),s=1<<n,r|=t[n],e&=~s;return r}function JM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Zr(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=JM(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function bv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zk(){var t=Ah;return Ah<<=1,!(Ah&4194240)&&(Ah=64),t}function Jg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zr(e),t[e]=n}function XM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function w0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var bt=0;function $k(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wk,b0,qk,Hk,Kk,Sv=!1,Ph=[],Gi=null,Qi=null,Ji=null,id=new Map,ad=new Map,Fi=[],ZM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nE(t,e){switch(t){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":id.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ad.delete(e.pointerId)}}function Jc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Gd(e),e!==null&&b0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function e4(t,e,n,r,s){switch(e){case"focusin":return Gi=Jc(Gi,t,e,n,r,s),!0;case"dragenter":return Qi=Jc(Qi,t,e,n,r,s),!0;case"mouseover":return Ji=Jc(Ji,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return id.set(i,Jc(id.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ad.set(i,Jc(ad.get(i)||null,t,e,n,r,s)),!0}return!1}function Gk(t){var e=to(t.target);if(e!==null){var n=Uo(e);if(n!==null){if(e=n.tag,e===13){if(e=Mk(n),e!==null){t.blockedOn=e,Kk(t.priority,function(){qk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ev(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gv=r,n.target.dispatchEvent(r),gv=null}else return e=Gd(n),e!==null&&b0(e),t.blockedOn=n,!1;e.shift()}return!0}function rE(t,e,n){vf(t)&&n.delete(e)}function t4(){Sv=!1,Gi!==null&&vf(Gi)&&(Gi=null),Qi!==null&&vf(Qi)&&(Qi=null),Ji!==null&&vf(Ji)&&(Ji=null),id.forEach(rE),ad.forEach(rE)}function Yc(t,e){t.blockedOn===e&&(t.blockedOn=null,Sv||(Sv=!0,Ar.unstable_scheduleCallback(Ar.unstable_NormalPriority,t4)))}function od(t){function e(s){return Yc(s,t)}if(0<Ph.length){Yc(Ph[0],t);for(var n=1;n<Ph.length;n++){var r=Ph[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gi!==null&&Yc(Gi,t),Qi!==null&&Yc(Qi,t),Ji!==null&&Yc(Ji,t),id.forEach(e),ad.forEach(e),n=0;n<Fi.length;n++)r=Fi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fi.length&&(n=Fi[0],n.blockedOn===null);)Gk(n),n.blockedOn===null&&Fi.shift()}var Al=pi.ReactCurrentBatchConfig,ep=!0;function n4(t,e,n,r){var s=bt,i=Al.transition;Al.transition=null;try{bt=1,S0(t,e,n,r)}finally{bt=s,Al.transition=i}}function r4(t,e,n,r){var s=bt,i=Al.transition;Al.transition=null;try{bt=4,S0(t,e,n,r)}finally{bt=s,Al.transition=i}}function S0(t,e,n,r){if(ep){var s=Ev(t,e,n,r);if(s===null)ay(t,e,r,tp,n),nE(t,r);else if(e4(s,t,e,n,r))r.stopPropagation();else if(nE(t,r),e&4&&-1<ZM.indexOf(t)){for(;s!==null;){var i=Gd(s);if(i!==null&&Wk(i),i=Ev(t,e,n,r),i===null&&ay(t,e,r,tp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ay(t,e,r,null,n)}}var tp=null;function Ev(t,e,n,r){if(tp=null,t=y0(r),t=to(t),t!==null)if(e=Uo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tp=t,null}function Qk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WM()){case v0:return 1;case Vk:return 4;case Xf:case qM:return 16;case Bk:return 536870912;default:return 16}default:return 16}}var Wi=null,E0=null,wf=null;function Jk(){if(wf)return wf;var t,e=E0,n=e.length,r,s="value"in Wi?Wi.value:Wi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return wf=s.slice(t,1<r?1-r:void 0)}function bf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oh(){return!0}function sE(){return!1}function Or(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oh:sE,this.isPropagationStopped=sE,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oh)},persist:function(){},isPersistent:Oh}),e}var vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I0=Or(vc),Kd=Jt({},vc,{view:0,detail:0}),s4=Or(Kd),Yg,Xg,Xc,Em=Jt({},Kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xc&&(Xc&&t.type==="mousemove"?(Yg=t.screenX-Xc.screenX,Xg=t.screenY-Xc.screenY):Xg=Yg=0,Xc=t),Yg)},movementY:function(t){return"movementY"in t?t.movementY:Xg}}),iE=Or(Em),i4=Jt({},Em,{dataTransfer:0}),a4=Or(i4),o4=Jt({},Kd,{relatedTarget:0}),Zg=Or(o4),l4=Jt({},vc,{animationName:0,elapsedTime:0,pseudoElement:0}),c4=Or(l4),u4=Jt({},vc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),d4=Or(u4),h4=Jt({},vc,{data:0}),aE=Or(h4),f4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=m4[t])?!!e[t]:!1}function _0(){return g4}var y4=Jt({},Kd,{key:function(t){if(t.key){var e=f4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?p4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_0,charCode:function(t){return t.type==="keypress"?bf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v4=Or(y4),w4=Jt({},Em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oE=Or(w4),b4=Jt({},Kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_0}),S4=Or(b4),E4=Jt({},vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),I4=Or(E4),_4=Jt({},Em,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x4=Or(_4),T4=[9,13,27,32],x0=ii&&"CompositionEvent"in window,Ou=null;ii&&"documentMode"in document&&(Ou=document.documentMode);var k4=ii&&"TextEvent"in window&&!Ou,Yk=ii&&(!x0||Ou&&8<Ou&&11>=Ou),lE=" ",cE=!1;function Xk(t,e){switch(t){case"keyup":return T4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yl=!1;function C4(t,e){switch(t){case"compositionend":return Zk(e);case"keypress":return e.which!==32?null:(cE=!0,lE);case"textInput":return t=e.data,t===lE&&cE?null:t;default:return null}}function D4(t,e){if(yl)return t==="compositionend"||!x0&&Xk(t,e)?(t=Jk(),wf=E0=Wi=null,yl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yk&&e.locale!=="ko"?null:e.data;default:return null}}var N4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!N4[t.type]:e==="textarea"}function eC(t,e,n,r){Ak(r),e=np(e,"onChange"),0<e.length&&(n=new I0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lu=null,ld=null;function A4(t){dC(t,0)}function Im(t){var e=bl(t);if(_k(e))return t}function R4(t,e){if(t==="change")return e}var tC=!1;if(ii){var ey;if(ii){var ty="oninput"in document;if(!ty){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),ty=typeof dE.oninput=="function"}ey=ty}else ey=!1;tC=ey&&(!document.documentMode||9<document.documentMode)}function hE(){Lu&&(Lu.detachEvent("onpropertychange",nC),ld=Lu=null)}function nC(t){if(t.propertyName==="value"&&Im(ld)){var e=[];eC(e,ld,t,y0(t)),Lk(A4,e)}}function P4(t,e,n){t==="focusin"?(hE(),Lu=e,ld=n,Lu.attachEvent("onpropertychange",nC)):t==="focusout"&&hE()}function O4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Im(ld)}function L4(t,e){if(t==="click")return Im(e)}function M4(t,e){if(t==="input"||t==="change")return Im(e)}function U4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var is=typeof Object.is=="function"?Object.is:U4;function cd(t,e){if(is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sv.call(e,s)||!is(t[s],e[s]))return!1}return!0}function fE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pE(t,e){var n=fE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fE(n)}}function rC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sC(){for(var t=window,e=Qf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qf(t.document)}return e}function T0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function j4(t){var e=sC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rC(n.ownerDocument.documentElement,n)){if(r!==null&&T0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=pE(n,i);var a=pE(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F4=ii&&"documentMode"in document&&11>=document.documentMode,vl=null,Iv=null,Mu=null,_v=!1;function mE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_v||vl==null||vl!==Qf(r)||(r=vl,"selectionStart"in r&&T0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mu&&cd(Mu,r)||(Mu=r,r=np(Iv,"onSelect"),0<r.length&&(e=new I0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vl)))}function Lh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wl={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},ny={},iC={};ii&&(iC=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function _m(t){if(ny[t])return ny[t];if(!wl[t])return t;var e=wl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iC)return ny[t]=e[n];return t}var aC=_m("animationend"),oC=_m("animationiteration"),lC=_m("animationstart"),cC=_m("transitionend"),uC=new Map,gE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sa(t,e){uC.set(t,e),Mo(e,[t])}for(var ry=0;ry<gE.length;ry++){var sy=gE[ry],V4=sy.toLowerCase(),B4=sy[0].toUpperCase()+sy.slice(1);Sa(V4,"on"+B4)}Sa(aC,"onAnimationEnd");Sa(oC,"onAnimationIteration");Sa(lC,"onAnimationStart");Sa("dblclick","onDoubleClick");Sa("focusin","onFocus");Sa("focusout","onBlur");Sa(cC,"onTransitionEnd");Vl("onMouseEnter",["mouseout","mouseover"]);Vl("onMouseLeave",["mouseout","mouseover"]);Vl("onPointerEnter",["pointerout","pointerover"]);Vl("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function yE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VM(r,e,void 0,t),t.currentTarget=null}function dC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;yE(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;yE(s,o,c),i=l}}}if(Yf)throw t=wv,Yf=!1,wv=null,t}function jt(t,e){var n=e[Dv];n===void 0&&(n=e[Dv]=new Set);var r=t+"__bubble";n.has(r)||(hC(e,t,2,!1),n.add(r))}function iy(t,e,n){var r=0;e&&(r|=4),hC(n,t,r,e)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function ud(t){if(!t[Mh]){t[Mh]=!0,wk.forEach(function(n){n!=="selectionchange"&&(z4.has(n)||iy(n,!1,t),iy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mh]||(e[Mh]=!0,iy("selectionchange",!1,e))}}function hC(t,e,n,r){switch(Qk(e)){case 1:var s=n4;break;case 4:s=r4;break;default:s=S0}n=s.bind(null,e,n,t),s=void 0,!vv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ay(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=to(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}Lk(function(){var c=i,d=y0(n),h=[];e:{var p=uC.get(t);if(p!==void 0){var f=I0,w=t;switch(t){case"keypress":if(bf(n)===0)break e;case"keydown":case"keyup":f=v4;break;case"focusin":w="focus",f=Zg;break;case"focusout":w="blur",f=Zg;break;case"beforeblur":case"afterblur":f=Zg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=iE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=a4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=S4;break;case aC:case oC:case lC:f=c4;break;case cC:f=I4;break;case"scroll":f=s4;break;case"wheel":f=x4;break;case"copy":case"cut":case"paste":f=d4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=oE}var m=(e&4)!==0,b=!m&&t==="scroll",v=m?p!==null?p+"Capture":null:p;m=[];for(var y=c,E;y!==null;){E=y;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,v!==null&&(C=sd(y,v),C!=null&&m.push(dd(y,C,E)))),b)break;y=y.return}0<m.length&&(p=new f(p,w,null,n,d),h.push({event:p,listeners:m}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==gv&&(w=n.relatedTarget||n.fromElement)&&(to(w)||w[ai]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(w=n.relatedTarget||n.toElement,f=c,w=w?to(w):null,w!==null&&(b=Uo(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(f=null,w=c),f!==w)){if(m=iE,C="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=oE,C="onPointerLeave",v="onPointerEnter",y="pointer"),b=f==null?p:bl(f),E=w==null?p:bl(w),p=new m(C,y+"leave",f,n,d),p.target=b,p.relatedTarget=E,C=null,to(d)===c&&(m=new m(v,y+"enter",w,n,d),m.target=E,m.relatedTarget=b,C=m),b=C,f&&w)t:{for(m=f,v=w,y=0,E=m;E;E=Ko(E))y++;for(E=0,C=v;C;C=Ko(C))E++;for(;0<y-E;)m=Ko(m),y--;for(;0<E-y;)v=Ko(v),E--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Ko(m),v=Ko(v)}m=null}else m=null;f!==null&&vE(h,p,f,m,!1),w!==null&&b!==null&&vE(h,b,w,m,!0)}}e:{if(p=c?bl(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var O=R4;else if(uE(p))if(tC)O=M4;else{O=O4;var L=P4}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=L4);if(O&&(O=O(t,c))){eC(h,O,n,d);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&dv(p,"number",p.value)}switch(L=c?bl(c):window,t){case"focusin":(uE(L)||L.contentEditable==="true")&&(vl=L,Iv=c,Mu=null);break;case"focusout":Mu=Iv=vl=null;break;case"mousedown":_v=!0;break;case"contextmenu":case"mouseup":case"dragend":_v=!1,mE(h,n,d);break;case"selectionchange":if(F4)break;case"keydown":case"keyup":mE(h,n,d)}var x;if(x0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else yl?Xk(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Yk&&n.locale!=="ko"&&(yl||T!=="onCompositionStart"?T==="onCompositionEnd"&&yl&&(x=Jk()):(Wi=d,E0="value"in Wi?Wi.value:Wi.textContent,yl=!0)),L=np(c,T),0<L.length&&(T=new aE(T,t,null,n,d),h.push({event:T,listeners:L}),x?T.data=x:(x=Zk(n),x!==null&&(T.data=x)))),(x=k4?C4(t,n):D4(t,n))&&(c=np(c,"onBeforeInput"),0<c.length&&(d=new aE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=x))}dC(h,e)})}function dd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function np(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sd(t,n),i!=null&&r.unshift(dd(t,i,s)),i=sd(t,e),i!=null&&r.push(dd(t,i,s))),t=t.return}return r}function Ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vE(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=sd(n,i),l!=null&&a.unshift(dd(n,l,o))):s||(l=sd(n,i),l!=null&&a.push(dd(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var $4=/\r\n?/g,W4=/\u0000|\uFFFD/g;function wE(t){return(typeof t=="string"?t:""+t).replace($4,`
`).replace(W4,"")}function Uh(t,e,n){if(e=wE(e),wE(t)!==e&&n)throw Error(ee(425))}function rp(){}var xv=null,Tv=null;function kv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cv=typeof setTimeout=="function"?setTimeout:void 0,q4=typeof clearTimeout=="function"?clearTimeout:void 0,bE=typeof Promise=="function"?Promise:void 0,H4=typeof queueMicrotask=="function"?queueMicrotask:typeof bE<"u"?function(t){return bE.resolve(null).then(t).catch(K4)}:Cv;function K4(t){setTimeout(function(){throw t})}function oy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),od(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);od(e)}function Yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function SE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wc=Math.random().toString(36).slice(2),Is="__reactFiber$"+wc,hd="__reactProps$"+wc,ai="__reactContainer$"+wc,Dv="__reactEvents$"+wc,G4="__reactListeners$"+wc,Q4="__reactHandles$"+wc;function to(t){var e=t[Is];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ai]||n[Is]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=SE(t);t!==null;){if(n=t[Is])return n;t=SE(t)}return e}t=n,n=t.parentNode}return null}function Gd(t){return t=t[Is]||t[ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function xm(t){return t[hd]||null}var Nv=[],Sl=-1;function Ea(t){return{current:t}}function Ft(t){0>Sl||(t.current=Nv[Sl],Nv[Sl]=null,Sl--)}function Rt(t,e){Sl++,Nv[Sl]=t.current,t.current=e}var ua={},Jn=Ea(ua),pr=Ea(!1),bo=ua;function Bl(t,e){var n=t.type.contextTypes;if(!n)return ua;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mr(t){return t=t.childContextTypes,t!=null}function sp(){Ft(pr),Ft(Jn)}function EE(t,e,n){if(Jn.current!==ua)throw Error(ee(168));Rt(Jn,e),Rt(pr,n)}function fC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,PM(t)||"Unknown",s));return Jt({},n,r)}function ip(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ua,bo=Jn.current,Rt(Jn,t),Rt(pr,pr.current),!0}function IE(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=fC(t,e,bo),r.__reactInternalMemoizedMergedChildContext=t,Ft(pr),Ft(Jn),Rt(Jn,t)):Ft(pr),Rt(pr,n)}var Hs=null,Tm=!1,ly=!1;function pC(t){Hs===null?Hs=[t]:Hs.push(t)}function J4(t){Tm=!0,pC(t)}function Ia(){if(!ly&&Hs!==null){ly=!0;var t=0,e=bt;try{var n=Hs;for(bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hs=null,Tm=!1}catch(s){throw Hs!==null&&(Hs=Hs.slice(t+1)),Fk(v0,Ia),s}finally{bt=e,ly=!1}}return null}var El=[],Il=0,ap=null,op=0,Ur=[],jr=0,So=null,Gs=1,Qs="";function $a(t,e){El[Il++]=op,El[Il++]=ap,ap=t,op=e}function mC(t,e,n){Ur[jr++]=Gs,Ur[jr++]=Qs,Ur[jr++]=So,So=t;var r=Gs;t=Qs;var s=32-Zr(r)-1;r&=~(1<<s),n+=1;var i=32-Zr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Gs=1<<32-Zr(e)+s|n<<s|r,Qs=i+t}else Gs=1<<i|n<<s|r,Qs=t}function k0(t){t.return!==null&&($a(t,1),mC(t,1,0))}function C0(t){for(;t===ap;)ap=El[--Il],El[Il]=null,op=El[--Il],El[Il]=null;for(;t===So;)So=Ur[--jr],Ur[jr]=null,Qs=Ur[--jr],Ur[jr]=null,Gs=Ur[--jr],Ur[jr]=null}var kr=null,_r=null,$t=!1,Yr=null;function gC(t,e){var n=Vr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _E(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,_r=Yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,_r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=So!==null?{id:Gs,overflow:Qs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kr=t,_r=null,!0):!1;default:return!1}}function Av(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rv(t){if($t){var e=_r;if(e){var n=e;if(!_E(t,e)){if(Av(t))throw Error(ee(418));e=Yi(n.nextSibling);var r=kr;e&&_E(t,e)?gC(r,n):(t.flags=t.flags&-4097|2,$t=!1,kr=t)}}else{if(Av(t))throw Error(ee(418));t.flags=t.flags&-4097|2,$t=!1,kr=t}}}function xE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function jh(t){if(t!==kr)return!1;if(!$t)return xE(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kv(t.type,t.memoizedProps)),e&&(e=_r)){if(Av(t))throw yC(),Error(ee(418));for(;e;)gC(t,e),e=Yi(e.nextSibling)}if(xE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_r=Yi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_r=null}}else _r=kr?Yi(t.stateNode.nextSibling):null;return!0}function yC(){for(var t=_r;t;)t=Yi(t.nextSibling)}function zl(){_r=kr=null,$t=!1}function D0(t){Yr===null?Yr=[t]:Yr.push(t)}var Y4=pi.ReactCurrentBatchConfig;function Zc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Fh(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function TE(t){var e=t._init;return e(t._payload)}function vC(t){function e(v,y){if(t){var E=v.deletions;E===null?(v.deletions=[y],v.flags|=16):E.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=ta(v,y),v.index=0,v.sibling=null,v}function i(v,y,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<y?(v.flags|=2,y):E):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,y,E,C){return y===null||y.tag!==6?(y=my(E,v.mode,C),y.return=v,y):(y=s(y,E),y.return=v,y)}function l(v,y,E,C){var O=E.type;return O===gl?d(v,y,E.props.children,C,E.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ui&&TE(O)===y.type)?(C=s(y,E.props),C.ref=Zc(v,y,E),C.return=v,C):(C=kf(E.type,E.key,E.props,null,v.mode,C),C.ref=Zc(v,y,E),C.return=v,C)}function c(v,y,E,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=gy(E,v.mode,C),y.return=v,y):(y=s(y,E.children||[]),y.return=v,y)}function d(v,y,E,C,O){return y===null||y.tag!==7?(y=mo(E,v.mode,C,O),y.return=v,y):(y=s(y,E),y.return=v,y)}function h(v,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=my(""+y,v.mode,E),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ch:return E=kf(y.type,y.key,y.props,null,v.mode,E),E.ref=Zc(v,null,y),E.return=v,E;case ml:return y=gy(y,v.mode,E),y.return=v,y;case Ui:var C=y._init;return h(v,C(y._payload),E)}if(wu(y)||Gc(y))return y=mo(y,v.mode,E,null),y.return=v,y;Fh(v,y)}return null}function p(v,y,E,C){var O=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:o(v,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ch:return E.key===O?l(v,y,E,C):null;case ml:return E.key===O?c(v,y,E,C):null;case Ui:return O=E._init,p(v,y,O(E._payload),C)}if(wu(E)||Gc(E))return O!==null?null:d(v,y,E,C,null);Fh(v,E)}return null}function f(v,y,E,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(E)||null,o(y,v,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ch:return v=v.get(C.key===null?E:C.key)||null,l(y,v,C,O);case ml:return v=v.get(C.key===null?E:C.key)||null,c(y,v,C,O);case Ui:var L=C._init;return f(v,y,E,L(C._payload),O)}if(wu(C)||Gc(C))return v=v.get(E)||null,d(y,v,C,O,null);Fh(y,C)}return null}function w(v,y,E,C){for(var O=null,L=null,x=y,T=y=0,k=null;x!==null&&T<E.length;T++){x.index>T?(k=x,x=null):k=x.sibling;var D=p(v,x,E[T],C);if(D===null){x===null&&(x=k);break}t&&x&&D.alternate===null&&e(v,x),y=i(D,y,T),L===null?O=D:L.sibling=D,L=D,x=k}if(T===E.length)return n(v,x),$t&&$a(v,T),O;if(x===null){for(;T<E.length;T++)x=h(v,E[T],C),x!==null&&(y=i(x,y,T),L===null?O=x:L.sibling=x,L=x);return $t&&$a(v,T),O}for(x=r(v,x);T<E.length;T++)k=f(x,v,T,E[T],C),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?T:k.key),y=i(k,y,T),L===null?O=k:L.sibling=k,L=k);return t&&x.forEach(function(R){return e(v,R)}),$t&&$a(v,T),O}function m(v,y,E,C){var O=Gc(E);if(typeof O!="function")throw Error(ee(150));if(E=O.call(E),E==null)throw Error(ee(151));for(var L=O=null,x=y,T=y=0,k=null,D=E.next();x!==null&&!D.done;T++,D=E.next()){x.index>T?(k=x,x=null):k=x.sibling;var R=p(v,x,D.value,C);if(R===null){x===null&&(x=k);break}t&&x&&R.alternate===null&&e(v,x),y=i(R,y,T),L===null?O=R:L.sibling=R,L=R,x=k}if(D.done)return n(v,x),$t&&$a(v,T),O;if(x===null){for(;!D.done;T++,D=E.next())D=h(v,D.value,C),D!==null&&(y=i(D,y,T),L===null?O=D:L.sibling=D,L=D);return $t&&$a(v,T),O}for(x=r(v,x);!D.done;T++,D=E.next())D=f(x,v,T,D.value,C),D!==null&&(t&&D.alternate!==null&&x.delete(D.key===null?T:D.key),y=i(D,y,T),L===null?O=D:L.sibling=D,L=D);return t&&x.forEach(function(P){return e(v,P)}),$t&&$a(v,T),O}function b(v,y,E,C){if(typeof E=="object"&&E!==null&&E.type===gl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ch:e:{for(var O=E.key,L=y;L!==null;){if(L.key===O){if(O=E.type,O===gl){if(L.tag===7){n(v,L.sibling),y=s(L,E.props.children),y.return=v,v=y;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ui&&TE(O)===L.type){n(v,L.sibling),y=s(L,E.props),y.ref=Zc(v,L,E),y.return=v,v=y;break e}n(v,L);break}else e(v,L);L=L.sibling}E.type===gl?(y=mo(E.props.children,v.mode,C,E.key),y.return=v,v=y):(C=kf(E.type,E.key,E.props,null,v.mode,C),C.ref=Zc(v,y,E),C.return=v,v=C)}return a(v);case ml:e:{for(L=E.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(v,y.sibling),y=s(y,E.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=gy(E,v.mode,C),y.return=v,v=y}return a(v);case Ui:return L=E._init,b(v,y,L(E._payload),C)}if(wu(E))return w(v,y,E,C);if(Gc(E))return m(v,y,E,C);Fh(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,E),y.return=v,v=y):(n(v,y),y=my(E,v.mode,C),y.return=v,v=y),a(v)):n(v,y)}return b}var $l=vC(!0),wC=vC(!1),lp=Ea(null),cp=null,_l=null,N0=null;function A0(){N0=_l=cp=null}function R0(t){var e=lp.current;Ft(lp),t._currentValue=e}function Pv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rl(t,e){cp=t,N0=_l=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ur=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(N0!==t)if(t={context:t,memoizedValue:e,next:null},_l===null){if(cp===null)throw Error(ee(308));_l=t,cp.dependencies={lanes:0,firstContext:t}}else _l=_l.next=t;return e}var no=null;function P0(t){no===null?no=[t]:no.push(t)}function bC(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,P0(e)):(n.next=s.next,s.next=n),e.interleaved=n,oi(t,r)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ji=!1;function O0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,oi(t,n)}return s=r.interleaved,s===null?(e.next=e,P0(r)):(e.next=s.next,s.next=e),r.interleaved=e,oi(t,n)}function Sf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w0(t,n)}}function kE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function up(t,e,n,r){var s=t.updateQueue;ji=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,d=c=l=null,o=i;do{var p=o.lane,f=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,m=o;switch(p=e,f=n,m.tag){case 1:if(w=m.payload,typeof w=="function"){h=w.call(f,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=m.payload,p=typeof w=="function"?w.call(f,h,p):w,p==null)break e;h=Jt({},h,p);break e;case 2:ji=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=f,l=h):d=d.next=f,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Io|=a,t.lanes=a,t.memoizedState=h}}function CE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var Qd={},Ns=Ea(Qd),fd=Ea(Qd),pd=Ea(Qd);function ro(t){if(t===Qd)throw Error(ee(174));return t}function L0(t,e){switch(Rt(pd,e),Rt(fd,t),Rt(Ns,Qd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fv(e,t)}Ft(Ns),Rt(Ns,e)}function Wl(){Ft(Ns),Ft(fd),Ft(pd)}function EC(t){ro(pd.current);var e=ro(Ns.current),n=fv(e,t.type);e!==n&&(Rt(fd,t),Rt(Ns,n))}function M0(t){fd.current===t&&(Ft(Ns),Ft(fd))}var Kt=Ea(0);function dp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cy=[];function U0(){for(var t=0;t<cy.length;t++)cy[t]._workInProgressVersionPrimary=null;cy.length=0}var Ef=pi.ReactCurrentDispatcher,uy=pi.ReactCurrentBatchConfig,Eo=0,Qt=null,vn=null,xn=null,hp=!1,Uu=!1,md=0,X4=0;function Fn(){throw Error(ee(321))}function j0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!is(t[n],e[n]))return!1;return!0}function F0(t,e,n,r,s,i){if(Eo=i,Qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ef.current=t===null||t.memoizedState===null?nU:rU,t=n(r,s),Uu){i=0;do{if(Uu=!1,md=0,25<=i)throw Error(ee(301));i+=1,xn=vn=null,e.updateQueue=null,Ef.current=sU,t=n(r,s)}while(Uu)}if(Ef.current=fp,e=vn!==null&&vn.next!==null,Eo=0,xn=vn=Qt=null,hp=!1,e)throw Error(ee(300));return t}function V0(){var t=md!==0;return md=0,t}function bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Qt.memoizedState=xn=t:xn=xn.next=t,xn}function Wr(){if(vn===null){var t=Qt.alternate;t=t!==null?t.memoizedState:null}else t=vn.next;var e=xn===null?Qt.memoizedState:xn.next;if(e!==null)xn=e,vn=t;else{if(t===null)throw Error(ee(310));vn=t,t={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},xn===null?Qt.memoizedState=xn=t:xn=xn.next=t}return xn}function gd(t,e){return typeof e=="function"?e(t):e}function dy(t){var e=Wr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=vn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var d=c.lane;if((Eo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,Qt.lanes|=d,Io|=d}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,is(r,e.memoizedState)||(ur=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Qt.lanes|=i,Io|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hy(t){var e=Wr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);is(i,e.memoizedState)||(ur=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function IC(){}function _C(t,e){var n=Qt,r=Wr(),s=e(),i=!is(r.memoizedState,s);if(i&&(r.memoizedState=s,ur=!0),r=r.queue,B0(kC.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||xn!==null&&xn.memoizedState.tag&1){if(n.flags|=2048,yd(9,TC.bind(null,n,r,s,e),void 0,null),Tn===null)throw Error(ee(349));Eo&30||xC(n,e,s)}return s}function xC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TC(t,e,n,r){e.value=n,e.getSnapshot=r,CC(e)&&DC(t)}function kC(t,e,n){return n(function(){CC(e)&&DC(t)})}function CC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!is(t,n)}catch{return!0}}function DC(t){var e=oi(t,1);e!==null&&es(e,t,1,-1)}function DE(t){var e=bs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:t},e.queue=t,t=t.dispatch=tU.bind(null,Qt,t),[e.memoizedState,t]}function yd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function NC(){return Wr().memoizedState}function If(t,e,n,r){var s=bs();Qt.flags|=t,s.memoizedState=yd(1|e,n,void 0,r===void 0?null:r)}function km(t,e,n,r){var s=Wr();r=r===void 0?null:r;var i=void 0;if(vn!==null){var a=vn.memoizedState;if(i=a.destroy,r!==null&&j0(r,a.deps)){s.memoizedState=yd(e,n,i,r);return}}Qt.flags|=t,s.memoizedState=yd(1|e,n,i,r)}function NE(t,e){return If(8390656,8,t,e)}function B0(t,e){return km(2048,8,t,e)}function AC(t,e){return km(4,2,t,e)}function RC(t,e){return km(4,4,t,e)}function PC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OC(t,e,n){return n=n!=null?n.concat([t]):null,km(4,4,PC.bind(null,e,t),n)}function z0(){}function LC(t,e){var n=Wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&j0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function MC(t,e){var n=Wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&j0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function UC(t,e,n){return Eo&21?(is(n,e)||(n=zk(),Qt.lanes|=n,Io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ur=!0),t.memoizedState=n)}function Z4(t,e){var n=bt;bt=n!==0&&4>n?n:4,t(!0);var r=uy.transition;uy.transition={};try{t(!1),e()}finally{bt=n,uy.transition=r}}function jC(){return Wr().memoizedState}function eU(t,e,n){var r=ea(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FC(t))VC(e,n);else if(n=bC(t,e,n,r),n!==null){var s=er();es(n,t,r,s),BC(n,e,r)}}function tU(t,e,n){var r=ea(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FC(t))VC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,is(o,a)){var l=e.interleaved;l===null?(s.next=s,P0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=bC(t,e,s,r),n!==null&&(s=er(),es(n,t,r,s),BC(n,e,r))}}function FC(t){var e=t.alternate;return t===Qt||e!==null&&e===Qt}function VC(t,e){Uu=hp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w0(t,n)}}var fp={readContext:$r,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},nU={readContext:$r,useCallback:function(t,e){return bs().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:NE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,If(4194308,4,PC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return If(4194308,4,t,e)},useInsertionEffect:function(t,e){return If(4,2,t,e)},useMemo:function(t,e){var n=bs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=eU.bind(null,Qt,t),[r.memoizedState,t]},useRef:function(t){var e=bs();return t={current:t},e.memoizedState=t},useState:DE,useDebugValue:z0,useDeferredValue:function(t){return bs().memoizedState=t},useTransition:function(){var t=DE(!1),e=t[0];return t=Z4.bind(null,t[1]),bs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qt,s=bs();if($t){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Tn===null)throw Error(ee(349));Eo&30||xC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,NE(kC.bind(null,r,i,t),[t]),r.flags|=2048,yd(9,TC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=bs(),e=Tn.identifierPrefix;if($t){var n=Qs,r=Gs;n=(r&~(1<<32-Zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=md++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=X4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rU={readContext:$r,useCallback:LC,useContext:$r,useEffect:B0,useImperativeHandle:OC,useInsertionEffect:AC,useLayoutEffect:RC,useMemo:MC,useReducer:dy,useRef:NC,useState:function(){return dy(gd)},useDebugValue:z0,useDeferredValue:function(t){var e=Wr();return UC(e,vn.memoizedState,t)},useTransition:function(){var t=dy(gd)[0],e=Wr().memoizedState;return[t,e]},useMutableSource:IC,useSyncExternalStore:_C,useId:jC,unstable_isNewReconciler:!1},sU={readContext:$r,useCallback:LC,useContext:$r,useEffect:B0,useImperativeHandle:OC,useInsertionEffect:AC,useLayoutEffect:RC,useMemo:MC,useReducer:hy,useRef:NC,useState:function(){return hy(gd)},useDebugValue:z0,useDeferredValue:function(t){var e=Wr();return vn===null?e.memoizedState=t:UC(e,vn.memoizedState,t)},useTransition:function(){var t=hy(gd)[0],e=Wr().memoizedState;return[t,e]},useMutableSource:IC,useSyncExternalStore:_C,useId:jC,unstable_isNewReconciler:!1};function Gr(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ov(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cm={isMounted:function(t){return(t=t._reactInternals)?Uo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=er(),s=ea(t),i=Zs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Xi(t,i,s),e!==null&&(es(e,t,s,r),Sf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=er(),s=ea(t),i=Zs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Xi(t,i,s),e!==null&&(es(e,t,s,r),Sf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=er(),r=ea(t),s=Zs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Xi(t,s,r),e!==null&&(es(e,t,r,n),Sf(e,t,r))}};function AE(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!cd(n,r)||!cd(s,i):!0}function zC(t,e,n){var r=!1,s=ua,i=e.contextType;return typeof i=="object"&&i!==null?i=$r(i):(s=mr(e)?bo:Jn.current,r=e.contextTypes,i=(r=r!=null)?Bl(t,s):ua),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function RE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cm.enqueueReplaceState(e,e.state,null)}function Lv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},O0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$r(i):(i=mr(e)?bo:Jn.current,s.context=Bl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ov(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cm.enqueueReplaceState(s,s.state,null),up(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ql(t,e){try{var n="",r=e;do n+=RM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function fy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iU=typeof WeakMap=="function"?WeakMap:Map;function $C(t,e,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mp||(mp=!0,qv=r),Mv(t,e)},n}function WC(t,e,n){n=Zs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mv(t,e),typeof r!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function PE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iU;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=wU.bind(null,t,e,n),e.then(t,t))}function OE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zs(-1,1),e.tag=2,Xi(n,e,1))),n.lanes|=1),t)}var aU=pi.ReactCurrentOwner,ur=!1;function Xn(t,e,n,r){e.child=t===null?wC(e,null,n,r):$l(e,t.child,n,r)}function ME(t,e,n,r,s){n=n.render;var i=e.ref;return Rl(e,s),r=F0(t,e,n,r,i,s),n=V0(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,li(t,e,s)):($t&&n&&k0(e),e.flags|=1,Xn(t,e,r,s),e.child)}function UE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!J0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qC(t,e,i,r,s)):(t=kf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:cd,n(a,r)&&t.ref===e.ref)return li(t,e,s)}return e.flags|=1,t=ta(i,r),t.ref=e.ref,t.return=e,e.child=t}function qC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(cd(i,r)&&t.ref===e.ref)if(ur=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ur=!0);else return e.lanes=t.lanes,li(t,e,s)}return Uv(t,e,n,r,s)}function HC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Tl,vr),vr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Tl,vr),vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Rt(Tl,vr),vr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Rt(Tl,vr),vr|=r;return Xn(t,e,s,n),e.child}function KC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uv(t,e,n,r,s){var i=mr(n)?bo:Jn.current;return i=Bl(e,i),Rl(e,s),n=F0(t,e,n,r,i,s),r=V0(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,li(t,e,s)):($t&&r&&k0(e),e.flags|=1,Xn(t,e,n,s),e.child)}function jE(t,e,n,r,s){if(mr(n)){var i=!0;ip(e)}else i=!1;if(Rl(e,s),e.stateNode===null)_f(t,e),zC(e,n,r),Lv(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=$r(c):(c=mr(n)?bo:Jn.current,c=Bl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&RE(e,a,r,c),ji=!1;var p=e.memoizedState;a.state=p,up(e,r,a,s),l=e.memoizedState,o!==r||p!==l||pr.current||ji?(typeof d=="function"&&(Ov(e,n,d,r),l=e.memoizedState),(o=ji||AE(e,n,o,r,p,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,SC(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Gr(e.type,o),a.props=c,h=e.pendingProps,p=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=$r(l):(l=mr(n)?bo:Jn.current,l=Bl(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==l)&&RE(e,a,r,l),ji=!1,p=e.memoizedState,a.state=p,up(e,r,a,s);var w=e.memoizedState;o!==h||p!==w||pr.current||ji?(typeof f=="function"&&(Ov(e,n,f,r),w=e.memoizedState),(c=ji||AE(e,n,c,r,p,w,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),a.props=r,a.state=w,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return jv(t,e,n,r,i,s)}function jv(t,e,n,r,s,i){KC(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&IE(e,n,!1),li(t,e,i);r=e.stateNode,aU.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=$l(e,t.child,null,i),e.child=$l(e,null,o,i)):Xn(t,e,o,i),e.memoizedState=r.state,s&&IE(e,n,!0),e.child}function GC(t){var e=t.stateNode;e.pendingContext?EE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&EE(t,e.context,!1),L0(t,e.containerInfo)}function FE(t,e,n,r,s){return zl(),D0(s),e.flags|=256,Xn(t,e,n,r),e.child}var Fv={dehydrated:null,treeContext:null,retryLane:0};function Vv(t){return{baseLanes:t,cachePool:null,transitions:null}}function QC(t,e,n){var r=e.pendingProps,s=Kt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rt(Kt,s&1),t===null)return Rv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Am(a,r,0,null),t=mo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vv(n),e.memoizedState=Fv,t):$0(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return oU(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ta(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=ta(o,i):(i=mo(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Vv(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Fv,r}return i=t.child,t=i.sibling,r=ta(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $0(t,e){return e=Am({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vh(t,e,n,r){return r!==null&&D0(r),$l(e,t.child,null,n),t=$0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oU(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=fy(Error(ee(422))),Vh(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Am({mode:"visible",children:r.children},s,0,null),i=mo(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&$l(e,t.child,null,a),e.child.memoizedState=Vv(a),e.memoizedState=Fv,i);if(!(e.mode&1))return Vh(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(ee(419)),r=fy(i,r,void 0),Vh(t,e,a,r)}if(o=(a&t.childLanes)!==0,ur||o){if(r=Tn,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,oi(t,s),es(r,t,s,-1))}return Q0(),r=fy(Error(ee(421))),Vh(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=bU.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,_r=Yi(s.nextSibling),kr=e,$t=!0,Yr=null,t!==null&&(Ur[jr++]=Gs,Ur[jr++]=Qs,Ur[jr++]=So,Gs=t.id,Qs=t.overflow,So=e),e=$0(e,r.children),e.flags|=4096,e)}function VE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pv(t.return,e,n)}function py(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function JC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xn(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&VE(t,n,e);else if(t.tag===19)VE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rt(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&dp(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),py(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&dp(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}py(e,!0,n,null,i);break;case"together":py(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _f(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function li(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=ta(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ta(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lU(t,e,n){switch(e.tag){case 3:GC(e),zl();break;case 5:EC(e);break;case 1:mr(e.type)&&ip(e);break;case 4:L0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Rt(lp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rt(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?QC(t,e,n):(Rt(Kt,Kt.current&1),t=li(t,e,n),t!==null?t.sibling:null);Rt(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,HC(t,e,n)}return li(t,e,n)}var YC,Bv,XC,ZC;YC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bv=function(){};XC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ro(Ns.current);var i=null;switch(n){case"input":s=cv(t,s),r=cv(t,r),i=[];break;case"select":s=Jt({},s,{value:void 0}),r=Jt({},r,{value:void 0}),i=[];break;case"textarea":s=hv(t,s),r=hv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rp)}pv(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jt("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ZC=function(t,e,n,r){n!==r&&(e.flags|=4)};function eu(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cU(t,e,n){var r=e.pendingProps;switch(C0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(e),null;case 1:return mr(e.type)&&sp(),Vn(e),null;case 3:return r=e.stateNode,Wl(),Ft(pr),Ft(Jn),U0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yr!==null&&(Gv(Yr),Yr=null))),Bv(t,e),Vn(e),null;case 5:M0(e);var s=ro(pd.current);if(n=e.type,t!==null&&e.stateNode!=null)XC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Vn(e),null}if(t=ro(Ns.current),jh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Is]=e,r[hd]=i,t=(e.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(s=0;s<Su.length;s++)jt(Su[s],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":Q1(r,i),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jt("invalid",r);break;case"textarea":Y1(r,i),jt("invalid",r)}pv(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Uh(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Uh(r.textContent,o,t),s=["children",""+o]):nd.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&jt("scroll",r)}switch(n){case"input":Dh(r),J1(r,i,!0);break;case"textarea":Dh(r),X1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Is]=e,t[hd]=r,YC(t,e,!1,!1),e.stateNode=t;e:{switch(a=mv(n,r),n){case"dialog":jt("cancel",t),jt("close",t),s=r;break;case"iframe":case"object":case"embed":jt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Su.length;s++)jt(Su[s],t);s=r;break;case"source":jt("error",t),s=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),s=r;break;case"details":jt("toggle",t),s=r;break;case"input":Q1(t,r),s=cv(t,r),jt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Jt({},r,{value:void 0}),jt("invalid",t);break;case"textarea":Y1(t,r),s=hv(t,r),jt("invalid",t);break;default:s=r}pv(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?Nk(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ck(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rd(t,l):typeof l=="number"&&rd(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(nd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&jt("scroll",t):l!=null&&f0(t,i,l,a))}switch(n){case"input":Dh(t),J1(t,r,!1);break;case"textarea":Dh(t),X1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ca(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Cl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Cl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vn(e),null;case 6:if(t&&e.stateNode!=null)ZC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ro(pd.current),ro(Ns.current),jh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Is]=e,(i=r.nodeValue!==n)&&(t=kr,t!==null))switch(t.tag){case 3:Uh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Is]=e,e.stateNode=r}return Vn(e),null;case 13:if(Ft(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&_r!==null&&e.mode&1&&!(e.flags&128))yC(),zl(),e.flags|=98560,i=!1;else if(i=jh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[Is]=e}else zl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vn(e),i=!1}else Yr!==null&&(Gv(Yr),Yr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?bn===0&&(bn=3):Q0())),e.updateQueue!==null&&(e.flags|=4),Vn(e),null);case 4:return Wl(),Bv(t,e),t===null&&ud(e.stateNode.containerInfo),Vn(e),null;case 10:return R0(e.type._context),Vn(e),null;case 17:return mr(e.type)&&sp(),Vn(e),null;case 19:if(Ft(Kt),i=e.memoizedState,i===null)return Vn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)eu(i,!1);else{if(bn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=dp(t),a!==null){for(e.flags|=128,eu(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rt(Kt,Kt.current&1|2),e.child}t=t.sibling}i.tail!==null&&cn()>Hl&&(e.flags|=128,r=!0,eu(i,!1),e.lanes=4194304)}else{if(!r)if(t=dp(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!$t)return Vn(e),null}else 2*cn()-i.renderingStartTime>Hl&&n!==1073741824&&(e.flags|=128,r=!0,eu(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=cn(),e.sibling=null,n=Kt.current,Rt(Kt,r?n&1|2:n&1),e):(Vn(e),null);case 22:case 23:return G0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vr&1073741824&&(Vn(e),e.subtreeFlags&6&&(e.flags|=8192)):Vn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function uU(t,e){switch(C0(e),e.tag){case 1:return mr(e.type)&&sp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wl(),Ft(pr),Ft(Jn),U0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return M0(e),null;case 13:if(Ft(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));zl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Kt),null;case 4:return Wl(),null;case 10:return R0(e.type._context),null;case 22:case 23:return G0(),null;case 24:return null;default:return null}}var Bh=!1,qn=!1,dU=typeof WeakSet=="function"?WeakSet:Set,pe=null;function xl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){en(t,e,r)}else n.current=null}function eD(t,e,n){try{n()}catch(r){en(t,e,r)}}var BE=!1;function hU(t,e){if(xv=ep,t=sC(),T0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===n&&++c===s&&(o=a),p===i&&++d===r&&(l=a),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tv={focusedElem:t,selectionRange:n},ep=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var m=w.memoizedProps,b=w.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Gr(e.type,m),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(C){en(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return w=BE,BE=!1,w}function ju(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&eD(e,n,i)}s=s.next}while(s!==r)}}function Dm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tD(t){var e=t.alternate;e!==null&&(t.alternate=null,tD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Is],delete e[hd],delete e[Dv],delete e[G4],delete e[Q4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nD(t){return t.tag===5||t.tag===3||t.tag===4}function zE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $v(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rp));else if(r!==4&&(t=t.child,t!==null))for($v(t,e,n),t=t.sibling;t!==null;)$v(t,e,n),t=t.sibling}function Wv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wv(t,e,n),t=t.sibling;t!==null;)Wv(t,e,n),t=t.sibling}var An=null,Qr=!1;function ki(t,e,n){for(n=n.child;n!==null;)rD(t,e,n),n=n.sibling}function rD(t,e,n){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Sm,n)}catch{}switch(n.tag){case 5:qn||xl(n,e);case 6:var r=An,s=Qr;An=null,ki(t,e,n),An=r,Qr=s,An!==null&&(Qr?(t=An,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):An.removeChild(n.stateNode));break;case 18:An!==null&&(Qr?(t=An,n=n.stateNode,t.nodeType===8?oy(t.parentNode,n):t.nodeType===1&&oy(t,n),od(t)):oy(An,n.stateNode));break;case 4:r=An,s=Qr,An=n.stateNode.containerInfo,Qr=!0,ki(t,e,n),An=r,Qr=s;break;case 0:case 11:case 14:case 15:if(!qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&eD(n,e,a),s=s.next}while(s!==r)}ki(t,e,n);break;case 1:if(!qn&&(xl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){en(n,e,o)}ki(t,e,n);break;case 21:ki(t,e,n);break;case 22:n.mode&1?(qn=(r=qn)||n.memoizedState!==null,ki(t,e,n),qn=r):ki(t,e,n);break;default:ki(t,e,n)}}function $E(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dU),e.forEach(function(r){var s=SU.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:An=o.stateNode,Qr=!1;break e;case 3:An=o.stateNode.containerInfo,Qr=!0;break e;case 4:An=o.stateNode.containerInfo,Qr=!0;break e}o=o.return}if(An===null)throw Error(ee(160));rD(i,a,s),An=null,Qr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){en(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sD(e,t),e=e.sibling}function sD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qr(e,t),ys(t),r&4){try{ju(3,t,t.return),Dm(3,t)}catch(m){en(t,t.return,m)}try{ju(5,t,t.return)}catch(m){en(t,t.return,m)}}break;case 1:qr(e,t),ys(t),r&512&&n!==null&&xl(n,n.return);break;case 5:if(qr(e,t),ys(t),r&512&&n!==null&&xl(n,n.return),t.flags&32){var s=t.stateNode;try{rd(s,"")}catch(m){en(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&xk(s,i),mv(o,a);var c=mv(o,i);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?Nk(s,h):d==="dangerouslySetInnerHTML"?Ck(s,h):d==="children"?rd(s,h):f0(s,d,h,c)}switch(o){case"input":uv(s,i);break;case"textarea":Tk(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Cl(s,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Cl(s,!!i.multiple,i.defaultValue,!0):Cl(s,!!i.multiple,i.multiple?[]:"",!1))}s[hd]=i}catch(m){en(t,t.return,m)}}break;case 6:if(qr(e,t),ys(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){en(t,t.return,m)}}break;case 3:if(qr(e,t),ys(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{od(e.containerInfo)}catch(m){en(t,t.return,m)}break;case 4:qr(e,t),ys(t);break;case 13:qr(e,t),ys(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(H0=cn())),r&4&&$E(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(qn=(c=qn)||d,qr(e,t),qn=c):qr(e,t),ys(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(pe=t,d=t.child;d!==null;){for(h=pe=d;pe!==null;){switch(p=pe,f=p.child,p.tag){case 0:case 11:case 14:case 15:ju(4,p,p.return);break;case 1:xl(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(m){en(r,n,m)}}break;case 5:xl(p,p.return);break;case 22:if(p.memoizedState!==null){qE(h);continue}}f!==null?(f.return=p,pe=f):qE(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Dk("display",a))}catch(m){en(t,t.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){en(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qr(e,t),ys(t),r&4&&$E(t);break;case 21:break;default:qr(e,t),ys(t)}}function ys(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nD(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(rd(s,""),r.flags&=-33);var i=zE(t);Wv(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=zE(t);$v(t,o,a);break;default:throw Error(ee(161))}}catch(l){en(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fU(t,e,n){pe=t,iD(t)}function iD(t,e,n){for(var r=(t.mode&1)!==0;pe!==null;){var s=pe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Bh;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||qn;o=Bh;var c=qn;if(Bh=a,(qn=l)&&!c)for(pe=s;pe!==null;)a=pe,l=a.child,a.tag===22&&a.memoizedState!==null?HE(s):l!==null?(l.return=a,pe=l):HE(s);for(;i!==null;)pe=i,iD(i),i=i.sibling;pe=s,Bh=o,qn=c}WE(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,pe=i):WE(t)}}function WE(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qn||Dm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&CE(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}CE(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&od(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}qn||e.flags&512&&zv(e)}catch(p){en(e,e.return,p)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function qE(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function HE(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dm(4,e)}catch(l){en(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){en(e,s,l)}}var i=e.return;try{zv(e)}catch(l){en(e,i,l)}break;case 5:var a=e.return;try{zv(e)}catch(l){en(e,a,l)}}}catch(l){en(e,e.return,l)}if(e===t){pe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,pe=o;break}pe=e.return}}var pU=Math.ceil,pp=pi.ReactCurrentDispatcher,W0=pi.ReactCurrentOwner,Br=pi.ReactCurrentBatchConfig,ut=0,Tn=null,mn=null,Pn=0,vr=0,Tl=Ea(0),bn=0,vd=null,Io=0,Nm=0,q0=0,Fu=null,cr=null,H0=0,Hl=1/0,qs=null,mp=!1,qv=null,Zi=null,zh=!1,qi=null,gp=0,Vu=0,Hv=null,xf=-1,Tf=0;function er(){return ut&6?cn():xf!==-1?xf:xf=cn()}function ea(t){return t.mode&1?ut&2&&Pn!==0?Pn&-Pn:Y4.transition!==null?(Tf===0&&(Tf=zk()),Tf):(t=bt,t!==0||(t=window.event,t=t===void 0?16:Qk(t.type)),t):1}function es(t,e,n,r){if(50<Vu)throw Vu=0,Hv=null,Error(ee(185));Hd(t,n,r),(!(ut&2)||t!==Tn)&&(t===Tn&&(!(ut&2)&&(Nm|=n),bn===4&&Vi(t,Pn)),gr(t,r),n===1&&ut===0&&!(e.mode&1)&&(Hl=cn()+500,Tm&&Ia()))}function gr(t,e){var n=t.callbackNode;YM(t,e);var r=Zf(t,t===Tn?Pn:0);if(r===0)n!==null&&tE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tE(n),e===1)t.tag===0?J4(KE.bind(null,t)):pC(KE.bind(null,t)),H4(function(){!(ut&6)&&Ia()}),n=null;else{switch($k(r)){case 1:n=v0;break;case 4:n=Vk;break;case 16:n=Xf;break;case 536870912:n=Bk;break;default:n=Xf}n=fD(n,aD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aD(t,e){if(xf=-1,Tf=0,ut&6)throw Error(ee(327));var n=t.callbackNode;if(Pl()&&t.callbackNode!==n)return null;var r=Zf(t,t===Tn?Pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yp(t,r);else{e=r;var s=ut;ut|=2;var i=lD();(Tn!==t||Pn!==e)&&(qs=null,Hl=cn()+500,po(t,e));do try{yU();break}catch(o){oD(t,o)}while(!0);A0(),pp.current=i,ut=s,mn!==null?e=0:(Tn=null,Pn=0,e=bn)}if(e!==0){if(e===2&&(s=bv(t),s!==0&&(r=s,e=Kv(t,s))),e===1)throw n=vd,po(t,0),Vi(t,r),gr(t,cn()),n;if(e===6)Vi(t,r);else{if(s=t.current.alternate,!(r&30)&&!mU(s)&&(e=yp(t,r),e===2&&(i=bv(t),i!==0&&(r=i,e=Kv(t,i))),e===1))throw n=vd,po(t,0),Vi(t,r),gr(t,cn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Wa(t,cr,qs);break;case 3:if(Vi(t,r),(r&130023424)===r&&(e=H0+500-cn(),10<e)){if(Zf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Cv(Wa.bind(null,t,cr,qs),e);break}Wa(t,cr,qs);break;case 4:if(Vi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Zr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pU(r/1960))-r,10<r){t.timeoutHandle=Cv(Wa.bind(null,t,cr,qs),r);break}Wa(t,cr,qs);break;case 5:Wa(t,cr,qs);break;default:throw Error(ee(329))}}}return gr(t,cn()),t.callbackNode===n?aD.bind(null,t):null}function Kv(t,e){var n=Fu;return t.current.memoizedState.isDehydrated&&(po(t,e).flags|=256),t=yp(t,e),t!==2&&(e=cr,cr=n,e!==null&&Gv(e)),t}function Gv(t){cr===null?cr=t:cr.push.apply(cr,t)}function mU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!is(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~q0,e&=~Nm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zr(e),r=1<<n;t[n]=-1,e&=~r}}function KE(t){if(ut&6)throw Error(ee(327));Pl();var e=Zf(t,0);if(!(e&1))return gr(t,cn()),null;var n=yp(t,e);if(t.tag!==0&&n===2){var r=bv(t);r!==0&&(e=r,n=Kv(t,r))}if(n===1)throw n=vd,po(t,0),Vi(t,e),gr(t,cn()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wa(t,cr,qs),gr(t,cn()),null}function K0(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(Hl=cn()+500,Tm&&Ia())}}function _o(t){qi!==null&&qi.tag===0&&!(ut&6)&&Pl();var e=ut;ut|=1;var n=Br.transition,r=bt;try{if(Br.transition=null,bt=1,t)return t()}finally{bt=r,Br.transition=n,ut=e,!(ut&6)&&Ia()}}function G0(){vr=Tl.current,Ft(Tl)}function po(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q4(n)),mn!==null)for(n=mn.return;n!==null;){var r=n;switch(C0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sp();break;case 3:Wl(),Ft(pr),Ft(Jn),U0();break;case 5:M0(r);break;case 4:Wl();break;case 13:Ft(Kt);break;case 19:Ft(Kt);break;case 10:R0(r.type._context);break;case 22:case 23:G0()}n=n.return}if(Tn=t,mn=t=ta(t.current,null),Pn=vr=e,bn=0,vd=null,q0=Nm=Io=0,cr=Fu=null,no!==null){for(e=0;e<no.length;e++)if(n=no[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}no=null}return t}function oD(t,e){do{var n=mn;try{if(A0(),Ef.current=fp,hp){for(var r=Qt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hp=!1}if(Eo=0,xn=vn=Qt=null,Uu=!1,md=0,W0.current=null,n===null||n.return===null){bn=1,vd=e,mn=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=Pn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=OE(a);if(f!==null){f.flags&=-257,LE(f,a,o,i,e),f.mode&1&&PE(i,c,e),e=f,l=c;var w=e.updateQueue;if(w===null){var m=new Set;m.add(l),e.updateQueue=m}else w.add(l);break e}else{if(!(e&1)){PE(i,c,e),Q0();break e}l=Error(ee(426))}}else if($t&&o.mode&1){var b=OE(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),LE(b,a,o,i,e),D0(ql(l,o));break e}}i=l=ql(l,o),bn!==4&&(bn=2),Fu===null?Fu=[i]:Fu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=$C(i,l,e);kE(i,v);break e;case 1:o=l;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Zi===null||!Zi.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=WC(i,o,e);kE(i,C);break e}}i=i.return}while(i!==null)}uD(n)}catch(O){e=O,mn===n&&n!==null&&(mn=n=n.return);continue}break}while(!0)}function lD(){var t=pp.current;return pp.current=fp,t===null?fp:t}function Q0(){(bn===0||bn===3||bn===2)&&(bn=4),Tn===null||!(Io&268435455)&&!(Nm&268435455)||Vi(Tn,Pn)}function yp(t,e){var n=ut;ut|=2;var r=lD();(Tn!==t||Pn!==e)&&(qs=null,po(t,e));do try{gU();break}catch(s){oD(t,s)}while(!0);if(A0(),ut=n,pp.current=r,mn!==null)throw Error(ee(261));return Tn=null,Pn=0,bn}function gU(){for(;mn!==null;)cD(mn)}function yU(){for(;mn!==null&&!zM();)cD(mn)}function cD(t){var e=hD(t.alternate,t,vr);t.memoizedProps=t.pendingProps,e===null?uD(t):mn=e,W0.current=null}function uD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uU(n,e),n!==null){n.flags&=32767,mn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bn=6,mn=null;return}}else if(n=cU(n,e,vr),n!==null){mn=n;return}if(e=e.sibling,e!==null){mn=e;return}mn=e=t}while(e!==null);bn===0&&(bn=5)}function Wa(t,e,n){var r=bt,s=Br.transition;try{Br.transition=null,bt=1,vU(t,e,n,r)}finally{Br.transition=s,bt=r}return null}function vU(t,e,n,r){do Pl();while(qi!==null);if(ut&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(XM(t,i),t===Tn&&(mn=Tn=null,Pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zh||(zh=!0,fD(Xf,function(){return Pl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Br.transition,Br.transition=null;var a=bt;bt=1;var o=ut;ut|=4,W0.current=null,hU(t,n),sD(n,t),j4(Tv),ep=!!xv,Tv=xv=null,t.current=n,fU(n),$M(),ut=o,bt=a,Br.transition=i}else t.current=n;if(zh&&(zh=!1,qi=t,gp=s),i=t.pendingLanes,i===0&&(Zi=null),HM(n.stateNode),gr(t,cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mp)throw mp=!1,t=qv,qv=null,t;return gp&1&&t.tag!==0&&Pl(),i=t.pendingLanes,i&1?t===Hv?Vu++:(Vu=0,Hv=t):Vu=0,Ia(),null}function Pl(){if(qi!==null){var t=$k(gp),e=Br.transition,n=bt;try{if(Br.transition=null,bt=16>t?16:t,qi===null)var r=!1;else{if(t=qi,qi=null,gp=0,ut&6)throw Error(ee(331));var s=ut;for(ut|=4,pe=t.current;pe!==null;){var i=pe,a=i.child;if(pe.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(pe=c;pe!==null;){var d=pe;switch(d.tag){case 0:case 11:case 15:ju(8,d,i)}var h=d.child;if(h!==null)h.return=d,pe=h;else for(;pe!==null;){d=pe;var p=d.sibling,f=d.return;if(tD(d),d===c){pe=null;break}if(p!==null){p.return=f,pe=p;break}pe=f}}}var w=i.alternate;if(w!==null){var m=w.child;if(m!==null){w.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}pe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,pe=a;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ju(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,pe=v;break e}pe=i.return}}var y=t.current;for(pe=y;pe!==null;){a=pe;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,pe=E;else e:for(a=y;pe!==null;){if(o=pe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Dm(9,o)}}catch(O){en(o,o.return,O)}if(o===a){pe=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,pe=C;break e}pe=o.return}}if(ut=s,Ia(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Sm,t)}catch{}r=!0}return r}finally{bt=n,Br.transition=e}}return!1}function GE(t,e,n){e=ql(n,e),e=$C(t,e,1),t=Xi(t,e,1),e=er(),t!==null&&(Hd(t,1,e),gr(t,e))}function en(t,e,n){if(t.tag===3)GE(t,t,n);else for(;e!==null;){if(e.tag===3){GE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zi===null||!Zi.has(r))){t=ql(n,t),t=WC(e,t,1),e=Xi(e,t,1),t=er(),e!==null&&(Hd(e,1,t),gr(e,t));break}}e=e.return}}function wU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&n,Tn===t&&(Pn&n)===n&&(bn===4||bn===3&&(Pn&130023424)===Pn&&500>cn()-H0?po(t,0):q0|=n),gr(t,e)}function dD(t,e){e===0&&(t.mode&1?(e=Rh,Rh<<=1,!(Rh&130023424)&&(Rh=4194304)):e=1);var n=er();t=oi(t,e),t!==null&&(Hd(t,e,n),gr(t,n))}function bU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dD(t,n)}function SU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),dD(t,n)}var hD;hD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pr.current)ur=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ur=!1,lU(t,e,n);ur=!!(t.flags&131072)}else ur=!1,$t&&e.flags&1048576&&mC(e,op,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_f(t,e),t=e.pendingProps;var s=Bl(e,Jn.current);Rl(e,n),s=F0(null,e,r,t,s,n);var i=V0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mr(r)?(i=!0,ip(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,O0(e),s.updater=Cm,e.stateNode=s,s._reactInternals=e,Lv(e,r,t,n),e=jv(null,e,r,!0,i,n)):(e.tag=0,$t&&i&&k0(e),Xn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_f(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=IU(r),t=Gr(r,t),s){case 0:e=Uv(null,e,r,t,n);break e;case 1:e=jE(null,e,r,t,n);break e;case 11:e=ME(null,e,r,t,n);break e;case 14:e=UE(null,e,r,Gr(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),Uv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),jE(t,e,r,s,n);case 3:e:{if(GC(e),t===null)throw Error(ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,SC(t,e),up(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ql(Error(ee(423)),e),e=FE(t,e,r,n,s);break e}else if(r!==s){s=ql(Error(ee(424)),e),e=FE(t,e,r,n,s);break e}else for(_r=Yi(e.stateNode.containerInfo.firstChild),kr=e,$t=!0,Yr=null,n=wC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zl(),r===s){e=li(t,e,n);break e}Xn(t,e,r,n)}e=e.child}return e;case 5:return EC(e),t===null&&Rv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,kv(r,s)?a=null:i!==null&&kv(r,i)&&(e.flags|=32),KC(t,e),Xn(t,e,a,n),e.child;case 6:return t===null&&Rv(e),null;case 13:return QC(t,e,n);case 4:return L0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$l(e,null,r,n):Xn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),ME(t,e,r,s,n);case 7:return Xn(t,e,e.pendingProps,n),e.child;case 8:return Xn(t,e,e.pendingProps.children,n),e.child;case 12:return Xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Rt(lp,r._currentValue),r._currentValue=a,i!==null)if(is(i.value,a)){if(i.children===s.children&&!pr.current){e=li(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Pv(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ee(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Pv(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Xn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rl(e,n),s=$r(s),r=r(s),e.flags|=1,Xn(t,e,r,n),e.child;case 14:return r=e.type,s=Gr(r,e.pendingProps),s=Gr(r.type,s),UE(t,e,r,s,n);case 15:return qC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gr(r,s),_f(t,e),e.tag=1,mr(r)?(t=!0,ip(e)):t=!1,Rl(e,n),zC(e,r,s),Lv(e,r,s,n),jv(null,e,r,!0,t,n);case 19:return JC(t,e,n);case 22:return HC(t,e,n)}throw Error(ee(156,e.tag))};function fD(t,e){return Fk(t,e)}function EU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(t,e,n,r){return new EU(t,e,n,r)}function J0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IU(t){if(typeof t=="function")return J0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===m0)return 11;if(t===g0)return 14}return 2}function ta(t,e){var n=t.alternate;return n===null?(n=Vr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kf(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")J0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case gl:return mo(n.children,s,i,e);case p0:a=8,s|=8;break;case iv:return t=Vr(12,n,e,s|2),t.elementType=iv,t.lanes=i,t;case av:return t=Vr(13,n,e,s),t.elementType=av,t.lanes=i,t;case ov:return t=Vr(19,n,e,s),t.elementType=ov,t.lanes=i,t;case Ek:return Am(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bk:a=10;break e;case Sk:a=9;break e;case m0:a=11;break e;case g0:a=14;break e;case Ui:a=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Vr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function mo(t,e,n,r){return t=Vr(7,t,r,e),t.lanes=n,t}function Am(t,e,n,r){return t=Vr(22,t,r,e),t.elementType=Ek,t.lanes=n,t.stateNode={isHidden:!1},t}function my(t,e,n){return t=Vr(6,t,null,e),t.lanes=n,t}function gy(t,e,n){return e=Vr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _U(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jg(0),this.expirationTimes=Jg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Y0(t,e,n,r,s,i,a,o,l){return t=new _U(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},O0(i),t}function xU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ml,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pD(t){if(!t)return ua;t=t._reactInternals;e:{if(Uo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(mr(n))return fC(t,n,e)}return e}function mD(t,e,n,r,s,i,a,o,l){return t=Y0(n,r,!0,t,s,i,a,o,l),t.context=pD(null),n=t.current,r=er(),s=ea(n),i=Zs(r,s),i.callback=e??null,Xi(n,i,s),t.current.lanes=s,Hd(t,s,r),gr(t,r),t}function Rm(t,e,n,r){var s=e.current,i=er(),a=ea(s);return n=pD(n),e.context===null?e.context=n:e.pendingContext=n,e=Zs(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xi(s,e,a),t!==null&&(es(t,s,a,i),Sf(t,s,a)),a}function vp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function QE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function X0(t,e){QE(t,e),(t=t.alternate)&&QE(t,e)}function TU(){return null}var gD=typeof reportError=="function"?reportError:function(t){console.error(t)};function Z0(t){this._internalRoot=t}Pm.prototype.render=Z0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Rm(t,e,null,null)};Pm.prototype.unmount=Z0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_o(function(){Rm(null,t,null,null)}),e[ai]=null}};function Pm(t){this._internalRoot=t}Pm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fi.length&&e!==0&&e<Fi[n].priority;n++);Fi.splice(n,0,t),n===0&&Gk(t)}};function eb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JE(){}function kU(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=vp(a);i.call(c)}}var a=mD(e,r,t,0,null,!1,!1,"",JE);return t._reactRootContainer=a,t[ai]=a.current,ud(t.nodeType===8?t.parentNode:t),_o(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=vp(l);o.call(c)}}var l=Y0(t,0,!1,null,null,!1,!1,"",JE);return t._reactRootContainer=l,t[ai]=l.current,ud(t.nodeType===8?t.parentNode:t),_o(function(){Rm(e,l,n,r)}),l}function Lm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=vp(a);o.call(l)}}Rm(e,a,t,s)}else a=kU(n,e,t,s,r);return vp(a)}Wk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bu(e.pendingLanes);n!==0&&(w0(e,n|1),gr(e,cn()),!(ut&6)&&(Hl=cn()+500,Ia()))}break;case 13:_o(function(){var r=oi(t,1);if(r!==null){var s=er();es(r,t,1,s)}}),X0(t,1)}};b0=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=er();es(e,t,134217728,n)}X0(t,134217728)}};qk=function(t){if(t.tag===13){var e=ea(t),n=oi(t,e);if(n!==null){var r=er();es(n,t,e,r)}X0(t,e)}};Hk=function(){return bt};Kk=function(t,e){var n=bt;try{return bt=t,e()}finally{bt=n}};yv=function(t,e,n){switch(e){case"input":if(uv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xm(r);if(!s)throw Error(ee(90));_k(r),uv(r,s)}}}break;case"textarea":Tk(t,n);break;case"select":e=n.value,e!=null&&Cl(t,!!n.multiple,e,!1)}};Pk=K0;Ok=_o;var CU={usingClientEntryPoint:!1,Events:[Gd,bl,xm,Ak,Rk,K0]},tu={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DU={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Uk(t),t===null?null:t.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||TU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Sm=$h.inject(DU),Ds=$h}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CU;Pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eb(e))throw Error(ee(200));return xU(t,e,null,n)};Pr.createRoot=function(t,e){if(!eb(t))throw Error(ee(299));var n=!1,r="",s=gD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Y0(t,1,!1,null,null,n,!1,r,s),t[ai]=e.current,ud(t.nodeType===8?t.parentNode:t),new Z0(e)};Pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=Uk(e),t=t===null?null:t.stateNode,t};Pr.flushSync=function(t){return _o(t)};Pr.hydrate=function(t,e,n){if(!Om(e))throw Error(ee(200));return Lm(null,t,e,!0,n)};Pr.hydrateRoot=function(t,e,n){if(!eb(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=gD;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=mD(e,null,t,1,n??null,s,!1,i,a),t[ai]=e.current,ud(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pm(e)};Pr.render=function(t,e,n){if(!Om(e))throw Error(ee(200));return Lm(null,t,e,!1,n)};Pr.unmountComponentAtNode=function(t){if(!Om(t))throw Error(ee(40));return t._reactRootContainer?(_o(function(){Lm(null,null,t,!1,function(){t._reactRootContainer=null,t[ai]=null})}),!0):!1};Pr.unstable_batchedUpdates=K0;Pr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Om(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Lm(t,e,n,!1,r)};Pr.version="18.3.1-next-f1338f8080-20240426";function yD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yD)}catch(t){console.error(t)}}yD(),gk.exports=Pr;var bc=gk.exports;const vD=sk(bc);var wD,YE=bc;wD=YE.createRoot,YE.hydrateRoot;const NU="modulepreload",AU=function(t,e){return new URL(t,e).href},XE={},J=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(e.map(l=>{if(l=AU(l,n),l in XE)return;XE[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(n)for(let p=i.length-1;p>=0;p--){const f=i[p];if(f.href===l&&(!c||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":NU,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return r.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},RU=1,PU=1e6;let yy=0;function OU(){return yy=(yy+1)%Number.MAX_SAFE_INTEGER,yy.toString()}const vy=new Map,ZE=t=>{if(vy.has(t))return;const e=setTimeout(()=>{vy.delete(t),Bu({type:"REMOVE_TOAST",toastId:t})},PU);vy.set(t,e)},LU=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,RU)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ZE(n):t.toasts.forEach(r=>{ZE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Cf=[];let Df={toasts:[]};function Bu(t){Df=LU(Df,t),Cf.forEach(e=>{e(Df)})}function bD({...t}){const e=OU(),n=s=>Bu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Bu({type:"DISMISS_TOAST",toastId:e});return Bu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Mm(){const[t,e]=_.useState(Df);return _.useEffect(()=>(Cf.push(e),()=>{const n=Cf.indexOf(e);n>-1&&Cf.splice(n,1)}),[t]),{...t,toast:bD,dismiss:n=>Bu({type:"DISMISS_TOAST",toastId:n})}}function kt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function eI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tb(...t){return e=>{let n=!1;const r=t.map(s=>{const i=eI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():eI(t[s],null)}}}}function kn(...t){return _.useCallback(tb(...t),t)}function MU(t,e){const n=_.createContext(e),r=i=>{const{children:a,...o}=i,l=_.useMemo(()=>o,Object.values(o));return I.jsx(n.Provider,{value:l,children:a})};r.displayName=t+"Provider";function s(i){const a=_.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function jo(t,e=[]){let n=[];function r(i,a){const o=_.createContext(a),l=n.length;n=[...n,a];const c=h=>{var p;const{scope:f,children:w,...m}=h,b=((p=f==null?void 0:f[t])==null?void 0:p[l])||o,v=_.useMemo(()=>m,Object.values(m));return I.jsx(b.Provider,{value:v,children:w})};c.displayName=i+"Provider";function d(h,p){var f;const w=((f=p==null?void 0:p[t])==null?void 0:f[l])||o,m=_.useContext(w);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(a=>_.createContext(a));return function(a){const o=(a==null?void 0:a[t])||i;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:o}}),[a,o])}};return s.scopeName=t,[r,UU(s,...e)]}function UU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const i=r.reduce((a,{useScope:o,scopeName:l})=>{const c=o(s)[`__scope${l}`];return{...a,...c}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Kl(t){const e=FU(t),n=_.forwardRef((r,s)=>{const{children:i,...a}=r,o=_.Children.toArray(i),l=o.find(VU);if(l){const c=l.props.children,d=o.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return I.jsx(e,{...a,ref:s,children:_.isValidElement(c)?_.cloneElement(c,void 0,d):null})}return I.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var jU=Kl("Slot");function FU(t){const e=_.forwardRef((n,r)=>{const{children:s,...i}=n;if(_.isValidElement(s)){const a=zU(s),o=BU(i,s.props);return s.type!==_.Fragment&&(o.ref=r?tb(r,a):a),_.cloneElement(s,o)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SD=Symbol("radix.slottable");function ED(t){const e=({children:n})=>I.jsx(I.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=SD,e}function VU(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SD}function BU(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const o=i(...a);return s(...a),o}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function zU(t){var e,n;let r=(e=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:e.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function ID(t){const e=t+"CollectionProvider",[n,r]=jo(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:b,children:v}=m,y=V.useRef(null),E=V.useRef(new Map).current;return I.jsx(s,{scope:b,itemMap:E,collectionRef:y,children:v})};a.displayName=e;const o=t+"CollectionSlot",l=Kl(o),c=V.forwardRef((m,b)=>{const{scope:v,children:y}=m,E=i(o,v),C=kn(b,E.collectionRef);return I.jsx(l,{ref:C,children:y})});c.displayName=o;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=Kl(d),f=V.forwardRef((m,b)=>{const{scope:v,children:y,...E}=m,C=V.useRef(null),O=kn(b,C),L=i(d,v);return V.useEffect(()=>(L.itemMap.set(C,{ref:C,...E}),()=>void L.itemMap.delete(C))),I.jsx(p,{[h]:"",ref:O,children:y})});f.displayName=d;function w(m){const b=i(t+"CollectionConsumer",m);return V.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((E,C)=>y.indexOf(E.ref.current)-y.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},w,r]}var $U=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ht=$U.reduce((t,e)=>{const n=Kl(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function nb(t,e){t&&bc.flushSync(()=>t.dispatchEvent(e))}function as(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function WU(t,e=globalThis==null?void 0:globalThis.document){const n=as(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var qU="DismissableLayer",Qv="dismissableLayer.update",HU="dismissableLayer.pointerDownOutside",KU="dismissableLayer.focusOutside",tI,_D=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jd=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...l}=t,c=_.useContext(_D),[d,h]=_.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=_.useState({}),w=kn(e,x=>h(x)),m=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(b),y=d?m.indexOf(d):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=y>=v,O=QU(x=>{const T=x.target,k=[...c.branches].some(D=>D.contains(T));!C||k||(s==null||s(x),a==null||a(x),x.defaultPrevented||o==null||o())},p),L=JU(x=>{const T=x.target;[...c.branches].some(k=>k.contains(T))||(i==null||i(x),a==null||a(x),x.defaultPrevented||o==null||o())},p);return WU(x=>{y===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&o&&(x.preventDefault(),o()))},p),_.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(tI=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),nI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tI)}},[d,p,n,c]),_.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),nI())},[d,c]),_.useEffect(()=>{const x=()=>f({});return document.addEventListener(Qv,x),()=>document.removeEventListener(Qv,x)},[]),I.jsx(Ht.div,{...l,ref:w,style:{pointerEvents:E?C?"auto":"none":void 0,...t.style},onFocusCapture:kt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:kt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:kt(t.onPointerDownCapture,O.onPointerDownCapture)})});Jd.displayName=qU;var GU="DismissableLayerBranch",xD=_.forwardRef((t,e)=>{const n=_.useContext(_D),r=_.useRef(null),s=kn(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),I.jsx(Ht.div,{...t,ref:s})});xD.displayName=GU;function QU(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){TD(HU,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function JU(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&TD(KU,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nI(){const t=new CustomEvent(Qv);document.dispatchEvent(t)}function TD(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?nb(s,i):s.dispatchEvent(i)}var YU=Jd,XU=xD,Rs=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},ZU="Portal",Um=_.forwardRef((t,e)=>{var n;const{container:r,...s}=t,[i,a]=_.useState(!1);Rs(()=>a(!0),[]);const o=r||i&&((n=globalThis==null?void 0:globalThis.document)==null?void 0:n.body);return o?vD.createPortal(I.jsx(Ht.div,{...s,ref:e}),o):null});Um.displayName=ZU;function ej(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var _a=t=>{const{present:e,children:n}=t,r=tj(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=kn(r.ref,nj(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};_a.displayName="Presence";function tj(t){const[e,n]=_.useState(),r=_.useRef(null),s=_.useRef(t),i=_.useRef("none"),a=t?"mounted":"unmounted",[o,l]=ej(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=Wh(r.current);i.current=o==="mounted"?c:"none"},[o]),Rs(()=>{const c=r.current,d=s.current;if(d!==t){const h=i.current,p=Wh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Rs(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=f=>{const w=Wh(r.current).includes(CSS.escape(f.animationName));if(f.target===e&&w&&(l("ANIMATION_END"),!s.current)){const m=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=m)})}},p=f=>{f.target===e&&(i.current=Wh(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Wh(t){return(t==null?void 0:t.animationName)||"none"}function nj(t){var e,n;let r=(e=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:e.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var rj=u0[" useInsertionEffect ".trim().toString()]||Rs;function jm({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=sj({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:s;{const d=_.useRef(t!==void 0);_.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const c=_.useCallback(d=>{var h;if(o){const p=ij(d)?d(t):d;p!==t&&((h=a.current)==null||h.call(a,p))}else i(d)},[o,t,i,a]);return[l,c]}function sj({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),s=_.useRef(n),i=_.useRef(e);return rj(()=>{i.current=e},[e]),_.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function ij(t){return typeof t=="function"}var kD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),aj="VisuallyHidden",Fm=_.forwardRef((t,e)=>I.jsx(Ht.span,{...t,ref:e,style:{...kD,...t.style}}));Fm.displayName=aj;var oj=Fm,rb="ToastProvider",[sb,lj,cj]=ID("Toast"),[CD]=jo("Toast",[cj]),[uj,Vm]=CD(rb),DD=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[o,l]=_.useState(null),[c,d]=_.useState(0),h=_.useRef(!1),p=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${rb}\`. Expected non-empty \`string\`.`),I.jsx(sb.Provider,{scope:e,children:I.jsx(uj,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:_.useCallback(()=>d(f=>f+1),[]),onToastRemove:_.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:a})})};DD.displayName=rb;var ND="ToastViewport",dj=["F8"],Jv="toast.viewportPause",Yv="toast.viewportResume",AD=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=dj,label:s="Notifications ({hotkey})",...i}=t,a=Vm(ND,n),o=lj(n),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),h=_.useRef(null),p=kn(e,h,a.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;_.useEffect(()=>{const b=v=>{var y;r.length!==0&&r.every(E=>v[E]||v.code===E)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),_.useEffect(()=>{const b=l.current,v=h.current;if(w&&b&&v){const y=()=>{if(!a.isClosePausedRef.current){const L=new CustomEvent(Jv);v.dispatchEvent(L),a.isClosePausedRef.current=!0}},E=()=>{if(a.isClosePausedRef.current){const L=new CustomEvent(Yv);v.dispatchEvent(L),a.isClosePausedRef.current=!1}},C=L=>{!b.contains(L.relatedTarget)&&E()},O=()=>{b.contains(document.activeElement)||E()};return b.addEventListener("focusin",y),b.addEventListener("focusout",C),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",O),window.addEventListener("blur",y),window.addEventListener("focus",E),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",C),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",O),window.removeEventListener("blur",y),window.removeEventListener("focus",E)}}},[w,a.isClosePausedRef]);const m=_.useCallback(({tabbingDirection:b})=>{const v=o().map(y=>{const E=y.ref.current,C=[E,..._j(E)];return b==="forwards"?C:C.reverse()});return(b==="forwards"?v.reverse():v).flat()},[o]);return _.useEffect(()=>{const b=h.current;if(b){const v=y=>{var E,C,O;const L=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!L){const x=document.activeElement,T=y.shiftKey;if(y.target===b&&T){(E=c.current)==null||E.focus();return}const k=m({tabbingDirection:T?"backwards":"forwards"}),D=k.findIndex(R=>R===x);wy(k.slice(D+1))?y.preventDefault():T?(C=c.current)==null||C.focus():(O=d.current)==null||O.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[o,m]),I.jsxs(XU,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&I.jsx(Xv,{ref:c,onFocusFromOutsideViewport:()=>{const b=m({tabbingDirection:"forwards"});wy(b)}}),I.jsx(sb.Slot,{scope:n,children:I.jsx(Ht.ol,{tabIndex:-1,...i,ref:p})}),w&&I.jsx(Xv,{ref:d,onFocusFromOutsideViewport:()=>{const b=m({tabbingDirection:"backwards"});wy(b)}})]})});AD.displayName=ND;var RD="ToastFocusProxy",Xv=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Vm(RD,n);return I.jsx(Fm,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var o;const l=a.relatedTarget;!((o=i.viewport)!=null&&o.contains(l))&&r()}})});Xv.displayName=RD;var Yd="Toast",hj="toast.swipeStart",fj="toast.swipeMove",pj="toast.swipeCancel",mj="toast.swipeEnd",PD=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[o,l]=jm({prop:r,defaultProp:s??!0,onChange:i,caller:Yd});return I.jsx(_a,{present:n||o,children:I.jsx(vj,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:as(t.onPause),onResume:as(t.onResume),onSwipeStart:kt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:kt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:kt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:kt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});PD.displayName=Yd;var[gj,yj]=CD(Yd,{onClose(){}}),vj=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...w}=t,m=Vm(Yd,n),[b,v]=_.useState(null),y=kn(e,$=>v($)),E=_.useRef(null),C=_.useRef(null),O=s||m.duration,L=_.useRef(0),x=_.useRef(O),T=_.useRef(0),{onToastAdd:k,onToastRemove:D}=m,R=as(()=>{var $;b!=null&&b.contains(document.activeElement)&&(($=m.viewport)==null||$.focus()),a()}),P=_.useCallback($=>{!$||$===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(R,$))},[R]);_.useEffect(()=>{const $=m.viewport;if($){const le=()=>{P(x.current),c==null||c()},fe=()=>{const de=new Date().getTime()-L.current;x.current=x.current-de,window.clearTimeout(T.current),l==null||l()};return $.addEventListener(Jv,fe),$.addEventListener(Yv,le),()=>{$.removeEventListener(Jv,fe),$.removeEventListener(Yv,le)}}},[m.viewport,O,l,c,P]),_.useEffect(()=>{i&&!m.isClosePausedRef.current&&P(O)},[i,O,m.isClosePausedRef,P]),_.useEffect(()=>(k(),()=>D()),[k,D]);const N=_.useMemo(()=>b?VD(b):null,[b]);return m.viewport?I.jsxs(I.Fragment,{children:[N&&I.jsx(wj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:N}),I.jsx(gj,{scope:n,onClose:R,children:bc.createPortal(I.jsx(sb.ItemSlot,{scope:n,children:I.jsx(YU,{asChild:!0,onEscapeKeyDown:kt(o,()=>{m.isFocusedToastEscapeKeyDownRef.current||R(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:I.jsx(Ht.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...w,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:kt(t.onKeyDown,$=>{$.key==="Escape"&&(o==null||o($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:kt(t.onPointerDown,$=>{$.button===0&&(E.current={x:$.clientX,y:$.clientY})}),onPointerMove:kt(t.onPointerMove,$=>{if(!E.current)return;const le=$.clientX-E.current.x,fe=$.clientY-E.current.y,de=!!C.current,U=["left","right"].includes(m.swipeDirection),M=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,Q=U?M(0,le):0,Ee=U?0:M(0,fe),oe=$.pointerType==="touch"?10:2,he={x:Q,y:Ee},ue={originalEvent:$,delta:he};de?(C.current=he,qh(fj,h,ue,{discrete:!1})):rI(he,m.swipeDirection,oe)?(C.current=he,qh(hj,d,ue,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(le)>oe||Math.abs(fe)>oe)&&(E.current=null)}),onPointerUp:kt(t.onPointerUp,$=>{const le=C.current,fe=$.target;if(fe.hasPointerCapture($.pointerId)&&fe.releasePointerCapture($.pointerId),C.current=null,E.current=null,le){const de=$.currentTarget,U={originalEvent:$,delta:le};rI(le,m.swipeDirection,m.swipeThreshold)?qh(mj,f,U,{discrete:!0}):qh(pj,p,U,{discrete:!0}),de.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),wj=t=>{const{__scopeToast:e,children:n,...r}=t,s=Vm(Yd,e),[i,a]=_.useState(!1),[o,l]=_.useState(!1);return Ej(()=>a(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:I.jsx(Um,{asChild:!0,children:I.jsx(Fm,{...r,children:i&&I.jsxs(I.Fragment,{children:[s.label," ",n]})})})},bj="ToastTitle",OD=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return I.jsx(Ht.div,{...r,ref:e})});OD.displayName=bj;var Sj="ToastDescription",LD=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return I.jsx(Ht.div,{...r,ref:e})});LD.displayName=Sj;var MD="ToastAction",UD=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?I.jsx(FD,{altText:n,asChild:!0,children:I.jsx(ib,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${MD}\`. Expected non-empty \`string\`.`),null)});UD.displayName=MD;var jD="ToastClose",ib=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=yj(jD,n);return I.jsx(FD,{asChild:!0,children:I.jsx(Ht.button,{type:"button",...r,ref:e,onClick:kt(t.onClick,s.onClose)})})});ib.displayName=jD;var FD=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return I.jsx(Ht.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function VD(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Ij(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const i=n.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...VD(n))}}),e}function qh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?nb(s,i):s.dispatchEvent(i)}var rI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function Ej(t=()=>{}){const e=as(t);Rs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Ij(t){return t.nodeType===t.ELEMENT_NODE}function _j(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function wy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var xj=DD,BD=AD,zD=PD,$D=OD,WD=LD,qD=UD,HD=ib;function KD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=KD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function GD(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=KD(t))&&(r&&(r+=" "),r+=e);return r}const sI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,iI=GD,ab=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return iI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=sI(d)||sI(h);return s[c][p]}),o=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...f}=d;return Object.entries(f).every(w=>{let[m,b]=w;return Array.isArray(b)?b.includes({...i,...o}[m]):{...i,...o}[m]===b})?[...c,h,p]:c},[]);return iI(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Tj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QD=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var kj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cj=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},l)=>_.createElement("svg",{ref:l,...kj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:QD("lucide",s),...o},[...a.map(([c,d])=>_.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Dt=(t,e)=>{const n=_.forwardRef(({className:r,...s},i)=>_.createElement(Cj,{ref:i,iconNode:e,className:QD(`lucide-${Tj(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const JD=Dt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const YD=Dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const XD=Dt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ZD=Dt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const eN=Dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tN=Dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nN=Dt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rN=Dt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sN=Dt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const iN=Dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Dj=Dt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const aN=Dt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zv=Dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ew=Dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oN=Dt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lN=Dt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tw=Dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nf=Dt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const cN=Dt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nw=Dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nj=Dt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const uN=Dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dN=Dt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const hN=Dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const fN=Dt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Bm=Dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ob="-",Aj=t=>{const e=Pj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const i=s.split(ob);return i[0]===""&&i.length!==1&&i.shift(),pN(i,e)||Rj(s)},getConflictingClassGroupIds:(s,i)=>{const a=n[s]||[];return i&&r[s]?[...a,...r[s]]:a}}},pN=(t,e)=>{var n;if(t.length===0)return e.classGroupId;const r=t[0],s=e.nextPart.get(r),i=s?pN(t.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(ob);return(n=e.validators.find(({validator:o})=>o(a)))==null?void 0:n.classGroupId},aI=/^\[(.+)\]$/,Rj=t=>{if(aI.test(t)){const e=aI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Pj=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Lj(Object.entries(t.classGroups),n).forEach(([s,i])=>{rw(i,r,s,e)}),r},rw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:oI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Oj(s)){rw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{rw(a,oI(e,i),n,r)})})},oI=(t,e)=>{let n=t;return e.split(ob).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Oj=t=>t.isThemeGetter,Lj=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[n,s]}):t,Mj=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},mN="!",Uj=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=o=>{const l=[];let c=0,d=0,h;for(let b=0;b<o.length;b++){let v=o[b];if(c===0){if(v===s&&(r||o.slice(b,b+i)===e)){l.push(o.slice(d,b)),d=b+i;continue}if(v==="/"){h=b;continue}}v==="["?c++:v==="]"&&c--}const p=l.length===0?o:o.substring(d),f=p.startsWith(mN),w=f?p.substring(1):p,m=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:w,maybePostfixModifierPosition:m}};return n?o=>n({className:o,parseClassName:a}):a},jj=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Fj=t=>({cache:Mj(t.cacheSize),parseClassName:Uj(t),...Aj(t)}),Vj=/\s+/,Bj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(Vj);let o="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(c);let w=!!f,m=r(w?p.substring(0,f):p);if(!m){if(!w){o=c+(o.length>0?" "+o:o);continue}if(m=r(p),!m){o=c+(o.length>0?" "+o:o);continue}w=!1}const b=jj(d).join(":"),v=h?b+mN:b,y=v+m;if(i.includes(y))continue;i.push(y);const E=s(m,w);for(let C=0;C<E.length;++C){const O=E[C];i.push(v+O)}o=c+(o.length>0?" "+o:o)}return o};function zj(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=gN(e))&&(r&&(r+=" "),r+=n);return r}const gN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=gN(t[r]))&&(n&&(n+=" "),n+=e);return n};function $j(t,...e){let n,r,s,i=a;function a(l){const c=e.reduce((d,h)=>h(d),t());return n=Fj(c),r=n.cache.get,s=n.cache.set,i=o,o(l)}function o(l){const c=r(l);if(c)return c;const d=Bj(l,n);return s(l,d),d}return function(){return i(zj.apply(null,arguments))}}const Ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},yN=/^\[(?:([a-z-]+):)?(.+)\]$/i,Wj=/^\d+\/\d+$/,qj=new Set(["px","full","screen"]),Hj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Kj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Qj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Jj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vs=t=>Ol(t)||qj.has(t)||Wj.test(t),Ci=t=>Sc(t,"length",s3),Ol=t=>!!t&&!Number.isNaN(Number(t)),by=t=>Sc(t,"number",Ol),nu=t=>!!t&&Number.isInteger(Number(t)),Yj=t=>t.endsWith("%")&&Ol(t.slice(0,-1)),Ye=t=>yN.test(t),Di=t=>Hj.test(t),Xj=new Set(["length","size","percentage"]),Zj=t=>Sc(t,Xj,vN),e3=t=>Sc(t,"position",vN),t3=new Set(["image","url"]),n3=t=>Sc(t,t3,a3),r3=t=>Sc(t,"",i3),ru=()=>!0,Sc=(t,e,n)=>{const r=yN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},s3=t=>Kj.test(t)&&!Gj.test(t),vN=()=>!1,i3=t=>Qj.test(t),a3=t=>Jj.test(t),o3=()=>{const t=Ut("colors"),e=Ut("spacing"),n=Ut("blur"),r=Ut("brightness"),s=Ut("borderColor"),i=Ut("borderRadius"),a=Ut("borderSpacing"),o=Ut("borderWidth"),l=Ut("contrast"),c=Ut("grayscale"),d=Ut("hueRotate"),h=Ut("invert"),p=Ut("gap"),f=Ut("gradientColorStops"),w=Ut("gradientColorStopPositions"),m=Ut("inset"),b=Ut("margin"),v=Ut("opacity"),y=Ut("padding"),E=Ut("saturate"),C=Ut("scale"),O=Ut("sepia"),L=Ut("skew"),x=Ut("space"),T=Ut("translate"),k=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Ye,e],P=()=>[Ye,e],N=()=>["",Vs,Ci],$=()=>["auto",Ol,Ye],le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",Ye],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ee=()=>[Ol,Ye];return{cacheSize:500,separator:":",theme:{colors:[ru],spacing:[Vs,Ci],blur:["none","",Di,Ye],brightness:Ee(),borderColor:[t],borderRadius:["none","","full",Di,Ye],borderSpacing:P(),borderWidth:N(),contrast:Ee(),grayscale:M(),hueRotate:Ee(),invert:M(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[Yj,Ci],inset:R(),margin:R(),opacity:Ee(),padding:P(),saturate:Ee(),scale:Ee(),sepia:M(),skew:Ee(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[Di]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...le(),Ye]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nu,Ye]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",nu,Ye]}],"grid-cols":[{"grid-cols":[ru]}],"col-start-end":[{col:["auto",{span:["full",nu,Ye]},Ye]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[ru]}],"row-start-end":[{row:["auto",{span:[nu,Ye]},Ye]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ye,e]}],"min-w":[{"min-w":[Ye,e,"min","max","fit"]}],"max-w":[{"max-w":[Ye,e,"none","full","min","max","fit","prose",{screen:[Di]},Di]}],h:[{h:[Ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Di,Ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",by]}],"font-family":[{font:[ru]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",Ol,by]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vs,Ye]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vs,Ci]}],"underline-offset":[{"underline-offset":["auto",Vs,Ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...le(),e3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zj]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},n3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:fe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[Vs,Ye]}],"outline-w":[{outline:[Vs,Ci]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Vs,Ci]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Di,r3]}],"shadow-color":[{shadow:[ru]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...de(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":de()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Di,Ye]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:Ee()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:Ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[nu,Ye]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Vs,Ci,by]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},l3=$j(o3);function Cn(...t){return l3(GD(t))}const c3=xj,wN=_.forwardRef(({className:t,...e},n)=>I.jsx(BD,{ref:n,className:Cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));wN.displayName=BD.displayName;const u3=ab("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bN=_.forwardRef(({className:t,variant:e,...n},r)=>I.jsx(zD,{ref:r,className:Cn(u3({variant:e}),t),...n}));bN.displayName=zD.displayName;const d3=_.forwardRef(({className:t,...e},n)=>I.jsx(qD,{ref:n,className:Cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));d3.displayName=qD.displayName;const SN=_.forwardRef(({className:t,...e},n)=>I.jsx(HD,{ref:n,className:Cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:I.jsx(Bm,{className:"h-4 w-4"})}));SN.displayName=HD.displayName;const EN=_.forwardRef(({className:t,...e},n)=>I.jsx($D,{ref:n,className:Cn("text-sm font-semibold",t),...e}));EN.displayName=$D.displayName;const IN=_.forwardRef(({className:t,...e},n)=>I.jsx(WD,{ref:n,className:Cn("text-sm opacity-90",t),...e}));IN.displayName=WD.displayName;function h3(){const{toasts:t}=Mm();return I.jsxs(c3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return I.jsxs(bN,{...i,children:[I.jsxs("div",{className:"grid gap-1",children:[n&&I.jsx(EN,{children:n}),r&&I.jsx(IN,{children:r})]}),s,I.jsx(SN,{})]},e)}),I.jsx(wN,{})]})}var wp=["light","dark"],lb="(prefers-color-scheme: dark)",f3=typeof window>"u",cb=_.createContext(void 0),p3={setTheme:t=>{},themes:[]},ub=()=>{var t;return(t=_.useContext(cb))!=null?t:p3},m3=t=>_.useContext(cb)?t.children:_.createElement(y3,{...t}),g3=["light","dark"],y3=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=g3,defaultTheme:a=n?"system":"light",attribute:o="data-theme",value:l,children:c,nonce:d})=>{let[h,p]=_.useState(()=>lI(s,a)),[f,w]=_.useState(()=>lI(s)),m=l?Object.values(l):i,b=_.useCallback(C=>{let O=C;if(!O)return;C==="system"&&n&&(O=cI());let L=l?l[O]:O,x=e?w3():null,T=document.documentElement;if(o==="class"?(T.classList.remove(...m),L&&T.classList.add(L)):L?T.setAttribute(o,L):T.removeAttribute(o),r){let k=wp.includes(a)?a:null,D=wp.includes(O)?O:k;T.style.colorScheme=D}x==null||x()},[]),v=_.useCallback(C=>{let O=typeof C=="function"?C(C):C;p(O);try{localStorage.setItem(s,O)}catch{}},[t]),y=_.useCallback(C=>{let O=cI(C);w(O),h==="system"&&n&&!t&&b("system")},[h,t]);_.useEffect(()=>{let C=window.matchMedia(lb);return C.addListener(y),y(C),()=>C.removeListener(y)},[y]),_.useEffect(()=>{let C=O=>{if(O.key!==s)return;let L=O.newValue||a;v(L)};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[v]),_.useEffect(()=>{b(t??h)},[t,h]);let E=_.useMemo(()=>({theme:h,setTheme:v,forcedTheme:t,resolvedTheme:h==="system"?f:h,themes:n?[...i,"system"]:i,systemTheme:n?f:void 0}),[h,v,t,f,n,i]);return _.createElement(cb.Provider,{value:E},_.createElement(v3,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:a,attribute:o,value:l,children:c,attrs:m,nonce:d}),c)},v3=_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:o,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?wp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(w,m=!1,b=!0)=>{let v=a?a[w]:w,y=m?w+"|| ''":`'${v}'`,E="";return s&&b&&!m&&wp.includes(w)&&(E+=`d.style.colorScheme = '${w}';`),n==="class"?m||v?E+=`c.add(${y})`:E+="null":v&&(E+=`d[s](n,${y})`),E},f=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${lb}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}${c?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return _.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})}),lI=(t,e)=>{if(f3)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},w3=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},cI=t=>(t||(t=window.matchMedia(lb)),t.matches?"dark":"light"),b3=t=>{switch(t){case"success":return I3;case"info":return x3;case"warning":return _3;case"error":return T3;default:return null}},S3=Array(12).fill(0),E3=({visible:t,className:e})=>V.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},V.createElement("div",{className:"sonner-spinner"},S3.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),I3=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_3=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),x3=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),T3=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),k3=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),C3=()=>{let[t,e]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},sw=1,D3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:sw++,i=this.toasts.find(o=>o.id===s),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(o=>o.id===s?(this.publish({...o,...t,id:s,title:n}),{...o,...t,id:s,dismissible:a,title:n}):o):this.addToast({title:n,...r,dismissible:a,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,a=r.then(async l=>{if(i=["resolve",l],V.isValidElement(l))s=!1,this.create({id:n,type:"default",message:l});else if(A3(l)&&!l.ok){s=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:d})}else if(e.success!==void 0){s=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:d})}}).finally(()=>{var l;s&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),o=()=>new Promise((l,c)=>a.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||sw++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},or=new D3,N3=(t,e)=>{let n=(e==null?void 0:e.id)||sw++;return or.addToast({title:t,...e,id:n}),n},A3=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",R3=N3,P3=()=>or.toasts,O3=()=>or.getActiveToasts(),Nn=Object.assign(R3,{success:or.success,info:or.info,warning:or.warning,error:or.error,custom:or.custom,message:or.message,promise:or.promise,dismiss:or.dismiss,loading:or.loading},{getHistory:P3,getToasts:O3});function L3(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}L3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Hh(t){return t.label!==void 0}var M3=3,U3="32px",j3="16px",uI=4e3,F3=356,V3=14,B3=20,z3=200;function Hr(...t){return t.filter(Boolean).join(" ")}function $3(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var W3=t=>{var e,n,r,s,i,a,o,l,c,d,h;let{invert:p,toast:f,unstyled:w,interacting:m,setHeights:b,visibleToasts:v,heights:y,index:E,toasts:C,expanded:O,removeToast:L,defaultRichColors:x,closeButton:T,style:k,cancelButtonStyle:D,actionButtonStyle:R,className:P="",descriptionClassName:N="",duration:$,position:le,gap:fe,loadingIcon:de,expandByDefault:U,classNames:M,icons:Q,closeButtonAriaLabel:Ee="Close toast",pauseWhenPageIsHidden:oe}=t,[he,ue]=V.useState(null),[Be,Fe]=V.useState(null),[ce,Ke]=V.useState(!1),[Xt,En]=V.useState(!1),[fn,Mn]=V.useState(!1),[sn,Un]=V.useState(!1),[Ue,jn]=V.useState(!1),[ne,X]=V.useState(0),[G,W]=V.useState(0),ie=V.useRef(f.duration||$||uI),ge=V.useRef(null),Z=V.useRef(null),Se=E===0,Ce=E+1<=v,Me=f.type,Oe=f.dismissible!==!1,Ne=f.className||"",ve=f.descriptionClassName||"",Ie=V.useMemo(()=>y.findIndex(K=>K.toastId===f.id)||0,[y,f.id]),ze=V.useMemo(()=>{var K;return(K=f.closeButton)!=null?K:T},[f.closeButton,T]),It=V.useMemo(()=>f.duration||$||uI,[f.duration,$]),Je=V.useRef(0),Ve=V.useRef(0),pt=V.useRef(0),Ge=V.useRef(null),[mt,$e]=le.split("-"),Xe=V.useMemo(()=>y.reduce((K,re,ke)=>ke>=Ie?K:K+re.height,0),[y,Ie]),Re=C3(),_t=f.invert||p,ht=Me==="loading";Ve.current=V.useMemo(()=>Ie*fe+Xe,[Ie,Xe]),V.useEffect(()=>{ie.current=It},[It]),V.useEffect(()=>{Ke(!0)},[]),V.useEffect(()=>{let K=Z.current;if(K){let re=K.getBoundingClientRect().height;return W(re),b(ke=>[{toastId:f.id,height:re,position:f.position},...ke]),()=>b(ke=>ke.filter(_e=>_e.toastId!==f.id))}},[b,f.id]),V.useLayoutEffect(()=>{if(!ce)return;let K=Z.current,re=K.style.height;K.style.height="auto";let ke=K.getBoundingClientRect().height;K.style.height=re,W(ke),b(_e=>_e.find(De=>De.toastId===f.id)?_e.map(De=>De.toastId===f.id?{...De,height:ke}:De):[{toastId:f.id,height:ke,position:f.position},..._e])},[ce,f.title,f.description,b,f.id]);let gt=V.useCallback(()=>{En(!0),X(Ve.current),b(K=>K.filter(re=>re.toastId!==f.id)),setTimeout(()=>{L(f)},z3)},[f,L,b,Ve]);V.useEffect(()=>{if(f.promise&&Me==="loading"||f.duration===1/0||f.type==="loading")return;let K;return O||m||oe&&Re?(()=>{if(pt.current<Je.current){let re=new Date().getTime()-Je.current;ie.current=ie.current-re}pt.current=new Date().getTime()})():ie.current!==1/0&&(Je.current=new Date().getTime(),K=setTimeout(()=>{var re;(re=f.onAutoClose)==null||re.call(f,f),gt()},ie.current)),()=>clearTimeout(K)},[O,m,f,Me,oe,Re,gt]),V.useEffect(()=>{f.delete&&gt()},[gt,f.delete]);function Nt(){var K,re,ke;return Q!=null&&Q.loading?V.createElement("div",{className:Hr(M==null?void 0:M.loader,(K=f==null?void 0:f.classNames)==null?void 0:K.loader,"sonner-loader"),"data-visible":Me==="loading"},Q.loading):de?V.createElement("div",{className:Hr(M==null?void 0:M.loader,(re=f==null?void 0:f.classNames)==null?void 0:re.loader,"sonner-loader"),"data-visible":Me==="loading"},de):V.createElement(E3,{className:Hr(M==null?void 0:M.loader,(ke=f==null?void 0:f.classNames)==null?void 0:ke.loader),visible:Me==="loading"})}return V.createElement("li",{tabIndex:0,ref:Z,className:Hr(P,Ne,M==null?void 0:M.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[Me],(n=f==null?void 0:f.classNames)==null?void 0:n[Me]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:x,"data-styled":!(f.jsx||f.unstyled||w),"data-mounted":ce,"data-promise":!!f.promise,"data-swiped":Ue,"data-removed":Xt,"data-visible":Ce,"data-y-position":mt,"data-x-position":$e,"data-index":E,"data-front":Se,"data-swiping":fn,"data-dismissible":Oe,"data-type":Me,"data-invert":_t,"data-swipe-out":sn,"data-swipe-direction":Be,"data-expanded":!!(O||U&&ce),style:{"--index":E,"--toasts-before":E,"--z-index":C.length-E,"--offset":`${Xt?ne:Ve.current}px`,"--initial-height":U?"auto":`${G}px`,...k,...f.style},onDragEnd:()=>{Mn(!1),ue(null),Ge.current=null},onPointerDown:K=>{ht||!Oe||(ge.current=new Date,X(Ve.current),K.target.setPointerCapture(K.pointerId),K.target.tagName!=="BUTTON"&&(Mn(!0),Ge.current={x:K.clientX,y:K.clientY}))},onPointerUp:()=>{var K,re,ke,_e;if(sn||!Oe)return;Ge.current=null;let De=Number(((K=Z.current)==null?void 0:K.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rt=Number(((re=Z.current)==null?void 0:re.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),yt=new Date().getTime()-((ke=ge.current)==null?void 0:ke.getTime()),Tt=he==="x"?De:rt,Ot=Math.abs(Tt)/yt;if(Math.abs(Tt)>=B3||Ot>.11){X(Ve.current),(_e=f.onDismiss)==null||_e.call(f,f),Fe(he==="x"?De>0?"right":"left":rt>0?"down":"up"),gt(),Un(!0),jn(!1);return}Mn(!1),ue(null)},onPointerMove:K=>{var re,ke,_e,De;if(!Ge.current||!Oe||((re=window.getSelection())==null?void 0:re.toString().length)>0)return;let rt=K.clientY-Ge.current.y,yt=K.clientX-Ge.current.x,Tt=(ke=t.swipeDirections)!=null?ke:$3(le);!he&&(Math.abs(yt)>1||Math.abs(rt)>1)&&ue(Math.abs(yt)>Math.abs(rt)?"x":"y");let Ot={x:0,y:0};he==="y"?(Tt.includes("top")||Tt.includes("bottom"))&&(Tt.includes("top")&&rt<0||Tt.includes("bottom")&&rt>0)&&(Ot.y=rt):he==="x"&&(Tt.includes("left")||Tt.includes("right"))&&(Tt.includes("left")&&yt<0||Tt.includes("right")&&yt>0)&&(Ot.x=yt),(Math.abs(Ot.x)>0||Math.abs(Ot.y)>0)&&jn(!0),(_e=Z.current)==null||_e.style.setProperty("--swipe-amount-x",`${Ot.x}px`),(De=Z.current)==null||De.style.setProperty("--swipe-amount-y",`${Ot.y}px`)}},ze&&!f.jsx?V.createElement("button",{"aria-label":Ee,"data-disabled":ht,"data-close-button":!0,onClick:ht||!Oe?()=>{}:()=>{var K;gt(),(K=f.onDismiss)==null||K.call(f,f)},className:Hr(M==null?void 0:M.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(i=Q==null?void 0:Q.close)!=null?i:k3):null,f.jsx||_.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:V.createElement(V.Fragment,null,Me||f.icon||f.promise?V.createElement("div",{"data-icon":"",className:Hr(M==null?void 0:M.icon,(a=f==null?void 0:f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Nt():null,f.type!=="loading"?f.icon||(Q==null?void 0:Q[Me])||b3(Me):null):null,V.createElement("div",{"data-content":"",className:Hr(M==null?void 0:M.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},V.createElement("div",{"data-title":"",className:Hr(M==null?void 0:M.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?V.createElement("div",{"data-description":"",className:Hr(N,ve,M==null?void 0:M.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),_.isValidElement(f.cancel)?f.cancel:f.cancel&&Hh(f.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||D,onClick:K=>{var re,ke;Hh(f.cancel)&&Oe&&((ke=(re=f.cancel).onClick)==null||ke.call(re,K),gt())},className:Hr(M==null?void 0:M.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,_.isValidElement(f.action)?f.action:f.action&&Hh(f.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||R,onClick:K=>{var re,ke;Hh(f.action)&&((ke=(re=f.action).onClick)==null||ke.call(re,K),!K.defaultPrevented&&gt())},className:Hr(M==null?void 0:M.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function dI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function q3(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",o=i?j3:U3;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${a}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${a}-${c}`]=o:n[`${a}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(o)}),n}var H3=_.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:p,style:f,visibleToasts:w=M3,toastOptions:m,dir:b=dI(),gap:v=V3,loadingIcon:y,icons:E,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:O}=t,[L,x]=V.useState([]),T=V.useMemo(()=>Array.from(new Set([r].concat(L.filter(oe=>oe.position).map(oe=>oe.position)))),[L,r]),[k,D]=V.useState([]),[R,P]=V.useState(!1),[N,$]=V.useState(!1),[le,fe]=V.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),de=V.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=V.useRef(null),Q=V.useRef(!1),Ee=V.useCallback(oe=>{x(he=>{var ue;return(ue=he.find(Be=>Be.id===oe.id))!=null&&ue.delete||or.dismiss(oe.id),he.filter(({id:Be})=>Be!==oe.id)})},[]);return V.useEffect(()=>or.subscribe(oe=>{if(oe.dismiss){x(he=>he.map(ue=>ue.id===oe.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{vD.flushSync(()=>{x(he=>{let ue=he.findIndex(Be=>Be.id===oe.id);return ue!==-1?[...he.slice(0,ue),{...he[ue],...oe},...he.slice(ue+1)]:[oe,...he]})})})}),[]),V.useEffect(()=>{if(d!=="system"){fe(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:he})=>{fe(he?"dark":"light")})}catch{oe.addListener(({matches:he})=>{try{fe(he?"dark":"light")}catch(ue){console.error(ue)}})}},[d]),V.useEffect(()=>{L.length<=1&&P(!1)},[L]),V.useEffect(()=>{let oe=he=>{var ue,Be;s.every(Fe=>he[Fe]||he.code===Fe)&&(P(!0),(ue=de.current)==null||ue.focus()),he.code==="Escape"&&(document.activeElement===de.current||(Be=de.current)!=null&&Be.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[s]),V.useEffect(()=>{if(de.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,Q.current=!1)}},[de.current]),V.createElement("section",{ref:e,"aria-label":`${C} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((oe,he)=>{var ue;let[Be,Fe]=oe.split("-");return L.length?V.createElement("ol",{key:oe,dir:b==="auto"?dI():b,tabIndex:-1,ref:de,className:o,"data-sonner-toaster":!0,"data-theme":le,"data-y-position":Be,"data-lifted":R&&L.length>1&&!i,"data-x-position":Fe,style:{"--front-toast-height":`${((ue=k[0])==null?void 0:ue.height)||0}px`,"--width":`${F3}px`,"--gap":`${v}px`,...f,...q3(l,c)},onBlur:ce=>{Q.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(Q.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,M.current=ce.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{N||P(!1)},onDragEnd:()=>P(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},L.filter(ce=>!ce.position&&he===0||ce.position===oe).map((ce,Ke)=>{var Xt,En;return V.createElement(W3,{key:ce.id,icons:E,index:Ke,toast:ce,defaultRichColors:h,duration:(Xt=m==null?void 0:m.duration)!=null?Xt:p,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:w,closeButton:(En=m==null?void 0:m.closeButton)!=null?En:a,interacting:N,position:oe,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:Ee,toasts:L.filter(fn=>fn.position==ce.position),heights:k.filter(fn=>fn.position==ce.position),setHeights:D,expandByDefault:i,gap:v,loadingIcon:y,expanded:R,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const K3=({...t})=>{const{theme:e="system"}=ub();return I.jsx(H3,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var G3=u0[" useId ".trim().toString()]||(()=>{}),Q3=0;function Af(t){const[e,n]=_.useState(G3());return Rs(()=>{n(r=>r??String(Q3++))},[t]),t||(e?`radix-${e}`:"")}const J3=["top","right","bottom","left"],da=Math.min,br=Math.max,bp=Math.round,Kh=Math.floor,As=t=>({x:t,y:t}),Y3={left:"right",right:"left",bottom:"top",top:"bottom"},X3={start:"end",end:"start"};function iw(t,e,n){return br(t,da(e,n))}function ci(t,e){return typeof t=="function"?t(e):t}function ui(t){return t.split("-")[0]}function Ec(t){return t.split("-")[1]}function db(t){return t==="x"?"y":"x"}function hb(t){return t==="y"?"height":"width"}const Z3=new Set(["top","bottom"]);function xs(t){return Z3.has(ui(t))?"y":"x"}function fb(t){return db(xs(t))}function eF(t,e,n){n===void 0&&(n=!1);const r=Ec(t),s=fb(t),i=hb(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Sp(a)),[a,Sp(a)]}function tF(t){const e=Sp(t);return[aw(t),e,aw(e)]}function aw(t){return t.replace(/start|end/g,e=>X3[e])}const hI=["left","right"],fI=["right","left"],nF=["top","bottom"],rF=["bottom","top"];function sF(t,e,n){switch(t){case"top":case"bottom":return n?e?fI:hI:e?hI:fI;case"left":case"right":return e?nF:rF;default:return[]}}function iF(t,e,n,r){const s=Ec(t);let i=sF(ui(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(aw)))),i}function Sp(t){return t.replace(/left|right|bottom|top/g,e=>Y3[e])}function aF(t){return{top:0,right:0,bottom:0,left:0,...t}}function _N(t){return typeof t!="number"?aF(t):{top:t,right:t,bottom:t,left:t}}function Ep(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function pI(t,e,n){let{reference:r,floating:s}=t;const i=xs(e),a=fb(e),o=hb(a),l=ui(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[o]/2-s[o]/2;let f;switch(l){case"top":f={x:d,y:r.y-s.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-s.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Ec(e)){case"start":f[a]-=p*(n&&c?-1:1);break;case"end":f[a]+=p*(n&&c?-1:1);break}return f}const oF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,o=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=pI(c,r,l),p=r,f={},w=0;for(let m=0;m<o.length;m++){const{name:b,fn:v}=o[m],{x:y,y:E,data:C,reset:O}=await v({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:f,rects:c,platform:a,elements:{reference:t,floating:e}});d=y??d,h=E??h,f={...f,[b]:{...f[b],...C}},O&&w<=50&&(w++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(c=O.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:d,y:h}=pI(c,p,l)),m=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}};async function wd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=ci(e,t),w=_N(f),m=o[p?h==="floating"?"reference":"floating":h],b=Ep(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(m)))==null||n?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),E=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},C=Ep(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:y,strategy:l}):v);return{top:(b.top-C.top+w.top)/E.y,bottom:(C.bottom-b.bottom+w.bottom)/E.y,left:(b.left-C.left+w.left)/E.x,right:(C.right-b.right+w.right)/E.x}}const lF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:d=0}=ci(t,e)||{};if(c==null)return{};const h=_N(d),p={x:n,y:r},f=fb(s),w=hb(f),m=await a.getDimensions(c),b=f==="y",v=b?"top":"left",y=b?"bottom":"right",E=b?"clientHeight":"clientWidth",C=i.reference[w]+i.reference[f]-p[f]-i.floating[w],O=p[f]-i.reference[f],L=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let x=L?L[E]:0;(!x||!await(a.isElement==null?void 0:a.isElement(L)))&&(x=o.floating[E]||i.floating[w]);const T=C/2-O/2,k=x/2-m[w]/2-1,D=da(h[v],k),R=da(h[y],k),P=D,N=x-m[w]-R,$=x/2-m[w]/2+T,le=iw(P,$,N),fe=!l.arrow&&Ec(s)!=null&&$!==le&&i.reference[w]/2-($<P?D:R)-m[w]/2<0,de=fe?$<P?$-P:$-N:0;return{[f]:p[f]+de,data:{[f]:le,centerOffset:$-le-de,...fe&&{alignmentOffset:de}},reset:fe}}}),cF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:m=!0,...b}=ci(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=ui(s),y=xs(o),E=ui(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=p||(E||!m?[Sp(o)]:tF(o)),L=w!=="none";!p&&L&&O.push(...iF(o,m,w,C));const x=[o,...O],T=await wd(e,b),k=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&k.push(T[v]),h){const $=eF(s,a,C);k.push(T[$[0]],T[$[1]])}if(D=[...D,{placement:s,overflows:k}],!k.every($=>$<=0)){var R,P;const $=(((R=i.flip)==null?void 0:R.index)||0)+1,le=x[$];if(le&&(!(h==="alignment"&&y!==xs(le))||D.every(de=>xs(de.placement)===y?de.overflows[0]>0:!0)))return{data:{index:$,overflows:D},reset:{placement:le}};let fe=(P=D.filter(de=>de.overflows[0]<=0).sort((de,U)=>de.overflows[1]-U.overflows[1])[0])==null?void 0:P.placement;if(!fe)switch(f){case"bestFit":{var N;const de=(N=D.filter(U=>{if(L){const M=xs(U.placement);return M===y||M==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(M=>M>0).reduce((M,Q)=>M+Q,0)]).sort((U,M)=>U[1]-M[1])[0])==null?void 0:N[0];de&&(fe=de);break}case"initialPlacement":fe=o;break}if(s!==fe)return{reset:{placement:fe}}}return{}}}};function mI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function gI(t){return J3.some(e=>t[e]>=0)}const uF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ci(t,e);switch(r){case"referenceHidden":{const i=await wd(e,{...s,elementContext:"reference"}),a=mI(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:gI(a)}}}case"escaped":{const i=await wd(e,{...s,altBoundary:!0}),a=mI(i,n.floating);return{data:{escapedOffsets:a,escaped:gI(a)}}}default:return{}}}}},xN=new Set(["left","top"]);async function dF(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ui(n),o=Ec(n),l=xs(n)==="y",c=xN.has(a)?-1:1,d=i&&l?-1:1,h=ci(e,t);let{mainAxis:p,crossAxis:f,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof w=="number"&&(f=o==="end"?w*-1:w),l?{x:f*d,y:p*c}:{x:p*c,y:f*d}}const hF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:o}=e,l=await dF(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:a}}}}},fF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:b=>{let{x:v,y}=b;return{x:v,y}}},...l}=ci(t,e),c={x:n,y:r},d=await wd(e,l),h=xs(ui(s)),p=db(h);let f=c[p],w=c[h];if(i){const b=p==="y"?"top":"left",v=p==="y"?"bottom":"right",y=f+d[b],E=f-d[v];f=iw(y,f,E)}if(a){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=w+d[b],E=w-d[v];w=iw(y,w,E)}const m=o.fn({...e,[p]:f,[h]:w});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[p]:i,[h]:a}}}}}},pF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=ci(t,e),d={x:n,y:r},h=xs(s),p=db(h);let f=d[p],w=d[h];const m=ci(o,e),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+b.mainAxis,O=i.reference[p]+i.reference[E]-b.mainAxis;f<C?f=C:f>O&&(f=O)}if(c){var v,y;const E=p==="y"?"width":"height",C=xN.has(ui(s)),O=i.reference[h]-i.floating[E]+(C&&((v=a.offset)==null?void 0:v[h])||0)+(C?0:b.crossAxis),L=i.reference[h]+i.reference[E]+(C?0:((y=a.offset)==null?void 0:y[h])||0)-(C?b.crossAxis:0);w<O?w=O:w>L&&(w=L)}return{[p]:f,[h]:w}}}},mF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:o}=e,{apply:l=()=>{},...c}=ci(t,e),d=await wd(e,c),h=ui(s),p=Ec(s),f=xs(s)==="y",{width:w,height:m}=i.floating;let b,v;h==="top"||h==="bottom"?(b=h,v=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=h,b=p==="end"?"top":"bottom");const y=m-d.top-d.bottom,E=w-d.left-d.right,C=da(m-d[b],y),O=da(w-d[v],E),L=!e.middlewareData.shift;let x=C,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=y),L&&!p){const D=br(d.left,0),R=br(d.right,0),P=br(d.top,0),N=br(d.bottom,0);f?T=w-2*(D!==0||R!==0?D+R:br(d.left,d.right)):x=m-2*(P!==0||N!==0?P+N:br(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:x});const k=await a.getDimensions(o.floating);return w!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function zm(){return typeof window<"u"}function Ic(t){return TN(t)?(t.nodeName||"").toLowerCase():"#document"}function Cr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Us(t){var e;return(e=(TN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function TN(t){return zm()?t instanceof Node||t instanceof Cr(t).Node:!1}function os(t){return zm()?t instanceof Element||t instanceof Cr(t).Element:!1}function Ps(t){return zm()?t instanceof HTMLElement||t instanceof Cr(t).HTMLElement:!1}function yI(t){return!zm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Cr(t).ShadowRoot}const gF=new Set(["inline","contents"]);function Xd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ls(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!gF.has(s)}const yF=new Set(["table","td","th"]);function vF(t){return yF.has(Ic(t))}const wF=[":popover-open",":modal"];function $m(t){return wF.some(e=>{try{return t.matches(e)}catch{return!1}})}const bF=["transform","translate","scale","rotate","perspective"],SF=["transform","translate","scale","rotate","perspective","filter"],EF=["paint","layout","strict","content"];function pb(t){const e=mb(),n=os(t)?ls(t):t;return bF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||SF.some(r=>(n.willChange||"").includes(r))||EF.some(r=>(n.contain||"").includes(r))}function IF(t){let e=ha(t);for(;Ps(e)&&!Gl(e);){if(pb(e))return e;if($m(e))return null;e=ha(e)}return null}function mb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _F=new Set(["html","body","#document"]);function Gl(t){return _F.has(Ic(t))}function ls(t){return Cr(t).getComputedStyle(t)}function Wm(t){return os(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ha(t){if(Ic(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yI(t)&&t.host||Us(t);return yI(e)?e.host:e}function kN(t){const e=ha(t);return Gl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ps(e)&&Xd(e)?e:kN(e)}function bd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=kN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Cr(s);if(i){const o=ow(a);return e.concat(a,a.visualViewport||[],Xd(s)?s:[],o&&n?bd(o):[])}return e.concat(s,bd(s,[],n))}function ow(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function CN(t){const e=ls(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ps(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,o=bp(n)!==i||bp(r)!==a;return o&&(n=i,r=a),{width:n,height:r,$:o}}function gb(t){return os(t)?t:t.contextElement}function Ll(t){const e=gb(t);if(!Ps(e))return As(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=CN(e);let a=(i?bp(n.width):n.width)/r,o=(i?bp(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const xF=As(0);function DN(t){const e=Cr(t);return!mb()||!e.visualViewport?xF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function TF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Cr(t)?!1:e}function xo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=gb(t);let a=As(1);e&&(r?os(r)&&(a=Ll(r)):a=Ll(t));const o=TF(i,n,r)?DN(i):As(0);let l=(s.left+o.x)/a.x,c=(s.top+o.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(i){const p=Cr(i),f=r&&os(r)?Cr(r):r;let w=p,m=ow(w);for(;m&&r&&f!==w;){const b=Ll(m),v=m.getBoundingClientRect(),y=ls(m),E=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*b.x,C=v.top+(m.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,h*=b.y,l+=E,c+=C,w=Cr(m),m=ow(w)}}return Ep({width:d,height:h,x:l,y:c})}function qm(t,e){const n=Wm(t).scrollLeft;return e?e.left+n:xo(Us(t)).left+n}function NN(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-qm(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function kF(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Us(r),o=e?$m(e.floating):!1;if(r===a||o&&i)return n;let l={scrollLeft:0,scrollTop:0},c=As(1);const d=As(0),h=Ps(r);if((h||!h&&!i)&&((Ic(r)!=="body"||Xd(a))&&(l=Wm(r)),Ps(r))){const f=xo(r);c=Ll(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const p=a&&!h&&!i?NN(a,l):As(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function CF(t){return Array.from(t.getClientRects())}function DF(t){const e=Us(t),n=Wm(t),r=t.ownerDocument.body,s=br(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=br(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+qm(t);const o=-n.scrollTop;return ls(r).direction==="rtl"&&(a+=br(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}const vI=25;function NF(t,e){const n=Cr(t),r=Us(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;const d=mb();(!d||d&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}const c=qm(r);if(c<=0){const d=r.ownerDocument,h=d.body,p=getComputedStyle(h),f=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,w=Math.abs(r.clientWidth-h.clientWidth-f);w<=vI&&(i-=w)}else c<=vI&&(i+=c);return{width:i,height:a,x:o,y:l}}const AF=new Set(["absolute","fixed"]);function RF(t,e){const n=xo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ps(t)?Ll(t):As(1),a=t.clientWidth*i.x,o=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:a,height:o,x:l,y:c}}function wI(t,e,n){let r;if(e==="viewport")r=NF(t,n);else if(e==="document")r=DF(Us(t));else if(os(e))r=RF(e,n);else{const s=DN(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ep(r)}function AN(t,e){const n=ha(t);return n===e||!os(n)||Gl(n)?!1:ls(n).position==="fixed"||AN(n,e)}function PF(t,e){const n=e.get(t);if(n)return n;let r=bd(t,[],!1).filter(o=>os(o)&&Ic(o)!=="body"),s=null;const i=ls(t).position==="fixed";let a=i?ha(t):t;for(;os(a)&&!Gl(a);){const o=ls(a),l=pb(a);!l&&o.position==="fixed"&&(s=null),(i?!l&&!s:!l&&o.position==="static"&&s&&AF.has(s.position)||Xd(a)&&!l&&AN(t,a))?r=r.filter(c=>c!==a):s=o,a=ha(a)}return e.set(t,r),r}function OF(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?$m(e)?[]:PF(e,this._c):[].concat(n),r],a=i[0],o=i.reduce((l,c)=>{const d=wI(e,c,s);return l.top=br(d.top,l.top),l.right=da(d.right,l.right),l.bottom=da(d.bottom,l.bottom),l.left=br(d.left,l.left),l},wI(e,a,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function LF(t){const{width:e,height:n}=CN(t);return{width:e,height:n}}function MF(t,e,n){const r=Ps(e),s=Us(e),i=n==="fixed",a=xo(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const l=As(0);function c(){l.x=qm(s)}if(r||!r&&!i)if((Ic(e)!=="body"||Xd(s))&&(o=Wm(e)),r){const f=xo(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?NN(s,o):As(0),h=a.left+o.scrollLeft-l.x-d.x,p=a.top+o.scrollTop-l.y-d.y;return{x:h,y:p,width:a.width,height:a.height}}function Sy(t){return ls(t).position==="static"}function bI(t,e){if(!Ps(t)||ls(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Us(t)===n&&(n=n.ownerDocument.body),n}function RN(t,e){const n=Cr(t);if($m(t))return n;if(!Ps(t)){let s=ha(t);for(;s&&!Gl(s);){if(os(s)&&!Sy(s))return s;s=ha(s)}return n}let r=bI(t,e);for(;r&&vF(r)&&Sy(r);)r=bI(r,e);return r&&Gl(r)&&Sy(r)&&!pb(r)?n:r||IF(t)||n}const UF=async function(t){const e=this.getOffsetParent||RN,n=this.getDimensions,r=await n(t.floating);return{reference:MF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jF(t){return ls(t).direction==="rtl"}const FF={convertOffsetParentRelativeRectToViewportRelativeRect:kF,getDocumentElement:Us,getClippingRect:OF,getOffsetParent:RN,getElementRects:UF,getClientRects:CF,getDimensions:LF,getScale:Ll,isElement:os,isRTL:jF};function PN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function VF(t,e){let n=null,r;const s=Us(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:p,height:f}=c;if(o||e(),!p||!f)return;const w=Kh(h),m=Kh(s.clientWidth-(d+p)),b=Kh(s.clientHeight-(h+f)),v=Kh(d),y={rootMargin:-w+"px "+-m+"px "+-b+"px "+-v+"px",threshold:br(0,da(1,l))||1};let E=!0;function C(O){const L=O[0].intersectionRatio;if(L!==l){if(!E)return a();L?a(!1,L):r=setTimeout(()=>{a(!1,1e-7)},1e3)}L===1&&!PN(c,t.getBoundingClientRect())&&a(),E=!1}try{n=new IntersectionObserver(C,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,y)}n.observe(t)}return a(!0),i}function BF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=gb(t),d=s||i?[...c?bd(c):[],...bd(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=c&&o?VF(c,n):null;let p=-1,f=null;a&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=f)==null||E.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let w,m=l?xo(t):null;l&&b();function b(){const v=xo(t);m&&!PN(m,v)&&n(),m=v,w=requestAnimationFrame(b)}return n(),()=>{var v;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(w)}}const zF=hF,$F=fF,WF=cF,qF=mF,HF=uF,SI=lF,KF=pF,GF=(t,e,n)=>{const r=new Map,s={platform:FF,...n},i={...s.platform,_c:r};return oF(t,e,{...s,platform:i})};var QF=typeof document<"u",JF=function(){},Rf=QF?_.useLayoutEffect:JF;function Ip(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ip(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ip(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function ON(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function EI(t,e){const n=ON(t);return Math.round(e*n)/n}function Ey(t){const e=_.useRef(t);return Rf(()=>{e.current=t}),e}function YF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[d,h]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,f]=_.useState(r);Ip(p,r)||f(r);const[w,m]=_.useState(null),[b,v]=_.useState(null),y=_.useCallback(U=>{U!==L.current&&(L.current=U,m(U))},[]),E=_.useCallback(U=>{U!==x.current&&(x.current=U,v(U))},[]),C=i||w,O=a||b,L=_.useRef(null),x=_.useRef(null),T=_.useRef(d),k=l!=null,D=Ey(l),R=Ey(s),P=Ey(c),N=_.useCallback(()=>{if(!L.current||!x.current)return;const U={placement:e,strategy:n,middleware:p};R.current&&(U.platform=R.current),GF(L.current,x.current,U).then(M=>{const Q={...M,isPositioned:P.current!==!1};$.current&&!Ip(T.current,Q)&&(T.current=Q,bc.flushSync(()=>{h(Q)}))})},[p,e,n,R,P]);Rf(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[c]);const $=_.useRef(!1);Rf(()=>($.current=!0,()=>{$.current=!1}),[]),Rf(()=>{if(C&&(L.current=C),O&&(x.current=O),C&&O){if(D.current)return D.current(C,O,N);N()}},[C,O,N,D,k]);const le=_.useMemo(()=>({reference:L,floating:x,setReference:y,setFloating:E}),[y,E]),fe=_.useMemo(()=>({reference:C,floating:O}),[C,O]),de=_.useMemo(()=>{const U={position:n,left:0,top:0};if(!fe.floating)return U;const M=EI(fe.floating,d.x),Q=EI(fe.floating,d.y);return o?{...U,transform:"translate("+M+"px, "+Q+"px)",...ON(fe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:Q}},[n,o,fe.floating,d.x,d.y]);return _.useMemo(()=>({...d,update:N,refs:le,elements:fe,floatingStyles:de}),[d,N,le,fe,de])}const XF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?SI({element:r.current,padding:s}).fn(n):{}:r?SI({element:r,padding:s}).fn(n):{}}}},ZF=(t,e)=>({...zF(t),options:[t,e]}),e5=(t,e)=>({...$F(t),options:[t,e]}),t5=(t,e)=>({...KF(t),options:[t,e]}),n5=(t,e)=>({...WF(t),options:[t,e]}),r5=(t,e)=>({...qF(t),options:[t,e]}),s5=(t,e)=>({...HF(t),options:[t,e]}),i5=(t,e)=>({...XF(t),options:[t,e]});var a5="Arrow",LN=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return I.jsx(Ht.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:I.jsx("polygon",{points:"0,0 30,0 15,10"})})});LN.displayName=a5;var o5=LN;function yb(t){const[e,n]=_.useState(void 0);return Rs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,o;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var vb="Popper",[MN,wb]=jo(vb),[l5,UN]=MN(vb),jN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return I.jsx(l5,{scope:e,anchor:r,onAnchorChange:s,children:n})};jN.displayName=vb;var FN="PopperAnchor",VN=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=UN(FN,n),a=_.useRef(null),o=kn(e,a),l=_.useRef(null);return _.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||a.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:I.jsx(Ht.div,{...s,ref:o})});VN.displayName=FN;var bb="PopperContent",[c5,u5]=MN(bb),BN=_.forwardRef((t,e)=>{var n,r,s,i,a,o;const{__scopePopper:l,side:c="bottom",sideOffset:d=0,align:h="center",alignOffset:p=0,arrowPadding:f=0,avoidCollisions:w=!0,collisionBoundary:m=[],collisionPadding:b=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:E="optimized",onPlaced:C,...O}=t,L=UN(bb,l),[x,T]=_.useState(null),k=kn(e,sn=>T(sn)),[D,R]=_.useState(null),P=yb(D),N=(P==null?void 0:P.width)??0,$=(P==null?void 0:P.height)??0,le=c+(h!=="center"?"-"+h:""),fe=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},de=Array.isArray(m)?m:[m],U=de.length>0,M={padding:fe,boundary:de.filter(h5),altBoundary:U},{refs:Q,floatingStyles:Ee,placement:oe,isPositioned:he,middlewareData:ue}=YF({strategy:"fixed",placement:le,whileElementsMounted:(...sn)=>BF(...sn,{animationFrame:E==="always"}),elements:{reference:L.anchor},middleware:[ZF({mainAxis:d+$,alignmentAxis:p}),w&&e5({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?t5():void 0,...M}),w&&n5({...M}),r5({...M,apply:({elements:sn,rects:Un,availableWidth:Ue,availableHeight:jn})=>{const{width:ne,height:X}=Un.reference,G=sn.floating.style;G.setProperty("--radix-popper-available-width",`${Ue}px`),G.setProperty("--radix-popper-available-height",`${jn}px`),G.setProperty("--radix-popper-anchor-width",`${ne}px`),G.setProperty("--radix-popper-anchor-height",`${X}px`)}}),D&&i5({element:D,padding:f}),f5({arrowWidth:N,arrowHeight:$}),y&&s5({strategy:"referenceHidden",...M})]}),[Be,Fe]=WN(oe),ce=as(C);Rs(()=>{he&&(ce==null||ce())},[he,ce]);const Ke=(n=ue.arrow)==null?void 0:n.x,Xt=(r=ue.arrow)==null?void 0:r.y,En=((s=ue.arrow)==null?void 0:s.centerOffset)!==0,[fn,Mn]=_.useState();return Rs(()=>{x&&Mn(window.getComputedStyle(x).zIndex)},[x]),I.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ee,transform:he?Ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fn,"--radix-popper-transform-origin":[(i=ue.transformOrigin)==null?void 0:i.x,(a=ue.transformOrigin)==null?void 0:a.y].join(" "),...((o=ue.hide)==null?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:I.jsx(c5,{scope:l,placedSide:Be,onArrowChange:R,arrowX:Ke,arrowY:Xt,shouldHideArrow:En,children:I.jsx(Ht.div,{"data-side":Be,"data-align":Fe,...O,ref:k,style:{...O.style,animation:he?void 0:"none"}})})})});BN.displayName=bb;var zN="PopperArrow",d5={top:"bottom",right:"left",bottom:"top",left:"right"},$N=_.forwardRef(function(t,e){const{__scopePopper:n,...r}=t,s=u5(zN,n),i=d5[s.placedSide];return I.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:I.jsx(o5,{...r,ref:e,style:{...r.style,display:"block"}})})});$N.displayName=zN;function h5(t){return t!==null}var f5=t=>({name:"transformOrigin",options:t,fn(e){var n,r,s;const{placement:i,rects:a,middlewareData:o}=e,l=((n=o.arrow)==null?void 0:n.centerOffset)!==0,c=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[h,p]=WN(i),f={start:"0%",center:"50%",end:"100%"}[p],w=(((r=o.arrow)==null?void 0:r.x)??0)+c/2,m=(((s=o.arrow)==null?void 0:s.y)??0)+d/2;let b="",v="";return h==="bottom"?(b=l?f:`${w}px`,v=`${-d}px`):h==="top"?(b=l?f:`${w}px`,v=`${a.floating.height+d}px`):h==="right"?(b=`${-d}px`,v=l?f:`${m}px`):h==="left"&&(b=`${a.floating.width+d}px`,v=l?f:`${m}px`),{data:{x:b,y:v}}}});function WN(t){const[e,n="center"]=t.split("-");return[e,n]}var p5=jN,qN=VN,HN=BN,KN=$N,[Hm]=jo("Tooltip",[wb]),Sb=wb(),GN="TooltipProvider",m5=700,II="tooltip.open",[g5,QN]=Hm(GN),JN=t=>{const{__scopeTooltip:e,delayDuration:n=m5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=_.useRef(!0),o=_.useRef(!1),l=_.useRef(0);return _.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),I.jsx(g5,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:_.useCallback(c=>{o.current=c},[]),disableHoverableContent:s,children:i})};JN.displayName=GN;var YN="Tooltip",[iG,Km]=Hm(YN),lw="TooltipTrigger",y5=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Km(lw,n),i=QN(lw,n),a=Sb(n),o=_.useRef(null),l=kn(e,o,s.onTriggerChange),c=_.useRef(!1),d=_.useRef(!1),h=_.useCallback(()=>c.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),I.jsx(qN,{asChild:!0,...a,children:I.jsx(Ht.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:kt(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:kt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:kt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:kt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:kt(t.onBlur,s.onClose),onClick:kt(t.onClick,s.onClose)})})});y5.displayName=lw;var v5="TooltipPortal",[aG,w5]=Hm(v5,{forceMount:void 0}),Ql="TooltipContent",XN=_.forwardRef((t,e)=>{const n=w5(Ql,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=Km(Ql,t.__scopeTooltip);return I.jsx(_a,{present:r||a.open,children:a.disableHoverableContent?I.jsx(ZN,{side:s,...i,ref:e}):I.jsx(b5,{side:s,...i,ref:e})})}),b5=_.forwardRef((t,e)=>{const n=Km(Ql,t.__scopeTooltip),r=QN(Ql,t.__scopeTooltip),s=_.useRef(null),i=kn(e,s),[a,o]=_.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,p=_.useCallback(()=>{o(null),h(!1)},[h]),f=_.useCallback((w,m)=>{const b=w.currentTarget,v={x:w.clientX,y:w.clientY},y=x5(v,b.getBoundingClientRect()),E=T5(v,y),C=k5(m.getBoundingClientRect()),O=D5([...E,...C]);o(O),h(!0)},[h]);return _.useEffect(()=>()=>p(),[p]),_.useEffect(()=>{if(l&&d){const w=b=>f(b,d),m=b=>f(b,l);return l.addEventListener("pointerleave",w),d.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",m)}}},[l,d,f,p]),_.useEffect(()=>{if(a){const w=m=>{const b=m.target,v={x:m.clientX,y:m.clientY},y=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),E=!C5(v,a);y?p():E&&(p(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,d,a,c,p]),I.jsx(ZN,{...t,ref:i})}),[S5,E5]=Hm(YN,{isInside:!1}),I5=ED("TooltipContent"),ZN=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...o}=t,l=Km(Ql,n),c=Sb(n),{onClose:d}=l;return _.useEffect(()=>(document.addEventListener(II,d),()=>document.removeEventListener(II,d)),[d]),_.useEffect(()=>{if(l.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),I.jsx(Jd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:I.jsxs(HN,{"data-state":l.stateAttribute,...c,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[I.jsx(I5,{children:r}),I.jsx(S5,{scope:n,isInside:!0,children:I.jsx(oj,{id:l.contentId,role:"tooltip",children:s||r})})]})})});XN.displayName=Ql;var eA="TooltipArrow",_5=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Sb(n);return E5(eA,n).isInside?null:I.jsx(KN,{...s,...r,ref:e})});_5.displayName=eA;function x5(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function T5(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function k5(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function C5(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const o=e[i],l=e[a],c=o.x,d=o.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(s=!s)}return s}function D5(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),N5(e)}function N5(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var A5=JN,tA=XN;const R5=A5,P5=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>I.jsx(tA,{ref:r,sideOffset:e,className:Cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));P5.displayName=tA.displayName;var Zd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},O5={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ma,_I,xI,L5=(xI=class{constructor(){lt(this,Ma,O5),lt(this,_I,!1)}setTimeoutProvider(t){Qe(this,Ma,t)}setTimeout(t,e){return H(this,Ma).setTimeout(t,e)}clearTimeout(t){H(this,Ma).clearTimeout(t)}setInterval(t,e){return H(this,Ma).setInterval(t,e)}clearInterval(t){H(this,Ma).clearInterval(t)}},Ma=new WeakMap,_I=new WeakMap,xI),Sd=new L5;function M5(t){setTimeout(t,0)}var eh=typeof window>"u"||"Deno"in globalThis;function zn(){}function U5(t,e){return typeof t=="function"?t(e):t}function nA(t){return typeof t=="number"&&t>=0&&t!==1/0}function rA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function _p(t,e){return typeof t=="function"?t(e):t}function sA(t,e){return typeof t=="function"?t(e):t}function TI(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:o}=t;if(a){if(r){if(e.queryHash!==Eb(a,e.options))return!1}else if(!Id(e.queryKey,a))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||s&&s!==e.state.fetchStatus||i&&!i(e))}function kI(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ed(e.options.mutationKey)!==Ed(i))return!1}else if(!Id(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Eb(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ed)(t)}function Ed(t){return JSON.stringify(t,(e,n)=>cw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Id(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Id(t[n],e[n])):!1}var j5=Object.prototype.hasOwnProperty;function iA(t,e){if(t===e)return t;const n=CI(t)&&CI(e);if(!n&&!(cw(t)&&cw(e)))return e;const r=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),i=s.length,a=n?new Array(i):{};let o=0;for(let l=0;l<i;l++){const c=n?l:s[l],d=t[c],h=e[c];if(d===h){a[c]=d,(n?l<r:j5.call(t,c))&&o++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){a[c]=h;continue}const p=iA(d,h);a[c]=p,p===d&&o++}return r===i&&o===r?t:a}function F5(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function CI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function cw(t){if(!DI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!DI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function DI(t){return Object.prototype.toString.call(t)==="[object Object]"}function V5(t){return new Promise(e=>{Sd.setTimeout(e,t)})}function aA(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?iA(t,e):e}function B5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function z5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Ib=Symbol();function oA(t,e){return!t.queryFn&&e!=null&&e.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Ib?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function $5(t,e){return typeof t=="function"?t(...e):!!t}var Go,Ua,su,NI,W5=(NI=class extends Zd{constructor(){super(),lt(this,Go),lt(this,Ua),lt(this,su),Qe(this,su,t=>{if(!eh&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){H(this,Ua)||this.setEventListener(H(this,su))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Ua))==null||t.call(this),Qe(this,Ua,void 0))}setEventListener(t){var e;Qe(this,su,t),(e=H(this,Ua))==null||e.call(this),Qe(this,Ua,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){H(this,Go)!==t&&(Qe(this,Go,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof H(this,Go)=="boolean"?H(this,Go):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Go=new WeakMap,Ua=new WeakMap,su=new WeakMap,NI),_b=new W5;function lA(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function q5(t){var e;let n;if((e=t.then(r=>(n=r,r),zn))==null||e.catch(zn),n!==void 0)return{data:n}}function cA(t){return t}function H5(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function K5(t,e,n){const r=()=>{var s;const i=(s=t.promise)==null?void 0:s.then(e).catch(a=>n(a)?Promise.reject(new Error("redacted")):Promise.reject(a));return i==null||i.catch(zn),i};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function G5(t){return t.state.isPaused}function Q5(t){return t.state.status==="success"}function J5(t){return!0}function Y5(t,e={}){var n,r,s,i;const a=e.shouldDehydrateMutation??((n=t.getDefaultOptions().dehydrate)==null?void 0:n.shouldDehydrateMutation)??G5,o=t.getMutationCache().getAll().flatMap(p=>a(p)?[H5(p)]:[]),l=e.shouldDehydrateQuery??((r=t.getDefaultOptions().dehydrate)==null?void 0:r.shouldDehydrateQuery)??Q5,c=e.shouldRedactErrors??((s=t.getDefaultOptions().dehydrate)==null?void 0:s.shouldRedactErrors)??J5,d=e.serializeData??((i=t.getDefaultOptions().dehydrate)==null?void 0:i.serializeData)??cA,h=t.getQueryCache().getAll().flatMap(p=>l(p)?[K5(p,d,c)]:[]);return{mutations:o,queries:h}}function X5(t,e,n){var r,s;if(typeof e!="object"||e===null)return;const i=t.getMutationCache(),a=t.getQueryCache(),o=((r=n==null?void 0:n.defaultOptions)==null?void 0:r.deserializeData)??((s=t.getDefaultOptions().hydrate)==null?void 0:s.deserializeData)??cA,l=e.mutations||[],c=e.queries||[];l.forEach(({state:d,...h})=>{var p,f;i.build(t,{...(p=t.getDefaultOptions().hydrate)==null?void 0:p.mutations,...(f=n==null?void 0:n.defaultOptions)==null?void 0:f.mutations,...h},d)}),c.forEach(({queryKey:d,state:h,queryHash:p,meta:f,promise:w,dehydratedAt:m})=>{var b,v;const y=w?q5(w):void 0,E=h.data===void 0?y==null?void 0:y.data:h.data,C=E===void 0?E:o(E);let O=a.get(p);const L=(O==null?void 0:O.state.status)==="pending",x=(O==null?void 0:O.state.fetchStatus)==="fetching";if(O){const T=y&&m!==void 0&&m>O.state.dataUpdatedAt;if(h.dataUpdatedAt>O.state.dataUpdatedAt||T){const{fetchStatus:k,...D}=h;O.setState({...D,data:C})}}else O=a.build(t,{...(b=t.getDefaultOptions().hydrate)==null?void 0:b.queries,...(v=n==null?void 0:n.defaultOptions)==null?void 0:v.queries,queryKey:d,queryHash:p,meta:f},{...h,data:C,fetchStatus:"idle",status:C!==void 0?"success":h.status});w&&!L&&!x&&(m===void 0||m>O.state.dataUpdatedAt)&&O.fetch(void 0,{initialPromise:Promise.resolve(w).then(o)}).catch(zn)})}var Z5=M5;function e6(){let t=[],e=0,n=o=>{o()},r=o=>{o()},s=Z5;const i=o=>{e?t.push(o):s(()=>{n(o)})},a=()=>{const o=t;t=[],o.length&&s(()=>{r(()=>{o.forEach(l=>{n(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{s=o}}}var Hn=e6(),iu,ja,au,AI,t6=(AI=class extends Zd{constructor(){super(),lt(this,iu,!0),lt(this,ja),lt(this,au),Qe(this,au,t=>{if(!eh&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){H(this,ja)||this.setEventListener(H(this,au))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,ja))==null||t.call(this),Qe(this,ja,void 0))}setEventListener(t){var e;Qe(this,au,t),(e=H(this,ja))==null||e.call(this),Qe(this,ja,t(this.setOnline.bind(this)))}setOnline(t){H(this,iu)!==t&&(Qe(this,iu,t),this.listeners.forEach(e=>{e(t)}))}isOnline(){return H(this,iu)}},iu=new WeakMap,ja=new WeakMap,au=new WeakMap,AI),xp=new t6;function n6(t){return Math.min(1e3*2**t,3e4)}function uA(t){return(t??"online")==="online"?xp.isOnline():!0}var uw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function dA(t){let e=!1,n=0,r;const s=lA(),i=()=>s.status!=="pending",a=m=>{var b;if(!i()){const v=new uw(m);p(v),(b=t.onCancel)==null||b.call(t,v)}},o=()=>{e=!0},l=()=>{e=!1},c=()=>_b.isFocused()&&(t.networkMode==="always"||xp.isOnline())&&t.canRun(),d=()=>uA(t.networkMode)&&t.canRun(),h=m=>{i()||(r==null||r(),s.resolve(m))},p=m=>{i()||(r==null||r(),s.reject(m))},f=()=>new Promise(m=>{var b;r=v=>{(i()||c())&&m(v)},(b=t.onPause)==null||b.call(t)}).then(()=>{var m;r=void 0,i()||(m=t.onContinue)==null||m.call(t)}),w=()=>{if(i())return;let m;const b=n===0?t.initialPromise:void 0;try{m=b??t.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(h).catch(v=>{var y;if(i())return;const E=t.retry??(eh?0:3),C=t.retryDelay??n6,O=typeof C=="function"?C(n,v):C,L=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,v);if(e||!L){p(v);return}n++,(y=t.onFail)==null||y.call(t,n,v),V5(O).then(()=>c()?void 0:f()).then(()=>{e?p(v):w()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(r==null||r(),s),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?w():f().then(w),s)}}var Qo,RI,hA=(RI=class{constructor(){lt(this,Qo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nA(this.gcTime)&&Qe(this,Qo,Sd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(eh?1/0:5*60*1e3))}clearGcTimeout(){H(this,Qo)&&(Sd.clearTimeout(H(this,Qo)),Qe(this,Qo,void 0))}},Qo=new WeakMap,RI),Jo,ou,Kr,Yo,Dn,Gh,Xo,vs,Bs,PI,r6=(PI=class extends hA{constructor(t){super(),lt(this,vs),lt(this,Jo),lt(this,ou),lt(this,Kr),lt(this,Yo),lt(this,Dn),lt(this,Gh),lt(this,Xo),Qe(this,Xo,!1),Qe(this,Gh,t.defaultOptions),this.setOptions(t.options),this.observers=[],Qe(this,Yo,t.client),Qe(this,Kr,H(this,Yo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Qe(this,Jo,LI(this.options)),this.state=t.state??H(this,Jo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Dn))==null?void 0:t.promise}setOptions(t){if(this.options={...H(this,Gh),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=LI(this.options);e.data!==void 0&&(this.setState(OI(e.data,e.dataUpdatedAt)),Qe(this,Jo,e))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Kr).remove(this)}setData(t,e){const n=aA(this.state.data,t,this.options);return Zn(this,vs,Bs).call(this,{data:n,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),n}setState(t,e){Zn(this,vs,Bs).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var e,n;const r=(e=H(this,Dn))==null?void 0:e.promise;return(n=H(this,Dn))==null||n.cancel(t),r?r.then(zn).catch(zn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Jo))}isActive(){return this.observers.some(t=>sA(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ib||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>_p(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!rA(this.state.dataUpdatedAt,t)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=H(this,Dn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=H(this,Dn))==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,Kr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(H(this,Dn)&&(H(this,Xo)?H(this,Dn).cancel({revert:!0}):H(this,Dn).cancelRetry()),this.scheduleGc()),H(this,Kr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Zn(this,vs,Bs).call(this,{type:"invalidate"})}async fetch(t,e){var n,r,s,i,a,o,l,c,d,h,p,f;if(this.state.fetchStatus!=="idle"&&((n=H(this,Dn))==null?void 0:n.status())!=="rejected"){if(this.state.data!==void 0&&e!=null&&e.cancelRefetch)this.cancel({silent:!0});else if(H(this,Dn))return H(this,Dn).continueRetry(),H(this,Dn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(E=>E.options.queryFn);y&&this.setOptions(y.options)}const w=new AbortController,m=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(Qe(this,Xo,!0),w.signal)})},b=()=>{const y=oA(this.options,e),E=(()=>{const C={client:H(this,Yo),queryKey:this.queryKey,meta:this.meta};return m(C),C})();return Qe(this,Xo,!1),this.options.persister?this.options.persister(y,E,this):y(E)},v=(()=>{const y={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:H(this,Yo),state:this.state,fetchFn:b};return m(y),y})();(r=this.options.behavior)==null||r.onFetch(v,this),Qe(this,ou,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=v.fetchOptions)==null?void 0:s.meta))&&Zn(this,vs,Bs).call(this,{type:"fetch",meta:(i=v.fetchOptions)==null?void 0:i.meta}),Qe(this,Dn,dA({initialPromise:e==null?void 0:e.initialPromise,fn:v.fetchFn,onCancel:y=>{y instanceof uw&&y.revert&&this.setState({...H(this,ou),fetchStatus:"idle"}),w.abort()},onFail:(y,E)=>{Zn(this,vs,Bs).call(this,{type:"failed",failureCount:y,error:E})},onPause:()=>{Zn(this,vs,Bs).call(this,{type:"pause"})},onContinue:()=>{Zn(this,vs,Bs).call(this,{type:"continue"})},retry:v.options.retry,retryDelay:v.options.retryDelay,networkMode:v.options.networkMode,canRun:()=>!0}));try{const y=await H(this,Dn).start();if(y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(y),(o=(a=H(this,Kr).config).onSuccess)==null||o.call(a,y,this),(c=(l=H(this,Kr).config).onSettled)==null||c.call(l,y,this.state.error,this),y}catch(y){if(y instanceof uw){if(y.silent)return H(this,Dn).promise;if(y.revert){if(this.state.data===void 0)throw y;return this.state.data}}throw Zn(this,vs,Bs).call(this,{type:"error",error:y}),(h=(d=H(this,Kr).config).onError)==null||h.call(d,y,this),(f=(p=H(this,Kr).config).onSettled)==null||f.call(p,this.state.data,y,this),y}finally{this.scheduleGc()}}},Jo=new WeakMap,ou=new WeakMap,Kr=new WeakMap,Yo=new WeakMap,Dn=new WeakMap,Gh=new WeakMap,Xo=new WeakMap,vs=new WeakSet,Bs=function(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...fA(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...OI(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Qe(this,ou,t.manual?r:void 0),r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Hn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),H(this,Kr).notify({query:this,type:"updated",action:t})})},PI);function fA(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uA(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function OI(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function LI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function MI(t){return{onFetch:(e,n)=>{var r,s,i,a,o;const l=e.options,c=(i=(s=(r=e.fetchOptions)==null?void 0:r.meta)==null?void 0:s.fetchMore)==null?void 0:i.direction,d=((a=e.state.data)==null?void 0:a.pages)||[],h=((o=e.state.data)==null?void 0:o.pageParams)||[];let p={pages:[],pageParams:[]},f=0;const w=async()=>{let m=!1;const b=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},v=oA(e.options,e.fetchOptions),y=async(E,C,O)=>{if(m)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const L=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:C,direction:O?"backward":"forward",meta:e.options.meta};return b(D),D})(),x=await v(L),{maxPages:T}=e.options,k=O?z5:B5;return{pages:k(E.pages,x,T),pageParams:k(E.pageParams,C,T)}};if(c&&d.length){const E=c==="backward",C=E?s6:UI,O={pages:d,pageParams:h},L=C(l,O);p=await y(O,L,E)}else{const E=t??d.length;do{const C=f===0?h[0]??l.initialPageParam:UI(l,p);if(f>0&&C==null)break;p=await y(p,C),f++}while(f<E)}return p};e.options.persister?e.fetchFn=()=>{var m,b;return(b=(m=e.options).persister)==null?void 0:b.call(m,w,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=w}}}function UI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function s6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Qh,zs,ar,Zo,$s,Ni,jI,i6=(jI=class extends hA{constructor(t){super(),lt(this,$s),lt(this,Qh),lt(this,zs),lt(this,ar),lt(this,Zo),Qe(this,Qh,t.client),this.mutationId=t.mutationId,Qe(this,ar,t.mutationCache),Qe(this,zs,[]),this.state=t.state||a6(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,zs).includes(t)||(H(this,zs).push(t),this.clearGcTimeout(),H(this,ar).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Qe(this,zs,H(this,zs).filter(e=>e!==t)),this.scheduleGc(),H(this,ar).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,zs).length||(this.state.status==="pending"?this.scheduleGc():H(this,ar).remove(this))}continue(){var t;return((t=H(this,Zo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var e,n,r,s,i,a,o,l,c,d,h,p,f,w,m,b,v,y,E,C;const O=()=>{Zn(this,$s,Ni).call(this,{type:"continue"})},L={client:H(this,Qh),meta:this.options.meta,mutationKey:this.options.mutationKey};Qe(this,Zo,dA({fn:()=>this.options.mutationFn?this.options.mutationFn(t,L):Promise.reject(new Error("No mutationFn found")),onFail:(k,D)=>{Zn(this,$s,Ni).call(this,{type:"failed",failureCount:k,error:D})},onPause:()=>{Zn(this,$s,Ni).call(this,{type:"pause"})},onContinue:O,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,ar).canRun(this)}));const x=this.state.status==="pending",T=!H(this,Zo).canStart();try{if(x)O();else{Zn(this,$s,Ni).call(this,{type:"pending",variables:t,isPaused:T}),await((n=(e=H(this,ar).config).onMutate)==null?void 0:n.call(e,t,this,L));const D=await((s=(r=this.options).onMutate)==null?void 0:s.call(r,t,L));D!==this.state.context&&Zn(this,$s,Ni).call(this,{type:"pending",context:D,variables:t,isPaused:T})}const k=await H(this,Zo).start();return await((a=(i=H(this,ar).config).onSuccess)==null?void 0:a.call(i,k,t,this.state.context,this,L)),await((l=(o=this.options).onSuccess)==null?void 0:l.call(o,k,t,this.state.context,L)),await((d=(c=H(this,ar).config).onSettled)==null?void 0:d.call(c,k,null,this.state.variables,this.state.context,this,L)),await((p=(h=this.options).onSettled)==null?void 0:p.call(h,k,null,t,this.state.context,L)),Zn(this,$s,Ni).call(this,{type:"success",data:k}),k}catch(k){try{throw await((w=(f=H(this,ar).config).onError)==null?void 0:w.call(f,k,t,this.state.context,this,L)),await((b=(m=this.options).onError)==null?void 0:b.call(m,k,t,this.state.context,L)),await((y=(v=H(this,ar).config).onSettled)==null?void 0:y.call(v,void 0,k,this.state.variables,this.state.context,this,L)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,k,t,this.state.context,L)),k}finally{Zn(this,$s,Ni).call(this,{type:"error",error:k})}}finally{H(this,ar).runNext(this)}}},Qh=new WeakMap,zs=new WeakMap,ar=new WeakMap,Zo=new WeakMap,$s=new WeakSet,Ni=function(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Hn.batch(()=>{H(this,zs).forEach(n=>{n.onMutationUpdate(t)}),H(this,ar).notify({mutation:this,type:"updated",action:t})})},jI);function a6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ai,ws,Jh,FI,o6=(FI=class extends Zd{constructor(t={}){super(),lt(this,Ai),lt(this,ws),lt(this,Jh),this.config=t,Qe(this,Ai,new Set),Qe(this,ws,new Map),Qe(this,Jh,0)}build(t,e,n){const r=new i6({client:t,mutationCache:this,mutationId:++rv(this,Jh)._,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){H(this,Ai).add(t);const e=Yh(t);if(typeof e=="string"){const n=H(this,ws).get(e);n?n.push(t):H(this,ws).set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,Ai).delete(t)){const e=Yh(t);if(typeof e=="string"){const n=H(this,ws).get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&H(this,ws).delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Yh(t);if(typeof e=="string"){const n=H(this,ws).get(e),r=n==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){var e;const n=Yh(t);if(typeof n=="string"){const r=(e=H(this,ws).get(n))==null?void 0:e.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Hn.batch(()=>{H(this,Ai).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,Ai).clear(),H(this,ws).clear()})}getAll(){return Array.from(H(this,Ai))}find(t){const e={exact:!0,...t};return this.getAll().find(n=>kI(e,n))}findAll(t={}){return this.getAll().filter(e=>kI(t,e))}notify(t){Hn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Hn.batch(()=>Promise.all(t.map(e=>e.continue().catch(zn))))}},Ai=new WeakMap,ws=new WeakMap,Jh=new WeakMap,FI);function Yh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ws,VI,l6=(VI=class extends Zd{constructor(t={}){super(),lt(this,Ws),this.config=t,Qe(this,Ws,new Map)}build(t,e,n){const r=e.queryKey,s=e.queryHash??Eb(r,e);let i=this.get(s);return i||(i=new r6({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(i)),i}add(t){H(this,Ws).has(t.queryHash)||(H(this,Ws).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=H(this,Ws).get(t.queryHash);e&&(t.destroy(),e===t&&H(this,Ws).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Hn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,Ws).get(t)}getAll(){return[...H(this,Ws).values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>TI(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>TI(t,n)):e}notify(t){Hn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Hn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Hn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ws=new WeakMap,VI),an,Fa,Va,lu,cu,Ba,uu,du,BI,c6=(BI=class{constructor(t={}){lt(this,an),lt(this,Fa),lt(this,Va),lt(this,lu),lt(this,cu),lt(this,Ba),lt(this,uu),lt(this,du),Qe(this,an,t.queryCache||new l6),Qe(this,Fa,t.mutationCache||new o6),Qe(this,Va,t.defaultOptions||{}),Qe(this,lu,new Map),Qe(this,cu,new Map),Qe(this,Ba,0)}mount(){rv(this,Ba)._++,H(this,Ba)===1&&(Qe(this,uu,_b.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,an).onFocus())})),Qe(this,du,xp.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,an).onOnline())})))}unmount(){var t,e;rv(this,Ba)._--,H(this,Ba)===0&&((t=H(this,uu))==null||t.call(this),Qe(this,uu,void 0),(e=H(this,du))==null||e.call(this),Qe(this,du,void 0))}isFetching(t){return H(this,an).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,Fa).findAll({...t,status:"pending"}).length}getQueryData(t){var e;const n=this.defaultQueryOptions({queryKey:t});return(e=H(this,an).get(n.queryHash))==null?void 0:e.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=H(this,an).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(_p(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return H(this,an).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=H(this,an).get(r.queryHash),i=s==null?void 0:s.state.data,a=U5(e,i);if(a!==void 0)return H(this,an).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Hn.batch(()=>H(this,an).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var e;const n=this.defaultQueryOptions({queryKey:t});return(e=H(this,an).get(n.queryHash))==null?void 0:e.state}removeQueries(t){const e=H(this,an);Hn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=H(this,an);return Hn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Hn.batch(()=>H(this,an).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(zn).catch(zn)}invalidateQueries(t,e={}){return Hn.batch(()=>(H(this,an).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Hn.batch(()=>H(this,an).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(zn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(zn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=H(this,an).build(this,e);return n.isStaleByTime(_p(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(zn).catch(zn)}fetchInfiniteQuery(t){return t.behavior=MI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(zn).catch(zn)}ensureInfiniteQueryData(t){return t.behavior=MI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xp.isOnline()?H(this,Fa).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,an)}getMutationCache(){return H(this,Fa)}getDefaultOptions(){return H(this,Va)}setDefaultOptions(t){Qe(this,Va,t)}setQueryDefaults(t,e){H(this,lu).set(Ed(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...H(this,lu).values()],n={};return e.forEach(r=>{Id(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){H(this,cu).set(Ed(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...H(this,cu).values()],n={};return e.forEach(r=>{Id(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...H(this,Va).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Eb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ib&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,Va).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,an).clear(),H(this,Fa).clear()}},an=new WeakMap,Fa=new WeakMap,Va=new WeakMap,lu=new WeakMap,cu=new WeakMap,Ba=new WeakMap,uu=new WeakMap,du=new WeakMap,BI),pA=_.createContext(void 0),u6=t=>{const e=_.useContext(pA);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},d6=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),I.jsx(pA.Provider,{value:t,children:e})),h6=["added","removed","updated"];function zI(t){return h6.includes(t)}async function f6({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const a=Date.now()-i.timestamp>n,o=i.buster!==r;if(a||o)return e.removeClient();X5(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function $I({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:Y5(t,r)};await e.persistClient(s)}function p6(t){const e=t.queryClient.getQueryCache().subscribe(r=>{zI(r.type)&&$I(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{zI(r.type)&&$I(t)});return()=>{e(),n()}}function m6(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=f6(t).then(()=>{e||(n=p6(t))});return[r,s]}function Iy(){}function g6({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const a=o=>{try{t.setItem(e,r(o));return}catch(l){return l}};return{persistClient:y6(o=>{let l=o,c=a(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=a(l))},n),restoreClient:()=>{const o=t.getItem(e);if(o)return s(o)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Iy,restoreClient:Iy,removeClient:Iy}}function y6(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Sd.setTimeout(()=>{t(...r),n=null},e))}}/**
* @remix-run/router v1.23.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}var Hi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hi||(Hi={}));const WI="popstate";function v6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return Tp("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xd(s)}return mA(e,n,null,t)}function w6(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:o="",hash:l=""}=Fo(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Tp("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof i=="string"?i:xd(i))}function r(s,i){xb(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return mA(e,n,r,t)}function dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function b6(){return Math.random().toString(36).substr(2,8)}function qI(t,e){return{usr:t.state,key:t.key,idx:e}}function Tp(t,e,n,r){return n===void 0&&(n=null),_d({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fo(e):e,{state:n,key:e&&e.key||r||b6()})}function xd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=Hi.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(_d({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=Hi.Pop;let b=d(),v=b==null?null:b-c;c=b,l&&l({action:o,location:m.location,delta:v})}function p(b,v){o=Hi.Push;let y=Tp(m.location,b,v);n&&n(y,b),c=d()+1;let E=qI(y,c),C=m.createHref(y);try{a.pushState(E,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(C)}i&&l&&l({action:o,location:m.location,delta:1})}function f(b,v){o=Hi.Replace;let y=Tp(m.location,b,v);n&&n(y,b),c=d();let E=qI(y,c),C=m.createHref(y);a.replaceState(E,"",C),i&&l&&l({action:o,location:m.location,delta:0})}function w(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof b=="string"?b:xd(b);return y=y.replace(/ $/,"%20"),dn(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let m={get action(){return o},get location(){return t(s,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(WI,h),l=b,()=>{s.removeEventListener(WI,h),l=null}},createHref(b){return e(s,b)},createURL:w,encodeLocation(b){let v=w(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:f,go(b){return a.go(b)}};return m}var HI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(HI||(HI={}));function S6(t,e,n){return n===void 0&&(n="/"),E6(t,e,n)}function E6(t,e,n,r){let s=typeof e=="string"?Fo(e):e,i=Tb(s.pathname||"/",n);if(i==null)return null;let a=gA(t);I6(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=L6(i);o=R6(a[l],c)}return o}function gA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(dn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=na([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(dn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gA(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:N6(c,i.index),routesMeta:d})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of yA(i.path))s(i,a,l)}),e}function yA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=yA(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function I6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:A6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _6=/^:[\w-]+$/,x6=3,T6=2,k6=1,C6=10,D6=-2,KI=t=>t==="*";function N6(t,e){let n=t.split("/"),r=n.length;return n.some(KI)&&(r+=D6),e&&(r+=T6),n.filter(s=>!KI(s)).reduce((s,i)=>s+(_6.test(i)?x6:i===""?k6:C6),r)}function A6(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function R6(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=P6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:na([i,h.pathname]),pathnameBase:F6(na([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=na([i,h.pathnameBase]))}return a}function P6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=O6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((l,c,d)=>{let{paramName:h,isOptional:p}=c;if(h==="*"){let w=o[d]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const f=o[d];return p&&!f?l[h]=void 0:l[h]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:a,pattern:t}}function O6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(r.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function L6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Tb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function M6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fo(t):t;return{pathname:n?n.startsWith("/")?n:U6(n,e):e,search:V6(r),hash:B6(s)}}function U6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function _y(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kb(t,e){let n=j6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cb(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Fo(t):(s=_d({},t),dn(!s.pathname||!s.pathname.includes("?"),_y("?","pathname","search",s)),dn(!s.pathname||!s.pathname.includes("#"),_y("#","pathname","hash",s)),dn(!s.search||!s.search.includes("#"),_y("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}o=h>=0?e[h]:"/"}let l=M6(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const na=t=>t.join("/").replace(/\/\/+/g,"/"),F6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function z6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vA=["post","put","patch","delete"];new Set(vA);const $6=["get",...vA];new Set($6);/**
* React Router v6.30.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}const Db=_.createContext(null),W6=_.createContext(null),xa=_.createContext(null),Gm=_.createContext(null),mi=_.createContext({outlet:null,matches:[],isDataRoute:!1}),wA=_.createContext(null);function q6(t,e){let{relative:n}=e===void 0?{}:e;_c()||dn(!1);let{basename:r,navigator:s}=_.useContext(xa),{hash:i,pathname:a,search:o}=SA(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:na([r,a])),s.createHref({pathname:l,search:o,hash:i})}function _c(){return _.useContext(Gm)!=null}function ds(){return _c()||dn(!1),_.useContext(Gm).location}function bA(t){_.useContext(xa).static||_.useLayoutEffect(t)}function Vo(){let{isDataRoute:t}=_.useContext(mi);return t?iV():H6()}function H6(){_c()||dn(!1);let t=_.useContext(Db),{basename:e,future:n,navigator:r}=_.useContext(xa),{matches:s}=_.useContext(mi),{pathname:i}=ds(),a=JSON.stringify(kb(s,n.v7_relativeSplatPath)),o=_.useRef(!1);return bA(()=>{o.current=!0}),_.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){r.go(l);return}let d=Cb(l,JSON.parse(a),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:na([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,a,i,t])}function K6(){let{matches:t}=_.useContext(mi),e=t[t.length-1];return e?e.params:{}}function SA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(xa),{matches:s}=_.useContext(mi),{pathname:i}=ds(),a=JSON.stringify(kb(s,r.v7_relativeSplatPath));return _.useMemo(()=>Cb(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function G6(t,e){return Q6(t,e)}function Q6(t,e,n,r){_c()||dn(!1);let{navigator:s}=_.useContext(xa),{matches:i}=_.useContext(mi),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=ds(),d;if(e){var h;let b=typeof e=="string"?Fo(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||dn(!1),d=b}else d=c;let p=d.pathname||"/",f=p;if(l!=="/"){let b=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=S6(t,{pathname:f}),m=eV(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:na([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:na([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&m?_.createElement(Gm.Provider,{value:{location:Td({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Hi.Pop}},m):m}function J6(){let t=sV(),e=z6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:r},n):null,null)}const Y6=_.createElement(J6,null);class X6 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(mi.Provider,{value:this.props.routeContext},_.createElement(wA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z6(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(Db);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(mi.Provider,{value:e},r)}function eV(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||dn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:f}=n,w=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||w){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,p)=>{let f,w=!1,m=null,b=null;n&&(f=o&&h.route.id?o[h.route.id]:void 0,m=h.route.errorElement||Y6,l&&(c<0&&p===0?(aV("route-fallback"),w=!0,b=null):c===p&&(w=!0,b=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,p+1)),y=()=>{let E;return f?E=m:w?E=b:h.route.Component?E=_.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,_.createElement(Z6,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?_.createElement(X6,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var EA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(EA||{}),IA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(IA||{});function tV(t){let e=_.useContext(Db);return e||dn(!1),e}function nV(t){let e=_.useContext(W6);return e||dn(!1),e}function rV(t){let e=_.useContext(mi);return e||dn(!1),e}function _A(t){let e=rV(),n=e.matches[e.matches.length-1];return n.route.id||dn(!1),n.route.id}function sV(){var t;let e=_.useContext(wA),n=nV(),r=_A();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iV(){let{router:t}=tV(EA.UseNavigateStable),e=_A(IA.UseNavigateStable),n=_.useRef(!1);return bA(()=>{n.current=!0}),_.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Td({fromRouteId:e},s)))},[t,e])}const GI={};function aV(t,e,n){GI[t]||(GI[t]=!0)}function xA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function oV(t){let{to:e,replace:n,state:r,relative:s}=t;_c()||dn(!1);let{future:i,static:a}=_.useContext(xa),{matches:o}=_.useContext(mi),{pathname:l}=ds(),c=Vo(),d=Cb(e,kb(o,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return _.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function we(t){dn(!1)}function TA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Hi.Pop,navigator:i,static:a=!1,future:o}=t;_c()&&dn(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:a,future:Td({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=Fo(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:w="default"}=r,m=_.useMemo(()=>{let b=Tb(d,l);return b==null?null:{location:{pathname:b,search:h,hash:p,state:f,key:w},navigationType:s}},[l,d,h,p,f,w,s]);return m==null?null:_.createElement(xa.Provider,{value:c},_.createElement(Gm.Provider,{children:n,value:m}))}function dw(t){let{children:e,location:n}=t;return G6(hw(e),n)}new Promise(()=>{});function hw(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,hw(r.props.children,i));return}r.type!==we&&dn(!1),!r.props.index||!r.props.children||dn(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=hw(r.props.children,i)),n.push(a)}),n}/**
* React Router DOM v6.30.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(this,arguments)}function lV(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uV(t,e){return t.button===0&&(!e||e==="_self")&&!cV(t)}function pw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function dV(t,e){let n=pw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const hV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fV="6";try{window.__reactRouterVersion=fV}catch{}const pV="startTransition",kp=u0[pV];function mV(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=v6({window:s,v5Compat:!0}));let a=i.current,[o,l]=_.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=_.useCallback(h=>{c&&kp?kp(()=>l(h)):l(h)},[l,c]);return _.useLayoutEffect(()=>a.listen(d),[a,d]),_.useEffect(()=>xA(r),[r]),_.createElement(TA,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}function gV(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=w6({window:s,v5Compat:!0}));let a=i.current,[o,l]=_.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=_.useCallback(h=>{c&&kp?kp(()=>l(h)):l(h)},[l,c]);return _.useLayoutEffect(()=>a.listen(d),[a,d]),_.useEffect(()=>xA(r),[r]),_.createElement(TA,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const yV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kA=_.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:s,replace:i,state:a,target:o,to:l,preventScrollReset:c,viewTransition:d}=t,h=lV(t,hV),{basename:p}=_.useContext(xa),f,w=!1;if(typeof l=="string"&&vV.test(l)&&(f=l,yV))try{let y=new URL(window.location.href),E=l.startsWith("//")?new URL(y.protocol+l):new URL(l),C=Tb(E.pathname,p);E.origin===y.origin&&C!=null?l=C+E.search+E.hash:w=!0}catch{}let m=q6(l,{relative:r}),b=wV(l,{replace:i,state:a,target:o,preventScrollReset:c,relative:r,viewTransition:d});function v(y){n&&n(y),y.defaultPrevented||b(y)}return _.createElement("a",fw({},h,{href:f||m,onClick:w||s?n:v,ref:e,target:o}))});var QI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(QI||(QI={}));var JI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(JI||(JI={}));function wV(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Vo(),c=ds(),d=SA(t,{relative:a});return _.useCallback(h=>{if(uV(h,n)){h.preventDefault();let p=r!==void 0?r:xd(c)===xd(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,d,r,s,n,t,i,a,o])}function bV(t){let e=_.useRef(pw(t)),n=_.useRef(!1),r=ds(),s=_.useMemo(()=>dV(r.search,n.current?null:e.current),[r.search]),i=Vo(),a=_.useCallback((o,l)=>{const c=pw(typeof o=="function"?o(s):o);n.current=!0,i("?"+c,l)},[i,s]);return[s,a]}const CA=_.createContext(void 0),SV=({children:t})=>{const[e,n]=_.useState("medium"),[r,s]=_.useState(!1),[i,a]=_.useState(!1);_.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),_.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";a(l)}catch{a(!1)}},[]),_.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),_.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const o=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return I.jsx(CA.Provider,{value:{fontSize:e,setFontSize:o,isMobile:r,isDesktopApp:i},children:t})},EV=()=>{const t=_.useContext(CA);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},DA=ab("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Bi=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?jU:"button";return I.jsx(a,{className:Cn(DA({variant:e,size:n,className:t})),ref:i,...s})});Bi.displayName="Button";const Cp=_.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),I.jsx("input",{type:e,className:Cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Cp.displayName="Input";const IV=()=>{};var YI={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_V=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Nb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|o>>4;let p=(o&15)<<2|c>>6,f=c&63;l||(f=64,a||(p=64)),r.push(n[d],n[h],n[p],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_V(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const o=s<t.length?n[t.charAt(s)]:64;++s;const l=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||o==null||l==null)throw new xV;const c=i<<2|a>>4;if(r.push(c),o!==64){const d=a<<4&240|o>>2;if(r.push(d),l!==64){const h=o<<6&192|l;r.push(h)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TV=function(t){const e=NA(t);return Nb.encodeByteArray(e,!0)},Dp=function(t){return TV(t).replace(/\./g,"")},AA=function(t){try{return Nb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kV=()=>RA().__FIREBASE_DEFAULTS__,CV=()=>{if(typeof process>"u"||typeof YI>"u")return;const t=YI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AA(t[1]);return e&&JSON.parse(e)},Qm=()=>{try{return IV()||kV()||CV()||DV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NV=t=>{var e,n;return(n=(e=Qm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},PA=t=>{const e=NV(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},OA=()=>{var t;return(t=Qm())==null?void 0:t.config},AV=t=>{var e;return(e=Qm())==null?void 0:e[`_${t}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ab(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dp(JSON.stringify(n)),Dp(JSON.stringify(a)),""].join(".")}const zu={};function PV(){const t={prod:[],emulator:[]};for(const e of Object.keys(zu))zu[e]?t.emulator.push(e):t.prod.push(e);return t}function OV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let XI=!1;function LA(t,e){if(typeof window>"u"||typeof document>"u"||!gi(window.location.host)||zu[t]===e||zu[t]||XI)return;zu[t]=e;function n(h){return`__firebase__banner__${h}`}const r="__firebase__banner",s=PV().prod.length>0;function i(){const h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function o(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{XI=!0,i()},h}function c(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=OV(r),p=n("text"),f=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),m=document.getElementById(w)||document.createElement("a"),b=n("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const y=h.element;a(y),c(m,w);const E=l();o(v,b),y.append(v,f,m,E),document.body.appendChild(y)}s?(f.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,f.innerText="Preview backend running in this workspace."),f.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function MA(){var t;const e=(t=Qm())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FV(){const t=Ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UA(){return!MA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jA(){return!MA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Rb(){try{return typeof indexedDB=="object"}catch{return!1}}function VV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BV="FirebaseError";class hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BV,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?zV(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new hs(s,o,r)}}function zV(t,e){return t.replace($V,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $V=/\{\$([^}]+)}/g;function Jl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(ZI(i)&&ZI(a)){if(!Jl(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ZI(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FA(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Iu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WV(t,e){const n=new qV(t,e);return n.subscribe.bind(n)}class qV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xy),s.error===void 0&&(s.error=xy),s.complete===void 0&&(s.complete=xy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xy(){}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Et(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qa="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QV(e))try{this.getOrInitializeService({instanceIdentifier:qa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qa){return this.instances.has(e)}getOptions(e=qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qa){return this.component?this.component.multipleInstances?e:qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GV(t){return t===qa?void 0:t}function QV(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const YV={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},XV=st.INFO,ZV={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},e9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=XV,this._logHandler=e9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const t9=(t,e)=>e.some(n=>t instanceof n);let e_,t_;function n9(){return e_||(e_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r9(){return t_||(t_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VA=new WeakMap,gw=new WeakMap,BA=new WeakMap,Ty=new WeakMap,Pb=new WeakMap;function s9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ra(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&VA.set(n,t)}).catch(()=>{}),Pb.set(e,t),e}function i9(t){if(gw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});gw.set(t,e)}let yw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ra(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function a9(t){yw=t(yw)}function o9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ky(this),e,...n);return BA.set(r,e.sort?e.sort():[e]),ra(r)}:r9().includes(t)?function(...e){return t.apply(ky(this),e),ra(VA.get(this))}:function(...e){return ra(t.apply(ky(this),e))}}function l9(t){return typeof t=="function"?o9(t):(t instanceof IDBTransaction&&i9(t),t9(t,n9())?new Proxy(t,yw):t)}function ra(t){if(t instanceof IDBRequest)return s9(t);if(Ty.has(t))return Ty.get(t);const e=l9(t);return e!==t&&(Ty.set(t,e),Pb.set(e,t)),e}const ky=t=>Pb.get(t);function c9(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=ra(a);return r&&a.addEventListener("upgradeneeded",l=>{r(ra(a.result),l.oldVersion,l.newVersion,ra(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const u9=["get","getKey","getAll","getAllKeys","count"],d9=["put","add","delete","clear"],Cy=new Map;function n_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cy.get(e))return Cy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=d9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||u9.includes(n)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&l.done]))[0]};return Cy.set(e,i),i}a9(t=>({...t,get:(e,n,r)=>n_(e,n)||t.get(e,n,r),has:(e,n)=>!!n_(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class h9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(f9(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function f9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vw="@firebase/app",r_="0.14.5";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const di=new Jm("@firebase/app"),p9="@firebase/app-compat",m9="@firebase/analytics-compat",g9="@firebase/analytics",y9="@firebase/app-check-compat",v9="@firebase/app-check",w9="@firebase/auth",b9="@firebase/auth-compat",S9="@firebase/database",E9="@firebase/data-connect",I9="@firebase/database-compat",_9="@firebase/functions",x9="@firebase/functions-compat",T9="@firebase/installations",k9="@firebase/installations-compat",C9="@firebase/messaging",D9="@firebase/messaging-compat",N9="@firebase/performance",A9="@firebase/performance-compat",R9="@firebase/remote-config",P9="@firebase/remote-config-compat",O9="@firebase/storage",L9="@firebase/storage-compat",M9="@firebase/firestore",U9="@firebase/ai",j9="@firebase/firestore-compat",F9="firebase",V9="12.5.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ww="[DEFAULT]",B9={[vw]:"fire-core",[p9]:"fire-core-compat",[g9]:"fire-analytics",[m9]:"fire-analytics-compat",[v9]:"fire-app-check",[y9]:"fire-app-check-compat",[w9]:"fire-auth",[b9]:"fire-auth-compat",[S9]:"fire-rtdb",[E9]:"fire-data-connect",[I9]:"fire-rtdb-compat",[_9]:"fire-fn",[x9]:"fire-fn-compat",[T9]:"fire-iid",[k9]:"fire-iid-compat",[C9]:"fire-fcm",[D9]:"fire-fcm-compat",[N9]:"fire-perf",[A9]:"fire-perf-compat",[R9]:"fire-rc",[P9]:"fire-rc-compat",[O9]:"fire-gcs",[L9]:"fire-gcs-compat",[M9]:"fire-fst",[j9]:"fire-fst-compat",[U9]:"fire-vertex","fire-js":"fire-js",[F9]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Np=new Map,z9=new Map,bw=new Map;function s_(t,e){try{t.container.addComponent(e)}catch(n){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Os(t){const e=t.name;if(bw.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;bw.set(e,t);for(const n of Np.values())s_(n,t);for(const n of z9.values())s_(n,t);return!0}function Ym(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sr(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new xc("app","Firebase",$9);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W9{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const th=V9;function zA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ww,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw sa.create("bad-app-name",{appName:String(s)});if(n||(n=OA()),!n)throw sa.create("no-options");const i=Np.get(s);if(i){if(Jl(n,i.options)&&Jl(r,i.config))return i;throw sa.create("duplicate-app",{appName:s})}const a=new JV(s);for(const l of bw.values())a.addComponent(l);const o=new W9(n,r,a);return Np.set(s,o),o}function $A(t=ww){const e=Np.get(t);if(!e&&t===ww&&OA())return zA();if(!e)throw sa.create("no-app",{appName:t});return e}function Dr(t,e,n){let r=B9[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(a.join(" "));return}Os(new cs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const q9="firebase-heartbeat-database",H9=1,kd="firebase-heartbeat-store";let Dy=null;function WA(){return Dy||(Dy=c9(q9,H9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kd)}catch(n){console.warn(n)}}}}).catch(t=>{throw sa.create("idb-open",{originalErrorMessage:t.message})})),Dy}async function K9(t){try{const e=(await WA()).transaction(kd),n=await e.objectStore(kd).get(qA(t));return await e.done,n}catch(e){if(e instanceof hs)di.warn(e.message);else{const n=sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(n.message)}}}async function i_(t,e){try{const n=(await WA()).transaction(kd,"readwrite");await n.objectStore(kd).put(e,qA(t)),await n.done}catch(n){if(n instanceof hs)di.warn(n.message);else{const r=sa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(r.message)}}}function qA(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const G9=1024,Q9=30;class J9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new X9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=a_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Q9){const i=Z9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=a_(),{heartbeatsToSend:r,unsentEntries:s}=Y9(this._heartbeatsCache.heartbeats),i=Dp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return di.warn(n),""}}}function a_(){return new Date().toISOString().substring(0,10)}function Y9(t,e=G9){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),o_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),o_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class X9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rb()?VV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await K9(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return i_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return i_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function o_(t){return Dp(JSON.stringify({version:2,heartbeats:t})).length}function Z9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eB(t){Os(new cs("platform-logger",e=>new h9(e),"PRIVATE")),Os(new cs("heartbeat",e=>new J9(e),"PRIVATE")),Dr(vw,r_,t),Dr(vw,r_,"esm2020"),Dr("fire-js","")}eB("");function HA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tB=HA,KA=new xc("auth","Firebase",HA());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ap=new Jm("@firebase/auth");function nB(t,...e){Ap.logLevel<=st.WARN&&Ap.warn(`Auth (${th}): ${t}`,...e)}function Pf(t,...e){Ap.logLevel<=st.ERROR&&Ap.error(`Auth (${th}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function To(t,...e){throw Lb(t,...e)}function Ob(t,...e){return Lb(t,...e)}function GA(t,e,n){const r={...tB(),[e]:n};return new xc("auth","Firebase",r).create(e,{appName:t.name})}function ia(t){return GA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KA.create(t,...e)}function it(t,e,...n){if(!t)throw Lb(e,...n)}function Js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pf(e),new Error(e)}function Rp(t,e){t||Js(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function QA(){return l_()==="http:"||l_()==="https:"}function l_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QA()||UV()||"connection"in navigator)?navigator.onLine:!0}function iB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rp(n>e,"Short delay should be less than long delay!"),this.isMobile=LV()||jV()}get(){return sB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aB(t,e){Rp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cB=new nh(3e4,6e4);function yi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function js(t,e,n,r,s={}){return YA(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=FA({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return MV()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&gi(t.emulatorConfig.host)&&(c.credentials="include"),JA.fetch()(await XA(t,t.config.apiHost,n,o),c)})}async function YA(t,e,n){t._canInitEmulator=!1;const r={...oB,...e};try{const s=new dB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Xh(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Xh(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Xh(t,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw GA(t,d,c);To(t,d)}}catch(s){if(s instanceof hs)throw s;To(t,"network-request-failed",{message:String(s)})}}async function Xm(t,e,n,r,s={}){const i=await js(t,e,n,r,s);return"mfaPendingCredential"in i&&To(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function XA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?aB(t.config,s):`${t.config.apiScheme}://${s}`;return lB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function uB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ob(this.auth,"network-request-failed")),cB.get())})}}function Xh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ob(t,e,r);return s.customData._tokenResponse=n,s}function c_(t){return t!==void 0&&t.enterprise!==void 0}class hB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fB(t,e){return js(t,"GET","/v2/recaptchaConfig",yi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function pB(t,e){return js(t,"POST","/v1/accounts:delete",e)}async function Pp(t,e){return js(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mB(t,e=!1){const n=Et(t),r=await n.getIdToken(e),s=Mb(r);it(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$u(Ny(s.auth_time)),issuedAtTime:$u(Ny(s.iat)),expirationTime:$u(Ny(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ny(t){return Number(t)*1e3}function Mb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=AA(n);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function u_(t){const e=Mb(t);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Cd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hs&&gB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Op(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Cd(t,Pp(n,{idToken:r}));it(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=(e=i.providerUserInfo)!=null&&e.length?ZA(i.providerUserInfo):[],o=wB(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sw(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function vB(t){const e=Et(t);await Op(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wB(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function ZA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function bB(t,e){const n=await YA(t,{},async()=>{const r=FA({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await XA(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&gi(t.emulatorConfig.host)&&(l.credentials="include"),JA.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SB(t,e){return js(t,"POST","/v2/accounts:revokeToken",yi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=u_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Ml;return r&&(it(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(it(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(it(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return Js("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ri(t,e){it(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new yB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Cd(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mB(this,e)}reload(){return vB(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Op(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await Cd(this,pB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:f,providerData:w,stsTokenManager:m}=n;it(h&&m,e,"internal-error");const b=Ml.fromJSON(this.name,m);it(typeof h=="string",e,"internal-error"),Ri(r,e.name),Ri(s,e.name),it(typeof p=="boolean",e,"internal-error"),it(typeof f=="boolean",e,"internal-error"),Ri(i,e.name),Ri(a,e.name),Ri(o,e.name),Ri(l,e.name),Ri(c,e.name),Ri(d,e.name);const v=new Xr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:f,photoURL:a,phoneNumber:i,tenantId:o,stsTokenManager:b,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(v.providerData=w.map(y=>({...y}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ml;s.updateFromServerResponse(n);const i=new Xr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Op(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];it(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ZA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Ml;o.updateFromIdToken(r);const l=new Xr({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Sw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d_=new Map;function so(t){Rp(t instanceof Function,"Expected a class definition");let e=d_.get(t);return e?(Rp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d_.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class e2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}e2.type="NONE";const Ew=e2;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ay(t,e,n){return`firebase:${t}:${e}:${n}`}class Ul{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ay(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ay("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pp(this.auth,{idToken:e}).catch(()=>{});return n?Xr._fromGetAccountInfoResponse(this.auth,n,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ul(so(Ew),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||so(Ew);const a=Ay(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(a);if(d){let h;if(typeof d=="string"){const p=await Pp(e,{idToken:d}).catch(()=>{});if(!p)break;h=await Xr._fromGetAccountInfoResponse(e,p,d)}else h=Xr._fromJSON(e,d);c!==i&&(o=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ul(i,e,r):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Ul(i,e,r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function h_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r2(e))return"Blackberry";if(s2(e))return"Webos";if(IB(e))return"Safari";if((e.includes("chrome/")||_B(e))&&!e.includes("edge/"))return"Chrome";if(n2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EB(t=Ln()){return/firefox\//i.test(t)}function IB(t=Ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _B(t=Ln()){return/crios\//i.test(t)}function t2(t=Ln()){return/iemobile/i.test(t)}function n2(t=Ln()){return/android/i.test(t)}function r2(t=Ln()){return/blackberry/i.test(t)}function s2(t=Ln()){return/webos/i.test(t)}function xB(t=Ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TB(){return FV()&&document.documentMode===10}function kB(t=Ln()){return xB(t)||n2(t)||s2(t)||r2(t)||/windows phone/i.test(t)||t2(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function i2(t,e=[]){let n;switch(t){case"Browser":n=h_(Ln());break;case"Worker":n=`${h_(Ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${th}/${r}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function DB(t,e={}){return js(t,"GET","/v2/passwordPolicy",yi(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NB=6;class AB{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??NB,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new CB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=so(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ul.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pp(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)==null?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&l!=null&&l.user&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Op(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(ia(this));const n=e?Et(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(so(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DB(this),n=new AB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&so(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await Ul.create(this,[so(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return n!=null&&n.error&&nB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Tc(t){return Et(t)}class f_{constructor(e){this.auth=e,this.observer=null,this.addObserver=WV(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ub={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PB(t){Ub=t}function OB(t){return Ub.loadJS(t)}function LB(){return Ub.recaptchaEnterpriseScript}class MB{constructor(){this.enterprise=new UB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class UB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jB="recaptcha-enterprise",a2="NO_RECAPTCHA";class FB{constructor(e){this.type=jB,this.auth=Tc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{fB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new hB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;c_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(a2)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MB().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(o=>{if(!n&&c_(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=LB();l.length!==0&&(l+=o),OB(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function p_(t,e,n,r=!1,s=!1){const i=new FB(t);let a;if(s)a=a2;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Lp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await p_(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await p_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VB(t,e){const n=Ym(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Jl(s,e??{}))return r;To(r,"already-initialized")}return n.initialize({options:e})}function BB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(so);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zB{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Js("not implemented")}_getIdTokenResponse(e){return Js("not implemented")}_linkToIdToken(e,n){return Js("not implemented")}_getReauthenticationResolver(e){return Js("not implemented")}}async function $B(t,e){return js(t,"POST","/v1/accounts:update",e)}async function WB(t,e){return js(t,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function qB(t,e){return Xm(t,"POST","/v1/accounts:signInWithPassword",yi(t,e))}async function HB(t,e){return js(t,"POST","/v1/accounts:sendOobCode",yi(t,e))}async function KB(t,e){return HB(t,e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function GB(t,e){return Xm(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}async function QB(t,e){return Xm(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dd extends zB{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Dd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Dd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&n!=null&&n.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,n,"signInWithPassword",qB);case"emailLink":return GB(e,{email:this._email,oobCode:this._password});default:To(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,r,"signUpPassword",WB);case"emailLink":return QB(e,{idToken:n,email:this._email,oobCode:this._password});default:To(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YB(t){const e=Eu(Iu(t)).link,n=e?Eu(Iu(e)).deep_link_id:null,r=Eu(Iu(t)).deep_link_id;return(r?Eu(Iu(r)).link:null)||r||n||e||t}class jb{constructor(e){const n=Eu(Iu(e)),r=n.apiKey??null,s=n.oobCode??null,i=JB(n.mode??null);it(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=YB(e);try{return new jb(n)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,n){return Dd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jb.parseLink(n);return it(r,"argument-error"),Dd._fromEmailAndCode(e,r.code,r.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function XB(t,e){return Xm(t,"POST","/v1/accounts:signUp",yi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xr._fromIdTokenResponse(e,r,s),a=m_(r);return new Yl({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=m_(r);return new Yl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function m_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mp extends hs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Mp(e,n,r,s)}}function o2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mp._fromErrorAndOperation(t,s,e,r):s})}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ZB(t,e,n=!1){const{auth:r}=t;if(Sr(r.app))return Promise.reject(ia(r));const s="reauthenticate";try{const i=await Cd(t,o2(r,s,e,t),n);it(i.idToken,r,"internal-error");const a=Mb(i.idToken);it(a,r,"internal-error");const{sub:o}=a;return it(t.uid===o,r,"user-mismatch"),Yl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&To(r,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ez(t,e,n=!1){if(Sr(t.app))return Promise.reject(ia(t));const r="signIn",s=await o2(t,r,e),i=await Yl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function tz(t,e){return ez(Tc(t),e)}async function nz(t,e){return ZB(Et(t),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function l2(t){const e=Tc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function c2(t,e,n){const r=Tc(t);await Lp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",KB)}async function g_(t,e,n){if(Sr(t.app))return Promise.reject(ia(t));const r=Tc(t),s=await Lp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XB).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&l2(t),a}),i=await Yl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(i.user),i}function u2(t,e,n){return Sr(t.app)?Promise.reject(ia(t)):tz(Et(t),Bo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&l2(t),r})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function rz(t,e){return js(t,"POST","/v1/accounts:createAuthUri",yi(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function sz(t,e){const n=QA()?rB():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await rz(Et(t),r);return s||[]}function iz(t,e){return az(Et(t),null,e)}async function az(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const i=await Cd(t,$B(r,s));await t._updateTokensIfNecessary(i,!0)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oz(t,e){return Et(t).setPersistence(e)}function lz(t,e,n,r){return Et(t).onAuthStateChanged(e,n,r)}function y_(t){return Et(t).signOut()}const v_="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class d2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(v_,"1"),this.storage.removeItem(v_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cz=1e3,uz=10;class h2 extends d2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);TB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,uz):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h2.type="LOCAL";const f2=h2;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p2 extends d2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}p2.type="SESSION";const dz=p2;new nh(3e4,6e4);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/new nh(2e3,1e4);/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/new nh(3e4,6e4);/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/new nh(5e3,15e3);var w_="@firebase/auth",b_="1.11.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pz(t){Os(new cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;it(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i2(t)},c=new RB(r,s,i,l);return BB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Os(new cs("auth-internal",e=>{const n=Tc(e.getProvider("auth").getImmediate());return(r=>new hz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(w_,b_,fz(t)),Dr(w_,b_,"esm2020")}AV("authIdTokenMaxAge");function mz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}PB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ob("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",mz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pz("Browser");var gz="firebase",yz="12.5.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Dr(gz,yz,"app");/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vz=new Map,wz={activated:!1,tokenObservers:[]};function us(t){return vz.get(t)||{...wz}}const S_={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bz{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new mw,this.pending.promise.catch(n=>{}),await Sz(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new mw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Sz(t){return new Promise(e=>{setTimeout(e,t)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ez={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Up=new xc("appCheck","AppCheck",Ez);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function m2(t){if(!us(t).activated)throw Up.create("use-before-activation",{appName:t.name})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Iz="firebase-app-check-database",_z=1,Iw="firebase-app-check-store";let Ry=null;function xz(){return Ry||(Ry=new Promise((t,e)=>{try{const n=indexedDB.open(Iz,_z);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Up.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Iw,{keyPath:"compositeKey"})}}}catch(n){e(Up.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Ry)}function Tz(t,e){return kz(Cz(t),e)}async function kz(t,e){const n=(await xz()).transaction(Iw,"readwrite"),r=n.objectStore(Iw).put({compositeKey:t,value:e});return new Promise((s,i)=>{r.onsuccess=a=>{s()},n.onerror=a=>{var o;i(Up.create("storage-set",{originalErrorMessage:(o=a.target.error)==null?void 0:o.message}))}})}function Cz(t){return`${t.options.appId}-${t.name}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _w=new Jm("@firebase/app-check");/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function E_(t,e){return Rb()?Tz(t,e).catch(n=>{_w.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dz={error:"UNKNOWN_ERROR"};function Nz(t){return Nb.encodeString(JSON.stringify(t),!1)}async function xw(t,e=!1,n=!1){const r=t.app;m2(r);const s=us(r);let i=s.token,a;if(i&&!_u(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(_u(c)?i=c:await E_(r,void 0))}if(!e&&i&&_u(i))return{token:i.token};let o=!1;try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),o=!0),i=await us(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?_w.warn(c.message):n&&_w.error(c),a=c}let l;return i?a?_u(i)?l={token:i.token,internalError:a}:l=__(a):(l={token:i.token},s.token=i,await E_(r,i)):l=__(a),o&&Oz(r,l),l}async function Az(t){const e=t.app;m2(e);const{provider:n}=us(e);{const{token:r}=await n.getToken();return{token:r}}}function Rz(t,e,n,r){const{app:s}=t,i=us(s),a={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&_u(i.token)){const o=i.token;Promise.resolve().then(()=>{n({token:o.token}),I_(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>I_(t))}function g2(t,e){const n=us(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function I_(t){const{app:e}=t,n=us(e);let r=n.tokenRefresher;r||(r=Pz(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Pz(t){const{app:e}=t;return new bz(async()=>{const n=us(e);let r;if(n.token?r=await xw(t,!0):r=await xw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=us(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},S_.RETRIAL_MIN_WAIT,S_.RETRIAL_MAX_WAIT)}function Oz(t,e){const n=us(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _u(t){return t.expireTimeMillis-Date.now()>0}function __(t){return{token:Nz(Dz),error:t}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lz{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=us(this.app);for(const n of e)g2(this.app,n.next);return Promise.resolve()}}function Mz(t,e){return new Lz(t,e)}function Uz(t){return{getToken:e=>xw(t,e),getLimitedUseToken:()=>Az(t),addTokenListener:e=>Rz(t,"INTERNAL",e),removeTokenListener:e=>g2(t.app,e)}}const jz="@firebase/app-check",Fz="0.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vz="app-check",x_="app-check-internal";function Bz(){Os(new cs(Vz,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Mz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(x_).initialize()})),Os(new cs(x_,t=>{const e=t.getProvider("app-check").getImmediate();return Uz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Dr(jz,Fz)}Bz();var T_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aa,y2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,T){function k(){}k.prototype=T.prototype,x.F=T.prototype,x.prototype=new k,x.prototype.constructor=x,x.D=function(D,R,P){for(var N=Array(arguments.length-2),$=2;$<arguments.length;$++)N[$-2]=arguments[$];return T.prototype[R].apply(D,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,T,k){k||(k=0);const D=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)D[R]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(R=0;R<16;++R)D[R]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=x.g[0],k=x.g[1],R=x.g[2];let P=x.g[3],N;N=T+(P^k&(R^P))+D[0]+3614090360&4294967295,T=k+(N<<7&4294967295|N>>>25),N=P+(R^T&(k^R))+D[1]+3905402710&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(k^P&(T^k))+D[2]+606105819&4294967295,R=P+(N<<17&4294967295|N>>>15),N=k+(T^R&(P^T))+D[3]+3250441966&4294967295,k=R+(N<<22&4294967295|N>>>10),N=T+(P^k&(R^P))+D[4]+4118548399&4294967295,T=k+(N<<7&4294967295|N>>>25),N=P+(R^T&(k^R))+D[5]+1200080426&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(k^P&(T^k))+D[6]+2821735955&4294967295,R=P+(N<<17&4294967295|N>>>15),N=k+(T^R&(P^T))+D[7]+4249261313&4294967295,k=R+(N<<22&4294967295|N>>>10),N=T+(P^k&(R^P))+D[8]+1770035416&4294967295,T=k+(N<<7&4294967295|N>>>25),N=P+(R^T&(k^R))+D[9]+2336552879&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(k^P&(T^k))+D[10]+4294925233&4294967295,R=P+(N<<17&4294967295|N>>>15),N=k+(T^R&(P^T))+D[11]+2304563134&4294967295,k=R+(N<<22&4294967295|N>>>10),N=T+(P^k&(R^P))+D[12]+1804603682&4294967295,T=k+(N<<7&4294967295|N>>>25),N=P+(R^T&(k^R))+D[13]+4254626195&4294967295,P=T+(N<<12&4294967295|N>>>20),N=R+(k^P&(T^k))+D[14]+2792965006&4294967295,R=P+(N<<17&4294967295|N>>>15),N=k+(T^R&(P^T))+D[15]+1236535329&4294967295,k=R+(N<<22&4294967295|N>>>10),N=T+(R^P&(k^R))+D[1]+4129170786&4294967295,T=k+(N<<5&4294967295|N>>>27),N=P+(k^R&(T^k))+D[6]+3225465664&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^k&(P^T))+D[11]+643717713&4294967295,R=P+(N<<14&4294967295|N>>>18),N=k+(P^T&(R^P))+D[0]+3921069994&4294967295,k=R+(N<<20&4294967295|N>>>12),N=T+(R^P&(k^R))+D[5]+3593408605&4294967295,T=k+(N<<5&4294967295|N>>>27),N=P+(k^R&(T^k))+D[10]+38016083&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^k&(P^T))+D[15]+3634488961&4294967295,R=P+(N<<14&4294967295|N>>>18),N=k+(P^T&(R^P))+D[4]+3889429448&4294967295,k=R+(N<<20&4294967295|N>>>12),N=T+(R^P&(k^R))+D[9]+568446438&4294967295,T=k+(N<<5&4294967295|N>>>27),N=P+(k^R&(T^k))+D[14]+3275163606&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^k&(P^T))+D[3]+4107603335&4294967295,R=P+(N<<14&4294967295|N>>>18),N=k+(P^T&(R^P))+D[8]+1163531501&4294967295,k=R+(N<<20&4294967295|N>>>12),N=T+(R^P&(k^R))+D[13]+2850285829&4294967295,T=k+(N<<5&4294967295|N>>>27),N=P+(k^R&(T^k))+D[2]+4243563512&4294967295,P=T+(N<<9&4294967295|N>>>23),N=R+(T^k&(P^T))+D[7]+1735328473&4294967295,R=P+(N<<14&4294967295|N>>>18),N=k+(P^T&(R^P))+D[12]+2368359562&4294967295,k=R+(N<<20&4294967295|N>>>12),N=T+(k^R^P)+D[5]+4294588738&4294967295,T=k+(N<<4&4294967295|N>>>28),N=P+(T^k^R)+D[8]+2272392833&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^k)+D[11]+1839030562&4294967295,R=P+(N<<16&4294967295|N>>>16),N=k+(R^P^T)+D[14]+4259657740&4294967295,k=R+(N<<23&4294967295|N>>>9),N=T+(k^R^P)+D[1]+2763975236&4294967295,T=k+(N<<4&4294967295|N>>>28),N=P+(T^k^R)+D[4]+1272893353&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^k)+D[7]+4139469664&4294967295,R=P+(N<<16&4294967295|N>>>16),N=k+(R^P^T)+D[10]+3200236656&4294967295,k=R+(N<<23&4294967295|N>>>9),N=T+(k^R^P)+D[13]+681279174&4294967295,T=k+(N<<4&4294967295|N>>>28),N=P+(T^k^R)+D[0]+3936430074&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^k)+D[3]+3572445317&4294967295,R=P+(N<<16&4294967295|N>>>16),N=k+(R^P^T)+D[6]+76029189&4294967295,k=R+(N<<23&4294967295|N>>>9),N=T+(k^R^P)+D[9]+3654602809&4294967295,T=k+(N<<4&4294967295|N>>>28),N=P+(T^k^R)+D[12]+3873151461&4294967295,P=T+(N<<11&4294967295|N>>>21),N=R+(P^T^k)+D[15]+530742520&4294967295,R=P+(N<<16&4294967295|N>>>16),N=k+(R^P^T)+D[2]+3299628645&4294967295,k=R+(N<<23&4294967295|N>>>9),N=T+(R^(k|~P))+D[0]+4096336452&4294967295,T=k+(N<<6&4294967295|N>>>26),N=P+(k^(T|~R))+D[7]+1126891415&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~k))+D[14]+2878612391&4294967295,R=P+(N<<15&4294967295|N>>>17),N=k+(P^(R|~T))+D[5]+4237533241&4294967295,k=R+(N<<21&4294967295|N>>>11),N=T+(R^(k|~P))+D[12]+1700485571&4294967295,T=k+(N<<6&4294967295|N>>>26),N=P+(k^(T|~R))+D[3]+2399980690&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~k))+D[10]+4293915773&4294967295,R=P+(N<<15&4294967295|N>>>17),N=k+(P^(R|~T))+D[1]+2240044497&4294967295,k=R+(N<<21&4294967295|N>>>11),N=T+(R^(k|~P))+D[8]+1873313359&4294967295,T=k+(N<<6&4294967295|N>>>26),N=P+(k^(T|~R))+D[15]+4264355552&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~k))+D[6]+2734768916&4294967295,R=P+(N<<15&4294967295|N>>>17),N=k+(P^(R|~T))+D[13]+1309151649&4294967295,k=R+(N<<21&4294967295|N>>>11),N=T+(R^(k|~P))+D[4]+4149444226&4294967295,T=k+(N<<6&4294967295|N>>>26),N=P+(k^(T|~R))+D[11]+3174756917&4294967295,P=T+(N<<10&4294967295|N>>>22),N=R+(T^(P|~k))+D[2]+718787259&4294967295,R=P+(N<<15&4294967295|N>>>17),N=k+(P^(R|~T))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+T&4294967295,x.g[1]=x.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+P&4294967295}r.prototype.v=function(x,T){T===void 0&&(T=x.length);const k=T-this.blockSize,D=this.C;let R=this.h,P=0;for(;P<T;){if(R==0)for(;P<=k;)s(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<T;)if(D[R++]=x.charCodeAt(P++),R==this.blockSize){s(this,D),R=0;break}}else for(;P<T;)if(D[R++]=x[P++],R==this.blockSize){s(this,D),R=0;break}}this.h=R,this.o+=T},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var T=1;T<x.length-8;++T)x[T]=0;T=this.o*8;for(var k=x.length-8;k<x.length;++k)x[k]=T&255,T/=256;for(this.v(x),x=Array(16),T=0,k=0;k<4;++k)for(let D=0;D<32;D+=8)x[T++]=this.g[k]>>>D&255;return x};function i(x,T){var k=o;return Object.prototype.hasOwnProperty.call(k,x)?k[x]:k[x]=T(x)}function a(x,T){this.h=T;const k=[];let D=!0;for(let R=x.length-1;R>=0;R--){const P=x[R]|0;D&&P==T||(k[R]=P,D=!1)}this.g=k}var o={};function l(x){return-128<=x&&x<128?i(x,function(T){return new a([T|0],T<0?-1:0)}):new a([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(x<0)return b(c(-x));const T=[];let k=1;for(let D=0;x>=k;D++)T[D]=x/k|0,k*=4294967296;return new a(T,0)}function d(x,T){if(x.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(x.charAt(0)=="-")return b(d(x.substring(1),T));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=c(Math.pow(T,8));let D=h;for(let P=0;P<x.length;P+=8){var R=Math.min(8,x.length-P);const N=parseInt(x.substring(P,P+R),T);R<8?(R=c(Math.pow(T,R)),D=D.j(R).add(c(N))):(D=D.j(k),D=D.add(c(N)))}return D}var h=l(0),p=l(1),f=l(16777216);t=a.prototype,t.m=function(){if(m(this))return-b(this).m();let x=0,T=1;for(let k=0;k<this.g.length;k++){const D=this.i(k);x+=(D>=0?D:4294967296+D)*T,T*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(w(this))return"0";if(m(this))return"-"+b(this).toString(x);const T=c(Math.pow(x,6));var k=this;let D="";for(;;){const R=C(k,T).g;k=v(k,R.j(T));let P=((k.g.length>0?k.g[0]:k.h)>>>0).toString(x);if(k=R,w(k))return P+D;for(;P.length<6;)P="0"+P;D=P+D}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function w(x){if(x.h!=0)return!1;for(let T=0;T<x.g.length;T++)if(x.g[T]!=0)return!1;return!0}function m(x){return x.h==-1}t.l=function(x){return x=v(this,x),m(x)?-1:w(x)?0:1};function b(x){const T=x.g.length,k=[];for(let D=0;D<T;D++)k[D]=~x.g[D];return new a(k,~x.h).add(p)}t.abs=function(){return m(this)?b(this):this},t.add=function(x){const T=Math.max(this.g.length,x.g.length),k=[];let D=0;for(let R=0;R<=T;R++){let P=D+(this.i(R)&65535)+(x.i(R)&65535),N=(P>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);D=N>>>16,P&=65535,N&=65535,k[R]=N<<16|P}return new a(k,k[k.length-1]&-2147483648?-1:0)};function v(x,T){return x.add(b(T))}t.j=function(x){if(w(this)||w(x))return h;if(m(this))return m(x)?b(this).j(b(x)):b(b(this).j(x));if(m(x))return b(this.j(b(x)));if(this.l(f)<0&&x.l(f)<0)return c(this.m()*x.m());const T=this.g.length+x.g.length,k=[];for(var D=0;D<2*T;D++)k[D]=0;for(D=0;D<this.g.length;D++)for(let R=0;R<x.g.length;R++){const P=this.i(D)>>>16,N=this.i(D)&65535,$=x.i(R)>>>16,le=x.i(R)&65535;k[2*D+2*R]+=N*le,y(k,2*D+2*R),k[2*D+2*R+1]+=P*le,y(k,2*D+2*R+1),k[2*D+2*R+1]+=N*$,y(k,2*D+2*R+1),k[2*D+2*R+2]+=P*$,y(k,2*D+2*R+2)}for(x=0;x<T;x++)k[x]=k[2*x+1]<<16|k[2*x];for(x=T;x<2*T;x++)k[x]=0;return new a(k,0)};function y(x,T){for(;(x[T]&65535)!=x[T];)x[T+1]+=x[T]>>>16,x[T]&=65535,T++}function E(x,T){this.g=x,this.h=T}function C(x,T){if(w(T))throw Error("division by zero");if(w(x))return new E(h,h);if(m(x))return T=C(b(x),T),new E(b(T.g),b(T.h));if(m(T))return T=C(x,b(T)),new E(b(T.g),T.h);if(x.g.length>30){if(m(x)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var k=p,D=T;D.l(x)<=0;)k=O(k),D=O(D);var R=L(k,1),P=L(D,1);for(D=L(D,2),k=L(k,2);!w(D);){var N=P.add(D);N.l(x)<=0&&(R=R.add(k),P=N),D=L(D,1),k=L(k,1)}return T=v(x,R.j(T)),new E(R,T)}for(R=h;x.l(T)>=0;){for(k=Math.max(1,Math.floor(x.m()/T.m())),D=Math.ceil(Math.log(k)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),P=c(k),N=P.j(T);m(N)||N.l(x)>0;)k-=D,P=c(k),N=P.j(T);w(P)&&(P=p),R=R.add(P),x=v(x,N)}return new E(R,x)}t.B=function(x){return C(this,x).h},t.and=function(x){const T=Math.max(this.g.length,x.g.length),k=[];for(let D=0;D<T;D++)k[D]=this.i(D)&x.i(D);return new a(k,this.h&x.h)},t.or=function(x){const T=Math.max(this.g.length,x.g.length),k=[];for(let D=0;D<T;D++)k[D]=this.i(D)|x.i(D);return new a(k,this.h|x.h)},t.xor=function(x){const T=Math.max(this.g.length,x.g.length),k=[];for(let D=0;D<T;D++)k[D]=this.i(D)^x.i(D);return new a(k,this.h^x.h)};function O(x){const T=x.g.length+1,k=[];for(let D=0;D<T;D++)k[D]=x.i(D)<<1|x.i(D-1)>>>31;return new a(k,x.h)}function L(x,T){const k=T>>5;T%=32;const D=x.g.length-k,R=[];for(let P=0;P<D;P++)R[P]=T>0?x.i(P+k)>>>T|x.i(P+k+1)<<32-T:x.i(P+k);return new a(R,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,y2=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,aa=a}).apply(typeof T_<"u"?T_:typeof self<"u"?self:typeof window<"u"?window:{});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v2,xu,w2,Of,Tw,b2,S2,E2;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zh=="object"&&Zh];for(var g=0;g<u.length;++g){var S=u[g];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var S=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var F=u[A];if(!(F in S))break e;S=S[F]}u=u[u.length-1],A=S[u],g=g(A),g!=A&&g!=null&&e(S,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var S=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&S.push([A,g[A]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,S){return u.call.apply(u.bind,arguments)}function c(u,g,S){return c=l,c.apply(null,arguments)}function d(u,g){var S=Array.prototype.slice.call(arguments,1);return function(){var A=S.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function h(u,g){function S(){}S.prototype=g.prototype,u.Z=g.prototype,u.prototype=new S,u.prototype.constructor=u,u.Ob=function(A,F,B){for(var se=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)se[Ze-2]=arguments[Ze];return g.prototype[F].apply(A,se)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function f(u){const g=u.length;if(g>0){const S=Array(g);for(let A=0;A<g;A++)S[A]=u[A];return S}return[]}function w(u,g){for(let A=1;A<arguments.length;A++){const F=arguments[A];var S=typeof F;if(S=S!="object"?S:F?Array.isArray(F)?"array":S:"null",S=="array"||S=="object"&&typeof F.length=="number"){S=u.length||0;const B=F.length||0;u.length=S+B;for(let se=0;se<B;se++)u[S+se]=F[se]}else u.push(F)}}class m{constructor(g,S){this.i=g,this.j=S,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(u){a.setTimeout(()=>{throw u},0)}function v(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class y{constructor(){this.h=this.g=null}add(g,S){const A=E.get();A.set(g,S),this.h?this.h.next=A:this.g=A,this.h=A}}var E=new m(()=>new C,u=>u.reset());class C{constructor(){this.next=this.g=this.h=null}set(g,S){this.h=g,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let O,L=!1,x=new y,T=()=>{const u=Promise.resolve(void 0);O=()=>{u.then(k)}};function k(){for(var u;u=v();){try{u.h.call(u.g)}catch(S){b(S)}var g=E;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const S=()=>{};a.addEventListener("test",S,g),a.removeEventListener("test",S,g)}catch{}return u}();function N(u){return/^[\s\xa0]*$/.test(u)}function $(u,g){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h($,R),$.prototype.init=function(u,g){const S=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(S=="mouseover"?g=u.fromElement:S=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),fe=0;function de(u,g,S,A,F){this.listener=u,this.proxy=null,this.src=g,this.type=S,this.capture=!!A,this.ha=F,this.key=++fe,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function M(u,g,S){for(const A in u)g.call(S,u[A],A,u)}function Q(u,g){for(const S in u)g.call(void 0,u[S],S,u)}function Ee(u){const g={};for(const S in u)g[S]=u[S];return g}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(u,g){let S,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(S in A)u[S]=A[S];for(let B=0;B<oe.length;B++)S=oe[B],Object.prototype.hasOwnProperty.call(A,S)&&(u[S]=A[S])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,g,S,A,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const se=Fe(u,g,A,F);return se>-1?(g=u[se],S||(g.fa=!1)):(g=new de(g,this.src,B,!!A,F),g.fa=S,u.push(g)),g};function Be(u,g){const S=g.type;if(S in u.g){var A=u.g[S],F=Array.prototype.indexOf.call(A,g,void 0),B;(B=F>=0)&&Array.prototype.splice.call(A,F,1),B&&(U(g),u.g[S].length==0&&(delete u.g[S],u.h--))}}function Fe(u,g,S,A){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==g&&B.capture==!!S&&B.ha==A)return F}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Ke={};function Xt(u,g,S,A,F){if(Array.isArray(g)){for(let B=0;B<g.length;B++)Xt(u,g[B],S,A,F);return null}return S=X(S),u&&u[le]?u.J(g,S,o(A)?!!A.capture:!1,F):En(u,g,S,!1,A,F)}function En(u,g,S,A,F,B){if(!g)throw Error("Invalid event type");const se=o(F)?!!F.capture:!!F;let Ze=jn(u);if(Ze||(u[ce]=Ze=new ue(u)),S=Ze.add(g,S,A,se,B),S.proxy)return S;if(A=fn(),S.proxy=A,A.src=u,A.listener=S,u.addEventListener)P||(F=se),F===void 0&&(F=!1),u.addEventListener(g.toString(),A,F);else if(u.attachEvent)u.attachEvent(Un(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return S}function fn(){function u(S){return g.call(u.src,u.listener,S)}const g=Ue;return u}function Mn(u,g,S,A,F){if(Array.isArray(g))for(var B=0;B<g.length;B++)Mn(u,g[B],S,A,F);else A=o(A)?!!A.capture:!!A,S=X(S),u&&u[le]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],S=Fe(g,S,A,F),S>-1&&(U(g[S]),Array.prototype.splice.call(g,S,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=jn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Fe(g,S,A,F)),(S=u>-1?g[u]:null)&&sn(S))}function sn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[le])Be(g.i,u);else{var S=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(S,A,u.capture):g.detachEvent?g.detachEvent(Un(S),A):g.addListener&&g.removeListener&&g.removeListener(A),(S=jn(g))?(Be(S,u),S.h==0&&(S.src=null,g[ce]=null)):U(u)}}}function Un(u){return u in Ke?Ke[u]:Ke[u]="on"+u}function Ue(u,g){if(u.da)u=!0;else{g=new $(g,this);const S=u.listener,A=u.ha||u.src;u.fa&&sn(u),u=S.call(A,g)}return u}function jn(u){return u=u[ce],u instanceof ue?u:null}var ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function X(u){return typeof u=="function"?u:(u[ne]||(u[ne]=function(g){return u.handleEvent(g)}),u[ne])}function G(){D.call(this),this.i=new ue(this),this.M=this,this.G=null}h(G,D),G.prototype[le]=!0,G.prototype.removeEventListener=function(u,g,S,A){Mn(this,u,g,S,A)};function W(u,g){var S,A=u.G;if(A)for(S=[];A;A=A.G)S.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new R(g,u);else if(g instanceof R)g.target=g.target||u;else{var F=g;g=new R(A,u),he(g,F)}F=!0;let B,se;if(S)for(se=S.length-1;se>=0;se--)B=g.g=S[se],F=ie(B,A,!0,g)&&F;if(B=g.g=u,F=ie(B,A,!0,g)&&F,F=ie(B,A,!1,g)&&F,S)for(se=0;se<S.length;se++)B=g.g=S[se],F=ie(B,A,!1,g)&&F}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const S=u.g[g];for(let A=0;A<S.length;A++)U(S[A]);delete u.g[g],u.h--}}this.G=null},G.prototype.J=function(u,g,S,A){return this.i.add(String(u),g,!1,S,A)},G.prototype.K=function(u,g,S,A){return this.i.add(String(u),g,!0,S,A)};function ie(u,g,S,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let B=0;B<g.length;++B){const se=g[B];if(se&&!se.da&&se.capture==S){const Ze=se.listener,yn=se.ha||se.src;se.fa&&Be(u.i,se),F=Ze.call(yn,A)!==!1&&F}}return F&&!A.defaultPrevented}function ge(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:a.setTimeout(u,g||0)}function Z(u){u.g=ge(()=>{u.g=null,u.i&&(u.i=!1,Z(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Se extends D{constructor(g,S){super(),this.m=g,this.l=S,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Z(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ce(u){D.call(this),this.h=u,this.g={}}h(Ce,D);var Me=[];function Oe(u){M(u.g,function(g,S){this.g.hasOwnProperty(S)&&sn(g)},u),u.g={}}Ce.prototype.N=function(){Ce.Z.N.call(this),Oe(this)},Ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ne=a.JSON.stringify,ve=a.JSON.parse,Ie=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ze(){}function It(){}var Je={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ve(){R.call(this,"d")}h(Ve,R);function pt(){R.call(this,"c")}h(pt,R);var Ge={},mt=null;function $e(){return mt=mt||new G}Ge.Ia="serverreachability";function Xe(u){R.call(this,Ge.Ia,u)}h(Xe,R);function Re(u){const g=$e();W(g,new Xe(g))}Ge.STAT_EVENT="statevent";function _t(u,g){R.call(this,Ge.STAT_EVENT,u),this.stat=g}h(_t,R);function ht(u){const g=$e();W(g,new _t(g,u))}Ge.Ja="timingevent";function gt(u,g){R.call(this,Ge.Ja,u),this.size=g}h(gt,R);function Nt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function K(){this.g=!0}K.prototype.ua=function(){this.g=!1};function re(u,g,S,A,F,B){u.info(function(){if(u.g)if(B){var se="",Ze=B.split("&");for(let Mt=0;Mt<Ze.length;Mt++){var yn=Ze[Mt].split("=");if(yn.length>1){const In=yn[0];yn=yn[1];const gs=In.split("_");se=gs.length>=2&&gs[1]=="type"?se+(In+"="+yn+"&"):se+(In+"=redacted&")}}}else se=null;else se=B;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+g+`
`+S+`
`+se})}function ke(u,g,S,A,F,B,se){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+g+`
`+S+`
`+B+" "+se})}function _e(u,g,S,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+rt(u,S)+(A?" "+A:"")})}function De(u,g){u.info(function(){return"TIMEOUT: "+g})}K.prototype.info=function(){};function rt(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var S=B[u];if(!(S.length<2)){var A=S[1];if(Array.isArray(A)&&!(A.length<1)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(let se=1;se<A.length;se++)A[se]=""}}}}return Ne(B)}catch{return g}}var yt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ot;function Lr(){}h(Lr,ze),Lr.prototype.g=function(){return new XMLHttpRequest},Ot=new Lr;function Mr(u){return encodeURIComponent(String(u))}function Fs(u){var g=1;u=u.split(":");const S=[];for(;g>0&&u.length;)S.push(u.shift()),g--;return u.length&&S.push(u.join(":")),S}function ir(u,g,S,A){this.j=u,this.i=g,this.l=S,this.S=A||1,this.V=new Ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var Uc={},Aa={};function Ra(u,g,S){u.M=1,u.A=wh(ms(g)),u.u=S,u.R=!0,vt(u,null)}function vt(u,g){u.F=Date.now(),vh(u),u.B=ms(u.A);var S=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),w1(S.i,"t",A),u.C=0,S=u.j.L,u.h=new $o,u.g=U1(u.j,S?g:null,!u.u),u.P>0&&(u.O=new Se(c(u.Y,u,u.g),u.P)),g=u.V,S=u.g,A=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Me[0]=F.toString()),F=Me);for(let B=0;B<F.length;B++){const se=Xt(S,F[B],A||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=u.J?Ee(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Re(),re(u.i,u.v,u.B,u.l,u.S,u.u)}ir.prototype.ba=function(u){u=u.target;const g=this.O;g&&_i(u)==3?g.j():this.Y(u)},ir.prototype.Y=function(u){try{if(u==this.g)e:{const Ze=_i(this.g),yn=this.g.ya(),Mt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||T1(this.g)))){this.K||Ze!=4||yn==7||(yn==8||Mt<=0?Re(3):Re(2)),Og(this);var g=this.g.ca();this.X=g;var S=Si(this);if(this.o=g==200,ke(this.i,this.v,this.B,this.l,this.S,Ze,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var B=A;break t}}B=null}if(u=B)_e(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lg(this,u);else{this.o=!1,this.m=3,ht(12),Pa(this),jc(this);break e}}if(this.R){u=!0;let In;for(;!this.K&&this.C<S.length;)if(In=jL(this,S),In==Aa){Ze==4&&(this.m=4,ht(14),u=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}else if(In==Uc){this.m=4,ht(15),_e(this.i,this.l,S,"[Invalid Chunk]"),u=!1;break}else _e(this.i,this.l,In,null),Lg(this,In);if(o1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||S.length!=0||this.h.h||(this.m=1,ht(16),u=!1),this.o=this.o&&u,!u)_e(this.i,this.l,S,"[Invalid Chunked Response]"),Pa(this),jc(this);else if(S.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),$g(se),se.P=!0,ht(11))}}else _e(this.i,this.l,S,null),Lg(this,S);Ze==4&&Pa(this),this.o&&!this.K&&(Ze==4?P1(this.j,this):(this.o=!1,vh(this)))}else XL(this.g),g==400&&S.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Pa(this),jc(this)}}}catch{}finally{}};function Si(u){if(!o1(u))return u.g.la();const g=T1(u.g);if(g==="")return"";let S="";const A=g.length,F=_i(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Pa(u),jc(u),"";u.h.i=new a.TextDecoder}for(let B=0;B<A;B++)u.h.h=!0,S+=u.h.i.decode(g[B],{stream:!(F&&B==A-1)});return g.length=0,u.h.g+=S,u.C=0,u.h.g}function o1(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jL(u,g){var S=u.C,A=g.indexOf(`
`,S);return A==-1?Aa:(S=Number(g.substring(S,A)),isNaN(S)?Uc:(A+=1,A+S>g.length?Aa:(g=g.slice(A,A+S),u.C=A+S,g)))}ir.prototype.cancel=function(){this.K=!0,Pa(this)};function vh(u){u.T=Date.now()+u.H,l1(u,u.H)}function l1(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Nt(c(u.aa,u),g)}function Og(u){u.D&&(a.clearTimeout(u.D),u.D=null)}ir.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(De(this.i,this.B),this.M!=2&&(Re(),ht(17)),Pa(this),this.m=2,jc(this)):l1(this,this.T-u)};function jc(u){u.j.I==0||u.K||P1(u.j,u)}function Pa(u){Og(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Oe(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Lg(u,g){try{var S=u.j;if(S.I!=0&&(S.g==u||Mg(S.h,u))){if(!u.L&&Mg(S.h,u)&&S.I==3){try{var A=S.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<u.F)_h(S),Eh(S);else break e;zg(S),ht(18)}}else S.xa=F[1],0<S.xa-S.K&&F[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Nt(c(S.Va,S),6e3));d1(S.h)<=1&&S.ta&&(S.ta=void 0)}else La(S,11)}else if((u.L||S.g==u)&&_h(S),!N(g))for(F=S.Ba.g.parse(g),g=0;g<F.length;g++){let Mt=F[g];const In=Mt[0];if(!(In<=S.K))if(S.K=In,Mt=Mt[1],S.I==2)if(Mt[0]=="c"){S.M=Mt[1],S.ba=Mt[2];const gs=Mt[3];gs!=null&&(S.ka=gs,S.j.info("VER="+S.ka));const Ho=Mt[4];Ho!=null&&(S.za=Ho,S.j.info("SVER="+S.za));const xi=Mt[5];xi!=null&&typeof xi=="number"&&xi>0&&(A=1.5*xi,S.O=A,S.j.info("backChannelRequestTimeoutMs_="+A)),A=S;const Ti=u.g;if(Ti){const Th=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Th){var B=A.h;B.g||Th.indexOf("spdy")==-1&&Th.indexOf("quic")==-1&&Th.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Ug(B,B.h),B.h=null))}if(A.G){const Wg=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Wg&&(A.wa=Wg,Lt(A.J,A.G,Wg))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-u.F,S.j.info("Handshake RTT: "+S.T+"ms")),A=S;var se=u;if(A.na=M1(A,A.L?A.ba:null,A.W),se.L){h1(A.h,se);var Ze=se,yn=A.O;yn&&(Ze.H=yn),Ze.D&&(Og(Ze),vh(Ze)),A.g=se}else A1(A);S.i.length>0&&Ih(S)}else Mt[0]!="stop"&&Mt[0]!="close"||La(S,7);else S.I==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?La(S,7):Bg(S):Mt[0]!="noop"&&S.l&&S.l.qa(Mt),S.A=0)}}Re(4)}catch{}}var FL=class{constructor(u,g){this.g=u,this.map=g}};function c1(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function u1(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function d1(u){return u.h?1:u.g?u.g.size:0}function Mg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ug(u,g){u.g?u.g.add(g):u.h=g}function h1(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}c1.prototype.cancel=function(){if(this.i=f1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function f1(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const S of u.g.values())g=g.concat(S.G);return g}return f(u.i)}var p1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VL(u,g){if(u){u=u.split("&");for(let S=0;S<u.length;S++){const A=u[S].indexOf("=");let F,B=null;A>=0?(F=u[S].substring(0,A),B=u[S].substring(A+1)):F=u[S],g(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ei(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Ei?(this.l=u.l,Fc(this,u.j),this.o=u.o,this.g=u.g,Vc(this,u.u),this.h=u.h,jg(this,b1(u.i)),this.m=u.m):u&&(g=String(u).match(p1))?(this.l=!1,Fc(this,g[1]||"",!0),this.o=Bc(g[2]||""),this.g=Bc(g[3]||"",!0),Vc(this,g[4]),this.h=Bc(g[5]||"",!0),jg(this,g[6]||"",!0),this.m=Bc(g[7]||"")):(this.l=!1,this.i=new $c(null,this.l))}Ei.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(zc(g,m1,!0),":");var S=this.g;return(S||g=="file")&&(u.push("//"),(g=this.o)&&u.push(zc(g,m1,!0),"@"),u.push(Mr(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&u.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&u.push("/"),u.push(zc(S,S.charAt(0)=="/"?$L:zL,!0))),(S=this.i.toString())&&u.push("?",S),(S=this.m)&&u.push("#",zc(S,qL)),u.join("")},Ei.prototype.resolve=function(u){const g=ms(this);let S=!!u.j;S?Fc(g,u.j):S=!!u.o,S?g.o=u.o:S=!!u.g,S?g.g=u.g:S=u.u!=null;var A=u.h;if(S)Vc(g,u.u);else if(S=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var F=g.h.lastIndexOf("/");F!=-1&&(A=g.h.slice(0,F+1)+A)}if(F=A,F==".."||F==".")A="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){A=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let se=0;se<F.length;){const Ze=F[se++];Ze=="."?A&&se==F.length&&B.push(""):Ze==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&se==F.length&&B.push("")):(B.push(Ze),A=!0)}A=B.join("/")}else A=F}return S?g.h=A:S=u.i.toString()!=="",S?jg(g,b1(u.i)):S=!!u.m,S&&(g.m=u.m),g};function ms(u){return new Ei(u)}function Fc(u,g,S){u.j=S?Bc(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Vc(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function jg(u,g,S){g instanceof $c?(u.i=g,HL(u.i,u.l)):(S||(g=zc(g,WL)),u.i=new $c(g,u.l))}function Lt(u,g,S){u.i.set(g,S)}function wh(u){return Lt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Bc(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zc(u,g,S){return typeof u=="string"?(u=encodeURI(u).replace(g,BL),S&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function BL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var m1=/[#\/\?@]/g,zL=/[#\?:]/g,$L=/[#\?]/g,WL=/[#\?@]/g,qL=/#/g;function $c(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Oa(u){u.g||(u.g=new Map,u.h=0,u.i&&VL(u.i,function(g,S){u.add(decodeURIComponent(g.replace(/\+/g," ")),S)}))}t=$c.prototype,t.add=function(u,g){Oa(this),this.i=null,u=Wo(this,u);let S=this.g.get(u);return S||this.g.set(u,S=[]),S.push(g),this.h+=1,this};function g1(u,g){Oa(u),g=Wo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function y1(u,g){return Oa(u),g=Wo(u,g),u.g.has(g)}t.forEach=function(u,g){Oa(this),this.g.forEach(function(S,A){S.forEach(function(F){u.call(g,F,A,this)},this)},this)};function v1(u,g){Oa(u);let S=[];if(typeof g=="string")y1(u,g)&&(S=S.concat(u.g.get(Wo(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)S=S.concat(u[g]);return S}t.set=function(u,g){return Oa(this),this.i=null,u=Wo(this,u),y1(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=v1(this,u),u.length>0?String(u[0]):g):g};function w1(u,g,S){g1(u,g),S.length>0&&(u.i=null,u.g.set(Wo(u,g),f(S)),u.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var S=g[A];const F=Mr(S);S=v1(this,S);for(let B=0;B<S.length;B++){let se=F;S[B]!==""&&(se+="="+Mr(S[B])),u.push(se)}}return this.i=u.join("&")};function b1(u){const g=new $c;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Wo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function HL(u,g){g&&!u.j&&(Oa(u),u.i=null,u.g.forEach(function(S,A){const F=A.toLowerCase();A!=F&&(g1(this,A),w1(this,F,S))},u)),u.j=g}function KL(u,g){const S=new K;if(a.Image){const A=new Image;A.onload=d(Ii,S,"TestLoadImage: loaded",!0,g,A),A.onerror=d(Ii,S,"TestLoadImage: error",!1,g,A),A.onabort=d(Ii,S,"TestLoadImage: abort",!1,g,A),A.ontimeout=d(Ii,S,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function GL(u,g){const S=new K,A=new AbortController,F=setTimeout(()=>{A.abort(),Ii(S,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(B=>{clearTimeout(F),B.ok?Ii(S,"TestPingServer: ok",!0,g):Ii(S,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Ii(S,"TestPingServer: error",!1,g)})}function Ii(u,g,S,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(S)}catch{}}function QL(){this.g=new Ie}function Fg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Fg,ze),Fg.prototype.g=function(){return new bh(this.i,this.h)};function bh(u,g){G.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(bh,G),t=bh.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,qc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||a).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qc(this)),this.g&&(this.readyState=3,qc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;S1(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function S1(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Wc(this):qc(this),this.readyState==3&&S1(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Wc(this))},t.Na=function(u){this.g&&(this.response=u,Wc(this))},t.ga=function(){this.g&&Wc(this)};function Wc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,qc(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var S=g.next();!S.done;)S=S.value,u.push(S[0]+": "+S[1]),S=g.next();return u.join(`\r
`)};function qc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function E1(u){let g="";return M(u,function(S,A){g+=A,g+=":",g+=S,g+=`\r
`}),g}function Vg(u,g,S){e:{for(A in S){var A=!1;break e}A=!0}A||(S=E1(S),typeof u=="string"?S!=null&&Mr(S):Lt(u,g,S))}function Zt(u){G.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Zt,G);var JL=/^https?$/i,YL=["POST","PUT"];t=Zt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,S,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ot.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){I1(this,B);return}if(u=S||"",S=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)S.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())S.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(S.keys()).find(B=>B.toLowerCase()=="content-type"),F=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(YL,g,void 0)>=0)||A||F||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,se]of S)this.g.setRequestHeader(B,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){I1(this,B)}};function I1(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,_1(u),Sh(u)}function _1(u){u.A||(u.A=!0,W(u,"complete"),W(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,W(this,"complete"),W(this,"abort"),Sh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sh(this,!0)),Zt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?x1(this):this.Xa())},t.Xa=function(){x1(this)};function x1(u){if(u.h&&typeof i<"u"){if(u.v&&_i(u)==4)setTimeout(u.Ca.bind(u),0);else if(W(u,"readystatechange"),_i(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var S;if(!(S=g)){var A;if(A=B===0){let se=String(u.D).match(p1)[1]||null;!se&&a.self&&a.self.location&&(se=a.self.location.protocol.slice(0,-1)),A=!JL.test(se?se.toLowerCase():"")}S=A}if(S)W(u,"complete"),W(u,"success");else{u.o=6;try{var F=_i(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",_1(u)}}finally{Sh(u)}}}}function Sh(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const S=u.g;u.g=null,g||W(u,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function _i(u){return u.g?u.g.readyState:0}t.ca=function(){try{return _i(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ve(g)}};function T1(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function XL(u){const g={};u=(u.g&&_i(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(N(u[A]))continue;var S=Fs(u[A]);const F=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const B=g[F]||[];g[F]=B,B.push(S)}Q(g,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hc(u,g,S){return S&&S.internalChannelParams&&S.internalChannelParams[u]||g}function k1(u){this.za=0,this.i=[],this.j=new K,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hc("baseRetryDelayMs",5e3,u),this.Za=Hc("retryDelaySeedMs",1e4,u),this.Ta=Hc("forwardChannelMaxRetries",2,u),this.va=Hc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new c1(u&&u.concurrentRequestLimit),this.Ba=new QL,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=k1.prototype,t.ka=8,t.I=1,t.connect=function(u,g,S,A){ht(0),this.W=u,this.H=g||{},S&&A!==void 0&&(this.H.OSID=S,this.H.OAID=A),this.F=this.X,this.J=M1(this,null,this.W),Ih(this)};function Bg(u){if(C1(u),u.I==3){var g=u.V++,S=ms(u.J);if(Lt(S,"SID",u.M),Lt(S,"RID",g),Lt(S,"TYPE","terminate"),Kc(u,S),g=new ir(u,u.j,g),g.M=2,g.A=wh(ms(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(g.A.toString(),"")}catch{}!S&&a.Image&&(new Image().src=g.A,S=!0),S||(g.g=U1(g.j,null),g.g.ea(g.A)),g.F=Date.now(),vh(g)}L1(u)}function Eh(u){u.g&&($g(u),u.g.cancel(),u.g=null)}function C1(u){Eh(u),u.v&&(a.clearTimeout(u.v),u.v=null),_h(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Ih(u){if(!u1(u.h)&&!u.m){u.m=!0;var g=u.Ea;O||T(),L||(O(),L=!0),x.add(g,u),u.D=0}}function ZL(u,g){return d1(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Nt(c(u.Ea,u,g),O1(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new ir(this,this.j,u);let B=this.o;if(this.U&&(B?(B=Ee(B),he(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var g=0,S=0;S<this.i.length;S++){t:{var A=this.i[S];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=S;break e}if(g===4096||S===this.i.length-1){g=S+1;break e}}g=1e3}else g=1e3;g=N1(this,F,g),S=ms(this.J),Lt(S,"RID",u),Lt(S,"CVER",22),this.G&&Lt(S,"X-HTTP-Session-Id",this.G),Kc(this,S),B&&(this.R?g="headers="+Mr(E1(B))+"&"+g:this.u&&Vg(S,this.u,B)),Ug(this.h,F),this.Ra&&Lt(S,"TYPE","init"),this.S?(Lt(S,"$req",g),Lt(S,"SID","null"),F.U=!0,Ra(F,S,null)):Ra(F,S,g),this.I=2}}else this.I==3&&(u?D1(this,u):this.i.length==0||u1(this.h)||D1(this))};function D1(u,g){var S;g?S=g.l:S=u.V++;const A=ms(u.J);Lt(A,"SID",u.M),Lt(A,"RID",S),Lt(A,"AID",u.K),Kc(u,A),u.u&&u.o&&Vg(A,u.u,u.o),S=new ir(u,u.j,S,u.D+1),u.u===null&&(S.J=u.o),g&&(u.i=g.G.concat(u.i)),g=N1(u,S,1e3),S.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ug(u.h,S),Ra(S,A,g)}function Kc(u,g){u.H&&M(u.H,function(S,A){Lt(g,A,S)}),u.l&&M({},function(S,A){Lt(g,A,S)})}function N1(u,g,S){S=Math.min(u.i.length,S);const A=u.l?c(u.l.Ka,u.l,u):null;e:{var F=u.i;let Ze=-1;for(;;){const yn=["count="+S];Ze==-1?S>0?(Ze=F[0].g,yn.push("ofs="+Ze)):Ze=0:yn.push("ofs="+Ze);let Mt=!0;for(let In=0;In<S;In++){var B=F[In].g;const gs=F[In].map;if(B-=Ze,B<0)Ze=Math.max(0,F[In].g-100),Mt=!1;else try{B="req"+B+"_"||"";try{var se=gs instanceof Map?gs:Object.entries(gs);for(const[Ho,xi]of se){let Ti=xi;o(xi)&&(Ti=Ne(xi)),yn.push(B+Ho+"="+encodeURIComponent(Ti))}}catch(Ho){throw yn.push(B+"type="+encodeURIComponent("_badmap")),Ho}}catch{A&&A(gs)}}if(Mt){se=yn.join("&");break e}}se=void 0}return u=u.i.splice(0,S),g.G=u,se}function A1(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;O||T(),L||(O(),L=!0),x.add(g,u),u.A=0}}function zg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Nt(c(u.Da,u),O1(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,R1(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Nt(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Eh(this),R1(this))};function $g(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function R1(u){u.g=new ir(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=ms(u.na);Lt(g,"RID","rpc"),Lt(g,"SID",u.M),Lt(g,"AID",u.K),Lt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Lt(g,"TO",u.ia),Lt(g,"TYPE","xmlhttp"),Kc(u,g),u.u&&u.o&&Vg(g,u.u,u.o),u.O&&(u.g.H=u.O);var S=u.g;u=u.ba,S.M=1,S.A=wh(ms(g)),S.u=null,S.R=!0,vt(S,u)}t.Va=function(){this.C!=null&&(this.C=null,Eh(this),zg(this),ht(19))};function _h(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function P1(u,g){var S=null;if(u.g==g){_h(u),$g(u),u.g=null;var A=2}else if(Mg(u.h,g))S=g.G,h1(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){S=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;A=$e(),W(A,new gt(A,S)),Ih(u)}else A1(u);else if(F=g.m,F==3||F==0&&g.X>0||!(A==1&&ZL(u,g)||A==2&&zg(u)))switch(S&&S.length>0&&(g=u.h,g.i=g.i.concat(S)),F){case 1:La(u,5);break;case 4:La(u,10);break;case 3:La(u,6);break;default:La(u,2)}}}function O1(u,g){let S=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(S*=2),S*g}function La(u,g){if(u.j.info("Error code "+g),g==2){var S=c(u.bb,u),A=u.Ua;const F=!A;A=new Ei(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fc(A,"https"),wh(A),F?KL(A.toString(),S):GL(A.toString(),S)}else ht(2);u.I=0,u.l&&u.l.pa(g),L1(u),C1(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function L1(u){if(u.I=0,u.ja=[],u.l){const g=f1(u.h);(g.length!=0||u.i.length!=0)&&(w(u.ja,g),w(u.ja,u.i),u.h.i.length=0,f(u.i),u.i.length=0),u.l.oa()}}function M1(u,g,S){var A=S instanceof Ei?ms(S):new Ei(S);if(A.g!="")g&&(A.g=g+"."+A.g),Vc(A,A.u);else{var F=a.location;A=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const B=new Ei(null);A&&Fc(B,A),g&&(B.g=g),F&&Vc(B,F),S&&(B.h=S),A=B}return S=u.G,g=u.wa,S&&g&&Lt(A,S,g),Lt(A,"VER",u.ka),Kc(u,A),A}function U1(u,g,S){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Zt(new Fg({ab:S})):new Zt(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function j1(){}t=j1.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function xh(){}xh.prototype.g=function(u,g){return new yr(u,g)};function yr(u,g){G.call(this),this.g=new k1(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!N(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new qo(this)}h(yr,G),yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){Bg(this.g)},yr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var S={};S.__data__=u,u=S}else this.v&&(S={},S.__data__=Ne(u),u=S);g.i.push(new FL(g.Ya++,u)),g.I==3&&Ih(g)},yr.prototype.N=function(){this.g.l=null,delete this.j,Bg(this.g),delete this.g,yr.Z.N.call(this)};function F1(u){Ve.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const S in g){u=S;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(F1,Ve);function V1(){pt.call(this),this.status=1}h(V1,pt);function qo(u){this.g=u}h(qo,j1),qo.prototype.ra=function(){W(this.g,"a")},qo.prototype.qa=function(u){W(this.g,new F1(u))},qo.prototype.pa=function(u){W(this.g,new V1)},qo.prototype.oa=function(){W(this.g,"b")},xh.prototype.createWebChannel=xh.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,E2=function(){return new xh},S2=function(){return $e()},b2=Ge,Tw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yt.NO_ERROR=0,yt.TIMEOUT=8,yt.HTTP_ERROR=6,Of=yt,Tt.COMPLETE="complete",w2=Tt,It.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",G.prototype.listen=G.prototype.J,xu=It,Zt.prototype.listenOnce=Zt.prototype.K,Zt.prototype.getLastError=Zt.prototype.Ha,Zt.prototype.getLastErrorCode=Zt.prototype.ya,Zt.prototype.getStatus=Zt.prototype.ca,Zt.prototype.getResponseJson=Zt.prototype.La,Zt.prototype.getResponseText=Zt.prototype.la,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Fa,v2=Zt}).apply(typeof Zh<"u"?Zh:typeof self<"u"?self:typeof window<"u"?window:{});const k_="@firebase/firestore",C_="4.9.2";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let kc="12.3.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fa=new Jm("@firebase/firestore");function ul(){return fa.logLevel}function I2(t){fa.setLogLevel(t)}function Y(t,...e){if(fa.logLevel<=st.DEBUG){const n=e.map(Fb);fa.debug(`Firestore (${kc}): ${t}`,...n)}}function un(t,...e){if(fa.logLevel<=st.ERROR){const n=e.map(Fb);fa.error(`Firestore (${kc}): ${t}`,...n)}}function pa(t,...e){if(fa.logLevel<=st.WARN){const n=e.map(Fb);fa.warn(`Firestore (${kc}): ${t}`,...n)}}function Fb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_2(t,r,n)}function _2(t,e,n){let r=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw un(r),new Error(r)}function Te(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||_2(e,s,r)}function ye(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zz{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($n.UNAUTHENTICATED))}shutdown(){}}class $z{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new zz(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new $n(e)}}class Wz{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Wz(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Te(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new D_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new D_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Kz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function He(t,e){return t<e?-1:t>e?1:0}function kw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Py(s)===Py(i)?He(s,i):Py(s)?1:-1}return He(t.length,e.length)}const Gz=55296,Qz=57343;function Py(t){const e=t.charCodeAt(0);return e>=Gz&&e<=Qz}function Xl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function T2(t){return t+"\0"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const N_="__name__";class Ss{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ss.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ss?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ss.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return He(e.length,n.length)}static compareSegments(e,n){const r=Ss.isNumericId(e),s=Ss.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ss.extractNumericId(e).compare(Ss.extractNumericId(n)):kw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return aa.fromString(e.substring(4,e.length-2))}}class ft extends Ss{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const Jz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Ss{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return Jz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N_}static keyField(){return new Wt([N_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ae{constructor(e){this.path=e}static fromPath(e){return new ae(ft.fromString(e))}static fromName(e){return new ae(ft.fromString(e).popFirst(5))}static empty(){return new ae(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new ft(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function k2(t,e,n){if(!n)throw new te(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function C2(t,e,n,r){if(e===!0&&r===!0)throw new te(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function A_(t){if(!ae.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R_(t){if(ae.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function D2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function eg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eg(t);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Yz(t,e){if(e<=0)throw new te(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gn(t,e){const n={typeString:t};return e&&(n.value=e),n}function rh(t,e){if(!D2(t))throw new te(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new te(z.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P_=-62135596800,O_=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*O_);return new ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<P_)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O_}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rh(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-P_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:gn("string",ct._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new ct(0,0))}static max(){return new Ae(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Zl=-1;class jp{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Cw(t){return t.fields.find(e=>e.kind===2)}function Ha(t){return t.fields.filter(e=>e.kind!==2)}jp.UNKNOWN_ID=-1;class Lf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Nd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Nd(0,Rr.min())}}function N2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new Rr(s,ae.empty(),e)}function A2(t){return new Rr(t.readTime,t.key,Zl)}class Rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rr(Ae.min(),ae.empty(),Zl)}static max(){return new Rr(Ae.max(),ae.empty(),Zl)}}function Vb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const R2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ta(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==R2)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&n()},l=>r(l))}),a=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{a[c]=d,++o,o===i&&r(a)},d=>s(d))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wr="SimpleDb";class tg{static open(e,n,r,s){try{return new tg(n,e.transaction(s,r))}catch(i){throw new Wu(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new zr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Wu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Bb(r.target.error);this.S.reject(new Wu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Y(wr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Zz(n)}}class oa{static delete(e){return Y(wr,"Removing database:",e),Qa(RA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Rb())return!1;if(oa.F())return!0;const e=Ln(),n=oa.M(e),r=0<n&&n<10,s=O2(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,oa.M(Ln())===12.2&&un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Y(wr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;n(a)},s.onblocked=()=>{r(new Wu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?r(new te(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new te(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Wu(e,a))},s.onupgradeneeded=i=>{Y(wr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.N.k(a,s.transaction,i.oldVersion,this.version).next(()=>{Y(wr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=tg.open(this.db,e,i?"readonly":"readwrite",r),l=s(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),j.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(Y(wr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function O2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Xz{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Qa(this.U.delete())}}class Wu extends te{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ka(t){return t.name==="IndexedDbTransactionError"}class Zz{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y(wr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y(wr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qa(r)}add(e){return Y(wr,"ADD",this.store.name,e,e),Qa(this.store.add(e))}get(e){return Qa(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y(wr,"GET",this.store.name,e,n),n))}delete(e){return Y(wr,"DELETE",this.store.name,e),Qa(this.store.delete(e))}count(){return Y(wr,"COUNT",this.store.name),Qa(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new j((a,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{a(l.target.result)}})}{const i=this.cursor(r),a=[];return this.H(i,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new j((s,i)=>{r.onerror=a=>{i(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}Z(e,n){Y(wr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,a,o)=>o.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new j((r,s)=>{n.onerror=i=>{const a=Bb(i.target.error);s(a)},n.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(e,n){const r=[];return new j((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const l=new Xz(o),c=n(o.primaryKey,o.value,l);if(c instanceof j){const d=c.catch(h=>(l.done(),j.reject(h)));r.push(d)}l.isDone?s():l.G===null?o.continue():o.continue(l.G)}}).next(()=>j.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Qa(t){return new j((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Bb(r.target.error);n(s)}})}let L_=!1;function Bb(t){const e=oa.M(Ln());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return L_||(L_=!0,setTimeout(()=>{throw r},0)),r}}return t}const qu="IndexBackfiller";class e${constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Y(qu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();Y(qu,`Documents written: ${n}`)}catch(n){ka(n)?Y(qu,"Ignoring IndexedDB error during index backfill: ",n):await Ta(n)}await this.re(6e4)})}}class t${constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return j.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return Y(qu,`Processing collection: ${a}`),this.oe(e,a,s).next(o=>{s-=o,r.add(a)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(s,i)).next(o=>(Y(qu,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const a=A2(i);Vb(a,r)>0&&(r=a)}),new Rr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dr.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const go=-1;function ng(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function L2(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fp="";function Qn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=M_(e)),e=n$(t.get(n),e);return M_(e)}function n$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Fp:n+="";break;default:n+=i}}return n}function M_(t){return t+Fp+""}function Ts(t){const e=t.length;if(Te(e>=2,64408,{path:t}),e===2)return Te(t.charAt(0)===Fp&&t.charAt(1)==="",56145,{path:t}),ft.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const a=t.indexOf(Fp,i);switch((a<0||a>n)&&me(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(i,a);let l;s.length===0?l=o:(s+=o,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:me(61167,{path:t})}i=a+2}return new ft(r)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ka="remoteDocuments",sh="owner",el="owner",Rd="mutationQueues",r$="userId",Jr="mutations",U_="batchId",io="userMutationsIndex",j_=["userId","batchId"];/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mf(t,e){return[t,Qn(e)]}function M2(t,e,n){return[t,Qn(e),n]}const s$={},ec="documentMutations",Vp="remoteDocumentsV14",i$=["prefixPath","collectionGroup","readTime","documentId"],Uf="documentKeyIndex",a$=["prefixPath","collectionGroup","documentId"],U2="collectionGroupIndex",o$=["collectionGroup","readTime","prefixPath","documentId"],Pd="remoteDocumentGlobal",Dw="remoteDocumentGlobalKey",tc="targets",j2="queryTargetsIndex",l$=["canonicalId","targetId"],nc="targetDocuments",c$=["targetId","path"],zb="documentTargetsIndex",u$=["path","targetId"],Bp="targetGlobalKey",yo="targetGlobal",Od="collectionParents",d$=["collectionId","parent"],rc="clientMetadata",h$="clientId",rg="bundles",f$="bundleId",sg="namedQueries",p$="name",$b="indexConfiguration",m$="indexId",Nw="collectionGroupIndex",g$="collectionGroup",Hu="indexState",y$=["indexId","uid"],F2="sequenceNumberIndex",v$=["uid","sequenceNumber"],Ku="indexEntries",w$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],V2="documentKeyIndex",b$=["indexId","uid","orderedDocumentKey"],ig="documentOverlays",S$=["userId","collectionPath","documentId"],Aw="collectionPathOverlayIndex",E$=["userId","collectionPath","largestBatchId"],B2="collectionGroupOverlayIndex",I$=["userId","collectionGroup","largestBatchId"],Wb="globals",_$="name",z2=[Rd,Jr,ec,Ka,tc,sh,yo,nc,rc,Pd,Od,rg,sg],x$=[...z2,ig],$2=[Rd,Jr,ec,Vp,tc,sh,yo,nc,rc,Pd,Od,rg,sg,ig],W2=$2,qb=[...W2,$b,Hu,Ku],T$=qb,q2=[...qb,Wb],k$=q2;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rw extends P2{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Sn(t,e){const n=ye(t);return oa.O(n.le,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function H2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pt{constructor(e,n){this.comparator=e,this.root=n||Rn.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ef(this.root,e,this.comparator,!0)}}class ef{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rn.RED,this.left=s??Rn.EMPTY,this.right=i??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(t,e,n,r,s){return this}insert(t,e,n){return new Rn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class St{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V_(this.data.getIterator())}getIteratorFrom(e){return new V_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class V_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tl(t){return t.hasNext()?t.getNext():void 0}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hr{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new hr([])}unionWith(e){let n=new St(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class K2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new K2("Invalid base64 string: "+s):s}}(e);return new rn(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const C$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(Te(!!t,39018),typeof t=="string"){let e=0;const n=C$.exec(t);if(Te(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fi(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const G2="server_timestamp",Q2="__type__",J2="__previous_value__",Y2="__local_write_time__";function Hb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)==null?void 0:e.fields)||{})[Q2])==null?void 0:n.stringValue)===G2}function ag(t){const e=t.mapValue.fields[J2];return Hb(e)?ag(e):e}function Ld(t){const e=hi(t.mapValue.fields[Y2].timestampValue);return new ct(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class D${constructor(e,n,r,s,i,a,o,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const zp="(default)";class ma{constructor(e,n){this.projectId=e,this.database=n||zp}static empty(){return new ma("","")}get isDefaultDatabase(){return this.database===zp}isEqual(e){return e instanceof ma&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kb="__type__",X2="__max__",Ki={mapValue:{fields:{__type__:{stringValue:X2}}}},Gb="__vector__",sc="value",jf={nullValue:"NULL_VALUE"};function ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hb(t)?4:Z2(t)?9007199254740991:og(t)?10:11:me(28295,{value:t})}function Ls(t,e){if(t===e)return!0;const n=ga(t);if(n!==ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ld(t).isEqual(Ld(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=hi(r.timestampValue),a=hi(s.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return fi(r.bytesValue).isEqual(fi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Bt(r.geoPointValue.latitude)===Bt(s.geoPointValue.latitude)&&Bt(r.geoPointValue.longitude)===Bt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Bt(r.integerValue)===Bt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=Bt(r.doubleValue),a=Bt(s.doubleValue);return i===a?Ad(i)===Ad(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return Xl(t.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:case 11:return function(r,s){const i=r.mapValue.fields||{},a=s.mapValue.fields||{};if(F_(i)!==F_(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!Ls(i[o],a[o])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function Md(t,e){return(t.values||[]).find(n=>Ls(n,e))!==void 0}function ya(t,e){if(t===e)return 0;const n=ga(t),r=ga(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(s,i){const a=Bt(s.integerValue||s.doubleValue),o=Bt(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return B_(t.timestampValue,e.timestampValue);case 4:return B_(Ld(t),Ld(e));case 5:return kw(t.stringValue,e.stringValue);case 6:return function(s,i){const a=fi(s),o=fi(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const a=s.split("/"),o=i.split("/");for(let l=0;l<a.length&&l<o.length;l++){const c=He(a[l],o[l]);if(c!==0)return c}return He(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const a=He(Bt(s.latitude),Bt(i.latitude));return a!==0?a:He(Bt(s.longitude),Bt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return z_(t.arrayValue,e.arrayValue);case 10:return function(s,i){var a,o,l,c;const d=s.fields||{},h=i.fields||{},p=(a=d[sc])==null?void 0:a.arrayValue,f=(o=h[sc])==null?void 0:o.arrayValue,w=He(((l=p==null?void 0:p.values)==null?void 0:l.length)||0,((c=f==null?void 0:f.values)==null?void 0:c.length)||0);return w!==0?w:z_(p,f)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Ki.mapValue&&i===Ki.mapValue)return 0;if(s===Ki.mapValue)return 1;if(i===Ki.mapValue)return-1;const a=s.fields||{},o=Object.keys(a),l=i.fields||{},c=Object.keys(l);o.sort(),c.sort();for(let d=0;d<o.length&&d<c.length;++d){const h=kw(o[d],c[d]);if(h!==0)return h;const p=ya(a[o[d]],l[c[d]]);if(p!==0)return p}return He(o.length,c.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function B_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=hi(t),r=hi(e),s=He(n.seconds,r.seconds);return s!==0?s:He(n.nanos,r.nanos)}function z_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ya(n[s],r[s]);if(i)return i}return He(n.length,r.length)}function ic(t){return Pw(t)}function Pw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=hi(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return fi(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return ae.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=Pw(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const i of n)s?s=!1:r+=",",r+=`${i}:${Pw(e.fields[i])}`;return r+"}"}(t.mapValue):me(61005,{value:t})}function Ff(t){switch(ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ag(t);return e?16+Ff(e):16;case 5:return 2*t.stringValue.length;case 6:return fi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((r,s)=>r+Ff(s),0)}(t.arrayValue);case 10:case 11:return function(n){let r=0;return Ca(n.fields,(s,i)=>{r+=s.length+Ff(i)}),r}(t.mapValue);default:throw me(13486,{value:t})}}function Ud(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ow(t){return!!t&&"integerValue"in t}function jd(t){return!!t&&"arrayValue"in t}function $_(t){return!!t&&"nullValue"in t}function W_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vf(t){return!!t&&"mapValue"in t}function og(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)==null?void 0:e.fields)||{})[Kb])==null?void 0:n.stringValue)===Gb}function Gu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ca(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Gu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gu(t.arrayValue.values[n]);return e}return{...t}}function Z2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===X2}const eR={mapValue:{fields:{[Kb]:{stringValue:Gb},[sc]:{arrayValue:{}}}}};function N$(t){return"nullValue"in t?jf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ud(ma.empty(),ae.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?og(t)?eR:{mapValue:{}}:me(35942,{value:t})}function A$(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ud(ma.empty(),ae.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?eR:"mapValue"in t?og(t)?{mapValue:{}}:Ki:me(61959,{value:t})}function q_(t,e){const n=ya(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function H_(t,e){const n=ya(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(n)}setAll(e){let n=Wt.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=Gu(a):s.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ca(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Kn(Gu(this.value))}}function tR(t){const e=[];return Ca(t.fields,(n,r)=>{const s=new Wt([n]);if(Vf(r)){const i=tR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new hr(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tn{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new tn(e,0,Ae.min(),Ae.min(),Ae.min(),Kn.empty(),0)}static newFoundDocument(e,n,r,s){return new tn(e,1,n,Ae.min(),r,s,0)}static newNoDocument(e,n){return new tn(e,2,n,Ae.min(),Ae.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Ae.min(),Ae.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ac{constructor(e,n){this.position=e,this.inclusive=n}}function K_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(a.referenceValue),n.key):r=ya(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function G_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ls(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fd{constructor(e,n="asc"){this.field=e,this.dir=n}}function R$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nR{}class at extends nR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new P$(e,n,r):n==="array-contains"?new M$(e,r):n==="in"?new lR(e,r):n==="not-in"?new U$(e,r):n==="array-contains-any"?new j$(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O$(e,r):new L$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ya(n,this.value)):n!==null&&ga(this.value)===ga(n)&&this.matchesComparison(ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends nR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new wt(e,n)}matches(e){return oc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oc(t){return t.op==="and"}function Lw(t){return t.op==="or"}function Qb(t){return rR(t)&&oc(t)}function rR(t){for(const e of t.filters)if(e instanceof wt)return!1;return!0}function Mw(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+ic(t.value);if(Qb(t))return t.filters.map(e=>Mw(e)).join(",");{const e=t.filters.map(n=>Mw(n)).join(",");return`${t.op}(${e})`}}function sR(t,e){return t instanceof at?function(n,r){return r instanceof at&&n.op===r.op&&n.field.isEqual(r.field)&&Ls(n.value,r.value)}(t,e):t instanceof wt?function(n,r){return r instanceof wt&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,a)=>s&&sR(i,r.filters[a]),!0):!1}(t,e):void me(19439)}function iR(t,e){const n=t.filters.concat(e);return wt.create(n,t.op)}function aR(t){return t instanceof at?function(e){return`${e.field.canonicalString()} ${e.op} ${ic(e.value)}`}(t):t instanceof wt?function(e){return e.op.toString()+" {"+e.getFilters().map(aR).join(" ,")+"}"}(t):"Filter"}class P$ extends at{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class O$ extends at{constructor(e,n){super(e,"in",n),this.keys=oR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L$ extends at{constructor(e,n){super(e,"not-in",n),this.keys=oR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class M$ extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jd(n)&&Md(n.arrayValue,this.value)}}class lR extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Md(this.value.arrayValue,n)}}class U$ extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Md(this.value.arrayValue,n)}}class j$ extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Md(this.value.arrayValue,r))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F${constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}}function Uw(t,e=null,n=[],r=[],s=null,i=null,a=null){return new F$(t,e,n,r,s,i,a)}function ko(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ng(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ic(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ic(r)).join(",")),e.Te=n}return e.Te}function ih(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!G_(t.startAt,e.startAt)&&G_(t.endAt,e.endAt)}function $p(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Wp(t,e){return t.filters.filter(n=>n instanceof at&&n.field.isEqual(e))}function Q_(t,e,n){let r=jf,s=!0;for(const i of Wp(t,e)){let a=jf,o=!0;switch(i.op){case"<":case"<=":a=N$(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=jf}q_({value:r,inclusive:s},{value:a,inclusive:o})<0&&(r=a,s=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];q_({value:r,inclusive:s},{value:a,inclusive:n.inclusive})<0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}function J_(t,e,n){let r=Ki,s=!0;for(const i of Wp(t,e)){let a=Ki,o=!0;switch(i.op){case">=":case">":a=A$(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Ki}H_({value:r,inclusive:s},{value:a,inclusive:o})>0&&(r=a,s=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];H_({value:r,inclusive:s},{value:a,inclusive:n.inclusive})>0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Cc{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function cR(t,e,n,r,s,i,a,o){return new Cc(t,e,n,r,s,i,a,o)}function ah(t){return new Cc(t)}function Y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uR(t){return t.collectionGroup!==null}function Qu(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let i=new St(Wt.comparator);return s.filters.forEach(a=>{a.getFlattenedFilters().forEach(o=>{o.isInequality()&&(i=i.add(o.field))})}),i})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Fd(s,r))}),n.has(Wt.keyField().canonicalString())||e.Ie.push(new Fd(Wt.keyField(),r))}return e.Ie}function Nr(t){const e=ye(t);return e.Ee||(e.Ee=V$(e,Qu(t))),e.Ee}function V$(t,e){if(t.limitType==="F")return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Fd(s.field,i)});const n=t.endAt?new ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ac(t.startAt.position,t.startAt.inclusive):null;return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jw(t,e){const n=t.filters.concat([e]);return new Cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qp(t,e,n){return new Cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lg(t,e){return ih(Nr(t),Nr(e))&&t.limitType===e.limitType}function dR(t){return`${ko(Nr(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>aR(r)).join(", ")}]`),ng(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ic(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ic(r)).join(",")),`Target(${n})`}(Nr(t))}; limitType=${t.limitType})`}function oh(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ae.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of Qu(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,a){const o=K_(s,i,a);return s.inclusive?o<=0:o<0}(n.startAt,Qu(n),r)||n.endAt&&!function(s,i,a){const o=K_(s,i,a);return s.inclusive?o>=0:o>0}(n.endAt,Qu(n),r))}(t,e)}function hR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fR(t){return(e,n)=>{let r=!1;for(const s of Qu(t)){const i=B$(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function B$(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,i,a){const o=i.data.field(s),l=a.data.field(s);return o!==null&&l!==null?ya(o,l):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return H2(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z$=new Pt(ae.comparator);function xr(){return z$}const pR=new Pt(ae.comparator);function Tu(...t){let e=pR;for(const n of t)e=e.insert(n.key,n);return e}function mR(t){let e=pR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return Ju()}function gR(){return Ju()}function Ju(){return new vi(t=>t.toString(),(t,e)=>t.isEqual(e))}const $$=new Pt(ae.comparator),W$=new St(ae.comparator);function tt(...t){let e=W$;for(const n of t)e=e.add(n);return e}const q$=new St(He);function Jb(){return q$}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function yR(t){return{integerValue:""+t}}function H$(t,e){return L2(e)?yR(e):Yb(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cg{constructor(){this._=void 0}}function K$(t,e,n){return t instanceof lc?function(r,s){const i={fields:{[Q2]:{stringValue:G2},[Y2]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Hb(s)&&(s=ag(s)),s&&(i.fields[J2]=s),{mapValue:i}}(n,e):t instanceof Co?wR(t,e):t instanceof cc?bR(t,e):function(r,s){const i=vR(r,s),a=X_(i)+X_(r.Ae);return Ow(i)&&Ow(r.Ae)?yR(a):Yb(r.serializer,a)}(t,e)}function G$(t,e,n){return t instanceof Co?wR(t,e):t instanceof cc?bR(t,e):n}function vR(t,e){return t instanceof Vd?function(n){return Ow(n)||function(r){return!!r&&"doubleValue"in r}(n)}(e)?e:{integerValue:0}:null}class lc extends cg{}class Co extends cg{constructor(e){super(),this.elements=e}}function wR(t,e){const n=SR(e);for(const r of t.elements)n.some(s=>Ls(s,r))||n.push(r);return{arrayValue:{values:n}}}class cc extends cg{constructor(e){super(),this.elements=e}}function bR(t,e){let n=SR(e);for(const r of t.elements)n=n.filter(s=>!Ls(s,r));return{arrayValue:{values:n}}}class Vd extends cg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function X_(t){return Bt(t.integerValue||t.doubleValue)}function SR(t){return jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xb{constructor(e,n){this.field=e,this.transform=n}}function Q$(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Co&&r instanceof Co||n instanceof cc&&r instanceof cc?Xl(n.elements,r.elements,Ls):n instanceof Vd&&r instanceof Vd?Ls(n.Ae,r.Ae):n instanceof lc&&r instanceof lc}(t.transform,e.transform)}class J${constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ug{}function ER(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dg(t.key,Gn.none()):new Dc(t.key,t.data,Gn.none());{const n=t.data,r=Kn.empty();let s=new St(Wt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new wi(t.key,r,new hr(s.toArray()),Gn.none())}}function Y$(t,e,n){t instanceof Dc?function(r,s,i){const a=r.value.clone(),o=ex(r.fieldTransforms,s,i.transformResults);a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wi?function(r,s,i){if(!Bf(r.precondition,s))return void s.convertToUnknownDocument(i.version);const a=ex(r.fieldTransforms,s,i.transformResults),o=s.data;o.setAll(IR(r)),o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Yu(t,e,n,r){return t instanceof Dc?function(s,i,a,o){if(!Bf(s.precondition,i))return a;const l=s.value.clone(),c=tx(s.fieldTransforms,o,i);return l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof wi?function(s,i,a,o){if(!Bf(s.precondition,i))return a;const l=tx(s.fieldTransforms,o,i),c=i.data;return c.setAll(IR(s)),c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,i,a){return Bf(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,n)}function X$(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=vR(r.transform,s||null);i!=null&&(n===null&&(n=Kn.empty()),n.set(r.field,i))}return n||null}function Z_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Xl(n,r,(s,i)=>Q$(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dc extends ug{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wi extends ug{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function IR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ex(t,e,n){const r=new Map;Te(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,G$(a,o,n[s]))}return r}function tx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,K$(i,a,e))}return r}class dg extends ug{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _R extends ug{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Y$(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gR();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const l=ER(a,o);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),tt())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(n,r)=>Z_(n,r))&&Xl(this.baseMutations,e.baseMutations,(n,r)=>Z_(n,r))}}class eS{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return $$}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new eS(e,n,r,s)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let tS=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pn,ot;function e7(t){switch(t){case z.OK:return me(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function xR(t){if(t===void 0)return un("GRPC error has no .code"),z.UNKNOWN;switch(t){case pn.OK:return z.OK;case pn.CANCELLED:return z.CANCELLED;case pn.UNKNOWN:return z.UNKNOWN;case pn.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case pn.INTERNAL:return z.INTERNAL;case pn.UNAVAILABLE:return z.UNAVAILABLE;case pn.UNAUTHENTICATED:return z.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case pn.NOT_FOUND:return z.NOT_FOUND;case pn.ALREADY_EXISTS:return z.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return z.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case pn.ABORTED:return z.ABORTED;case pn.OUT_OF_RANGE:return z.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return z.UNIMPLEMENTED;case pn.DATA_LOSS:return z.DATA_LOSS;default:return me(39323,{code:t})}}(ot=pn||(pn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function t7(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const n7=new aa([4294967295,4294967295],0);function nx(t){const e=t7().encode(t),n=new y2;return n.update(e),new Uint8Array(n.digest())}function rx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new aa([n,r],0),new aa([s,i],0)]}class nS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ku(`Invalid padding: ${n}`);if(r<0)throw new ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ku(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ku(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=aa.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(aa.fromNumber(r)));return s.compare(n7)===1&&(s=new aa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nx(e),[r,s]=rx(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new nS(i,s,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=nx(e),[r,s]=rx(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ch.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lh(Ae.min(),s,new Pt(He),xr(),tt())}}class ch{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ch(r,n,tt(),tt(),tt())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class TR{constructor(e,n){this.targetId=e,this.Ce=n}}class kR{constructor(e,n,r=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sx{constructor(){this.ve=0,this.Fe=ix(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),n=tt(),r=tt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:me(38017,{changeType:i})}}),new ch(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ix()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class r7{constructor(e){this.Ge=e,this.ze=new Map,this.je=xr(),this.Je=tf(),this.He=tf(),this.Ye=new Pt(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if($p(i))if(r===0){const a=new ae(i.path);this.et(n,a,tn.newNoDocument(a,Ae.min()))}else Te(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,o;try{a=fi(r).toUint8Array()}catch(l){if(l instanceof K2)return pa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new nS(a,s,i)}catch(l){return pa(l instanceof ku?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const o=this.ot(a);if(o){if(i.current&&$p(o.target)){const l=new ae(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,tn.newNoDocument(l,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=tt();this.He.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new lh(e,n,this.Ye,this.je,r);return this.je=xr(),this.Je=tf(),this.He=tf(),this.Ye=new Pt(He),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new sx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function tf(){return new Pt(ae.comparator)}function ix(){return new Pt(ae.comparator)}const s7={asc:"ASCENDING",desc:"DESCENDING"},i7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a7={and:"AND",or:"OR"};class o7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fw(t,e){return t.useProto3Json||ng(e)?e:{value:e}}function uc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l7(t,e){return uc(t,e.toTimestamp())}function tr(t){return Te(!!t,49232),Ae.fromTimestamp(function(e){const n=hi(e);return new ct(n.seconds,n.nanos)}(t))}function rS(t,e){return Vw(t,e).canonicalString()}function Vw(t,e){const n=function(r){return new ft(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DR(t){const e=ft.fromString(t);return Te(jR(e),10190,{key:e.toString()}),e}function Hp(t,e){return rS(t.databaseId,e.path)}function vo(t,e){const n=DR(e);if(n.get(1)!==t.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(RR(n))}function NR(t,e){return rS(t.databaseId,e)}function AR(t){const e=DR(t);return e.length===4?ft.emptyPath():RR(e)}function Bw(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RR(t){return Te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ax(t,e,n){return{name:Hp(t,e),fields:n.value.mapValue.fields}}function c7(t,e,n){const r=vo(t,e.name),s=tr(e.updateTime),i=e.createTime?tr(e.createTime):Ae.min(),a=new Kn({mapValue:{fields:e.fields}}),o=tn.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function u7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:me(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,c){return l.useProto3Json?(Te(c===void 0||typeof c=="string",58123),rn.fromBase64String(c||"")):(Te(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),rn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(l){const c=l.code===void 0?z.UNKNOWN:xR(l.code);return new te(c,l.message||"")}(a);n=new kR(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vo(t,r.document.name),i=tr(r.document.updateTime),a=r.document.createTime?tr(r.document.createTime):Ae.min(),o=new Kn({mapValue:{fields:r.document.fields}}),l=tn.newFoundDocument(s,i,a,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new zf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vo(t,r.document),i=r.readTime?tr(r.readTime):Ae.min(),a=tn.newNoDocument(s,i),o=r.removedTargetIds||[];n=new zf([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vo(t,r.document),i=r.removedTargetIds||[];n=new zf([],i,s,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new Z$(s,i),o=r.targetId;n=new TR(o,a)}}return n}function Kp(t,e){let n;if(e instanceof Dc)n={update:ax(t,e.key,e.value)};else if(e instanceof dg)n={delete:Hp(t,e.key)};else if(e instanceof wi)n={update:ax(t,e.key,e.data),updateMask:g7(e.fieldMask)};else{if(!(e instanceof _R))return me(16599,{Vt:e.type});n={verify:Hp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const a=i.transform;if(a instanceof lc)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Co)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cc)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vd)return{fieldPath:i.field.canonicalString(),increment:a.Ae};throw me(20930,{transform:i.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:l7(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me(27497)}(t,e.precondition)),n}function zw(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Gn.updateTime(tr(s.updateTime)):s.exists!==void 0?Gn.exists(s.exists):Gn.none()}(e.currentDocument):Gn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,a){let o=null;if("setToServerValue"in a)Te(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),o=new lc;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];o=new Co(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];o=new cc(c)}else"increment"in a?o=new Vd(i,a.increment):me(16584,{proto:a});const l=Wt.fromServerFormat(a.fieldPath);return new Xb(l,o)}(t,s)):[];if(e.update){e.update.name;const s=vo(t,e.update.name),i=new Kn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(o){const l=o.fieldPaths||[];return new hr(l.map(c=>Wt.fromServerFormat(c)))}(e.updateMask);return new wi(s,i,a,n,r)}return new Dc(s,i,n,r)}if(e.delete){const s=vo(t,e.delete);return new dg(s,n)}if(e.verify){const s=vo(t,e.verify);return new _R(s,n)}return me(1463,{proto:e})}function d7(t,e){return t&&t.length>0?(Te(e!==void 0,14353),t.map(n=>function(r,s){let i=r.updateTime?tr(r.updateTime):tr(s);return i.isEqual(Ae.min())&&(i=tr(s)),new J$(i,r.transformResults||[])}(n,e))):[]}function PR(t,e){return{documents:[NR(t,e.path)]}}function OR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NR(t,s);const i=function(l){if(l.length!==0)return UR(wt.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:hl(d.field),direction:f7(d.dir)}}(c))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Fw(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:s}}function LR(t){let e=AR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(d){const h=MR(d);return h instanceof wt&&Qb(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(h=>function(p){return new Fd(fl(p.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let o=null;n.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,ng(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,p=d.values||[];return new ac(p,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const h=!d.before,p=d.values||[];return new ac(p,h)}(n.endAt)),cR(e,s,a,i,o,"F",l,c)}function h7(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MR(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=fl(e.unaryFilter.field);return at.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=fl(e.unaryFilter.field);return at.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fl(e.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=fl(e.unaryFilter.field);return at.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(e){return at.create(fl(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return wt.create(e.compositeFilter.filters.map(n=>MR(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(e.compositeFilter.op))}(t):me(30097,{filter:t})}function f7(t){return s7[t]}function p7(t){return i7[t]}function m7(t){return a7[t]}function hl(t){return{fieldPath:t.canonicalString()}}function fl(t){return Wt.fromServerFormat(t.fieldPath)}function UR(t){return t instanceof at?function(e){if(e.op==="=="){if(W_(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NAN"}};if($_(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(W_(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NOT_NAN"}};if($_(e.value))return{unaryFilter:{field:hl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(e.field),op:p7(e.op),value:e.value}}}(t):t instanceof wt?function(e){const n=e.getFilters().map(r=>UR(r));return n.length===1?n[0]:{compositeFilter:{op:m7(e.op),filters:n}}}(t):me(54877,{filter:t})}function g7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ys{constructor(e,n,r,s,i=Ae.min(),a=Ae.min(),o=rn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FR{constructor(e){this.yt=e}}function y7(t,e){let n;if(e.document)n=c7(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),s=No(e.noDocument.readTime);n=tn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const r=ae.fromSegments(e.unknownDocument.path),s=No(e.unknownDocument.version);n=tn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(r){const s=new ct(r[0],r[1]);return Ae.fromTimestamp(s)}(e.readTime)),n}function ox(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Gp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:Hp(s,i.key),fields:i.data.value.mapValue.fields,updateTime:uc(s,i.version.toTimestamp()),createTime:uc(s,i.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Do(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Do(e.version)}}return r}function Gp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Do(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function No(t){const e=new ct(t.seconds,t.nanoseconds);return Ae.fromTimestamp(e)}function Ja(t,e){const n=(e.baseMutations||[]).map(i=>zw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>zw(t.yt,i)),s=ct.fromMillis(e.localWriteTimeMs);return new Zb(e.batchId,s,n,r)}function Cu(t){const e=No(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?No(t.lastLimboFreeSnapshotVersion):Ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const i=s.documents.length;return Te(i===1,1966,{count:i}),Nr(ah(AR(s.documents[0])))}(t.query):function(s){return Nr(LR(s))}(t.query),new Ys(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,rn.fromBase64String(t.resumeToken))}function VR(t,e){const n=Do(e.snapshotVersion),r=Do(e.lastLimboFreeSnapshotVersion);let s;s=$p(e.target)?PR(t.yt,e.target):OR(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ko(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function BR(t){const e=LR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qp(e,e.limit,"L"):e}function Oy(t,e){return new tS(e.largestBatchId,zw(t.yt,e.overlayMutation))}function lx(t,e){const n=e.path.lastSegment();return[t,Qn(e.path.popLast()),n]}function cx(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Do(r.readTime),documentKey:Qn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class v7{getBundleMetadata(e,n){return ux(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:No(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return ux(e).put(function(r){return{bundleId:r.id,createTime:Do(tr(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return dx(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:BR(s.bundledQuery),readTime:No(s.readTime)}}(r)})}saveNamedQuery(e,n){return dx(e).put(function(r){return{name:r.name,readTime:Do(tr(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function ux(t){return Sn(t,rg)}function dx(t){return Sn(t,sg)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new hg(e,r)}getOverlay(e,n){return hu(e).get(lx(this.userId,n)).next(r=>r?Oy(this.serializer,r):null)}getOverlays(e,n){const r=ks();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,a)=>{const o=new tS(n,a);s.push(this.St(e,o))}),j.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(a=>s.add(Qn(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);i.push(hu(e).Z(Aw,o))}),j.waitFor(i)}getOverlaysForCollection(e,n,r){const s=ks(),i=Qn(n),a=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return hu(e).J(Aw,a).next(o=>{for(const l of o){const c=Oy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=ks();let a;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return hu(e).ee({index:B2,range:o},(l,c,d)=>{const h=Oy(this.serializer,c);i.size()<s||h.largestBatchId===a?(i.set(h.getKey(),h),a=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return hu(e).put(function(r,s,i){const[a,o,l]=lx(s,i.mutation.key);return{userId:s,collectionPath:o,documentId:l,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Kp(r.yt,i.mutation)}}(this.serializer,this.userId,n))}}function hu(t){return Sn(t,ig)}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class w7{bt(e){return Sn(e,Wb)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?rn.fromUint8Array(r):rn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ya{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Bt(e.integerValue));else if("doubleValue"in e){const r=Bt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ad(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=hi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(fi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Z2(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):og(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):me(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var r,s;const i=e.fields||{};this.Ft(n,53);const a=sc,o=((s=(r=i[a].arrayValue)==null?void 0:r.values)==null?void 0:s.length)||0;this.Ft(n,15),n.Mt(Bt(o)),this.Ot(a,n),this.Ct(i[a],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ae.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ya.Kt=new Ya;/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law | agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nl=255;function b7(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function hx(t){const e=64-function(n){let r=0;for(let s=0;s<8;++s){const i=b7(255&n[s]);if(r+=i,i!==8)break}return r}(t);return Math.ceil(e/8)}class S7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=hx(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=hx(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(nl),this.sn(255)}_n(){this.an(nl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===nl?(this.sn(nl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===nl?(this.an(nl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class E7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class I7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class fu{constructor(){this.cn=new S7,this.ln=new E7(this.cn),this.hn=new I7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xa{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Xa(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:$f(this.En),directionalValue:$f(this.dn),orderedDocumentKey:$f(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Pi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=fx(t.En,e.En),n!==0?n:(n=fx(t.dn,e.dn),n!==0?n:ae.comparator(t.In,e.In)))}function fx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function $f(t){return jA()?function(e){let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n}(t):t}function px(t){return typeof t!="string"?t:function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(t)}class mx{constructor(e){this.mn=new St((n,r)=>Wt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Cw(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ha(e);let s=new Set,i=0,a=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!s.has(o.field.canonicalString())){const l=r[i];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++i}for(;i<r.length;++i){const o=r[i];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new St(Wt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Lf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Lf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Lf(r.field,r.dir==="asc"?0:1)));return new jp(jp.UNKNOWN_ID,this.collectionId,n,Nd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zR(t){var e,n;if(Te(t instanceof at||t instanceof wt,20012),t instanceof at){if(t instanceof lR){const s=((n=(e=t.value.arrayValue)==null?void 0:e.values)==null?void 0:n.map(i=>at.create(t.field,"==",i)))||[];return wt.create(s,"or")}return t}const r=t.filters.map(s=>zR(s));return wt.create(r,t.op)}function _7(t){if(t.getFilters().length===0)return[];const e=qw(zR(t));return Te($R(e),7391),$w(e)||Ww(e)?[e]:e.getFilters()}function $w(t){return t instanceof at}function Ww(t){return t instanceof wt&&Qb(t)}function $R(t){return $w(t)||Ww(t)||function(e){if(e instanceof wt&&Lw(e)){for(const n of e.getFilters())if(!$w(n)&&!Ww(n))return!1;return!0}return!1}(t)}function qw(t){if(Te(t instanceof at||t instanceof wt,34018),t instanceof at)return t;if(t.filters.length===1)return qw(t.filters[0]);const e=t.filters.map(r=>qw(r));let n=wt.create(e,t.op);return n=Qp(n),$R(n)?n:(Te(n instanceof wt,64498),Te(oc(n),40251),Te(n.filters.length>1,57927),n.filters.reduce((r,s)=>sS(r,s)))}function sS(t,e){let n;return Te(t instanceof at||t instanceof wt,38388),Te(e instanceof at||e instanceof wt,25473),n=t instanceof at?e instanceof at?function(r,s){return wt.create([r,s],"and")}(t,e):gx(t,e):e instanceof at?gx(e,t):function(r,s){if(Te(r.filters.length>0&&s.filters.length>0,48005),oc(r)&&oc(s))return iR(r,s.getFilters());const i=Lw(r)?r:s,a=Lw(r)?s:r,o=i.filters.map(l=>sS(l,a));return wt.create(o,"or")}(t,e),Qp(n)}function gx(t,e){if(oc(e))return iR(e,t.getFilters());{const n=e.filters.map(r=>sS(t,r));return wt.create(n,"or")}}function Qp(t){if(Te(t instanceof at||t instanceof wt,11850),t instanceof at)return t;const e=t.getFilters();if(e.length===1)return Qp(e[0]);if(rR(t))return t;const n=e.map(s=>Qp(s)),r=[];return n.forEach(s=>{s instanceof at?r.push(s):s instanceof wt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:wt.create(r,t.op)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class x7{constructor(){this.Cn=new iS}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Rr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class iS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(ft.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(ft.comparator)).toArray()}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yx="IndexedDbIndexManager",nf=new Uint8Array(0);class T7{constructor(e,n){this.databaseId=n,this.vn=new iS,this.Fn=new vi(r=>ko(r),(r,s)=>ih(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:Qn(s)};return vx(e).put(i)}return j.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[T2(n),""],!1,!0);return vx(e).J(s).next(i=>{for(const a of i){if(a.collectionId!==n)break;r.push(Ts(a.parent))}return r})}addFieldIndex(e,n){const r=pu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const a=sl(e);return i.next(o=>{a.put(cx(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=pu(e),s=sl(e),i=rl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=pu(e),r=rl(e),s=sl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return j.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new mx(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=rl(e);let s=!0;const i=new Map;return j.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=tt();const o=[];return j.forEach(i,(l,c)=>{Y(yx,`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`}(l)} to execute ${ko(n)}`);const d=function(y,E){const C=Cw(E);if(C===void 0)return null;for(const O of Wp(y,C.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),h=function(y,E){const C=new Map;for(const O of Ha(E))for(const L of Wp(y,O.fieldPath))switch(L.op){case"==":case"in":C.set(O.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return C.set(O.fieldPath.canonicalString(),L.value),Array.from(C.values())}return null}(c,l),p=function(y,E){const C=[];let O=!0;for(const L of Ha(E)){const x=L.kind===0?Q_(y,L.fieldPath,y.startAt):J_(y,L.fieldPath,y.startAt);C.push(x.value),O&&(O=x.inclusive)}return new ac(C,O)}(c,l),f=function(y,E){const C=[];let O=!0;for(const L of Ha(E)){const x=L.kind===0?J_(y,L.fieldPath,y.endAt):Q_(y,L.fieldPath,y.endAt);C.push(x.value),O&&(O=x.inclusive)}return new ac(C,O)}(c,l),w=this.On(l,c,p),m=this.On(l,c,f),b=this.Nn(l,c,h),v=this.Bn(l.indexId,d,w,p.inclusive,m,f.inclusive,b);return j.forEach(v,y=>r.Y(y,n.limit).next(E=>{E.forEach(C=>{const O=ae.fromSegments(C.documentKey);a.has(O)||(a=a.add(O),o.push(O))})}))}).next(()=>o)}return j.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=_7(wt.create(e.filters,"and")).map(r=>Uw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,a,o){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/c]):nf,f=this.kn(e,p,r[h%c],s),w=this.qn(e,p,i[h%c],a),m=o.map(b=>this.kn(e,p,b,!0));d.push(...this.createRange(f,w,m))}return d}kn(e,n,r,s){const i=new Xa(e,ae.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Xa(e,ae.empty(),n,r);return s?i.An():i}xn(e,n){const r=new mx(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let r=2;const s=this.Mn(n);return j.forEach(s,i=>this.xn(e,i).next(a=>{a?r!==0&&a.fields.length<function(o){let l=new St(Wt.comparator),c=!1;for(const d of o.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:l=l.add(h.field));for(const d of o.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(c?1:0)}(i)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new fu;for(const s of Ha(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const a=r.Pn(s.kind);Ya.Kt.Dt(i,a)}return r.un()}Ln(e){const n=new fu;return Ya.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new fu;return Ya.Kt.Dt(Ud(this.databaseId,n),r.Pn(function(s){const i=Ha(s);return i.length===0?0:i[i.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new fu);let i=0;for(const a of Ha(e)){const o=r[i++];for(const l of s)if(this.Un(n,a.fieldPath)&&jd(o))s=this.Kn(s,a,o);else{const c=l.Pn(a.kind);Ya.Kt.Dt(o,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const a of r.arrayValue.values||[])for(const o of s){const l=new fu;l.seed(o.un()),Ya.Kt.Dt(a,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=pu(e),s=sl(e);return(n?r.J(Nw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const a=[];return j.forEach(i,o=>s.get([o.indexId,this.uid]).next(l=>{a.push(function(c,d){const h=d?new Nd(d.sequenceNumber,new Rr(No(d.readTime),new ae(Ts(d.documentKey)),d.largestBatchId)):Nd.empty(),p=c.fields.map(([f,w])=>new Lf(Wt.fromServerFormat(f),w));return new jp(c.indexId,c.collectionGroup,p,h)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:He(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=pu(e),i=sl(e);return this.Gn(e).next(a=>s.J(Nw,IDBKeyRange.bound(n,n)).next(o=>j.forEach(o,l=>i.put(cx(l.indexId,this.uid,a,r)))))}updateIndexEntries(e,n){const r=new Map;return j.forEach(n,(s,i)=>{const a=r.get(s.collectionGroup);return(a?j.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(r.set(s.collectionGroup,o),j.forEach(o,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?j.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return rl(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return rl(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=rl(e);let i=new St(Pi);return s.ee({index:V2,range:IDBKeyRange.only([r.indexId,this.uid,$f(this.$n(r,n))])},(a,o)=>{i=i.add(new Xa(r.indexId,n,px(o.arrayValue),px(o.directionalValue)))}).next(()=>i)}jn(e,n){let r=new St(Pi);const s=this.Qn(n,e);if(s==null)return r;const i=Cw(n);if(i!=null){const a=e.data.field(i.fieldPath);if(jd(a))for(const o of a.arrayValue.values||[])r=r.add(new Xa(n.indexId,e.key,this.Ln(o),s))}else r=r.add(new Xa(n.indexId,e.key,nf,s));return r}Jn(e,n,r,s,i){Y(yx,"Updating index entries for document '%s'",n.key);const a=[];return function(o,l,c,d,h){const p=o.getIterator(),f=l.getIterator();let w=tl(p),m=tl(f);for(;w||m;){let b=!1,v=!1;if(w&&m){const y=c(w,m);y<0?v=!0:y>0&&(b=!0)}else w!=null?v=!0:b=!0;b?(d(m),m=tl(f)):v?(h(w),w=tl(p)):(w=tl(p),m=tl(f))}}(s,i,Pi,o=>{a.push(this.Hn(e,n,r,o))},o=>{a.push(this.Yn(e,n,r,o))}),j.waitFor(a)}Gn(e){let n=1;return sl(e).ee({index:F2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((a,o)=>Pi(a,o)).filter((a,o,l)=>!o||Pi(a,l[o-1])!==0);const s=[];s.push(e);for(const a of r){const o=Pi(a,e),l=Pi(a,n);if(o===0)s[0]=e.An();else if(o>0&&l<0)s.push(a),s.push(a.An());else if(l>0)break}s.push(n);const i=[];for(let a=0;a<s.length;a+=2){if(this.Zn(s[a],s[a+1]))return[];const o=s[a].Vn(this.uid,nf,ae.empty()),l=s[a+1].Vn(this.uid,nf,ae.empty());i.push(IDBKeyRange.bound(o,l))}return i}Zn(e,n){return Pi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(wx)}getMinOffset(e,n){return j.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||me(44426))).next(wx)}}function vx(t){return Sn(t,Od)}function rl(t){return Sn(t,Ku)}function pu(t){return Sn(t,$b)}function sl(t){return Sn(t,Hu)}function wx(t){Te(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Vb(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Rr(e.readTime,e.documentKey,n)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WR=41943040;class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qR(t,e,n){const r=t.store(Jr),s=t.store(ec),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.ee({range:a},(d,h,p)=>(o++,p.delete()));i.push(l.next(()=>{Te(o===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=M2(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return j.waitFor(i).next(()=>c)}function Jp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw me(14731);e=t.noDocument}return JSON.stringify(e).length}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(WR,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);class fg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Te(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new fg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).ee({index:io,range:r},(s,i,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=pl(e),a=Oi(e);return a.add({}).next(o=>{Te(typeof o=="number",49019);const l=new Zb(o,n,r,s),c=function(p,f,w){const m=w.baseMutations.map(v=>Kp(p.yt,v)),b=w.mutations.map(v=>Kp(p.yt,v));return{userId:f,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:m,mutations:b}}(this.serializer,this.userId,l),d=[];let h=new St((p,f)=>He(p.canonicalString(),f.canonicalString()));for(const p of s){const f=M2(this.userId,p.key.path,o);h=h.add(p.key.path.popLast()),d.push(a.put(c)),d.push(i.put(f,s$))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),j.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Oi(e).get(n).next(r=>r?(Te(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ja(this.serializer,r)):null)}er(e,n){return this.Xn[n]?j.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Oi(e).ee({index:io,range:s},(a,o,l)=>{o.userId===this.userId&&(Te(o.batchId>=r,47524,{tr:r}),i=Ja(this.serializer,o)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=go;return Oi(e).ee({index:io,range:n,reverse:!0},(s,i,a)=>{r=i.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,go],[this.userId,Number.POSITIVE_INFINITY]);return Oi(e).J(io,n).next(r=>r.map(s=>Ja(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Mf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return pl(e).ee({range:s},(a,o,l)=>{const[c,d,h]=a,p=Ts(d);if(c===this.userId&&n.path.isEqual(p))return Oi(e).get(h).next(f=>{if(!f)throw me(61480,{nr:a,batchId:h});Te(f.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:f.userId,batchId:h}),i.push(Ja(this.serializer,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(He);const s=[];return n.forEach(i=>{const a=Mf(this.userId,i.path),o=IDBKeyRange.lowerBound(a),l=pl(e).ee({range:o},(c,d,h)=>{const[p,f,w]=c,m=Ts(f);p===this.userId&&i.path.isEqual(m)?r=r.add(w):h.done()});s.push(l)}),j.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Mf(this.userId,r),a=IDBKeyRange.lowerBound(i);let o=new St(He);return pl(e).ee({range:a},(l,c,d)=>{const[h,p,f]=l,w=Ts(p);h===this.userId&&r.isPrefixOf(w)?w.length===s&&(o=o.add(f)):d.done()}).next(()=>this.rr(e,o))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Oi(e).get(i).next(a=>{if(a===null)throw me(35274,{batchId:i});Te(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:i}),r.push(Ja(this.serializer,a))}))}),j.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return qR(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),j.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return j.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return pl(e).ee({range:r},(i,a,o)=>{if(i[0]===this.userId){const l=Ts(i[1]);s.push(l)}else o.done()}).next(()=>{Te(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return HR(e,this.userId,n)}_r(e){return KR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:go,lastStreamToken:""})}}function HR(t,e,n){const r=Mf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return pl(t).ee({range:i,X:!0},(o,l,c)=>{const[d,h,p]=o;d===e&&h===s&&(a=!0),c.done()}).next(()=>a)}function Oi(t){return Sn(t,Jr)}function pl(t){return Sn(t,ec)}function KR(t){return Sn(t,Rd)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ao(0)}static cr(){return new Ao(-1)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Ao(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Ae.fromTimestamp(new ct(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>il(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Te(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return il(e).ee((a,o)=>{const l=Cu(o);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>j.waitFor(i)).next(()=>s)}forEachTarget(e,n){return il(e).ee((r,s)=>{const i=Cu(s);n(i)})}lr(e){return Sx(e).get(Bp).next(n=>(Te(n!==null,2888),n))}hr(e,n){return Sx(e).put(Bp,n)}Pr(e,n){return il(e).put(VR(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ko(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return il(e).ee({range:s,index:j2},(a,o,l)=>{const c=Cu(o);ih(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=zi(e);return n.forEach(a=>{const o=Qn(a.path);s.push(i.put({targetId:r,path:o})),s.push(this.referenceDelegate.addReference(e,r,a))}),j.waitFor(s)}removeMatchingKeys(e,n,r){const s=zi(e);return j.forEach(n,i=>{const a=Qn(i.path);return j.waitFor([s.delete([r,a]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=zi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=zi(e);let i=tt();return s.ee({range:r,X:!0},(a,o,l)=>{const c=Ts(a[1]),d=new ae(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=Qn(n.path),s=IDBKeyRange.bound([r],[T2(r)],!1,!0);let i=0;return zi(e).ee({index:zb,X:!0,range:s},([a,o],l,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return il(e).get(n).next(r=>r?Cu(r):null)}}function il(t){return Sn(t,tc)}function Sx(t){return Sn(t,yo)}function zi(t){return Sn(t,nc)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ex="LruGarbageCollector",GR=1048576;function Ix([t,e],[n,r]){const s=He(t,n);return s===0?He(e,r):s}class C7{constructor(e){this.Ir=e,this.buffer=new St(Ix),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ix(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(Ex,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ka(n)?Y(Ex,"Ignoring IndexedDB error during garbage collection: ",n):await Ta(n)}await this.Vr(3e5)})}}class D7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(dr.ce);const r=new C7(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(bx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,o,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ul()<=st.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function JR(t,e){return new D7(t,e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class N7{constructor(e,n){this.db=e,this.garbageCollector=JR(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return rf(e,r)}removeReference(e,n,r){return rf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return rf(e,n)}br(e,n){return function(r,s){let i=!1;return KR(r).te(a=>HR(r,a,s).next(o=>(o&&(i=!0),j.resolve(!o)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return i++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Ae.min()),zi(e).delete(function(d){return[0,Qn(d.path)]}(a))))});s.push(l)}}).next(()=>j.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return rf(e,n)}Sr(e,n){const r=zi(e);let s,i=dr.ce;return r.ee({index:zb},([a,o],{path:l,sequenceNumber:c})=>{a===0?(i!==dr.ce&&n(new ae(Ts(s)),i),i=c,s=l):i=dr.ce}).next(()=>{i!==dr.ce&&n(new ae(Ts(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rf(t,e){return zi(t).put(function(n,r){return{targetId:0,path:Qn(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YR{constructor(){this.changes=new vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class A7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return za(e).put(r)}removeEntry(e,n,r){return za(e).delete(function(s,i){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Gp(i),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=tn.newInvalidDocument(n);return za(e).ee({index:Uf,range:IDBKeyRange.only(mu(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:tn.newInvalidDocument(n)};return za(e).ee({index:Uf,range:IDBKeyRange.only(mu(n))},(s,i)=>{r={document:this.Cr(n,i),size:Jp(i)}}).next(()=>r)}getEntries(e,n){let r=xr();return this.Fr(e,n,(s,i)=>{const a=this.Cr(s,i);r=r.insert(s,a)}).next(()=>r)}Mr(e,n){let r=xr(),s=new Pt(ae.comparator);return this.Fr(e,n,(i,a)=>{const o=this.Cr(i,a);r=r.insert(i,o),s=s.insert(i,Jp(a))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return j.resolve();let s=new St(Tx);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(mu(s.first()),mu(s.last())),a=s.getIterator();let o=a.getNext();return za(e).ee({index:Uf,range:i},(l,c,d)=>{const h=ae.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Tx(o,h)<0;)r(o,null),o=a.getNext();o&&o.isEqual(h)&&(r(o,c),o=a.hasNext()?a.getNext():null),o?d.j(mu(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),Gp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return za(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=xr();for(const h of c){const p=this.Cr(ae.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(oh(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=xr();const a=xx(n,r),o=xx(n,Rr.max());return za(e).ee({index:U2,range:IDBKeyRange.bound(a,o,!0)},(l,c,d)=>{const h=this.Cr(ae.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new R7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return _x(e).get(Dw).next(n=>(Te(!!n,20021),n))}Dr(e,n){return _x(e).put(Dw,n)}Cr(e,n){if(n){const r=y7(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ae.min())))return r}return tn.newInvalidDocument(e)}}function XR(t){return new A7(t)}class R7 extends YR{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new vi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new St((i,a)=>He(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const l=ox(this.Nr.serializer,a);s=s.add(i.path.popLast());const c=Jp(l);r+=c-o.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=o.size,this.trackRemovals){const l=ox(this.Nr.serializer,a.convertToNoDocument(Ae.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),j.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,a)=>{this.Br.set(i,{size:a,readTime:r.get(i).readTime})}),r))}}function _x(t){return Sn(t,Pd)}function za(t){return Sn(t,Vp)}function mu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xx(t,e){const n=e.documentKey.path.toArray();return[t,Gp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Tx(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=He(n[i],r[i]),s)return s;return s=He(n.length,r.length),s||(s=He(n[n.length-2],r[r.length-2]),s||He(n[n.length-1],r[r.length-1]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class P7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Yu(r.mutation,s,hr.empty(),ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,tt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=tt()){const s=ks();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Tu();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,tt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,s){let i=xr();const a=Ju(),o=function(){return Ju()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof wi)?i=i.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),Yu(d.mutation,c,d.mutation.getFieldMask(),ct.now())):a.set(c.key,hr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>o.set(c,new P7(d,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const r=Ju();let s=new Pt((a,o)=>a-o),i=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||hr.empty();d=o.applyToLocalView(c,d),r.set(l,d);const h=(s.get(o.batchId)||tt()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,d=l.value,h=gR();d.forEach(p=>{if(!i.has(p)){const f=ER(n.get(p),r.get(p));f!==null&&h.set(p,f),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return j.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(ks());let o=Zl,l=i;return a.next(c=>j.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),i.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,tt())).next(d=>({batchId:o,changes:mR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=Tu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Tu();return this.indexManager.getCollectionParents(e,i).next(o=>j.forEach(o,l=>{const c=function(d,h){return new Cc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{a=a.insert(h,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((l,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,tn.newInvalidDocument(d)))});let o=Tu();return a.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Yu(d.mutation,c,hr.empty(),ct.now()),oh(n,c)&&(o=o.insert(l,c))}),o})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class O7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:tr(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:BR(r.bundledQuery),readTime:tr(r.readTime)}}(n)),j.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L7{constructor(){this.overlays=new Pt(ae.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ks();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=ks(),i=n.length+1,a=new ae(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pt((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ks(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=ks(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return j.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new tS(n,r));let i=this.qr.get(n);i===void 0&&(i=tt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class M7{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aS{constructor(){this.Qr=new St(_n.$r),this.Ur=new St(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new _n(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new _n(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ae(new ft([])),r=new _n(n,e),s=new _n(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new ft([])),r=new _n(n,e),s=new _n(n,e+1);let i=tt();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new _n(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class U7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(_n.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Zb(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.Zr=this.Zr.add(new _n(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?go:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _n(n,0),s=new _n(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const o=this.Xr(a.Yr);i.push(o)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(He);return n.forEach(s=>{const i=new _n(s,0),a=new _n(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],o=>{r=r.add(o.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const a=new _n(new ae(i),0);let o=new St(He);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.Yr)),!0)},a),j.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,s=>{const i=new _n(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new _n(n,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class j7{constructor(e){this.ri=e,this.docs=function(){return new Pt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=xr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():tn.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=xr();const a=n.path,o=new ae(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Vb(A2(d),r)<=0||(s.has(d.key)||oh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){me(9500)}ii(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F7(this)}getSize(e){return j.resolve(this.size)}}class F7 extends YR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class V7{constructor(e){this.persistence=e,this.si=new vi(n=>ko(n),ih),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new aS,this.targetCount=0,this.ai=Ao.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oS{constructor(e,n){this.ui={},this.overlays={},this.ci=new dr(0),this.li=!1,this.li=!0,this.hi=new M7,this.referenceDelegate=e(this),this.Pi=new V7(this),this.indexManager=new x7,this.remoteDocumentCache=function(r){return new j7(r)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new FR(n),this.Ii=new O7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new U7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new B7(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class B7 extends P2{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Ri=new aS,this.Vi=null}static mi(e){return new pg(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const s=ae.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yp{constructor(e,n){this.persistence=e,this.pi=new vi(r=>Qn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=JR(this,n)}static mi(e,n){return new Yp(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?j.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(o=>{o||(r++,i.removeEntry(a,Ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ff(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class z7{constructor(e){this.serializer=e}k(e,n,r,s){const i=new tg("createOrUpgrade",n);r<1&&s>=1&&(function(o){o.createObjectStore(sh)}(e),function(o){o.createObjectStore(Rd,{keyPath:r$}),o.createObjectStore(Jr,{keyPath:U_,autoIncrement:!0}).createIndex(io,j_,{unique:!0}),o.createObjectStore(ec)}(e),kx(e),function(o){o.createObjectStore(Ka)}(e));let a=j.resolve();return r<3&&s>=3&&(r!==0&&(function(o){o.deleteObjectStore(nc),o.deleteObjectStore(tc),o.deleteObjectStore(yo)}(e),kx(e)),a=a.next(()=>function(o){const l=o.store(yo),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return l.put(Bp,c)}(i))),r<4&&s>=4&&(r!==0&&(a=a.next(()=>function(o,l){return l.store(Jr).J().next(c=>{o.deleteObjectStore(Jr),o.createObjectStore(Jr,{keyPath:U_,autoIncrement:!0}).createIndex(io,j_,{unique:!0});const d=l.store(Jr),h=c.map(p=>d.put(p));return j.waitFor(h)})}(e,i))),a=a.next(()=>{(function(o){o.createObjectStore(rc,{keyPath:h$})})(e)})),r<5&&s>=5&&(a=a.next(()=>this.yi(i))),r<6&&s>=6&&(a=a.next(()=>(function(o){o.createObjectStore(Pd)}(e),this.wi(i)))),r<7&&s>=7&&(a=a.next(()=>this.Si(i))),r<8&&s>=8&&(a=a.next(()=>this.bi(e,i))),r<9&&s>=9&&(a=a.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(a=a.next(()=>this.Di(i))),r<11&&s>=11&&(a=a.next(()=>{(function(o){o.createObjectStore(rg,{keyPath:f$})})(e),function(o){o.createObjectStore(sg,{keyPath:p$})}(e)})),r<12&&s>=12&&(a=a.next(()=>{(function(o){const l=o.createObjectStore(ig,{keyPath:S$});l.createIndex(Aw,E$,{unique:!1}),l.createIndex(B2,I$,{unique:!1})})(e)})),r<13&&s>=13&&(a=a.next(()=>function(o){const l=o.createObjectStore(Vp,{keyPath:i$});l.createIndex(Uf,a$),l.createIndex(U2,o$)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(Ka))),r<14&&s>=14&&(a=a.next(()=>this.Fi(e,i))),r<15&&s>=15&&(a=a.next(()=>function(o){o.createObjectStore($b,{keyPath:m$,autoIncrement:!0}).createIndex(Nw,g$,{unique:!1}),o.createObjectStore(Hu,{keyPath:y$}).createIndex(F2,v$,{unique:!1}),o.createObjectStore(Ku,{keyPath:w$}).createIndex(V2,b$,{unique:!1})}(e))),r<16&&s>=16&&(a=a.next(()=>{n.objectStore(Hu).clear()}).next(()=>{n.objectStore(Ku).clear()})),r<17&&s>=17&&(a=a.next(()=>{(function(o){o.createObjectStore(Wb,{keyPath:_$})})(e)})),r<18&&s>=18&&jA()&&(a=a.next(()=>{n.objectStore(Hu).clear()}).next(()=>{n.objectStore(Ku).clear()})),a}wi(e){let n=0;return e.store(Ka).ee((r,s)=>{n+=Jp(s)}).next(()=>{const r={byteSize:n};return e.store(Pd).put(Dw,r)})}yi(e){const n=e.store(Rd),r=e.store(Jr);return n.J().next(s=>j.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,go],[i.userId,i.lastAcknowledgedBatchId]);return r.J(io,a).next(o=>j.forEach(o,l=>{Te(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ja(this.serializer,l);return qR(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(nc),r=e.store(Ka);return e.store(yo).get(Bp).next(s=>{const i=[];return r.ee((a,o)=>{const l=new ft(a),c=function(d){return[0,Qn(d)]}(l);i.push(n.get(c).next(d=>d?j.resolve():(h=>n.put({targetId:0,path:Qn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>j.waitFor(i))})}bi(e,n){e.createObjectStore(Od,{keyPath:d$});const r=n.store(Od),s=new iS,i=a=>{if(s.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Qn(l)})}};return n.store(Ka).ee({X:!0},(a,o)=>{const l=new ft(a);return i(l.popLast())}).next(()=>n.store(ec).ee({X:!0},([a,o,l],c)=>{const d=Ts(o);return i(d.popLast())}))}Di(e){const n=e.store(tc);return n.ee((r,s)=>{const i=Cu(s),a=VR(this.serializer,i);return n.put(a)})}Ci(e,n){const r=n.store(Ka),s=[];return r.ee((i,a)=>{const o=n.store(Vp),l=function(d){return d.document?new ae(ft.fromString(d.document.name).popFirst(5)):d.noDocument?ae.fromSegments(d.noDocument.path):d.unknownDocument?ae.fromSegments(d.unknownDocument.path):me(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>j.waitFor(s))}Fi(e,n){const r=n.store(Jr),s=XR(this.serializer),i=new oS(pg.mi,this.serializer.yt);return r.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??tt();Ja(this.serializer,l).keys().forEach(d=>c=c.add(d)),o.set(l.userId,c)}),j.forEach(o,(l,c)=>{const d=new $n(c),h=hg.wt(this.serializer,d),p=i.getIndexManager(d),f=fg.wt(d,this.serializer,p,i.referenceDelegate);return new ZR(s,f,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Rw(n,dr.ce),l).next()})})}}function kx(t){t.createObjectStore(nc,{keyPath:c$}).createIndex(zb,u$,{unique:!0}),t.createObjectStore(tc,{keyPath:"targetId"}).createIndex(j2,l$,{unique:!0}),t.createObjectStore(yo)}const Li="IndexedDbPersistence",Ly=18e5,My=5e3,Uy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$7="main";class lS{constructor(e,n,r,s,i,a,o,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=a,this.document=o,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!lS.v())throw new te(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N7(this,s),this.$i=n+$7,this.serializer=new FR(l),this.Ui=new oa(this.$i,this.Ni,new z7(this.serializer)),this.hi=new w7,this.Pi=new k7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XR(this.serializer),this.Ii=new v7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&un(Li,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(z.FAILED_PRECONDITION,Uy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new dr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ka(e))return Y(Li,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y(Li,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return gu(e).get(el).next(n=>j.resolve(this.es(n)))}ts(e){return sf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ly)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Sn(n,rc);return r.J().next(s=>{const i=this.ss(s,Ly),a=s.filter(o=>i.indexOf(o)===-1);return j.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):gu(e).get(el).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,My)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new te(z.FAILED_PRECONDITION,Uy);return!1}}return!(!this.networkEnabled||!this.inForeground)||sf(e).J().next(r=>this.ss(r,My).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y(Li,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[sh,rc],e=>{const n=new Rw(e,dr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>sf(e).J().next(n=>this.ss(n,Ly).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return fg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return hg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y(Li,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(o){return o===18?k$:o===17?q2:o===16?T$:o===15?qb:o===14?W2:o===13?$2:o===12?x$:o===11?z2:void me(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,s,i,o=>(a=new Rw(o,this.ci?this.ci.next():dr.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new te(z.FAILED_PRECONDITION,R2);return r(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return gu(e).get(el).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,My)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new te(z.FAILED_PRECONDITION,Uy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put(el,n)}static v(){return oa.v()}Zi(e){const n=gu(e);return n.get(el).next(r=>this.es(r)?(Y(Li,"Releasing primary lease."),n.delete(el)):j.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(un(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;UA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return Y(Li,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return un(Li,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){un("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gu(t){return Sn(t,sh)}function sf(t){return Sn(t,rc)}function eP(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cS{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=tt(),s=tt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new cS(e,n.fromCache,r,s)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return UA()?8:O2(Ln())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new W7;return this.Ss(e,n,a).next(o=>{if(i.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ul()<=st.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(ul()<=st.DEBUG&&Y("QueryEngine","Query:",dl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ul()<=st.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):j.resolve())}ys(e,n){if(Y_(n))return j.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qp(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=tt(...i);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,qp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return Y_(n)||s.isEqual(Ae.min())?j.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?j.resolve(null):(ul()<=st.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),dl(n)),this.vs(e,a,n,N2(s,Zl)).next(o=>o))})}Ds(e,n){let r=new St(fR(e));return n.forEach((s,i)=>{oh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ul()<=st.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ps.getDocumentsMatchingQuery(e,n,Rr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uS="LocalStore",q7=3e8;class H7{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Pt(He),this.xs=new vi(i=>ko(i),ih),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function nP(t,e,n,r){return new H7(t,e,n,r)}async function rP(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let l=tt();for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function K7(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,o,l,c){const d=l.batch,h=d.keys();let p=j.resolve();return h.forEach(f=>{p=p.next(()=>c.getEntry(o,f)).next(w=>{const m=l.docVersions.get(f);Te(m!==null,48541),w.version.compareTo(m)<0&&(d.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),c.addEntry(w)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(o,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let o=tt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(o=o.add(a.batch.mutations[l].key));return o}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function sP(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function G7(t,e){const n=ye(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;o.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let f=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(rn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),s=s.insert(h,f),function(w,m,b){return w.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=q7?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,f,d)&&o.push(n.Pi.updateTargetData(i,f))});let l=xr(),c=tt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),o.push(Q7(i,a,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Ae.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(d)}return j.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function Q7(t,e,n){let r=tt(),s=tt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=xr();return n.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Ae.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Y(uS,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:s}})}function J7(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=go),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xp(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Ys(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function dc(t,e,n){const r=ye(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ka(a))throw a;Y(uS,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Zp(t,e,n){const r=ye(t);let s=Ae.min(),i=tt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(o,l,c){const d=ye(o),h=d.xs.get(c);return h!==void 0?j.resolve(d.Ms.get(h)):d.Pi.getTargetData(l,c)}(r,a,Nr(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:Ae.min(),n?i:tt())).next(o=>(oP(r,hR(e),o),{documents:o,Qs:i})))}function iP(t,e){const n=ye(t),r=ye(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(a=>a?a.target:null))}function aP(t,e){const n=ye(t),r=n.Os.get(e)||Ae.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,N2(r,Zl),Number.MAX_SAFE_INTEGER)).then(s=>(oP(n,e,s),s))}function oP(t,e,n){let r=t.Os.get(e)||Ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lP="firestore_clients";function Cx(t,e){return`${lP}_${t}_${e}`}const cP="firestore_mutations";function Dx(t,e,n){let r=`${cP}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const uP="firestore_targets";function jy(t,e){return`${uP}_${t}_${e}`}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Es="SharedClientState";class em{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string",a&&(i=new te(s.error.code,s.error.message))),a?new em(e,n,s.state,i):(un(Es,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new te(r.error.code,r.error.message))),i?new Xu(e,r.state,s):(un(Es,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Jb();for(let a=0;s&&a<r.activeTargetIds.length;++a)s=L2(r.activeTargetIds[a]),i=i.add(r.activeTargetIds[a]);return s?new tm(e,i):(un(Es,`Failed to parse client data for instance '${e}': ${n}`),null)}}class dS{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new dS(n.clientId,n.onlineState):(un(Es,`Failed to parse online state: ${e}`),null)}}class Hw{constructor(){this.activeTargetIds=Jb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fy{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Pt(He),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Cx(this.persistenceKey,this.Js),this.no=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Hw),this.ro=new RegExp(`^${lP}_${a}_([^_]*)$`),this.io=new RegExp(`^${cP}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${uP}_${a}_(\\d+)$`),this.oo=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this._o=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Cx(this.persistenceKey,r));if(s){const i=tm.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(jy(this.persistenceKey,e));if(s){const i=Xu.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y(Es,"READ",e,n),n}setItem(e,n){Y(Es,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y(Es,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Y(Es,"EVENT",n.key,n.newValue),n.key===this.eo)return void un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let i=dr.ce;if(s!=null)try{const a=JSON.parse(s);Te(typeof a=="number",30636,{So:s}),i=a}catch(a){un(Es,"Failed to read sequence number from WebStorage",a)}return i}(n.newValue);r!==dr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new em(this.currentUser,e,n,r),i=Dx(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Dx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=jy(this.persistenceKey,e),i=new Xu(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return tm.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return em.Ws(new $n(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Xu.Ws(s,n)}uo(e){return dS.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Y(Es,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),a=[],o=[];return i.forEach(l=>{s.has(l)||a.push(l)}),s.forEach(l=>{i.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Jb();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class dP{constructor(){this.Mo=new Hw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Y7{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nx="ConnectivityMonitor";class Ax{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(Nx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(Nx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let af=null;function Kw(){return af===null?af=function(){return 268435456+Math.round(2147483648*Math.random())}():af++,"0x"+af.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vy="RestConnection",X7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===zp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=Kw(),o=this.zo(e,n.toUriEncodedString());Y(Vy,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(o),d=gi(c);return this.Jo(e,o,l,r,d).then(h=>(Y(Vy,`Received RPC '${e}' ${a}: `,h),h),h=>{throw pa(Vy,`RPC '${e}' ${a} failed with error: `,h,"url: ",o,"request:",r),h})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+kc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=X7[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class e8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bn="WebChannelConnection";class t8 extends Z7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=Kw();return new Promise((o,l)=>{const c=new v2;c.setWithCredentials(!0),c.listenOnce(w2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Of.NO_ERROR:const h=c.getResponseJson();Y(Bn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Of.TIMEOUT:Y(Bn,`RPC '${e}' ${a} timed out`),l(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case Of.HTTP_ERROR:const p=c.getStatus();if(Y(Bn,`RPC '${e}' ${a} failed with status:`,p,"response text:",c.getResponseText()),p>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const m=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(w.status);l(new te(m,w.message))}else l(new te(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new te(z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(Bn,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);Y(Bn,`RPC '${e}' ${a} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Kw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=E2(),o=S2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Y(Bn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=a.createWebChannel(d,l);this.I_(h);let p=!1,f=!1;const w=new e8({Yo:b=>{f?Y(Bn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(Y(Bn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Y(Bn,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Zo:()=>h.close()}),m=(b,v,y)=>{b.listen(v,E=>{try{y(E)}catch(C){setTimeout(()=>{throw C},0)}})};return m(h,xu.EventType.OPEN,()=>{f||(Y(Bn,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),m(h,xu.EventType.CLOSE,()=>{f||(f=!0,Y(Bn,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),m(h,xu.EventType.ERROR,b=>{f||(f=!0,pa(Bn,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),w.a_(new te(z.UNAVAILABLE,"The operation could not be completed")))}),m(h,xu.EventType.MESSAGE,b=>{var v;if(!f){const y=b.data[0];Te(!!y,16349);const E=y,C=(E==null?void 0:E.error)||((v=E[0])==null?void 0:v.error);if(C){Y(Bn,`RPC '${e}' stream ${s} received error:`,C);const O=C.status;let L=function(T){const k=pn[T];if(k!==void 0)return xR(k)}(O),x=C.message;L===void 0&&(L=z.INTERNAL,x="Unknown error status: "+O+" with message "+C.message),f=!0,w.a_(new te(L,x)),h.close()}else Y(Bn,`RPC '${e}' stream ${s} received:`,y),w.u_(y)}}),m(o,b2.STAT_EVENT,b=>{b.stat===Tw.PROXY?Y(Bn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Tw.NOPROXY&&Y(Bn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hP(){return typeof window<"u"?window:null}function Wf(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mg(t){return new o7(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fP{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Rx="PersistentStream";class pP{constructor(e,n,r,s,i,a,o,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fP(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(un(n.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new te(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(Rx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(Rx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n8 extends pP{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=u7(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ae.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Ae.min():i.readTime?tr(i.readTime):Ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bw(this.serializer),n.addTarget=function(s,i){let a;const o=i.target;if(a=$p(o)?{documents:PR(s,o)}:{query:OR(s,o).ft},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=CR(s,i.resumeToken);const l=Fw(s,i.expectedCount);l!==null&&(a.expectedCount=l)}else if(i.snapshotVersion.compareTo(Ae.min())>0){a.readTime=uc(s,i.snapshotVersion.toTimestamp());const l=Fw(s,i.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=h7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bw(this.serializer),n.removeTarget=e,this.q_(n)}}class r8 extends pP{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=d7(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Kp(this.serializer,r))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class s8{}class i8 extends s8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Vw(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,Vw(n,r),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class a8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(un(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ro="RemoteStore";class o8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{zo(this)&&(Y(Ro,"Restarting streams for network reachability change."),await async function(o){const l=ye(o);l.Ea.add(4),await Nc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await uh(l)}(this))})}),this.Ra=new a8(r,s)}}async function uh(t){if(zo(t))for(const e of t.da)await e(!0)}async function Nc(t){for(const e of t.da)await e(!1)}function gg(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pS(n)?fS(n):Rc(n).O_()&&hS(n,e))}function hc(t,e){const n=ye(t),r=Rc(n);n.Ia.delete(e),r.O_()&&mP(n,e),n.Ia.size===0&&(r.O_()?r.L_():zo(n)&&n.Ra.set("Unknown"))}function hS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rc(t).Y_(e)}function mP(t,e){t.Va.Ue(e),Rc(t).Z_(e)}function fS(t){t.Va=new r7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Rc(t).start(),t.Ra.ua()}function pS(t){return zo(t)&&!Rc(t).x_()&&t.Ia.size>0}function zo(t){return ye(t).Ea.size===0}function gP(t){t.Va=void 0}async function l8(t){t.Ra.set("Online")}async function c8(t){t.Ia.forEach((e,n)=>{hS(t,e)})}async function u8(t,e){gP(t),pS(t)?(t.Ra.ha(e),fS(t)):t.Ra.set("Unknown")}async function d8(t,e,n){if(t.Ra.set("Online"),e instanceof kR&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const a of s.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,i),r.Ia.delete(a),r.Va.removeTarget(a))}(t,e)}catch(r){Y(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nm(t,r)}else if(e instanceof zf?t.Va.Ze(e):e instanceof TR?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ae.min()))try{const r=await sP(t.localStore);n.compareTo(r)>=0&&await function(s,i){const a=s.Va.Tt(i);return a.targetChanges.forEach((o,l)=>{if(o.resumeToken.approximateByteSize()>0){const c=s.Ia.get(l);c&&s.Ia.set(l,c.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,l)=>{const c=s.Ia.get(o);if(!c)return;s.Ia.set(o,c.withResumeToken(rn.EMPTY_BYTE_STRING,c.snapshotVersion)),mP(s,o);const d=new Ys(c.target,o,l,c.sequenceNumber);hS(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y(Ro,"Failed to raise snapshot:",r),await nm(t,r)}}async function nm(t,e,n){if(!ka(e))throw e;t.Ea.add(1),await Nc(t),t.Ra.set("Offline"),n||(n=()=>sP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await uh(t)})}function yP(t,e){return e().catch(n=>nm(t,n,e))}async function Ac(t){const e=ye(t),n=va(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:go;for(;h8(e);)try{const s=await J7(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,f8(e,s)}catch(s){await nm(e,s)}vP(e)&&wP(e)}function h8(t){return zo(t)&&t.Ta.length<10}function f8(t,e){t.Ta.push(e);const n=va(t);n.O_()&&n.X_&&n.ea(e.mutations)}function vP(t){return zo(t)&&!va(t).x_()&&t.Ta.length>0}function wP(t){va(t).start()}async function p8(t){va(t).ra()}async function m8(t){const e=va(t);for(const n of t.Ta)e.ea(n.mutations)}async function g8(t,e,n){const r=t.Ta.shift(),s=eS.from(r,e,n);await yP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ac(t)}async function y8(t,e){e&&va(t).X_&&await async function(n,r){if(function(s){return e7(s)&&s!==z.ABORTED}(r.code)){const s=n.Ta.shift();va(n).B_(),await yP(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ac(n)}}(t,e),vP(t)&&wP(t)}async function Px(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),Y(Ro,"RemoteStore received new credentials");const r=zo(n);n.Ea.add(3),await Nc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await uh(n)}async function Gw(t,e){const n=ye(t);e?(n.Ea.delete(2),await uh(n)):e||(n.Ea.add(2),await Nc(n),n.Ra.set("Unknown"))}function Rc(t){return t.ma||(t.ma=function(e,n,r){const s=ye(e);return s.sa(),new n8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:l8.bind(null,t),t_:c8.bind(null,t),r_:u8.bind(null,t),H_:d8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),pS(t)?fS(t):t.Ra.set("Unknown")):(await t.ma.stop(),gP(t))})),t.ma}function va(t){return t.fa||(t.fa=function(e,n,r){const s=ye(e);return s.sa(),new r8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:p8.bind(null,t),r_:y8.bind(null,t),ta:m8.bind(null,t),na:g8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ac(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mS{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new mS(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dh(t,e){if(un("AsyncQueue",`${e}: ${t}`),ka(t))return new te(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Tu(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ox{constructor(){this.ga=new Pt(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class fc{constructor(e,n,r,s,i,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new fc(e,n,jl.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class v8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class w8{constructor(){this.queries=Lx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const r=ye(e),s=r.queries;r.queries=Lx(),s.forEach((i,a)=>{for(const o of a.Sa)o.onError(n)})})(this,new te(z.ABORTED,"Firestore shutting down"))}}function Lx(){return new vi(t=>dR(t),lg)}async function gS(t,e){const n=ye(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new v8,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=dh(a,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&vS(n)}async function yS(t,e){const n=ye(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function b8(t,e){const n=ye(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.Sa)o.Fa(s)&&(r=!0);a.wa=s}}r&&vS(n)}function S8(t,e,n){const r=ye(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function vS(t){t.Ca.forEach(e=>{e.next()})}var Qw,Mx;(Mx=Qw||(Qw={})).Ma="default",Mx.Cache="cache";class wS{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qw.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bP{constructor(e){this.key=e}}class SP{constructor(e){this.key=e}}class EP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=fR(e),this.tu=new jl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ox,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),f=oh(this.query,h)?h:null,w=!!p&&this.mutatedKeys.has(p.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let b=!1;p&&f?p.data.isEqual(f.data)?w!==m&&(r.track({type:3,doc:f}),b=!0):this.su(p,f)||(r.track({type:2,doc:f}),b=!0,(l&&this.eu(f,l)>0||c&&this.eu(f,c)<0)&&(o=!0)):!p&&f?(r.track({type:0,doc:f}),b=!0):p&&!f&&(r.track({type:1,doc:p}),b=!0,(l||c)&&(o=!0)),b&&(f?(a=a.add(f),i=m?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:o,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,h)=>function(p,f){const w=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:m})}};return w(p)-w(f)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const o=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new fc(this.query,e.tu,i,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ox,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new SP(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new bP(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=tt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pc="SyncEngine";class E8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class I8{constructor(e){this.key=e,this.hu=!1}}class _8{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new vi(o=>dR(o),lg),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(ae.comparator),this.Au=new Map,this.Ru=new aS,this.Vu={},this.mu=new Map,this.fu=Ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function x8(t,e,n=!0){const r=yg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await IP(r,e,n,!0),s}async function T8(t,e){const n=yg(t);await IP(n,e,!0,!1)}async function IP(t,e,n,r){const s=await Xp(t.localStore,Nr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await bS(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&gg(t.remoteStore,s),o}async function bS(t,e,n,r,s){t.pu=(h,p,f)=>async function(w,m,b,v){let y=m.view.ru(b);y.Cs&&(y=await Zp(w.localStore,m.query,!1).then(({documents:L})=>m.view.ru(L,y)));const E=v&&v.targetChanges.get(m.targetId),C=v&&v.targetMismatches.get(m.targetId)!=null,O=m.view.applyChanges(y,w.isPrimaryClient,E,C);return Jw(w,m.targetId,O.au),O.snapshot}(t,h,p,f);const i=await Zp(t.localStore,e,!0),a=new EP(e,i.Qs),o=a.ru(i.documents),l=ch.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);Jw(t,n,c.au);const d=new E8(e,n,a);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function k8(t,e,n){const r=ye(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!lg(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&hc(r.remoteStore,s.targetId),pc(r,s.targetId)}).catch(Ta)):(pc(r,s.targetId),await dc(r.localStore,s.targetId,!0))}async function C8(t,e){const n=ye(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hc(n.remoteStore,r.targetId))}async function D8(t,e,n){const r=_S(t);try{const s=await function(i,a){const o=ye(i),l=ct.now(),c=a.reduce((p,f)=>p.add(f.key),tt());let d,h;return o.persistence.runTransaction("Locally write mutations","readwrite",p=>{let f=xr(),w=tt();return o.Ns.getEntries(p,c).next(m=>{f=m,f.forEach((b,v)=>{v.isValidDocument()||(w=w.add(b))})}).next(()=>o.localDocuments.getOverlayedDocuments(p,f)).next(m=>{d=m;const b=[];for(const v of a){const y=X$(v,d.get(v.key).overlayedDocument);y!=null&&b.push(new wi(v.key,y,tR(y.value.mapValue),Gn.exists(!0)))}return o.mutationQueue.addMutationBatch(p,l,b,a)}).next(m=>{h=m;const b=m.applyToLocalDocumentSet(d,w);return o.documentOverlayCache.saveOverlays(p,m.batchId,b)})}).then(()=>({batchId:h.batchId,changes:mR(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,a,o){let l=i.Vu[i.currentUser.toKey()];l||(l=new Pt(He)),l=l.insert(a,o),i.Vu[i.currentUser.toKey()]=l}(r,s.batchId,n),await Da(r,s.changes),await Ac(r.remoteStore)}catch(s){const i=dh(s,"Failed to persist write");n.reject(i)}}async function _P(t,e){const n=ye(t);try{const r=await G7(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Te(a.hu,14607):s.removedDocuments.size>0&&(Te(a.hu,42227),a.hu=!1))}),await Da(n,r,e)}catch(r){await Ta(r)}}function Ux(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const o=a.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,a){const o=ye(i);o.onlineState=a;let l=!1;o.queries.forEach((c,d)=>{for(const h of d.Sa)h.va(a)&&(l=!0)}),l&&vS(o)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N8(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Pt(ae.comparator);a=a.insert(i,tn.newNoDocument(i,Ae.min()));const o=tt().add(i),l=new lh(Ae.min(),new Map,new Pt(He),a,o);await _P(r,l),r.du=r.du.remove(i),r.Au.delete(e),IS(r)}else await dc(r.localStore,e,!1).then(()=>pc(r,e,n)).catch(Ta)}async function A8(t,e){const n=ye(t),r=e.batch.batchId;try{const s=await K7(n.localStore,e);ES(n,r,null),SS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Da(n,s)}catch(s){await Ta(s)}}async function R8(t,e,n){const r=ye(t);try{const s=await function(i,a){const o=ye(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return o.mutationQueue.lookupMutationBatch(l,a).next(d=>(Te(d!==null,37113),c=d.keys(),o.mutationQueue.removeMutationBatch(l,d))).next(()=>o.mutationQueue.performConsistencyCheck(l)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>o.localDocuments.getDocuments(l,c))})}(r.localStore,e);ES(r,e,n),SS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Da(r,s)}catch(s){await Ta(s)}}function SS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ES(t,e,n){const r=ye(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function pc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||xP(t,r)})}function xP(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(hc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),IS(t))}function Jw(t,e,n){for(const r of n)r instanceof bP?(t.Ru.addReference(r.key,e),P8(t,r)):r instanceof SP?(Y(Pc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||xP(t,r.key)):me(19791,{wu:r})}function P8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(Pc,"New document in limbo: "+n),t.Eu.add(r),IS(t))}function IS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(ft.fromString(e)),r=t.fu.next();t.Au.set(r,new I8(n)),t.du=t.du.insert(n,r),gg(t.remoteStore,new Ys(Nr(ah(n.path)),r,"TargetPurposeLimboResolution",dr.ce))}}async function Da(t,e,n){const r=ye(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=cS.As(l.targetId,c);i.push(h)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(o,l){const c=ye(o);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(l,h=>j.forEach(h.Es,p=>c.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>j.forEach(h.ds,p=>c.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!ka(d))throw d;Y(uS,"Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const p=c.Ms.get(h),f=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(f);c.Ms=c.Ms.insert(h,w)}}}(r.localStore,i))}async function O8(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){Y(Pc,"User change. New user:",e.toKey());const r=await rP(n.localStore,e);n.currentUser=e,function(s,i){s.mu.forEach(a=>{a.forEach(o=>{o.reject(new te(z.CANCELLED,i))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Da(n,r.Ls)}}function L8(t,e){const n=ye(t),r=n.Au.get(e);if(r&&r.hu)return tt().add(r.key);{let s=tt();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const o=n.Tu.get(a);s=s.unionWith(o.view.nu)}return s}}async function M8(t,e){const n=ye(t),r=await Zp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Jw(n,e.targetId,s.au),s}async function U8(t,e){const n=ye(t);return aP(n.localStore,e).then(r=>Da(n,r))}async function j8(t,e,n,r){const s=ye(t),i=await function(a,o){const l=ye(a),c=ye(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.er(d,o).next(h=>h?l.localDocuments.getDocuments(d,h):j.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Ac(s.remoteStore):n==="acknowledged"||n==="rejected"?(ES(s,e,r||null),SS(s,e),function(a,o){ye(ye(a).mutationQueue).ir(o)}(s.localStore,e)):me(6720,"Unknown batchState",{Su:n}),await Da(s,i)):Y(Pc,"Cannot apply mutation batch with id: "+e)}async function F8(t,e){const n=ye(t);if(yg(n),_S(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await jx(n,r.toArray());n.gu=!0,await Gw(n.remoteStore,!0);for(const i of s)gg(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,a)=>{n.sharedClientState.isLocalQueryTarget(a)?r.push(a):s=s.then(()=>(pc(n,a),dc(n.localStore,a,!0))),hc(n.remoteStore,a)}),await s,await jx(n,r),function(i){const a=ye(i);a.Au.forEach((o,l)=>{hc(a.remoteStore,l)}),a.Ru.Jr(),a.Au=new Map,a.du=new Pt(ae.comparator)}(n),n.gu=!1,await Gw(n.remoteStore,!1)}}async function jx(t,e,n){const r=ye(t),s=[],i=[];for(const a of e){let o;const l=r.Iu.get(a);if(l&&l.length!==0){o=await Xp(r.localStore,Nr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await M8(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await iP(r.localStore,a);o=await Xp(r.localStore,c),await bS(r,TP(c),a,!1,o.resumeToken)}s.push(o)}return r.Pu.H_(i),s}function TP(t){return cR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function V8(t){return function(e){return ye(ye(e).persistence).Ts()}(ye(t).localStore)}async function B8(t,e,n,r){const s=ye(t);if(s.gu)return void Y(Pc,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const a=await aP(s.localStore,hR(i[0])),o=lh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",rn.EMPTY_BYTE_STRING);await Da(s,a,o);break}case"rejected":await dc(s.localStore,e,!0),pc(s,e,r);break;default:me(64155,n)}}async function z8(t,e,n){const r=yg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Y(Pc,"Adding an already active target "+s);continue}const i=await iP(r.localStore,s),a=await Xp(r.localStore,i);await bS(r,TP(i),a.targetId,!1,a.resumeToken),gg(r.remoteStore,a)}for(const s of n)r.Iu.has(s)&&await dc(r.localStore,s,!1).then(()=>{hc(r.remoteStore,s),pc(r,s)}).catch(Ta)}}function yg(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_P.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N8.bind(null,e),e.Pu.H_=b8.bind(null,e.eventManager),e.Pu.yu=S8.bind(null,e.eventManager),e}function _S(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R8.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return nP(this.persistence,new tP,e.initialUser,this.serializer)}Cu(e){return new oS(pg.mi,this.serializer)}Du(e){return new dP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class $8 extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Te(this.persistence.referenceDelegate instanceof Yp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new oS(r=>Yp.mi(r,n),this.serializer)}}class kP extends Bd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await _S(this.xu.syncEngine),await Ac(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return nP(this.persistence,new tP,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new QR(r,e.asyncQueue,n)}Mu(e,n){const r=new t$(n,this.persistence);return new e$(e.asyncQueue,r)}Cu(e){const n=eP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new lS(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,hP(),Wf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new dP}}class W8 extends kP{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Fy&&(this.sharedClientState.syncEngine={Co:j8.bind(null,n),vo:B8.bind(null,n),Fo:z8.bind(null,n),Ts:V8.bind(null,n),Do:U8.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await F8(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=hP();if(!Fy.v(n))throw new te(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=eP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fy(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class zd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ux(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O8.bind(null,this.syncEngine),await Gw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w8}()}createDatastore(e){const n=mg(e.databaseInfo.databaseId),r=function(s){return new t8(s)}(e.databaseInfo);return function(s,i,a,o){return new i8(s,i,a,o)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(n,r,s,i,a){return new o8(n,r,s,i,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ux(this.syncEngine,n,0),function(){return Ax.v()?new Ax:new Y7}())}createSyncEngine(e,n){return function(r,s,i,a,o,l,c){const d=new _8(r,s,i,a,o,l);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ye(r);Y(Ro,"RemoteStore shutting down."),s.Ea.add(5),await Nc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}zd.provider={build:()=>new zd};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wa="FirestoreClient";class q8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=$n.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Y(wa,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y(wa,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function By(t,e){t.asyncQueue.verifyOperationInProgress(),Y(wa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TS(t);Y(wa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Px(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Px(e.remoteStore,s)),t._onlineComponents=e}async function TS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(wa,"Using user provided OfflineComponentProvider");try{await By(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;pa("Error using user provided cache. Falling back to memory cache: "+n),await By(t,new Bd)}}else Y(wa,"Using default OfflineComponentProvider"),await By(t,new $8(void 0));return t._offlineComponents}async function kS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(wa,"Using user provided OnlineComponentProvider"),await Fx(t,t._uninitializedComponentsProvider._online)):(Y(wa,"Using default OnlineComponentProvider"),await Fx(t,new zd))),t._onlineComponents}function CP(t){return TS(t).then(e=>e.persistence)}function DP(t){return TS(t).then(e=>e.localStore)}function NP(t){return kS(t).then(e=>e.remoteStore)}function H8(t){return kS(t).then(e=>e.syncEngine)}async function rm(t){const e=await kS(t),n=e.eventManager;return n.onListen=x8.bind(null,e.syncEngine),n.onUnlisten=k8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C8.bind(null,e.syncEngine),n}function K8(t){return t.asyncQueue.enqueue(async()=>{const e=await CP(t),n=await NP(t);return e.setNetworkEnabled(!0),function(r){const s=ye(r);return s.Ea.delete(0),uh(s)}(n)})}function G8(t){return t.asyncQueue.enqueue(async()=>{const e=await CP(t),n=await NP(t);return e.setNetworkEnabled(!1),async function(r){const s=ye(r);s.Ea.add(0),await Nc(s),s.Ra.set("Offline")}(n)})}function Q8(t,e){const n=new zr;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const a=await function(o,l){const c=ye(o);return c.persistence.runTransaction("read document","readonly",d=>c.localDocuments.getDocument(d,l))}(r,s);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new te(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=dh(a,`Failed to get document '${s} from cache`);i.reject(o)}}(await DP(t),e,n)),n.promise}function J8(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,l){const c=new xS({next:h=>{c.Nu(),i.enqueueAndForget(()=>yS(s,d));const p=h.docs.has(a);!p&&h.fromCache?l.reject(new te(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&o&&o.source==="server"?l.reject(new te(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new wS(ah(a.path),c,{includeMetadataChanges:!0,qa:!0});return gS(s,d)}(await rm(t),t.asyncQueue,e,n,r)),r.promise}function Y8(t,e){const n=new zr;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const a=await Zp(r,s,!0),o=new EP(s,a.Qs),l=o.ru(a.documents),c=o.applyChanges(l,!1);i.resolve(c.snapshot)}catch(a){const o=dh(a,`Failed to execute query '${s} against cache`);i.reject(o)}}(await DP(t),e,n)),n.promise}function X8(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,l){const c=new xS({next:h=>{c.Nu(),i.enqueueAndForget(()=>yS(s,d)),h.fromCache&&o.source==="server"?l.reject(new te(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new wS(a,c,{includeMetadataChanges:!0,qa:!0});return gS(s,d)}(await rm(t),t.asyncQueue,e,n,r)),r.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vx=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Z8="firestore.googleapis.com",Bx=!0;class zx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z8,this.ssl=Bx}else this.host=e.host,this.ssl=e.ssl??Bx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GR)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AP(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class CS{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new x2;switch(n.type){case"firstParty":return new qz(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Vx.get(e);n&&(Y("ComponentProvider","Removing Datastore"),Vx.delete(e),n.terminate())}(this),Promise.resolve()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(rh(n,qt._jsonSchema))return new qt(e,r||null,new ae(ft.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:gn("string",qt._jsonSchemaVersion),referencePath:gn("string")};class ei extends fs{constructor(e,n,r){super(e,n,ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ae(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function xe(t,e,...n){if(t=Et(t),k2("collection","path",e),t instanceof CS){const r=ft.fromString(e,...n);return R_(r),new ei(t,null,r)}{if(!(t instanceof qt||t instanceof ei))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return R_(r),new ei(t.firestore,null,r)}}function be(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Zm.newId()),k2("doc","path",e),t instanceof CS){const r=ft.fromString(e,...n);return A_(r),new qt(t,null,new ae(r))}{if(!(t instanceof qt||t instanceof ei))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return A_(r),new qt(t.firestore,t instanceof ei?t.converter:null,new ae(r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $x="AsyncQueue";class Wx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fP(this,"async_queue_retry"),this._c=()=>{const r=Wf();r&&Y($x,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Wf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ka(e))throw e;Y($x,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,un("INTERNAL UNHANDLED ERROR: ",qx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=mS.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:qx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function qx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hx(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class nr extends CS{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Wx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wx(e),this._firestoreClient=void 0,await e}}}function RP(t,e,n){n||(n=zp);const r=Ym(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Jl(i,e))return s;throw new te(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new te(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GR)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&gi(e.host)&&Ab(e.host),r.initialize({options:e,instanceIdentifier:n})}function bi(t){if(t._terminated)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PP(t),t._firestoreClient}function PP(t){var e,n,r;const s=t._freezeSettings(),i=function(a,o,l,c){return new D$(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,AP(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)==null?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||(n=s.localCache)!=null&&n._offlineComponentProvider&&(r=s.localCache)!=null&&r._onlineComponentProvider&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new q8(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}function eW(t,e){pa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return OP(t,zd.provider,{build:r=>new kP(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function tW(t){pa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();OP(t,zd.provider,{build:n=>new W8(n,e.cacheSizeBytes)})}function OP(t,e,n){if((t=hn(t,nr))._firestoreClient||t._terminated)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new te(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},PP(t)}function DS(t){return K8(bi(t=hn(t,nr)))}function NS(t){return G8(bi(t=hn(t,nr)))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(rn.fromBase64String(e))}catch(n){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Er(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rh(e,Er._jsonSchema))return Er.fromBase64String(e.bytes)}}Er._jsonSchemaVersion="firestore/bytes/1.0",Er._jsonSchema={type:gn("string",Er._jsonSchemaVersion),bytes:gn("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oc{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ts{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ts._jsonSchemaVersion}}static fromJSON(e){if(rh(e,ts._jsonSchema))return new ts(e.latitude,e.longitude)}}ts._jsonSchemaVersion="firestore/geoPoint/1.0",ts._jsonSchema={type:gn("string",ts._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ns{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rh(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ns(e.vectorValues);throw new te(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:gn("string",ns._jsonSchemaVersion),vectorValues:gn("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nW=/^__.*__$/;class rW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dc(e,this.data,n,this.fieldTransforms)}}class LP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class vg{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var n;const r=(n=this.path)==null?void 0:n.child(e),s=this.Vc({path:r,fc:!1});return s.gc(e),s}yc(e){var n;const r=(n=this.path)==null?void 0:n.child(e),s=this.Vc({path:r,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MP(this.Ac)&&nW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sW{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mg(e)}Cc(e,n,r,s=!1){return new vg({Ac:e,methodName:n,Dc:r,path:Wt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wg(t){const e=t._freezeSettings(),n=mg(t._databaseId);return new sW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UP(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);PS("Data must be an object, but it was:",a,r);const o=jP(r,a);let l,c;if(i.merge)l=new hr(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=Yw(e,h,n);if(!a.contains(p))throw new te(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);VP(d,p)||d.push(p)}l=new hr(d),c=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=a.fieldTransforms;return new rW(new Kn(o),l,c)}class bg extends Oc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}function iW(t,e,n){return new vg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class AS extends Oc{_toFieldTransform(e){return new Xb(e.path,new lc)}isEqual(e){return e instanceof AS}}class RS extends Oc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=iW(this,e,!0),r=this.vc.map(i=>Lc(i,n)),s=new Co(r);return new Xb(e.path,s)}isEqual(e){return e instanceof RS&&Jl(this.vc,e.vc)}}function aW(t,e,n,r){const s=t.Cc(1,e,n);PS("Data must be an object, but it was:",s,r);const i=[],a=Kn.empty();Ca(r,(l,c)=>{const d=OS(e,l,n);c=Et(c);const h=s.yc(d);if(c instanceof bg)i.push(d);else{const p=Lc(c,h);p!=null&&(i.push(d),a.set(d,p))}});const o=new hr(i);return new LP(a,o,s.fieldTransforms)}function oW(t,e,n,r,s,i){const a=t.Cc(1,e,n),o=[Yw(e,r,n)],l=[s];if(i.length%2!=0)throw new te(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(Yw(e,i[p])),l.push(i[p+1]);const c=[],d=Kn.empty();for(let p=o.length-1;p>=0;--p)if(!VP(c,o[p])){const f=o[p];let w=l[p];w=Et(w);const m=a.yc(f);if(w instanceof bg)c.push(f);else{const b=Lc(w,m);b!=null&&(c.push(f),d.set(f,b))}}const h=new hr(c);return new LP(d,h,a.fieldTransforms)}function lW(t,e,n,r=!1){return Lc(n,t.Cc(r?4:3,e))}function Lc(t,e){if(FP(t=Et(t)))return PS("Unsupported field value:",e,t),jP(t,e);if(t instanceof Oc)return function(n,r){if(!MP(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const a of n){let o=Lc(a,r.wc(i));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Et(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return H$(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ct.fromDate(n);return{timestampValue:uc(r.serializer,s)}}if(n instanceof ct){const s=new ct(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:uc(r.serializer,s)}}if(n instanceof ts)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Er)return{bytesValue:CR(r.serializer,n._byteString)};if(n instanceof qt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rS(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof ns)return function(s,i){return{mapValue:{fields:{[Kb]:{stringValue:Gb},[sc]:{arrayValue:{values:s.toArray().map(a=>{if(typeof a!="number")throw i.Sc("VectorValues must only contain numeric values.");return Yb(i.serializer,a)})}}}}}}(n,r);throw r.Sc(`Unsupported field value: ${eg(n)}`)}(t,e)}function jP(t,e){const n={};return H2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(t,(r,s)=>{const i=Lc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function FP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof ts||t instanceof Er||t instanceof qt||t instanceof Oc||t instanceof ns)}function PS(t,e,n){if(!FP(n)||!D2(n)){const r=eg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Yw(t,e,n){if((e=Et(e))instanceof hh)return e._internalPath;if(typeof e=="string")return OS(t,e);throw sm("Field path arguments must be of type string or ",t,!1,void 0,n)}const cW=new RegExp("[~\\*/\\[\\]]");function OS(t,e,n){if(e.search(cW)>=0)throw sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hh(...e.split("."))._internalPath}catch{throw sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sm(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new te(z.INVALID_ARGUMENT,o+t+l)}function VP(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BP{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uW extends BP{data(){return super.data()}}function Sg(t,e){return typeof e=="string"?OS(t,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LS{}class Eg extends LS{}function je(t,e,...n){let r=[];e instanceof LS&&r.push(e),r=r.concat(n),function(s){const i=s.filter(o=>o instanceof Ig).length,a=s.filter(o=>o instanceof fh).length;if(i>1||i>0&&a>0)throw new te(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fh extends Eg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fh(e,n,r)}_apply(e){const n=this._parse(e);return $P(e._query,n),new fs(e.firestore,e.converter,jw(e._query,n))}_parse(e){const n=wg(e.firestore);return function(r,s,i,a,o,l,c){let d;if(o.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new te(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Gx(c,l);const h=[];for(const p of c)h.push(Kx(a,r,p));d={arrayValue:{values:h}}}else d=Kx(a,r,c)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Gx(c,l),d=lW(i,s,c,l==="in"||l==="not-in");return at.create(o,l,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pe(t,e,n){const r=e,s=Sg("where",t);return fh._create(s,r,n)}class Ig extends LS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ig(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const a=s.getFlattenedFilters();for(const o of a)$P(i,o),i=jw(i,o)}(e._query,n),new fs(e.firestore,e.converter,jw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _g extends Eg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _g(e,n)}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fd(s,i)}(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new Cc(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function rs(t,e="asc"){const n=e,r=Sg("orderBy",t);return _g._create(r,n)}class xg extends Eg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xg(e,n,r)}_apply(e){return new fs(e.firestore,e.converter,qp(e._query,this._limit,this._limitType))}}function ti(t){return Yz("limit",t),xg._create("limit",t,"F")}function Kx(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new te(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uR(e)&&n.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!ae.isDocumentKey(r))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ud(t,new ae(r))}if(n instanceof qt)return Ud(t,n._key);throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eg(n)}.`)}function Gx(t,e){if(!Array.isArray(t)||t.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $P(t,e){const n=function(r,s){for(const i of r)for(const a of i.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WP{convertValue(e,n="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ca(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)==null?void 0:n[sc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Bt(a.doubleValue));return new ns(i)}convertGeoPoint(e){return new ts(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ag(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ld(e));default:return null}}convertTimestamp(e){const n=hi(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);Te(jR(r),9688,{name:e});const s=new ma(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ni extends BP{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ni._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}ni._jsonSchemaVersion="firestore/documentSnapshot/1.0",ni._jsonSchema={type:gn("string",ni._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class Zu extends ni{data(e={}){return super.data(e)}}class ri{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ao(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zu(this._firestore,this._userDataWriter,r.key,r,new ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(a=>{const o=new Zu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ao(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const o=new Zu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ao(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return a.type!==0&&(l=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),c=i.indexOf(a.doc.key)),{type:dW(a.type),doc:o,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ri._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zt(t){t=hn(t,qt);const e=hn(t.firestore,nr);return J8(bi(e),t._key).then(n=>KP(e,t,n))}ri._jsonSchemaVersion="firestore/querySnapshot/1.0",ri._jsonSchema={type:gn("string",ri._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class ph extends WP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function MS(t){t=hn(t,qt);const e=hn(t.firestore,nr),n=bi(e),r=new ph(e);return Q8(n,t._key).then(s=>new ni(e,r,t._key,s,new ao(s!==null&&s.hasLocalMutations,!0),t.converter))}function qe(t){t=hn(t,fs);const e=hn(t.firestore,nr),n=bi(e),r=new ph(e);return zP(t._query),X8(n,t._query).then(s=>new ri(e,r,t,s))}function HP(t){t=hn(t,fs);const e=hn(t.firestore,nr),n=bi(e),r=new ph(e);return Y8(n,t._query).then(s=>new ri(e,r,t,s))}function Gt(t,e,n){t=hn(t,qt);const r=hn(t.firestore,nr),s=qP(t.converter,e,n);return mh(r,[UP(wg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gn.none())])}function nn(t,e,n,...r){t=hn(t,qt);const s=hn(t.firestore,nr),i=wg(s);let a;return a=typeof(e=Et(e))=="string"||e instanceof hh?oW(i,"updateDoc",t._key,e,n,r):aW(i,"updateDoc",t._key,e),mh(s,[a.toMutation(t._key,Gn.exists(!0))])}function wn(t){return mh(hn(t.firestore,nr),[new dg(t._key,Gn.none())])}function ss(t,e){const n=hn(t.firestore,nr),r=be(t),s=qP(t.converter,e);return mh(n,[UP(wg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gn.exists(!1))]).then(()=>r)}function Ms(t,...e){var n,r,s;t=Et(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Hx(e[a])||(i=e[a++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Hx(e[a])){const h=e[a];e[a]=(n=h.next)==null?void 0:n.bind(h),e[a+1]=(r=h.error)==null?void 0:r.bind(h),e[a+2]=(s=h.complete)==null?void 0:s.bind(h)}let l,c,d;if(t instanceof qt)c=hn(t.firestore,nr),d=ah(t._key.path),l={next:h=>{e[a]&&e[a](KP(c,t,h))},error:e[a+1],complete:e[a+2]};else{const h=hn(t,fs);c=hn(h.firestore,nr),d=h._query;const p=new ph(c);l={next:f=>{e[a]&&e[a](new ri(c,p,h,f))},error:e[a+1],complete:e[a+2]},zP(t._query)}return function(h,p,f,w){const m=new xS(w),b=new wS(p,m,f);return h.asyncQueue.enqueueAndForget(async()=>gS(await rm(h),b)),()=>{m.Nu(),h.asyncQueue.enqueueAndForget(async()=>yS(await rm(h),b))}}(bi(c),d,o,l)}function mh(t,e){return function(n,r){const s=new zr;return n.asyncQueue.enqueueAndForget(async()=>D8(await H8(n),r,s)),s.promise}(bi(t),e)}function KP(t,e,n){const r=n.docs.get(e._key),s=new ph(t);return new ni(t,s,e._key,r,new ao(n.hasPendingWrites,n.fromCache),e.converter)}function Le(){return new AS("serverTimestamp")}function GP(...t){return new RS("arrayUnion",t)}(function(t,e=!0){(function(n){kc=n})(th),Os(new cs("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),a=new nr(new $z(n.getProvider("auth-internal")),new Hz(i,n.getProvider("app-check-internal")),function(o,l){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ma(o.options.projectId,l)}(i,r),i);return s={useFetchStreams:e,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Dr(k_,C_,t),Dr(k_,C_,"esm2020")})();const on=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:WP,Bytes:Er,CollectionReference:ei,DocumentReference:qt,DocumentSnapshot:ni,FieldPath:hh,FieldValue:Oc,Firestore:nr,FirestoreError:te,GeoPoint:ts,Query:fs,QueryCompositeFilterConstraint:Ig,QueryConstraint:Eg,QueryDocumentSnapshot:Zu,QueryFieldFilterConstraint:fh,QueryLimitConstraint:xg,QueryOrderByConstraint:_g,QuerySnapshot:ri,SnapshotMetadata:ao,Timestamp:ct,VectorValue:ns,_AutoId:Zm,_ByteString:rn,_DatabaseId:ma,_DocumentKey:ae,_EmptyAuthCredentialsProvider:x2,_FieldPath:Wt,_cast:hn,_logWarn:pa,_validateIsNotUsedTogether:C2,addDoc:ss,arrayUnion:GP,collection:xe,deleteDoc:wn,disableNetwork:NS,doc:be,enableIndexedDbPersistence:eW,enableMultiTabIndexedDbPersistence:tW,enableNetwork:DS,ensureFirestoreConfigured:bi,executeWrite:mh,getDoc:zt,getDocFromCache:MS,getDocs:qe,getDocsFromCache:HP,initializeFirestore:RP,limit:ti,onSnapshot:Ms,orderBy:rs,query:je,serverTimestamp:Le,setDoc:Gt,setLogLevel:I2,updateDoc:nn,where:Pe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hW="type.googleapis.com/google.protobuf.Int64Value",fW="type.googleapis.com/google.protobuf.UInt64Value";function QP(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function im(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>im(e));if(typeof t=="function"||typeof t=="object")return QP(t,e=>im(e));throw new Error("Data cannot be encoded in JSON: "+t)}function mc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case hW:case fW:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>mc(e)):typeof t=="function"||typeof t=="object"?QP(t,e=>mc(e)):t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const US="functions";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fr extends hs{constructor(e,n,r){super(`${US}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,fr.prototype)}}function pW(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function am(t,e){let n=pW(t),r=n,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!Qx[a])return new fr("internal","internal");n=Qx[a],r=a}const o=i.message;typeof o=="string"&&(r=o),s=i.details,s!==void 0&&(s=mc(s))}}catch{}return n==="ok"?null:new fr(n,r,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mW{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Sr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xw="us-central1",gW=/^data: (.*?)(?:\n|$)/;function yW(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new fr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class vW{constructor(e,n,r,s,i=Xw,a=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new mW(e,n,r,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Xw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function wW(t,e,n){const r=gi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Ab(t.emulatorOrigin+"/backends"),LA("Functions",!0))}function bW(t,e,n){const r=s=>EW(t,e,s,{});return r.stream=(s,i)=>_W(t,e,s,i),r}function JP(t){return t.emulatorOrigin&&gi(t.emulatorOrigin)?"include":void 0}async function SW(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:JP(s)})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}async function YP(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function EW(t,e,n,r){const s=t._url(e);return IW(t,s,n,r)}async function IW(t,e,n,r){n=im(n);const s={data:n},i=await YP(t,r),a=r.timeout||7e4,o=yW(a),l=await Promise.race([SW(e,s,i,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new fr("cancelled","Firebase Functions instance was deleted.");const c=am(l.status,l.json);if(c)throw c;if(!l.json)throw new fr("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new fr("internal","Response is missing data field.");return{data:mc(d)}}function _W(t,e,n,r){const s=t._url(e);return xW(t,s,n,r||{})}async function xW(t,e,n,r){var s;n=im(n);const i={data:n},a=await YP(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r==null?void 0:r.signal,credentials:JP(t)})}catch(f){if(f instanceof Error&&f.name==="AbortError"){const m=new fr("cancelled","Request was cancelled.");return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}const w=am(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let l,c;const d=new Promise((f,w)=>{l=f,c=w});(s=r==null?void 0:r.signal)==null||s.addEventListener("abort",()=>{const f=new fr("cancelled","Request was cancelled.");c(f)});const h=o.body.getReader(),p=TW(h,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const f=p.getReader();return{async next(){const{value:w,done:m}=await f.read();return{value:w,done:m}},async return(){return await f.cancel(),{done:!0,value:void 0}}}}},data:d}}function TW(t,e,n,r){const s=(a,o)=>{const l=a.match(gW);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(mc(d.result));return}if("message"in d){o.enqueue(mc(d.message));return}if("error"in d){const h=am(0,d);o.error(h),n(h);return}}catch(d){if(d instanceof fr){o.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(a){let o="";return l();async function l(){if(r!=null&&r.aborted){const c=new fr("cancelled","Request was cancelled");return a.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){o.trim()&&s(o.trim(),a),a.close();return}if(r!=null&&r.aborted){const p=new fr("cancelled","Request was cancelled");a.error(p),n(p),await t.cancel();return}o+=i.decode(c,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),a);return l()}catch(c){const d=c instanceof fr?c:am(0,null);a.error(d),n(d)}}},cancel(){return t.cancel()}})}const Jx="@firebase/functions",Yx="0.13.1";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kW="auth-internal",CW="app-check-internal",DW="messaging-internal";function NW(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(kW),a=n.getProvider(DW),o=n.getProvider(CW);return new vW(s,i,a,o,r)};Os(new cs(US,e,"PUBLIC").setMultipleInstances(!0)),Dr(Jx,Yx,t),Dr(Jx,Yx,"esm2020")}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AW(t=$A(),e=Xw){const n=Ym(Et(t),US).getImmediate({identifier:e}),r=PA("functions");return r&&RW(n,...r),n}function RW(t,e,n){wW(Et(t),e,n)}function PW(t,e,n){return bW(Et(t),e)}NW();/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XP="firebasestorage.googleapis.com",ZP="storageBucket",OW=2*60*1e3,LW=10*60*1e3,MW=1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yt extends hs{constructor(e,n,r=0){super(zy(e),`Firebase Storage: ${n} (${zy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vt||(Vt={}));function zy(t){return"storage/"+t}function jS(){const t="An unknown error occurred, please check the error payload for server response.";return new Yt(Vt.UNKNOWN,t)}function UW(t){return new Yt(Vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function jW(t){return new Yt(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function FW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yt(Vt.UNAUTHENTICATED,t)}function VW(){return new Yt(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BW(t){return new Yt(Vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function eO(){return new Yt(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tO(){return new Yt(Vt.CANCELED,"User canceled the upload/download.")}function zW(t){return new Yt(Vt.INVALID_URL,"Invalid URL '"+t+"'.")}function $W(t){return new Yt(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function WW(){return new Yt(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZP+"' property when initializing the app?")}function nO(){return new Yt(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qW(){return new Yt(Vt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function HW(){return new Yt(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KW(t){return new Yt(Vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zw(t){return new Yt(Vt.INVALID_ARGUMENT,t)}function rO(){return new Yt(Vt.APP_DELETED,"The Firebase app was deleted.")}function GW(t){return new Yt(Vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ed(t,e){return new Yt(Vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yu(t){throw new Yt(Vt.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tr.makeFromUrl(e,n)}catch{return new Tr(e,"")}if(r.path==="")return r;throw $W(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),w={bucket:1,path:3},m=n===XP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",v=new RegExp(`^https?://${m}/${s}/${b}`,"i"),y=[{regex:o,indices:l,postModify:i},{regex:f,indices:w,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<y.length;E++){const C=y[E],O=C.regex.exec(e);if(O){const L=O[C.indices.bucket];let x=O[C.indices.path];x||(x=""),r=new Tr(L,x),C.postModify(r);break}}if(r==null)throw zW(e);return r}}class QW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JW(t,e,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function d(...b){c||(c=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(f,l())},b)}function p(){i&&clearTimeout(i)}function f(b,...v){if(c){p();return}if(b){p(),d.call(null,b,...v);return}if(l()||a){p(),d.call(null,b,...v);return}r<64&&(r*=2);let y;o===1?(o=2,y=0):y=(r+Math.random())*1e3,h(y)}let w=!1;function m(b){w||(w=!0,p(),!c&&(s!==null?(b||(o=2),clearTimeout(s),h(0)):b||(o=1)))}return h(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}function YW(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XW(t){return t!==void 0}function ZW(t){return typeof t=="function"}function eq(t){return typeof t=="object"&&!Array.isArray(t)}function Tg(t){return typeof t=="string"||t instanceof String}function Xx(t){return FS()&&t instanceof Blob}function FS(){return typeof Blob<"u"}function Zx(t,e,n,r){if(r<e)throw Zw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var wo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(wo||(wo={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iO(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tq{constructor(e,n,r,s,i,a,o,l,c,d,h,p=!0,f=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,m)=>{this.resolve_=w,this.reject_=m,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new of(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===wo.NO_ERROR,l=i.getStatus();if(!o||iO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===wo.ABORT;r(!1,new of(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new of(c,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());XW(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=jS();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?rO():tO();a(l)}else{const l=eO();a(l)}};this.canceled_?n(!1,new of(!1,null,!0)):this.backoffId_=JW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class of{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function iq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aq(t,e,n,r,s,i,a=!0,o=!1){const l=sO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return sq(d,e),nq(d,n),rq(d,i),iq(d,r),new tq(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,o)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lq(...t){const e=oq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(FS())return new Blob(t);throw new Yt(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uq(t){if(typeof atob>"u")throw KW("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $y{constructor(e,n){this.data=e,this.contentType=n||null}}function dq(t,e){switch(t){case Cs.RAW:return new $y(aO(e));case Cs.BASE64:case Cs.BASE64URL:return new $y(oO(t,e));case Cs.DATA_URL:return new $y(fq(e),pq(e))}throw jS()}function aO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,i=t.charCodeAt(++n);r=65536|(s&1023)<<10|i&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function hq(t){let e;try{e=decodeURIComponent(t)}catch{throw ed(Cs.DATA_URL,"Malformed data URL.")}return aO(e)}function oO(t,e){switch(t){case Cs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ed(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Cs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ed(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uq(e)}catch(s){throw s.message.includes("polyfill")?s:ed(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class lO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ed(Cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=mq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function fq(t){const e=new lO(t);return e.base64?oO(Cs.BASE64,e.rest):hq(e.rest)}function pq(t){return new lO(t).contentType}function mq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ks{constructor(e,n){let r=0,s="";Xx(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Xx(this.data_)){const r=this.data_,s=cq(r,e,n);return s===null?null:new Ks(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ks(r,!0)}}static getBlob(...e){if(FS()){const n=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(lq.apply(null,n))}else{const n=e.map(a=>Tg(a)?dq(Cs.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new Ks(s,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cO(t){let e;try{e=JSON.parse(t)}catch{return null}return eq(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function yq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vq(t,e){return e}class Yn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||vq}}let lf=null;function wq(t){return!Tg(t)||t.length<2?t:uO(t)}function VS(){if(lf)return lf;const t=[];t.push(new Yn("bucket")),t.push(new Yn("generation")),t.push(new Yn("metageneration")),t.push(new Yn("name","fullPath",!0));function e(i,a){return wq(a)}const n=new Yn("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Yn("size");return s.xform=r,t.push(s),t.push(new Yn("timeCreated")),t.push(new Yn("updated")),t.push(new Yn("md5Hash",null,!0)),t.push(new Yn("cacheControl",null,!0)),t.push(new Yn("contentDisposition",null,!0)),t.push(new Yn("contentEncoding",null,!0)),t.push(new Yn("contentLanguage",null,!0)),t.push(new Yn("contentType",null,!0)),t.push(new Yn("metadata","customMetadata",!0)),lf=t,lf}function bq(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Tr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Sq(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return bq(r,t),r}function dO(t,e,n){const r=cO(e);return r===null?null:Sq(t,r,n)}function Eq(t,e,n,r){const s=cO(e);if(s===null||!Tg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(o=>{const l=t.bucket,c=t.fullPath,d="/b/"+a(l)+"/o/"+a(c),h=gh(d,n,r),p=sO({alt:"media",token:o});return h+p})[0]}function hO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Mc{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function si(t){if(!t)throw jS()}function BS(t,e){function n(r,s){const i=dO(t,s,e);return si(i!==null),i}return n}function Iq(t,e){function n(r,s){const i=dO(t,s,e);return si(i!==null),Eq(i,s,t.host,t._protocol)}return n}function yh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=VW():s=FW():n.getStatus()===402?s=jW(t.bucket):n.getStatus()===403?s=BW(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function fO(t){const e=yh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=UW(t.path)),i.serverResponse=s.serverResponse,i}return n}function _q(t,e,n){const r=e.fullServerUrl(),s=gh(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new Mc(s,i,BS(t,n),a);return o.errorHandler=fO(e),o}function xq(t,e,n){const r=e.fullServerUrl(),s=gh(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new Mc(s,i,Iq(t,n),a);return o.errorHandler=fO(e),o}function Tq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Tq(null,e)),r}function mO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let E="";for(let C=0;C<2;C++)E=E+Math.random().toString().slice(2);return E}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=pO(e,r,s),d=hO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",f=Ks.getBlob(h,r,p);if(f===null)throw nO();const w={name:c.fullPath},m=gh(i,t.host,t._protocol),b="POST",v=t.maxUploadRetryTime,y=new Mc(m,b,BS(t,n),v);return y.urlParams=w,y.headers=a,y.body=f.uploadData(),y.errorHandler=yh(e),y}class om{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function zS(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{si(!1)}return si(!!n&&(e||["active"]).indexOf(n)!==-1),n}function kq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a=pO(e,r,s),o={name:a.fullPath},l=gh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=hO(a,n),p=t.maxUploadRetryTime;function f(m){zS(m);let b;try{b=m.getResponseHeader("X-Goog-Upload-URL")}catch{si(!1)}return si(Tg(b)),b}const w=new Mc(l,c,f,p);return w.urlParams=o,w.headers=d,w.body=h,w.errorHandler=yh(e),w}function Cq(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=zS(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{si(!1)}h||si(!1);const p=Number(h);return si(!isNaN(p)),new om(p,r.size(),d==="final")}const a="POST",o=t.maxUploadRetryTime,l=new Mc(n,a,i,o);return l.headers=s,l.errorHandler=yh(e),l}const eT=256*1024;function Dq(t,e,n,r,s,i,a,o){const l=new om(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw qW();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,p=h+d;let f="";d===0?f="finalize":c===d?f="upload, finalize":f="upload";const w={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(h,p);if(m===null)throw nO();function b(C,O){const L=zS(C,["active","final"]),x=l.current+d,T=r.size();let k;return L==="final"?k=BS(e,i)(C,O):k=null,new om(x,T,L==="final",k)}const v="POST",y=e.maxUploadRetryTime,E=new Mc(n,v,b,y);return E.headers=w,E.body=m.uploadData(),E.progressCallback=o||null,E.errorHandler=yh(t),E}const lr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Wy(t){switch(t){case"running":case"pausing":case"canceling":return lr.RUNNING;case"paused":return lr.PAUSED;case"success":return lr.SUCCESS;case"canceled":return lr.CANCELED;case"error":return lr.ERROR;default:return lr.ERROR}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nq{constructor(e,n,r){if(ZW(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function al(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Aq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw yu("cannot .send() more than once");if(gi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Rq extends Aq{initXhr(){this.xhr_.responseType="text"}}function Za(){return new Rq}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=VS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Vt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(iO(s.status,[]))if(i)s=eO();else{this.sleepTime=Math.max(this.sleepTime*2,MW),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Vt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=kq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Za,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Cq(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Za,n,r);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=eT*this._chunkMultiplier,n=new om(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let a;try{a=Dq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Za,s,i,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){eT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=_q(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Za,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=mO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Za,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=tO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Wy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Nq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Wy(this._state)){case lr.SUCCESS:al(this._resolve.bind(null,this.snapshot))();break;case lr.CANCELED:case lr.ERROR:const n=this._reject;al(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Wy(this._state)){case lr.RUNNING:case lr.PAUSED:e.next&&al(e.next.bind(e,this.snapshot))();break;case lr.SUCCESS:e.complete&&al(e.complete.bind(e))();break;case lr.CANCELED:case lr.ERROR:e.error&&al(e.error.bind(e,this._error))();break;default:e.error&&al(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Po{constructor(e,n){this._service=e,n instanceof Tr?this._location=n:this._location=Tr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Po(e,n)}get root(){const e=new Tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uO(this._location.path)}get storage(){return this._service}get parent(){const e=gq(this._location.path);if(e===null)return null;const n=new Tr(this._location.bucket,e);return new Po(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw GW(e)}}function Oq(t,e,n){t._throwIfRoot("uploadBytes");const r=mO(t.storage,t._location,VS(),new Ks(e,!0),n);return t.storage.makeRequestWithTokens(r,Za).then(s=>({metadata:s,ref:t}))}function Lq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Pq(t,new Ks(e),n)}function Mq(t){t._throwIfRoot("getDownloadURL");const e=xq(t.storage,t._location,VS());return t.storage.makeRequestWithTokens(e,Za).then(n=>{if(n===null)throw HW();return n})}function Uq(t,e){const n=yq(t._location.path,e),r=new Tr(t._location.bucket,n);return new Po(t.storage,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jq(t){return/^[A-Za-z]+:\/\//.test(t)}function Fq(t,e){return new Po(t,e)}function gO(t,e){if(t instanceof $S){const n=t;if(n._bucket==null)throw WW();const r=new Po(n,n._bucket);return e!=null?gO(r,e):r}else return e!==void 0?Uq(t,e):t}function Vq(t,e){if(e&&jq(e)){if(t instanceof $S)return Fq(t,e);throw Zw("To use ref(service, url), the first argument must be a Storage instance.")}else return gO(t,e)}function tT(t,e){const n=e==null?void 0:e[ZP];return n==null?null:Tr.makeFromBucketSpec(n,t)}function Bq(t,e,n,r={}){t.host=`${e}:${n}`;const s=gi(e);s&&(Ab(`https://${t.host}/b`),LA("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:RV(i,t.app.options.projectId))}class $S{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=XP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=OW,this._maxUploadRetryTime=LW,this._requests=new Set,s!=null?this._bucket=Tr.makeFromBucketSpec(s,this._host):this._bucket=tT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tr.makeFromBucketSpec(this._url,e):this._bucket=tT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Po(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new QW(rO());{const a=aq(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const nT="@firebase/storage",rT="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yO="storage";function zq(t,e,n){return t=Et(t),Oq(t,e,n)}function $q(t,e,n){return t=Et(t),Lq(t,e,n)}function vO(t){return t=Et(t),Mq(t)}function wO(t,e){return t=Et(t),Vq(t,e)}function WS(t=$A(),e){t=Et(t);const n=Ym(t,yO).getImmediate({identifier:e}),r=PA("storage");return r&&Wq(n,...r),n}function Wq(t,e,n,r={}){Bq(t,e,n,r)}function qq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new $S(n,r,s,e,th)}function Hq(){Os(new cs(yO,qq,"PUBLIC").setMultipleInstances(!0)),Dr(nT,rT,""),Dr(nT,rT,"esm2020")}Hq();const e0={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:e0.projectId,authDomain:e0.authDomain,emulatorMode:!1});const kg=zA(e0);try{typeof window<"u",console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const xt=VB(kg,{persistence:[f2,Ew]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const q=RP(kg,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{I2("error")}catch{}const bO=AW(kg,"us-central1"),SO=WS(kg);console.log(" Firebase initialized successfully");const Kq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(Kq,100);let Ga=0;const qy=3,Gq=1e3,EO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&Ga<qy){Ga++;const r=Math.min(Gq*Math.pow(2,Ga-1),1e4);console.log(` Attempting to reconnect (${Ga}/${qy}) in ${r}ms...`);try{await NS(q),await new Promise(s=>setTimeout(s,r)),await DS(q),console.log(" Firestore reconnected successfully"),Ga=0}catch(s){console.error(" Failed to reconnect:",s),Ga>=qy&&(console.error(" Maximum reconnection attempts reached."),Qq())}}},Qq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await DS(q),Ga=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await NS(q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,a;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(a=(i=t.reason)==null?void 0:i.message)!=null&&a.includes("UNAVAILABLE"))&&(EO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const At=Object.freeze(Object.defineProperty({__proto__:null,auth:xt,db:q,functions:bO,handleFirestoreError:EO,storage:SO},Symbol.toStringTag,{value:"Module"})),et=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Jq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Oo=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Oo(n)).filter(n=>n!==void 0);if(t instanceof Date||!Jq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Oo(r);s!==void 0&&(e[n]=s)}return e},td={async create(t){await Gt(be(q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Le()})},async getById(t){const e=be(q,"profiles",t),n=await zt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:et(r.createdAt)}}return null},async update(t,e){const n=be(q,"profiles",t);await nn(n,{...e,updatedAt:Le()})},async getByShopId(t){const e=je(xe(q,"profiles"),Pe("shopId","==",t));return(await qe(e)).docs.map(n=>{const r=n.data();return{userId:n.id,...r,createdAt:et(r.createdAt)}})}},lm={async create(t){return(await ss(xe(q,"referrals"),{...t,createdAt:Le(),updatedAt:Le()})).id},async getByReferrerId(t){try{const e=je(xe(q,"referrals"),Pe("referrerId","==",t),rs("createdAt","desc"));return(await qe(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:et(n.data().createdAt),updatedAt:et(n.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const n=je(xe(q,"referrals"),Pe("referrerId","==",t));return(await qe(n)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt),updatedAt:et(r.data().updatedAt)})).sort((r,s)=>{var i,a,o,l;return(((a=(i=s.createdAt)==null?void 0:i.getTime)==null?void 0:a.call(i))||0)-(((l=(o=r.createdAt)==null?void 0:o.getTime)==null?void 0:l.call(o))||0)})}throw e}},async getByReferralCode(t){const e=je(xe(q,"referrals"),Pe("referralCode","==",t),ti(1)),n=await qe(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:et(r.data().createdAt),updatedAt:et(r.data().updatedAt)}},async updateStatus(t,e){await nn(be(q,"referrals",t),{status:e,updatedAt:Le()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},IO={async getByUserId(t){const e=je(xe(q,"profiles"),Pe("userId","==",t)),n=await qe(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:et(s.createdAt),updatedAt:et(s.updatedAt)}}return null},async update(t,e){const n=je(xe(q,"profiles"),Pe("userId","==",t)),r=await qe(n);if(!r.empty){const s=be(q,"profiles",r.docs[0].id);await nn(s,{...e,updatedAt:Le()})}}},Xs={async create(t){return(await ss(xe(q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Le(),updatedAt:Le()})).id},async getByMerchantId(t){const e=je(xe(q,"merchantWallets"),Pe("merchantUserId","==",t)),n=(await qe(e)).docs.map(s=>{const i=s.data();return{id:s.id,...i,transferLimit:i.transferLimit||2e5,withdrawLimit:i.withdrawLimit||2e5,transferUsage:i.transferUsage||0,withdrawUsage:i.withdrawUsage||0,createdAt:et(i.createdAt),updatedAt:et(i.updatedAt)}});if(n.length>0)return n.sort((s,i)=>{const a=s.createdAt,o=i.createdAt;return a&&o?o.getTime()-a.getTime():a&&!o?-1:!a&&o?1:0});const r=je(xe(q,"wallets"),Pe("userId","==",t));return(await qe(r)).docs.map(s=>{const i=s.data();return{id:s.id,merchantUserId:i.userId||t,provider:i.provider||"instapay",msisdn:i.msisdn||"",label:i.name||i.label||"",isActive:i.isActive!==!1,dailyLimit:i.dailyLimit||2e5,monthlyLimit:i.monthlyLimit||2e5,transferLimit:i.transferLimit||i.monthlyTransferLimit||2e5,withdrawLimit:i.withdrawLimit||i.monthlyWithdrawLimit||2e5,transferUsage:i.transferUsage||i.monthlyTransferUsage||0,withdrawUsage:i.withdrawUsage||i.monthlyWithdrawUsage||0,dailyTransferLimit:i.dailyTransferLimit,dailyWithdrawLimit:i.dailyWithdrawLimit,createdAt:et(i.createdAt),updatedAt:et(i.updatedAt)}}).sort((s,i)=>{const a=s.createdAt,o=i.createdAt;return a&&o?o.getTime()-a.getTime():a&&!o?-1:!a&&o?1:0})},async getById(t){const e=be(q,"merchantWallets",t),n=await zt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:et(r.createdAt),updatedAt:et(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=je(xe(q,"merchantWallets"),Pe("iccid","==",t)),n=await qe(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:et(s.createdAt),updatedAt:et(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=je(xe(q,"merchantWallets"),Pe("msisdn","==",t)),r=await qe(n);if(!r.empty){const o=r.docs[0],l=o.data();return{id:o.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}const s=je(xe(q,"merchantWallets")),i=await qe(s),a=e.slice(-7);for(const o of i.docs){const l=o.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===a)return{id:o.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=be(q,"merchantWallets",t);await nn(n,{...e,updatedAt:Le()})},async updateUsage(t,e,n){const r=be(q,"merchantWallets",t),s={updatedAt:Le()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await nn(r,s)},async resetDailyUsage(t){const e=(await this.getByMerchantId(t)).map(n=>this.updateUsage(n.id,0,0));await Promise.all(e)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const n=((i,a)=>i.reduce((o,l,c)=>(c%a===0&&o.push(i.slice(c,c+a)),o),[]))(t.map(i=>i.trim()).filter(Boolean),10);let r=0,s=0;for(const i of n){const a=je(xe(q,"merchantWallets"),Pe("msisdn","in",i)),o=(await qe(a)).docs.map(async l=>{try{const c=l.data();if(c.merchantUserId&&c.merchantUserId!==e)return;await nn(l.ref,{merchantUserId:e,updatedAt:Le()}),r+=1}catch(c){console.error("Failed to reassign wallet",l.id,c),s+=1}});await Promise.allSettled(o)}return{updated:r,failed:s}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=be(q,"merchantWallets",t);await wn(e)}},Cg={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await J(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>fm);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const a=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),o={...a,merchantUserId:i,commission:r,profit:s,createdAt:a.createdAt?a.createdAt instanceof Date?a.createdAt:new Date(String(a.createdAt)):new Date,uploadedAt:Le(),confirmedAt:a.confirmedAt?a.confirmedAt instanceof Date?a.confirmedAt:new Date(String(a.confirmedAt)):null},l=await ss(xe(q,"transactions"),o);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await J(async()=>{const{ProfitService:d}=await dt(()=>import("./profitService-4r9FqAF7-CduXHB_-.js"),[],import.meta.url);return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await Xs.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),p=Number((d==null?void 0:d.withdrawUsage)||0),f=Number(t.amount||0),w=String((t==null?void 0:t.originType)||"").trim()==="withdraw",m=String(t.txnType||"")==="receive";w||m?await Xs.updateUsage(c,void 0,p+f):await Xs.updateUsage(c,h+f,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),p=String((t==null?void 0:t.originType)||"").trim();let f="";if(h)try{const m=await Xs.getById(h);f=String((m==null?void 0:m.msisdn)||(m==null?void 0:m.label)||h).trim()}catch{}let w="";p==="withdraw"?w=f?`   ${c}   ${f}    ${r}`:`   ${c}    ${r}`:p==="transfer"||t.txnType==="send"?w=`   ${c}   ${f||" "}   ${d||""}    ${r}`:w=f?`  ${c}   ${f}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=je(xe(q,"transactions"),Pe("shopId","==",t),rs("createdAt","desc"));return(await qe(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:et(n.data().createdAt),confirmedAt:n.data().confirmedAt?et(n.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=je(xe(q,"transactions"),Pe("merchantUserId","==",t),rs("createdAt","desc"));return(await qe(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:et(n.data().createdAt),confirmedAt:n.data().confirmedAt?et(n.data().confirmedAt):void 0}))},async getByUserId(t){const e=je(xe(q,"transactions"),Pe("merchantUserId","==",t)),n=je(xe(q,"transactions"),Pe("userId","==",t)),[r,s]=await Promise.all([qe(e),qe(n)]),i=[...r.docs,...s.docs],a=new Set,o=[];for(const l of i){if(a.has(l.id))continue;a.add(l.id);const c=l.data();o.push({id:l.id,...c,createdAt:et(c.createdAt),confirmedAt:c.confirmedAt?et(c.confirmedAt):void 0})}return o.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=be(q,"transactions",t);await nn(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function Yq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await Cg.create(e);return(async()=>{try{const{calculateCommission:r}=await J(async()=>{const{calculateCommission:d}=await Promise.resolve().then(()=>fm);return{calculateCommission:d}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Ir.getUserData(t.createdBy),a={...(i==null?void 0:i.walletBalances)||{}},o=Math.max(0,Number(a[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));a[t.walletId]=o+l;const c=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Ir.updateUserData(t.createdBy,{walletBalances:a,cashBalance:c,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await J(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>pm);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const Xq="https://summer-cake-5149.alkaptin2030.workers.dev",_O={async getTelegramWorkerUrl(){var t;try{const e=be(q,"systemSettings","core"),n=await zt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=be(q,"systemSettings","core");await Gt(e,{telegramWorkerUrl:t,updatedAt:Le()},{merge:!0})}},xO={async send(t,e){try{const n=await Ir.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const s=(await _O.getTelegramWorkerUrl()||Xq).replace(/\/$/,""),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!i.ok){const a=await i.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},TO={async log(t,e,n,r,s){await ss(xe(q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Le()})},async getLogs(t=100){const e=je(xe(q,"auditLogs"),rs("createdAt","desc"),ti(t));return(await qe(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:et(n.data().createdAt)}))},async getDeletedTransactions(){try{const t=je(xe(q,"deletedTransactions"),rs("deletedAt","desc"));return(await qe(t)).docs.map(e=>({id:e.id,...e.data(),deletedAt:et(e.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=je(xe(q,"deletedTransactions"),Pe("userId","==",t),rs("deletedAt","desc"));return(await qe(e)).docs.map(n=>({id:n.id,...n.data(),deletedAt:et(n.data().deletedAt)})).filter(n=>(n==null?void 0:n.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const n=je(xe(q,"deletedTransactions"),Pe("userId","==",t));return(await qe(n)).docs.map(r=>({id:r.id,...r.data(),deletedAt:et(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0).sort((r,s)=>{const i=(r.deletedAt instanceof Date?r.deletedAt:new Date(r.deletedAt)).getTime();return(s.deletedAt instanceof Date?s.deletedAt:new Date(s.deletedAt)).getTime()-i})}catch(n){return console.error("Fallback error getting deleted transactions by user:",n),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Le(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const a=await ss(xe(q,"deletedTransactions"),r);console.log("       :",a.id);return}catch(a){i=a,s--,console.warn(`       : ${s}`,a),s>0&&await new Promise(o=>setTimeout(o,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=je(xe(q,"deletedTransactions"),Pe("originalTransactionId","==",t),Pe("userId","==",e)),r=await qe(n);r.empty?await ss(xe(q,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Le()}):await Promise.all(r.docs.map(s=>nn(s.ref,{permanent:!0,deletedAt:Le()}))),console.log("    :",t);try{const s=je(xe(q,"userTransactions"),Pe("userId","==",e)),i=(await qe(s)).docs.filter(a=>{var o,l;const c=a.data();return a.id===t||c.id===t||c.transactionId===t||c.originalTransactionId===t||((o=c.receipt)==null?void 0:o.id)===t||((l=c.receipt)==null?void 0:l.transactionId)===t});i.length>0&&(console.log(`  ${i.length}   userTransactions`),await Promise.all(i.map(a=>wn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=be(q,"transactions",t);(await zt(s)).exists()&&(console.log("     transactions  "),await wn(s));const i=je(xe(q,"transactions"),Pe("transactionId","==",t)),a=await qe(i);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(c=>wn(c.ref))));const o=je(xe(q,"transactions"),Pe("originalTransactionId","==",t)),l=await qe(o);l.empty||(console.log(`  ${l.size}   transactions  originalTransactionId`),await Promise.all(l.docs.map(c=>wn(c.ref))));try{const c=je(xe(q,"deletedTransactions"),Pe("userId","==",e),Pe("originalTransactionId","==",t)),d=await qe(c),h=d.docs.map(f=>{var w;return String(((w=f.data())==null?void 0:w.reference)||"")}).filter(Boolean),p=d.docs.map(f=>{var w;return String(((w=f.data())==null?void 0:w.transactionId)||"")}).filter(Boolean);for(const f of h){const w=je(xe(q,"transactions"),Pe("reference","==",f)),m=await qe(w);m.empty||(console.log(`  ${m.size}   transactions  reference=${f}`),await Promise.all(m.docs.map(b=>wn(b.ref))))}for(const f of p){try{const b=be(q,"transactions",f);(await zt(b)).exists()&&(console.log("     transactions  :",f),await wn(b))}catch{}const w=je(xe(q,"transactions"),Pe("transactionId","==",f)),m=await qe(w);m.empty||(console.log(`  ${m.size}   transactions  transactionId=${f}`),await Promise.all(m.docs.map(b=>wn(b.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},qS={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=be(q,"daily_reports_archive",e);return await Gt(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Le()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const a=je(xe(q,"daily_reports_archive"),Pe("userId","==",t),ti(e)),o=await qe(a);let l=[];try{l=(await qe(je(xe(q,"deletedDailyArchives"),Pe("userId","==",t)))).docs.map(f=>{var w,m;return{id:f.id,reportDate:String(((w=f.data())==null?void 0:w.reportDate)||""),archiveId:String(((m=f.data())==null?void 0:m.archiveId)||"")}})}catch{}const c=(f,w)=>l.some(m=>m.archiveId&&m.archiveId===f||m.reportDate&&m.reportDate===w),d=o.docs.map(f=>({id:f.id,userId:String(f.data().userId),reportDate:String(f.data().reportDate),totalTransactions:Number(f.data().totalTransactions||0),totalAmount:Number(f.data().totalAmount||0),totalWithdrawn:Number(f.data().totalWithdrawn||0),totalSent:Number(f.data().totalSent||0),profit:f.data().profit!==void 0?Number(f.data().profit):void 0,walletId:f.data().walletId??null,createdAt:et(f.data().createdAt||f.data().updatedAt)})).filter(f=>!c(f.id,f.reportDate)),h=new Map;for(const f of d){const w=h.get(f.reportDate);(!w||(((r=(n=f.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=w.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(f.reportDate,f)}const p=Array.from(h.values());return p.sort((f,w)=>f.reportDate<w.reportDate?1:-1),p}catch(a){throw console.error("Error loading daily reports archive:",a),a}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=je(xe(q,"daily_reports_archive"),Pe("userId","==",t)),s=await qe(r);let i=0;for(const a of s.docs){const o=et(a.data().createdAt);o&&o.getTime()<n.getTime()&&(await wn(a.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=je(xe(q,"daily_reports_archive"),Pe("userId","==",t)),r=(await qe(n)).docs.map(i=>({ref:i.ref,reportDate:String(i.data().reportDate||""),createdAt:et(i.data().createdAt)}));if(r.sort((i,a)=>{var o,l;if(i.reportDate&&a.reportDate)return i.reportDate<a.reportDate?1:-1;const c=((o=i.createdAt)==null?void 0:o.getTime())??0;return(((l=a.createdAt)==null?void 0:l.getTime())??0)-c}),r.length<=e)return 0;const s=r.slice(e);for(const i of s)await wn(i.ref);return console.log(`     ${t}  ${e}   ${s.length}`),s.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=je(xe(q,"daily_reports_archive"),Pe("userId","==",t)),n=await qe(e);let r=0;for(const s of n.docs)try{await wn(s.ref),r++}catch{const i=s.data();try{await ss(xe(q,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((i==null?void 0:i.reportDate)||""),createdAt:Le()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Ir={async getUserData(t){try{console.log("     :",{userId:t});const e=be(q,"users",t),n=await zt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:et(r.createdAt),updatedAt:et(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),a=n.filter(l=>s(l)!==i),o=[e,...a].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(o))}catch{}},removeLocalReceiptById(t,e){try{const n=this.getLocalReceipts(t).filter(r=>{var s,i;return![r==null?void 0:r.id,r==null?void 0:r.transactionId,r==null?void 0:r.originalTransactionId,(s=r==null?void 0:r.receipt)==null?void 0:s.transactionId,(i=r==null?void 0:r.receipt)==null?void 0:i.id].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(n))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const n=this.getLocalReceipts(t).filter(r=>{var s;return![r==null?void 0:r.reference,r==null?void 0:r.transactionReference,(s=r==null?void 0:r.receipt)==null?void 0:s.reference].map(i=>String(i||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(n))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=je(xe(q,"deletedTransactions"),Pe("userId","==",t));return Ms(e,n=>{try{n.docChanges().forEach(r=>{const s=r.doc.data();if((s==null?void 0:s.permanent)!==!0)return;const i=String((s==null?void 0:s.originalTransactionId)||""),a=String((s==null?void 0:s.transactionId)||""),o=String((s==null?void 0:s.reference)||"");i&&this.removeLocalReceiptById(t,i),a&&this.removeLocalReceiptById(t,a),o&&this.removeLocalReceiptByRef(t,o)})}catch{}},n=>{console.warn("deletedTransactions local sync error:",n)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=be(q,"users",t),r=Oo(e);await Gt(n,{...r||{},updatedAt:Le()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=be(q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Oo(r);let i={};try{const l=await zt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const a={...i,...s,updatedAt:Le()};console.log("   :",a);let o=3;for(;o>0;)try{await Gt(n,a,{merge:!0}),console.log("     ");return}catch(l){if(o--,console.warn(`     : ${o}`,l),o===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const o=je(xe(q,"userTransactions"),Pe("userId","==",t),rs("createdAt","desc"),ti(200));e=await qe(o)}catch(o){const l=String((o==null?void 0:o.message)||""),c=je(xe(q,"userTransactions"),Pe("userId","==",t));e=await qe(c)}const n=e.docs.map(o=>({id:o.id,...o.data(),createdAt:et(o.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=o=>{var l;return String((o==null?void 0:o.id)||(o==null?void 0:o.transactionId)||(o==null?void 0:o.originalTransactionId)||(o==null?void 0:o.reference)||(o==null?void 0:o.transactionReference)||((l=o==null?void 0:o.receipt)==null?void 0:l.reference)||`${(o==null?void 0:o.type)||"tx"}-${new Date((o==null?void 0:o.createdAt)||0).getTime()}`)},a=new Set;return s.filter(o=>{const l=i(o);return a.has(l)?!1:(a.add(l),!0)}).filter(o=>(o==null?void 0:o.status)!=="cancelled"&&!(o!=null&&o.isDeleted)).sort((o,l)=>{const c=o.createdAt?new Date(o.createdAt).getTime():0;return(l.createdAt?new Date(l.createdAt).getTime():0)-c})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([i,a])=>a!==void 0));try{const i=s.reference;if(i){const l=je(xe(q,"deletedTransactions"),Pe("userId","==",t),Pe("reference","==",i));if(!(await qe(l)).empty)return console.log("          ."),"skip-deleted"}{const l=je(xe(q,"deletedTransactions"),Pe("userId","==",t),Pe("permanent","==",!0)),c=await qe(l);if(!c.empty){const d=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(c.docs.find(h=>{const p=h.data(),f=String(p.originalTransactionId||p.transactionId||h.id||""),w=String(p.reference||"");return f&&d.includes(f)||w&&d.includes(w)}))return console.log("        /   ."),"skip-deleted"}}const a=je(xe(q,"deletedTransactions"),Pe("userId","==",t),rs("deletedAt","desc"),ti(20)),o=await qe(a);if(!o.empty){const l=s.senderMsisdn||s.senderPhone||s.sender_msisdn,c=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,d=Number(s.amount||0),h=s.createdAt?new Date(String(s.createdAt)):new Date,p=10*60*1e3;if(o.docs.find(f=>{const w=f.data(),m=w.senderMsisdn||w.senderPhone||w.sender_msisdn,b=w.receiverMsisdn||w.receiverPhone||w.receiver_msisdn,v=Number(w.amount||0),y=w.createdAt?new Date(String(w.createdAt)):h;return Math.abs(y.getTime()-h.getTime())<=p&&v===d&&m===l&&b===c}))return console.log("        ."),"skip-deleted"}}catch(i){console.warn("           :",i)}try{const i=je(xe(q,"userTransactions"),Pe("userId","==",t));if(s.transactionId){const w=je(xe(q,"userTransactions"),Pe("userId","==",t),Pe("transactionId","==",s.transactionId)),m=await qe(w);if(!m.empty){const b=m.docs[0];return await nn(be(q,"userTransactions",b.id),{...s,uploadedAt:Le()}),b.id}}if(s.reference){const w=je(xe(q,"userTransactions"),Pe("userId","==",t),Pe("reference","==",s.reference)),m=await qe(w);if(!m.empty){const b=m.docs[0];return await nn(be(q,"userTransactions",b.id),{...s,uploadedAt:Le()}),b.id}}const a=je(xe(q,"userTransactions"),Pe("userId","==",t),rs("createdAt","desc"),ti(20)),o=await qe(a),l=s.senderMsisdn||s.senderPhone||s.sender_msisdn,c=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,d=Number(s.amount||0),h=s.createdAt?new Date(String(s.createdAt)):new Date,p=5*60*1e3,f=o.docs.find(w=>{const m=w.data(),b=m.senderMsisdn||m.senderPhone||m.sender_msisdn,v=m.receiverMsisdn||m.receiverPhone||m.receiver_msisdn,y=Number(m.amount||0),E=et(m.createdAt);return Math.abs(E.getTime()-h.getTime())<=p&&y===d&&b===l&&v===c});if(f)return await nn(be(q,"userTransactions",f.id),{...s,uploadedAt:Le()}),f.id}catch(i){console.warn("      saveUserTransaction  :",i)}return(await ss(xe(q,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Le(),uploadedAt:Le()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const a=be(q,"userTransactions",e),o=await zt(a);if(o.exists()){const l=o.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(c=>String(c||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await wn(a),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(a){console.warn("     userTransactions   :",a)}const n=je(xe(q,"userTransactions"),Pe("userId","==",t)),r=await qe(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(a=>{var o,l;const c=a.data(),d=a.id,h=[c.id===e,c.transactionId===e,d===e,c.originalTransactionId===e,((o=c.receipt)==null?void 0:o.transactionId)===e,((l=c.receipt)==null?void 0:l.id)===e].some(p=>p===!0);return h&&console.log("     :",{docId:d,dataId:c.id,transactionId:c.transactionId,originalTransactionId:c.originalTransactionId,searchingFor:e}),h}),i=[je(xe(q,"userTransactions"),Pe("merchantUserId","==",t)),je(xe(q,"userTransactions"),Pe("createdBy","==",t))];for(const a of i)try{const o=(await qe(a)).docs.filter(l=>{var c,d;const h=l.data(),p=l.id;return h.id===e||h.transactionId===e||p===e||h.originalTransactionId===e||((c=h.receipt)==null?void 0:c.transactionId)===e||((d=h.receipt)==null?void 0:d.id)===e});o.length&&(console.log(`   ${o.length}       `),s.push(...o))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const a=s.map(async o=>{try{console.log("   :",o.id),await wn(o.ref)}catch(l){console.warn("     userTransactions ():",{id:o.id,error:l})}});await Promise.allSettled(a);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const o=be(q,"transactions",e);if((await zt(o)).exists())console.log("     transactions   "),await wn(o);else{const l=je(xe(q,"transactions"),Pe("transactionId","==",e)),c=await qe(l);c.empty||(console.log(`   ${c.size}   transactions  transactionId `),await Promise.all(c.docs.map(p=>wn(p.ref))));const d=je(xe(q,"transactions"),Pe("originalTransactionId","==",e)),h=await qe(d);h.empty||(console.log(`   ${h.size}   transactions  originalTransactionId `),await Promise.all(h.docs.map(p=>wn(p.ref))))}}catch(o){console.warn("      transactions   :",o)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},t0={async getToday(t){const e=be(q,"dailyStats",t,"today","data"),n=await zt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=be(q,"dailyStats",t,"today","data");await Gt(n,{...Oo(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=be(q,"dailyStats",t,"history",e);await Gt(r,Oo(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},kO={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Le()};return(await ss(xe(q,"installments"),n)).id},listenByUser(t,e){const n=je(xe(q,"installments"),Pe("userId","==",t));return Ms(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await nn(be(q,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await wn(be(q,"installments",t)),!0}},Du=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:kO,auditLogService:TO,dailyReportsArchiveService:qS,dailyStatsService:t0,merchantWalletService:Xs,profileService:td,profileServiceExtra:IO,recordAutoTransaction:Yq,referralService:lm,sanitizeFirestoreData:Oo,systemSettingsService:_O,telegramNotifier:xO,transactionService:Cg,userDataService:Ir},Symbol.toStringTag,{value:"Module"}));var eo=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(eo||{});const Zq=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Nu=t=>{var e,n;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const a=new Date,o=t.activatedAt,l=(e=o==null?void 0:o.toDate)!=null&&e.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&a.getTime()-l.getTime()<4*60*60*1e3,!0}const r=new Date,s=t.endDate,i=s!=null&&s.toDate?s.toDate():new Date(s);if(!i||isNaN(i.getTime())){const a=t.activatedAt,o=(n=a==null?void 0:a.toDate)!=null&&n.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return o&&r.getTime()-o.getTime()<4*60*60*1e3,!0}return r<=i},CO=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},eH=async(t,e,n,r)=>{try{const s=new Date,i=Zq(e,s),a={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:a});const o=be(q,"users",t);if(await nn(o,{subscription:a,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},n0=async t=>{try{const e=be(q,"users",t);await nn(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},tH=async t=>{try{const e=be(q,"users",t),n=await zt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},nH=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},rH=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=CO(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},sH=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var gc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(gc||(gc={}));class Hy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const iH=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},aH=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:iH(t),i=()=>s()!=="web",a=h=>{const p=c.get(h);return!!(p!=null&&p.platforms.has(s())||o(h))},o=h=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(f=>f.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,p={})=>{const f=c.get(h);if(f)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),f.proxy;const w=s(),m=o(h);let b;const v=async()=>(!b&&w in p?b=typeof p[w]=="function"?b=await p[w]():b=p[w]:e!==null&&!b&&"web"in p&&(b=typeof p.web=="function"?b=await p.web():b=p.web),b),y=(T,k)=>{var D,R;if(m){const P=m==null?void 0:m.methods.find(N=>k===N.name);if(P)return P.rtype==="promise"?N=>n.nativePromise(h,k.toString(),N):(N,$)=>n.nativeCallback(h,k.toString(),N,$);if(T)return(D=T[k])===null||D===void 0?void 0:D.bind(T)}else{if(T)return(R=T[k])===null||R===void 0?void 0:R.bind(T);throw new Hy(`"${h}" plugin is not implemented on ${w}`,gc.Unimplemented)}},E=T=>{let k;const D=(...R)=>{const P=v().then(N=>{const $=y(N,T);if($){const le=$(...R);return k=le==null?void 0:le.remove,le}else throw new Hy(`"${h}.${T}()" is not implemented on ${w}`,gc.Unimplemented)});return T==="addListener"&&(P.remove=async()=>k()),P};return D.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:T,writable:!1,configurable:!1}),D},C=E("addListener"),O=E("removeListener"),L=(T,k)=>{const D=C({eventName:T},k),R=async()=>{const N=await D;O({eventName:T,callbackId:N},k)},P=new Promise(N=>D.then(()=>N({remove:R})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},P},x=new Proxy({},{get(T,k){switch(k){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return m?L:C;case"removeListener":return O;default:return E(k)}}});return r[h]=x,c.set(h,{name:h,proxy:x,platforms:new Set([...Object.keys(p),...m?[w]:[]])}),x};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=a,n.registerPlugin=d,n.Exception=Hy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},oH=t=>t.Capacitor=aH(t),We=oH(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Dg=We.registerPlugin;class HS{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,n);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new We.Exception(e,gc.Unimplemented)}unavailable(e="not available"){return new We.Exception(e,gc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const sT=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),iT=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lH extends HS{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=iT(s).trim(),i=iT(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=sT(e.key),r=sT(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Dg("CapacitorCookies",{web:()=>new lH});const cH=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),uH=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(n=>n.toLocaleLowerCase()).reduce((n,r,s)=>(n[r]=t[e[s]],n),{})},dH=(t,e=!0)=>t?Object.entries(t).reduce((n,r)=>{const[s,i]=r;let a,o;return Array.isArray(i)?(o="",i.forEach(l=>{a=e?encodeURIComponent(l):l,o+=`${s}=${a}&`}),o.slice(0,-1)):(a=e?encodeURIComponent(i):i,o=`${s}=${a}`),`${n}&${o}`},"").substr(1):null,hH=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),r=uH(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[i,a]of Object.entries(t.data||{}))s.set(i,a);n.body=s.toString()}else if(r.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,o)=>{s.append(o,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(r.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class fH extends HS{async request(e){const n=hH(e,e.webFetchExtra),r=dH(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),a=i.headers.get("content-type")||"";let{responseType:o="text"}=i.ok?e:{};a.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await i.blob(),l=await cH(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,p)=>{d[p]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Dg("CapacitorHttp",{web:()=>new fH});const $i=Dg("Preferences",{web:()=>J(()=>dt(()=>import("./web-DTJv7uRY-Cd5asT1b.js"),[],import.meta.url),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Au=Object.freeze(Object.defineProperty({__proto__:null,Preferences:$i},Symbol.toStringTag,{value:"Module"})),pH={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},DO=_.createContext(void 0);function Na(){const t=_.useContext(DO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const mH=({children:t})=>{var e,n;const[r,s]=_.useState(null),[i,a]=_.useState(null),[o,l]=_.useState(null),[c,d]=_.useState(!1),[h,p]=_.useState(!0),f=async x=>{var T,k,D,R,P,N,$,le,fe,de,U,M,Q,Ee,oe,he;try{const ue=be(q,"profiles",x);let Be=!1;try{const Fe=await MS(ue);if(Fe.exists()){const ce=Fe.data(),Ke={userId:Fe.id,shopId:ce.shopId,role:ce.role,fullName:ce.fullName,phone:ce.phone,shopName:ce.shopName||null,approved:ce.approved,avatarId:ce.avatarId,bridgeLink:ce.bridgeLink||null,bridgeDeviceId:ce.bridgeDeviceId||null,showWithdrawNote:ce.showWithdrawNote!==void 0?!!ce.showWithdrawNote:!0,isReceiptNoteEnabled:ce.isReceiptNoteEnabled!==void 0?!!ce.isReceiptNoteEnabled:!0,smsReadingEnabled:ce.smsReadingEnabled!==void 0?!!ce.smsReadingEnabled:!0,smsAutoRegisterEnabled:ce.smsAutoRegisterEnabled!==void 0?!!ce.smsAutoRegisterEnabled:!1,createdAt:((k=(T=ce.createdAt)==null?void 0:T.toDate)==null?void 0:k.call(T))||new Date,updatedAt:((R=(D=ce.updatedAt)==null?void 0:D.toDate)==null?void 0:R.call(D))||new Date,trialStarted:ce.trialStarted||!1,trialStartDate:(N=(P=ce.trialStartDate)==null?void 0:P.toDate)==null?void 0:N.call(P),trialEndDate:(le=($=ce.trialEndDate)==null?void 0:$.toDate)==null?void 0:le.call($),trialExpired:ce.trialExpired||!1};a(Ke),Be=!0,p(!1)}}catch(Fe){console.log("Cache profile not available:",(Fe==null?void 0:Fe.code)||Fe)}try{if(!Be){const Fe=localStorage.getItem(`profile_cache_${x}`);if(Fe){const ce=JSON.parse(Fe);a(ce),Be=!0,p(!1)}}}catch{}if(!Be)for(let Fe=0;Fe<3;Fe++)try{const ce=await zt(ue);if(ce.exists()){const Ke=ce.data(),Xt={userId:ce.id,shopId:Ke.shopId,role:Ke.role,fullName:Ke.fullName,phone:Ke.phone,sim1Number:Ke.sim1Number||null,sim2Number:Ke.sim2Number||null,shopName:Ke.shopName||null,approved:Ke.approved,avatarId:Ke.avatarId,bridgeLink:Ke.bridgeLink||null,bridgeDeviceId:Ke.bridgeDeviceId||null,showWithdrawNote:Ke.showWithdrawNote!==void 0?!!Ke.showWithdrawNote:!0,isReceiptNoteEnabled:Ke.isReceiptNoteEnabled!==void 0?!!Ke.isReceiptNoteEnabled:!0,smsReadingEnabled:Ke.smsReadingEnabled!==void 0?!!Ke.smsReadingEnabled:!0,smsAutoRegisterEnabled:Ke.smsAutoRegisterEnabled!==void 0?!!Ke.smsAutoRegisterEnabled:!1,createdAt:((de=(fe=Ke.createdAt)==null?void 0:fe.toDate)==null?void 0:de.call(fe))||new Date,updatedAt:((M=(U=Ke.updatedAt)==null?void 0:U.toDate)==null?void 0:M.call(U))||new Date,trialStarted:Ke.trialStarted||!1,trialStartDate:(Ee=(Q=Ke.trialStartDate)==null?void 0:Q.toDate)==null?void 0:Ee.call(Q),trialEndDate:(he=(oe=Ke.trialEndDate)==null?void 0:oe.toDate)==null?void 0:he.call(oe),trialExpired:Ke.trialExpired||!1};a(Xt);try{localStorage.setItem(`profile_cache_${ce.id}`,JSON.stringify(Xt))}catch{}Be=!0,p(!1);break}}catch{}return Ms(ue,async Fe=>{var ce,Ke,Xt,En,fn,Mn,sn,Un;if(Fe.exists()){const Ue=Fe.data(),jn={userId:Fe.id,shopId:Ue.shopId,role:Ue.role,fullName:Ue.fullName,phone:Ue.phone,sim1Number:Ue.sim1Number||null,sim2Number:Ue.sim2Number||null,shopName:Ue.shopName||null,approved:Ue.approved,avatarId:Ue.avatarId,bridgeLink:Ue.bridgeLink||null,bridgeDeviceId:Ue.bridgeDeviceId||null,showWithdrawNote:Ue.showWithdrawNote!==void 0?!!Ue.showWithdrawNote:!0,isReceiptNoteEnabled:Ue.isReceiptNoteEnabled!==void 0?!!Ue.isReceiptNoteEnabled:!0,smsReadingEnabled:Ue.smsReadingEnabled!==void 0?!!Ue.smsReadingEnabled:!0,smsAutoRegisterEnabled:Ue.smsAutoRegisterEnabled!==void 0?!!Ue.smsAutoRegisterEnabled:!1,createdAt:((Ke=(ce=Ue.createdAt)==null?void 0:ce.toDate)==null?void 0:Ke.call(ce))||new Date,updatedAt:((En=(Xt=Ue.updatedAt)==null?void 0:Xt.toDate)==null?void 0:En.call(Xt))||new Date,trialStarted:Ue.trialStarted||!1,trialStartDate:(Mn=(fn=Ue.trialStartDate)==null?void 0:fn.toDate)==null?void 0:Mn.call(fn),trialEndDate:(Un=(sn=Ue.trialEndDate)==null?void 0:sn.toDate)==null?void 0:Un.call(sn),trialExpired:Ue.trialExpired||!1};a(jn);try{localStorage.setItem(`profile_cache_${Fe.id}`,JSON.stringify(jn))}catch{}Be||(Be=!0,p(!1))}else if(!Be)try{const Ue=await IO.getByUserId(x);if(Ue){const jn={userId:x,shopId:Ue.shopId,role:Ue.role||"user",fullName:Ue.fullName||null,phone:Ue.phone||null,shopName:Ue.shopName||null,approved:Ue.approved??!1,avatarId:Ue.avatarId||void 0,bridgeLink:Ue.bridgeLink||null,bridgeDeviceId:Ue.bridgeDeviceId||null,createdAt:Le(),updatedAt:Le()};await Gt(be(q,"profiles",x),jn,{merge:!0}),a({...Ue,userId:x,createdAt:Ue.createdAt||new Date,updatedAt:Ue.updatedAt||new Date})}else await m(x)}catch(Ue){console.error("Profile migration/create error:",Ue)}finally{Be=!0,p(!1)}},Fe=>{console.error("Profile listener error:",Fe);try{p(!1)}catch{}})}catch(ue){return console.error("Error setting up profile listener:",ue),await m(x),p(!1),()=>{}}},w=async x=>{try{const T=be(q,"users",x.uid);(await zt(T)).exists()?(await nn(T,{lastLogin:Le(),updatedAt:Le()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",x.uid)):(await Gt(T,{email:x.email||"",displayName:x.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Le(),updatedAt:Le(),lastLogin:Le()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",x.uid))}catch(T){console.error(" ensureAdminUserDoc error:",T)}},m=async(x,T,k,D,R)=>{var P,N;try{console.log("Creating default profile for user:",x);const $=lm.generateReferralCode(x);let le=null;const fe={userId:x,shopId:"default-shop",role:"user",fullName:T||" ",phone:k||null,shopName:D||null,approved:!1,referralCode:$,referredBy:R||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!0,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};a(fe),console.log("Created temporary profile:",fe);try{const{doc:de,setDoc:U,serverTimestamp:M}=await J(async()=>{const{doc:he,setDoc:ue,serverTimestamp:Be}=await Promise.resolve().then(()=>on);return{doc:he,setDoc:ue,serverTimestamp:Be}},void 0,import.meta.url),{db:Q}=await J(async()=>{const{db:he}=await Promise.resolve().then(()=>At);return{db:he}},void 0,import.meta.url),Ee={email:((P=xt.currentUser)==null?void 0:P.email)||"",displayName:T||" ",phone:k||null,shopName:D||null,isActive:!1,referralCode:$,referredBy:R||null,createdAt:M(),lastLogin:null,updatedAt:M()};if(console.log("Attempting to add user to admin collection with data:",Ee),await U(de(Q,"users",x),Ee,{merge:!0}),console.log(" User successfully added to admin collection:",Ee),R)try{const{query:he,collection:ue,where:Be,limit:Fe,getDocs:ce}=await J(async()=>{const{query:fn,collection:Mn,where:sn,limit:Un,getDocs:Ue}=await Promise.resolve().then(()=>on);return{query:fn,collection:Mn,where:sn,limit:Un,getDocs:Ue}},void 0,import.meta.url),{db:Ke}=await J(async()=>{const{db:fn}=await Promise.resolve().then(()=>At);return{db:fn}},void 0,import.meta.url),Xt=he(ue(Ke,"users"),Be("referralCode","==",R),Fe(1)),En=await ce(Xt);En.empty?console.log(" Referral code not found in users collection:",R):(le=En.docs[0].id,await lm.create({referrerId:le,referredUserId:x,referredUserEmail:((N=xt.currentUser)==null?void 0:N.email)||"",referralCode:R,status:"completed"}),console.log(" Referral record created successfully for referrer:",le))}catch(he){console.error(" Error creating referral record:",he)}const oe=await zt(de(Q,"users",x));oe.exists()?console.log(" User document verified in Firestore:",oe.data()):console.log(" User document not found after creation")}catch(de){console.error(" Error adding user to admin collection:",de)}try{const{addDoc:de,collection:U,serverTimestamp:M}=await J(async()=>{const{addDoc:he,collection:ue,serverTimestamp:Be}=await Promise.resolve().then(()=>on);return{addDoc:he,collection:ue,serverTimestamp:Be}},void 0,import.meta.url),{db:Q}=await J(async()=>{const{db:he}=await Promise.resolve().then(()=>At);return{db:he}},void 0,import.meta.url),Ee=(await de(U(Q,"shops"),{name:D||" ",ownerId:x,createdAt:M(),updatedAt:M(),isActive:!0})).id;await td.create({userId:x,shopId:Ee,role:"user",fullName:" ",phone:null});try{await td.update(x,{referralCode:$,referredBy:le||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(he){console.warn(" Failed to update profile with referral fields:",he)}const oe=await td.getById(x);oe&&(a(oe),console.log("Updated with Firebase profile:",oe))}catch(de){console.error("Error creating profile:",de),console.log("Using local profile - Firebase unavailable")}}catch($){console.error("Error creating default profile:",$)}};_.useEffect(()=>{console.log(" Setting up auth state listener"),p(!0);const x=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),p(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const T=localStorage.getItem("demoUser"),k=localStorage.getItem("demoProfile");if(T&&k){console.log(" Found demo user in localStorage");try{const R=JSON.parse(T),P=JSON.parse(k);s(R),a(P),clearTimeout(x),p(!1);return}catch(R){console.error("Error parsing demo user data:",R),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const D=lz(xt,async R=>{if(console.log(" Auth state changed:",{uid:R==null?void 0:R.uid,email:R==null?void 0:R.email,emailVerified:R==null?void 0:R.emailVerified,timestamp:new Date().toISOString()}),s(R),R){console.log(" User authenticated, starting profile hydration for:",R.uid);try{await $i.set({key:"current_user_id",value:R.uid}),console.log(" Synced current_user_id to Native:",R.uid)}catch(P){console.error("Failed to sync user ID to native:",P)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}f(R.uid),C(),w(R)}else{console.log(" User not authenticated, clearing profile"),a(null),l(null),d(!1),p(!1);try{await $i.remove({key:"current_user_id"}),await $i.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(x)});return()=>{clearTimeout(x),D()}},[]),_.useEffect(()=>{const x=async()=>{try{await O(),await C()}catch{}};try{window.addEventListener("app:softRefresh",x)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",x)}catch{}}},[r==null?void 0:r.uid]),_.useEffect(()=>{if(!(r!=null&&r.uid))return;const x=o==null?void 0:o.subscription,T=x==null?void 0:x.endDate,k=T!=null&&T.toDate?T.toDate():T?new Date(T):null;let D=null;const R=async()=>{try{const P=new Date;x&&x.isActive===!0&&k&&!isNaN(k.getTime())&&P>k&&(await n0(r.uid),await C())}catch{}};return R(),D=setInterval(R,36e5),()=>{try{clearInterval(D)}catch{}}},[r==null?void 0:r.uid,(e=o==null?void 0:o.subscription)==null?void 0:e.endDate,(n=o==null?void 0:o.subscription)==null?void 0:n.isActive]),_.useEffect(()=>{if(!(r!=null&&r.uid))return;const x=Ir.subscribeDeletedTransactionsLocalSync(r.uid);return()=>{try{x==null||x()}catch{}}},[r==null?void 0:r.uid]);const b=async(x,T,k,D,R,P)=>{try{const N=(x||"").trim().toLowerCase(),$=(T||"").trim();console.log(" Attempting to sign up user:",N);const le=await g_(xt,N,$);console.log(" Sign up successful:",le.user.uid),await m(le.user.uid,k,D,R,P),await w(le.user);try{await f(le.user.uid),await C()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(N){console.error(" Sign up error:",N);let $="    ";return N.code==="auth/email-already-in-use"?$="    ":N.code==="auth/weak-password"?$="   ":N.code==="auth/invalid-email"&&($="   "),{error:{...N,message:$}}}},v=async(x,T)=>{var k;const D=(x||"").trim().toLowerCase(),R=(T||"").trim();try{const P=M=>M.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),N=M=>M.replace(/[-]/g,Q=>String("0123456789"["".indexOf(Q)])).replace(/[-]/g,Q=>String("0123456789"["".indexOf(Q)])),$=M=>M.replace(/[0-9]/g,Q=>""[Number(Q)]),le=M=>N(P(M));if(console.log(" Attempting to sign in user:",D),D==="test@example.com"&&R==="123456"){console.log(" Demo user login detected");const M={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},Q={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(M)),localStorage.setItem("demoProfile",JSON.stringify(Q)),s(M),a(Q),p(!1),console.log(" Demo user signed in successfully"),{error:null}}let fe;const de=[le(R),P(R),$(P(R))];let U=null;for(const M of de)try{M!==R&&console.log(" Trying password variant"),fe=await u2(xt,D,M);break}catch(Q){if(U=Q,(Q==null?void 0:Q.code)!=="auth/wrong-password"&&(Q==null?void 0:Q.code)!=="auth/invalid-credential")throw Q}if(!fe)throw U||new Error("auth/invalid-credential");console.log(" Sign in successful:",fe.user.uid);try{if((await zt(be(q,"deletedUsers",fe.user.uid))).exists())return console.log(" User is deleted, signing out"),await y_(xt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(M){console.error("Error checking deleted users:",M)}await w(fe.user);try{await f(fe.user.uid),await C()}catch{}return{error:null}}catch(P){if(console.error(" Sign in error:",P),D==="test@example.com"&&P.code==="auth/user-not-found"){console.log(" Creating test user...");try{const le=await g_(xt,D,R);return console.log(" Test user created:",le.user.uid),await m(le.user.uid," ","01000000000"," "),{error:null}}catch(le){return console.error(" Error creating test user:",le),{error:le}}}let N="    ",$=P==null?void 0:P.code;if($==="auth/invalid-credential")try{const le=await sz(xt,((k=P==null?void 0:P.customData)==null?void 0:k.email)||"");Array.isArray(le)&&le.length===0?($="auth/user-not-found",N="     "):($="auth/wrong-password",N="   ")}catch{N="      "}else $==="auth/invalid-email"?N="    ":$==="auth/user-not-found"?N="     ":$==="auth/wrong-password"?N="   ":$==="auth/too-many-requests"&&(N="      ");return{error:{...P,code:$,message:N}}}},y=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),s(null),a(null),p(!1)):await y_(xt);try{await $i.remove({key:"selected_wallet_id"}),await $i.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(T){console.error(" Failed to clear Preferences:",T)}const x=(()=>{try{const T=typeof window<"u"?window:null,k=!!(T&&T.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),D=typeof window<"u"&&window.location.protocol==="file:",R=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return k||D||R||typeof import.meta<"u"&&pH&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(x)}catch{window.location.href=x}}catch(x){console.error("Sign out error:",x)}},E=async x=>{try{return await c2(xt,x),{error:null}}catch(T){console.error("Reset password error:",T);let k="        ";return T.code==="auth/user-not-found"?k="     ":T.code==="auth/invalid-email"&&(k="   "),{error:{...T,message:k}}}},C=async()=>{var x,T;if(!r){console.log("No user found for subscription check"),l(null),d(!1);return}console.log("Checking subscription status for user:",r.uid);try{const k=be(q,"users",r.uid);try{const D=await zt(k);if(D.exists()){const R=D.data();l(R);const P=((x=R==null?void 0:R.branchPackage)==null?void 0:x.status)==="active";let N=!1;P?N=!0:N=Nu(R.subscription),d(N)}}catch{}return Ms(k,async D=>{var R,P,N,$,le,fe,de,U;if(D.exists()){const M=D.data();l(M),console.log(" Subscription Data Details (Real-time):",{userId:r.uid,userEmail:r.email,subscription:M.subscription,subscriptionExists:!!M.subscription,planType:(R=M.subscription)==null?void 0:R.planType,isActive:(P=M.subscription)==null?void 0:P.isActive,startDate:(N=M.subscription)==null?void 0:N.startDate,endDate:($=M.subscription)==null?void 0:$.endDate,activatedBy:(le=M.subscription)==null?void 0:le.activatedBy,activatedAt:(fe=M.subscription)==null?void 0:fe.activatedAt,isOnFreeTrial:M.isOnFreeTrial,freeTrialEndDate:M.freeTrialEndDate,branchPackageStatus:(de=M==null?void 0:M.branchPackage)==null?void 0:de.status});const Q=((U=M==null?void 0:M.branchPackage)==null?void 0:U.status)==="active";let Ee=!1;Q?(console.log(" Branch package is active, granting access"),Ee=!0):Ee=Nu(M.subscription),d(Ee),console.log(" Subscription Validation Result (Real-time):",{userId:r.uid,isValid:Ee,isOnFreeTrial:M.isOnFreeTrial,hasActiveBranchPackage:Q,reason:Q?"Branch package active":M.subscription?M.subscription.isActive?M.subscription.planType==="lifetime"?"Lifetime plan":M.subscription.endDate?new Date>new Date(M.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const oe=M.subscription,he=oe==null?void 0:oe.planType,ue=oe==null?void 0:oe.endDate,Be=ue!=null&&ue.toDate?ue.toDate():ue?new Date(ue):null,Fe=new Date;oe&&oe.isActive===!0&&Be&&!isNaN(Be.getTime())&&Fe>Be&&(await n0(r.uid),console.log(" Subscription paused due to end date reached:",{userId:r.uid,plan:he,endDate:Be}))}catch(oe){console.warn("Failed to auto-deactivate expired subscription:",oe)}}},D=>{console.error(" Subscription listener error:",D),(async()=>{var R;try{const P=await zt(k);if(P.exists()){const N=P.data();l(N);const $=((R=N==null?void 0:N.branchPackage)==null?void 0:R.status)==="active";let le=!1;$?le=!0:le=Nu(N.subscription),d(le)}}catch{}})()})}catch(k){console.error("Error setting up subscription listener:",k);try{const D=await zt(be(q,"users",r.uid));if(D.exists()){const R=D.data();l(R);const P=((T=R==null?void 0:R.branchPackage)==null?void 0:T.status)==="active";let N=!1;P?N=!0:N=Nu(R.subscription),d(N)}}catch{}}},O=async()=>{if(r)try{console.log("Refreshing profile for user:",r.uid),await f(r.uid),await C()}catch(x){console.error("Error refreshing profile:",x)}},L={user:r,profile:i,userSubscription:o,isSubscriptionActive:c,loading:h,signUp:b,signIn:v,signOut:y,resetPassword:E,updateUserProfile:async x=>{if(r)try{const T={updatedAt:Le()};if(x.fullName!==void 0&&(T.fullName=x.fullName),x.phone!==void 0&&(T.phone=x.phone),x.sim1Number!==void 0){const k=(x.sim1Number||"").trim();T.sim1Number=k.length?k:null}if(x.sim2Number!==void 0){const k=(x.sim2Number||"").trim();T.sim2Number=k.length?k:null}if(x.bridgeLink!==void 0){const k=(x.bridgeLink||"").trim();T.bridgeLink=k.length?k:null}if(x.bridgeDeviceId!==void 0){const k=(x.bridgeDeviceId||"").trim();T.bridgeDeviceId=k.length?k:null}x.showWithdrawNote!==void 0&&(T.showWithdrawNote=!!x.showWithdrawNote),x.isReceiptNoteEnabled!==void 0&&(T.isReceiptNoteEnabled=!!x.isReceiptNoteEnabled),x.smsReadingEnabled!==void 0&&(T.smsReadingEnabled=!!x.smsReadingEnabled),x.smsAutoRegisterEnabled!==void 0&&(T.smsAutoRegisterEnabled=!!x.smsAutoRegisterEnabled),await nn(be(q,"profiles",r.uid),T),await f(r.uid)}catch(T){console.error("Error updating user profile:",T)}},updateAvatarId:async x=>{if(r)try{await nn(be(q,"profiles",r.uid),{avatarId:x,updatedAt:Le()}),await f(r.uid)}catch(T){console.error("Error updating avatarId:",T)}},refreshProfile:O,checkSubscriptionStatus:C};return I.jsx(DO.Provider,{value:L,children:t})};function NO(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Ng="Checkbox",[gH]=jo(Ng),[yH,KS]=gH(Ng);function vH(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:a,name:o,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[p,f]=jm({prop:n,defaultProp:s??!1,onChange:l,caller:Ng}),[w,m]=_.useState(null),[b,v]=_.useState(null),y=_.useRef(!1),E=w?!!a||!!w.closest("form"):!0,C={checked:p,disabled:i,setChecked:f,control:w,setControl:m,name:o,form:a,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:la(s)?!1:s,isFormControl:E,bubbleInput:b,setBubbleInput:v};return I.jsx(yH,{scope:e,...C,children:wH(h)?h(C):r})}var AO="CheckboxTrigger",RO=_.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:a,disabled:o,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:w}=KS(AO,t),m=kn(s,d),b=_.useRef(l);return _.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const y=()=>h(b.current);return v.addEventListener("reset",y),()=>v.removeEventListener("reset",y)}},[i,h]),I.jsx(Ht.button,{type:"button",role:"checkbox","aria-checked":la(l)?"mixed":l,"aria-required":c,"data-state":UO(l),"data-disabled":o?"":void 0,disabled:o,value:a,...r,ref:m,onKeyDown:kt(e,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:kt(n,v=>{h(y=>la(y)?!0:!y),w&&f&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});RO.displayName=AO;var GS=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:o,value:l,onCheckedChange:c,form:d,...h}=t;return I.jsx(vH,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:o,required:a,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:p})=>I.jsxs(I.Fragment,{children:[I.jsx(RO,{...h,ref:e,__scopeCheckbox:n}),p&&I.jsx(MO,{__scopeCheckbox:n})]})})});GS.displayName=Ng;var PO="CheckboxIndicator",OO=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=KS(PO,n);return I.jsx(_a,{present:r||la(i.checked)||i.checked===!0,children:I.jsx(Ht.span,{"data-state":UO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});OO.displayName=PO;var LO="CheckboxBubbleInput",MO=_.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:o,disabled:l,name:c,value:d,form:h,bubbleInput:p,setBubbleInput:f}=KS(LO,t),w=kn(n,f),m=NO(i),b=yb(r);_.useEffect(()=>{const y=p;if(!y)return;const E=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(E,"checked").set,O=!s.current;if(m!==i&&C){const L=new Event("click",{bubbles:O});y.indeterminate=la(i),C.call(y,la(i)?!1:i),y.dispatchEvent(L)}},[p,m,i,s]);const v=_.useRef(la(i)?!1:i);return I.jsx(Ht.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??v.current,required:o,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:w,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});MO.displayName=LO;function wH(t){return typeof t=="function"}function la(t){return t==="indeterminate"}function UO(t){return la(t)?"indeterminate":t?"checked":"unchecked"}const jO=_.forwardRef(({className:t,...e},n)=>I.jsx(GS,{ref:n,className:Cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:I.jsx(OO,{className:Cn("flex items-center justify-center text-current"),children:I.jsx(eN,{className:"h-4 w-4"})})}));jO.displayName=GS.displayName;const cm=()=>{const[t,e]=_.useState(""),[n,r]=_.useState(""),[s,i]=_.useState(!1),[a,o]=_.useState(!1),[l,c]=_.useState(!0),{signIn:d,user:h,checkSubscriptionStatus:p,loading:f}=Na(),w=Vo();_.useEffect(()=>{try{h&&!f&&w("/user/dashboard")}catch{}},[h,f,w]),_.useEffect(()=>{try{const y=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;y&&e(y)}catch{}try{const y=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;y==="true"?c(!0):y==="false"&&c(!1)}catch{}(async()=>{var y,E;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const C=await((E=(y=navigator.credentials).get)==null?void 0:E.call(y,{password:!0,mediation:"optional"}));C&&C.type==="password"&&(C.id&&e(C.id),C.password&&r(C.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const C=sessionStorage.getItem("cashy:rememberedPassword");C&&!n&&r(C)}catch{}}catch{}})()},[]);const m=async y=>{if(y.preventDefault(),a){Nn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Nn.error("   .      .");return}const E=(t||"").trim().toLowerCase(),C=(n||"").trim();if(console.log("    :",{email:E,password:"***"}),!t||!n){Nn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(E)){Nn.error("    ");return}o(!0);try{try{await oz(xt,l?f2:dz);try{window.localStorage.setItem("cashy:rememberLogin",l?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:O}=await d(E,C);if(console.log(" SignIn result:",{error:O}),O){console.error("    :",O);const L=O==null?void 0:O.code;L==="auth/user-not-found"?Nn.error("     "):L==="auth/wrong-password"?Nn.error("   "):L==="auth/invalid-credential"?Nn.error("      "):L==="auth/too-many-requests"?Nn.error("      "):Nn.error((O==null?void 0:O.message)||"    ")}else{console.log("    !"),Nn.success("   !");try{if(l&&navigator.credentials&&window.PasswordCredential){const L=new window.PasswordCredential({id:E,name:E,password:C});await navigator.credentials.store(L)}if(l)try{sessionStorage.setItem("cashy:rememberedPassword",C)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(O){console.error("   :",O),Nn.error("   ")}finally{o(!1)}},b=y=>{if(a){y.preventDefault(),y.stopPropagation(),Nn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){y.preventDefault(),y.stopPropagation(),Nn.error("   .      .");return}t||Nn.error("   "),n||Nn.error("   ");const E=(t||"").trim().toLowerCase();E&&!/^\S+@\S+\.\S+$/.test(E)&&Nn.error("    ")},v=()=>{w("/user/forgot-password")};return _.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const y=document.documentElement,E=document.body,C=y.style.overflow,O=E.style.overflow,L=y.style.overscrollBehaviorY,x=E.style.overscrollBehaviorY;return y.style.overflow="hidden",E.style.overflow="hidden",y.style.overscrollBehaviorY="none",E.style.overscrollBehaviorY="none",()=>{y.style.overflow=C||"",E.style.overflow=O||"",y.style.overscrollBehaviorY=L||"",E.style.overscrollBehaviorY=x||""}},[]),I.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:I.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:I.jsx(hN,{className:"w-10 h-10 text-white"})}),I.jsx("div",{className:"flex items-center justify-center mb-2",children:I.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),I.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),I.jsx("p",{className:"text-white/80",children:"    "})]}),I.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[I.jsxs("form",{onSubmit:m,className:"space-y-6",autoComplete:"on",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),I.jsxs("div",{className:"relative",children:[I.jsx(ew,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),I.jsx(Cp,{id:"username",type:"email",placeholder:"  ",value:t,onChange:y=>{const E=y.target.value;e(E);try{window.localStorage.setItem("cashy:lastEmail",E)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),I.jsxs("div",{className:"relative",children:[I.jsx(aN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),I.jsx(Cp,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:y=>r(y.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),I.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?I.jsx(rN,{className:"w-5 h-5"}):I.jsx(sN,{className:"w-5 h-5"})})]}),I.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[I.jsx(jO,{id:"rememberLogin",checked:l,onCheckedChange:y=>c(!!y)}),I.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),I.jsx("div",{className:"flex justify-end",children:I.jsxs(Bi,{type:"button",variant:"ghost",size:"sm",onClick:v,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[I.jsx(ew,{className:"w-4 h-4 ml-1"}),"  "]})}),I.jsx("button",{type:"submit",onClick:b,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:a?I.jsxs("div",{className:"flex items-center justify-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):I.jsxs("div",{className:"flex items-center justify-center",children:[I.jsx(YD,{className:"w-5 h-5 ml-2"})," "]})})]}),I.jsxs("div",{className:"mt-6 text-center space-y-3",children:[I.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",I.jsx(kA,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),I.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",I.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",I.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),I.jsx("div",{className:"mt-6 text-center",children:I.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},bH=Object.freeze(Object.defineProperty({__proto__:null,default:cm},Symbol.toStringTag,{value:"Module"})),SH=()=>{const t=Vo(),e=ds(),{signOut:n,user:r,userSubscription:s}=Na(),{toast:i}=Mm(),[a,o]=_.useState(!1),[l,c]=_.useState(!1),d=[{id:"home",label:"",icon:Dj,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:iN,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:XD,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:tw,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:JD,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:Nf,path:"/transactions"},{id:"settings",label:"",icon:nw,path:"/profile-settings"}],h=[{id:"installment",label:"",icon:ZD,action:()=>{var m;o(!1);const b=(m=s==null?void 0:s.subscription)==null?void 0:m.planType;if(b===eo.TAHWEELA||b===eo.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:fN,action:()=>{o(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:nN,action:()=>{o(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:uN,action:()=>{o(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:Nf,action:()=>{o(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:dN,action:()=>{o(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:tw,action:()=>{o(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:tN,action:()=>{o(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:oN,action:()=>{o(!1);const m=`   
  : ${(r==null?void 0:r.email)||" "}`,b=encodeURIComponent(m);window.open(`https://wa.me/201000392539?text=${b}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:Zv,action:async()=>{o(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],p=[{id:"shop-expenses-settings",label:" ",icon:Nf,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:nw,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:Zv,action:async()=>{c(!1);try{await n()}catch(m){console.error("Logout error:",m)}},color:"#EF4444"}],f=(m,b,v,y)=>{var E;const C=((E=s==null?void 0:s.subscription)==null?void 0:E.planType)===eo.TAHWEELA,O=x=>["/user/dashboard","/profile-settings"].includes(x),L=x=>x==="debts";if(v){if(C&&!L(y)&&!O(m)){i({title:"  ",description:"      .",variant:"destructive"});return}v()}else if(b&&m==="/add"){if(C){i({title:"  ",description:"      .",variant:"destructive"});return}o(!a)}else if(!b){if(C&&!O(m)){i({title:"  ",description:"      .",variant:"destructive"});return}t(m)}},w=m=>e.pathname===m;return I.jsxs("div",{className:"mobile-bottom-nav",children:[a&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"quick-actions-overlay",onClick:()=>o(!1)}),I.jsx("div",{className:"floating-actions-container",children:h.map((m,b)=>I.jsxs("div",{className:"floating-action-button",onClick:()=>{var v;if(((v=s==null?void 0:s.subscription)==null?void 0:v.planType)===eo.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}m.action()},style:{"--action-color":m.color,"--animation-delay":`${b*.1}s`},children:[I.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:I.jsx(m.icon,{className:"action-icon"})}),I.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),l&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),I.jsx("div",{className:"floating-actions-container",children:p.map((m,b)=>I.jsxs("div",{className:"floating-action-button",onClick:()=>{var v;const y=(v=s==null?void 0:s.subscription)==null?void 0:v.planType,E=new Set(["logout","profile-settings"]);if(y===eo.TAHWEELA&&!E.has(m.id)){i({title:"  ",description:"      .",variant:"destructive"});return}m.action()},style:{"--action-color":m.color,"--animation-delay":`${b*.1}s`},children:[I.jsx("div",{className:"floating-action-icon",style:{backgroundColor:m.color},children:I.jsx(m.icon,{className:"action-icon"})}),I.jsx("span",{className:"floating-action-label",children:m.label})]},m.id))})]}),I.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(m=>{const b=m.icon,v=w(m.path);return I.jsxs("button",{onClick:()=>f(m.path,m.isSpecial,m.action,m.id),className:`mobile-nav-item ${v?"active":""} ${m.isSpecial?"special":""}`,type:"button","aria-label":m.label,children:[I.jsx("div",{className:`nav-icon-container ${m.isSpecial?"special-icon":""} ${m.isSpecial&&m.id==="add"&&a?"special-open":""}`,children:I.jsx(b,{className:`nav-icon ${v?"active-icon":""} ${m.isSpecial?"special-icon-svg":""} ${m.isSpecial&&m.id==="add"&&a?"rotated":""} ${m.isSpecial&&m.id==="settings"&&l?"rotated":""}`})}),!m.isSpecial&&I.jsx("span",{className:`nav-label ${v?"active-label":""}`,children:m.label})]},m.id)})})]})};var aT,oT;const oo=(oT=(aT=import.meta)==null?void 0:aT.env)==null?void 0:oT.VITE_ANDROID_DOWNLOAD_URL;var lT,cT;const lo=(cT=(lT=import.meta)==null?void 0:lT.env)==null?void 0:cT.VITE_PC_DOWNLOAD_URL;var uT,dT;const co=(dT=(uT=import.meta)==null?void 0:uT.env)==null?void 0:dT.VITE_PC32_DOWNLOAD_URL;var hT,fT;const uo=(fT=(hT=import.meta)==null?void 0:hT.env)==null?void 0:fT.VITE_ANDROID_VERSION;var pT,mT;const ho=(mT=(pT=import.meta)==null?void 0:pT.env)==null?void 0:mT.VITE_PC_VERSION;var gT,yT;const fo=(yT=(gT=import.meta)==null?void 0:gT.env)==null?void 0:yT.VITE_PC32_VERSION;function ln(t){if(t)try{const e=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return e==null?void 0:e[1]}catch{return}}function FO(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const ba=["siteContent","appDownloads"],um=["siteContent","desktop_updates"],dm=["siteContent","android_updates"],$d="appDownloadsCache";function VO(){try{const e=localStorage.getItem($d);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||oo,pcUrl:(n==null?void 0:n.pcUrl)||lo,pc32Url:(n==null?void 0:n.pc32Url)||co,androidVersion:(n==null?void 0:n.androidVersion)||uo,pcVersion:(n==null?void 0:n.pcVersion)||ho,pc32Version:(n==null?void 0:n.pc32Version)||fo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=ln(r.pcUrl)),r.androidVersion||(r.androidVersion=ln(r.androidUrl)),r.pc32Version||(r.pc32Version=ln(r.pc32Url)),r}}catch{}const t={androidUrl:oo,pcUrl:lo,pc32Url:co,androidVersion:uo,pcVersion:ho,pc32Version:fo};return t.pcVersion||(t.pcVersion=ln(t.pcUrl)),t.androidVersion||(t.androidVersion=ln(t.androidUrl)),t.pc32Version||(t.pc32Version=ln(t.pc32Url)),t}async function BO(){try{const t=await zt(be(q,ba[0],ba[1]));if(t.exists()){const n=t.data();try{localStorage.setItem($d,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||oo,pcUrl:(n==null?void 0:n.pcUrl)||lo,pc32Url:(n==null?void 0:n.pc32Url)||co,androidVersion:(n==null?void 0:n.androidVersion)||uo,pcVersion:(n==null?void 0:n.pcVersion)||ho,pc32Version:(n==null?void 0:n.pc32Version)||fo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=ln(r.pcUrl)),r.androidVersion||(r.androidVersion=ln(r.androidUrl)),r.pc32Version||(r.pc32Version=ln(r.pc32Url)),r}const e={androidUrl:oo,pcUrl:lo,pc32Url:co,androidVersion:uo,pcVersion:ho,pc32Version:fo};return e.pcVersion||(e.pcVersion=ln(e.pcUrl)),e.androidVersion||(e.androidVersion=ln(e.androidUrl)),e.pc32Version||(e.pc32Version=ln(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const r=localStorage.getItem($d);if(r){const s=JSON.parse(r),i={androidUrl:(s==null?void 0:s.androidUrl)||oo,pcUrl:(s==null?void 0:s.pcUrl)||lo,pc32Url:(s==null?void 0:s.pc32Url)||co,androidVersion:(s==null?void 0:s.androidVersion)||uo,pcVersion:(s==null?void 0:s.pcVersion)||ho,pc32Version:(s==null?void 0:s.pc32Version)||fo,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};return i.pcVersion||(i.pcVersion=ln(i.pcUrl)),i.androidVersion||(i.androidVersion=ln(i.androidUrl)),i.pc32Version||(i.pc32Version=ln(i.pc32Url)),i}}catch{}const n={androidUrl:oo,pcUrl:lo,pc32Url:co,androidVersion:uo,pcVersion:ho,pc32Version:fo};return n.pcVersion||(n.pcVersion=ln(n.pcUrl)),n.androidVersion||(n.androidVersion=ln(n.androidUrl)),n.pc32Version||(n.pc32Version=ln(n.pc32Url)),n}}function zO(t){try{const e=be(q,ba[0],ba[1]);return Ms(e,n=>{const r=(n.exists()?n.data():{})||{},s={androidUrl:(r==null?void 0:r.androidUrl)||oo,pcUrl:(r==null?void 0:r.pcUrl)||lo,pc32Url:(r==null?void 0:r.pc32Url)||co,androidVersion:(r==null?void 0:r.androidVersion)||uo,pcVersion:(r==null?void 0:r.pcVersion)||ho,pc32Version:(r==null?void 0:r.pc32Version)||fo,updatedAt:r==null?void 0:r.updatedAt,updatedBy:r==null?void 0:r.updatedBy};s.pcVersion||(s.pcVersion=ln(s.pcUrl)),s.androidVersion||(s.androidVersion=ln(s.androidUrl)),s.pc32Version||(s.pc32Version=ln(s.pc32Url));try{localStorage.setItem($d,JSON.stringify(s))}catch{}t(s)},n=>{console.warn("listenAppDownloads error; falling back to cache",n);try{const r=localStorage.getItem($d);r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}async function EH(t,e,n,r,s,i=12e4){const a=WS(),o=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${o}`,c=wO(a,l);return new Promise((d,h)=>{const p=$q(c,t);let f=!1;const w=setTimeout(()=>{f=!0;try{p.cancel()}catch{}h(new Error("Upload timed out"))},i);p.on("state_changed",m=>{const b=Math.round(m.bytesTransferred/m.totalBytes*100);s&&s(b)},m=>{clearTimeout(w),h(m)},async()=>{try{if(clearTimeout(w),f)return;const m=await vO(c),b={updatedAt:Le(),updatedBy:n||"admin"};e==="android"?(b.androidUrl=m,r&&(b.androidVersion=r)):e==="pc"?(b.pcUrl=m,r&&(b.pcVersion=r)):(b.pc32Url=m,r&&(b.pc32Version=r));const v=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=Gt(be(q,ba[0],ba[1]),b,{merge:!0});let E=!1;const C=new Promise(O=>setTimeout(()=>{E=!0,O()},v));try{await Promise.race([y,C])}catch(O){console.warn(" Firestore write error, proceeding with URL only:",O)}E&&console.warn(" Firestore update timed out;             ."),d(m)}catch(m){h(m)}})})}async function IH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Le(),updatedBy:e||"admin"};await Gt(be(q,ba[0],ba[1]),r,{merge:!0})}async function $O(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Le(),updatedBy:e||"admin"};await Gt(be(q,um[0],um[1]),r,{merge:!0})}function QS(t){try{const e=be(q,um[0],um[1]);return Ms(e,n=>{const r=(n.exists()?n.data():{})||{},s={version:r!=null&&r.version?String(r.version):void 0,downloadURL_64:r!=null&&r.downloadURL_64?String(r.downloadURL_64):void 0,downloadURL_32:r!=null&&r.downloadURL_32?String(r.downloadURL_32):void 0,notes:r!=null&&r.notes?String(r.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(s))}catch{}t(s)},()=>{try{const n=localStorage.getItem("desktop_update_cache");n&&t(JSON.parse(n))}catch{}})}catch{return()=>{}}}function JS(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function WO(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Le(),updatedBy:e||"admin"};await Gt(be(q,dm[0],dm[1]),r,{merge:!0})}function qO(t){try{const e=be(q,dm[0],dm[1]);return Ms(e,n=>{const r=(n.exists()?n.data():{})||{},s={version:r!=null&&r.version?String(r.version):void 0,url:r!=null&&r.url?String(r.url):void 0,notes:r!=null&&r.notes?String(r.notes):void 0,force:!!(r!=null&&r.force),code:typeof(r==null?void 0:r.code)=="number"?r.code:typeof(r==null?void 0:r.versionCode)=="number"?r.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(s))}catch{}t(s)},()=>{try{const n=localStorage.getItem("android_update_cache");n&&t(JSON.parse(n))}catch{}})}catch{return()=>{}}}const HO=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:BO,getCachedOrEnvAppDownloads:VO,listenAndroidUpdates:qO,listenAppDownloads:zO,listenDesktopUpdates:QS,resolveDownloadUrl:FO,selectDesktopUrl:JS,setAndroidUpdateInfo:WO,setAppDownloadLinks:IH,setDesktopUpdateInfo:$O,uploadAppBinaryResumable:EH},Symbol.toStringTag,{value:"Module"})),_H=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=V.useState(!1),[s,i]=V.useState(!1),[a,o]=V.useState(!1),[l,c]=V.useState(0),[d,h]=V.useState(""),[p,f]=V.useState(!1),w=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(C){console.warn("failed to minimize",C)}},m=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(C){console.warn("failed to close",C)}},b=async()=>{if(!p){f(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>f(!1),600);return}try{window.location.reload()}catch{}}catch(C){console.warn("failed to soft refresh",C),f(!1)}}};if(V.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{o(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(C=>{const O=(C==null?void 0:C.percent)==null?0:Number(C.percent);o(!0),c(Math.max(0,Math.min(100,isNaN(O)?0:O)))}),t.checkUpdate()}catch(C){console.warn("update init failed",C)}},[e,t]),V.useEffect(()=>{const C=QS(O=>{if(String((O==null?void 0:O.version)||"")){r(!0);const L=JS({downloadURL_64:O==null?void 0:O.downloadURL_64,downloadURL_32:O==null?void 0:O.downloadURL_32})||"";h(L)}});return()=>{try{C()}catch{}}},[]),!e)return null;const[v,y]=V.useState(!1),E=async()=>{try{if(!t)return;v?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),y(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),y(!0))}catch(C){console.warn("window toggle failed",C)}};return I.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[I.jsx("button",{type:"button","aria-label":"",title:"",onClick:m,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:I.jsx(Bm,{className:"w-5 h-5"})}),I.jsx("button",{type:"button","aria-label":"",title:" ",onClick:b,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:I.jsx(cN,{className:`w-5 h-5 ${p?"animate-spin":""}`})}),I.jsx("button",{type:"button","aria-label":"",title:"",onClick:w,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:I.jsx(lN,{className:"w-5 h-5"})}),I.jsx("button",{type:"button","aria-label":"/",title:v?"  ":"   ",onClick:E,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:I.jsx(Nj,{className:"w-5 h-5"})})]})},hm=({className:t=""})=>{var e,n;const r=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((n=(e=import.meta)==null?void 0:e.env)==null?void 0:n.BASE_URL)||"/"}`,[s,i]=_.useState(`${r}logo.svg`),[a,o]=_.useState(0),l=_.useCallback(()=>{o(c=>{const d=c+1;return d===1?i(`${r}logo.png`):d===2&&i(`${r}placeholder.svg`),d})},[]);return I.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:I.jsxs("div",{className:"flex flex-col items-center justify-center",children:[I.jsx("img",{src:s,alt:"logo",onError:l,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),I.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},vT=Dg("AppLauncher",{web:()=>J(()=>dt(()=>import("./web-CwYSDaHQ-TFogmDaD.js"),[],import.meta.url),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function KO(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,r=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let s=!1;try{We&&We.getPlatform()!=="web"&&(vT.openUrl({url:r}),s=!0)}catch{}if(!s)try{window.location.href=r,s=!0}catch{}if(!s){try{window.location.href=n}catch{}try{We&&We.getPlatform()!=="web"&&vT.openUrl({url:n})}catch{}}}function YS(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function GO(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?YS(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function xH(t,e,n){const r=YS(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function TH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function kH(t){const e=TH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function CH(t,e,n){const r=GO(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=kH(t||e);KO(r,s)}async function DH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function Ag(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function QO(t,e,n=0){const r=Ag(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const fm=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:Ag,calculateProfit:QO},Symbol.toStringTag,{value:"Module"})),NH=t=>t==="withdraw"||t==="receive"?"receive":"send",AH=async t=>{if(!t)return null;const e=je(xe(q,"transactions"),Pe("reference","==",t),ti(1)),n=await qe(e);return n.empty?null:n.docs[0].id},RH=async t=>{var e;try{const n=await $i.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return XO(t||((e=xt.currentUser)==null?void 0:e.uid)||"")||null},Ky=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await Xs.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},JO=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await AH(t.reference);if(e)return{id:e,duplicate:!0};const n=NH(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let a=await Ky(t.receiverMsisdn);if(a||(a=await Ky(t.senderMsisdn)),!a){const o=String(t.lineId||"").replace(/\D/g,"");o.length>=10&&(a=await Ky(o))}r=a||await RH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await Cg.create(s);try{const a="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await DH(o,a)}catch(a){console.warn("   :",a)}try{const a=t.merchantUserId||t.createdBy;if(a){const o=n==="receive"?"withdraw":"send",l=Ag(t.amount,n);await Ir.saveUserTransaction(a,{type:o,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(a){console.warn("      userTransactions   :",a)}return{id:i,duplicate:!1}},qf=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},YO=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=xt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(f=>qf(f)).filter(f=>!!f):[],i=`wallets_${r}`,a=typeof localStorage<"u"?localStorage.getItem(i):null,o=a?JSON.parse(a):[],l=f=>String(f||"").replace(/\D/g,""),c=Array.isArray(o)?o.map(f=>({walletId:String((f==null?void 0:f.id)||""),msisdn:qf(String((f==null?void 0:f.phone)||(f==null?void 0:f.msisdn)||"")),isDefault:!!(f!=null&&f.isDefault)})).filter(f=>f.walletId&&f.msisdn):[],d=(await Xs.getByMerchantId(r)||[]).map(f=>({walletId:String((f==null?void 0:f.id)||""),msisdn:qf(String((f==null?void 0:f.msisdn)||"")),isDefault:!!(f!=null&&f.isDefault)})).filter(f=>f.walletId&&f.msisdn),h=[...c,...d],p=new Map;for(const f of s){const w=l(f);for(const m of h){const b=l(m.msisdn);if(m.msisdn===f){p.set(m.walletId,m.msisdn);continue}if(b.slice(-5)===w.slice(-5)){p.set(m.walletId,m.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",p.size)}catch{}if(p.size===1){const[f,w]=Array.from(p.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:f,msisdn:w})}catch{}return{walletId:f,msisdn:w}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function PH(t,e){try{const n=i=>qf(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const a=n(i),o=s(a),l=r.find(d=>d.msisdn===a);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===o.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function OH(t){var e;try{const n=t.userId||((e=xt.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await YO(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let a={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;a=c?JSON.parse(c):{}}catch{}const o=String(t.subId??""),l=String(t.slotIndex??"");return o&&a[o]&&a[o].walletId?{walletId:a[o].walletId,msisdn:String(a[o].msisdn||"")}:l&&a[`slot_${l}`]&&a[`slot_${l}`].walletId?{walletId:a[`slot_${l}`].walletId,msisdn:String(a[`slot_${l}`].msisdn||"")}:null}catch{return null}}function LH(t){var e;try{const n=`simWalletBindings_${t.userId||((e=xt.currentUser)==null?void 0:e.uid)||"default"}`;let r={};try{const s=typeof localStorage<"u"?localStorage.getItem(n):null;r=s?JSON.parse(s):{}}catch{}t.subId!=null&&(r[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(r[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(n,JSON.stringify(r))}catch{}}catch{}}const MH=()=>{var t,e;return((e=(t=import.meta)==null?void 0:t.env)==null?void 0:e.VITE_CLOUDFLARE_SMS_WEBHOOK_URL)||"https://frosty-sun-0baf.alkaptin2030.workers.dev/"},XO=t=>{var e,n;try{const r=t||((e=xt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,a=`wallets_${r}`,o=s.find(c=>c.startsWith(i));if(o){const c=localStorage.getItem(o)||"";if(c)return c}const l=s.find(c=>c.startsWith(a));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(p=>p==null?void 0:p.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function ZO(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||{};try{console.log(" APP RECEIVED SMS ",r)}catch{}const s=String(r.text||""),i=String(r.sender||r.msisdn||""),a=((n=xt.currentUser)==null?void 0:n.uid)||"",o=XO(a)||"",l=void 0,c=MH();if(!s||!a||!o)return;const d=new Date().toISOString().slice(0,16).replace("T"," ");try{await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,sender:i,timestamp:d,walletId:o,userId:a,shopId:l})})}catch{}}catch{}};return window.addEventListener("mobileSmsReceived",t),()=>{window.removeEventListener("mobileSmsReceived",t)}}const kl=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:LH,detectWalletFromSim:PH,identifyWalletBySim:YO,initMobileSmsBridge:ZO,processMobileTransactionNotification:JO,resolveWalletBySimOrSlot:OH},Symbol.toStringTag,{value:"Module"})),UH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},jH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},FH=()=>{var t,e;try{const n=((t=xt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const a=JSON.parse(i);if(Array.isArray(a)&&a.length>0){const o=a.find(l=>l==null?void 0:l.isDefault);return(o==null?void 0:o.id)||((e=a[0])==null?void 0:e.id)||null}}}}catch{}return null},VH=()=>{var t;try{const e=((t=xt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},BH=async(t,e)=>{var n;const r=String((t==null?void 0:t.text)||"").trim(),s=String((t==null?void 0:t.title)||"").trim(),i=String((t==null?void 0:t.packageName)||"").toLowerCase(),a=String((t==null?void 0:t.appName)||"").toLowerCase();if(!r||!(i.includes("vodafone")||a.includes("vodafone")))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const o=/||/.test(r),l=/|/.test(r),c=UH(r),d=jH(r);if(!c||c<=0)return;const h=((n=xt.currentUser)==null?void 0:n.uid)||"",p=FH()||void 0,f=VH()||"",w=p||"default-line";if(!h||!p||!f)return;const m=`${s}|${r}|${(t==null?void 0:t.postedAt)||Date.now()}`,b=`VF-${btoa(unescape(encodeURIComponent(m))).slice(0,24)}`,v=o?"withdraw":l?"transfer":"withdraw",y={type:v,amount:c,provider:"vodafone_cash",shopId:f,lineId:w,walletId:p,senderMsisdn:v==="transfer"&&d||void 0,receiverMsisdn:v==="withdraw"&&d||void 0,reference:b,createdBy:h,merchantUserId:h,note:"  "};try{await JO(y)}catch{}},Fr={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Ir.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=a=>{if(!a)return null;try{return a!=null&&a.toDate?a.toDate():new Date(a)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const a=JSON.parse(n);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}else if(t){const a=localStorage.getItem("reportsData");if(a)try{const o=JSON.parse(a);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(o){console.error("     :",o)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Ir.updateUserData(t,{reportsData:{...r}})}catch(a){console.warn("     Firebase   :",a)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const o=JSON.parse(s);i={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}let a=[];if(t==="daily"){const o=new Date().toDateString();a=e.filter(l=>new Date(l.createdAt).toDateString()===o).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...a])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const o=new Date().getMonth(),l=new Date().getFullYear();a=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===o&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...a])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Ir.updateUserData(n,{reportsData:{...i}})}catch(o){console.warn("     Firebase   :",o)}return console.log(`   ${t==="daily"?"":""} `),a}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=Fr.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(i=>!s.includes(i.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=Fr.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Ir.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=Fr.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=Fr.getReportsData(e),s=new Date(t.createdAt),i=new Date,a=i.getMonth(),o=i.getFullYear(),l=Fr.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===a&&s.getFullYear()===o&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Ir.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},zH=Fr,$H=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:zH,reportsService:Fr},Symbol.toStringTag,{value:"Module"})),Wd={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=be(q,"walletLimits",t),s={updatedAt:Le(),ownerId:(n=xt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await Gt(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=be(q,"walletLimits",t);try{const s=await zt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||ct.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:ct.now()};return await Gt(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Le(),ownerId:(e=xt.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=be(q,"walletLimits",t);return await Gt(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Le(),updatedAt:Le(),ownerId:(e=xt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=be(q,"walletLimits",t);return await Gt(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Le(),updatedAt:Le(),ownerId:(e=xt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=be(q,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const a={updatedAt:Le()};return n==="transfer"?(a.dailyTransferUsed=i.dailyTransferUsed+e,a.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(a.dailyWithdrawUsed=i.dailyWithdrawUsed+e,a.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await Gt(s,{...a},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=be(q,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:Le()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await Gt(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=be(q,"walletLimits",t);return await Gt(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Le(),lastMonthlyReset:Le(),updatedAt:Le(),ownerId:(e=xt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},pm=Object.freeze(Object.defineProperty({__proto__:null,default:Wd,walletDailyLimitsService:Wd},Symbol.toStringTag,{value:"Module"}));class WH{constructor(){z1(this,"intervalId",null),z1(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=xt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const r=new Date().toISOString().slice(0,10),s=await t0.getToday(n);await t0.saveToHistory(n,r,s||{}),console.log("      :",r),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await Fr.syncReportsDataFromFirebase(e);const n=Fr.getReportsData(e);if(!n.lastDailyResetDate||!Fr.shouldResetDailyReports(n.lastDailyResetDate))return;const r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate()-1),i=s.toDateString(),a=await Ir.getUserTransactions(e),o=v=>{const y=String(v||"").toLowerCase();return["completed","confirmed","success"].includes(y)?"completed":["failed","error"].includes(y)?"failed":["cancelled","canceled"].includes(y)?"cancelled":"pending"},l=(a||[]).filter(v=>{var y,E;const C=(y=v==null?void 0:v.createdAt)!=null&&y.toDate?v.createdAt.toDate():(v==null?void 0:v.createdAt)instanceof Date?v.createdAt:new Date(v==null?void 0:v.createdAt);return((E=C==null?void 0:C.toDateString)==null?void 0:E.call(C))===i&&o(v==null?void 0:v.status)==="completed"}),c=l.length,d=l.reduce((v,y)=>v+Number(y.amount||0),0),h=v=>{const y=String(((v==null?void 0:v.type)??(v==null?void 0:v.txnType))||"").toLowerCase();return y==="withdraw"||y==="withdrawal"||y==="receive"},p=v=>{const y=String(((v==null?void 0:v.type)??(v==null?void 0:v.txnType))||"").toLowerCase();return y==="send"||y==="transfer"},f=l.filter(h).reduce((v,y)=>{const E=y.withdrawnAmount!==void 0?Number(y.withdrawnAmount):Number(y.amount||0);return v+E},0),w=l.filter(p).reduce((v,y)=>{const E=y.sentAmount!==void 0?Number(y.sentAmount):Number(y.amount||0);return v+E},0),m=l.reduce((v,y)=>v+Number(Fr.calculateTransactionProfit(y)||0),0),b=new Date(s).toISOString().slice(0,10);await qS.add({userId:e,reportDate:b,totalTransactions:c,totalAmount:Number(d.toFixed(2)),totalWithdrawn:Number(f.toFixed(2)),totalSent:Number(w.toFixed(2)),profit:Number(m.toFixed(2)),walletId:null}),console.log("    :",b)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await Xs.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await Wd.resetDailyLimits(i)}catch{}if(r)try{await Wd.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const wT=new WH,Gy=768;function eL(){const[t,e]=_.useState(void 0);return _.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Gy-1}px)`),r=()=>{e(window.innerWidth<Gy)};return n.addEventListener("change",r),e(window.innerWidth<Gy),()=>n.removeEventListener("change",r)},[]),!!t}function qH(){const[t,e]=_.useState("default"),[n,r]=_.useState(!1);return _.useEffect(()=>{try{const s=localStorage.getItem("notificationPermission");(s==="granted"||s==="denied"||s==="default")&&e(s);const i=localStorage.getItem("notificationConsentRequested")==="true";r(i)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const s=await Notification.requestPermission();e(s);try{localStorage.setItem("notificationPermission",s),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return s}return"unsupported"}}}const tL=_.createContext(void 0);function HH({children:t}){const{profile:e,user:n,loading:r}=Na(),[s,i]=_.useState(null),[a,o]=_.useState(null),[l,c]=_.useState(!0);_.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let p=null;try{p=localStorage.getItem(h)||null}catch{}i(p||e.shopId),o((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),_.useEffect(()=>{const h=()=>{const f=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const w=localStorage.getItem(f);i(w||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const p=f=>{const w=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!f.key||f.key!==w))try{const m=localStorage.getItem(w);i(m||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",p),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",p)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:a,loading:l};return I.jsx(tL.Provider,{value:d,children:t})}function nL(){const t=_.useContext(tL);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var Qy="focusScope.autoFocusOnMount",Jy="focusScope.autoFocusOnUnmount",bT={bubbles:!1,cancelable:!0},KH="FocusScope",XS=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[o,l]=_.useState(null),c=as(s),d=as(i),h=_.useRef(null),p=kn(e,m=>l(m)),f=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let m=function(E){if(f.paused||!o)return;const C=E.target;o.contains(C)?h.current=C:Mi(h.current,{select:!0})},b=function(E){if(f.paused||!o)return;const C=E.relatedTarget;C!==null&&(o.contains(C)||Mi(h.current,{select:!0}))},v=function(E){if(document.activeElement===document.body)for(const C of E)C.removedNodes.length>0&&Mi(o)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const y=new MutationObserver(v);return o&&y.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),y.disconnect()}}},[r,o,f.paused]),_.useEffect(()=>{if(o){ET.add(f);const m=document.activeElement;if(!o.contains(m)){const b=new CustomEvent(Qy,bT);o.addEventListener(Qy,c),o.dispatchEvent(b),b.defaultPrevented||(GH(ZH(rL(o)),{select:!0}),document.activeElement===m&&Mi(o))}return()=>{o.removeEventListener(Qy,c),setTimeout(()=>{const b=new CustomEvent(Jy,bT);o.addEventListener(Jy,d),o.dispatchEvent(b),b.defaultPrevented||Mi(m??document.body,{select:!0}),o.removeEventListener(Jy,d),ET.remove(f)},0)}}},[o,c,d,f]);const w=_.useCallback(m=>{if(!n&&!r||f.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(b&&v){const y=m.currentTarget,[E,C]=QH(y);E&&C?!m.shiftKey&&v===C?(m.preventDefault(),n&&Mi(E,{select:!0})):m.shiftKey&&v===E&&(m.preventDefault(),n&&Mi(C,{select:!0})):v===y&&m.preventDefault()}},[n,r,f.paused]);return I.jsx(Ht.div,{tabIndex:-1,...a,ref:p,onKeyDown:w})});XS.displayName=KH;function GH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Mi(r,{select:e}),document.activeElement!==n)return}function QH(t){const e=rL(t),n=ST(e,t),r=ST(e.reverse(),t);return[n,r]}function rL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ST(t,e){for(const n of t)if(!JH(n,{upTo:e}))return n}function JH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function YH(t){return t instanceof HTMLInputElement&&"select"in t}function Mi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&YH(t)&&e&&t.select()}}var ET=XH();function XH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=IT(t,e),t.unshift(e)},remove(e){var n;t=IT(t,e),(n=t[0])==null||n.resume()}}}function IT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function ZH(t){return t.filter(e=>e.tagName!=="A")}var Yy=0;function sL(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??_T()),document.body.insertAdjacentElement("beforeend",t[1]??_T()),Yy++,()=>{Yy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Yy--}},[])}function _T(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var _s=function(){return _s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},_s.apply(this,arguments)};function iL(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function eK(t,e,n){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Hf="right-scroll-bar-position",Kf="width-before-scroll-bar",tK="with-scroll-bars-hidden",nK="--removed-body-scroll-bar-size";function Xy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function rK(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var sK=typeof window<"u"?_.useLayoutEffect:_.useEffect,xT=new WeakMap;function iK(t,e){var n=rK(null,function(r){return t.forEach(function(s){return Xy(s,r)})});return sK(function(){var r=xT.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(o){i.has(o)||Xy(o,null)}),i.forEach(function(o){s.has(o)||Xy(o,a)})}xT.set(n,t)},[t]),n}function aK(t){return t}function oK(t,e){e===void 0&&(e=aK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(i),a=n}var l=function(){var d=a;a=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){a.push(d),c()},filter:function(d){return a=a.filter(d),n}}}};return s}function lK(t){t===void 0&&(t={});var e=oK(null);return e.options=_s({async:!0,ssr:!1},t),e}var aL=function(t){var e=t.sideCar,n=iL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,_s({},n))};aL.isSideCarExport=!0;function cK(t,e){return t.useMedium(e),aL}var oL=lK(),Zy=function(){},Rg=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:Zy,onWheelCapture:Zy,onTouchMoveCapture:Zy}),s=r[0],i=r[1],a=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,p=t.sideCar,f=t.noRelative,w=t.noIsolation,m=t.inert,b=t.allowPinchZoom,v=t.as,y=v===void 0?"div":v,E=t.gapMode,C=iL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=p,L=iK([n,e]),x=_s(_s({},C),s);return _.createElement(_.Fragment,null,d&&_.createElement(O,{sideCar:oL,removeScrollBar:c,shards:h,noRelative:f,noIsolation:w,inert:m,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:E}),a?_.cloneElement(_.Children.only(o),_s(_s({},x),{ref:L})):_.createElement(y,_s({},x,{className:l,ref:L}),o))});Rg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rg.classNames={fullWidth:Kf,zeroRight:Hf};var uK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uK();return e&&t.setAttribute("nonce",e),t}function hK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var pK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=dK())&&(hK(e,n),fK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},mK=function(){var t=pK();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},lL=function(){var t=mK(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},gK={left:0,top:0,right:0,gap:0},ev=function(t){return parseInt(t||"",10)||0},yK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[ev(n),ev(r),ev(s)]},vK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return gK;var e=yK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},wK=lL(),Fl="data-scroll-locked",bK=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(tK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Fl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hf,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Kf,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Hf," .").concat(Hf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Kf," .").concat(Kf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fl,`] {
    `).concat(nK,": ").concat(o,`px;
  }
`)},TT=function(){var t=parseInt(document.body.getAttribute(Fl)||"0",10);return isFinite(t)?t:0},SK=function(){_.useEffect(function(){return document.body.setAttribute(Fl,(TT()+1).toString()),function(){var t=TT()-1;t<=0?document.body.removeAttribute(Fl):document.body.setAttribute(Fl,t.toString())}},[])},EK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;SK();var i=_.useMemo(function(){return vK(s)},[s]);return _.createElement(wK,{styles:bK(i,!e,s,n?"":"!important")})},r0=!1;if(typeof window<"u")try{var cf=Object.defineProperty({},"passive",{get:function(){return r0=!0,!0}});window.addEventListener("test",cf,cf),window.removeEventListener("test",cf,cf)}catch{r0=!1}var ol=r0?{passive:!1}:!1,IK=function(t){return t.tagName==="TEXTAREA"},cL=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!IK(t)&&n[e]==="visible")},_K=function(t){return cL(t,"overflowY")},xK=function(t){return cL(t,"overflowX")},kT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=uL(t,r);if(s){var i=dL(t,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},TK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},kK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},uL=function(t,e){return t==="v"?_K(e):xK(e)},dL=function(t,e){return t==="v"?TK(e):kK(e)},CK=function(t,e){return t==="h"&&e==="rtl"?-1:1},DK=function(t,e,n,r,s){var i=CK(t,window.getComputedStyle(e).direction),a=i*r,o=n.target,l=e.contains(o),c=!1,d=a>0,h=0,p=0;do{if(!o)break;var f=dL(t,o),w=f[0],m=f[1],b=f[2],v=m-b-i*w;(w||v)&&uL(t,o)&&(h+=v,p+=w);var y=o.parentNode;o=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(c=!0),c},uf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},CT=function(t){return[t.deltaX,t.deltaY]},DT=function(t){return t&&"current"in t?t.current:t},NK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},AK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},RK=0,ll=[];function PK(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(RK++)[0],i=_.useState(lL)[0],a=_.useRef(t);_.useEffect(function(){a.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=eK([t.lockRef.current],(t.shards||[]).map(DT)).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var o=_.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var v=uf(m),y=n.current,E="deltaX"in m?m.deltaX:y[0]-v[0],C="deltaY"in m?m.deltaY:y[1]-v[1],O,L=m.target,x=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in m&&x==="h"&&L.type==="range")return!1;var T=kT(x,L);if(!T)return!0;if(T?O=x:(O=x==="v"?"h":"v",T=kT(x,L)),!T)return!1;if(!r.current&&"changedTouches"in m&&(E||C)&&(r.current=O),!O)return!0;var k=r.current||O;return DK(k,b,m,k==="h"?E:C)},[]),l=_.useCallback(function(m){var b=m;if(!(!ll.length||ll[ll.length-1]!==i)){var v="deltaY"in b?CT(b):uf(b),y=e.current.filter(function(O){return O.name===b.type&&(O.target===b.target||b.target===O.shadowParent)&&NK(O.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var E=(a.current.shards||[]).map(DT).filter(Boolean).filter(function(O){return O.contains(b.target)}),C=E.length>0?o(b,E[0]):!a.current.noIsolation;C&&b.cancelable&&b.preventDefault()}}},[]),c=_.useCallback(function(m,b,v,y){var E={name:m,delta:b,target:v,should:y,shadowParent:OK(v)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(C){return C!==E})},1)},[]),d=_.useCallback(function(m){n.current=uf(m),r.current=void 0},[]),h=_.useCallback(function(m){c(m.type,CT(m),m.target,o(m,t.lockRef.current))},[]),p=_.useCallback(function(m){c(m.type,uf(m),m.target,o(m,t.lockRef.current))},[]);_.useEffect(function(){return ll.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,ol),document.addEventListener("touchmove",l,ol),document.addEventListener("touchstart",d,ol),function(){ll=ll.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,ol),document.removeEventListener("touchmove",l,ol),document.removeEventListener("touchstart",d,ol)}},[]);var f=t.removeScrollBar,w=t.inert;return _.createElement(_.Fragment,null,w?_.createElement(i,{styles:AK(s)}):null,f?_.createElement(EK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function OK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const LK=cK(oL,PK);var ZS=_.forwardRef(function(t,e){return _.createElement(Rg,_s({},t,{ref:e,sideCar:LK}))});ZS.classNames=Rg.classNames;var MK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},cl=new WeakMap,df=new WeakMap,hf={},tv=0,hL=function(t){return t&&(t.host||hL(t.parentNode))},UK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=hL(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},jK=function(t,e,n,r){var s=UK(e,Array.isArray(t)?t:[t]);hf[n]||(hf[n]=new WeakMap);var i=hf[n],a=[],o=new Set,l=new Set(s),c=function(h){!h||o.has(h)||(o.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(o.has(p))d(p);else try{var f=p.getAttribute(r),w=f!==null&&f!=="false",m=(cl.get(p)||0)+1,b=(i.get(p)||0)+1;cl.set(p,m),i.set(p,b),a.push(p),m===1&&w&&df.set(p,!0),b===1&&p.setAttribute(n,"true"),w||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return d(e),o.clear(),tv++,function(){a.forEach(function(h){var p=cl.get(h)-1,f=i.get(h)-1;cl.set(h,p),i.set(h,f),p||(df.has(h)||h.removeAttribute(r),df.delete(h)),f||h.removeAttribute(n)}),tv--,tv||(cl=new WeakMap,cl=new WeakMap,df=new WeakMap,hf={})}},fL=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=MK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),jK(r,s,n,"aria-hidden")):function(){return null}},Pg="Dialog",[pL,FK]=jo(Pg),[VK,ps]=pL(Pg),mL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,o=_.useRef(null),l=_.useRef(null),[c,d]=jm({prop:r,defaultProp:s??!1,onChange:i,caller:Pg});return I.jsx(VK,{scope:e,triggerRef:o,contentRef:l,contentId:Af(),titleId:Af(),descriptionId:Af(),open:c,onOpenChange:d,onOpenToggle:_.useCallback(()=>d(h=>!h),[d]),modal:a,children:n})};mL.displayName=Pg;var gL="DialogTrigger",yL=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(gL,n),i=kn(e,s.triggerRef);return I.jsx(Ht.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":n1(s.open),...r,ref:i,onClick:kt(t.onClick,s.onOpenToggle)})});yL.displayName=gL;var e1="DialogPortal",[BK,vL]=pL(e1,{forceMount:void 0}),wL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ps(e1,e);return I.jsx(BK,{scope:e,forceMount:n,children:_.Children.map(r,a=>I.jsx(_a,{present:n||i.open,children:I.jsx(Um,{asChild:!0,container:s,children:a})}))})};wL.displayName=e1;var mm="DialogOverlay",bL=_.forwardRef((t,e)=>{const n=vL(mm,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ps(mm,t.__scopeDialog);return i.modal?I.jsx(_a,{present:r||i.open,children:I.jsx($K,{...s,ref:e})}):null});bL.displayName=mm;var zK=Kl("DialogOverlay.RemoveScroll"),$K=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(mm,n);return I.jsx(ZS,{as:zK,allowPinchZoom:!0,shards:[s.contentRef],children:I.jsx(Ht.div,{"data-state":n1(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Lo="DialogContent",SL=_.forwardRef((t,e)=>{const n=vL(Lo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ps(Lo,t.__scopeDialog);return I.jsx(_a,{present:r||i.open,children:i.modal?I.jsx(WK,{...s,ref:e}):I.jsx(qK,{...s,ref:e})})});SL.displayName=Lo;var WK=_.forwardRef((t,e)=>{const n=ps(Lo,t.__scopeDialog),r=_.useRef(null),s=kn(e,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return fL(i)},[]),I.jsx(EL,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:kt(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:kt(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:kt(t.onFocusOutside,i=>i.preventDefault())})}),qK=_.forwardRef((t,e)=>{const n=ps(Lo,t.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return I.jsx(EL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var a,o;(a=t.onInteractOutside)==null||a.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;(o=n.triggerRef.current)!=null&&o.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),EL=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,o=ps(Lo,n),l=_.useRef(null),c=kn(e,l);return sL(),I.jsxs(I.Fragment,{children:[I.jsx(XS,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:I.jsx(Jd,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":n1(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(KK,{titleId:o.titleId}),I.jsx(QK,{contentRef:l,descriptionId:o.descriptionId})]})]})}),t1="DialogTitle",IL=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(t1,n);return I.jsx(Ht.h2,{id:s.titleId,...r,ref:e})});IL.displayName=t1;var _L="DialogDescription",xL=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(_L,n);return I.jsx(Ht.p,{id:s.descriptionId,...r,ref:e})});xL.displayName=_L;var TL="DialogClose",kL=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(TL,n);return I.jsx(Ht.button,{type:"button",...r,ref:e,onClick:kt(t.onClick,()=>s.onOpenChange(!1))})});kL.displayName=TL;function n1(t){return t?"open":"closed"}var CL="DialogTitleWarning",[HK,DL]=MU(CL,{contentName:Lo,titleName:t1,docsSlug:"dialog"}),KK=({titleId:t})=>{const e=DL(CL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},GK="DialogDescriptionWarning",QK=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${DL(GK).contentName}}.`;return _.useEffect(()=>{var r;const s=(r=t.current)==null?void 0:r.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},NL=mL,AL=yL,RL=wL,r1=bL,s1=SL,i1=IL,a1=xL,PL=kL;const s0=NL,JK=AL,YK=RL,OL=_.forwardRef(({className:t,...e},n)=>I.jsx(r1,{ref:n,className:Cn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));OL.displayName=r1.displayName;const gm=_.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},a)=>I.jsxs(YK,{children:[I.jsx(OL,{}),I.jsxs(s1,{ref:a,className:Cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg radix-dialog-content",t),onInteractOutside:o=>{r&&o.preventDefault()},onEscapeKeyDown:o=>{s&&o.preventDefault()},...i,children:[e,!n&&I.jsxs(PL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[I.jsx(Bm,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gm.displayName=s1.displayName;const ym=({className:t,...e})=>I.jsx("div",{className:Cn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ym.displayName="DialogHeader";const LL=({className:t,...e})=>I.jsx("div",{className:Cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});LL.displayName="DialogFooter";const vm=_.forwardRef(({className:t,...e},n)=>I.jsx(i1,{ref:n,className:Cn("text-lg font-semibold leading-none tracking-tight",t),...e}));vm.displayName=i1.displayName;const wm=_.forwardRef(({className:t,...e},n)=>I.jsx(a1,{ref:n,className:Cn("text-sm text-muted-foreground",t),...e}));wm.displayName=a1.displayName;const XK={},NT=V.lazy(()=>J(()=>dt(()=>import("./Index-BOQ7d5bH-BHxOHkRz.js"),[],import.meta.url),[],import.meta.url)),ff=V.lazy(()=>J(()=>dt(()=>import("./LandingPage-Ck_thcuJ-BiJcasai.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),Ct([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),AT=V.lazy(()=>J(()=>dt(()=>import("./SubscriptionsPage-BW6M_1kO-3tWWvnmC.js"),__vite__mapDeps([13,1,4,14,15,6,7,5,12]),import.meta.url),Ct([13,1,4,14,15,6,7,5,12]),import.meta.url)),RT=V.lazy(()=>J(()=>dt(()=>import("./AuthPage-Bk33vzoa-6dYamBzu.js"),__vite__mapDeps([16,1,2,3,8]),import.meta.url),Ct([16,1,2,3,8]),import.meta.url)),pf=V.lazy(()=>J(()=>dt(()=>import("./TopUpPage-D1sGJ46Q-Dyn2XGKk.js"),__vite__mapDeps([17,1,18]),import.meta.url),Ct([17,1,18]),import.meta.url)),PT=V.lazy(()=>J(()=>dt(()=>import("./AdminTopupsPage-2d09w3qZ-BVhMex6M.js"),__vite__mapDeps([19,18]),import.meta.url),Ct([19,18]),import.meta.url)),OT=V.lazy(()=>J(()=>dt(()=>import("./AdminNotificationsPage-DrTU2ja9-BsABTxfv.js"),__vite__mapDeps([20,1,21,22,23]),import.meta.url),Ct([20,1,21,22,23]),import.meta.url)),mf=V.lazy(()=>J(()=>dt(()=>import("./UserRegisterPage-BkStJ7GT-C5fh_Ph1.js"),__vite__mapDeps([24,1,21,25,26,27,28,29]),import.meta.url),Ct([24,1,21,25,26,27,28,29]),import.meta.url)),LT=V.lazy(()=>J(()=>dt(()=>import("./UserAccountSetupPage-DfkNvLbN-z4cczItS.js"),__vite__mapDeps([30,1,21,25,29,28,12]),import.meta.url),Ct([30,1,21,25,29,28,12]),import.meta.url)),MT=V.lazy(()=>J(()=>dt(()=>import("./ForgotPasswordCodePage-HPzyWAKF-CAbxFoWY.js"),[],import.meta.url),[],import.meta.url)),UT=V.lazy(()=>J(()=>dt(()=>import("./DashboardLoginPage-Dx1dVP9h-Bb8eHzVY.js"),__vite__mapDeps([31,1,10]),import.meta.url),Ct([31,1,10]),import.meta.url)),jT=V.lazy(()=>J(()=>dt(()=>import("./ProtectedDashboard-C8t-KjRB-DudbAKrz.js"),__vite__mapDeps([32,1,33,18,34,21,10,35,36,37,26,12,38]),import.meta.url),Ct([32,1,33,18,34,21,10,35,36,37,26,12,38]),import.meta.url)),Gf=V.lazy(()=>J(()=>dt(()=>import("./ProtectedUserDashboard-C-4M1qmw-Cd43hNsh.js"),__vite__mapDeps([39,40,23,34,21,10,35]),import.meta.url),Ct([39,40,23,34,21,10,35]),import.meta.url)),FT=V.lazy(()=>J(()=>dt(()=>import("./MerchantDashboard-MhD3X7nR-BEquAvEY.js"),__vite__mapDeps([41,42,18,43,33,44,1,45,21,46]),import.meta.url),Ct([41,42,18,43,33,44,1,45,21,46]),import.meta.url)),VT=V.lazy(()=>J(()=>dt(()=>import("./PendingApprovalPage-Cwm_Vl7i-BRxxKWZd.js"),__vite__mapDeps([47,48,10]),import.meta.url),Ct([47,48,10]),import.meta.url)),BT=V.lazy(()=>J(()=>dt(()=>import("./AdminLogin-K9PWWH_Q-DH1-xAKl.js"),__vite__mapDeps([49,10]),import.meta.url),Ct([49,10]),import.meta.url)),zT=V.lazy(()=>J(()=>dt(()=>import("./ProtectedAdminDashboard-B6elE5YX-CKyuwSd4.js"),__vite__mapDeps([50,14,3,51,42,18,43,21,34,10,35,52,1,22,25,33,53,4,28,54,55,40,15,9,7,8,12,38]),import.meta.url),Ct([50,14,3,51,42,18,43,21,34,10,35,52,1,22,25,33,53,4,28,54,55,40,15,9,7,8,12,38]),import.meta.url)),$T=V.lazy(()=>J(()=>dt(()=>import("./AuthTestPage-DIITkwbv-xUUTcmQe.js"),__vite__mapDeps([56,1,21]),import.meta.url),Ct([56,1,21]),import.meta.url)),WT=V.lazy(()=>J(()=>dt(()=>import("./ProfileSettingsPage-B-oVcHqn-B0T1w4hD.js"),__vite__mapDeps([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url),Ct([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url)),qT=V.lazy(()=>J(()=>dt(()=>import("./TransactionsPage-ByCAGb8I-D2VC8Ull.js"),__vite__mapDeps([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url),Ct([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url)),HT=V.lazy(()=>J(()=>dt(()=>import("./WalletAdditionPage-C24d5nZ3-BQHsSbCA.js"),__vite__mapDeps([61,1,21,18,5,26,28,35]),import.meta.url),Ct([61,1,21,18,5,26,28,35]),import.meta.url)),KT=V.lazy(()=>J(()=>dt(()=>import("./ReferralsPage-D564qIVT-DAsrUuh_.js"),__vite__mapDeps([62,1,33,25,27,23,12,55,38]),import.meta.url),Ct([62,1,33,25,27,23,12,55,38]),import.meta.url)),GT=V.lazy(()=>J(()=>dt(()=>import("./CPanelPage-DnPtgr8M-CtMbrlwV.js"),__vite__mapDeps([63,1,21]),import.meta.url),Ct([63,1,21]),import.meta.url)),QT=V.lazy(()=>J(()=>dt(()=>import("./CPanelLoginPage-Zrepfhau-pOVr-oQE.js"),__vite__mapDeps([64,21,1,10]),import.meta.url),Ct([64,21,1,10]),import.meta.url)),JT=V.lazy(()=>J(()=>dt(()=>import("./NotFound-Dy2-tAFC-Bx3RyrIt.js"),[],import.meta.url),[],import.meta.url)),YT=V.lazy(()=>J(()=>dt(()=>import("./PrivacyPolicyPage-CFqL25zK-ZNWbzKTg.js"),[],import.meta.url),[],import.meta.url)),ML=new c6({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=g6({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});m6({queryClient:ML,persister:t,maxAge:24*60*60*1e3})}catch{}const ZK=()=>{if(!(We!=null&&We.isNativePlatform&&We.getPlatform()==="android"))return null;const t=()=>{try{window.location.reload()}catch{}};return I.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:I.jsx("button",{type:"button","aria-label":"",title:" ",onClick:t,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:I.jsx(cN,{className:"w-5 h-5"})})})},XT=()=>{const t=ds(),{user:e,loading:n}=Na(),r=(We==null?void 0:We.isNativePlatform)&&We.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/";return n?null:!!e&&(s||i)?I.jsx(SH,{}):null},ZT=()=>{var t;const e=eL(),{profile:n,user:r}=Na(),{shopId:s}=nL();ds();const i=Vo(),{toast:a}=Mm(),[o,l]=V.useState(!1),[c,d]=V.useState(null),[h,p]=V.useState(!1),[f,w]=V.useState(null),[m,b]=V.useState(!1),[v,y]=V.useState(""),[E,C]=V.useState(""),[O,L]=V.useState(null),[x,T]=V.useState(null),k=V.useRef(null),D=V.useRef(null),R=V.useRef(!1),P=V.useRef(null),N=V.useRef(()=>{try{const ne=localStorage.getItem("sms_suppressed_ids")||"[]",X=Array.isArray(JSON.parse(ne))?JSON.parse(ne):[];return new Set(X.map(G=>String(G||"")))}catch{return new Set}}),[$,le]=V.useState(!1);qH();const[fe,de]=V.useState(!1),[U,M]=V.useState(null),[Q,Ee]=V.useState(""),[oe,he]=V.useState(!1),[ue,Be]=V.useState(!1),[Fe,ce]=V.useState(""),[Ke,Xt]=V.useState(""),En=V.useCallback(()=>{try{const ne=window.AudioContext||window.webkitAudioContext;if(!ne)return;const X=new ne,G=X.createOscillator(),W=X.createGain();G.type="sine",W.gain.setValueAtTime(0,X.currentTime),G.connect(W),W.connect(X.destination);const ie=X.currentTime;G.frequency.setValueAtTime(800,ie),W.gain.linearRampToValueAtTime(.15,ie+.02),G.start(ie),G.frequency.exponentialRampToValueAtTime(1200,ie+.08),W.gain.exponentialRampToValueAtTime(1e-5,ie+.32),G.stop(ie+.35)}catch{}},[]),fn=ne=>{try{const X=String(ne||"").replace(/[^0-9+]/g,"");if(!X)return"";if(X.startsWith("+20")){const G=X.slice(3);return G.startsWith("1")?"0"+G:G}if(X.startsWith("20")){const G=X.slice(2);return G.startsWith("1")?"0"+G:G}return X.startsWith("0")?X:/^(10|11|12|15)/.test(X)?"0"+X:X}catch{return""}},Mn=ne=>{try{const X=String(ne||""),G=X.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i),W=G?parseFloat(String(G[1]).replace(",",".")):0,ie=X.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i),ge=ie?fn(ie[1]):void 0,Z=X.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),Se=X.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),Ce=Z?String(Z[1]).trim():Se?String(Se[1]).trim():void 0,Me=X.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),Oe=X.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),Ne=Me?String(Me[1]).trim():void 0;return{amount:W,sender:ge,senderName:Ce,reference:Ne||(Oe?String(Oe[1]).trim():void 0)}}catch{return{amount:0}}};V.useEffect(()=>{(async()=>{var ne;try{if(!fe||!U){he(!1);return}const{auth:X}=await J(async()=>{const{auth:ge}=await Promise.resolve().then(()=>At);return{auth:ge}},void 0,import.meta.url),G=((ne=X.currentUser)==null?void 0:ne.uid)||"",W=G?`selectedWallet_${G}`:"selectedWallet_default",ie=localStorage.getItem(W)||"";if(!ie){he(!0);return}try{const{merchantWalletService:ge}=await J(async()=>{const{merchantWalletService:Ce}=await Promise.resolve().then(()=>Du);return{merchantWalletService:Ce}},void 0,import.meta.url),Z=await ge.getById(ie),Se=Z&&Z.defaultWithdrawCommission!=null;he(!Se)}catch{he(!0)}}catch{he(!0)}})()},[fe,U]);const sn=async ne=>{try{const{merchantWalletService:X,detectWalletFromSim:G}=await J(async()=>{const{merchantWalletService:Oe,detectWalletFromSim:Ne}=await Promise.resolve().then(()=>kl);return{merchantWalletService:Oe,detectWalletFromSim:Ne}},void 0,import.meta.url),W=(r==null?void 0:r.uid)||"";if(!W)return;const ie=`wallets_${W}`,ge=typeof localStorage<"u"?localStorage.getItem(ie):null,Z=ge?JSON.parse(ge):[],Se=await X.getByMerchantId(W),Ce=[...(Array.isArray(Z)?Z:[]).map(Oe=>({id:String((Oe==null?void 0:Oe.id)||""),phone:String((Oe==null?void 0:Oe.phone)||(Oe==null?void 0:Oe.msisdn)||""),isDefault:!!(Oe!=null&&Oe.isDefault)})),...(Array.isArray(Se)?Se:[]).map(Oe=>({id:String((Oe==null?void 0:Oe.id)||""),msisdn:String((Oe==null?void 0:Oe.msisdn)||""),isDefault:!!(Oe!=null&&Oe.isDefault)}))],Me=await G(ne||[],Ce);if(Me&&Me.walletId)try{localStorage.setItem(`selectedWallet_${W}`,Me.walletId)}catch{}}catch{}};_.useEffect(()=>{const ne=X=>{try{BH((X==null?void 0:X.detail)||{},{toast:a})}catch{}};try{window.addEventListener("vfNotificationReceived",ne)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",ne)}catch{}}},[a]),_.useEffect(()=>{const ne=async X=>{var G;try{const W=(X==null?void 0:X.detail)||{},ie=Number(W.amount||0),ge=String(W.sender||""),Z=Array.isArray(W.activeSimMsisdns)?W.activeSimMsisdns.map(Ie=>String(Ie||"")):[];try{console.log("VF Auto SMS  activeSimMsisdns",Z)}catch{}const Se=String(W.text||""),Ce=Mn(Se),Me=Ce.amount||ie;if(!Me||Me<=0||!nk(Se,String(W.sender||"")))return;const{auth:Oe}=await J(async()=>{const{auth:Ie}=await Promise.resolve().then(()=>At);return{auth:Ie}},void 0,import.meta.url),Ne=((G=Oe.currentUser)==null?void 0:G.uid)||"";let ve=s||"";if(!Ne){try{a({title:"  ",description:"   "})}catch{}return}if(!ve)try{const{doc:Ie,getDoc:ze}=await J(async()=>{const{doc:Ve,getDoc:pt}=await Promise.resolve().then(()=>on);return{doc:Ve,getDoc:pt}},void 0,import.meta.url),{db:It}=await J(async()=>{const{db:Ve}=await Promise.resolve().then(()=>At);return{db:Ve}},void 0,import.meta.url),Je=await ze(Ie(It,"profiles",Ne));if(Je.exists()){const Ve=Je.data(),pt=String((Ve==null?void 0:Ve.shopId)||"").trim();pt&&(ve=pt)}}catch{}if(!ve){try{a({title:"  ",description:"   "})}catch{}return}try{const{doc:Ie,getDoc:ze}=await J(async()=>{const{doc:_e,getDoc:De}=await Promise.resolve().then(()=>on);return{doc:_e,getDoc:De}},void 0,import.meta.url),{db:It}=await J(async()=>{const{db:_e}=await Promise.resolve().then(()=>At);return{db:_e}},void 0,import.meta.url);let Je="",Ve="",pt=!0,Ge=!1;try{const _e=await ze(Ie(It,"profiles",Ne));if(_e.exists()){const De=_e.data();pt=(De==null?void 0:De.smsReadingEnabled)!==void 0?!!De.smsReadingEnabled:!0,Ge=(De==null?void 0:De.smsAutoRegisterEnabled)===!0}}catch{}try{const _e=localStorage.getItem(`sim1Number_${Ne}`)??localStorage.getItem("sim1Number"),De=localStorage.getItem(`sim2Number_${Ne}`)??localStorage.getItem("sim2Number");Je=String(_e||"").trim(),Ve=String(De||"").trim()}catch{}try{const{Preferences:_e}=await J(async()=>{const{Preferences:yt}=await Promise.resolve().then(()=>Au);return{Preferences:yt}},void 0,import.meta.url),De=await _e.get({key:"sim1_number"}),rt=await _e.get({key:"sim2_number"});!Je&&De!=null&&De.value&&(Je=String(De.value).trim()),!Ve&&rt!=null&&rt.value&&(Ve=String(rt.value).trim())}catch{}if(!pt)return;const mt=String((W==null?void 0:W.simNumber)||"");let $e=Z&&Z.length>0?Z:mt?[mt]:[];Array.isArray(Z)&&Z.length===1&&Je&&($e=[Je]),$e.length===0&&($e=[Je,Ve].filter(Boolean));try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify($e))}catch{}const Xe=mt||$e[0]||"";if(Xe)try{localStorage.setItem("lastSmsSimMsisdn",Xe)}catch{}const{resolveWalletBySimOrSlot:Re,bindSlotWalletMapping:_t,merchantWalletService:ht}=await J(async()=>{const{resolveWalletBySimOrSlot:_e,bindSlotWalletMapping:De,merchantWalletService:rt}=await Promise.resolve().then(()=>kl);return{resolveWalletBySimOrSlot:_e,bindSlotWalletMapping:De,merchantWalletService:rt}},void 0,import.meta.url),gt=Ne;let Nt=await Re({simNumbers:$e,userId:gt});if(!Nt&&$e.length>0){try{await sn($e)}catch{}const _e=localStorage.getItem(`selectedWallet_${gt}`)||"";if(_e)try{const De=await ht.getById(_e);Nt={walletId:_e,msisdn:String((De==null?void 0:De.msisdn)||"")}}catch{}}if(Nt&&Nt.walletId){try{localStorage.setItem(`selectedWallet_${gt}`,Nt.walletId)}catch{}try{_t({userId:gt,walletId:Nt.walletId,msisdn:Nt.msisdn})}catch{}}const K=Ce.reference||"",re=(Nt==null?void 0:Nt.msisdn)||(Ne?await nv(Ne):""),ke={amount:Me,sender:Ce.sender||ge,senderName:Ce.senderName,text:Se,simNumber:Xe};if(Ge)try{await Un(ke)}catch{}else{try{const{addDoc:_e,collection:De,serverTimestamp:rt}=await J(async()=>{const{addDoc:Ot,collection:Lr,serverTimestamp:Mr}=await Promise.resolve().then(()=>on);return{addDoc:Ot,collection:Lr,serverTimestamp:Mr}},void 0,import.meta.url),{db:yt}=await J(async()=>{const{db:Ot}=await Promise.resolve().then(()=>At);return{db:Ot}},void 0,import.meta.url),Tt=await _e(De(yt,"pendingSmsPopups"),{userId:Ne,shopId:ve,payload:{...ke,reference:K,walletMsisdn:re},status:"pending",createdAt:rt()});M({...ke,reference:K,providerLabel:"VF-Cash",walletMsisdn:re,popupId:Tt.id})}catch{M({...ke,reference:K,providerLabel:"VF-Cash",walletMsisdn:re})}de(!0);try{En()}catch{}}}catch{}}catch{}};try{window.addEventListener("vfCashTransactionDetected",ne)}catch{}return()=>{try{window.removeEventListener("vfCashTransactionDetected",ne)}catch{}}},[a,s]),_.useEffect(()=>{const ne=async X=>{var G;try{const W=(X==null?void 0:X.detail)||{},ie=String(W.text||"");if(!ie||!/\s*\s*/.test(ie)||!nk(ie,String(W.sender||"")))return;const{auth:ge}=await J(async()=>{const{auth:Ce}=await Promise.resolve().then(()=>At);return{auth:Ce}},void 0,import.meta.url),Z=((G=ge.currentUser)==null?void 0:G.uid)||"";let Se=s||"";if(!Z){try{a({title:"  ",description:"   "})}catch{}return}if(!Se)try{const{doc:Ce,getDoc:Me}=await J(async()=>{const{doc:ve,getDoc:Ie}=await Promise.resolve().then(()=>on);return{doc:ve,getDoc:Ie}},void 0,import.meta.url),{db:Oe}=await J(async()=>{const{db:ve}=await Promise.resolve().then(()=>At);return{db:ve}},void 0,import.meta.url),Ne=await Me(Ce(Oe,"profiles",Z));if(Ne.exists()){const ve=Ne.data(),Ie=String((ve==null?void 0:ve.shopId)||"").trim();Ie&&(Se=Ie)}}catch{}if(!Se){try{a({title:"  ",description:"   "})}catch{}return}try{const{doc:Ce,getDoc:Me}=await J(async()=>{const{doc:K,getDoc:re}=await Promise.resolve().then(()=>on);return{doc:K,getDoc:re}},void 0,import.meta.url),{db:Oe}=await J(async()=>{const{db:K}=await Promise.resolve().then(()=>At);return{db:K}},void 0,import.meta.url);let Ne="",ve="",Ie=!0,ze=!1;try{const K=await Me(Ce(Oe,"profiles",Z));if(K.exists()){const re=K.data();Ie=(re==null?void 0:re.smsReadingEnabled)!==void 0?!!re.smsReadingEnabled:!0,ze=(re==null?void 0:re.smsAutoRegisterEnabled)===!0}}catch{}try{const K=localStorage.getItem(`sim1Number_${Z}`)??localStorage.getItem("sim1Number"),re=localStorage.getItem(`sim2Number_${Z}`)??localStorage.getItem("sim2Number");Ne=String(K||"").trim(),ve=String(re||"").trim()}catch{}try{const{Preferences:K}=await J(async()=>{const{Preferences:_e}=await Promise.resolve().then(()=>Au);return{Preferences:_e}},void 0,import.meta.url),re=await K.get({key:"sim1_number"}),ke=await K.get({key:"sim2_number"});!Ne&&re!=null&&re.value&&(Ne=String(re.value).trim()),!ve&&ke!=null&&ke.value&&(ve=String(ke.value).trim())}catch{}if(!Ie)return;const It=String(W.msisdn||"");try{console.log("VF SMS Broadcast  subId",W==null?void 0:W.subId,"msisdn",It)}catch{}let Je=Array.isArray(W.activeSimMsisdns)?W.activeSimMsisdns:It?[It]:[];if(Array.isArray(W.activeSimMsisdns)&&W.activeSimMsisdns.length===1&&Ne&&(Je=[Ne]),Je.length===0){const K=Number((W==null?void 0:W.slot)||(W==null?void 0:W.subId)||-1);K===1&&Ne?Je=[Ne]:K===2&&ve?Je=[ve]:Je=[Ne,ve].filter(Boolean)}try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(Je))}catch{}const Ve=It||Je[0]||"";if(Ve)try{localStorage.setItem("lastSmsSimMsisdn",Ve)}catch{}const{resolveWalletBySimOrSlot:pt,bindSlotWalletMapping:Ge,merchantWalletService:mt}=await J(async()=>{const{resolveWalletBySimOrSlot:K,bindSlotWalletMapping:re,merchantWalletService:ke}=await Promise.resolve().then(()=>kl);return{resolveWalletBySimOrSlot:K,bindSlotWalletMapping:re,merchantWalletService:ke}},void 0,import.meta.url),$e=Z;let Xe=await pt({simNumbers:Je,subId:Number((W==null?void 0:W.subId)||-1),slotIndex:Number((W==null?void 0:W.slot)||-1),userId:$e});if(!Xe&&Je.length>0){try{await sn(Je)}catch{}const K=localStorage.getItem(`selectedWallet_${$e}`)||"";if(K)try{const re=await mt.getById(K);Xe={walletId:K,msisdn:String((re==null?void 0:re.msisdn)||"")}}catch{}}if(Xe&&Xe.walletId){try{localStorage.setItem(`selectedWallet_${$e}`,Xe.walletId)}catch{}try{const K=`selectedWallet_${$e}_${Se}`;localStorage.setItem(K,Xe.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Xe.walletId}}))}catch{}try{const{Preferences:K}=await J(async()=>{const{Preferences:re}=await Promise.resolve().then(()=>Au);return{Preferences:re}},void 0,import.meta.url);await K.set({key:"selected_wallet_id",value:Xe.walletId}),await K.set({key:"current_user_id",value:$e})}catch{}try{Ge({userId:$e,subId:Number((W==null?void 0:W.subId)||-1),slotIndex:Number((W==null?void 0:W.slot)||-1),walletId:Xe.walletId,msisdn:Xe.msisdn})}catch{}}const Re=Mn(ie),_t=Re.amount||0;if(!_t||_t<=0)return;const ht=Re.reference||"",gt=(Xe==null?void 0:Xe.msisdn)||(Z?await nv(Z):""),Nt={amount:_t,sender:Re.sender||String(W.sender||""),senderName:Re.senderName,text:ie,simNumber:Ve};if(ze)try{await Un(Nt)}catch{}else{try{const{addDoc:K,collection:re,serverTimestamp:ke}=await J(async()=>{const{addDoc:rt,collection:yt,serverTimestamp:Tt}=await Promise.resolve().then(()=>on);return{addDoc:rt,collection:yt,serverTimestamp:Tt}},void 0,import.meta.url),{db:_e}=await J(async()=>{const{db:rt}=await Promise.resolve().then(()=>At);return{db:rt}},void 0,import.meta.url),De=await K(re(_e,"pendingSmsPopups"),{userId:Z,shopId:Se,payload:{...Nt,reference:ht,walletMsisdn:gt},status:"pending",createdAt:ke()});M({...Nt,reference:ht,providerLabel:"VF-Cash",walletMsisdn:gt,popupId:De.id})}catch{M({...Nt,reference:ht,providerLabel:"VF-Cash",walletMsisdn:gt})}de(!0);try{En()}catch{}}}catch{}}catch{}};try{window.addEventListener("mobileSmsReceived",ne)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",ne)}catch{}}},[a,s]);const Un=async ne=>{var X,G,W,ie,ge;try{const Z=ne||U;if(!Z)return;const{amount:Se,sender:Ce,text:Me,simNumber:Oe,senderName:Ne}=Z,ve=String(Me||"");let Ie=Number(Se||0);if(!Ie||Ie<=0){const K=ve.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);Ie=K?parseFloat(String(K[1]).replace(",",".")):0}let ze=String(Ce||"").trim();if(!ze){const K=ve.match(/\s+\s+(\d+)/i);ze=K?fn(K[1]):""}let It=String((Z==null?void 0:Z.reference)||"").trim();if(!It){const K=ve.match(/\s*\s*([\d\.]+)/i);It=K?String(K[1]).trim():String(Date.now())}if(!Ie||Ie<=0){try{a({title:"      ",variant:"destructive"})}catch{}return}const{auth:Je}=await J(async()=>{const{auth:K}=await Promise.resolve().then(()=>At);return{auth:K}},void 0,import.meta.url),Ve=((X=Je.currentUser)==null?void 0:X.uid)||"";let pt=s||"";if(!Ve){try{a({title:"  ",description:"   "})}catch{}return}if(!pt)try{const{doc:K,getDoc:re}=await J(async()=>{const{doc:De,getDoc:rt}=await Promise.resolve().then(()=>on);return{doc:De,getDoc:rt}},void 0,import.meta.url),{db:ke}=await J(async()=>{const{db:De}=await Promise.resolve().then(()=>At);return{db:De}},void 0,import.meta.url),_e=await re(K(ke,"profiles",Ve));if(_e.exists()){const De=_e.data(),rt=String((De==null?void 0:De.shopId)||"").trim();rt&&(pt=rt)}}catch{}if(!pt){try{a({title:"  ",description:"   "})}catch{}return}let Ge=await tG(Ve);if(!Ge)try{const{doc:K,getDoc:re}=await J(async()=>{const{doc:vt,getDoc:Si}=await Promise.resolve().then(()=>on);return{doc:vt,getDoc:Si}},void 0,import.meta.url),{db:ke}=await J(async()=>{const{db:vt}=await Promise.resolve().then(()=>At);return{db:vt}},void 0,import.meta.url);let _e="",De="";try{const vt=await re(K(ke,"profiles",Ve));if(vt.exists()){const Si=vt.data();_e=String((Si==null?void 0:Si.sim1Number)||"").trim(),De=String((Si==null?void 0:Si.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:rt}=await J(async()=>{const{detectWalletFromSim:vt}=await Promise.resolve().then(()=>kl);return{detectWalletFromSim:vt}},void 0,import.meta.url),{merchantWalletService:yt}=await J(async()=>{const{merchantWalletService:vt}=await Promise.resolve().then(()=>Du);return{merchantWalletService:vt}},void 0,import.meta.url),Tt=`wallets_${Ve}`,Ot=localStorage.getItem(Tt),Lr=Ot?JSON.parse(Ot):[],Mr=await yt.getByMerchantId(Ve),Fs=(Array.isArray(Lr)?Lr:[]).map(vt=>({id:String((vt==null?void 0:vt.id)||""),phone:String((vt==null?void 0:vt.phone)||(vt==null?void 0:vt.msisdn)||""),isDefault:!!(vt!=null&&vt.isDefault)})),ir=(Array.isArray(Mr)?Mr:[]).map(vt=>({id:String((vt==null?void 0:vt.id)||""),msisdn:String((vt==null?void 0:vt.msisdn)||""),isDefault:!!(vt!=null&&vt.isDefault)})),$o=[...Fs,...ir],Uc=Oe||String(localStorage.getItem("lastSmsSimMsisdn")||"");let Aa=(Uc?[Uc]:[]).filter(Boolean);Aa.length===0&&(Aa=[_e,De].filter(Boolean));const Ra=await rt(Aa,$o);if(Ra&&Ra.walletId){Ge=Ra.walletId;try{localStorage.setItem(`selectedWallet_${Ve}`,Ge)}catch{}}}catch{}if(!Ge){try{a({title:"   ",description:"       "})}catch{}return}try{const K=Ve;try{localStorage.setItem(`selectedWallet_${K}`,Ge)}catch{}try{localStorage.setItem(`selectedWallet_${K}_${pt}`,Ge)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ge}}))}catch{}try{const{Preferences:re}=await J(async()=>{const{Preferences:ke}=await Promise.resolve().then(()=>Au);return{Preferences:ke}},void 0,import.meta.url);await re.set({key:"selected_wallet_id",value:Ge}),await re.set({key:"current_user_id",value:K})}catch{}}catch{}const{recordAutoTransaction:mt,userDataService:$e}=await J(async()=>{const{recordAutoTransaction:K,userDataService:re}=await Promise.resolve().then(()=>Du);return{recordAutoTransaction:K,userDataService:re}},void 0,import.meta.url),Xe=Q&&Q.trim()!==""?Math.max(0,parseFloat(Q)):null;let Re=0;if(Xe!=null)Re=Xe;else try{const{merchantWalletService:K}=await J(async()=>{const{merchantWalletService:_e}=await Promise.resolve().then(()=>Du);return{merchantWalletService:_e}},void 0,import.meta.url),re=await K.getById(String(Ge)),ke=re&&re.defaultWithdrawCommission;if(ke!=null)Re=Math.round((Number(ke)||0)*Number(Ie)/1e3*100)/100;else{const{calculateCommission:_e}=await J(async()=>{const{calculateCommission:De}=await Promise.resolve().then(()=>fm);return{calculateCommission:De}},void 0,import.meta.url);Re=_e(Number(Ie),"receive")}}catch{const{calculateCommission:K}=await J(async()=>{const{calculateCommission:re}=await Promise.resolve().then(()=>fm);return{calculateCommission:re}},void 0,import.meta.url);Re=K(Number(Ie),"receive")}try{const{walletDailyLimitsService:K}=await J(async()=>{const{walletDailyLimitsService:ke}=await Promise.resolve().then(()=>pm);return{walletDailyLimitsService:ke}},void 0,import.meta.url),re=await K.canPerformOperation(String(Ge),Math.max(0,Number(Ie||0)),"withdraw");if(!re.canPerform)try{a({title:"  ",description:String(re.message||"      "),variant:"destructive"})}catch{}}catch{}const _t=It||`${ve}|${Date.now()}`,ht=Oe||String(localStorage.getItem("lastSmsSimMsisdn")||""),gt=String((Z==null?void 0:Z.walletMsisdn)||"").trim()||ht||await nv(Ve)||"",Nt=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(ue)try{const K=await $e.getUserData(Ve),re=Array.isArray(K==null?void 0:K.debts)?K.debts:[],ke=Nt==="add"?Number(Ie)+Number(Re):Number(Ie),_e=[{id:`DEBT-${Date.now()}`,debtorName:Fe||Ne||ze||"",amount:Math.round(Number(ke)*100)/100,reason:Ke||"  VodafoneCash",customerId:void 0,mobile:ze,status:"pending",createdAt:new Date},...re];await $e.updateUserData(Ve,{debts:_e}),de(!1),M(null);try{a({title:"  ",description:"      "})}catch{}return}catch{}try{const K=await mt({shopId:pt,lineId:gt,walletId:Ge,amount:Ie,note:"SMS-VF-ManualConfirm",provider:"vodafone_cash",createdBy:Ve,senderMsisdn:ze,senderName:Ne,reference:_t,text:ve});try{const re=(ne==null?void 0:ne.popupId)||(U==null?void 0:U.popupId)||"";if(re){const{doc:ke,updateDoc:_e,serverTimestamp:De}=await J(async()=>{const{doc:yt,updateDoc:Tt,serverTimestamp:Ot}=await Promise.resolve().then(()=>on);return{doc:yt,updateDoc:Tt,serverTimestamp:Ot}},void 0,import.meta.url),{db:rt}=await J(async()=>{const{db:yt}=await Promise.resolve().then(()=>At);return{db:yt}},void 0,import.meta.url);try{await _e(ke(rt,"pendingSmsPopups",re),{status:"confirmed",confirmedAt:De()})}catch{}try{(W=(G=N.current)==null?void 0:G.add)==null||W.call(G,re);const yt=Array.from(N.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(yt))}catch{}}}catch{}try{const re=Math.max(0,Number(Ie||0)),{doc:ke,getDoc:_e,updateDoc:De}=await J(async()=>{const{doc:Fs,getDoc:ir,updateDoc:$o}=await Promise.resolve().then(()=>on);return{doc:Fs,getDoc:ir,updateDoc:$o}},void 0,import.meta.url),{db:rt}=await J(async()=>{const{db:Fs}=await Promise.resolve().then(()=>At);return{db:Fs}},void 0,import.meta.url),yt=ke(rt,"dashboardData",pt),Tt=await _e(yt);let Ot=Tt.exists()?Number(((ie=Tt.data())==null?void 0:ie.cashBalance)||0):0;const Lr=Tt.exists()?((ge=Tt.data())==null?void 0:ge.walletBalances)||{}:{},Mr=Number(Lr[Ge]||0);Lr[Ge]=Mr+re,Ot=Ot-re+Math.max(0,Re),await De(yt,{cashBalance:Ot,walletBalances:Lr,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:Ot}}))}catch{}try{const{walletDailyLimitsService:Fs}=await J(async()=>{const{walletDailyLimitsService:ir}=await Promise.resolve().then(()=>pm);return{walletDailyLimitsService:ir}},void 0,import.meta.url);await Fs.updateUsage(String(Ge),re,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Ge)}}))}catch{}}catch{}}catch{}(async()=>{try{const re=Re;await $e.saveUserTransaction(Ve,{type:"withdraw",amount:Ie,withdrawnAmount:Ie,commission:re,status:"completed",createdAt:new Date,senderMsisdn:ze,receiverMsisdn:gt,senderName:Ne,walletId:Ge,fromWallet:Ge,lineId:gt,provider:"vodafone_cash",reference:_t,transactionId:K})}catch{}})(),de(!1),M(null);try{a({title:`     ${K}`})}catch{}}catch(K){try{a({title:String((K==null?void 0:K.message)||"  "),variant:"destructive"})}catch{}}}catch{}};_.useEffect(()=>{try{wT.start()}catch{}return()=>{try{wT.stop()}catch{}}},[]),_.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const ne=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),X=String(localStorage.getItem("android_installed_version")||"").trim(),G=localStorage.getItem("android_last_ack_code"),W=localStorage.getItem("android_installed_code"),ie=G?Number(G):null,ge=W?Number(W):null,Z=ne||X,Se=ie??ge??null;Z&&y(Z),Se&&T(Se);const{doc:Ce,getDoc:Me}=await J(async()=>{const{doc:ve,getDoc:Ie}=await Promise.resolve().then(()=>on);return{doc:ve,getDoc:Ie}},void 0,import.meta.url),{db:Oe}=await J(async()=>{const{db:ve}=await Promise.resolve().then(()=>At);return{db:ve}},void 0,import.meta.url),Ne=await Me(Ce(Oe,"profiles",r.uid));if(Ne.exists()){const ve=Ne.data(),Ie=String((ve==null?void 0:ve.lastAckAndroidVersion)||(ve==null?void 0:ve.androidInstalledVersion)||(ve==null?void 0:ve.lastAckUpdateId)||"").trim(),ze=typeof(ve==null?void 0:ve.lastAckAndroidCode)=="number"?ve.lastAckAndroidCode:typeof(ve==null?void 0:ve.androidInstalledCode)=="number"?ve.androidInstalledCode:null,It=(Ve,pt)=>{const Ge=String(Ve||"").replace(/^v/i,"").split(".").map($e=>parseInt($e,10)||0),mt=String(pt||"").replace(/^v/i,"").split(".").map($e=>parseInt($e,10)||0);for(let $e=0;$e<Math.max(Ge.length,mt.length);$e++){const Xe=Ge[$e]||0,Re=mt[$e]||0;if(Xe>Re)return 1;if(Xe<Re)return-1}return 0};let Je=!1;if(typeof ze=="number"&&typeof Se=="number"?Je=ze>Se:typeof ze=="number"&&Se==null?Je=!0:Ie&&Z?Je=It(Ie,Z)>0:Ie&&!Z&&(Je=!0),Je){if(Ie){try{localStorage.setItem("android_installed_version",Ie)}catch{}y(Ie)}if(typeof ze=="number"){try{localStorage.setItem("android_installed_code",String(ze))}catch{}T(ze)}}else if(typeof ze=="number"&&Se==null){try{localStorage.setItem("android_installed_code",String(ze))}catch{}T(ze)}}}catch{}})()},[r==null?void 0:r.uid]),_.useEffect(()=>{try{const X=String((window==null?void 0:window.__nativeAppVersion)||"").trim();X&&C(X);const G=window==null?void 0:window.__nativeAppVersionCode;if(typeof G=="number"){L(G);try{localStorage.setItem("android_installed_code",String(G))}catch{}}try{X&&localStorage.setItem("android_installed_version",X)}catch{}}catch{}const ne=X=>{var G,W;try{const ie=String((((G=X==null?void 0:X.detail)==null?void 0:G.version)??"")||"").trim(),ge=(W=X==null?void 0:X.detail)==null?void 0:W.code;ie&&C(ie);try{ie&&localStorage.setItem("android_installed_version",ie)}catch{}typeof ge=="number"&&L(ge)}catch{}};try{window.addEventListener("native-app-version",ne)}catch{}return()=>{try{window.removeEventListener("native-app-version",ne)}catch{}}},[]),_.useEffect(()=>{try{const ne=(We==null?void 0:We.isNativePlatform)&&We.getPlatform()==="android",X=String(E||"").trim();if(!ne||!X||!(r!=null&&r.uid))return;(async()=>{try{const{doc:G,setDoc:W,serverTimestamp:ie}=await J(async()=>{const{doc:Z,setDoc:Se,serverTimestamp:Ce}=await Promise.resolve().then(()=>on);return{doc:Z,setDoc:Se,serverTimestamp:Ce}},void 0,import.meta.url),{db:ge}=await J(async()=>{const{db:Z}=await Promise.resolve().then(()=>At);return{db:Z}},void 0,import.meta.url);await W(G(ge,"profiles",r.uid),{androidInstalledVersion:X,androidInstalledAt:ie()},{merge:!0});try{localStorage.setItem("android_installed_version",X)}catch{}}catch{}})()}catch{}},[E,r==null?void 0:r.uid]),_.useEffect(()=>{We!=null&&We.isNativePlatform&&We.getPlatform()==="android"&&(async()=>{try{await J(()=>dt(()=>import("./ProtectedUserDashboard-C-4M1qmw-Cd43hNsh.js"),__vite__mapDeps([39,40,23,34,21,10,35]),import.meta.url),Ct([39,40,23,34,21,10,35]),import.meta.url),await J(()=>dt(()=>import("./UserDashboardPage-BRKQ-meY-DTnfM6w2.js"),__vite__mapDeps([65,1,33,18,21,34,10,35,26,6,46,45,28,5,53,15,11,37,51,42,43,52,38,12,60,4,8,36,29,40,22,44,48,58,7]),import.meta.url),Ct([65,1,33,18,21,34,10,35,26,6,46,45,28,5,53,15,11,37,51,42,43,52,38,12,60,4,8,36,29,40,22,44,48,58,7]),import.meta.url),await J(()=>Promise.resolve().then(()=>bH),void 0,import.meta.url),await J(()=>dt(()=>import("./ProfileSettingsPage-B-oVcHqn-B0T1w4hD.js"),__vite__mapDeps([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url),Ct([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url),await J(()=>dt(()=>import("./TransactionsPage-ByCAGb8I-D2VC8Ull.js"),__vite__mapDeps([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url),Ct([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url)}catch{}})()},[]),_.useEffect(()=>{if(!e)return;const ne=document.createElement("style");ne.setAttribute("data-disable-pull-to-refresh","true"),ne.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(ne);let X=0,G=null;const W=ge=>{var Z,Se;X=((Se=(Z=ge.touches)==null?void 0:Z[0])==null?void 0:Se.clientY)||0,G=ge.target},ie=ge=>{var Z,Se;const Ce=((Se=(Z=ge.touches)==null?void 0:Z[0])==null?void 0:Se.clientY)||0,Me=document.scrollingElement||document.documentElement,Oe=Me.scrollTop||window.scrollY||0,Ne=Me.scrollHeight-Me.clientHeight||0,ve=G||null,Ie=(()=>{let ze=ve;for(;ze&&ze!==document.body;){const It=window.getComputedStyle(ze).overflowY;if((It==="auto"||It==="scroll")&&ze.scrollHeight>ze.clientHeight)return!0;ze=ze.parentElement}return!1})();!Ie&&Oe<=0&&Ce>X&&ge.cancelable&&ge.preventDefault(),!Ie&&Oe>=Ne&&Ce<X&&ge.cancelable&&ge.preventDefault()};return document.addEventListener("touchstart",W,{passive:!0}),document.addEventListener("touchmove",ie,{passive:!1}),()=>{document.removeEventListener("touchstart",W),document.removeEventListener("touchmove",ie);try{document.head.removeChild(ne)}catch{}}},[e]),_.useEffect(()=>{if(!(We!=null&&We.isNativePlatform&&We.getPlatform()==="android"))return;try{const G=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=G,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const G=(window.location.assign||(W=>{})).bind(window.location);window.__originalAssign=G,window.location.assign=W=>{try{if(String(W||"").startsWith("/user/dashboard")){i("/user/dashboard");return}}catch{}try{G(W)}catch{}}}catch{}let ne=null,X=!1;return(async()=>{try{const{listenAndroidUpdates:G}=await J(async()=>{const{listenAndroidUpdates:W}=await Promise.resolve().then(()=>HO);return{listenAndroidUpdates:W}},void 0,import.meta.url);ne=G(W=>{if(X)return;const ie=String((W==null?void 0:W.version)||"").trim(),ge=String((W==null?void 0:W.url)||"").trim(),Z=String((W==null?void 0:W.notes)||"").trim(),Se=!!(W!=null&&W.force),Ce=typeof(W==null?void 0:W.code)=="number"?W.code:void 0,Me=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),Oe=String(v||Me||"").trim(),Ne=(mt,$e)=>{const Xe=String(mt||"").replace(/^v/i,"").split(".").map(_t=>parseInt(_t,10)||0),Re=String($e||"").replace(/^v/i,"").split(".").map(_t=>parseInt(_t,10)||0);for(let _t=0;_t<Math.max(Xe.length,Re.length);_t++){const ht=Xe[_t]||0,gt=Re[_t]||0;if(ht>gt)return 1;if(ht<gt)return-1}return 0},ve=String(E||"").trim(),Ie=String(localStorage.getItem("android_installed_version")||"").trim(),ze=localStorage.getItem("android_installed_code"),It=ze?Number(ze):null,Je=[O,x,It].filter(mt=>typeof mt=="number").reduce((mt,$e)=>mt===void 0?$e:Math.max(mt,$e),void 0),Ve=typeof Ce=="number"&&typeof Je=="number"?Ce>Je:void 0,pt=(()=>{const mt=[ve,Oe,Ie].filter(Boolean);return mt.length===0?"":mt.reduce(($e,Xe)=>Ne(Xe,$e)>0?Xe:$e)})(),Ge=Ne(ie,pt)>0;if(ge&&(ie||typeof Ce=="number")&&(Ve!==void 0?Ve:Ge)){const mt="   ",$e=`${Z?Z+`
`:""} : ${ie}`;d({title:mt,message:$e,apkUrl:ge,force:Se,versionId:ie,versionCode:Ce}),l(!0)}else try{l(!1)}catch{}})}catch{}})(),()=>{X=!0;try{typeof ne=="function"&&ne()}catch{}}},[v,E]),_.useEffect(()=>{const ne=G=>{const W=(G==null?void 0:G.detail)||{};try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}p(!0),w({percent:W.percent??null,downloaded:W.downloaded??0,total:W.total??0})},X=()=>{try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}p(!1),b(!0),w({percent:100,downloaded:((f==null?void 0:f.total)??(f==null?void 0:f.downloaded)??0)||0,total:(f==null?void 0:f.total)??0});try{const G=String((c==null?void 0:c.versionId)||"").trim();if(G){try{localStorage.setItem("android_last_ack_version_id",G)}catch{}try{localStorage.setItem("android_installed_version",G)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:W,setDoc:ie,serverTimestamp:ge}=await J(async()=>{const{doc:Se,setDoc:Ce,serverTimestamp:Me}=await Promise.resolve().then(()=>on);return{doc:Se,setDoc:Ce,serverTimestamp:Me}},void 0,import.meta.url),{db:Z}=await J(async()=>{const{db:Se}=await Promise.resolve().then(()=>At);return{db:Se}},void 0,import.meta.url);await ie(W(Z,"profiles",r.uid),{lastAckAndroidVersion:G,androidInstalledVersion:G,lastAckAt:ge(),androidInstalledAt:ge()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",ne),window.addEventListener("androidUpdateDownloaded",X),()=>{window.removeEventListener("androidUpdateProgress",ne),window.removeEventListener("androidUpdateDownloaded",X)}},[]),_.useEffect(()=>((async()=>{var ne;try{const{auth:X}=await J(async()=>{const{auth:Ne}=await Promise.resolve().then(()=>At);return{auth:Ne}},void 0,import.meta.url),G=((ne=X.currentUser)==null?void 0:ne.uid)||"";if(!G)return;const{db:W}=await J(async()=>{const{db:Ne}=await Promise.resolve().then(()=>At);return{db:Ne}},void 0,import.meta.url),{collection:ie,query:ge,where:Z,onSnapshot:Se}=await J(async()=>{const{collection:Ne,query:ve,where:Ie,onSnapshot:ze}=await Promise.resolve().then(()=>on);return{collection:Ne,query:ve,where:Ie,onSnapshot:ze}},void 0,import.meta.url),Ce=ge(ie(W,"pendingSmsPopups"),Z("userId","==",G),Z("status","==","pending")),Me=Date.now(),Oe=Se(Ce,Ne=>{var ve,Ie,ze,It,Je,Ve,pt,Ge,mt;try{const $e=typeof Ne.docChanges=="function"?Ne.docChanges():[];for(const Xe of $e){if(Xe.type==="added"){const Re=Xe.doc.data()||{},_t=Xe.doc.id;if((Ie=(ve=N.current)==null?void 0:ve.has)!=null&&Ie.call(ve,_t))continue;try{const De=Re.createdAt||Re.timestamp||(Re.payload||{}).createdAt||(Re.payload||{}).timestamp,rt=De&&typeof De.toMillis=="function"?De.toMillis():typeof Re.createdAtMs=="number"?Re.createdAtMs:typeof(Re.payload||{}).createdAtMs=="number"?(Re.payload||{}).createdAtMs:null;if(typeof rt=="number"&&rt<Me)continue}catch{}const ht=Re.amount??((ze=Re.payload)==null?void 0:ze.amount)??null,gt=Re.sender??((It=Re.payload)==null?void 0:It.sender)??"",Nt=Re.senderName??((Je=Re.payload)==null?void 0:Je.senderName)??"",K=Re.reference??((Ve=Re.payload)==null?void 0:Ve.reference)??"",re=Re.text??((pt=Re.payload)==null?void 0:pt.text)??"",ke=Re.simNumber??((Ge=Re.payload)==null?void 0:Ge.simNumber)??"",_e=Re.walletMsisdn??((mt=Re.payload)==null?void 0:mt.walletMsisdn)??"";M({amount:ht,sender:gt,senderName:Nt,reference:K,text:re,simNumber:ke,walletMsisdn:_e,providerLabel:"VF-Cash",popupId:_t}),de(!0);try{En()}catch{}}if(Xe.type==="removed"){const Re=Xe.doc.id,_t=(U==null?void 0:U.popupId)||"";_t&&_t===Re&&(de(!1),M(null))}}}catch{}});P.current=Oe}catch{}})(),()=>{try{const ne=P.current;typeof ne=="function"&&ne()}catch{}}),[r==null?void 0:r.uid]),_.useEffect(()=>{const ne=(We==null?void 0:We.isNativePlatform)&&We.getPlatform()==="android",X=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(ne||X)return;let G=!1;return(async()=>{try{const W="0.0.0",ie=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!ie.ok)return;const ge=await ie.json(),Z=String((ge==null?void 0:ge.version)||"0.0.0"),Se=!!(ge!=null&&ge.force);if(!G&&((Ce,Me)=>{const Oe=String(Ce).split(".").map(ve=>parseInt(ve,10)||0),Ne=String(Me).split(".").map(ve=>parseInt(ve,10)||0);for(let ve=0;ve<Math.max(Oe.length,Ne.length);ve++){const Ie=Oe[ve]||0,ze=Ne[ve]||0;if(Ie>ze)return 1;if(Ie<ze)return-1}return 0})(Z,W)>0){if(Se){try{window.location.reload()}catch{}return}try{a({title:"  ",description:` ${Z}      `})}catch{}}}catch{}})(),()=>{G=!0}},[]);const Ue=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),jn=(()=>{const ne=(G,W)=>{const ie=String(G||"").replace(/^v/i,"").split(".").map(Z=>parseInt(Z,10)||0),ge=String(W||"").replace(/^v/i,"").split(".").map(Z=>parseInt(Z,10)||0);for(let Z=0;Z<Math.max(ie.length,ge.length);Z++){const Se=ie[Z]||0,Ce=ge[Z]||0;if(Se>Ce)return 1;if(Se<Ce)return-1}return 0},X=[E,v,Ue].filter(Boolean);return X.length===0?"":X.reduce((G,W)=>ne(W,G)>0?W:G)})();return I.jsxs(I.Fragment,{children:[$&&(We==null?void 0:We.isNativePlatform)&&We.getPlatform()==="android"&&I.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:I.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:I.jsx("span",{className:"text-2xl",children:"!"})}),I.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),I.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),I.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:I.jsx(Bi,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),o&&c&&I.jsx(s0,{open:o,onOpenChange:ne=>{c!=null&&c.force||l(ne)},children:I.jsxs(gm,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[I.jsxs(ym,{className:"text-center",children:[I.jsx(vm,{className:"text-base md:text-lg font-bold text-gray-900",children:c.title}),I.jsx(wm,{className:"text-sm text-gray-700 whitespace-pre-line",children:c.message}),I.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:jn?`  : v${jn}`:""})]}),I.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!c.force&&!h&&!m&&I.jsx(Bi,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>l(!1),children:""}),!m&&I.jsx(Bi,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const ne=String((c==null?void 0:c.versionId)||"").trim(),X=c==null?void 0:c.versionCode;if(ne)try{localStorage.setItem("android_last_ack_version_id",ne)}catch{}if(typeof X=="number")try{localStorage.setItem("android_last_ack_code",String(X))}catch{}if((async()=>{try{if(r!=null&&r.uid&&ne){const{doc:G,setDoc:W,serverTimestamp:ie}=await J(async()=>{const{doc:Se,setDoc:Ce,serverTimestamp:Me}=await Promise.resolve().then(()=>on);return{doc:Se,setDoc:Ce,serverTimestamp:Me}},void 0,import.meta.url),{db:ge}=await J(async()=>{const{db:Se}=await Promise.resolve().then(()=>At);return{db:Se}},void 0,import.meta.url),Z={lastAckAndroidVersion:ne,lastAckAt:ie()};typeof X=="number"&&(Z.lastAckAndroidCode=X),await W(G(ge,"profiles",r.uid),Z,{merge:!0})}}catch{}})(),(We==null?void 0:We.isNativePlatform)&&We.getPlatform()==="android"){const G=c.apkUrl,W=`cashy://update?url=${encodeURIComponent(G)}`;p(!0),w({percent:0,downloaded:0,total:0});try{D.current&&clearInterval(D.current),D.current=setInterval(()=>{w(ie=>{const ge=typeof(ie==null?void 0:ie.percent)=="number"?ie.percent:0,Z=R.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(ge+Z))),downloaded:(ie==null?void 0:ie.downloaded)??0,total:(ie==null?void 0:ie.total)??0}})},600)}catch{}window.location.href=W;try{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{try{R.current=!1}catch{}try{k.current=null}catch{}},8e3)}catch{}}else{const G=c.apkUrl;try{window.open(G,"_blank")}catch{}}}catch{}},children:h?" ...":" "}),m&&I.jsx(Bi,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if(We!=null&&We.isNativePlatform&&We.getPlatform()==="android"){l(!1);try{const ne=String((c==null?void 0:c.versionId)||"").trim();if(ne){try{localStorage.setItem("android_last_ack_version_id",ne)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:X,setDoc:G,serverTimestamp:W}=await J(async()=>{const{doc:Se,setDoc:Ce,serverTimestamp:Me}=await Promise.resolve().then(()=>on);return{doc:Se,setDoc:Ce,serverTimestamp:Me}},void 0,import.meta.url),{db:ie}=await J(async()=>{const{db:Se}=await Promise.resolve().then(()=>At);return{db:Se}},void 0,import.meta.url),ge={lastAckAndroidVersion:ne,androidInstalledVersion:ne,lastAckAt:W(),androidInstalledAt:W()},Z=c==null?void 0:c.versionCode;if(typeof Z=="number"){ge.lastAckAndroidCode=Z,ge.androidInstalledCode=Z;try{localStorage.setItem("android_installed_code",String(Z)),localStorage.setItem("android_last_ack_code",String(Z))}catch{}}await G(X(ie,"profiles",r.uid),ge,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),h&&I.jsxs("div",{className:"mt-3 text-center",children:[I.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:I.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((f==null?void 0:f.percent)||0)))}%`}})}),I.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((f==null?void 0:f.percent)||0),"%"]})]})]})}),I.jsx(s0,{open:fe,onOpenChange:async ne=>{var X,G;if(de(ne),!ne){try{const W=(U==null?void 0:U.popupId)||"";if(W){const{db:ie}=await J(async()=>{const{db:Ce}=await Promise.resolve().then(()=>At);return{db:Ce}},void 0,import.meta.url),{doc:ge,updateDoc:Z,serverTimestamp:Se}=await J(async()=>{const{doc:Ce,updateDoc:Me,serverTimestamp:Oe}=await Promise.resolve().then(()=>on);return{doc:Ce,updateDoc:Me,serverTimestamp:Oe}},void 0,import.meta.url);try{await Z(ge(ie,"pendingSmsPopups",W),{status:"dismissed",dismissedAt:Se()})}catch{}try{(G=(X=N.current)==null?void 0:X.add)==null||G.call(X,W);const Ce=Array.from(N.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Ce))}catch{}}}catch{}Be(!1),Ee(""),ce(""),Xt("")}},children:I.jsxs(gm,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[I.jsxs(ym,{children:[I.jsx(vm,{children:U!=null&&U.providerLabel?I.jsxs(I.Fragment,{children:["   ",I.jsx("span",{className:"text-red-600",children:U.providerLabel})]}):"   "}),I.jsx(wm,{})]}),I.jsxs("div",{className:"space-y-2 text-sm",children:[I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsxs("span",{className:"font-bold",children:[(t=U==null?void 0:U.amount)==null?void 0:t.toLocaleString()," "]})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" "}),I.jsx("span",{className:"font-mono",children:(U==null?void 0:U.sender)||""})]}),(U==null?void 0:U.simNumber)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:" "}),I.jsx("span",{className:"font-mono",children:U==null?void 0:U.simNumber})]}),(U==null?void 0:U.senderName)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsx("span",{children:U==null?void 0:U.senderName})]}),(U==null?void 0:U.reference)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsx("span",{className:"font-mono",children:U==null?void 0:U.reference})]}),(U==null?void 0:U.walletMsisdn)&&I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"  "}),I.jsx("span",{className:"font-mono",children:U==null?void 0:U.walletMsisdn})]}),oe&&I.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[I.jsx("span",{className:"flex-1",children:"  ()"}),I.jsx("input",{type:"number",step:"0.01",min:"0",value:Q,onChange:ne=>Ee(ne.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),I.jsx("div",{className:"pt-2",children:I.jsx("button",{type:"button",className:`w-full rounded-md px-3 py-2 text-sm font-medium ${ue?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-800"}`,onClick:()=>Be(!ue),children:ue?" ":""})}),ue&&I.jsxs("div",{className:"space-y-2 pt-2",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("span",{className:"flex-1",children:" "}),I.jsx("input",{type:"text",value:Fe,onChange:ne=>ce(ne.target.value),className:"w-48 border rounded px-2 py-1",placeholder:" "})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("span",{className:"flex-1",children:""}),I.jsx("input",{type:"text",value:Ke,onChange:ne=>Xt(ne.target.value),className:"w-48 border rounded px-2 py-1",placeholder:""})]})]})]}),I.jsx("div",{className:"pt-3",children:I.jsx(Bi,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const ne=String((U==null?void 0:U.text)||""),X=ne.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),G=X?parseFloat(String(X[1]).replace(",",".")):Number((U==null?void 0:U.amount)||0),W=ne.match(/\s+\s+(\d+)/i),ie=String((U==null?void 0:U.sender)||(W?W[1]:"")||""),ge=ne.match(/\s*\s*([\d\.]+)/i),Z=String((U==null?void 0:U.reference)||(ge?ge[1]:String(Date.now())));Un({...U,amount:G,sender:ie,reference:Z})}catch{Un()}},children:" "})})]})})]})},ek=()=>{const t=ds(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?I.jsxs(I.Fragment,{children:[I.jsx(h3,{}),I.jsx(K3,{})]}):null},tk=()=>{const{user:t,loading:e}=Na();return e?I.jsx(hm,{}):t?I.jsx(Gf,{}):I.jsx(cm,{})},eG=()=>I.jsx(d6,{client:ML,children:I.jsx(SV,{children:I.jsxs(R5,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(We!=null&&We.isNativePlatform&&We.getPlatform()==="android")&&I.jsx(_H,{}),I.jsx(ZK,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&XK||We!=null&&We.isNativePlatform&&We.getPlatform()==="android")?I.jsxs(gV,{children:[I.jsx(ZT,{}),I.jsx(ek,{}),I.jsx(_.Suspense,{fallback:I.jsx(hm,{}),children:I.jsxs(dw,{children:[I.jsx(we,{path:"/",element:We!=null&&We.isNativePlatform&&We.getPlatform()==="android"?I.jsx(tk,{}):I.jsx(ff,{})}),I.jsx(we,{path:"/dashboard-redirect",element:I.jsx(NT,{})}),I.jsx(we,{path:"/landing",element:I.jsx(ff,{})}),I.jsx(we,{path:"/subscriptions",element:I.jsx(AT,{})}),I.jsx(we,{path:"/auth",element:I.jsx(RT,{})}),I.jsx(we,{path:"/user/login",element:I.jsx(cm,{})}),I.jsx(we,{path:"/user/forgot-password",element:I.jsx(MT,{})}),I.jsx(we,{path:"/user/register",element:I.jsx(mf,{})}),I.jsx(we,{path:"/register",element:I.jsx(mf,{})}),I.jsx(we,{path:"/user/account-setup",element:I.jsx(LT,{})}),I.jsx(we,{path:"/user/pending-approval",element:I.jsx(VT,{})}),I.jsx(we,{path:"/user/dashboard",element:I.jsx(Gf,{})}),I.jsx(we,{path:"/branch/:shopId/dashboard",element:I.jsx(Gf,{})}),I.jsx(we,{path:"/user/add-wallet",element:I.jsx(HT,{})}),I.jsx(we,{path:"/admin/login",element:I.jsx(BT,{})}),I.jsx(we,{path:"/admin/dashboard",element:I.jsx(zT,{})}),I.jsx(we,{path:"/admin/topups",element:I.jsx(PT,{})}),I.jsx(we,{path:"/admin/notifications",element:I.jsx(OT,{})}),I.jsx(we,{path:"/profile-settings",element:I.jsx(WT,{})}),I.jsx(we,{path:"/transactions",element:I.jsx(qT,{})}),I.jsx(we,{path:"/referrals",element:I.jsx(KT,{})}),I.jsx(we,{path:"/privacy-policy",element:I.jsx(YT,{})}),I.jsx(we,{path:"/cpanel",element:I.jsx(GT,{})}),I.jsx(we,{path:"/cpanel/login",element:I.jsx(QT,{})}),I.jsx(we,{path:"/auth-test",element:I.jsx($T,{})}),I.jsx(we,{path:"/topup",element:I.jsx(pf,{})}),I.jsx(we,{path:"/recharge",element:I.jsx(pf,{})}),I.jsx(we,{path:"/merchant/*",element:I.jsx(FT,{})}),I.jsx(we,{path:"/dashboard/login",element:I.jsx(UT,{})}),I.jsx(we,{path:"/dashboard",element:I.jsx(jT,{})}),I.jsx(we,{path:"*",element:I.jsx(JT,{})})]})}),I.jsx(XT,{})]}):I.jsxs(mV,{children:[I.jsx(ZT,{}),I.jsx(ek,{}),I.jsx(_.Suspense,{fallback:I.jsx(hm,{}),children:I.jsxs(dw,{children:[I.jsx(we,{path:"/",element:We!=null&&We.isNativePlatform&&We.getPlatform()==="android"?I.jsx(tk,{}):I.jsx(ff,{})}),I.jsx(we,{path:"/dashboard-redirect",element:I.jsx(NT,{})}),I.jsx(we,{path:"/landing",element:I.jsx(ff,{})}),I.jsx(we,{path:"/subscriptions",element:I.jsx(AT,{})}),I.jsx(we,{path:"/auth",element:I.jsx(RT,{})}),I.jsx(we,{path:"/user/login",element:I.jsx(cm,{})}),I.jsx(we,{path:"/user/forgot-password",element:I.jsx(MT,{})}),I.jsx(we,{path:"/user/register",element:I.jsx(mf,{})}),I.jsx(we,{path:"/register",element:I.jsx(mf,{})}),I.jsx(we,{path:"/user/account-setup",element:I.jsx(LT,{})}),I.jsx(we,{path:"/user/pending-approval",element:I.jsx(VT,{})}),I.jsx(we,{path:"/user/dashboard",element:I.jsx(Gf,{})}),I.jsx(we,{path:"/user/add-wallet",element:I.jsx(HT,{})}),I.jsx(we,{path:"/admin/login",element:I.jsx(BT,{})}),I.jsx(we,{path:"/admin/dashboard",element:I.jsx(zT,{})}),I.jsx(we,{path:"/admin/topups",element:I.jsx(PT,{})}),I.jsx(we,{path:"/admin/notifications",element:I.jsx(OT,{})}),I.jsx(we,{path:"/profile-settings",element:I.jsx(WT,{})}),I.jsx(we,{path:"/transactions",element:I.jsx(qT,{})}),I.jsx(we,{path:"/referrals",element:I.jsx(KT,{})}),I.jsx(we,{path:"/privacy-policy",element:I.jsx(YT,{})}),I.jsx(we,{path:"/cpanel",element:I.jsx(GT,{})}),I.jsx(we,{path:"/cpanel/login",element:I.jsx(QT,{})}),I.jsx(we,{path:"/auth-test",element:I.jsx($T,{})}),I.jsx(we,{path:"/topup",element:I.jsx(pf,{})}),I.jsx(we,{path:"/recharge",element:I.jsx(pf,{})}),I.jsx(we,{path:"/merchant/*",element:I.jsx(FT,{})}),I.jsx(we,{path:"/dashboard/login",element:I.jsx(UT,{})}),I.jsx(we,{path:"/dashboard",element:I.jsx(jT,{})}),I.jsx(we,{path:"*",element:I.jsx(JT,{})})]})}),I.jsx(XT,{})]})]})})}),nk=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},nv=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await J(async()=>{const{merchantWalletService:o}=await Promise.resolve().then(()=>kl);return{merchantWalletService:o}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(o=>String((o==null?void 0:o.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},tG=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:a}=await J(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>kl);return{merchantWalletService:h}},void 0,import.meta.url),o=await a.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(o)?o:[]];if(d.length>0){const h=d.find(f=>!!(f!=null&&f.isDefault)),p=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(p)return p}}catch{}return""},UL=_.createContext(void 0),nG=({children:t})=>{const[e,n]=_.useState(null),[r,s]=_.useState(!1),[i,a]=_.useState(null),{profile:o,user:l}=Na();_.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),f=localStorage.getItem("cashier_shift_active"),w=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),f&&s(f==="true"),w&&a(Number(w))}catch{}},[]),_.useEffect(()=>{if(!(o!=null&&o.shopId))return;const p=be(q,"cashierShift",o.shopId);let f=null;return(async()=>{try{(await zt(p)).exists()||await Gt(p,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),f=Ms(p,w=>{if(w.exists()){const m=w.data(),b=(m==null?void 0:m.shiftUser)||null,v=!!(m!=null&&m.isShiftActive),y=(m==null?void 0:m.shiftStartAt)??null;let E=b;if(!E)try{const C=localStorage.getItem("cashier_shift_user"),O=C?JSON.parse(C):null;O&&(E=O)}catch{}n(E),s(v),a(typeof y=="number"?y:y?Number(y):null);try{E?localStorage.setItem("cashier_shift_user",JSON.stringify(E)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",v?"true":"false"),y!=null&&localStorage.setItem("cashier_shift_start_at",String(y))}catch{}}},w=>{console.warn("cashierShift snapshot error:",w)})}catch(w){console.warn("Failed to init cashierShift doc:",w)}})(),()=>{f&&f()}},[o==null?void 0:o.shopId]);const c=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(o!=null&&o.shopId){const f=be(q,"cashierShift",o.shopId);nn(f,{shiftUser:p||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();a(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{if(o!=null&&o.shopId){const f=be(q,"cashierShift",o.shopId);nn(f,{isShiftActive:!0,shiftStartAt:p})}}catch{}try{const f=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,w=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,m=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let b=localStorage.getItem(f);if(b==null){const y=localStorage.getItem(w);if(y!=null){b=y;try{localStorage.setItem(f,y),localStorage.removeItem(w)}catch{}}}if(b==null&&l!=null&&l.uid){const y=localStorage.getItem("cashBalance"),E=localStorage.getItem("userCashBalance");if(y!=null){try{localStorage.setItem(f,y),localStorage.removeItem("cashBalance")}catch{}b=y}else if(E!=null){try{localStorage.setItem(f,E),localStorage.removeItem("userCashBalance")}catch{}b=E}}const v=localStorage.getItem(m);b?localStorage.setItem("shiftStartDrawerFunds",b):localStorage.setItem("shiftStartDrawerFunds","0"),v?localStorage.setItem("shiftStartWalletBalances",v):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{o!=null&&o.shopId&&(async()=>{try{const f=be(q,"dashboardData",o.shopId),w=await zt(f);if(w.exists()){const m=w.data(),b=Number((m==null?void 0:m.cashBalance)??0),v=(m==null?void 0:m.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),E=localStorage.getItem("shiftStartWalletBalances"),C=y?parseFloat(y):0,O=E?JSON.parse(E):{},L=!y||!Number.isFinite(C)||C===0,x=!E||Object.keys(O||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(b)?b:0)),x&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(v||{}))}catch{}}}catch(f){console.warn("Shift start Firebase read failed:",f)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(o!=null&&o.shopId){const p=be(q,"cashierShift",o.shopId);nn(p,{isShiftActive:!1})}}catch{}};return I.jsx(UL.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},rG=()=>{const t=_.useContext(UL);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{ZO()}catch{}const sG=()=>{const{theme:t="system"}=ub();return _.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};wD(document.getElementById("root")).render(I.jsx(m3,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:I.jsx(mH,{children:I.jsx(nG,{children:I.jsxs(HH,{children:[I.jsx(eG,{}),I.jsx(sG,{})]})})})}));const oG=Object.freeze(Object.defineProperty({__proto__:null,$:ds,A:YD,B:Bi,C:Nn,D:eH,E:rN,F:Nu,G:u2,H:Gt,I:Cp,J:Dt,K:zt,L:kA,M:oN,N:oV,O:nn,P:lm,Q:tN,R:V,S:eo,T:Cn,U:hN,V:ab,W:s0,X:gm,Y:ym,Z:vm,_:LL,a:Vo,a$:qN,a0:Fr,a1:Ir,a2:jo,a3:ID,a4:Af,a5:Ht,a6:kt,a7:kn,a8:jm,a9:as,aA:vO,aB:SO,aC:wm,aD:Bo,aE:nz,aF:NO,aG:yb,aH:EV,aI:ub,aJ:YS,aK:lN,aL:nH,aM:rH,aN:sH,aO:CO,aP:xH,aQ:KO,aR:_a,aS:bD,aT:nL,aU:HP,aV:TO,aW:ZD,aX:iN,aY:fN,aZ:wb,a_:p5,aa:HS,ab:zO,ac:uN,ad:J,ae:td,af:rG,ag:eL,ah:We,ai:Zv,aj:XD,ak:MS,al:Ag,am:hm,an:nw,ao:dw,ap:we,aq:Xs,ar:tw,as:nN,at:tH,au:Wd,av:Pe,aw:Bm,ax:GP,ay:wO,az:zq,b:bV,b$:WS,b0:Um,b1:fL,b2:nb,b3:sL,b4:ZS,b5:Kl,b6:XS,b7:Jd,b8:HN,b9:KN,bA:aA,bB:Hn,bC:$5,bD:u6,bE:Cg,bF:QO,bG:Nf,bH:ct,bI:JK,bJ:xO,bK:FK,bL:NL,bM:RL,bN:HK,bO:s1,bP:ED,bQ:i1,bR:a1,bS:PL,bT:r1,bU:AL,bV:DA,bW:K6,bX:qS,bY:$i,bZ:GO,b_:CH,ba:tb,bb:eN,bc:Rs,bd:kD,be:bc,bf:iz,bg:QS,bh:JS,bi:dN,bj:qO,bk:WO,bl:wn,bm:n0,bn:$O,bo:Zd,bp:lA,bq:sA,br:F5,bs:_p,bt:zn,bu:eh,bv:nA,bw:rA,bx:Sd,by:_b,bz:fA,c:Mm,c0:kO,c1:JD,c2:on,c3:At,c4:Du,c5:Au,c6:HO,c7:$H,c8:pm,d:BO,e:FO,f:xt,g:VO,h:xe,i:q,j:I,k:qe,l:ti,m:PW,n:bO,o:rs,p:ss,q:je,r:_,s:Le,t:ew,u:Na,v:aN,w:sN,x:c2,y:be,z:Ms},Symbol.toStringTag,{value:"Module"}));export{Ag as $,xt as A,zt as B,Vo as C,HS as D,eL as E,Gt as F,q as G,BO as H,I,oV as J,zO as K,Ms as L,uN as M,aN as N,oN as O,rN as P,Zv as Q,xe as R,_ as S,XD as T,Le as U,ew as V,Na as W,bV as X,tN as Y,J as Z,dt as _,Bi as a,u6 as a$,nn as a0,Bm as a1,GP as a2,dw as a3,we as a4,nw as a5,Nu as a6,Nn as a7,eH as a8,eo as a9,KO as aA,nL as aB,bD as aC,HP as aD,TO as aE,ZD as aF,nN as aG,fN as aH,s0 as aI,gm as aJ,ym as aK,vm as aL,wm as aM,jm as aN,jo as aO,Af as aP,Ht as aQ,Cn as aR,Fr as aS,kt as aT,_a as aU,Xs as aV,Wd as aW,lm as aX,ab as aY,LL as aZ,K6 as a_,u2 as aa,QS as ab,qO as ac,iN as ad,tw as ae,WO as af,dN as ag,nH as ah,wn as ai,Pe as aj,n0 as ak,$O as al,wO as am,SO as an,zq as ao,vO as ap,EV as aq,ub as ar,Ir as as,tH as at,YS as au,lN as av,rH as aw,sH as ax,CO as ay,xH as az,Dt as b,kO as b$,$i as b0,xO as b1,qS as b2,Nf as b3,ct as b4,JK as b5,Cg as b6,GO as b7,Hn as b8,zn as b9,Sd as bA,_b as bB,JS as bC,as as bD,Rs as bE,Bo as bF,nz as bG,iz as bH,tb as bI,ID as bJ,wb as bK,p5 as bL,qN as bM,Um as bN,fL as bO,nb as bP,ZS as bQ,sL as bR,Kl as bS,XS as bT,Jd as bU,HN as bV,KN as bW,eN as bX,NO as bY,yb as bZ,JD as b_,$5 as ba,eh as bb,QO as bc,FK as bd,NL as be,DA as bf,CH as bg,RL as bh,kn as bi,HK as bj,s1 as bk,ED as bl,i1 as bm,a1 as bn,PL as bo,r1 as bp,AL as bq,Zd as br,lA as bs,sA as bt,F5 as bu,_p as bv,fA as bw,aA as bx,nA as by,rA as bz,FO as c,WS as c0,kD as c1,bc as c2,oG as c3,Mm as d,rs as e,qe as f,bO as g,ti as h,ss as i,V as j,kA as k,hN as l,sN as m,YD as n,PW as o,td as p,VO as q,c2 as r,hm as s,Cp as t,ds as u,be as v,rG as w,We as x,MS as y,je as z};
//# sourceMappingURL=index-C_crvORM.js.map
