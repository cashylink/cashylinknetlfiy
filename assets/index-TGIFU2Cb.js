const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-BJKR43YA.js","./card-Dhy3zl0F.js","./BrandLogo-DOuye7uQ.js","./brandingService-BOPy-1Dn.js","./whatsappService-DNIWcLjk.js","./arrow-left-DIyxSuHu.js","./star-BYyGUZiu.js","./crown-BjMCYxK1.js","./download-DwG0N8yT.js","./zap-QIoz-kMk.js","./shield-DppOJssG.js","./chart-column-B8U3x0mB.js","./circle-check-big-qpZZNWG4.js","./SubscriptionsPage-BaCj-f1G.js","./contentService-DDyBLefq.js","./calendar-DIe7yvJq.js","./AuthPage--jcQ1hfE.js","./TopUpPage-BZadsfkC.js","./select-bmG6MsJJ.js","./AdminTopupsPage-BOPB74sk.js","./AdminNotificationsPage-C0WSji5y.js","./label-BAt1qffg.js","./textarea-BcjosInG.js","./link-CU5kuRAi.js","./UserRegisterPage-B3jVLkQX.js","./alert-CAofBYIJ.js","./wallet-BBPaqr6S.js","./user-plus-D5H9Af46.js","./share-2-DyPi-Eq9.js","./phone-DqPKYXZE.js","./store-C3r7xPwv.js","./UserAccountSetupPage-6GP3dv44.js","./DashboardLoginPage-CwJOjAla.js","./ProtectedDashboard-DdJapQ2p.js","./badge-Cbt1k2jo.js","./MasterPinDialog-syalbun6.js","./circle-alert-BaeY64iC.js","./profitService-BFf6Tsw8.js","./dollar-sign-DVVnjP0W.js","./circle-x-Bl5-TkJ4.js","./ProtectedUserDashboard-Ecf5sDS0.js","./broadcastService-CrLgF8LR.js","./MerchantDashboard-BmCu2pXg.js","./dropdown-menu-D0kqDXOF.js","./index-B-rRxico.js","./WalletsManagement-Ca94OIuN.js","./progress-vkiRTi3L.js","./walletDailyLimitsService-DJsLEjBQ.js","./square-pen-CtWSoR4G.js","./PendingApprovalPage-Bq2djwCp.js","./gift-1y9SKLu5.js","./refresh-cw-CnNkXrYA.js","./AdminLogin-Bp-5JmMQ.js","./ProtectedAdminDashboard-CuqCUr1G.js","./ProfileIcon-D6vJ1Jo9.js","./switch-CxmvEnxd.js","./separator-cJVOTaF_.js","./save-W5h5YQG1.js","./copy-JSoSUtyW.js","./users-DRnZsq7G.js","./AuthTestPage-vmohndt9.js","./ProfileSettingsPage-CiRRjUlA.js","./walletSelectionPinService-Ce_WpPmI.js","./TransactionsPage-CeFKgi18.js","./MaintenanceDialog-B1_1qqDt.js","./WalletAdditionPage-Bdpb2dUP.js","./ReferralsPage-nt2EJ2OJ.js","./CPanelPage-DBaFNuO8.js","./CPanelLoginPage-BT79auJI.js"])))=>i.map(i=>d[i]);
var k2=Object.defineProperty;var sT=t=>{throw TypeError(t)};var N2=(t,e,n)=>e in t?k2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lh=(t,e,n)=>N2(t,typeof e!="symbol"?e+"":e,n),gg=(t,e,n)=>e.has(t)||sT("Cannot "+n);var H=(t,e,n)=>(gg(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?sT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(gg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),en=(t,e,n)=>(gg(t,e,"access private method"),n);var ch=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return H(t,e,r)}});function O2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Dw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wx={exports:{}},zp={},_x={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=Symbol.for("react.element"),L2=Symbol.for("react.portal"),V2=Symbol.for("react.fragment"),M2=Symbol.for("react.strict_mode"),F2=Symbol.for("react.profiler"),U2=Symbol.for("react.provider"),j2=Symbol.for("react.context"),B2=Symbol.for("react.forward_ref"),$2=Symbol.for("react.suspense"),z2=Symbol.for("react.memo"),q2=Symbol.for("react.lazy"),iT=Symbol.iterator;function W2(t){return t===null||typeof t!="object"?null:(t=iT&&t[iT]||t["@@iterator"],typeof t=="function"?t:null)}var Ex={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tx=Object.assign,Ix={};function Zl(t,e,n){this.props=t,this.context=e,this.refs=Ix,this.updater=n||Ex}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sx(){}Sx.prototype=Zl.prototype;function kw(t,e,n){this.props=t,this.context=e,this.refs=Ix,this.updater=n||Ex}var Nw=kw.prototype=new Sx;Nw.constructor=kw;Tx(Nw,Zl.prototype);Nw.isPureReactComponent=!0;var oT=Array.isArray,bx=Object.prototype.hasOwnProperty,Ow={current:null},Ax={key:!0,ref:!0,__self:!0,__source:!0};function xx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)bx.call(e,r)&&!Ax.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Sd,type:t,key:i,ref:o,props:s,_owner:Ow.current}}function H2(t,e){return{$$typeof:Sd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sd}function K2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var aT=/\/+/g;function yg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K2(""+t.key):e.toString(36)}function Yh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sd:case L2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+yg(o,0):r,oT(s)?(n="",t!=null&&(n=t.replace(aT,"$&/")+"/"),Yh(s,e,n,"",function(c){return c})):s!=null&&(Lw(s)&&(s=H2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(aT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",oT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+yg(i,a);o+=Yh(i,e,n,l,s)}else if(l=W2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+yg(i,a++),o+=Yh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function uh(t,e,n){if(t==null)return t;var r=[],s=0;return Yh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function G2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},Xh={transition:null},Q2={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:Xh,ReactCurrentOwner:Ow};function Px(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:uh,forEach:function(t,e,n){uh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uh(t,function(){e++}),e},toArray:function(t){return uh(t,function(e){return e})||[]},only:function(t){if(!Lw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=Zl;De.Fragment=V2;De.Profiler=F2;De.PureComponent=kw;De.StrictMode=M2;De.Suspense=$2;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q2;De.act=Px;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Tx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ow.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)bx.call(e,l)&&!Ax.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Sd,type:t.type,key:s,ref:i,props:r,_owner:o}};De.createContext=function(t){return t={$$typeof:j2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:U2,_context:t},t.Consumer=t};De.createElement=xx;De.createFactory=function(t){var e=xx.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:B2,render:t}};De.isValidElement=Lw;De.lazy=function(t){return{$$typeof:q2,_payload:{_status:-1,_result:t},_init:G2}};De.memo=function(t,e){return{$$typeof:z2,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Xh.transition;Xh.transition={};try{t()}finally{Xh.transition=e}};De.unstable_act=Px;De.useCallback=function(t,e){return En.current.useCallback(t,e)};De.useContext=function(t){return En.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return En.current.useDeferredValue(t)};De.useEffect=function(t,e){return En.current.useEffect(t,e)};De.useId=function(){return En.current.useId()};De.useImperativeHandle=function(t,e,n){return En.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return En.current.useMemo(t,e)};De.useReducer=function(t,e,n){return En.current.useReducer(t,e,n)};De.useRef=function(t){return En.current.useRef(t)};De.useState=function(t){return En.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return En.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return En.current.useTransition()};De.version="18.3.1";_x.exports=De;var b=_x.exports;const z=Dw(b),Vw=O2({__proto__:null,default:z},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2=b,X2=Symbol.for("react.element"),J2=Symbol.for("react.fragment"),Z2=Object.prototype.hasOwnProperty,eL=Y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tL={key:!0,ref:!0,__self:!0,__source:!0};function Rx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Z2.call(e,r)&&!tL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:X2,type:t,key:i,ref:o,props:s,_owner:eL.current}}zp.Fragment=J2;zp.jsx=Rx;zp.jsxs=Rx;wx.exports=zp;var x=wx.exports,Cx={exports:{}},Jn={},Dx={exports:{}},kx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,F){var q=j.length;j.push(F);e:for(;0<q;){var ne=q-1>>>1,Z=j[ne];if(0<s(Z,F))j[ne]=F,j[q]=Z,q=ne;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var F=j[0],q=j.pop();if(q!==F){j[0]=q;e:for(var ne=0,Z=j.length,re=Z>>>1;ne<re;){var ae=2*(ne+1)-1,Ie=j[ae],Ve=ae+1,ue=j[Ve];if(0>s(Ie,q))Ve<Z&&0>s(ue,Ie)?(j[ne]=ue,j[Ve]=q,ne=Ve):(j[ne]=Ie,j[ae]=q,ne=ae);else if(Ve<Z&&0>s(ue,q))j[ne]=ue,j[Ve]=q,ne=Ve;else break e}}return F}function s(j,F){var q=j.sortIndex-F.sortIndex;return q!==0?q:j.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,E=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(j){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=j)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function A(j){if(g=!1,v(j),!E)if(n(l)!==null)E=!0,te(C);else{var F=n(c);F!==null&&G(A,F.startTime-j)}}function C(j,F){E=!1,g&&(g=!1,w(T),T=-1),m=!0;var q=p;try{for(v(F),h=n(l);h!==null&&(!(h.expirationTime>F)||j&&!R());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,p=h.priorityLevel;var Z=ne(h.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(l)&&r(l),v(F)}else r(l);h=n(l)}if(h!==null)var re=!0;else{var ae=n(c);ae!==null&&G(A,ae.startTime-F),re=!1}return re}finally{h=null,p=q,m=!1}}var L=!1,S=null,T=-1,P=5,D=-1;function R(){return!(t.unstable_now()-D<P)}function O(){if(S!==null){var j=t.unstable_now();D=j;var F=!0;try{F=S(!0,j)}finally{F?k():(L=!1,S=null)}}else L=!1}var k;if(typeof f=="function")k=function(){f(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=O,k=function(){X.postMessage(null)}}else k=function(){_(O,0)};function te(j){S=j,L||(L=!0,k())}function G(j,F){T=_(function(){j(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,te(C))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var q=p;p=F;try{return j()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,F){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=p;p=j;try{return F()}finally{p=q}},t.unstable_scheduleCallback=function(j,F,q){var ne=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ne+q:ne):q=ne,j){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=q+Z,j={id:d++,callback:F,priorityLevel:j,startTime:q,expirationTime:Z,sortIndex:-1},q>ne?(j.sortIndex=q,e(c,j),n(l)===null&&j===n(c)&&(g?(w(T),T=-1):g=!0,G(A,q-ne))):(j.sortIndex=Z,e(l,j),E||m||(E=!0,te(C))),j},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(j){var F=p;return function(){var q=p;p=F;try{return j.apply(this,arguments)}finally{p=q}}}})(kx);Dx.exports=kx;var nL=Dx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rL=b,Yn=nL;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nx=new Set,Nu={};function va(t,e){Il(t,e),Il(t+"Capture",e)}function Il(t,e){for(Nu[t]=e,t=0;t<e.length;t++)Nx.add(e[t])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cy=Object.prototype.hasOwnProperty,sL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lT={},cT={};function iL(t){return Cy.call(cT,t)?!0:Cy.call(lT,t)?!1:sL.test(t)?cT[t]=!0:(lT[t]=!0,!1)}function oL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aL(t,e,n,r){if(e===null||typeof e>"u"||oL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mw=/[\-:]([a-z])/g;function Fw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mw,Fw);Qt[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mw,Fw);Qt[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mw,Fw);Qt[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uw(t,e,n,r){var s=Qt.hasOwnProperty(e)?Qt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aL(e,n,s,r)&&(n=null),r||s===null?iL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zs=rL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dh=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),Ha=Symbol.for("react.fragment"),jw=Symbol.for("react.strict_mode"),Dy=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),Bw=Symbol.for("react.forward_ref"),ky=Symbol.for("react.suspense"),Ny=Symbol.for("react.suspense_list"),$w=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),Vx=Symbol.for("react.offscreen"),uT=Symbol.iterator;function Lc(t){return t===null||typeof t!="object"?null:(t=uT&&t[uT]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,vg;function Xc(t){if(vg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vg=e&&e[1]||""}return`
`+vg+t}var wg=!1;function _g(t,e){if(!t||wg)return"";wg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{wg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xc(t):""}function lL(t){switch(t.tag){case 5:return Xc(t.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return t=_g(t.type,!1),t;case 11:return t=_g(t.type.render,!1),t;case 1:return t=_g(t.type,!0),t;default:return""}}function Oy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ha:return"Fragment";case Wa:return"Portal";case Dy:return"Profiler";case jw:return"StrictMode";case ky:return"Suspense";case Ny:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lx:return(t.displayName||"Context")+".Consumer";case Ox:return(t._context.displayName||"Context")+".Provider";case Bw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $w:return e=t.displayName||null,e!==null?e:Oy(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return Oy(t(e))}catch{}}return null}function cL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oy(e);case 8:return e===jw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uL(t){var e=Mx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hh(t){t._valueTracker||(t._valueTracker=uL(t))}function Fx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ly(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ux(t,e){e=e.checked,e!=null&&Uw(t,"checked",e,!1)}function Vy(t,e){Ux(t,e);var n=Wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?My(t,e.type,n):e.hasOwnProperty("defaultValue")&&My(t,e.type,Wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function My(t,e,n){(e!=="number"||Rf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jc=Array.isArray;function rl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Jc(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wi(n)}}function jx(t,e){var n=Wi(e.value),r=Wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fh,$x=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fh=fh||document.createElement("div"),fh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ou(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dL=["Webkit","ms","Moz","O"];Object.keys(cu).forEach(function(t){dL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cu[e]=cu[t]})});function zx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cu.hasOwnProperty(t)&&cu[t]?(""+e).trim():e+"px"}function qx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hL=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jy(t,e){if(e){if(hL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function By(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $y=null;function zw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zy=null,sl=null,il=null;function mT(t){if(t=xd(t)){if(typeof zy!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Gp(e),zy(t.stateNode,t.type,e))}}function Wx(t){sl?il?il.push(t):il=[t]:sl=t}function Hx(){if(sl){var t=sl,e=il;if(il=sl=null,mT(t),e)for(t=0;t<e.length;t++)mT(e[t])}}function Kx(t,e){return t(e)}function Gx(){}var Eg=!1;function Qx(t,e,n){if(Eg)return t(e,n);Eg=!0;try{return Kx(t,e,n)}finally{Eg=!1,(sl!==null||il!==null)&&(Gx(),Hx())}}function Lu(t,e){var n=t.stateNode;if(n===null)return null;var r=Gp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var qy=!1;if(ks)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){qy=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{qy=!1}function fL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var uu=!1,Cf=null,Df=!1,Wy=null,pL={onError:function(t){uu=!0,Cf=t}};function mL(t,e,n,r,s,i,o,a,l){uu=!1,Cf=null,fL.apply(pL,arguments)}function gL(t,e,n,r,s,i,o,a,l){if(mL.apply(this,arguments),uu){if(uu){var c=Cf;uu=!1,Cf=null}else throw Error(Q(198));Df||(Df=!0,Wy=c)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gT(t){if(wa(t)!==t)throw Error(Q(188))}function yL(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gT(s),t;if(i===r)return gT(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Xx(t){return t=yL(t),t!==null?Jx(t):null}function Jx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jx(t);if(e!==null)return e;t=t.sibling}return null}var Zx=Yn.unstable_scheduleCallback,yT=Yn.unstable_cancelCallback,vL=Yn.unstable_shouldYield,wL=Yn.unstable_requestPaint,Tt=Yn.unstable_now,_L=Yn.unstable_getCurrentPriorityLevel,qw=Yn.unstable_ImmediatePriority,eP=Yn.unstable_UserBlockingPriority,kf=Yn.unstable_NormalPriority,EL=Yn.unstable_LowPriority,tP=Yn.unstable_IdlePriority,qp=null,rs=null;function TL(t){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(qp,t,void 0,(t.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:bL,IL=Math.log,SL=Math.LN2;function bL(t){return t>>>=0,t===0?32:31-(IL(t)/SL|0)|0}var ph=64,mh=4194304;function Zc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Zc(a):(i&=o,i!==0&&(r=Zc(i)))}else o=n&~s,o!==0?r=Zc(o):i!==0&&(r=Zc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ir(e),s=1<<n,r|=t[n],e&=~s;return r}function AL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ir(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=AL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Hy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nP(){var t=ph;return ph<<=1,!(ph&4194240)&&(ph=64),t}function Tg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ir(e),t[e]=n}function PL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ir(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ww(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ir(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ze=0;function rP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sP,Hw,iP,oP,aP,Ky=!1,gh=[],Ri=null,Ci=null,Di=null,Vu=new Map,Mu=new Map,mi=[],RL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vT(t,e){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":Vu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(e.pointerId)}}function Mc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xd(e),e!==null&&Hw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CL(t,e,n,r,s){switch(e){case"focusin":return Ri=Mc(Ri,t,e,n,r,s),!0;case"dragenter":return Ci=Mc(Ci,t,e,n,r,s),!0;case"mouseover":return Di=Mc(Di,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vu.set(i,Mc(Vu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mu.set(i,Mc(Mu.get(i)||null,t,e,n,r,s)),!0}return!1}function lP(t){var e=Co(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=Yx(n),e!==null){t.blockedOn=e,aP(t.priority,function(){iP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$y=r,n.target.dispatchEvent(r),$y=null}else return e=xd(n),e!==null&&Hw(e),t.blockedOn=n,!1;e.shift()}return!0}function wT(t,e,n){Jh(t)&&n.delete(e)}function DL(){Ky=!1,Ri!==null&&Jh(Ri)&&(Ri=null),Ci!==null&&Jh(Ci)&&(Ci=null),Di!==null&&Jh(Di)&&(Di=null),Vu.forEach(wT),Mu.forEach(wT)}function Fc(t,e){t.blockedOn===e&&(t.blockedOn=null,Ky||(Ky=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,DL)))}function Fu(t){function e(s){return Fc(s,t)}if(0<gh.length){Fc(gh[0],t);for(var n=1;n<gh.length;n++){var r=gh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ri!==null&&Fc(Ri,t),Ci!==null&&Fc(Ci,t),Di!==null&&Fc(Di,t),Vu.forEach(e),Mu.forEach(e),n=0;n<mi.length;n++)r=mi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mi.length&&(n=mi[0],n.blockedOn===null);)lP(n),n.blockedOn===null&&mi.shift()}var ol=zs.ReactCurrentBatchConfig,Of=!0;function kL(t,e,n,r){var s=ze,i=ol.transition;ol.transition=null;try{ze=1,Kw(t,e,n,r)}finally{ze=s,ol.transition=i}}function NL(t,e,n,r){var s=ze,i=ol.transition;ol.transition=null;try{ze=4,Kw(t,e,n,r)}finally{ze=s,ol.transition=i}}function Kw(t,e,n,r){if(Of){var s=Gy(t,e,n,r);if(s===null)kg(t,e,r,Lf,n),vT(t,r);else if(CL(s,t,e,n,r))r.stopPropagation();else if(vT(t,r),e&4&&-1<RL.indexOf(t)){for(;s!==null;){var i=xd(s);if(i!==null&&sP(i),i=Gy(t,e,n,r),i===null&&kg(t,e,r,Lf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else kg(t,e,r,null,n)}}var Lf=null;function Gy(t,e,n,r){if(Lf=null,t=zw(r),t=Co(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lf=t,null}function cP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_L()){case qw:return 1;case eP:return 4;case kf:case EL:return 16;case tP:return 536870912;default:return 16}default:return 16}}var Si=null,Gw=null,Zh=null;function uP(){if(Zh)return Zh;var t,e=Gw,n=e.length,r,s="value"in Si?Si.value:Si.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Zh=s.slice(t,1<r?1-r:void 0)}function ef(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yh(){return!0}function _T(){return!1}function Zn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yh:_T,this.isPropagationStopped=_T,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yh)},persist:function(){},isPersistent:yh}),e}var ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qw=Zn(ec),Ad=ht({},ec,{view:0,detail:0}),OL=Zn(Ad),Ig,Sg,Uc,Wp=ht({},Ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uc&&(Uc&&t.type==="mousemove"?(Ig=t.screenX-Uc.screenX,Sg=t.screenY-Uc.screenY):Sg=Ig=0,Uc=t),Ig)},movementY:function(t){return"movementY"in t?t.movementY:Sg}}),ET=Zn(Wp),LL=ht({},Wp,{dataTransfer:0}),VL=Zn(LL),ML=ht({},Ad,{relatedTarget:0}),bg=Zn(ML),FL=ht({},ec,{animationName:0,elapsedTime:0,pseudoElement:0}),UL=Zn(FL),jL=ht({},ec,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BL=Zn(jL),$L=ht({},ec,{data:0}),TT=Zn($L),zL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WL[t])?!!e[t]:!1}function Yw(){return HL}var KL=ht({},Ad,{key:function(t){if(t.key){var e=zL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ef(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yw,charCode:function(t){return t.type==="keypress"?ef(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ef(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GL=Zn(KL),QL=ht({},Wp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IT=Zn(QL),YL=ht({},Ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yw}),XL=Zn(YL),JL=ht({},ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZL=Zn(JL),eV=ht({},Wp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tV=Zn(eV),nV=[9,13,27,32],Xw=ks&&"CompositionEvent"in window,du=null;ks&&"documentMode"in document&&(du=document.documentMode);var rV=ks&&"TextEvent"in window&&!du,dP=ks&&(!Xw||du&&8<du&&11>=du),ST=" ",bT=!1;function hP(t,e){switch(t){case"keyup":return nV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ka=!1;function sV(t,e){switch(t){case"compositionend":return fP(e);case"keypress":return e.which!==32?null:(bT=!0,ST);case"textInput":return t=e.data,t===ST&&bT?null:t;default:return null}}function iV(t,e){if(Ka)return t==="compositionend"||!Xw&&hP(t,e)?(t=uP(),Zh=Gw=Si=null,Ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dP&&e.locale!=="ko"?null:e.data;default:return null}}var oV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oV[t.type]:e==="textarea"}function pP(t,e,n,r){Wx(r),e=Vf(e,"onChange"),0<e.length&&(n=new Qw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hu=null,Uu=null;function aV(t){bP(t,0)}function Hp(t){var e=Ya(t);if(Fx(e))return t}function lV(t,e){if(t==="change")return e}var mP=!1;if(ks){var Ag;if(ks){var xg="oninput"in document;if(!xg){var xT=document.createElement("div");xT.setAttribute("oninput","return;"),xg=typeof xT.oninput=="function"}Ag=xg}else Ag=!1;mP=Ag&&(!document.documentMode||9<document.documentMode)}function PT(){hu&&(hu.detachEvent("onpropertychange",gP),Uu=hu=null)}function gP(t){if(t.propertyName==="value"&&Hp(Uu)){var e=[];pP(e,Uu,t,zw(t)),Qx(aV,e)}}function cV(t,e,n){t==="focusin"?(PT(),hu=e,Uu=n,hu.attachEvent("onpropertychange",gP)):t==="focusout"&&PT()}function uV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hp(Uu)}function dV(t,e){if(t==="click")return Hp(e)}function hV(t,e){if(t==="input"||t==="change")return Hp(e)}function fV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pr=typeof Object.is=="function"?Object.is:fV;function ju(t,e){if(Pr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cy.call(e,s)||!Pr(t[s],e[s]))return!1}return!0}function RT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function CT(t,e){var n=RT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RT(n)}}function yP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vP(){for(var t=window,e=Rf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rf(t.document)}return e}function Jw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pV(t){var e=vP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yP(n.ownerDocument.documentElement,n)){if(r!==null&&Jw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=CT(n,i);var o=CT(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mV=ks&&"documentMode"in document&&11>=document.documentMode,Ga=null,Qy=null,fu=null,Yy=!1;function DT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yy||Ga==null||Ga!==Rf(r)||(r=Ga,"selectionStart"in r&&Jw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fu&&ju(fu,r)||(fu=r,r=Vf(Qy,"onSelect"),0<r.length&&(e=new Qw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ga)))}function vh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qa={animationend:vh("Animation","AnimationEnd"),animationiteration:vh("Animation","AnimationIteration"),animationstart:vh("Animation","AnimationStart"),transitionend:vh("Transition","TransitionEnd")},Pg={},wP={};ks&&(wP=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Kp(t){if(Pg[t])return Pg[t];if(!Qa[t])return t;var e=Qa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wP)return Pg[t]=e[n];return t}var _P=Kp("animationend"),EP=Kp("animationiteration"),TP=Kp("animationstart"),IP=Kp("transitionend"),SP=new Map,kT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ro(t,e){SP.set(t,e),va(e,[t])}for(var Rg=0;Rg<kT.length;Rg++){var Cg=kT[Rg],gV=Cg.toLowerCase(),yV=Cg[0].toUpperCase()+Cg.slice(1);ro(gV,"on"+yV)}ro(_P,"onAnimationEnd");ro(EP,"onAnimationIteration");ro(TP,"onAnimationStart");ro("dblclick","onDoubleClick");ro("focusin","onFocus");ro("focusout","onBlur");ro(IP,"onTransitionEnd");Il("onMouseEnter",["mouseout","mouseover"]);Il("onMouseLeave",["mouseout","mouseover"]);Il("onPointerEnter",["pointerout","pointerover"]);Il("onPointerLeave",["pointerout","pointerover"]);va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));va("onBeforeInput",["compositionend","keypress","textInput","paste"]);va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vV=new Set("cancel close invalid load scroll toggle".split(" ").concat(eu));function NT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gL(r,e,void 0,t),t.currentTarget=null}function bP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;NT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;NT(s,a,c),i=l}}}if(Df)throw t=Wy,Df=!1,Wy=null,t}function tt(t,e){var n=e[tv];n===void 0&&(n=e[tv]=new Set);var r=t+"__bubble";n.has(r)||(AP(e,t,2,!1),n.add(r))}function Dg(t,e,n){var r=0;e&&(r|=4),AP(n,t,r,e)}var wh="_reactListening"+Math.random().toString(36).slice(2);function Bu(t){if(!t[wh]){t[wh]=!0,Nx.forEach(function(n){n!=="selectionchange"&&(vV.has(n)||Dg(n,!1,t),Dg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wh]||(e[wh]=!0,Dg("selectionchange",!1,e))}}function AP(t,e,n,r){switch(cP(e)){case 1:var s=kL;break;case 4:s=NL;break;default:s=Kw}n=s.bind(null,e,n,t),s=void 0,!qy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function kg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Co(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Qx(function(){var c=i,d=zw(n),h=[];e:{var p=SP.get(t);if(p!==void 0){var m=Qw,E=t;switch(t){case"keypress":if(ef(n)===0)break e;case"keydown":case"keyup":m=GL;break;case"focusin":E="focus",m=bg;break;case"focusout":E="blur",m=bg;break;case"beforeblur":case"afterblur":m=bg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ET;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=VL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=XL;break;case _P:case EP:case TP:m=UL;break;case IP:m=ZL;break;case"scroll":m=OL;break;case"wheel":m=tV;break;case"copy":case"cut":case"paste":m=BL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=IT}var g=(e&4)!==0,_=!g&&t==="scroll",w=g?p!==null?p+"Capture":null:p;g=[];for(var f=c,v;f!==null;){v=f;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,w!==null&&(A=Lu(f,w),A!=null&&g.push($u(f,A,v)))),_)break;f=f.return}0<g.length&&(p=new m(p,E,null,n,d),h.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==$y&&(E=n.relatedTarget||n.fromElement)&&(Co(E)||E[Ns]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=c,E=E?Co(E):null,E!==null&&(_=wa(E),E!==_||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=c),m!==E)){if(g=ET,A="onMouseLeave",w="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(g=IT,A="onPointerLeave",w="onPointerEnter",f="pointer"),_=m==null?p:Ya(m),v=E==null?p:Ya(E),p=new g(A,f+"leave",m,n,d),p.target=_,p.relatedTarget=v,A=null,Co(d)===c&&(g=new g(w,f+"enter",E,n,d),g.target=v,g.relatedTarget=_,A=g),_=A,m&&E)t:{for(g=m,w=E,f=0,v=g;v;v=Ra(v))f++;for(v=0,A=w;A;A=Ra(A))v++;for(;0<f-v;)g=Ra(g),f--;for(;0<v-f;)w=Ra(w),v--;for(;f--;){if(g===w||w!==null&&g===w.alternate)break t;g=Ra(g),w=Ra(w)}g=null}else g=null;m!==null&&OT(h,p,m,g,!1),E!==null&&_!==null&&OT(h,_,E,g,!0)}}e:{if(p=c?Ya(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=lV;else if(AT(p))if(mP)C=hV;else{C=uV;var L=cV}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=dV);if(C&&(C=C(t,c))){pP(h,C,n,d);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&My(p,"number",p.value)}switch(L=c?Ya(c):window,t){case"focusin":(AT(L)||L.contentEditable==="true")&&(Ga=L,Qy=c,fu=null);break;case"focusout":fu=Qy=Ga=null;break;case"mousedown":Yy=!0;break;case"contextmenu":case"mouseup":case"dragend":Yy=!1,DT(h,n,d);break;case"selectionchange":if(mV)break;case"keydown":case"keyup":DT(h,n,d)}var S;if(Xw)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ka?hP(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(dP&&n.locale!=="ko"&&(Ka||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ka&&(S=uP()):(Si=d,Gw="value"in Si?Si.value:Si.textContent,Ka=!0)),L=Vf(c,T),0<L.length&&(T=new TT(T,t,null,n,d),h.push({event:T,listeners:L}),S?T.data=S:(S=fP(n),S!==null&&(T.data=S)))),(S=rV?sV(t,n):iV(t,n))&&(c=Vf(c,"onBeforeInput"),0<c.length&&(d=new TT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}bP(h,e)})}function $u(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Lu(t,n),i!=null&&r.unshift($u(t,i,s)),i=Lu(t,e),i!=null&&r.push($u(t,i,s))),t=t.return}return r}function Ra(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function OT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Lu(n,i),l!=null&&o.unshift($u(n,l,a))):s||(l=Lu(n,i),l!=null&&o.push($u(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wV=/\r\n?/g,_V=/\u0000|\uFFFD/g;function LT(t){return(typeof t=="string"?t:""+t).replace(wV,`
`).replace(_V,"")}function _h(t,e,n){if(e=LT(e),LT(t)!==e&&n)throw Error(Q(425))}function Mf(){}var Xy=null,Jy=null;function Zy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ev=typeof setTimeout=="function"?setTimeout:void 0,EV=typeof clearTimeout=="function"?clearTimeout:void 0,VT=typeof Promise=="function"?Promise:void 0,TV=typeof queueMicrotask=="function"?queueMicrotask:typeof VT<"u"?function(t){return VT.resolve(null).then(t).catch(IV)}:ev;function IV(t){setTimeout(function(){throw t})}function Ng(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fu(e)}function ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function MT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tc=Math.random().toString(36).slice(2),Yr="__reactFiber$"+tc,zu="__reactProps$"+tc,Ns="__reactContainer$"+tc,tv="__reactEvents$"+tc,SV="__reactListeners$"+tc,bV="__reactHandles$"+tc;function Co(t){var e=t[Yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ns]||n[Yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=MT(t);t!==null;){if(n=t[Yr])return n;t=MT(t)}return e}t=n,n=t.parentNode}return null}function xd(t){return t=t[Yr]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ya(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Gp(t){return t[zu]||null}var nv=[],Xa=-1;function so(t){return{current:t}}function nt(t){0>Xa||(t.current=nv[Xa],nv[Xa]=null,Xa--)}function Ye(t,e){Xa++,nv[Xa]=t.current,t.current=e}var Hi={},dn=so(Hi),Nn=so(!1),na=Hi;function Sl(t,e){var n=t.type.contextTypes;if(!n)return Hi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function On(t){return t=t.childContextTypes,t!=null}function Ff(){nt(Nn),nt(dn)}function FT(t,e,n){if(dn.current!==Hi)throw Error(Q(168));Ye(dn,e),Ye(Nn,n)}function xP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,cL(t)||"Unknown",s));return ht({},n,r)}function Uf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hi,na=dn.current,Ye(dn,t),Ye(Nn,Nn.current),!0}function UT(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=xP(t,e,na),r.__reactInternalMemoizedMergedChildContext=t,nt(Nn),nt(dn),Ye(dn,t)):nt(Nn),Ye(Nn,n)}var ws=null,Qp=!1,Og=!1;function PP(t){ws===null?ws=[t]:ws.push(t)}function AV(t){Qp=!0,PP(t)}function io(){if(!Og&&ws!==null){Og=!0;var t=0,e=ze;try{var n=ws;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ws=null,Qp=!1}catch(s){throw ws!==null&&(ws=ws.slice(t+1)),Zx(qw,io),s}finally{ze=e,Og=!1}}return null}var Ja=[],Za=0,jf=null,Bf=0,rr=[],sr=0,ra=null,Is=1,Ss="";function wo(t,e){Ja[Za++]=Bf,Ja[Za++]=jf,jf=t,Bf=e}function RP(t,e,n){rr[sr++]=Is,rr[sr++]=Ss,rr[sr++]=ra,ra=t;var r=Is;t=Ss;var s=32-Ir(r)-1;r&=~(1<<s),n+=1;var i=32-Ir(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Is=1<<32-Ir(e)+s|n<<s|r,Ss=i+t}else Is=1<<i|n<<s|r,Ss=t}function Zw(t){t.return!==null&&(wo(t,1),RP(t,1,0))}function e_(t){for(;t===jf;)jf=Ja[--Za],Ja[Za]=null,Bf=Ja[--Za],Ja[Za]=null;for(;t===ra;)ra=rr[--sr],rr[sr]=null,Ss=rr[--sr],rr[sr]=null,Is=rr[--sr],rr[sr]=null}var Hn=null,zn=null,ot=!1,_r=null;function CP(t,e){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,zn=ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ra!==null?{id:Is,overflow:Ss}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,zn=null,!0):!1;default:return!1}}function rv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sv(t){if(ot){var e=zn;if(e){var n=e;if(!jT(t,e)){if(rv(t))throw Error(Q(418));e=ki(n.nextSibling);var r=Hn;e&&jT(t,e)?CP(r,n):(t.flags=t.flags&-4097|2,ot=!1,Hn=t)}}else{if(rv(t))throw Error(Q(418));t.flags=t.flags&-4097|2,ot=!1,Hn=t}}}function BT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function Eh(t){if(t!==Hn)return!1;if(!ot)return BT(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zy(t.type,t.memoizedProps)),e&&(e=zn)){if(rv(t))throw DP(),Error(Q(418));for(;e;)CP(t,e),e=ki(e.nextSibling)}if(BT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zn=ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zn=null}}else zn=Hn?ki(t.stateNode.nextSibling):null;return!0}function DP(){for(var t=zn;t;)t=ki(t.nextSibling)}function bl(){zn=Hn=null,ot=!1}function t_(t){_r===null?_r=[t]:_r.push(t)}var xV=zs.ReactCurrentBatchConfig;function jc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Th(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $T(t){var e=t._init;return e(t._payload)}function kP(t){function e(w,f){if(t){var v=w.deletions;v===null?(w.deletions=[f],w.flags|=16):v.push(f)}}function n(w,f){if(!t)return null;for(;f!==null;)e(w,f),f=f.sibling;return null}function r(w,f){for(w=new Map;f!==null;)f.key!==null?w.set(f.key,f):w.set(f.index,f),f=f.sibling;return w}function s(w,f){return w=Vi(w,f),w.index=0,w.sibling=null,w}function i(w,f,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<f?(w.flags|=2,f):v):(w.flags|=2,f)):(w.flags|=1048576,f)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,f,v,A){return f===null||f.tag!==6?(f=Bg(v,w.mode,A),f.return=w,f):(f=s(f,v),f.return=w,f)}function l(w,f,v,A){var C=v.type;return C===Ha?d(w,f,v.props.children,A,v.key):f!==null&&(f.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fi&&$T(C)===f.type)?(A=s(f,v.props),A.ref=jc(w,f,v),A.return=w,A):(A=lf(v.type,v.key,v.props,null,w.mode,A),A.ref=jc(w,f,v),A.return=w,A)}function c(w,f,v,A){return f===null||f.tag!==4||f.stateNode.containerInfo!==v.containerInfo||f.stateNode.implementation!==v.implementation?(f=$g(v,w.mode,A),f.return=w,f):(f=s(f,v.children||[]),f.return=w,f)}function d(w,f,v,A,C){return f===null||f.tag!==7?(f=Xo(v,w.mode,A,C),f.return=w,f):(f=s(f,v),f.return=w,f)}function h(w,f,v){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Bg(""+f,w.mode,v),f.return=w,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case dh:return v=lf(f.type,f.key,f.props,null,w.mode,v),v.ref=jc(w,null,f),v.return=w,v;case Wa:return f=$g(f,w.mode,v),f.return=w,f;case fi:var A=f._init;return h(w,A(f._payload),v)}if(Jc(f)||Lc(f))return f=Xo(f,w.mode,v,null),f.return=w,f;Th(w,f)}return null}function p(w,f,v,A){var C=f!==null?f.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(w,f,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case dh:return v.key===C?l(w,f,v,A):null;case Wa:return v.key===C?c(w,f,v,A):null;case fi:return C=v._init,p(w,f,C(v._payload),A)}if(Jc(v)||Lc(v))return C!==null?null:d(w,f,v,A,null);Th(w,v)}return null}function m(w,f,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return w=w.get(v)||null,a(f,w,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case dh:return w=w.get(A.key===null?v:A.key)||null,l(f,w,A,C);case Wa:return w=w.get(A.key===null?v:A.key)||null,c(f,w,A,C);case fi:var L=A._init;return m(w,f,v,L(A._payload),C)}if(Jc(A)||Lc(A))return w=w.get(v)||null,d(f,w,A,C,null);Th(f,A)}return null}function E(w,f,v,A){for(var C=null,L=null,S=f,T=f=0,P=null;S!==null&&T<v.length;T++){S.index>T?(P=S,S=null):P=S.sibling;var D=p(w,S,v[T],A);if(D===null){S===null&&(S=P);break}t&&S&&D.alternate===null&&e(w,S),f=i(D,f,T),L===null?C=D:L.sibling=D,L=D,S=P}if(T===v.length)return n(w,S),ot&&wo(w,T),C;if(S===null){for(;T<v.length;T++)S=h(w,v[T],A),S!==null&&(f=i(S,f,T),L===null?C=S:L.sibling=S,L=S);return ot&&wo(w,T),C}for(S=r(w,S);T<v.length;T++)P=m(S,w,T,v[T],A),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),f=i(P,f,T),L===null?C=P:L.sibling=P,L=P);return t&&S.forEach(function(R){return e(w,R)}),ot&&wo(w,T),C}function g(w,f,v,A){var C=Lc(v);if(typeof C!="function")throw Error(Q(150));if(v=C.call(v),v==null)throw Error(Q(151));for(var L=C=null,S=f,T=f=0,P=null,D=v.next();S!==null&&!D.done;T++,D=v.next()){S.index>T?(P=S,S=null):P=S.sibling;var R=p(w,S,D.value,A);if(R===null){S===null&&(S=P);break}t&&S&&R.alternate===null&&e(w,S),f=i(R,f,T),L===null?C=R:L.sibling=R,L=R,S=P}if(D.done)return n(w,S),ot&&wo(w,T),C;if(S===null){for(;!D.done;T++,D=v.next())D=h(w,D.value,A),D!==null&&(f=i(D,f,T),L===null?C=D:L.sibling=D,L=D);return ot&&wo(w,T),C}for(S=r(w,S);!D.done;T++,D=v.next())D=m(S,w,T,D.value,A),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?T:D.key),f=i(D,f,T),L===null?C=D:L.sibling=D,L=D);return t&&S.forEach(function(O){return e(w,O)}),ot&&wo(w,T),C}function _(w,f,v,A){if(typeof v=="object"&&v!==null&&v.type===Ha&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case dh:e:{for(var C=v.key,L=f;L!==null;){if(L.key===C){if(C=v.type,C===Ha){if(L.tag===7){n(w,L.sibling),f=s(L,v.props.children),f.return=w,w=f;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fi&&$T(C)===L.type){n(w,L.sibling),f=s(L,v.props),f.ref=jc(w,L,v),f.return=w,w=f;break e}n(w,L);break}else e(w,L);L=L.sibling}v.type===Ha?(f=Xo(v.props.children,w.mode,A,v.key),f.return=w,w=f):(A=lf(v.type,v.key,v.props,null,w.mode,A),A.ref=jc(w,f,v),A.return=w,w=A)}return o(w);case Wa:e:{for(L=v.key;f!==null;){if(f.key===L)if(f.tag===4&&f.stateNode.containerInfo===v.containerInfo&&f.stateNode.implementation===v.implementation){n(w,f.sibling),f=s(f,v.children||[]),f.return=w,w=f;break e}else{n(w,f);break}else e(w,f);f=f.sibling}f=$g(v,w.mode,A),f.return=w,w=f}return o(w);case fi:return L=v._init,_(w,f,L(v._payload),A)}if(Jc(v))return E(w,f,v,A);if(Lc(v))return g(w,f,v,A);Th(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,f!==null&&f.tag===6?(n(w,f.sibling),f=s(f,v),f.return=w,w=f):(n(w,f),f=Bg(v,w.mode,A),f.return=w,w=f),o(w)):n(w,f)}return _}var Al=kP(!0),NP=kP(!1),$f=so(null),zf=null,el=null,n_=null;function r_(){n_=el=zf=null}function s_(t){var e=$f.current;nt($f),t._currentValue=e}function iv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function al(t,e){zf=t,n_=el=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function lr(t){var e=t._currentValue;if(n_!==t)if(t={context:t,memoizedValue:e,next:null},el===null){if(zf===null)throw Error(Q(308));el=t,zf.dependencies={lanes:0,firstContext:t}}else el=el.next=t;return e}var Do=null;function i_(t){Do===null?Do=[t]:Do.push(t)}function OP(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,i_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Os(t,r)}function Os(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function o_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Os(t,n)}return s=r.interleaved,s===null?(e.next=e,i_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Os(t,n)}function tf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ww(t,n)}}function zT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qf(t,e,n,r){var s=t.updateQueue;pi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,g=a;switch(p=e,m=n,g.tag){case 1:if(E=g.payload,typeof E=="function"){h=E.call(m,h,p);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=g.payload,p=typeof E=="function"?E.call(m,h,p):E,p==null)break e;h=ht({},h,p);break e;case 2:pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ia|=o,t.lanes=o,t.memoizedState=h}}function qT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var Pd={},ss=so(Pd),qu=so(Pd),Wu=so(Pd);function ko(t){if(t===Pd)throw Error(Q(174));return t}function a_(t,e){switch(Ye(Wu,e),Ye(qu,t),Ye(ss,Pd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uy(e,t)}nt(ss),Ye(ss,e)}function xl(){nt(ss),nt(qu),nt(Wu)}function VP(t){ko(Wu.current);var e=ko(ss.current),n=Uy(e,t.type);e!==n&&(Ye(qu,t),Ye(ss,n))}function l_(t){qu.current===t&&(nt(ss),nt(qu))}var ut=so(0);function Wf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lg=[];function c_(){for(var t=0;t<Lg.length;t++)Lg[t]._workInProgressVersionPrimary=null;Lg.length=0}var nf=zs.ReactCurrentDispatcher,Vg=zs.ReactCurrentBatchConfig,sa=0,dt=null,kt=null,$t=null,Hf=!1,pu=!1,Hu=0,PV=0;function tn(){throw Error(Q(321))}function u_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pr(t[n],e[n]))return!1;return!0}function d_(t,e,n,r,s,i){if(sa=i,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nf.current=t===null||t.memoizedState===null?kV:NV,t=n(r,s),pu){i=0;do{if(pu=!1,Hu=0,25<=i)throw Error(Q(301));i+=1,$t=kt=null,e.updateQueue=null,nf.current=OV,t=n(r,s)}while(pu)}if(nf.current=Kf,e=kt!==null&&kt.next!==null,sa=0,$t=kt=dt=null,Hf=!1,e)throw Error(Q(300));return t}function h_(){var t=Hu!==0;return Hu=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?dt.memoizedState=$t=t:$t=$t.next=t,$t}function cr(){if(kt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=$t===null?dt.memoizedState:$t.next;if(e!==null)$t=e,kt=t;else{if(t===null)throw Error(Q(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},$t===null?dt.memoizedState=$t=t:$t=$t.next=t}return $t}function Ku(t,e){return typeof e=="function"?e(t):e}function Mg(t){var e=cr(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=kt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((sa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,dt.lanes|=d,ia|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Pr(r,e.memoizedState)||(Rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,dt.lanes|=i,ia|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fg(t){var e=cr(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pr(i,e.memoizedState)||(Rn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function MP(){}function FP(t,e){var n=dt,r=cr(),s=e(),i=!Pr(r.memoizedState,s);if(i&&(r.memoizedState=s,Rn=!0),r=r.queue,f_(BP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,Gu(9,jP.bind(null,n,r,s,e),void 0,null),zt===null)throw Error(Q(349));sa&30||UP(n,e,s)}return s}function UP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jP(t,e,n,r){e.value=n,e.getSnapshot=r,$P(e)&&zP(t)}function BP(t,e,n){return n(function(){$P(e)&&zP(t)})}function $P(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pr(t,n)}catch{return!0}}function zP(t){var e=Os(t,1);e!==null&&Sr(e,t,1,-1)}function WT(t){var e=qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:t},e.queue=t,t=t.dispatch=DV.bind(null,dt,t),[e.memoizedState,t]}function Gu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qP(){return cr().memoizedState}function rf(t,e,n,r){var s=qr();dt.flags|=t,s.memoizedState=Gu(1|e,n,void 0,r===void 0?null:r)}function Yp(t,e,n,r){var s=cr();r=r===void 0?null:r;var i=void 0;if(kt!==null){var o=kt.memoizedState;if(i=o.destroy,r!==null&&u_(r,o.deps)){s.memoizedState=Gu(e,n,i,r);return}}dt.flags|=t,s.memoizedState=Gu(1|e,n,i,r)}function HT(t,e){return rf(8390656,8,t,e)}function f_(t,e){return Yp(2048,8,t,e)}function WP(t,e){return Yp(4,2,t,e)}function HP(t,e){return Yp(4,4,t,e)}function KP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GP(t,e,n){return n=n!=null?n.concat([t]):null,Yp(4,4,KP.bind(null,e,t),n)}function p_(){}function QP(t,e){var n=cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&u_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function YP(t,e){var n=cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&u_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XP(t,e,n){return sa&21?(Pr(n,e)||(n=nP(),dt.lanes|=n,ia|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=n)}function RV(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=Vg.transition;Vg.transition={};try{t(!1),e()}finally{ze=n,Vg.transition=r}}function JP(){return cr().memoizedState}function CV(t,e,n){var r=Li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ZP(t))eR(e,n);else if(n=OP(t,e,n,r),n!==null){var s=vn();Sr(n,t,r,s),tR(n,e,r)}}function DV(t,e,n){var r=Li(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZP(t))eR(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pr(a,o)){var l=e.interleaved;l===null?(s.next=s,i_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=OP(t,e,s,r),n!==null&&(s=vn(),Sr(n,t,r,s),tR(n,e,r))}}function ZP(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function eR(t,e){pu=Hf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ww(t,n)}}var Kf={readContext:lr,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},kV={readContext:lr,useCallback:function(t,e){return qr().memoizedState=[t,e===void 0?null:e],t},useContext:lr,useEffect:HT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rf(4194308,4,KP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rf(4194308,4,t,e)},useInsertionEffect:function(t,e){return rf(4,2,t,e)},useMemo:function(t,e){var n=qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CV.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=qr();return t={current:t},e.memoizedState=t},useState:WT,useDebugValue:p_,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=WT(!1),e=t[0];return t=RV.bind(null,t[1]),qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,s=qr();if(ot){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),zt===null)throw Error(Q(349));sa&30||UP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,HT(BP.bind(null,r,i,t),[t]),r.flags|=2048,Gu(9,jP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qr(),e=zt.identifierPrefix;if(ot){var n=Ss,r=Is;n=(r&~(1<<32-Ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NV={readContext:lr,useCallback:QP,useContext:lr,useEffect:f_,useImperativeHandle:GP,useInsertionEffect:WP,useLayoutEffect:HP,useMemo:YP,useReducer:Mg,useRef:qP,useState:function(){return Mg(Ku)},useDebugValue:p_,useDeferredValue:function(t){var e=cr();return XP(e,kt.memoizedState,t)},useTransition:function(){var t=Mg(Ku)[0],e=cr().memoizedState;return[t,e]},useMutableSource:MP,useSyncExternalStore:FP,useId:JP,unstable_isNewReconciler:!1},OV={readContext:lr,useCallback:QP,useContext:lr,useEffect:f_,useImperativeHandle:GP,useInsertionEffect:WP,useLayoutEffect:HP,useMemo:YP,useReducer:Fg,useRef:qP,useState:function(){return Fg(Ku)},useDebugValue:p_,useDeferredValue:function(t){var e=cr();return kt===null?e.memoizedState=t:XP(e,kt.memoizedState,t)},useTransition:function(){var t=Fg(Ku)[0],e=cr().memoizedState;return[t,e]},useMutableSource:MP,useSyncExternalStore:FP,useId:JP,unstable_isNewReconciler:!1};function pr(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ov(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xp={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),s=Li(t),i=xs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Sr(e,t,s,r),tf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),s=Li(t),i=xs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Sr(e,t,s,r),tf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=Li(t),s=xs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ni(t,s,r),e!==null&&(Sr(e,t,r,n),tf(e,t,r))}};function KT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ju(n,r)||!ju(s,i):!0}function nR(t,e,n){var r=!1,s=Hi,i=e.contextType;return typeof i=="object"&&i!==null?i=lr(i):(s=On(e)?na:dn.current,r=e.contextTypes,i=(r=r!=null)?Sl(t,s):Hi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function GT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xp.enqueueReplaceState(e,e.state,null)}function av(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},o_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=lr(i):(i=On(e)?na:dn.current,s.context=Sl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ov(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xp.enqueueReplaceState(s,s.state,null),qf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pl(t,e){try{var n="",r=e;do n+=lL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ug(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var LV=typeof WeakMap=="function"?WeakMap:Map;function rR(t,e,n){n=xs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qf||(Qf=!0,vv=r),lv(t,e)},n}function sR(t,e,n){n=xs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lv(t,e),typeof r!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function QT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new LV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QV.bind(null,t,e,n),e.then(t,t))}function YT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function XT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xs(-1,1),e.tag=2,Ni(n,e,1))),n.lanes|=1),t)}var VV=zs.ReactCurrentOwner,Rn=!1;function gn(t,e,n,r){e.child=t===null?NP(e,null,n,r):Al(e,t.child,n,r)}function JT(t,e,n,r,s){n=n.render;var i=e.ref;return al(e,s),r=d_(t,e,n,r,i,s),n=h_(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ls(t,e,s)):(ot&&n&&Zw(e),e.flags|=1,gn(t,e,r,s),e.child)}function ZT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!T_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iR(t,e,i,r,s)):(t=lf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ju,n(o,r)&&t.ref===e.ref)return Ls(t,e,s)}return e.flags|=1,t=Vi(i,r),t.ref=e.ref,t.return=e,e.child=t}function iR(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ju(i,r)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,Ls(t,e,s)}return cv(t,e,n,r,s)}function oR(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(nl,Fn),Fn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(nl,Fn),Fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ye(nl,Fn),Fn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ye(nl,Fn),Fn|=r;return gn(t,e,s,n),e.child}function aR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cv(t,e,n,r,s){var i=On(n)?na:dn.current;return i=Sl(e,i),al(e,s),n=d_(t,e,n,r,i,s),r=h_(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ls(t,e,s)):(ot&&r&&Zw(e),e.flags|=1,gn(t,e,n,s),e.child)}function eI(t,e,n,r,s){if(On(n)){var i=!0;Uf(e)}else i=!1;if(al(e,s),e.stateNode===null)sf(t,e),nR(e,n,r),av(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=lr(c):(c=On(n)?na:dn.current,c=Sl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&GT(e,o,r,c),pi=!1;var p=e.memoizedState;o.state=p,qf(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Nn.current||pi?(typeof d=="function"&&(ov(e,n,d,r),l=e.memoizedState),(a=pi||KT(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,LP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:pr(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=lr(l):(l=On(n)?na:dn.current,l=Sl(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&GT(e,o,r,l),pi=!1,p=e.memoizedState,o.state=p,qf(e,r,o,s);var E=e.memoizedState;a!==h||p!==E||Nn.current||pi?(typeof m=="function"&&(ov(e,n,m,r),E=e.memoizedState),(c=pi||KT(e,n,c,r,p,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return uv(t,e,n,r,i,s)}function uv(t,e,n,r,s,i){aR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&UT(e,n,!1),Ls(t,e,i);r=e.stateNode,VV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Al(e,t.child,null,i),e.child=Al(e,null,a,i)):gn(t,e,a,i),e.memoizedState=r.state,s&&UT(e,n,!0),e.child}function lR(t){var e=t.stateNode;e.pendingContext?FT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&FT(t,e.context,!1),a_(t,e.containerInfo)}function tI(t,e,n,r,s){return bl(),t_(s),e.flags|=256,gn(t,e,n,r),e.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function hv(t){return{baseLanes:t,cachePool:null,transitions:null}}function cR(t,e,n){var r=e.pendingProps,s=ut.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ye(ut,s&1),t===null)return sv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=em(o,r,0,null),t=Xo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hv(n),e.memoizedState=dv,t):m_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return MV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Vi(a,i):(i=Xo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dv,r}return i=t.child,t=i.sibling,r=Vi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function m_(t,e){return e=em({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ih(t,e,n,r){return r!==null&&t_(r),Al(e,t.child,null,n),t=m_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ug(Error(Q(422))),Ih(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=em({mode:"visible",children:r.children},s,0,null),i=Xo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Al(e,t.child,null,o),e.child.memoizedState=hv(o),e.memoizedState=dv,i);if(!(e.mode&1))return Ih(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Q(419)),r=Ug(i,r,void 0),Ih(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rn||a){if(r=zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Os(t,s),Sr(r,t,s,-1))}return E_(),r=Ug(Error(Q(421))),Ih(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zn=ki(s.nextSibling),Hn=e,ot=!0,_r=null,t!==null&&(rr[sr++]=Is,rr[sr++]=Ss,rr[sr++]=ra,Is=t.id,Ss=t.overflow,ra=e),e=m_(e,r.children),e.flags|=4096,e)}function nI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iv(t.return,e,n)}function jg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uR(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gn(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nI(t,n,e);else if(t.tag===19)nI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(ut,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Wf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jg(e,!0,n,null,i);break;case"together":jg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ia|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Vi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FV(t,e,n){switch(e.tag){case 3:lR(e),bl();break;case 5:VP(e);break;case 1:On(e.type)&&Uf(e);break;case 4:a_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ye($f,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?cR(t,e,n):(Ye(ut,ut.current&1),t=Ls(t,e,n),t!==null?t.sibling:null);Ye(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uR(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ye(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,oR(t,e,n)}return Ls(t,e,n)}var dR,fv,hR,fR;dR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fv=function(){};hR=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ko(ss.current);var i=null;switch(n){case"input":s=Ly(t,s),r=Ly(t,r),i=[];break;case"select":s=ht({},s,{value:void 0}),r=ht({},r,{value:void 0}),i=[];break;case"textarea":s=Fy(t,s),r=Fy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mf)}jy(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};fR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bc(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UV(t,e,n){var r=e.pendingProps;switch(e_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return On(e.type)&&Ff(),nn(e),null;case 3:return r=e.stateNode,xl(),nt(Nn),nt(dn),c_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(Ev(_r),_r=null))),fv(t,e),nn(e),null;case 5:l_(e);var s=ko(Wu.current);if(n=e.type,t!==null&&e.stateNode!=null)hR(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return nn(e),null}if(t=ko(ss.current),Eh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yr]=e,r[zu]=i,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<eu.length;s++)tt(eu[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":dT(r,i),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},tt("invalid",r);break;case"textarea":fT(r,i),tt("invalid",r)}jy(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&_h(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&_h(r.textContent,a,t),s=["children",""+a]):Nu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":hh(r),hT(r,i,!0);break;case"textarea":hh(r),pT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yr]=e,t[zu]=r,dR(t,e,!1,!1),e.stateNode=t;e:{switch(o=By(n,r),n){case"dialog":tt("cancel",t),tt("close",t),s=r;break;case"iframe":case"object":case"embed":tt("load",t),s=r;break;case"video":case"audio":for(s=0;s<eu.length;s++)tt(eu[s],t);s=r;break;case"source":tt("error",t),s=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),s=r;break;case"details":tt("toggle",t),s=r;break;case"input":dT(t,r),s=Ly(t,r),tt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ht({},r,{value:void 0}),tt("invalid",t);break;case"textarea":fT(t,r),s=Fy(t,r),tt("invalid",t);break;default:s=r}jy(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?qx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$x(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ou(t,l):typeof l=="number"&&Ou(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Nu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&tt("scroll",t):l!=null&&Uw(t,i,l,o))}switch(n){case"input":hh(t),hT(t,r,!1);break;case"textarea":hh(t),pT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?rl(t,!!r.multiple,i,!1):r.defaultValue!=null&&rl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Mf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)fR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=ko(Wu.current),ko(ss.current),Eh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yr]=e,(i=r.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:_h(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_h(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yr]=e,e.stateNode=r}return nn(e),null;case 13:if(nt(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&zn!==null&&e.mode&1&&!(e.flags&128))DP(),bl(),e.flags|=98560,i=!1;else if(i=Eh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Yr]=e}else bl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),i=!1}else _r!==null&&(Ev(_r),_r=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Ot===0&&(Ot=3):E_())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return xl(),fv(t,e),t===null&&Bu(e.stateNode.containerInfo),nn(e),null;case 10:return s_(e.type._context),nn(e),null;case 17:return On(e.type)&&Ff(),nn(e),null;case 19:if(nt(ut),i=e.memoizedState,i===null)return nn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Bc(i,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wf(t),o!==null){for(e.flags|=128,Bc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(ut,ut.current&1|2),e.child}t=t.sibling}i.tail!==null&&Tt()>Rl&&(e.flags|=128,r=!0,Bc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Wf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ot)return nn(e),null}else 2*Tt()-i.renderingStartTime>Rl&&n!==1073741824&&(e.flags|=128,r=!0,Bc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Tt(),e.sibling=null,n=ut.current,Ye(ut,r?n&1|2:n&1),e):(nn(e),null);case 22:case 23:return __(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Fn&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function jV(t,e){switch(e_(e),e.tag){case 1:return On(e.type)&&Ff(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xl(),nt(Nn),nt(dn),c_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return l_(e),null;case 13:if(nt(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ut),null;case 4:return xl(),null;case 10:return s_(e.type._context),null;case 22:case 23:return __(),null;case 24:return null;default:return null}}var Sh=!1,an=!1,BV=typeof WeakSet=="function"?WeakSet:Set,se=null;function tl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function pv(t,e,n){try{n()}catch(r){yt(t,e,r)}}var rI=!1;function $V(t,e){if(Xy=Of,t=vP(),Jw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jy={focusedElem:t,selectionRange:n},Of=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var g=E.memoizedProps,_=E.memoizedState,w=e.stateNode,f=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:pr(e.type,g),_);w.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(A){yt(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return E=rI,rI=!1,E}function mu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pv(e,n,i)}s=s.next}while(s!==r)}}function Jp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pR(t){var e=t.alternate;e!==null&&(t.alternate=null,pR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yr],delete e[zu],delete e[tv],delete e[SV],delete e[bV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mR(t){return t.tag===5||t.tag===3||t.tag===4}function sI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mf));else if(r!==4&&(t=t.child,t!==null))for(gv(t,e,n),t=t.sibling;t!==null;)gv(t,e,n),t=t.sibling}function yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yv(t,e,n),t=t.sibling;t!==null;)yv(t,e,n),t=t.sibling}var Ht=null,vr=!1;function si(t,e,n){for(n=n.child;n!==null;)gR(t,e,n),n=n.sibling}function gR(t,e,n){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(qp,n)}catch{}switch(n.tag){case 5:an||tl(n,e);case 6:var r=Ht,s=vr;Ht=null,si(t,e,n),Ht=r,vr=s,Ht!==null&&(vr?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(vr?(t=Ht,n=n.stateNode,t.nodeType===8?Ng(t.parentNode,n):t.nodeType===1&&Ng(t,n),Fu(t)):Ng(Ht,n.stateNode));break;case 4:r=Ht,s=vr,Ht=n.stateNode.containerInfo,vr=!0,si(t,e,n),Ht=r,vr=s;break;case 0:case 11:case 14:case 15:if(!an&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pv(n,e,o),s=s.next}while(s!==r)}si(t,e,n);break;case 1:if(!an&&(tl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yt(n,e,a)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(an=(r=an)||n.memoizedState!==null,si(t,e,n),an=r):si(t,e,n);break;default:si(t,e,n)}}function iI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BV),e.forEach(function(r){var s=XV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,vr=!1;break e;case 3:Ht=a.stateNode.containerInfo,vr=!0;break e;case 4:Ht=a.stateNode.containerInfo,vr=!0;break e}a=a.return}if(Ht===null)throw Error(Q(160));gR(i,o,s),Ht=null,vr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){yt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yR(e,t),e=e.sibling}function yR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),zr(t),r&4){try{mu(3,t,t.return),Jp(3,t)}catch(g){yt(t,t.return,g)}try{mu(5,t,t.return)}catch(g){yt(t,t.return,g)}}break;case 1:hr(e,t),zr(t),r&512&&n!==null&&tl(n,n.return);break;case 5:if(hr(e,t),zr(t),r&512&&n!==null&&tl(n,n.return),t.flags&32){var s=t.stateNode;try{Ou(s,"")}catch(g){yt(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ux(s,i),By(a,o);var c=By(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?qx(s,h):d==="dangerouslySetInnerHTML"?$x(s,h):d==="children"?Ou(s,h):Uw(s,d,h,c)}switch(a){case"input":Vy(s,i);break;case"textarea":jx(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?rl(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?rl(s,!!i.multiple,i.defaultValue,!0):rl(s,!!i.multiple,i.multiple?[]:"",!1))}s[zu]=i}catch(g){yt(t,t.return,g)}}break;case 6:if(hr(e,t),zr(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){yt(t,t.return,g)}}break;case 3:if(hr(e,t),zr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fu(e.containerInfo)}catch(g){yt(t,t.return,g)}break;case 4:hr(e,t),zr(t);break;case 13:hr(e,t),zr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(v_=Tt())),r&4&&iI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(an=(c=an)||d,hr(e,t),an=c):hr(e,t),zr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(h=se=d;se!==null;){switch(p=se,m=p.child,p.tag){case 0:case 11:case 14:case 15:mu(4,p,p.return);break;case 1:tl(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(g){yt(r,n,g)}}break;case 5:tl(p,p.return);break;case 22:if(p.memoizedState!==null){aI(h);continue}}m!==null?(m.return=p,se=m):aI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zx("display",o))}catch(g){yt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){yt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:hr(e,t),zr(t),r&4&&iI(t);break;case 21:break;default:hr(e,t),zr(t)}}function zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mR(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ou(s,""),r.flags&=-33);var i=sI(t);yv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=sI(t);gv(t,a,o);break;default:throw Error(Q(161))}}catch(l){yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zV(t,e,n){se=t,vR(t)}function vR(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||an;a=Sh;var c=an;if(Sh=o,(an=l)&&!c)for(se=s;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?lI(s):l!==null?(l.return=o,se=l):lI(s);for(;i!==null;)se=i,vR(i),i=i.sibling;se=s,Sh=a,an=c}oI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):oI(t)}}function oI(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||Jp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!an)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qT(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}an||e.flags&512&&mv(e)}catch(p){yt(e,e.return,p)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function aI(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function lI(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jp(4,e)}catch(l){yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){yt(e,s,l)}}var i=e.return;try{mv(e)}catch(l){yt(e,i,l)}break;case 5:var o=e.return;try{mv(e)}catch(l){yt(e,o,l)}}}catch(l){yt(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var qV=Math.ceil,Gf=zs.ReactCurrentDispatcher,g_=zs.ReactCurrentOwner,or=zs.ReactCurrentBatchConfig,Fe=0,zt=null,Pt=null,Gt=0,Fn=0,nl=so(0),Ot=0,Qu=null,ia=0,Zp=0,y_=0,gu=null,Pn=null,v_=0,Rl=1/0,vs=null,Qf=!1,vv=null,Oi=null,bh=!1,bi=null,Yf=0,yu=0,wv=null,of=-1,af=0;function vn(){return Fe&6?Tt():of!==-1?of:of=Tt()}function Li(t){return t.mode&1?Fe&2&&Gt!==0?Gt&-Gt:xV.transition!==null?(af===0&&(af=nP()),af):(t=ze,t!==0||(t=window.event,t=t===void 0?16:cP(t.type)),t):1}function Sr(t,e,n,r){if(50<yu)throw yu=0,wv=null,Error(Q(185));bd(t,n,r),(!(Fe&2)||t!==zt)&&(t===zt&&(!(Fe&2)&&(Zp|=n),Ot===4&&gi(t,Gt)),Ln(t,r),n===1&&Fe===0&&!(e.mode&1)&&(Rl=Tt()+500,Qp&&io()))}function Ln(t,e){var n=t.callbackNode;xL(t,e);var r=Nf(t,t===zt?Gt:0);if(r===0)n!==null&&yT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yT(n),e===1)t.tag===0?AV(cI.bind(null,t)):PP(cI.bind(null,t)),TV(function(){!(Fe&6)&&io()}),n=null;else{switch(rP(r)){case 1:n=qw;break;case 4:n=eP;break;case 16:n=kf;break;case 536870912:n=tP;break;default:n=kf}n=AR(n,wR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wR(t,e){if(of=-1,af=0,Fe&6)throw Error(Q(327));var n=t.callbackNode;if(ll()&&t.callbackNode!==n)return null;var r=Nf(t,t===zt?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xf(t,r);else{e=r;var s=Fe;Fe|=2;var i=ER();(zt!==t||Gt!==e)&&(vs=null,Rl=Tt()+500,Yo(t,e));do try{KV();break}catch(a){_R(t,a)}while(!0);r_(),Gf.current=i,Fe=s,Pt!==null?e=0:(zt=null,Gt=0,e=Ot)}if(e!==0){if(e===2&&(s=Hy(t),s!==0&&(r=s,e=_v(t,s))),e===1)throw n=Qu,Yo(t,0),gi(t,r),Ln(t,Tt()),n;if(e===6)gi(t,r);else{if(s=t.current.alternate,!(r&30)&&!WV(s)&&(e=Xf(t,r),e===2&&(i=Hy(t),i!==0&&(r=i,e=_v(t,i))),e===1))throw n=Qu,Yo(t,0),gi(t,r),Ln(t,Tt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:_o(t,Pn,vs);break;case 3:if(gi(t,r),(r&130023424)===r&&(e=v_+500-Tt(),10<e)){if(Nf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ev(_o.bind(null,t,Pn,vs),e);break}_o(t,Pn,vs);break;case 4:if(gi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ir(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qV(r/1960))-r,10<r){t.timeoutHandle=ev(_o.bind(null,t,Pn,vs),r);break}_o(t,Pn,vs);break;case 5:_o(t,Pn,vs);break;default:throw Error(Q(329))}}}return Ln(t,Tt()),t.callbackNode===n?wR.bind(null,t):null}function _v(t,e){var n=gu;return t.current.memoizedState.isDehydrated&&(Yo(t,e).flags|=256),t=Xf(t,e),t!==2&&(e=Pn,Pn=n,e!==null&&Ev(e)),t}function Ev(t){Pn===null?Pn=t:Pn.push.apply(Pn,t)}function WV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gi(t,e){for(e&=~y_,e&=~Zp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ir(e),r=1<<n;t[n]=-1,e&=~r}}function cI(t){if(Fe&6)throw Error(Q(327));ll();var e=Nf(t,0);if(!(e&1))return Ln(t,Tt()),null;var n=Xf(t,e);if(t.tag!==0&&n===2){var r=Hy(t);r!==0&&(e=r,n=_v(t,r))}if(n===1)throw n=Qu,Yo(t,0),gi(t,e),Ln(t,Tt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_o(t,Pn,vs),Ln(t,Tt()),null}function w_(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(Rl=Tt()+500,Qp&&io())}}function oa(t){bi!==null&&bi.tag===0&&!(Fe&6)&&ll();var e=Fe;Fe|=1;var n=or.transition,r=ze;try{if(or.transition=null,ze=1,t)return t()}finally{ze=r,or.transition=n,Fe=e,!(Fe&6)&&io()}}function __(){Fn=nl.current,nt(nl)}function Yo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EV(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(e_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ff();break;case 3:xl(),nt(Nn),nt(dn),c_();break;case 5:l_(r);break;case 4:xl();break;case 13:nt(ut);break;case 19:nt(ut);break;case 10:s_(r.type._context);break;case 22:case 23:__()}n=n.return}if(zt=t,Pt=t=Vi(t.current,null),Gt=Fn=e,Ot=0,Qu=null,y_=Zp=ia=0,Pn=gu=null,Do!==null){for(e=0;e<Do.length;e++)if(n=Do[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Do=null}return t}function _R(t,e){do{var n=Pt;try{if(r_(),nf.current=Kf,Hf){for(var r=dt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hf=!1}if(sa=0,$t=kt=dt=null,pu=!1,Hu=0,g_.current=null,n===null||n.return===null){Ot=1,Qu=e,Pt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=YT(o);if(m!==null){m.flags&=-257,XT(m,o,a,i,e),m.mode&1&&QT(i,c,e),e=m,l=c;var E=e.updateQueue;if(E===null){var g=new Set;g.add(l),e.updateQueue=g}else E.add(l);break e}else{if(!(e&1)){QT(i,c,e),E_();break e}l=Error(Q(426))}}else if(ot&&a.mode&1){var _=YT(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),XT(_,o,a,i,e),t_(Pl(l,a));break e}}i=l=Pl(l,a),Ot!==4&&(Ot=2),gu===null?gu=[i]:gu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=rR(i,l,e);zT(i,w);break e;case 1:a=l;var f=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Oi===null||!Oi.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=sR(i,a,e);zT(i,A);break e}}i=i.return}while(i!==null)}IR(n)}catch(C){e=C,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function ER(){var t=Gf.current;return Gf.current=Kf,t===null?Kf:t}function E_(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),zt===null||!(ia&268435455)&&!(Zp&268435455)||gi(zt,Gt)}function Xf(t,e){var n=Fe;Fe|=2;var r=ER();(zt!==t||Gt!==e)&&(vs=null,Yo(t,e));do try{HV();break}catch(s){_R(t,s)}while(!0);if(r_(),Fe=n,Gf.current=r,Pt!==null)throw Error(Q(261));return zt=null,Gt=0,Ot}function HV(){for(;Pt!==null;)TR(Pt)}function KV(){for(;Pt!==null&&!vL();)TR(Pt)}function TR(t){var e=bR(t.alternate,t,Fn);t.memoizedProps=t.pendingProps,e===null?IR(t):Pt=e,g_.current=null}function IR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jV(n,e),n!==null){n.flags&=32767,Pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,Pt=null;return}}else if(n=UV(n,e,Fn),n!==null){Pt=n;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Ot===0&&(Ot=5)}function _o(t,e,n){var r=ze,s=or.transition;try{or.transition=null,ze=1,GV(t,e,n,r)}finally{or.transition=s,ze=r}return null}function GV(t,e,n,r){do ll();while(bi!==null);if(Fe&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(PL(t,i),t===zt&&(Pt=zt=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bh||(bh=!0,AR(kf,function(){return ll(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=or.transition,or.transition=null;var o=ze;ze=1;var a=Fe;Fe|=4,g_.current=null,$V(t,n),yR(n,t),pV(Jy),Of=!!Xy,Jy=Xy=null,t.current=n,zV(n),wL(),Fe=a,ze=o,or.transition=i}else t.current=n;if(bh&&(bh=!1,bi=t,Yf=s),i=t.pendingLanes,i===0&&(Oi=null),TL(n.stateNode),Ln(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qf)throw Qf=!1,t=vv,vv=null,t;return Yf&1&&t.tag!==0&&ll(),i=t.pendingLanes,i&1?t===wv?yu++:(yu=0,wv=t):yu=0,io(),null}function ll(){if(bi!==null){var t=rP(Yf),e=or.transition,n=ze;try{if(or.transition=null,ze=16>t?16:t,bi===null)var r=!1;else{if(t=bi,bi=null,Yf=0,Fe&6)throw Error(Q(331));var s=Fe;for(Fe|=4,se=t.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:mu(8,d,i)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var p=d.sibling,m=d.return;if(pR(d),d===c){se=null;break}if(p!==null){p.return=m,se=p;break}se=m}}}var E=i.alternate;if(E!==null){var g=E.child;if(g!==null){E.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mu(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,se=w;break e}se=i.return}}var f=t.current;for(se=f;se!==null;){o=se;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,se=v;else e:for(o=f;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jp(9,a)}}catch(C){yt(a,a.return,C)}if(a===o){se=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,se=A;break e}se=a.return}}if(Fe=s,io(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(qp,t)}catch{}r=!0}return r}finally{ze=n,or.transition=e}}return!1}function uI(t,e,n){e=Pl(n,e),e=rR(t,e,1),t=Ni(t,e,1),e=vn(),t!==null&&(bd(t,1,e),Ln(t,e))}function yt(t,e,n){if(t.tag===3)uI(t,t,n);else for(;e!==null;){if(e.tag===3){uI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oi===null||!Oi.has(r))){t=Pl(n,t),t=sR(e,t,1),e=Ni(e,t,1),t=vn(),e!==null&&(bd(e,1,t),Ln(e,t));break}}e=e.return}}function QV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Gt&n)===n&&(Ot===4||Ot===3&&(Gt&130023424)===Gt&&500>Tt()-v_?Yo(t,0):y_|=n),Ln(t,e)}function SR(t,e){e===0&&(t.mode&1?(e=mh,mh<<=1,!(mh&130023424)&&(mh=4194304)):e=1);var n=vn();t=Os(t,e),t!==null&&(bd(t,e,n),Ln(t,n))}function YV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SR(t,n)}function XV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),SR(t,n)}var bR;bR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)Rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rn=!1,FV(t,e,n);Rn=!!(t.flags&131072)}else Rn=!1,ot&&e.flags&1048576&&RP(e,Bf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sf(t,e),t=e.pendingProps;var s=Sl(e,dn.current);al(e,n),s=d_(null,e,r,t,s,n);var i=h_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,On(r)?(i=!0,Uf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,o_(e),s.updater=Xp,e.stateNode=s,s._reactInternals=e,av(e,r,t,n),e=uv(null,e,r,!0,i,n)):(e.tag=0,ot&&i&&Zw(e),gn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ZV(r),t=pr(r,t),s){case 0:e=cv(null,e,r,t,n);break e;case 1:e=eI(null,e,r,t,n);break e;case 11:e=JT(null,e,r,t,n);break e;case 14:e=ZT(null,e,r,pr(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),cv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),eI(t,e,r,s,n);case 3:e:{if(lR(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,LP(t,e),qf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pl(Error(Q(423)),e),e=tI(t,e,r,n,s);break e}else if(r!==s){s=Pl(Error(Q(424)),e),e=tI(t,e,r,n,s);break e}else for(zn=ki(e.stateNode.containerInfo.firstChild),Hn=e,ot=!0,_r=null,n=NP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bl(),r===s){e=Ls(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 5:return VP(e),t===null&&sv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zy(r,s)?o=null:i!==null&&Zy(r,i)&&(e.flags|=32),aR(t,e),gn(t,e,o,n),e.child;case 6:return t===null&&sv(e),null;case 13:return cR(t,e,n);case 4:return a_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Al(e,null,r,n):gn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),JT(t,e,r,s,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ye($f,r._currentValue),r._currentValue=o,i!==null)if(Pr(i.value,o)){if(i.children===s.children&&!Nn.current){e=Ls(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=xs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),iv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,al(e,n),s=lr(s),r=r(s),e.flags|=1,gn(t,e,r,n),e.child;case 14:return r=e.type,s=pr(r,e.pendingProps),s=pr(r.type,s),ZT(t,e,r,s,n);case 15:return iR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),sf(t,e),e.tag=1,On(r)?(t=!0,Uf(e)):t=!1,al(e,n),nR(e,r,s),av(e,r,s,n),uv(null,e,r,!0,t,n);case 19:return uR(t,e,n);case 22:return oR(t,e,n)}throw Error(Q(156,e.tag))};function AR(t,e){return Zx(t,e)}function JV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(t,e,n,r){return new JV(t,e,n,r)}function T_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZV(t){if(typeof t=="function")return T_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bw)return 11;if(t===$w)return 14}return 2}function Vi(t,e){var n=t.alternate;return n===null?(n=ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")T_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ha:return Xo(n.children,s,i,e);case jw:o=8,s|=8;break;case Dy:return t=ir(12,n,e,s|2),t.elementType=Dy,t.lanes=i,t;case ky:return t=ir(13,n,e,s),t.elementType=ky,t.lanes=i,t;case Ny:return t=ir(19,n,e,s),t.elementType=Ny,t.lanes=i,t;case Vx:return em(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ox:o=10;break e;case Lx:o=9;break e;case Bw:o=11;break e;case $w:o=14;break e;case fi:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=ir(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xo(t,e,n,r){return t=ir(7,t,r,e),t.lanes=n,t}function em(t,e,n,r){return t=ir(22,t,r,e),t.elementType=Vx,t.lanes=n,t.stateNode={isHidden:!1},t}function Bg(t,e,n){return t=ir(6,t,null,e),t.lanes=n,t}function $g(t,e,n){return e=ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tg(0),this.expirationTimes=Tg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function I_(t,e,n,r,s,i,o,a,l){return t=new eM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ir(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},o_(i),t}function tM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xR(t){if(!t)return Hi;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(On(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(On(n))return xP(t,n,e)}return e}function PR(t,e,n,r,s,i,o,a,l){return t=I_(n,r,!0,t,s,i,o,a,l),t.context=xR(null),n=t.current,r=vn(),s=Li(n),i=xs(r,s),i.callback=e??null,Ni(n,i,s),t.current.lanes=s,bd(t,s,r),Ln(t,r),t}function tm(t,e,n,r){var s=e.current,i=vn(),o=Li(s);return n=xR(n),e.context===null?e.context=n:e.pendingContext=n,e=xs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ni(s,e,o),t!==null&&(Sr(t,s,o,i),tf(t,s,o)),o}function Jf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function S_(t,e){dI(t,e),(t=t.alternate)&&dI(t,e)}function nM(){return null}var RR=typeof reportError=="function"?reportError:function(t){console.error(t)};function b_(t){this._internalRoot=t}nm.prototype.render=b_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));tm(t,e,null,null)};nm.prototype.unmount=b_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oa(function(){tm(null,t,null,null)}),e[Ns]=null}};function nm(t){this._internalRoot=t}nm.prototype.unstable_scheduleHydration=function(t){if(t){var e=oP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mi.length&&e!==0&&e<mi[n].priority;n++);mi.splice(n,0,t),n===0&&lP(t)}};function A_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hI(){}function rM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Jf(o);i.call(c)}}var o=PR(e,r,t,0,null,!1,!1,"",hI);return t._reactRootContainer=o,t[Ns]=o.current,Bu(t.nodeType===8?t.parentNode:t),oa(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Jf(l);a.call(c)}}var l=I_(t,0,!1,null,null,!1,!1,"",hI);return t._reactRootContainer=l,t[Ns]=l.current,Bu(t.nodeType===8?t.parentNode:t),oa(function(){tm(e,l,n,r)}),l}function sm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Jf(o);a.call(l)}}tm(e,o,t,s)}else o=rM(n,e,t,s,r);return Jf(o)}sP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zc(e.pendingLanes);n!==0&&(Ww(e,n|1),Ln(e,Tt()),!(Fe&6)&&(Rl=Tt()+500,io()))}break;case 13:oa(function(){var r=Os(t,1);if(r!==null){var s=vn();Sr(r,t,1,s)}}),S_(t,1)}};Hw=function(t){if(t.tag===13){var e=Os(t,134217728);if(e!==null){var n=vn();Sr(e,t,134217728,n)}S_(t,134217728)}};iP=function(t){if(t.tag===13){var e=Li(t),n=Os(t,e);if(n!==null){var r=vn();Sr(n,t,e,r)}S_(t,e)}};oP=function(){return ze};aP=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};zy=function(t,e,n){switch(e){case"input":if(Vy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gp(r);if(!s)throw Error(Q(90));Fx(r),Vy(r,s)}}}break;case"textarea":jx(t,n);break;case"select":e=n.value,e!=null&&rl(t,!!n.multiple,e,!1)}};Kx=w_;Gx=oa;var sM={usingClientEntryPoint:!1,Events:[xd,Ya,Gp,Wx,Hx,w_]},$c={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iM={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xx(t),t===null?null:t.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||nM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{qp=Ah.inject(iM),rs=Ah}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sM;Jn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A_(e))throw Error(Q(200));return tM(t,e,null,n)};Jn.createRoot=function(t,e){if(!A_(t))throw Error(Q(299));var n=!1,r="",s=RR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=I_(t,1,!1,null,null,n,!1,r,s),t[Ns]=e.current,Bu(t.nodeType===8?t.parentNode:t),new b_(e)};Jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Xx(e),t=t===null?null:t.stateNode,t};Jn.flushSync=function(t){return oa(t)};Jn.hydrate=function(t,e,n){if(!rm(e))throw Error(Q(200));return sm(null,t,e,!0,n)};Jn.hydrateRoot=function(t,e,n){if(!A_(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=RR;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PR(e,null,t,1,n??null,s,!1,i,o),t[Ns]=e.current,Bu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nm(e)};Jn.render=function(t,e,n){if(!rm(e))throw Error(Q(200));return sm(null,t,e,!1,n)};Jn.unmountComponentAtNode=function(t){if(!rm(t))throw Error(Q(40));return t._reactRootContainer?(oa(function(){sm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};Jn.unstable_batchedUpdates=w_;Jn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rm(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return sm(t,e,n,!1,r)};Jn.version="18.3.1-next-f1338f8080-20240426";function CR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CR)}catch(t){console.error(t)}}CR(),Cx.exports=Jn;var Rd=Cx.exports;const DR=Dw(Rd);var kR,fI=Rd;kR=fI.createRoot,fI.hydrateRoot;const oM="modulepreload",aM=function(t,e){return new URL(t,e).href},pI={},Se=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=aM(c,r),c in pI)return;pI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const g=o[E];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":oM,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((E,g)=>{m.addEventListener("load",E),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},lM=1,cM=1e6;let zg=0;function uM(){return zg=(zg+1)%Number.MAX_SAFE_INTEGER,zg.toString()}const qg=new Map,mI=t=>{if(qg.has(t))return;const e=setTimeout(()=>{qg.delete(t),vu({type:"REMOVE_TOAST",toastId:t})},cM);qg.set(t,e)},dM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,lM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?mI(n):t.toasts.forEach(r=>{mI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},cf=[];let uf={toasts:[]};function vu(t){uf=dM(uf,t),cf.forEach(e=>{e(uf)})}function hM({...t}){const e=uM(),n=s=>vu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>vu({type:"DISMISS_TOAST",toastId:e});return vu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function x_(){const[t,e]=b.useState(uf);return b.useEffect(()=>(cf.push(e),()=>{const n=cf.indexOf(e);n>-1&&cf.splice(n,1)}),[t]),{...t,toast:hM,dismiss:n=>vu({type:"DISMISS_TOAST",toastId:n})}}function Qe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function gI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function NR(...t){return e=>{let n=!1;const r=t.map(s=>{const i=gI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():gI(t[s],null)}}}}function Yt(...t){return b.useCallback(NR(...t),t)}function fM(t,e){const n=b.createContext(e),r=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function nc(t,e=[]){let n=[];function r(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:p,children:m,...E}=h,g=((w=p==null?void 0:p[t])==null?void 0:w[l])||a,_=b.useMemo(()=>E,Object.values(E));return x.jsx(g.Provider,{value:_,children:m})};c.displayName=i+"Provider";function d(h,p){var g;const m=((g=p==null?void 0:p[t])==null?void 0:g[l])||a,E=b.useContext(m);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,pM(s,...e)]}function pM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Yu(t){const e=gM(t),n=b.forwardRef((r,s)=>{const{children:i,...o}=r,a=b.Children.toArray(i),l=a.find(vM);if(l){const c=l.props.children,d=a.map(h=>h===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:s,children:b.isValidElement(c)?b.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var mM=Yu("Slot");function gM(t){const e=b.forwardRef((n,r)=>{const{children:s,...i}=n;if(b.isValidElement(s)){const o=_M(s),a=wM(i,s.props);return s.type!==b.Fragment&&(a.ref=r?NR(r,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var OR=Symbol("radix.slottable");function yM(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=OR,e}function vM(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===OR}function wM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function _M(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function EM(t){const e=t+"CollectionProvider",[n,r]=nc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:_,children:w}=g,f=z.useRef(null),v=z.useRef(new Map).current;return x.jsx(s,{scope:_,itemMap:v,collectionRef:f,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=Yu(a),c=z.forwardRef((g,_)=>{const{scope:w,children:f}=g,v=i(a,w),A=Yt(_,v.collectionRef);return x.jsx(l,{ref:A,children:f})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=Yu(d),m=z.forwardRef((g,_)=>{const{scope:w,children:f,...v}=g,A=z.useRef(null),C=Yt(_,A),L=i(d,w);return z.useEffect(()=>(L.itemMap.set(A,{ref:A,...v}),()=>void L.itemMap.delete(A))),x.jsx(p,{[h]:"",ref:C,children:f})});m.displayName=d;function E(g){const _=i(t+"CollectionConsumer",g);return z.useCallback(()=>{const f=_.collectionRef.current;if(!f)return[];const v=Array.from(f.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((L,S)=>v.indexOf(L.ref.current)-v.indexOf(S.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},E,r]}var TM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ft=TM.reduce((t,e)=>{const n=Yu(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function LR(t,e){t&&Rd.flushSync(()=>t.dispatchEvent(e))}function as(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function IM(t,e=globalThis==null?void 0:globalThis.document){const n=as(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var SM="DismissableLayer",Tv="dismissableLayer.update",bM="dismissableLayer.pointerDownOutside",AM="dismissableLayer.focusOutside",yI,VR=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),im=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(VR),[d,h]=b.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),E=Yt(e,S=>h(S)),g=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(_),f=d?g.indexOf(d):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,A=f>=w,C=PM(S=>{const T=S.target,P=[...c.branches].some(D=>D.contains(T));!A||P||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},p),L=RM(S=>{const T=S.target;[...c.branches].some(D=>D.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},p);return IM(S=>{f===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),b.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(yI=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),vI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=yI)}},[d,p,n,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),vI())},[d,c]),b.useEffect(()=>{const S=()=>m({});return document.addEventListener(Tv,S),()=>document.removeEventListener(Tv,S)},[]),x.jsx(ft.div,{...l,ref:E,style:{pointerEvents:v?A?"auto":"none":void 0,...t.style},onFocusCapture:Qe(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Qe(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Qe(t.onPointerDownCapture,C.onPointerDownCapture)})});im.displayName=SM;var xM="DismissableLayerBranch",MR=b.forwardRef((t,e)=>{const n=b.useContext(VR),r=b.useRef(null),s=Yt(e,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx(ft.div,{...t,ref:s})});MR.displayName=xM;function PM(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){FR(bM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function RM(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&FR(AM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vI(){const t=new CustomEvent(Tv);document.dispatchEvent(t)}function FR(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?LR(s,i):s.dispatchEvent(i)}var CM=im,DM=MR,Vs=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},kM="Portal",P_=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=b.useState(!1);Vs(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?DR.createPortal(x.jsx(ft.div,{...r,ref:e}),o):null});P_.displayName=kM;function NM(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var _a=t=>{const{present:e,children:n}=t,r=OM(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=Yt(r.ref,LM(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};_a.displayName="Presence";function OM(t){const[e,n]=b.useState(),r=b.useRef(null),s=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=NM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=xh(r.current);i.current=a==="mounted"?c:"none"},[a]),Vs(()=>{const c=r.current,d=s.current;if(d!==t){const p=i.current,m=xh(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Vs(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const g=xh(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=m=>{m.target===e&&(i.current=xh(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function xh(t){return(t==null?void 0:t.animationName)||"none"}function LM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var VM=Vw[" useInsertionEffect ".trim().toString()]||Vs;function R_({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=MM({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=b.useCallback(d=>{var h;if(a){const p=FM(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else i(d)},[a,t,i,o]);return[l,c]}function MM({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),s=b.useRef(n),i=b.useRef(e);return VM(()=>{i.current=e},[e]),b.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function FM(t){return typeof t=="function"}var UM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jM="VisuallyHidden",om=b.forwardRef((t,e)=>x.jsx(ft.span,{...t,ref:e,style:{...UM,...t.style}}));om.displayName=jM;var BM=om,C_="ToastProvider",[D_,$M,zM]=EM("Toast"),[UR]=nc("Toast",[zM]),[qM,am]=UR(C_),jR=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=b.useState(null),[c,d]=b.useState(0),h=b.useRef(!1),p=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${C_}\`. Expected non-empty \`string\`.`),x.jsx(D_.Provider,{scope:e,children:x.jsx(qM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};jR.displayName=C_;var BR="ToastViewport",WM=["F8"],Iv="toast.viewportPause",Sv="toast.viewportResume",$R=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=WM,label:s="Notifications ({hotkey})",...i}=t,o=am(BR,n),a=$M(n),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),p=Yt(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;b.useEffect(()=>{const _=w=>{var v;r.length!==0&&r.every(A=>w[A]||w.code===A)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),b.useEffect(()=>{const _=l.current,w=h.current;if(E&&_&&w){const f=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(Iv);w.dispatchEvent(L),o.isClosePausedRef.current=!0}},v=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(Sv);w.dispatchEvent(L),o.isClosePausedRef.current=!1}},A=L=>{!_.contains(L.relatedTarget)&&v()},C=()=>{_.contains(document.activeElement)||v()};return _.addEventListener("focusin",f),_.addEventListener("focusout",A),_.addEventListener("pointermove",f),_.addEventListener("pointerleave",C),window.addEventListener("blur",f),window.addEventListener("focus",v),()=>{_.removeEventListener("focusin",f),_.removeEventListener("focusout",A),_.removeEventListener("pointermove",f),_.removeEventListener("pointerleave",C),window.removeEventListener("blur",f),window.removeEventListener("focus",v)}}},[E,o.isClosePausedRef]);const g=b.useCallback(({tabbingDirection:_})=>{const f=a().map(v=>{const A=v.ref.current,C=[A,...sF(A)];return _==="forwards"?C:C.reverse()});return(_==="forwards"?f.reverse():f).flat()},[a]);return b.useEffect(()=>{const _=h.current;if(_){const w=f=>{var C,L,S;const v=f.altKey||f.ctrlKey||f.metaKey;if(f.key==="Tab"&&!v){const T=document.activeElement,P=f.shiftKey;if(f.target===_&&P){(C=c.current)==null||C.focus();return}const O=g({tabbingDirection:P?"backwards":"forwards"}),k=O.findIndex(U=>U===T);Wg(O.slice(k+1))?f.preventDefault():P?(L=c.current)==null||L.focus():(S=d.current)==null||S.focus()}};return _.addEventListener("keydown",w),()=>_.removeEventListener("keydown",w)}},[a,g]),x.jsxs(DM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&x.jsx(bv,{ref:c,onFocusFromOutsideViewport:()=>{const _=g({tabbingDirection:"forwards"});Wg(_)}}),x.jsx(D_.Slot,{scope:n,children:x.jsx(ft.ol,{tabIndex:-1,...i,ref:p})}),E&&x.jsx(bv,{ref:d,onFocusFromOutsideViewport:()=>{const _=g({tabbingDirection:"backwards"});Wg(_)}})]})});$R.displayName=BR;var zR="ToastFocusProxy",bv=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=am(zR,n);return x.jsx(om,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});bv.displayName=zR;var Cd="Toast",HM="toast.swipeStart",KM="toast.swipeMove",GM="toast.swipeCancel",QM="toast.swipeEnd",qR=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=R_({prop:r,defaultProp:s??!0,onChange:i,caller:Cd});return x.jsx(_a,{present:n||a,children:x.jsx(JM,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:as(t.onPause),onResume:as(t.onResume),onSwipeStart:Qe(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Qe(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Qe(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Qe(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});qR.displayName=Cd;var[YM,XM]=UR(Cd,{onClose(){}}),JM=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...E}=t,g=am(Cd,n),[_,w]=b.useState(null),f=Yt(e,U=>w(U)),v=b.useRef(null),A=b.useRef(null),C=s||g.duration,L=b.useRef(0),S=b.useRef(C),T=b.useRef(0),{onToastAdd:P,onToastRemove:D}=g,R=as(()=>{var X;(_==null?void 0:_.contains(document.activeElement))&&((X=g.viewport)==null||X.focus()),o()}),O=b.useCallback(U=>{!U||U===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(R,U))},[R]);b.useEffect(()=>{const U=g.viewport;if(U){const X=()=>{O(S.current),c==null||c()},te=()=>{const G=new Date().getTime()-L.current;S.current=S.current-G,window.clearTimeout(T.current),l==null||l()};return U.addEventListener(Iv,te),U.addEventListener(Sv,X),()=>{U.removeEventListener(Iv,te),U.removeEventListener(Sv,X)}}},[g.viewport,C,l,c,O]),b.useEffect(()=>{i&&!g.isClosePausedRef.current&&O(C)},[i,C,g.isClosePausedRef,O]),b.useEffect(()=>(P(),()=>D()),[P,D]);const k=b.useMemo(()=>_?XR(_):null,[_]);return g.viewport?x.jsxs(x.Fragment,{children:[k&&x.jsx(ZM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:k}),x.jsx(YM,{scope:n,onClose:R,children:Rd.createPortal(x.jsx(D_.ItemSlot,{scope:n,children:x.jsx(CM,{asChild:!0,onEscapeKeyDown:Qe(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(ft.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...E,ref:f,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Qe(t.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Qe(t.onPointerDown,U=>{U.button===0&&(v.current={x:U.clientX,y:U.clientY})}),onPointerMove:Qe(t.onPointerMove,U=>{if(!v.current)return;const X=U.clientX-v.current.x,te=U.clientY-v.current.y,G=!!A.current,j=["left","right"].includes(g.swipeDirection),F=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,q=j?F(0,X):0,ne=j?0:F(0,te),Z=U.pointerType==="touch"?10:2,re={x:q,y:ne},ae={originalEvent:U,delta:re};G?(A.current=re,Ph(KM,h,ae,{discrete:!1})):wI(re,g.swipeDirection,Z)?(A.current=re,Ph(HM,d,ae,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(X)>Z||Math.abs(te)>Z)&&(v.current=null)}),onPointerUp:Qe(t.onPointerUp,U=>{const X=A.current,te=U.target;if(te.hasPointerCapture(U.pointerId)&&te.releasePointerCapture(U.pointerId),A.current=null,v.current=null,X){const G=U.currentTarget,j={originalEvent:U,delta:X};wI(X,g.swipeDirection,g.swipeThreshold)?Ph(QM,m,j,{discrete:!0}):Ph(GM,p,j,{discrete:!0}),G.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),ZM=t=>{const{__scopeToast:e,children:n,...r}=t,s=am(Cd,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return nF(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(P_,{asChild:!0,children:x.jsx(om,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},eF="ToastTitle",WR=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(ft.div,{...r,ref:e})});WR.displayName=eF;var tF="ToastDescription",HR=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(ft.div,{...r,ref:e})});HR.displayName=tF;var KR="ToastAction",GR=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(YR,{altText:n,asChild:!0,children:x.jsx(k_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${KR}\`. Expected non-empty \`string\`.`),null)});GR.displayName=KR;var QR="ToastClose",k_=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=XM(QR,n);return x.jsx(YR,{asChild:!0,children:x.jsx(ft.button,{type:"button",...r,ref:e,onClick:Qe(t.onClick,s.onClose)})})});k_.displayName=QR;var YR=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx(ft.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function XR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),rF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...XR(r))}}),e}function Ph(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?LR(s,i):s.dispatchEvent(i)}var wI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function nF(t=()=>{}){const e=as(t);Vs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function rF(t){return t.nodeType===t.ELEMENT_NODE}function sF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Wg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var iF=jR,JR=$R,ZR=qR,e1=WR,t1=HR,n1=GR,r1=k_;function s1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=s1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function i1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=s1(t))&&(r&&(r+=" "),r+=e);return r}const _I=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,EI=i1,o1=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return EI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=_I(d)||_I(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(E=>{let[g,_]=E;return Array.isArray(_)?_.includes({...i,...a}[g]):{...i,...a}[g]===_})?[...c,h,p]:c},[]);return EI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...aF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:a1("lucide",s),...a},[...o.map(([c,d])=>b.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(lF,{ref:i,iconNode:e,className:a1(`lucide-${oF(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=Je("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=Je("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=Je("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=Je("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=Je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=Je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=Je("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Je("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Je("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=Je("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=Je("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Je("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),O_="-",PF=t=>{const e=CF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(O_);return a[0]===""&&a.length!==1&&a.shift(),c1(a,e)||RF(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},c1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?c1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(O_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},AI=/^\[(.+)\]$/,RF=t=>{if(AI.test(t)){const e=AI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},CF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return kF(Object.entries(t.classGroups),n).forEach(([i,o])=>{Av(o,r,i,e)}),r},Av=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:xI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(DF(s)){Av(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Av(o,xI(e,i),n,r)})})},xI=(t,e)=>{let n=t;return e.split(O_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},DF=t=>t.isThemeGetter,kF=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,NF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},u1="!",OF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let _=0;_<a.length;_++){let w=a[_];if(c===0){if(w===s&&(r||a.slice(_,_+i)===e)){l.push(a.slice(d,_)),d=_+i;continue}if(w==="/"){h=_;continue}}w==="["?c++:w==="]"&&c--}const p=l.length===0?a:a.substring(d),m=p.startsWith(u1),E=m?p.substring(1):p,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:E,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},LF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},VF=t=>({cache:NF(t.cacheSize),parseClassName:OF(t),...PF(t)}),MF=/\s+/,FF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(MF);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let E=!!m,g=r(E?p.substring(0,m):p);if(!g){if(!E){a=c+(a.length>0?" "+a:a);continue}if(g=r(p),!g){a=c+(a.length>0?" "+a:a);continue}E=!1}const _=LF(d).join(":"),w=h?_+u1:_,f=w+g;if(i.includes(f))continue;i.push(f);const v=s(g,E);for(let A=0;A<v.length;++A){const C=v[A];i.push(w+C)}a=c+(a.length>0?" "+a:a)}return a};function UF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=d1(e))&&(r&&(r+=" "),r+=n);return r}const d1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=d1(t[r]))&&(n&&(n+=" "),n+=e);return n};function jF(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=VF(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=FF(l,n);return s(l,d),d}return function(){return i(UF.apply(null,arguments))}}const et=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},h1=/^\[(?:([a-z-]+):)?(.+)\]$/i,BF=/^\d+\/\d+$/,$F=new Set(["px","full","screen"]),zF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,HF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gs=t=>cl(t)||$F.has(t)||BF.test(t),ii=t=>rc(t,"length",tU),cl=t=>!!t&&!Number.isNaN(Number(t)),Kg=t=>rc(t,"number",cl),zc=t=>!!t&&Number.isInteger(Number(t)),GF=t=>t.endsWith("%")&&cl(t.slice(0,-1)),Ae=t=>h1.test(t),oi=t=>zF.test(t),QF=new Set(["length","size","percentage"]),YF=t=>rc(t,QF,f1),XF=t=>rc(t,"position",f1),JF=new Set(["image","url"]),ZF=t=>rc(t,JF,rU),eU=t=>rc(t,"",nU),qc=()=>!0,rc=(t,e,n)=>{const r=h1.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},tU=t=>qF.test(t)&&!WF.test(t),f1=()=>!1,nU=t=>HF.test(t),rU=t=>KF.test(t),sU=()=>{const t=et("colors"),e=et("spacing"),n=et("blur"),r=et("brightness"),s=et("borderColor"),i=et("borderRadius"),o=et("borderSpacing"),a=et("borderWidth"),l=et("contrast"),c=et("grayscale"),d=et("hueRotate"),h=et("invert"),p=et("gap"),m=et("gradientColorStops"),E=et("gradientColorStopPositions"),g=et("inset"),_=et("margin"),w=et("opacity"),f=et("padding"),v=et("saturate"),A=et("scale"),C=et("sepia"),L=et("skew"),S=et("space"),T=et("translate"),P=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Ae,e],O=()=>[Ae,e],k=()=>["",gs,ii],U=()=>["auto",cl,Ae],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Ae],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[cl,Ae];return{cacheSize:500,separator:":",theme:{colors:[qc],spacing:[gs,ii],blur:["none","",oi,Ae],brightness:ne(),borderColor:[t],borderRadius:["none","","full",oi,Ae],borderSpacing:O(),borderWidth:k(),contrast:ne(),grayscale:F(),hueRotate:ne(),invert:F(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[GF,ii],inset:R(),margin:R(),opacity:ne(),padding:O(),saturate:ne(),scale:ne(),sepia:F(),skew:ne(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Ae]}],container:["container"],columns:[{columns:[oi]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),Ae]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zc,Ae]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ae]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",zc,Ae]}],"grid-cols":[{"grid-cols":[qc]}],"col-start-end":[{col:["auto",{span:["full",zc,Ae]},Ae]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[qc]}],"row-start-end":[{row:["auto",{span:[zc,Ae]},Ae]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ae]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[f]}],px:[{px:[f]}],py:[{py:[f]}],ps:[{ps:[f]}],pe:[{pe:[f]}],pt:[{pt:[f]}],pr:[{pr:[f]}],pb:[{pb:[f]}],pl:[{pl:[f]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ae,e]}],"min-w":[{"min-w":[Ae,e,"min","max","fit"]}],"max-w":[{"max-w":[Ae,e,"none","full","min","max","fit","prose",{screen:[oi]},oi]}],h:[{h:[Ae,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ae,e,"auto","min","max","fit"]}],"font-size":[{text:["base",oi,ii]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kg]}],"font-family":[{font:[qc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ae]}],"line-clamp":[{"line-clamp":["none",cl,Kg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gs,Ae]}],"list-image":[{"list-image":["none",Ae]}],"list-style-type":[{list:["none","disc","decimal",Ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gs,ii]}],"underline-offset":[{"underline-offset":["auto",gs,Ae]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),XF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",YF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZF]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:te()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[gs,Ae]}],"outline-w":[{outline:[gs,ii]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[gs,ii]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",oi,eU]}],"shadow-color":[{shadow:[qc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",oi,Ae]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ae]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",Ae]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[zc,Ae]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gs,ii,Kg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},iU=jF(sU);function Xt(...t){return iU(i1(t))}const oU=iF,p1=b.forwardRef(({className:t,...e},n)=>x.jsx(JR,{ref:n,className:Xt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));p1.displayName=JR.displayName;const aU=o1("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m1=b.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(ZR,{ref:r,className:Xt(aU({variant:e}),t),...n}));m1.displayName=ZR.displayName;const lU=b.forwardRef(({className:t,...e},n)=>x.jsx(n1,{ref:n,className:Xt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));lU.displayName=n1.displayName;const g1=b.forwardRef(({className:t,...e},n)=>x.jsx(r1,{ref:n,className:Xt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(N_,{className:"h-4 w-4"})}));g1.displayName=r1.displayName;const y1=b.forwardRef(({className:t,...e},n)=>x.jsx(e1,{ref:n,className:Xt("text-sm font-semibold",t),...e}));y1.displayName=e1.displayName;const v1=b.forwardRef(({className:t,...e},n)=>x.jsx(t1,{ref:n,className:Xt("text-sm opacity-90",t),...e}));v1.displayName=t1.displayName;function cU(){const{toasts:t}=x_();return x.jsxs(oU,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return x.jsxs(m1,{...i,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(y1,{children:n}),r&&x.jsx(v1,{children:r})]}),s,x.jsx(g1,{})]},e)}),x.jsx(p1,{})]})}var Zf=["light","dark"],L_="(prefers-color-scheme: dark)",uU=typeof window>"u",V_=b.createContext(void 0),dU={setTheme:t=>{},themes:[]},w1=()=>{var t;return(t=b.useContext(V_))!=null?t:dU},hU=t=>b.useContext(V_)?t.children:b.createElement(pU,{...t}),fU=["light","dark"],pU=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=fU,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,p]=b.useState(()=>PI(s,o)),[m,E]=b.useState(()=>PI(s)),g=l?Object.values(l):i,_=b.useCallback(A=>{let C=A;if(!C)return;A==="system"&&n&&(C=RI());let L=l?l[C]:C,S=e?gU():null,T=document.documentElement;if(a==="class"?(T.classList.remove(...g),L&&T.classList.add(L)):L?T.setAttribute(a,L):T.removeAttribute(a),r){let P=Zf.includes(o)?o:null,D=Zf.includes(C)?C:P;T.style.colorScheme=D}S==null||S()},[]),w=b.useCallback(A=>{let C=typeof A=="function"?A(A):A;p(C);try{localStorage.setItem(s,C)}catch{}},[t]),f=b.useCallback(A=>{let C=RI(A);E(C),h==="system"&&n&&!t&&_("system")},[h,t]);b.useEffect(()=>{let A=window.matchMedia(L_);return A.addListener(f),f(A),()=>A.removeListener(f)},[f]),b.useEffect(()=>{let A=C=>{if(C.key!==s)return;let L=C.newValue||o;w(L)};return window.addEventListener("storage",A),()=>window.removeEventListener("storage",A)},[w]),b.useEffect(()=>{_(t??h)},[t,h]);let v=b.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,w,t,m,n,i]);return b.createElement(V_.Provider,{value:v},b.createElement(mU,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:d}),c)},mU=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Zf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(E,g=!1,_=!0)=>{let w=o?o[E]:E,f=g?E+"|| ''":`'${w}'`,v="";return s&&_&&!g&&Zf.includes(E)&&(v+=`d.style.colorScheme = '${E}';`),n==="class"?g||w?v+=`c.add(${f})`:v+="null":w&&(v+=`d[s](n,${f})`),v},m=t?`!function(){${d}${p(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${L_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),PI=(t,e)=>{if(uU)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},gU=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},RI=t=>(t||(t=window.matchMedia(L_)),t.matches?"dark":"light"),yU=t=>{switch(t){case"success":return _U;case"info":return TU;case"warning":return EU;case"error":return IU;default:return null}},vU=Array(12).fill(0),wU=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},vU.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),_U=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),EU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),TU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),IU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),SU=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bU=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},xv=1,AU=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:xv++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],z.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(PU(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||xv++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},An=new AU,xU=(t,e)=>{let n=(e==null?void 0:e.id)||xv++;return An.addToast({title:t,...e,id:n}),n},PU=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",RU=xU,CU=()=>An.toasts,DU=()=>An.getActiveToasts(),_t=Object.assign(RU,{success:An.success,info:An.info,warning:An.warning,error:An.error,custom:An.custom,message:An.message,promise:An.promise,dismiss:An.dismiss,loading:An.loading},{getHistory:CU,getToasts:DU});function kU(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}kU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rh(t){return t.label!==void 0}var NU=3,OU="32px",LU="16px",CI=4e3,VU=356,MU=14,FU=20,UU=200;function fr(...t){return t.filter(Boolean).join(" ")}function jU(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var BU=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:p,toast:m,unstyled:E,interacting:g,setHeights:_,visibleToasts:w,heights:f,index:v,toasts:A,expanded:C,removeToast:L,defaultRichColors:S,closeButton:T,style:P,cancelButtonStyle:D,actionButtonStyle:R,className:O="",descriptionClassName:k="",duration:U,position:X,gap:te,loadingIcon:G,expandByDefault:j,classNames:F,icons:q,closeButtonAriaLabel:ne="Close toast",pauseWhenPageIsHidden:Z}=t,[re,ae]=z.useState(null),[Ie,Ve]=z.useState(null),[ue,we]=z.useState(!1),[Ce,At]=z.useState(!1),[Vt,Zt]=z.useState(!1),[Wt,In]=z.useState(!1),[Vr,be]=z.useState(!1),[er,Ys]=z.useState(0),[ct,Mt]=z.useState(0),Mr=z.useRef(m.duration||U||CI),Qd=z.useRef(null),Fr=z.useRef(null),eg=v===0,ho=v+1<=w,hn=m.type,ps=m.dismissible!==!1,Ec=m.className||"",tg=m.descriptionClassName||"",Sa=z.useMemo(()=>f.findIndex(ve=>ve.toastId===m.id)||0,[f,m.id]),Yd=z.useMemo(()=>{var ve;return(ve=m.closeButton)!=null?ve:T},[m.closeButton,T]),Tc=z.useMemo(()=>m.duration||U||CI,[m.duration,U]),ms=z.useRef(0),Ur=z.useRef(0),ba=z.useRef(0),Sn=z.useRef(null),[Xd,Aa]=X.split("-"),Ic=z.useMemo(()=>f.reduce((ve,je,Ge)=>Ge>=Sa?ve:ve+je.height,0),[f,Sa]),Xs=bU(),Jd=m.invert||p,Ct=hn==="loading";Ur.current=z.useMemo(()=>Sa*te+Ic,[Sa,Ic]),z.useEffect(()=>{Mr.current=Tc},[Tc]),z.useEffect(()=>{we(!0)},[]),z.useEffect(()=>{let ve=Fr.current;if(ve){let je=ve.getBoundingClientRect().height;return Mt(je),_(Ge=>[{toastId:m.id,height:je,position:m.position},...Ge]),()=>_(Ge=>Ge.filter(Ft=>Ft.toastId!==m.id))}},[_,m.id]),z.useLayoutEffect(()=>{if(!ue)return;let ve=Fr.current,je=ve.style.height;ve.style.height="auto";let Ge=ve.getBoundingClientRect().height;ve.style.height=je,Mt(Ge),_(Ft=>Ft.find(Vn=>Vn.toastId===m.id)?Ft.map(Vn=>Vn.toastId===m.id?{...Vn,height:Ge}:Vn):[{toastId:m.id,height:Ge,position:m.position},...Ft])},[ue,m.title,m.description,_,m.id]);let ur=z.useCallback(()=>{At(!0),Ys(Ur.current),_(ve=>ve.filter(je=>je.toastId!==m.id)),setTimeout(()=>{L(m)},UU)},[m,L,_,Ur]);z.useEffect(()=>{if(m.promise&&hn==="loading"||m.duration===1/0||m.type==="loading")return;let ve;return C||g||Z&&Xs?(()=>{if(ba.current<ms.current){let je=new Date().getTime()-ms.current;Mr.current=Mr.current-je}ba.current=new Date().getTime()})():Mr.current!==1/0&&(ms.current=new Date().getTime(),ve=setTimeout(()=>{var je;(je=m.onAutoClose)==null||je.call(m,m),ur()},Mr.current)),()=>clearTimeout(ve)},[C,g,m,hn,Z,Xs,ur]),z.useEffect(()=>{m.delete&&ur()},[ur,m.delete]);function fo(){var ve,je,Ge;return q!=null&&q.loading?z.createElement("div",{className:fr(F==null?void 0:F.loader,(ve=m==null?void 0:m.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":hn==="loading"},q.loading):G?z.createElement("div",{className:fr(F==null?void 0:F.loader,(je=m==null?void 0:m.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":hn==="loading"},G):z.createElement(wU,{className:fr(F==null?void 0:F.loader,(Ge=m==null?void 0:m.classNames)==null?void 0:Ge.loader),visible:hn==="loading"})}return z.createElement("li",{tabIndex:0,ref:Fr,className:fr(O,Ec,F==null?void 0:F.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[hn],(n=m==null?void 0:m.classNames)==null?void 0:n[hn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||E),"data-mounted":ue,"data-promise":!!m.promise,"data-swiped":Vr,"data-removed":Ce,"data-visible":ho,"data-y-position":Xd,"data-x-position":Aa,"data-index":v,"data-front":eg,"data-swiping":Vt,"data-dismissible":ps,"data-type":hn,"data-invert":Jd,"data-swipe-out":Wt,"data-swipe-direction":Ie,"data-expanded":!!(C||j&&ue),style:{"--index":v,"--toasts-before":v,"--z-index":A.length-v,"--offset":`${Ce?er:Ur.current}px`,"--initial-height":j?"auto":`${ct}px`,...P,...m.style},onDragEnd:()=>{Zt(!1),ae(null),Sn.current=null},onPointerDown:ve=>{Ct||!ps||(Qd.current=new Date,Ys(Ur.current),ve.target.setPointerCapture(ve.pointerId),ve.target.tagName!=="BUTTON"&&(Zt(!0),Sn.current={x:ve.clientX,y:ve.clientY}))},onPointerUp:()=>{var ve,je,Ge,Ft;if(Wt||!ps)return;Sn.current=null;let Vn=Number(((ve=Fr.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jr=Number(((je=Fr.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),tr=new Date().getTime()-((Ge=Qd.current)==null?void 0:Ge.getTime()),bn=re==="x"?Vn:jr,dr=Math.abs(bn)/tr;if(Math.abs(bn)>=FU||dr>.11){Ys(Ur.current),(Ft=m.onDismiss)==null||Ft.call(m,m),Ve(re==="x"?Vn>0?"right":"left":jr>0?"down":"up"),ur(),In(!0),be(!1);return}Zt(!1),ae(null)},onPointerMove:ve=>{var je,Ge,Ft,Vn;if(!Sn.current||!ps||((je=window.getSelection())==null?void 0:je.toString().length)>0)return;let jr=ve.clientY-Sn.current.y,tr=ve.clientX-Sn.current.x,bn=(Ge=t.swipeDirections)!=null?Ge:jU(X);!re&&(Math.abs(tr)>1||Math.abs(jr)>1)&&ae(Math.abs(tr)>Math.abs(jr)?"x":"y");let dr={x:0,y:0};re==="y"?(bn.includes("top")||bn.includes("bottom"))&&(bn.includes("top")&&jr<0||bn.includes("bottom")&&jr>0)&&(dr.y=jr):re==="x"&&(bn.includes("left")||bn.includes("right"))&&(bn.includes("left")&&tr<0||bn.includes("right")&&tr>0)&&(dr.x=tr),(Math.abs(dr.x)>0||Math.abs(dr.y)>0)&&be(!0),(Ft=Fr.current)==null||Ft.style.setProperty("--swipe-amount-x",`${dr.x}px`),(Vn=Fr.current)==null||Vn.style.setProperty("--swipe-amount-y",`${dr.y}px`)}},Yd&&!m.jsx?z.createElement("button",{"aria-label":ne,"data-disabled":Ct,"data-close-button":!0,onClick:Ct||!ps?()=>{}:()=>{var ve;ur(),(ve=m.onDismiss)==null||ve.call(m,m)},className:fr(F==null?void 0:F.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=q==null?void 0:q.close)!=null?i:SU):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:z.createElement(z.Fragment,null,hn||m.icon||m.promise?z.createElement("div",{"data-icon":"",className:fr(F==null?void 0:F.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||fo():null,m.type!=="loading"?m.icon||(q==null?void 0:q[hn])||yU(hn):null):null,z.createElement("div",{"data-content":"",className:fr(F==null?void 0:F.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:fr(F==null?void 0:F.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?z.createElement("div",{"data-description":"",className:fr(k,tg,F==null?void 0:F.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&Rh(m.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||D,onClick:ve=>{var je,Ge;Rh(m.cancel)&&ps&&((Ge=(je=m.cancel).onClick)==null||Ge.call(je,ve),ur())},className:fr(F==null?void 0:F.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&Rh(m.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||R,onClick:ve=>{var je,Ge;Rh(m.action)&&((Ge=(je=m.action).onClick)==null||Ge.call(je,ve),!ve.defaultPrevented&&ur())},className:fr(F==null?void 0:F.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function DI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function $U(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?LU:OU;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var zU=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:p,style:m,visibleToasts:E=NU,toastOptions:g,dir:_=DI(),gap:w=MU,loadingIcon:f,icons:v,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:C}=t,[L,S]=z.useState([]),T=z.useMemo(()=>Array.from(new Set([r].concat(L.filter(Z=>Z.position).map(Z=>Z.position)))),[L,r]),[P,D]=z.useState([]),[R,O]=z.useState(!1),[k,U]=z.useState(!1),[X,te]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=z.useRef(null),q=z.useRef(!1),ne=z.useCallback(Z=>{S(re=>{var ae;return(ae=re.find(Ie=>Ie.id===Z.id))!=null&&ae.delete||An.dismiss(Z.id),re.filter(({id:Ie})=>Ie!==Z.id)})},[]);return z.useEffect(()=>An.subscribe(Z=>{if(Z.dismiss){S(re=>re.map(ae=>ae.id===Z.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{DR.flushSync(()=>{S(re=>{let ae=re.findIndex(Ie=>Ie.id===Z.id);return ae!==-1?[...re.slice(0,ae),{...re[ae],...Z},...re.slice(ae+1)]:[Z,...re]})})})}),[]),z.useEffect(()=>{if(d!=="system"){te(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;let Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:re})=>{te(re?"dark":"light")})}catch{Z.addListener(({matches:ae})=>{try{te(ae?"dark":"light")}catch(Ie){console.error(Ie)}})}},[d]),z.useEffect(()=>{L.length<=1&&O(!1)},[L]),z.useEffect(()=>{let Z=re=>{var ae,Ie;s.every(Ve=>re[Ve]||re.code===Ve)&&(O(!0),(ae=G.current)==null||ae.focus()),re.code==="Escape"&&(document.activeElement===G.current||(Ie=G.current)!=null&&Ie.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[s]),z.useEffect(()=>{if(G.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,q.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${A} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((Z,re)=>{var ae;let[Ie,Ve]=Z.split("-");return L.length?z.createElement("ol",{key:Z,dir:_==="auto"?DI():_,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":Ie,"data-lifted":R&&L.length>1&&!i,"data-x-position":Ve,style:{"--front-toast-height":`${((ae=P[0])==null?void 0:ae.height)||0}px`,"--width":`${VU}px`,"--gap":`${w}px`,...m,...$U(l,c)},onBlur:ue=>{q.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(q.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||q.current||(q.current=!0,F.current=ue.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{k||O(!1)},onDragEnd:()=>O(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},L.filter(ue=>!ue.position&&re===0||ue.position===Z).map((ue,we)=>{var Ce,At;return z.createElement(BU,{key:ue.id,icons:v,index:we,toast:ue,defaultRichColors:h,duration:(Ce=g==null?void 0:g.duration)!=null?Ce:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:E,closeButton:(At=g==null?void 0:g.closeButton)!=null?At:o,interacting:k,position:Z,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ne,toasts:L.filter(Vt=>Vt.position==ue.position),heights:P.filter(Vt=>Vt.position==ue.position),setHeights:D,expandByDefault:i,gap:w,loadingIcon:f,expanded:R,pauseWhenPageIsHidden:C,swipeDirections:t.swipeDirections})})):null}))});const qU=({...t})=>{const{theme:e="system"}=w1();return x.jsx(zU,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var WU=Vw[" useId ".trim().toString()]||(()=>{}),HU=0;function Gg(t){const[e,n]=b.useState(WU());return Vs(()=>{n(r=>r??String(HU++))},[t]),t||(e?`radix-${e}`:"")}const KU=["top","right","bottom","left"],Ki=Math.min,jn=Math.max,ep=Math.round,Ch=Math.floor,is=t=>({x:t,y:t}),GU={left:"right",right:"left",bottom:"top",top:"bottom"},QU={start:"end",end:"start"};function Pv(t,e,n){return jn(t,Ki(e,n))}function Ms(t,e){return typeof t=="function"?t(e):t}function Fs(t){return t.split("-")[0]}function sc(t){return t.split("-")[1]}function M_(t){return t==="x"?"y":"x"}function F_(t){return t==="y"?"height":"width"}const YU=new Set(["top","bottom"]);function Zr(t){return YU.has(Fs(t))?"y":"x"}function U_(t){return M_(Zr(t))}function XU(t,e,n){n===void 0&&(n=!1);const r=sc(t),s=U_(t),i=F_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=tp(o)),[o,tp(o)]}function JU(t){const e=tp(t);return[Rv(t),e,Rv(e)]}function Rv(t){return t.replace(/start|end/g,e=>QU[e])}const kI=["left","right"],NI=["right","left"],ZU=["top","bottom"],e4=["bottom","top"];function t4(t,e,n){switch(t){case"top":case"bottom":return n?e?NI:kI:e?kI:NI;case"left":case"right":return e?ZU:e4;default:return[]}}function n4(t,e,n,r){const s=sc(t);let i=t4(Fs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Rv)))),i}function tp(t){return t.replace(/left|right|bottom|top/g,e=>GU[e])}function r4(t){return{top:0,right:0,bottom:0,left:0,...t}}function _1(t){return typeof t!="number"?r4(t):{top:t,right:t,bottom:t,left:t}}function np(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function OI(t,e,n){let{reference:r,floating:s}=t;const i=Zr(e),o=U_(e),a=F_(o),l=Fs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(sc(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const s4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=OI(c,r,l),p=r,m={},E=0;for(let g=0;g<a.length;g++){const{name:_,fn:w}=a[g],{x:f,y:v,data:A,reset:C}=await w({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=f??d,h=v??h,m={...m,[_]:{...m[_],...A}},C&&E<=50&&(E++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(c=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):C.rects),{x:d,y:h}=OI(c,p,l)),g=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function Xu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Ms(e,t),E=_1(m),_=a[p?h==="floating"?"reference":"floating":h],w=np(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),f=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),A=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},C=np(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:f,offsetParent:v,strategy:l}):f);return{top:(w.top-C.top+E.top)/A.y,bottom:(C.bottom-w.bottom+E.bottom)/A.y,left:(w.left-C.left+E.left)/A.x,right:(C.right-w.right+E.right)/A.x}}const i4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ms(t,e)||{};if(c==null)return{};const h=_1(d),p={x:n,y:r},m=U_(s),E=F_(m),g=await o.getDimensions(c),_=m==="y",w=_?"top":"left",f=_?"bottom":"right",v=_?"clientHeight":"clientWidth",A=i.reference[E]+i.reference[m]-p[m]-i.floating[E],C=p[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=L?L[v]:0;(!S||!await(o.isElement==null?void 0:o.isElement(L)))&&(S=a.floating[v]||i.floating[E]);const T=A/2-C/2,P=S/2-g[E]/2-1,D=Ki(h[w],P),R=Ki(h[f],P),O=D,k=S-g[E]-R,U=S/2-g[E]/2+T,X=Pv(O,U,k),te=!l.arrow&&sc(s)!=null&&U!==X&&i.reference[E]/2-(U<O?D:R)-g[E]/2<0,G=te?U<O?U-O:U-k:0;return{[m]:p[m]+G,data:{[m]:X,centerOffset:U-X-G,...te&&{alignmentOffset:G}},reset:te}}}),o4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:g=!0,..._}=Ms(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Fs(s),f=Zr(a),v=Fs(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=p||(v||!g?[tp(a)]:JU(a)),L=E!=="none";!p&&L&&C.push(...n4(a,g,E,A));const S=[a,...C],T=await Xu(e,_),P=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(T[w]),h){const U=XU(s,o,A);P.push(T[U[0]],T[U[1]])}if(D=[...D,{placement:s,overflows:P}],!P.every(U=>U<=0)){var R,O;const U=(((R=i.flip)==null?void 0:R.index)||0)+1,X=S[U];if(X&&(!(h==="alignment"?f!==Zr(X):!1)||D.every(j=>Zr(j.placement)===f?j.overflows[0]>0:!0)))return{data:{index:U,overflows:D},reset:{placement:X}};let te=(O=D.filter(G=>G.overflows[0]<=0).sort((G,j)=>G.overflows[1]-j.overflows[1])[0])==null?void 0:O.placement;if(!te)switch(m){case"bestFit":{var k;const G=(k=D.filter(j=>{if(L){const F=Zr(j.placement);return F===f||F==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(F=>F>0).reduce((F,q)=>F+q,0)]).sort((j,F)=>j[1]-F[1])[0])==null?void 0:k[0];G&&(te=G);break}case"initialPlacement":te=a;break}if(s!==te)return{reset:{placement:te}}}return{}}}};function LI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function VI(t){return KU.some(e=>t[e]>=0)}const a4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ms(t,e);switch(r){case"referenceHidden":{const i=await Xu(e,{...s,elementContext:"reference"}),o=LI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:VI(o)}}}case"escaped":{const i=await Xu(e,{...s,altBoundary:!0}),o=LI(i,n.floating);return{data:{escapedOffsets:o,escaped:VI(o)}}}default:return{}}}}},E1=new Set(["left","top"]);async function l4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Fs(n),a=sc(n),l=Zr(n)==="y",c=E1.has(o)?-1:1,d=i&&l?-1:1,h=Ms(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(m=a==="end"?E*-1:E),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const c4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await l4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},u4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:w,y:f}=_;return{x:w,y:f}}},...l}=Ms(t,e),c={x:n,y:r},d=await Xu(e,l),h=Zr(Fs(s)),p=M_(h);let m=c[p],E=c[h];if(i){const _=p==="y"?"top":"left",w=p==="y"?"bottom":"right",f=m+d[_],v=m-d[w];m=Pv(f,m,v)}if(o){const _=h==="y"?"top":"left",w=h==="y"?"bottom":"right",f=E+d[_],v=E-d[w];E=Pv(f,E,v)}const g=a.fn({...e,[p]:m,[h]:E});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[p]:i,[h]:o}}}}}},d4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ms(t,e),d={x:n,y:r},h=Zr(s),p=M_(h);let m=d[p],E=d[h];const g=Ms(a,e),_=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const v=p==="y"?"height":"width",A=i.reference[p]-i.floating[v]+_.mainAxis,C=i.reference[p]+i.reference[v]-_.mainAxis;m<A?m=A:m>C&&(m=C)}if(c){var w,f;const v=p==="y"?"width":"height",A=E1.has(Fs(s)),C=i.reference[h]-i.floating[v]+(A&&((w=o.offset)==null?void 0:w[h])||0)+(A?0:_.crossAxis),L=i.reference[h]+i.reference[v]+(A?0:((f=o.offset)==null?void 0:f[h])||0)-(A?_.crossAxis:0);E<C?E=C:E>L&&(E=L)}return{[p]:m,[h]:E}}}},h4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ms(t,e),d=await Xu(e,c),h=Fs(s),p=sc(s),m=Zr(s)==="y",{width:E,height:g}=i.floating;let _,w;h==="top"||h==="bottom"?(_=h,w=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,_=p==="end"?"top":"bottom");const f=g-d.top-d.bottom,v=E-d.left-d.right,A=Ki(g-d[_],f),C=Ki(E-d[w],v),L=!e.middlewareData.shift;let S=A,T=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=f),L&&!p){const D=jn(d.left,0),R=jn(d.right,0),O=jn(d.top,0),k=jn(d.bottom,0);m?T=E-2*(D!==0||R!==0?D+R:jn(d.left,d.right)):S=g-2*(O!==0||k!==0?O+k:jn(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:S});const P=await o.getDimensions(a.floating);return E!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function lm(){return typeof window<"u"}function ic(t){return T1(t)?(t.nodeName||"").toLowerCase():"#document"}function Kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(T1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function T1(t){return lm()?t instanceof Node||t instanceof Kn(t).Node:!1}function Rr(t){return lm()?t instanceof Element||t instanceof Kn(t).Element:!1}function ls(t){return lm()?t instanceof HTMLElement||t instanceof Kn(t).HTMLElement:!1}function MI(t){return!lm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Kn(t).ShadowRoot}const f4=new Set(["inline","contents"]);function Dd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Cr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!f4.has(s)}const p4=new Set(["table","td","th"]);function m4(t){return p4.has(ic(t))}const g4=[":popover-open",":modal"];function cm(t){return g4.some(e=>{try{return t.matches(e)}catch{return!1}})}const y4=["transform","translate","scale","rotate","perspective"],v4=["transform","translate","scale","rotate","perspective","filter"],w4=["paint","layout","strict","content"];function j_(t){const e=B_(),n=Rr(t)?Cr(t):t;return y4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||v4.some(r=>(n.willChange||"").includes(r))||w4.some(r=>(n.contain||"").includes(r))}function _4(t){let e=Gi(t);for(;ls(e)&&!Cl(e);){if(j_(e))return e;if(cm(e))return null;e=Gi(e)}return null}function B_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const E4=new Set(["html","body","#document"]);function Cl(t){return E4.has(ic(t))}function Cr(t){return Kn(t).getComputedStyle(t)}function um(t){return Rr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Gi(t){if(ic(t)==="html")return t;const e=t.assignedSlot||t.parentNode||MI(t)&&t.host||ds(t);return MI(e)?e.host:e}function I1(t){const e=Gi(t);return Cl(e)?t.ownerDocument?t.ownerDocument.body:t.body:ls(e)&&Dd(e)?e:I1(e)}function Ju(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=I1(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Kn(s);if(i){const a=Cv(o);return e.concat(o,o.visualViewport||[],Dd(s)?s:[],a&&n?Ju(a):[])}return e.concat(s,Ju(s,[],n))}function Cv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function S1(t){const e=Cr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ls(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=ep(n)!==i||ep(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function $_(t){return Rr(t)?t:t.contextElement}function ul(t){const e=$_(t);if(!ls(e))return is(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=S1(e);let o=(i?ep(n.width):n.width)/r,a=(i?ep(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const T4=is(0);function b1(t){const e=Kn(t);return!B_()||!e.visualViewport?T4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function I4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Kn(t)?!1:e}function aa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=$_(t);let o=is(1);e&&(r?Rr(r)&&(o=ul(r)):o=ul(t));const a=I4(i,n,r)?b1(i):is(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=Kn(i),m=r&&Rr(r)?Kn(r):r;let E=p,g=Cv(E);for(;g&&r&&m!==E;){const _=ul(g),w=g.getBoundingClientRect(),f=Cr(g),v=w.left+(g.clientLeft+parseFloat(f.paddingLeft))*_.x,A=w.top+(g.clientTop+parseFloat(f.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,h*=_.y,l+=v,c+=A,E=Kn(g),g=Cv(E)}}return np({width:d,height:h,x:l,y:c})}function dm(t,e){const n=um(t).scrollLeft;return e?e.left+n:aa(ds(t)).left+n}function A1(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-dm(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function S4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ds(r),a=e?cm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=is(1);const d=is(0),h=ls(r);if((h||!h&&!i)&&((ic(r)!=="body"||Dd(o))&&(l=um(r)),ls(r))){const m=aa(r);c=ul(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=o&&!h&&!i?A1(o,l):is(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function b4(t){return Array.from(t.getClientRects())}function A4(t){const e=ds(t),n=um(t),r=t.ownerDocument.body,s=jn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=jn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dm(t);const a=-n.scrollTop;return Cr(r).direction==="rtl"&&(o+=jn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const FI=25;function x4(t,e){const n=Kn(t),r=ds(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=B_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=dm(r);if(c<=0){const d=r.ownerDocument,h=d.body,p=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,E=Math.abs(r.clientWidth-h.clientWidth-m);E<=FI&&(i-=E)}else c<=FI&&(i+=c);return{width:i,height:o,x:a,y:l}}const P4=new Set(["absolute","fixed"]);function R4(t,e){const n=aa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ls(t)?ul(t):is(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function UI(t,e,n){let r;if(e==="viewport")r=x4(t,n);else if(e==="document")r=A4(ds(t));else if(Rr(e))r=R4(e,n);else{const s=b1(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return np(r)}function x1(t,e){const n=Gi(t);return n===e||!Rr(n)||Cl(n)?!1:Cr(n).position==="fixed"||x1(n,e)}function C4(t,e){const n=e.get(t);if(n)return n;let r=Ju(t,[],!1).filter(a=>Rr(a)&&ic(a)!=="body"),s=null;const i=Cr(t).position==="fixed";let o=i?Gi(t):t;for(;Rr(o)&&!Cl(o);){const a=Cr(o),l=j_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&P4.has(s.position)||Dd(o)&&!l&&x1(t,o))?r=r.filter(d=>d!==o):s=a,o=Gi(o)}return e.set(t,r),r}function D4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?cm(e)?[]:C4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=UI(e,d,s);return c.top=jn(h.top,c.top),c.right=Ki(h.right,c.right),c.bottom=Ki(h.bottom,c.bottom),c.left=jn(h.left,c.left),c},UI(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function k4(t){const{width:e,height:n}=S1(t);return{width:e,height:n}}function N4(t,e,n){const r=ls(e),s=ds(e),i=n==="fixed",o=aa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=is(0);function c(){l.x=dm(s)}if(r||!r&&!i)if((ic(e)!=="body"||Dd(s))&&(a=um(e)),r){const m=aa(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?A1(s,a):is(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function Qg(t){return Cr(t).position==="static"}function jI(t,e){if(!ls(t)||Cr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function P1(t,e){const n=Kn(t);if(cm(t))return n;if(!ls(t)){let s=Gi(t);for(;s&&!Cl(s);){if(Rr(s)&&!Qg(s))return s;s=Gi(s)}return n}let r=jI(t,e);for(;r&&m4(r)&&Qg(r);)r=jI(r,e);return r&&Cl(r)&&Qg(r)&&!j_(r)?n:r||_4(t)||n}const O4=async function(t){const e=this.getOffsetParent||P1,n=this.getDimensions,r=await n(t.floating);return{reference:N4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function L4(t){return Cr(t).direction==="rtl"}const V4={convertOffsetParentRelativeRectToViewportRelativeRect:S4,getDocumentElement:ds,getClippingRect:D4,getOffsetParent:P1,getElementRects:O4,getClientRects:b4,getDimensions:k4,getScale:ul,isElement:Rr,isRTL:L4};function R1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function M4(t,e){let n=null,r;const s=ds(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=c;if(a||e(),!p||!m)return;const E=Ch(h),g=Ch(s.clientWidth-(d+p)),_=Ch(s.clientHeight-(h+m)),w=Ch(d),v={rootMargin:-E+"px "+-g+"px "+-_+"px "+-w+"px",threshold:jn(0,Ki(1,l))||1};let A=!0;function C(L){const S=L[0].intersectionRatio;if(S!==l){if(!A)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!R1(c,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(C,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,v)}n.observe(t)}return o(!0),i}function F4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=$_(t),d=s||i?[...c?Ju(c):[],...Ju(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?M4(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(w=>{let[f]=w;f&&f.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let E,g=l?aa(t):null;l&&_();function _(){const w=aa(t);g&&!R1(g,w)&&n(),g=w,E=requestAnimationFrame(_)}return n(),()=>{var w;d.forEach(f=>{s&&f.removeEventListener("scroll",n),i&&f.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(E)}}const U4=c4,j4=u4,B4=o4,$4=h4,z4=a4,BI=i4,q4=d4,W4=(t,e,n)=>{const r=new Map,s={platform:V4,...n},i={...s.platform,_c:r};return s4(t,e,{...s,platform:i})};var H4=typeof document<"u",K4=function(){},df=H4?b.useLayoutEffect:K4;function rp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!rp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!rp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function C1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $I(t,e){const n=C1(t);return Math.round(e*n)/n}function Yg(t){const e=b.useRef(t);return df(()=>{e.current=t}),e}function G4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=b.useState(r);rp(p,r)||m(r);const[E,g]=b.useState(null),[_,w]=b.useState(null),f=b.useCallback(j=>{j!==L.current&&(L.current=j,g(j))},[]),v=b.useCallback(j=>{j!==S.current&&(S.current=j,w(j))},[]),A=i||E,C=o||_,L=b.useRef(null),S=b.useRef(null),T=b.useRef(d),P=l!=null,D=Yg(l),R=Yg(s),O=Yg(c),k=b.useCallback(()=>{if(!L.current||!S.current)return;const j={placement:e,strategy:n,middleware:p};R.current&&(j.platform=R.current),W4(L.current,S.current,j).then(F=>{const q={...F,isPositioned:O.current!==!1};U.current&&!rp(T.current,q)&&(T.current=q,Rd.flushSync(()=>{h(q)}))})},[p,e,n,R,O]);df(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[c]);const U=b.useRef(!1);df(()=>(U.current=!0,()=>{U.current=!1}),[]),df(()=>{if(A&&(L.current=A),C&&(S.current=C),A&&C){if(D.current)return D.current(A,C,k);k()}},[A,C,k,D,P]);const X=b.useMemo(()=>({reference:L,floating:S,setReference:f,setFloating:v}),[f,v]),te=b.useMemo(()=>({reference:A,floating:C}),[A,C]),G=b.useMemo(()=>{const j={position:n,left:0,top:0};if(!te.floating)return j;const F=$I(te.floating,d.x),q=$I(te.floating,d.y);return a?{...j,transform:"translate("+F+"px, "+q+"px)",...C1(te.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:q}},[n,a,te.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:k,refs:X,elements:te,floatingStyles:G}),[d,k,X,te,G])}const Q4=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?BI({element:r.current,padding:s}).fn(n):{}:r?BI({element:r,padding:s}).fn(n):{}}}},Y4=(t,e)=>({...U4(t),options:[t,e]}),X4=(t,e)=>({...j4(t),options:[t,e]}),J4=(t,e)=>({...q4(t),options:[t,e]}),Z4=(t,e)=>({...B4(t),options:[t,e]}),ej=(t,e)=>({...$4(t),options:[t,e]}),tj=(t,e)=>({...z4(t),options:[t,e]}),nj=(t,e)=>({...Q4(t),options:[t,e]});var rj="Arrow",D1=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx(ft.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});D1.displayName=rj;var sj=D1;function k1(t){const[e,n]=b.useState(void 0);return Vs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var z_="Popper",[N1,O1]=nc(z_),[ij,L1]=N1(z_),V1=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return x.jsx(ij,{scope:e,anchor:r,onAnchorChange:s,children:n})};V1.displayName=z_;var M1="PopperAnchor",F1=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=L1(M1,n),o=b.useRef(null),a=Yt(e,o),l=b.useRef(null);return b.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:x.jsx(ft.div,{...s,ref:a})});F1.displayName=M1;var q_="PopperContent",[oj,aj]=N1(q_),U1=b.forwardRef((t,e)=>{var ue,we,Ce,At,Vt,Zt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:E,...g}=t,_=L1(q_,n),[w,f]=b.useState(null),v=Yt(e,Wt=>f(Wt)),[A,C]=b.useState(null),L=k1(A),S=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,P=r+(i!=="center"?"-"+i:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(c)?c:[c],O=R.length>0,k={padding:D,boundary:R.filter(cj),altBoundary:O},{refs:U,floatingStyles:X,placement:te,isPositioned:G,middlewareData:j}=G4({strategy:"fixed",placement:P,whileElementsMounted:(...Wt)=>F4(...Wt,{animationFrame:m==="always"}),elements:{reference:_.anchor},middleware:[Y4({mainAxis:s+T,alignmentAxis:o}),l&&X4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?J4():void 0,...k}),l&&Z4({...k}),ej({...k,apply:({elements:Wt,rects:In,availableWidth:Vr,availableHeight:be})=>{const{width:er,height:Ys}=In.reference,ct=Wt.floating.style;ct.setProperty("--radix-popper-available-width",`${Vr}px`),ct.setProperty("--radix-popper-available-height",`${be}px`),ct.setProperty("--radix-popper-anchor-width",`${er}px`),ct.setProperty("--radix-popper-anchor-height",`${Ys}px`)}}),A&&nj({element:A,padding:a}),uj({arrowWidth:S,arrowHeight:T}),p&&tj({strategy:"referenceHidden",...k})]}),[F,q]=$1(te),ne=as(E);Vs(()=>{G&&(ne==null||ne())},[G,ne]);const Z=(ue=j.arrow)==null?void 0:ue.x,re=(we=j.arrow)==null?void 0:we.y,ae=((Ce=j.arrow)==null?void 0:Ce.centerOffset)!==0,[Ie,Ve]=b.useState();return Vs(()=>{w&&Ve(window.getComputedStyle(w).zIndex)},[w]),x.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:G?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[(At=j.transformOrigin)==null?void 0:At.x,(Vt=j.transformOrigin)==null?void 0:Vt.y].join(" "),...((Zt=j.hide)==null?void 0:Zt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(oj,{scope:n,placedSide:F,onArrowChange:C,arrowX:Z,arrowY:re,shouldHideArrow:ae,children:x.jsx(ft.div,{"data-side":F,"data-align":q,...g,ref:v,style:{...g.style,animation:G?void 0:"none"}})})})});U1.displayName=q_;var j1="PopperArrow",lj={top:"bottom",right:"left",bottom:"top",left:"right"},B1=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=aj(j1,r),o=lj[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(sj,{...s,ref:n,style:{...s.style,display:"block"}})})});B1.displayName=j1;function cj(t){return t!==null}var uj=t=>({name:"transformOrigin",options:t,fn(e){var _,w,f;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=$1(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,m=(((f=s.arrow)==null?void 0:f.y)??0)+l/2;let E="",g="";return c==="bottom"?(E=o?h:`${p}px`,g=`${-l}px`):c==="top"?(E=o?h:`${p}px`,g=`${r.floating.height+l}px`):c==="right"?(E=`${-l}px`,g=o?h:`${m}px`):c==="left"&&(E=`${r.floating.width+l}px`,g=o?h:`${m}px`),{data:{x:E,y:g}}}});function $1(t){const[e,n="center"]=t.split("-");return[e,n]}var hK=V1,dj=F1,hj=U1,fj=B1,[hm]=nc("Tooltip",[O1]),W_=O1(),z1="TooltipProvider",pj=700,zI="tooltip.open",[mj,q1]=hm(z1),W1=t=>{const{__scopeTooltip:e,delayDuration:n=pj,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(mj,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};W1.displayName=z1;var H1="Tooltip",[fK,fm]=hm(H1),Dv="TooltipTrigger",gj=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=fm(Dv,n),i=q1(Dv,n),o=W_(n),a=b.useRef(null),l=Yt(e,a,s.onTriggerChange),c=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(dj,{asChild:!0,...o,children:x.jsx(ft.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Qe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Qe(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Qe(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Qe(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Qe(t.onBlur,s.onClose),onClick:Qe(t.onClick,s.onClose)})})});gj.displayName=Dv;var yj="TooltipPortal",[pK,vj]=hm(yj,{forceMount:void 0}),Dl="TooltipContent",K1=b.forwardRef((t,e)=>{const n=vj(Dl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=fm(Dl,t.__scopeTooltip);return x.jsx(_a,{present:r||o.open,children:o.disableHoverableContent?x.jsx(G1,{side:s,...i,ref:e}):x.jsx(wj,{side:s,...i,ref:e})})}),wj=b.forwardRef((t,e)=>{const n=fm(Dl,t.__scopeTooltip),r=q1(Dl,t.__scopeTooltip),s=b.useRef(null),i=Yt(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,p=b.useCallback(()=>{a(null),h(!1)},[h]),m=b.useCallback((E,g)=>{const _=E.currentTarget,w={x:E.clientX,y:E.clientY},f=Sj(w,_.getBoundingClientRect()),v=bj(w,f),A=Aj(g.getBoundingClientRect()),C=Pj([...v,...A]);a(C),h(!0)},[h]);return b.useEffect(()=>()=>p(),[p]),b.useEffect(()=>{if(l&&d){const E=_=>m(_,d),g=_=>m(_,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",g)}}},[l,d,m,p]),b.useEffect(()=>{if(o){const E=g=>{const _=g.target,w={x:g.clientX,y:g.clientY},f=(l==null?void 0:l.contains(_))||(d==null?void 0:d.contains(_)),v=!xj(w,o);f?p():v&&(p(),c())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,c,p]),x.jsx(G1,{...t,ref:i})}),[_j,Ej]=hm(H1,{isInside:!1}),Tj=yM("TooltipContent"),G1=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=fm(Dl,n),c=W_(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener(zI,d),()=>document.removeEventListener(zI,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(im,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(hj,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(Tj,{children:r}),x.jsx(_j,{scope:n,isInside:!0,children:x.jsx(BM,{id:l.contentId,role:"tooltip",children:s||r})})]})})});K1.displayName=Dl;var Q1="TooltipArrow",Ij=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=W_(n);return Ej(Q1,n).isInside?null:x.jsx(fj,{...s,...r,ref:e})});Ij.displayName=Q1;function Sj(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function bj(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Aj(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function xj(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-c)*(r-d)/(p-d)+c&&(s=!s)}return s}function Pj(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Rj(e)}function Rj(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Cj=W1,Y1=K1;const Dj=Cj,kj=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(Y1,{ref:r,sideOffset:e,className:Xt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));kj.displayName=Y1.displayName;var pm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nj={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},vi,Cw,JA,Oj=(JA=class{constructor(){Le(this,vi,Nj);Le(this,Cw,!1)}setTimeoutProvider(t){Ee(this,vi,t)}setTimeout(t,e){return H(this,vi).setTimeout(t,e)}clearTimeout(t){H(this,vi).clearTimeout(t)}setInterval(t,e){return H(this,vi).setInterval(t,e)}clearInterval(t){H(this,vi).clearInterval(t)}},vi=new WeakMap,Cw=new WeakMap,JA),kv=new Oj;function Lj(t){setTimeout(t,0)}var mm=typeof window>"u"||"Deno"in globalThis;function mr(){}function Vj(t,e){return typeof t=="function"?t(e):t}function Mj(t){return typeof t=="number"&&t>=0&&t!==1/0}function Fj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Nv(t,e){return typeof t=="function"?t(e):t}function Uj(t,e){return typeof t=="function"?t(e):t}function qI(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==H_(o,e.options))return!1}else if(!ed(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function WI(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Zu(e.options.mutationKey)!==Zu(i))return!1}else if(!ed(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function H_(t,e){return((e==null?void 0:e.queryKeyHashFn)||Zu)(t)}function Zu(t){return JSON.stringify(t,(e,n)=>Ov(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ed(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ed(t[n],e[n])):!1}var jj=Object.prototype.hasOwnProperty;function X1(t,e){if(t===e)return t;const n=HI(t)&&HI(e);if(!n&&!(Ov(t)&&Ov(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],p=e[d];if(h===p){a[d]=h,(n?c<s:jj.call(t,d))&&l++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){a[d]=p;continue}const m=X1(h,p);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function HI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ov(t){if(!KI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!KI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function KI(t){return Object.prototype.toString.call(t)==="[object Object]"}function Bj(t){return new Promise(e=>{kv.setTimeout(e,t)})}function $j(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?X1(t,e):e}function zj(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function qj(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var K_=Symbol();function J1(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===K_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var qo,wi,ml,ZA,Wj=(ZA=class extends pm{constructor(){super();Le(this,qo);Le(this,wi);Le(this,ml);Ee(this,ml,e=>{if(!mm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,wi)||this.setEventListener(H(this,ml))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,wi))==null||e.call(this),Ee(this,wi,void 0))}setEventListener(e){var n;Ee(this,ml,e),(n=H(this,wi))==null||n.call(this),Ee(this,wi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){H(this,qo)!==e&&(Ee(this,qo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof H(this,qo)=="boolean"?H(this,qo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qo=new WeakMap,wi=new WeakMap,ml=new WeakMap,ZA),Z1=new Wj;function Hj(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var Kj=Lj;function Gj(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Kj;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var yn=Gj(),gl,_i,yl,ex,Qj=(ex=class extends pm{constructor(){super();Le(this,gl,!0);Le(this,_i);Le(this,yl);Ee(this,yl,e=>{if(!mm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,_i)||this.setEventListener(H(this,yl))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,_i))==null||e.call(this),Ee(this,_i,void 0))}setEventListener(e){var n;Ee(this,yl,e),(n=H(this,_i))==null||n.call(this),Ee(this,_i,e(this.setOnline.bind(this)))}setOnline(e){H(this,gl)!==e&&(Ee(this,gl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return H(this,gl)}},gl=new WeakMap,_i=new WeakMap,yl=new WeakMap,ex),sp=new Qj;function Yj(t){return Math.min(1e3*2**t,3e4)}function eC(t){return(t??"online")==="online"?sp.isOnline():!0}var Lv=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tC(t){let e=!1,n=0,r;const s=Hj(),i=()=>s.status!=="pending",o=g=>{var _;if(!i()){const w=new Lv(g);p(w),(_=t.onCancel)==null||_.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>Z1.isFocused()&&(t.networkMode==="always"||sp.isOnline())&&t.canRun(),d=()=>eC(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},p=g=>{i()||(r==null||r(),s.reject(g))},m=()=>new Promise(g=>{var _;r=w=>{(i()||c())&&g(w)},(_=t.onPause)==null||_.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),E=()=>{if(i())return;let g;const _=n===0?t.initialPromise:void 0;try{g=_??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var L;if(i())return;const f=t.retry??(mm?0:3),v=t.retryDelay??Yj,A=typeof v=="function"?v(n,w):v,C=f===!0||typeof f=="number"&&n<f||typeof f=="function"&&f(n,w);if(e||!C){p(w);return}n++,(L=t.onFail)==null||L.call(t,n,w),Bj(A).then(()=>c()?void 0:m()).then(()=>{e?p(w):E()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():m().then(E),s)}}var Wo,tx,nC=(tx=class{constructor(){Le(this,Wo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mj(this.gcTime)&&Ee(this,Wo,kv.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(mm?1/0:5*60*1e3))}clearGcTimeout(){H(this,Wo)&&(kv.clearTimeout(H(this,Wo)),Ee(this,Wo,void 0))}},Wo=new WeakMap,tx),Ho,vl,nr,Ko,jt,Ed,Go,gr,ys,nx,Xj=(nx=class extends nC{constructor(n){super();Le(this,gr);Le(this,Ho);Le(this,vl);Le(this,nr);Le(this,Ko);Le(this,jt);Le(this,Ed);Le(this,Go);Ee(this,Go,!1),Ee(this,Ed,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,Ko,n.client),Ee(this,nr,H(this,Ko).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,Ho,QI(this.options)),this.state=n.state??H(this,Ho),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=H(this,jt))==null?void 0:n.promise}setOptions(n){if(this.options={...H(this,Ed),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=QI(this.options);r.data!==void 0&&(this.setState(GI(r.data,r.dataUpdatedAt)),Ee(this,Ho,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,nr).remove(this)}setData(n,r){const s=$j(this.state.data,n,this.options);return en(this,gr,ys).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){en(this,gr,ys).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=H(this,jt))==null?void 0:s.promise;return(i=H(this,jt))==null||i.cancel(n),r?r.then(mr).catch(mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Ho))}isActive(){return this.observers.some(n=>Uj(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===K_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Nv(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Fj(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,jt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,jt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),H(this,nr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(H(this,jt)&&(H(this,Go)?H(this,jt).cancel({revert:!0}):H(this,jt).cancelRetry()),this.scheduleGc()),H(this,nr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||en(this,gr,ys).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,p,m,E,g,_,w,f,v,A;if(this.state.fetchStatus!=="idle"&&((c=H(this,jt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,jt))return H(this,jt).continueRetry(),H(this,jt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const C=this.observers.find(L=>L.options.queryFn);C&&this.setOptions(C.options)}const s=new AbortController,i=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Ee(this,Go,!0),s.signal)})},o=()=>{const C=J1(this.options,r),S=(()=>{const T={client:H(this,Ko),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return Ee(this,Go,!1),this.options.persister?this.options.persister(C,S,this):C(S)},l=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,Ko),state:this.state,fetchFn:o};return i(C),C})();(d=this.options.behavior)==null||d.onFetch(l,this),Ee(this,vl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&en(this,gr,ys).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Ee(this,jt,tC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof Lv&&C.revert&&this.setState({...H(this,vl),fetchStatus:"idle"}),s.abort()},onFail:(C,L)=>{en(this,gr,ys).call(this,{type:"failed",failureCount:C,error:L})},onPause:()=>{en(this,gr,ys).call(this,{type:"pause"})},onContinue:()=>{en(this,gr,ys).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await H(this,jt).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(E=(m=H(this,nr).config).onSuccess)==null||E.call(m,C,this),(_=(g=H(this,nr).config).onSettled)==null||_.call(g,C,this.state.error,this),C}catch(C){if(C instanceof Lv){if(C.silent)return H(this,jt).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw en(this,gr,ys).call(this,{type:"error",error:C}),(f=(w=H(this,nr).config).onError)==null||f.call(w,C,this),(A=(v=H(this,nr).config).onSettled)==null||A.call(v,this.state.data,C,this),C}finally{this.scheduleGc()}}},Ho=new WeakMap,vl=new WeakMap,nr=new WeakMap,Ko=new WeakMap,jt=new WeakMap,Ed=new WeakMap,Go=new WeakMap,gr=new WeakSet,ys=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Jj(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...GI(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ee(this,vl,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),yn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,nr).notify({query:this,type:"updated",action:n})})},nx);function Jj(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:eC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function GI(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function QI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function YI(t){return{onFetch:(e,n)=>{var d,h,p,m,E;const r=e.options,s=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const _=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=J1(e.options,e.fetchOptions),f=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return _(R),R})(),T=await w(S),{maxPages:P}=e.options,D=C?qj:zj;return{pages:D(v.pages,T,P),pageParams:D(v.pageParams,A,P)}};if(s&&i.length){const v=s==="backward",A=v?Zj:XI,C={pages:i,pageParams:o},L=A(r,C);a=await f(C,L,v)}else{const v=t??i.length;do{const A=l===0?o[0]??r.initialPageParam:XI(r,a);if(l>0&&A==null)break;a=await f(a,A),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var g,_;return(_=(g=e.options).persister)==null?void 0:_.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function XI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Zj(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Td,Hr,pn,Qo,Kr,di,rx,e3=(rx=class extends nC{constructor(n){super();Le(this,Kr);Le(this,Td);Le(this,Hr);Le(this,pn);Le(this,Qo);Ee(this,Td,n.client),this.mutationId=n.mutationId,Ee(this,pn,n.mutationCache),Ee(this,Hr,[]),this.state=n.state||t3(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){H(this,Hr).includes(n)||(H(this,Hr).push(n),this.clearGcTimeout(),H(this,pn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,Hr,H(this,Hr).filter(r=>r!==n)),this.scheduleGc(),H(this,pn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){H(this,Hr).length||(this.state.status==="pending"?this.scheduleGc():H(this,pn).remove(this))}continue(){var n;return((n=H(this,Qo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,p,m,E,g,_,w,f,v,A,C,L,S,T,P,D;const r=()=>{en(this,Kr,di).call(this,{type:"continue"})},s={client:H(this,Td),meta:this.options.meta,mutationKey:this.options.mutationKey};Ee(this,Qo,tC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(R,O)=>{en(this,Kr,di).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{en(this,Kr,di).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,pn).canRun(this)}));const i=this.state.status==="pending",o=!H(this,Qo).canStart();try{if(i)r();else{en(this,Kr,di).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=H(this,pn).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&en(this,Kr,di).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const R=await H(this,Qo).start();return await((p=(h=H(this,pn).config).onSuccess)==null?void 0:p.call(h,R,n,this.state.context,this,s)),await((E=(m=this.options).onSuccess)==null?void 0:E.call(m,R,n,this.state.context,s)),await((_=(g=H(this,pn).config).onSettled)==null?void 0:_.call(g,R,null,this.state.variables,this.state.context,this,s)),await((f=(w=this.options).onSettled)==null?void 0:f.call(w,R,null,n,this.state.context,s)),en(this,Kr,di).call(this,{type:"success",data:R}),R}catch(R){try{throw await((A=(v=H(this,pn).config).onError)==null?void 0:A.call(v,R,n,this.state.context,this,s)),await((L=(C=this.options).onError)==null?void 0:L.call(C,R,n,this.state.context,s)),await((T=(S=H(this,pn).config).onSettled)==null?void 0:T.call(S,void 0,R,this.state.variables,this.state.context,this,s)),await((D=(P=this.options).onSettled)==null?void 0:D.call(P,void 0,R,n,this.state.context,s)),R}finally{en(this,Kr,di).call(this,{type:"error",error:R})}}finally{H(this,pn).runNext(this)}}},Td=new WeakMap,Hr=new WeakMap,pn=new WeakMap,Qo=new WeakMap,Kr=new WeakSet,di=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),yn.batch(()=>{H(this,Hr).forEach(s=>{s.onMutationUpdate(n)}),H(this,pn).notify({mutation:this,type:"updated",action:n})})},rx);function t3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _s,yr,Id,sx,n3=(sx=class extends pm{constructor(e={}){super();Le(this,_s);Le(this,yr);Le(this,Id);this.config=e,Ee(this,_s,new Set),Ee(this,yr,new Map),Ee(this,Id,0)}build(e,n,r){const s=new e3({client:e,mutationCache:this,mutationId:++ch(this,Id)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){H(this,_s).add(e);const n=Dh(e);if(typeof n=="string"){const r=H(this,yr).get(n);r?r.push(e):H(this,yr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(H(this,_s).delete(e)){const n=Dh(e);if(typeof n=="string"){const r=H(this,yr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&H(this,yr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Dh(e);if(typeof n=="string"){const r=H(this,yr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Dh(e);if(typeof n=="string"){const s=(r=H(this,yr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yn.batch(()=>{H(this,_s).forEach(e=>{this.notify({type:"removed",mutation:e})}),H(this,_s).clear(),H(this,yr).clear()})}getAll(){return Array.from(H(this,_s))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>WI(n,r))}findAll(e={}){return this.getAll().filter(n=>WI(e,n))}notify(e){yn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return yn.batch(()=>Promise.all(e.map(n=>n.continue().catch(mr))))}},_s=new WeakMap,yr=new WeakMap,Id=new WeakMap,sx);function Dh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Gr,ix,r3=(ix=class extends pm{constructor(e={}){super();Le(this,Gr);this.config=e,Ee(this,Gr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??H_(s,n);let o=this.get(i);return o||(o=new Xj({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){H(this,Gr).has(e.queryHash)||(H(this,Gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=H(this,Gr).get(e.queryHash);n&&(e.destroy(),n===e&&H(this,Gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return H(this,Gr).get(e)}getAll(){return[...H(this,Gr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>qI(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>qI(e,r)):n}notify(e){yn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){yn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Gr=new WeakMap,ix),gt,Ei,Ti,wl,_l,Ii,El,Tl,ox,s3=(ox=class{constructor(t={}){Le(this,gt);Le(this,Ei);Le(this,Ti);Le(this,wl);Le(this,_l);Le(this,Ii);Le(this,El);Le(this,Tl);Ee(this,gt,t.queryCache||new r3),Ee(this,Ei,t.mutationCache||new n3),Ee(this,Ti,t.defaultOptions||{}),Ee(this,wl,new Map),Ee(this,_l,new Map),Ee(this,Ii,0)}mount(){ch(this,Ii)._++,H(this,Ii)===1&&(Ee(this,El,Z1.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,gt).onFocus())})),Ee(this,Tl,sp.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,gt).onOnline())})))}unmount(){var t,e;ch(this,Ii)._--,H(this,Ii)===0&&((t=H(this,El))==null||t.call(this),Ee(this,El,void 0),(e=H(this,Tl))==null||e.call(this),Ee(this,Tl,void 0))}isFetching(t){return H(this,gt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,Ei).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,gt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=H(this,gt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Nv(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return H(this,gt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=H(this,gt).get(r.queryHash),i=s==null?void 0:s.state.data,o=Vj(e,i);if(o!==void 0)return H(this,gt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return yn.batch(()=>H(this,gt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,gt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=H(this,gt);yn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=H(this,gt);return yn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yn.batch(()=>H(this,gt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(mr).catch(mr)}invalidateQueries(t,e={}){return yn.batch(()=>(H(this,gt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yn.batch(()=>H(this,gt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(mr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(mr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=H(this,gt).build(this,e);return n.isStaleByTime(Nv(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(mr).catch(mr)}fetchInfiniteQuery(t){return t.behavior=YI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(mr).catch(mr)}ensureInfiniteQueryData(t){return t.behavior=YI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return sp.isOnline()?H(this,Ei).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,gt)}getMutationCache(){return H(this,Ei)}getDefaultOptions(){return H(this,Ti)}setDefaultOptions(t){Ee(this,Ti,t)}setQueryDefaults(t,e){H(this,wl).set(Zu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...H(this,wl).values()],n={};return e.forEach(r=>{ed(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){H(this,_l).set(Zu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...H(this,_l).values()],n={};return e.forEach(r=>{ed(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...H(this,Ti).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=H_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===K_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,Ti).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,gt).clear(),H(this,Ei).clear()}},gt=new WeakMap,Ei=new WeakMap,Ti=new WeakMap,wl=new WeakMap,_l=new WeakMap,Ii=new WeakMap,El=new WeakMap,Tl=new WeakMap,ox),i3=b.createContext(void 0),o3=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(i3.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}var Ai;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ai||(Ai={}));const JI="popstate";function a3(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return ip("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nd(s)}return rC(e,n,null,t)}function l3(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Ea(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ip("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:nd(i))}function r(s,i){G_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return rC(e,n,r,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function G_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c3(){return Math.random().toString(36).substr(2,8)}function ZI(t,e){return{usr:t.state,key:t.key,idx:e}}function ip(t,e,n,r){return n===void 0&&(n=null),td({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ea(e):e,{state:n,key:e&&e.key||r||c3()})}function nd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ea(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function rC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ai.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(td({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ai.Pop;let _=d(),w=_==null?null:_-c;c=_,l&&l({action:a,location:g.location,delta:w})}function p(_,w){a=Ai.Push;let f=ip(g.location,_,w);n&&n(f,_),c=d()+1;let v=ZI(f,c),A=g.createHref(f);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&l&&l({action:a,location:g.location,delta:1})}function m(_,w){a=Ai.Replace;let f=ip(g.location,_,w);n&&n(f,_),c=d();let v=ZI(f,c),A=g.createHref(f);o.replaceState(v,"",A),i&&l&&l({action:a,location:g.location,delta:0})}function E(_){let w=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof _=="string"?_:nd(_);return f=f.replace(/ $/,"%20"),St(w,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,w)}let g={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(JI,h),l=_,()=>{s.removeEventListener(JI,h),l=null}},createHref(_){return e(s,_)},createURL:E,encodeLocation(_){let w=E(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(_){return o.go(_)}};return g}var eS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(eS||(eS={}));function u3(t,e,n){return n===void 0&&(n="/"),d3(t,e,n)}function d3(t,e,n,r){let s=typeof e=="string"?Ea(e):e,i=Q_(s.pathname||"/",n);if(i==null)return null;let o=sC(t);h3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=S3(i);a=E3(o[l],c)}return a}function sC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(St(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Mi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(St(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:w3(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of iC(i.path))s(i,o,l)}),e}function iC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=iC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function h3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const f3=/^:[\w-]+$/,p3=3,m3=2,g3=1,y3=10,v3=-2,tS=t=>t==="*";function w3(t,e){let n=t.split("/"),r=n.length;return n.some(tS)&&(r+=v3),e&&(r+=m3),n.filter(s=>!tS(s)).reduce((s,i)=>s+(f3.test(i)?p3:i===""?g3:y3),r)}function _3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function E3(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=T3({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Mi([i,h.pathname]),pathnameBase:P3(Mi([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Mi([i,h.pathnameBase]))}return o}function T3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=I3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const E=a[h];return m&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function I3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),G_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function S3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return G_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Q_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function b3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ea(t):t;return{pathname:n?n.startsWith("/")?n:A3(n,e):e,search:R3(r),hash:C3(s)}}function A3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Y_(t,e){let n=x3(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function X_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ea(t):(s=td({},t),St(!s.pathname||!s.pathname.includes("?"),Xg("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),Xg("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),Xg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=b3(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Mi=t=>t.join("/").replace(/\/\/+/g,"/"),P3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,C3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function D3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oC=["post","put","patch","delete"];new Set(oC);const k3=["get",...oC];new Set(k3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rd.apply(this,arguments)}const J_=b.createContext(null),N3=b.createContext(null),oo=b.createContext(null),gm=b.createContext(null),qs=b.createContext({outlet:null,matches:[],isDataRoute:!1}),aC=b.createContext(null);function O3(t,e){let{relative:n}=e===void 0?{}:e;oc()||St(!1);let{basename:r,navigator:s}=b.useContext(oo),{hash:i,pathname:o,search:a}=cC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Mi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function oc(){return b.useContext(gm)!=null}function hs(){return oc()||St(!1),b.useContext(gm).location}function lC(t){b.useContext(oo).static||b.useLayoutEffect(t)}function ac(){let{isDataRoute:t}=b.useContext(qs);return t?K3():L3()}function L3(){oc()||St(!1);let t=b.useContext(J_),{basename:e,future:n,navigator:r}=b.useContext(oo),{matches:s}=b.useContext(qs),{pathname:i}=hs(),o=JSON.stringify(Y_(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return lC(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=X_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Mi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function yK(){let{matches:t}=b.useContext(qs),e=t[t.length-1];return e?e.params:{}}function cC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(oo),{matches:s}=b.useContext(qs),{pathname:i}=hs(),o=JSON.stringify(Y_(s,r.v7_relativeSplatPath));return b.useMemo(()=>X_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function V3(t,e){return M3(t,e)}function M3(t,e,n,r){oc()||St(!1);let{navigator:s}=b.useContext(oo),{matches:i}=b.useContext(qs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=hs(),d;if(e){var h;let _=typeof e=="string"?Ea(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||St(!1),d=_}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=u3(t,{pathname:m}),g=$3(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Mi([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Mi([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&g?b.createElement(gm.Provider,{value:{location:rd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ai.Pop}},g):g}function F3(){let t=H3(),e=D3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const U3=b.createElement(F3,null);class j3 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(qs.Provider,{value:this.props.routeContext},b.createElement(aC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B3(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(J_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(qs.Provider,{value:e},r)}function $3(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||St(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:m}=n,E=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let m,E=!1,g=null,_=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||U3,l&&(c<0&&p===0?(G3("route-fallback"),E=!0,_=null):c===p&&(E=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),f=()=>{let v;return m?v=g:E?v=_:h.route.Component?v=b.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,b.createElement(B3,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?b.createElement(j3,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:f(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):f()},null)}var uC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uC||{}),dC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dC||{});function z3(t){let e=b.useContext(J_);return e||St(!1),e}function q3(t){let e=b.useContext(N3);return e||St(!1),e}function W3(t){let e=b.useContext(qs);return e||St(!1),e}function hC(t){let e=W3(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function H3(){var t;let e=b.useContext(aC),n=q3(),r=hC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function K3(){let{router:t}=z3(uC.UseNavigateStable),e=hC(dC.UseNavigateStable),n=b.useRef(!1);return lC(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,rd({fromRouteId:e},i)))},[t,e])}const nS={};function G3(t,e,n){nS[t]||(nS[t]=!0)}function fC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vK(t){let{to:e,replace:n,state:r,relative:s}=t;oc()||St(!1);let{future:i,static:o}=b.useContext(oo),{matches:a}=b.useContext(qs),{pathname:l}=hs(),c=ac(),d=X_(e,Y_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function le(t){St(!1)}function pC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ai.Pop,navigator:i,static:o=!1,future:a}=t;oc()&&St(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:rd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ea(r));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:E="default"}=r,g=b.useMemo(()=>{let _=Q_(d,l);return _==null?null:{location:{pathname:_,search:h,hash:p,state:m,key:E},navigationType:s}},[l,d,h,p,m,E,s]);return g==null?null:b.createElement(oo.Provider,{value:c},b.createElement(gm.Provider,{children:n,value:g}))}function rS(t){let{children:e,location:n}=t;return V3(Vv(e),n)}new Promise(()=>{});function Vv(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Vv(r.props.children,i));return}r.type!==le&&St(!1),!r.props.index||!r.props.children||St(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Vv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mv(){return Mv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mv.apply(this,arguments)}function Q3(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Y3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function X3(t,e){return t.button===0&&(!e||e==="_self")&&!Y3(t)}function Fv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function J3(t,e){let n=Fv(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const Z3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],e6="6";try{window.__reactRouterVersion=e6}catch{}const t6="startTransition",op=Vw[t6];function n6(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=a3({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&op?op(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>fC(r),[r]),b.createElement(pC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function r6(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=l3({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&op?op(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>fC(r),[r]),b.createElement(pC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const s6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o6=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=Q3(e,Z3),{basename:m}=b.useContext(oo),E,g=!1;if(typeof c=="string"&&i6.test(c)&&(E=c,s6))try{let v=new URL(window.location.href),A=c.startsWith("//")?new URL(v.protocol+c):new URL(c),C=Q_(A.pathname,m);A.origin===v.origin&&C!=null?c=C+A.search+A.hash:g=!0}catch{}let _=O3(c,{relative:s}),w=a6(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function f(v){r&&r(v),v.defaultPrevented||w(v)}return b.createElement("a",Mv({},p,{href:E||_,onClick:g||i?r:f,ref:n,target:l}))});var sS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sS||(sS={}));var iS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(iS||(iS={}));function a6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ac(),c=hs(),d=cC(t,{relative:o});return b.useCallback(h=>{if(X3(h,n)){h.preventDefault();let p=r!==void 0?r:nd(c)===nd(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function wK(t){let e=b.useRef(Fv(t)),n=b.useRef(!1),r=hs(),s=b.useMemo(()=>J3(r.search,n.current?null:e.current),[r.search]),i=ac(),o=b.useCallback((a,l)=>{const c=Fv(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const mC=b.createContext(void 0),l6=({children:t})=>{const[e,n]=b.useState("medium"),[r,s]=b.useState(!1),[i,o]=b.useState(!1);b.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),b.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),b.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return x.jsx(mC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},_K=()=>{const t=b.useContext(mC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},c6=o1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wu=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?mM:"button";return x.jsx(o,{className:Xt(c6({variant:e,size:n,className:t})),ref:i,...s})});wu.displayName="Button";const Uv=b.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),x.jsx("input",{type:e,className:Xt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Uv.displayName="Input";const u6=()=>{};var oS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},d6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new h6;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f6=function(t){const e=gC(t);return Z_.encodeByteArray(e,!0)},ap=function(t){return f6(t).replace(/\./g,"")},yC=function(t){try{return Z_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=()=>vC().__FIREBASE_DEFAULTS__,m6=()=>{if(typeof process>"u"||typeof oS>"u")return;const t=oS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yC(t[1]);return e&&JSON.parse(e)},ym=()=>{try{return u6()||p6()||m6()||g6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},y6=t=>{var e,n;return(n=(e=ym())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wC=t=>{const e=y6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_C=()=>{var t;return(t=ym())==null?void 0:t.config},v6=t=>{var e;return(e=ym())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ap(JSON.stringify(n)),ap(JSON.stringify(o)),""].join(".")}const _u={};function _6(){const t={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?t.emulator.push(e):t.prod.push(e);return t}function E6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let aS=!1;function EC(t,e){if(typeof window>"u"||typeof document>"u"||!Ws(window.location.host)||_u[t]===e||_u[t]||aS)return;_u[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=_6().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{aS=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=E6(r),m=n("text"),E=document.getElementById(m)||document.createElement("span"),g=n("learnmore"),_=document.getElementById(g)||document.createElement("a"),w=n("preprendIcon"),f=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;a(v),d(_,g);const A=c();l(f,w),v.append(f,E,_,A),document.body.appendChild(v)}i?(E.innerText="Preview backend disconnected.",f.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(f.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function TC(){var e;const t=(e=ym())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function b6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A6(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IC(){return!TC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SC(){return!TC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tE(){try{return typeof indexedDB=="object"}catch{return!1}}function x6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="FirebaseError";class Nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P6,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}}class lc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?R6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Nr(s,a,r)}}function R6(t,e){return t.replace(C6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const C6=/\{\$([^}]+)}/g;function kl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(lS(i)&&lS(o)){if(!kl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function lS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function nu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function D6(t,e){const n=new k6(t,e);return n.subscribe.bind(n)}class k6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Jg),s.error===void 0&&(s.error=Jg),s.complete===void 0&&(s.complete=Jg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class Dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V6(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L6(t){return t===Eo?void 0:t}function V6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const F6={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},U6=ke.INFO,j6={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},B6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=j6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vm{constructor(e){this.name=e,this._logLevel=U6,this._logHandler=B6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const $6=(t,e)=>e.some(n=>t instanceof n);let cS,uS;function z6(){return cS||(cS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q6(){return uS||(uS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AC=new WeakMap,Bv=new WeakMap,xC=new WeakMap,Zg=new WeakMap,nE=new WeakMap;function W6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AC.set(n,t)}).catch(()=>{}),nE.set(e,t),e}function H6(t){if(Bv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bv.set(t,e)}let $v={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K6(t){$v=t($v)}function G6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ey(this),e,...n);return xC.set(r,e.sort?e.sort():[e]),Fi(r)}:q6().includes(t)?function(...e){return t.apply(ey(this),e),Fi(AC.get(this))}:function(...e){return Fi(t.apply(ey(this),e))}}function Q6(t){return typeof t=="function"?G6(t):(t instanceof IDBTransaction&&H6(t),$6(t,z6())?new Proxy(t,$v):t)}function Fi(t){if(t instanceof IDBRequest)return W6(t);if(Zg.has(t))return Zg.get(t);const e=Q6(t);return e!==t&&(Zg.set(t,e),nE.set(e,t)),e}const ey=t=>nE.get(t);function Y6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Fi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Fi(o.result),l.oldVersion,l.newVersion,Fi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const X6=["get","getKey","getAll","getAllKeys","count"],J6=["put","add","delete","clear"],ty=new Map;function dS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ty.get(e))return ty.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=J6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ty.set(e,i),i}K6(t=>({...t,get:(e,n,r)=>dS(e,n)||t.get(e,n,r),has:(e,n)=>!!dS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zv="@firebase/app",hS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new vm("@firebase/app"),tB="@firebase/app-compat",nB="@firebase/analytics-compat",rB="@firebase/analytics",sB="@firebase/app-check-compat",iB="@firebase/app-check",oB="@firebase/auth",aB="@firebase/auth-compat",lB="@firebase/database",cB="@firebase/data-connect",uB="@firebase/database-compat",dB="@firebase/functions",hB="@firebase/functions-compat",fB="@firebase/installations",pB="@firebase/installations-compat",mB="@firebase/messaging",gB="@firebase/messaging-compat",yB="@firebase/performance",vB="@firebase/performance-compat",wB="@firebase/remote-config",_B="@firebase/remote-config-compat",EB="@firebase/storage",TB="@firebase/storage-compat",IB="@firebase/firestore",SB="@firebase/ai",bB="@firebase/firestore-compat",AB="firebase",xB="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="[DEFAULT]",PB={[zv]:"fire-core",[tB]:"fire-core-compat",[rB]:"fire-analytics",[nB]:"fire-analytics-compat",[iB]:"fire-app-check",[sB]:"fire-app-check-compat",[oB]:"fire-auth",[aB]:"fire-auth-compat",[lB]:"fire-rtdb",[cB]:"fire-data-connect",[uB]:"fire-rtdb-compat",[dB]:"fire-fn",[hB]:"fire-fn-compat",[fB]:"fire-iid",[pB]:"fire-iid-compat",[mB]:"fire-fcm",[gB]:"fire-fcm-compat",[yB]:"fire-perf",[vB]:"fire-perf-compat",[wB]:"fire-rc",[_B]:"fire-rc-compat",[EB]:"fire-gcs",[TB]:"fire-gcs-compat",[IB]:"fire-fst",[bB]:"fire-fst-compat",[SB]:"fire-vertex","fire-js":"fire-js",[AB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=new Map,RB=new Map,Wv=new Map;function fS(t,e){try{t.container.addComponent(e)}catch(n){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cs(t){const e=t.name;if(Wv.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;Wv.set(e,t);for(const n of lp.values())fS(n,t);for(const n of RB.values())fS(n,t);return!0}function wm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new lc("app","Firebase",CB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=xB;function PC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qv,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ui.create("bad-app-name",{appName:String(s)});if(n||(n=_C()),!n)throw Ui.create("no-options");const i=lp.get(s);if(i){if(kl(n,i.options)&&kl(r,i.config))return i;throw Ui.create("duplicate-app",{appName:s})}const o=new M6(s);for(const l of Wv.values())o.addComponent(l);const a=new DB(n,r,o);return lp.set(s,a),a}function RC(t=qv){const e=lp.get(t);if(!e&&t===qv&&_C())return PC();if(!e)throw Ui.create("no-app",{appName:t});return e}function Gn(t,e,n){let r=PB[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(o.join(" "));return}cs(new Dr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="firebase-heartbeat-database",NB=1,sd="firebase-heartbeat-store";let ny=null;function CC(){return ny||(ny=Y6(kB,NB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),ny}async function OB(t){try{const n=(await CC()).transaction(sd),r=await n.objectStore(sd).get(DC(t));return await n.done,r}catch(e){if(e instanceof Nr)Us.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(n.message)}}}async function pS(t,e){try{const r=(await CC()).transaction(sd,"readwrite");await r.objectStore(sd).put(e,DC(t)),await r.done}catch(n){if(n instanceof Nr)Us.warn(n.message);else{const r=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Us.warn(r.message)}}}function DC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=1024,VB=30;class MB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>VB){const o=jB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Us.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mS(),{heartbeatsToSend:r,unsentEntries:s}=FB(this._heartbeatsCache.heartbeats),i=ap(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Us.warn(n),""}}}function mS(){return new Date().toISOString().substring(0,10)}function FB(t,e=LB){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tE()?x6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gS(t){return ap(JSON.stringify({version:2,heartbeats:t})).length}function jB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t){cs(new Dr("platform-logger",e=>new Z6(e),"PRIVATE")),cs(new Dr("heartbeat",e=>new MB(e),"PRIVATE")),Gn(zv,hS,t),Gn(zv,hS,"esm2020"),Gn("fire-js","")}BB("");function kC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $B=kC,NC=new lc("auth","Firebase",kC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=new vm("@firebase/auth");function zB(t,...e){cp.logLevel<=ke.WARN&&cp.warn(`Auth (${kd}): ${t}`,...e)}function hf(t,...e){cp.logLevel<=ke.ERROR&&cp.error(`Auth (${kd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t,...e){throw sE(t,...e)}function rE(t,...e){return sE(t,...e)}function OC(t,e,n){const r={...$B(),[e]:n};return new lc("auth","Firebase",r).create(e,{appName:t.name})}function ji(t){return OC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NC.create(t,...e)}function Ne(t,e,...n){if(!t)throw sE(e,...n)}function bs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hf(e),new Error(e)}function up(t,e){t||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function LC(){return yS()==="http:"||yS()==="https:"}function yS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LC()||S6()||"connection"in navigator)?navigator.onLine:!0}function HB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.shortDelay=e,this.longDelay=n,up(n>e,"Short delay should be less than long delay!"),this.isMobile=T6()||b6()}get(){return WB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(t,e){up(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YB=new Nd(3e4,6e4);function Hs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fs(t,e,n,r,s={}){return MC(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=bC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return I6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ws(t.emulatorConfig.host)&&(c.credentials="include"),VC.fetch()(await FC(t,t.config.apiHost,n,a),c)})}async function MC(t,e,n){t._canInitEmulator=!1;const r={...GB,...e};try{const s=new JB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw kh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw kh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw OC(t,d,c);la(t,d)}}catch(s){if(s instanceof Nr)throw s;la(t,"network-request-failed",{message:String(s)})}}async function _m(t,e,n,r,s={}){const i=await fs(t,e,n,r,s);return"mfaPendingCredential"in i&&la(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function FC(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?KB(t.config,s):`${t.config.apiScheme}://${s}`;return QB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function XB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rE(this.auth,"network-request-failed")),YB.get())})}}function kh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rE(t,e,r);return s.customData._tokenResponse=n,s}function vS(t){return t!==void 0&&t.enterprise!==void 0}class ZB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function e$(t,e){return fs(t,"GET","/v2/recaptchaConfig",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t$(t,e){return fs(t,"POST","/v1/accounts:delete",e)}async function dp(t,e){return fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n$(t,e=!1){const n=We(t),r=await n.getIdToken(e),s=iE(r);Ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Eu(ry(s.auth_time)),issuedAtTime:Eu(ry(s.iat)),expirationTime:Eu(ry(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ry(t){return Number(t)*1e3}function iE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const s=yC(n);return s?JSON.parse(s):(hf("Failed to decode base64 JWT payload"),null)}catch(s){return hf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wS(t){const e=iE(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nr&&r$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function r$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await id(t,dp(e,{idToken:n}));Ne(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?UC(s.providerUserInfo):[],o=o$(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function i$(t){const e=We(t);await hp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o$(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function UC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(t,e){const n=await MC(t,{},async()=>{const r=bC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await FC(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ws(t.emulatorConfig.host)&&(l.credentials="include"),VC.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function l$(t,e){return fs(t,"POST","/v2/accounts:revokeToken",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=wS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await a$(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new dl;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new s$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await id(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return n$(this,e)}reload(){return i$(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(ji(this.auth));const e=await this.getIdToken();return await id(this,t$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:m,providerData:E,stsTokenManager:g}=n;Ne(h&&g,e,"internal-error");const _=dl.fromJSON(this.name,g);Ne(typeof h=="string",e,"internal-error"),ai(r,e.name),ai(s,e.name),Ne(typeof p=="boolean",e,"internal-error"),Ne(typeof m=="boolean",e,"internal-error"),ai(i,e.name),ai(o,e.name),ai(a,e.name),ai(l,e.name),ai(c,e.name),ai(d,e.name);const w=new Tr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:_,createdAt:c,lastLoginAt:d});return E&&Array.isArray(E)&&(w.providerData=E.map(f=>({...f}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new dl;s.updateFromServerResponse(n);const i=new Tr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?UC(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new dl;a.updateFromIdToken(r);const l=new Tr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Map;function No(t){up(t instanceof Function,"Expected a class definition");let e=_S.get(t);return e?(up(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_S.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jC.type="NONE";const Kv=jC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e,n){return`firebase:${t}:${e}:${n}`}class hl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=sy(this.userKey,s.apiKey,i),this.fullPersistenceKey=sy("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dp(this.auth,{idToken:e}).catch(()=>{});return n?Tr._fromGetAccountInfoResponse(this.auth,n,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hl(No(Kv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||No(Kv);const o=sy(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const p=await dp(e,{idToken:d}).catch(()=>{});if(!p)break;h=await Tr._fromGetAccountInfoResponse(e,p,d)}else h=Tr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new hl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new hl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zC(e))return"Blackberry";if(qC(e))return"Webos";if(u$(e))return"Safari";if((e.includes("chrome/")||d$(e))&&!e.includes("edge/"))return"Chrome";if($C(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c$(t=Jt()){return/firefox\//i.test(t)}function u$(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d$(t=Jt()){return/crios\//i.test(t)}function BC(t=Jt()){return/iemobile/i.test(t)}function $C(t=Jt()){return/android/i.test(t)}function zC(t=Jt()){return/blackberry/i.test(t)}function qC(t=Jt()){return/webos/i.test(t)}function h$(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function f$(){return A6()&&document.documentMode===10}function p$(t=Jt()){return h$(t)||$C(t)||qC(t)||zC(t)||/windows phone/i.test(t)||BC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e=[]){let n;switch(t){case"Browser":n=ES(Jt());break;case"Worker":n=`${ES(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(t,e={}){return fs(t,"GET","/v2/passwordPolicy",Hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=6;class v${constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??y$,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TS(this),this.idTokenSubscription=new TS(this),this.beforeStateQueue=new m$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=No(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dp(this,{idToken:e}),r=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Bn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(ji(this));const n=e?We(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(No(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g$(this),n=new v$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await l$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&No(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[No(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&zB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cc(t){return We(t)}class TS{constructor(e){this.auth=e,this.observer=null,this.addObserver=D6(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _$(t){oE=t}function E$(t){return oE.loadJS(t)}function T$(){return oE.recaptchaEnterpriseScript}class I${constructor(){this.enterprise=new S$}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class S${ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const b$="recaptcha-enterprise",HC="NO_RECAPTCHA";class A${constructor(e){this.type=b$,this.auth=cc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{e$(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new ZB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;vS(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(HC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new I$().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&vS(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=T$();l.length!==0&&(l+=a),E$(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function IS(t,e,n,r=!1,s=!1){const i=new A$(t);let o;if(s)o=HC;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function fp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await IS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await IS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$(t,e){const n=wm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(kl(i,e??{}))return s;la(s,"already-initialized")}return n.initialize({options:e})}function P$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(No);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,n){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function C$(t,e){return fs(t,"POST","/v1/accounts:update",e)}async function D$(t,e){return fs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k$(t,e){return _m(t,"POST","/v1/accounts:signInWithPassword",Hs(t,e))}async function N$(t,e){return fs(t,"POST","/v1/accounts:sendOobCode",Hs(t,e))}async function O$(t,e){return N$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L$(t,e){return _m(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}async function V$(t,e){return _m(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends R${constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new od(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new od(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fp(e,n,"signInWithPassword",k$);case"emailLink":return L$(e,{email:this._email,oobCode:this._password});default:la(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fp(e,r,"signUpPassword",D$);case"emailLink":return V$(e,{idToken:n,email:this._email,oobCode:this._password});default:la(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F$(t){const e=tu(nu(t)).link,n=e?tu(nu(e)).deep_link_id:null,r=tu(nu(t)).deep_link_id;return(r?tu(nu(r)).link:null)||r||n||e||t}class aE{constructor(e){const n=tu(nu(e)),r=n.apiKey??null,s=n.oobCode??null,i=M$(n.mode??null);Ne(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=F$(e);try{return new aE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,n){return od._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=aE.parseLink(n);return Ne(r,"argument-error"),od._fromEmailAndCode(e,r.code,r.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U$(t,e){return _m(t,"POST","/v1/accounts:signUp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tr._fromIdTokenResponse(e,r,s),o=SS(r);return new Nl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=SS(r);return new Nl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function SS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Nr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,pp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new pp(e,n,r,s)}}function KC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?pp._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(t,e,n=!1){const{auth:r}=t;if(Bn(r.app))return Promise.reject(ji(r));const s="reauthenticate";try{const i=await id(t,KC(r,s,e,t),n);Ne(i.idToken,r,"internal-error");const o=iE(i.idToken);Ne(o,r,"internal-error");const{sub:a}=o;return Ne(t.uid===a,r,"user-mismatch"),Nl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&la(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B$(t,e,n=!1){if(Bn(t.app))return Promise.reject(ji(t));const r="signIn",s=await KC(t,r,e),i=await Nl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function $$(t,e){return B$(cc(t),e)}async function TK(t,e){return j$(We(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t){const e=cc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z$(t,e,n){const r=cc(t);await fp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",O$)}async function bS(t,e,n){if(Bn(t.app))return Promise.reject(ji(t));const r=cc(t),o=await fp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",U$).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GC(t),l}),a=await Nl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function q$(t,e,n){return Bn(t.app)?Promise.reject(ji(t)):$$(We(t),uc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W$(t,e){return fs(t,"POST","/v1/accounts:createAuthUri",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H$(t,e){const n=LC()?qB():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await W$(We(t),r);return s||[]}function IK(t,e){return K$(We(t),null,e)}async function K$(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await id(t,C$(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t,e){return We(t).setPersistence(e)}function Q$(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function AS(t){return We(t).signOut()}const xS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xS,"1"),this.storage.removeItem(xS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=1e3,X$=10;class YC extends QC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);f$()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,X$):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Y$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YC.type="LOCAL";const XC=YC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC extends QC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JC.type="SESSION";const J$=JC;new Nd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Nd(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Nd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Nd(5e3,15e3);var PS="@firebase/auth",RS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t5(t){cs(new Dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WC(t)},c=new w$(r,s,i,l);return P$(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cs(new Dr("auth-internal",e=>{const n=cc(e.getProvider("auth").getImmediate());return(r=>new Z$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(PS,RS,e5(t)),Gn(PS,RS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=5*60;v6("authIdTokenMaxAge");function r5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rE("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",r5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t5("Browser");var s5="firebase",i5="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(s5,i5,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=new Map,a5={activated:!1,tokenObservers:[]},l5={initialized:!1,enabled:!1};function kr(t){return o5.get(t)||{...a5}}function ZC(){return l5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="https://content-firebaseappcheck.googleapis.com/v1";const u5="exchangeDebugToken",CS={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},SK=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new jv,this.pending.promise.catch(n=>{}),await h5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new jv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function h5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},xi=new lc("appCheck","AppCheck",f5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){if(!kr(t).activated)throw xi.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw xi.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw xi.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw xi.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function nD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${c5}/projects/${n}/apps/${r}:${u5}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="firebase-app-check-database",m5=1,Gv="firebase-app-check-store";let Nh=null;function g5(){return Nh||(Nh=new Promise((t,e)=>{try{const n=indexedDB.open(p5,m5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(xi.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Gv,{keyPath:"compositeKey"})}}}catch(n){e(xi.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Nh)}function y5(t,e){return v5(w5(t),e)}async function v5(t,e){const r=(await g5()).transaction(Gv,"readwrite"),i=r.objectStore(Gv).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(xi.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function w5(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new vm("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e){return tE()?y5(t,e).catch(n=>{ru.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(){return ZC().enabled}async function sD(){const t=ZC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5={error:"UNKNOWN_ERROR"};function E5(t){return Z_.encodeString(JSON.stringify(t),!1)}async function Qv(t,e=!1,n=!1){const r=t.app;eD(r);const s=kr(r);let i=s.token,o;if(i&&!su(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(su(c)?i=c:await iy(r,void 0))}if(!e&&i&&su(i))return{token:i.token};let a=!1;if(rD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=tD(nD(r,await sD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await iy(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?ru.warn(c.message):n&&ru.error(c),oy(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await kr(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?ru.warn(c.message):n&&ru.error(c),o=c}let l;return i?o?su(i)?l={token:i.token,internalError:o}:l=oy(o):(l={token:i.token},s.token=i,await iy(r,i)):l=oy(o),a&&b5(r,l),l}async function T5(t){const e=t.app;eD(e);const{provider:n}=kr(e);if(rD()){const r=await sD(),{token:s}=await tD(nD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function I5(t,e,n,r){const{app:s}=t,i=kr(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&su(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),DS(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>DS(t))}function iD(t,e){const n=kr(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function DS(t){const{app:e}=t,n=kr(e);let r=n.tokenRefresher;r||(r=S5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function S5(t){const{app:e}=t;return new d5(async()=>{const n=kr(e);let r;if(n.token?r=await Qv(t,!0):r=await Qv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=kr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},CS.RETRIAL_MIN_WAIT,CS.RETRIAL_MAX_WAIT)}function b5(t,e){const n=kr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function su(t){return t.expireTimeMillis-Date.now()>0}function oy(t){return{token:E5(_5),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=kr(this.app);for(const n of e)iD(this.app,n.next);return Promise.resolve()}}function x5(t,e){return new A5(t,e)}function P5(t){return{getToken:e=>Qv(t,e),getLimitedUseToken:()=>T5(t),addTokenListener:e=>I5(t,"INTERNAL",e),removeTokenListener:e=>iD(t.app,e)}}const R5="@firebase/app-check",C5="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="app-check",kS="app-check-internal";function k5(){cs(new Dr(D5,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return x5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(kS).initialize()})),cs(new Dr(kS,t=>{const e=t.getProvider("app-check").getImmediate();return P5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gn(R5,C5)}k5();var NS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,oD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function P(){}P.prototype=T.prototype,S.F=T.prototype,S.prototype=new P,S.prototype.constructor=S,S.D=function(D,R,O){for(var k=Array(arguments.length-2),U=2;U<arguments.length;U++)k[U-2]=arguments[U];return T.prototype[R].apply(D,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,P){P||(P=0);const D=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)D[R]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(R=0;R<16;++R)D[R]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=S.g[0],P=S.g[1],R=S.g[2];let O=S.g[3],k;k=T+(O^P&(R^O))+D[0]+3614090360&4294967295,T=P+(k<<7&4294967295|k>>>25),k=O+(R^T&(P^R))+D[1]+3905402710&4294967295,O=T+(k<<12&4294967295|k>>>20),k=R+(P^O&(T^P))+D[2]+606105819&4294967295,R=O+(k<<17&4294967295|k>>>15),k=P+(T^R&(O^T))+D[3]+3250441966&4294967295,P=R+(k<<22&4294967295|k>>>10),k=T+(O^P&(R^O))+D[4]+4118548399&4294967295,T=P+(k<<7&4294967295|k>>>25),k=O+(R^T&(P^R))+D[5]+1200080426&4294967295,O=T+(k<<12&4294967295|k>>>20),k=R+(P^O&(T^P))+D[6]+2821735955&4294967295,R=O+(k<<17&4294967295|k>>>15),k=P+(T^R&(O^T))+D[7]+4249261313&4294967295,P=R+(k<<22&4294967295|k>>>10),k=T+(O^P&(R^O))+D[8]+1770035416&4294967295,T=P+(k<<7&4294967295|k>>>25),k=O+(R^T&(P^R))+D[9]+2336552879&4294967295,O=T+(k<<12&4294967295|k>>>20),k=R+(P^O&(T^P))+D[10]+4294925233&4294967295,R=O+(k<<17&4294967295|k>>>15),k=P+(T^R&(O^T))+D[11]+2304563134&4294967295,P=R+(k<<22&4294967295|k>>>10),k=T+(O^P&(R^O))+D[12]+1804603682&4294967295,T=P+(k<<7&4294967295|k>>>25),k=O+(R^T&(P^R))+D[13]+4254626195&4294967295,O=T+(k<<12&4294967295|k>>>20),k=R+(P^O&(T^P))+D[14]+2792965006&4294967295,R=O+(k<<17&4294967295|k>>>15),k=P+(T^R&(O^T))+D[15]+1236535329&4294967295,P=R+(k<<22&4294967295|k>>>10),k=T+(R^O&(P^R))+D[1]+4129170786&4294967295,T=P+(k<<5&4294967295|k>>>27),k=O+(P^R&(T^P))+D[6]+3225465664&4294967295,O=T+(k<<9&4294967295|k>>>23),k=R+(T^P&(O^T))+D[11]+643717713&4294967295,R=O+(k<<14&4294967295|k>>>18),k=P+(O^T&(R^O))+D[0]+3921069994&4294967295,P=R+(k<<20&4294967295|k>>>12),k=T+(R^O&(P^R))+D[5]+3593408605&4294967295,T=P+(k<<5&4294967295|k>>>27),k=O+(P^R&(T^P))+D[10]+38016083&4294967295,O=T+(k<<9&4294967295|k>>>23),k=R+(T^P&(O^T))+D[15]+3634488961&4294967295,R=O+(k<<14&4294967295|k>>>18),k=P+(O^T&(R^O))+D[4]+3889429448&4294967295,P=R+(k<<20&4294967295|k>>>12),k=T+(R^O&(P^R))+D[9]+568446438&4294967295,T=P+(k<<5&4294967295|k>>>27),k=O+(P^R&(T^P))+D[14]+3275163606&4294967295,O=T+(k<<9&4294967295|k>>>23),k=R+(T^P&(O^T))+D[3]+4107603335&4294967295,R=O+(k<<14&4294967295|k>>>18),k=P+(O^T&(R^O))+D[8]+1163531501&4294967295,P=R+(k<<20&4294967295|k>>>12),k=T+(R^O&(P^R))+D[13]+2850285829&4294967295,T=P+(k<<5&4294967295|k>>>27),k=O+(P^R&(T^P))+D[2]+4243563512&4294967295,O=T+(k<<9&4294967295|k>>>23),k=R+(T^P&(O^T))+D[7]+1735328473&4294967295,R=O+(k<<14&4294967295|k>>>18),k=P+(O^T&(R^O))+D[12]+2368359562&4294967295,P=R+(k<<20&4294967295|k>>>12),k=T+(P^R^O)+D[5]+4294588738&4294967295,T=P+(k<<4&4294967295|k>>>28),k=O+(T^P^R)+D[8]+2272392833&4294967295,O=T+(k<<11&4294967295|k>>>21),k=R+(O^T^P)+D[11]+1839030562&4294967295,R=O+(k<<16&4294967295|k>>>16),k=P+(R^O^T)+D[14]+4259657740&4294967295,P=R+(k<<23&4294967295|k>>>9),k=T+(P^R^O)+D[1]+2763975236&4294967295,T=P+(k<<4&4294967295|k>>>28),k=O+(T^P^R)+D[4]+1272893353&4294967295,O=T+(k<<11&4294967295|k>>>21),k=R+(O^T^P)+D[7]+4139469664&4294967295,R=O+(k<<16&4294967295|k>>>16),k=P+(R^O^T)+D[10]+3200236656&4294967295,P=R+(k<<23&4294967295|k>>>9),k=T+(P^R^O)+D[13]+681279174&4294967295,T=P+(k<<4&4294967295|k>>>28),k=O+(T^P^R)+D[0]+3936430074&4294967295,O=T+(k<<11&4294967295|k>>>21),k=R+(O^T^P)+D[3]+3572445317&4294967295,R=O+(k<<16&4294967295|k>>>16),k=P+(R^O^T)+D[6]+76029189&4294967295,P=R+(k<<23&4294967295|k>>>9),k=T+(P^R^O)+D[9]+3654602809&4294967295,T=P+(k<<4&4294967295|k>>>28),k=O+(T^P^R)+D[12]+3873151461&4294967295,O=T+(k<<11&4294967295|k>>>21),k=R+(O^T^P)+D[15]+530742520&4294967295,R=O+(k<<16&4294967295|k>>>16),k=P+(R^O^T)+D[2]+3299628645&4294967295,P=R+(k<<23&4294967295|k>>>9),k=T+(R^(P|~O))+D[0]+4096336452&4294967295,T=P+(k<<6&4294967295|k>>>26),k=O+(P^(T|~R))+D[7]+1126891415&4294967295,O=T+(k<<10&4294967295|k>>>22),k=R+(T^(O|~P))+D[14]+2878612391&4294967295,R=O+(k<<15&4294967295|k>>>17),k=P+(O^(R|~T))+D[5]+4237533241&4294967295,P=R+(k<<21&4294967295|k>>>11),k=T+(R^(P|~O))+D[12]+1700485571&4294967295,T=P+(k<<6&4294967295|k>>>26),k=O+(P^(T|~R))+D[3]+2399980690&4294967295,O=T+(k<<10&4294967295|k>>>22),k=R+(T^(O|~P))+D[10]+4293915773&4294967295,R=O+(k<<15&4294967295|k>>>17),k=P+(O^(R|~T))+D[1]+2240044497&4294967295,P=R+(k<<21&4294967295|k>>>11),k=T+(R^(P|~O))+D[8]+1873313359&4294967295,T=P+(k<<6&4294967295|k>>>26),k=O+(P^(T|~R))+D[15]+4264355552&4294967295,O=T+(k<<10&4294967295|k>>>22),k=R+(T^(O|~P))+D[6]+2734768916&4294967295,R=O+(k<<15&4294967295|k>>>17),k=P+(O^(R|~T))+D[13]+1309151649&4294967295,P=R+(k<<21&4294967295|k>>>11),k=T+(R^(P|~O))+D[4]+4149444226&4294967295,T=P+(k<<6&4294967295|k>>>26),k=O+(P^(T|~R))+D[11]+3174756917&4294967295,O=T+(k<<10&4294967295|k>>>22),k=R+(T^(O|~P))+D[2]+718787259&4294967295,R=O+(k<<15&4294967295|k>>>17),k=P+(O^(R|~T))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const P=T-this.blockSize,D=this.C;let R=this.h,O=0;for(;O<T;){if(R==0)for(;O<=P;)s(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<T;)if(D[R++]=S.charCodeAt(O++),R==this.blockSize){s(this,D),R=0;break}}else for(;O<T;)if(D[R++]=S[O++],R==this.blockSize){s(this,D),R=0;break}}this.h=R,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var P=S.length-8;P<S.length;++P)S[P]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,P=0;P<4;++P)for(let D=0;D<32;D+=8)S[T++]=this.g[P]>>>D&255;return S};function i(S,T){var P=a;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=T(S)}function o(S,T){this.h=T;const P=[];let D=!0;for(let R=S.length-1;R>=0;R--){const O=S[R]|0;D&&O==T||(P[R]=O,D=!1)}this.g=P}var a={};function l(S){return-128<=S&&S<128?i(S,function(T){return new o([T|0],T<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return _(c(-S));const T=[];let P=1;for(let D=0;S>=P;D++)T[D]=S/P|0,P*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return _(d(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=c(Math.pow(T,8));let D=h;for(let O=0;O<S.length;O+=8){var R=Math.min(8,S.length-O);const k=parseInt(S.substring(O,O+R),T);R<8?(R=c(Math.pow(T,R)),D=D.j(R).add(c(k))):(D=D.j(P),D=D.add(c(k)))}return D}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-_(this).m();let S=0,T=1;for(let P=0;P<this.g.length;P++){const D=this.i(P);S+=(D>=0?D:4294967296+D)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(g(this))return"-"+_(this).toString(S);const T=c(Math.pow(S,6));var P=this;let D="";for(;;){const R=A(P,T).g;P=w(P,R.j(T));let O=((P.g.length>0?P.g[0]:P.h)>>>0).toString(S);if(P=R,E(P))return O+D;for(;O.length<6;)O="0"+O;D=O+D}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function g(S){return S.h==-1}t.l=function(S){return S=w(this,S),g(S)?-1:E(S)?0:1};function _(S){const T=S.g.length,P=[];for(let D=0;D<T;D++)P[D]=~S.g[D];return new o(P,~S.h).add(p)}t.abs=function(){return g(this)?_(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),P=[];let D=0;for(let R=0;R<=T;R++){let O=D+(this.i(R)&65535)+(S.i(R)&65535),k=(O>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);D=k>>>16,O&=65535,k&=65535,P[R]=k<<16|O}return new o(P,P[P.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(_(T))}t.j=function(S){if(E(this)||E(S))return h;if(g(this))return g(S)?_(this).j(_(S)):_(_(this).j(S));if(g(S))return _(this.j(_(S)));if(this.l(m)<0&&S.l(m)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,P=[];for(var D=0;D<2*T;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(let R=0;R<S.g.length;R++){const O=this.i(D)>>>16,k=this.i(D)&65535,U=S.i(R)>>>16,X=S.i(R)&65535;P[2*D+2*R]+=k*X,f(P,2*D+2*R),P[2*D+2*R+1]+=O*X,f(P,2*D+2*R+1),P[2*D+2*R+1]+=k*U,f(P,2*D+2*R+1),P[2*D+2*R+2]+=O*U,f(P,2*D+2*R+2)}for(S=0;S<T;S++)P[S]=P[2*S+1]<<16|P[2*S];for(S=T;S<2*T;S++)P[S]=0;return new o(P,0)};function f(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function v(S,T){this.g=S,this.h=T}function A(S,T){if(E(T))throw Error("division by zero");if(E(S))return new v(h,h);if(g(S))return T=A(_(S),T),new v(_(T.g),_(T.h));if(g(T))return T=A(S,_(T)),new v(_(T.g),T.h);if(S.g.length>30){if(g(S)||g(T))throw Error("slowDivide_ only works with positive integers.");for(var P=p,D=T;D.l(S)<=0;)P=C(P),D=C(D);var R=L(P,1),O=L(D,1);for(D=L(D,2),P=L(P,2);!E(D);){var k=O.add(D);k.l(S)<=0&&(R=R.add(P),O=k),D=L(D,1),P=L(P,1)}return T=w(S,R.j(T)),new v(R,T)}for(R=h;S.l(T)>=0;){for(P=Math.max(1,Math.floor(S.m()/T.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),O=c(P),k=O.j(T);g(k)||k.l(S)>0;)P-=D,O=c(P),k=O.j(T);E(O)&&(O=p),R=R.add(O),S=w(S,k)}return new v(R,S)}t.B=function(S){return A(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),P=[];for(let D=0;D<T;D++)P[D]=this.i(D)&S.i(D);return new o(P,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),P=[];for(let D=0;D<T;D++)P[D]=this.i(D)|S.i(D);return new o(P,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),P=[];for(let D=0;D<T;D++)P[D]=this.i(D)^S.i(D);return new o(P,this.h^S.h)};function C(S){const T=S.g.length+1,P=[];for(let D=0;D<T;D++)P[D]=S.i(D)<<1|S.i(D-1)>>>31;return new o(P,S.h)}function L(S,T){const P=T>>5;T%=32;const D=S.g.length-P,R=[];for(let O=0;O<D;O++)R[O]=T>0?S.i(O+P)>>>T|S.i(O+P+1)<<32-T:S.i(O+P);return new o(R,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Bi=o}).apply(typeof NS<"u"?NS:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aD,iu,lD,ff,Yv,cD,uD,dD;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var y=0;y<u.length;++y){var I=u[y];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(u,y){if(y)e:{var I=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var M=u[N];if(!(M in I))break e;I=I[M]}u=u[u.length-1],N=I[u],y=y(N),y!=N&&y!=null&&e(I,u,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(y){var I=[],N;for(N in y)Object.prototype.hasOwnProperty.call(y,N)&&I.push([N,y[N]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function l(u,y,I){return u.call.apply(u.bind,arguments)}function c(u,y,I){return c=l,c.apply(null,arguments)}function d(u,y){var I=Array.prototype.slice.call(arguments,1);return function(){var N=I.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,y){function I(){}I.prototype=y.prototype,u.Z=y.prototype,u.prototype=new I,u.prototype.constructor=u,u.Ob=function(N,M,B){for(var J=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)J[Pe-2]=arguments[Pe];return y.prototype[M].apply(N,J)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const y=u.length;if(y>0){const I=Array(y);for(let N=0;N<y;N++)I[N]=u[N];return I}return[]}function E(u,y){for(let N=1;N<arguments.length;N++){const M=arguments[N];var I=typeof M;if(I=I!="object"?I:M?Array.isArray(M)?"array":I:"null",I=="array"||I=="object"&&typeof M.length=="number"){I=u.length||0;const B=M.length||0;u.length=I+B;for(let J=0;J<B;J++)u[I+J]=M[J]}else u.push(M)}}class g{constructor(y,I){this.i=y,this.j=I,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function _(u){o.setTimeout(()=>{throw u},0)}function w(){var u=S;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class f{constructor(){this.h=this.g=null}add(y,I){const N=v.get();N.set(y,I),this.h?this.h.next=N:this.g=N,this.h=N}}var v=new g(()=>new A,u=>u.reset());class A{constructor(){this.next=this.g=this.h=null}set(y,I){this.h=y,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let C,L=!1,S=new f,T=()=>{const u=Promise.resolve(void 0);C=()=>{u.then(P)}};function P(){for(var u;u=w();){try{u.h.call(u.g)}catch(I){_(I)}var y=v;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}L=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const I=()=>{};o.addEventListener("test",I,y),o.removeEventListener("test",I,y)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function U(u,y){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}h(U,R),U.prototype.init=function(u,y){const I=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(I=="mouseover"?y=u.fromElement:I=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&U.Z.h.call(this)},U.prototype.h=function(){U.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),te=0;function G(u,y,I,N,M){this.listener=u,this.proxy=null,this.src=y,this.type=I,this.capture=!!N,this.ha=M,this.key=++te,this.da=this.fa=!1}function j(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function F(u,y,I){for(const N in u)y.call(I,u[N],N,u)}function q(u,y){for(const I in u)y.call(void 0,u[I],I,u)}function ne(u){const y={};for(const I in u)y[I]=u[I];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(u,y){let I,N;for(let M=1;M<arguments.length;M++){N=arguments[M];for(I in N)u[I]=N[I];for(let B=0;B<Z.length;B++)I=Z[B],Object.prototype.hasOwnProperty.call(N,I)&&(u[I]=N[I])}}function ae(u){this.src=u,this.g={},this.h=0}ae.prototype.add=function(u,y,I,N,M){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const J=Ve(u,y,N,M);return J>-1?(y=u[J],I||(y.fa=!1)):(y=new G(y,this.src,B,!!N,M),y.fa=I,u.push(y)),y};function Ie(u,y){const I=y.type;if(I in u.g){var N=u.g[I],M=Array.prototype.indexOf.call(N,y,void 0),B;(B=M>=0)&&Array.prototype.splice.call(N,M,1),B&&(j(y),u.g[I].length==0&&(delete u.g[I],u.h--))}}function Ve(u,y,I,N){for(let M=0;M<u.length;++M){const B=u[M];if(!B.da&&B.listener==y&&B.capture==!!I&&B.ha==N)return M}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),we={};function Ce(u,y,I,N,M){if(Array.isArray(y)){for(let B=0;B<y.length;B++)Ce(u,y[B],I,N,M);return null}return I=Ys(I),u&&u[X]?u.J(y,I,a(N)?!!N.capture:!1,M):At(u,y,I,!1,N,M)}function At(u,y,I,N,M,B){if(!y)throw Error("Invalid event type");const J=a(M)?!!M.capture:!!M;let Pe=be(u);if(Pe||(u[ue]=Pe=new ae(u)),I=Pe.add(y,I,N,J,B),I.proxy)return I;if(N=Vt(),I.proxy=N,N.src=u,N.listener=I,u.addEventListener)O||(M=J),M===void 0&&(M=!1),u.addEventListener(y.toString(),N,M);else if(u.attachEvent)u.attachEvent(In(y.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Vt(){function u(I){return y.call(u.src,u.listener,I)}const y=Vr;return u}function Zt(u,y,I,N,M){if(Array.isArray(y))for(var B=0;B<y.length;B++)Zt(u,y[B],I,N,M);else N=a(N)?!!N.capture:!!N,I=Ys(I),u&&u[X]?(u=u.i,B=String(y).toString(),B in u.g&&(y=u.g[B],I=Ve(y,I,N,M),I>-1&&(j(y[I]),Array.prototype.splice.call(y,I,1),y.length==0&&(delete u.g[B],u.h--)))):u&&(u=be(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Ve(y,I,N,M)),(I=u>-1?y[u]:null)&&Wt(I))}function Wt(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[X])Ie(y.i,u);else{var I=u.type,N=u.proxy;y.removeEventListener?y.removeEventListener(I,N,u.capture):y.detachEvent?y.detachEvent(In(I),N):y.addListener&&y.removeListener&&y.removeListener(N),(I=be(y))?(Ie(I,u),I.h==0&&(I.src=null,y[ue]=null)):j(u)}}}function In(u){return u in we?we[u]:we[u]="on"+u}function Vr(u,y){if(u.da)u=!0;else{y=new U(y,this);const I=u.listener,N=u.ha||u.src;u.fa&&Wt(u),u=I.call(N,y)}return u}function be(u){return u=u[ue],u instanceof ae?u:null}var er="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ys(u){return typeof u=="function"?u:(u[er]||(u[er]=function(y){return u.handleEvent(y)}),u[er])}function ct(){D.call(this),this.i=new ae(this),this.M=this,this.G=null}h(ct,D),ct.prototype[X]=!0,ct.prototype.removeEventListener=function(u,y,I,N){Zt(this,u,y,I,N)};function Mt(u,y){var I,N=u.G;if(N)for(I=[];N;N=N.G)I.push(N);if(u=u.M,N=y.type||y,typeof y=="string")y=new R(y,u);else if(y instanceof R)y.target=y.target||u;else{var M=y;y=new R(N,u),re(y,M)}M=!0;let B,J;if(I)for(J=I.length-1;J>=0;J--)B=y.g=I[J],M=Mr(B,N,!0,y)&&M;if(B=y.g=u,M=Mr(B,N,!0,y)&&M,M=Mr(B,N,!1,y)&&M,I)for(J=0;J<I.length;J++)B=y.g=I[J],M=Mr(B,N,!1,y)&&M}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const I=u.g[y];for(let N=0;N<I.length;N++)j(I[N]);delete u.g[y],u.h--}}this.G=null},ct.prototype.J=function(u,y,I,N){return this.i.add(String(u),y,!1,I,N)},ct.prototype.K=function(u,y,I,N){return this.i.add(String(u),y,!0,I,N)};function Mr(u,y,I,N){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let M=!0;for(let B=0;B<y.length;++B){const J=y[B];if(J&&!J.da&&J.capture==I){const Pe=J.listener,Dt=J.ha||J.src;J.fa&&Ie(u.i,J),M=Pe.call(Dt,N)!==!1&&M}}return M&&!N.defaultPrevented}function Qd(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(u,y||0)}function Fr(u){u.g=Qd(()=>{u.g=null,u.i&&(u.i=!1,Fr(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class eg extends D{constructor(y,I){super(),this.m=y,this.l=I,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ho(u){D.call(this),this.h=u,this.g={}}h(ho,D);var hn=[];function ps(u){F(u.g,function(y,I){this.g.hasOwnProperty(I)&&Wt(y)},u),u.g={}}ho.prototype.N=function(){ho.Z.N.call(this),ps(this)},ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ec=o.JSON.stringify,tg=o.JSON.parse,Sa=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Yd(){}function Tc(){}var ms={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ur(){R.call(this,"d")}h(Ur,R);function ba(){R.call(this,"c")}h(ba,R);var Sn={},Xd=null;function Aa(){return Xd=Xd||new ct}Sn.Ia="serverreachability";function Ic(u){R.call(this,Sn.Ia,u)}h(Ic,R);function Xs(u){const y=Aa();Mt(y,new Ic(y))}Sn.STAT_EVENT="statevent";function Jd(u,y){R.call(this,Sn.STAT_EVENT,u),this.stat=y}h(Jd,R);function Ct(u){const y=Aa();Mt(y,new Jd(y,u))}Sn.Ja="timingevent";function ur(u,y){R.call(this,Sn.Ja,u),this.size=y}h(ur,R);function fo(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},y)}function ve(){this.g=!0}ve.prototype.ua=function(){this.g=!1};function je(u,y,I,N,M,B){u.info(function(){if(u.g)if(B){var J="",Pe=B.split("&");for(let He=0;He<Pe.length;He++){var Dt=Pe[He].split("=");if(Dt.length>1){const Ut=Dt[0];Dt=Dt[1];const $r=Ut.split("_");J=$r.length>=2&&$r[1]=="type"?J+(Ut+"="+Dt+"&"):J+(Ut+"=redacted&")}}}else J=null;else J=B;return"XMLHTTP REQ ("+N+") [attempt "+M+"]: "+y+`
`+I+`
`+J})}function Ge(u,y,I,N,M,B,J){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+M+"]: "+y+`
`+I+`
`+B+" "+J})}function Ft(u,y,I,N){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+jr(u,I)+(N?" "+N:"")})}function Vn(u,y){u.info(function(){return"TIMEOUT: "+y})}ve.prototype.info=function(){};function jr(u,y){if(!u.g)return y;if(!y)return null;try{const B=JSON.parse(y);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var I=B[u];if(!(I.length<2)){var N=I[1];if(Array.isArray(N)&&!(N.length<1)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(let J=1;J<N.length;J++)N[J]=""}}}}return Ec(B)}catch{return y}}var tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},dr;function ng(){}h(ng,Yd),ng.prototype.g=function(){return new XMLHttpRequest},dr=new ng;function Sc(u){return encodeURIComponent(String(u))}function p2(u){var y=1;u=u.split(":");const I=[];for(;y>0&&u.length;)I.push(u.shift()),y--;return u.length&&I.push(u.join(":")),I}function Js(u,y,I,N){this.j=u,this.i=y,this.l=I,this.S=N||1,this.V=new ho(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new E0}function E0(){this.i=null,this.g="",this.h=!1}var T0={},rg={};function sg(u,y,I){u.M=1,u.A=eh(Br(y)),u.u=I,u.R=!0,I0(u,null)}function I0(u,y){u.F=Date.now(),Zd(u),u.B=Br(u.A);var I=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),V0(I.i,"t",N),u.C=0,I=u.j.L,u.h=new E0,u.g=eT(u.j,I?y:null,!u.u),u.P>0&&(u.O=new eg(c(u.Y,u,u.g),u.P)),y=u.V,I=u.g,N=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(hn[0]=M.toString()),M=hn);for(let B=0;B<M.length;B++){const J=Ce(I,M[B],N||y.handleEvent,!1,y.h||y);if(!J)break;y.g[J.key]=J}y=u.J?ne(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Xs(),je(u.i,u.v,u.B,u.l,u.S,u.u)}Js.prototype.ba=function(u){u=u.target;const y=this.O;y&&ti(u)==3?y.j():this.Y(u)},Js.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=ti(this.g),Dt=this.g.ya(),He=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||z0(this.g)))){this.K||Pe!=4||Dt==7||(Dt==8||He<=0?Xs(3):Xs(2)),ig(this);var y=this.g.ca();this.X=y;var I=m2(this);if(this.o=y==200,Ge(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var N,M=this.g;if((N=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(N)){var B=N;break t}}B=null}if(u=B)Ft(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,og(this,u);else{this.o=!1,this.m=3,Ct(12),po(this),bc(this);break e}}if(this.R){u=!0;let Ut;for(;!this.K&&this.C<I.length;)if(Ut=g2(this,I),Ut==rg){Pe==4&&(this.m=4,Ct(14),u=!1),Ft(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==T0){this.m=4,Ct(15),Ft(this.i,this.l,I,"[Invalid Chunk]"),u=!1;break}else Ft(this.i,this.l,Ut,null),og(this,Ut);if(S0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||I.length!=0||this.h.h||(this.m=1,Ct(16),u=!1),this.o=this.o&&u,!u)Ft(this.i,this.l,I,"[Invalid Chunked Response]"),po(this),bc(this);else if(I.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),pg(J),J.P=!0,Ct(11))}}else Ft(this.i,this.l,I,null),og(this,I);Pe==4&&po(this),this.o&&!this.K&&(Pe==4?Y0(this.j,this):(this.o=!1,Zd(this)))}else C2(this.g),y==400&&I.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),po(this),bc(this)}}}catch{}finally{}};function m2(u){if(!S0(u))return u.g.la();const y=z0(u.g);if(y==="")return"";let I="";const N=y.length,M=ti(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return po(u),bc(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<N;B++)u.h.h=!0,I+=u.h.i.decode(y[B],{stream:!(M&&B==N-1)});return y.length=0,u.h.g+=I,u.C=0,u.h.g}function S0(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function g2(u,y){var I=u.C,N=y.indexOf(`
`,I);return N==-1?rg:(I=Number(y.substring(I,N)),isNaN(I)?T0:(N+=1,N+I>y.length?rg:(y=y.slice(N,N+I),u.C=N+I,y)))}Js.prototype.cancel=function(){this.K=!0,po(this)};function Zd(u){u.T=Date.now()+u.H,b0(u,u.H)}function b0(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=fo(c(u.aa,u),y)}function ig(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Js.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Vn(this.i,this.B),this.M!=2&&(Xs(),Ct(17)),po(this),this.m=2,bc(this)):b0(this,this.T-u)};function bc(u){u.j.I==0||u.K||Y0(u.j,u)}function po(u){ig(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,ps(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function og(u,y){try{var I=u.j;if(I.I!=0&&(I.g==u||ag(I.h,u))){if(!u.L&&ag(I.h,u)&&I.I==3){try{var N=I.Ba.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var M=N;if(M[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<u.F)ih(I),rh(I);else break e;fg(I),Ct(18)}}else I.xa=M[1],0<I.xa-I.K&&M[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=fo(c(I.Va,I),6e3));P0(I.h)<=1&&I.ta&&(I.ta=void 0)}else go(I,11)}else if((u.L||I.g==u)&&ih(I),!k(y))for(M=I.Ba.g.parse(y),y=0;y<M.length;y++){let He=M[y];const Ut=He[0];if(!(Ut<=I.K))if(I.K=Ut,He=He[1],I.I==2)if(He[0]=="c"){I.M=He[1],I.ba=He[2];const $r=He[3];$r!=null&&(I.ka=$r,I.j.info("VER="+I.ka));const yo=He[4];yo!=null&&(I.za=yo,I.j.info("SVER="+I.za));const ni=He[5];ni!=null&&typeof ni=="number"&&ni>0&&(N=1.5*ni,I.O=N,I.j.info("backChannelRequestTimeoutMs_="+N)),N=I;const ri=u.g;if(ri){const ah=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ah){var B=N.h;B.g||ah.indexOf("spdy")==-1&&ah.indexOf("quic")==-1&&ah.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(lg(B,B.h),B.h=null))}if(N.G){const mg=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;mg&&(N.wa=mg,Ze(N.J,N.G,mg))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-u.F,I.j.info("Handshake RTT: "+I.T+"ms")),N=I;var J=u;if(N.na=Z0(N,N.L?N.ba:null,N.W),J.L){R0(N.h,J);var Pe=J,Dt=N.O;Dt&&(Pe.H=Dt),Pe.D&&(ig(Pe),Zd(Pe)),N.g=J}else G0(N);I.i.length>0&&sh(I)}else He[0]!="stop"&&He[0]!="close"||go(I,7);else I.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?go(I,7):hg(I):He[0]!="noop"&&I.l&&I.l.qa(He),I.A=0)}}Xs(4)}catch{}}var y2=class{constructor(u,y){this.g=u,this.map=y}};function A0(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function x0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function P0(u){return u.h?1:u.g?u.g.size:0}function ag(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function lg(u,y){u.g?u.g.add(y):u.h=y}function R0(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}A0.prototype.cancel=function(){if(this.i=C0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function C0(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const I of u.g.values())y=y.concat(I.G);return y}return m(u.i)}var D0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function v2(u,y){if(u){u=u.split("&");for(let I=0;I<u.length;I++){const N=u[I].indexOf("=");let M,B=null;N>=0?(M=u[I].substring(0,N),B=u[I].substring(N+1)):M=u[I],y(M,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Zs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof Zs?(this.l=u.l,Ac(this,u.j),this.o=u.o,this.g=u.g,xc(this,u.u),this.h=u.h,cg(this,M0(u.i)),this.m=u.m):u&&(y=String(u).match(D0))?(this.l=!1,Ac(this,y[1]||"",!0),this.o=Pc(y[2]||""),this.g=Pc(y[3]||"",!0),xc(this,y[4]),this.h=Pc(y[5]||"",!0),cg(this,y[6]||"",!0),this.m=Pc(y[7]||"")):(this.l=!1,this.i=new Cc(null,this.l))}Zs.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(Rc(y,k0,!0),":");var I=this.g;return(I||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Rc(y,k0,!0),"@"),u.push(Sc(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&u.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&u.push("/"),u.push(Rc(I,I.charAt(0)=="/"?E2:_2,!0))),(I=this.i.toString())&&u.push("?",I),(I=this.m)&&u.push("#",Rc(I,I2)),u.join("")},Zs.prototype.resolve=function(u){const y=Br(this);let I=!!u.j;I?Ac(y,u.j):I=!!u.o,I?y.o=u.o:I=!!u.g,I?y.g=u.g:I=u.u!=null;var N=u.h;if(I)xc(y,u.u);else if(I=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var M=y.h.lastIndexOf("/");M!=-1&&(N=y.h.slice(0,M+1)+N)}if(M=N,M==".."||M==".")N="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){N=M.lastIndexOf("/",0)==0,M=M.split("/");const B=[];for(let J=0;J<M.length;){const Pe=M[J++];Pe=="."?N&&J==M.length&&B.push(""):Pe==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),N&&J==M.length&&B.push("")):(B.push(Pe),N=!0)}N=B.join("/")}else N=M}return I?y.h=N:I=u.i.toString()!=="",I?cg(y,M0(u.i)):I=!!u.m,I&&(y.m=u.m),y};function Br(u){return new Zs(u)}function Ac(u,y,I){u.j=I?Pc(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function xc(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function cg(u,y,I){y instanceof Cc?(u.i=y,S2(u.i,u.l)):(I||(y=Rc(y,T2)),u.i=new Cc(y,u.l))}function Ze(u,y,I){u.i.set(y,I)}function eh(u){return Ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Pc(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rc(u,y,I){return typeof u=="string"?(u=encodeURI(u).replace(y,w2),I&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function w2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var k0=/[#\/\?@]/g,_2=/[#\?:]/g,E2=/[#\?]/g,T2=/[#\?@]/g,I2=/#/g;function Cc(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function mo(u){u.g||(u.g=new Map,u.h=0,u.i&&v2(u.i,function(y,I){u.add(decodeURIComponent(y.replace(/\+/g," ")),I)}))}t=Cc.prototype,t.add=function(u,y){mo(this),this.i=null,u=xa(this,u);let I=this.g.get(u);return I||this.g.set(u,I=[]),I.push(y),this.h+=1,this};function N0(u,y){mo(u),y=xa(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function O0(u,y){return mo(u),y=xa(u,y),u.g.has(y)}t.forEach=function(u,y){mo(this),this.g.forEach(function(I,N){I.forEach(function(M){u.call(y,M,N,this)},this)},this)};function L0(u,y){mo(u);let I=[];if(typeof y=="string")O0(u,y)&&(I=I.concat(u.g.get(xa(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)I=I.concat(u[y]);return I}t.set=function(u,y){return mo(this),this.i=null,u=xa(this,u),O0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},t.get=function(u,y){return u?(u=L0(this,u),u.length>0?String(u[0]):y):y};function V0(u,y,I){N0(u,y),I.length>0&&(u.i=null,u.g.set(xa(u,y),m(I)),u.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let N=0;N<y.length;N++){var I=y[N];const M=Sc(I);I=L0(this,I);for(let B=0;B<I.length;B++){let J=M;I[B]!==""&&(J+="="+Sc(I[B])),u.push(J)}}return this.i=u.join("&")};function M0(u){const y=new Cc;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function xa(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function S2(u,y){y&&!u.j&&(mo(u),u.i=null,u.g.forEach(function(I,N){const M=N.toLowerCase();N!=M&&(N0(this,N),V0(this,M,I))},u)),u.j=y}function b2(u,y){const I=new ve;if(o.Image){const N=new Image;N.onload=d(ei,I,"TestLoadImage: loaded",!0,y,N),N.onerror=d(ei,I,"TestLoadImage: error",!1,y,N),N.onabort=d(ei,I,"TestLoadImage: abort",!1,y,N),N.ontimeout=d(ei,I,"TestLoadImage: timeout",!1,y,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else y(!1)}function A2(u,y){const I=new ve,N=new AbortController,M=setTimeout(()=>{N.abort(),ei(I,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:N.signal}).then(B=>{clearTimeout(M),B.ok?ei(I,"TestPingServer: ok",!0,y):ei(I,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(M),ei(I,"TestPingServer: error",!1,y)})}function ei(u,y,I,N,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),N(I)}catch{}}function x2(){this.g=new Sa}function ug(u){this.i=u.Sb||null,this.h=u.ab||!1}h(ug,Yd),ug.prototype.g=function(){return new th(this.i,this.h)};function th(u,y){ct.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(th,ct),t=th.prototype,t.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,kc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,kc(this)),this.g&&(this.readyState=3,kc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;F0(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function F0(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Dc(this):kc(this),this.readyState==3&&F0(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Dc(this))},t.Na=function(u){this.g&&(this.response=u,Dc(this))},t.ga=function(){this.g&&Dc(this)};function Dc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,kc(u)}t.setRequestHeader=function(u,y){this.A.append(u,y)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var I=y.next();!I.done;)I=I.value,u.push(I[0]+": "+I[1]),I=y.next();return u.join(`\r
`)};function kc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(th.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function U0(u){let y="";return F(u,function(I,N){y+=N,y+=":",y+=I,y+=`\r
`}),y}function dg(u,y,I){e:{for(N in I){var N=!1;break e}N=!0}N||(I=U0(I),typeof u=="string"?I!=null&&Sc(I):Ze(u,y,I))}function mt(u){ct.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(mt,ct);var P2=/^https?$/i,R2=["POST","PUT"];t=mt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,y,I,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():dr.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(B){j0(this,B);return}if(u=I||"",I=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var M in N)I.set(M,N[M]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const B of N.keys())I.set(B,N.get(B));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(I.keys()).find(B=>B.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(R2,y,void 0)>=0)||N||M||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,J]of I)this.g.setRequestHeader(B,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){j0(this,B)}};function j0(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,B0(u),nh(u)}function B0(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),nh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nh(this,!0)),mt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?$0(this):this.Xa())},t.Xa=function(){$0(this)};function $0(u){if(u.h&&typeof i<"u"){if(u.v&&ti(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),ti(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var I;if(!(I=y)){var N;if(N=B===0){let J=String(u.D).match(D0)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),N=!P2.test(J?J.toLowerCase():"")}I=N}if(I)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var M=ti(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",B0(u)}}finally{nh(u)}}}}function nh(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const I=u.g;u.g=null,y||Mt(u,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ti(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),tg(y)}};function z0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function C2(u){const y={};u=(u.g&&ti(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(k(u[N]))continue;var I=p2(u[N]);const M=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const B=y[M]||[];y[M]=B,B.push(I)}q(y,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nc(u,y,I){return I&&I.internalChannelParams&&I.internalChannelParams[u]||y}function q0(u){this.za=0,this.i=[],this.j=new ve,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nc("baseRetryDelayMs",5e3,u),this.Za=Nc("retryDelaySeedMs",1e4,u),this.Ta=Nc("forwardChannelMaxRetries",2,u),this.va=Nc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new A0(u&&u.concurrentRequestLimit),this.Ba=new x2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=q0.prototype,t.ka=8,t.I=1,t.connect=function(u,y,I,N){Ct(0),this.W=u,this.H=y||{},I&&N!==void 0&&(this.H.OSID=I,this.H.OAID=N),this.F=this.X,this.J=Z0(this,null,this.W),sh(this)};function hg(u){if(W0(u),u.I==3){var y=u.V++,I=Br(u.J);if(Ze(I,"SID",u.M),Ze(I,"RID",y),Ze(I,"TYPE","terminate"),Oc(u,I),y=new Js(u,u.j,y),y.M=2,y.A=eh(Br(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=y.A,I=!0),I||(y.g=eT(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Zd(y)}J0(u)}function rh(u){u.g&&(pg(u),u.g.cancel(),u.g=null)}function W0(u){rh(u),u.v&&(o.clearTimeout(u.v),u.v=null),ih(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function sh(u){if(!x0(u.h)&&!u.m){u.m=!0;var y=u.Ea;C||T(),L||(C(),L=!0),S.add(y,u),u.D=0}}function D2(u,y){return P0(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=fo(c(u.Ea,u,y),X0(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Js(this,this.j,u);let B=this.o;if(this.U&&(B?(B=ne(B),re(B,this.U)):B=this.U),this.u!==null||this.R||(M.J=B,B=null),this.S)e:{for(var y=0,I=0;I<this.i.length;I++){t:{var N=this.i[I];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,y>4096){y=I;break e}if(y===4096||I===this.i.length-1){y=I+1;break e}}y=1e3}else y=1e3;y=K0(this,M,y),I=Br(this.J),Ze(I,"RID",u),Ze(I,"CVER",22),this.G&&Ze(I,"X-HTTP-Session-Id",this.G),Oc(this,I),B&&(this.R?y="headers="+Sc(U0(B))+"&"+y:this.u&&dg(I,this.u,B)),lg(this.h,M),this.Ra&&Ze(I,"TYPE","init"),this.S?(Ze(I,"$req",y),Ze(I,"SID","null"),M.U=!0,sg(M,I,null)):sg(M,I,y),this.I=2}}else this.I==3&&(u?H0(this,u):this.i.length==0||x0(this.h)||H0(this))};function H0(u,y){var I;y?I=y.l:I=u.V++;const N=Br(u.J);Ze(N,"SID",u.M),Ze(N,"RID",I),Ze(N,"AID",u.K),Oc(u,N),u.u&&u.o&&dg(N,u.u,u.o),I=new Js(u,u.j,I,u.D+1),u.u===null&&(I.J=u.o),y&&(u.i=y.G.concat(u.i)),y=K0(u,I,1e3),I.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),lg(u.h,I),sg(I,N,y)}function Oc(u,y){u.H&&F(u.H,function(I,N){Ze(y,N,I)}),u.l&&F({},function(I,N){Ze(y,N,I)})}function K0(u,y,I){I=Math.min(u.i.length,I);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Pe=-1;for(;;){const Dt=["count="+I];Pe==-1?I>0?(Pe=M[0].g,Dt.push("ofs="+Pe)):Pe=0:Dt.push("ofs="+Pe);let He=!0;for(let Ut=0;Ut<I;Ut++){var B=M[Ut].g;const $r=M[Ut].map;if(B-=Pe,B<0)Pe=Math.max(0,M[Ut].g-100),He=!1;else try{B="req"+B+"_"||"";try{var J=$r instanceof Map?$r:Object.entries($r);for(const[yo,ni]of J){let ri=ni;a(ni)&&(ri=Ec(ni)),Dt.push(B+yo+"="+encodeURIComponent(ri))}}catch(yo){throw Dt.push(B+"type="+encodeURIComponent("_badmap")),yo}}catch{N&&N($r)}}if(He){J=Dt.join("&");break e}}J=void 0}return u=u.i.splice(0,I),y.G=u,J}function G0(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;C||T(),L||(C(),L=!0),S.add(y,u),u.A=0}}function fg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=fo(c(u.Da,u),X0(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Q0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=fo(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),rh(this),Q0(this))};function pg(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Q0(u){u.g=new Js(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Br(u.na);Ze(y,"RID","rpc"),Ze(y,"SID",u.M),Ze(y,"AID",u.K),Ze(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ze(y,"TO",u.ia),Ze(y,"TYPE","xmlhttp"),Oc(u,y),u.u&&u.o&&dg(y,u.u,u.o),u.O&&(u.g.H=u.O);var I=u.g;u=u.ba,I.M=1,I.A=eh(Br(y)),I.u=null,I.R=!0,I0(I,u)}t.Va=function(){this.C!=null&&(this.C=null,rh(this),fg(this),Ct(19))};function ih(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Y0(u,y){var I=null;if(u.g==y){ih(u),pg(u),u.g=null;var N=2}else if(ag(u.h,y))I=y.G,R0(u.h,y),N=1;else return;if(u.I!=0){if(y.o)if(N==1){I=y.u?y.u.length:0,y=Date.now()-y.F;var M=u.D;N=Aa(),Mt(N,new ur(N,I)),sh(u)}else G0(u);else if(M=y.m,M==3||M==0&&y.X>0||!(N==1&&D2(u,y)||N==2&&fg(u)))switch(I&&I.length>0&&(y=u.h,y.i=y.i.concat(I)),M){case 1:go(u,5);break;case 4:go(u,10);break;case 3:go(u,6);break;default:go(u,2)}}}function X0(u,y){let I=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(I*=2),I*y}function go(u,y){if(u.j.info("Error code "+y),y==2){var I=c(u.bb,u),N=u.Ua;const M=!N;N=new Zs(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ac(N,"https"),eh(N),M?b2(N.toString(),I):A2(N.toString(),I)}else Ct(2);u.I=0,u.l&&u.l.pa(y),J0(u),W0(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function J0(u){if(u.I=0,u.ja=[],u.l){const y=C0(u.h);(y.length!=0||u.i.length!=0)&&(E(u.ja,y),E(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Z0(u,y,I){var N=I instanceof Zs?Br(I):new Zs(I);if(N.g!="")y&&(N.g=y+"."+N.g),xc(N,N.u);else{var M=o.location;N=M.protocol,y=y?y+"."+M.hostname:M.hostname,M=+M.port;const B=new Zs(null);N&&Ac(B,N),y&&(B.g=y),M&&xc(B,M),I&&(B.h=I),N=B}return I=u.G,y=u.wa,I&&y&&Ze(N,I,y),Ze(N,"VER",u.ka),Oc(u,N),N}function eT(u,y,I){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new mt(new ug({ab:I})):new mt(u.ma),y.Fa(u.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tT(){}t=tT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oh(){}oh.prototype.g=function(u,y){return new Mn(u,y)};function Mn(u,y){ct.call(this),this.g=new q0(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!k(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Pa(this)}h(Mn,ct),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){hg(this.g)},Mn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var I={};I.__data__=u,u=I}else this.v&&(I={},I.__data__=Ec(u),u=I);y.i.push(new y2(y.Ya++,u)),y.I==3&&sh(y)},Mn.prototype.N=function(){this.g.l=null,delete this.j,hg(this.g),delete this.g,Mn.Z.N.call(this)};function nT(u){Ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const I in y){u=I;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}h(nT,Ur);function rT(){ba.call(this),this.status=1}h(rT,ba);function Pa(u){this.g=u}h(Pa,tT),Pa.prototype.ra=function(){Mt(this.g,"a")},Pa.prototype.qa=function(u){Mt(this.g,new nT(u))},Pa.prototype.pa=function(u){Mt(this.g,new rT)},Pa.prototype.oa=function(){Mt(this.g,"b")},oh.prototype.createWebChannel=oh.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,dD=function(){return new oh},uD=function(){return Aa()},cD=Sn,Yv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,ff=tr,bn.COMPLETE="complete",lD=bn,Tc.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",ct.prototype.listen=ct.prototype.J,iu=Tc,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,aD=mt}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const OS="@firebase/firestore",LS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new vm("@firebase/firestore");function ja(){return Qi.logLevel}function hD(t){Qi.setLogLevel(t)}function K(t,...e){if(Qi.logLevel<=ke.DEBUG){const n=e.map(lE);Qi.debug(`Firestore (${dc}): ${t}`,...n)}}function It(t,...e){if(Qi.logLevel<=ke.ERROR){const n=e.map(lE);Qi.error(`Firestore (${dc}): ${t}`,...n)}}function Yi(t,...e){if(Qi.logLevel<=ke.WARN){const n=e.map(lE);Qi.warn(`Firestore (${dc}): ${t}`,...n)}}function lE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fD(t,r,n)}function fD(t,e,n){let r=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw It(r),new Error(r)}function he(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||fD(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class O5{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ar,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new N5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class L5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new L5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){he(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new VS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new VS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=F5(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Xv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ay(s)===ay(i)?Te(s,i):ay(s)?1:-1}return Te(t.length,e.length)}const U5=55296,j5=57343;function ay(t){const e=t.charCodeAt(0);return e>=U5&&e<=j5}function Ol(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function mD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="__name__";class Wr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Wr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Te(e.length,n.length)}static compareSegments(e,n){const r=Wr.isNumericId(e),s=Wr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Wr.extractNumericId(e).compare(Wr.extractNumericId(n)):Xv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bi.fromString(e.substring(4,e.length-2))}}class Ue extends Wr{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const B5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Wr{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return B5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MS}static keyField(){return new at([MS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ue.fromString(e))}static fromName(e){return new ee(Ue.fromString(e).popFirst(5))}static empty(){return new ee(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e,n){if(!n)throw new Y($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yD(t,e,n,r){if(e===!0&&r===!0)throw new Y($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FS(t){if(!ee.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function US(t){if(ee.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tm(t);throw new Y($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $5(t,e){if(e<=0)throw new Y($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Od(t,e){if(!vD(t))throw new Y($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=-62135596800,BS=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*BS);return new Be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jS)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BS}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Od(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Rt("string",Be._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new Be(0,0))}static max(){return new fe(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;class mp{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Jv(t){return t.fields.find(e=>e.kind===2)}function To(t){return t.fields.filter(e=>e.kind!==2)}mp.UNKNOWN_ID=-1;class pf{constructor(e,n){this.fieldPath=e,this.kind=n}}class ad{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ad(0,Xn.min())}}function wD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Xn(s,ee.empty(),e)}function _D(t){return new Xn(t.readTime,t.key,Ll)}class Xn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xn(fe.min(),ee.empty(),Ll)}static max(){return new Xn(fe.max(),ee.empty(),Ll)}}function cE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==ED)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="SimpleDb";class Im{static open(e,n,r,s){try{return new Im(n,e.transaction(s,r))}catch(i){throw new Tu(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ar,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Tu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=uE(r.target.error);this.S.reject(new Tu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(K(Un,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new q5(n)}}class $i{static delete(e){return K(Un,"Removing database:",e),bo(vC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!tE())return!1;if($i.F())return!0;const e=Jt(),n=$i.M(e),r=0<n&&n<10,s=ID(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,$i.M(Jt())===12.2&&It("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(K(Un,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Tu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Y($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Tu(e,o))},s.onupgradeneeded=i=>{K(Un,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{K(Un,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Im.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(K(Un,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ID(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class z5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return bo(this.U.delete())}}class Tu extends Y{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function lo(t){return t.name==="IndexedDbTransactionError"}class q5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(K(Un,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(K(Un,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bo(r)}add(e){return K(Un,"ADD",this.store.name,e,e),bo(this.store.add(e))}get(e){return bo(this.store.get(e)).next(n=>(n===void 0&&(n=null),K(Un,"GET",this.store.name,e,n),n))}delete(e){return K(Un,"DELETE",this.store.name,e),bo(this.store.delete(e))}count(){return K(Un,"COUNT",this.store.name),bo(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){K(Un,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=uE(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new z5(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bo(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=uE(r.target.error);n(s)}})}let $S=!1;function uE(t){const e=$i.M(Jt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $S||($S=!0,setTimeout(()=>{throw r},0)),r}}return t}const Iu="IndexBackfiller";class W5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){K(Iu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();K(Iu,`Documents written: ${n}`)}catch(n){lo(n)?K(Iu,"Ignoring IndexedDB error during index backfill: ",n):await ao(n)}await this.re(6e4)})}}class H5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return K(Iu,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(K(Iu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=_D(i);cE(o,r)>0&&(r=o)}),new Xn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=-1;function Sm(t){return t==null}function ld(t){return t===0&&1/t==-1/0}function SD(t){return typeof t=="number"&&Number.isInteger(t)&&!ld(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="";function un(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zS(e)),e=K5(t.get(n),e);return zS(e)}function K5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case gp:n+="";break;default:n+=i}}return n}function zS(t){return t+gp+""}function es(t){const e=t.length;if(he(e>=2,64408,{path:t}),e===2)return he(t.charAt(0)===gp&&t.charAt(1)==="",56145,{path:t}),Ue.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(gp,i);switch((o<0||o>n)&&ie(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ie(61167,{path:t})}i=o+2}return new Ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="remoteDocuments",Ld="owner",Ca="owner",cd="mutationQueues",G5="userId",wr="mutations",qS="batchId",Oo="userMutationsIndex",WS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e){return[t,un(e)]}function bD(t,e,n){return[t,un(e),n]}const Q5={},Vl="documentMutations",yp="remoteDocumentsV14",Y5=["prefixPath","collectionGroup","readTime","documentId"],gf="documentKeyIndex",X5=["prefixPath","collectionGroup","documentId"],AD="collectionGroupIndex",J5=["collectionGroup","readTime","prefixPath","documentId"],ud="remoteDocumentGlobal",Zv="remoteDocumentGlobalKey",Ml="targets",xD="queryTargetsIndex",Z5=["canonicalId","targetId"],Fl="targetDocuments",e9=["targetId","path"],dE="documentTargetsIndex",t9=["path","targetId"],vp="targetGlobalKey",Zo="targetGlobal",dd="collectionParents",n9=["collectionId","parent"],Ul="clientMetadata",r9="clientId",bm="bundles",s9="bundleId",Am="namedQueries",i9="name",hE="indexConfiguration",o9="indexId",ew="collectionGroupIndex",a9="collectionGroup",Su="indexState",l9=["indexId","uid"],PD="sequenceNumberIndex",c9=["uid","sequenceNumber"],bu="indexEntries",u9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RD="documentKeyIndex",d9=["indexId","uid","orderedDocumentKey"],xm="documentOverlays",h9=["userId","collectionPath","documentId"],tw="collectionPathOverlayIndex",f9=["userId","collectionPath","largestBatchId"],CD="collectionGroupOverlayIndex",p9=["userId","collectionGroup","largestBatchId"],fE="globals",m9="name",DD=[cd,wr,Vl,Io,Ml,Ld,Zo,Fl,Ul,ud,dd,bm,Am],g9=[...DD,xm],kD=[cd,wr,Vl,yp,Ml,Ld,Zo,Fl,Ul,ud,dd,bm,Am,xm],ND=kD,pE=[...ND,hE,Su,bu],y9=pE,OD=[...pE,fE],v9=OD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw extends TD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Lt(t,e){const n=oe(t);return $i.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=s??Kt.EMPTY,this.right=i??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KS(this.data.getIterator())}getIteratorFrom(e){return new KS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class KS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Da(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new qe(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new VD("Invalid base64 string: "+i):i}}(e);return new wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const w9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(t){if(he(!!t,39018),typeof t=="string"){let e=0;const n=w9.exec(t);if(he(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bs(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="server_timestamp",FD="__type__",UD="__previous_value__",jD="__local_write_time__";function mE(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[FD])==null?void 0:r.stringValue)===MD}function Pm(t){const e=t.mapValue.fields[UD];return mE(e)?Pm(e):e}function hd(t){const e=js(t.mapValue.fields[jD].timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const wp="(default)";class Xi{constructor(e,n){this.projectId=e,this.database=n||wp}static empty(){return new Xi("","")}get isDefaultDatabase(){return this.database===wp}isEqual(e){return e instanceof Xi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__type__",BD="__max__",Pi={mapValue:{fields:{__type__:{stringValue:BD}}}},yE="__vector__",jl="value",yf={nullValue:"NULL_VALUE"};function Ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mE(t)?4:$D(t)?9007199254740991:Rm(t)?10:11:ie(28295,{value:t})}function us(t,e){if(t===e)return!0;const n=Ji(t);if(n!==Ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hd(t).isEqual(hd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=js(s.timestampValue),a=js(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Bs(s.bytesValue).isEqual(Bs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return it(s.geoPointValue.latitude)===it(i.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return it(s.integerValue)===it(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=it(s.doubleValue),a=it(i.doubleValue);return o===a?ld(o)===ld(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ol(t.arrayValue.values||[],e.arrayValue.values||[],us);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(HS(o)!==HS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!us(o[l],a[l])))return!1;return!0}(t,e);default:return ie(52216,{left:t})}}function fd(t,e){return(t.values||[]).find(n=>us(n,e))!==void 0}function Zi(t,e){if(t===e)return 0;const n=Ji(t),r=Ji(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=it(i.integerValue||i.doubleValue),l=it(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return GS(t.timestampValue,e.timestampValue);case 4:return GS(hd(t),hd(e));case 5:return Xv(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Bs(i),l=Bs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Te(a[c],l[c]);if(d!==0)return d}return Te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Te(it(i.latitude),it(o.latitude));return a!==0?a:Te(it(i.longitude),it(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return QS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,m,E,g;const a=i.fields||{},l=o.fields||{},c=(p=a[jl])==null?void 0:p.arrayValue,d=(m=l[jl])==null?void 0:m.arrayValue,h=Te(((E=c==null?void 0:c.values)==null?void 0:E.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:QS(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Pi.mapValue&&o===Pi.mapValue)return 0;if(i===Pi.mapValue)return 1;if(o===Pi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Xv(l[h],d[h]);if(p!==0)return p;const m=Zi(a[l[h]],c[d[h]]);if(m!==0)return m}return Te(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie(23264,{he:n})}}function GS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=js(t),r=js(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function QS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zi(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function Bl(t){return rw(t)}function rw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=js(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${rw(n.fields[o])}`;return s+"}"}(t.mapValue):ie(61005,{value:t})}function vf(t){switch(Ji(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pm(t);return e?16+vf(e):16;case 5:return 2*t.stringValue.length;case 6:return Bs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+vf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return co(r.fields,(i,o)=>{s+=i.length+vf(o)}),s}(t.mapValue);default:throw ie(13486,{value:t})}}function pd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sw(t){return!!t&&"integerValue"in t}function md(t){return!!t&&"arrayValue"in t}function YS(t){return!!t&&"nullValue"in t}function XS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wf(t){return!!t&&"mapValue"in t}function Rm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[gE])==null?void 0:r.stringValue)===yE}function Au(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Au(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Au(t.arrayValue.values[n]);return e}return{...t}}function $D(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BD}const zD={mapValue:{fields:{[gE]:{stringValue:yE},[jl]:{arrayValue:{}}}}};function E9(t){return"nullValue"in t?yf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?pd(Xi.empty(),ee.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Rm(t)?zD:{mapValue:{}}:ie(35942,{value:t})}function T9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?pd(Xi.empty(),ee.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?zD:"mapValue"in t?Rm(t)?{mapValue:{}}:Pi:ie(61959,{value:t})}function JS(t,e){const n=Zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ZS(t,e){const n=Zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Au(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){co(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ln(Au(this.value))}}function qD(t){const e=[];return co(t.fields,(n,r)=>{const s=new at([n]);if(wf(r)){const i=qD(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vt(e,0,fe.min(),fe.min(),fe.min(),ln.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,fe.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,fe.min(),fe.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,fe.min(),fe.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.position=e,this.inclusive=n}}function eb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Zi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function tb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!us(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n="asc"){this.field=e,this.dir=n}}function I9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{}class Oe extends WD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S9(e,n,r):n==="array-contains"?new x9(e,r):n==="in"?new XD(e,r):n==="not-in"?new P9(e,r):n==="array-contains-any"?new R9(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b9(e,r):new A9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zi(n,this.value)):n!==null&&Ji(this.value)===Ji(n)&&this.matchesComparison(Zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $e extends WD{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $e(e,n)}matches(e){return zl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zl(t){return t.op==="and"}function iw(t){return t.op==="or"}function vE(t){return HD(t)&&zl(t)}function HD(t){for(const e of t.filters)if(e instanceof $e)return!1;return!0}function ow(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Bl(t.value);if(vE(t))return t.filters.map(e=>ow(e)).join(",");{const e=t.filters.map(n=>ow(n)).join(",");return`${t.op}(${e})`}}function KD(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&us(r.value,s.value)}(t,e):t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&KD(o,s.filters[a]),!0):!1}(t,e):void ie(19439)}function GD(t,e){const n=t.filters.concat(e);return $e.create(n,t.op)}function QD(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${Bl(n.value)}`}(t):t instanceof $e?function(n){return n.op.toString()+" {"+n.getFilters().map(QD).join(" ,")+"}"}(t):"Filter"}class S9 extends Oe{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class b9 extends Oe{constructor(e,n){super(e,"in",n),this.keys=YD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A9 extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=YD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YD(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class x9 extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return md(n)&&fd(n.arrayValue,this.value)}}class XD extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fd(this.value.arrayValue,n)}}class P9 extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fd(this.value.arrayValue,n)}}class R9 extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!md(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function aw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new C9(t,e,n,r,s,i,o)}function ca(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ow(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bl(r)).join(",")),e.Te=n}return e.Te}function Vd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tb(t.startAt,e.startAt)&&tb(t.endAt,e.endAt)}function _p(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ep(t,e){return t.filters.filter(n=>n instanceof Oe&&n.field.isEqual(e))}function nb(t,e,n){let r=yf,s=!0;for(const i of Ep(t,e)){let o=yf,a=!0;switch(i.op){case"<":case"<=":o=E9(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=yf}JS({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];JS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function rb(t,e,n){let r=Pi,s=!0;for(const i of Ep(t,e)){let o=Pi,a=!0;switch(i.op){case">=":case">":o=T9(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Pi}ZS({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];ZS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JD(t,e,n,r,s,i,o,a){return new hc(t,e,n,r,s,i,o,a)}function Md(t){return new hc(t)}function sb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZD(t){return t.collectionGroup!==null}function xu(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qe(at.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new gd(i,r))}),n.has(at.keyField().canonicalString())||e.Ie.push(new gd(at.keyField(),r))}return e.Ie}function Qn(t){const e=oe(t);return e.Ee||(e.Ee=D9(e,xu(t))),e.Ee}function D9(t,e){if(t.limitType==="F")return aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new gd(s.field,i)});const n=t.endAt?new $l(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $l(t.startAt.position,t.startAt.inclusive):null;return aw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lw(t,e){const n=t.filters.concat([e]);return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tp(t,e,n){return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cm(t,e){return Vd(Qn(t),Qn(e))&&t.limitType===e.limitType}function ek(t){return`${ca(Qn(t))}|lt:${t.limitType}`}function Ba(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>QD(s)).join(", ")}]`),Sm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Bl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Bl(s)).join(",")),`Target(${r})`}(Qn(t))}; limitType=${t.limitType})`}function Fd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of xu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=eb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,xu(r),s)||r.endAt&&!function(o,a,l){const c=eb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,xu(r),s))}(t,e)}function tk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nk(t){return(e,n)=>{let r=!1;for(const s of xu(t)){const i=k9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function k9(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Zi(l,c):ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return LD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=new Xe(ee.comparator);function qn(){return N9}const rk=new Xe(ee.comparator);function ou(...t){let e=rk;for(const n of t)e=e.insert(n.key,n);return e}function sk(t){let e=rk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return Pu()}function ik(){return Pu()}function Pu(){return new Ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const O9=new Xe(ee.comparator),L9=new qe(ee.comparator);function Re(...t){let e=L9;for(const n of t)e=e.add(n);return e}const V9=new qe(Te);function wE(){return V9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(e)?"-0":e}}function ok(t){return{integerValue:""+t}}function M9(t,e){return SD(e)?ok(e):_E(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this._=void 0}}function F9(t,e,n){return t instanceof ql?function(s,i){const o={fields:{[FD]:{stringValue:MD},[jD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&mE(i)&&(i=Pm(i)),i&&(o.fields[UD]=i),{mapValue:o}}(n,e):t instanceof ua?lk(t,e):t instanceof Wl?ck(t,e):function(s,i){const o=ak(s,i),a=ib(o)+ib(s.Ae);return sw(o)&&sw(s.Ae)?ok(a):_E(s.serializer,a)}(t,e)}function U9(t,e,n){return t instanceof ua?lk(t,e):t instanceof Wl?ck(t,e):n}function ak(t,e){return t instanceof yd?function(r){return sw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ql extends Dm{}class ua extends Dm{constructor(e){super(),this.elements=e}}function lk(t,e){const n=uk(e);for(const r of t.elements)n.some(s=>us(s,r))||n.push(r);return{arrayValue:{values:n}}}class Wl extends Dm{constructor(e){super(),this.elements=e}}function ck(t,e){let n=uk(e);for(const r of t.elements)n=n.filter(s=>!us(s,r));return{arrayValue:{values:n}}}class yd extends Dm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ib(t){return it(t.integerValue||t.doubleValue)}function uk(t){return md(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.field=e,this.transform=n}}function j9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ua&&s instanceof ua||r instanceof Wl&&s instanceof Wl?Ol(r.elements,s.elements,us):r instanceof yd&&s instanceof yd?us(r.Ae,s.Ae):r instanceof ql&&s instanceof ql}(t.transform,e.transform)}class B9{constructor(e,n){this.version=e,this.transformResults=n}}class cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _f(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class km{}function dk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nm(t.key,cn.none()):new fc(t.key,t.data,cn.none());{const n=t.data,r=ln.empty();let s=new qe(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gs(t.key,r,new Dn(s.toArray()),cn.none())}}function $9(t,e,n){t instanceof fc?function(s,i,o){const a=s.value.clone(),l=ab(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Gs?function(s,i,o){if(!_f(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ab(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(hk(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ru(t,e,n,r){return t instanceof fc?function(i,o,a,l){if(!_f(i.precondition,o))return a;const c=i.value.clone(),d=lb(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gs?function(i,o,a,l){if(!_f(i.precondition,o))return a;const c=lb(i.fieldTransforms,l,o),d=o.data;return d.setAll(hk(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return _f(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function z9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ak(r.transform,s||null);i!=null&&(n===null&&(n=ln.empty()),n.set(r.field,i))}return n||null}function ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ol(r,s,(i,o)=>j9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fc extends km{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gs extends km{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function hk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ab(t,e,n){const r=new Map;he(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,U9(o,a,n[s]))}return r}function lb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,F9(i,o,e))}return r}class Nm extends km{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fk extends km{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&$9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ik();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=dk(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,(n,r)=>ob(n,r))&&Ol(this.baseMutations,e.baseMutations,(n,r)=>ob(n,r))}}class IE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return O9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new IE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Me;function W9(t){switch(t){case $.OK:return ie(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function pk(t){if(t===void 0)return It("GRPC error has no .code"),$.UNKNOWN;switch(t){case xt.OK:return $.OK;case xt.CANCELLED:return $.CANCELLED;case xt.UNKNOWN:return $.UNKNOWN;case xt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case xt.INTERNAL:return $.INTERNAL;case xt.UNAVAILABLE:return $.UNAVAILABLE;case xt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case xt.NOT_FOUND:return $.NOT_FOUND;case xt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case xt.ABORTED:return $.ABORTED;case xt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case xt.DATA_LOSS:return $.DATA_LOSS;default:return ie(39323,{code:t})}}(Me=xt||(xt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=new Bi([4294967295,4294967295],0);function cb(t){const e=H9().encode(t),n=new oD;return n.update(e),new Uint8Array(n.digest())}function ub(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bi([n,r],0),new Bi([s,i],0)]}class bE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new au(`Invalid padding: ${n}`);if(r<0)throw new au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new au(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Bi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Bi.fromNumber(r)));return s.compare(K9)===1&&(s=new Bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cb(e),[r,s]=ub(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new bE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=cb(e),[r,s]=ub(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,jd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ud(fe.min(),s,new Xe(Te),qn(),Re())}}class jd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jd(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class mk{constructor(e,n){this.targetId=e,this.Ce=n}}class gk{constructor(e,n,r=wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class db{constructor(){this.ve=0,this.Fe=hb(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),r=Re();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}}),new jd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=hb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class G9{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Vh(),this.He=Vh(),this.Ye=new Xe(Te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(_p(i))if(r===0){const o=new ee(i.path);this.et(n,o,vt.newNoDocument(o,fe.min()))}else he(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Bs(r).toUint8Array()}catch(l){if(l instanceof VD)return Yi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new bE(o,s,i)}catch(l){return Yi(l instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&_p(a.target)){const l=new ee(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,vt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Re();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Ud(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Vh(),this.He=Vh(),this.Ye=new Xe(Te),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new db,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(Te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(Te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new db),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vh(){return new Xe(ee.comparator)}function hb(){return new Xe(ee.comparator)}const Q9={asc:"ASCENDING",desc:"DESCENDING"},Y9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X9={and:"AND",or:"OR"};class J9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cw(t,e){return t.useProto3Json||Sm(e)?e:{value:e}}function Hl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z9(t,e){return Hl(t,e.toTimestamp())}function wn(t){return he(!!t,49232),fe.fromTimestamp(function(n){const r=js(n);return new Be(r.seconds,r.nanos)}(t))}function AE(t,e){return uw(t,e).canonicalString()}function uw(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vk(t){const e=Ue.fromString(t);return he(xk(e),10190,{key:e.toString()}),e}function Ip(t,e){return AE(t.databaseId,e.path)}function ea(t,e){const n=vk(e);if(n.get(1)!==t.databaseId.projectId)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(Ek(n))}function wk(t,e){return AE(t.databaseId,e)}function _k(t){const e=vk(t);return e.length===4?Ue.emptyPath():Ek(e)}function dw(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ek(t){return he(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fb(t,e,n){return{name:Ip(t,e),fields:n.value.mapValue.fields}}function ez(t,e,n){const r=ea(t,e.name),s=wn(e.updateTime),i=e.createTime?wn(e.createTime):fe.min(),o=new ln({mapValue:{fields:e.fields}}),a=vt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function tz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(he(d===void 0||typeof d=="string",58123),wt.fromBase64String(d||"")):(he(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?$.UNKNOWN:pk(c.code);return new Y(d,c.message||"")}(o);n=new gk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ea(t,r.document.name),i=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):fe.min(),a=new ln({mapValue:{fields:r.document.fields}}),l=vt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ef(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ea(t,r.document),i=r.readTime?wn(r.readTime):fe.min(),o=vt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ef([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ea(t,r.document),i=r.removedTargetIds||[];n=new Ef([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new q9(s,i),a=r.targetId;n=new mk(a,o)}}return n}function Sp(t,e){let n;if(e instanceof fc)n={update:fb(t,e.key,e.value)};else if(e instanceof Nm)n={delete:Ip(t,e.key)};else if(e instanceof Gs)n={update:fb(t,e.key,e.data),updateMask:az(e.fieldMask)};else{if(!(e instanceof fk))return ie(16599,{Vt:e.type});n={verify:Ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ql)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Z9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)}(t,e.precondition)),n}function hw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?cn.updateTime(wn(i.updateTime)):i.exists!==void 0?cn.exists(i.exists):cn.none()}(e.currentDocument):cn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)he(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new ql;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ua(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Wl(d)}else"increment"in a?l=new yd(o,a.increment):ie(16584,{proto:a});const c=at.fromServerFormat(a.fieldPath);return new EE(c,l)}(t,s)):[];if(e.update){e.update.name;const s=ea(t,e.update.name),i=new ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Dn(c.map(d=>at.fromServerFormat(d)))}(e.updateMask);return new Gs(s,i,o,n,r)}return new fc(s,i,n,r)}if(e.delete){const s=ea(t,e.delete);return new Nm(s,n)}if(e.verify){const s=ea(t,e.verify);return new fk(s,n)}return ie(1463,{proto:e})}function nz(t,e){return t&&t.length>0?(he(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?wn(s.updateTime):wn(i);return o.isEqual(fe.min())&&(o=wn(i)),new B9(o,s.transformResults||[])}(n,e))):[]}function Tk(t,e){return{documents:[wk(t,e.path)]}}function Ik(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wk(t,s);const i=function(c){if(c.length!==0)return Ak($e.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:$a(p.field),direction:sz(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=cw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function Sk(t){let e=_k(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=bk(h);return p instanceof $e&&vE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(E){return new gd(za(E.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Sm(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new $l(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new $l(m,p)}(n.endAt)),JD(e,s,o,i,a,"F",l,c)}function rz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=za(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=za(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=za(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=za(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(za(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $e.create(n.compositeFilter.filters.map(r=>bk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}}(n.compositeFilter.op))}(t):ie(30097,{filter:t})}function sz(t){return Q9[t]}function iz(t){return Y9[t]}function oz(t){return X9[t]}function $a(t){return{fieldPath:t.canonicalString()}}function za(t){return at.fromServerFormat(t.fieldPath)}function Ak(t){return t instanceof Oe?function(n){if(n.op==="=="){if(XS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(YS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(YS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:iz(n.op),value:n.value}}}(t):t instanceof $e?function(n){const r=n.getFilters().map(s=>Ak(s));return r.length===1?r[0]:{compositeFilter:{op:oz(n.op),filters:r}}}(t):ie(54877,{filter:t})}function az(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,i=fe.min(),o=fe.min(),a=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.yt=e}}function lz(t,e){let n;if(e.document)n=ez(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),s=ha(e.noDocument.readTime);n=vt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie(56709);{const r=ee.fromSegments(e.unknownDocument.path),s=ha(e.unknownDocument.version);n=vt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Be(s[0],s[1]);return fe.fromTimestamp(i)}(e.readTime)),n}function pb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Ip(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Hl(i,o.version.toTimestamp()),createTime:Hl(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:da(e.version)};else{if(!e.isUnknownDocument())return ie(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:da(e.version)}}return r}function bp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function da(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ha(t){const e=new Be(t.seconds,t.nanoseconds);return fe.fromTimestamp(e)}function Ao(t,e){const n=(e.baseMutations||[]).map(i=>hw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>hw(t.yt,i)),s=Be.fromMillis(e.localWriteTimeMs);return new TE(e.batchId,s,n,r)}function lu(t){const e=ha(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ha(t.lastLimboFreeSnapshotVersion):fe.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return he(o===1,1966,{count:o}),Qn(Md(_k(i.documents[0])))}(t.query):function(i){return Qn(Sk(i))}(t.query),new As(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wt.fromBase64String(t.resumeToken))}function Rk(t,e){const n=da(e.snapshotVersion),r=da(e.lastLimboFreeSnapshotVersion);let s;s=_p(e.target)?Tk(t.yt,e.target):Ik(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ca(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ck(t){const e=Sk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tp(e,e.limit,"L"):e}function ly(t,e){return new SE(e.largestBatchId,hw(t.yt,e.overlayMutation))}function mb(t,e){const n=e.path.lastSegment();return[t,un(e.path.popLast()),n]}function gb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:da(r.readTime),documentKey:un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{getBundleMetadata(e,n){return yb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:ha(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return yb(e).put(function(s){return{bundleId:s.id,createTime:da(wn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return vb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Ck(i.bundledQuery),readTime:ha(i.readTime)}}(r)})}saveNamedQuery(e,n){return vb(e).put(function(s){return{name:s.name,readTime:da(wn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function yb(t){return Lt(t,bm)}function vb(t){return Lt(t,Am)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Om(e,r)}getOverlay(e,n){return Wc(e).get(mb(this.userId,n)).next(r=>r?ly(this.serializer,r):null)}getOverlays(e,n){const r=ts();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new SE(n,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(un(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Wc(e).Z(tw,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=ts(),i=un(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Wc(e).J(tw,o).next(a=>{for(const l of a){const c=ly(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=ts();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Wc(e).ee({index:CD,range:a},(l,c,d)=>{const h=ly(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return Wc(e).put(function(s,i,o){const[a,l,c]=mb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Wc(t){return Lt(t,xm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{bt(e){return Lt(e,fE)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(it(e.integerValue));else if("doubleValue"in e){const r=it(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ld(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=js(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Bs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?$D(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Rm(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ie(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=jl,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(it(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ee.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}xo.Kt=new xo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=255;function dz(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function wb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=dz(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class hz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=wb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=wb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(ka),this.sn(255)}_n(){this.an(ka),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ka?(this.sn(ka),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ka?(this.an(ka),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class fz{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class pz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hc{constructor(){this.cn=new hz,this.ln=new fz(this.cn),this.hn=new pz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Po(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Tf(this.En),directionalValue:Tf(this.dn),orderedDocumentKey:Tf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function li(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=_b(t.En,e.En),n!==0?n:(n=_b(t.dn,e.dn),n!==0?n:ee.comparator(t.In,e.In)))}function _b(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Tf(t){return SC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function Eb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class Tb{constructor(e){this.mn=new qe((n,r)=>at.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(he(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Jv(e);if(n!==void 0&&!this.wn(n))return!1;const r=To(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new qe(at.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new pf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new pf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new pf(r.field,r.dir==="asc"?0:1)));return new mp(mp.UNKNOWN_ID,this.collectionId,n,ad.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){var n,r;if(he(t instanceof Oe||t instanceof $e,20012),t instanceof Oe){if(t instanceof XD){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>Oe.create(t.field,"==",i)))||[];return $e.create(s,"or")}return t}const e=t.filters.map(s=>Dk(s));return $e.create(e,t.op)}function mz(t){if(t.getFilters().length===0)return[];const e=mw(Dk(t));return he(kk(e),7391),fw(e)||pw(e)?[e]:e.getFilters()}function fw(t){return t instanceof Oe}function pw(t){return t instanceof $e&&vE(t)}function kk(t){return fw(t)||pw(t)||function(n){if(n instanceof $e&&iw(n)){for(const r of n.getFilters())if(!fw(r)&&!pw(r))return!1;return!0}return!1}(t)}function mw(t){if(he(t instanceof Oe||t instanceof $e,34018),t instanceof Oe)return t;if(t.filters.length===1)return mw(t.filters[0]);const e=t.filters.map(r=>mw(r));let n=$e.create(e,t.op);return n=Ap(n),kk(n)?n:(he(n instanceof $e,64498),he(zl(n),40251),he(n.filters.length>1,57927),n.filters.reduce((r,s)=>xE(r,s)))}function xE(t,e){let n;return he(t instanceof Oe||t instanceof $e,38388),he(e instanceof Oe||e instanceof $e,25473),n=t instanceof Oe?e instanceof Oe?function(s,i){return $e.create([s,i],"and")}(t,e):Ib(t,e):e instanceof Oe?Ib(e,t):function(s,i){if(he(s.filters.length>0&&i.filters.length>0,48005),zl(s)&&zl(i))return GD(s,i.getFilters());const o=iw(s)?s:i,a=iw(s)?i:s,l=o.filters.map(c=>xE(c,a));return $e.create(l,"or")}(t,e),Ap(n)}function Ib(t,e){if(zl(e))return GD(e,t.getFilters());{const n=e.filters.map(r=>xE(t,r));return $e.create(n,"or")}}function Ap(t){if(he(t instanceof Oe||t instanceof $e,11850),t instanceof Oe)return t;const e=t.getFilters();if(e.length===1)return Ap(e[0]);if(HD(t))return t;const n=e.map(s=>Ap(s)),r=[];return n.forEach(s=>{s instanceof Oe?r.push(s):s instanceof $e&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:$e.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this.Cn=new PE}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Xn.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class PE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qe(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qe(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="IndexedDbIndexManager",Mh=new Uint8Array(0);class yz{constructor(e,n){this.databaseId=n,this.vn=new PE,this.Fn=new Ks(r=>ca(r),(r,s)=>Vd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:un(s)};return bb(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[mD(n),""],!1,!0);return bb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(es(o.parent))}return r})}addFieldIndex(e,n){const r=Kc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Oa(e);return i.next(a=>{o.put(gb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Kc(e),s=Oa(e),i=Na(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Kc(e),r=Na(e),s=Oa(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Tb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Na(e);let s=!0;const i=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Re();const a=[];return V.forEach(i,(l,c)=>{K(Sb,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`}(l)} to execute ${ca(n)}`);const d=function(v,A){const C=Jv(A);if(C===void 0)return null;for(const L of Ep(v,C.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(v,A){const C=new Map;for(const L of To(A))for(const S of Ep(v,L.fieldPath))switch(S.op){case"==":case"in":C.set(L.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return C.set(L.fieldPath.canonicalString(),S.value),Array.from(C.values())}return null}(c,l),p=function(v,A){const C=[];let L=!0;for(const S of To(A)){const T=S.kind===0?nb(v,S.fieldPath,v.startAt):rb(v,S.fieldPath,v.startAt);C.push(T.value),L&&(L=T.inclusive)}return new $l(C,L)}(c,l),m=function(v,A){const C=[];let L=!0;for(const S of To(A)){const T=S.kind===0?rb(v,S.fieldPath,v.endAt):nb(v,S.fieldPath,v.endAt);C.push(T.value),L&&(L=T.inclusive)}return new $l(C,L)}(c,l),E=this.On(l,c,p),g=this.On(l,c,m),_=this.Nn(l,c,h),w=this.Bn(l.indexId,d,E,p.inclusive,g,m.inclusive,_);return V.forEach(w,f=>r.Y(f,n.limit).next(v=>{v.forEach(A=>{const C=ee.fromSegments(A.documentKey);o.has(C)||(o=o.add(C),a.push(C))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=mz($e.create(e.filters,"and")).map(r=>aw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Ln(n[h/c]):Mh,m=this.kn(e,p,r[h%c],s),E=this.qn(e,p,i[h%c],o),g=a.map(_=>this.kn(e,p,_,!0));d.push(...this.createRange(m,E,g))}return d}kn(e,n,r,s){const i=new Po(e,ee.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Po(e,ee.empty(),n,r);return s?i.An():i}xn(e,n){const r=new Tb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new qe(at.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Hc;for(const s of To(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);xo.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Hc;return xo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Hc;return xo.Kt.Dt(pd(this.databaseId,n),r.Pn(function(i){const o=To(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Hc);let i=0;for(const o of To(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&md(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);xo.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Hc;l.seed(a.un()),xo.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof Oe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Kc(e),s=Oa(e);return(n?r.J(ew,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new ad(h.sequenceNumber,new Xn(ha(h.readTime),new ee(es(h.documentKey)),h.largestBatchId)):ad.empty(),m=d.fields.map(([E,g])=>new pf(at.fromServerFormat(E),g));return new mp(d.indexId,d.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Te(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Kc(e),i=Oa(e);return this.Gn(e).next(o=>s.J(ew,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(gb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?V.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Na(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Na(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Na(e);let i=new qe(li);return s.ee({index:RD,range:IDBKeyRange.only([r.indexId,this.uid,Tf(this.$n(r,n))])},(o,a)=>{i=i.add(new Po(r.indexId,n,Eb(a.arrayValue),Eb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new qe(li);const s=this.Qn(n,e);if(s==null)return r;const i=Jv(n);if(i!=null){const o=e.data.field(i.fieldPath);if(md(o))for(const a of o.arrayValue.values||[])r=r.add(new Po(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Po(n.indexId,e.key,Mh,s));return r}Jn(e,n,r,s,i){K(Sb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const m=l.getIterator(),E=c.getIterator();let g=Da(m),_=Da(E);for(;g||_;){let w=!1,f=!1;if(g&&_){const v=d(g,_);v<0?f=!0:v>0&&(w=!0)}else g!=null?f=!0:w=!0;w?(h(_),_=Da(E)):f?(p(g),g=Da(m)):(g=Da(m),_=Da(E))}}(s,i,li,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return Oa(e).ee({index:PD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>li(o,a)).filter((o,a,l)=>!a||li(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=li(o,e),l=li(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Mh,ee.empty()),l=s[o+1].Vn(this.uid,Mh,ee.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return li(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ab)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||ie(44426))).next(Ab)}}function bb(t){return Lt(t,dd)}function Na(t){return Lt(t,bu)}function Kc(t){return Lt(t,hE)}function Oa(t){return Lt(t,Su)}function Ab(t){he(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;cE(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Xn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nk=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t,e,n){const r=t.store(wr),s=t.store(Vl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{he(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=bD(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return V.waitFor(i).next(()=>c)}function xp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ie(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(Nk,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class Lm{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){he(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Lm(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ci(e).ee({index:Oo,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=qa(e),o=ci(e);return o.add({}).next(a=>{he(typeof a=="number",49019);const l=new TE(a,n,r,s),c=function(m,E,g){const _=g.baseMutations.map(f=>Sp(m.yt,f)),w=g.mutations.map(f=>Sp(m.yt,f));return{userId:E,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:_,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new qe((p,m)=>Te(p.canonicalString(),m.canonicalString()));for(const p of s){const m=bD(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,Q5))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ci(e).get(n).next(r=>r?(he(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ao(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ci(e).ee({index:Oo,range:s},(o,a,l)=>{a.userId===this.userId&&(he(a.batchId>=r,47524,{tr:r}),i=Ao(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Jo;return ci(e).ee({index:Oo,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Jo],[this.userId,Number.POSITIVE_INFINITY]);return ci(e).J(Oo,n).next(r=>r.map(s=>Ao(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=mf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return qa(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,p=es(d);if(c===this.userId&&n.path.isEqual(p))return ci(e).get(h).next(m=>{if(!m)throw ie(61480,{nr:o,batchId:h});he(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(Ao(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(Te);const s=[];return n.forEach(i=>{const o=mf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=qa(e).ee({range:a},(c,d,h)=>{const[p,m,E]=c,g=es(m);p===this.userId&&i.path.isEqual(g)?r=r.add(E):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=mf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new qe(Te);return qa(e).ee({range:o},(l,c,d)=>{const[h,p,m]=l,E=es(p);h===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(ci(e).get(i).next(o=>{if(o===null)throw ie(35274,{batchId:i});he(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Ao(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return Ok(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return qa(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=es(i[1]);s.push(l)}else a.done()}).next(()=>{he(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return Lk(e,this.userId,n)}_r(e){return Vk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Jo,lastStreamToken:""})}}function Lk(t,e,n){const r=mf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return qa(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function ci(t){return Lt(t,wr)}function qa(t){return Lt(t,Vl)}function Vk(t){return Lt(t,cd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fa(0)}static cr(){return new fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new fa(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>fe.fromTimestamp(new Be(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>La(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(he(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return La(e).ee((o,a)=>{const l=lu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return La(e).ee((r,s)=>{const i=lu(s);n(i)})}lr(e){return Pb(e).get(vp).next(n=>(he(n!==null,2888),n))}hr(e,n){return Pb(e).put(vp,n)}Pr(e,n){return La(e).put(Rk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ca(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return La(e).ee({range:s,index:xD},(o,a,l)=>{const c=lu(a);Vd(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=yi(e);return n.forEach(o=>{const a=un(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=yi(e);return V.forEach(n,i=>{const o=un(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=yi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=yi(e);let i=Re();return s.ee({range:r,X:!0},(o,a,l)=>{const c=es(o[1]),d=new ee(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=un(n.path),s=IDBKeyRange.bound([r],[mD(r)],!1,!0);let i=0;return yi(e).ee({index:dE,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return La(e).get(n).next(r=>r?lu(r):null)}}function La(t){return Lt(t,Ml)}function Pb(t){return Lt(t,Zo)}function yi(t){return Lt(t,Fl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="LruGarbageCollector",Mk=1048576;function Cb([t,e],[n,r]){const s=Te(t,n);return s===0?Te(e,r):s}class wz{constructor(e){this.Ir=e,this.buffer=new qe(Cb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Cb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Fk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(Rb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?K(Rb,"Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.Vr(3e5)})}}class _z{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Cn.ce);const r=new wz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(xb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ja()<=ke.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function Uk(t,e){return new _z(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e,n){this.db=e,this.garbageCollector=Uk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return Fh(e,r)}removeReference(e,n,r){return Fh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Fh(e,n)}br(e,n){return function(s,i){let o=!1;return Vk(s).te(a=>Lk(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,fe.min()),yi(e).delete(function(h){return[0,un(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Fh(e,n)}Sr(e,n){const r=yi(e);let s,i=Cn.ce;return r.ee({index:dE},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Cn.ce&&n(new ee(es(s)),i),i=c,s=l):i=Cn.ce}).next(()=>{i!==Cn.ce&&n(new ee(es(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fh(t,e){return yi(t).put(function(r,s){return{targetId:0,path:un(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.changes=new Ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vo(e).put(r)}removeEntry(e,n,r){return vo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],bp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=vt.newInvalidDocument(n);return vo(e).ee({index:gf,range:IDBKeyRange.only(Gc(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:vt.newInvalidDocument(n)};return vo(e).ee({index:gf,range:IDBKeyRange.only(Gc(n))},(s,i)=>{r={document:this.Cr(n,i),size:xp(i)}}).next(()=>r)}getEntries(e,n){let r=qn();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=qn(),s=new Xe(ee.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,xp(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let s=new qe(Nb);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Gc(s.first()),Gc(s.last())),o=s.getIterator();let a=o.getNext();return vo(e).ee({index:gf,range:i},(l,c,d)=>{const h=ee.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Nb(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Gc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),bp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=qn();for(const h of c){const p=this.Cr(ee.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Fd(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=qn();const o=kb(n,r),a=kb(n,Xn.max());return vo(e).ee({index:AD,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(ee.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new Iz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Db(e).get(Zv).next(n=>(he(!!n,20021),n))}Dr(e,n){return Db(e).put(Zv,n)}Cr(e,n){if(n){const r=lz(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return vt.newInvalidDocument(e)}}function Bk(t){return new Tz(t)}class Iz extends jk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ks(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new qe((i,o)=>Te(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=pb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=xp(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=pb(this.Nr.serializer,o.convertToNoDocument(fe.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Db(t){return Lt(t,ud)}function vo(t){return Lt(t,yp)}function Gc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kb(t,e){const n=e.documentKey.path.toArray();return[t,bp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Nb(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Te(n[i],r[i]),s)return s;return s=Te(n.length,r.length),s||(s=Te(n[n.length-2],r[r.length-2]),s||Te(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ru(r.mutation,s,Dn.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ou();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=qn();const o=Pu(),a=function(){return Pu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Gs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ru(d.mutation,c,d.mutation.getFieldMask(),Be.now())):o.set(c.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new Sz(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Pu();let s=new Xe((o,a)=>o-a),i=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Dn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Re()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=ik();d.forEach(p=>{if(!i.has(p)){const m=dk(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(ts());let a=Ll,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Re())).next(d=>({batchId:a,changes:sk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=ou();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ou();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,p){return new hc(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,vt.newInvalidDocument(d)))});let a=ou();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Ru(d.mutation,c,Dn.empty(),Be.now()),Fd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wn(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Ck(s.bundledQuery),readTime:wn(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(){this.overlays=new Xe(ee.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),i=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ts(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ts(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SE(n,r));let i=this.qr.get(n);i===void 0&&(i=Re(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.Qr=new qe(Bt.$r),this.Ur=new qe(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ee(new Ue([])),r=new Bt(n,e),s=new Bt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ee(new Ue([])),r=new Bt(n,e),s=new Bt(n,e+1);let i=Re();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Bt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ee.comparator(e.key,n.key)||Te(e.Yr,n.Yr)}static Kr(e,n){return Te(e.Yr,n.Yr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(Bt.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new TE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Bt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Jo:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(Te);return n.forEach(s=>{const i=new Bt(s,0),o=new Bt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new Bt(new ee(i),0);let a=new qe(Te);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Bt(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e){this.ri=e,this.docs=function(){return new Xe(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=qn();const o=n.path,a=new ee(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cE(_D(d),r)<=0||(s.has(d.key)||Fd(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cz(this)}getSize(e){return V.resolve(this.size)}}class Cz extends jk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e){this.persistence=e,this.si=new Ks(n=>ca(n),Vd),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.oi=0,this._i=new RE,this.targetCount=0,this.ai=fa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cn(0),this.li=!1,this.li=!0,this.hi=new xz,this.referenceDelegate=e(this),this.Pi=new Dz(this),this.indexManager=new gz,this.remoteDocumentCache=function(s){return new Rz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Pk(n),this.Ii=new bz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Az,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Pz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new kz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class kz extends TD{constructor(e){super(),this.currentSequenceNumber=e}}class Vm{constructor(e){this.persistence=e,this.Ri=new RE,this.Vi=null}static mi(e){return new Vm(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=ee.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pp{constructor(e,n){this.persistence=e,this.pi=new Ks(r=>un(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Uk(this,n)}static mi(e,n){return new Pp(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,fe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vf(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Im("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Ld)}(e),function(l){l.createObjectStore(cd,{keyPath:G5}),l.createObjectStore(wr,{keyPath:qS,autoIncrement:!0}).createIndex(Oo,WS,{unique:!0}),l.createObjectStore(Vl)}(e),Ob(e),function(l){l.createObjectStore(Io)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Fl),l.deleteObjectStore(Ml),l.deleteObjectStore(Zo)}(e),Ob(e)),o=o.next(()=>function(l){const c=l.store(Zo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return c.put(vp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(wr).J().next(h=>{l.deleteObjectStore(wr),l.createObjectStore(wr,{keyPath:qS,autoIncrement:!0}).createIndex(Oo,WS,{unique:!0});const p=c.store(wr),m=h.map(E=>p.put(E));return V.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Ul,{keyPath:r9})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(ud)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(bm,{keyPath:s9})})(e),function(l){l.createObjectStore(Am,{keyPath:i9})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(xm,{keyPath:h9});c.createIndex(tw,f9,{unique:!1}),c.createIndex(CD,p9,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(yp,{keyPath:Y5});c.createIndex(gf,X5),c.createIndex(AD,J5)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(Io))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(hE,{keyPath:o9,autoIncrement:!0}).createIndex(ew,a9,{unique:!1}),l.createObjectStore(Su,{keyPath:l9}).createIndex(PD,c9,{unique:!1}),l.createObjectStore(bu,{keyPath:u9}).createIndex(RD,d9,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Su).clear()}).next(()=>{n.objectStore(bu).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(fE,{keyPath:m9})})(e)})),r<18&&s>=18&&SC()&&(o=o.next(()=>{n.objectStore(Su).clear()}).next(()=>{n.objectStore(bu).clear()})),o}wi(e){let n=0;return e.store(Io).ee((r,s)=>{n+=xp(s)}).next(()=>{const r={byteSize:n};return e.store(ud).put(Zv,r)})}yi(e){const n=e.store(cd),r=e.store(wr);return n.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Jo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Oo,o).next(a=>V.forEach(a,l=>{he(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ao(this.serializer,l);return Ok(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Fl),r=e.store(Io);return e.store(Zo).get(vp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Ue(o),c=function(h){return[0,un(h)]}(l);i.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:un(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,n){e.createObjectStore(dd,{keyPath:n9});const r=n.store(dd),s=new PE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:un(l)})}};return n.store(Io).ee({X:!0},(o,a)=>{const l=new Ue(o);return i(l.popLast())}).next(()=>n.store(Vl).ee({X:!0},([o,a,l],c)=>{const d=es(a);return i(d.popLast())}))}Di(e){const n=e.store(Ml);return n.ee((r,s)=>{const i=lu(s),o=Rk(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(Io),s=[];return r.ee((i,o)=>{const a=n.store(yp),l=function(h){return h.document?new ee(Ue.fromString(h.document.name).popFirst(5)):h.noDocument?ee.fromSegments(h.noDocument.path):h.unknownDocument?ee.fromSegments(h.unknownDocument.path):ie(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}Fi(e,n){const r=n.store(wr),s=Bk(this.serializer),i=new CE(Vm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Re();Ao(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const d=new sn(c),h=Om.wt(this.serializer,d),p=i.getIndexManager(d),m=Lm.wt(d,this.serializer,p,i.referenceDelegate);return new $k(s,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new nw(n,Cn.ce),l).next()})})}}function Ob(t){t.createObjectStore(Fl,{keyPath:e9}).createIndex(dE,t9,{unique:!0}),t.createObjectStore(Ml,{keyPath:"targetId"}).createIndex(xD,Z5,{unique:!0}),t.createObjectStore(Zo)}const ui="IndexedDbPersistence",cy=18e5,uy=5e3,dy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Oz="main";class DE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!DE.v())throw new Y($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ez(this,s),this.$i=n+Oz,this.serializer=new Pk(l),this.Ui=new $i(this.$i,this.Ni,new Nz(this.serializer)),this.hi=new uz,this.Pi=new vz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Bk(this.serializer),this.Ii=new cz,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&It(ui,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y($.FAILED_PRECONDITION,dy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Cn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(lo(e))return K(ui,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K(ui,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Qc(e).get(Ca).next(n=>V.resolve(this.es(n)))}ts(e){return Uh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,cy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Lt(n,Ul);return r.J().next(s=>{const i=this.ss(s,cy),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Qc(e).get(Ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,uy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Y($.FAILED_PRECONDITION,dy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uh(e).J().next(r=>this.ss(r,uy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K(ui,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ld,Ul],e=>{const n=new nw(e,Cn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Uh(e).J().next(n=>this.ss(n,cy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Lm.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Om.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){K(ui,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?v9:l===17?OD:l===16?y9:l===15?pE:l===14?ND:l===13?kD:l===12?g9:l===11?DD:void ie(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new nw(a,this.ci?this.ci.next():Cn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw It(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Y($.FAILED_PRECONDITION,ED);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Qc(e).get(Ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,uy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y($.FAILED_PRECONDITION,dy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qc(e).put(Ca,n)}static v(){return $i.v()}Zi(e){const n=Qc(e);return n.get(Ca).next(r=>this.es(r)?(K(ui,"Releasing primary lease."),n.delete(Ca)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(It(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;IC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return K(ui,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return It(ui,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){It("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qc(t){return Lt(t,Ld)}function Uh(t){return Lt(t,Ul)}function zk(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Re(),s=Re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new kE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return IC()?8:ID(Jt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Lz;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ja()<=ke.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(ja()<=ke.DEBUG&&K("QueryEngine","Query:",Ba(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ja()<=ke.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(n))):V.resolve())}ys(e,n){if(sb(n))return V.resolve(null);let r=Qn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Tp(n,null,"F"),r=Qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Re(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Tp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return sb(n)||s.isEqual(fe.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(ja()<=ke.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ba(n)),this.vs(e,o,n,wD(s,Ll)).next(a=>a))})}Ds(e,n){let r=new qe(nk(e));return n.forEach((s,i)=>{Fd(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ja()<=ke.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ba(n)),this.ps.getDocumentsMatchingQuery(e,n,Xn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="LocalStore",Vz=3e8;class Mz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Xe(Te),this.xs=new Ks(i=>ca(i),Vd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $k(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Wk(t,e,n,r){return new Mz(t,e,n,r)}async function Hk(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Re();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function Fz(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=V.resolve();return p.forEach(E=>{m=m.next(()=>d.getEntry(l,E)).next(g=>{const _=c.docVersions.get(E);he(_!==null,48541),g.version.compareTo(_)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Kk(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Uz(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(wt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(g,_,w){return g.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Vz?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=qn(),c=Re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(jz(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(fe.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function jz(t,e,n){let r=Re(),s=Re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=qn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K(NE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function Bz(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rp(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new As(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Kl(t,e,n){const r=oe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lo(o))throw o;K(NE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Cp(t,e,n){const r=oe(t);let s=fe.min(),i=Re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=oe(l),p=h.xs.get(d);return p!==void 0?V.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,d)}(r,o,Qn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:Re())).next(a=>(Yk(r,tk(e),a),{documents:a,Qs:i})))}function Gk(t,e){const n=oe(t),r=oe(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function Qk(t,e){const n=oe(t),r=n.Os.get(e)||fe.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,wD(r,Ll),Number.MAX_SAFE_INTEGER)).then(s=>(Yk(n,e,s),s))}function Yk(t,e,n){let r=t.Os.get(e)||fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="firestore_clients";function Lb(t,e){return`${Xk}_${t}_${e}`}const Jk="firestore_mutations";function Vb(t,e,n){let r=`${Jk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Zk="firestore_targets";function hy(t,e){return`${Zk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="SharedClientState";class Dp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Y(s.error.code,s.error.message))),o?new Dp(e,n,s.state,i):(It(Qr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Y(r.error.code,r.error.message))),i?new Cu(e,r.state,s):(It(Qr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=wE();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=SD(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new kp(e,i):(It(Qr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class OE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new OE(n.clientId,n.onlineState):(It(Qr,`Failed to parse online state: ${e}`),null)}}class gw{constructor(){this.activeTargetIds=wE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fy{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Xe(Te),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Lb(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new gw),this.ro=new RegExp(`^${Xk}_${o}_([^_]*)$`),this.io=new RegExp(`^${Jk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Zk}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Lb(this.persistenceKey,r));if(s){const i=kp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(hy(this.persistenceKey,e));if(s){const i=Cu.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return K(Qr,"READ",e,n),n}setItem(e,n){K(Qr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){K(Qr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(K(Qr,"EVENT",n.key,n.newValue),n.key===this.eo)return void It("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Cn.ce;if(i!=null)try{const a=JSON.parse(i);he(typeof a=="number",30636,{So:i}),o=a}catch(a){It(Qr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Dp(this.currentUser,e,n,r),i=Vb(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Vb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=hy(this.persistenceKey,e),i=new Cu(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return kp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Dp.Ws(new sn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Cu.Ws(s,n)}uo(e){return OE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);K(Qr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=wE();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class eN{constructor(){this.Mo=new gw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="ConnectivityMonitor";class Fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(Mb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(Mb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=null;function yw(){return jh===null?jh=function(){return 268435456+Math.round(2147483648*Math.random())}():jh++,"0x"+jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="RestConnection",zz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===wp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=yw(),a=this.zo(e,n.toUriEncodedString());K(py,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Ws(c);return this.Jo(e,a,l,r,d).then(h=>(K(py,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Yi(py,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=zz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class Hz extends qz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=yw();return new Promise((a,l)=>{const c=new aD;c.setWithCredentials(!0),c.listenOnce(lD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ff.NO_ERROR:const h=c.getResponseJson();K(rn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case ff.TIMEOUT:K(rn,`RPC '${e}' ${o} timed out`),l(new Y($.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const p=c.getStatus();if(K(rn,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const g=function(w){const f=w.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(f)>=0?f:$.UNKNOWN}(E.status);l(new Y(g,E.message))}else l(new Y($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y($.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{K(rn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);K(rn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=yw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dD(),a=uD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");K(rn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,m=!1;const E=new Wz({Yo:_=>{m?K(rn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(K(rn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),K(rn,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},Zo:()=>h.close()}),g=(_,w,f)=>{_.listen(w,v=>{try{f(v)}catch(A){setTimeout(()=>{throw A},0)}})};return g(h,iu.EventType.OPEN,()=>{m||(K(rn,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),g(h,iu.EventType.CLOSE,()=>{m||(m=!0,K(rn,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(h))}),g(h,iu.EventType.ERROR,_=>{m||(m=!0,Yi(rn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),E.a_(new Y($.UNAVAILABLE,"The operation could not be completed")))}),g(h,iu.EventType.MESSAGE,_=>{var w;if(!m){const f=_.data[0];he(!!f,16349);const v=f,A=(v==null?void 0:v.error)||((w=v[0])==null?void 0:w.error);if(A){K(rn,`RPC '${e}' stream ${s} received error:`,A);const C=A.status;let L=function(P){const D=xt[P];if(D!==void 0)return pk(D)}(C),S=A.message;L===void 0&&(L=$.INTERNAL,S="Unknown error status: "+C+" with message "+A.message),m=!0,E.a_(new Y(L,S)),h.close()}else K(rn,`RPC '${e}' stream ${s} received:`,f),E.u_(f)}}),g(a,cD.STAT_EVENT,_=>{_.stat===Yv.PROXY?K(rn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Yv.NOPROXY&&K(rn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){return typeof window<"u"?window:null}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){return new J9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="PersistentStream";class rN{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(It(n.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(Ub,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(Ub,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kz extends rN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tz(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?wn(o.readTime):fe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=dw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=_p(l)?{documents:Tk(i,l)}:{query:Ik(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yk(i,o.resumeToken);const c=cw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=Hl(i,o.snapshotVersion.toTimestamp());const c=cw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=rz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=dw(this.serializer),n.removeTarget=e,this.q_(n)}}class Gz extends rN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nz(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=dw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{}class Yz extends Qz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,uw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y($.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,uw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y($.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Xz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(It(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class Jz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ta(this)&&(K(pa,"Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.Ea.add(4),await pc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Bd(c)}(this))})}),this.Ra=new Xz(r,s)}}async function Bd(t){if(Ta(t))for(const e of t.da)await e(!0)}async function pc(t){for(const e of t.da)await e(!1)}function Fm(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ME(n)?VE(n):gc(n).O_()&&LE(n,e))}function Gl(t,e){const n=oe(t),r=gc(n);n.Ia.delete(e),r.O_()&&sN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ta(n)&&n.Ra.set("Unknown"))}function LE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gc(t).Y_(e)}function sN(t,e){t.Va.Ue(e),gc(t).Z_(e)}function VE(t){t.Va=new G9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),gc(t).start(),t.Ra.ua()}function ME(t){return Ta(t)&&!gc(t).x_()&&t.Ia.size>0}function Ta(t){return oe(t).Ea.size===0}function iN(t){t.Va=void 0}async function Zz(t){t.Ra.set("Online")}async function e7(t){t.Ia.forEach((e,n)=>{LE(t,e)})}async function t7(t,e){iN(t),ME(t)?(t.Ra.ha(e),VE(t)):t.Ra.set("Unknown")}async function n7(t,e,n){if(t.Ra.set("Online"),e instanceof gk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){K(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Np(t,r)}else if(e instanceof Ef?t.Va.Ze(e):e instanceof mk?t.Va.st(e):t.Va.tt(e),!n.isEqual(fe.min()))try{const r=await Kk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(wt.EMPTY_BYTE_STRING,d.snapshotVersion)),sN(i,l);const h=new As(d.target,l,c,d.sequenceNumber);LE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K(pa,"Failed to raise snapshot:",r),await Np(t,r)}}async function Np(t,e,n){if(!lo(e))throw e;t.Ea.add(1),await pc(t),t.Ra.set("Offline"),n||(n=()=>Kk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(pa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bd(t)})}function oN(t,e){return e().catch(n=>Np(t,n,e))}async function mc(t){const e=oe(t),n=eo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jo;for(;r7(e);)try{const s=await Bz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,s7(e,s)}catch(s){await Np(e,s)}aN(e)&&lN(e)}function r7(t){return Ta(t)&&t.Ta.length<10}function s7(t,e){t.Ta.push(e);const n=eo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function aN(t){return Ta(t)&&!eo(t).x_()&&t.Ta.length>0}function lN(t){eo(t).start()}async function i7(t){eo(t).ra()}async function o7(t){const e=eo(t);for(const n of t.Ta)e.ea(n.mutations)}async function a7(t,e,n){const r=t.Ta.shift(),s=IE.from(r,e,n);await oN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await mc(t)}async function l7(t,e){e&&eo(t).X_&&await async function(r,s){if(function(o){return W9(o)&&o!==$.ABORTED}(s.code)){const i=r.Ta.shift();eo(r).B_(),await oN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await mc(r)}}(t,e),aN(t)&&lN(t)}async function jb(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),K(pa,"RemoteStore received new credentials");const r=Ta(n);n.Ea.add(3),await pc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bd(n)}async function vw(t,e){const n=oe(t);e?(n.Ea.delete(2),await Bd(n)):e||(n.Ea.add(2),await pc(n),n.Ra.set("Unknown"))}function gc(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.sa(),new Kz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Zz.bind(null,t),t_:e7.bind(null,t),r_:t7.bind(null,t),H_:n7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ME(t)?VE(t):t.Ra.set("Unknown")):(await t.ma.stop(),iN(t))})),t.ma}function eo(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.sa(),new Gz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:i7.bind(null,t),r_:l7.bind(null,t),ta:o7.bind(null,t),na:a7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await mc(t)):(await t.fa.stop(),t.Ta.length>0&&(K(pa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new FE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $d(t,e){if(It("AsyncQueue",`${e}: ${t}`),lo(t))return new Y($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{static emptySet(e){return new fl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=ou(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.ga=new Xe(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ql{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ql(e,n,fl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class u7{constructor(){this.queries=$b(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=$b(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Y($.ABORTED,"Firestore shutting down"))}}function $b(){return new Ks(t=>ek(t),Cm)}async function UE(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new c7,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=$d(o,`Initialization of query '${Ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&BE(n)}async function jE(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function d7(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&BE(n)}function h7(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function BE(t){t.Ca.forEach(e=>{e.next()})}var ww,zb;(zb=ww||(ww={})).Ma="default",zb.Cache="cache";class $E{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ql(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ww.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.key=e}}class uN{constructor(e){this.key=e}}class dN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=nk(e),this.tu=new fl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Bb,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=Fd(this.query,h)?h:null,E=!!p&&this.mutatedKeys.has(p.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?E!==g&&(r.track({type:3,doc:m}),_=!0):this.su(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,E){const g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:_})}};return g(m)-g(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Ql(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new uN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new cN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yc="SyncEngine";class f7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p7{constructor(e){this.key=e,this.hu=!1}}class m7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ks(a=>ek(a),Cm),this.Iu=new Map,this.Eu=new Set,this.du=new Xe(ee.comparator),this.Au=new Map,this.Ru=new RE,this.Vu={},this.mu=new Map,this.fu=fa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g7(t,e,n=!0){const r=Um(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await hN(r,e,n,!0),s}async function y7(t,e){const n=Um(t);await hN(n,e,!0,!1)}async function hN(t,e,n,r){const s=await Rp(t.localStore,Qn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await zE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Fm(t.remoteStore,s),a}async function zE(t,e,n,r,s){t.pu=(h,p,m)=>async function(g,_,w,f){let v=_.view.ru(w);v.Cs&&(v=await Cp(g.localStore,_.query,!1).then(({documents:S})=>_.view.ru(S,v)));const A=f&&f.targetChanges.get(_.targetId),C=f&&f.targetMismatches.get(_.targetId)!=null,L=_.view.applyChanges(v,g.isPrimaryClient,A,C);return _w(g,_.targetId,L.au),L.snapshot}(t,h,p,m);const i=await Cp(t.localStore,e,!0),o=new dN(e,i.Qs),a=o.ru(i.documents),l=jd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);_w(t,n,c.au);const d=new f7(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function v7(t,e,n){const r=oe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Cm(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gl(r.remoteStore,s.targetId),Yl(r,s.targetId)}).catch(ao)):(Yl(r,s.targetId),await Kl(r.localStore,s.targetId,!0))}async function w7(t,e){const n=oe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gl(n.remoteStore,r.targetId))}async function _7(t,e,n){const r=KE(t);try{const s=await function(o,a){const l=oe(o),c=Be.now(),d=a.reduce((m,E)=>m.add(E.key),Re());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=qn(),g=Re();return l.Ns.getEntries(m,d).next(_=>{E=_,E.forEach((w,f)=>{f.isValidDocument()||(g=g.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(_=>{h=_;const w=[];for(const f of a){const v=z9(f,h.get(f.key).overlayedDocument);v!=null&&w.push(new Gs(f.key,v,qD(v.value.mapValue),cn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(_=>{p=_;const w=_.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(m,_.batchId,w)})}).then(()=>({batchId:p.batchId,changes:sk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Xe(Te)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await uo(r,s.changes),await mc(r.remoteStore)}catch(s){const i=$d(s,"Failed to persist write");n.reject(i)}}async function fN(t,e){const n=oe(t);try{const r=await Uz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?he(o.hu,14607):s.removedDocuments.size>0&&(he(o.hu,42227),o.hu=!1))}),await uo(n,r,e)}catch(r){await ao(r)}}function qb(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(a)&&(c=!0)}),c&&BE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E7(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Xe(ee.comparator);o=o.insert(i,vt.newNoDocument(i,fe.min()));const a=Re().add(i),l=new Ud(fe.min(),new Map,new Xe(Te),o,a);await fN(r,l),r.du=r.du.remove(i),r.Au.delete(e),HE(r)}else await Kl(r.localStore,e,!1).then(()=>Yl(r,e,n)).catch(ao)}async function T7(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await Fz(n.localStore,e);WE(n,r,null),qE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,s)}catch(s){await ao(s)}}async function I7(t,e,n){const r=oe(t);try{const s=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(he(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);WE(r,e,n),qE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,s)}catch(s){await ao(s)}}function qE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function WE(t,e,n){const r=oe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Yl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||pN(t,r)})}function pN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),HE(t))}function _w(t,e,n){for(const r of n)r instanceof cN?(t.Ru.addReference(r.key,e),S7(t,r)):r instanceof uN?(K(yc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||pN(t,r.key)):ie(19791,{wu:r})}function S7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(yc,"New document in limbo: "+n),t.Eu.add(r),HE(t))}function HE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(Ue.fromString(e)),r=t.fu.next();t.Au.set(r,new p7(n)),t.du=t.du.insert(n,r),Fm(t.remoteStore,new As(Qn(Md(n.path)),r,"TargetPurposeLimboResolution",Cn.ce))}}async function uo(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=kE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,p=>V.forEach(p.Es,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>V.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!lo(h))throw h;K(NE,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Ms.get(p),E=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(p,g)}}}(r.localStore,i))}async function b7(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){K(yc,"User change. New user:",e.toKey());const r=await Hk(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Y($.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uo(n,r.Ls)}}function A7(t,e){const n=oe(t),r=n.Au.get(e);if(r&&r.hu)return Re().add(r.key);{let s=Re();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function x7(t,e){const n=oe(t),r=await Cp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&_w(n,e.targetId,s.au),s}async function P7(t,e){const n=oe(t);return Qk(n.localStore,e).then(r=>uo(n,r))}async function R7(t,e,n,r){const s=oe(t),i=await function(a,l){const c=oe(a),d=oe(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await mc(s.remoteStore):n==="acknowledged"||n==="rejected"?(WE(s,e,r||null),qE(s,e),function(a,l){oe(oe(a).mutationQueue).ir(l)}(s.localStore,e)):ie(6720,"Unknown batchState",{Su:n}),await uo(s,i)):K(yc,"Cannot apply mutation batch with id: "+e)}async function C7(t,e){const n=oe(t);if(Um(n),KE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Wb(n,r.toArray());n.gu=!0,await vw(n.remoteStore,!0);for(const i of s)Fm(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Yl(n,o),Kl(n.localStore,o,!0))),Gl(n.remoteStore,o)}),await s,await Wb(n,r),function(o){const a=oe(o);a.Au.forEach((l,c)=>{Gl(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Xe(ee.comparator)}(n),n.gu=!1,await vw(n.remoteStore,!1)}}async function Wb(t,e,n){const r=oe(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Rp(r.localStore,Qn(l[0]));for(const c of l){const d=r.Tu.get(c),h=await x7(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await Gk(r.localStore,o);a=await Rp(r.localStore,c),await zE(r,mN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function mN(t){return JD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function D7(t){return function(n){return oe(oe(n).persistence).Ts()}(oe(t).localStore)}async function k7(t,e,n,r){const s=oe(t);if(s.gu)return void K(yc,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await Qk(s.localStore,tk(i[0])),a=Ud.createSynthesizedRemoteEventForCurrentChange(e,n==="current",wt.EMPTY_BYTE_STRING);await uo(s,o,a);break}case"rejected":await Kl(s.localStore,e,!0),Yl(s,e,r);break;default:ie(64155,n)}}async function N7(t,e,n){const r=Um(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){K(yc,"Adding an already active target "+s);continue}const i=await Gk(r.localStore,s),o=await Rp(r.localStore,i);await zE(r,mN(i),o.targetId,!1,o.resumeToken),Fm(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Kl(r.localStore,s,!1).then(()=>{Gl(r.remoteStore,s),Yl(r,s)}).catch(ao)}}function Um(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E7.bind(null,e),e.Pu.H_=d7.bind(null,e.eventManager),e.Pu.yu=h7.bind(null,e.eventManager),e}function KE(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I7.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Wk(this.persistence,new qk,e.initialUser,this.serializer)}Cu(e){return new CE(Vm.mi,this.serializer)}Du(e){return new eN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class O7 extends vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){he(this.persistence.referenceDelegate instanceof Pp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Fk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new CE(r=>Pp.mi(r,n),this.serializer)}}class gN extends vd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await KE(this.xu.syncEngine),await mc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Wk(this.persistence,new qk,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Fk(r,e.asyncQueue,n)}Mu(e,n){const r=new H5(n,this.persistence);return new W5(e.asyncQueue,r)}Cu(e){const n=zk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new DE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,tN(),If(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new eN}}class L7 extends gN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof fy&&(this.sharedClientState.syncEngine={Co:R7.bind(null,n),vo:k7.bind(null,n),Fo:N7.bind(null,n),Ts:D7.bind(null,n),Do:P7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await C7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=tN();if(!fy.v(n))throw new Y($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fy(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class wd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=b7.bind(null,this.syncEngine),await vw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u7}()}createDatastore(e){const n=Mm(e.databaseInfo.databaseId),r=function(i){return new Hz(i)}(e.databaseInfo);return function(i,o,a,l){return new Yz(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new Jz(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>qb(this.syncEngine,n,0),function(){return Fb.v()?new Fb:new $z}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new m7(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);K(pa,"RemoteStore shutting down."),i.Ea.add(5),await pc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wd.provider={build:()=>new wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="FirestoreClient";class V7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(to,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(to,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$d(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function my(t,e){t.asyncQueue.verifyOperationInProgress(),K(to,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Hk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QE(t);K(to,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>jb(e.remoteStore,s)),t._onlineComponents=e}async function QE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(to,"Using user provided OfflineComponentProvider");try{await my(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Yi("Error using user provided cache. Falling back to memory cache: "+n),await my(t,new vd)}}else K(to,"Using default OfflineComponentProvider"),await my(t,new O7(void 0));return t._offlineComponents}async function YE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(to,"Using user provided OnlineComponentProvider"),await Hb(t,t._uninitializedComponentsProvider._online)):(K(to,"Using default OnlineComponentProvider"),await Hb(t,new wd))),t._onlineComponents}function yN(t){return QE(t).then(e=>e.persistence)}function vN(t){return QE(t).then(e=>e.localStore)}function wN(t){return YE(t).then(e=>e.remoteStore)}function M7(t){return YE(t).then(e=>e.syncEngine)}async function Op(t){const e=await YE(t),n=e.eventManager;return n.onListen=g7.bind(null,e.syncEngine),n.onUnlisten=v7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w7.bind(null,e.syncEngine),n}function F7(t){return t.asyncQueue.enqueue(async()=>{const e=await yN(t),n=await wN(t);return e.setNetworkEnabled(!0),function(s){const i=oe(s);return i.Ea.delete(0),Bd(i)}(n)})}function U7(t){return t.asyncQueue.enqueue(async()=>{const e=await yN(t),n=await wN(t);return e.setNetworkEnabled(!1),async function(s){const i=oe(s);i.Ea.add(0),await pc(i),i.Ra.set("Offline")}(n)})}function j7(t,e){const n=new ar;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=oe(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Y($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=$d(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await vN(t),e,n)),n.promise}function B7(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new GE({next:p=>{d.Nu(),o.enqueueAndForget(()=>jE(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Y($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Y($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new $E(Md(a.path),d,{includeMetadataChanges:!0,qa:!0});return UE(i,h)}(await Op(t),t.asyncQueue,e,n,r)),r.promise}function $7(t,e){const n=new ar;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Cp(s,i,!0),l=new dN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=$d(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await vN(t),e,n)),n.promise}function z7(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new GE({next:p=>{d.Nu(),o.enqueueAndForget(()=>jE(i,h)),p.fromCache&&l.source==="server"?c.reject(new Y($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new $E(a,d,{includeMetadataChanges:!0,qa:!0});return UE(i,h)}(await Op(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="firestore.googleapis.com",Gb=!0;class Qb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q7,this.ssl=Gb}else this.host=e.host,this.ssl=e.ssl??Gb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Mk)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_N(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class XE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pD;switch(r.type){case"firstParty":return new V5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kb.get(n);r&&(K("ComponentProvider","Removing Datastore"),Kb.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}toJSON(){return{type:lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Od(n,lt._jsonSchema))return new lt(e,r||null,new ee(Ue.fromString(n.referencePath)))}}lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:Rt("string",lt._jsonSchemaVersion),referencePath:Rt("string")};class Ps extends Or{constructor(e,n,r){super(e,n,Md(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new ee(e))}withConverter(e){return new Ps(this.firestore,e,this._path)}}function de(t,e,...n){if(t=We(t),gD("collection","path",e),t instanceof XE){const r=Ue.fromString(e,...n);return US(r),new Ps(t,null,r)}{if(!(t instanceof lt||t instanceof Ps))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return US(r),new Ps(t.firestore,null,r)}}function ce(t,e,...n){if(t=We(t),arguments.length===1&&(e=Em.newId()),gD("doc","path",e),t instanceof XE){const r=Ue.fromString(e,...n);return FS(r),new lt(t,null,new ee(r))}{if(!(t instanceof lt||t instanceof Ps))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return FS(r),new lt(t.firestore,t instanceof Ps?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="AsyncQueue";class Xb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nN(this,"async_queue_retry"),this._c=()=>{const r=If();r&&K(Yb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=If();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=If();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ar;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;K(Yb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,It("INTERNAL UNHANDLED ERROR: ",Jb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=FE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:Jb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _n extends XE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xb(e),this._firestoreClient=void 0,await e}}}function EN(t,e,n){n||(n=wp);const r=wm(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(kl(i,e))return s;throw new Y($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Mk)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ws(e.host)&&eE(e.host),r.initialize({options:e,instanceIdentifier:n})}function Qs(t){if(t._terminated)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TN(t),t._firestoreClient}function TN(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new _9(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_N(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new V7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function W7(t,e){Yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return IN(t,wd.provider,{build:r=>new gN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function H7(t){Yi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();IN(t,wd.provider,{build:n=>new L7(n,e.cacheSizeBytes)})}function IN(t,e,n){if((t=bt(t,_n))._firestoreClient||t._terminated)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y($.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},TN(t)}function JE(t){return F7(Qs(t=bt(t,_n)))}function ZE(t){return U7(Qs(t=bt(t,_n)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(wt.fromBase64String(e))}catch(n){throw new Y($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $n(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Od(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Rt("string",$n._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(Od(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:Rt("string",br._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Od(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ar(e.vectorValues);throw new Y($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:Rt("string",Ar._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7=/^__.*__$/;class G7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new fc(e,this.data,n,this.fieldTransforms)}}class SN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:t})}}class jm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bN(this.Ac)&&K7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Q7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mm(e)}Cc(e,n,r,s=!1){return new jm({Ac:e,methodName:n,Dc:r,path:at.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bm(t){const e=t._freezeSettings(),n=Mm(t._databaseId);return new Q7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);n0("Data must be an object, but it was:",o,r);const a=xN(r,o);let l,c;if(i.merge)l=new Dn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=Ew(e,h,n);if(!o.contains(p))throw new Y($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);RN(d,p)||d.push(p)}l=new Dn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new G7(new ln(a),l,c)}class $m extends vc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $m}}function Y7(t,e,n){return new jm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class e0 extends vc{_toFieldTransform(e){return new EE(e.path,new ql)}isEqual(e){return e instanceof e0}}class t0 extends vc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Y7(this,e,!0),r=this.vc.map(i=>wc(i,n)),s=new ua(r);return new EE(e.path,s)}isEqual(e){return e instanceof t0&&kl(this.vc,e.vc)}}function X7(t,e,n,r){const s=t.Cc(1,e,n);n0("Data must be an object, but it was:",s,r);const i=[],o=ln.empty();co(r,(l,c)=>{const d=r0(e,l,n);c=We(c);const h=s.yc(d);if(c instanceof $m)i.push(d);else{const p=wc(c,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new Dn(i);return new SN(o,a,s.fieldTransforms)}function J7(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Ew(e,r,n)],l=[s];if(i.length%2!=0)throw new Y($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Ew(e,i[p])),l.push(i[p+1]);const c=[],d=ln.empty();for(let p=a.length-1;p>=0;--p)if(!RN(c,a[p])){const m=a[p];let E=l[p];E=We(E);const g=o.yc(m);if(E instanceof $m)c.push(m);else{const _=wc(E,g);_!=null&&(c.push(m),d.set(m,_))}}const h=new Dn(c);return new SN(d,h,o.fieldTransforms)}function Z7(t,e,n,r=!1){return wc(n,t.Cc(r?4:3,e))}function wc(t,e){if(PN(t=We(t)))return n0("Unsupported field value:",e,t),xN(t,e);if(t instanceof vc)return function(r,s){if(!bN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=wc(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Hl(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hl(s.serializer,i)}}if(r instanceof br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:yk(s.serializer,r._byteString)};if(r instanceof lt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:AE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ar)return function(o,a){return{mapValue:{fields:{[gE]:{stringValue:yE},[jl]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return _E(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Tm(r)}`)}(t,e)}function xN(t,e){const n={};return LD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(r,s)=>{const i=wc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function PN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof br||t instanceof $n||t instanceof lt||t instanceof vc||t instanceof Ar)}function n0(t,e,n){if(!PN(n)||!vD(n)){const r=Tm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ew(t,e,n){if((e=We(e))instanceof zd)return e._internalPath;if(typeof e=="string")return r0(t,e);throw Lp("Field path arguments must be of type string or ",t,!1,void 0,n)}const e8=new RegExp("[~\\*/\\[\\]]");function r0(t,e,n){if(e.search(e8)>=0)throw Lp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zd(...e.split("."))._internalPath}catch{throw Lp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y($.INVALID_ARGUMENT,a+t+l)}function RN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t8 extends CN{data(){return super.data()}}function zm(t,e){return typeof e=="string"?r0(t,e):e instanceof zd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s0{}class qm extends s0{}function ge(t,e,...n){let r=[];e instanceof s0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Wm).length,a=i.filter(l=>l instanceof qd).length;if(o>1||o>0&&a>0)throw new Y($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class qd extends qm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qd(e,n,r)}_apply(e){const n=this._parse(e);return kN(e._query,n),new Or(e.firestore,e.converter,lw(e._query,n))}_parse(e){const n=Bm(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){tA(h,d);const E=[];for(const g of h)E.push(eA(l,i,g));p={arrayValue:{values:E}}}else p=eA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||tA(h,d),p=Z7(a,o,h,d==="in"||d==="not-in");return Oe.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pe(t,e,n){const r=e,s=zm("where",t);return qd._create(s,r,n)}class Wm extends s0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$e.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)kN(o,l),o=lw(o,l)}(e._query,n),new Or(e.firestore,e.converter,lw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hm extends qm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Hm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gd(i,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new hc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function os(t,e="asc"){const n=e,r=zm("orderBy",t);return Hm._create(r,n)}class Km extends qm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Km(e,n,r)}_apply(e){return new Or(e.firestore,e.converter,Tp(e._query,this._limit,this._limitType))}}function zi(t){return $5("limit",t),Km._create("limit",t,"F")}function eA(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new Y($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZD(e)&&n.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!ee.isDocumentKey(r))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pd(t,new ee(r))}if(n instanceof lt)return pd(t,n._key);throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tm(n)}.`)}function tA(t,e){if(!Array.isArray(t)||t.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kN(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NN{convertValue(e,n="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return co(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[jl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>it(o.doubleValue));return new Ar(n)}convertGeoPoint(e){return new br(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hd(e));default:return null}}convertTimestamp(e){const n=js(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);he(xk(r),9688,{name:e});const s=new Xi(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||It(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rs extends CN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Rs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rs._jsonSchema={type:Rt("string",Rs._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Du extends Rs{data(e={}){return super.data(e)}}class Cs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Du(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Du(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Du(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:n8(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Em.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function n8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){t=bt(t,lt);const e=bt(t.firestore,_n);return B7(Qs(e),t._key).then(n=>VN(e,t,n))}Cs._jsonSchemaVersion="firestore/querySnapshot/1.0",Cs._jsonSchema={type:Rt("string",Cs._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Wd extends NN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function LN(t){t=bt(t,lt);const e=bt(t.firestore,_n),n=Qs(e),r=new Wd(e);return j7(n,t._key).then(s=>new Rs(e,r,t._key,s,new Lo(s!==null&&s.hasLocalMutations,!0),t.converter))}function _e(t){t=bt(t,Or);const e=bt(t.firestore,_n),n=Qs(e),r=new Wd(e);return DN(t._query),z7(n,t._query).then(s=>new Cs(e,r,t,s))}function r8(t){t=bt(t,Or);const e=bt(t.firestore,_n),n=Qs(e),r=new Wd(e);return $7(n,t._query).then(s=>new Cs(e,r,t,s))}function qt(t,e,n){t=bt(t,lt);const r=bt(t.firestore,_n),s=ON(t.converter,e,n);return Hd(r,[AN(Bm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cn.none())])}function rt(t,e,n,...r){t=bt(t,lt);const s=bt(t.firestore,_n),i=Bm(s);let o;return o=typeof(e=We(e))=="string"||e instanceof zd?J7(i,"updateDoc",t._key,e,n,r):X7(i,"updateDoc",t._key,e),Hd(s,[o.toMutation(t._key,cn.exists(!0))])}function Nt(t){return Hd(bt(t.firestore,_n),[new Nm(t._key,cn.none())])}function xr(t,e){const n=bt(t.firestore,_n),r=ce(t),s=ON(t.converter,e);return Hd(n,[AN(Bm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,cn.exists(!1))]).then(()=>r)}function $s(t,...e){var l,c,d;t=We(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Zb(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Zb(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof lt)o=bt(t.firestore,_n),a=Md(t._key.path),i={next:h=>{e[r]&&e[r](VN(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=bt(t,Or);o=bt(h.firestore,_n),a=h._query;const p=new Wd(o);i={next:m=>{e[r]&&e[r](new Cs(o,p,h,m))},error:e[r+1],complete:e[r+2]},DN(t._query)}return function(p,m,E,g){const _=new GE(g),w=new $E(m,_,E);return p.asyncQueue.enqueueAndForget(async()=>UE(await Op(p),w)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>jE(await Op(p),w))}}(Qs(o),a,s,i)}function Hd(t,e){return function(r,s){const i=new ar;return r.asyncQueue.enqueueAndForget(async()=>_7(await M7(r),s,i)),i.promise}(Qs(t),e)}function VN(t,e,n){const r=n.docs.get(e._key),s=new Wd(t);return new Rs(t,s,e._key,r,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}function ye(){return new e0("serverTimestamp")}function s8(...t){return new t0("arrayUnion",t)}(function(e,n=!0){(function(s){dc=s})(kd),cs(new Dr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new _n(new O5(r.getProvider("auth-internal")),new M5(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Gn(OS,LS,e),Gn(OS,LS,"esm2020")})();const Vo=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:NN,Bytes:$n,CollectionReference:Ps,DocumentReference:lt,DocumentSnapshot:Rs,FieldPath:zd,FieldValue:vc,Firestore:_n,FirestoreError:Y,GeoPoint:br,Query:Or,QueryCompositeFilterConstraint:Wm,QueryConstraint:qm,QueryDocumentSnapshot:Du,QueryFieldFilterConstraint:qd,QueryLimitConstraint:Km,QueryOrderByConstraint:Hm,QuerySnapshot:Cs,SnapshotMetadata:Lo,Timestamp:Be,VectorValue:Ar,_AutoId:Em,_ByteString:wt,_DatabaseId:Xi,_DocumentKey:ee,_EmptyAuthCredentialsProvider:pD,_FieldPath:at,_cast:bt,_logWarn:Yi,_validateIsNotUsedTogether:yD,addDoc:xr,arrayUnion:s8,collection:de,deleteDoc:Nt,disableNetwork:ZE,doc:ce,enableIndexedDbPersistence:W7,enableMultiTabIndexedDbPersistence:H7,enableNetwork:JE,ensureFirestoreConfigured:Qs,executeWrite:Hd,getDoc:Ke,getDocFromCache:LN,getDocs:_e,getDocsFromCache:r8,initializeFirestore:EN,limit:zi,onSnapshot:$s,orderBy:os,query:ge,serverTimestamp:ye,setDoc:qt,setLogLevel:hD,updateDoc:rt,where:pe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8="type.googleapis.com/google.protobuf.Int64Value",o8="type.googleapis.com/google.protobuf.UInt64Value";function MN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Vp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Vp(e));if(typeof t=="function"||typeof t=="object")return MN(t,e=>Vp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Xl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case i8:case o8:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Xl(e)):typeof t=="function"||typeof t=="object"?MN(t,e=>Xl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kn extends Nr{constructor(e,n,r){super(`${i0}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,kn.prototype)}}function a8(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Mp(t,e){let n=a8(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!nA[o])return new kn("internal","internal");n=nA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Xl(s))}}catch{}return n==="ok"?null:new kn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Bn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="us-central1",c8=/^data: (.*?)(?:\n|$)/;function u8(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new kn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class d8{constructor(e,n,r,s,i=Tw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new l8(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Tw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function h8(t,e,n){const r=Ws(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(eE(t.emulatorOrigin+"/backends"),EC("Functions",!0))}function f8(t,e,n){const r=s=>m8(t,e,s,{});return r.stream=(s,i)=>y8(t,e,s,i),r}function FN(t){return t.emulatorOrigin&&Ws(t.emulatorOrigin)?"include":void 0}async function p8(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:FN(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function UN(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function m8(t,e,n,r){const s=t._url(e);return g8(t,s,n,r)}async function g8(t,e,n,r){n=Vp(n);const s={data:n},i=await UN(t,r),o=r.timeout||7e4,a=u8(o),l=await Promise.race([p8(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new kn("cancelled","Firebase Functions instance was deleted.");const c=Mp(l.status,l.json);if(c)throw c;if(!l.json)throw new kn("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new kn("internal","Response is missing data field.");return{data:Xl(d)}}function y8(t,e,n,r){const s=t._url(e);return v8(t,s,n,r||{})}async function v8(t,e,n,r){var p;n=Vp(n);const s={data:n},i=await UN(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:FN(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new kn("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const E=Mp(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const c=new Promise((m,E)=>{a=m,l=E});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const m=new kn("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=w8(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:E,done:g}=await m.read();return{value:E,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function w8(t,e,n,r){const s=(o,a)=>{const l=o.match(c8);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Xl(d.result));return}if("message"in d){a.enqueue(Xl(d.message));return}if("error"in d){const h=Mp(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof kn){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new kn("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const p=new kn("cancelled","Request was cancelled");o.error(p),n(p),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),o);return l()}catch(c){const d=c instanceof kn?c:Mp(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const rA="@firebase/functions",sA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="auth-internal",E8="app-check-internal",T8="messaging-internal";function I8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(_8),o=n.getProvider(T8),a=n.getProvider(E8);return new d8(s,i,o,a,r)};cs(new Dr(i0,e,"PUBLIC").setMultipleInstances(!0)),Gn(rA,sA,t),Gn(rA,sA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t=RC(),e=Tw){const r=wm(We(t),i0).getImmediate({identifier:e}),s=wC("functions");return s&&b8(r,...s),r}function b8(t,e,n){h8(We(t),e,n)}function o0(t,e,n){return f8(We(t),e)}I8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="firebasestorage.googleapis.com",BN="storageBucket",A8=2*60*1e3,x8=10*60*1e3,P8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends Nr{constructor(e,n,r=0){super(gy(e),`Firebase Storage: ${n} (${gy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function gy(t){return"storage/"+t}function a0(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(st.UNKNOWN,t)}function R8(t){return new pt(st.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function C8(t){return new pt(st.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function D8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(st.UNAUTHENTICATED,t)}function k8(){return new pt(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N8(t){return new pt(st.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $N(){return new pt(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zN(){return new pt(st.CANCELED,"User canceled the upload/download.")}function O8(t){return new pt(st.INVALID_URL,"Invalid URL '"+t+"'.")}function L8(t){return new pt(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function V8(){return new pt(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BN+"' property when initializing the app?")}function qN(){return new pt(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function M8(){return new pt(st.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function F8(){return new pt(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function U8(t){return new pt(st.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Iw(t){return new pt(st.INVALID_ARGUMENT,t)}function WN(){return new pt(st.APP_DELETED,"The Firebase app was deleted.")}function j8(t){return new pt(st.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ku(t,e){return new pt(st.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yc(t){throw new pt(st.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wn.makeFromUrl(e,n)}catch{return new Wn(e,"")}if(r.path==="")return r;throw L8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),E={bucket:1,path:3},g=n===jN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",w=new RegExp(`^https?://${g}/${s}/${_}`,"i"),v=[{regex:a,indices:l,postModify:i},{regex:m,indices:E,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<v.length;A++){const C=v[A],L=C.regex.exec(e);if(L){const S=L[C.indices.bucket];let T=L[C.indices.path];T||(T=""),r=new Wn(S,T),C.postModify(r);break}}if(r==null)throw O8(e);return r}}class B8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...w){if(c){p();return}if(_){p(),d.call(null,_,...w);return}if(l()||o){p(),d.call(null,_,...w);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let E=!1;function g(_){E||(E=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function z8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(t){return t!==void 0}function W8(t){return typeof t=="function"}function H8(t){return typeof t=="object"&&!Array.isArray(t)}function Gm(t){return typeof t=="string"||t instanceof String}function iA(t){return l0()&&t instanceof Blob}function l0(){return typeof Blob<"u"}function oA(t,e,n,r){if(r<e)throw Iw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Iw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function HN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ta;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ta||(ta={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,g)=>{this.resolve_=E,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ta.NO_ERROR,l=i.getStatus();if(!a||KN(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ta.ABORT;r(!1,new Bh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Bh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());q8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=a0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?WN():zN();o(l)}else{const l=$N();o(l)}};this.canceled_?n(!1,new Bh(!1,null,!0)):this.backoffId_=$8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&z8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function G8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Q8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Y8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function X8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function J8(t,e,n,r,s,i,o=!0,a=!1){const l=HN(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return Y8(d,e),G8(d,n),Q8(d,i),X8(d,r),new K8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eq(...t){const e=Z8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(l0())return new Blob(t);throw new pt(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){if(typeof atob>"u")throw U8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yy{constructor(e,n){this.data=e,this.contentType=n||null}}function rq(t,e){switch(t){case ns.RAW:return new yy(GN(e));case ns.BASE64:case ns.BASE64URL:return new yy(QN(t,e));case ns.DATA_URL:return new yy(iq(e),oq(e))}throw a0()}function GN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sq(t){let e;try{e=decodeURIComponent(t)}catch{throw ku(ns.DATA_URL,"Malformed data URL.")}return GN(e)}function QN(t,e){switch(t){case ns.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ku(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ns.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ku(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=nq(e)}catch(s){throw s.message.includes("polyfill")?s:ku(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class YN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ku(ns.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=aq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function iq(t){const e=new YN(t);return e.base64?QN(ns.BASE64,e.rest):sq(e.rest)}function oq(t){return new YN(t).contentType}function aq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){let r=0,s="";iA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(iA(this.data_)){const r=this.data_,s=tq(r,e,n);return s===null?null:new Es(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Es(r,!0)}}static getBlob(...e){if(l0()){const n=e.map(r=>r instanceof Es?r.data_:r);return new Es(eq.apply(null,n))}else{const n=e.map(o=>Gm(o)?rq(ns.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Es(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){let e;try{e=JSON.parse(t)}catch{return null}return H8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function JN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(t,e){return e}class fn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||uq}}let $h=null;function dq(t){return!Gm(t)||t.length<2?t:JN(t)}function c0(){if($h)return $h;const t=[];t.push(new fn("bucket")),t.push(new fn("generation")),t.push(new fn("metageneration")),t.push(new fn("name","fullPath",!0));function e(i,o){return dq(o)}const n=new fn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new fn("size");return s.xform=r,t.push(s),t.push(new fn("timeCreated")),t.push(new fn("updated")),t.push(new fn("md5Hash",null,!0)),t.push(new fn("cacheControl",null,!0)),t.push(new fn("contentDisposition",null,!0)),t.push(new fn("contentEncoding",null,!0)),t.push(new fn("contentLanguage",null,!0)),t.push(new fn("contentType",null,!0)),t.push(new fn("metadata","customMetadata",!0)),$h=t,$h}function hq(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Wn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function fq(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return hq(r,t),r}function ZN(t,e,n){const r=XN(e);return r===null?null:fq(t,r,n)}function pq(t,e,n,r){const s=XN(e);if(s===null||!Gm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=Kd(p,n,r),E=HN({alt:"media",token:c});return m+E})[0]}function eO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class _c{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){if(!t)throw a0()}function u0(t,e){function n(r,s){const i=ZN(t,s,e);return Ds(i!==null),i}return n}function mq(t,e){function n(r,s){const i=ZN(t,s,e);return Ds(i!==null),pq(i,s,t.host,t._protocol)}return n}function Gd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=k8():s=D8():n.getStatus()===402?s=C8(t.bucket):n.getStatus()===403?s=N8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function tO(t){const e=Gd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=R8(t.path)),i.serverResponse=s.serverResponse,i}return n}function gq(t,e,n){const r=e.fullServerUrl(),s=Kd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new _c(s,i,u0(t,n),o);return a.errorHandler=tO(e),a}function yq(t,e,n){const r=e.fullServerUrl(),s=Kd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new _c(s,i,mq(t,n),o);return a.errorHandler=tO(e),a}function vq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function nO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=vq(null,e)),r}function rO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let A=0;A<2;A++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=nO(e,r,s),d=eO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Es.getBlob(h,r,p);if(m===null)throw qN();const E={name:c.fullPath},g=Kd(i,t.host,t._protocol),_="POST",w=t.maxUploadRetryTime,f=new _c(g,_,u0(t,n),w);return f.urlParams=E,f.headers=o,f.body=m.uploadData(),f.errorHandler=Gd(e),f}class Fp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function d0(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ds(!1)}return Ds(!!n&&(e||["active"]).indexOf(n)!==-1),n}function wq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=nO(e,r,s),a={name:o.fullPath},l=Kd(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=eO(o,n),p=t.maxUploadRetryTime;function m(g){d0(g);let _;try{_=g.getResponseHeader("X-Goog-Upload-URL")}catch{Ds(!1)}return Ds(Gm(_)),_}const E=new _c(l,c,m,p);return E.urlParams=a,E.headers=d,E.body=h,E.errorHandler=Gd(e),E}function _q(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=d0(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ds(!1)}h||Ds(!1);const p=Number(h);return Ds(!isNaN(p)),new Fp(p,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new _c(n,o,i,a);return l.headers=s,l.errorHandler=Gd(e),l}const aA=256*1024;function Eq(t,e,n,r,s,i,o,a){const l=new Fp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw M8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,p=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const E={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,p);if(g===null)throw qN();function _(A,C){const L=d0(A,["active","final"]),S=l.current+d,T=r.size();let P;return L==="final"?P=u0(e,i)(A,C):P=null,new Fp(S,T,L==="final",P)}const w="POST",f=e.maxUploadRetryTime,v=new _c(n,w,_,f);return v.headers=E,v.body=g.uploadData(),v.progressCallback=a||null,v.errorHandler=Gd(t),v}const xn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vy(t){switch(t){case"running":case"pausing":case"canceling":return xn.RUNNING;case"paused":return xn.PAUSED;case"success":return xn.SUCCESS;case"canceled":return xn.CANCELED;case"error":return xn.ERROR;default:return xn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e,n,r){if(W8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Iq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ta.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ta.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ta.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Yc("cannot .send() more than once");if(Ws(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Sq extends Iq{initXhr(){this.xhr_.responseType="text"}}function Ro(){return new Sq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=c0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(st.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(KN(s.status,[]))if(i)s=$N();else{this.sleepTime=Math.max(this.sleepTime*2,P8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(st.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=wq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ro,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=_q(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Ro,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=aA*this._chunkMultiplier,n=new Fp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Eq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ro,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){aA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=gq(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ro,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=rO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ro,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=zN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=vy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Tq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(vy(this._state)){case xn.SUCCESS:Va(this._resolve.bind(null,this.snapshot))();break;case xn.CANCELED:case xn.ERROR:const n=this._reject;Va(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vy(this._state)){case xn.RUNNING:case xn.PAUSED:e.next&&Va(e.next.bind(e,this.snapshot))();break;case xn.SUCCESS:e.complete&&Va(e.complete.bind(e))();break;case xn.CANCELED:case xn.ERROR:e.error&&Va(e.error.bind(e,this._error))();break;default:e.error&&Va(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n){this._service=e,n instanceof Wn?this._location=n:this._location=Wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ma(e,n)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JN(this._location.path)}get storage(){return this._service}get parent(){const e=lq(this._location.path);if(e===null)return null;const n=new Wn(this._location.bucket,e);return new ma(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw j8(e)}}function Aq(t,e,n){t._throwIfRoot("uploadBytes");const r=rO(t.storage,t._location,c0(),new Es(e,!0),n);return t.storage.makeRequestWithTokens(r,Ro).then(s=>({metadata:s,ref:t}))}function xq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new bq(t,new Es(e),n)}function Pq(t){t._throwIfRoot("getDownloadURL");const e=yq(t.storage,t._location,c0());return t.storage.makeRequestWithTokens(e,Ro).then(n=>{if(n===null)throw F8();return n})}function Rq(t,e){const n=cq(t._location.path,e),r=new Wn(t._location.bucket,n);return new ma(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(t){return/^[A-Za-z]+:\/\//.test(t)}function Dq(t,e){return new ma(t,e)}function sO(t,e){if(t instanceof h0){const n=t;if(n._bucket==null)throw V8();const r=new ma(n,n._bucket);return e!=null?sO(r,e):r}else return e!==void 0?Rq(t,e):t}function kq(t,e){if(e&&Cq(e)){if(t instanceof h0)return Dq(t,e);throw Iw("To use ref(service, url), the first argument must be a Storage instance.")}else return sO(t,e)}function lA(t,e){const n=e==null?void 0:e[BN];return n==null?null:Wn.makeFromBucketSpec(n,t)}function Nq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ws(e);s&&(eE(`https://${t.host}/b`),EC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:w6(i,t.app.options.projectId))}class h0{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=jN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A8,this._maxUploadRetryTime=x8,this._requests=new Set,s!=null?this._bucket=Wn.makeFromBucketSpec(s,this._host):this._bucket=lA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=lA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ma(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new B8(WN());{const o=J8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const cA="@firebase/storage",uA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="storage";function xK(t,e,n){return t=We(t),Aq(t,e,n)}function Oq(t,e,n){return t=We(t),xq(t,e,n)}function Lq(t){return t=We(t),Pq(t)}function Vq(t,e){return t=We(t),kq(t,e)}function oO(t=RC(),e){t=We(t);const r=wm(t,iO).getImmediate({identifier:e}),s=wC("storage");return s&&Mq(r,...s),r}function Mq(t,e,n,r={}){Nq(t,e,n,r)}function Fq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new h0(n,r,s,e,kd)}function Uq(){cs(new Dr(iO,Fq,"PUBLIC").setMultipleInstances(!0)),Gn(cA,uA,""),Gn(cA,uA,"esm2020")}Uq();const jq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Sw={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Sw.projectId,authDomain:Sw.authDomain,emulatorMode:!1});const Qm=PC(Sw);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const mn=x$(Qm,{persistence:[XC,Kv]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const W=EN(Qm,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{hD("error")}catch{}const Ym=S8(Qm,"us-central1"),Bq=oO(Qm);console.log(" Firebase initialized successfully");const $q=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout($q,100);let So=0;const wy=3,zq=1e3,aO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&So<wy){So++;const r=Math.min(zq*Math.pow(2,So-1),1e4);console.log(` Attempting to reconnect (${So}/${wy}) in ${r}ms...`);try{await ZE(W),await new Promise(s=>setTimeout(s,r)),await JE(W),console.log(" Firestore reconnected successfully"),So=0}catch(s){console.error(" Failed to reconnect:",s),So>=wy&&(console.error(" Maximum reconnection attempts reached."),qq())}}},qq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await JE(W),So=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await ZE(W),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(aO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Mo=Object.freeze(Object.defineProperty({__proto__:null,auth:mn,db:W,functions:Ym,handleFirestoreError:aO,storage:Bq},Symbol.toStringTag,{value:"Module"})),xe=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Wq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},ga=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>ga(n)).filter(n=>n!==void 0);if(t instanceof Date||!Wq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=ga(r);s!==void 0&&(e[n]=s)}return e},Sf={async create(t){await qt(ce(W,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:ye()})},async getById(t){const e=ce(W,"profiles",t),n=await Ke(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:xe(r.createdAt)}}return null},async update(t,e){const n=ce(W,"profiles",t);await rt(n,{...e,updatedAt:ye()})},async getByShopId(t){const e=ge(de(W,"profiles"),pe("shopId","==",t));return(await _e(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:xe(s.createdAt)}})}},bw={async create(t){return(await xr(de(W,"referrals"),{...t,createdAt:ye(),updatedAt:ye()})).id},async getByReferrerId(t){try{const e=ge(de(W,"referrals"),pe("referrerId","==",t),os("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:xe(r.data().createdAt),updatedAt:xe(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=ge(de(W,"referrals"),pe("referrerId","==",t));return(await _e(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:xe(i.data().createdAt),updatedAt:xe(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=ge(de(W,"referrals"),pe("referralCode","==",t),zi(1)),n=await _e(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:xe(r.data().createdAt),updatedAt:xe(r.data().updatedAt)}},async updateStatus(t,e){await rt(ce(W,"referrals",t),{status:e,updatedAt:ye()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},lO={async getByUserId(t){const e=ge(de(W,"profiles"),pe("userId","==",t)),n=await _e(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:xe(s.createdAt),updatedAt:xe(s.updatedAt)}}return null},async update(t,e){const n=ge(de(W,"profiles"),pe("userId","==",t)),r=await _e(n);if(!r.empty){const s=ce(W,"profiles",r.docs[0].id);await rt(s,{...e,updatedAt:ye()})}}},cO={async create(t){try{console.log("lineService.create called with data:",t);const e={...t,label:t.label||null,createdAt:ye(),updatedAt:ye()};console.log("Cleaned data for Firebase:",e);const n=await xr(de(W,"lines"),e);return console.log("Line created successfully with ID:",n.id),n.id}catch(e){throw console.error("Error in lineService.create:",e),console.error("Error details:",{message:e.message,code:e.code,stack:e.stack}),e}},async getByShopId(t){try{console.log("Getting lines for shopId:",t);const e=ge(de(W,"lines"),pe("shopId","==",t)),n=await _e(e);console.log("Query snapshot size:",n.size);const r=n.docs.map(s=>{const i=s.data();return console.log("Line data:",{id:s.id,...i}),{id:s.id,...i,createdAt:xe(i.createdAt),updatedAt:xe(i.updatedAt)}});return r.sort((s,i)=>i.createdAt.getTime()-s.createdAt.getTime()),console.log("Returning lines:",r),r}catch(e){throw console.error("Error in getByShopId:",e),e}},async update(t,e){const n=ce(W,"lines",t),r={...e,label:e.label!==void 0?e.label||null:void 0,updatedAt:ye()};Object.keys(r).forEach(s=>{r[s]===void 0&&delete r[s]}),console.log("Updating line with clean data:",r),await rt(n,r)},async delete(t){const e=ce(W,"lines",t);await Nt(e)}},Up={async create(t){return(await xr(de(W,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:ye(),updatedAt:ye()})).id},async getByMerchantId(t){const e=ge(de(W,"merchantWallets"),pe("merchantUserId","==",t)),r=(await _e(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:xe(l.createdAt),updatedAt:xe(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=ge(de(W,"wallets"),pe("userId","==",t));return(await _e(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:xe(l.createdAt),updatedAt:xe(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=ce(W,"merchantWallets",t),n=await Ke(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:xe(r.createdAt),updatedAt:xe(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=ge(de(W,"merchantWallets"),pe("iccid","==",t)),n=await _e(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:xe(s.createdAt),updatedAt:xe(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=ge(de(W,"merchantWallets"),pe("msisdn","==",t)),r=await _e(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:xe(l.createdAt),updatedAt:xe(l.updatedAt)}}const s=ge(de(W,"merchantWallets")),i=await _e(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:xe(l.createdAt),updatedAt:xe(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=ce(W,"merchantWallets",t);await rt(n,{...e,updatedAt:ye()})},async updateUsage(t,e,n){const r=ce(W,"merchantWallets",t),s={updatedAt:ye()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await rt(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=ge(de(W,"merchantWallets"),pe("msisdn","in",o)),c=(await _e(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await rt(d.ref,{merchantUserId:e,updatedAt:ye()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=ce(W,"merchantWallets",t);await Nt(e)}},uO={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Se(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>LW);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:ye(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await xr(de(W,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Se(async()=>{const{ProfitService:d}=await import("./profitService-BFf6Tsw8.js");return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),p=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const g=await Up.getById(h);m=String((g==null?void 0:g.msisdn)||(g==null?void 0:g.label)||h).trim()}catch{}let E="";p==="withdraw"?E=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:p==="transfer"||t.txnType==="send"?E=`   ${c}   ${m||" "}   ${d||""}    ${r}`:E=m?`  ${c}   ${m}`:`  ${c}`,i&&await hO.send(i,E)}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=ge(de(W,"transactions"),pe("shopId","==",t),os("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:xe(r.data().createdAt),confirmedAt:r.data().confirmedAt?xe(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=ge(de(W,"transactions"),pe("merchantUserId","==",t),os("createdAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:xe(r.data().createdAt),confirmedAt:r.data().confirmedAt?xe(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=ge(de(W,"transactions"),pe("merchantUserId","==",t)),n=ge(de(W,"transactions"),pe("userId","==",t)),[r,s]=await Promise.all([_e(e),_e(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:xe(c.createdAt),confirmedAt:c.confirmedAt?xe(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=ce(W,"transactions",t);await rt(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},Hq="https://summer-cake-5149.alkaptin2030.workers.dev",dO={async getTelegramWorkerUrl(){var t;try{const e=ce(W,"systemSettings","core"),n=await Ke(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=ce(W,"systemSettings","core");await qt(e,{telegramWorkerUrl:t,updatedAt:ye()},{merge:!0})}},hO={async send(t,e){try{const n=await Xr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await dO.getTelegramWorkerUrl()||Hq).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},Kq={async log(t,e,n,r,s){await xr(de(W,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:ye()})},async getLogs(t=100){const e=ge(de(W,"auditLogs"),os("createdAt","desc"),zi(t));return(await _e(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:xe(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=ge(de(W,"deletedTransactions"),os("deletedAt","desc"));return(await _e(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:xe(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=ge(de(W,"deletedTransactions"),pe("userId","==",t),os("deletedAt","desc"));return(await _e(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:xe(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=ge(de(W,"deletedTransactions"),pe("userId","==",t));return(await _e(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:xe(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:ye(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await xr(de(W,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=ge(de(W,"deletedTransactions"),pe("originalTransactionId","==",t),pe("userId","==",e)),r=await _e(n);r.empty?await xr(de(W,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:ye()}):await Promise.all(r.docs.map(s=>rt(s.ref,{permanent:!0,deletedAt:ye()}))),console.log("    :",t);try{const s=ge(de(W,"userTransactions"),pe("userId","==",e)),o=(await _e(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Nt(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=ce(W,"transactions",t);(await Ke(s)).exists()&&(console.log("     transactions  "),await Nt(s));const o=ge(de(W,"transactions"),pe("transactionId","==",t)),a=await _e(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Nt(d.ref))));const l=ge(de(W,"transactions"),pe("originalTransactionId","==",t)),c=await _e(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Nt(d.ref))));try{const d=ge(de(W,"deletedTransactions"),pe("userId","==",e),pe("originalTransactionId","==",t)),h=await _e(d),p=h.docs.map(E=>{var g;return String(((g=E.data())==null?void 0:g.reference)||"")}).filter(Boolean),m=h.docs.map(E=>{var g;return String(((g=E.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const E of p){const g=ge(de(W,"transactions"),pe("reference","==",E)),_=await _e(g);_.empty||(console.log(`  ${_.size}   transactions  reference=${E}`),await Promise.all(_.docs.map(w=>Nt(w.ref))))}for(const E of m){try{const w=ce(W,"transactions",E);(await Ke(w)).exists()&&(console.log("     transactions  :",E),await Nt(w))}catch{}const g=ge(de(W,"transactions"),pe("transactionId","==",E)),_=await _e(g);_.empty||(console.log(`  ${_.size}   transactions  transactionId=${E}`),await Promise.all(_.docs.map(w=>Nt(w.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},fO={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=ce(W,"daily_reports_archive",e);return await qt(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:ye()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=ge(de(W,"daily_reports_archive"),pe("userId","==",t),zi(e)),a=await _e(o);let l=[];try{l=(await _e(ge(de(W,"deletedDailyArchives"),pe("userId","==",t)))).docs.map(E=>{var g,_;return{id:E.id,reportDate:String(((g=E.data())==null?void 0:g.reportDate)||""),archiveId:String(((_=E.data())==null?void 0:_.archiveId)||"")}})}catch{}const c=(m,E)=>l.some(g=>g.archiveId&&g.archiveId===m||g.reportDate&&g.reportDate===E),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:xe(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const E=h.get(m.reportDate);(!E||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=E.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const p=Array.from(h.values());return p.sort((m,E)=>m.reportDate<E.reportDate?1:-1),p}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=ge(de(W,"daily_reports_archive"),pe("userId","==",t)),s=await _e(r);let i=0;for(const o of s.docs){const a=xe(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Nt(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=ge(de(W,"daily_reports_archive"),pe("userId","==",t)),s=(await _e(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:xe(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Nt(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=ge(de(W,"daily_reports_archive"),pe("userId","==",t)),n=await _e(e);let r=0;for(const s of n.docs)try{await Nt(s.ref),r++}catch{const o=s.data();try{await xr(de(W,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:ye()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Xr={async getUserData(t){try{console.log("     :",{userId:t});const e=ce(W,"users",t),n=await Ke(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:xe(r.createdAt),updatedAt:xe(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=ge(de(W,"deletedTransactions"),pe("userId","==",t));return $s(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data(),o=String((i==null?void 0:i.originalTransactionId)||""),a=String((i==null?void 0:i.transactionId)||""),l=String((i==null?void 0:i.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=ce(W,"users",t),r=ga(e);await qt(n,{...r||{},updatedAt:ye()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=ce(W,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=ga(r);let i={};try{const l=await Ke(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:ye()};console.log("   :",o);let a=3;for(;a>0;)try{await qt(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=ge(de(W,"userTransactions"),pe("userId","==",t),os("createdAt","desc"),zi(200));e=await _e(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=ge(de(W,"userTransactions"),pe("userId","==",t));e=await _e(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:xe(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r,s;try{const i=Object.fromEntries(Object.entries(e??{}).filter(([a,l])=>l!==void 0));try{const a=i.reference;if(a){const d=ge(de(W,"deletedTransactions"),pe("userId","==",t),pe("reference","==",a));if(!(await _e(d)).empty)return console.log("          ."),"skip-deleted"}{const d=ge(de(W,"deletedTransactions"),pe("userId","==",t),pe("permanent","==",!0)),h=await _e(d);if(!h.empty){const p=[i.id,i.transactionId,i.originalTransactionId,(n=i.receipt)==null?void 0:n.id,(r=i.receipt)==null?void 0:r.transactionId,i.reference,i.transactionReference].filter(E=>!!E).map(E=>String(E));if(h.docs.find(E=>{const g=E.data(),_=String(g.originalTransactionId||g.transactionId||E.id||""),w=String(g.reference||"");return _&&p.includes(_)||w&&p.includes(w)}))return console.log("        /   ."),"skip-deleted"}}const l=ge(de(W,"deletedTransactions"),pe("userId","==",t),os("deletedAt","desc"),zi(20)),c=await _e(l);if(!c.empty){const d=i.senderMsisdn||i.senderPhone||i.sender_msisdn,h=i.receiverMsisdn||i.receiverPhone||i.receiver_msisdn,p=Number(i.amount||0),m=i.createdAt?new Date(String(i.createdAt)):new Date,E=10*60*1e3;if(c.docs.find(_=>{const w=_.data(),f=w.senderMsisdn||w.senderPhone||w.sender_msisdn,v=w.receiverMsisdn||w.receiverPhone||w.receiver_msisdn,A=Number(w.amount||0),C=w.createdAt?new Date(String(w.createdAt)):m;return Math.abs(C.getTime()-m.getTime())<=E&&A===p&&f===d&&v===h}))return console.log("        ."),"skip-deleted"}}catch(a){console.warn("           :",a)}try{const a=ge(de(W,"userTransactions"),pe("userId","==",t));if(i.transactionId){const _=ge(de(W,"userTransactions"),pe("userId","==",t),pe("transactionId","==",i.transactionId)),w=await _e(_);if(!w.empty){const f=w.docs[0];return await rt(ce(W,"userTransactions",f.id),{...i,uploadedAt:ye()}),f.id}}if(i.reference){const _=ge(de(W,"userTransactions"),pe("userId","==",t),pe("reference","==",i.reference)),w=await _e(_);if(!w.empty){const f=w.docs[0];return await rt(ce(W,"userTransactions",f.id),{...i,uploadedAt:ye()}),f.id}}const l=ge(de(W,"userTransactions"),pe("userId","==",t),os("createdAt","desc"),zi(20)),c=await _e(l),d=i.senderMsisdn||i.senderPhone||i.sender_msisdn,h=i.receiverMsisdn||i.receiverPhone||i.receiver_msisdn,p=Number(i.amount||0),m=i.createdAt?new Date(String(i.createdAt)):new Date,E=5*60*1e3,g=c.docs.find(_=>{const w=_.data(),f=w.senderMsisdn||w.senderPhone||w.sender_msisdn,v=w.receiverMsisdn||w.receiverPhone||w.receiver_msisdn,A=Number(w.amount||0),C=xe(w.createdAt);return Math.abs(C.getTime()-m.getTime())<=E&&A===p&&f===d&&v===h});if(g)return await rt(ce(W,"userTransactions",g.id),{...i,uploadedAt:ye()}),g.id}catch(a){console.warn("      saveUserTransaction  :",a)}const o=await xr(de(W,"userTransactions"),{...i,userId:t,createdAt:i.createdAt?i.createdAt instanceof Date?i.createdAt:new Date(String(i.createdAt)):ye(),uploadedAt:ye()});try{const a=await Ke(ce(W,"users",t)),l=a.exists()?String(((s=a.data())==null?void 0:s.telegramChatId)||"").trim():"";if(l){const c=String(i.txnType||i.type||"").toLowerCase(),d=Number(i.amount??i.withdrawnAmount??i.transferredAmount??i.sentAmount??0),h=String(i.receiverMsisdn||i.receiverPhone||i.toWallet||"").trim(),p=String(i.senderMsisdn||i.senderPhone||i.fromWallet||"").trim(),E=(i.createdAt instanceof Date?i.createdAt:new Date).toLocaleString("ar-EG");let g="";c==="receive"?g=`   ${d}     ${h||p}
: ${E}`:c==="transfer"||c==="send"?g=`   ${d}     ${p}  ${h}
: ${E}`:c==="withdraw"?g=`   ${d}     ${p||h}
: ${E}`:g=`  ${d} 
: ${E}`,o0(Ym,"sendTelegramMessage")({chatId:l,text:g}).catch(()=>{})}}catch{}return o.id}catch(i){throw console.error("Error saving user transaction:",i),i}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=ce(W,"userTransactions",e),a=await Ke(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Nt(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=ge(de(W,"userTransactions"),pe("userId","==",t)),r=await _e(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,p;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((p=a.receipt)==null?void 0:p.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[ge(de(W,"userTransactions"),pe("merchantUserId","==",t)),ge(de(W,"userTransactions"),pe("createdBy","==",t))];for(const o of i)try{const l=(await _e(o)).docs.filter(c=>{var p,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((p=d.receipt)==null?void 0:p.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Nt(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=ce(W,"transactions",e);if((await Ke(a)).exists())console.log("     transactions   "),await Nt(a);else{const c=ge(de(W,"transactions"),pe("transactionId","==",e)),d=await _e(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Nt(m.ref))));const h=ge(de(W,"transactions"),pe("originalTransactionId","==",e)),p=await _e(h);p.empty||(console.log(`   ${p.size}   transactions  originalTransactionId `),await Promise.all(p.docs.map(m=>Nt(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},Aw={async getToday(t){const e=ce(W,"dailyStats",t,"today","data"),n=await Ke(e);return n.exists()?n.data():{}},async setToday(t,e){const n=ce(W,"dailyStats",t,"today","data");await qt(n,{...ga(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=ce(W,"dailyStats",t,"history",e);await qt(r,ga(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},Gq={async create(t,e){const n={...e,userId:t,status:"active",createdAt:ye()};return(await xr(de(W,"installments"),n)).id},listenByUser(t,e){const n=ge(de(W,"installments"),pe("userId","==",t));return $s(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await rt(ce(W,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Nt(ce(W,"installments",t)),!0}},PK=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:Gq,auditLogService:Kq,dailyReportsArchiveService:fO,dailyStatsService:Aw,lineService:cO,merchantWalletService:Up,profileService:Sf,profileServiceExtra:lO,referralService:bw,sanitizeFirestoreData:ga,systemSettingsService:dO,telegramNotifier:hO,transactionService:uO,userDataService:Xr},Symbol.toStringTag,{value:"Module"}));var Ts=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t))(Ts||{});const Qq=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},bf=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},Yq=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},RK=async(t,e,n,r)=>{try{const s=new Date,i=Qq(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=ce(W,"users",t);if(await rt(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},Xq=async t=>{try{const e=ce(W,"users",t);await rt(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},CK=async t=>{try{const e=ce(W,"users",t),n=await Ke(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},DK=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";default:return" "}},kK=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=Yq(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},NK=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class f0{static async startFreeTrialFromAdmin(e){var n,r,s,i;try{const o=ce(W,"users",e),a=await Ke(o);if(!a.exists())return{success:!1,message:"  "};const l=a.data(),c=!!l.hasUsedFreeTrial,d=(r=(n=l.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null,h=(i=(s=l.freeTrialEndDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;if(c&&!(c&&!d&&!h))return{success:!1,message:"       "};const m=new Date,E=await this.getTrialDurationHours(),g=new Date(m.getTime()+E*60*60*1e3);return await qt(o,{hasUsedFreeTrial:!0,freeTrialStartDate:m,freeTrialEndDate:g,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:ye()},{merge:!0}),{success:!0,message:`     ${E} ${E>=3&&E<=10?"":E===2?"":""}`}}catch(o){return console.error("Error starting admin free trial:",o),{success:!1,message:"     "}}}static async startFreeTrial(e){var n,r,s,i;try{const o=ce(W,"users",e),a=await Ke(o);if(!a.exists())return{success:!1,message:"  "};const l=a.data(),c=!!l.hasUsedFreeTrial,d=(r=(n=l.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null,h=(i=(s=l.freeTrialEndDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;if(c&&!(c&&!d&&!h))return{success:!1,message:"     "};const m=new Date,E=await this.getTrialDurationHours(),g=new Date(m.getTime()+E*60*60*1e3);return await qt(o,{hasUsedFreeTrial:!0,freeTrialStartDate:m,freeTrialEndDate:g,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:ye()},{merge:!0}),{success:!0,message:`     ${E} ${E>=3&&E<=10?"":E===2?"":""}`}}catch(o){return console.error("    :",o),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=ce(W,"users",e),a=await Ke(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const p=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const m=new Date;if(m>h){const w=bf(l.subscription);return await rt(o,{isOnFreeTrial:!1,isActive:w,approved:w,updatedAt:ye()}),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}const g=h.getTime()-m.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(g/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=ce(W,"users",e),i=await Ke(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=ce(W,"config","freeTrial"),n=await Ke(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=ce(W,"config","freeTrial");return await qt(n,{durationHours:e,updatedAt:ye()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=ce(W,"users",e),i=await Ke(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await rt(s,{freeTrialEndDate:d,updatedAt:ye()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}static async cancelActiveFreeTrial(e){try{const n=ce(W,"users",e),r=await Ke(n);return r.exists()?!r.data().isOnFreeTrial?{success:!1,message:"      "}:(await rt(n,{isOnFreeTrial:!1,isActive:!1,approved:!1,freeTrialEndDate:new Date,updatedAt:ye()}),{success:!0,message:"        "}):{success:!1,message:"  "}}catch(n){return console.error("Error cancelling active free trial:",n),{success:!1,message:"    "}}}}lh(f0,"TRIAL_DURATION_HOURS",4);const OK=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:f0},Symbol.toStringTag,{value:"Module"})),Jq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},pO=b.createContext(void 0);function Ia(){const t=b.useContext(pO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Zq=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(null),[a,l]=b.useState(!1),[c,d]=b.useState(!0),h=async S=>{var T,P,D,R,O,k,U,X,te,G,j,F,q,ne,Z,re;try{const ae=ce(W,"profiles",S);let Ie=!1;try{const ue=await LN(ae);if(ue.exists()){const we=ue.data(),Ce={userId:ue.id,shopId:we.shopId,role:we.role,fullName:we.fullName,phone:we.phone,shopName:we.shopName||null,approved:we.approved,avatarId:we.avatarId,bridgeLink:we.bridgeLink||null,bridgeDeviceId:we.bridgeDeviceId||null,showWithdrawNote:we.showWithdrawNote!==void 0?!!we.showWithdrawNote:!0,isReceiptNoteEnabled:we.isReceiptNoteEnabled!==void 0?!!we.isReceiptNoteEnabled:!0,createdAt:((P=(T=we.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))||new Date,updatedAt:((R=(D=we.updatedAt)==null?void 0:D.toDate)==null?void 0:R.call(D))||new Date,trialStarted:we.trialStarted||!1,trialStartDate:(k=(O=we.trialStartDate)==null?void 0:O.toDate)==null?void 0:k.call(O),trialEndDate:(X=(U=we.trialEndDate)==null?void 0:U.toDate)==null?void 0:X.call(U),trialExpired:we.trialExpired||!1};s(Ce),Ie=!0,d(!1)}}catch(ue){console.log("Cache profile not available:",(ue==null?void 0:ue.code)||ue)}try{if(!Ie){const ue=localStorage.getItem(`profile_cache_${S}`);if(ue){const we=JSON.parse(ue);s(we),Ie=!0,d(!1)}}}catch{}if(!Ie)for(let ue=0;ue<3;ue++)try{const we=await Ke(ae);if(we.exists()){const Ce=we.data(),At={userId:we.id,shopId:Ce.shopId,role:Ce.role,fullName:Ce.fullName,phone:Ce.phone,shopName:Ce.shopName||null,approved:Ce.approved,avatarId:Ce.avatarId,bridgeLink:Ce.bridgeLink||null,bridgeDeviceId:Ce.bridgeDeviceId||null,showWithdrawNote:Ce.showWithdrawNote!==void 0?!!Ce.showWithdrawNote:!0,isReceiptNoteEnabled:Ce.isReceiptNoteEnabled!==void 0?!!Ce.isReceiptNoteEnabled:!0,createdAt:((G=(te=Ce.createdAt)==null?void 0:te.toDate)==null?void 0:G.call(te))||new Date,updatedAt:((F=(j=Ce.updatedAt)==null?void 0:j.toDate)==null?void 0:F.call(j))||new Date,trialStarted:Ce.trialStarted||!1,trialStartDate:(ne=(q=Ce.trialStartDate)==null?void 0:q.toDate)==null?void 0:ne.call(q),trialEndDate:(re=(Z=Ce.trialEndDate)==null?void 0:Z.toDate)==null?void 0:re.call(Z),trialExpired:Ce.trialExpired||!1};s(At);try{localStorage.setItem(`profile_cache_${we.id}`,JSON.stringify(At))}catch{}Ie=!0,d(!1);break}}catch{}return $s(ae,async ue=>{var we,Ce,At,Vt,Zt,Wt,In,Vr;if(ue.exists()){const be=ue.data(),er={userId:ue.id,shopId:be.shopId,role:be.role,fullName:be.fullName,phone:be.phone,shopName:be.shopName||null,approved:be.approved,avatarId:be.avatarId,bridgeLink:be.bridgeLink||null,bridgeDeviceId:be.bridgeDeviceId||null,showWithdrawNote:be.showWithdrawNote!==void 0?!!be.showWithdrawNote:!0,isReceiptNoteEnabled:be.isReceiptNoteEnabled!==void 0?!!be.isReceiptNoteEnabled:!0,createdAt:((Ce=(we=be.createdAt)==null?void 0:we.toDate)==null?void 0:Ce.call(we))||new Date,updatedAt:((Vt=(At=be.updatedAt)==null?void 0:At.toDate)==null?void 0:Vt.call(At))||new Date,trialStarted:be.trialStarted||!1,trialStartDate:(Wt=(Zt=be.trialStartDate)==null?void 0:Zt.toDate)==null?void 0:Wt.call(Zt),trialEndDate:(Vr=(In=be.trialEndDate)==null?void 0:In.toDate)==null?void 0:Vr.call(In),trialExpired:be.trialExpired||!1};s(er);try{localStorage.setItem(`profile_cache_${ue.id}`,JSON.stringify(er))}catch{}Ie||(Ie=!0,d(!1))}else if(!Ie)try{const be=await lO.getByUserId(S);if(be){const er={userId:S,shopId:be.shopId,role:be.role||"user",fullName:be.fullName||null,phone:be.phone||null,shopName:be.shopName||null,approved:be.approved??!1,avatarId:be.avatarId||void 0,bridgeLink:be.bridgeLink||null,bridgeDeviceId:be.bridgeDeviceId||null,createdAt:ye(),updatedAt:ye()};await qt(ce(W,"profiles",S),er,{merge:!0}),s({...be,userId:S,createdAt:be.createdAt||new Date,updatedAt:be.updatedAt||new Date})}else await m(S)}catch(be){console.error("Profile migration/create error:",be)}finally{Ie=!0,d(!1)}},ue=>{console.error("Profile listener error:",ue);try{d(!1)}catch{}})}catch(ae){return console.error("Error setting up profile listener:",ae),await m(S),d(!1),()=>{}}},p=async S=>{try{const T=ce(W,"users",S.uid);(await Ke(T)).exists()?(await rt(T,{lastLogin:ye(),updatedAt:ye()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await qt(T,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:ye(),updatedAt:ye(),lastLogin:ye()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(T){console.error(" ensureAdminUserDoc error:",T)}},m=async(S,T,P,D,R)=>{var O,k;try{console.log("Creating default profile for user:",S);const U=bw.generateReferralCode(S);let X=null;const te={userId:S,shopId:"default-shop",role:"user",fullName:T||" ",phone:P||null,shopName:D||null,approved:!1,referralCode:U,referredBy:R||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(te),console.log("Created temporary profile:",te);try{const{doc:G,setDoc:j,serverTimestamp:F}=await Se(async()=>{const{doc:re,setDoc:ae,serverTimestamp:Ie}=await Promise.resolve().then(()=>Vo);return{doc:re,setDoc:ae,serverTimestamp:Ie}},void 0,import.meta.url),{db:q}=await Se(async()=>{const{db:re}=await Promise.resolve().then(()=>Mo);return{db:re}},void 0,import.meta.url),ne={email:((O=mn.currentUser)==null?void 0:O.email)||"",displayName:T||" ",phone:P||null,shopName:D||null,isActive:!1,referralCode:U,referredBy:R||null,createdAt:F(),lastLogin:null,updatedAt:F()};if(console.log("Attempting to add user to admin collection with data:",ne),await j(G(q,"users",S),ne,{merge:!0}),console.log(" User successfully added to admin collection:",ne),R)try{const{query:re,collection:ae,where:Ie,limit:Ve,getDocs:ue}=await Se(async()=>{const{query:Vt,collection:Zt,where:Wt,limit:In,getDocs:Vr}=await Promise.resolve().then(()=>Vo);return{query:Vt,collection:Zt,where:Wt,limit:In,getDocs:Vr}},void 0,import.meta.url),{db:we}=await Se(async()=>{const{db:Vt}=await Promise.resolve().then(()=>Mo);return{db:Vt}},void 0,import.meta.url),Ce=re(ae(we,"users"),Ie("referralCode","==",R),Ve(1)),At=await ue(Ce);At.empty?console.log(" Referral code not found in users collection:",R):(X=At.docs[0].id,await bw.create({referrerId:X,referredUserId:S,referredUserEmail:((k=mn.currentUser)==null?void 0:k.email)||"",referralCode:R,status:"completed"}),console.log(" Referral record created successfully for referrer:",X))}catch(re){console.error(" Error creating referral record:",re)}const Z=await Ke(G(q,"users",S));Z.exists()?console.log(" User document verified in Firestore:",Z.data()):console.log(" User document not found after creation")}catch(G){console.error(" Error adding user to admin collection:",G)}try{const{addDoc:G,collection:j,serverTimestamp:F}=await Se(async()=>{const{addDoc:ae,collection:Ie,serverTimestamp:Ve}=await Promise.resolve().then(()=>Vo);return{addDoc:ae,collection:Ie,serverTimestamp:Ve}},void 0,import.meta.url),{db:q}=await Se(async()=>{const{db:ae}=await Promise.resolve().then(()=>Mo);return{db:ae}},void 0,import.meta.url),Z=(await G(j(q,"shops"),{name:D||" ",ownerId:S,createdAt:F(),updatedAt:F(),isActive:!0})).id;await Sf.create({userId:S,shopId:Z,role:"user",fullName:" ",phone:null});try{await Sf.update(S,{referralCode:U,referredBy:X||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(ae){console.warn(" Failed to update profile with referral fields:",ae)}const re=await Sf.getById(S);re&&(s(re),console.log("Updated with Firebase profile:",re))}catch(G){console.error("Error creating profile:",G),console.log("Using local profile - Firebase unavailable")}}catch(U){console.error("Error creating default profile:",U)}};b.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const T=localStorage.getItem("demoUser"),P=localStorage.getItem("demoProfile");if(T&&P){console.log(" Found demo user in localStorage");try{const R=JSON.parse(T),O=JSON.parse(P);n(R),s(O),clearTimeout(S),d(!1);return}catch(R){console.error("Error parsing demo user data:",R),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const D=Q$(mn,async R=>{if(console.log(" Auth state changed:",{uid:R==null?void 0:R.uid,email:R==null?void 0:R.email,emailVerified:R==null?void 0:R.emailVerified,timestamp:new Date().toISOString()}),n(R),R){console.log(" User authenticated, starting profile hydration for:",R.uid);try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(R.uid),f(),p(R)}else console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);clearTimeout(S)});return()=>{clearTimeout(S),D()}},[]),b.useEffect(()=>{const S=async()=>{try{await v(),await f()}catch{}};try{window.addEventListener("app:softRefresh",S)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",S)}catch{}}},[e==null?void 0:e.uid]),b.useEffect(()=>{if(!(e!=null&&e.uid))return;const S=Xr.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{S==null||S()}catch{}}},[e==null?void 0:e.uid]);const E=async(S,T,P,D,R,O)=>{try{const k=(S||"").trim().toLowerCase(),U=(T||"").trim();console.log(" Attempting to sign up user:",k);const X=await bS(mn,k,U);console.log(" Sign up successful:",X.user.uid),await m(X.user.uid,P,D,R,O),await p(X.user);try{await h(X.user.uid),await f()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(k){console.error(" Sign up error:",k);let U="    ";return k.code==="auth/email-already-in-use"?U="    ":k.code==="auth/weak-password"?U="   ":k.code==="auth/invalid-email"&&(U="   "),{error:{...k,message:U}}}},g=async(S,T)=>{var R;const P=(S||"").trim().toLowerCase(),D=(T||"").trim();try{const O=F=>F.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),k=F=>F.replace(/[-]/g,q=>String("0123456789"["".indexOf(q)])).replace(/[-]/g,q=>String("0123456789"["".indexOf(q)])),U=F=>F.replace(/[0-9]/g,q=>""[Number(q)]),X=F=>k(O(F));if(console.log(" Attempting to sign in user:",P),P==="test@example.com"&&D==="123456"){console.log(" Demo user login detected");const F={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},q={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(F)),localStorage.setItem("demoProfile",JSON.stringify(q)),n(F),s(q),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let te;const G=[X(D),O(D),U(O(D))];let j=null;for(const F of G)try{F!==D&&console.log(" Trying password variant"),te=await q$(mn,P,F);break}catch(q){if(j=q,(q==null?void 0:q.code)!=="auth/wrong-password"&&(q==null?void 0:q.code)!=="auth/invalid-credential")throw q}if(!te)throw j||new Error("auth/invalid-credential");console.log(" Sign in successful:",te.user.uid);try{if((await Ke(ce(W,"deletedUsers",te.user.uid))).exists())return console.log(" User is deleted, signing out"),await AS(mn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(F){console.error("Error checking deleted users:",F)}await p(te.user);try{await h(te.user.uid),await f()}catch{}return{error:null}}catch(O){if(console.error(" Sign in error:",O),P==="test@example.com"&&O.code==="auth/user-not-found"){console.log(" Creating test user...");try{const X=await bS(mn,P,D);return console.log(" Test user created:",X.user.uid),await m(X.user.uid," ","01000000000"," "),{error:null}}catch(X){return console.error(" Error creating test user:",X),{error:X}}}let k="    ",U=O==null?void 0:O.code;if(U==="auth/invalid-credential")try{const X=await H$(mn,((R=O==null?void 0:O.customData)==null?void 0:R.email)||"");Array.isArray(X)&&X.length===0?(U="auth/user-not-found",k="     "):(U="auth/wrong-password",k="   ")}catch{k="      "}else U==="auth/invalid-email"?k="    ":U==="auth/user-not-found"?k="     ":U==="auth/wrong-password"?k="   ":U==="auth/too-many-requests"&&(k="      ");return{error:{...O,code:U,message:k}}}},_=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await AS(mn);const P=(()=>{try{const D=typeof window<"u"?window:null,R=!!(D&&D.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),O=typeof window<"u"&&window.location.protocol==="file:",k=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return R||O||k||typeof import.meta<"u"&&Jq&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(P)}catch{window.location.href=P}}catch(S){console.error("Sign out error:",S)}},w=async S=>{try{return await z$(mn,S),{error:null}}catch(T){console.error("Reset password error:",T);let P="        ";return T.code==="auth/user-not-found"?P="     ":T.code==="auth/invalid-email"&&(P="   "),{error:{...T,message:P}}}},f=async()=>{if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{return $s(ce(W,"users",e.uid),async T=>{var P,D,R,O,k,U,X,te;if(T.exists()){const G=T.data();o(G),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:G.subscription,subscriptionExists:!!G.subscription,planType:(P=G.subscription)==null?void 0:P.planType,isActive:(D=G.subscription)==null?void 0:D.isActive,startDate:(R=G.subscription)==null?void 0:R.startDate,endDate:(O=G.subscription)==null?void 0:O.endDate,activatedBy:(k=G.subscription)==null?void 0:k.activatedBy,activatedAt:(U=G.subscription)==null?void 0:U.activatedAt,isOnFreeTrial:G.isOnFreeTrial,freeTrialEndDate:G.freeTrialEndDate,branchPackageStatus:(X=G==null?void 0:G.branchPackage)==null?void 0:X.status});const j=((te=G==null?void 0:G.branchPackage)==null?void 0:te.status)==="active";let F=!1;if(j)console.log(" Branch package is active, granting access"),F=!0;else if(G.isOnFreeTrial){console.log(" User is on free trial, checking validity...");const q=await f0.checkTrialValidity(e.uid);q.isValid&&!q.isExpired?(console.log(" Free trial is valid, granting access"),F=!0):q.isExpired?(console.log(" Free trial has expired, checking regular subscription"),F=bf(G.subscription)):(console.log(" Free trial is not valid"),F=bf(G.subscription))}else F=bf(G.subscription);l(F),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:F,isOnFreeTrial:G.isOnFreeTrial,hasActiveBranchPackage:j,reason:j?"Branch package active":G.isOnFreeTrial?"Free trial active":G.subscription?G.subscription.isActive?G.subscription.planType==="lifetime"?"Lifetime plan":G.subscription.endDate?new Date>new Date(G.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const q=G.subscription,ne=q==null?void 0:q.planType,Z=q==null?void 0:q.endDate,re=Z!=null&&Z.toDate?Z.toDate():Z?new Date(Z):null,ae=new Date,Ie=ne===Ts.MONTHLY||ne===Ts.QUARTERLY||ne===Ts.YEARLY;q&&q.isActive===!0&&Ie&&re&&!isNaN(re.getTime())&&ae>re&&(await Xq(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:ne,endDate:re}))}catch(q){console.warn("Failed to auto-deactivate expired subscription:",q)}}},T=>{console.error(" Subscription listener error:",T)})}catch(S){console.error("Error setting up subscription listener:",S)}},v=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await f()}catch(S){console.error("Error refreshing profile:",S)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:E,signIn:g,signOut:_,resetPassword:w,updateUserProfile:async S=>{if(e)try{const T={updatedAt:ye()};if(S.fullName!==void 0&&(T.fullName=S.fullName),S.phone!==void 0&&(T.phone=S.phone),S.bridgeLink!==void 0){const P=(S.bridgeLink||"").trim();T.bridgeLink=P.length?P:null}if(S.bridgeDeviceId!==void 0){const P=(S.bridgeDeviceId||"").trim();T.bridgeDeviceId=P.length?P:null}S.showWithdrawNote!==void 0&&(T.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(T.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),await rt(ce(W,"profiles",e.uid),T),await h(e.uid)}catch(T){console.error("Error updating user profile:",T)}},updateAvatarId:async S=>{if(e)try{await rt(ce(W,"profiles",e.uid),{avatarId:S,updatedAt:ye()}),await h(e.uid)}catch(T){console.error("Error updating avatarId:",T)}},refreshProfile:v,checkSubscriptionStatus:f};return x.jsx(pO.Provider,{value:L,children:t})};function eW(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Xm="Checkbox",[tW]=nc(Xm),[nW,p0]=tW(Xm);function rW(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[p,m]=R_({prop:n,defaultProp:s??!1,onChange:l,caller:Xm}),[E,g]=b.useState(null),[_,w]=b.useState(null),f=b.useRef(!1),v=E?!!o||!!E.closest("form"):!0,A={checked:p,disabled:i,setChecked:m,control:E,setControl:g,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:f,required:c,defaultChecked:qi(s)?!1:s,isFormControl:v,bubbleInput:_,setBubbleInput:w};return x.jsx(nW,{scope:e,...A,children:sW(h)?h(A):r})}var mO="CheckboxTrigger",gO=b.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:E}=p0(mO,t),g=Yt(s,d),_=b.useRef(l);return b.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const f=()=>h(_.current);return w.addEventListener("reset",f),()=>w.removeEventListener("reset",f)}},[i,h]),x.jsx(ft.button,{type:"button",role:"checkbox","aria-checked":qi(l)?"mixed":l,"aria-required":c,"data-state":EO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:Qe(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Qe(n,w=>{h(f=>qi(f)?!0:!f),E&&m&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})})});gO.displayName=mO;var m0=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return x.jsx(rW,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:p})=>x.jsxs(x.Fragment,{children:[x.jsx(gO,{...h,ref:e,__scopeCheckbox:n}),p&&x.jsx(_O,{__scopeCheckbox:n})]})})});m0.displayName=Xm;var yO="CheckboxIndicator",vO=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=p0(yO,n);return x.jsx(_a,{present:r||qi(i.checked)||i.checked===!0,children:x.jsx(ft.span,{"data-state":EO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});vO.displayName=yO;var wO="CheckboxBubbleInput",_O=b.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:p,setBubbleInput:m}=p0(wO,t),E=Yt(n,m),g=eW(i),_=k1(r);b.useEffect(()=>{const f=p;if(!f)return;const v=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(v,"checked").set,L=!s.current;if(g!==i&&C){const S=new Event("click",{bubbles:L});f.indeterminate=qi(i),C.call(f,qi(i)?!1:i),f.dispatchEvent(S)}},[p,g,i,s]);const w=b.useRef(qi(i)?!1:i);return x.jsx(ft.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:E,style:{...e.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});_O.displayName=wO;function sW(t){return typeof t=="function"}function qi(t){return t==="indeterminate"}function EO(t){return qi(t)?"indeterminate":t?"checked":"unchecked"}const TO=b.forwardRef(({className:t,...e},n)=>x.jsx(m0,{ref:n,className:Xt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:x.jsx(vO,{className:Xt("flex items-center justify-center text-current"),children:x.jsx(fF,{className:"h-4 w-4"})})}));TO.displayName=m0.displayName;const xw=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(!1),[l,c]=b.useState(!0),{signIn:d,user:h}=Ia(),p=ac();b.useEffect(()=>{try{const _=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;_&&e(_)}catch{}try{const _=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;_==="true"?c(!0):_==="false"&&c(!1)}catch{}(async()=>{var _,w;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const f=await((w=(_=navigator.credentials).get)==null?void 0:w.call(_,{password:!0,mediation:"optional"}));f&&f.type==="password"&&(f.id&&e(f.id),f.password&&r(f.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const f=sessionStorage.getItem("cashy:rememberedPassword");f&&!n&&r(f)}catch{}}catch{}})()},[]);const m=async _=>{if(_.preventDefault(),o){_t.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){_t.error("   .      .");return}const w=(t||"").trim().toLowerCase(),f=(n||"").trim();if(console.log("    :",{email:w,password:"***"}),!t||!n){_t.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(w)){_t.error("    ");return}a(!0);try{try{await G$(mn,l?XC:J$);try{window.localStorage.setItem("cashy:rememberLogin",l?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:v}=await d(w,f);if(console.log(" SignIn result:",{error:v}),v){console.error("    :",v);const A=v==null?void 0:v.code;A==="auth/user-not-found"?_t.error("     "):A==="auth/wrong-password"?_t.error("   "):A==="auth/invalid-credential"?_t.error("      "):A==="auth/too-many-requests"?_t.error("      "):_t.error((v==null?void 0:v.message)||"    ")}else{console.log("    !"),_t.success("   !");try{if(l&&navigator.credentials&&window.PasswordCredential){const A=new window.PasswordCredential({id:w,name:w,password:f});await navigator.credentials.store(A)}if(l)try{sessionStorage.setItem("cashy:rememberedPassword",f)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}p("/user/dashboard")}}catch(v){console.error("   :",v),_t.error("   ")}finally{a(!1)}},E=_=>{if(o){_.preventDefault(),_.stopPropagation(),_t.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){_.preventDefault(),_.stopPropagation(),_t.error("   .      .");return}t||_t.error("   "),n||_t.error("   ");const w=(t||"").trim().toLowerCase();w&&!/^\S+@\S+\.\S+$/.test(w)&&_t.error("    ")},g=()=>{p("/user/forgot-password")};return b.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const _=document.documentElement,w=document.body,f=_.style.overflow,v=w.style.overflow,A=_.style.overscrollBehaviorY,C=w.style.overscrollBehaviorY;return _.style.overflow="hidden",w.style.overflow="hidden",_.style.overscrollBehaviorY="none",w.style.overscrollBehaviorY="none",()=>{_.style.overflow=f||"",w.style.overflow=v||"",_.style.overscrollBehaviorY=A||"",w.style.overscrollBehaviorY=C||""}},[]),x.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:x.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:x.jsx(AF,{className:"w-10 h-10 text-white"})}),x.jsx("div",{className:"flex items-center justify-center mb-2",children:x.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),x.jsx("p",{className:"text-white/80",children:"    "})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[x.jsxs("form",{onSubmit:m,className:"space-y-6",autoComplete:"on",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(II,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Uv,{id:"username",type:"email",placeholder:"  ",value:t,onChange:_=>{const w=_.target.value;e(w);try{window.localStorage.setItem("cashy:lastEmail",w)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),x.jsxs("div",{className:"relative",children:[x.jsx(_F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),x.jsx(Uv,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:_=>r(_.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),x.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?x.jsx(gF,{className:"w-5 h-5"}):x.jsx(yF,{className:"w-5 h-5"})})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[x.jsx(TO,{id:"rememberLogin",checked:l,onCheckedChange:_=>c(!!_)}),x.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),x.jsx("div",{className:"flex justify-end",children:x.jsxs(wu,{type:"button",variant:"ghost",size:"sm",onClick:g,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[x.jsx(II,{className:"w-4 h-4 ml-1"}),"  "]})}),x.jsx("button",{type:"submit",onClick:E,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):x.jsxs("div",{className:"flex items-center justify-center",children:[x.jsx(uF,{className:"w-5 h-5 ml-2"})," "]})})]}),x.jsxs("div",{className:"mt-6 text-center space-y-3",children:[x.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",x.jsx(o6,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),x.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",x.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",x.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),x.jsx("div",{className:"mt-6 text-center",children:x.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},iW=()=>{const t=ac(),e=hs(),{signOut:n,user:r,userSubscription:s}=Ia(),{toast:i}=x_(),[o,a]=b.useState(!1),[l,c]=b.useState(!1),d=[{id:"home",label:"",icon:wF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:vF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:dF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:SI,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:cF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:Hg,path:"/transactions"},{id:"settings",label:"",icon:bI,path:"/profile-settings"}],h=[{id:"installment",label:"",icon:hF,action:()=>{var _;a(!1);const g=(_=s==null?void 0:s.subscription)==null?void 0:_.planType;if(g===Ts.TAHWEELA||g===Ts.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:xF,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:mF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:SF,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:Hg,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:bF,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:SI,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:pF,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:EF,action:()=>{a(!1);const _=`   
  : ${(r==null?void 0:r.email)||" "}`,w=encodeURIComponent(_);window.open(`https://wa.me/201000392539?text=${w}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:TI,action:async()=>{a(!1);try{await n()}catch(g){console.error("Logout error:",g)}},color:"#EF4444"}],p=[{id:"shop-expenses-settings",label:" ",icon:Hg,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:bI,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:TI,action:async()=>{c(!1);try{await n()}catch(g){console.error("Logout error:",g)}},color:"#EF4444"}],m=(g,_,w,f)=>{var S;const A=((S=s==null?void 0:s.subscription)==null?void 0:S.planType)===Ts.TAHWEELA,C=T=>["/user/dashboard","/profile-settings"].includes(T),L=T=>T==="debts";if(w){if(A&&!L(f)&&!C(g)){i({title:"  ",description:"      .",variant:"destructive"});return}w()}else if(_&&g==="/add"){if(A){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!_){if(A&&!C(g)){i({title:"  ",description:"      .",variant:"destructive"});return}t(g)}},E=g=>e.pathname===g;return x.jsxs("div",{className:"mobile-bottom-nav",children:[o&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),x.jsx("div",{className:"floating-actions-container",children:h.map((g,_)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var f;if(((f=s==null?void 0:s.subscription)==null?void 0:f.planType)===Ts.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:x.jsx(g.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),l&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),x.jsx("div",{className:"floating-actions-container",children:p.map((g,_)=>x.jsxs("div",{className:"floating-action-button",onClick:()=>{var v;const w=(v=s==null?void 0:s.subscription)==null?void 0:v.planType,f=new Set(["logout","profile-settings"]);if(w===Ts.TAHWEELA&&!f.has(g.id)){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${_*.1}s`},children:[x.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:x.jsx(g.icon,{className:"action-icon"})}),x.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),x.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(g=>{const _=g.icon,w=E(g.path);return x.jsxs("button",{onClick:()=>m(g.path,g.isSpecial,g.action,g.id),className:`mobile-nav-item ${w?"active":""} ${g.isSpecial?"special":""}`,type:"button","aria-label":g.label,children:[x.jsx("div",{className:`nav-icon-container ${g.isSpecial?"special-icon":""} ${g.isSpecial&&g.id==="add"&&o?"special-open":""}`,children:x.jsx(_,{className:`nav-icon ${w?"active-icon":""} ${g.isSpecial?"special-icon-svg":""} ${g.isSpecial&&g.id==="add"&&o?"rotated":""} ${g.isSpecial&&g.id==="settings"&&l?"rotated":""}`})}),!g.isSpecial&&x.jsx("span",{className:`nav-label ${w?"active-label":""}`,children:g.label})]},g.id)})})]})};var ax,lx;const Fo=(lx=(ax=import.meta)==null?void 0:ax.env)==null?void 0:lx.VITE_ANDROID_DOWNLOAD_URL;var cx,ux;const Uo=(ux=(cx=import.meta)==null?void 0:cx.env)==null?void 0:ux.VITE_PC_DOWNLOAD_URL;var dx,hx;const jo=(hx=(dx=import.meta)==null?void 0:dx.env)==null?void 0:hx.VITE_PC32_DOWNLOAD_URL;var fx,px;const Bo=(px=(fx=import.meta)==null?void 0:fx.env)==null?void 0:px.VITE_ANDROID_VERSION;var mx,gx;const $o=(gx=(mx=import.meta)==null?void 0:mx.env)==null?void 0:gx.VITE_PC_VERSION;var yx,vx;const zo=(vx=(yx=import.meta)==null?void 0:yx.env)==null?void 0:vx.VITE_PC32_VERSION;function Et(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function oW(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const no=["siteContent","appDownloads"],jp=["siteContent","desktop_updates"],Bp=["siteContent","android_updates"],_d="appDownloadsCache";function aW(){try{const e=localStorage.getItem(_d);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||Fo,pcUrl:(n==null?void 0:n.pcUrl)||Uo,pc32Url:(n==null?void 0:n.pc32Url)||jo,androidVersion:(n==null?void 0:n.androidVersion)||Bo,pcVersion:(n==null?void 0:n.pcVersion)||$o,pc32Version:(n==null?void 0:n.pc32Version)||zo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=Et(r.pcUrl)),r.androidVersion||(r.androidVersion=Et(r.androidUrl)),r.pc32Version||(r.pc32Version=Et(r.pc32Url)),r}}catch{}const t={androidUrl:Fo,pcUrl:Uo,pc32Url:jo,androidVersion:Bo,pcVersion:$o,pc32Version:zo};return t.pcVersion||(t.pcVersion=Et(t.pcUrl)),t.androidVersion||(t.androidVersion=Et(t.androidUrl)),t.pc32Version||(t.pc32Version=Et(t.pc32Url)),t}async function lW(){try{const t=await Ke(ce(W,no[0],no[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(_d,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||Fo,pcUrl:(n==null?void 0:n.pcUrl)||Uo,pc32Url:(n==null?void 0:n.pc32Url)||jo,androidVersion:(n==null?void 0:n.androidVersion)||Bo,pcVersion:(n==null?void 0:n.pcVersion)||$o,pc32Version:(n==null?void 0:n.pc32Version)||zo,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=Et(r.pcUrl)),r.androidVersion||(r.androidVersion=Et(r.androidUrl)),r.pc32Version||(r.pc32Version=Et(r.pc32Url)),r}const e={androidUrl:Fo,pcUrl:Uo,pc32Url:jo,androidVersion:Bo,pcVersion:$o,pc32Version:zo};return e.pcVersion||(e.pcVersion=Et(e.pcUrl)),e.androidVersion||(e.androidVersion=Et(e.androidUrl)),e.pc32Version||(e.pc32Version=Et(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(_d);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||Fo,pcUrl:(i==null?void 0:i.pcUrl)||Uo,pc32Url:(i==null?void 0:i.pc32Url)||jo,androidVersion:(i==null?void 0:i.androidVersion)||Bo,pcVersion:(i==null?void 0:i.pcVersion)||$o,pc32Version:(i==null?void 0:i.pc32Version)||zo,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=Et(o.pcUrl)),o.androidVersion||(o.androidVersion=Et(o.androidUrl)),o.pc32Version||(o.pc32Version=Et(o.pc32Url)),o}}catch{}const r={androidUrl:Fo,pcUrl:Uo,pc32Url:jo,androidVersion:Bo,pcVersion:$o,pc32Version:zo};return r.pcVersion||(r.pcVersion=Et(r.pcUrl)),r.androidVersion||(r.androidVersion=Et(r.androidUrl)),r.pc32Version||(r.pc32Version=Et(r.pc32Url)),r}}function cW(t){try{const e=ce(W,no[0],no[1]);return $s(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||Fo,pcUrl:(s==null?void 0:s.pcUrl)||Uo,pc32Url:(s==null?void 0:s.pc32Url)||jo,androidVersion:(s==null?void 0:s.androidVersion)||Bo,pcVersion:(s==null?void 0:s.pcVersion)||$o,pc32Version:(s==null?void 0:s.pc32Version)||zo,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=Et(i.pcUrl)),i.androidVersion||(i.androidVersion=Et(i.androidUrl)),i.pc32Version||(i.pc32Version=Et(i.pc32Url));try{localStorage.setItem(_d,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(_d);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function uW(t,e,n,r,s,i=12e4){const o=oO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=Vq(o,l);return new Promise((d,h)=>{const p=Oq(c,t);let m=!1;const E=setTimeout(()=>{m=!0;try{p.cancel()}catch{}h(new Error("Upload timed out"))},i);p.on("state_changed",g=>{const _=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(_)},g=>{clearTimeout(E),h(g)},async()=>{try{if(clearTimeout(E),m)return;const g=await Lq(c),_={updatedAt:ye(),updatedBy:n||"admin"};e==="android"?(_.androidUrl=g,r&&(_.androidVersion=r)):e==="pc"?(_.pcUrl=g,r&&(_.pcVersion=r)):(_.pc32Url=g,r&&(_.pc32Version=r));const w=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),f=qt(ce(W,no[0],no[1]),_,{merge:!0});let v=!1;const A=new Promise(C=>setTimeout(()=>{v=!0,C()},w));try{await Promise.race([f,A])}catch(C){console.warn(" Firestore write error, proceeding with URL only:",C)}v&&console.warn(" Firestore update timed out;             ."),d(g)}catch(g){h(g)}})})}async function dW(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ye(),updatedBy:e||"admin"};await qt(ce(W,no[0],no[1]),r,{merge:!0})}async function hW(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ye(),updatedBy:e||"admin"};await qt(ce(W,jp[0],jp[1]),r,{merge:!0})}function IO(t){try{const e=ce(W,jp[0],jp[1]);return $s(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function SO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function fW(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:ye(),updatedBy:e||"admin"};await qt(ce(W,Bp[0],Bp[1]),r,{merge:!0})}function pW(t){try{const e=ce(W,Bp[0],Bp[1]);return $s(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force)};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const mW=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:lW,getCachedOrEnvAppDownloads:aW,listenAndroidUpdates:pW,listenAppDownloads:cW,listenDesktopUpdates:IO,resolveDownloadUrl:oW,selectDesktopUrl:SO,setAndroidUpdateInfo:fW,setAppDownloadLinks:dW,setDesktopUpdateInfo:hW,uploadAppBinaryResumable:uW},Symbol.toStringTag,{value:"Module"})),gW=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=z.useState(!1),[s,i]=z.useState(!1),[o,a]=z.useState(!1),[l,c]=z.useState(0),[d,h]=z.useState(""),[p,m]=z.useState(!1),E=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(C){console.warn("failed to minimize",C)}},g=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(C){console.warn("failed to close",C)}},_=async()=>{if(!p){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(C){console.warn("failed to soft refresh",C),m(!1)}}};if(z.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(C=>{const L=(C==null?void 0:C.percent)==null?0:Number(C.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(C){console.warn("update init failed",C)}},[e,t]),z.useEffect(()=>{const C=IO(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const T=SO({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(T)}});return()=>{try{C()}catch{}}},[]),!e)return null;const[f,v]=z.useState(!1),A=async()=>{try{if(!t)return;f?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),v(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),v(!0))}catch(C){console.warn("window toggle failed",C)}};return x.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[x.jsx("button",{type:"button","aria-label":"",title:"",onClick:g,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:x.jsx(N_,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:_,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(l1,{className:`w-5 h-5 ${p?"animate-spin":""}`})}),x.jsx("button",{type:"button","aria-label":"",title:"",onClick:E,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(TF,{className:"w-5 h-5"})}),x.jsx("button",{type:"button","aria-label":"/",title:f?"  ":"   ",onClick:A,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:x.jsx(IF,{className:"w-5 h-5"})})]})},Pw=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=b.useState(`${n}logo.svg`),[i,o]=b.useState(0),a=b.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return x.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),x.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Jl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Jl||(Jl={}));class _y extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const yW=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},vW=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:yW(t),i=()=>s()!=="web",o=h=>{const p=c.get(h);return!!(p!=null&&p.platforms.has(s())||a(h))},a=h=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,p={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const E=s(),g=a(h);let _;const w=async()=>(!_&&E in p?_=typeof p[E]=="function"?_=await p[E]():_=p[E]:e!==null&&!_&&"web"in p&&(_=typeof p.web=="function"?_=await p.web():_=p.web),_),f=(T,P)=>{var D,R;if(g){const O=g==null?void 0:g.methods.find(k=>P===k.name);if(O)return O.rtype==="promise"?k=>n.nativePromise(h,P.toString(),k):(k,U)=>n.nativeCallback(h,P.toString(),k,U);if(T)return(D=T[P])===null||D===void 0?void 0:D.bind(T)}else{if(T)return(R=T[P])===null||R===void 0?void 0:R.bind(T);throw new _y(`"${h}" plugin is not implemented on ${E}`,Jl.Unimplemented)}},v=T=>{let P;const D=(...R)=>{const O=w().then(k=>{const U=f(k,T);if(U){const X=U(...R);return P=X==null?void 0:X.remove,X}else throw new _y(`"${h}.${T}()" is not implemented on ${E}`,Jl.Unimplemented)});return T==="addListener"&&(O.remove=async()=>P()),O};return D.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:T,writable:!1,configurable:!1}),D},A=v("addListener"),C=v("removeListener"),L=(T,P)=>{const D=A({eventName:T},P),R=async()=>{const k=await D;C({eventName:T,callbackId:k},P)},O=new Promise(k=>D.then(()=>k({remove:R})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},O},S=new Proxy({},{get(T,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?L:A;case"removeListener":return C;default:return v(P)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(p),...g?[E]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=_y,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},wW=t=>t.Capacitor=vW(t),me=wW(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),g0=me.registerPlugin;class bO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new me.Exception(e,Jl.Unimplemented)}unavailable(e="not available"){return new me.Exception(e,Jl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const dA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),hA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class _W extends bO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=hA(s).trim(),i=hA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=dA(e.key),r=dA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}g0("CapacitorCookies",{web:()=>new _W});const EW=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),TW=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},IW=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,SW=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=TW(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class bW extends bO{async request(e){const n=SW(e,e.webFetchExtra),r=IW(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await EW(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,p)=>{d[p]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}g0("CapacitorHttp",{web:()=>new bW});const Er={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Xr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Xr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Xr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=Er.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(i=>!s.includes(i.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=Er.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Xr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=Er.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=Er.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=Er.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Xr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const s=Math.max(0,Number(t.commission||0));return Math.round((s+Math.max(0,e))*100)/100}const n=String(t.type||"").toLowerCase(),r=n==="withdrawal"?"withdraw":n;if(r==="withdraw"||r==="receive"||r==="send"||r==="transfer"){const s=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((s+Math.max(0,e))*100)/100}return 0}},AW=Er,LK=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:AW,reportsService:Er},Symbol.toStringTag,{value:"Module"}));class xW{constructor(){lh(this,"intervalId",null);lh(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=mn.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await Aw.getToday(n);await Aw.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await Er.syncReportsDataFromFirebase(e);const n=Er.getReportsData(e);if(!n.lastDailyResetDate||!Er.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Xr.getUserTransactions(e),l=f=>{const v=String(f||"").toLowerCase();return["completed","confirmed","success"].includes(v)?"completed":["failed","error"].includes(v)?"failed":["cancelled","canceled"].includes(v)?"cancelled":"pending"},c=(a||[]).filter(f=>{var A,C;const v=(A=f==null?void 0:f.createdAt)!=null&&A.toDate?f.createdAt.toDate():(f==null?void 0:f.createdAt)instanceof Date?f.createdAt:new Date(f==null?void 0:f.createdAt);return((C=v==null?void 0:v.toDateString)==null?void 0:C.call(v))===o&&l(f==null?void 0:f.status)==="completed"}),d=c.length,h=c.reduce((f,v)=>f+Number(v.amount||0),0),p=f=>{const v=String(((f==null?void 0:f.type)??(f==null?void 0:f.txnType))||"").toLowerCase();return v==="withdraw"||v==="withdrawal"||v==="receive"},m=f=>{const v=String(((f==null?void 0:f.type)??(f==null?void 0:f.txnType))||"").toLowerCase();return v==="send"||v==="transfer"},E=c.filter(p).reduce((f,v)=>{const A=v.withdrawnAmount!==void 0?Number(v.withdrawnAmount):Number(v.amount||0);return f+A},0),g=c.filter(m).reduce((f,v)=>{const A=v.sentAmount!==void 0?Number(v.sentAmount):Number(v.amount||0);return f+A},0),_=c.reduce((f,v)=>f+Number(Er.calculateTransactionProfit(v)||0),0),w=new Date(i).toISOString().slice(0,10);await fO.add({userId:e,reportDate:w,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(E.toFixed(2)),totalSent:Number(g.toFixed(2)),profit:Number(_.toFixed(2)),walletId:null}),console.log("    :",w)}catch(n){console.warn("      :",n)}}}const fA=new xW,Ey=768;function AO(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Ey-1}px)`),r=()=>{e(window.innerWidth<Ey)};return n.addEventListener("change",r),e(window.innerWidth<Ey),()=>n.removeEventListener("change",r)},[]),!!t}function PW(){const t=AO(),[e,n]=b.useState("default"),[r,s]=b.useState(!1);return b.useEffect(()=>{const o=localStorage.getItem("notificationConsentRequested")==="true";if(s(o),o){const a=localStorage.getItem("notificationPermission");(a==="granted"||a==="denied"||a==="default")&&n(a);return}t&&typeof window<"u"&&("Notification"in window?Notification.requestPermission().then(a=>{n(a),localStorage.setItem("notificationPermission",a),localStorage.setItem("notificationConsentRequested","true"),s(!0)}).catch(()=>{n("default"),localStorage.setItem("notificationConsentRequested","true"),s(!0)}):(n("unsupported"),localStorage.setItem("notificationConsentRequested","true"),s(!0)))},[t]),{permission:e,hasRequested:r,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const o=await Notification.requestPermission();return n(o),localStorage.setItem("notificationPermission",o),localStorage.setItem("notificationConsentRequested","true"),s(!0),o}return"unsupported"}}}const pA=g0("AppLauncher",{web:()=>Se(()=>import("./web-B--SEpkd.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function RW(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{me&&me.getPlatform()!=="web"&&(pA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{me&&me.getPlatform()!=="web"&&pA.openUrl({url:n})}catch{}}}function xO(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function CW(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?xO(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function VK(t,e,n){const r=xO(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function DW(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function kW(t){const e=DW(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function MK(t,e,n){const r=CW(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=kW(t||e);RW(r,s)}async function NW(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function y0(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function OW(t,e,n=0){const r=y0(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const LW=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:y0,calculateProfit:OW},Symbol.toStringTag,{value:"Module"})),VW=t=>t==="withdraw"||t==="receive"?"receive":"send",MW=async t=>{if(!t)return null;const e=ge(de(W,"transactions"),pe("reference","==",t),zi(1)),n=await _e(e);return n.empty?null:n.docs[0].id},FW=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await MW(t.reference);if(e)return{id:e,duplicate:!0};const n=VW(t.type),r={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:t.walletId,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:n==="send"?t.senderMsisdn:void 0,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},s=await uO.create(r);try{const i="  ",o=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await NW(o,i)}catch(i){console.warn("   :",i)}try{const i=t.merchantUserId||t.createdBy;if(i){const o=n==="receive"?"withdraw":"send",a=y0(t.amount,n);await Xr.saveUserTransaction(i,{type:o,amount:t.amount,commission:a,status:"completed",createdAt:new Date,senderMsisdn:o==="transfer"?t.senderMsisdn:void 0,receiverMsisdn:t.receiverMsisdn,walletId:t.walletId,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:s})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(i){console.warn("      userTransactions   :",i)}return{id:s,duplicate:!1}};function UW(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return"SMS_"+Math.abs(e).toString(36)}function jW(t){const e=t.toLowerCase();return e.includes("")||e.includes("withdraw")?"withdraw":(e.includes("")||e.includes("transfer")||e.includes(" "),"transfer")}function BW(t){const n=t.replace(/,/g,"").match(/(\d{1,9}(?:\.\d{1,2})?)/);return n?parseFloat(n[1]):null}function $W(t){const e=t.toLowerCase();if(e.includes("")||e.includes("vodafone"))return"vodafone_cash";if(e.includes("")||e.includes("orange"))return"orange_cash";if(e.includes("")||e.includes("etisalat"))return"etisalat_cash";if(e.includes("instapay")||e.includes(" ")||e.includes(""))return"instapay"}function zW(t={}){if(typeof window>"u")return()=>{};const e=t.createdBy||"mobile_sms_bridge",n=async r=>{const i=r.detail||{};try{let o=null;if(i&&i.payload)o=i.payload,o.shopId=o.shopId||t.shopId,o.lineId=o.lineId||t.lineId,o.provider=o.provider||t.provider,o.createdBy=o.createdBy||e;else if(i&&i.text){const l=i.text,c=jW(l),d=BW(l),h=i.msisdn,p=i.sender||void 0,m=$W(l)||t.provider;if(!t.shopId||!m){console.warn("SMS integration missing identifiers. Provide shopId and provider in initSmsIntegration."),_t.warning("   SMS   (  )");return}let E=t.lineId,g;try{const _=i.msisdn||"",w=typeof i.slot=="number"?i.slot:void 0,f=typeof i.subId=="number"?i.subId:void 0;if(_){const A=await cO.getByShopId(t.shopId);if(A&&A.length>0){const L=_.replace(/\D/g,"").slice(-7),S=A.find(T=>String(T.msisdn||"").replace(/\D/g,"").slice(-7)===L);if(S&&(E=S.id),!E&&typeof w=="number"){const T=A==null?void 0:A.find(P=>Number(P.slot)===Number(w));T&&(E=T.id)}}}const v=i.iccid||"";if(v){const A=await Up.getByIccid(v);A&&(g=A.id)}if(!g&&h){const A=await Up.getByMsisdn(h);A&&(g=A.id)}}catch{}if(!g){_t.warning("  :        ");return}o={type:c,amount:d||0,provider:m,shopId:t.shopId,lineId:String(E||""),walletId:g,receiverMsisdn:h,senderMsisdn:p,iccid:i.iccid,slot:i.slot,subId:i.subId,reference:i.reference||UW(l),createdBy:e,note:"Parsed from SMS"}}if(!o)return;if((await FW(o)).duplicate)_t.info("      SMS");else{const l=o.type==="withdraw"?"":"";_t.success(`  ${l}    SMS`)}}catch(o){console.error("Failed to process mobile SMS notification:",o),_t.error("     SMS")}};return window.addEventListener("mobileSmsReceived",n),()=>window.removeEventListener("mobileSmsReceived",n)}async function qW(t,e="android",n){var l,c,d,h,p;const r=n||((l=mn.currentUser)==null?void 0:l.uid)||"";if(!r)throw new Error("  userId   ");const s=(d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_PUSH_REGISTER_ENDPOINT,i=(p=(h=import.meta)==null?void 0:h.env)==null?void 0:p.VITE_PUSH_NOTIFICATIONS_API_KEY,o={userId:r,platform:e,token:t};if(s){const m=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(o)});if(m.ok)return m.json()}const a=await fetch("/api/devices/save-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error(`  : ${a.status}`);return a.json()}async function WW(t,e="android",n){return await o0(Ym,"saveDeviceToken")({token:t,platform:e,userId:n})}async function FK(t,e=" ",n="    50 ",r={type:"transfer",amount:"50",txId:"12345"}){const i=await o0(Ym,"sendFcmToUser")({userId:t,title:e,body:n,data:r});return(i==null?void 0:i.data)??i}function PO(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||window.__fcmToken||"";if(!r)return;const s=((n=mn.currentUser)==null?void 0:n.uid)||"";if(!s){console.warn("FCM bridge:           ");return}try{await WW(r,"android",s)}catch{await qW(r,"android",s)}console.log("    FCM  :",s)}catch(r){console.error("    FCM  :",r)}};window.addEventListener("fcm-token",t);try{const e=window.__fcmToken;e&&t(new CustomEvent("fcm-token",{detail:e}))}catch{}return()=>{window.removeEventListener("fcm-token",t)}}async function HW(){var t,e,n;try{if(!(me!=null&&me.isNativePlatform))return!1;const r=me.getPlatform();if(localStorage.getItem("nativePushRequested")==="true")return!1;const i=((t=me.Plugins)==null?void 0:t.PushNotifications)||window.PushNotifications;if(!i){if(typeof window<"u"&&"Notification"in window&&typeof Notification.requestPermission=="function")try{await Notification.requestPermission()}catch{}return localStorage.setItem("nativePushRequested","true"),!1}try{await((e=i.requestPermissions)==null?void 0:e.call(i))}catch{}try{await((n=i.register)==null?void 0:n.call(i))}catch{}return localStorage.setItem("nativePushRequested","true"),!0}catch{return!1}}var Ty="focusScope.autoFocusOnMount",Iy="focusScope.autoFocusOnUnmount",mA={bubbles:!1,cancelable:!0},KW="FocusScope",RO=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=b.useState(null),c=as(s),d=as(i),h=b.useRef(null),p=Yt(e,g=>l(g)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let g=function(v){if(m.paused||!a)return;const A=v.target;a.contains(A)?h.current=A:hi(h.current,{select:!0})},_=function(v){if(m.paused||!a)return;const A=v.relatedTarget;A!==null&&(a.contains(A)||hi(h.current,{select:!0}))},w=function(v){if(document.activeElement===document.body)for(const C of v)C.removedNodes.length>0&&hi(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",_);const f=new MutationObserver(w);return a&&f.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",_),f.disconnect()}}},[r,a,m.paused]),b.useEffect(()=>{if(a){yA.add(m);const g=document.activeElement;if(!a.contains(g)){const w=new CustomEvent(Ty,mA);a.addEventListener(Ty,c),a.dispatchEvent(w),w.defaultPrevented||(GW(ZW(CO(a)),{select:!0}),document.activeElement===g&&hi(a))}return()=>{a.removeEventListener(Ty,c),setTimeout(()=>{const w=new CustomEvent(Iy,mA);a.addEventListener(Iy,d),a.dispatchEvent(w),w.defaultPrevented||hi(g??document.body,{select:!0}),a.removeEventListener(Iy,d),yA.remove(m)},0)}}},[a,c,d,m]);const E=b.useCallback(g=>{if(!n&&!r||m.paused)return;const _=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(_&&w){const f=g.currentTarget,[v,A]=QW(f);v&&A?!g.shiftKey&&w===A?(g.preventDefault(),n&&hi(v,{select:!0})):g.shiftKey&&w===v&&(g.preventDefault(),n&&hi(A,{select:!0})):w===f&&g.preventDefault()}},[n,r,m.paused]);return x.jsx(ft.div,{tabIndex:-1,...o,ref:p,onKeyDown:E})});RO.displayName=KW;function GW(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(hi(r,{select:e}),document.activeElement!==n)return}function QW(t){const e=CO(t),n=gA(e,t),r=gA(e.reverse(),t);return[n,r]}function CO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function gA(t,e){for(const n of t)if(!YW(n,{upTo:e}))return n}function YW(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function XW(t){return t instanceof HTMLInputElement&&"select"in t}function hi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&XW(t)&&e&&t.select()}}var yA=JW();function JW(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=vA(t,e),t.unshift(e)},remove(e){var n;t=vA(t,e),(n=t[0])==null||n.resume()}}}function vA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function ZW(t){return t.filter(e=>e.tagName!=="A")}var Sy=0;function eH(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wA()),document.body.insertAdjacentElement("beforeend",t[1]??wA()),Sy++,()=>{Sy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Sy--}},[])}function wA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Jr=function(){return Jr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jr.apply(this,arguments)};function DO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function tH(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Af="right-scroll-bar-position",xf="width-before-scroll-bar",nH="with-scroll-bars-hidden",rH="--removed-body-scroll-bar-size";function by(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function sH(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var iH=typeof window<"u"?b.useLayoutEffect:b.useEffect,_A=new WeakMap;function oH(t,e){var n=sH(null,function(r){return t.forEach(function(s){return by(s,r)})});return iH(function(){var r=_A.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||by(a,null)}),i.forEach(function(a){s.has(a)||by(a,o)})}_A.set(n,t)},[t]),n}function aH(t){return t}function lH(t,e){e===void 0&&(e=aH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function cH(t){t===void 0&&(t={});var e=lH(null);return e.options=Jr({async:!0,ssr:!1},t),e}var kO=function(t){var e=t.sideCar,n=DO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Jr({},n))};kO.isSideCarExport=!0;function uH(t,e){return t.useMedium(e),kO}var NO=cH(),Ay=function(){},Jm=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:Ay,onWheelCapture:Ay,onTouchMoveCapture:Ay}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,p=t.sideCar,m=t.noRelative,E=t.noIsolation,g=t.inert,_=t.allowPinchZoom,w=t.as,f=w===void 0?"div":w,v=t.gapMode,A=DO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,L=oH([n,e]),S=Jr(Jr({},A),s);return b.createElement(b.Fragment,null,d&&b.createElement(C,{sideCar:NO,removeScrollBar:c,shards:h,noRelative:m,noIsolation:E,inert:g,setCallbacks:i,allowPinchZoom:!!_,lockRef:n,gapMode:v}),o?b.cloneElement(b.Children.only(a),Jr(Jr({},S),{ref:L})):b.createElement(f,Jr({},S,{className:l,ref:L}),a))});Jm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jm.classNames={fullWidth:xf,zeroRight:Af};var dH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=dH();return e&&t.setAttribute("nonce",e),t}function fH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function pH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var mH=function(){var t=0,e=null;return{add:function(n){t==0&&(e=hH())&&(fH(e,n),pH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},gH=function(){var t=mH();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},OO=function(){var t=gH(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},yH={left:0,top:0,right:0,gap:0},xy=function(t){return parseInt(t||"",10)||0},vH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[xy(n),xy(r),xy(s)]},wH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return yH;var e=vH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},_H=OO(),pl="data-scroll-locked",EH=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(nH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(pl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Af,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xf,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Af," .").concat(Af,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xf," .").concat(xf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pl,`] {
    `).concat(rH,": ").concat(a,`px;
  }
`)},EA=function(){var t=parseInt(document.body.getAttribute(pl)||"0",10);return isFinite(t)?t:0},TH=function(){b.useEffect(function(){return document.body.setAttribute(pl,(EA()+1).toString()),function(){var t=EA()-1;t<=0?document.body.removeAttribute(pl):document.body.setAttribute(pl,t.toString())}},[])},IH=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;TH();var i=b.useMemo(function(){return wH(s)},[s]);return b.createElement(_H,{styles:EH(i,!e,s,n?"":"!important")})},Rw=!1;if(typeof window<"u")try{var zh=Object.defineProperty({},"passive",{get:function(){return Rw=!0,!0}});window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{Rw=!1}var Ma=Rw?{passive:!1}:!1,SH=function(t){return t.tagName==="TEXTAREA"},LO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!SH(t)&&n[e]==="visible")},bH=function(t){return LO(t,"overflowY")},AH=function(t){return LO(t,"overflowX")},TA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=VO(t,r);if(s){var i=MO(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},xH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},PH=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},VO=function(t,e){return t==="v"?bH(e):AH(e)},MO=function(t,e){return t==="v"?xH(e):PH(e)},RH=function(t,e){return t==="h"&&e==="rtl"?-1:1},CH=function(t,e,n,r,s){var i=RH(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,p=0;do{if(!a)break;var m=MO(t,a),E=m[0],g=m[1],_=m[2],w=g-_-i*E;(E||w)&&VO(t,a)&&(h+=w,p+=E);var f=a.parentNode;a=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(c=!0),c},qh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},IA=function(t){return[t.deltaX,t.deltaY]},SA=function(t){return t&&"current"in t?t.current:t},DH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},kH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},NH=0,Fa=[];function OH(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),s=b.useState(NH++)[0],i=b.useState(OO)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=tH([t.lockRef.current],(t.shards||[]).map(SA),!0).filter(Boolean);return g.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(g,_){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=qh(g),f=n.current,v="deltaX"in g?g.deltaX:f[0]-w[0],A="deltaY"in g?g.deltaY:f[1]-w[1],C,L=g.target,S=Math.abs(v)>Math.abs(A)?"h":"v";if("touches"in g&&S==="h"&&L.type==="range")return!1;var T=TA(S,L);if(!T)return!0;if(T?C=S:(C=S==="v"?"h":"v",T=TA(S,L)),!T)return!1;if(!r.current&&"changedTouches"in g&&(v||A)&&(r.current=C),!C)return!0;var P=r.current||C;return CH(P,_,g,P==="h"?v:A)},[]),l=b.useCallback(function(g){var _=g;if(!(!Fa.length||Fa[Fa.length-1]!==i)){var w="deltaY"in _?IA(_):qh(_),f=e.current.filter(function(C){return C.name===_.type&&(C.target===_.target||_.target===C.shadowParent)&&DH(C.delta,w)})[0];if(f&&f.should){_.cancelable&&_.preventDefault();return}if(!f){var v=(o.current.shards||[]).map(SA).filter(Boolean).filter(function(C){return C.contains(_.target)}),A=v.length>0?a(_,v[0]):!o.current.noIsolation;A&&_.cancelable&&_.preventDefault()}}},[]),c=b.useCallback(function(g,_,w,f){var v={name:g,delta:_,target:w,should:f,shadowParent:LH(w)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(A){return A!==v})},1)},[]),d=b.useCallback(function(g){n.current=qh(g),r.current=void 0},[]),h=b.useCallback(function(g){c(g.type,IA(g),g.target,a(g,t.lockRef.current))},[]),p=b.useCallback(function(g){c(g.type,qh(g),g.target,a(g,t.lockRef.current))},[]);b.useEffect(function(){return Fa.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Ma),document.addEventListener("touchmove",l,Ma),document.addEventListener("touchstart",d,Ma),function(){Fa=Fa.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Ma),document.removeEventListener("touchmove",l,Ma),document.removeEventListener("touchstart",d,Ma)}},[]);var m=t.removeScrollBar,E=t.inert;return b.createElement(b.Fragment,null,E?b.createElement(i,{styles:kH(s)}):null,m?b.createElement(IH,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function LH(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const VH=uH(NO,OH);var FO=b.forwardRef(function(t,e){return b.createElement(Jm,Jr({},t,{ref:e,sideCar:VH}))});FO.classNames=Jm.classNames;var MH=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ua=new WeakMap,Wh=new WeakMap,Hh={},Py=0,UO=function(t){return t&&(t.host||UO(t.parentNode))},FH=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=UO(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},UH=function(t,e,n,r){var s=FH(e,Array.isArray(t)?t:[t]);Hh[n]||(Hh[n]=new WeakMap);var i=Hh[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))d(p);else try{var m=p.getAttribute(r),E=m!==null&&m!=="false",g=(Ua.get(p)||0)+1,_=(i.get(p)||0)+1;Ua.set(p,g),i.set(p,_),o.push(p),g===1&&E&&Wh.set(p,!0),_===1&&p.setAttribute(n,"true"),E||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return d(e),a.clear(),Py++,function(){o.forEach(function(h){var p=Ua.get(h)-1,m=i.get(h)-1;Ua.set(h,p),i.set(h,m),p||(Wh.has(h)||h.removeAttribute(r),Wh.delete(h)),m||h.removeAttribute(n)}),Py--,Py||(Ua=new WeakMap,Ua=new WeakMap,Wh=new WeakMap,Hh={})}},jH=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=MH(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),UH(r,s,n,"aria-hidden")):function(){return null}},Zm="Dialog",[jO,UK]=nc(Zm),[BH,Lr]=jO(Zm),BO=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=b.useRef(null),l=b.useRef(null),[c,d]=R_({prop:r,defaultProp:s??!1,onChange:i,caller:Zm});return x.jsx(BH,{scope:e,triggerRef:a,contentRef:l,contentId:Gg(),titleId:Gg(),descriptionId:Gg(),open:c,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};BO.displayName=Zm;var $O="DialogTrigger",zO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr($O,n),i=Yt(e,s.triggerRef);return x.jsx(ft.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_0(s.open),...r,ref:i,onClick:Qe(t.onClick,s.onOpenToggle)})});zO.displayName=$O;var v0="DialogPortal",[$H,qO]=jO(v0,{forceMount:void 0}),WO=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Lr(v0,e);return x.jsx($H,{scope:e,forceMount:n,children:b.Children.map(r,o=>x.jsx(_a,{present:n||i.open,children:x.jsx(P_,{asChild:!0,container:s,children:o})}))})};WO.displayName=v0;var $p="DialogOverlay",HO=b.forwardRef((t,e)=>{const n=qO($p,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Lr($p,t.__scopeDialog);return i.modal?x.jsx(_a,{present:r||i.open,children:x.jsx(qH,{...s,ref:e})}):null});HO.displayName=$p;var zH=Yu("DialogOverlay.RemoveScroll"),qH=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr($p,n);return x.jsx(FO,{as:zH,allowPinchZoom:!0,shards:[s.contentRef],children:x.jsx(ft.div,{"data-state":_0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ya="DialogContent",KO=b.forwardRef((t,e)=>{const n=qO(ya,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Lr(ya,t.__scopeDialog);return x.jsx(_a,{present:r||i.open,children:i.modal?x.jsx(WH,{...s,ref:e}):x.jsx(HH,{...s,ref:e})})});KO.displayName=ya;var WH=b.forwardRef((t,e)=>{const n=Lr(ya,t.__scopeDialog),r=b.useRef(null),s=Yt(e,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return jH(i)},[]),x.jsx(GO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Qe(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Qe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Qe(t.onFocusOutside,i=>i.preventDefault())})}),HH=b.forwardRef((t,e)=>{const n=Lr(ya,t.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return x.jsx(GO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),GO=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Lr(ya,n),l=b.useRef(null),c=Yt(e,l);return eH(),x.jsxs(x.Fragment,{children:[x.jsx(RO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:x.jsx(im,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":_0(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx(KH,{titleId:a.titleId}),x.jsx(QH,{contentRef:l,descriptionId:a.descriptionId})]})]})}),w0="DialogTitle",QO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(w0,n);return x.jsx(ft.h2,{id:s.titleId,...r,ref:e})});QO.displayName=w0;var YO="DialogDescription",XO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(YO,n);return x.jsx(ft.p,{id:s.descriptionId,...r,ref:e})});XO.displayName=YO;var JO="DialogClose",ZO=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(JO,n);return x.jsx(ft.button,{type:"button",...r,ref:e,onClick:Qe(t.onClick,()=>s.onOpenChange(!1))})});ZO.displayName=JO;function _0(t){return t?"open":"closed"}var e2="DialogTitleWarning",[jK,t2]=fM(e2,{contentName:ya,titleName:w0,docsSlug:"dialog"}),KH=({titleId:t})=>{const e=t2(e2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},GH="DialogDescriptionWarning",QH=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${t2(GH).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},YH=BO,XH=zO,JH=WO,n2=HO,r2=KO,s2=QO,i2=XO,ZH=ZO;const eK=YH,BK=XH,tK=JH,o2=b.forwardRef(({className:t,...e},n)=>x.jsx(n2,{ref:n,className:Xt("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));o2.displayName=n2.displayName;const a2=b.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>x.jsxs(tK,{children:[x.jsx(o2,{}),x.jsxs(r2,{ref:o,className:Xt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&x.jsxs(ZH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[x.jsx(N_,{className:"h-4 w-4"}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));a2.displayName=r2.displayName;const l2=({className:t,...e})=>x.jsx("div",{className:Xt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});l2.displayName="DialogHeader";const nK=({className:t,...e})=>x.jsx("div",{className:Xt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});nK.displayName="DialogFooter";const c2=b.forwardRef(({className:t,...e},n)=>x.jsx(s2,{ref:n,className:Xt("text-lg font-semibold leading-none tracking-tight",t),...e}));c2.displayName=s2.displayName;const u2=b.forwardRef(({className:t,...e},n)=>x.jsx(i2,{ref:n,className:Xt("text-sm text-muted-foreground",t),...e}));u2.displayName=i2.displayName;const rK={},bA=z.lazy(()=>Se(()=>import("./Index-k64tLYP1.js"),[],import.meta.url)),Kh=z.lazy(()=>Se(()=>import("./LandingPage-BJKR43YA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),AA=z.lazy(()=>Se(()=>import("./SubscriptionsPage-BaCj-f1G.js"),__vite__mapDeps([13,1,4,14,15,6,7,5,12]),import.meta.url)),xA=z.lazy(()=>Se(()=>import("./AuthPage--jcQ1hfE.js"),__vite__mapDeps([16,1,2,3,8]),import.meta.url)),Gh=z.lazy(()=>Se(()=>import("./TopUpPage-BZadsfkC.js"),__vite__mapDeps([17,1,18]),import.meta.url)),PA=z.lazy(()=>Se(()=>import("./AdminTopupsPage-BOPB74sk.js"),__vite__mapDeps([19,18]),import.meta.url)),RA=z.lazy(()=>Se(()=>import("./AdminNotificationsPage-C0WSji5y.js"),__vite__mapDeps([20,1,21,22,23]),import.meta.url)),Qh=z.lazy(()=>Se(()=>import("./UserRegisterPage-B3jVLkQX.js"),__vite__mapDeps([24,1,21,25,26,27,28,29,30]),import.meta.url)),CA=z.lazy(()=>Se(()=>import("./UserAccountSetupPage-6GP3dv44.js"),__vite__mapDeps([31,1,21,25,30,29,12]),import.meta.url)),DA=z.lazy(()=>Se(()=>import("./ForgotPasswordCodePage-cW-P9ZV7.js"),[],import.meta.url)),kA=z.lazy(()=>Se(()=>import("./DashboardLoginPage-CwJOjAla.js"),__vite__mapDeps([32,1,10]),import.meta.url)),NA=z.lazy(()=>Se(()=>import("./ProtectedDashboard-DdJapQ2p.js"),__vite__mapDeps([33,1,34,18,35,21,10,36,37,38,26,12,39]),import.meta.url)),Pf=z.lazy(()=>Se(()=>import("./ProtectedUserDashboard-Ecf5sDS0.js"),__vite__mapDeps([40,41,23,35,21,10,36]),import.meta.url)),OA=z.lazy(()=>Se(()=>import("./MerchantDashboard-BmCu2pXg.js"),__vite__mapDeps([42,43,18,44,34,45,1,46,21,47,48]),import.meta.url)),LA=z.lazy(()=>Se(()=>import("./PendingApprovalPage-Bq2djwCp.js"),__vite__mapDeps([49,1,4,36,10,50,12,51]),import.meta.url)),VA=z.lazy(()=>Se(()=>import("./AdminLogin-Bp-5JmMQ.js"),__vite__mapDeps([52,10]),import.meta.url)),MA=z.lazy(()=>Se(()=>import("./ProtectedAdminDashboard-CuqCUr1G.js"),__vite__mapDeps([53,14,3,54,43,18,44,21,35,10,36,55,1,22,25,34,56,4,51,29,57,58,41,15,9,50,7,59,8,12,39]),import.meta.url)),FA=z.lazy(()=>Se(()=>import("./AuthTestPage-vmohndt9.js"),__vite__mapDeps([60,1,21]),import.meta.url)),UA=z.lazy(()=>Se(()=>import("./ProfileSettingsPage-CiRRjUlA.js"),__vite__mapDeps([61,1,21,55,62,35,10,36,48,5,57,28,58,7,51]),import.meta.url)),jA=z.lazy(()=>Se(()=>import("./TransactionsPage-CeFKgi18.js"),__vite__mapDeps([63,1,18,34,44,64,56,35,21,10,36,4,46,12,8,15,37,38,5,39]),import.meta.url)),BA=z.lazy(()=>Se(()=>import("./WalletAdditionPage-Bdpb2dUP.js"),__vite__mapDeps([65,1,21,18,47,5,26,29,36]),import.meta.url)),$A=z.lazy(()=>Se(()=>import("./ReferralsPage-nt2EJ2OJ.js"),__vite__mapDeps([66,1,34,25,28,23,12,58,50,59,27,39]),import.meta.url)),zA=z.lazy(()=>Se(()=>import("./CPanelPage-DBaFNuO8.js"),__vite__mapDeps([67,1,21]),import.meta.url)),qA=z.lazy(()=>Se(()=>import("./CPanelLoginPage-BT79auJI.js"),__vite__mapDeps([68,21,1,10]),import.meta.url)),WA=z.lazy(()=>Se(()=>import("./NotFound-BOjSu3mU.js"),[],import.meta.url)),HA=z.lazy(()=>Se(()=>import("./PrivacyPolicyPage-DVoIpjUR.js"),[],import.meta.url)),KA=z.lazy(()=>Se(()=>import("./SmsHookBridge-DOd0kkhe.js"),[],import.meta.url)),sK=new s3,iK=()=>{if(!((me==null?void 0:me.isNativePlatform)&&me.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return x.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:x.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:x.jsx(l1,{className:"w-5 h-5"})})})},GA=()=>{const t=hs(),{user:e,loading:n}=Ia(),r=(me==null?void 0:me.isNativePlatform)&&me.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?x.jsx(iW,{}):null},QA=()=>{const t=AO(),{profile:e,user:n}=Ia(),r=hs(),s=ac(),{toast:i}=x_(),[o,a]=z.useState(!1),[l,c]=z.useState(null),[d,h]=z.useState(!1),[p,m]=z.useState(null),[E,g]=z.useState(!1),[_,w]=z.useState(""),[f,v]=z.useState(""),[A,C]=z.useState(null),L=z.useRef(null);return PW(),b.useEffect(()=>{HW()},[]),b.useEffect(()=>{try{fA.start()}catch{}return()=>{try{fA.stop()}catch{}}},[]),b.useEffect(()=>{(async()=>{try{if(!(n!=null&&n.uid))return;const{doc:S,getDoc:T}=await Se(async()=>{const{doc:R,getDoc:O}=await Promise.resolve().then(()=>Vo);return{doc:R,getDoc:O}},void 0,import.meta.url),{db:P}=await Se(async()=>{const{db:R}=await Promise.resolve().then(()=>Mo);return{db:R}},void 0,import.meta.url),D=await T(S(P,"profiles",n.uid));if(D.exists()){const R=D.data(),O=String((R==null?void 0:R.lastAckAndroidVersion)||(R==null?void 0:R.lastAckUpdateId)||"").trim();O&&w(O)}}catch{}})()},[n==null?void 0:n.uid]),b.useEffect(()=>{try{const T=String((window==null?void 0:window.__nativeAppVersion)||"").trim();T&&v(T);const P=window==null?void 0:window.__nativeAppVersionCode;typeof P=="number"&&C(P)}catch{}const S=T=>{var P,D;try{const R=String((((P=T==null?void 0:T.detail)==null?void 0:P.version)??"")||"").trim(),O=(D=T==null?void 0:T.detail)==null?void 0:D.code;R&&v(R),typeof O=="number"&&C(O)}catch{}};try{window.addEventListener("native-app-version",S)}catch{}return()=>{try{window.removeEventListener("native-app-version",S)}catch{}}},[]),b.useEffect(()=>{try{const S=(me==null?void 0:me.isNativePlatform)&&me.getPlatform()==="android",T=String(f||"").trim();if(!S||!T||!(n!=null&&n.uid))return;(async()=>{try{const{doc:P,setDoc:D,serverTimestamp:R}=await Se(async()=>{const{doc:k,setDoc:U,serverTimestamp:X}=await Promise.resolve().then(()=>Vo);return{doc:k,setDoc:U,serverTimestamp:X}},void 0,import.meta.url),{db:O}=await Se(async()=>{const{db:k}=await Promise.resolve().then(()=>Mo);return{db:k}},void 0,import.meta.url);await D(P(O,"profiles",n.uid),{androidInstalledVersion:T,androidInstalledAt:R()},{merge:!0})}catch{}})()}catch{}},[f,n==null?void 0:n.uid]),b.useEffect(()=>{const S=PO(),T=r.pathname.startsWith("/user/dashboard");if(t&&(e!=null&&e.shopId)&&T){const P=zW({shopId:e.shopId,createdBy:e.userId});return()=>{try{P()}catch{}try{S()}catch{}}}return()=>{try{S()}catch{}}},[t,e==null?void 0:e.shopId,r.pathname]),b.useEffect(()=>{if(!t)return;const S=document.createElement("style");S.setAttribute("data-disable-pull-to-refresh","true"),S.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(S);let T=0,P=null;const D=O=>{var k,U;T=((U=(k=O.touches)==null?void 0:k[0])==null?void 0:U.clientY)||0,P=O.target},R=O=>{var F,q;const k=((q=(F=O.touches)==null?void 0:F[0])==null?void 0:q.clientY)||0,U=document.scrollingElement||document.documentElement,X=U.scrollTop||window.scrollY||0,te=U.scrollHeight-U.clientHeight||0,G=P||null,j=(()=>{let ne=G;for(;ne&&ne!==document.body;){const re=window.getComputedStyle(ne).overflowY;if((re==="auto"||re==="scroll")&&ne.scrollHeight>ne.clientHeight)return!0;ne=ne.parentElement}return!1})();!j&&X<=0&&k>T&&O.cancelable&&O.preventDefault(),!j&&X>=te&&k<T&&O.cancelable&&O.preventDefault()};return document.addEventListener("touchstart",D,{passive:!0}),document.addEventListener("touchmove",R,{passive:!1}),()=>{document.removeEventListener("touchstart",D),document.removeEventListener("touchmove",R);try{document.head.removeChild(S)}catch{}}},[t]),b.useEffect(()=>{if(!((me==null?void 0:me.isNativePlatform)&&me.getPlatform()==="android"))return;try{const D=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=D,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const D=(window.location.assign||(R=>{})).bind(window.location);window.__originalAssign=D,window.location.assign=R=>{try{if(String(R||"").startsWith("/user/dashboard")){s("/user/dashboard");return}}catch{}try{D(R)}catch{}}}catch{}let T=null,P=!1;return(async()=>{try{const{listenAndroidUpdates:D}=await Se(async()=>{const{listenAndroidUpdates:R}=await Promise.resolve().then(()=>mW);return{listenAndroidUpdates:R}},void 0,import.meta.url);T=D(R=>{if(P)return;const O=String((R==null?void 0:R.version)||"").trim(),k=String((R==null?void 0:R.url)||"").trim(),U=String((R==null?void 0:R.notes)||"").trim(),X=!!(R!=null&&R.force),te=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),G=String(_||te||"").trim(),j=(Z,re)=>{const ae=String(Z||"").replace(/^v/i,"").split(".").map(Ve=>parseInt(Ve,10)||0),Ie=String(re||"").replace(/^v/i,"").split(".").map(Ve=>parseInt(Ve,10)||0);for(let Ve=0;Ve<Math.max(ae.length,Ie.length);Ve++){const ue=ae[Ve]||0,we=Ie[Ve]||0;if(ue>we)return 1;if(ue<we)return-1}return 0},F=String(f||"").trim(),q=j(O,F)>0;if(!!k&&!!O&&q&&O!==G){const Z="   ",re=F||G||"",ae=`${U?U+`
`:""} : ${O}${re?`
  : ${re}`:""}`;c({title:Z,message:ae,apkUrl:k,force:X,versionId:O}),a(!0)}else try{a(!1)}catch{}})}catch{}})(),()=>{P=!0;try{T&&T()}catch{}}},[_,f]),b.useEffect(()=>{const S=P=>{const D=(P==null?void 0:P.detail)||{};try{L.current&&(clearTimeout(L.current),L.current=null)}catch{}h(!0),m({percent:D.percent??null,downloaded:D.downloaded??0,total:D.total??0})},T=()=>{try{L.current&&(clearTimeout(L.current),L.current=null)}catch{}h(!1),g(!0);try{const P=String((l==null?void 0:l.versionId)||"").trim();if(P){try{localStorage.setItem("android_last_ack_version_id",P)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:D,setDoc:R,serverTimestamp:O}=await Se(async()=>{const{doc:U,setDoc:X,serverTimestamp:te}=await Promise.resolve().then(()=>Vo);return{doc:U,setDoc:X,serverTimestamp:te}},void 0,import.meta.url),{db:k}=await Se(async()=>{const{db:U}=await Promise.resolve().then(()=>Mo);return{db:U}},void 0,import.meta.url);await R(D(k,"profiles",n.uid),{lastAckAndroidVersion:P,androidInstalledVersion:P,lastAckAt:O(),androidInstalledAt:O()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",S),window.addEventListener("androidUpdateDownloaded",T),()=>{window.removeEventListener("androidUpdateProgress",S),window.removeEventListener("androidUpdateDownloaded",T)}},[]),b.useEffect(()=>{const S=(me==null?void 0:me.isNativePlatform)&&me.getPlatform()==="android",T=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(S||T)return;let P=!1;return(async()=>{try{const D="0.0.0",R=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!R.ok)return;const O=await R.json(),k=String((O==null?void 0:O.version)||"0.0.0"),U=!!(O!=null&&O.force);if(!P&&((te,G)=>{const j=String(te).split(".").map(q=>parseInt(q,10)||0),F=String(G).split(".").map(q=>parseInt(q,10)||0);for(let q=0;q<Math.max(j.length,F.length);q++){const ne=j[q]||0,Z=F[q]||0;if(ne>Z)return 1;if(ne<Z)return-1}return 0})(k,D)>0){if(U){try{window.location.reload()}catch{}return}try{i({title:"  ",description:` ${k}      `})}catch{}}}catch{}})(),()=>{P=!0}},[]),x.jsx(x.Fragment,{children:o&&l&&x.jsx(eK,{open:o,onOpenChange:S=>{l!=null&&l.force||a(S)},children:x.jsxs(a2,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[x.jsxs(l2,{className:"text-center",children:[x.jsx(c2,{className:"text-base md:text-lg font-bold text-gray-900",children:l.title}),x.jsx(u2,{className:"text-sm text-gray-700 whitespace-pre-line",children:l.message})]}),x.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!l.force&&!d&&!E&&x.jsx(wu,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>a(!1),children:""}),!E&&x.jsx(wu,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{if((me==null?void 0:me.isNativePlatform)&&me.getPlatform()==="android"){const T=l.apkUrl,P=`cashy://update?url=${encodeURIComponent(T)}`;h(!0),m({percent:0,downloaded:0,total:0}),window.location.href=P;try{L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{try{L.current=null}catch{}if(!E){h(!1);try{window.open(T,"_blank")}catch{}}},1500)}catch{}}else{const T=l.apkUrl;window.open(T,"_blank")}}catch{}},children:d?" ...":" "}),E&&x.jsx(wu,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((me==null?void 0:me.isNativePlatform)&&me.getPlatform()==="android"){try{const T=String((l==null?void 0:l.versionId)||"").trim();if(T){try{localStorage.setItem("android_last_ack_version_id",T)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:P,setDoc:D,serverTimestamp:R}=await Se(async()=>{const{doc:k,setDoc:U,serverTimestamp:X}=await Promise.resolve().then(()=>Vo);return{doc:k,setDoc:U,serverTimestamp:X}},void 0,import.meta.url),{db:O}=await Se(async()=>{const{db:k}=await Promise.resolve().then(()=>Mo);return{db:k}},void 0,import.meta.url);await D(P(O,"profiles",n.uid),{lastAckAndroidVersion:T,androidInstalledVersion:T,lastAckAt:R(),androidInstalledAt:R()},{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),d&&x.jsxs("div",{className:"mt-3 text-center",children:[x.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:x.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((p==null?void 0:p.percent)||0)))}%`}})}),x.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((p==null?void 0:p.percent)||0),"%"]})]})]})})})},YA=()=>{const t=hs(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?x.jsxs(x.Fragment,{children:[x.jsx(cU,{}),x.jsx(qU,{})]}):null},XA=()=>{const{user:t,loading:e}=Ia(),[n,r]=z.useState(!1);return z.useEffect(()=>{const s=setTimeout(()=>r(!0),1e3);return()=>clearTimeout(s)},[]),e&&!t&&!n?x.jsx(Pw,{}):t?x.jsx(Pf,{}):x.jsx(xw,{})},oK=()=>x.jsx(o3,{client:sK,children:x.jsx(l6,{children:x.jsxs(Dj,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(me!=null&&me.isNativePlatform&&me.getPlatform()==="android")&&x.jsx(gW,{}),x.jsx(iK,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&rK)?x.jsxs(r6,{children:[x.jsx(QA,{}),x.jsx(YA,{}),x.jsx(b.Suspense,{fallback:x.jsx(Pw,{}),children:x.jsxs(rS,{children:[x.jsx(le,{path:"/",element:me!=null&&me.isNativePlatform&&me.getPlatform()==="android"?x.jsx(XA,{}):x.jsx(Kh,{})}),x.jsx(le,{path:"/dashboard-redirect",element:x.jsx(bA,{})}),x.jsx(le,{path:"/landing",element:x.jsx(Kh,{})}),x.jsx(le,{path:"/subscriptions",element:x.jsx(AA,{})}),x.jsx(le,{path:"/auth",element:x.jsx(xA,{})}),x.jsx(le,{path:"/sms-hook",element:x.jsx(KA,{})}),x.jsx(le,{path:"/user/login",element:x.jsx(xw,{})}),x.jsx(le,{path:"/user/forgot-password",element:x.jsx(DA,{})}),x.jsx(le,{path:"/user/register",element:x.jsx(Qh,{})}),x.jsx(le,{path:"/register",element:x.jsx(Qh,{})}),x.jsx(le,{path:"/user/account-setup",element:x.jsx(CA,{})}),x.jsx(le,{path:"/user/pending-approval",element:x.jsx(LA,{})}),x.jsx(le,{path:"/user/dashboard",element:x.jsx(Pf,{})}),x.jsx(le,{path:"/branch/:shopId/dashboard",element:x.jsx(Pf,{})}),x.jsx(le,{path:"/user/add-wallet",element:x.jsx(BA,{})}),x.jsx(le,{path:"/admin/login",element:x.jsx(VA,{})}),x.jsx(le,{path:"/admin/dashboard",element:x.jsx(MA,{})}),x.jsx(le,{path:"/admin/topups",element:x.jsx(PA,{})}),x.jsx(le,{path:"/admin/notifications",element:x.jsx(RA,{})}),x.jsx(le,{path:"/profile-settings",element:x.jsx(UA,{})}),x.jsx(le,{path:"/transactions",element:x.jsx(jA,{})}),x.jsx(le,{path:"/referrals",element:x.jsx($A,{})}),x.jsx(le,{path:"/privacy-policy",element:x.jsx(HA,{})}),x.jsx(le,{path:"/cpanel",element:x.jsx(zA,{})}),x.jsx(le,{path:"/cpanel/login",element:x.jsx(qA,{})}),x.jsx(le,{path:"/auth-test",element:x.jsx(FA,{})}),x.jsx(le,{path:"/topup",element:x.jsx(Gh,{})}),x.jsx(le,{path:"/recharge",element:x.jsx(Gh,{})}),x.jsx(le,{path:"/merchant/*",element:x.jsx(OA,{})}),x.jsx(le,{path:"/dashboard/login",element:x.jsx(kA,{})}),x.jsx(le,{path:"/dashboard",element:x.jsx(NA,{})}),x.jsx(le,{path:"*",element:x.jsx(WA,{})})]})}),x.jsx(GA,{})]}):x.jsxs(n6,{children:[x.jsx(QA,{}),x.jsx(YA,{}),x.jsx(b.Suspense,{fallback:x.jsx(Pw,{}),children:x.jsxs(rS,{children:[x.jsx(le,{path:"/",element:me!=null&&me.isNativePlatform&&me.getPlatform()==="android"?x.jsx(XA,{}):x.jsx(Kh,{})}),x.jsx(le,{path:"/dashboard-redirect",element:x.jsx(bA,{})}),x.jsx(le,{path:"/landing",element:x.jsx(Kh,{})}),x.jsx(le,{path:"/subscriptions",element:x.jsx(AA,{})}),x.jsx(le,{path:"/auth",element:x.jsx(xA,{})}),x.jsx(le,{path:"/sms-hook",element:x.jsx(KA,{})}),x.jsx(le,{path:"/user/login",element:x.jsx(xw,{})}),x.jsx(le,{path:"/user/forgot-password",element:x.jsx(DA,{})}),x.jsx(le,{path:"/user/register",element:x.jsx(Qh,{})}),x.jsx(le,{path:"/register",element:x.jsx(Qh,{})}),x.jsx(le,{path:"/user/account-setup",element:x.jsx(CA,{})}),x.jsx(le,{path:"/user/pending-approval",element:x.jsx(LA,{})}),x.jsx(le,{path:"/user/dashboard",element:x.jsx(Pf,{})}),x.jsx(le,{path:"/user/add-wallet",element:x.jsx(BA,{})}),x.jsx(le,{path:"/admin/login",element:x.jsx(VA,{})}),x.jsx(le,{path:"/admin/dashboard",element:x.jsx(MA,{})}),x.jsx(le,{path:"/admin/topups",element:x.jsx(PA,{})}),x.jsx(le,{path:"/admin/notifications",element:x.jsx(RA,{})}),x.jsx(le,{path:"/profile-settings",element:x.jsx(UA,{})}),x.jsx(le,{path:"/transactions",element:x.jsx(jA,{})}),x.jsx(le,{path:"/referrals",element:x.jsx($A,{})}),x.jsx(le,{path:"/privacy-policy",element:x.jsx(HA,{})}),x.jsx(le,{path:"/cpanel",element:x.jsx(zA,{})}),x.jsx(le,{path:"/cpanel/login",element:x.jsx(qA,{})}),x.jsx(le,{path:"/auth-test",element:x.jsx(FA,{})}),x.jsx(le,{path:"/topup",element:x.jsx(Gh,{})}),x.jsx(le,{path:"/recharge",element:x.jsx(Gh,{})}),x.jsx(le,{path:"/merchant/*",element:x.jsx(OA,{})}),x.jsx(le,{path:"/dashboard/login",element:x.jsx(kA,{})}),x.jsx(le,{path:"/dashboard",element:x.jsx(NA,{})}),x.jsx(le,{path:"*",element:x.jsx(WA,{})})]})}),x.jsx(GA,{})]})]})})}),d2=b.createContext(void 0),aK=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!1),[i,o]=b.useState(null),{profile:a,user:l}=Ia();b.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),E=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),m&&s(m==="true"),E&&o(Number(E))}catch{}},[]),b.useEffect(()=>{if(!(a!=null&&a.shopId))return;const p=ce(W,"cashierShift",a.shopId);let m=null;return(async()=>{try{(await Ke(p)).exists()||await qt(p,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),m=$s(p,g=>{if(g.exists()){const _=g.data(),w=(_==null?void 0:_.shiftUser)||null,f=!!(_!=null&&_.isShiftActive),v=(_==null?void 0:_.shiftStartAt)??null;let A=w;if(!A)try{const C=localStorage.getItem("cashier_shift_user"),L=C?JSON.parse(C):null;L&&(A=L)}catch{}n(A),s(f),o(typeof v=="number"?v:v?Number(v):null);try{A?localStorage.setItem("cashier_shift_user",JSON.stringify(A)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",f?"true":"false"),v!=null&&localStorage.setItem("cashier_shift_start_at",String(v))}catch{}}},g=>{console.warn("cashierShift snapshot error:",g)})}catch(E){console.warn("Failed to init cashierShift doc:",E)}})(),()=>{m&&m()}},[a==null?void 0:a.shopId]);const c=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const m=ce(W,"cashierShift",a.shopId);rt(m,{shiftUser:p||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{if(a!=null&&a.shopId){const m=ce(W,"cashierShift",a.shopId);rt(m,{isShiftActive:!0,shiftStartAt:p})}}catch{}try{const E=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,g=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,_=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(E);if(w==null){const v=localStorage.getItem(g);if(v!=null){w=v;try{localStorage.setItem(E,v),localStorage.removeItem(g)}catch{}}}if(w==null&&(l!=null&&l.uid)){const v=localStorage.getItem("cashBalance"),A=localStorage.getItem("userCashBalance");if(v!=null){try{localStorage.setItem(E,v),localStorage.removeItem("cashBalance")}catch{}w=v}else if(A!=null){try{localStorage.setItem(E,A),localStorage.removeItem("userCashBalance")}catch{}w=A}}const f=localStorage.getItem(_);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),f?localStorage.setItem("shiftStartWalletBalances",f):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=ce(W,"dashboardData",a.shopId),E=await Ke(m);if(E.exists()){const g=E.data(),_=Number((g==null?void 0:g.cashBalance)??0),w=(g==null?void 0:g.walletBalances)??{};try{const f=localStorage.getItem("shiftStartDrawerFunds"),v=localStorage.getItem("shiftStartWalletBalances"),A=f?parseFloat(f):0,C=v?JSON.parse(v):{},L=!f||!Number.isFinite(A)||A===0,S=!v||Object.keys(C||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(_)?_:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const p=ce(W,"cashierShift",a.shopId);rt(p,{isShiftActive:!1})}}catch{}};return x.jsx(d2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},$K=()=>{const t=b.useContext(d2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},h2=b.createContext(void 0);function lK({children:t}){const{profile:e,user:n,loading:r}=Ia(),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(!0);b.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let p=null;try{p=localStorage.getItem(h)||null}catch{}i(p||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),b.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const E=localStorage.getItem(m);i(E||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const p=m=>{const E=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==E))try{const g=localStorage.getItem(E);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",p),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",p)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return x.jsx(h2.Provider,{value:d,children:t})}function zK(){const t=b.useContext(h2);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var f2={};(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(w,f){const v=w.indexOf(f);v!==-1&&w.splice(v,1)}const n=()=>{};var r=(w=>(w[w.None=0]="None",w[w.Fatal=1]="Fatal",w[w.Error=2]="Error",w[w.Warn=3]="Warn",w[w.Info=4]="Info",w[w.Debug=5]="Debug",w[w.Verbose=6]="Verbose",w))(r||{});class s{setLogLevel(f){window.cordova.exec(n,n,"OneSignalPush","setLogLevel",[f])}setAlertLevel(f){window.cordova.exec(n,n,"OneSignalPush","setAlertLevel",[f])}}class i{constructor(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}_processFunctionList(f,v){for(let A=0;A<f.length;A++)f[A](v)}addEventListener(f,v){if(f==="click"){this._inAppMessageClickListeners.push(v);const A=C=>{this._processFunctionList(this._inAppMessageClickListeners,C)};window.cordova.exec(A,n,"OneSignalPush","setInAppMessageClickHandler",[])}else if(f==="willDisplay"){this._willDisplayInAppMessageListeners.push(v);const A=C=>{this._processFunctionList(this._willDisplayInAppMessageListeners,C)};window.cordova.exec(A,n,"OneSignalPush","setOnWillDisplayInAppMessageHandler",[])}else if(f==="didDisplay"){this._didDisplayInAppMessageListeners.push(v);const A=C=>{this._processFunctionList(this._didDisplayInAppMessageListeners,C)};window.cordova.exec(A,n,"OneSignalPush","setOnDidDisplayInAppMessageHandler",[])}else if(f==="willDismiss"){this._willDismissInAppMessageListeners.push(v);const A=C=>{this._processFunctionList(this._willDismissInAppMessageListeners,C)};window.cordova.exec(A,n,"OneSignalPush","setOnWillDismissInAppMessageHandler",[])}else if(f==="didDismiss"){this._didDismissInAppMessageListeners.push(v);const A=C=>{this._processFunctionList(this._didDismissInAppMessageListeners,C)};window.cordova.exec(A,n,"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}}removeEventListener(f,v){f==="click"?e(this._inAppMessageClickListeners,v):f==="willDisplay"?e(this._willDisplayInAppMessageListeners,v):f==="didDisplay"?e(this._didDisplayInAppMessageListeners,v):f==="willDismiss"?e(this._willDismissInAppMessageListeners,v):f==="didDismiss"&&e(this._didDismissInAppMessageListeners,v)}addTrigger(f,v){const A={[f]:v};this.addTriggers(A)}addTriggers(f){Object.keys(f).forEach(function(v){typeof f[v]!="string"&&(f[v]=JSON.stringify(f[v]))}),window.cordova.exec(n,n,"OneSignalPush","addTriggers",[f])}removeTrigger(f){this.removeTriggers([f])}removeTriggers(f){Array.isArray(f)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(n,n,"OneSignalPush","removeTriggers",[f])}clearTriggers(){window.cordova.exec(n,n,"OneSignalPush","clearTriggers")}setPaused(f){window.cordova.exec(n,n,"OneSignalPush","setPaused",[f])}getPaused(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","isPaused",[])})}}class o{enter(f,v,A,C){A==null&&(A=n),C==null&&(C=n),window.cordova.exec(A,C,"OneSignalPush","enterLiveActivity",[f,v])}exit(f,v,A){v==null&&(v=n),A==null&&(A=n),window.cordova.exec(v,A,"OneSignalPush","exitLiveActivity",[f])}setPushToStartToken(f,v){window.cordova.exec(n,n,"OneSignalPush","setPushToStartToken",[f,v])}removePushToStartToken(f){window.cordova.exec(n,n,"OneSignalPush","removePushToStartToken",[f])}setupDefault(f){window.cordova.exec(n,n,"OneSignalPush","setupDefaultLiveActivity",[f])}startDefault(f,v,A){window.cordova.exec(n,n,"OneSignalPush","startDefaultLiveActivity",[f,v,A])}}class a{requestPermission(){window.cordova.exec(n,n,"OneSignalPush","requestLocationPermission",[])}setShared(f){window.cordova.exec(n,n,"OneSignalPush","setLocationShared",[f])}isShared(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","isLocationShared",[])})}}class l{constructor(f){this.notificationId=f.notificationId,this.body=f.body,this.title=f.title,this.additionalData=f.additionalData,typeof f.rawPayload=="string"?this.rawPayload=JSON.parse(f.rawPayload):this.rawPayload=f.rawPayload,this.launchURL=f.launchURL,this.sound=f.sound,f.actionButtons&&(this.actionButtons=f.actionButtons),f.groupKey&&(this.groupKey=f.groupKey),f.ledColor&&(this.ledColor=f.ledColor),typeof f.priority<"u"&&(this.priority=f.priority),f.smallIcon&&(this.smallIcon=f.smallIcon),f.largeIcon&&(this.largeIcon=f.largeIcon),f.bigPicture&&(this.bigPicture=f.bigPicture),f.collapseId&&(this.collapseId=f.collapseId),f.groupMessage&&(this.groupMessage=f.groupMessage),f.fromProjectNumber&&(this.fromProjectNumber=f.fromProjectNumber),f.smallIconAccentColor&&(this.smallIconAccentColor=f.smallIconAccentColor),f.lockScreenVisibility&&(this.lockScreenVisibility=f.lockScreenVisibility),f.androidNotificationId&&(this.androidNotificationId=f.androidNotificationId),f.groupedNotifications&&f.groupedNotifications.length&&(this.groupedNotifications=f.groupedNotifications),f.badge&&(this.badge=f.badge),f.category&&(this.category=f.category),f.threadId&&(this.threadId=f.threadId),f.subtitle&&(this.subtitle=f.subtitle),f.templateId&&(this.templateId=f.templateId),f.attachments&&(this.attachments=f.attachments),f.templateName&&(this.templateName=f.templateName),f.mutableContent&&(this.mutableContent=f.mutableContent),f.badgeIncrement&&(this.badgeIncrement=f.badgeIncrement),f.contentAvailable&&(this.contentAvailable=f.contentAvailable),f.relevanceScore&&(this.relevanceScore=f.relevanceScore),f.interruptionLevel&&(this.interruptionLevel=f.interruptionLevel)}display(){window.cordova.exec(n,n,"OneSignalPush","displayNotification",[this.notificationId])}}class c{constructor(f){this.notification=new l(f)}preventDefault(f=!1){window.cordova.exec(n,n,"OneSignalPush","preventDefault",[this.notification.notificationId,f])}getNotification(){return this.notification}}var d=(w=>(w[w.NotDetermined=0]="NotDetermined",w[w.Denied=1]="Denied",w[w.Authorized=2]="Authorized",w[w.Provisional=3]="Provisional",w[w.Ephemeral=4]="Ephemeral",w))(d||{});class h{constructor(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}_processFunctionList(f,v){for(let A=0;A<f.length;A++)f[A](v)}_setPropertyAndObserver(){const f=v=>{this._permission=v};window.cordova.exec(f,n,"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",v=>{this._permission=v})}hasPermission(){return this._permission||!1}getPermissionAsync(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","getPermissionInternal")})}permissionNative(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","permissionNative",[])})}requestPermission(f){let v=f??!1;return new Promise((A,C)=>{window.cordova.exec(A,C,"OneSignalPush","requestPermission",[v])})}canRequestPermission(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","canRequestPermission",[])})}registerForProvisionalAuthorization(f=n){window.cordova.exec(f,n,"OneSignalPush","registerForProvisionalAuthorization",[])}addEventListener(f,v){if(f==="click"){this._notificationClickedListeners.push(v);const A=C=>{this._processFunctionList(this._notificationClickedListeners,C)};window.cordova.exec(A,n,"OneSignalPush","addNotificationClickListener",[])}else if(f==="foregroundWillDisplay"){this._notificationWillDisplayListeners.push(v);const A=C=>{this._notificationWillDisplayListeners.forEach(L=>{L(new c(C))}),window.cordova.exec(n,n,"OneSignalPush","proceedWithWillDisplay",[C.notificationId])};window.cordova.exec(A,n,"OneSignalPush","addForegroundLifecycleListener",[])}else if(f==="permissionChange"){this._permissionObserverList.push(v);const A=C=>{this._processFunctionList(this._permissionObserverList,C)};window.cordova.exec(A,n,"OneSignalPush","addPermissionObserver",[])}}removeEventListener(f,v){f==="click"?e(this._notificationClickedListeners,v):f==="foregroundWillDisplay"?e(this._notificationWillDisplayListeners,v):f==="permissionChange"&&e(this._permissionObserverList,v)}clearAll(){window.cordova.exec(n,n,"OneSignalPush","clearAllNotifications",[])}removeNotification(f){window.cordova.exec(n,n,"OneSignalPush","removeNotification",[f])}removeGroupedNotifications(f){window.cordova.exec(n,n,"OneSignalPush","removeGroupedNotifications",[f])}}class p{addOutcome(f){window.cordova.exec(n,n,"OneSignalPush","addOutcome",[f])}addUniqueOutcome(f){window.cordova.exec(n,n,"OneSignalPush","addUniqueOutcome",[f])}addOutcomeWithValue(f,v){window.cordova.exec(n,n,"OneSignalPush","addOutcomeWithValue",[f,v])}}class m{constructor(){this._subscriptionObserverList=[]}_processFunctionList(f,v){for(let A=0;A<f.length;A++)f[A](v)}_setPropertiesAndObserver(){const f=C=>{this._id=C};window.cordova.exec(f,n,"OneSignalPush","getPushSubscriptionId");const v=C=>{this._token=C};window.cordova.exec(v,n,"OneSignalPush","getPushSubscriptionToken");const A=C=>{this._optedIn=C};window.cordova.exec(A,n,"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",C=>{this._id=C.current.id,this._token=C.current.token,this._optedIn=C.current.optedIn})}get id(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id}get token(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token}get optedIn(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1}getIdAsync(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","getPushSubscriptionId")})}getTokenAsync(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","getPushSubscriptionToken")})}getOptedInAsync(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","getPushSubscriptionOptedIn")})}addEventListener(f,v){this._subscriptionObserverList.push(v);const A=C=>{this._processFunctionList(this._subscriptionObserverList,C)};window.cordova.exec(A,n,"OneSignalPush","addPushSubscriptionObserver",[])}removeEventListener(f,v){e(this._subscriptionObserverList,v)}optIn(){window.cordova.exec(n,n,"OneSignalPush","optInPushSubscription")}optOut(){window.cordova.exec(n,n,"OneSignalPush","optOutPushSubscription")}}class E{constructor(){this.pushSubscription=new m,this._userStateObserverList=[]}_processFunctionList(f,v){for(let A=0;A<f.length;A++)f[A](v)}setLanguage(f){window.cordova.exec(n,n,"OneSignalPush","setLanguage",[f])}addAlias(f,v){const A={[f]:v};window.cordova.exec(n,n,"OneSignalPush","addAliases",[A])}addAliases(f){window.cordova.exec(n,n,"OneSignalPush","addAliases",[f])}removeAlias(f){window.cordova.exec(n,n,"OneSignalPush","removeAliases",[f])}removeAliases(f){window.cordova.exec(n,n,"OneSignalPush","removeAliases",f)}addEmail(f){window.cordova.exec(n,n,"OneSignalPush","addEmail",[f])}removeEmail(f){window.cordova.exec(n,n,"OneSignalPush","removeEmail",[f])}addSms(f){window.cordova.exec(n,n,"OneSignalPush","addSms",[f])}removeSms(f){window.cordova.exec(n,n,"OneSignalPush","removeSms",[f])}addTag(f,v){const A={[f]:v};window.cordova.exec(n,n,"OneSignalPush","addTags",[A])}addTags(f){const v=f;Object.keys(f).forEach(function(A){typeof v[A]!="string"&&(v[A]=JSON.stringify(v[A]))}),window.cordova.exec(n,n,"OneSignalPush","addTags",[v])}removeTag(f){window.cordova.exec(n,n,"OneSignalPush","removeTags",[f])}removeTags(f){window.cordova.exec(n,n,"OneSignalPush","removeTags",f)}getTags(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","getTags",[])})}addEventListener(f,v){this._userStateObserverList.push(v);const A=C=>{this._processFunctionList(this._userStateObserverList,C)};window.cordova.exec(A,n,"OneSignalPush","addUserStateObserver",[])}removeEventListener(f,v){e(this._userStateObserverList,v)}getOnesignalId(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","getOnesignalId",[])})}getExternalId(){return new Promise((f,v)=>{window.cordova.exec(f,v,"OneSignalPush","getExternalId",[])})}}class g{constructor(){this.User=new E,this.Debug=new s,this.Session=new p,this.Location=new a,this.InAppMessages=new i,this.Notifications=new h,this.LiveActivities=new o,this._appID=""}initialize(f){this._appID=f;const v=()=>{this.User.pushSubscription._setPropertiesAndObserver(),this.Notifications._setPropertyAndObserver()};window.cordova.exec(v,n,"OneSignalPush","init",[this._appID])}login(f){window.cordova.exec(n,n,"OneSignalPush","login",[f])}logout(){window.cordova.exec(n,n,"OneSignalPush","logout")}setConsentRequired(f){window.cordova.exec(n,n,"OneSignalPush","setPrivacyConsentRequired",[f])}setConsentGiven(f){window.cordova.exec(n,n,"OneSignalPush","setPrivacyConsentGiven",[f])}}const _=new g;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=_),t.LogLevel=r,t.NotificationWillDisplayEvent=c,t.OSNotification=l,t.OSNotificationPermission=d,t.OneSignalPlugin=g,t.default=_})(f2);const Ry=Dw(f2);try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{PO()}catch{}const cK=()=>{const{theme:t="system"}=w1();return b.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};kR(document.getElementById("root")).render(x.jsx(hU,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:x.jsx(Zq,{children:x.jsx(aK,{children:x.jsxs(lK,{children:[x.jsx(oK,{}),x.jsx(cK,{})]})})})}));document.addEventListener("deviceready",()=>{try{Ry.setAppId("66a2d005-55fa-4f5a-874a-67be5974f2df"),Ry.promptForPushNotificationsWithUserResponse(()=>{}),Ry.setNotificationOpenedHandler(()=>{})}catch{}});export{c2 as $,uF as A,wu as B,pF as C,_t as D,gF as E,f0 as F,RK as G,bf as H,Uv as I,q$ as J,qt as K,o6 as L,EF as M,vK as N,Je as O,Ke as P,rt as Q,z as R,Ts as S,FK as T,AF as U,bw as V,Xt as W,o1 as X,eK as Y,a2 as Z,l2 as _,ac as a,Nt as a$,nK as a0,hs as a1,Er as a2,Xr as a3,Be as a4,nc as a5,EM as a6,Gg as a7,ft as a8,Qe as a9,Lq as aA,Bq as aB,u2 as aC,uc as aD,TK as aE,eW as aF,k1 as aG,N_ as aH,s8 as aI,_K as aJ,w1 as aK,xO as aL,TF as aM,DK as aN,kK as aO,NK as aP,Yq as aQ,VK as aR,RW as aS,_a as aT,hM as aU,zK as aV,r8 as aW,Kq as aX,hF as aY,vF as aZ,xF as a_,Yt as aa,R_ as ab,as as ac,bO as ad,cW as ae,SF as af,Se as ag,Sf as ah,$K as ai,AO as aj,me as ak,TI as al,dF as am,LN as an,y0 as ao,Pw as ap,bI as aq,rS as ar,le as as,pe as at,Up as au,SI as av,mF as aw,CK as ax,Vq as ay,xK as az,wK as b,O1 as b0,hK as b1,dj as b2,P_ as b3,jH as b4,LR as b5,eH as b6,FO as b7,Yu as b8,RO as b9,s2 as bA,i2 as bB,ZH as bC,n2 as bD,XH as bE,c6 as bF,yK as bG,fO as bH,CW as bI,MK as bJ,oO as bK,Gq as bL,cF as bM,Vo as bN,Mo as bO,PK as bP,OK as bQ,mW as bR,LK as bS,im as ba,hj as bb,fj as bc,NR as bd,fF as be,Vs as bf,UM as bg,Rd as bh,IK as bi,IO as bj,SO as bk,bF as bl,pW as bm,fW as bn,Xq as bo,hW as bp,uO as bq,OW as br,Hg as bs,BK as bt,UK as bu,YH as bv,JH as bw,jK as bx,r2 as by,yM as bz,x_ as c,lW as d,oW as e,mn as f,aW as g,de as h,W as i,x as j,_e as k,zi as l,o0 as m,Ym as n,os as o,xr as p,ge as q,b as r,ye as s,II as t,Ia as u,_F as v,yF as w,z$ as x,ce as y,$s as z};
