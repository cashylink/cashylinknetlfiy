{"version":3,"file":"ReferralsPage-D564qIVT-DAsrUuh_.js","sources":["../../assets/ReferralsPage-D564qIVT.js"],"sourcesContent":["import{u as R,c as A,r as i,P as D,j as e,I as L,B as E,Q as j}from\"./index-tnWDkOuX.js\";import{C as t,a as u,b as f,d as l}from\"./card-SlwaggFS.js\";import{B as n}from\"./badge-Cq-GDK1F.js\";import{A as N,a as b}from\"./alert-NHJmLZVr.js\";import{S as U,U as p}from\"./user-plus-ClfWlz3y.js\";import{L as T}from\"./link-BcnlpFfX.js\";import{C as h}from\"./circle-check-big-DcMEd0KV.js\";import{C as I,G as P,U as y}from\"./users-D_RD5-UM.js\";import{C as F}from\"./circle-x-CAZlwHZs.js\";const M=()=>{const{user:a,profile:c}=R(),{toast:d}=A(),[r,w]=i.useState([]),[v,x]=i.useState(!1),[m,g]=i.useState(!1),o=c!=null&&c.referralCode?`${window.location.origin}/register?ref=${c.referralCode}`:\"\";i.useEffect(()=>{a!=null&&a.uid?C():x(!1)},[a]);const C=async()=>{try{if(x(!0),a!=null&&a.uid){const s=await D.getByReferrerId(a.uid);w(s)}}catch(s){console.error(\"Error loading referrals:\",s),d({title:\"خطأ في تحميل الإحالات\",description:\"حدث خطأ أثناء تحميل قائمة الإحالات\",variant:\"destructive\"})}finally{x(!1)}},k=async()=>{try{await navigator.clipboard.writeText(o),g(!0),d({title:\"تم النسخ بنجاح\",description:\"تم نسخ رابط الإحالة إلى الحافظة\"}),setTimeout(()=>g(!1),2e3)}catch{d({title:\"خطأ في النسخ\",description:\"حدث خطأ أثناء نسخ الرابط\",variant:\"destructive\"})}},S=s=>{switch(s){case\"completed\":return e.jsxs(n,{variant:\"default\",className:\"bg-green-100 text-green-800 border-green-200\",children:[e.jsx(h,{className:\"w-3 h-3 mr-1\"}),\"مكتملة\"]});case\"pending\":return e.jsxs(n,{variant:\"secondary\",className:\"bg-yellow-100 text-yellow-800 border-yellow-200\",children:[e.jsx(j,{className:\"w-3 h-3 mr-1\"}),\"قيد الانتظار\"]});case\"cancelled\":return e.jsxs(n,{variant:\"destructive\",className:\"bg-red-100 text-red-800 border-red-200\",children:[e.jsx(F,{className:\"w-3 h-3 mr-1\"}),\"ملغية\"]});default:return e.jsx(n,{variant:\"outline\",children:\"غير محدد\"})}},B=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString(\"ar-SA\",{year:\"numeric\",month:\"long\",day:\"numeric\"}):\"غير محدد\";return v?e.jsx(\"div\",{className:\"min-h-screen bg-background p-4\",children:e.jsx(\"div\",{className:\"max-w-6xl mx-auto\",children:e.jsxs(\"div\",{className:\"text-center py-12\",children:[e.jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto\"}),e.jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"جاري تحميل الإحالات...\"})]})})}):e.jsx(\"div\",{className:\"min-h-screen bg-background p-4\",children:e.jsxs(\"div\",{className:\"max-w-6xl mx-auto space-y-6\",children:[e.jsxs(\"div\",{className:\"text-center mb-8\",children:[e.jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2 flex items-center justify-center gap-2\",children:[e.jsx(U,{className:\"h-8 w-8 text-green-600\"}),\"نظام الإحالات\"]}),e.jsx(\"p\",{className:\"text-gray-600\",children:\"ادع أصدقاءك واحصل على مكافآت عند انضمامهم\"})]}),e.jsxs(t,{className:\"shadow-lg border-0 bg-white/80 backdrop-blur-sm\",children:[e.jsx(u,{children:e.jsxs(f,{className:\"flex items-center gap-2 text-green-700\",children:[e.jsx(T,{className:\"h-5 w-5\"}),\"رابط الإحالة الخاص بك\"]})}),e.jsx(l,{className:\"space-y-4\",children:o?e.jsxs(e.Fragment,{children:[e.jsxs(\"div\",{className:\"flex gap-2\",children:[e.jsx(L,{value:o,readOnly:!0,className:\"flex-1 bg-gray-50 border-gray-200\"}),e.jsx(E,{onClick:k,variant:m?\"default\":\"outline\",className:m?\"bg-green-600 hover:bg-green-700\":\"\",children:m?e.jsx(h,{className:\"h-4 w-4\"}):e.jsx(I,{className:\"h-4 w-4\"})})]}),e.jsxs(N,{className:\"border-green-200 bg-green-50\",children:[e.jsx(P,{className:\"h-4 w-4 text-green-600\"}),e.jsx(b,{className:\"text-green-700\",children:\"شارك هذا الرابط مع أصدقائك للحصول على مكافآت عند تسجيلهم\"})]})]}):e.jsx(N,{variant:\"destructive\",children:e.jsx(b,{children:\"لم يتم العثور على رمز الإحالة الخاص بك\"})})})]}),e.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[e.jsx(t,{className:\"shadow-lg border-0 bg-white/80 backdrop-blur-sm\",children:e.jsx(l,{className:\"p-6\",children:e.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[e.jsxs(\"div\",{children:[e.jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"إجمالي الإحالات\"}),e.jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:r.length})]}),e.jsx(y,{className:\"h-8 w-8 text-blue-600\"})]})})}),e.jsx(t,{className:\"shadow-lg border-0 bg-white/80 backdrop-blur-sm\",children:e.jsx(l,{className:\"p-6\",children:e.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[e.jsxs(\"div\",{children:[e.jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"الإحالات المكتملة\"}),e.jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:r.filter(s=>s.status===\"completed\").length})]}),e.jsx(h,{className:\"h-8 w-8 text-green-600\"})]})})}),e.jsx(t,{className:\"shadow-lg border-0 bg-white/80 backdrop-blur-sm\",children:e.jsx(l,{className:\"p-6\",children:e.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[e.jsxs(\"div\",{children:[e.jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"قيد الانتظار\"}),e.jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:r.filter(s=>s.status===\"pending\").length})]}),e.jsx(j,{className:\"h-8 w-8 text-yellow-600\"})]})})})]}),e.jsxs(t,{className:\"shadow-lg border-0 bg-white/80 backdrop-blur-sm\",children:[e.jsx(u,{children:e.jsxs(f,{className:\"flex items-center gap-2\",children:[e.jsx(p,{className:\"h-5 w-5 text-green-600\"}),\"المستخدمون المحالون\"]})}),e.jsx(l,{children:r.length===0?e.jsxs(\"div\",{className:\"text-center py-12\",children:[e.jsx(y,{className:\"h-16 w-16 text-gray-300 mx-auto mb-4\"}),e.jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"لا توجد إحالات بعد\"}),e.jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"ابدأ بدعوة أصدقائك باستخدام رابط الإحالة أعلاه\"})]}):e.jsx(\"div\",{className:\"space-y-4\",children:r.map(s=>e.jsxs(\"div\",{className:\"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-gray-50/50\",children:[e.jsx(\"div\",{className:\"flex-1\",children:e.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[e.jsx(\"div\",{className:\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\",children:e.jsx(p,{className:\"h-5 w-5 text-green-600\"})}),e.jsxs(\"div\",{children:[e.jsx(\"p\",{className:\"font-medium text-gray-900\",children:s.referredUserEmail}),e.jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"تاريخ الإحالة: \",B(s.createdAt)]})]})]})}),e.jsx(\"div\",{className:\"flex items-center gap-3\",children:S(s.status)})]},s.id))})})]})]})})};export{M as default};\r\n//# sourceMappingURL=ReferralsPage-D564qIVT.js.map\r\n"],"names":["M","c","R","d","A","r","w","i","o","C","D","S","e","n","h","j","F","B","U","t","u","f","T","L","E","I","N","P","b","y","p"],"mappings":"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"}