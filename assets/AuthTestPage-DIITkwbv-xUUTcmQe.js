import{W as I,S as o,I as s,t as g,a as x,A as r,v as h,G as p,B as f,F as w}from"./index-C_crvORM.js";import{o as S,c as A,i as T,l as V}from"./card-SlwaggFS-CAdsFCUe.js";import{u as U}from"./label-_mnIMROJ-DCx9a6ad.js";function D(){const{user:l,profile:i,loading:t,signIn:j}=I(),[v,y]=o.useState(null),[n,N]=o.useState("alkaptin7878@mail.ru"),[c,F]=o.useState("01123456");o.useEffect(()=>{const e=()=>{y({contextUser:l?{uid:l.uid,email:l.email,emailVerified:l.emailVerified}:null,contextProfile:i,contextLoading:t,firebaseCurrentUser:r.currentUser?{uid:r.currentUser.uid,email:r.currentUser.email,emailVerified:r.currentUser.emailVerified}:null,timestamp:new Date().toISOString()})};e();const a=setInterval(e,2e3);return()=>clearInterval(a)},[l,i,t]);const b=async()=>{console.log("ðŸ§ª Testing login with:",{email:n,password:"***"});try{const e=await j(n,c);console.log("ðŸ§ª Login result:",e)}catch(e){console.error("ðŸ§ª Login error:",e)}},C=async()=>{console.log("ðŸ”¥ Testing Firestore connection..."),console.log("ðŸ” Current auth state:",{user:l?{uid:l.uid,email:l.email}:null,firebaseCurrentUser:r.currentUser?{uid:r.currentUser.uid,email:r.currentUser.email}:null});try{if(!l&&!r.currentUser){console.log("âŒ No user logged in - please login first"),alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore");return}const e=l||r.currentUser;console.log("âœ… Using user:",e==null?void 0:e.email),console.log("ðŸ“– Testing user document read...");const a=h(p,"users",e.uid),d=await f(a);d.exists()?console.log("âœ… User document exists:",d.data()):(console.log("âš ï¸ User document does not exist, creating..."),await w(a,{email:e.email,uid:e.uid,createdAt:new Date,role:"user",isActive:!0}),console.log("âœ… User document created")),console.log("ðŸ“– Testing merchant wallet read...");const u=h(p,"merchantWallets",`test_${e.uid}`),m=await f(u);m.exists()?console.log("âœ… Wallet document exists:",m.data()):(console.log("âš ï¸ Wallet document does not exist, creating test wallet..."),await w(u,{merchantUserId:e.uid,walletName:"Ù…Ø­ÙØ¸Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©",balance:0,createdAt:new Date}),console.log("âœ… Test wallet created")),console.log("ðŸŽ‰ Firestore connection test completed successfully!"),alert("ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore Ø¨Ù†Ø¬Ø§Ø­! ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„ØªÙØ§ØµÙŠÙ„")}catch(e){console.error("âŒ Firestore connection error:",e),alert(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore: ${e.message}`)}};return s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:s.jsxs(S,{children:[s.jsx(A,{children:s.jsx(T,{children:"ðŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©"})}),s.jsxs(V,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(U,{htmlFor:"email",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),s.jsx(g,{id:"email",type:"email",value:n,onChange:e=>N(e.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(U,{htmlFor:"password",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),s.jsx(g,{id:"password",type:"password",value:c,onChange:e=>F(e.target.value),placeholder:"Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"})]}),s.jsx(x,{onClick:b,className:"w-full",disabled:t,children:t?"Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...":"ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ"}),l&&s.jsx(x,{onClick:C,className:"w-full",variant:"outline",children:"Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore"}),s.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-bold mb-2",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:"}),s.jsx("pre",{className:"text-sm overflow-auto",children:JSON.stringify(v,null,2)})]})]})]})})})}export{D as default};
//# sourceMappingURL=AuthTestPage-DIITkwbv-xUUTcmQe.js.map
