const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-D1KijmfO.js","./card-CJ-6ser-.js","./BrandLogo-Cx40CHkT.js","./smartphone-Bk_Vpbi6.js","./whatsappService-DIUnbVu6.js","./arrow-left-pEhiR2Bz.js","./star-Ch3gEF67.js","./crown-CuelULZ5.js","./download-BI83ceFZ.js","./zap-BVOH1pJy.js","./circle-check-big-B7qPpE3T.js","./SubscriptionsPage-CYKYYznz.js","./contentService-BTZ_TfW3.js","./AuthPage-CIdBJsVv.js","./TopUpPage-C9kArsjK.js","./select-Bt20No4d.js","./AdminTopupsPage-Sd0ZJHOr.js","./AdminNotificationsPage-TC0qfHv-.js","./label-B6P4HKsh.js","./textarea-CMDxbUyO.js","./link-F8b_CoQn.js","./UserRegisterPage-CUURQEt3.js","./alert-Ds78u46V.js","./wallet-ByY_xMmx.js","./user-plus-MplptsBs.js","./phone-DA7H39xo.js","./store-Co9tXbi6.js","./UserAccountSetupPage-B_X4eH6p.js","./DashboardLoginPage-CtXjmJ31.js","./ProtectedDashboard-CaHmKgCT.js","./MasterPinDialog-DoxZ0TSE.js","./circle-alert-CyhKuebD.js","./profitService-CJzdybxg.js","./dollar-sign-gI21wJou.js","./ProtectedUserDashboard-C6X-urNA.js","./broadcastService-CDwMeI4U.js","./MerchantDashboard-DNB8P5lb.js","./dropdown-menu-Cr2CyYbi.js","./index-BQ7U6Bzi.js","./badge-BfGzgZeY.js","./WalletsManagement-DcPipKxN.js","./progress-ClqSX7Ze.js","./square-pen-B5j1QbHd.js","./PendingApprovalPage-D6dwUpuY.js","./freeTrialService-ag8hxyeR.js","./refresh-cw-ByDjU7ZC.js","./ProtectedAdminDashboard-DRX-h1bS.js","./ProfileIcon-9WiQiAPK.js","./switch-C0JIfFYU.js","./separator-CqHV39r0.js","./save-C7Mgi-lw.js","./users-BELg4dTe.js","./circle-x-BPdk9KzK.js","./AuthTestPage-pms577KB.js","./ProfileSettingsPage-B4Xs-T6b.js","./walletSelectionPinService-G3WPHaj1.js","./TransactionsPage-C9w_W7Bh.js","./MaintenanceDialog-DvbiVjcH.js","./WalletAdditionPage-W0qnwBwn.js","./ReferralsPage-0XUR0zQp.js","./CPanelPage-Bbs1vy3d.js","./CPanelLoginPage-CuzfLA13.js","./UserDashboardPage-CqrufyR-.js"])))=>i.map(i=>d[i]);
var XL=Object.defineProperty;var cT=t=>{throw TypeError(t)};var ZL=(t,e,n)=>e in t?XL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ku=(t,e,n)=>ZL(t,typeof e!="symbol"?e+"":e,n),hy=(t,e,n)=>e.has(t)||cT("Cannot "+n);var K=(t,e,n)=>(hy(t,e,"read from private field"),n?n.call(t):e.get(t)),pt=(t,e,n)=>e.has(t)?cT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ze=(t,e,n,r)=>(hy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),cr=(t,e,n)=>(hy(t,e,"access private method"),n);var gf=(t,e,n,r)=>({set _(s){ze(t,e,s,n)},get _(){return K(t,e,r)}});function eV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function xR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RR={exports:{}},Qp={},PR={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=Symbol.for("react.element"),tV=Symbol.for("react.portal"),nV=Symbol.for("react.fragment"),rV=Symbol.for("react.strict_mode"),sV=Symbol.for("react.profiler"),iV=Symbol.for("react.provider"),oV=Symbol.for("react.context"),aV=Symbol.for("react.forward_ref"),lV=Symbol.for("react.suspense"),cV=Symbol.for("react.memo"),uV=Symbol.for("react.lazy"),uT=Symbol.iterator;function dV(t){return t===null||typeof t!="object"?null:(t=uT&&t[uT]||t["@@iterator"],typeof t=="function"?t:null)}var CR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kR=Object.assign,DR={};function mu(t,e,n){this.props=t,this.context=e,this.refs=DR,this.updater=n||CR}mu.prototype.isReactComponent={};mu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function NR(){}NR.prototype=mu.prototype;function Lw(t,e,n){this.props=t,this.context=e,this.refs=DR,this.updater=n||CR}var Vw=Lw.prototype=new NR;Vw.constructor=Lw;kR(Vw,mu.prototype);Vw.isPureReactComponent=!0;var dT=Array.isArray,OR=Object.prototype.hasOwnProperty,Mw={current:null},LR={key:!0,ref:!0,__self:!0,__source:!0};function VR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)OR.call(e,r)&&!LR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Vh,type:t,key:i,ref:o,props:s,_owner:Mw.current}}function hV(t,e){return{$$typeof:Vh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vh}function fV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hT=/\/+/g;function fy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fV(""+t.key):e.toString(36)}function sm(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vh:case tV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+fy(o,0):r,dT(s)?(n="",t!=null&&(n=t.replace(hT,"$&/")+"/"),sm(s,e,n,"",function(c){return c})):s!=null&&(Fw(s)&&(s=hV(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",dT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+fy(i,a);o+=sm(i,e,n,l,s)}else if(l=dV(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+fy(i,a++),o+=sm(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yf(t,e,n){if(t==null)return t;var r=[],s=0;return sm(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var br={current:null},im={transition:null},pV={ReactCurrentDispatcher:br,ReactCurrentBatchConfig:im,ReactCurrentOwner:Mw};function MR(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:yf,forEach:function(t,e,n){yf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yf(t,function(){e++}),e},toArray:function(t){return yf(t,function(e){return e})||[]},only:function(t){if(!Fw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=mu;ot.Fragment=nV;ot.Profiler=sV;ot.PureComponent=Lw;ot.StrictMode=rV;ot.Suspense=lV;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pV;ot.act=MR;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Mw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)OR.call(e,l)&&!LR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Vh,type:t.type,key:s,ref:i,props:r,_owner:o}};ot.createContext=function(t){return t={$$typeof:oV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iV,_context:t},t.Consumer=t};ot.createElement=VR;ot.createFactory=function(t){var e=VR.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:aV,render:t}};ot.isValidElement=Fw;ot.lazy=function(t){return{$$typeof:uV,_payload:{_status:-1,_result:t},_init:mV}};ot.memo=function(t,e){return{$$typeof:cV,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=im.transition;im.transition={};try{t()}finally{im.transition=e}};ot.unstable_act=MR;ot.useCallback=function(t,e){return br.current.useCallback(t,e)};ot.useContext=function(t){return br.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return br.current.useDeferredValue(t)};ot.useEffect=function(t,e){return br.current.useEffect(t,e)};ot.useId=function(){return br.current.useId()};ot.useImperativeHandle=function(t,e,n){return br.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return br.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return br.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return br.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return br.current.useReducer(t,e,n)};ot.useRef=function(t){return br.current.useRef(t)};ot.useState=function(t){return br.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return br.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return br.current.useTransition()};ot.version="18.3.1";PR.exports=ot;var b=PR.exports;const F=xR(b),Uw=eV({__proto__:null,default:F},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gV=b,yV=Symbol.for("react.element"),vV=Symbol.for("react.fragment"),_V=Object.prototype.hasOwnProperty,wV=gV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EV={key:!0,ref:!0,__self:!0,__source:!0};function FR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_V.call(e,r)&&!EV.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yV,type:t,key:i,ref:o,props:s,_owner:wV.current}}Qp.Fragment=vV;Qp.jsx=FR;Qp.jsxs=FR;RR.exports=Qp;var E=RR.exports,UR={exports:{}},os={},jR={exports:{}},$R={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,W){var re=$.length;$.push(W);e:for(;0<re;){var we=re-1>>>1,Ee=$[we];if(0<s(Ee,W))$[we]=W,$[re]=Ee,re=we;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var W=$[0],re=$.pop();if(re!==W){$[0]=re;e:for(var we=0,Ee=$.length,se=Ee>>>1;we<se;){var _e=2*(we+1)-1,j=$[_e],Ge=_e+1,Me=$[Ge];if(0>s(j,re))Ge<Ee&&0>s(Me,j)?($[we]=Me,$[Ge]=re,we=Ge):($[we]=j,$[_e]=re,we=_e);else if(Ge<Ee&&0>s(Me,re))$[we]=Me,$[Ge]=re,we=Ge;else break e}}return W}function s($,W){var re=$.sortIndex-W.sortIndex;return re!==0?re:$.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,I=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=$)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function x($){if(p=!1,w($),!I)if(n(l)!==null)I=!0,fe(P);else{var W=n(c);W!==null&&Se(x,W.startTime-$)}}function P($,W){I=!1,p&&(p=!1,_(S),S=-1),m=!0;var re=f;try{for(w(W),h=n(l);h!==null&&(!(h.expirationTime>W)||$&&!N());){var we=h.callback;if(typeof we=="function"){h.callback=null,f=h.priorityLevel;var Ee=we(h.expirationTime<=W);W=t.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===n(l)&&r(l),w(W)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var _e=n(c);_e!==null&&Se(x,_e.startTime-W),se=!1}return se}finally{h=null,f=re,m=!1}}var L=!1,A=null,S=-1,R=5,C=-1;function N(){return!(t.unstable_now()-C<R)}function O(){if(A!==null){var $=t.unstable_now();C=$;var W=!0;try{W=A(!0,$)}finally{W?k():(L=!1,A=null)}}else L=!1}var k;if(typeof v=="function")k=function(){v(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,de=z.port2;z.port1.onmessage=O,k=function(){de.postMessage(null)}}else k=function(){y(O,0)};function fe($){A=$,L||(L=!0,k())}function Se($,W){S=y(function(){$(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||m||(I=!0,fe(P))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var re=f;f=W;try{return $()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,W){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var re=f;f=$;try{return W()}finally{f=re}},t.unstable_scheduleCallback=function($,W,re){var we=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?we+re:we):re=we,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=re+Ee,$={id:d++,callback:W,priorityLevel:$,startTime:re,expirationTime:Ee,sortIndex:-1},re>we?($.sortIndex=re,e(c,$),n(l)===null&&$===n(c)&&(p?(_(S),S=-1):p=!0,Se(x,re-we))):($.sortIndex=Ee,e(l,$),I||m||(I=!0,fe(P))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var W=f;return function(){var re=f;f=W;try{return $.apply(this,arguments)}finally{f=re}}}})($R);jR.exports=$R;var IV=jR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TV=b,rs=IV;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BR=new Set,Hd={};function El(t,e){Oc(t,e),Oc(t+"Capture",e)}function Oc(t,e){for(Hd[t]=e,t=0;t<e.length;t++)BR.add(e[t])}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kv=Object.prototype.hasOwnProperty,SV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fT={},mT={};function bV(t){return kv.call(mT,t)?!0:kv.call(fT,t)?!1:SV.test(t)?mT[t]=!0:(fT[t]=!0,!1)}function AV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xV(t,e,n,r){if(e===null||typeof e>"u"||AV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ar(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rr[t]=new Ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rr[e]=new Ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rr[t]=new Ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rr[t]=new Ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rr[t]=new Ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rr[t]=new Ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rr[t]=new Ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rr[t]=new Ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rr[t]=new Ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var jw=/[\-:]([a-z])/g;function $w(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jw,$w);rr[e]=new Ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jw,$w);rr[e]=new Ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jw,$w);rr[e]=new Ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rr[t]=new Ar(t,1,!1,t.toLowerCase(),null,!1,!1)});rr.xlinkHref=new Ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rr[t]=new Ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bw(t,e,n,r){var s=rr.hasOwnProperty(e)?rr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xV(e,n,s,r)&&(n=null),r||s===null?bV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ji=TV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vf=Symbol.for("react.element"),Ql=Symbol.for("react.portal"),Yl=Symbol.for("react.fragment"),zw=Symbol.for("react.strict_mode"),Dv=Symbol.for("react.profiler"),zR=Symbol.for("react.provider"),WR=Symbol.for("react.context"),Ww=Symbol.for("react.forward_ref"),Nv=Symbol.for("react.suspense"),Ov=Symbol.for("react.suspense_list"),qw=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),qR=Symbol.for("react.offscreen"),pT=Symbol.iterator;function Gu(t){return t===null||typeof t!="object"?null:(t=pT&&t[pT]||t["@@iterator"],typeof t=="function"?t:null)}var nn=Object.assign,my;function ud(t){if(my===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);my=e&&e[1]||""}return`
`+my+t}var py=!1;function gy(t,e){if(!t||py)return"";py=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{py=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ud(t):""}function RV(t){switch(t.tag){case 5:return ud(t.type);case 16:return ud("Lazy");case 13:return ud("Suspense");case 19:return ud("SuspenseList");case 0:case 2:case 15:return t=gy(t.type,!1),t;case 11:return t=gy(t.type.render,!1),t;case 1:return t=gy(t.type,!0),t;default:return""}}function Lv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yl:return"Fragment";case Ql:return"Portal";case Dv:return"Profiler";case zw:return"StrictMode";case Nv:return"Suspense";case Ov:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WR:return(t.displayName||"Context")+".Consumer";case zR:return(t._context.displayName||"Context")+".Provider";case Ww:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qw:return e=t.displayName||null,e!==null?e:Lv(t.type)||"Memo";case co:e=t._payload,t=t._init;try{return Lv(t(e))}catch{}}return null}function PV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lv(e);case 8:return e===zw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ho(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function HR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CV(t){var e=HR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _f(t){t._valueTracker||(t._valueTracker=CV(t))}function KR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=HR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vv(t,e){var n=e.checked;return nn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ho(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GR(t,e){e=e.checked,e!=null&&Bw(t,"checked",e,!1)}function Mv(t,e){GR(t,e);var n=Ho(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fv(t,e.type,Ho(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fv(t,e,n){(e!=="number"||Fm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dd=Array.isArray;function fc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ho(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Uv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return nn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(dd(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ho(n)}}function QR(t,e){var n=Ho(e.value),r=Ho(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _T(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wf,JR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wf=wf||document.createElement("div"),wf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Id={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kV=["Webkit","ms","Moz","O"];Object.keys(Id).forEach(function(t){kV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Id[e]=Id[t]})});function XR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Id.hasOwnProperty(t)&&Id[t]?(""+e).trim():e+"px"}function ZR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var DV=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $v(t,e){if(e){if(DV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Bv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zv=null;function Hw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wv=null,mc=null,pc=null;function wT(t){if(t=Uh(t)){if(typeof Wv!="function")throw Error(le(280));var e=t.stateNode;e&&(e=eg(e),Wv(t.stateNode,t.type,e))}}function eP(t){mc?pc?pc.push(t):pc=[t]:mc=t}function tP(){if(mc){var t=mc,e=pc;if(pc=mc=null,wT(t),e)for(t=0;t<e.length;t++)wT(e[t])}}function nP(t,e){return t(e)}function rP(){}var yy=!1;function sP(t,e,n){if(yy)return t(e,n);yy=!0;try{return nP(t,e,n)}finally{yy=!1,(mc!==null||pc!==null)&&(rP(),tP())}}function Gd(t,e){var n=t.stateNode;if(n===null)return null;var r=eg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var qv=!1;if(Pi)try{var Qu={};Object.defineProperty(Qu,"passive",{get:function(){qv=!0}}),window.addEventListener("test",Qu,Qu),window.removeEventListener("test",Qu,Qu)}catch{qv=!1}function NV(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Td=!1,Um=null,jm=!1,Hv=null,OV={onError:function(t){Td=!0,Um=t}};function LV(t,e,n,r,s,i,o,a,l){Td=!1,Um=null,NV.apply(OV,arguments)}function VV(t,e,n,r,s,i,o,a,l){if(LV.apply(this,arguments),Td){if(Td){var c=Um;Td=!1,Um=null}else throw Error(le(198));jm||(jm=!0,Hv=c)}}function Il(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ET(t){if(Il(t)!==t)throw Error(le(188))}function MV(t){var e=t.alternate;if(!e){if(e=Il(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ET(s),t;if(i===r)return ET(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function oP(t){return t=MV(t),t!==null?aP(t):null}function aP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aP(t);if(e!==null)return e;t=t.sibling}return null}var lP=rs.unstable_scheduleCallback,IT=rs.unstable_cancelCallback,FV=rs.unstable_shouldYield,UV=rs.unstable_requestPaint,pn=rs.unstable_now,jV=rs.unstable_getCurrentPriorityLevel,Kw=rs.unstable_ImmediatePriority,cP=rs.unstable_UserBlockingPriority,$m=rs.unstable_NormalPriority,$V=rs.unstable_LowPriority,uP=rs.unstable_IdlePriority,Yp=null,ti=null;function BV(t){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(Yp,t,void 0,(t.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:qV,zV=Math.log,WV=Math.LN2;function qV(t){return t>>>=0,t===0?32:31-(zV(t)/WV|0)|0}var Ef=64,If=4194304;function hd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=hd(a):(i&=o,i!==0&&(r=hd(i)))}else o=n&~s,o!==0?r=hd(o):i!==0&&(r=hd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cs(e),s=1<<n,r|=t[n],e&=~s;return r}function HV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=HV(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Kv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dP(){var t=Ef;return Ef<<=1,!(Ef&4194240)&&(Ef=64),t}function vy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cs(e),t[e]=n}function GV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var At=0;function hP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fP,Qw,mP,pP,gP,Gv=!1,Tf=[],Co=null,ko=null,Do=null,Qd=new Map,Yd=new Map,fo=[],QV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TT(t,e){switch(t){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Do=null;break;case"pointerover":case"pointerout":Qd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yd.delete(e.pointerId)}}function Yu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Uh(e),e!==null&&Qw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YV(t,e,n,r,s){switch(e){case"focusin":return Co=Yu(Co,t,e,n,r,s),!0;case"dragenter":return ko=Yu(ko,t,e,n,r,s),!0;case"mouseover":return Do=Yu(Do,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qd.set(i,Yu(Qd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yd.set(i,Yu(Yd.get(i)||null,t,e,n,r,s)),!0}return!1}function yP(t){var e=Fa(t.target);if(e!==null){var n=Il(e);if(n!==null){if(e=n.tag,e===13){if(e=iP(n),e!==null){t.blockedOn=e,gP(t.priority,function(){mP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function om(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zv=r,n.target.dispatchEvent(r),zv=null}else return e=Uh(n),e!==null&&Qw(e),t.blockedOn=n,!1;e.shift()}return!0}function ST(t,e,n){om(t)&&n.delete(e)}function JV(){Gv=!1,Co!==null&&om(Co)&&(Co=null),ko!==null&&om(ko)&&(ko=null),Do!==null&&om(Do)&&(Do=null),Qd.forEach(ST),Yd.forEach(ST)}function Ju(t,e){t.blockedOn===e&&(t.blockedOn=null,Gv||(Gv=!0,rs.unstable_scheduleCallback(rs.unstable_NormalPriority,JV)))}function Jd(t){function e(s){return Ju(s,t)}if(0<Tf.length){Ju(Tf[0],t);for(var n=1;n<Tf.length;n++){var r=Tf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Co!==null&&Ju(Co,t),ko!==null&&Ju(ko,t),Do!==null&&Ju(Do,t),Qd.forEach(e),Yd.forEach(e),n=0;n<fo.length;n++)r=fo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fo.length&&(n=fo[0],n.blockedOn===null);)yP(n),n.blockedOn===null&&fo.shift()}var gc=ji.ReactCurrentBatchConfig,zm=!0;function XV(t,e,n,r){var s=At,i=gc.transition;gc.transition=null;try{At=1,Yw(t,e,n,r)}finally{At=s,gc.transition=i}}function ZV(t,e,n,r){var s=At,i=gc.transition;gc.transition=null;try{At=4,Yw(t,e,n,r)}finally{At=s,gc.transition=i}}function Yw(t,e,n,r){if(zm){var s=Qv(t,e,n,r);if(s===null)Ry(t,e,r,Wm,n),TT(t,r);else if(YV(s,t,e,n,r))r.stopPropagation();else if(TT(t,r),e&4&&-1<QV.indexOf(t)){for(;s!==null;){var i=Uh(s);if(i!==null&&fP(i),i=Qv(t,e,n,r),i===null&&Ry(t,e,r,Wm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ry(t,e,r,null,n)}}var Wm=null;function Qv(t,e,n,r){if(Wm=null,t=Hw(r),t=Fa(t),t!==null)if(e=Il(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wm=t,null}function vP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jV()){case Kw:return 1;case cP:return 4;case $m:case $V:return 16;case uP:return 536870912;default:return 16}default:return 16}}var To=null,Jw=null,am=null;function _P(){if(am)return am;var t,e=Jw,n=e.length,r,s="value"in To?To.value:To.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return am=s.slice(t,1<r?1-r:void 0)}function lm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sf(){return!0}function bT(){return!1}function as(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sf:bT,this.isPropagationStopped=bT,this}return nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),e}var pu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xw=as(pu),Fh=nn({},pu,{view:0,detail:0}),eM=as(Fh),_y,wy,Xu,Jp=nn({},Fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xu&&(Xu&&t.type==="mousemove"?(_y=t.screenX-Xu.screenX,wy=t.screenY-Xu.screenY):wy=_y=0,Xu=t),_y)},movementY:function(t){return"movementY"in t?t.movementY:wy}}),AT=as(Jp),tM=nn({},Jp,{dataTransfer:0}),nM=as(tM),rM=nn({},Fh,{relatedTarget:0}),Ey=as(rM),sM=nn({},pu,{animationName:0,elapsedTime:0,pseudoElement:0}),iM=as(sM),oM=nn({},pu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aM=as(oM),lM=nn({},pu,{data:0}),xT=as(lM),cM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dM[t])?!!e[t]:!1}function Zw(){return hM}var fM=nn({},Fh,{key:function(t){if(t.key){var e=cM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zw,charCode:function(t){return t.type==="keypress"?lm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mM=as(fM),pM=nn({},Jp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RT=as(pM),gM=nn({},Fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zw}),yM=as(gM),vM=nn({},pu,{propertyName:0,elapsedTime:0,pseudoElement:0}),_M=as(vM),wM=nn({},Jp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EM=as(wM),IM=[9,13,27,32],e0=Pi&&"CompositionEvent"in window,Sd=null;Pi&&"documentMode"in document&&(Sd=document.documentMode);var TM=Pi&&"TextEvent"in window&&!Sd,wP=Pi&&(!e0||Sd&&8<Sd&&11>=Sd),PT=" ",CT=!1;function EP(t,e){switch(t){case"keyup":return IM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jl=!1;function SM(t,e){switch(t){case"compositionend":return IP(e);case"keypress":return e.which!==32?null:(CT=!0,PT);case"textInput":return t=e.data,t===PT&&CT?null:t;default:return null}}function bM(t,e){if(Jl)return t==="compositionend"||!e0&&EP(t,e)?(t=_P(),am=Jw=To=null,Jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wP&&e.locale!=="ko"?null:e.data;default:return null}}var AM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AM[t.type]:e==="textarea"}function TP(t,e,n,r){eP(r),e=qm(e,"onChange"),0<e.length&&(n=new Xw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bd=null,Xd=null;function xM(t){OP(t,0)}function Xp(t){var e=ec(t);if(KR(e))return t}function RM(t,e){if(t==="change")return e}var SP=!1;if(Pi){var Iy;if(Pi){var Ty="oninput"in document;if(!Ty){var DT=document.createElement("div");DT.setAttribute("oninput","return;"),Ty=typeof DT.oninput=="function"}Iy=Ty}else Iy=!1;SP=Iy&&(!document.documentMode||9<document.documentMode)}function NT(){bd&&(bd.detachEvent("onpropertychange",bP),Xd=bd=null)}function bP(t){if(t.propertyName==="value"&&Xp(Xd)){var e=[];TP(e,Xd,t,Hw(t)),sP(xM,e)}}function PM(t,e,n){t==="focusin"?(NT(),bd=e,Xd=n,bd.attachEvent("onpropertychange",bP)):t==="focusout"&&NT()}function CM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xp(Xd)}function kM(t,e){if(t==="click")return Xp(e)}function DM(t,e){if(t==="input"||t==="change")return Xp(e)}function NM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Os=typeof Object.is=="function"?Object.is:NM;function Zd(t,e){if(Os(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kv.call(e,s)||!Os(t[s],e[s]))return!1}return!0}function OT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LT(t,e){var n=OT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=OT(n)}}function AP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?AP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xP(){for(var t=window,e=Fm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fm(t.document)}return e}function t0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OM(t){var e=xP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&AP(n.ownerDocument.documentElement,n)){if(r!==null&&t0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=LT(n,i);var o=LT(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LM=Pi&&"documentMode"in document&&11>=document.documentMode,Xl=null,Yv=null,Ad=null,Jv=!1;function VT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jv||Xl==null||Xl!==Fm(r)||(r=Xl,"selectionStart"in r&&t0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ad&&Zd(Ad,r)||(Ad=r,r=qm(Yv,"onSelect"),0<r.length&&(e=new Xw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xl)))}function bf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zl={animationend:bf("Animation","AnimationEnd"),animationiteration:bf("Animation","AnimationIteration"),animationstart:bf("Animation","AnimationStart"),transitionend:bf("Transition","TransitionEnd")},Sy={},RP={};Pi&&(RP=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Zp(t){if(Sy[t])return Sy[t];if(!Zl[t])return t;var e=Zl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in RP)return Sy[t]=e[n];return t}var PP=Zp("animationend"),CP=Zp("animationiteration"),kP=Zp("animationstart"),DP=Zp("transitionend"),NP=new Map,MT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(t,e){NP.set(t,e),El(e,[t])}for(var by=0;by<MT.length;by++){var Ay=MT[by],VM=Ay.toLowerCase(),MM=Ay[0].toUpperCase()+Ay.slice(1);sa(VM,"on"+MM)}sa(PP,"onAnimationEnd");sa(CP,"onAnimationIteration");sa(kP,"onAnimationStart");sa("dblclick","onDoubleClick");sa("focusin","onFocus");sa("focusout","onBlur");sa(DP,"onTransitionEnd");Oc("onMouseEnter",["mouseout","mouseover"]);Oc("onMouseLeave",["mouseout","mouseover"]);Oc("onPointerEnter",["pointerout","pointerover"]);Oc("onPointerLeave",["pointerout","pointerover"]);El("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));El("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));El("onBeforeInput",["compositionend","keypress","textInput","paste"]);El("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));El("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));El("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FM=new Set("cancel close invalid load scroll toggle".split(" ").concat(fd));function FT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VV(r,e,void 0,t),t.currentTarget=null}function OP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;FT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;FT(s,a,c),i=l}}}if(jm)throw t=Hv,jm=!1,Hv=null,t}function Ut(t,e){var n=e[n_];n===void 0&&(n=e[n_]=new Set);var r=t+"__bubble";n.has(r)||(LP(e,t,2,!1),n.add(r))}function xy(t,e,n){var r=0;e&&(r|=4),LP(n,t,r,e)}var Af="_reactListening"+Math.random().toString(36).slice(2);function eh(t){if(!t[Af]){t[Af]=!0,BR.forEach(function(n){n!=="selectionchange"&&(FM.has(n)||xy(n,!1,t),xy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Af]||(e[Af]=!0,xy("selectionchange",!1,e))}}function LP(t,e,n,r){switch(vP(e)){case 1:var s=XV;break;case 4:s=ZV;break;default:s=Yw}n=s.bind(null,e,n,t),s=void 0,!qv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ry(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Fa(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}sP(function(){var c=i,d=Hw(n),h=[];e:{var f=NP.get(t);if(f!==void 0){var m=Xw,I=t;switch(t){case"keypress":if(lm(n)===0)break e;case"keydown":case"keyup":m=mM;break;case"focusin":I="focus",m=Ey;break;case"focusout":I="blur",m=Ey;break;case"beforeblur":case"afterblur":m=Ey;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=AT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=nM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=yM;break;case PP:case CP:case kP:m=iM;break;case DP:m=_M;break;case"scroll":m=eM;break;case"wheel":m=EM;break;case"copy":case"cut":case"paste":m=aM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=RT}var p=(e&4)!==0,y=!p&&t==="scroll",_=p?f!==null?f+"Capture":null:f;p=[];for(var v=c,w;v!==null;){w=v;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,_!==null&&(x=Gd(v,_),x!=null&&p.push(th(v,x,w)))),y)break;v=v.return}0<p.length&&(f=new m(f,I,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==zv&&(I=n.relatedTarget||n.fromElement)&&(Fa(I)||I[Ci]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(I=n.relatedTarget||n.toElement,m=c,I=I?Fa(I):null,I!==null&&(y=Il(I),I!==y||I.tag!==5&&I.tag!==6)&&(I=null)):(m=null,I=c),m!==I)){if(p=AT,x="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(p=RT,x="onPointerLeave",_="onPointerEnter",v="pointer"),y=m==null?f:ec(m),w=I==null?f:ec(I),f=new p(x,v+"leave",m,n,d),f.target=y,f.relatedTarget=w,x=null,Fa(d)===c&&(p=new p(_,v+"enter",I,n,d),p.target=w,p.relatedTarget=y,x=p),y=x,m&&I)t:{for(p=m,_=I,v=0,w=p;w;w=Dl(w))v++;for(w=0,x=_;x;x=Dl(x))w++;for(;0<v-w;)p=Dl(p),v--;for(;0<w-v;)_=Dl(_),w--;for(;v--;){if(p===_||_!==null&&p===_.alternate)break t;p=Dl(p),_=Dl(_)}p=null}else p=null;m!==null&&UT(h,f,m,p,!1),I!==null&&y!==null&&UT(h,y,I,p,!0)}}e:{if(f=c?ec(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=RM;else if(kT(f))if(SP)P=DM;else{P=CM;var L=PM}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=kM);if(P&&(P=P(t,c))){TP(h,P,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&Fv(f,"number",f.value)}switch(L=c?ec(c):window,t){case"focusin":(kT(L)||L.contentEditable==="true")&&(Xl=L,Yv=c,Ad=null);break;case"focusout":Ad=Yv=Xl=null;break;case"mousedown":Jv=!0;break;case"contextmenu":case"mouseup":case"dragend":Jv=!1,VT(h,n,d);break;case"selectionchange":if(LM)break;case"keydown":case"keyup":VT(h,n,d)}var A;if(e0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Jl?EP(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(wP&&n.locale!=="ko"&&(Jl||S!=="onCompositionStart"?S==="onCompositionEnd"&&Jl&&(A=_P()):(To=d,Jw="value"in To?To.value:To.textContent,Jl=!0)),L=qm(c,S),0<L.length&&(S=new xT(S,t,null,n,d),h.push({event:S,listeners:L}),A?S.data=A:(A=IP(n),A!==null&&(S.data=A)))),(A=TM?SM(t,n):bM(t,n))&&(c=qm(c,"onBeforeInput"),0<c.length&&(d=new xT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=A))}OP(h,e)})}function th(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gd(t,n),i!=null&&r.unshift(th(t,i,s)),i=Gd(t,e),i!=null&&r.push(th(t,i,s))),t=t.return}return r}function Dl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function UT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Gd(n,i),l!=null&&o.unshift(th(n,l,a))):s||(l=Gd(n,i),l!=null&&o.push(th(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UM=/\r\n?/g,jM=/\u0000|\uFFFD/g;function jT(t){return(typeof t=="string"?t:""+t).replace(UM,`
`).replace(jM,"")}function xf(t,e,n){if(e=jT(e),jT(t)!==e&&n)throw Error(le(425))}function Hm(){}var Xv=null,Zv=null;function e_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var t_=typeof setTimeout=="function"?setTimeout:void 0,$M=typeof clearTimeout=="function"?clearTimeout:void 0,$T=typeof Promise=="function"?Promise:void 0,BM=typeof queueMicrotask=="function"?queueMicrotask:typeof $T<"u"?function(t){return $T.resolve(null).then(t).catch(zM)}:t_;function zM(t){setTimeout(function(){throw t})}function Py(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Jd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jd(e)}function No(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gu=Math.random().toString(36).slice(2),Qs="__reactFiber$"+gu,nh="__reactProps$"+gu,Ci="__reactContainer$"+gu,n_="__reactEvents$"+gu,WM="__reactListeners$"+gu,qM="__reactHandles$"+gu;function Fa(t){var e=t[Qs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ci]||n[Qs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=BT(t);t!==null;){if(n=t[Qs])return n;t=BT(t)}return e}t=n,n=t.parentNode}return null}function Uh(t){return t=t[Qs]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ec(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function eg(t){return t[nh]||null}var r_=[],tc=-1;function ia(t){return{current:t}}function Bt(t){0>tc||(t.current=r_[tc],r_[tc]=null,tc--)}function Vt(t,e){tc++,r_[tc]=t.current,t.current=e}var Ko={},vr=ia(Ko),$r=ia(!1),nl=Ko;function Lc(t,e){var n=t.type.contextTypes;if(!n)return Ko;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Br(t){return t=t.childContextTypes,t!=null}function Km(){Bt($r),Bt(vr)}function zT(t,e,n){if(vr.current!==Ko)throw Error(le(168));Vt(vr,e),Vt($r,n)}function VP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,PV(t)||"Unknown",s));return nn({},n,r)}function Gm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ko,nl=vr.current,Vt(vr,t),Vt($r,$r.current),!0}function WT(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=VP(t,e,nl),r.__reactInternalMemoizedMergedChildContext=t,Bt($r),Bt(vr),Vt(vr,t)):Bt($r),Vt($r,n)}var _i=null,tg=!1,Cy=!1;function MP(t){_i===null?_i=[t]:_i.push(t)}function HM(t){tg=!0,MP(t)}function oa(){if(!Cy&&_i!==null){Cy=!0;var t=0,e=At;try{var n=_i;for(At=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_i=null,tg=!1}catch(s){throw _i!==null&&(_i=_i.slice(t+1)),lP(Kw,oa),s}finally{At=e,Cy=!1}}return null}var nc=[],rc=0,Qm=null,Ym=0,hs=[],fs=0,rl=null,Ii=1,Ti="";function Sa(t,e){nc[rc++]=Ym,nc[rc++]=Qm,Qm=t,Ym=e}function FP(t,e,n){hs[fs++]=Ii,hs[fs++]=Ti,hs[fs++]=rl,rl=t;var r=Ii;t=Ti;var s=32-Cs(r)-1;r&=~(1<<s),n+=1;var i=32-Cs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ii=1<<32-Cs(e)+s|n<<s|r,Ti=i+t}else Ii=1<<i|n<<s|r,Ti=t}function n0(t){t.return!==null&&(Sa(t,1),FP(t,1,0))}function r0(t){for(;t===Qm;)Qm=nc[--rc],nc[rc]=null,Ym=nc[--rc],nc[rc]=null;for(;t===rl;)rl=hs[--fs],hs[fs]=null,Ti=hs[--fs],hs[fs]=null,Ii=hs[--fs],hs[fs]=null}var es=null,Xr=null,Kt=!1,xs=null;function UP(t,e){var n=ms(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,es=t,Xr=No(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,es=t,Xr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=rl!==null?{id:Ii,overflow:Ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ms(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,es=t,Xr=null,!0):!1;default:return!1}}function s_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function i_(t){if(Kt){var e=Xr;if(e){var n=e;if(!qT(t,e)){if(s_(t))throw Error(le(418));e=No(n.nextSibling);var r=es;e&&qT(t,e)?UP(r,n):(t.flags=t.flags&-4097|2,Kt=!1,es=t)}}else{if(s_(t))throw Error(le(418));t.flags=t.flags&-4097|2,Kt=!1,es=t}}}function HT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;es=t}function Rf(t){if(t!==es)return!1;if(!Kt)return HT(t),Kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!e_(t.type,t.memoizedProps)),e&&(e=Xr)){if(s_(t))throw jP(),Error(le(418));for(;e;)UP(t,e),e=No(e.nextSibling)}if(HT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xr=No(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xr=null}}else Xr=es?No(t.stateNode.nextSibling):null;return!0}function jP(){for(var t=Xr;t;)t=No(t.nextSibling)}function Vc(){Xr=es=null,Kt=!1}function s0(t){xs===null?xs=[t]:xs.push(t)}var KM=ji.ReactCurrentBatchConfig;function Zu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Pf(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function KT(t){var e=t._init;return e(t._payload)}function $P(t){function e(_,v){if(t){var w=_.deletions;w===null?(_.deletions=[v],_.flags|=16):w.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function s(_,v){return _=Mo(_,v),_.index=0,_.sibling=null,_}function i(_,v,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<v?(_.flags|=2,v):w):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,w,x){return v===null||v.tag!==6?(v=My(w,_.mode,x),v.return=_,v):(v=s(v,w),v.return=_,v)}function l(_,v,w,x){var P=w.type;return P===Yl?d(_,v,w.props.children,x,w.key):v!==null&&(v.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===co&&KT(P)===v.type)?(x=s(v,w.props),x.ref=Zu(_,v,w),x.return=_,x):(x=pm(w.type,w.key,w.props,null,_.mode,x),x.ref=Zu(_,v,w),x.return=_,x)}function c(_,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Fy(w,_.mode,x),v.return=_,v):(v=s(v,w.children||[]),v.return=_,v)}function d(_,v,w,x,P){return v===null||v.tag!==7?(v=Ja(w,_.mode,x,P),v.return=_,v):(v=s(v,w),v.return=_,v)}function h(_,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=My(""+v,_.mode,w),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vf:return w=pm(v.type,v.key,v.props,null,_.mode,w),w.ref=Zu(_,null,v),w.return=_,w;case Ql:return v=Fy(v,_.mode,w),v.return=_,v;case co:var x=v._init;return h(_,x(v._payload),w)}if(dd(v)||Gu(v))return v=Ja(v,_.mode,w,null),v.return=_,v;Pf(_,v)}return null}function f(_,v,w,x){var P=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(_,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vf:return w.key===P?l(_,v,w,x):null;case Ql:return w.key===P?c(_,v,w,x):null;case co:return P=w._init,f(_,v,P(w._payload),x)}if(dd(w)||Gu(w))return P!==null?null:d(_,v,w,x,null);Pf(_,w)}return null}function m(_,v,w,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return _=_.get(w)||null,a(v,_,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vf:return _=_.get(x.key===null?w:x.key)||null,l(v,_,x,P);case Ql:return _=_.get(x.key===null?w:x.key)||null,c(v,_,x,P);case co:var L=x._init;return m(_,v,w,L(x._payload),P)}if(dd(x)||Gu(x))return _=_.get(w)||null,d(v,_,x,P,null);Pf(v,x)}return null}function I(_,v,w,x){for(var P=null,L=null,A=v,S=v=0,R=null;A!==null&&S<w.length;S++){A.index>S?(R=A,A=null):R=A.sibling;var C=f(_,A,w[S],x);if(C===null){A===null&&(A=R);break}t&&A&&C.alternate===null&&e(_,A),v=i(C,v,S),L===null?P=C:L.sibling=C,L=C,A=R}if(S===w.length)return n(_,A),Kt&&Sa(_,S),P;if(A===null){for(;S<w.length;S++)A=h(_,w[S],x),A!==null&&(v=i(A,v,S),L===null?P=A:L.sibling=A,L=A);return Kt&&Sa(_,S),P}for(A=r(_,A);S<w.length;S++)R=m(A,_,S,w[S],x),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?S:R.key),v=i(R,v,S),L===null?P=R:L.sibling=R,L=R);return t&&A.forEach(function(N){return e(_,N)}),Kt&&Sa(_,S),P}function p(_,v,w,x){var P=Gu(w);if(typeof P!="function")throw Error(le(150));if(w=P.call(w),w==null)throw Error(le(151));for(var L=P=null,A=v,S=v=0,R=null,C=w.next();A!==null&&!C.done;S++,C=w.next()){A.index>S?(R=A,A=null):R=A.sibling;var N=f(_,A,C.value,x);if(N===null){A===null&&(A=R);break}t&&A&&N.alternate===null&&e(_,A),v=i(N,v,S),L===null?P=N:L.sibling=N,L=N,A=R}if(C.done)return n(_,A),Kt&&Sa(_,S),P;if(A===null){for(;!C.done;S++,C=w.next())C=h(_,C.value,x),C!==null&&(v=i(C,v,S),L===null?P=C:L.sibling=C,L=C);return Kt&&Sa(_,S),P}for(A=r(_,A);!C.done;S++,C=w.next())C=m(A,_,S,C.value,x),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?S:C.key),v=i(C,v,S),L===null?P=C:L.sibling=C,L=C);return t&&A.forEach(function(O){return e(_,O)}),Kt&&Sa(_,S),P}function y(_,v,w,x){if(typeof w=="object"&&w!==null&&w.type===Yl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case vf:e:{for(var P=w.key,L=v;L!==null;){if(L.key===P){if(P=w.type,P===Yl){if(L.tag===7){n(_,L.sibling),v=s(L,w.props.children),v.return=_,_=v;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===co&&KT(P)===L.type){n(_,L.sibling),v=s(L,w.props),v.ref=Zu(_,L,w),v.return=_,_=v;break e}n(_,L);break}else e(_,L);L=L.sibling}w.type===Yl?(v=Ja(w.props.children,_.mode,x,w.key),v.return=_,_=v):(x=pm(w.type,w.key,w.props,null,_.mode,x),x.ref=Zu(_,v,w),x.return=_,_=x)}return o(_);case Ql:e:{for(L=w.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(_,v.sibling),v=s(v,w.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=Fy(w,_.mode,x),v.return=_,_=v}return o(_);case co:return L=w._init,y(_,v,L(w._payload),x)}if(dd(w))return I(_,v,w,x);if(Gu(w))return p(_,v,w,x);Pf(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(_,v.sibling),v=s(v,w),v.return=_,_=v):(n(_,v),v=My(w,_.mode,x),v.return=_,_=v),o(_)):n(_,v)}return y}var Mc=$P(!0),BP=$P(!1),Jm=ia(null),Xm=null,sc=null,i0=null;function o0(){i0=sc=Xm=null}function a0(t){var e=Jm.current;Bt(Jm),t._currentValue=e}function o_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yc(t,e){Xm=t,i0=sc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vr=!0),t.firstContext=null)}function ys(t){var e=t._currentValue;if(i0!==t)if(t={context:t,memoizedValue:e,next:null},sc===null){if(Xm===null)throw Error(le(308));sc=t,Xm.dependencies={lanes:0,firstContext:t}}else sc=sc.next=t;return e}var Ua=null;function l0(t){Ua===null?Ua=[t]:Ua.push(t)}function zP(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,l0(e)):(n.next=s.next,s.next=n),e.interleaved=n,ki(t,r)}function ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var uo=!1;function c0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ki(t,n)}return s=r.interleaved,s===null?(e.next=e,l0(r)):(e.next=s.next,s.next=e),r.interleaved=e,ki(t,n)}function cm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gw(t,n)}}function GT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zm(t,e,n,r){var s=t.updateQueue;uo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,p=a;switch(f=e,m=n,p.tag){case 1:if(I=p.payload,typeof I=="function"){h=I.call(m,h,f);break e}h=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=p.payload,f=typeof I=="function"?I.call(m,h,f):I,f==null)break e;h=nn({},h,f);break e;case 2:uo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);il|=o,t.lanes=o,t.memoizedState=h}}function QT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var jh={},ni=ia(jh),rh=ia(jh),sh=ia(jh);function ja(t){if(t===jh)throw Error(le(174));return t}function u0(t,e){switch(Vt(sh,e),Vt(rh,t),Vt(ni,jh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jv(e,t)}Bt(ni),Vt(ni,e)}function Fc(){Bt(ni),Bt(rh),Bt(sh)}function qP(t){ja(sh.current);var e=ja(ni.current),n=jv(e,t.type);e!==n&&(Vt(rh,t),Vt(ni,n))}function d0(t){rh.current===t&&(Bt(ni),Bt(rh))}var Zt=ia(0);function ep(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ky=[];function h0(){for(var t=0;t<ky.length;t++)ky[t]._workInProgressVersionPrimary=null;ky.length=0}var um=ji.ReactCurrentDispatcher,Dy=ji.ReactCurrentBatchConfig,sl=0,tn=null,On=null,qn=null,tp=!1,xd=!1,ih=0,GM=0;function ur(){throw Error(le(321))}function f0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Os(t[n],e[n]))return!1;return!0}function m0(t,e,n,r,s,i){if(sl=i,tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,um.current=t===null||t.memoizedState===null?XM:ZM,t=n(r,s),xd){i=0;do{if(xd=!1,ih=0,25<=i)throw Error(le(301));i+=1,qn=On=null,e.updateQueue=null,um.current=eF,t=n(r,s)}while(xd)}if(um.current=np,e=On!==null&&On.next!==null,sl=0,qn=On=tn=null,tp=!1,e)throw Error(le(300));return t}function p0(){var t=ih!==0;return ih=0,t}function zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?tn.memoizedState=qn=t:qn=qn.next=t,qn}function vs(){if(On===null){var t=tn.alternate;t=t!==null?t.memoizedState:null}else t=On.next;var e=qn===null?tn.memoizedState:qn.next;if(e!==null)qn=e,On=t;else{if(t===null)throw Error(le(310));On=t,t={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},qn===null?tn.memoizedState=qn=t:qn=qn.next=t}return qn}function oh(t,e){return typeof e=="function"?e(t):e}function Ny(t){var e=vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=On,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((sl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,tn.lanes|=d,il|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Os(r,e.memoizedState)||(Vr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,tn.lanes|=i,il|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oy(t){var e=vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Os(i,e.memoizedState)||(Vr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function HP(){}function KP(t,e){var n=tn,r=vs(),s=e(),i=!Os(r.memoizedState,s);if(i&&(r.memoizedState=s,Vr=!0),r=r.queue,g0(YP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qn!==null&&qn.memoizedState.tag&1){if(n.flags|=2048,ah(9,QP.bind(null,n,r,s,e),void 0,null),Gn===null)throw Error(le(349));sl&30||GP(n,e,s)}return s}function GP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tn.updateQueue,e===null?(e={lastEffect:null,stores:null},tn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QP(t,e,n,r){e.value=n,e.getSnapshot=r,JP(e)&&XP(t)}function YP(t,e,n){return n(function(){JP(e)&&XP(t)})}function JP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Os(t,n)}catch{return!0}}function XP(t){var e=ki(t,1);e!==null&&ks(e,t,1,-1)}function YT(t){var e=zs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oh,lastRenderedState:t},e.queue=t,t=t.dispatch=JM.bind(null,tn,t),[e.memoizedState,t]}function ah(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tn.updateQueue,e===null?(e={lastEffect:null,stores:null},tn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZP(){return vs().memoizedState}function dm(t,e,n,r){var s=zs();tn.flags|=t,s.memoizedState=ah(1|e,n,void 0,r===void 0?null:r)}function ng(t,e,n,r){var s=vs();r=r===void 0?null:r;var i=void 0;if(On!==null){var o=On.memoizedState;if(i=o.destroy,r!==null&&f0(r,o.deps)){s.memoizedState=ah(e,n,i,r);return}}tn.flags|=t,s.memoizedState=ah(1|e,n,i,r)}function JT(t,e){return dm(8390656,8,t,e)}function g0(t,e){return ng(2048,8,t,e)}function e1(t,e){return ng(4,2,t,e)}function t1(t,e){return ng(4,4,t,e)}function n1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r1(t,e,n){return n=n!=null?n.concat([t]):null,ng(4,4,n1.bind(null,e,t),n)}function y0(){}function s1(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&f0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function i1(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&f0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o1(t,e,n){return sl&21?(Os(n,e)||(n=dP(),tn.lanes|=n,il|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vr=!0),t.memoizedState=n)}function QM(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var r=Dy.transition;Dy.transition={};try{t(!1),e()}finally{At=n,Dy.transition=r}}function a1(){return vs().memoizedState}function YM(t,e,n){var r=Vo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l1(t))c1(e,n);else if(n=zP(t,e,n,r),n!==null){var s=Sr();ks(n,t,r,s),u1(n,e,r)}}function JM(t,e,n){var r=Vo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l1(t))c1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Os(a,o)){var l=e.interleaved;l===null?(s.next=s,l0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=zP(t,e,s,r),n!==null&&(s=Sr(),ks(n,t,r,s),u1(n,e,r))}}function l1(t){var e=t.alternate;return t===tn||e!==null&&e===tn}function c1(t,e){xd=tp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gw(t,n)}}var np={readContext:ys,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useInsertionEffect:ur,useLayoutEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useMutableSource:ur,useSyncExternalStore:ur,useId:ur,unstable_isNewReconciler:!1},XM={readContext:ys,useCallback:function(t,e){return zs().memoizedState=[t,e===void 0?null:e],t},useContext:ys,useEffect:JT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dm(4194308,4,n1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dm(4194308,4,t,e)},useInsertionEffect:function(t,e){return dm(4,2,t,e)},useMemo:function(t,e){var n=zs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YM.bind(null,tn,t),[r.memoizedState,t]},useRef:function(t){var e=zs();return t={current:t},e.memoizedState=t},useState:YT,useDebugValue:y0,useDeferredValue:function(t){return zs().memoizedState=t},useTransition:function(){var t=YT(!1),e=t[0];return t=QM.bind(null,t[1]),zs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tn,s=zs();if(Kt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Gn===null)throw Error(le(349));sl&30||GP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,JT(YP.bind(null,r,i,t),[t]),r.flags|=2048,ah(9,QP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zs(),e=Gn.identifierPrefix;if(Kt){var n=Ti,r=Ii;n=(r&~(1<<32-Cs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ih++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZM={readContext:ys,useCallback:s1,useContext:ys,useEffect:g0,useImperativeHandle:r1,useInsertionEffect:e1,useLayoutEffect:t1,useMemo:i1,useReducer:Ny,useRef:ZP,useState:function(){return Ny(oh)},useDebugValue:y0,useDeferredValue:function(t){var e=vs();return o1(e,On.memoizedState,t)},useTransition:function(){var t=Ny(oh)[0],e=vs().memoizedState;return[t,e]},useMutableSource:HP,useSyncExternalStore:KP,useId:a1,unstable_isNewReconciler:!1},eF={readContext:ys,useCallback:s1,useContext:ys,useEffect:g0,useImperativeHandle:r1,useInsertionEffect:e1,useLayoutEffect:t1,useMemo:i1,useReducer:Oy,useRef:ZP,useState:function(){return Oy(oh)},useDebugValue:y0,useDeferredValue:function(t){var e=vs();return On===null?e.memoizedState=t:o1(e,On.memoizedState,t)},useTransition:function(){var t=Oy(oh)[0],e=vs().memoizedState;return[t,e]},useMutableSource:HP,useSyncExternalStore:KP,useId:a1,unstable_isNewReconciler:!1};function Is(t,e){if(t&&t.defaultProps){e=nn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function a_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rg={isMounted:function(t){return(t=t._reactInternals)?Il(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Sr(),s=Vo(t),i=xi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Oo(t,i,s),e!==null&&(ks(e,t,s,r),cm(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Sr(),s=Vo(t),i=xi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Oo(t,i,s),e!==null&&(ks(e,t,s,r),cm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sr(),r=Vo(t),s=xi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Oo(t,s,r),e!==null&&(ks(e,t,r,n),cm(e,t,r))}};function XT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Zd(n,r)||!Zd(s,i):!0}function d1(t,e,n){var r=!1,s=Ko,i=e.contextType;return typeof i=="object"&&i!==null?i=ys(i):(s=Br(e)?nl:vr.current,r=e.contextTypes,i=(r=r!=null)?Lc(t,s):Ko),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ZT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rg.enqueueReplaceState(e,e.state,null)}function l_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},c0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ys(i):(i=Br(e)?nl:vr.current,s.context=Lc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(a_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rg.enqueueReplaceState(s,s.state,null),Zm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Uc(t,e){try{var n="",r=e;do n+=RV(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ly(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function c_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tF=typeof WeakMap=="function"?WeakMap:Map;function h1(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sp||(sp=!0,__=r),c_(t,e)},n}function f1(t,e,n){n=xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){c_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){c_(t,e),typeof r!="function"&&(Lo===null?Lo=new Set([this]):Lo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function eS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tF;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pF.bind(null,t,e,n),e.then(t,t))}function tS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nS(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,Oo(n,e,1))),n.lanes|=1),t)}var nF=ji.ReactCurrentOwner,Vr=!1;function Er(t,e,n,r){e.child=t===null?BP(e,null,n,r):Mc(e,t.child,n,r)}function rS(t,e,n,r,s){n=n.render;var i=e.ref;return yc(e,s),r=m0(t,e,n,r,i,s),n=p0(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Di(t,e,s)):(Kt&&n&&n0(e),e.flags|=1,Er(t,e,r,s),e.child)}function sS(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!b0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,m1(t,e,i,r,s)):(t=pm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Zd,n(o,r)&&t.ref===e.ref)return Di(t,e,s)}return e.flags|=1,t=Mo(i,r),t.ref=e.ref,t.return=e,e.child=t}function m1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Zd(i,r)&&t.ref===e.ref)if(Vr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vr=!0);else return e.lanes=t.lanes,Di(t,e,s)}return u_(t,e,n,r,s)}function p1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(oc,Kr),Kr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vt(oc,Kr),Kr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Vt(oc,Kr),Kr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Vt(oc,Kr),Kr|=r;return Er(t,e,s,n),e.child}function g1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function u_(t,e,n,r,s){var i=Br(n)?nl:vr.current;return i=Lc(e,i),yc(e,s),n=m0(t,e,n,r,i,s),r=p0(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Di(t,e,s)):(Kt&&r&&n0(e),e.flags|=1,Er(t,e,n,s),e.child)}function iS(t,e,n,r,s){if(Br(n)){var i=!0;Gm(e)}else i=!1;if(yc(e,s),e.stateNode===null)hm(t,e),d1(e,n,r),l_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ys(c):(c=Br(n)?nl:vr.current,c=Lc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ZT(e,o,r,c),uo=!1;var f=e.memoizedState;o.state=f,Zm(e,r,o,s),l=e.memoizedState,a!==r||f!==l||$r.current||uo?(typeof d=="function"&&(a_(e,n,d,r),l=e.memoizedState),(a=uo||XT(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,WP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Is(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ys(l):(l=Br(n)?nl:vr.current,l=Lc(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&ZT(e,o,r,l),uo=!1,f=e.memoizedState,o.state=f,Zm(e,r,o,s);var I=e.memoizedState;a!==h||f!==I||$r.current||uo?(typeof m=="function"&&(a_(e,n,m,r),I=e.memoizedState),(c=uo||XT(e,n,c,r,f,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return d_(t,e,n,r,i,s)}function d_(t,e,n,r,s,i){g1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&WT(e,n,!1),Di(t,e,i);r=e.stateNode,nF.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mc(e,t.child,null,i),e.child=Mc(e,null,a,i)):Er(t,e,a,i),e.memoizedState=r.state,s&&WT(e,n,!0),e.child}function y1(t){var e=t.stateNode;e.pendingContext?zT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zT(t,e.context,!1),u0(t,e.containerInfo)}function oS(t,e,n,r,s){return Vc(),s0(s),e.flags|=256,Er(t,e,n,r),e.child}var h_={dehydrated:null,treeContext:null,retryLane:0};function f_(t){return{baseLanes:t,cachePool:null,transitions:null}}function v1(t,e,n){var r=e.pendingProps,s=Zt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Vt(Zt,s&1),t===null)return i_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=og(o,r,0,null),t=Ja(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=f_(n),e.memoizedState=h_,t):v0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rF(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Mo(a,i):(i=Ja(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?f_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=h_,r}return i=t.child,t=i.sibling,r=Mo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function v0(t,e){return e=og({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cf(t,e,n,r){return r!==null&&s0(r),Mc(e,t.child,null,n),t=v0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rF(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ly(Error(le(422))),Cf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=og({mode:"visible",children:r.children},s,0,null),i=Ja(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Mc(e,t.child,null,o),e.child.memoizedState=f_(o),e.memoizedState=h_,i);if(!(e.mode&1))return Cf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(le(419)),r=Ly(i,r,void 0),Cf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vr||a){if(r=Gn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ki(t,s),ks(r,t,s,-1))}return S0(),r=Ly(Error(le(421))),Cf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gF.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xr=No(s.nextSibling),es=e,Kt=!0,xs=null,t!==null&&(hs[fs++]=Ii,hs[fs++]=Ti,hs[fs++]=rl,Ii=t.id,Ti=t.overflow,rl=e),e=v0(e,r.children),e.flags|=4096,e)}function aS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),o_(t.return,e,n)}function Vy(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Er(t,e,r.children,n),r=Zt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&aS(t,n,e);else if(t.tag===19)aS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vt(Zt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ep(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vy(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ep(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vy(e,!0,n,null,i);break;case"together":Vy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),il|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=Mo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sF(t,e,n){switch(e.tag){case 3:y1(e),Vc();break;case 5:qP(e);break;case 1:Br(e.type)&&Gm(e);break;case 4:u0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Vt(Jm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vt(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?v1(t,e,n):(Vt(Zt,Zt.current&1),t=Di(t,e,n),t!==null?t.sibling:null);Vt(Zt,Zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vt(Zt,Zt.current),r)break;return null;case 22:case 23:return e.lanes=0,p1(t,e,n)}return Di(t,e,n)}var w1,m_,E1,I1;w1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};m_=function(){};E1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ja(ni.current);var i=null;switch(n){case"input":s=Vv(t,s),r=Vv(t,r),i=[];break;case"select":s=nn({},s,{value:void 0}),r=nn({},r,{value:void 0}),i=[];break;case"textarea":s=Uv(t,s),r=Uv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hm)}$v(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ut("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};I1=function(t,e,n,r){n!==r&&(e.flags|=4)};function ed(t,e){if(!Kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iF(t,e,n){var r=e.pendingProps;switch(r0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dr(e),null;case 1:return Br(e.type)&&Km(),dr(e),null;case 3:return r=e.stateNode,Fc(),Bt($r),Bt(vr),h0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(I_(xs),xs=null))),m_(t,e),dr(e),null;case 5:d0(e);var s=ja(sh.current);if(n=e.type,t!==null&&e.stateNode!=null)E1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return dr(e),null}if(t=ja(ni.current),Rf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qs]=e,r[nh]=i,t=(e.mode&1)!==0,n){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(s=0;s<fd.length;s++)Ut(fd[s],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":gT(r,i),Ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ut("invalid",r);break;case"textarea":vT(r,i),Ut("invalid",r)}$v(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&xf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&xf(r.textContent,a,t),s=["children",""+a]):Hd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ut("scroll",r)}switch(n){case"input":_f(r),yT(r,i,!0);break;case"textarea":_f(r),_T(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qs]=e,t[nh]=r,w1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bv(n,r),n){case"dialog":Ut("cancel",t),Ut("close",t),s=r;break;case"iframe":case"object":case"embed":Ut("load",t),s=r;break;case"video":case"audio":for(s=0;s<fd.length;s++)Ut(fd[s],t);s=r;break;case"source":Ut("error",t),s=r;break;case"img":case"image":case"link":Ut("error",t),Ut("load",t),s=r;break;case"details":Ut("toggle",t),s=r;break;case"input":gT(t,r),s=Vv(t,r),Ut("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=nn({},r,{value:void 0}),Ut("invalid",t);break;case"textarea":vT(t,r),s=Uv(t,r),Ut("invalid",t);break;default:s=r}$v(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?ZR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&JR(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kd(t,l):typeof l=="number"&&Kd(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ut("scroll",t):l!=null&&Bw(t,i,l,o))}switch(n){case"input":_f(t),yT(t,r,!1);break;case"textarea":_f(t),_T(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ho(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fc(t,!!r.multiple,i,!1):r.defaultValue!=null&&fc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dr(e),null;case 6:if(t&&e.stateNode!=null)I1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=ja(sh.current),ja(ni.current),Rf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qs]=e,(i=r.nodeValue!==n)&&(t=es,t!==null))switch(t.tag){case 3:xf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qs]=e,e.stateNode=r}return dr(e),null;case 13:if(Bt(Zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Kt&&Xr!==null&&e.mode&1&&!(e.flags&128))jP(),Vc(),e.flags|=98560,i=!1;else if(i=Rf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[Qs]=e}else Vc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dr(e),i=!1}else xs!==null&&(I_(xs),xs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?Ln===0&&(Ln=3):S0())),e.updateQueue!==null&&(e.flags|=4),dr(e),null);case 4:return Fc(),m_(t,e),t===null&&eh(e.stateNode.containerInfo),dr(e),null;case 10:return a0(e.type._context),dr(e),null;case 17:return Br(e.type)&&Km(),dr(e),null;case 19:if(Bt(Zt),i=e.memoizedState,i===null)return dr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ed(i,!1);else{if(Ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ep(t),o!==null){for(e.flags|=128,ed(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vt(Zt,Zt.current&1|2),e.child}t=t.sibling}i.tail!==null&&pn()>jc&&(e.flags|=128,r=!0,ed(i,!1),e.lanes=4194304)}else{if(!r)if(t=ep(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ed(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Kt)return dr(e),null}else 2*pn()-i.renderingStartTime>jc&&n!==1073741824&&(e.flags|=128,r=!0,ed(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pn(),e.sibling=null,n=Zt.current,Vt(Zt,r?n&1|2:n&1),e):(dr(e),null);case 22:case 23:return T0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kr&1073741824&&(dr(e),e.subtreeFlags&6&&(e.flags|=8192)):dr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function oF(t,e){switch(r0(e),e.tag){case 1:return Br(e.type)&&Km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fc(),Bt($r),Bt(vr),h0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return d0(e),null;case 13:if(Bt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Vc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(Zt),null;case 4:return Fc(),null;case 10:return a0(e.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var kf=!1,pr=!1,aF=typeof WeakSet=="function"?WeakSet:Set,be=null;function ic(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fn(t,e,r)}else n.current=null}function p_(t,e,n){try{n()}catch(r){fn(t,e,r)}}var lS=!1;function lF(t,e){if(Xv=zm,t=xP(),t0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zv={focusedElem:t,selectionRange:n},zm=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var p=I.memoizedProps,y=I.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?p:Is(e.type,p),y);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(x){fn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return I=lS,lS=!1,I}function Rd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&p_(e,n,i)}s=s.next}while(s!==r)}}function sg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function g_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function T1(t){var e=t.alternate;e!==null&&(t.alternate=null,T1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qs],delete e[nh],delete e[n_],delete e[WM],delete e[qM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S1(t){return t.tag===5||t.tag===3||t.tag===4}function cS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function y_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hm));else if(r!==4&&(t=t.child,t!==null))for(y_(t,e,n),t=t.sibling;t!==null;)y_(t,e,n),t=t.sibling}function v_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(v_(t,e,n),t=t.sibling;t!==null;)v_(t,e,n),t=t.sibling}var Zn=null,bs=!1;function eo(t,e,n){for(n=n.child;n!==null;)b1(t,e,n),n=n.sibling}function b1(t,e,n){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(Yp,n)}catch{}switch(n.tag){case 5:pr||ic(n,e);case 6:var r=Zn,s=bs;Zn=null,eo(t,e,n),Zn=r,bs=s,Zn!==null&&(bs?(t=Zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Zn.removeChild(n.stateNode));break;case 18:Zn!==null&&(bs?(t=Zn,n=n.stateNode,t.nodeType===8?Py(t.parentNode,n):t.nodeType===1&&Py(t,n),Jd(t)):Py(Zn,n.stateNode));break;case 4:r=Zn,s=bs,Zn=n.stateNode.containerInfo,bs=!0,eo(t,e,n),Zn=r,bs=s;break;case 0:case 11:case 14:case 15:if(!pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&p_(n,e,o),s=s.next}while(s!==r)}eo(t,e,n);break;case 1:if(!pr&&(ic(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){fn(n,e,a)}eo(t,e,n);break;case 21:eo(t,e,n);break;case 22:n.mode&1?(pr=(r=pr)||n.memoizedState!==null,eo(t,e,n),pr=r):eo(t,e,n);break;default:eo(t,e,n)}}function uS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aF),e.forEach(function(r){var s=yF.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ws(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zn=a.stateNode,bs=!1;break e;case 3:Zn=a.stateNode.containerInfo,bs=!0;break e;case 4:Zn=a.stateNode.containerInfo,bs=!0;break e}a=a.return}if(Zn===null)throw Error(le(160));b1(i,o,s),Zn=null,bs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){fn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)A1(e,t),e=e.sibling}function A1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ws(e,t),Bs(t),r&4){try{Rd(3,t,t.return),sg(3,t)}catch(p){fn(t,t.return,p)}try{Rd(5,t,t.return)}catch(p){fn(t,t.return,p)}}break;case 1:ws(e,t),Bs(t),r&512&&n!==null&&ic(n,n.return);break;case 5:if(ws(e,t),Bs(t),r&512&&n!==null&&ic(n,n.return),t.flags&32){var s=t.stateNode;try{Kd(s,"")}catch(p){fn(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&GR(s,i),Bv(a,o);var c=Bv(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?ZR(s,h):d==="dangerouslySetInnerHTML"?JR(s,h):d==="children"?Kd(s,h):Bw(s,d,h,c)}switch(a){case"input":Mv(s,i);break;case"textarea":QR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?fc(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?fc(s,!!i.multiple,i.defaultValue,!0):fc(s,!!i.multiple,i.multiple?[]:"",!1))}s[nh]=i}catch(p){fn(t,t.return,p)}}break;case 6:if(ws(e,t),Bs(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){fn(t,t.return,p)}}break;case 3:if(ws(e,t),Bs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jd(e.containerInfo)}catch(p){fn(t,t.return,p)}break;case 4:ws(e,t),Bs(t);break;case 13:ws(e,t),Bs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(E0=pn())),r&4&&uS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(pr=(c=pr)||d,ws(e,t),pr=c):ws(e,t),Bs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(h=be=d;be!==null;){switch(f=be,m=f.child,f.tag){case 0:case 11:case 14:case 15:Rd(4,f,f.return);break;case 1:ic(f,f.return);var I=f.stateNode;if(typeof I.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(p){fn(r,n,p)}}break;case 5:ic(f,f.return);break;case 22:if(f.memoizedState!==null){hS(h);continue}}m!==null?(m.return=f,be=m):hS(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=XR("display",o))}catch(p){fn(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){fn(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ws(e,t),Bs(t),r&4&&uS(t);break;case 21:break;default:ws(e,t),Bs(t)}}function Bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S1(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Kd(s,""),r.flags&=-33);var i=cS(t);v_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cS(t);y_(t,a,o);break;default:throw Error(le(161))}}catch(l){fn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cF(t,e,n){be=t,x1(t)}function x1(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||kf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||pr;a=kf;var c=pr;if(kf=o,(pr=l)&&!c)for(be=s;be!==null;)o=be,l=o.child,o.tag===22&&o.memoizedState!==null?fS(s):l!==null?(l.return=o,be=l):fS(s);for(;i!==null;)be=i,x1(i),i=i.sibling;be=s,kf=a,pr=c}dS(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):dS(t)}}function dS(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pr||sg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Is(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&QT(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}QT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Jd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}pr||e.flags&512&&g_(e)}catch(f){fn(e,e.return,f)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function hS(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function fS(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sg(4,e)}catch(l){fn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){fn(e,s,l)}}var i=e.return;try{g_(e)}catch(l){fn(e,i,l)}break;case 5:var o=e.return;try{g_(e)}catch(l){fn(e,o,l)}}}catch(l){fn(e,e.return,l)}if(e===t){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var uF=Math.ceil,rp=ji.ReactCurrentDispatcher,_0=ji.ReactCurrentOwner,ps=ji.ReactCurrentBatchConfig,vt=0,Gn=null,Sn=null,nr=0,Kr=0,oc=ia(0),Ln=0,lh=null,il=0,ig=0,w0=0,Pd=null,Or=null,E0=0,jc=1/0,vi=null,sp=!1,__=null,Lo=null,Df=!1,So=null,ip=0,Cd=0,w_=null,fm=-1,mm=0;function Sr(){return vt&6?pn():fm!==-1?fm:fm=pn()}function Vo(t){return t.mode&1?vt&2&&nr!==0?nr&-nr:KM.transition!==null?(mm===0&&(mm=dP()),mm):(t=At,t!==0||(t=window.event,t=t===void 0?16:vP(t.type)),t):1}function ks(t,e,n,r){if(50<Cd)throw Cd=0,w_=null,Error(le(185));Mh(t,n,r),(!(vt&2)||t!==Gn)&&(t===Gn&&(!(vt&2)&&(ig|=n),Ln===4&&mo(t,nr)),zr(t,r),n===1&&vt===0&&!(e.mode&1)&&(jc=pn()+500,tg&&oa()))}function zr(t,e){var n=t.callbackNode;KV(t,e);var r=Bm(t,t===Gn?nr:0);if(r===0)n!==null&&IT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&IT(n),e===1)t.tag===0?HM(mS.bind(null,t)):MP(mS.bind(null,t)),BM(function(){!(vt&6)&&oa()}),n=null;else{switch(hP(r)){case 1:n=Kw;break;case 4:n=cP;break;case 16:n=$m;break;case 536870912:n=uP;break;default:n=$m}n=L1(n,R1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R1(t,e){if(fm=-1,mm=0,vt&6)throw Error(le(327));var n=t.callbackNode;if(vc()&&t.callbackNode!==n)return null;var r=Bm(t,t===Gn?nr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=op(t,r);else{e=r;var s=vt;vt|=2;var i=C1();(Gn!==t||nr!==e)&&(vi=null,jc=pn()+500,Ya(t,e));do try{fF();break}catch(a){P1(t,a)}while(!0);o0(),rp.current=i,vt=s,Sn!==null?e=0:(Gn=null,nr=0,e=Ln)}if(e!==0){if(e===2&&(s=Kv(t),s!==0&&(r=s,e=E_(t,s))),e===1)throw n=lh,Ya(t,0),mo(t,r),zr(t,pn()),n;if(e===6)mo(t,r);else{if(s=t.current.alternate,!(r&30)&&!dF(s)&&(e=op(t,r),e===2&&(i=Kv(t),i!==0&&(r=i,e=E_(t,i))),e===1))throw n=lh,Ya(t,0),mo(t,r),zr(t,pn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:ba(t,Or,vi);break;case 3:if(mo(t,r),(r&130023424)===r&&(e=E0+500-pn(),10<e)){if(Bm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Sr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=t_(ba.bind(null,t,Or,vi),e);break}ba(t,Or,vi);break;case 4:if(mo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uF(r/1960))-r,10<r){t.timeoutHandle=t_(ba.bind(null,t,Or,vi),r);break}ba(t,Or,vi);break;case 5:ba(t,Or,vi);break;default:throw Error(le(329))}}}return zr(t,pn()),t.callbackNode===n?R1.bind(null,t):null}function E_(t,e){var n=Pd;return t.current.memoizedState.isDehydrated&&(Ya(t,e).flags|=256),t=op(t,e),t!==2&&(e=Or,Or=n,e!==null&&I_(e)),t}function I_(t){Or===null?Or=t:Or.push.apply(Or,t)}function dF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Os(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mo(t,e){for(e&=~w0,e&=~ig,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cs(e),r=1<<n;t[n]=-1,e&=~r}}function mS(t){if(vt&6)throw Error(le(327));vc();var e=Bm(t,0);if(!(e&1))return zr(t,pn()),null;var n=op(t,e);if(t.tag!==0&&n===2){var r=Kv(t);r!==0&&(e=r,n=E_(t,r))}if(n===1)throw n=lh,Ya(t,0),mo(t,e),zr(t,pn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ba(t,Or,vi),zr(t,pn()),null}function I0(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(jc=pn()+500,tg&&oa())}}function ol(t){So!==null&&So.tag===0&&!(vt&6)&&vc();var e=vt;vt|=1;var n=ps.transition,r=At;try{if(ps.transition=null,At=1,t)return t()}finally{At=r,ps.transition=n,vt=e,!(vt&6)&&oa()}}function T0(){Kr=oc.current,Bt(oc)}function Ya(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$M(n)),Sn!==null)for(n=Sn.return;n!==null;){var r=n;switch(r0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Km();break;case 3:Fc(),Bt($r),Bt(vr),h0();break;case 5:d0(r);break;case 4:Fc();break;case 13:Bt(Zt);break;case 19:Bt(Zt);break;case 10:a0(r.type._context);break;case 22:case 23:T0()}n=n.return}if(Gn=t,Sn=t=Mo(t.current,null),nr=Kr=e,Ln=0,lh=null,w0=ig=il=0,Or=Pd=null,Ua!==null){for(e=0;e<Ua.length;e++)if(n=Ua[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ua=null}return t}function P1(t,e){do{var n=Sn;try{if(o0(),um.current=np,tp){for(var r=tn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}tp=!1}if(sl=0,qn=On=tn=null,xd=!1,ih=0,_0.current=null,n===null||n.return===null){Ln=1,lh=e,Sn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=nr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=tS(o);if(m!==null){m.flags&=-257,nS(m,o,a,i,e),m.mode&1&&eS(i,c,e),e=m,l=c;var I=e.updateQueue;if(I===null){var p=new Set;p.add(l),e.updateQueue=p}else I.add(l);break e}else{if(!(e&1)){eS(i,c,e),S0();break e}l=Error(le(426))}}else if(Kt&&a.mode&1){var y=tS(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),nS(y,o,a,i,e),s0(Uc(l,a));break e}}i=l=Uc(l,a),Ln!==4&&(Ln=2),Pd===null?Pd=[i]:Pd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=h1(i,l,e);GT(i,_);break e;case 1:a=l;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Lo===null||!Lo.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=f1(i,a,e);GT(i,x);break e}}i=i.return}while(i!==null)}D1(n)}catch(P){e=P,Sn===n&&n!==null&&(Sn=n=n.return);continue}break}while(!0)}function C1(){var t=rp.current;return rp.current=np,t===null?np:t}function S0(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Gn===null||!(il&268435455)&&!(ig&268435455)||mo(Gn,nr)}function op(t,e){var n=vt;vt|=2;var r=C1();(Gn!==t||nr!==e)&&(vi=null,Ya(t,e));do try{hF();break}catch(s){P1(t,s)}while(!0);if(o0(),vt=n,rp.current=r,Sn!==null)throw Error(le(261));return Gn=null,nr=0,Ln}function hF(){for(;Sn!==null;)k1(Sn)}function fF(){for(;Sn!==null&&!FV();)k1(Sn)}function k1(t){var e=O1(t.alternate,t,Kr);t.memoizedProps=t.pendingProps,e===null?D1(t):Sn=e,_0.current=null}function D1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oF(n,e),n!==null){n.flags&=32767,Sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ln=6,Sn=null;return}}else if(n=iF(n,e,Kr),n!==null){Sn=n;return}if(e=e.sibling,e!==null){Sn=e;return}Sn=e=t}while(e!==null);Ln===0&&(Ln=5)}function ba(t,e,n){var r=At,s=ps.transition;try{ps.transition=null,At=1,mF(t,e,n,r)}finally{ps.transition=s,At=r}return null}function mF(t,e,n,r){do vc();while(So!==null);if(vt&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GV(t,i),t===Gn&&(Sn=Gn=null,nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Df||(Df=!0,L1($m,function(){return vc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var o=At;At=1;var a=vt;vt|=4,_0.current=null,lF(t,n),A1(n,t),OM(Zv),zm=!!Xv,Zv=Xv=null,t.current=n,cF(n),UV(),vt=a,At=o,ps.transition=i}else t.current=n;if(Df&&(Df=!1,So=t,ip=s),i=t.pendingLanes,i===0&&(Lo=null),BV(n.stateNode),zr(t,pn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sp)throw sp=!1,t=__,__=null,t;return ip&1&&t.tag!==0&&vc(),i=t.pendingLanes,i&1?t===w_?Cd++:(Cd=0,w_=t):Cd=0,oa(),null}function vc(){if(So!==null){var t=hP(ip),e=ps.transition,n=At;try{if(ps.transition=null,At=16>t?16:t,So===null)var r=!1;else{if(t=So,So=null,ip=0,vt&6)throw Error(le(331));var s=vt;for(vt|=4,be=t.current;be!==null;){var i=be,o=i.child;if(be.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:Rd(8,d,i)}var h=d.child;if(h!==null)h.return=d,be=h;else for(;be!==null;){d=be;var f=d.sibling,m=d.return;if(T1(d),d===c){be=null;break}if(f!==null){f.return=m,be=f;break}be=m}}}var I=i.alternate;if(I!==null){var p=I.child;if(p!==null){I.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,be=o;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Rd(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,be=_;break e}be=i.return}}var v=t.current;for(be=v;be!==null;){o=be;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,be=w;else e:for(o=v;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sg(9,a)}}catch(P){fn(a,a.return,P)}if(a===o){be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,be=x;break e}be=a.return}}if(vt=s,oa(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(Yp,t)}catch{}r=!0}return r}finally{At=n,ps.transition=e}}return!1}function pS(t,e,n){e=Uc(n,e),e=h1(t,e,1),t=Oo(t,e,1),e=Sr(),t!==null&&(Mh(t,1,e),zr(t,e))}function fn(t,e,n){if(t.tag===3)pS(t,t,n);else for(;e!==null;){if(e.tag===3){pS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lo===null||!Lo.has(r))){t=Uc(n,t),t=f1(e,t,1),e=Oo(e,t,1),t=Sr(),e!==null&&(Mh(e,1,t),zr(e,t));break}}e=e.return}}function pF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Sr(),t.pingedLanes|=t.suspendedLanes&n,Gn===t&&(nr&n)===n&&(Ln===4||Ln===3&&(nr&130023424)===nr&&500>pn()-E0?Ya(t,0):w0|=n),zr(t,e)}function N1(t,e){e===0&&(t.mode&1?(e=If,If<<=1,!(If&130023424)&&(If=4194304)):e=1);var n=Sr();t=ki(t,e),t!==null&&(Mh(t,e,n),zr(t,n))}function gF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),N1(t,n)}function yF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),N1(t,n)}var O1;O1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)Vr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vr=!1,sF(t,e,n);Vr=!!(t.flags&131072)}else Vr=!1,Kt&&e.flags&1048576&&FP(e,Ym,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hm(t,e),t=e.pendingProps;var s=Lc(e,vr.current);yc(e,n),s=m0(null,e,r,t,s,n);var i=p0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Br(r)?(i=!0,Gm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,c0(e),s.updater=rg,e.stateNode=s,s._reactInternals=e,l_(e,r,t,n),e=d_(null,e,r,!0,i,n)):(e.tag=0,Kt&&i&&n0(e),Er(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hm(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_F(r),t=Is(r,t),s){case 0:e=u_(null,e,r,t,n);break e;case 1:e=iS(null,e,r,t,n);break e;case 11:e=rS(null,e,r,t,n);break e;case 14:e=sS(null,e,r,Is(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),u_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),iS(t,e,r,s,n);case 3:e:{if(y1(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,WP(t,e),Zm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Uc(Error(le(423)),e),e=oS(t,e,r,n,s);break e}else if(r!==s){s=Uc(Error(le(424)),e),e=oS(t,e,r,n,s);break e}else for(Xr=No(e.stateNode.containerInfo.firstChild),es=e,Kt=!0,xs=null,n=BP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vc(),r===s){e=Di(t,e,n);break e}Er(t,e,r,n)}e=e.child}return e;case 5:return qP(e),t===null&&i_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,e_(r,s)?o=null:i!==null&&e_(r,i)&&(e.flags|=32),g1(t,e),Er(t,e,o,n),e.child;case 6:return t===null&&i_(e),null;case 13:return v1(t,e,n);case 4:return u0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mc(e,null,r,n):Er(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),rS(t,e,r,s,n);case 7:return Er(t,e,e.pendingProps,n),e.child;case 8:return Er(t,e,e.pendingProps.children,n),e.child;case 12:return Er(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Vt(Jm,r._currentValue),r._currentValue=o,i!==null)if(Os(i.value,o)){if(i.children===s.children&&!$r.current){e=Di(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=xi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),o_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),o_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Er(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,yc(e,n),s=ys(s),r=r(s),e.flags|=1,Er(t,e,r,n),e.child;case 14:return r=e.type,s=Is(r,e.pendingProps),s=Is(r.type,s),sS(t,e,r,s,n);case 15:return m1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),hm(t,e),e.tag=1,Br(r)?(t=!0,Gm(e)):t=!1,yc(e,n),d1(e,r,s),l_(e,r,s,n),d_(null,e,r,!0,t,n);case 19:return _1(t,e,n);case 22:return p1(t,e,n)}throw Error(le(156,e.tag))};function L1(t,e){return lP(t,e)}function vF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(t,e,n,r){return new vF(t,e,n,r)}function b0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _F(t){if(typeof t=="function")return b0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ww)return 11;if(t===qw)return 14}return 2}function Mo(t,e){var n=t.alternate;return n===null?(n=ms(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pm(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")b0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yl:return Ja(n.children,s,i,e);case zw:o=8,s|=8;break;case Dv:return t=ms(12,n,e,s|2),t.elementType=Dv,t.lanes=i,t;case Nv:return t=ms(13,n,e,s),t.elementType=Nv,t.lanes=i,t;case Ov:return t=ms(19,n,e,s),t.elementType=Ov,t.lanes=i,t;case qR:return og(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zR:o=10;break e;case WR:o=9;break e;case Ww:o=11;break e;case qw:o=14;break e;case co:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=ms(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ja(t,e,n,r){return t=ms(7,t,r,e),t.lanes=n,t}function og(t,e,n,r){return t=ms(22,t,r,e),t.elementType=qR,t.lanes=n,t.stateNode={isHidden:!1},t}function My(t,e,n){return t=ms(6,t,null,e),t.lanes=n,t}function Fy(t,e,n){return e=ms(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wF(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vy(0),this.expirationTimes=vy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vy(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function A0(t,e,n,r,s,i,o,a,l){return t=new wF(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ms(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},c0(i),t}function EF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ql,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function V1(t){if(!t)return Ko;t=t._reactInternals;e:{if(Il(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Br(n))return VP(t,n,e)}return e}function M1(t,e,n,r,s,i,o,a,l){return t=A0(n,r,!0,t,s,i,o,a,l),t.context=V1(null),n=t.current,r=Sr(),s=Vo(n),i=xi(r,s),i.callback=e??null,Oo(n,i,s),t.current.lanes=s,Mh(t,s,r),zr(t,r),t}function ag(t,e,n,r){var s=e.current,i=Sr(),o=Vo(s);return n=V1(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oo(s,e,o),t!==null&&(ks(t,s,o,i),cm(t,s,o)),o}function ap(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function x0(t,e){gS(t,e),(t=t.alternate)&&gS(t,e)}function IF(){return null}var F1=typeof reportError=="function"?reportError:function(t){console.error(t)};function R0(t){this._internalRoot=t}lg.prototype.render=R0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));ag(t,e,null,null)};lg.prototype.unmount=R0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ol(function(){ag(null,t,null,null)}),e[Ci]=null}};function lg(t){this._internalRoot=t}lg.prototype.unstable_scheduleHydration=function(t){if(t){var e=pP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fo.length&&e!==0&&e<fo[n].priority;n++);fo.splice(n,0,t),n===0&&yP(t)}};function P0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yS(){}function TF(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ap(o);i.call(c)}}var o=M1(e,r,t,0,null,!1,!1,"",yS);return t._reactRootContainer=o,t[Ci]=o.current,eh(t.nodeType===8?t.parentNode:t),ol(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=ap(l);a.call(c)}}var l=A0(t,0,!1,null,null,!1,!1,"",yS);return t._reactRootContainer=l,t[Ci]=l.current,eh(t.nodeType===8?t.parentNode:t),ol(function(){ag(e,l,n,r)}),l}function ug(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ap(o);a.call(l)}}ag(e,o,t,s)}else o=TF(n,e,t,s,r);return ap(o)}fP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hd(e.pendingLanes);n!==0&&(Gw(e,n|1),zr(e,pn()),!(vt&6)&&(jc=pn()+500,oa()))}break;case 13:ol(function(){var r=ki(t,1);if(r!==null){var s=Sr();ks(r,t,1,s)}}),x0(t,1)}};Qw=function(t){if(t.tag===13){var e=ki(t,134217728);if(e!==null){var n=Sr();ks(e,t,134217728,n)}x0(t,134217728)}};mP=function(t){if(t.tag===13){var e=Vo(t),n=ki(t,e);if(n!==null){var r=Sr();ks(n,t,e,r)}x0(t,e)}};pP=function(){return At};gP=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};Wv=function(t,e,n){switch(e){case"input":if(Mv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=eg(r);if(!s)throw Error(le(90));KR(r),Mv(r,s)}}}break;case"textarea":QR(t,n);break;case"select":e=n.value,e!=null&&fc(t,!!n.multiple,e,!1)}};nP=I0;rP=ol;var SF={usingClientEntryPoint:!1,Events:[Uh,ec,eg,eP,tP,I0]},td={findFiberByHostInstance:Fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bF={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oP(t),t===null?null:t.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||IF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{Yp=Nf.inject(bF),ti=Nf}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SF;os.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P0(e))throw Error(le(200));return EF(t,e,null,n)};os.createRoot=function(t,e){if(!P0(t))throw Error(le(299));var n=!1,r="",s=F1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=A0(t,1,!1,null,null,n,!1,r,s),t[Ci]=e.current,eh(t.nodeType===8?t.parentNode:t),new R0(e)};os.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=oP(e),t=t===null?null:t.stateNode,t};os.flushSync=function(t){return ol(t)};os.hydrate=function(t,e,n){if(!cg(e))throw Error(le(200));return ug(null,t,e,!0,n)};os.hydrateRoot=function(t,e,n){if(!P0(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=F1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=M1(e,null,t,1,n??null,s,!1,i,o),t[Ci]=e.current,eh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lg(e)};os.render=function(t,e,n){if(!cg(e))throw Error(le(200));return ug(null,t,e,!1,n)};os.unmountComponentAtNode=function(t){if(!cg(t))throw Error(le(40));return t._reactRootContainer?(ol(function(){ug(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};os.unstable_batchedUpdates=I0;os.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cg(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return ug(t,e,n,!1,r)};os.version="18.3.1-next-f1338f8080-20240426";function U1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U1)}catch(t){console.error(t)}}U1(),UR.exports=os;var $h=UR.exports;const j1=xR($h);var $1,vS=$h;$1=vS.createRoot,vS.hydrateRoot;const AF="modulepreload",xF=function(t,e){return new URL(t,e).href},_S={},te=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=xF(c,r),c in _S)return;_S[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let I=o.length-1;I>=0;I--){const p=o[I];if(p.href===c&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":AF,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((I,p)=>{m.addEventListener("load",I),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},RF=1,PF=1e6;let Uy=0;function CF(){return Uy=(Uy+1)%Number.MAX_SAFE_INTEGER,Uy.toString()}const jy=new Map,wS=t=>{if(jy.has(t))return;const e=setTimeout(()=>{jy.delete(t),kd({type:"REMOVE_TOAST",toastId:t})},PF);jy.set(t,e)},kF=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,RF)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?wS(n):t.toasts.forEach(r=>{wS(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},gm=[];let ym={toasts:[]};function kd(t){ym=kF(ym,t),gm.forEach(e=>{e(ym)})}function DF({...t}){const e=CF(),n=s=>kd({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>kd({type:"DISMISS_TOAST",toastId:e});return kd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function C0(){const[t,e]=b.useState(ym);return b.useEffect(()=>(gm.push(e),()=>{const n=gm.indexOf(e);n>-1&&gm.splice(n,1)}),[t]),{...t,toast:DF,dismiss:n=>kd({type:"DISMISS_TOAST",toastId:n})}}function Lt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function ES(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function B1(...t){return e=>{let n=!1;const r=t.map(s=>{const i=ES(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():ES(t[s],null)}}}}function sr(...t){return b.useCallback(B1(...t),t)}function NF(t,e){const n=b.createContext(e),r=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return E.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function yu(t,e=[]){let n=[];function r(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=h=>{var _;const{scope:f,children:m,...I}=h,p=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,y=b.useMemo(()=>I,Object.values(I));return E.jsx(p.Provider,{value:y,children:m})};c.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[l])||a,I=b.useContext(m);if(I)return I;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,OF(s,...e)]}function OF(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ch(t){const e=VF(t),n=b.forwardRef((r,s)=>{const{children:i,...o}=r,a=b.Children.toArray(i),l=a.find(FF);if(l){const c=l.props.children,d=a.map(h=>h===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:h);return E.jsx(e,{...o,ref:s,children:b.isValidElement(c)?b.cloneElement(c,void 0,d):null})}return E.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var LF=ch("Slot");function VF(t){const e=b.forwardRef((n,r)=>{const{children:s,...i}=n;if(b.isValidElement(s)){const o=jF(s),a=UF(i,s.props);return s.type!==b.Fragment&&(a.ref=r?B1(r,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var z1=Symbol("radix.slottable");function MF(t){const e=({children:n})=>E.jsx(E.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=z1,e}function FF(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===z1}function UF(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function jF(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function $F(t){const e=t+"CollectionProvider",[n,r]=yu(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:_}=p,v=F.useRef(null),w=F.useRef(new Map).current;return E.jsx(s,{scope:y,itemMap:w,collectionRef:v,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=ch(a),c=F.forwardRef((p,y)=>{const{scope:_,children:v}=p,w=i(a,_),x=sr(y,w.collectionRef);return E.jsx(l,{ref:x,children:v})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=ch(d),m=F.forwardRef((p,y)=>{const{scope:_,children:v,...w}=p,x=F.useRef(null),P=sr(y,x),L=i(d,_);return F.useEffect(()=>(L.itemMap.set(x,{ref:x,...w}),()=>void L.itemMap.delete(x))),E.jsx(f,{[h]:"",ref:P,children:v})});m.displayName=d;function I(p){const y=i(t+"CollectionConsumer",p);return F.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((L,A)=>w.indexOf(L.ref.current)-w.indexOf(A.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},I,r]}var BF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sn=BF.reduce((t,e)=>{const n=ch(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function W1(t,e){t&&$h.flushSync(()=>t.dispatchEvent(e))}function ai(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function zF(t,e=globalThis==null?void 0:globalThis.document){const n=ai(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var WF="DismissableLayer",T_="dismissableLayer.update",qF="dismissableLayer.pointerDownOutside",HF="dismissableLayer.focusOutside",IS,q1=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dg=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(q1),[d,h]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),I=sr(e,A=>h(A)),p=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=p.indexOf(y),v=d?p.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,x=v>=_,P=GF(A=>{const S=A.target,R=[...c.branches].some(C=>C.contains(S));!x||R||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},f),L=QF(A=>{const S=A.target;[...c.branches].some(C=>C.contains(S))||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},f);return zF(A=>{v===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},f),b.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(IS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),TS(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=IS)}},[d,f,n,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),TS())},[d,c]),b.useEffect(()=>{const A=()=>m({});return document.addEventListener(T_,A),()=>document.removeEventListener(T_,A)},[]),E.jsx(sn.div,{...l,ref:I,style:{pointerEvents:w?x?"auto":"none":void 0,...t.style},onFocusCapture:Lt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Lt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Lt(t.onPointerDownCapture,P.onPointerDownCapture)})});dg.displayName=WF;var KF="DismissableLayerBranch",H1=b.forwardRef((t,e)=>{const n=b.useContext(q1),r=b.useRef(null),s=sr(e,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),E.jsx(sn.div,{...t,ref:s})});H1.displayName=KF;function GF(t,e=globalThis==null?void 0:globalThis.document){const n=ai(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){K1(qF,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function QF(t,e=globalThis==null?void 0:globalThis.document){const n=ai(t),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&K1(HF,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TS(){const t=new CustomEvent(T_);document.dispatchEvent(t)}function K1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?W1(s,i):s.dispatchEvent(i)}var YF=dg,JF=H1,Ni=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},XF="Portal",k0=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=b.useState(!1);Ni(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?j1.createPortal(E.jsx(sn.div,{...r,ref:e}),o):null});k0.displayName=XF;function ZF(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Tl=t=>{const{present:e,children:n}=t,r=eU(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=sr(r.ref,tU(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};Tl.displayName="Presence";function eU(t){const[e,n]=b.useState(),r=b.useRef(null),s=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=ZF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=Of(r.current);i.current=a==="mounted"?c:"none"},[a]),Ni(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=Of(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ni(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const p=Of(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&p&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(i.current=Of(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Of(t){return(t==null?void 0:t.animationName)||"none"}function tU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var nU=Uw[" useInsertionEffect ".trim().toString()]||Ni;function D0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=rU({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=b.useCallback(d=>{var h;if(a){const f=sU(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function rU({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),s=b.useRef(n),i=b.useRef(e);return nU(()=>{i.current=e},[e]),b.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function sU(t){return typeof t=="function"}var iU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oU="VisuallyHidden",hg=b.forwardRef((t,e)=>E.jsx(sn.span,{...t,ref:e,style:{...iU,...t.style}}));hg.displayName=oU;var aU=hg,N0="ToastProvider",[O0,lU,cU]=$F("Toast"),[G1]=yu("Toast",[cU]),[uU,fg]=G1(N0),Q1=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=b.useState(null),[c,d]=b.useState(0),h=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${N0}\`. Expected non-empty \`string\`.`),E.jsx(O0.Provider,{scope:e,children:E.jsx(uU,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};Q1.displayName=N0;var Y1="ToastViewport",dU=["F8"],S_="toast.viewportPause",b_="toast.viewportResume",J1=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=dU,label:s="Notifications ({hotkey})",...i}=t,o=fg(Y1,n),a=lU(n),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),f=sr(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=o.toastCount>0;b.useEffect(()=>{const y=_=>{var w;r.length!==0&&r.every(x=>_[x]||_.code===x)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),b.useEffect(()=>{const y=l.current,_=h.current;if(I&&y&&_){const v=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(S_);_.dispatchEvent(L),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(b_);_.dispatchEvent(L),o.isClosePausedRef.current=!1}},x=L=>{!y.contains(L.relatedTarget)&&w()},P=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",v),y.addEventListener("focusout",x),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",P),window.addEventListener("blur",v),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",x),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",P),window.removeEventListener("blur",v),window.removeEventListener("focus",w)}}},[I,o.isClosePausedRef]);const p=b.useCallback(({tabbingDirection:y})=>{const v=a().map(w=>{const x=w.ref.current,P=[x,...SU(x)];return y==="forwards"?P:P.reverse()});return(y==="forwards"?v.reverse():v).flat()},[a]);return b.useEffect(()=>{const y=h.current;if(y){const _=v=>{var P,L,A;const w=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!w){const S=document.activeElement,R=v.shiftKey;if(v.target===y&&R){(P=c.current)==null||P.focus();return}const O=p({tabbingDirection:R?"backwards":"forwards"}),k=O.findIndex(z=>z===S);$y(O.slice(k+1))?v.preventDefault():R?(L=c.current)==null||L.focus():(A=d.current)==null||A.focus()}};return y.addEventListener("keydown",_),()=>y.removeEventListener("keydown",_)}},[a,p]),E.jsxs(JF,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:I?void 0:"none"},children:[I&&E.jsx(A_,{ref:c,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});$y(y)}}),E.jsx(O0.Slot,{scope:n,children:E.jsx(sn.ol,{tabIndex:-1,...i,ref:f})}),I&&E.jsx(A_,{ref:d,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});$y(y)}})]})});J1.displayName=Y1;var X1="ToastFocusProxy",A_=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=fg(X1,n);return E.jsx(hg,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});A_.displayName=X1;var Bh="Toast",hU="toast.swipeStart",fU="toast.swipeMove",mU="toast.swipeCancel",pU="toast.swipeEnd",Z1=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=D0({prop:r,defaultProp:s??!0,onChange:i,caller:Bh});return E.jsx(Tl,{present:n||a,children:E.jsx(vU,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ai(t.onPause),onResume:ai(t.onResume),onSwipeStart:Lt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Lt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Lt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Lt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});Z1.displayName=Bh;var[gU,yU]=G1(Bh,{onClose(){}}),vU=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...I}=t,p=fg(Bh,n),[y,_]=b.useState(null),v=sr(e,z=>_(z)),w=b.useRef(null),x=b.useRef(null),P=s||p.duration,L=b.useRef(0),A=b.useRef(P),S=b.useRef(0),{onToastAdd:R,onToastRemove:C}=p,N=ai(()=>{var de;(y==null?void 0:y.contains(document.activeElement))&&((de=p.viewport)==null||de.focus()),o()}),O=b.useCallback(z=>{!z||z===1/0||(window.clearTimeout(S.current),L.current=new Date().getTime(),S.current=window.setTimeout(N,z))},[N]);b.useEffect(()=>{const z=p.viewport;if(z){const de=()=>{O(A.current),c==null||c()},fe=()=>{const Se=new Date().getTime()-L.current;A.current=A.current-Se,window.clearTimeout(S.current),l==null||l()};return z.addEventListener(S_,fe),z.addEventListener(b_,de),()=>{z.removeEventListener(S_,fe),z.removeEventListener(b_,de)}}},[p.viewport,P,l,c,O]),b.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(P)},[i,P,p.isClosePausedRef,O]),b.useEffect(()=>(R(),()=>C()),[R,C]);const k=b.useMemo(()=>y?oC(y):null,[y]);return p.viewport?E.jsxs(E.Fragment,{children:[k&&E.jsx(_U,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:k}),E.jsx(gU,{scope:n,onClose:N,children:$h.createPortal(E.jsx(O0.ItemSlot,{scope:n,children:E.jsx(YF,{asChild:!0,onEscapeKeyDown:Lt(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||N(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:E.jsx(sn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...I,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Lt(t.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Lt(t.onPointerDown,z=>{z.button===0&&(w.current={x:z.clientX,y:z.clientY})}),onPointerMove:Lt(t.onPointerMove,z=>{if(!w.current)return;const de=z.clientX-w.current.x,fe=z.clientY-w.current.y,Se=!!x.current,$=["left","right"].includes(p.swipeDirection),W=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,re=$?W(0,de):0,we=$?0:W(0,fe),Ee=z.pointerType==="touch"?10:2,se={x:re,y:we},_e={originalEvent:z,delta:se};Se?(x.current=se,Lf(fU,h,_e,{discrete:!1})):SS(se,p.swipeDirection,Ee)?(x.current=se,Lf(hU,d,_e,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(de)>Ee||Math.abs(fe)>Ee)&&(w.current=null)}),onPointerUp:Lt(t.onPointerUp,z=>{const de=x.current,fe=z.target;if(fe.hasPointerCapture(z.pointerId)&&fe.releasePointerCapture(z.pointerId),x.current=null,w.current=null,de){const Se=z.currentTarget,$={originalEvent:z,delta:de};SS(de,p.swipeDirection,p.swipeThreshold)?Lf(pU,m,$,{discrete:!0}):Lf(mU,f,$,{discrete:!0}),Se.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),_U=t=>{const{__scopeToast:e,children:n,...r}=t,s=fg(Bh,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return IU(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:E.jsx(k0,{asChild:!0,children:E.jsx(hg,{...r,children:i&&E.jsxs(E.Fragment,{children:[s.label," ",n]})})})},wU="ToastTitle",eC=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return E.jsx(sn.div,{...r,ref:e})});eC.displayName=wU;var EU="ToastDescription",tC=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return E.jsx(sn.div,{...r,ref:e})});tC.displayName=EU;var nC="ToastAction",rC=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?E.jsx(iC,{altText:n,asChild:!0,children:E.jsx(L0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${nC}\`. Expected non-empty \`string\`.`),null)});rC.displayName=nC;var sC="ToastClose",L0=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=yU(sC,n);return E.jsx(iC,{asChild:!0,children:E.jsx(sn.button,{type:"button",...r,ref:e,onClick:Lt(t.onClick,s.onClose)})})});L0.displayName=sC;var iC=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return E.jsx(sn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function oC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),TU(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...oC(r))}}),e}function Lf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?W1(s,i):s.dispatchEvent(i)}var SS=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function IU(t=()=>{}){const e=ai(t);Ni(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function TU(t){return t.nodeType===t.ELEMENT_NODE}function SU(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $y(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var bU=Q1,aC=J1,lC=Z1,cC=eC,uC=tC,dC=rC,hC=L0;function fC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=fC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=fC(t))&&(r&&(r+=" "),r+=e);return r}const bS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,AS=mC,pC=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return AS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=bS(d)||bS(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(I=>{let[p,y]=I;return Array.isArray(y)?y.includes({...i,...a}[p]):{...i,...a}[p]===y})?[...c,h,f]:c},[]);return AS(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),xS=t=>{const e=xU(t);return e.charAt(0).toUpperCase()+e.slice(1)},gC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),RU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...PU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gC("lucide",s),...!i&&!RU(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>b.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(CU,{ref:i,iconNode:e,className:gC(`lucide-${AU(xS(t))}`,`lucide-${t}`,r),...s}));return n.displayName=xS(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],DU=Dt("arrow-down",kU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],OU=Dt("arrow-right",NU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],VU=Dt("arrow-up-down",LU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],FU=Dt("badge-percent",MU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jU=Dt("check",UU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],BU=Dt("clock",$U);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],WU=Dt("credit-card",zU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HU=Dt("eye-off",qU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],GU=Dt("eye",KU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YU=Dt("file-text",QU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],XU=Dt("house",JU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],e4=Dt("lock",ZU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],RS=Dt("log-out",t4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],PS=Dt("mail",n4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],s4=Dt("message-circle",r4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M5 12h14",key:"1ays0h"}]],o4=Dt("minus",i4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],CS=Dt("plus",a4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],By=Dt("receipt",l4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],V0=Dt("refresh-ccw",c4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kS=Dt("settings",u4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],h4=Dt("shield",d4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],m4=Dt("square",f4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],g4=Dt("trending-up",p4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yC=Dt("triangle-alert",y4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_4=Dt("user",v4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],E4=Dt("wrench",w4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],M0=Dt("x",I4),F0="-",T4=t=>{const e=b4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(F0);return a[0]===""&&a.length!==1&&a.shift(),vC(a,e)||S4(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},vC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?vC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(F0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},DS=/^\[(.+)\]$/,S4=t=>{if(DS.test(t)){const e=DS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},b4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return x4(Object.entries(t.classGroups),n).forEach(([i,o])=>{x_(o,r,i,e)}),r},x_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:NS(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(A4(s)){x_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{x_(o,NS(e,i),n,r)})})},NS=(t,e)=>{let n=t;return e.split(F0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},A4=t=>t.isThemeGetter,x4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,R4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},_C="!",P4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let y=0;y<a.length;y++){let _=a[y];if(c===0){if(_===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(d,y)),d=y+i;continue}if(_==="/"){h=y;continue}}_==="["?c++:_==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(_C),I=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:I,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:o}):o},C4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},k4=t=>({cache:R4(t.cacheSize),parseClassName:P4(t),...T4(t)}),D4=/\s+/,N4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(D4);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let I=!!m,p=r(I?f.substring(0,m):f);if(!p){if(!I){a=c+(a.length>0?" "+a:a);continue}if(p=r(f),!p){a=c+(a.length>0?" "+a:a);continue}I=!1}const y=C4(d).join(":"),_=h?y+_C:y,v=_+p;if(i.includes(v))continue;i.push(v);const w=s(p,I);for(let x=0;x<w.length;++x){const P=w[x];i.push(_+P)}a=c+(a.length>0?" "+a:a)}return a};function O4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wC(e))&&(r&&(r+=" "),r+=n);return r}const wC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wC(t[r]))&&(n&&(n+=" "),n+=e);return n};function L4(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=k4(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=N4(l,n);return s(l,d),d}return function(){return i(O4.apply(null,arguments))}}const Ft=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},EC=/^\[(?:([a-z-]+):)?(.+)\]$/i,V4=/^\d+\/\d+$/,M4=new Set(["px","full","screen"]),F4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,U4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,j4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,B4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gi=t=>_c(t)||M4.has(t)||V4.test(t),to=t=>vu(t,"length",Y4),_c=t=>!!t&&!Number.isNaN(Number(t)),zy=t=>vu(t,"number",_c),nd=t=>!!t&&Number.isInteger(Number(t)),z4=t=>t.endsWith("%")&&_c(t.slice(0,-1)),Je=t=>EC.test(t),no=t=>F4.test(t),W4=new Set(["length","size","percentage"]),q4=t=>vu(t,W4,IC),H4=t=>vu(t,"position",IC),K4=new Set(["image","url"]),G4=t=>vu(t,K4,X4),Q4=t=>vu(t,"",J4),rd=()=>!0,vu=(t,e,n)=>{const r=EC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Y4=t=>U4.test(t)&&!j4.test(t),IC=()=>!1,J4=t=>$4.test(t),X4=t=>B4.test(t),Z4=()=>{const t=Ft("colors"),e=Ft("spacing"),n=Ft("blur"),r=Ft("brightness"),s=Ft("borderColor"),i=Ft("borderRadius"),o=Ft("borderSpacing"),a=Ft("borderWidth"),l=Ft("contrast"),c=Ft("grayscale"),d=Ft("hueRotate"),h=Ft("invert"),f=Ft("gap"),m=Ft("gradientColorStops"),I=Ft("gradientColorStopPositions"),p=Ft("inset"),y=Ft("margin"),_=Ft("opacity"),v=Ft("padding"),w=Ft("saturate"),x=Ft("scale"),P=Ft("sepia"),L=Ft("skew"),A=Ft("space"),S=Ft("translate"),R=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Je,e],O=()=>[Je,e],k=()=>["",gi,to],z=()=>["auto",_c,Je],de=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Je],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[_c,Je];return{cacheSize:500,separator:":",theme:{colors:[rd],spacing:[gi,to],blur:["none","",no,Je],brightness:we(),borderColor:[t],borderRadius:["none","","full",no,Je],borderSpacing:O(),borderWidth:k(),contrast:we(),grayscale:W(),hueRotate:we(),invert:W(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[z4,to],inset:N(),margin:N(),opacity:we(),padding:O(),saturate:we(),scale:we(),sepia:W(),skew:we(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[no]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...de(),Je]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nd,Je]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",nd,Je]}],"grid-cols":[{"grid-cols":[rd]}],"col-start-end":[{col:["auto",{span:["full",nd,Je]},Je]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[rd]}],"row-start-end":[{row:["auto",{span:[nd,Je]},Je]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,e]}],"min-w":[{"min-w":[Je,e,"min","max","fit"]}],"max-w":[{"max-w":[Je,e,"none","full","min","max","fit","prose",{screen:[no]},no]}],h:[{h:[Je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",no,to]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zy]}],"font-family":[{font:[rd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",_c,zy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gi,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gi,to]}],"underline-offset":[{"underline-offset":["auto",gi,Je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...de(),H4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",q4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},G4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:fe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[gi,Je]}],"outline-w":[{outline:[gi,to]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[gi,to]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",no,Q4]}],"shadow-color":[{shadow:[rd]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",no,Je]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[nd,Je]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gi,to,zy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ej=L4(Z4);function ir(...t){return ej(mC(t))}const tj=bU,TC=b.forwardRef(({className:t,...e},n)=>E.jsx(aC,{ref:n,className:ir("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));TC.displayName=aC.displayName;const nj=pC("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),SC=b.forwardRef(({className:t,variant:e,...n},r)=>E.jsx(lC,{ref:r,className:ir(nj({variant:e}),t),...n}));SC.displayName=lC.displayName;const rj=b.forwardRef(({className:t,...e},n)=>E.jsx(dC,{ref:n,className:ir("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));rj.displayName=dC.displayName;const bC=b.forwardRef(({className:t,...e},n)=>E.jsx(hC,{ref:n,className:ir("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:E.jsx(M0,{className:"h-4 w-4"})}));bC.displayName=hC.displayName;const AC=b.forwardRef(({className:t,...e},n)=>E.jsx(cC,{ref:n,className:ir("text-sm font-semibold",t),...e}));AC.displayName=cC.displayName;const xC=b.forwardRef(({className:t,...e},n)=>E.jsx(uC,{ref:n,className:ir("text-sm opacity-90",t),...e}));xC.displayName=uC.displayName;function sj(){const{toasts:t}=C0();return E.jsxs(tj,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return E.jsxs(SC,{...i,children:[E.jsxs("div",{className:"grid gap-1",children:[n&&E.jsx(AC,{children:n}),r&&E.jsx(xC,{children:r})]}),s,E.jsx(bC,{})]},e)}),E.jsx(TC,{})]})}var lp=["light","dark"],U0="(prefers-color-scheme: dark)",ij=typeof window>"u",j0=b.createContext(void 0),oj={setTheme:t=>{},themes:[]},RC=()=>{var t;return(t=b.useContext(j0))!=null?t:oj},aj=t=>b.useContext(j0)?t.children:b.createElement(cj,{...t}),lj=["light","dark"],cj=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=lj,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=b.useState(()=>OS(s,o)),[m,I]=b.useState(()=>OS(s)),p=l?Object.values(l):i,y=b.useCallback(x=>{let P=x;if(!P)return;x==="system"&&n&&(P=LS());let L=l?l[P]:P,A=e?dj():null,S=document.documentElement;if(a==="class"?(S.classList.remove(...p),L&&S.classList.add(L)):L?S.setAttribute(a,L):S.removeAttribute(a),r){let R=lp.includes(o)?o:null,C=lp.includes(P)?P:R;S.style.colorScheme=C}A==null||A()},[]),_=b.useCallback(x=>{let P=typeof x=="function"?x(x):x;f(P);try{localStorage.setItem(s,P)}catch{}},[t]),v=b.useCallback(x=>{let P=LS(x);I(P),h==="system"&&n&&!t&&y("system")},[h,t]);b.useEffect(()=>{let x=window.matchMedia(U0);return x.addListener(v),v(x),()=>x.removeListener(v)},[v]),b.useEffect(()=>{let x=P=>{if(P.key!==s)return;let L=P.newValue||o;_(L)};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[_]),b.useEffect(()=>{y(t??h)},[t,h]);let w=b.useMemo(()=>({theme:h,setTheme:_,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,_,t,m,n,i]);return b.createElement(j0.Provider,{value:w},b.createElement(uj,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:p,nonce:d}),c)},uj=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(I=>`'${I}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?lp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(I,p=!1,y=!0)=>{let _=o?o[I]:I,v=p?I+"|| ''":`'${_}'`,w="";return s&&y&&!p&&lp.includes(I)&&(w+=`d.style.colorScheme = '${I}';`),n==="class"?p||_?w+=`c.add(${v})`:w+="null":_&&(w+=`d[s](n,${v})`),w},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${U0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),OS=(t,e)=>{if(ij)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},dj=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},LS=t=>(t||(t=window.matchMedia(U0)),t.matches?"dark":"light"),hj=t=>{switch(t){case"success":return pj;case"info":return yj;case"warning":return gj;case"error":return vj;default:return null}},fj=Array(12).fill(0),mj=({visible:t,className:e})=>F.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},F.createElement("div",{className:"sonner-spinner"},fj.map((n,r)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),pj=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gj=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yj=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vj=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_j=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wj=()=>{let[t,e]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},R_=1,Ej=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:R_++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],F.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(Tj(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||R_++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Dr=new Ej,Ij=(t,e)=>{let n=(e==null?void 0:e.id)||R_++;return Dr.addToast({title:t,...e,id:n}),n},Tj=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Sj=Ij,bj=()=>Dr.toasts,Aj=()=>Dr.getActiveToasts(),hr=Object.assign(Sj,{success:Dr.success,info:Dr.info,warning:Dr.warning,error:Dr.error,custom:Dr.custom,message:Dr.message,promise:Dr.promise,dismiss:Dr.dismiss,loading:Dr.loading},{getHistory:bj,getToasts:Aj});function xj(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}xj(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vf(t){return t.label!==void 0}var Rj=3,Pj="32px",Cj="16px",VS=4e3,kj=356,Dj=14,Nj=20,Oj=200;function Es(...t){return t.filter(Boolean).join(" ")}function Lj(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Vj=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:I,interacting:p,setHeights:y,visibleToasts:_,heights:v,index:w,toasts:x,expanded:P,removeToast:L,defaultRichColors:A,closeButton:S,style:R,cancelButtonStyle:C,actionButtonStyle:N,className:O="",descriptionClassName:k="",duration:z,position:de,gap:fe,loadingIcon:Se,expandByDefault:$,classNames:W,icons:re,closeButtonAriaLabel:we="Close toast",pauseWhenPageIsHidden:Ee}=t,[se,_e]=F.useState(null),[j,Ge]=F.useState(null),[Me,xn]=F.useState(!1),[Fn,_n]=F.useState(!1),[wn,Rn]=F.useState(!1),[Ct,ft]=F.useState(!1),[at,ar]=F.useState(!1),[lr,Un]=F.useState(0),[wt,an]=F.useState(0),xr=F.useRef(m.duration||z||VS),Ki=F.useRef(null),Rr=F.useRef(null),ya=w===0,_s=w+1<=_,Pn=m.type,ls=m.dismissible!==!1,va=m.className||"",Gi=m.descriptionClassName||"",Yt=F.useMemo(()=>v.findIndex(J=>J.toastId===m.id)||0,[v,m.id]),_a=F.useMemo(()=>{var J;return(J=m.closeButton)!=null?J:S},[m.closeButton,S]),Qi=F.useMemo(()=>m.duration||z||VS,[m.duration,z]),Pr=F.useRef(0),cs=F.useRef(0),pi=F.useRef(0),Yn=F.useRef(null),[G,H]=de.split("-"),q=F.useMemo(()=>v.reduce((J,oe,X)=>X>=Yt?J:J+oe.height,0),[v,Yt]),ie=wj(),ee=m.invert||f,Z=Pn==="loading";cs.current=F.useMemo(()=>Yt*fe+q,[Yt,q]),F.useEffect(()=>{xr.current=Qi},[Qi]),F.useEffect(()=>{xn(!0)},[]),F.useEffect(()=>{let J=Rr.current;if(J){let oe=J.getBoundingClientRect().height;return an(oe),y(X=>[{toastId:m.id,height:oe,position:m.position},...X]),()=>y(X=>X.filter(ae=>ae.toastId!==m.id))}},[y,m.id]),F.useLayoutEffect(()=>{if(!Me)return;let J=Rr.current,oe=J.style.height;J.style.height="auto";let X=J.getBoundingClientRect().height;J.style.height=oe,an(X),y(ae=>ae.find(ve=>ve.toastId===m.id)?ae.map(ve=>ve.toastId===m.id?{...ve,height:X}:ve):[{toastId:m.id,height:X,position:m.position},...ae])},[Me,m.title,m.description,y,m.id]);let ue=F.useCallback(()=>{_n(!0),Un(cs.current),y(J=>J.filter(oe=>oe.toastId!==m.id)),setTimeout(()=>{L(m)},Oj)},[m,L,y,cs]);F.useEffect(()=>{if(m.promise&&Pn==="loading"||m.duration===1/0||m.type==="loading")return;let J;return P||p||Ee&&ie?(()=>{if(pi.current<Pr.current){let oe=new Date().getTime()-Pr.current;xr.current=xr.current-oe}pi.current=new Date().getTime()})():xr.current!==1/0&&(Pr.current=new Date().getTime(),J=setTimeout(()=>{var oe;(oe=m.onAutoClose)==null||oe.call(m,m),ue()},xr.current)),()=>clearTimeout(J)},[P,p,m,Pn,Ee,ie,ue]),F.useEffect(()=>{m.delete&&ue()},[ue,m.delete]);function ce(){var J,oe,X;return re!=null&&re.loading?F.createElement("div",{className:Es(W==null?void 0:W.loader,(J=m==null?void 0:m.classNames)==null?void 0:J.loader,"sonner-loader"),"data-visible":Pn==="loading"},re.loading):Se?F.createElement("div",{className:Es(W==null?void 0:W.loader,(oe=m==null?void 0:m.classNames)==null?void 0:oe.loader,"sonner-loader"),"data-visible":Pn==="loading"},Se):F.createElement(mj,{className:Es(W==null?void 0:W.loader,(X=m==null?void 0:m.classNames)==null?void 0:X.loader),visible:Pn==="loading"})}return F.createElement("li",{tabIndex:0,ref:Rr,className:Es(O,va,W==null?void 0:W.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,W==null?void 0:W.default,W==null?void 0:W[Pn],(n=m==null?void 0:m.classNames)==null?void 0:n[Pn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:A,"data-styled":!(m.jsx||m.unstyled||I),"data-mounted":Me,"data-promise":!!m.promise,"data-swiped":at,"data-removed":Fn,"data-visible":_s,"data-y-position":G,"data-x-position":H,"data-index":w,"data-front":ya,"data-swiping":wn,"data-dismissible":ls,"data-type":Pn,"data-invert":ee,"data-swipe-out":Ct,"data-swipe-direction":j,"data-expanded":!!(P||$&&Me),style:{"--index":w,"--toasts-before":w,"--z-index":x.length-w,"--offset":`${Fn?lr:cs.current}px`,"--initial-height":$?"auto":`${wt}px`,...R,...m.style},onDragEnd:()=>{Rn(!1),_e(null),Yn.current=null},onPointerDown:J=>{Z||!ls||(Ki.current=new Date,Un(cs.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(Rn(!0),Yn.current={x:J.clientX,y:J.clientY}))},onPointerUp:()=>{var J,oe,X,ae;if(Ct||!ls)return;Yn.current=null;let ve=Number(((J=Rr.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pe=Number(((oe=Rr.current)==null?void 0:oe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ge=new Date().getTime()-((X=Ki.current)==null?void 0:X.getTime()),Ne=se==="x"?ve:pe,qe=Math.abs(Ne)/ge;if(Math.abs(Ne)>=Nj||qe>.11){Un(cs.current),(ae=m.onDismiss)==null||ae.call(m,m),Ge(se==="x"?ve>0?"right":"left":pe>0?"down":"up"),ue(),ft(!0),ar(!1);return}Rn(!1),_e(null)},onPointerMove:J=>{var oe,X,ae,ve;if(!Yn.current||!ls||((oe=window.getSelection())==null?void 0:oe.toString().length)>0)return;let pe=J.clientY-Yn.current.y,ge=J.clientX-Yn.current.x,Ne=(X=t.swipeDirections)!=null?X:Lj(de);!se&&(Math.abs(ge)>1||Math.abs(pe)>1)&&_e(Math.abs(ge)>Math.abs(pe)?"x":"y");let qe={x:0,y:0};se==="y"?(Ne.includes("top")||Ne.includes("bottom"))&&(Ne.includes("top")&&pe<0||Ne.includes("bottom")&&pe>0)&&(qe.y=pe):se==="x"&&(Ne.includes("left")||Ne.includes("right"))&&(Ne.includes("left")&&ge<0||Ne.includes("right")&&ge>0)&&(qe.x=ge),(Math.abs(qe.x)>0||Math.abs(qe.y)>0)&&ar(!0),(ae=Rr.current)==null||ae.style.setProperty("--swipe-amount-x",`${qe.x}px`),(ve=Rr.current)==null||ve.style.setProperty("--swipe-amount-y",`${qe.y}px`)}},_a&&!m.jsx?F.createElement("button",{"aria-label":we,"data-disabled":Z,"data-close-button":!0,onClick:Z||!ls?()=>{}:()=>{var J;ue(),(J=m.onDismiss)==null||J.call(m,m)},className:Es(W==null?void 0:W.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=re==null?void 0:re.close)!=null?i:_j):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:F.createElement(F.Fragment,null,Pn||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:Es(W==null?void 0:W.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ce():null,m.type!=="loading"?m.icon||(re==null?void 0:re[Pn])||hj(Pn):null):null,F.createElement("div",{"data-content":"",className:Es(W==null?void 0:W.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},F.createElement("div",{"data-title":"",className:Es(W==null?void 0:W.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?F.createElement("div",{"data-description":"",className:Es(k,Gi,W==null?void 0:W.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&Vf(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||C,onClick:J=>{var oe,X;Vf(m.cancel)&&ls&&((X=(oe=m.cancel).onClick)==null||X.call(oe,J),ue())},className:Es(W==null?void 0:W.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&Vf(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||N,onClick:J=>{var oe,X;Vf(m.action)&&((X=(oe=m.action).onClick)==null||X.call(oe,J),!J.defaultPrevented&&ue())},className:Es(W==null?void 0:W.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function MS(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Mj(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?Cj:Pj;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var Fj=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:I=Rj,toastOptions:p,dir:y=MS(),gap:_=Dj,loadingIcon:v,icons:w,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:P}=t,[L,A]=F.useState([]),S=F.useMemo(()=>Array.from(new Set([r].concat(L.filter(Ee=>Ee.position).map(Ee=>Ee.position)))),[L,r]),[R,C]=F.useState([]),[N,O]=F.useState(!1),[k,z]=F.useState(!1),[de,fe]=F.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Se=F.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=F.useRef(null),re=F.useRef(!1),we=F.useCallback(Ee=>{A(se=>{var _e;return(_e=se.find(j=>j.id===Ee.id))!=null&&_e.delete||Dr.dismiss(Ee.id),se.filter(({id:j})=>j!==Ee.id)})},[]);return F.useEffect(()=>Dr.subscribe(Ee=>{if(Ee.dismiss){A(se=>se.map(_e=>_e.id===Ee.id?{..._e,delete:!0}:_e));return}setTimeout(()=>{j1.flushSync(()=>{A(se=>{let _e=se.findIndex(j=>j.id===Ee.id);return _e!==-1?[...se.slice(0,_e),{...se[_e],...Ee},...se.slice(_e+1)]:[Ee,...se]})})})}),[]),F.useEffect(()=>{if(d!=="system"){fe(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;let Ee=window.matchMedia("(prefers-color-scheme: dark)");try{Ee.addEventListener("change",({matches:se})=>{fe(se?"dark":"light")})}catch{Ee.addListener(({matches:_e})=>{try{fe(_e?"dark":"light")}catch(j){console.error(j)}})}},[d]),F.useEffect(()=>{L.length<=1&&O(!1)},[L]),F.useEffect(()=>{let Ee=se=>{var _e,j;s.every(Ge=>se[Ge]||se.code===Ge)&&(O(!0),(_e=Se.current)==null||_e.focus()),se.code==="Escape"&&(document.activeElement===Se.current||(j=Se.current)!=null&&j.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",Ee),()=>document.removeEventListener("keydown",Ee)},[s]),F.useEffect(()=>{if(Se.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,re.current=!1)}},[Se.current]),F.createElement("section",{ref:e,"aria-label":`${x} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((Ee,se)=>{var _e;let[j,Ge]=Ee.split("-");return L.length?F.createElement("ol",{key:Ee,dir:y==="auto"?MS():y,tabIndex:-1,ref:Se,className:a,"data-sonner-toaster":!0,"data-theme":de,"data-y-position":j,"data-lifted":N&&L.length>1&&!i,"data-x-position":Ge,style:{"--front-toast-height":`${((_e=R[0])==null?void 0:_e.height)||0}px`,"--width":`${kj}px`,"--gap":`${_}px`,...m,...Mj(l,c)},onBlur:Me=>{re.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(re.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||re.current||(re.current=!0,W.current=Me.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{k||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},L.filter(Me=>!Me.position&&se===0||Me.position===Ee).map((Me,xn)=>{var Fn,_n;return F.createElement(Vj,{key:Me.id,icons:w,index:xn,toast:Me,defaultRichColors:h,duration:(Fn=p==null?void 0:p.duration)!=null?Fn:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:I,closeButton:(_n=p==null?void 0:p.closeButton)!=null?_n:o,interacting:k,position:Ee,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:we,toasts:L.filter(wn=>wn.position==Me.position),heights:R.filter(wn=>wn.position==Me.position),setHeights:C,expandByDefault:i,gap:_,loadingIcon:v,expanded:N,pauseWhenPageIsHidden:P,swipeDirections:t.swipeDirections})})):null}))});const Uj=({...t})=>{const{theme:e="system"}=RC();return E.jsx(Fj,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var jj=Uw[" useId ".trim().toString()]||(()=>{}),$j=0;function Wy(t){const[e,n]=b.useState(jj());return Ni(()=>{n(r=>r??String($j++))},[t]),t||(e?`radix-${e}`:"")}const Bj=["top","right","bottom","left"],Go=Math.min,Qr=Math.max,cp=Math.round,Mf=Math.floor,ri=t=>({x:t,y:t}),zj={left:"right",right:"left",bottom:"top",top:"bottom"},Wj={start:"end",end:"start"};function P_(t,e,n){return Qr(t,Go(e,n))}function Oi(t,e){return typeof t=="function"?t(e):t}function Li(t){return t.split("-")[0]}function _u(t){return t.split("-")[1]}function $0(t){return t==="x"?"y":"x"}function B0(t){return t==="y"?"height":"width"}const qj=new Set(["top","bottom"]);function Js(t){return qj.has(Li(t))?"y":"x"}function z0(t){return $0(Js(t))}function Hj(t,e,n){n===void 0&&(n=!1);const r=_u(t),s=z0(t),i=B0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=up(o)),[o,up(o)]}function Kj(t){const e=up(t);return[C_(t),e,C_(e)]}function C_(t){return t.replace(/start|end/g,e=>Wj[e])}const FS=["left","right"],US=["right","left"],Gj=["top","bottom"],Qj=["bottom","top"];function Yj(t,e,n){switch(t){case"top":case"bottom":return n?e?US:FS:e?FS:US;case"left":case"right":return e?Gj:Qj;default:return[]}}function Jj(t,e,n,r){const s=_u(t);let i=Yj(Li(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(C_)))),i}function up(t){return t.replace(/left|right|bottom|top/g,e=>zj[e])}function Xj(t){return{top:0,right:0,bottom:0,left:0,...t}}function PC(t){return typeof t!="number"?Xj(t):{top:t,right:t,bottom:t,left:t}}function dp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function jS(t,e,n){let{reference:r,floating:s}=t;const i=Js(e),o=z0(e),a=B0(o),l=Li(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(_u(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const Zj=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=jS(c,r,l),f=r,m={},I=0;for(let p=0;p<a.length;p++){const{name:y,fn:_}=a[p],{x:v,y:w,data:x,reset:P}=await _({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=w??h,m={...m,[y]:{...m[y],...x}},P&&I<=50&&(I++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:d,y:h}=jS(c,f,l)),p=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function uh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Oi(e,t),I=PC(m),y=a[f?h==="floating"?"reference":"floating":h],_=dp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},P=dp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(_.top-P.top+I.top)/x.y,bottom:(P.bottom-_.bottom+I.bottom)/x.y,left:(_.left-P.left+I.left)/x.x,right:(P.right-_.right+I.right)/x.x}}const e3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Oi(t,e)||{};if(c==null)return{};const h=PC(d),f={x:n,y:r},m=z0(s),I=B0(m),p=await o.getDimensions(c),y=m==="y",_=y?"top":"left",v=y?"bottom":"right",w=y?"clientHeight":"clientWidth",x=i.reference[I]+i.reference[m]-f[m]-i.floating[I],P=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=L?L[w]:0;(!A||!await(o.isElement==null?void 0:o.isElement(L)))&&(A=a.floating[w]||i.floating[I]);const S=x/2-P/2,R=A/2-p[I]/2-1,C=Go(h[_],R),N=Go(h[v],R),O=C,k=A-p[I]-N,z=A/2-p[I]/2+S,de=P_(O,z,k),fe=!l.arrow&&_u(s)!=null&&z!==de&&i.reference[I]/2-(z<O?C:N)-p[I]/2<0,Se=fe?z<O?z-O:z-k:0;return{[m]:f[m]+Se,data:{[m]:de,centerOffset:z-de-Se,...fe&&{alignmentOffset:Se}},reset:fe}}}),t3=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:p=!0,...y}=Oi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Li(s),v=Js(a),w=Li(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=f||(w||!p?[up(a)]:Kj(a)),L=I!=="none";!f&&L&&P.push(...Jj(a,p,I,x));const A=[a,...P],S=await uh(e,y),R=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&R.push(S[_]),h){const z=Hj(s,o,x);R.push(S[z[0]],S[z[1]])}if(C=[...C,{placement:s,overflows:R}],!R.every(z=>z<=0)){var N,O;const z=(((N=i.flip)==null?void 0:N.index)||0)+1,de=A[z];if(de&&(!(h==="alignment"?v!==Js(de):!1)||C.every($=>Js($.placement)===v?$.overflows[0]>0:!0)))return{data:{index:z,overflows:C},reset:{placement:de}};let fe=(O=C.filter(Se=>Se.overflows[0]<=0).sort((Se,$)=>Se.overflows[1]-$.overflows[1])[0])==null?void 0:O.placement;if(!fe)switch(m){case"bestFit":{var k;const Se=(k=C.filter($=>{if(L){const W=Js($.placement);return W===v||W==="y"}return!0}).map($=>[$.placement,$.overflows.filter(W=>W>0).reduce((W,re)=>W+re,0)]).sort(($,W)=>$[1]-W[1])[0])==null?void 0:k[0];Se&&(fe=Se);break}case"initialPlacement":fe=a;break}if(s!==fe)return{reset:{placement:fe}}}return{}}}};function $S(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function BS(t){return Bj.some(e=>t[e]>=0)}const n3=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Oi(t,e);switch(r){case"referenceHidden":{const i=await uh(e,{...s,elementContext:"reference"}),o=$S(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:BS(o)}}}case"escaped":{const i=await uh(e,{...s,altBoundary:!0}),o=$S(i,n.floating);return{data:{escapedOffsets:o,escaped:BS(o)}}}default:return{}}}}},CC=new Set(["left","top"]);async function r3(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Li(n),a=_u(n),l=Js(n)==="y",c=CC.has(o)?-1:1,d=i&&l?-1:1,h=Oi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:I}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof I=="number"&&(m=a==="end"?I*-1:I),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const s3=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await r3(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},i3=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:_,y:v}=y;return{x:_,y:v}}},...l}=Oi(t,e),c={x:n,y:r},d=await uh(e,l),h=Js(Li(s)),f=$0(h);let m=c[f],I=c[h];if(i){const y=f==="y"?"top":"left",_=f==="y"?"bottom":"right",v=m+d[y],w=m-d[_];m=P_(v,m,w)}if(o){const y=h==="y"?"top":"left",_=h==="y"?"bottom":"right",v=I+d[y],w=I-d[_];I=P_(v,I,w)}const p=a.fn({...e,[f]:m,[h]:I});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:i,[h]:o}}}}}},o3=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Oi(t,e),d={x:n,y:r},h=Js(s),f=$0(h);let m=d[f],I=d[h];const p=Oi(a,e),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const w=f==="y"?"height":"width",x=i.reference[f]-i.floating[w]+y.mainAxis,P=i.reference[f]+i.reference[w]-y.mainAxis;m<x?m=x:m>P&&(m=P)}if(c){var _,v;const w=f==="y"?"width":"height",x=CC.has(Li(s)),P=i.reference[h]-i.floating[w]+(x&&((_=o.offset)==null?void 0:_[h])||0)+(x?0:y.crossAxis),L=i.reference[h]+i.reference[w]+(x?0:((v=o.offset)==null?void 0:v[h])||0)-(x?y.crossAxis:0);I<P?I=P:I>L&&(I=L)}return{[f]:m,[h]:I}}}},a3=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Oi(t,e),d=await uh(e,c),h=Li(s),f=_u(s),m=Js(s)==="y",{width:I,height:p}=i.floating;let y,_;h==="top"||h==="bottom"?(y=h,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,y=f==="end"?"top":"bottom");const v=p-d.top-d.bottom,w=I-d.left-d.right,x=Go(p-d[y],v),P=Go(I-d[_],w),L=!e.middlewareData.shift;let A=x,S=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=v),L&&!f){const C=Qr(d.left,0),N=Qr(d.right,0),O=Qr(d.top,0),k=Qr(d.bottom,0);m?S=I-2*(C!==0||N!==0?C+N:Qr(d.left,d.right)):A=p-2*(O!==0||k!==0?O+k:Qr(d.top,d.bottom))}await l({...e,availableWidth:S,availableHeight:A});const R=await o.getDimensions(a.floating);return I!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function mg(){return typeof window<"u"}function wu(t){return kC(t)?(t.nodeName||"").toLowerCase():"#document"}function ts(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function di(t){var e;return(e=(kC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kC(t){return mg()?t instanceof Node||t instanceof ts(t).Node:!1}function Ls(t){return mg()?t instanceof Element||t instanceof ts(t).Element:!1}function li(t){return mg()?t instanceof HTMLElement||t instanceof ts(t).HTMLElement:!1}function zS(t){return!mg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ts(t).ShadowRoot}const l3=new Set(["inline","contents"]);function zh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Vs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!l3.has(s)}const c3=new Set(["table","td","th"]);function u3(t){return c3.has(wu(t))}const d3=[":popover-open",":modal"];function pg(t){return d3.some(e=>{try{return t.matches(e)}catch{return!1}})}const h3=["transform","translate","scale","rotate","perspective"],f3=["transform","translate","scale","rotate","perspective","filter"],m3=["paint","layout","strict","content"];function W0(t){const e=q0(),n=Ls(t)?Vs(t):t;return h3.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||f3.some(r=>(n.willChange||"").includes(r))||m3.some(r=>(n.contain||"").includes(r))}function p3(t){let e=Qo(t);for(;li(e)&&!$c(e);){if(W0(e))return e;if(pg(e))return null;e=Qo(e)}return null}function q0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const g3=new Set(["html","body","#document"]);function $c(t){return g3.has(wu(t))}function Vs(t){return ts(t).getComputedStyle(t)}function gg(t){return Ls(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Qo(t){if(wu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zS(t)&&t.host||di(t);return zS(e)?e.host:e}function DC(t){const e=Qo(t);return $c(e)?t.ownerDocument?t.ownerDocument.body:t.body:li(e)&&zh(e)?e:DC(e)}function dh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=DC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=ts(s);if(i){const a=k_(o);return e.concat(o,o.visualViewport||[],zh(s)?s:[],a&&n?dh(a):[])}return e.concat(s,dh(s,[],n))}function k_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function NC(t){const e=Vs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=li(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=cp(n)!==i||cp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function H0(t){return Ls(t)?t:t.contextElement}function wc(t){const e=H0(t);if(!li(e))return ri(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=NC(e);let o=(i?cp(n.width):n.width)/r,a=(i?cp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const y3=ri(0);function OC(t){const e=ts(t);return!q0()||!e.visualViewport?y3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function v3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ts(t)?!1:e}function al(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=H0(t);let o=ri(1);e&&(r?Ls(r)&&(o=wc(r)):o=wc(t));const a=v3(i,n,r)?OC(i):ri(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=ts(i),m=r&&Ls(r)?ts(r):r;let I=f,p=k_(I);for(;p&&r&&m!==I;){const y=wc(p),_=p.getBoundingClientRect(),v=Vs(p),w=_.left+(p.clientLeft+parseFloat(v.paddingLeft))*y.x,x=_.top+(p.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,h*=y.y,l+=w,c+=x,I=ts(p),p=k_(I)}}return dp({width:d,height:h,x:l,y:c})}function yg(t,e){const n=gg(t).scrollLeft;return e?e.left+n:al(di(t)).left+n}function LC(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-yg(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function _3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=di(r),a=e?pg(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ri(1);const d=ri(0),h=li(r);if((h||!h&&!i)&&((wu(r)!=="body"||zh(o))&&(l=gg(r)),li(r))){const m=al(r);c=wc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?LC(o,l):ri(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function w3(t){return Array.from(t.getClientRects())}function E3(t){const e=di(t),n=gg(t),r=t.ownerDocument.body,s=Qr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Qr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+yg(t);const a=-n.scrollTop;return Vs(r).direction==="rtl"&&(o+=Qr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const WS=25;function I3(t,e){const n=ts(t),r=di(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=q0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=yg(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,I=Math.abs(r.clientWidth-h.clientWidth-m);I<=WS&&(i-=I)}else c<=WS&&(i+=c);return{width:i,height:o,x:a,y:l}}const T3=new Set(["absolute","fixed"]);function S3(t,e){const n=al(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=li(t)?wc(t):ri(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function qS(t,e,n){let r;if(e==="viewport")r=I3(t,n);else if(e==="document")r=E3(di(t));else if(Ls(e))r=S3(e,n);else{const s=OC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return dp(r)}function VC(t,e){const n=Qo(t);return n===e||!Ls(n)||$c(n)?!1:Vs(n).position==="fixed"||VC(n,e)}function b3(t,e){const n=e.get(t);if(n)return n;let r=dh(t,[],!1).filter(a=>Ls(a)&&wu(a)!=="body"),s=null;const i=Vs(t).position==="fixed";let o=i?Qo(t):t;for(;Ls(o)&&!$c(o);){const a=Vs(o),l=W0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&T3.has(s.position)||zh(o)&&!l&&VC(t,o))?r=r.filter(d=>d!==o):s=a,o=Qo(o)}return e.set(t,r),r}function A3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?pg(e)?[]:b3(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=qS(e,d,s);return c.top=Qr(h.top,c.top),c.right=Go(h.right,c.right),c.bottom=Go(h.bottom,c.bottom),c.left=Qr(h.left,c.left),c},qS(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function x3(t){const{width:e,height:n}=NC(t);return{width:e,height:n}}function R3(t,e,n){const r=li(e),s=di(e),i=n==="fixed",o=al(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ri(0);function c(){l.x=yg(s)}if(r||!r&&!i)if((wu(e)!=="body"||zh(s))&&(a=gg(e)),r){const m=al(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?LC(s,a):ri(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function qy(t){return Vs(t).position==="static"}function HS(t,e){if(!li(t)||Vs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return di(t)===n&&(n=n.ownerDocument.body),n}function MC(t,e){const n=ts(t);if(pg(t))return n;if(!li(t)){let s=Qo(t);for(;s&&!$c(s);){if(Ls(s)&&!qy(s))return s;s=Qo(s)}return n}let r=HS(t,e);for(;r&&u3(r)&&qy(r);)r=HS(r,e);return r&&$c(r)&&qy(r)&&!W0(r)?n:r||p3(t)||n}const P3=async function(t){const e=this.getOffsetParent||MC,n=this.getDimensions,r=await n(t.floating);return{reference:R3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function C3(t){return Vs(t).direction==="rtl"}const k3={convertOffsetParentRelativeRectToViewportRelativeRect:_3,getDocumentElement:di,getClippingRect:A3,getOffsetParent:MC,getElementRects:P3,getClientRects:w3,getDimensions:x3,getScale:wc,isElement:Ls,isRTL:C3};function FC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function D3(t,e){let n=null,r;const s=di(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const I=Mf(h),p=Mf(s.clientWidth-(d+f)),y=Mf(s.clientHeight-(h+m)),_=Mf(d),w={rootMargin:-I+"px "+-p+"px "+-y+"px "+-_+"px",threshold:Qr(0,Go(1,l))||1};let x=!0;function P(L){const A=L[0].intersectionRatio;if(A!==l){if(!x)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!FC(c,t.getBoundingClientRect())&&o(),x=!1}try{n=new IntersectionObserver(P,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,w)}n.observe(t)}return o(!0),i}function N3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=H0(t),d=s||i?[...c?dh(c):[],...dh(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=c&&a?D3(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(_=>{let[v]=_;v&&v.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let I,p=l?al(t):null;l&&y();function y(){const _=al(t);p&&!FC(p,_)&&n(),p=_,I=requestAnimationFrame(y)}return n(),()=>{var _;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(I)}}const O3=s3,L3=i3,V3=t3,M3=a3,F3=n3,KS=e3,U3=o3,j3=(t,e,n)=>{const r=new Map,s={platform:k3,...n},i={...s.platform,_c:r};return Zj(t,e,{...s,platform:i})};var $3=typeof document<"u",B3=function(){},vm=$3?b.useLayoutEffect:B3;function hp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!hp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function UC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function GS(t,e){const n=UC(t);return Math.round(e*n)/n}function Hy(t){const e=b.useRef(t);return vm(()=>{e.current=t}),e}function z3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=b.useState(r);hp(f,r)||m(r);const[I,p]=b.useState(null),[y,_]=b.useState(null),v=b.useCallback($=>{$!==L.current&&(L.current=$,p($))},[]),w=b.useCallback($=>{$!==A.current&&(A.current=$,_($))},[]),x=i||I,P=o||y,L=b.useRef(null),A=b.useRef(null),S=b.useRef(d),R=l!=null,C=Hy(l),N=Hy(s),O=Hy(c),k=b.useCallback(()=>{if(!L.current||!A.current)return;const $={placement:e,strategy:n,middleware:f};N.current&&($.platform=N.current),j3(L.current,A.current,$).then(W=>{const re={...W,isPositioned:O.current!==!1};z.current&&!hp(S.current,re)&&(S.current=re,$h.flushSync(()=>{h(re)}))})},[f,e,n,N,O]);vm(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[c]);const z=b.useRef(!1);vm(()=>(z.current=!0,()=>{z.current=!1}),[]),vm(()=>{if(x&&(L.current=x),P&&(A.current=P),x&&P){if(C.current)return C.current(x,P,k);k()}},[x,P,k,C,R]);const de=b.useMemo(()=>({reference:L,floating:A,setReference:v,setFloating:w}),[v,w]),fe=b.useMemo(()=>({reference:x,floating:P}),[x,P]),Se=b.useMemo(()=>{const $={position:n,left:0,top:0};if(!fe.floating)return $;const W=GS(fe.floating,d.x),re=GS(fe.floating,d.y);return a?{...$,transform:"translate("+W+"px, "+re+"px)",...UC(fe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:re}},[n,a,fe.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:k,refs:de,elements:fe,floatingStyles:Se}),[d,k,de,fe,Se])}const W3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?KS({element:r.current,padding:s}).fn(n):{}:r?KS({element:r,padding:s}).fn(n):{}}}},q3=(t,e)=>({...O3(t),options:[t,e]}),H3=(t,e)=>({...L3(t),options:[t,e]}),K3=(t,e)=>({...U3(t),options:[t,e]}),G3=(t,e)=>({...V3(t),options:[t,e]}),Q3=(t,e)=>({...M3(t),options:[t,e]}),Y3=(t,e)=>({...F3(t),options:[t,e]}),J3=(t,e)=>({...W3(t),options:[t,e]});var X3="Arrow",jC=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return E.jsx(sn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:E.jsx("polygon",{points:"0,0 30,0 15,10"})})});jC.displayName=X3;var Z3=jC;function $C(t){const[e,n]=b.useState(void 0);return Ni(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var K0="Popper",[BC,zC]=yu(K0),[e$,WC]=BC(K0),qC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return E.jsx(e$,{scope:e,anchor:r,onAnchorChange:s,children:n})};qC.displayName=K0;var HC="PopperAnchor",KC=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=WC(HC,n),o=b.useRef(null),a=sr(e,o),l=b.useRef(null);return b.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:E.jsx(sn.div,{...s,ref:a})});KC.displayName=HC;var G0="PopperContent",[t$,n$]=BC(G0),GC=b.forwardRef((t,e)=>{var Me,xn,Fn,_n,wn,Rn;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:I,...p}=t,y=WC(G0,n),[_,v]=b.useState(null),w=sr(e,Ct=>v(Ct)),[x,P]=b.useState(null),L=$C(x),A=(L==null?void 0:L.width)??0,S=(L==null?void 0:L.height)??0,R=r+(i!=="center"?"-"+i:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(c)?c:[c],O=N.length>0,k={padding:C,boundary:N.filter(s$),altBoundary:O},{refs:z,floatingStyles:de,placement:fe,isPositioned:Se,middlewareData:$}=z3({strategy:"fixed",placement:R,whileElementsMounted:(...Ct)=>N3(...Ct,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[q3({mainAxis:s+S,alignmentAxis:o}),l&&H3({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?K3():void 0,...k}),l&&G3({...k}),Q3({...k,apply:({elements:Ct,rects:ft,availableWidth:at,availableHeight:ar})=>{const{width:lr,height:Un}=ft.reference,wt=Ct.floating.style;wt.setProperty("--radix-popper-available-width",`${at}px`),wt.setProperty("--radix-popper-available-height",`${ar}px`),wt.setProperty("--radix-popper-anchor-width",`${lr}px`),wt.setProperty("--radix-popper-anchor-height",`${Un}px`)}}),x&&J3({element:x,padding:a}),i$({arrowWidth:A,arrowHeight:S}),f&&Y3({strategy:"referenceHidden",...k})]}),[W,re]=JC(fe),we=ai(I);Ni(()=>{Se&&(we==null||we())},[Se,we]);const Ee=(Me=$.arrow)==null?void 0:Me.x,se=(xn=$.arrow)==null?void 0:xn.y,_e=((Fn=$.arrow)==null?void 0:Fn.centerOffset)!==0,[j,Ge]=b.useState();return Ni(()=>{_&&Ge(window.getComputedStyle(_).zIndex)},[_]),E.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:Se?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j,"--radix-popper-transform-origin":[(_n=$.transformOrigin)==null?void 0:_n.x,(wn=$.transformOrigin)==null?void 0:wn.y].join(" "),...((Rn=$.hide)==null?void 0:Rn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:E.jsx(t$,{scope:n,placedSide:W,onArrowChange:P,arrowX:Ee,arrowY:se,shouldHideArrow:_e,children:E.jsx(sn.div,{"data-side":W,"data-align":re,...p,ref:w,style:{...p.style,animation:Se?void 0:"none"}})})})});GC.displayName=G0;var QC="PopperArrow",r$={top:"bottom",right:"left",bottom:"top",left:"right"},YC=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=n$(QC,r),o=r$[i.placedSide];return E.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:E.jsx(Z3,{...s,ref:n,style:{...s.style,display:"block"}})})});YC.displayName=QC;function s$(t){return t!==null}var i$=t=>({name:"transformOrigin",options:t,fn(e){var y,_,v;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=JC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,m=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let I="",p="";return c==="bottom"?(I=o?h:`${f}px`,p=`${-l}px`):c==="top"?(I=o?h:`${f}px`,p=`${r.floating.height+l}px`):c==="right"?(I=`${-l}px`,p=o?h:`${m}px`):c==="left"&&(I=`${r.floating.width+l}px`,p=o?h:`${m}px`),{data:{x:I,y:p}}}});function JC(t){const[e,n="center"]=t.split("-");return[e,n]}var CY=qC,o$=KC,a$=GC,l$=YC,[vg]=yu("Tooltip",[zC]),Q0=zC(),XC="TooltipProvider",c$=700,QS="tooltip.open",[u$,ZC]=vg(XC),ek=t=>{const{__scopeTooltip:e,delayDuration:n=c$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),E.jsx(u$,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};ek.displayName=XC;var tk="Tooltip",[kY,_g]=vg(tk),D_="TooltipTrigger",d$=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=_g(D_,n),i=ZC(D_,n),o=Q0(n),a=b.useRef(null),l=sr(e,a,s.onTriggerChange),c=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),E.jsx(o$,{asChild:!0,...o,children:E.jsx(sn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Lt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Lt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Lt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Lt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Lt(t.onBlur,s.onClose),onClick:Lt(t.onClick,s.onClose)})})});d$.displayName=D_;var h$="TooltipPortal",[DY,f$]=vg(h$,{forceMount:void 0}),Bc="TooltipContent",nk=b.forwardRef((t,e)=>{const n=f$(Bc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=_g(Bc,t.__scopeTooltip);return E.jsx(Tl,{present:r||o.open,children:o.disableHoverableContent?E.jsx(rk,{side:s,...i,ref:e}):E.jsx(m$,{side:s,...i,ref:e})})}),m$=b.forwardRef((t,e)=>{const n=_g(Bc,t.__scopeTooltip),r=ZC(Bc,t.__scopeTooltip),s=b.useRef(null),i=sr(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=b.useCallback(()=>{a(null),h(!1)},[h]),m=b.useCallback((I,p)=>{const y=I.currentTarget,_={x:I.clientX,y:I.clientY},v=_$(_,y.getBoundingClientRect()),w=w$(_,v),x=E$(p.getBoundingClientRect()),P=T$([...w,...x]);a(P),h(!0)},[h]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(l&&d){const I=y=>m(y,d),p=y=>m(y,l);return l.addEventListener("pointerleave",I),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",I),d.removeEventListener("pointerleave",p)}}},[l,d,m,f]),b.useEffect(()=>{if(o){const I=p=>{const y=p.target,_={x:p.clientX,y:p.clientY},v=(l==null?void 0:l.contains(y))||(d==null?void 0:d.contains(y)),w=!I$(_,o);v?f():w&&(f(),c())};return document.addEventListener("pointermove",I),()=>document.removeEventListener("pointermove",I)}},[l,d,o,c,f]),E.jsx(rk,{...t,ref:i})}),[p$,g$]=vg(tk,{isInside:!1}),y$=MF("TooltipContent"),rk=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=_g(Bc,n),c=Q0(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener(QS,d),()=>document.removeEventListener(QS,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),E.jsx(dg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:E.jsxs(a$,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[E.jsx(y$,{children:r}),E.jsx(p$,{scope:n,isInside:!0,children:E.jsx(aU,{id:l.contentId,role:"tooltip",children:s||r})})]})})});nk.displayName=Bc;var sk="TooltipArrow",v$=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Q0(n);return g$(sk,n).isInside?null:E.jsx(l$,{...s,...r,ref:e})});v$.displayName=sk;function _$(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function w$(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function E$(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function I$(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function T$(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),S$(e)}function S$(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var b$=ek,ik=nk;const A$=b$,x$=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>E.jsx(ik,{ref:r,sideOffset:e,className:ir("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));x$.displayName=ik.displayName;var wg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},R$={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},yo,Ow,oR,P$=(oR=class{constructor(){pt(this,yo,R$);pt(this,Ow,!1)}setTimeoutProvider(t){ze(this,yo,t)}setTimeout(t,e){return K(this,yo).setTimeout(t,e)}clearTimeout(t){K(this,yo).clearTimeout(t)}setInterval(t,e){return K(this,yo).setInterval(t,e)}clearInterval(t){K(this,yo).clearInterval(t)}},yo=new WeakMap,Ow=new WeakMap,oR),fp=new P$;function C$(t){setTimeout(t,0)}var Eg=typeof window>"u"||"Deno"in globalThis;function Ir(){}function k$(t,e){return typeof t=="function"?t(e):t}function D$(t){return typeof t=="number"&&t>=0&&t!==1/0}function N$(t,e){return Math.max(t+(e||0)-Date.now(),0)}function N_(t,e){return typeof t=="function"?t(e):t}function O$(t,e){return typeof t=="function"?t(e):t}function YS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Y0(o,e.options))return!1}else if(!fh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function JS(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(hh(e.options.mutationKey)!==hh(i))return!1}else if(!fh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Y0(t,e){return((e==null?void 0:e.queryKeyHashFn)||hh)(t)}function hh(t){return JSON.stringify(t,(e,n)=>O_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function fh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>fh(t[n],e[n])):!1}var L$=Object.prototype.hasOwnProperty;function ok(t,e){if(t===e)return t;const n=XS(t)&&XS(e);if(!n&&!(O_(t)&&O_(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:L$.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=ok(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function NY(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function XS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function O_(t){if(!ZS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!ZS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ZS(t){return Object.prototype.toString.call(t)==="[object Object]"}function V$(t){return new Promise(e=>{fp.setTimeout(e,t)})}function M$(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ok(t,e):e}function F$(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function U$(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var J0=Symbol();function ak(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===J0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function OY(t,e){return typeof t=="function"?t(...e):!!t}var Wa,vo,Ac,aR,j$=(aR=class extends wg{constructor(){super();pt(this,Wa);pt(this,vo);pt(this,Ac);ze(this,Ac,e=>{if(!Eg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,vo)||this.setEventListener(K(this,Ac))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,vo))==null||e.call(this),ze(this,vo,void 0))}setEventListener(e){var n;ze(this,Ac,e),(n=K(this,vo))==null||n.call(this),ze(this,vo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,Wa)!==e&&(ze(this,Wa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,Wa)=="boolean"?K(this,Wa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wa=new WeakMap,vo=new WeakMap,Ac=new WeakMap,aR),lk=new j$;function $$(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function B$(t){var n;let e;if((n=t.then(r=>(e=r,r),Ir))==null||n.catch(Ir),e!==void 0)return{data:e}}function ck(t){return t}function z$(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function W$(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(Ir),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function q$(t){return t.state.isPaused}function H$(t){return t.state.status==="success"}function K$(t){return!0}function G$(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??q$,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[z$(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??H$,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??K$,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??ck,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[W$(f,o,i)]:[]);return{mutations:r,queries:a}}function Q$(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??ck,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:m,promise:I,dehydratedAt:p})=>{var L,A;const y=I?B$(I):void 0,_=h.data===void 0?y==null?void 0:y.data:h.data,v=_===void 0?_:i(_);let w=s.get(f);const x=(w==null?void 0:w.state.status)==="pending",P=(w==null?void 0:w.state.fetchStatus)==="fetching";if(w){const S=y&&p!==void 0&&p>w.state.dataUpdatedAt;if(h.dataUpdatedAt>w.state.dataUpdatedAt||S){const{fetchStatus:R,...C}=h;w.setState({...C,data:v})}}else w=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(A=n==null?void 0:n.defaultOptions)==null?void 0:A.queries,queryKey:d,queryHash:f,meta:m},{...h,data:v,fetchStatus:"idle",status:v!==void 0?"success":h.status});I&&!x&&!P&&(p===void 0||p>w.state.dataUpdatedAt)&&w.fetch(void 0,{initialPromise:Promise.resolve(I).then(i)}).catch(Ir)})}var Y$=C$;function J$(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Y$;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Tr=J$(),xc,_o,Rc,lR,X$=(lR=class extends wg{constructor(){super();pt(this,xc,!0);pt(this,_o);pt(this,Rc);ze(this,Rc,e=>{if(!Eg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,_o)||this.setEventListener(K(this,Rc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,_o))==null||e.call(this),ze(this,_o,void 0))}setEventListener(e){var n;ze(this,Rc,e),(n=K(this,_o))==null||n.call(this),ze(this,_o,e(this.setOnline.bind(this)))}setOnline(e){K(this,xc)!==e&&(ze(this,xc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,xc)}},xc=new WeakMap,_o=new WeakMap,Rc=new WeakMap,lR),mp=new X$;function Z$(t){return Math.min(1e3*2**t,3e4)}function uk(t){return(t??"online")==="online"?mp.isOnline():!0}var L_=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function dk(t){let e=!1,n=0,r;const s=$$(),i=()=>s.status!=="pending",o=p=>{var y;if(!i()){const _=new L_(p);f(_),(y=t.onCancel)==null||y.call(t,_)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>lk.isFocused()&&(t.networkMode==="always"||mp.isOnline())&&t.canRun(),d=()=>uk(t.networkMode)&&t.canRun(),h=p=>{i()||(r==null||r(),s.resolve(p))},f=p=>{i()||(r==null||r(),s.reject(p))},m=()=>new Promise(p=>{var y;r=_=>{(i()||c())&&p(_)},(y=t.onPause)==null||y.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),I=()=>{if(i())return;let p;const y=n===0?t.initialPromise:void 0;try{p=y??t.fn()}catch(_){p=Promise.reject(_)}Promise.resolve(p).then(h).catch(_=>{var L;if(i())return;const v=t.retry??(Eg?0:3),w=t.retryDelay??Z$,x=typeof w=="function"?w(n,_):w,P=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,_);if(e||!P){f(_);return}n++,(L=t.onFail)==null||L.call(t,n,_),V$(x).then(()=>c()?void 0:m()).then(()=>{e?f(_):I()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?I():m().then(I),s)}}var qa,cR,hk=(cR=class{constructor(){pt(this,qa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),D$(this.gcTime)&&ze(this,qa,fp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Eg?1/0:5*60*1e3))}clearGcTimeout(){K(this,qa)&&(fp.clearTimeout(K(this,qa)),ze(this,qa,void 0))}},qa=new WeakMap,cR),Ha,Pc,ds,Ka,Bn,Nh,Ga,Ts,yi,uR,eB=(uR=class extends hk{constructor(n){super();pt(this,Ts);pt(this,Ha);pt(this,Pc);pt(this,ds);pt(this,Ka);pt(this,Bn);pt(this,Nh);pt(this,Ga);ze(this,Ga,!1),ze(this,Nh,n.defaultOptions),this.setOptions(n.options),this.observers=[],ze(this,Ka,n.client),ze(this,ds,K(this,Ka).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ze(this,Ha,tb(this.options)),this.state=n.state??K(this,Ha),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Bn))==null?void 0:n.promise}setOptions(n){if(this.options={...K(this,Nh),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=tb(this.options);r.data!==void 0&&(this.setState(eb(r.data,r.dataUpdatedAt)),ze(this,Ha,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,ds).remove(this)}setData(n,r){const s=M$(this.state.data,n,this.options);return cr(this,Ts,yi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){cr(this,Ts,yi).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Bn))==null?void 0:s.promise;return(i=K(this,Bn))==null||i.cancel(n),r?r.then(Ir).catch(Ir):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,Ha))}isActive(){return this.observers.some(n=>O$(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===J0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>N_(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!N$(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Bn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Bn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,ds).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Bn)&&(K(this,Ga)?K(this,Bn).cancel({revert:!0}):K(this,Bn).cancelRetry()),this.scheduleGc()),K(this,ds).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||cr(this,Ts,yi).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,I,p,y,_,v,w,x;if(this.state.fetchStatus!=="idle"&&((c=K(this,Bn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Bn))return K(this,Bn).continueRetry(),K(this,Bn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const P=this.observers.find(L=>L.options.queryFn);P&&this.setOptions(P.options)}const s=new AbortController,i=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(ze(this,Ga,!0),s.signal)})},o=()=>{const P=ak(this.options,r),A=(()=>{const S={client:K(this,Ka),queryKey:this.queryKey,meta:this.meta};return i(S),S})();return ze(this,Ga,!1),this.options.persister?this.options.persister(P,A,this):P(A)},l=(()=>{const P={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:K(this,Ka),state:this.state,fetchFn:o};return i(P),P})();(d=this.options.behavior)==null||d.onFetch(l,this),ze(this,Pc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&cr(this,Ts,yi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ze(this,Bn,dk({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:P=>{P instanceof L_&&P.revert&&this.setState({...K(this,Pc),fetchStatus:"idle"}),s.abort()},onFail:(P,L)=>{cr(this,Ts,yi).call(this,{type:"failed",failureCount:P,error:L})},onPause:()=>{cr(this,Ts,yi).call(this,{type:"pause"})},onContinue:()=>{cr(this,Ts,yi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const P=await K(this,Bn).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(I=(m=K(this,ds).config).onSuccess)==null||I.call(m,P,this),(y=(p=K(this,ds).config).onSettled)==null||y.call(p,P,this.state.error,this),P}catch(P){if(P instanceof L_){if(P.silent)return K(this,Bn).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw cr(this,Ts,yi).call(this,{type:"error",error:P}),(v=(_=K(this,ds).config).onError)==null||v.call(_,P,this),(x=(w=K(this,ds).config).onSettled)==null||x.call(w,this.state.data,P,this),P}finally{this.scheduleGc()}}},Ha=new WeakMap,Pc=new WeakMap,ds=new WeakMap,Ka=new WeakMap,Bn=new WeakMap,Nh=new WeakMap,Ga=new WeakMap,Ts=new WeakSet,yi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...tB(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...eb(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ze(this,Pc,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Tr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,ds).notify({query:this,type:"updated",action:n})})},uR);function tB(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function eb(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function tb(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function nb(t){return{onFetch:(e,n)=>{var d,h,f,m,I;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((I=e.state.data)==null?void 0:I.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},_=ak(e.options,e.fetchOptions),v=async(w,x,P)=>{if(p)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const A=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:x,direction:P?"backward":"forward",meta:e.options.meta};return y(N),N})(),S=await _(A),{maxPages:R}=e.options,C=P?U$:F$;return{pages:C(w.pages,S,R),pageParams:C(w.pageParams,x,R)}};if(s&&i.length){const w=s==="backward",x=w?nB:rb,P={pages:i,pageParams:o},L=x(r,P);a=await v(P,L,w)}else{const w=t??i.length;do{const x=l===0?o[0]??r.initialPageParam:rb(r,a);if(l>0&&x==null)break;a=await v(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var p,y;return(y=(p=e.options).persister)==null?void 0:y.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function rb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function nB(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Oh,qs,wr,Qa,Hs,ao,dR,rB=(dR=class extends hk{constructor(n){super();pt(this,Hs);pt(this,Oh);pt(this,qs);pt(this,wr);pt(this,Qa);ze(this,Oh,n.client),this.mutationId=n.mutationId,ze(this,wr,n.mutationCache),ze(this,qs,[]),this.state=n.state||sB(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,qs).includes(n)||(K(this,qs).push(n),this.clearGcTimeout(),K(this,wr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ze(this,qs,K(this,qs).filter(r=>r!==n)),this.scheduleGc(),K(this,wr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,qs).length||(this.state.status==="pending"?this.scheduleGc():K(this,wr).remove(this))}continue(){var n;return((n=K(this,Qa))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,I,p,y,_,v,w,x,P,L,A,S,R,C;const r=()=>{cr(this,Hs,ao).call(this,{type:"continue"})},s={client:K(this,Oh),meta:this.options.meta,mutationKey:this.options.mutationKey};ze(this,Qa,dk({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(N,O)=>{cr(this,Hs,ao).call(this,{type:"failed",failureCount:N,error:O})},onPause:()=>{cr(this,Hs,ao).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,wr).canRun(this)}));const i=this.state.status==="pending",o=!K(this,Qa).canStart();try{if(i)r();else{cr(this,Hs,ao).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=K(this,wr).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&cr(this,Hs,ao).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const N=await K(this,Qa).start();return await((f=(h=K(this,wr).config).onSuccess)==null?void 0:f.call(h,N,n,this.state.context,this,s)),await((I=(m=this.options).onSuccess)==null?void 0:I.call(m,N,n,this.state.context,s)),await((y=(p=K(this,wr).config).onSettled)==null?void 0:y.call(p,N,null,this.state.variables,this.state.context,this,s)),await((v=(_=this.options).onSettled)==null?void 0:v.call(_,N,null,n,this.state.context,s)),cr(this,Hs,ao).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(w=K(this,wr).config).onError)==null?void 0:x.call(w,N,n,this.state.context,this,s)),await((L=(P=this.options).onError)==null?void 0:L.call(P,N,n,this.state.context,s)),await((S=(A=K(this,wr).config).onSettled)==null?void 0:S.call(A,void 0,N,this.state.variables,this.state.context,this,s)),await((C=(R=this.options).onSettled)==null?void 0:C.call(R,void 0,N,n,this.state.context,s)),N}finally{cr(this,Hs,ao).call(this,{type:"error",error:N})}}finally{K(this,wr).runNext(this)}}},Oh=new WeakMap,qs=new WeakMap,wr=new WeakMap,Qa=new WeakMap,Hs=new WeakSet,ao=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Tr.batch(()=>{K(this,qs).forEach(s=>{s.onMutationUpdate(n)}),K(this,wr).notify({mutation:this,type:"updated",action:n})})},dR);function sB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wi,Ss,Lh,hR,iB=(hR=class extends wg{constructor(e={}){super();pt(this,wi);pt(this,Ss);pt(this,Lh);this.config=e,ze(this,wi,new Set),ze(this,Ss,new Map),ze(this,Lh,0)}build(e,n,r){const s=new rB({client:e,mutationCache:this,mutationId:++gf(this,Lh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){K(this,wi).add(e);const n=Ff(e);if(typeof n=="string"){const r=K(this,Ss).get(n);r?r.push(e):K(this,Ss).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(K(this,wi).delete(e)){const n=Ff(e);if(typeof n=="string"){const r=K(this,Ss).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&K(this,Ss).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Ff(e);if(typeof n=="string"){const r=K(this,Ss).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Ff(e);if(typeof n=="string"){const s=(r=K(this,Ss).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tr.batch(()=>{K(this,wi).forEach(e=>{this.notify({type:"removed",mutation:e})}),K(this,wi).clear(),K(this,Ss).clear()})}getAll(){return Array.from(K(this,wi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>JS(n,r))}findAll(e={}){return this.getAll().filter(n=>JS(e,n))}notify(e){Tr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Tr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ir))))}},wi=new WeakMap,Ss=new WeakMap,Lh=new WeakMap,hR);function Ff(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ks,fR,oB=(fR=class extends wg{constructor(e={}){super();pt(this,Ks);this.config=e,ze(this,Ks,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Y0(s,n);let o=this.get(i);return o||(o=new eB({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,Ks).has(e.queryHash)||(K(this,Ks).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,Ks).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,Ks).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Tr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,Ks).get(e)}getAll(){return[...K(this,Ks).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>YS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>YS(e,r)):n}notify(e){Tr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Tr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Tr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ks=new WeakMap,fR),hn,wo,Eo,Cc,kc,Io,Dc,Nc,mR,aB=(mR=class{constructor(t={}){pt(this,hn);pt(this,wo);pt(this,Eo);pt(this,Cc);pt(this,kc);pt(this,Io);pt(this,Dc);pt(this,Nc);ze(this,hn,t.queryCache||new oB),ze(this,wo,t.mutationCache||new iB),ze(this,Eo,t.defaultOptions||{}),ze(this,Cc,new Map),ze(this,kc,new Map),ze(this,Io,0)}mount(){gf(this,Io)._++,K(this,Io)===1&&(ze(this,Dc,lk.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,hn).onFocus())})),ze(this,Nc,mp.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,hn).onOnline())})))}unmount(){var t,e;gf(this,Io)._--,K(this,Io)===0&&((t=K(this,Dc))==null||t.call(this),ze(this,Dc,void 0),(e=K(this,Nc))==null||e.call(this),ze(this,Nc,void 0))}isFetching(t){return K(this,hn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,wo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,hn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=K(this,hn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(N_(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return K(this,hn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,hn).get(r.queryHash),i=s==null?void 0:s.state.data,o=k$(e,i);if(o!==void 0)return K(this,hn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Tr.batch(()=>K(this,hn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,hn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,hn);Tr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,hn);return Tr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Tr.batch(()=>K(this,hn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ir).catch(Ir)}invalidateQueries(t,e={}){return Tr.batch(()=>(K(this,hn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Tr.batch(()=>K(this,hn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ir)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ir)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,hn).build(this,e);return n.isStaleByTime(N_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ir).catch(Ir)}fetchInfiniteQuery(t){return t.behavior=nb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ir).catch(Ir)}ensureInfiniteQueryData(t){return t.behavior=nb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return mp.isOnline()?K(this,wo).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,hn)}getMutationCache(){return K(this,wo)}getDefaultOptions(){return K(this,Eo)}setDefaultOptions(t){ze(this,Eo,t)}setQueryDefaults(t,e){K(this,Cc).set(hh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,Cc).values()],n={};return e.forEach(r=>{fh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){K(this,kc).set(hh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,kc).values()],n={};return e.forEach(r=>{fh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,Eo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Y0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===J0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,Eo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,hn).clear(),K(this,wo).clear()}},hn=new WeakMap,wo=new WeakMap,Eo=new WeakMap,Cc=new WeakMap,kc=new WeakMap,Io=new WeakMap,Dc=new WeakMap,Nc=new WeakMap,mR),fk=b.createContext(void 0),MY=t=>{const e=b.useContext(fk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},lB=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.jsx(fk.Provider,{value:t,children:e})),cB=["added","removed","updated"];function sb(t){return cB.includes(t)}async function uB({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();Q$(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function ib({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:G$(t,r)};await e.persistClient(s)}function dB(t){const e=t.queryClient.getQueryCache().subscribe(r=>{sb(r.type)&&ib(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{sb(r.type)&&ib(t)});return()=>{e(),n()}}function hB(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=uB(t).then(()=>{e||(n=dB(t))});return[r,s]}function Ky(){}function fB({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:mB(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Ky,restoreClient:Ky,removeClient:Ky}}function mB(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=fp.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mh.apply(this,arguments)}var bo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bo||(bo={}));const ob="popstate";function pB(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return pp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ph(s)}return mk(e,n,null,t)}function gB(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Sl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),pp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:ph(i))}function r(s,i){X0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return mk(e,n,r,t)}function yn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function X0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yB(){return Math.random().toString(36).substr(2,8)}function ab(t,e){return{usr:t.state,key:t.key,idx:e}}function pp(t,e,n,r){return n===void 0&&(n=null),mh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sl(e):e,{state:n,key:e&&e.key||r||yB()})}function ph(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=bo.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(mh({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=bo.Pop;let y=d(),_=y==null?null:y-c;c=y,l&&l({action:a,location:p.location,delta:_})}function f(y,_){a=bo.Push;let v=pp(p.location,y,_);n&&n(v,y),c=d()+1;let w=ab(v,c),x=p.createHref(v);try{o.pushState(w,"",x)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(x)}i&&l&&l({action:a,location:p.location,delta:1})}function m(y,_){a=bo.Replace;let v=pp(p.location,y,_);n&&n(v,y),c=d();let w=ab(v,c),x=p.createHref(v);o.replaceState(w,"",x),i&&l&&l({action:a,location:p.location,delta:0})}function I(y){let _=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:ph(y);return v=v.replace(/ $/,"%20"),yn(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let p={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ob,h),l=y,()=>{s.removeEventListener(ob,h),l=null}},createHref(y){return e(s,y)},createURL:I,encodeLocation(y){let _=I(y);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(y){return o.go(y)}};return p}var lb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lb||(lb={}));function vB(t,e,n){return n===void 0&&(n="/"),_B(t,e,n)}function _B(t,e,n,r){let s=typeof e=="string"?Sl(e):e,i=Z0(s.pathname||"/",n);if(i==null)return null;let o=pk(t);wB(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=DB(i);a=PB(o[l],c)}return a}function pk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(yn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Fo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(yn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pk(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:xB(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of gk(i.path))s(i,o,l)}),e}function gk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=gk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function wB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RB(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EB=/^:[\w-]+$/,IB=3,TB=2,SB=1,bB=10,AB=-2,cb=t=>t==="*";function xB(t,e){let n=t.split("/"),r=n.length;return n.some(cb)&&(r+=AB),e&&(r+=TB),n.filter(s=>!cb(s)).reduce((s,i)=>s+(EB.test(i)?IB:i===""?SB:bB),r)}function RB(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function PB(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=CB({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Fo([i,h.pathname]),pathnameBase:VB(Fo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Fo([i,h.pathnameBase]))}return o}function CB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kB(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const I=a[h];return m&&!I?c[f]=void 0:c[f]=(I||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function kB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),X0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function DB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return X0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Z0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function NB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Sl(t):t;return{pathname:n?n.startsWith("/")?n:OB(n,e):e,search:MB(r),hash:FB(s)}}function OB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Gy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function eE(t,e){let n=LB(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Sl(t):(s=mh({},t),yn(!s.pathname||!s.pathname.includes("?"),Gy("?","pathname","search",s)),yn(!s.pathname||!s.pathname.includes("#"),Gy("#","pathname","hash",s)),yn(!s.search||!s.search.includes("#"),Gy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=NB(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Fo=t=>t.join("/").replace(/\/\/+/g,"/"),VB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yk=["post","put","patch","delete"];new Set(yk);const jB=["get",...yk];new Set(jB);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gh.apply(this,arguments)}const nE=b.createContext(null),$B=b.createContext(null),aa=b.createContext(null),Ig=b.createContext(null),$i=b.createContext({outlet:null,matches:[],isDataRoute:!1}),vk=b.createContext(null);function BB(t,e){let{relative:n}=e===void 0?{}:e;Eu()||yn(!1);let{basename:r,navigator:s}=b.useContext(aa),{hash:i,pathname:o,search:a}=wk(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Fo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Eu(){return b.useContext(Ig)!=null}function hi(){return Eu()||yn(!1),b.useContext(Ig).location}function _k(t){b.useContext(aa).static||b.useLayoutEffect(t)}function Iu(){let{isDataRoute:t}=b.useContext($i);return t?t6():zB()}function zB(){Eu()||yn(!1);let t=b.useContext(nE),{basename:e,future:n,navigator:r}=b.useContext(aa),{matches:s}=b.useContext($i),{pathname:i}=hi(),o=JSON.stringify(eE(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return _k(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=tE(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function FY(){let{matches:t}=b.useContext($i),e=t[t.length-1];return e?e.params:{}}function wk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(aa),{matches:s}=b.useContext($i),{pathname:i}=hi(),o=JSON.stringify(eE(s,r.v7_relativeSplatPath));return b.useMemo(()=>tE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function WB(t,e){return qB(t,e)}function qB(t,e,n,r){Eu()||yn(!1);let{navigator:s}=b.useContext(aa),{matches:i}=b.useContext($i),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=hi(),d;if(e){var h;let y=typeof e=="string"?Sl(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||yn(!1),d=y}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let I=vB(t,{pathname:m}),p=YB(I&&I.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Fo([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Fo([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&p?b.createElement(Ig.Provider,{value:{location:gh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:bo.Pop}},p):p}function HB(){let t=e6(),e=UB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const KB=b.createElement(HB,null);class GB extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement($i.Provider,{value:this.props.routeContext},b.createElement(vk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QB(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(nE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement($i.Provider,{value:e},r)}function YB(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||yn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,I=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||I){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,I=!1,p=null,y=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||KB,l&&(c<0&&f===0?(n6("route-fallback"),I=!0,y=null):c===f&&(I=!0,y=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),v=()=>{let w;return m?w=p:I?w=y:h.route.Component?w=b.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,b.createElement(QB,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(GB,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var Ek=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ek||{}),Ik=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ik||{});function JB(t){let e=b.useContext(nE);return e||yn(!1),e}function XB(t){let e=b.useContext($B);return e||yn(!1),e}function ZB(t){let e=b.useContext($i);return e||yn(!1),e}function Tk(t){let e=ZB(),n=e.matches[e.matches.length-1];return n.route.id||yn(!1),n.route.id}function e6(){var t;let e=b.useContext(vk),n=XB(),r=Tk();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function t6(){let{router:t}=JB(Ek.UseNavigateStable),e=Tk(Ik.UseNavigateStable),n=b.useRef(!1);return _k(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,gh({fromRouteId:e},i)))},[t,e])}const ub={};function n6(t,e,n){ub[t]||(ub[t]=!0)}function Sk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function UY(t){let{to:e,replace:n,state:r,relative:s}=t;Eu()||yn(!1);let{future:i,static:o}=b.useContext(aa),{matches:a}=b.useContext($i),{pathname:l}=hi(),c=Iu(),d=tE(e,eE(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Re(t){yn(!1)}function bk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=bo.Pop,navigator:i,static:o=!1,future:a}=t;Eu()&&yn(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:gh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Sl(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:I="default"}=r,p=b.useMemo(()=>{let y=Z0(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:I},navigationType:s}},[l,d,h,f,m,I,s]);return p==null?null:b.createElement(aa.Provider,{value:c},b.createElement(Ig.Provider,{children:n,value:p}))}function db(t){let{children:e,location:n}=t;return WB(V_(e),n)}new Promise(()=>{});function V_(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,V_(r.props.children,i));return}r.type!==Re&&yn(!1),!r.props.index||!r.props.children||yn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=V_(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M_(){return M_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M_.apply(this,arguments)}function r6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function s6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i6(t,e){return t.button===0&&(!e||e==="_self")&&!s6(t)}function F_(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function o6(t,e){let n=F_(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const a6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],l6="6";try{window.__reactRouterVersion=l6}catch{}const c6="startTransition",gp=Uw[c6];function u6(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=pB({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&gp?gp(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>Sk(r),[r]),b.createElement(bk,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function d6(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=gB({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&gp?gp(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>Sk(r),[r]),b.createElement(bk,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const h6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m6=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=r6(e,a6),{basename:m}=b.useContext(aa),I,p=!1;if(typeof c=="string"&&f6.test(c)&&(I=c,h6))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),P=Z0(x.pathname,m);x.origin===w.origin&&P!=null?c=P+x.search+x.hash:p=!0}catch{}let y=BB(c,{relative:s}),_=p6(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(w){r&&r(w),w.defaultPrevented||_(w)}return b.createElement("a",M_({},f,{href:I||y,onClick:p||i?r:v,ref:n,target:l}))});var hb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hb||(hb={}));var fb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fb||(fb={}));function p6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Iu(),c=hi(),d=wk(t,{relative:o});return b.useCallback(h=>{if(i6(h,n)){h.preventDefault();let f=r!==void 0?r:ph(c)===ph(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function jY(t){let e=b.useRef(F_(t)),n=b.useRef(!1),r=hi(),s=b.useMemo(()=>o6(r.search,n.current?null:e.current),[r.search]),i=Iu(),o=b.useCallback((a,l)=>{const c=F_(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const Ak=b.createContext(void 0),g6=({children:t})=>{const[e,n]=b.useState("medium"),[r,s]=b.useState(!1),[i,o]=b.useState(!1);b.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),b.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),b.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return E.jsx(Ak.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},$Y=()=>{const t=b.useContext(Ak);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},y6=pC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),us=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?LF:"button";return E.jsx(o,{className:ir(y6({variant:e,size:n,className:t})),ref:i,...s})});us.displayName="Button";const U_=b.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),E.jsx("input",{type:e,className:ir("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});U_.displayName="Input";const v6=()=>{};var mb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new w6;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const I=c<<6&192|h;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E6=function(t){const e=xk(t);return rE.encodeByteArray(e,!0)},yp=function(t){return E6(t).replace(/\./g,"")},Rk=function(t){try{return rE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=()=>Pk().__FIREBASE_DEFAULTS__,T6=()=>{if(typeof process>"u"||typeof mb>"u")return;const t=mb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rk(t[1]);return e&&JSON.parse(e)},Tg=()=>{try{return v6()||I6()||T6()||S6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b6=t=>{var e,n;return(n=(e=Tg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},sE=t=>{const e=b6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ck=()=>{var t;return(t=Tg())==null?void 0:t.config},A6=t=>{var e;return(e=Tg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yp(JSON.stringify(n)),yp(JSON.stringify(o)),""].join(".")}const Dd={};function x6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Dd))Dd[e]?t.emulator.push(e):t.prod.push(e);return t}function R6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let pb=!1;function iE(t,e){if(typeof window>"u"||typeof document>"u"||!fi(window.location.host)||Dd[t]===e||Dd[t]||pb)return;Dd[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=x6().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{pb=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=R6(r),m=n("text"),I=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),y=document.getElementById(p)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),d(y,p);const x=c();l(v,_),w.append(v,I,y,x),document.body.appendChild(w)}i?(I.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function Dk(){var e;const t=(e=Tg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N6(){const t=or();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nk(){return!Dk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ok(){return!Dk()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function oE(){try{return typeof indexedDB=="object"}catch{return!1}}function O6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="FirebaseError";class Us extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=L6,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?V6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Us(s,a,r)}}function V6(t,e){return t.replace(M6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const M6=/\{\$([^}]+)}/g;function Vi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(gb(i)&&gb(o)){if(!Vi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function gb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function md(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function pd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function F6(t,e){const n=new U6(t,e);return n.subscribe.bind(n)}class U6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");j6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qy),s.error===void 0&&(s.error=Qy),s.complete===void 0&&(s.complete=Qy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BY=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class Ms{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new j_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z6(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B6(t){return t===Aa?void 0:t}function z6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const q6={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},H6=ut.INFO,K6={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},G6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=K6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bg{constructor(e){this.name=e,this._logLevel=H6,this._logHandler=G6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const Q6=(t,e)=>e.some(n=>t instanceof n);let yb,vb;function Y6(){return yb||(yb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J6(){return vb||(vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vk=new WeakMap,$_=new WeakMap,Mk=new WeakMap,Yy=new WeakMap,aE=new WeakMap;function X6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Uo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Vk.set(n,t)}).catch(()=>{}),aE.set(e,t),e}function Z6(t){if($_.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$_.set(t,e)}let B_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function e5(t){B_=t(B_)}function t5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jy(this),e,...n);return Mk.set(r,e.sort?e.sort():[e]),Uo(r)}:J6().includes(t)?function(...e){return t.apply(Jy(this),e),Uo(Vk.get(this))}:function(...e){return Uo(t.apply(Jy(this),e))}}function n5(t){return typeof t=="function"?t5(t):(t instanceof IDBTransaction&&Z6(t),Q6(t,Y6())?new Proxy(t,B_):t)}function Uo(t){if(t instanceof IDBRequest)return X6(t);if(Yy.has(t))return Yy.get(t);const e=n5(t);return e!==t&&(Yy.set(t,e),aE.set(e,t)),e}const Jy=t=>aE.get(t);function r5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Uo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Uo(o.result),l.oldVersion,l.newVersion,Uo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const s5=["get","getKey","getAll","getAllKeys","count"],i5=["put","add","delete","clear"],Xy=new Map;function _b(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xy.get(e))return Xy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=i5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||s5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Xy.set(e,i),i}e5(t=>({...t,get:(e,n,r)=>_b(e,n)||t.get(e,n,r),has:(e,n)=>!!_b(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(a5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function a5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const z_="@firebase/app",wb="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new bg("@firebase/app"),l5="@firebase/app-compat",c5="@firebase/analytics-compat",u5="@firebase/analytics",d5="@firebase/app-check-compat",h5="@firebase/app-check",f5="@firebase/auth",m5="@firebase/auth-compat",p5="@firebase/database",g5="@firebase/data-connect",y5="@firebase/database-compat",v5="@firebase/functions",_5="@firebase/functions-compat",w5="@firebase/installations",E5="@firebase/installations-compat",I5="@firebase/messaging",T5="@firebase/messaging-compat",S5="@firebase/performance",b5="@firebase/performance-compat",A5="@firebase/remote-config",x5="@firebase/remote-config-compat",R5="@firebase/storage",P5="@firebase/storage-compat",C5="@firebase/firestore",k5="@firebase/ai",D5="@firebase/firestore-compat",N5="firebase",O5="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="[DEFAULT]",L5={[z_]:"fire-core",[l5]:"fire-core-compat",[u5]:"fire-analytics",[c5]:"fire-analytics-compat",[h5]:"fire-app-check",[d5]:"fire-app-check-compat",[f5]:"fire-auth",[m5]:"fire-auth-compat",[p5]:"fire-rtdb",[g5]:"fire-data-connect",[y5]:"fire-rtdb-compat",[v5]:"fire-fn",[_5]:"fire-fn-compat",[w5]:"fire-iid",[E5]:"fire-iid-compat",[I5]:"fire-fcm",[T5]:"fire-fcm-compat",[S5]:"fire-perf",[b5]:"fire-perf-compat",[A5]:"fire-rc",[x5]:"fire-rc-compat",[R5]:"fire-gcs",[P5]:"fire-gcs-compat",[C5]:"fire-fst",[D5]:"fire-fst-compat",[k5]:"fire-vertex","fire-js":"fire-js",[N5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Map,V5=new Map,W_=new Map;function Eb(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(W_.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;W_.set(e,t);for(const n of _p.values())Eb(n,t);for(const n of V5.values())Eb(n,t);return!0}function Su(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function M5(t,e,n=vp){Su(t,e).clearInstance(n)}function Yr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jo=new Tu("app","Firebase",F5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=O5;function Fk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:vp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw jo.create("bad-app-name",{appName:String(s)});if(n||(n=Ck()),!n)throw jo.create("no-options");const i=_p.get(s);if(i){if(Vi(n,i.options)&&Vi(r,i.config))return i;throw jo.create("duplicate-app",{appName:s})}const o=new W6(s);for(const l of W_.values())o.addComponent(l);const a=new U5(n,r,o);return _p.set(s,a),a}function lE(t=vp){const e=_p.get(t);if(!e&&t===vp&&Ck())return Fk();if(!e)throw jo.create("no-app",{appName:t});return e}function ns(t,e,n){let r=L5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(o.join(" "));return}ci(new Ms(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="firebase-heartbeat-database",$5=1,yh="firebase-heartbeat-store";let Zy=null;function Uk(){return Zy||(Zy=r5(j5,$5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yh)}catch(n){console.warn(n)}}}}).catch(t=>{throw jo.create("idb-open",{originalErrorMessage:t.message})})),Zy}async function B5(t){try{const n=(await Uk()).transaction(yh),r=await n.objectStore(yh).get(jk(t));return await n.done,r}catch(e){if(e instanceof Us)Mi.warn(e.message);else{const n=jo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(n.message)}}}async function Ib(t,e){try{const r=(await Uk()).transaction(yh,"readwrite");await r.objectStore(yh).put(e,jk(t)),await r.done}catch(n){if(n instanceof Us)Mi.warn(n.message);else{const r=jo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mi.warn(r.message)}}}function jk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=1024,W5=30;class q5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Tb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>W5){const o=G5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tb(),{heartbeatsToSend:r,unsentEntries:s}=H5(this._heartbeatsCache.heartbeats),i=yp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Mi.warn(n),""}}}function Tb(){return new Date().toISOString().substring(0,10)}function H5(t,e=z5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Sb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Sb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oE()?O6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sb(t){return yp(JSON.stringify({version:2,heartbeats:t})).length}function G5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){ci(new Ms("platform-logger",e=>new o5(e),"PRIVATE")),ci(new Ms("heartbeat",e=>new q5(e),"PRIVATE")),ns(z_,wb,t),ns(z_,wb,"esm2020"),ns("fire-js","")}Q5("");function $k(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y5=$k,Bk=new Tu("auth","Firebase",$k());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=new bg("@firebase/auth");function J5(t,...e){wp.logLevel<=ut.WARN&&wp.warn(`Auth (${Wh}): ${t}`,...e)}function _m(t,...e){wp.logLevel<=ut.ERROR&&wp.error(`Auth (${Wh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t,...e){throw uE(t,...e)}function cE(t,...e){return uE(t,...e)}function zk(t,e,n){const r={...Y5(),[e]:n};return new Tu("auth","Firebase",r).create(e,{appName:t.name})}function $o(t){return zk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Bk.create(t,...e)}function dt(t,e,...n){if(!t)throw uE(e,...n)}function Si(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _m(e),new Error(e)}function Ep(t,e){t||Si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Wk(){return bb()==="http:"||bb()==="https:"}function bb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wk()||k6()||"connection"in navigator)?navigator.onLine:!0}function e9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ep(n>e,"Short delay should be less than long delay!"),this.isMobile=P6()||D6()}get(){return Z5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(t,e){Ep(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s9=new qh(3e4,6e4);function Bi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function mi(t,e,n,r,s={}){return Hk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Lk({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return C6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&fi(t.emulatorConfig.host)&&(c.credentials="include"),qk.fetch()(await Kk(t,t.config.apiHost,n,a),c)})}async function Hk(t,e,n){t._canInitEmulator=!1;const r={...n9,...e};try{const s=new o9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Uf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Uf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Uf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zk(t,d,c);ll(t,d)}}catch(s){if(s instanceof Us)throw s;ll(t,"network-request-failed",{message:String(s)})}}async function Ag(t,e,n,r,s={}){const i=await mi(t,e,n,r,s);return"mfaPendingCredential"in i&&ll(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Kk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?t9(t.config,s):`${t.config.apiScheme}://${s}`;return r9.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function i9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class o9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cE(this.auth,"network-request-failed")),s9.get())})}}function Uf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cE(t,e,r);return s.customData._tokenResponse=n,s}function Ab(t){return t!==void 0&&t.enterprise!==void 0}class a9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return i9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function l9(t,e){return mi(t,"GET","/v2/recaptchaConfig",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(t,e){return mi(t,"POST","/v1/accounts:delete",e)}async function Ip(t,e){return mi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u9(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=dE(r);dt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Nd(ev(s.auth_time)),issuedAtTime:Nd(ev(s.iat)),expirationTime:Nd(ev(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ev(t){return Number(t)*1e3}function dE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _m("JWT malformed, contained fewer than 3 sections"),null;try{const s=Rk(n);return s?JSON.parse(s):(_m("Failed to decode base64 JWT payload"),null)}catch(s){return _m("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xb(t){const e=dE(t);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Us&&d9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function d9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nd(this.lastLoginAt),this.creationTime=Nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await vh(t,Ip(e,{idToken:n}));dt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?Gk(s.providerUserInfo):[],o=m9(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new q_(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function f9(t){const e=it(t);await Tp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Gk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e){const n=await Hk(t,{},async()=>{const r=Lk({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Kk(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&fi(t.emulatorConfig.host)&&(l.credentials="include"),qk.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function g9(t,e){return mi(t,"POST","/v2/accounts:revokeToken",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const n=xb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await p9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ec;return r&&(dt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(dt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(dt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ec,this.toJSON())}_performRefresh(){return Si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e){dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ps{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new h9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new q_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vh(this,this.stsTokenManager.getToken(this.auth,e));return dt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return u9(this,e)}reload(){return f9(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ps({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await vh(this,c9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:I,stsTokenManager:p}=n;dt(h&&p,e,"internal-error");const y=Ec.fromJSON(this.name,p);dt(typeof h=="string",e,"internal-error"),ro(r,e.name),ro(s,e.name),dt(typeof f=="boolean",e,"internal-error"),dt(typeof m=="boolean",e,"internal-error"),ro(i,e.name),ro(o,e.name),ro(a,e.name),ro(l,e.name),ro(c,e.name),ro(d,e.name);const _=new Ps({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:y,createdAt:c,lastLoginAt:d});return I&&Array.isArray(I)&&(_.providerData=I.map(v=>({...v}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ec;s.updateFromServerResponse(n);const i=new Ps({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];dt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Gk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ec;a.updateFromIdToken(r);const l=new Ps({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new q_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=new Map;function $a(t){Ep(t instanceof Function,"Expected a class definition");let e=Rb.get(t);return e?(Ep(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qk.type="NONE";const H_=Qk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){return`firebase:${t}:${e}:${n}`}class Ic{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=tv(this.userKey,s.apiKey,i),this.fullPersistenceKey=tv("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ip(this.auth,{idToken:e}).catch(()=>{});return n?Ps._fromGetAccountInfoResponse(this.auth,n,e):null}return Ps._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ic($a(H_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||$a(H_);const o=tv(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Ip(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Ps._fromGetAccountInfoResponse(e,f,d)}else h=Ps._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ic(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ic(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xk(e))return"Blackberry";if(Zk(e))return"Webos";if(v9(e))return"Safari";if((e.includes("chrome/")||_9(e))&&!e.includes("edge/"))return"Chrome";if(Jk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function y9(t=or()){return/firefox\//i.test(t)}function v9(t=or()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _9(t=or()){return/crios\//i.test(t)}function Yk(t=or()){return/iemobile/i.test(t)}function Jk(t=or()){return/android/i.test(t)}function Xk(t=or()){return/blackberry/i.test(t)}function Zk(t=or()){return/webos/i.test(t)}function w9(t=or()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function E9(){return N6()&&document.documentMode===10}function I9(t=or()){return w9(t)||Jk(t)||Zk(t)||Xk(t)||/windows phone/i.test(t)||Yk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e=[]){let n;switch(t){case"Browser":n=Pb(or());break;case"Worker":n=`${Pb(or())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(t,e={}){return mi(t,"GET","/v2/passwordPolicy",Bi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=6;class A9{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??b9,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cb(this),this.idTokenSubscription=new Cb(this),this.beforeStateQueue=new T9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$a(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ic.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ip(this,{idToken:e}),r=await Ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject($o(this));const n=e?it(e):null;return n&&dt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yr(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await S9(this),n=new A9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await g9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$a(e)||this._popupRedirectResolver;dt(n,this,"argument-error"),this.redirectPersistenceManager=await Ic.create(this,[$a(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&J5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function bu(t){return it(t)}class Cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=F6(n=>this.observer=n)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R9(t){hE=t}function P9(t){return hE.loadJS(t)}function C9(){return hE.recaptchaEnterpriseScript}class k9{constructor(){this.enterprise=new D9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class D9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const N9="recaptcha-enterprise",tD="NO_RECAPTCHA";class O9{constructor(e){this.type=N9,this.auth=bu(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{l9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new a9(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Ab(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(tD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new k9().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Ab(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=C9();l.length!==0&&(l+=a),P9(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function kb(t,e,n,r=!1,s=!1){const i=new O9(t);let o;if(s)o=tD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Sp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await kb(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await kb(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t,e){const n=Su(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Vi(i,e??{}))return s;ll(s,"already-initialized")}return n.initialize({options:e})}function V9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($a);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Si("not implemented")}_getIdTokenResponse(e){return Si("not implemented")}_linkToIdToken(e,n){return Si("not implemented")}_getReauthenticationResolver(e){return Si("not implemented")}}async function F9(t,e){return mi(t,"POST","/v1/accounts:update",e)}async function U9(t,e){return mi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e){return Ag(t,"POST","/v1/accounts:signInWithPassword",Bi(t,e))}async function $9(t,e){return mi(t,"POST","/v1/accounts:sendOobCode",Bi(t,e))}async function B9(t,e){return $9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(t,e){return Ag(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))}async function W9(t,e){return Ag(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends M9{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new _h(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _h(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,n,"signInWithPassword",j9);case"emailLink":return z9(e,{email:this._email,oobCode:this._password});default:ll(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,r,"signUpPassword",U9);case"emailLink":return W9(e,{idToken:n,email:this._email,oobCode:this._password});default:ll(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function H9(t){const e=md(pd(t)).link,n=e?md(pd(e)).deep_link_id:null,r=md(pd(t)).deep_link_id;return(r?md(pd(r)).link:null)||r||n||e||t}class fE{constructor(e){const n=md(pd(e)),r=n.apiKey??null,s=n.oobCode??null,i=q9(n.mode??null);dt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=H9(e);try{return new fE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(){this.providerId=Au.PROVIDER_ID}static credential(e,n){return _h._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fE.parseLink(n);return dt(r,"argument-error"),_h._fromEmailAndCode(e,r.code,r.tenantId)}}Au.PROVIDER_ID="password";Au.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Au.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K9(t,e){return Ag(t,"POST","/v1/accounts:signUp",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ps._fromIdTokenResponse(e,r,s),o=Db(r);return new zc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Db(r);return new zc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Db(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends Us{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bp(e,n,r,s)}}function nD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bp._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9(t,e,n=!1){const{auth:r}=t;if(Yr(r.app))return Promise.reject($o(r));const s="reauthenticate";try{const i=await vh(t,nD(r,s,e,t),n);dt(i.idToken,r,"internal-error");const o=dE(i.idToken);dt(o,r,"internal-error");const{sub:a}=o;return dt(t.uid===a,r,"user-mismatch"),zc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ll(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q9(t,e,n=!1){if(Yr(t.app))return Promise.reject($o(t));const r="signIn",s=await nD(t,r,e),i=await zc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Y9(t,e){return Q9(bu(t),e)}async function zY(t,e){return G9(it(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t){const e=bu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function J9(t,e,n){const r=bu(t);await Sp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",B9)}async function Nb(t,e,n){if(Yr(t.app))return Promise.reject($o(t));const r=bu(t),o=await Sp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",K9).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&rD(t),l}),a=await zc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function X9(t,e,n){return Yr(t.app)?Promise.reject($o(t)):Y9(it(t),Au.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z9(t,e){return mi(t,"POST","/v1/accounts:createAuthUri",Bi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(t,e){const n=Wk()?X5():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Z9(it(t),r);return s||[]}function WY(t,e){return tz(it(t),null,e)}async function tz(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await vh(t,F9(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(t,e){return it(t).setPersistence(e)}function rz(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function Ob(t){return it(t).signOut()}const Lb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lb,"1"),this.storage.removeItem(Lb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=1e3,iz=10;class iD extends sD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I9(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);E9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iz):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iD.type="LOCAL";const oD=iD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD extends sD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aD.type="SESSION";const oz=aD;new qh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new qh(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new qh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new qh(5e3,15e3);var Vb="@firebase/auth",Mb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cz(t){ci(new Ms("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;dt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eD(t)},c=new x9(r,s,i,l);return V9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ci(new Ms("auth-internal",e=>{const n=bu(e.getProvider("auth").getImmediate());return(r=>new az(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(Vb,Mb,lz(t)),ns(Vb,Mb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=5*60;A6("authIdTokenMaxAge");function dz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}R9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=cE("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cz("Browser");var hz="firebase",fz="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(hz,fz,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=new Map,pz={activated:!1,tokenObservers:[]},gz={initialized:!1,enabled:!1};function Fs(t){return mz.get(t)||{...pz}}function lD(){return gz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz="https://content-firebaseappcheck.googleapis.com/v1";const vz="exchangeDebugToken",Fb={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},qY=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new j_,this.pending.promise.catch(n=>{}),await wz(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new j_,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function wz(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ao=new Tu("appCheck","AppCheck",Ez);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){if(!Fs(t).activated)throw Ao.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw Ao.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw Ao.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Ao.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ao.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function dD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${yz}/projects/${n}/apps/${r}:${vz}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz="firebase-app-check-database",Tz=1,K_="firebase-app-check-store";let jf=null;function Sz(){return jf||(jf=new Promise((t,e)=>{try{const n=indexedDB.open(Iz,Tz);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Ao.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(K_,{keyPath:"compositeKey"})}}}catch(n){e(Ao.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),jf)}function bz(t,e){return Az(xz(t),e)}async function Az(t,e){const r=(await Sz()).transaction(K_,"readwrite"),i=r.objectStore(K_).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Ao.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function xz(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new bg("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e){return oE()?bz(t,e).catch(n=>{gd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(){return lD().enabled}async function fD(){const t=lD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz={error:"UNKNOWN_ERROR"};function Pz(t){return rE.encodeString(JSON.stringify(t),!1)}async function G_(t,e=!1,n=!1){const r=t.app;cD(r);const s=Fs(r);let i=s.token,o;if(i&&!yd(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(yd(c)?i=c:await nv(r,void 0))}if(!e&&i&&yd(i))return{token:i.token};let a=!1;if(hD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=uD(dD(r,await fD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await nv(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?gd.warn(c.message):n&&gd.error(c),rv(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Fs(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?gd.warn(c.message):n&&gd.error(c),o=c}let l;return i?o?yd(i)?l={token:i.token,internalError:o}:l=rv(o):(l={token:i.token},s.token=i,await nv(r,i)):l=rv(o),a&&Nz(r,l),l}async function Cz(t){const e=t.app;cD(e);const{provider:n}=Fs(e);if(hD()){const r=await fD(),{token:s}=await uD(dD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function kz(t,e,n,r){const{app:s}=t,i=Fs(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&yd(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),Ub(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Ub(t))}function mD(t,e){const n=Fs(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ub(t){const{app:e}=t,n=Fs(e);let r=n.tokenRefresher;r||(r=Dz(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Dz(t){const{app:e}=t;return new _z(async()=>{const n=Fs(e);let r;if(n.token?r=await G_(t,!0):r=await G_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Fs(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},Fb.RETRIAL_MIN_WAIT,Fb.RETRIAL_MAX_WAIT)}function Nz(t,e){const n=Fs(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function yd(t){return t.expireTimeMillis-Date.now()>0}function rv(t){return{token:Pz(Rz),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Fs(this.app);for(const n of e)mD(this.app,n.next);return Promise.resolve()}}function Lz(t,e){return new Oz(t,e)}function Vz(t){return{getToken:e=>G_(t,e),getLimitedUseToken:()=>Cz(t),addTokenListener:e=>kz(t,"INTERNAL",e),removeTokenListener:e=>mD(t.app,e)}}const Mz="@firebase/app-check",Fz="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz="app-check",jb="app-check-internal";function jz(){ci(new Ms(Uz,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Lz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(jb).initialize()})),ci(new Ms(jb,t=>{const e=t.getProvider("app-check").getImmediate();return Vz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ns(Mz,Fz)}jz();var $b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,pD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function R(){}R.prototype=S.prototype,A.F=S.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(C,N,O){for(var k=Array(arguments.length-2),z=2;z<arguments.length;z++)k[z-2]=arguments[z];return S.prototype[N].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,S,R){R||(R=0);const C=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)C[N]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(N=0;N<16;++N)C[N]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=A.g[0],R=A.g[1],N=A.g[2];let O=A.g[3],k;k=S+(O^R&(N^O))+C[0]+3614090360&4294967295,S=R+(k<<7&4294967295|k>>>25),k=O+(N^S&(R^N))+C[1]+3905402710&4294967295,O=S+(k<<12&4294967295|k>>>20),k=N+(R^O&(S^R))+C[2]+606105819&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(S^N&(O^S))+C[3]+3250441966&4294967295,R=N+(k<<22&4294967295|k>>>10),k=S+(O^R&(N^O))+C[4]+4118548399&4294967295,S=R+(k<<7&4294967295|k>>>25),k=O+(N^S&(R^N))+C[5]+1200080426&4294967295,O=S+(k<<12&4294967295|k>>>20),k=N+(R^O&(S^R))+C[6]+2821735955&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(S^N&(O^S))+C[7]+4249261313&4294967295,R=N+(k<<22&4294967295|k>>>10),k=S+(O^R&(N^O))+C[8]+1770035416&4294967295,S=R+(k<<7&4294967295|k>>>25),k=O+(N^S&(R^N))+C[9]+2336552879&4294967295,O=S+(k<<12&4294967295|k>>>20),k=N+(R^O&(S^R))+C[10]+4294925233&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(S^N&(O^S))+C[11]+2304563134&4294967295,R=N+(k<<22&4294967295|k>>>10),k=S+(O^R&(N^O))+C[12]+1804603682&4294967295,S=R+(k<<7&4294967295|k>>>25),k=O+(N^S&(R^N))+C[13]+4254626195&4294967295,O=S+(k<<12&4294967295|k>>>20),k=N+(R^O&(S^R))+C[14]+2792965006&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(S^N&(O^S))+C[15]+1236535329&4294967295,R=N+(k<<22&4294967295|k>>>10),k=S+(N^O&(R^N))+C[1]+4129170786&4294967295,S=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(S^R))+C[6]+3225465664&4294967295,O=S+(k<<9&4294967295|k>>>23),k=N+(S^R&(O^S))+C[11]+643717713&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^S&(N^O))+C[0]+3921069994&4294967295,R=N+(k<<20&4294967295|k>>>12),k=S+(N^O&(R^N))+C[5]+3593408605&4294967295,S=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(S^R))+C[10]+38016083&4294967295,O=S+(k<<9&4294967295|k>>>23),k=N+(S^R&(O^S))+C[15]+3634488961&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^S&(N^O))+C[4]+3889429448&4294967295,R=N+(k<<20&4294967295|k>>>12),k=S+(N^O&(R^N))+C[9]+568446438&4294967295,S=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(S^R))+C[14]+3275163606&4294967295,O=S+(k<<9&4294967295|k>>>23),k=N+(S^R&(O^S))+C[3]+4107603335&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^S&(N^O))+C[8]+1163531501&4294967295,R=N+(k<<20&4294967295|k>>>12),k=S+(N^O&(R^N))+C[13]+2850285829&4294967295,S=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(S^R))+C[2]+4243563512&4294967295,O=S+(k<<9&4294967295|k>>>23),k=N+(S^R&(O^S))+C[7]+1735328473&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^S&(N^O))+C[12]+2368359562&4294967295,R=N+(k<<20&4294967295|k>>>12),k=S+(R^N^O)+C[5]+4294588738&4294967295,S=R+(k<<4&4294967295|k>>>28),k=O+(S^R^N)+C[8]+2272392833&4294967295,O=S+(k<<11&4294967295|k>>>21),k=N+(O^S^R)+C[11]+1839030562&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^S)+C[14]+4259657740&4294967295,R=N+(k<<23&4294967295|k>>>9),k=S+(R^N^O)+C[1]+2763975236&4294967295,S=R+(k<<4&4294967295|k>>>28),k=O+(S^R^N)+C[4]+1272893353&4294967295,O=S+(k<<11&4294967295|k>>>21),k=N+(O^S^R)+C[7]+4139469664&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^S)+C[10]+3200236656&4294967295,R=N+(k<<23&4294967295|k>>>9),k=S+(R^N^O)+C[13]+681279174&4294967295,S=R+(k<<4&4294967295|k>>>28),k=O+(S^R^N)+C[0]+3936430074&4294967295,O=S+(k<<11&4294967295|k>>>21),k=N+(O^S^R)+C[3]+3572445317&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^S)+C[6]+76029189&4294967295,R=N+(k<<23&4294967295|k>>>9),k=S+(R^N^O)+C[9]+3654602809&4294967295,S=R+(k<<4&4294967295|k>>>28),k=O+(S^R^N)+C[12]+3873151461&4294967295,O=S+(k<<11&4294967295|k>>>21),k=N+(O^S^R)+C[15]+530742520&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^S)+C[2]+3299628645&4294967295,R=N+(k<<23&4294967295|k>>>9),k=S+(N^(R|~O))+C[0]+4096336452&4294967295,S=R+(k<<6&4294967295|k>>>26),k=O+(R^(S|~N))+C[7]+1126891415&4294967295,O=S+(k<<10&4294967295|k>>>22),k=N+(S^(O|~R))+C[14]+2878612391&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~S))+C[5]+4237533241&4294967295,R=N+(k<<21&4294967295|k>>>11),k=S+(N^(R|~O))+C[12]+1700485571&4294967295,S=R+(k<<6&4294967295|k>>>26),k=O+(R^(S|~N))+C[3]+2399980690&4294967295,O=S+(k<<10&4294967295|k>>>22),k=N+(S^(O|~R))+C[10]+4293915773&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~S))+C[1]+2240044497&4294967295,R=N+(k<<21&4294967295|k>>>11),k=S+(N^(R|~O))+C[8]+1873313359&4294967295,S=R+(k<<6&4294967295|k>>>26),k=O+(R^(S|~N))+C[15]+4264355552&4294967295,O=S+(k<<10&4294967295|k>>>22),k=N+(S^(O|~R))+C[6]+2734768916&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~S))+C[13]+1309151649&4294967295,R=N+(k<<21&4294967295|k>>>11),k=S+(N^(R|~O))+C[4]+4149444226&4294967295,S=R+(k<<6&4294967295|k>>>26),k=O+(R^(S|~N))+C[11]+3174756917&4294967295,O=S+(k<<10&4294967295|k>>>22),k=N+(S^(O|~R))+C[2]+718787259&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~S))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+O&4294967295}r.prototype.v=function(A,S){S===void 0&&(S=A.length);const R=S-this.blockSize,C=this.C;let N=this.h,O=0;for(;O<S;){if(N==0)for(;O<=R;)s(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<S;)if(C[N++]=A.charCodeAt(O++),N==this.blockSize){s(this,C),N=0;break}}else for(;O<S;)if(C[N++]=A[O++],N==this.blockSize){s(this,C),N=0;break}}this.h=N,this.o+=S},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)A[S++]=this.g[R]>>>C&255;return A};function i(A,S){var R=a;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=S(A)}function o(A,S){this.h=S;const R=[];let C=!0;for(let N=A.length-1;N>=0;N--){const O=A[N]|0;C&&O==S||(R[N]=O,C=!1)}this.g=R}var a={};function l(A){return-128<=A&&A<128?i(A,function(S){return new o([S|0],S<0?-1:0)}):new o([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(A<0)return y(c(-A));const S=[];let R=1;for(let C=0;A>=R;C++)S[C]=A/R|0,R*=4294967296;return new o(S,0)}function d(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return y(d(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(S,8));let C=h;for(let O=0;O<A.length;O+=8){var N=Math.min(8,A.length-O);const k=parseInt(A.substring(O,O+N),S);N<8?(N=c(Math.pow(S,N)),C=C.j(N).add(c(k))):(C=C.j(R),C=C.add(c(k)))}return C}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(p(this))return-y(this).m();let A=0,S=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);A+=(C>=0?C:4294967296+C)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I(this))return"0";if(p(this))return"-"+y(this).toString(A);const S=c(Math.pow(A,6));var R=this;let C="";for(;;){const N=x(R,S).g;R=_(R,N.j(S));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=N,I(R))return O+C;for(;O.length<6;)O="0"+O;C=O+C}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function I(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function p(A){return A.h==-1}t.l=function(A){return A=_(this,A),p(A)?-1:I(A)?0:1};function y(A){const S=A.g.length,R=[];for(let C=0;C<S;C++)R[C]=~A.g[C];return new o(R,~A.h).add(f)}t.abs=function(){return p(this)?y(this):this},t.add=function(A){const S=Math.max(this.g.length,A.g.length),R=[];let C=0;for(let N=0;N<=S;N++){let O=C+(this.i(N)&65535)+(A.i(N)&65535),k=(O>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);C=k>>>16,O&=65535,k&=65535,R[N]=k<<16|O}return new o(R,R[R.length-1]&-2147483648?-1:0)};function _(A,S){return A.add(y(S))}t.j=function(A){if(I(this)||I(A))return h;if(p(this))return p(A)?y(this).j(y(A)):y(y(this).j(A));if(p(A))return y(this.j(y(A)));if(this.l(m)<0&&A.l(m)<0)return c(this.m()*A.m());const S=this.g.length+A.g.length,R=[];for(var C=0;C<2*S;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let N=0;N<A.g.length;N++){const O=this.i(C)>>>16,k=this.i(C)&65535,z=A.i(N)>>>16,de=A.i(N)&65535;R[2*C+2*N]+=k*de,v(R,2*C+2*N),R[2*C+2*N+1]+=O*de,v(R,2*C+2*N+1),R[2*C+2*N+1]+=k*z,v(R,2*C+2*N+1),R[2*C+2*N+2]+=O*z,v(R,2*C+2*N+2)}for(A=0;A<S;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=S;A<2*S;A++)R[A]=0;return new o(R,0)};function v(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function w(A,S){this.g=A,this.h=S}function x(A,S){if(I(S))throw Error("division by zero");if(I(A))return new w(h,h);if(p(A))return S=x(y(A),S),new w(y(S.g),y(S.h));if(p(S))return S=x(A,y(S)),new w(y(S.g),S.h);if(A.g.length>30){if(p(A)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=S;C.l(A)<=0;)R=P(R),C=P(C);var N=L(R,1),O=L(C,1);for(C=L(C,2),R=L(R,2);!I(C);){var k=O.add(C);k.l(A)<=0&&(N=N.add(R),O=k),C=L(C,1),R=L(R,1)}return S=_(A,N.j(S)),new w(N,S)}for(N=h;A.l(S)>=0;){for(R=Math.max(1,Math.floor(A.m()/S.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),O=c(R),k=O.j(S);p(k)||k.l(A)>0;)R-=C,O=c(R),k=O.j(S);I(O)&&(O=f),N=N.add(O),A=_(A,k)}return new w(N,A)}t.B=function(A){return x(this,A).h},t.and=function(A){const S=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<S;C++)R[C]=this.i(C)&A.i(C);return new o(R,this.h&A.h)},t.or=function(A){const S=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<S;C++)R[C]=this.i(C)|A.i(C);return new o(R,this.h|A.h)},t.xor=function(A){const S=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<S;C++)R[C]=this.i(C)^A.i(C);return new o(R,this.h^A.h)};function P(A){const S=A.g.length+1,R=[];for(let C=0;C<S;C++)R[C]=A.i(C)<<1|A.i(C-1)>>>31;return new o(R,A.h)}function L(A,S){const R=S>>5;S%=32;const C=A.g.length-R,N=[];for(let O=0;O<C;O++)N[O]=S>0?A.i(O+R)>>>S|A.i(O+R+1)<<32-S:A.i(O+R);return new o(N,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Bo=o}).apply(typeof $b<"u"?$b:typeof self<"u"?self:typeof window<"u"?window:{});var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gD,vd,yD,wm,Q_,vD,_D,wD;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $f=="object"&&$f];for(var g=0;g<u.length;++g){var T=u[g];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var T=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var M=u[D];if(!(M in T))break e;T=T[M]}u=u[u.length-1],D=T[u],g=g(D),g!=D&&g!=null&&e(T,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var T=[],D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&T.push([D,g[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,T){return u.call.apply(u.bind,arguments)}function c(u,g,T){return c=l,c.apply(null,arguments)}function d(u,g){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function h(u,g){function T(){}T.prototype=g.prototype,u.Z=g.prototype,u.prototype=new T,u.prototype.constructor=u,u.Ob=function(D,M,B){for(var ye=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ye[Ze-2]=arguments[Ze];return g.prototype[M].apply(D,ye)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const T=Array(g);for(let D=0;D<g;D++)T[D]=u[D];return T}return[]}function I(u,g){for(let D=1;D<arguments.length;D++){const M=arguments[D];var T=typeof M;if(T=T!="object"?T:M?Array.isArray(M)?"array":T:"null",T=="array"||T=="object"&&typeof M.length=="number"){T=u.length||0;const B=M.length||0;u.length=T+B;for(let ye=0;ye<B;ye++)u[T+ye]=M[ye]}else u.push(M)}}class p{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function y(u){o.setTimeout(()=>{throw u},0)}function _(){var u=A;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class v{constructor(){this.h=this.g=null}add(g,T){const D=w.get();D.set(g,T),this.h?this.h.next=D:this.g=D,this.h=D}}var w=new p(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let P,L=!1,A=new v,S=()=>{const u=Promise.resolve(void 0);P=()=>{u.then(R)}};function R(){for(var u;u=_();){try{u.h.call(u.g)}catch(T){y(T)}var g=w;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const T=()=>{};o.addEventListener("test",T,g),o.removeEventListener("test",T,g)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function z(u,g){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(z,N),z.prototype.init=function(u,g){const T=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(T=="mouseover"?g=u.fromElement:T=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),fe=0;function Se(u,g,T,D,M){this.listener=u,this.proxy=null,this.src=g,this.type=T,this.capture=!!D,this.ha=M,this.key=++fe,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function W(u,g,T){for(const D in u)g.call(T,u[D],D,u)}function re(u,g){for(const T in u)g.call(void 0,u[T],T,u)}function we(u){const g={};for(const T in u)g[T]=u[T];return g}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,g){let T,D;for(let M=1;M<arguments.length;M++){D=arguments[M];for(T in D)u[T]=D[T];for(let B=0;B<Ee.length;B++)T=Ee[B],Object.prototype.hasOwnProperty.call(D,T)&&(u[T]=D[T])}}function _e(u){this.src=u,this.g={},this.h=0}_e.prototype.add=function(u,g,T,D,M){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const ye=Ge(u,g,D,M);return ye>-1?(g=u[ye],T||(g.fa=!1)):(g=new Se(g,this.src,B,!!D,M),g.fa=T,u.push(g)),g};function j(u,g){const T=g.type;if(T in u.g){var D=u.g[T],M=Array.prototype.indexOf.call(D,g,void 0),B;(B=M>=0)&&Array.prototype.splice.call(D,M,1),B&&($(g),u.g[T].length==0&&(delete u.g[T],u.h--))}}function Ge(u,g,T,D){for(let M=0;M<u.length;++M){const B=u[M];if(!B.da&&B.listener==g&&B.capture==!!T&&B.ha==D)return M}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),xn={};function Fn(u,g,T,D,M){if(Array.isArray(g)){for(let B=0;B<g.length;B++)Fn(u,g[B],T,D,M);return null}return T=Un(T),u&&u[de]?u.J(g,T,a(D)?!!D.capture:!1,M):_n(u,g,T,!1,D,M)}function _n(u,g,T,D,M,B){if(!g)throw Error("Invalid event type");const ye=a(M)?!!M.capture:!!M;let Ze=ar(u);if(Ze||(u[Me]=Ze=new _e(u)),T=Ze.add(g,T,D,ye,B),T.proxy)return T;if(D=wn(),T.proxy=D,D.src=u,D.listener=T,u.addEventListener)O||(M=ye),M===void 0&&(M=!1),u.addEventListener(g.toString(),D,M);else if(u.attachEvent)u.attachEvent(ft(g.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function wn(){function u(T){return g.call(u.src,u.listener,T)}const g=at;return u}function Rn(u,g,T,D,M){if(Array.isArray(g))for(var B=0;B<g.length;B++)Rn(u,g[B],T,D,M);else D=a(D)?!!D.capture:!!D,T=Un(T),u&&u[de]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],T=Ge(g,T,D,M),T>-1&&($(g[T]),Array.prototype.splice.call(g,T,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=ar(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ge(g,T,D,M)),(T=u>-1?g[u]:null)&&Ct(T))}function Ct(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[de])j(g.i,u);else{var T=u.type,D=u.proxy;g.removeEventListener?g.removeEventListener(T,D,u.capture):g.detachEvent?g.detachEvent(ft(T),D):g.addListener&&g.removeListener&&g.removeListener(D),(T=ar(g))?(j(T,u),T.h==0&&(T.src=null,g[Me]=null)):$(u)}}}function ft(u){return u in xn?xn[u]:xn[u]="on"+u}function at(u,g){if(u.da)u=!0;else{g=new z(g,this);const T=u.listener,D=u.ha||u.src;u.fa&&Ct(u),u=T.call(D,g)}return u}function ar(u){return u=u[Me],u instanceof _e?u:null}var lr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Un(u){return typeof u=="function"?u:(u[lr]||(u[lr]=function(g){return u.handleEvent(g)}),u[lr])}function wt(){C.call(this),this.i=new _e(this),this.M=this,this.G=null}h(wt,C),wt.prototype[de]=!0,wt.prototype.removeEventListener=function(u,g,T,D){Rn(this,u,g,T,D)};function an(u,g){var T,D=u.G;if(D)for(T=[];D;D=D.G)T.push(D);if(u=u.M,D=g.type||g,typeof g=="string")g=new N(g,u);else if(g instanceof N)g.target=g.target||u;else{var M=g;g=new N(D,u),se(g,M)}M=!0;let B,ye;if(T)for(ye=T.length-1;ye>=0;ye--)B=g.g=T[ye],M=xr(B,D,!0,g)&&M;if(B=g.g=u,M=xr(B,D,!0,g)&&M,M=xr(B,D,!1,g)&&M,T)for(ye=0;ye<T.length;ye++)B=g.g=T[ye],M=xr(B,D,!1,g)&&M}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const T=u.g[g];for(let D=0;D<T.length;D++)$(T[D]);delete u.g[g],u.h--}}this.G=null},wt.prototype.J=function(u,g,T,D){return this.i.add(String(u),g,!1,T,D)},wt.prototype.K=function(u,g,T,D){return this.i.add(String(u),g,!0,T,D)};function xr(u,g,T,D){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let M=!0;for(let B=0;B<g.length;++B){const ye=g[B];if(ye&&!ye.da&&ye.capture==T){const Ze=ye.listener,Dn=ye.ha||ye.src;ye.fa&&j(u.i,ye),M=Ze.call(Dn,D)!==!1&&M}}return M&&!D.defaultPrevented}function Ki(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Rr(u){u.g=Ki(()=>{u.g=null,u.i&&(u.i=!1,Rr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ya extends C{constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(u){C.call(this),this.h=u,this.g={}}h(_s,C);var Pn=[];function ls(u){W(u.g,function(g,T){this.g.hasOwnProperty(T)&&Ct(g)},u),u.g={}}_s.prototype.N=function(){_s.Z.N.call(this),ls(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var va=o.JSON.stringify,Gi=o.JSON.parse,Yt=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function _a(){}function Qi(){}var Pr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cs(){N.call(this,"d")}h(cs,N);function pi(){N.call(this,"c")}h(pi,N);var Yn={},G=null;function H(){return G=G||new wt}Yn.Ia="serverreachability";function q(u){N.call(this,Yn.Ia,u)}h(q,N);function ie(u){const g=H();an(g,new q(g))}Yn.STAT_EVENT="statevent";function ee(u,g){N.call(this,Yn.STAT_EVENT,u),this.stat=g}h(ee,N);function Z(u){const g=H();an(g,new ee(g,u))}Yn.Ja="timingevent";function ue(u,g){N.call(this,Yn.Ja,u),this.size=g}h(ue,N);function ce(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function J(){this.g=!0}J.prototype.ua=function(){this.g=!1};function oe(u,g,T,D,M,B){u.info(function(){if(u.g)if(B){var ye="",Ze=B.split("&");for(let kt=0;kt<Ze.length;kt++){var Dn=Ze[kt].split("=");if(Dn.length>1){const $n=Dn[0];Dn=Dn[1];const $s=$n.split("_");ye=$s.length>=2&&$s[1]=="type"?ye+($n+"="+Dn+"&"):ye+($n+"=redacted&")}}}else ye=null;else ye=B;return"XMLHTTP REQ ("+D+") [attempt "+M+"]: "+g+`
`+T+`
`+ye})}function X(u,g,T,D,M,B,ye){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+M+"]: "+g+`
`+T+`
`+B+" "+ye})}function ae(u,g,T,D){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+pe(u,T)+(D?" "+D:"")})}function ve(u,g){u.info(function(){return"TIMEOUT: "+g})}J.prototype.info=function(){};function pe(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var T=B[u];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(let ye=1;ye<D.length;ye++)D[ye]=""}}}}return va(B)}catch{return g}}var ge={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qe;function Cn(){}h(Cn,_a),Cn.prototype.g=function(){return new XMLHttpRequest},qe=new Cn;function ln(u){return encodeURIComponent(String(u))}function He(u){var g=1;u=u.split(":");const T=[];for(;g>0&&u.length;)T.push(u.shift()),g--;return u.length&&T.push(u.join(":")),T}function Ue(u,g,T,D){this.j=u,this.i=g,this.l=T,this.S=D||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}var Jn={},mt={};function Nt(u,g,T){u.M=1,u.A=Xe(un(g)),u.u=T,u.R=!0,Rt(u,null)}function Rt(u,g){u.F=Date.now(),gt(u),u.B=un(u.A);var T=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),$I(T.i,"t",D),u.C=0,T=u.j.L,u.h=new Oe,u.g=iT(u.j,T?g:null,!u.u),u.P>0&&(u.O=new ya(c(u.Y,u,u.g),u.P)),g=u.V,T=u.g,D=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(Pn[0]=M.toString()),M=Pn);for(let B=0;B<M.length;B++){const ye=Fn(T,M[B],D||g.handleEvent,!1,g.h||g);if(!ye)break;g.g[ye.key]=ye}g=u.J?we(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ie(),oe(u.i,u.v,u.B,u.l,u.S,u.u)}Ue.prototype.ba=function(u){u=u.target;const g=this.O;g&&Ji(u)==3?g.j():this.Y(u)},Ue.prototype.Y=function(u){try{if(u==this.g)e:{const Ze=Ji(this.g),Dn=this.g.ya(),kt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||GI(this.g)))){this.K||Ze!=4||Dn==7||(Dn==8||kt<=0?ie(3):ie(2)),It(this);var g=this.g.ca();this.X=g;var T=Be(this);if(this.o=g==200,X(this.i,this.v,this.B,this.l,this.S,Ze,g),this.o){if(this.U&&!this.L){t:{if(this.g){var D,M=this.g;if((D=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(D)){var B=D;break t}}B=null}if(u=B)ae(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xe(this,u);else{this.o=!1,this.m=3,Z(12),Tt(this),En(this);break e}}if(this.R){u=!0;let $n;for(;!this.K&&this.C<T.length;)if($n=Pe(this,T),$n==mt){Ze==4&&(this.m=4,Z(14),u=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Jn){this.m=4,Z(15),ae(this.i,this.l,T,"[Invalid Chunk]"),u=!1;break}else ae(this.i,this.l,$n,null),xe(this,$n);if(je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||T.length!=0||this.h.h||(this.m=1,Z(16),u=!1),this.o=this.o&&u,!u)ae(this.i,this.l,T,"[Invalid Chunked Response]"),Tt(this),En(this);else if(T.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),uy(ye),ye.P=!0,Z(11))}}else ae(this.i,this.l,T,null),xe(this,T);Ze==4&&Tt(this),this.o&&!this.K&&(Ze==4?tT(this.j,this):(this.o=!1,gt(this)))}else YL(this.g),g==400&&T.indexOf("Unknown SID")>0?(this.m=3,Z(12)):(this.m=0,Z(13)),Tt(this),En(this)}}}catch{}finally{}};function Be(u){if(!je(u))return u.g.la();const g=GI(u.g);if(g==="")return"";let T="";const D=g.length,M=Ji(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Tt(u),En(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<D;B++)u.h.h=!0,T+=u.h.i.decode(g[B],{stream:!(M&&B==D-1)});return g.length=0,u.h.g+=T,u.C=0,u.h.g}function je(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Pe(u,g){var T=u.C,D=g.indexOf(`
`,T);return D==-1?mt:(T=Number(g.substring(T,D)),isNaN(T)?Jn:(D+=1,D+T>g.length?mt:(g=g.slice(D,D+T),u.C=D+T,g)))}Ue.prototype.cancel=function(){this.K=!0,Tt(this)};function gt(u){u.T=Date.now()+u.H,Wt(u,u.H)}function Wt(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ce(c(u.aa,u),g)}function It(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ue.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ve(this.i,this.B),this.M!=2&&(ie(),Z(17)),Tt(this),this.m=2,En(this)):Wt(this,this.T-u)};function En(u){u.j.I==0||u.K||tT(u.j,u)}function Tt(u){It(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,ls(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function xe(u,g){try{var T=u.j;if(T.I!=0&&(T.g==u||Qe(T.h,u))){if(!u.L&&Qe(T.h,u)&&T.I==3){try{var D=T.Ba.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var M=D;if(M[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<u.F)ff(T),df(T);else break e;cy(T),Z(18)}}else T.xa=M[1],0<T.xa-T.K&&M[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ce(c(T.Va,T),6e3));lt(T.h)<=1&&T.ta&&(T.ta=void 0)}else Ea(T,11)}else if((u.L||T.g==u)&&ff(T),!k(g))for(M=T.Ba.g.parse(g),g=0;g<M.length;g++){let kt=M[g];const $n=kt[0];if(!($n<=T.K))if(T.K=$n,kt=kt[1],T.I==2)if(kt[0]=="c"){T.M=kt[1],T.ba=kt[2];const $s=kt[3];$s!=null&&(T.ka=$s,T.j.info("VER="+T.ka));const Ia=kt[4];Ia!=null&&(T.za=Ia,T.j.info("SVER="+T.za));const Xi=kt[5];Xi!=null&&typeof Xi=="number"&&Xi>0&&(D=1.5*Xi,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Zi=u.g;if(Zi){const pf=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pf){var B=D.h;B.g||pf.indexOf("spdy")==-1&&pf.indexOf("quic")==-1&&pf.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(cn(B,B.h),B.h=null))}if(D.G){const dy=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;dy&&(D.wa=dy,ct(D.J,D.G,dy))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-u.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var ye=u;if(D.na=sT(D,D.L?D.ba:null,D.W),ye.L){Xn(D.h,ye);var Ze=ye,Dn=D.O;Dn&&(Ze.H=Dn),Ze.D&&(It(Ze),gt(Ze)),D.g=ye}else ZI(D);T.i.length>0&&hf(T)}else kt[0]!="stop"&&kt[0]!="close"||Ea(T,7);else T.I==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Ea(T,7):ly(T):kt[0]!="noop"&&T.l&&T.l.qa(kt),T.A=0)}}ie(4)}catch{}}var tt=class{constructor(u,g){this.g=u,this.map=g}};function et(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Et(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function lt(u){return u.h?1:u.g?u.g.size:0}function Qe(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function cn(u,g){u.g?u.g.add(g):u.h=g}function Xn(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}et.prototype.cancel=function(){if(this.i=jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const T of u.g.values())g=g.concat(T.G);return g}return m(u.i)}var Ye=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jt(u,g){if(u){u=u.split("&");for(let T=0;T<u.length;T++){const D=u[T].indexOf("=");let M,B=null;D>=0?(M=u[T].substring(0,D),B=u[T].substring(D+1)):M=u[T],g(M,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Xt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Xt?(this.l=u.l,Cr(this,u.j),this.o=u.o,this.g=u.g,kn(this,u.u),this.h=u.h,In(this,BI(u.i)),this.m=u.m):u&&(g=String(u).match(Ye))?(this.l=!1,Cr(this,g[1]||"",!0),this.o=kr(g[2]||""),this.g=kr(g[3]||"",!0),kn(this,g[4]),this.h=kr(g[5]||"",!0),In(this,g[6]||"",!0),this.m=kr(g[7]||"")):(this.l=!1,this.i=new Bu(null,this.l))}Xt.prototype.toString=function(){const u=[];var g=this.j;g&&u.push($u(g,MI,!0),":");var T=this.g;return(T||g=="file")&&(u.push("//"),(g=this.o)&&u.push($u(g,MI,!0),"@"),u.push(ln(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&u.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&u.push("/"),u.push($u(T,T.charAt(0)=="/"?$L:jL,!0))),(T=this.i.toString())&&u.push("?",T),(T=this.m)&&u.push("#",$u(T,zL)),u.join("")},Xt.prototype.resolve=function(u){const g=un(this);let T=!!u.j;T?Cr(g,u.j):T=!!u.o,T?g.o=u.o:T=!!u.g,T?g.g=u.g:T=u.u!=null;var D=u.h;if(T)kn(g,u.u);else if(T=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var M=g.h.lastIndexOf("/");M!=-1&&(D=g.h.slice(0,M+1)+D)}if(M=D,M==".."||M==".")D="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){D=M.lastIndexOf("/",0)==0,M=M.split("/");const B=[];for(let ye=0;ye<M.length;){const Ze=M[ye++];Ze=="."?D&&ye==M.length&&B.push(""):Ze==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),D&&ye==M.length&&B.push("")):(B.push(Ze),D=!0)}D=B.join("/")}else D=M}return T?g.h=D:T=u.i.toString()!=="",T?In(g,BI(u.i)):T=!!u.m,T&&(g.m=u.m),g};function un(u){return new Xt(u)}function Cr(u,g,T){u.j=T?kr(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function kn(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function In(u,g,T){g instanceof Bu?(u.i=g,WL(u.i,u.l)):(T||(g=$u(g,BL)),u.i=new Bu(g,u.l))}function ct(u,g,T){u.i.set(g,T)}function Xe(u){return ct(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function kr(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $u(u,g,T){return typeof u=="string"?(u=encodeURI(u).replace(g,UL),T&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function UL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var MI=/[#\/\?@]/g,jL=/[#\?:]/g,$L=/[#\?]/g,BL=/[#\?@]/g,zL=/#/g;function Bu(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function wa(u){u.g||(u.g=new Map,u.h=0,u.i&&Jt(u.i,function(g,T){u.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}t=Bu.prototype,t.add=function(u,g){wa(this),this.i=null,u=Cl(this,u);let T=this.g.get(u);return T||this.g.set(u,T=[]),T.push(g),this.h+=1,this};function FI(u,g){wa(u),g=Cl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function UI(u,g){return wa(u),g=Cl(u,g),u.g.has(g)}t.forEach=function(u,g){wa(this),this.g.forEach(function(T,D){T.forEach(function(M){u.call(g,M,D,this)},this)},this)};function jI(u,g){wa(u);let T=[];if(typeof g=="string")UI(u,g)&&(T=T.concat(u.g.get(Cl(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)T=T.concat(u[g]);return T}t.set=function(u,g){return wa(this),this.i=null,u=Cl(this,u),UI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=jI(this,u),u.length>0?String(u[0]):g):g};function $I(u,g,T){FI(u,g),T.length>0&&(u.i=null,u.g.set(Cl(u,g),m(T)),u.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let D=0;D<g.length;D++){var T=g[D];const M=ln(T);T=jI(this,T);for(let B=0;B<T.length;B++){let ye=M;T[B]!==""&&(ye+="="+ln(T[B])),u.push(ye)}}return this.i=u.join("&")};function BI(u){const g=new Bu;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Cl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function WL(u,g){g&&!u.j&&(wa(u),u.i=null,u.g.forEach(function(T,D){const M=D.toLowerCase();D!=M&&(FI(this,D),$I(this,M,T))},u)),u.j=g}function qL(u,g){const T=new J;if(o.Image){const D=new Image;D.onload=d(Yi,T,"TestLoadImage: loaded",!0,g,D),D.onerror=d(Yi,T,"TestLoadImage: error",!1,g,D),D.onabort=d(Yi,T,"TestLoadImage: abort",!1,g,D),D.ontimeout=d(Yi,T,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else g(!1)}function HL(u,g){const T=new J,D=new AbortController,M=setTimeout(()=>{D.abort(),Yi(T,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:D.signal}).then(B=>{clearTimeout(M),B.ok?Yi(T,"TestPingServer: ok",!0,g):Yi(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Yi(T,"TestPingServer: error",!1,g)})}function Yi(u,g,T,D,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),D(T)}catch{}}function KL(){this.g=new Yt}function oy(u){this.i=u.Sb||null,this.h=u.ab||!1}h(oy,_a),oy.prototype.g=function(){return new cf(this.i,this.h)};function cf(u,g){wt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(cf,wt),t=cf.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Wu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zu(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wu(this)),this.g&&(this.readyState=3,Wu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zI(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function zI(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?zu(this):Wu(this),this.readyState==3&&zI(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,zu(this))},t.Na=function(u){this.g&&(this.response=u,zu(this))},t.ga=function(){this.g&&zu(this)};function zu(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Wu(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,u.push(T[0]+": "+T[1]),T=g.next();return u.join(`\r
`)};function Wu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function WI(u){let g="";return W(u,function(T,D){g+=D,g+=":",g+=T,g+=`\r
`}),g}function ay(u,g,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=WI(T),typeof u=="string"?T!=null&&ln(T):ct(u,g,T))}function dn(u){wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(dn,wt);var GL=/^https?$/i,QL=["POST","PUT"];t=dn.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qe.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){qI(this,B);return}if(u=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var M in D)T.set(M,D[M]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const B of D.keys())T.set(B,D.get(B));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(B=>B.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(QL,g,void 0)>=0)||D||M||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ye]of T)this.g.setRequestHeader(B,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){qI(this,B)}};function qI(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,HI(u),uf(u)}function HI(u){u.A||(u.A=!0,an(u,"complete"),an(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,an(this,"complete"),an(this,"abort"),uf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uf(this,!0)),dn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?KI(this):this.Xa())},t.Xa=function(){KI(this)};function KI(u){if(u.h&&typeof i<"u"){if(u.v&&Ji(u)==4)setTimeout(u.Ca.bind(u),0);else if(an(u,"readystatechange"),Ji(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var D;if(D=B===0){let ye=String(u.D).match(Ye)[1]||null;!ye&&o.self&&o.self.location&&(ye=o.self.location.protocol.slice(0,-1)),D=!GL.test(ye?ye.toLowerCase():"")}T=D}if(T)an(u,"complete"),an(u,"success");else{u.o=6;try{var M=Ji(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",HI(u)}}finally{uf(u)}}}}function uf(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const T=u.g;u.g=null,g||an(u,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ji(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ji(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Gi(g)}};function GI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function YL(u){const g={};u=(u.g&&Ji(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(k(u[D]))continue;var T=He(u[D]);const M=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const B=g[M]||[];g[M]=B,B.push(T)}re(g,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qu(u,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[u]||g}function QI(u){this.za=0,this.i=[],this.j=new J,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qu("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qu("baseRetryDelayMs",5e3,u),this.Za=qu("retryDelaySeedMs",1e4,u),this.Ta=qu("forwardChannelMaxRetries",2,u),this.va=qu("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new et(u&&u.concurrentRequestLimit),this.Ba=new KL,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=QI.prototype,t.ka=8,t.I=1,t.connect=function(u,g,T,D){Z(0),this.W=u,this.H=g||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=sT(this,null,this.W),hf(this)};function ly(u){if(YI(u),u.I==3){var g=u.V++,T=un(u.J);if(ct(T,"SID",u.M),ct(T,"RID",g),ct(T,"TYPE","terminate"),Hu(u,T),g=new Ue(u,u.j,g),g.M=2,g.A=Xe(un(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=g.A,T=!0),T||(g.g=iT(g.j,null),g.g.ea(g.A)),g.F=Date.now(),gt(g)}rT(u)}function df(u){u.g&&(uy(u),u.g.cancel(),u.g=null)}function YI(u){df(u),u.v&&(o.clearTimeout(u.v),u.v=null),ff(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function hf(u){if(!Et(u.h)&&!u.m){u.m=!0;var g=u.Ea;P||S(),L||(P(),L=!0),A.add(g,u),u.D=0}}function JL(u,g){return lt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ce(c(u.Ea,u,g),nT(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Ue(this,this.j,u);let B=this.o;if(this.U&&(B?(B=we(B),se(B,this.U)):B=this.U),this.u!==null||this.R||(M.J=B,B=null),this.S)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,g>4096){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=XI(this,M,g),T=un(this.J),ct(T,"RID",u),ct(T,"CVER",22),this.G&&ct(T,"X-HTTP-Session-Id",this.G),Hu(this,T),B&&(this.R?g="headers="+ln(WI(B))+"&"+g:this.u&&ay(T,this.u,B)),cn(this.h,M),this.Ra&&ct(T,"TYPE","init"),this.S?(ct(T,"$req",g),ct(T,"SID","null"),M.U=!0,Nt(M,T,null)):Nt(M,T,g),this.I=2}}else this.I==3&&(u?JI(this,u):this.i.length==0||Et(this.h)||JI(this))};function JI(u,g){var T;g?T=g.l:T=u.V++;const D=un(u.J);ct(D,"SID",u.M),ct(D,"RID",T),ct(D,"AID",u.K),Hu(u,D),u.u&&u.o&&ay(D,u.u,u.o),T=new Ue(u,u.j,T,u.D+1),u.u===null&&(T.J=u.o),g&&(u.i=g.G.concat(u.i)),g=XI(u,T,1e3),T.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),cn(u.h,T),Nt(T,D,g)}function Hu(u,g){u.H&&W(u.H,function(T,D){ct(g,D,T)}),u.l&&W({},function(T,D){ct(g,D,T)})}function XI(u,g,T){T=Math.min(u.i.length,T);const D=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let Ze=-1;for(;;){const Dn=["count="+T];Ze==-1?T>0?(Ze=M[0].g,Dn.push("ofs="+Ze)):Ze=0:Dn.push("ofs="+Ze);let kt=!0;for(let $n=0;$n<T;$n++){var B=M[$n].g;const $s=M[$n].map;if(B-=Ze,B<0)Ze=Math.max(0,M[$n].g-100),kt=!1;else try{B="req"+B+"_"||"";try{var ye=$s instanceof Map?$s:Object.entries($s);for(const[Ia,Xi]of ye){let Zi=Xi;a(Xi)&&(Zi=va(Xi)),Dn.push(B+Ia+"="+encodeURIComponent(Zi))}}catch(Ia){throw Dn.push(B+"type="+encodeURIComponent("_badmap")),Ia}}catch{D&&D($s)}}if(kt){ye=Dn.join("&");break e}}ye=void 0}return u=u.i.splice(0,T),g.G=u,ye}function ZI(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;P||S(),L||(P(),L=!0),A.add(g,u),u.A=0}}function cy(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ce(c(u.Da,u),nT(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,eT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ce(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Z(10),df(this),eT(this))};function uy(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function eT(u){u.g=new Ue(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=un(u.na);ct(g,"RID","rpc"),ct(g,"SID",u.M),ct(g,"AID",u.K),ct(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ct(g,"TO",u.ia),ct(g,"TYPE","xmlhttp"),Hu(u,g),u.u&&u.o&&ay(g,u.u,u.o),u.O&&(u.g.H=u.O);var T=u.g;u=u.ba,T.M=1,T.A=Xe(un(g)),T.u=null,T.R=!0,Rt(T,u)}t.Va=function(){this.C!=null&&(this.C=null,df(this),cy(this),Z(19))};function ff(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function tT(u,g){var T=null;if(u.g==g){ff(u),uy(u),u.g=null;var D=2}else if(Qe(u.h,g))T=g.G,Xn(u.h,g),D=1;else return;if(u.I!=0){if(g.o)if(D==1){T=g.u?g.u.length:0,g=Date.now()-g.F;var M=u.D;D=H(),an(D,new ue(D,T)),hf(u)}else ZI(u);else if(M=g.m,M==3||M==0&&g.X>0||!(D==1&&JL(u,g)||D==2&&cy(u)))switch(T&&T.length>0&&(g=u.h,g.i=g.i.concat(T)),M){case 1:Ea(u,5);break;case 4:Ea(u,10);break;case 3:Ea(u,6);break;default:Ea(u,2)}}}function nT(u,g){let T=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(T*=2),T*g}function Ea(u,g){if(u.j.info("Error code "+g),g==2){var T=c(u.bb,u),D=u.Ua;const M=!D;D=new Xt(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Cr(D,"https"),Xe(D),M?qL(D.toString(),T):HL(D.toString(),T)}else Z(2);u.I=0,u.l&&u.l.pa(g),rT(u),YI(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function rT(u){if(u.I=0,u.ja=[],u.l){const g=jn(u.h);(g.length!=0||u.i.length!=0)&&(I(u.ja,g),I(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function sT(u,g,T){var D=T instanceof Xt?un(T):new Xt(T);if(D.g!="")g&&(D.g=g+"."+D.g),kn(D,D.u);else{var M=o.location;D=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;const B=new Xt(null);D&&Cr(B,D),g&&(B.g=g),M&&kn(B,M),T&&(B.h=T),D=B}return T=u.G,g=u.wa,T&&g&&ct(D,T,g),ct(D,"VER",u.ka),Hu(u,D),D}function iT(u,g,T){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new dn(new oy({ab:T})):new dn(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oT(){}t=oT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function mf(){}mf.prototype.g=function(u,g){return new Hr(u,g)};function Hr(u,g){wt.call(this),this.g=new QI(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new kl(this)}h(Hr,wt),Hr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hr.prototype.close=function(){ly(this.g)},Hr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var T={};T.__data__=u,u=T}else this.v&&(T={},T.__data__=va(u),u=T);g.i.push(new tt(g.Ya++,u)),g.I==3&&hf(g)},Hr.prototype.N=function(){this.g.l=null,delete this.j,ly(this.g),delete this.g,Hr.Z.N.call(this)};function aT(u){cs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const T in g){u=T;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(aT,cs);function lT(){pi.call(this),this.status=1}h(lT,pi);function kl(u){this.g=u}h(kl,oT),kl.prototype.ra=function(){an(this.g,"a")},kl.prototype.qa=function(u){an(this.g,new aT(u))},kl.prototype.pa=function(u){an(this.g,new lT)},kl.prototype.oa=function(){an(this.g,"b")},mf.prototype.createWebChannel=mf.prototype.g,Hr.prototype.send=Hr.prototype.o,Hr.prototype.open=Hr.prototype.m,Hr.prototype.close=Hr.prototype.close,wD=function(){return new mf},_D=function(){return H()},vD=Yn,Q_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ge.NO_ERROR=0,ge.TIMEOUT=8,ge.HTTP_ERROR=6,wm=ge,Ne.COMPLETE="complete",yD=Ne,Qi.EventType=Pr,Pr.OPEN="a",Pr.CLOSE="b",Pr.ERROR="c",Pr.MESSAGE="d",wt.prototype.listen=wt.prototype.J,vd=Qi,dn.prototype.listenOnce=dn.prototype.K,dn.prototype.getLastError=dn.prototype.Ha,dn.prototype.getLastErrorCode=dn.prototype.ya,dn.prototype.getStatus=dn.prototype.ca,dn.prototype.getResponseJson=dn.prototype.La,dn.prototype.getResponseText=dn.prototype.la,dn.prototype.send=dn.prototype.ea,dn.prototype.setWithCredentials=dn.prototype.Fa,gD=dn}).apply(typeof $f<"u"?$f:typeof self<"u"?self:typeof window<"u"?window:{});const Bb="@firebase/firestore",zb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new bg("@firebase/firestore");function Wl(){return Yo.logLevel}function ED(t){Yo.setLogLevel(t)}function ne(t,...e){if(Yo.logLevel<=ut.DEBUG){const n=e.map(mE);Yo.debug(`Firestore (${xu}): ${t}`,...n)}}function gn(t,...e){if(Yo.logLevel<=ut.ERROR){const n=e.map(mE);Yo.error(`Firestore (${xu}): ${t}`,...n)}}function ss(t,...e){if(Yo.logLevel<=ut.WARN){const n=e.map(mE);Yo.warn(`Firestore (${xu}): ${t}`,...n)}}function mE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ID(t,r,n)}function ID(t,e,n){let r=`FIRESTORE (${xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw gn(r),new Error(r)}function Ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ID(e,s,r)}function $z(t,e){t||Te(57014,e)}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Us{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Hn.UNAUTHENTICATED))}shutdown(){}}class Bz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zz{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new TD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Hn(e)}}class Wz{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Wz(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Y_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Y_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class Kz{getToken(){return Promise.resolve(new Y_(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Gz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function J_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return sv(s)===sv(i)?Fe(s,i):sv(s)?1:-1}return Fe(t.length,e.length)}const Qz=55296,Yz=57343;function sv(t){const e=t.charCodeAt(0);return e>=Qz&&e<=Yz}function Wc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function bD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="__name__";class Ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ws.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Fe(e.length,n.length)}static compareSegments(e,n){const r=Ws.isNumericId(e),s=Ws.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ws.extractNumericId(e).compare(Ws.extractNumericId(n)):J_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bo.fromString(e.substring(4,e.length-2))}}class rt extends Ws{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const Jz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Ws{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return Jz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X_}static keyField(){return new $t([X_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(rt.fromString(e))}static fromName(e){return new he(rt.fromString(e).popFirst(5))}static empty(){return new he(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t,e,n){if(!n)throw new Q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AD(t,e,n,r){if(e===!0&&r===!0)throw new Q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wb(t){if(!he.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qb(t){if(he.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rg(t);throw new Q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function RD(t,e){if(e<=0)throw new Q(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,e){const n={typeString:t};return e&&(n.value=e),n}function bl(t,e){if(!xD(t))throw new Q(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=-62135596800,Kb=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Kb);return new _t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Hb)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kb}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bl(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:bn("string",_t._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new _t(0,0))}static max(){return new Ce(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-1;class Hc{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Z_(t){return t.fields.find(e=>e.kind===2)}function xa(t){return t.fields.filter(e=>e.kind!==2)}function Xz(t,e){let n=Fe(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=Zz(t.fields[r],e.fields[r]),n!==0)return n;return Fe(t.fields.length,e.fields.length)}Hc.UNKNOWN_ID=-1;class Xa{constructor(e,n){this.fieldPath=e,this.kind=n}}function Zz(t,e){const n=$t.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Fe(t.kind,e.kind)}class Kc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Kc(0,is.min())}}function PD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new is(s,he.empty(),e)}function CD(t){return new is(t.readTime,t.key,qc)}class is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new is(Ce.min(),he.empty(),qc)}static max(){return new is(Ce.max(),he.empty(),qc)}}function gE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==kD)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="SimpleDb";class Pg{static open(e,n,r,s){try{return new Pg(n,e.transaction(s,r))}catch(i){throw new Od(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Qn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Od(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=yE(r.target.error);this.S.reject(new Od(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(Gr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tW(n)}}class si{static delete(e){return ne(Gr,"Removing database:",e),Ca(Pk().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!oE())return!1;if(si.F())return!0;const e=or(),n=si.M(e),r=0<n&&n<10,s=ND(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,si.M(or())===12.2&&gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ne(Gr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Od(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Q(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Q(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Od(e,o))},s.onupgradeneeded=i=>{ne(Gr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{ne(Gr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Pg.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ne(Gr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ND(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class eW{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ca(this.U.delete())}}class Od extends Q{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ca(t){return t.name==="IndexedDbTransactionError"}class tW{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ne(Gr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne(Gr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ca(r)}add(e){return ne(Gr,"ADD",this.store.name,e,e),Ca(this.store.add(e))}get(e){return Ca(this.store.get(e)).next(n=>(n===void 0&&(n=null),ne(Gr,"GET",this.store.name,e,n),n))}delete(e){return ne(Gr,"DELETE",this.store.name,e),Ca(this.store.delete(e))}count(){return ne(Gr,"COUNT",this.store.name),Ca(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){ne(Gr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=yE(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new eW(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ca(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=yE(r.target.error);n(s)}})}let Gb=!1;function yE(t){const e=si.M(or());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gb||(Gb=!0,setTimeout(()=>{throw r},0)),r}}return t}const Ld="IndexBackfiller";class nW{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ne(Ld,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();ne(Ld,`Documents written: ${n}`)}catch(n){ca(n)?ne(Ld,"Ignoring IndexedDB error during index backfill: ",n):await la(n)}await this.re(6e4)})}}class rW{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return ne(Ld,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(ne(Ld,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=CD(i);gE(o,r)>0&&(r=o)}),new is(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=-1;function Hh(t){return t==null}function wh(t){return t===0&&1/t==-1/0}function OD(t){return typeof t=="number"&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="";function gr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qb(e)),e=sW(t.get(n),e);return Qb(e)}function sW(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Ap:n+="";break;default:n+=i}}return n}function Qb(t){return t+Ap+""}function Xs(t){const e=t.length;if(Ae(e>=2,64408,{path:t}),e===2)return Ae(t.charAt(0)===Ap&&t.charAt(1)==="",56145,{path:t}),rt.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Ap,i);switch((o<0||o>n)&&Te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Te(61167,{path:t})}i=o+2}return new rt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="remoteDocuments",Kh="owner",Nl="owner",Eh="mutationQueues",iW="userId",As="mutations",Yb="batchId",Ba="userMutationsIndex",Jb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){return[t,gr(e)]}function LD(t,e,n){return[t,gr(e),n]}const oW={},Gc="documentMutations",xp="remoteDocumentsV14",aW=["prefixPath","collectionGroup","readTime","documentId"],Im="documentKeyIndex",lW=["prefixPath","collectionGroup","documentId"],VD="collectionGroupIndex",cW=["collectionGroup","readTime","prefixPath","documentId"],Ih="remoteDocumentGlobal",ew="remoteDocumentGlobalKey",Qc="targets",MD="queryTargetsIndex",uW=["canonicalId","targetId"],Yc="targetDocuments",dW=["targetId","path"],vE="documentTargetsIndex",hW=["path","targetId"],Rp="targetGlobalKey",Za="targetGlobal",Th="collectionParents",fW=["collectionId","parent"],Jc="clientMetadata",mW="clientId",Cg="bundles",pW="bundleId",kg="namedQueries",gW="name",_E="indexConfiguration",yW="indexId",tw="collectionGroupIndex",vW="collectionGroup",Vd="indexState",_W=["indexId","uid"],FD="sequenceNumberIndex",wW=["uid","sequenceNumber"],Md="indexEntries",EW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UD="documentKeyIndex",IW=["indexId","uid","orderedDocumentKey"],Dg="documentOverlays",TW=["userId","collectionPath","documentId"],nw="collectionPathOverlayIndex",SW=["userId","collectionPath","largestBatchId"],jD="collectionGroupOverlayIndex",bW=["userId","collectionGroup","largestBatchId"],wE="globals",AW="name",$D=[Eh,As,Gc,Ra,Qc,Kh,Za,Yc,Jc,Ih,Th,Cg,kg],xW=[...$D,Dg],BD=[Eh,As,Gc,xp,Qc,Kh,Za,Yc,Jc,Ih,Th,Cg,kg,Dg],zD=BD,EE=[...zD,_E,Vd,Md],RW=EE,WD=[...EE,wE],PW=WD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw extends DD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Mn(t,e){const n=me(t);return si.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ua(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qD(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function HD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.comparator=e,this.root=n||er.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bf(this.root,e,this.comparator,!0)}}class Bf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??er.RED,this.left=s??er.EMPTY,this.right=i??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new er(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return er.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1;er.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new er(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zb(this.data.getIterator())}getIteratorFrom(e){return new Zb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class Zb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ol(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Fr([])}unionWith(e){let n=new xt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CW(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new KD("Invalid base64 string: "+i):i}}(e);return new rn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const kW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=kW.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ui(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="server_timestamp",QD="__type__",YD="__previous_value__",JD="__local_write_time__";function Ng(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[QD])==null?void 0:r.stringValue)===GD}function Og(t){const e=t.mapValue.fields[YD];return Ng(e)?Og(e):e}function Sh(t){const e=Fi(t.mapValue.fields[JD].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const bh="(default)";class Jo{constructor(e,n){this.projectId=e,this.database=n||bh}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database===bh}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__type__",XD="__max__",xo={mapValue:{fields:{__type__:{stringValue:XD}}}},TE="__vector__",Xc="value",Tm={nullValue:"NULL_VALUE"};function Xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ng(t)?4:ZD(t)?9007199254740991:Lg(t)?10:11:Te(28295,{value:t})}function ui(t,e){if(t===e)return!0;const n=Xo(t);if(n!==Xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sh(t).isEqual(Sh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fi(s.timestampValue),a=Fi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ui(s.bytesValue).isEqual(Ui(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ht(s.geoPointValue.latitude)===Ht(i.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ht(s.integerValue)===Ht(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ht(s.doubleValue),a=Ht(i.doubleValue);return o===a?wh(o)===wh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Wc(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Xb(o)!==Xb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ui(o[l],a[l])))return!1;return!0}(t,e);default:return Te(52216,{left:t})}}function Ah(t,e){return(t.values||[]).find(n=>ui(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;const n=Xo(t),r=Xo(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ht(i.integerValue||i.doubleValue),l=Ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return eA(t.timestampValue,e.timestampValue);case 4:return eA(Sh(t),Sh(e));case 5:return J_(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ui(i),l=Ui(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Fe(a[c],l[c]);if(d!==0)return d}return Fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Fe(Ht(i.latitude),Ht(o.latitude));return a!==0?a:Fe(Ht(i.longitude),Ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tA(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,I,p;const a=i.fields||{},l=o.fields||{},c=(f=a[Xc])==null?void 0:f.arrayValue,d=(m=l[Xc])==null?void 0:m.arrayValue,h=Fe(((I=c==null?void 0:c.values)==null?void 0:I.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:tA(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===xo.mapValue&&o===xo.mapValue)return 0;if(i===xo.mapValue)return 1;if(o===xo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=J_(l[h],d[h]);if(f!==0)return f;const m=Zo(a[l[h]],c[d[h]]);if(m!==0)return m}return Fe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function eA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Fi(t),r=Fi(e),s=Fe(n.seconds,r.seconds);return s!==0?s:Fe(n.nanos,r.nanos)}function tA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zo(n[s],r[s]);if(i)return i}return Fe(n.length,r.length)}function Zc(t){return sw(t)}function sw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=sw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${sw(n.fields[o])}`;return s+"}"}(t.mapValue):Te(61005,{value:t})}function Sm(t){switch(Xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Og(t);return e?16+Sm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ui(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Sm(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ua(r.fields,(i,o)=>{s+=i.length+Sm(o)}),s}(t.mapValue);default:throw Te(13486,{value:t})}}function cl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iw(t){return!!t&&"integerValue"in t}function xh(t){return!!t&&"arrayValue"in t}function nA(t){return!!t&&"nullValue"in t}function rA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bm(t){return!!t&&"mapValue"in t}function Lg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[IE])==null?void 0:r.stringValue)===TE}function Fd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ua(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fd(t.arrayValue.values[n]);return e}return{...t}}function ZD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XD}const eN={mapValue:{fields:{[IE]:{stringValue:TE},[Xc]:{arrayValue:{}}}}};function NW(t){return"nullValue"in t?Tm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?cl(Jo.empty(),he.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Lg(t)?eN:{mapValue:{}}:Te(35942,{value:t})}function OW(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?cl(Jo.empty(),he.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?eN:"mapValue"in t?Lg(t)?{mapValue:{}}:xo:Te(61959,{value:t})}function sA(t,e){const n=Zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function iA(t,e){const n=Zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.value=e}static empty(){return new tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fd(n)}setAll(e){let n=$t.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Fd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());bm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];bm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ua(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new tr(Fd(this.value))}}function tN(t){const e=[];return ua(t.fields,(n,r)=>{const s=new $t([n]);if(bm(r)){const i=tN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Fr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,Ce.min(),Ce.min(),Ce.min(),tr.empty(),0)}static newFoundDocument(e,n,r,s){return new jt(e,1,n,Ce.min(),r,s,0)}static newNoDocument(e,n){return new jt(e,2,n,Ce.min(),Ce.min(),tr.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,Ce.min(),Ce.min(),tr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.position=e,this.inclusive=n}}function oA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=Zo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function aA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n="asc"){this.field=e,this.dir=n}}function LW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{}class ht extends nN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VW(e,n,r):n==="array-contains"?new UW(e,r):n==="in"?new lN(e,r):n==="not-in"?new jW(e,r):n==="array-contains-any"?new $W(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MW(e,r):new FW(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zo(n,this.value)):n!==null&&Xo(this.value)===Xo(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends nN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new St(e,n)}matches(e){return eu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eu(t){return t.op==="and"}function ow(t){return t.op==="or"}function SE(t){return rN(t)&&eu(t)}function rN(t){for(const e of t.filters)if(e instanceof St)return!1;return!0}function aw(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Zc(t.value);if(SE(t))return t.filters.map(e=>aw(e)).join(",");{const e=t.filters.map(n=>aw(n)).join(",");return`${t.op}(${e})`}}function sN(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&ui(r.value,s.value)}(t,e):t instanceof St?function(r,s){return s instanceof St&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&sN(o,s.filters[a]),!0):!1}(t,e):void Te(19439)}function iN(t,e){const n=t.filters.concat(e);return St.create(n,t.op)}function oN(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Zc(n.value)}`}(t):t instanceof St?function(n){return n.op.toString()+" {"+n.getFilters().map(oN).join(" ,")+"}"}(t):"Filter"}class VW extends ht{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class MW extends ht{constructor(e,n){super(e,"in",n),this.keys=aN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FW extends ht{constructor(e,n){super(e,"not-in",n),this.keys=aN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class UW extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xh(n)&&Ah(n.arrayValue,this.value)}}class lN extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ah(this.value.arrayValue,n)}}class jW extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ah(this.value.arrayValue,n)}}class $W extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function lw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new BW(t,e,n,r,s,i,o)}function ul(t){const e=me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>aw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Hh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zc(r)).join(",")),e.Te=n}return e.Te}function Gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aA(t.startAt,e.startAt)&&aA(t.endAt,e.endAt)}function Pp(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Cp(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function lA(t,e,n){let r=Tm,s=!0;for(const i of Cp(t,e)){let o=Tm,a=!0;switch(i.op){case"<":case"<=":o=NW(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Tm}sA({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];sA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function cA(t,e,n){let r=xo,s=!0;for(const i of Cp(t,e)){let o=xo,a=!0;switch(i.op){case">=":case">":o=OW(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=xo}iA({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];iA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function cN(t,e,n,r,s,i,o,a){return new zi(t,e,n,r,s,i,o,a)}function Ru(t){return new zi(t)}function uA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bE(t){return t.collectionGroup!==null}function Tc(t){const e=me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt($t.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Rh(i,r))}),n.has($t.keyField().canonicalString())||e.Ie.push(new Rh($t.keyField(),r))}return e.Ie}function yr(t){const e=me(t);return e.Ee||(e.Ee=dN(e,Tc(t))),e.Ee}function uN(t){const e=me(t);return e.de||(e.de=dN(e,t.explicitOrderBy)),e.de}function dN(t,e){if(t.limitType==="F")return lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Rh(s.field,i)});const n=t.endAt?new ea(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ea(t.startAt.position,t.startAt.inclusive):null;return lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cw(t,e){const n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kp(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qh(t,e){return Gh(yr(t),yr(e))&&t.limitType===e.limitType}function hN(t){return`${ul(yr(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>oN(s)).join(", ")}]`),Hh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Zc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Zc(s)).join(",")),`Target(${r})`}(yr(t))}; limitType=${t.limitType})`}function Yh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Tc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=oA(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Tc(r),s)||r.endAt&&!function(o,a,l){const c=oA(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Tc(r),s))}(t,e)}function fN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mN(t){return(e,n)=>{let r=!1;for(const s of Tc(t)){const i=zW(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zW(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Zo(l,c):Te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return HD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=new Mt(he.comparator);function Ur(){return WW}const pN=new Mt(he.comparator);function _d(...t){let e=pN;for(const n of t)e=e.insert(n.key,n);return e}function gN(t){let e=pN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return Ud()}function yN(){return Ud()}function Ud(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const qW=new Mt(he.comparator),HW=new xt(he.comparator);function Ke(...t){let e=HW;for(const n of t)e=e.add(n);return e}const KW=new xt(Fe);function AE(){return KW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function vN(t){return{integerValue:""+t}}function _N(t,e){return OD(e)?vN(e):xE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this._=void 0}}function GW(t,e,n){return t instanceof tu?function(s,i){const o={fields:{[QD]:{stringValue:GD},[JD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ng(i)&&(i=Og(i)),i&&(o.fields[YD]=i),{mapValue:o}}(n,e):t instanceof dl?EN(t,e):t instanceof hl?IN(t,e):function(s,i){const o=wN(s,i),a=dA(o)+dA(s.Ae);return iw(o)&&iw(s.Ae)?vN(a):xE(s.serializer,a)}(t,e)}function QW(t,e,n){return t instanceof dl?EN(t,e):t instanceof hl?IN(t,e):n}function wN(t,e){return t instanceof nu?function(r){return iw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class tu extends Vg{}class dl extends Vg{constructor(e){super(),this.elements=e}}function EN(t,e){const n=TN(e);for(const r of t.elements)n.some(s=>ui(s,r))||n.push(r);return{arrayValue:{values:n}}}class hl extends Vg{constructor(e){super(),this.elements=e}}function IN(t,e){let n=TN(e);for(const r of t.elements)n=n.filter(s=>!ui(s,r));return{arrayValue:{values:n}}}class nu extends Vg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function dA(t){return Ht(t.integerValue||t.doubleValue)}function TN(t){return xh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.field=e,this.transform=n}}function YW(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof dl&&s instanceof dl||r instanceof hl&&s instanceof hl?Wc(r.elements,s.elements,ui):r instanceof nu&&s instanceof nu?ui(r.Ae,s.Ae):r instanceof tu&&s instanceof tu}(t.transform,e.transform)}class JW{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mg{}function SN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cu(t.key,Gt.none()):new Pu(t.key,t.data,Gt.none());{const n=t.data,r=tr.empty();let s=new xt($t.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qi(t.key,r,new Fr(s.toArray()),Gt.none())}}function XW(t,e,n){t instanceof Pu?function(s,i,o){const a=s.value.clone(),l=fA(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(s,i,o){if(!Am(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=fA(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(bN(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function jd(t,e,n,r){return t instanceof Pu?function(i,o,a,l){if(!Am(i.precondition,o))return a;const c=i.value.clone(),d=mA(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(i,o,a,l){if(!Am(i.precondition,o))return a;const c=mA(i.fieldTransforms,l,o),d=o.data;return d.setAll(bN(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Am(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ZW(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=wN(r.transform,s||null);i!=null&&(n===null&&(n=tr.empty()),n.set(r.field,i))}return n||null}function hA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wc(r,s,(i,o)=>YW(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pu extends Mg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qi extends Mg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fA(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,QW(o,a,n[s]))}return r}function mA(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,GW(i,o,e))}return r}class Cu extends Mg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RE extends Mg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XW(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=SN(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&Wc(this.mutations,e.mutations,(n,r)=>hA(n,r))&&Wc(this.baseMutations,e.baseMutations,(n,r)=>hA(n,r))}}class CE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return qW}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new CE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn,yt;function xN(t){switch(t){case U.OK:return Te(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function RN(t){if(t===void 0)return gn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Tn.OK:return U.OK;case Tn.CANCELLED:return U.CANCELLED;case Tn.UNKNOWN:return U.UNKNOWN;case Tn.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Tn.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Tn.INTERNAL:return U.INTERNAL;case Tn.UNAVAILABLE:return U.UNAVAILABLE;case Tn.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Tn.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Tn.NOT_FOUND:return U.NOT_FOUND;case Tn.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Tn.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Tn.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Tn.ABORTED:return U.ABORTED;case Tn.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Tn.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Tn.DATA_LOSS:return U.DATA_LOSS;default:return Te(39323,{code:t})}}(yt=Tn||(Tn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=new Bo([4294967295,4294967295],0);function pA(t){const e=PN().encode(t),n=new pD;return n.update(e),new Uint8Array(n.digest())}function gA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bo([n,r],0),new Bo([s,i],0)]}class DE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wd(`Invalid padding: ${n}`);if(r<0)throw new wd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Bo.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Bo.fromNumber(r)));return s.compare(tq)===1&&(s=new Bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=pA(e),[r,s]=gA(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new DE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=pA(e),[r,s]=gA(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xh(Ce.min(),s,new Mt(Fe),Ur(),Ke())}}class Zh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zh(r,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class CN{constructor(e,n){this.targetId=e,this.Ce=n}}class kN{constructor(e,n,r=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class yA{constructor(){this.ve=0,this.Fe=vA(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),n=Ke(),r=Ke();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:i})}}),new Zh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=vA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nq{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ur(),this.Je=zf(),this.He=zf(),this.Ye=new Mt(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Pp(i))if(r===0){const o=new he(i.path);this.et(n,o,jt.newNoDocument(o,Ce.min()))}else Ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}$d==null||$d.lt(function(d,h,f,m,I){var _,v,w;const p={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},y=h.unchangedNames;return y&&(p.bloomFilter={applied:I===0,hashCount:(y==null?void 0:y.hashCount)??0,bitmapLength:((v=(_=y==null?void 0:y.bits)==null?void 0:_.bitmap)==null?void 0:v.length)??0,padding:((w=y==null?void 0:y.bits)==null?void 0:w.padding)??0,mightContain:x=>(m==null?void 0:m.mightContain(x))??!1}),p}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ui(r).toUint8Array()}catch(l){if(l instanceof KD)return ss("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new DE(o,s,i)}catch(l){return ss(l instanceof wd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Pp(a.target)){const l=new he(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,jt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ke();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Xh(e,n,this.Ye,this.je,r);return this.je=Ur(),this.Je=zf(),this.He=zf(),this.Ye=new Mt(Fe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new yA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zf(){return new Mt(he.comparator)}function vA(){return new Mt(he.comparator)}const rq={asc:"ASCENDING",desc:"DESCENDING"},sq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iq={and:"AND",or:"OR"};class oq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uw(t,e){return t.useProto3Json||Hh(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aq(t,e){return ru(t,e.toTimestamp())}function vn(t){return Ae(!!t,49232),Ce.fromTimestamp(function(n){const r=Fi(n);return new _t(r.seconds,r.nanos)}(t))}function NE(t,e){return dw(t,e).canonicalString()}function dw(t,e){const n=function(s){return new rt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NN(t){const e=rt.fromString(t);return Ae(BN(e),10190,{key:e.toString()}),e}function Ph(t,e){return NE(t.databaseId,e.path)}function ii(t,e){const n=NN(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(VN(n))}function ON(t,e){return NE(t.databaseId,e)}function LN(t){const e=NN(t);return e.length===4?rt.emptyPath():VN(e)}function hw(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VN(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _A(t,e,n){return{name:Ph(t,e),fields:n.value.mapValue.fields}}function Fg(t,e,n){const r=ii(t,e.name),s=vn(e.updateTime),i=e.createTime?vn(e.createTime):Ce.min(),o=new tr({mapValue:{fields:e.fields}}),a=jt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function lq(t,e){return"found"in e?function(r,s){Ae(!!s.found,43571),s.found.name,s.found.updateTime;const i=ii(r,s.found.name),o=vn(s.found.updateTime),a=s.found.createTime?vn(s.found.createTime):Ce.min(),l=new tr({mapValue:{fields:s.found.fields}});return jt.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){Ae(!!s.missing,3894),Ae(!!s.readTime,22933);const i=ii(r,s.missing),o=vn(s.readTime);return jt.newNoDocument(i,o)}(t,e):Te(7234,{result:e})}function cq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ae(d===void 0||typeof d=="string",58123),rn.fromBase64String(d||"")):(Ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?U.UNKNOWN:RN(c.code);return new Q(d,c.message||"")}(o);n=new kN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ii(t,r.document.name),i=vn(r.document.updateTime),o=r.document.createTime?vn(r.document.createTime):Ce.min(),a=new tr({mapValue:{fields:r.document.fields}}),l=jt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new xm(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ii(t,r.document),i=r.readTime?vn(r.readTime):Ce.min(),o=jt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new xm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ii(t,r.document),i=r.removedTargetIds||[];n=new xm([],i,s,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new eq(s,i),a=r.targetId;n=new CN(a,o)}}return n}function Ch(t,e){let n;if(e instanceof Pu)n={update:_A(t,e.key,e.value)};else if(e instanceof Cu)n={delete:Ph(t,e.key)};else if(e instanceof qi)n={update:_A(t,e.key,e.data),updateMask:pq(e.fieldMask)};else{if(!(e instanceof RE))return Te(16599,{Vt:e.type});n={verify:Ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof tu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:aq(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Te(27497)}(t,e.precondition)),n}function fw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Gt.updateTime(vn(i.updateTime)):i.exists!==void 0?Gt.exists(i.exists):Gt.none()}(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Ae(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new tu;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new dl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new hl(d)}else"increment"in a?l=new nu(o,a.increment):Te(16584,{proto:a});const c=$t.fromServerFormat(a.fieldPath);return new Jh(c,l)}(t,s)):[];if(e.update){e.update.name;const s=ii(t,e.update.name),i=new tr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Fr(c.map(d=>$t.fromServerFormat(d)))}(e.updateMask);return new qi(s,i,o,n,r)}return new Pu(s,i,n,r)}if(e.delete){const s=ii(t,e.delete);return new Cu(s,n)}if(e.verify){const s=ii(t,e.verify);return new RE(s,n)}return Te(1463,{proto:e})}function uq(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?vn(s.updateTime):vn(i);return o.isEqual(Ce.min())&&(o=vn(i)),new JW(o,s.transformResults||[])}(n,e))):[]}function MN(t,e){return{documents:[ON(t,e.path)]}}function Ug(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ON(t,s);const i=function(c){if(c.length!==0)return $N(St.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:po(f.field),direction:hq(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=uw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function FN(t,e,n,r){const{ft:s,parent:i}=Ug(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:po(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:po(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function UN(t){let e=LN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=jN(h);return f instanceof St&&SE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(I){return new Rh(Hl(I.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Hh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new ea(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new ea(m,f)}(n.endAt)),cN(e,s,o,i,a,"F",l,c)}function dq(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hl(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hl(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hl(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hl(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Hl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return St.create(n.compositeFilter.filters.map(r=>jN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(t):Te(30097,{filter:t})}function hq(t){return rq[t]}function fq(t){return sq[t]}function mq(t){return iq[t]}function po(t){return{fieldPath:t.canonicalString()}}function Hl(t){return $t.fromServerFormat(t.fieldPath)}function $N(t){return t instanceof ht?function(n){if(n.op==="=="){if(rA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(nA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(nA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:fq(n.op),value:n.value}}}(t):t instanceof St?function(n){const r=n.getFilters().map(s=>$N(s));return r.length===1?r[0]:{compositeFilter:{op:mq(n.op),filters:r}}}(t):Te(54877,{filter:t})}function pq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r,s,i=Ce.min(),o=Ce.min(),a=rn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.yt=e}}function gq(t,e){let n;if(e.document)n=Fg(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),s=ml(e.noDocument.readTime);n=jt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const r=he.fromSegments(e.unknownDocument.path),s=ml(e.unknownDocument.version);n=jt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new _t(s[0],s[1]);return Ce.fromTimestamp(i)}(e.readTime)),n}function wA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Dp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Ph(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ru(i,o.version.toTimestamp()),createTime:ru(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:fl(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:fl(e.version)}}return r}function Dp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ml(t){const e=new _t(t.seconds,t.nanoseconds);return Ce.fromTimestamp(e)}function ka(t,e){const n=(e.baseMutations||[]).map(i=>fw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>fw(t.yt,i)),s=_t.fromMillis(e.localWriteTimeMs);return new PE(e.batchId,s,n,r)}function Ed(t){const e=ml(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ml(t.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Ae(o===1,1966,{count:o}),yr(Ru(LN(i.documents[0])))}(t.query):function(i){return yr(UN(i))}(t.query),new bi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,rn.fromBase64String(t.resumeToken))}function WN(t,e){const n=fl(e.snapshotVersion),r=fl(e.lastLimboFreeSnapshotVersion);let s;s=Pp(e.target)?MN(t.yt,e.target):Ug(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ul(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function jg(t){const e=UN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kp(e,e.limit,"L"):e}function iv(t,e){return new kE(e.largestBatchId,fw(t.yt,e.overlayMutation))}function EA(t,e){const n=e.path.lastSegment();return[t,gr(e.path.popLast()),n]}function IA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:fl(r.readTime),documentKey:gr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{getBundleMetadata(e,n){return TA(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:ml(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return TA(e).put(function(s){return{bundleId:s.id,createTime:fl(vn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return SA(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:jg(i.bundledQuery),readTime:ml(i.readTime)}}(r)})}saveNamedQuery(e,n){return SA(e).put(function(s){return{name:s.name,readTime:fl(vn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function TA(t){return Mn(t,Cg)}function SA(t){return Mn(t,kg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new $g(e,r)}getOverlay(e,n){return sd(e).get(EA(this.userId,n)).next(r=>r?iv(this.serializer,r):null)}getOverlays(e,n){const r=Zs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new kE(n,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(gr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(sd(e).Z(nw,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Zs(),i=gr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return sd(e).J(nw,o).next(a=>{for(const l of a){const c=iv(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Zs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sd(e).ee({index:jD,range:a},(l,c,d)=>{const h=iv(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return sd(e).put(function(s,i,o){const[a,l,c]=EA(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ch(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function sd(t){return Mn(t,Dg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{bt(e){return Mn(e,wE)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?rn.fromUint8Array(r):rn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ht(e.integerValue));else if("doubleValue"in e){const r=Ht(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),wh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Fi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ui(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?ZD(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Lg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Xc,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ht(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),he.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Da.Kt=new Da;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=255;function _q(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function bA(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=_q(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class wq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=bA(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=bA(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Ll),this.sn(255)}_n(){this.an(Ll),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Ll?(this.sn(Ll),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Ll?(this.an(Ll),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Eq{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Iq{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class id{constructor(){this.cn=new wq,this.ln=new Eq(this.cn),this.hn=new Iq(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Na(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Rm(this.En),directionalValue:Rm(this.dn),orderedDocumentKey:Rm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function so(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=AA(t.En,e.En),n!==0?n:(n=AA(t.dn,e.dn),n!==0?n:he.comparator(t.In,e.In)))}function AA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Rm(t){return Ok()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function xA(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class RA{constructor(e){this.mn=new xt((n,r)=>$t.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Z_(e);if(n!==void 0&&!this.wn(n))return!1;const r=xa(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt($t.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Xa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Xa(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Xa(r.field,r.dir==="asc"?0:1)));return new Hc(Hc.UNKNOWN_ID,this.collectionId,n,Kc.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){var n,r;if(Ae(t instanceof ht||t instanceof St,20012),t instanceof ht){if(t instanceof lN){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ht.create(t.field,"==",i)))||[];return St.create(s,"or")}return t}const e=t.filters.map(s=>qN(s));return St.create(e,t.op)}function Tq(t){if(t.getFilters().length===0)return[];const e=gw(qN(t));return Ae(HN(e),7391),mw(e)||pw(e)?[e]:e.getFilters()}function mw(t){return t instanceof ht}function pw(t){return t instanceof St&&SE(t)}function HN(t){return mw(t)||pw(t)||function(n){if(n instanceof St&&ow(n)){for(const r of n.getFilters())if(!mw(r)&&!pw(r))return!1;return!0}return!1}(t)}function gw(t){if(Ae(t instanceof ht||t instanceof St,34018),t instanceof ht)return t;if(t.filters.length===1)return gw(t.filters[0]);const e=t.filters.map(r=>gw(r));let n=St.create(e,t.op);return n=Np(n),HN(n)?n:(Ae(n instanceof St,64498),Ae(eu(n),40251),Ae(n.filters.length>1,57927),n.filters.reduce((r,s)=>OE(r,s)))}function OE(t,e){let n;return Ae(t instanceof ht||t instanceof St,38388),Ae(e instanceof ht||e instanceof St,25473),n=t instanceof ht?e instanceof ht?function(s,i){return St.create([s,i],"and")}(t,e):PA(t,e):e instanceof ht?PA(e,t):function(s,i){if(Ae(s.filters.length>0&&i.filters.length>0,48005),eu(s)&&eu(i))return iN(s,i.getFilters());const o=ow(s)?s:i,a=ow(s)?i:s,l=o.filters.map(c=>OE(c,a));return St.create(l,"or")}(t,e),Np(n)}function PA(t,e){if(eu(e))return iN(e,t.getFilters());{const n=e.filters.map(r=>OE(t,r));return St.create(n,"or")}}function Np(t){if(Ae(t instanceof ht||t instanceof St,11850),t instanceof ht)return t;const e=t.getFilters();if(e.length===1)return Np(e[0]);if(rN(t))return t;const n=e.map(s=>Np(s)),r=[];return n.forEach(s=>{s instanceof ht?r.push(s):s instanceof St&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:St.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(){this.Cn=new LE}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(is.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class LE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="IndexedDbIndexManager",Wf=new Uint8Array(0);class bq{constructor(e,n){this.databaseId=n,this.vn=new LE,this.Fn=new Wi(r=>ul(r),(r,s)=>Gh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:gr(s)};return kA(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[bD(n),""],!1,!0);return kA(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Xs(o.parent))}return r})}addFieldIndex(e,n){const r=od(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Ml(e);return i.next(a=>{o.put(IA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=od(e),s=Ml(e),i=Vl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=od(e),r=Vl(e),s=Ml(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new RA(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Vl(e);let s=!0;const i=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ke();const a=[];return V.forEach(i,(l,c)=>{ne(CA,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${ul(n)}`);const d=function(w,x){const P=Z_(x);if(P===void 0)return null;for(const L of Cp(w,P.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(w,x){const P=new Map;for(const L of xa(x))for(const A of Cp(w,L.fieldPath))switch(A.op){case"==":case"in":P.set(L.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return P.set(L.fieldPath.canonicalString(),A.value),Array.from(P.values())}return null}(c,l),f=function(w,x){const P=[];let L=!0;for(const A of xa(x)){const S=A.kind===0?lA(w,A.fieldPath,w.startAt):cA(w,A.fieldPath,w.startAt);P.push(S.value),L&&(L=S.inclusive)}return new ea(P,L)}(c,l),m=function(w,x){const P=[];let L=!0;for(const A of xa(x)){const S=A.kind===0?cA(w,A.fieldPath,w.endAt):lA(w,A.fieldPath,w.endAt);P.push(S.value),L&&(L=S.inclusive)}return new ea(P,L)}(c,l),I=this.On(l,c,f),p=this.On(l,c,m),y=this.Nn(l,c,h),_=this.Bn(l.indexId,d,I,f.inclusive,p,m.inclusive,y);return V.forEach(_,v=>r.Y(v,n.limit).next(w=>{w.forEach(x=>{const P=he.fromSegments(x.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Tq(St.create(e.filters,"and")).map(r=>lw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):Wf,m=this.kn(e,f,r[h%c],s),I=this.qn(e,f,i[h%c],o),p=a.map(y=>this.kn(e,f,y,!0));d.push(...this.createRange(m,I,p))}return d}kn(e,n,r,s){const i=new Na(e,he.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Na(e,he.empty(),n,r);return s?i.An():i}xn(e,n){const r=new RA(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new xt($t.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new id;for(const s of xa(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Da.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new id;return Da.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new id;return Da.Kt.Dt(cl(this.databaseId,n),r.Pn(function(i){const o=xa(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new id);let i=0;for(const o of xa(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&xh(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);Da.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new id;l.seed(a.un()),Da.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=od(e),s=Ml(e);return(n?r.J(tw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new Kc(h.sequenceNumber,new is(ml(h.readTime),new he(Xs(h.documentKey)),h.largestBatchId)):Kc.empty(),m=d.fields.map(([I,p])=>new Xa($t.fromServerFormat(I),p));return new Hc(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Fe(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=od(e),i=Ml(e);return this.Gn(e).next(o=>s.J(tw,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(IA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?V.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Vl(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Vl(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Vl(e);let i=new xt(so);return s.ee({index:UD,range:IDBKeyRange.only([r.indexId,this.uid,Rm(this.$n(r,n))])},(o,a)=>{i=i.add(new Na(r.indexId,n,xA(a.arrayValue),xA(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new xt(so);const s=this.Qn(n,e);if(s==null)return r;const i=Z_(n);if(i!=null){const o=e.data.field(i.fieldPath);if(xh(o))for(const a of o.arrayValue.values||[])r=r.add(new Na(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Na(n.indexId,e.key,Wf,s));return r}Jn(e,n,r,s,i){ne(CA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),I=c.getIterator();let p=Ol(m),y=Ol(I);for(;p||y;){let _=!1,v=!1;if(p&&y){const w=d(p,y);w<0?v=!0:w>0&&(_=!0)}else p!=null?v=!0:_=!0;_?(h(y),y=Ol(I)):v?(f(p),p=Ol(m)):(p=Ol(m),y=Ol(I))}}(s,i,so,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return Ml(e).ee({index:FD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>so(o,a)).filter((o,a,l)=>!a||so(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=so(o,e),l=so(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Wf,he.empty()),l=s[o+1].Vn(this.uid,Wf,he.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return so(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(DA)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Te(44426))).next(DA)}}function kA(t){return Mn(t,Th)}function Vl(t){return Mn(t,Md)}function od(t){return Mn(t,_E)}function Ml(t){return Mn(t,Vd)}function DA(t){Ae(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;gE(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new is(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KN=41943040;class mr{static withCacheSize(e){return new mr(e,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e,n){const r=t.store(As),s=t.store(Gc),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Ae(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=LD(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return V.waitFor(i).next(()=>c)}function Op(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(KN,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);class Bg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Ae(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Bg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return io(e).ee({index:Ba,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Kl(e),o=io(e);return o.add({}).next(a=>{Ae(typeof a=="number",49019);const l=new PE(a,n,r,s),c=function(m,I,p){const y=p.baseMutations.map(v=>Ch(m.yt,v)),_=p.mutations.map(v=>Ch(m.yt,v));return{userId:I,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:y,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new xt((f,m)=>Fe(f.canonicalString(),m.canonicalString()));for(const f of s){const m=LD(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,oW))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return io(e).get(n).next(r=>r?(Ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ka(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return io(e).ee({index:Ba,range:s},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=r,47524,{tr:r}),i=ka(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=zo;return io(e).ee({index:Ba,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,zo],[this.userId,Number.POSITIVE_INFINITY]);return io(e).J(Ba,n).next(r=>r.map(s=>ka(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Em(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Kl(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Xs(d);if(c===this.userId&&n.path.isEqual(f))return io(e).get(h).next(m=>{if(!m)throw Te(61480,{nr:o,batchId:h});Ae(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(ka(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Fe);const s=[];return n.forEach(i=>{const o=Em(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Kl(e).ee({range:a},(c,d,h)=>{const[f,m,I]=c,p=Xs(m);f===this.userId&&i.path.isEqual(p)?r=r.add(I):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Em(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new xt(Fe);return Kl(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,I=Xs(f);h===this.userId&&r.isPrefixOf(I)?I.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(io(e).get(i).next(o=>{if(o===null)throw Te(35274,{batchId:i});Ae(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(ka(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return GN(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Kl(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Xs(i[1]);s.push(l)}else a.done()}).next(()=>{Ae(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return QN(e,this.userId,n)}_r(e){return YN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:zo,lastStreamToken:""})}}function QN(t,e,n){const r=Em(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Kl(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function io(t){return Mn(t,As)}function Kl(t){return Mn(t,Gc)}function YN(t){return Mn(t,Eh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pl(0)}static cr(){return new pl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new pl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Ce.fromTimestamp(new _t(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Fl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Ae(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Fl(e).ee((o,a)=>{const l=Ed(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Fl(e).ee((r,s)=>{const i=Ed(s);n(i)})}lr(e){return OA(e).get(Rp).next(n=>(Ae(n!==null,2888),n))}hr(e,n){return OA(e).put(Rp,n)}Pr(e,n){return Fl(e).put(WN(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ul(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Fl(e).ee({range:s,index:MD},(o,a,l)=>{const c=Ed(a);Gh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=go(e);return n.forEach(o=>{const a=gr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=go(e);return V.forEach(n,i=>{const o=gr(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=go(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=go(e);let i=Ke();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Xs(o[1]),d=new he(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=gr(n.path),s=IDBKeyRange.bound([r],[bD(r)],!1,!0);let i=0;return go(e).ee({index:vE,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return Fl(e).get(n).next(r=>r?Ed(r):null)}}function Fl(t){return Mn(t,Qc)}function OA(t){return Mn(t,Za)}function go(t){return Mn(t,Yc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="LruGarbageCollector",JN=1048576;function VA([t,e],[n,r]){const s=Fe(t,n);return s===0?Fe(e,r):s}class xq{constructor(e){this.Ir=e,this.buffer=new xt(VA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();VA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(LA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ca(n)?ne(LA,"Ignoring IndexedDB error during garbage collection: ",n):await la(n)}await this.Vr(3e5)})}}class Rq{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Mr.ce);const r=new xq(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(NA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Wl()<=ut.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function ZN(t,e){return new Rq(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,n){this.db=e,this.garbageCollector=ZN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return qf(e,r)}removeReference(e,n,r){return qf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return qf(e,n)}br(e,n){return function(s,i){let o=!1;return YN(s).te(a=>QN(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ce.min()),go(e).delete(function(h){return[0,gr(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return qf(e,n)}Sr(e,n){const r=go(e);let s,i=Mr.ce;return r.ee({index:vE},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Mr.ce&&n(new he(Xs(s)),i),i=c,s=l):i=Mr.ce}).next(()=>{i!==Mr.ce&&n(new he(Xs(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qf(t,e){return go(t).put(function(r,s){return{targetId:0,path:gr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ta(e).put(r)}removeEntry(e,n,r){return Ta(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Dp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=jt.newInvalidDocument(n);return Ta(e).ee({index:Im,range:IDBKeyRange.only(ad(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:jt.newInvalidDocument(n)};return Ta(e).ee({index:Im,range:IDBKeyRange.only(ad(n))},(s,i)=>{r={document:this.Cr(n,i),size:Op(i)}}).next(()=>r)}getEntries(e,n){let r=Ur();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Ur(),s=new Mt(he.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Op(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let s=new xt(UA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(ad(s.first()),ad(s.last())),o=s.getIterator();let a=o.getNext();return Ta(e).ee({index:Im,range:i},(l,c,d)=>{const h=he.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&UA(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(ad(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Dp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ta(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Ur();for(const h of c){const f=this.Cr(he.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Yh(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Ur();const o=FA(n,r),a=FA(n,is.max());return Ta(e).ee({index:VD,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(he.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new kq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return MA(e).get(ew).next(n=>(Ae(!!n,20021),n))}Dr(e,n){return MA(e).put(ew,n)}Cr(e,n){if(n){const r=gq(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return jt.newInvalidDocument(e)}}function tO(t){return new Cq(t)}class kq extends eO{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Wi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new xt((i,o)=>Fe(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=wA(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Op(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=wA(this.Nr.serializer,o.convertToNoDocument(Ce.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function MA(t){return Mn(t,Ih)}function Ta(t){return Mn(t,xp)}function ad(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function FA(t,e){const n=e.documentKey.path.toArray();return[t,Dp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function UA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Fe(n[i],r[i]),s)return s;return s=Fe(n.length,r.length),s||(s=Fe(n[n.length-2],r[r.length-2]),s||Fe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jd(r.mutation,s,Fr.empty(),_t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const s=Zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=_d();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ur();const o=Ud(),a=function(){return Ud()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof qi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),jd(d.mutation,c,d.mutation.getFieldMask(),_t.now())):o.set(c.key,Fr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new Dq(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Ud();let s=new Mt((o,a)=>o-a),i=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Fr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ke()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=yN();d.forEach(f=>{if(!i.has(f)){const m=SN(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Zs());let a=qc,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ke())).next(d=>({batchId:a,changes:gN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=_d();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=_d();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,f){return new zi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,jt.newInvalidDocument(d)))});let a=_d();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&jd(d.mutation,c,Fr.empty(),_t.now()),Yh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:vn(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:jg(s.bundledQuery),readTime:vn(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(){this.overlays=new Mt(he.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Zs(),i=n.length+1,o=new he(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Mt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Zs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kE(n,r));let i=this.qr.get(n);i===void 0&&(i=Ke(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.Qr=new xt(Wn.$r),this.Ur=new xt(Wn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Wn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Wn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new rt([])),r=new Wn(n,e),s=new Wn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new rt([])),r=new Wn(n,e),s=new Wn(n,e+1);let i=Ke();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Wn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Wn.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Wn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?zo:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wn(n,0),s=new Wn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Fe);return n.forEach(s=>{const i=new Wn(s,0),o=new Wn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new Wn(new he(i),0);let a=new xt(Fe);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new Wn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Wn(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(e){this.ri=e,this.docs=function(){return new Mt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=Ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():jt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ur();const o=n.path,a=new he(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||gE(CD(d),r)<=0||(s.has(d.key)||Yh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Te(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fq(this)}getSize(e){return V.resolve(this.size)}}class Fq extends eO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(e){this.persistence=e,this.si=new Wi(n=>ul(n),Gh),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new VE,this.targetCount=0,this.ai=pl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new pl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mr(0),this.li=!1,this.li=!0,this.hi=new Lq,this.referenceDelegate=e(this),this.Pi=new Uq(this),this.indexManager=new Sq,this.remoteDocumentCache=function(s){return new Mq(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new zN(n),this.Ii=new Nq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Oq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Vq(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new jq(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class jq extends DD{constructor(e){super(),this.currentSequenceNumber=e}}class zg{constructor(e){this.persistence=e,this.Ri=new VE,this.Vi=null}static mi(e){return new zg(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=he.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Lp{constructor(e,n){this.persistence=e,this.pi=new Wi(r=>gr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=ZN(this,n)}static mi(e,n){return new Lp(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ce.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sm(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Pg("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Kh)}(e),function(l){l.createObjectStore(Eh,{keyPath:iW}),l.createObjectStore(As,{keyPath:Yb,autoIncrement:!0}).createIndex(Ba,Jb,{unique:!0}),l.createObjectStore(Gc)}(e),jA(e),function(l){l.createObjectStore(Ra)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Yc),l.deleteObjectStore(Qc),l.deleteObjectStore(Za)}(e),jA(e)),o=o.next(()=>function(l){const c=l.store(Za),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return c.put(Rp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(As).J().next(h=>{l.deleteObjectStore(As),l.createObjectStore(As,{keyPath:Yb,autoIncrement:!0}).createIndex(Ba,Jb,{unique:!0});const f=c.store(As),m=h.map(I=>f.put(I));return V.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Jc,{keyPath:mW})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Ih)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Cg,{keyPath:pW})})(e),function(l){l.createObjectStore(kg,{keyPath:gW})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Dg,{keyPath:TW});c.createIndex(nw,SW,{unique:!1}),c.createIndex(jD,bW,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(xp,{keyPath:aW});c.createIndex(Im,lW),c.createIndex(VD,cW)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(Ra))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(_E,{keyPath:yW,autoIncrement:!0}).createIndex(tw,vW,{unique:!1}),l.createObjectStore(Vd,{keyPath:_W}).createIndex(FD,wW,{unique:!1}),l.createObjectStore(Md,{keyPath:EW}).createIndex(UD,IW,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Vd).clear()}).next(()=>{n.objectStore(Md).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(wE,{keyPath:AW})})(e)})),r<18&&s>=18&&Ok()&&(o=o.next(()=>{n.objectStore(Vd).clear()}).next(()=>{n.objectStore(Md).clear()})),o}wi(e){let n=0;return e.store(Ra).ee((r,s)=>{n+=Op(s)}).next(()=>{const r={byteSize:n};return e.store(Ih).put(ew,r)})}yi(e){const n=e.store(Eh),r=e.store(As);return n.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,zo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Ba,o).next(a=>V.forEach(a,l=>{Ae(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=ka(this.serializer,l);return GN(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Yc),r=e.store(Ra);return e.store(Za).get(Rp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new rt(o),c=function(h){return[0,gr(h)]}(l);i.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:gr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,n){e.createObjectStore(Th,{keyPath:fW});const r=n.store(Th),s=new LE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:gr(l)})}};return n.store(Ra).ee({X:!0},(o,a)=>{const l=new rt(o);return i(l.popLast())}).next(()=>n.store(Gc).ee({X:!0},([o,a,l],c)=>{const d=Xs(a);return i(d.popLast())}))}Di(e){const n=e.store(Qc);return n.ee((r,s)=>{const i=Ed(s),o=WN(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(Ra),s=[];return r.ee((i,o)=>{const a=n.store(xp),l=function(h){return h.document?new he(rt.fromString(h.document.name).popFirst(5)):h.noDocument?he.fromSegments(h.noDocument.path):h.unknownDocument?he.fromSegments(h.unknownDocument.path):Te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}Fi(e,n){const r=n.store(As),s=tO(this.serializer),i=new ME(zg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ke();ka(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const d=new Hn(c),h=$g.wt(this.serializer,d),f=i.getIndexManager(d),m=Bg.wt(d,this.serializer,f,i.referenceDelegate);return new nO(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new rw(n,Mr.ce),l).next()})})}}function jA(t){t.createObjectStore(Yc,{keyPath:dW}).createIndex(vE,hW,{unique:!0}),t.createObjectStore(Qc,{keyPath:"targetId"}).createIndex(MD,uW,{unique:!0}),t.createObjectStore(Za)}const oo="IndexedDbPersistence",ov=18e5,av=5e3,lv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rO="main";class FE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!FE.v())throw new Q(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pq(this,s),this.$i=n+rO,this.serializer=new zN(l),this.Ui=new si(this.$i,this.Ni,new $q(this.serializer)),this.hi=new vq,this.Pi=new Aq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tO(this.serializer),this.Ii=new yq,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&gn(oo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(U.FAILED_PRECONDITION,lv);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Mr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ca(e))return ne(oo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(oo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return ld(e).get(Nl).next(n=>V.resolve(this.es(n)))}ts(e){return Hf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ov)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Mn(n,Jc);return r.J().next(s=>{const i=this.ss(s,ov),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):ld(e).get(Nl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,av)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Q(U.FAILED_PRECONDITION,lv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hf(e).J().next(r=>this.ss(r,av).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ne(oo,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Kh,Jc],e=>{const n=new rw(e,Mr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Hf(e).J().next(n=>this.ss(n,ov).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Bg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bq(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return $g.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ne(oo,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?PW:l===17?WD:l===16?RW:l===15?EE:l===14?zD:l===13?BD:l===12?xW:l===11?$D:void Te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new rw(a,this.ci?this.ci.next():Mr.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Q(U.FAILED_PRECONDITION,kD);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return ld(e).get(Nl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,av)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(U.FAILED_PRECONDITION,lv)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ld(e).put(Nl,n)}static v(){return si.v()}Zi(e){const n=ld(e);return n.get(Nl).next(r=>this.es(r)?(ne(oo,"Releasing primary lease."),n.delete(Nl)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(gn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;Nk()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ne(oo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gn(oo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ld(t){return Mn(t,Kh)}function Hf(t){return Mn(t,Jc)}function UE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ke(),s=Ke();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Nk()?8:ND(or())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Bq;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Wl()<=ut.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Wl()<=ut.DEBUG&&ne("QueryEngine","Query:",ql(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Wl()<=ut.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):V.resolve())}ys(e,n){if(uA(n))return V.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kp(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ke(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,kp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return uA(n)||s.isEqual(Ce.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(Wl()<=ut.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ql(n)),this.vs(e,o,n,PD(s,qc)).next(a=>a))})}Ds(e,n){let r=new xt(mN(e));return n.forEach((s,i)=>{Yh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Wl()<=ut.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ql(n)),this.ps.getDocumentsMatchingQuery(e,n,is.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="LocalStore",zq=3e8;class Wq{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Mt(Fe),this.xs=new Wi(i=>ul(i),Gh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function iO(t,e,n,r){return new Wq(t,e,n,r)}async function oO(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ke();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function qq(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=V.resolve();return f.forEach(I=>{m=m.next(()=>d.getEntry(l,I)).next(p=>{const y=c.docVersions.get(I);Ae(y!==null,48541),p.version.compareTo(y)<0&&(h.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),d.addEntry(p)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function aO(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Hq(t,e){const n=me(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(rn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(p,y,_){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=zq?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=Ur(),c=Ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(lO(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Ce.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function lO(t,e,n){let r=Ke(),s=Ke();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ur();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne($E,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function Kq(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function su(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new bi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function iu(t,e,n){const r=me(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ca(o))throw o;ne($E,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Vp(t,e,n){const r=me(t);let s=Ce.min(),i=Ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=me(l),f=h.xs.get(d);return f!==void 0?V.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,yr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ce.min(),n?i:Ke())).next(a=>(dO(r,fN(e),a),{documents:a,Qs:i})))}function cO(t,e){const n=me(t),r=me(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function uO(t,e){const n=me(t),r=n.Os.get(e)||Ce.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,PD(r,qc),Number.MAX_SAFE_INTEGER)).then(s=>(dO(n,e,s),s))}function dO(t,e,n){let r=t.Os.get(e)||Ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}async function Gq(t,e,n,r){const s=me(t);let i=Ke(),o=Ur();for(const c of n){const d=e.$s(c.metadata.name);c.document&&(i=i.add(d));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(d,h)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),l=await su(s,function(d){return yr(Ru(rt.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>lO(c,a,o).next(d=>(a.apply(c),d)).next(d=>s.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Pi.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.ks,d.qs)).next(()=>d.ks)))}async function Qq(t,e,n=Ke()){const r=await su(t,yr(jg(e.bundledQuery))),s=me(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=vn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const a=r.withResumeToken(rn.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(i,a).next(()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Pi.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ii.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="firestore_clients";function $A(t,e){return`${hO}_${t}_${e}`}const fO="firestore_mutations";function BA(t,e,n){let r=`${fO}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const mO="firestore_targets";function cv(t,e){return`${mO}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="SharedClientState";class Mp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Q(s.error.code,s.error.message))),o?new Mp(e,n,s.state,i):(gn(Gs,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Q(r.error.code,r.error.message))),i?new Bd(e,r.state,s):(gn(Gs,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=AE();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=OD(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Fp(e,i):(gn(Gs,`Failed to parse client data for instance '${e}': ${n}`),null)}}class BE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new BE(n.clientId,n.onlineState):(gn(Gs,`Failed to parse online state: ${e}`),null)}}class yw{constructor(){this.activeTargetIds=AE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uv{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Mt(Fe),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=$A(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new yw),this.ro=new RegExp(`^${hO}_${o}_([^_]*)$`),this.io=new RegExp(`^${fO}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${mO}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem($A(this.persistenceKey,r));if(s){const i=Fp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(cv(this.persistenceKey,e));if(s){const i=Bd.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cv(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ne(Gs,"READ",e,n),n}setItem(e,n){ne(Gs,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ne(Gs,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ne(Gs,"EVENT",n.key,n.newValue),n.key===this.eo)return void gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Mr.ce;if(i!=null)try{const a=JSON.parse(i);Ae(typeof a=="number",30636,{So:i}),o=a}catch(a){gn(Gs,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Mr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Mp(this.currentUser,e,n,r),i=BA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=BA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=cv(this.persistenceKey,e),i=new Bd(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Fp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Mp.Ws(new Hn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Bd.Ws(s,n)}uo(e){return BE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ne(Gs,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=AE();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class pO{constructor(){this.Mo=new yw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="ConnectivityMonitor";class WA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(zA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(zA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf=null;function vw(){return Kf===null?Kf=function(){return 268435456+Math.round(2147483648*Math.random())}():Kf++,"0x"+Kf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="RestConnection",Jq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===bh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=vw(),a=this.zo(e,n.toUriEncodedString());ne(dv,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=fi(c);return this.Jo(e,a,l,r,d).then(h=>(ne(dv,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ss(dv,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Jq[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="WebChannelConnection";class e8 extends Xq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=vw();return new Promise((a,l)=>{const c=new gD;c.setWithCredentials(!0),c.listenOnce(yD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wm.NO_ERROR:const h=c.getResponseJson();ne(fr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case wm.TIMEOUT:ne(fr,`RPC '${e}' ${o} timed out`),l(new Q(U.DEADLINE_EXCEEDED,"Request time out"));break;case wm.HTTP_ERROR:const f=c.getStatus();if(ne(fr,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const I=m==null?void 0:m.error;if(I&&I.status&&I.message){const p=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(I.status);l(new Q(p,I.message))}else l(new Q(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Q(U.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ne(fr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ne(fr,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=vw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wD(),a=_D(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ne(fr,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const I=new Zq({Yo:y=>{m?ne(fr,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(ne(fr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ne(fr,`RPC '${e}' stream ${s} sending:`,y),h.send(y))},Zo:()=>h.close()}),p=(y,_,v)=>{y.listen(_,w=>{try{v(w)}catch(x){setTimeout(()=>{throw x},0)}})};return p(h,vd.EventType.OPEN,()=>{m||(ne(fr,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),p(h,vd.EventType.CLOSE,()=>{m||(m=!0,ne(fr,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(h))}),p(h,vd.EventType.ERROR,y=>{m||(m=!0,ss(fr,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),I.a_(new Q(U.UNAVAILABLE,"The operation could not be completed")))}),p(h,vd.EventType.MESSAGE,y=>{var _;if(!m){const v=y.data[0];Ae(!!v,16349);const w=v,x=(w==null?void 0:w.error)||((_=w[0])==null?void 0:_.error);if(x){ne(fr,`RPC '${e}' stream ${s} received error:`,x);const P=x.status;let L=function(R){const C=Tn[R];if(C!==void 0)return RN(C)}(P),A=x.message;L===void 0&&(L=U.INTERNAL,A="Unknown error status: "+P+" with message "+x.message),m=!0,I.a_(new Q(L,A)),h.close()}else ne(fr,`RPC '${e}' stream ${s} received:`,v),I.u_(v)}}),p(a,vD.STAT_EVENT,y=>{y.stat===Q_.PROXY?ne(fr,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===Q_.NOPROXY&&ne(fr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(){return typeof window<"u"?window:null}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){return new oq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="PersistentStream";class yO{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(gn(n.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ne(qA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ne(qA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t8 extends yO{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cq(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?vn(o.readTime):Ce.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=hw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Pp(l)?{documents:MN(i,l)}:{query:Ug(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DN(i,o.resumeToken);const c=uw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ce.min())>0){a.readTime=ru(i,o.snapshotVersion.toTimestamp());const c=uw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=dq(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=hw(this.serializer),n.removeTarget=e,this.q_(n)}}class n8 extends yO{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uq(e.writeResults,e.commitTime),r=vn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=hw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ch(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{}class s8 extends r8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,dw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,dw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class i8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gn(n),this.aa=!1):ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="RemoteStore";class o8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{da(this)&&(ne(gl,"Restarting streams for network reachability change."),await async function(l){const c=me(l);c.Ea.add(4),await ku(c),c.Ra.set("Unknown"),c.Ea.delete(4),await ef(c)}(this))})}),this.Ra=new i8(r,s)}}async function ef(t){if(da(t))for(const e of t.da)await e(!0)}async function ku(t){for(const e of t.da)await e(!1)}function Wg(t,e){const n=me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),HE(n)?qE(n):Nu(n).O_()&&WE(n,e))}function ou(t,e){const n=me(t),r=Nu(n);n.Ia.delete(e),r.O_()&&vO(n,e),n.Ia.size===0&&(r.O_()?r.L_():da(n)&&n.Ra.set("Unknown"))}function WE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nu(t).Y_(e)}function vO(t,e){t.Va.Ue(e),Nu(t).Z_(e)}function qE(t){t.Va=new nq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Nu(t).start(),t.Ra.ua()}function HE(t){return da(t)&&!Nu(t).x_()&&t.Ia.size>0}function da(t){return me(t).Ea.size===0}function _O(t){t.Va=void 0}async function a8(t){t.Ra.set("Online")}async function l8(t){t.Ia.forEach((e,n)=>{WE(t,e)})}async function c8(t,e){_O(t),HE(t)?(t.Ra.ha(e),qE(t)):t.Ra.set("Unknown")}async function u8(t,e,n){if(t.Ra.set("Online"),e instanceof kN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){ne(gl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Up(t,r)}else if(e instanceof xm?t.Va.Ze(e):e instanceof CN?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await aO(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(rn.EMPTY_BYTE_STRING,d.snapshotVersion)),vO(i,l);const h=new bi(d.target,l,c,d.sequenceNumber);WE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne(gl,"Failed to raise snapshot:",r),await Up(t,r)}}async function Up(t,e,n){if(!ca(e))throw e;t.Ea.add(1),await ku(t),t.Ra.set("Offline"),n||(n=()=>aO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(gl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ef(t)})}function wO(t,e){return e().catch(n=>Up(t,n,e))}async function Du(t){const e=me(t),n=ta(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zo;for(;d8(e);)try{const s=await Kq(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,h8(e,s)}catch(s){await Up(e,s)}EO(e)&&IO(e)}function d8(t){return da(t)&&t.Ta.length<10}function h8(t,e){t.Ta.push(e);const n=ta(t);n.O_()&&n.X_&&n.ea(e.mutations)}function EO(t){return da(t)&&!ta(t).x_()&&t.Ta.length>0}function IO(t){ta(t).start()}async function f8(t){ta(t).ra()}async function m8(t){const e=ta(t);for(const n of t.Ta)e.ea(n.mutations)}async function p8(t,e,n){const r=t.Ta.shift(),s=CE.from(r,e,n);await wO(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Du(t)}async function g8(t,e){e&&ta(t).X_&&await async function(r,s){if(function(o){return xN(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();ta(r).B_(),await wO(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Du(r)}}(t,e),EO(t)&&IO(t)}async function HA(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ne(gl,"RemoteStore received new credentials");const r=da(n);n.Ea.add(3),await ku(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ef(n)}async function _w(t,e){const n=me(t);e?(n.Ea.delete(2),await ef(n)):e||(n.Ea.add(2),await ku(n),n.Ra.set("Unknown"))}function Nu(t){return t.ma||(t.ma=function(n,r,s){const i=me(n);return i.sa(),new t8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:a8.bind(null,t),t_:l8.bind(null,t),r_:c8.bind(null,t),H_:u8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),HE(t)?qE(t):t.Ra.set("Unknown")):(await t.ma.stop(),_O(t))})),t.ma}function ta(t){return t.fa||(t.fa=function(n,r,s){const i=me(n);return i.sa(),new n8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:f8.bind(null,t),r_:g8.bind(null,t),ta:m8.bind(null,t),na:p8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Du(t)):(await t.fa.stop(),t.Ta.length>0&&(ne(gl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new KE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ou(t,e){if(gn("AsyncQueue",`${e}: ${t}`),ca(t))return new Q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{static emptySet(e){return new el(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=_d(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new el;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.ga=new Mt(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class yl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new yl(e,n,el.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class v8{constructor(){this.queries=GA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=me(n),i=s.queries;s.queries=GA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Q(U.ABORTED,"Firestore shutting down"))}}function GA(){return new Wi(t=>hN(t),Qh)}async function GE(t,e){const n=me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new y8,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ou(o,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&YE(n)}async function QE(t,e){const n=me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _8(t,e){const n=me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&YE(n)}function w8(t,e,n){const r=me(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function YE(t){t.Ca.forEach(e=>{e.next()})}var ww,QA;(QA=ww||(ww={})).Ma="default",QA.Cache="cache";class JE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ww.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.serializer=e}$s(e){return ii(this.serializer,e)}Us(e){return e.metadata.exists?Fg(this.serializer,e.document,!1):jt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return vn(e)}}class XE{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=SO(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=rt.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new YA(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Ke()).add(i);n.set(o,a)}}return n}async ja(e){const n=await Gq(e,new YA(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await Qq(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function SO(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.key=e}}class AO{constructor(e){this.key=e}}class xO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=mN(e),this.tu=new el(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new KA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Yh(this.query,h)?h:null,I=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?I!==p&&(r.track({type:3,doc:m}),y=!0):this.su(f,m)||(r.track({type:2,doc:m}),y=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),y=!0):f&&!m&&(r.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(m?(o=o.add(m),i=p?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,I){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:y})}};return p(m)-p(I)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new yl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new KA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new AO(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new bO(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ha="SyncEngine";class E8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class I8{constructor(e){this.key=e,this.hu=!1}}class T8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Wi(a=>hN(a),Qh),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(he.comparator),this.Au=new Map,this.Ru=new VE,this.Vu={},this.mu=new Map,this.fu=pl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S8(t,e,n=!0){const r=qg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await RO(r,e,n,!0),s}async function b8(t,e){const n=qg(t);await RO(n,e,!0,!1)}async function RO(t,e,n,r){const s=await su(t.localStore,yr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await ZE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Wg(t.remoteStore,s),a}async function ZE(t,e,n,r,s){t.pu=(h,f,m)=>async function(p,y,_,v){let w=y.view.ru(_);w.Cs&&(w=await Vp(p.localStore,y.query,!1).then(({documents:A})=>y.view.ru(A,w)));const x=v&&v.targetChanges.get(y.targetId),P=v&&v.targetMismatches.get(y.targetId)!=null,L=y.view.applyChanges(w,p.isPrimaryClient,x,P);return Ew(p,y.targetId,L.au),L.snapshot}(t,h,f,m);const i=await Vp(t.localStore,e,!0),o=new xO(e,i.Qs),a=o.ru(i.documents),l=Zh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Ew(t,n,c.au);const d=new E8(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function A8(t,e,n){const r=me(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Qh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await iu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ou(r.remoteStore,s.targetId),au(r,s.targetId)}).catch(la)):(au(r,s.targetId),await iu(r.localStore,s.targetId,!0))}async function x8(t,e){const n=me(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ou(n.remoteStore,r.targetId))}async function R8(t,e,n){const r=rI(t);try{const s=await function(o,a){const l=me(o),c=_t.now(),d=a.reduce((m,I)=>m.add(I.key),Ke());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let I=Ur(),p=Ke();return l.Ns.getEntries(m,d).next(y=>{I=y,I.forEach((_,v)=>{v.isValidDocument()||(p=p.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,I)).next(y=>{h=y;const _=[];for(const v of a){const w=ZW(v,h.get(v.key).overlayedDocument);w!=null&&_.push(new qi(v.key,w,tN(w.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)}).next(y=>{f=y;const _=y.applyToLocalDocumentSet(h,p);return l.documentOverlayCache.saveOverlays(m,y.batchId,_)})}).then(()=>({batchId:f.batchId,changes:gN(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Mt(Fe)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Hi(r,s.changes),await Du(r.remoteStore)}catch(s){const i=Ou(s,"Failed to persist write");n.reject(i)}}async function PO(t,e){const n=me(t);try{const r=await Hq(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ae(o.hu,14607):s.removedDocuments.size>0&&(Ae(o.hu,42227),o.hu=!1))}),await Hi(n,r,e)}catch(r){await la(r)}}function JA(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=me(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&YE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P8(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Mt(he.comparator);o=o.insert(i,jt.newNoDocument(i,Ce.min()));const a=Ke().add(i),l=new Xh(Ce.min(),new Map,new Mt(Fe),o,a);await PO(r,l),r.du=r.du.remove(i),r.Au.delete(e),nI(r)}else await iu(r.localStore,e,!1).then(()=>au(r,e,n)).catch(la)}async function C8(t,e){const n=me(t),r=e.batch.batchId;try{const s=await qq(n.localStore,e);tI(n,r,null),eI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hi(n,s)}catch(s){await la(s)}}async function k8(t,e,n){const r=me(t);try{const s=await function(o,a){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ae(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);tI(r,e,n),eI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hi(r,s)}catch(s){await la(s)}}async function D8(t,e){const n=me(t);da(n.remoteStore)||ne(ha,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=me(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===zo)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=Ou(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function eI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function tI(t,e,n){const r=me(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function au(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||CO(t,r)})}function CO(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ou(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),nI(t))}function Ew(t,e,n){for(const r of n)r instanceof bO?(t.Ru.addReference(r.key,e),N8(t,r)):r instanceof AO?(ne(ha,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||CO(t,r.key)):Te(19791,{wu:r})}function N8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ne(ha,"New document in limbo: "+n),t.Eu.add(r),nI(t))}function nI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(rt.fromString(e)),r=t.fu.next();t.Au.set(r,new I8(n)),t.du=t.du.insert(n,r),Wg(t.remoteStore,new bi(yr(Ru(n.path)),r,"TargetPurposeLimboResolution",Mr.ce))}}async function Hi(t,e,n){const r=me(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=jE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=me(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>V.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!ca(h))throw h;ne($E,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),I=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(I);d.Ms=d.Ms.insert(f,p)}}}(r.localStore,i))}async function O8(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ne(ha,"User change. New user:",e.toKey());const r=await oO(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Q(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hi(n,r.Ls)}}function L8(t,e){const n=me(t),r=n.Au.get(e);if(r&&r.hu)return Ke().add(r.key);{let s=Ke();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function V8(t,e){const n=me(t),r=await Vp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Ew(n,e.targetId,s.au),s}async function M8(t,e){const n=me(t);return uO(n.localStore,e).then(r=>Hi(n,r))}async function F8(t,e,n,r){const s=me(t),i=await function(a,l){const c=me(a),d=me(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Du(s.remoteStore):n==="acknowledged"||n==="rejected"?(tI(s,e,r||null),eI(s,e),function(a,l){me(me(a).mutationQueue).ir(l)}(s.localStore,e)):Te(6720,"Unknown batchState",{Su:n}),await Hi(s,i)):ne(ha,"Cannot apply mutation batch with id: "+e)}async function U8(t,e){const n=me(t);if(qg(n),rI(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await XA(n,r.toArray());n.gu=!0,await _w(n.remoteStore,!0);for(const i of s)Wg(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(au(n,o),iu(n.localStore,o,!0))),ou(n.remoteStore,o)}),await s,await XA(n,r),function(o){const a=me(o);a.Au.forEach((l,c)=>{ou(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Mt(he.comparator)}(n),n.gu=!1,await _w(n.remoteStore,!1)}}async function XA(t,e,n){const r=me(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await su(r.localStore,yr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await V8(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await cO(r.localStore,o);a=await su(r.localStore,c),await ZE(r,kO(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function kO(t){return cN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function j8(t){return function(n){return me(me(n).persistence).Ts()}(me(t).localStore)}async function $8(t,e,n,r){const s=me(t);if(s.gu)return void ne(ha,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await uO(s.localStore,fN(i[0])),a=Xh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",rn.EMPTY_BYTE_STRING);await Hi(s,o,a);break}case"rejected":await iu(s.localStore,e,!0),au(s,e,r);break;default:Te(64155,n)}}async function B8(t,e,n){const r=qg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ne(ha,"Adding an already active target "+s);continue}const i=await cO(r.localStore,s),o=await su(r.localStore,i);await ZE(r,kO(i),o.targetId,!1,o.resumeToken),Wg(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await iu(r.localStore,s,!1).then(()=>{ou(r.remoteStore,s),au(r,s)}).catch(la)}}function qg(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P8.bind(null,e),e.Pu.H_=_8.bind(null,e.eventManager),e.Pu.yu=w8.bind(null,e.eventManager),e}function rI(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k8.bind(null,e),e}function z8(t,e,n){const r=me(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(m,I){const p=me(m),y=vn(I.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",_=>p.Ii.getBundleMetadata(_,I.id)).then(_=>!!_&&_.createTime.compareTo(y)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(SO(l));const c=new XE(l,o.serializer);let d=await o.bu();for(;d;){const f=await c.Ga(d);f&&a._updateProgress(f),d=await o.bu()}const h=await c.ja(i.localStore);return await Hi(i,h.Ha,void 0),await function(m,I){const p=me(m);return p.persistence.runTransaction("Save bundle","readwrite",y=>p.Ii.saveBundleMetadata(y,I))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return ss(ha,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Al(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iO(this.persistence,new sO,e.initialUser,this.serializer)}Cu(e){return new ME(zg.mi,this.serializer)}Du(e){return new pO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lu.provider={build:()=>new lu};class sI extends lu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ae(this.persistence.referenceDelegate instanceof Lp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new XN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new ME(r=>Lp.mi(r,n),this.serializer)}}class iI extends lu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await rI(this.xu.syncEngine),await Du(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return iO(this.persistence,new sO,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new XN(r,e.asyncQueue,n)}Mu(e,n){const r=new rW(n,this.persistence);return new nW(e.asyncQueue,r)}Cu(e){const n=UE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new FE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,gO(),Pm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new pO}}class DO extends iI{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof uv&&(this.sharedClientState.syncEngine={Co:F8.bind(null,n),vo:$8.bind(null,n),Fo:B8.bind(null,n),Ts:j8.bind(null,n),Do:M8.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await U8(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=gO();if(!uv.v(n))throw new Q(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=UE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uv(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class na{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O8.bind(null,this.syncEngine),await _w(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v8}()}createDatastore(e){const n=Al(e.databaseInfo.databaseId),r=function(i){return new e8(i)}(e.databaseInfo);return function(i,o,a,l){return new s8(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new o8(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JA(this.syncEngine,n,0),function(){return WA.v()?new WA:new Yq}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new T8(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=me(s);ne(gl,"RemoteStore shutting down."),i.Ea.add(5),await ku(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}na.provider={build:()=>new na};function ZA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Qn,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const s=await this.$u(r);return new TO(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new TO(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new Q(U.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Q(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=me(s),a={documents:i.map(h=>Ph(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,rt.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const f=lq(o.serializer,h);c.set(f.key.toString(),f)});const d=[];return i.forEach(h=>{const f=c.get(h.toString());Ae(!!f,55234,{key:h}),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=he.fromPath(r);this.mutations.push(new RE(s,this.precondition(s)))}),await async function(r,s){const i=me(r),o={writes:s.map(a=>Ch(i.serializer,a))};await i.Go("Commit",i.serializer.databaseId,rt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});n=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Q(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ce.min())?Gt.exists(!1):Gt.updateTime(n):Gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ce.min()))throw new Q(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gt.updateTime(n)}return Gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new zE(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new H8(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Yu(s)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!Hh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xN(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="FirestoreClient";class G8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Hn.UNAUTHENTICATED,this.clientId=xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ne(ra,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne(ra,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ou(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hv(t,e){t.asyncQueue.verifyOperationInProgress(),ne(ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await oO(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ex(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oI(t);ne(ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>HA(e.remoteStore,s)),t._onlineComponents=e}async function oI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(ra,"Using user provided OfflineComponentProvider");try{await hv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ss("Error using user provided cache. Falling back to memory cache: "+n),await hv(t,new lu)}}else ne(ra,"Using default OfflineComponentProvider"),await hv(t,new sI(void 0));return t._offlineComponents}async function Kg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(ra,"Using user provided OnlineComponentProvider"),await ex(t,t._uninitializedComponentsProvider._online)):(ne(ra,"Using default OnlineComponentProvider"),await ex(t,new na))),t._onlineComponents}function NO(t){return oI(t).then(e=>e.persistence)}function Lu(t){return oI(t).then(e=>e.localStore)}function OO(t){return Kg(t).then(e=>e.remoteStore)}function aI(t){return Kg(t).then(e=>e.syncEngine)}function LO(t){return Kg(t).then(e=>e.datastore)}async function cu(t){const e=await Kg(t),n=e.eventManager;return n.onListen=S8.bind(null,e.syncEngine),n.onUnlisten=A8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x8.bind(null,e.syncEngine),n}function Q8(t){return t.asyncQueue.enqueue(async()=>{const e=await NO(t),n=await OO(t);return e.setNetworkEnabled(!0),function(s){const i=me(s);return i.Ea.delete(0),ef(i)}(n)})}function Y8(t){return t.asyncQueue.enqueue(async()=>{const e=await NO(t),n=await OO(t);return e.setNetworkEnabled(!1),async function(s){const i=me(s);i.Ea.add(0),await ku(i),i.Ra.set("Offline")}(n)})}function J8(t,e){const n=new Qn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=me(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Q(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ou(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await Lu(t),e,n)),n.promise}function VO(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Hg({next:f=>{d.Nu(),o.enqueueAndForget(()=>QE(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new Q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new Q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new JE(Ru(a.path),d,{includeMetadataChanges:!0,qa:!0});return GE(i,h)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}function X8(t,e){const n=new Qn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Vp(s,i,!0),l=new xO(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ou(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await Lu(t),e,n)),n.promise}function MO(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Hg({next:f=>{d.Nu(),o.enqueueAndForget(()=>QE(i,h)),f.fromCache&&l.source==="server"?c.reject(new Q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new JE(a,d,{includeMetadataChanges:!0,qa:!0});return GE(i,h)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}function Z8(t,e,n){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await LO(t);r.resolve(async function(o,a,l){var p;const c=me(o),{request:d,gt:h,parent:f}=FN(c.serializer,uN(a),l);c.connection.$o||delete d.parent;const m=(await c.Ho("RunAggregationQuery",c.serializer.databaseId,f,d,1)).filter(y=>!!y.result);Ae(m.length===1,64727);const I=(p=m[0].result)==null?void 0:p.aggregateFields;return Object.keys(I).reduce((y,_)=>(y[h[_]]=I[_],y),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function e7(t,e){const n=new Hg(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){me(s).Ca.add(i),i.next()}(await cu(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){me(s).Ca.delete(i)}(await cu(t),n))}}function t7(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?PN().encode(o):o,function(d,h){return new W8(d,h)}(function(d,h){if(d instanceof Uint8Array)return ZA(d,h);if(d instanceof ArrayBuffer)return ZA(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Al(e));t.asyncQueue.enqueueAndForget(async()=>{z8(await aI(t),s,r)})}function n7(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=me(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ii.getNamedQuery(o,s))}(await Lu(t),e))}function FO(t,e){return function(r,s){return new q8(r,s)}(t,e)}function r7(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=me(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,f,m,I,p){h=[...h],f=[...f],h.sort(m),f.sort(m);const y=h.length,_=f.length;let v=0,w=0;for(;v<_&&w<y;){const x=m(h[w],f[v]);x<0?p(h[w++]):x>0?I(f[v++]):(v++,w++)}for(;v<_;)I(f[v++]);for(;w<y;)p(h[w++])}(c,s,Xz,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>V.waitFor(a)))}(await Lu(t),e))}function s7(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){me(r).Fs.Vs=s}(await Lu(t),e))}function i7(t){return t.asyncQueue.enqueue(async()=>function(n){const r=me(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await Lu(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="firestore.googleapis.com",nx=!0;class rx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jO,this.ssl=nx}else this.host=e.host,this.ssl=e.ssl??nx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JN)throw new Q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UO(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SD;switch(r.type){case"firstParty":return new qz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tx.get(n);r&&(ne("ComponentProvider","Removing Datastore"),tx.delete(n),r.terminate())}(this),Promise.resolve()}}function $O(t,e,n,r={}){var c;t=st(t,tf);const s=fi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Sg(`https://${a}`),iE("Firestore",!0)),i.host!==jO&&i.host!==a&&ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Vi(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Hn.MOCK_USER;else{d=kk(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Hn(f)}t._authCredentials=new Bz(new TD(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vn(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bl(n,bt._jsonSchema))return new bt(e,r||null,new he(rt.fromString(n.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:bn("string",bt._jsonSchemaVersion),referencePath:bn("string")};class Ds extends Vn{constructor(e,n,r){super(e,n,Ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new he(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function De(t,e,...n){if(t=it(t),pE("collection","path",e),t instanceof tf){const r=rt.fromString(e,...n);return qb(r),new Ds(t,null,r)}{if(!(t instanceof bt||t instanceof Ds))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return qb(r),new Ds(t.firestore,null,r)}}function o7(t,e){if(t=st(t,tf),pE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Q(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vn(t,null,function(r){return new zi(rt.emptyPath(),r)}(e))}function ke(t,e,...n){if(t=it(t),arguments.length===1&&(e=xg.newId()),pE("doc","path",e),t instanceof tf){const r=rt.fromString(e,...n);return Wb(r),new bt(t,null,new he(r))}{if(!(t instanceof bt||t instanceof Ds))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return Wb(r),new bt(t.firestore,t instanceof Ds?t.converter:null,new he(r))}}function a7(t,e){return t=it(t),e=it(e),(t instanceof bt||t instanceof Ds)&&(e instanceof bt||e instanceof Ds)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function lI(t,e){return t=it(t),e=it(e),t instanceof Vn&&e instanceof Vn&&t.firestore===e.firestore&&Qh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="AsyncQueue";class ix{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zE(this,"async_queue_retry"),this._c=()=>{const r=Pm();r&&ne(sx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ca(e))throw e;ne(sx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,gn("INTERNAL UNHANDLED ERROR: ",ox(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=KE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:ox(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ox(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class BO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=-1;class Pt extends tf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ix,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ix(e),this._firestoreClient=void 0,await e}}}function zO(t,e,n){n||(n=bh);const r=Su(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Vi(i,e))return s;throw new Q(U.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Q(U.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JN)throw new Q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fi(e.host)&&Sg(e.host),r.initialize({options:e,instanceIdentifier:n})}function c7(t,e){const n=typeof t=="object"?t:lE(),r=typeof t=="string"?t:e||bh,s=Su(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=sE("firestore");i&&$O(s,...i)}return s}function Qt(t){if(t._terminated)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WO(t),t._firestoreClient}function WO(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new DW(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,UO(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new G8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function u7(t,e){ss("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return qO(t,na.provider,{build:r=>new iI(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function d7(t){ss("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();qO(t,na.provider,{build:n=>new DO(n,e.cacheSizeBytes)})}function qO(t,e,n){if((t=st(t,Pt))._firestoreClient||t._terminated)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Q(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},WO(t)}function h7(t){if(t._initialized&&!t._terminated)throw new Q(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!si.v())return Promise.resolve();const s=r+rO;await si.delete(s)}(UE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function f7(t){return function(n){const r=new Qn;return n.asyncQueue.enqueueAndForget(async()=>D8(await aI(n),r)),r.promise}(Qt(t=st(t,Pt)))}function cI(t){return Q8(Qt(t=st(t,Pt)))}function uI(t){return Y8(Qt(t=st(t,Pt)))}function m7(t){return M5(t.app,"firestore",t._databaseId.database),t._delete()}function Iw(t,e){const n=Qt(t=st(t,Pt)),r=new BO;return t7(n,t._databaseId,e,r),r}function HO(t,e){return n7(Qt(t=st(t,Pt)),e).then(n=>n?new Vn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class KO{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(rn.fromBase64String(e))}catch(n){throw new Q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bl(e,Lr._jsonSchema))return Lr.fromBase64String(e.bytes)}}Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:bn("string",Lr._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function p7(){return new fa(X_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ns._jsonSchemaVersion}}static fromJSON(e){if(bl(e,Ns._jsonSchema))return new Ns(e.latitude,e.longitude)}}Ns._jsonSchemaVersion="firestore/geoPoint/1.0",Ns._jsonSchema={type:bn("string",Ns._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bl(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gs(e.vectorValues);throw new Q(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:bn("string",gs._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=/^__.*__$/;class y7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pu(e,this.data,n,this.fieldTransforms)}}class GO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:t})}}class Gg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QO(this.Ac)&&g7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class v7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Al(e)}Cc(e,n,r,s=!1){return new Gg({Ac:e,methodName:n,Dc:r,path:$t.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(t){const e=t._freezeSettings(),n=Al(t._databaseId);return new v7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qg(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);yI("Data must be an object, but it was:",o,r);const a=XO(r,o);let l,c;if(i.merge)l=new Fr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=kh(e,h,n);if(!o.contains(f))throw new Q(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);e2(d,f)||d.push(f)}l=new Fr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new y7(new tr(a),l,c)}class nf extends ma{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nf}}function YO(t,e,n){return new Gg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dI extends ma{_toFieldTransform(e){return new Jh(e.path,new tu)}isEqual(e){return e instanceof dI}}class hI extends ma{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=YO(this,e,!0),r=this.vc.map(i=>Rl(i,n)),s=new dl(r);return new Jh(e.path,s)}isEqual(e){return e instanceof hI&&Vi(this.vc,e.vc)}}class fI extends ma{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=YO(this,e,!0),r=this.vc.map(i=>Rl(i,n)),s=new hl(r);return new Jh(e.path,s)}isEqual(e){return e instanceof fI&&Vi(this.vc,e.vc)}}class mI extends ma{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new nu(e.serializer,_N(e.serializer,this.Fc));return new Jh(e.path,n)}isEqual(e){return e instanceof mI&&this.Fc===e.Fc}}function pI(t,e,n,r){const s=t.Cc(1,e,n);yI("Data must be an object, but it was:",s,r);const i=[],o=tr.empty();ua(r,(l,c)=>{const d=Yg(e,l,n);c=it(c);const h=s.yc(d);if(c instanceof nf)i.push(d);else{const f=Rl(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Fr(i);return new GO(o,a,s.fieldTransforms)}function gI(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[kh(e,r,n)],l=[s];if(i.length%2!=0)throw new Q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(kh(e,i[f])),l.push(i[f+1]);const c=[],d=tr.empty();for(let f=a.length-1;f>=0;--f)if(!e2(c,a[f])){const m=a[f];let I=l[f];I=it(I);const p=o.yc(m);if(I instanceof nf)c.push(m);else{const y=Rl(I,p);y!=null&&(c.push(m),d.set(m,y))}}const h=new Fr(c);return new GO(d,h,o.fieldTransforms)}function JO(t,e,n,r=!1){return Rl(n,t.Cc(r?4:3,e))}function Rl(t,e){if(ZO(t=it(t)))return yI("Unsupported field value:",e,t),XO(t,e);if(t instanceof ma)return function(r,s){if(!QO(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Rl(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _N(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_t.fromDate(r);return{timestampValue:ru(s.serializer,i)}}if(r instanceof _t){const i=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(s.serializer,i)}}if(r instanceof Ns)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lr)return{bytesValue:DN(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:NE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gs)return function(o,a){return{mapValue:{fields:{[IE]:{stringValue:TE},[Xc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return xE(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Rg(r)}`)}(t,e)}function XO(t,e){const n={};return HD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ua(t,(r,s)=>{const i=Rl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ZO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Ns||t instanceof Lr||t instanceof bt||t instanceof ma||t instanceof gs)}function yI(t,e,n){if(!ZO(n)||!xD(n)){const r=Rg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function kh(t,e,n){if((e=it(e))instanceof fa)return e._internalPath;if(typeof e=="string")return Yg(t,e);throw jp("Field path arguments must be of type string or ",t,!1,void 0,n)}const _7=new RegExp("[~\\*/\\[\\]]");function Yg(t,e,n){if(e.search(_7)>=0)throw jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fa(...e.split("."))._internalPath}catch{throw jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Q(U.INVALID_ARGUMENT,a+t+l)}function e2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class w7 extends Dh{data(){return super.data()}}function Jg(t,e){return typeof e=="string"?Yg(t,e):e instanceof fa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vI{}class Vu extends vI{}function $e(t,e,...n){let r=[];e instanceof vI&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Pl).length,a=i.filter(l=>l instanceof Mu).length;if(o>1||o>0&&a>0)throw new Q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mu extends Vu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mu(e,n,r)}_apply(e){const n=this._parse(e);return r2(e._query,n),new Vn(e.firestore,e.converter,cw(e._query,n))}_parse(e){const n=xl(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){lx(h,d);const I=[];for(const p of h)I.push(ax(l,i,p));f={arrayValue:{values:I}}}else f=ax(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||lx(h,d),f=JO(a,o,h,d==="in"||d==="not-in");return ht.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Le(t,e,n){const r=e,s=Jg("where",t);return Mu._create(s,r,n)}class Pl extends vI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pl(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:St.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)r2(o,l),o=cw(o,l)}(e._query,n),new Vn(e.firestore,e.converter,cw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function E7(...t){return t.forEach(e=>s2("or",e)),Pl._create("or",t)}function I7(...t){return t.forEach(e=>s2("and",e)),Pl._create("and",t)}class Xg extends Vu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rh(i,o)}(e._query,this._field,this._direction);return new Vn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new zi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Wo(t,e="asc"){const n=e,r=Jg("orderBy",t);return Xg._create(r,n)}class rf extends Vu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new rf(e,n,r)}_apply(e){return new Vn(e.firestore,e.converter,kp(e._query,this._limit,this._limitType))}}function Fu(t){return RD("limit",t),rf._create("limit",t,"F")}function T7(t){return RD("limitToLast",t),rf._create("limitToLast",t,"L")}class sf extends Vu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new sf(e,n,r)}_apply(e){const n=n2(e,this.type,this._docOrFields,this._inclusive);return new Vn(e.firestore,e.converter,function(s,i){return new zi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function S7(...t){return sf._create("startAt",t,!0)}function b7(...t){return sf._create("startAfter",t,!1)}class of extends Vu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new of(e,n,r)}_apply(e){const n=n2(e,this.type,this._docOrFields,this._inclusive);return new Vn(e.firestore,e.converter,function(s,i){return new zi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function A7(...t){return of._create("endBefore",t,!1)}function x7(...t){return of._create("endAt",t,!0)}function n2(t,e,n,r){if(n[0]=it(n[0]),n[0]instanceof Dh)return function(i,o,a,l,c){if(!l)throw new Q(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Tc(i))if(h.field.isKeyField())d.push(cl(o,l.key));else{const f=l.data.field(h.field);if(Ng(f))throw new Q(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new Q(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new ea(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=xl(t.firestore);return function(o,a,l,c,d,h){const f=o.explicitOrderBy;if(d.length>f.length)throw new Q(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let I=0;I<d.length;I++){const p=d[I];if(f[I].field.isKeyField()){if(typeof p!="string")throw new Q(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof p}`);if(!bE(o)&&p.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${p}' contains a slash.`);const y=o.path.child(rt.fromString(p));if(!he.isDocumentKey(y))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const _=new he(y);m.push(cl(a,_))}else{const y=JO(l,c,p);m.push(y)}}return new ea(m,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function ax(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new Q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bE(e)&&n.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!he.isDocumentKey(r))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cl(t,new he(r))}if(n instanceof bt)return cl(t,n._key);throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rg(n)}.`)}function lx(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r2(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function s2(t,e){if(!(e instanceof Mu||e instanceof Pl))throw new Q(U.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class _I{convertValue(e,n="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ua(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ht(o.doubleValue));return new gs(n)}convertGeoPoint(e){return new Ns(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Og(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Sh(e));default:return null}}convertTimestamp(e){const n=Fi(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);Ae(BN(r),9688,{name:e});const s=new Jo(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wI extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){return new uu("sum",kh("sum",t))}function P7(t){return new uu("avg",kh("average",t))}function i2(){return new uu("count")}function C7(t,e){var n,r;return t instanceof uu&&e instanceof uu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function k7(t,e){return lI(t.query,e.query)&&Vi(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="NOT SUPPORTED";class Ai{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends Dh{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function D7(t,e,n){if(bl(e,Wr._jsonSchema)){if(e.bundle===o2)throw new Q(U.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Al(t._databaseId),s=FO(e.bundle,r),i=s.Wu(),o=new XE(s.getMetadata(),r);for(const d of i)o.Ga(d);const a=o.documents;if(a.length!==1)throw new Q(U.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=Fg(r,a[0].document),c=new he(rt.fromString(e.bundleName));return new Wr(t,new wI(t),c,l,new Ai(!1,!1),n||null)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:bn("string",Wr._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};class zd extends Wr{data(e={}){return super.data(e)}}class qr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ai(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zd(this._firestore,this._userDataWriter,r.key,r,new Ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new zd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ai(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new zd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ai(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:O7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function N7(t,e,n){if(bl(e,qr._jsonSchema)){if(e.bundle===o2)throw new Q(U.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Al(t._databaseId),s=FO(e.bundle,r),i=s.Wu(),o=new XE(s.getMetadata(),r);for(const f of i)o.Ga(f);if(o.queries.length!==1)throw new Q(U.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=jg(o.queries[0].bundledQuery),l=o.documents;let c=new el;l.map(f=>{const m=Fg(r,f.document);c=c.add(m)});const d=yl.fromInitialDocuments(a,c,Ke(),!1,!1),h=new Vn(t,n||null,a);return new qr(t,new wI(t),h,d)}}function O7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}function L7(t,e){return t instanceof Wr&&e instanceof Wr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qr&&e instanceof qr&&t._firestore===e._firestore&&lI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){t=st(t,bt);const e=st(t.firestore,Pt);return VO(Qt(e),t._key).then(n=>EI(e,t,n))}qr._jsonSchemaVersion="firestore/querySnapshot/1.0",qr._jsonSchema={type:bn("string",qr._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class pa extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function V7(t){t=st(t,bt);const e=st(t.firestore,Pt),n=Qt(e),r=new pa(e);return J8(n,t._key).then(s=>new Wr(e,r,t._key,s,new Ai(s!==null&&s.hasLocalMutations,!0),t.converter))}function M7(t){t=st(t,bt);const e=st(t.firestore,Pt);return VO(Qt(e),t._key,{source:"server"}).then(n=>EI(e,t,n))}function We(t){t=st(t,Vn);const e=st(t.firestore,Pt),n=Qt(e),r=new pa(e);return t2(t._query),MO(n,t._query).then(s=>new qr(e,r,t,s))}function F7(t){t=st(t,Vn);const e=st(t.firestore,Pt),n=Qt(e),r=new pa(e);return X8(n,t._query).then(s=>new qr(e,r,t,s))}function U7(t){t=st(t,Vn);const e=st(t.firestore,Pt),n=Qt(e),r=new pa(e);return MO(n,t._query,{source:"server"}).then(s=>new qr(e,r,t,s))}function mn(t,e,n){t=st(t,bt);const r=st(t.firestore,Pt),s=Zg(t.converter,e,n);return Uu(r,[Qg(xl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gt.none())])}function An(t,e,n,...r){t=st(t,bt);const s=st(t.firestore,Pt),i=xl(s);let o;return o=typeof(e=it(e))=="string"||e instanceof fa?gI(i,"updateDoc",t._key,e,n,r):pI(i,"updateDoc",t._key,e),Uu(s,[o.toMutation(t._key,Gt.exists(!0))])}function Kn(t){return Uu(st(t.firestore,Pt),[new Cu(t._key,Gt.none())])}function oi(t,e){const n=st(t.firestore,Pt),r=ke(t),s=Zg(t.converter,e);return Uu(n,[Qg(xl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function Tw(t,...e){var l,c,d;t=it(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Sc(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Sc(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof bt)o=st(t.firestore,Pt),a=Ru(t._key.path),i={next:h=>{e[r]&&e[r](EI(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=st(t,Vn);o=st(h.firestore,Pt),a=h._query;const f=new pa(o);i={next:m=>{e[r]&&e[r](new qr(o,f,h,m))},error:e[r+1],complete:e[r+2]},t2(t._query)}return function(f,m,I,p){const y=new Hg(p),_=new JE(m,y,I);return f.asyncQueue.enqueueAndForget(async()=>GE(await cu(f),_)),()=>{y.Nu(),f.asyncQueue.enqueueAndForget(async()=>QE(await cu(f),_))}}(Qt(o),a,s,i)}function j7(t,e,...n){const r=it(t),s=function(l){const c={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const h of d){if(!(h in l)){c.error=`snapshotJson missing required field: ${h}`;break}const f=l[h];if(typeof f!="string"){c.error=`snapshotJson field '${h}' must be a string.`;break}if(f.length===0){c.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?c.bundle=f:h==="bundleName"?c.bundleName=f:h==="bundleSource"&&(c.bundleSource=f)}return c}(e);if(s.error)throw new Q(U.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||Sc(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Sc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,f,m){let I,p=!1;return Iw(c,d.bundle).then(()=>HO(c,d.bundleName)).then(_=>{_&&!p&&(m&&_.withConverter(m),I=Tw(_,h||{},f))}).catch(_=>(f.error&&f.error(_),()=>{})),()=>{p||(p=!0,I&&I())}}(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Sc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,f,m){let I,p=!1;return Iw(c,d.bundle).then(()=>{if(!p){const _=new bt(c,m||null,he.fromPath(d.bundleName));I=Tw(_,h||{},f)}}).catch(_=>(f.error&&f.error(_),()=>{})),()=>{p||(p=!0,I&&I())}}(r,s,i,a,n[o])}throw new Q(U.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function $7(t,e){return e7(Qt(t=st(t,Pt)),Sc(e)?e:{next:e})}function Uu(t,e){return function(r,s){const i=new Qn;return r.asyncQueue.enqueueAndForget(async()=>R8(await aI(r),s,i)),i.promise}(Qt(t),e)}function EI(t,e,n){const r=n.docs.get(e._key),s=new pa(t);return new Wr(t,s,e._key,r,new Ai(n.hasPendingWrites,n.fromCache),e.converter)}function B7(t){return a2(t,{count:i2()})}function a2(t,e){const n=st(t.firestore,Pt),r=Qt(n),s=qD(e,(i,o)=>new AN(o,i.aggregateType,i._internalFieldPath));return Z8(r,t._query,s).then(i=>function(a,l,c){const d=new pa(a);return new KO(l,d,c)}(n,t,i))}class z7{constructor(e){this.kind="memory",this._onlineComponentProvider=na.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new sI(void 0)}}toJSON(){return{kind:this.kind}}}class W7{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=l2(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class q7{constructor(){this.kind="memoryEager",this._offlineComponentProvider=lu.provider}toJSON(){return{kind:this.kind}}}class H7{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new sI(e)}}toJSON(){return{kind:this.kind}}}function K7(){return new q7}function G7(t){return new H7(t==null?void 0:t.cacheSizeBytes)}function Q7(t){return new z7(t)}function Y7(t){return new W7(t)}class J7{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=na.provider,this._offlineComponentProvider={build:n=>new iI(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class X7{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=na.provider,this._offlineComponentProvider={build:n=>new DO(n,e==null?void 0:e.cacheSizeBytes)}}}function l2(t){return new J7(t==null?void 0:t.forceOwnership)}function Z7(){return new X7}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xl(e)}set(e,n,r){this._verifyNotCommitted();const s=Ro(e,this._firestore),i=Zg(s.converter,n,r),o=Qg(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Gt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Ro(e,this._firestore);let o;return o=typeof(n=it(n))=="string"||n instanceof fa?gI(this._dataReader,"WriteBatch.update",i._key,n,r,s):pI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ro(e,this._firestore);return this._mutations=this._mutations.concat(new Cu(n._key,Gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ro(t,e){if((t=it(t)).firestore!==e)throw new Q(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=xl(e)}get(e){const n=Ro(e,this._firestore),r=new wI(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Te(24041);const i=s[0];if(i.isFoundDocument())return new Dh(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Dh(this._firestore,r,n._key,null,n.converter);throw Te(18433,{doc:i})})}set(e,n,r){const s=Ro(e,this._firestore),i=Zg(s.converter,n,r),o=Qg(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=Ro(e,this._firestore);let o;return o=typeof(n=it(n))=="string"||n instanceof fa?gI(this._dataReader,"Transaction.update",i._key,n,r,s):pI(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=Ro(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2 extends tH{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ro(e,this._firestore),r=new pa(this._firestore);return super.get(e).then(s=>new Wr(this._firestore,r,n._key,s._document,new Ai(!1,!1),n.converter))}}function nH(t,e,n){t=st(t,Pt);const r={...eH,...n};return function(i){if(i.maxAttempts<1)throw new Q(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new Qn;return i.asyncQueue.enqueueAndForget(async()=>{const c=await LO(i);new K8(i.asyncQueue,c,a,o,l).ju()}),l.promise}(Qt(t),s=>e(new u2(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(){return new nf("deleteField")}function Ve(){return new dI("serverTimestamp")}function sH(...t){return new hI("arrayUnion",t)}function iH(...t){return new fI("arrayRemove",t)}function oH(t){return new mI("increment",t)}function aH(t){return new gs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(t){return Qt(t=st(t,Pt)),new c2(t,e=>Uu(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(t,e){const n=Qt(t=st(t,Pt));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return ss("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new Q(U.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=cx(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const f=Yg("setIndexConfiguration",cx(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Xa(f,2)):h.order==="ASCENDING"?d.push(new Xa(f,0)):h.order==="DESCENDING"&&d.push(new Xa(f,1))}a.push(new Hc(Hc.UNKNOWN_ID,c,d,Kc.empty()))}return a}(e);return r7(n,r)}function cx(t,e){if(typeof t[e]!="string")throw new Q(U.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function uH(t){var s;t=st(t,Pt);const e=ux.get(t);if(e)return e;if(((s=Qt(t)._uninitializedComponentsProvider)==null?void 0:s._offline.kind)!=="persistent")return null;const r=new d2(t);return ux.set(t,r),r}function dH(t){h2(t,!0)}function hH(t){h2(t,!1)}function fH(t){i7(Qt(t._firestore)).then(e=>ne("deleting all persistent cache indexes succeeded")).catch(e=>ss("deleting all persistent cache indexes failed",e))}function h2(t,e){s7(Qt(t._firestore),e).then(n=>ne(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>ss(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const ux=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t){var r;const e=Qt(st(t.firestore,Pt)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:Ug(n,yr(t._query)).ft}function pH(t,e){var i;const n=qD(e,(o,a)=>new AN(a,o.aggregateType,o._internalFieldPath)),r=Qt(st(t.firestore,Pt)),s=(i=r._onlineComponents)==null?void 0:i.datastore.serializer;return s===void 0?null:FN(s,uN(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return II.instance.onExistenceFilterMismatch(e)}}class II{constructor(){this.Mc=new Map}static get instance(){return Gf||(Gf=new II,function(n){if($d)throw new Error("a TestingHooksSpi instance is already set");$d=n}(Gf)),Gf}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let Gf=null;(function(e,n=!0){(function(s){xu=s})(Wh),ci(new Ms("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Pt(new zz(r.getProvider("auth-internal")),new Hz(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ns(Bb,zb,e),ns(Bb,zb,"esm2020")})();const Nn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:_I,AggregateField:uu,AggregateQuerySnapshot:KO,Bytes:Lr,CACHE_SIZE_UNLIMITED:l7,CollectionReference:Ds,DocumentReference:bt,DocumentSnapshot:Wr,FieldPath:fa,FieldValue:ma,Firestore:Pt,FirestoreError:Q,GeoPoint:Ns,LoadBundleTask:BO,PersistentCacheIndexManager:d2,Query:Vn,QueryCompositeFilterConstraint:Pl,QueryConstraint:Vu,QueryDocumentSnapshot:zd,QueryEndAtConstraint:of,QueryFieldFilterConstraint:Mu,QueryLimitConstraint:rf,QueryOrderByConstraint:Xg,QuerySnapshot:qr,QueryStartAtConstraint:sf,SnapshotMetadata:Ai,Timestamp:_t,Transaction:u2,VectorValue:gs,WriteBatch:c2,_AutoId:xg,_ByteString:rn,_DatabaseId:Jo,_DocumentKey:he,_EmptyAppCheckTokenProvider:Kz,_EmptyAuthCredentialsProvider:SD,_FieldPath:$t,_TestingHooks:gH,_cast:st,_debugAssert:$z,_internalAggregationQueryToProtoRunAggregationQueryRequest:pH,_internalQueryToProtoQueryTarget:mH,_isBase64Available:CW,_logWarn:ss,_validateIsNotUsedTogether:AD,addDoc:oi,aggregateFieldEqual:C7,aggregateQuerySnapshotEqual:k7,and:I7,arrayRemove:iH,arrayUnion:sH,average:P7,clearIndexedDbPersistence:h7,collection:De,collectionGroup:o7,connectFirestoreEmulator:$O,count:i2,deleteAllPersistentCacheIndexes:fH,deleteDoc:Kn,deleteField:rH,disableNetwork:uI,disablePersistentCacheIndexAutoCreation:hH,doc:ke,documentId:p7,documentSnapshotFromJSON:D7,enableIndexedDbPersistence:u7,enableMultiTabIndexedDbPersistence:d7,enableNetwork:cI,enablePersistentCacheIndexAutoCreation:dH,endAt:x7,endBefore:A7,ensureFirestoreConfigured:Qt,executeWrite:Uu,getAggregateFromServer:a2,getCountFromServer:B7,getDoc:en,getDocFromCache:V7,getDocFromServer:M7,getDocs:We,getDocsFromCache:F7,getDocsFromServer:U7,getFirestore:c7,getPersistentCacheIndexManager:uH,increment:oH,initializeFirestore:zO,limit:Fu,limitToLast:T7,loadBundle:Iw,memoryEagerGarbageCollector:K7,memoryLocalCache:Q7,memoryLruGarbageCollector:G7,namedQuery:HO,onSnapshot:Tw,onSnapshotResume:j7,onSnapshotsInSync:$7,or:E7,orderBy:Wo,persistentLocalCache:Y7,persistentMultipleTabManager:Z7,persistentSingleTabManager:l2,query:$e,queryEqual:lI,querySnapshotFromJSON:N7,refEqual:a7,runTransaction:nH,serverTimestamp:Ve,setDoc:mn,setIndexConfiguration:cH,setLogLevel:ED,snapshotEqual:L7,startAfter:b7,startAt:S7,sum:R7,terminate:m7,updateDoc:An,vector:aH,waitForPendingWrites:f7,where:Le,writeBatch:lH},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="type.googleapis.com/google.protobuf.Int64Value",vH="type.googleapis.com/google.protobuf.UInt64Value";function f2(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function $p(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>$p(e));if(typeof t=="function"||typeof t=="object")return f2(t,e=>$p(e));throw new Error("Data cannot be encoded in JSON: "+t)}function du(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case yH:case vH:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>du(e)):typeof t=="function"||typeof t=="object"?f2(t,e=>du(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jr extends Us{constructor(e,n,r){super(`${TI}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,jr.prototype)}}function _H(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Bp(t,e){let n=_H(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!dx[o])return new jr("internal","internal");n=dx[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=du(s))}}catch{}return n==="ok"?null:new jr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Yr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="us-central1",EH=/^data: (.*?)(?:\n|$)/;function IH(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new jr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class TH{constructor(e,n,r,s,i=Sw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new wH(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Sw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function SH(t,e,n){const r=fi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Sg(t.emulatorOrigin+"/backends"),iE("Functions",!0))}function bH(t,e,n){const r=s=>xH(t,e,s,{});return r.stream=(s,i)=>PH(t,e,s,i),r}function m2(t){return t.emulatorOrigin&&fi(t.emulatorOrigin)?"include":void 0}async function AH(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:m2(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function p2(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function xH(t,e,n,r){const s=t._url(e);return RH(t,s,n,r)}async function RH(t,e,n,r){n=$p(n);const s={data:n},i=await p2(t,r),o=r.timeout||7e4,a=IH(o),l=await Promise.race([AH(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new jr("cancelled","Firebase Functions instance was deleted.");const c=Bp(l.status,l.json);if(c)throw c;if(!l.json)throw new jr("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new jr("internal","Response is missing data field.");return{data:du(d)}}function PH(t,e,n,r){const s=t._url(e);return CH(t,s,n,r||{})}async function CH(t,e,n,r){var f;n=$p(n);const s={data:n},i=await p2(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:m2(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new jr("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const I=Bp(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let a,l;const c=new Promise((m,I)=>{a=m,l=I});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new jr("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=kH(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:I,done:p}=await m.read();return{value:I,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function kH(t,e,n,r){const s=(o,a)=>{const l=o.match(EH);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(du(d.result));return}if("message"in d){a.enqueue(du(d.message));return}if("error"in d){const h=Bp(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof jr){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new jr("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new jr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof jr?c:Bp(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const hx="@firebase/functions",fx="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH="auth-internal",NH="app-check-internal",OH="messaging-internal";function LH(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(DH),o=n.getProvider(OH),a=n.getProvider(NH);return new TH(s,i,o,a,r)};ci(new Ms(TI,e,"PUBLIC").setMultipleInstances(!0)),ns(hx,fx,t),ns(hx,fx,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t=lE(),e=Sw){const r=Su(it(t),TI).getImmediate({identifier:e}),s=sE("functions");return s&&MH(r,...s),r}function MH(t,e,n){SH(it(t),e,n)}function GY(t,e,n){return bH(it(t),e)}LH();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="firebasestorage.googleapis.com",y2="storageBucket",FH=2*60*1e3,UH=10*60*1e3,jH=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on extends Us{constructor(e,n,r=0){super(fv(e),`Firebase Storage: ${n} (${fv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,on.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zt||(zt={}));function fv(t){return"storage/"+t}function SI(){const t="An unknown error occurred, please check the error payload for server response.";return new on(zt.UNKNOWN,t)}function $H(t){return new on(zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function BH(t){return new on(zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new on(zt.UNAUTHENTICATED,t)}function WH(){return new on(zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qH(t){return new on(zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function v2(){return new on(zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _2(){return new on(zt.CANCELED,"User canceled the upload/download.")}function HH(t){return new on(zt.INVALID_URL,"Invalid URL '"+t+"'.")}function KH(t){return new on(zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GH(){return new on(zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+y2+"' property when initializing the app?")}function w2(){return new on(zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QH(){return new on(zt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function YH(){return new on(zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JH(t){return new on(zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bw(t){return new on(zt.INVALID_ARGUMENT,t)}function E2(){return new on(zt.APP_DELETED,"The Firebase app was deleted.")}function XH(t){return new on(zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wd(t,e){return new on(zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cd(t){throw new on(zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zr.makeFromUrl(e,n)}catch{return new Zr(e,"")}if(r.path==="")return r;throw KH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),I={bucket:1,path:3},p=n===g2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",_=new RegExp(`^https?://${p}/${s}/${y}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:I,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<w.length;x++){const P=w[x],L=P.regex.exec(e);if(L){const A=L[P.indices.bucket];let S=L[P.indices.path];S||(S=""),r=new Zr(A,S),P.postModify(r);break}}if(r==null)throw HH(e);return r}}class ZH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eK(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...y){c||(c=!0,e.apply(null,y))}function h(y){s=setTimeout(()=>{s=null,t(m,l())},y)}function f(){i&&clearTimeout(i)}function m(y,..._){if(c){f();return}if(y){f(),d.call(null,y,..._);return}if(l()||o){f(),d.call(null,y,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let I=!1;function p(y){I||(I=!0,f(),!c&&(s!==null?(y||(a=2),clearTimeout(s),h(0)):y||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}function tK(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){return t!==void 0}function rK(t){return typeof t=="function"}function sK(t){return typeof t=="object"&&!Array.isArray(t)}function ey(t){return typeof t=="string"||t instanceof String}function mx(t){return bI()&&t instanceof Blob}function bI(){return typeof Blob<"u"}function px(t,e,n,r){if(r<e)throw bw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw bw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function I2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var tl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(tl||(tl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,p)=>{this.resolve_=I,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Qf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===tl.NO_ERROR,l=i.getStatus();if(!a||T2(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===tl.ABORT;r(!1,new Qf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Qf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());nK(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=SI();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?E2():_2();o(l)}else{const l=v2();o(l)}};this.canceled_?n(!1,new Qf(!1,null,!0)):this.backoffId_=eK(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oK(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aK(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lK(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cK(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uK(t,e,n,r,s,i,o=!0,a=!1){const l=I2(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return lK(d,e),oK(d,n),aK(d,i),cK(d,r),new iK(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hK(...t){const e=dK();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(bI())return new Blob(t);throw new on(zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fK(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(t){if(typeof atob>"u")throw JH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mv{constructor(e,n){this.data=e,this.contentType=n||null}}function pK(t,e){switch(t){case ei.RAW:return new mv(S2(e));case ei.BASE64:case ei.BASE64URL:return new mv(b2(t,e));case ei.DATA_URL:return new mv(yK(e),vK(e))}throw SI()}function S2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function gK(t){let e;try{e=decodeURIComponent(t)}catch{throw Wd(ei.DATA_URL,"Malformed data URL.")}return S2(e)}function b2(t,e){switch(t){case ei.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Wd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ei.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Wd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mK(e)}catch(s){throw s.message.includes("polyfill")?s:Wd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class A2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wd(ei.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=_K(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function yK(t){const e=new A2(t);return e.base64?b2(ei.BASE64,e.rest):gK(e.rest)}function vK(t){return new A2(t).contentType}function _K(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){let r=0,s="";mx(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(mx(this.data_)){const r=this.data_,s=fK(r,e,n);return s===null?null:new Ei(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ei(r,!0)}}static getBlob(...e){if(bI()){const n=e.map(r=>r instanceof Ei?r.data_:r);return new Ei(hK.apply(null,n))}else{const n=e.map(o=>ey(o)?pK(ei.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ei(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){let e;try{e=JSON.parse(t)}catch{return null}return sK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wK(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function EK(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function R2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(t,e){return e}class _r{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||IK}}let Yf=null;function TK(t){return!ey(t)||t.length<2?t:R2(t)}function AI(){if(Yf)return Yf;const t=[];t.push(new _r("bucket")),t.push(new _r("generation")),t.push(new _r("metageneration")),t.push(new _r("name","fullPath",!0));function e(i,o){return TK(o)}const n=new _r("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new _r("size");return s.xform=r,t.push(s),t.push(new _r("timeCreated")),t.push(new _r("updated")),t.push(new _r("md5Hash",null,!0)),t.push(new _r("cacheControl",null,!0)),t.push(new _r("contentDisposition",null,!0)),t.push(new _r("contentEncoding",null,!0)),t.push(new _r("contentLanguage",null,!0)),t.push(new _r("contentType",null,!0)),t.push(new _r("metadata","customMetadata",!0)),Yf=t,Yf}function SK(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Zr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function bK(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return SK(r,t),r}function P2(t,e,n){const r=x2(e);return r===null?null:bK(t,r,n)}function AK(t,e,n,r){const s=x2(e);if(s===null||!ey(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=af(f,n,r),I=I2({alt:"media",token:c});return m+I})[0]}function C2(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ju{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){if(!t)throw SI()}function xI(t,e){function n(r,s){const i=P2(t,s,e);return Ri(i!==null),i}return n}function xK(t,e){function n(r,s){const i=P2(t,s,e);return Ri(i!==null),AK(i,s,t.host,t._protocol)}return n}function lf(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=WH():s=zH():n.getStatus()===402?s=BH(t.bucket):n.getStatus()===403?s=qH(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function k2(t){const e=lf(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=$H(t.path)),i.serverResponse=s.serverResponse,i}return n}function RK(t,e,n){const r=e.fullServerUrl(),s=af(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ju(s,i,xI(t,n),o);return a.errorHandler=k2(e),a}function PK(t,e,n){const r=e.fullServerUrl(),s=af(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ju(s,i,xK(t,n),o);return a.errorHandler=k2(e),a}function CK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function D2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=CK(null,e)),r}function N2(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let x=0;x<2;x++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=D2(e,r,s),d=C2(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Ei.getBlob(h,r,f);if(m===null)throw w2();const I={name:c.fullPath},p=af(i,t.host,t._protocol),y="POST",_=t.maxUploadRetryTime,v=new ju(p,y,xI(t,n),_);return v.urlParams=I,v.headers=o,v.body=m.uploadData(),v.errorHandler=lf(e),v}class zp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function RI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ri(!1)}return Ri(!!n&&(e||["active"]).indexOf(n)!==-1),n}function kK(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=D2(e,r,s),a={name:o.fullPath},l=af(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=C2(o,n),f=t.maxUploadRetryTime;function m(p){RI(p);let y;try{y=p.getResponseHeader("X-Goog-Upload-URL")}catch{Ri(!1)}return Ri(ey(y)),y}const I=new ju(l,c,m,f);return I.urlParams=a,I.headers=d,I.body=h,I.errorHandler=lf(e),I}function DK(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=RI(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ri(!1)}h||Ri(!1);const f=Number(h);return Ri(!isNaN(f)),new zp(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ju(n,o,i,a);return l.headers=s,l.errorHandler=lf(e),l}const gx=256*1024;function NK(t,e,n,r,s,i,o,a){const l=new zp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw QH();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const I={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,f);if(p===null)throw w2();function y(x,P){const L=RI(x,["active","final"]),A=l.current+d,S=r.size();let R;return L==="final"?R=xI(e,i)(x,P):R=null,new zp(A,S,L==="final",R)}const _="POST",v=e.maxUploadRetryTime,w=new ju(n,_,y,v);return w.headers=I,w.body=p.uploadData(),w.progressCallback=a||null,w.errorHandler=lf(t),w}const Nr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pv(t){switch(t){case"running":case"pausing":case"canceling":return Nr.RUNNING;case"paused":return Nr.PAUSED;case"success":return Nr.SUCCESS;case"canceled":return Nr.CANCELED;case"error":return Nr.ERROR;default:return Nr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e,n,r){if(rK(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class LK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw cd("cannot .send() more than once");if(fi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class VK extends LK{initXhr(){this.xhr_.responseType="text"}}function Oa(){return new VK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=AI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(zt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(T2(s.status,[]))if(i)s=v2();else{this.sleepTime=Math.max(this.sleepTime*2,jH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(zt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=kK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Oa,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=DK(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Oa,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=gx*this._chunkMultiplier,n=new zp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=NK(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Oa,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){gx*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=RK(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Oa,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=N2(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Oa,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=_2(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=pv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new OK(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(pv(this._state)){case Nr.SUCCESS:Ul(this._resolve.bind(null,this.snapshot))();break;case Nr.CANCELED:case Nr.ERROR:const n=this._reject;Ul(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(pv(this._state)){case Nr.RUNNING:case Nr.PAUSED:e.next&&Ul(e.next.bind(e,this.snapshot))();break;case Nr.SUCCESS:e.complete&&Ul(e.complete.bind(e))();break;case Nr.CANCELED:case Nr.ERROR:e.error&&Ul(e.error.bind(e,this._error))();break;default:e.error&&Ul(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this._service=e,n instanceof Zr?this._location=n:this._location=Zr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vl(e,n)}get root(){const e=new Zr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R2(this._location.path)}get storage(){return this._service}get parent(){const e=wK(this._location.path);if(e===null)return null;const n=new Zr(this._location.bucket,e);return new vl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw XH(e)}}function FK(t,e,n){t._throwIfRoot("uploadBytes");const r=N2(t.storage,t._location,AI(),new Ei(e,!0),n);return t.storage.makeRequestWithTokens(r,Oa).then(s=>({metadata:s,ref:t}))}function UK(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new MK(t,new Ei(e),n)}function jK(t){t._throwIfRoot("getDownloadURL");const e=PK(t.storage,t._location,AI());return t.storage.makeRequestWithTokens(e,Oa).then(n=>{if(n===null)throw YH();return n})}function $K(t,e){const n=EK(t._location.path,e),r=new Zr(t._location.bucket,n);return new vl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BK(t){return/^[A-Za-z]+:\/\//.test(t)}function zK(t,e){return new vl(t,e)}function O2(t,e){if(t instanceof PI){const n=t;if(n._bucket==null)throw GH();const r=new vl(n,n._bucket);return e!=null?O2(r,e):r}else return e!==void 0?$K(t,e):t}function WK(t,e){if(e&&BK(e)){if(t instanceof PI)return zK(t,e);throw bw("To use ref(service, url), the first argument must be a Storage instance.")}else return O2(t,e)}function yx(t,e){const n=e==null?void 0:e[y2];return n==null?null:Zr.makeFromBucketSpec(n,t)}function qK(t,e,n,r={}){t.host=`${e}:${n}`;const s=fi(e);s&&(Sg(`https://${t.host}/b`),iE("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:kk(i,t.app.options.projectId))}class PI{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=g2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FH,this._maxUploadRetryTime=UH,this._requests=new Set,s!=null?this._bucket=Zr.makeFromBucketSpec(s,this._host):this._bucket=yx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zr.makeFromBucketSpec(this._url,e):this._bucket=yx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){px("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){px("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new ZH(E2());{const o=uK(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const vx="@firebase/storage",_x="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="storage";function QY(t,e,n){return t=it(t),FK(t,e,n)}function HK(t,e,n){return t=it(t),UK(t,e,n)}function KK(t){return t=it(t),jK(t)}function GK(t,e){return t=it(t),WK(t,e)}function V2(t=lE(),e){t=it(t);const r=Su(t,L2).getImmediate({identifier:e}),s=sE("storage");return s&&QK(r,...s),r}function QK(t,e,n,r={}){qK(t,e,n,r)}function YK(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new PI(n,r,s,e,Wh)}function JK(){ci(new Ms(L2,YK,"PUBLIC").setMultipleInstances(!0)),ns(vx,_x,""),ns(vx,_x,"esm2020")}JK();const XK={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Aw={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Aw.projectId,authDomain:Aw.authDomain,emulatorMode:!1});const ty=Fk(Aw);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Ot=L9(ty,{persistence:[oD,H_]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const Y=zO(ty,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{ED("error")}catch{}const ZK=VH(ty,"us-central1");V2(ty);console.log(" Firebase initialized successfully");const eG=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(eG,100);let Pa=0;const gv=3,tG=1e3,M2=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&Pa<gv){Pa++;const r=Math.min(tG*Math.pow(2,Pa-1),1e4);console.log(` Attempting to reconnect (${Pa}/${gv}) in ${r}ms...`);try{await uI(Y),await new Promise(s=>setTimeout(s,r)),await cI(Y),console.log(" Firestore reconnected successfully"),Pa=0}catch(s){console.error(" Failed to reconnect:",s),Pa>=gv&&(console.error(" Maximum reconnection attempts reached."),nG())}}},nG=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await cI(Y),Pa=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await uI(Y),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(M2(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const qt=Object.freeze(Object.defineProperty({__proto__:null,auth:Ot,db:Y,functions:ZK,handleFirestoreError:M2},Symbol.toStringTag,{value:"Module"})),nt=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},rG=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},_l=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>_l(n)).filter(n=>n!==void 0);if(t instanceof Date||!rG(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=_l(r);s!==void 0&&(e[n]=s)}return e},Cm={async create(t){await mn(ke(Y,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ve()})},async getById(t){const e=ke(Y,"profiles",t),n=await en(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:nt(r.createdAt)}}return null},async update(t,e){const n=ke(Y,"profiles",t);await An(n,{...e,updatedAt:Ve()})},async getByShopId(t){const e=$e(De(Y,"profiles"),Le("shopId","==",t));return(await We(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:nt(s.createdAt)}})}},xw={async create(t){return(await oi(De(Y,"referrals"),{...t,createdAt:Ve(),updatedAt:Ve()})).id},async getByReferrerId(t){try{const e=$e(De(Y,"referrals"),Le("referrerId","==",t),Wo("createdAt","desc"));return(await We(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),updatedAt:nt(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=$e(De(Y,"referrals"),Le("referrerId","==",t));return(await We(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:nt(i.data().createdAt),updatedAt:nt(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=$e(De(Y,"referrals"),Le("referralCode","==",t),Fu(1)),n=await We(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:nt(r.data().createdAt),updatedAt:nt(r.data().updatedAt)}},async updateStatus(t,e){await An(ke(Y,"referrals",t),{status:e,updatedAt:Ve()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},F2={async getByUserId(t){const e=$e(De(Y,"profiles"),Le("userId","==",t)),n=await We(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:nt(s.createdAt),updatedAt:nt(s.updatedAt)}}return null},async update(t,e){const n=$e(De(Y,"profiles"),Le("userId","==",t)),r=await We(n);if(!r.empty){const s=ke(Y,"profiles",r.docs[0].id);await An(s,{...e,updatedAt:Ve()})}}},Po={async create(t){return(await oi(De(Y,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ve(),updatedAt:Ve()})).id},async getByMerchantId(t){const e=$e(De(Y,"merchantWallets"),Le("merchantUserId","==",t)),r=(await We(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=$e(De(Y,"wallets"),Le("userId","==",t));return(await We(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=ke(Y,"merchantWallets",t),n=await en(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:nt(r.createdAt),updatedAt:nt(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=$e(De(Y,"merchantWallets"),Le("iccid","==",t)),n=await We(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:nt(s.createdAt),updatedAt:nt(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=$e(De(Y,"merchantWallets"),Le("msisdn","==",t)),r=await We(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}const s=$e(De(Y,"merchantWallets")),i=await We(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=ke(Y,"merchantWallets",t);await An(n,{...e,updatedAt:Ve()})},async updateUsage(t,e,n){const r=ke(Y,"merchantWallets",t),s={updatedAt:Ve()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await An(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=$e(De(Y,"merchantWallets"),Le("msisdn","in",o)),c=(await We(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await An(d.ref,{merchantUserId:e,updatedAt:Ve()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=ke(Y,"merchantWallets",t);await Kn(e)}},CI={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await te(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>za);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ve(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await oi(De(Y,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await te(async()=>{const{ProfitService:d}=await import("./profitService-CJzdybxg.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await Po.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),m=Number(t.amount||0),I=String((t==null?void 0:t.originType)||"").trim()==="withdraw",p=String(t.txnType||"")==="receive";I||p?await Po.updateUsage(c,void 0,f+m):await Po.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const p=await Po.getById(h);m=String((p==null?void 0:p.msisdn)||(p==null?void 0:p.label)||h).trim()}catch{}let I="";f==="withdraw"?I=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?I=`   ${c}   ${m||" "}   ${d||""}    ${r}`:I=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=$e(De(Y,"transactions"),Le("shopId","==",t),Wo("createdAt","desc"));return(await We(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),confirmedAt:r.data().confirmedAt?nt(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=$e(De(Y,"transactions"),Le("merchantUserId","==",t),Wo("createdAt","desc"));return(await We(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),confirmedAt:r.data().confirmedAt?nt(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=$e(De(Y,"transactions"),Le("merchantUserId","==",t)),n=$e(De(Y,"transactions"),Le("userId","==",t)),[r,s]=await Promise.all([We(e),We(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:nt(c.createdAt),confirmedAt:c.confirmedAt?nt(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=ke(Y,"transactions",t);await An(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function sG(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await CI.create(e);try{const{calculateCommission:r}=await te(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>za);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Jr.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await te(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>za);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Jr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Jr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await te(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>kw);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const iG="https://summer-cake-5149.alkaptin2030.workers.dev",U2={async getTelegramWorkerUrl(){var t;try{const e=ke(Y,"systemSettings","core"),n=await en(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=ke(Y,"systemSettings","core");await mn(e,{telegramWorkerUrl:t,updatedAt:Ve()},{merge:!0})}},oG={async send(t,e){try{const n=await Jr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await U2.getTelegramWorkerUrl()||iG).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},aG={async log(t,e,n,r,s){await oi(De(Y,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ve()})},async getLogs(t=100){const e=$e(De(Y,"auditLogs"),Wo("createdAt","desc"),Fu(t));return(await We(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=$e(De(Y,"deletedTransactions"),Wo("deletedAt","desc"));return(await We(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:nt(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=$e(De(Y,"deletedTransactions"),Le("userId","==",t),Wo("deletedAt","desc"));return(await We(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:nt(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=$e(De(Y,"deletedTransactions"),Le("userId","==",t));return(await We(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:nt(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ve(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await oi(De(Y,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=$e(De(Y,"deletedTransactions"),Le("originalTransactionId","==",t),Le("userId","==",e)),r=await We(n);r.empty?await oi(De(Y,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Ve()}):await Promise.all(r.docs.map(s=>An(s.ref,{permanent:!0,deletedAt:Ve()}))),console.log("    :",t);try{const s=$e(De(Y,"userTransactions"),Le("userId","==",e)),o=(await We(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Kn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=ke(Y,"transactions",t);(await en(s)).exists()&&(console.log("     transactions  "),await Kn(s));const o=$e(De(Y,"transactions"),Le("transactionId","==",t)),a=await We(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Kn(d.ref))));const l=$e(De(Y,"transactions"),Le("originalTransactionId","==",t)),c=await We(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Kn(d.ref))));try{const d=$e(De(Y,"deletedTransactions"),Le("userId","==",e),Le("originalTransactionId","==",t)),h=await We(d),f=h.docs.map(I=>{var p;return String(((p=I.data())==null?void 0:p.reference)||"")}).filter(Boolean),m=h.docs.map(I=>{var p;return String(((p=I.data())==null?void 0:p.transactionId)||"")}).filter(Boolean);for(const I of f){const p=$e(De(Y,"transactions"),Le("reference","==",I)),y=await We(p);y.empty||(console.log(`  ${y.size}   transactions  reference=${I}`),await Promise.all(y.docs.map(_=>Kn(_.ref))))}for(const I of m){try{const _=ke(Y,"transactions",I);(await en(_)).exists()&&(console.log("     transactions  :",I),await Kn(_))}catch{}const p=$e(De(Y,"transactions"),Le("transactionId","==",I)),y=await We(p);y.empty||(console.log(`  ${y.size}   transactions  transactionId=${I}`),await Promise.all(y.docs.map(_=>Kn(_.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},j2={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=ke(Y,"daily_reports_archive",e);return await mn(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Ve()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=$e(De(Y,"daily_reports_archive"),Le("userId","==",t),Fu(e)),a=await We(o);let l=[];try{l=(await We($e(De(Y,"deletedDailyArchives"),Le("userId","==",t)))).docs.map(I=>{var p,y;return{id:I.id,reportDate:String(((p=I.data())==null?void 0:p.reportDate)||""),archiveId:String(((y=I.data())==null?void 0:y.archiveId)||"")}})}catch{}const c=(m,I)=>l.some(p=>p.archiveId&&p.archiveId===m||p.reportDate&&p.reportDate===I),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:nt(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const I=h.get(m.reportDate);(!I||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=I.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,I)=>m.reportDate<I.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=$e(De(Y,"daily_reports_archive"),Le("userId","==",t)),s=await We(r);let i=0;for(const o of s.docs){const a=nt(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Kn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=$e(De(Y,"daily_reports_archive"),Le("userId","==",t)),s=(await We(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:nt(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Kn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=$e(De(Y,"daily_reports_archive"),Le("userId","==",t)),n=await We(e);let r=0;for(const s of n.docs)try{await Kn(s.ref),r++}catch{const o=s.data();try{await oi(De(Y,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Ve()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Jr={async getUserData(t){try{console.log("     :",{userId:t});const e=ke(Y,"users",t),n=await en(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:nt(r.createdAt),updatedAt:nt(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},async syncDeletedTransactionsLocal(t){try{const e=$e(De(Y,"deletedTransactions"),Le("userId","==",t));(await We(e)).docs.forEach(r=>{const s=r.data();if(!((s==null?void 0:s.permanent)===!0))return;const o=String((s==null?void 0:s.originalTransactionId)||""),a=String((s==null?void 0:s.transactionId)||""),l=String((s==null?void 0:s.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch(e){console.warn("syncDeletedTransactionsLocal failed:",e)}},async saveUserData(t,e){try{const n=ke(Y,"users",t),r=_l(e);await mn(n,{...r||{},updatedAt:Ve()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=ke(Y,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=_l(r);let i={};try{const l=await en(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ve()};console.log("   :",o);let a=3;for(;a>0;)try{await mn(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=$e(De(Y,"userTransactions"),Le("userId","==",t),Wo("createdAt","desc"),Fu(200));e=await We(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=$e(De(Y,"userTransactions"),Le("userId","==",t));e=await We(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:nt(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=$e(De(Y,"deletedTransactions"),Le("userId","==",t),Le("reference","==",o));if(!(await We(a)).empty)return console.log("          ."),"skip-deleted"}{const a=$e(De(Y,"deletedTransactions"),Le("userId","==",t),Le("permanent","==",!0)),l=await We(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),m=String(f.originalTransactionId||f.transactionId||h.id||""),I=String(f.reference||"");return m&&c.includes(m)||I&&c.includes(I)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=$e(De(Y,"userTransactions"),Le("userId","==",t));if(s.transactionId){const a=$e(De(Y,"userTransactions"),Le("userId","==",t),Le("transactionId","==",s.transactionId)),l=await We(a);if(!l.empty){const c=l.docs[0];return await An(ke(Y,"userTransactions",c.id),{...s,uploadedAt:Ve()}),c.id}}if(s.reference){const a=$e(De(Y,"userTransactions"),Le("userId","==",t),Le("reference","==",s.reference)),l=await We(a);if(!l.empty){const c=l.docs[0];return await An(ke(Y,"userTransactions",c.id),{...s,uploadedAt:Ve()}),c.id}}}catch(o){console.warn("      saveUserTransaction  :",o)}return(await oi(De(Y,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Ve(),uploadedAt:Ve()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=ke(Y,"userTransactions",e),a=await en(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Kn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=$e(De(Y,"userTransactions"),Le("userId","==",t)),r=await We(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[$e(De(Y,"userTransactions"),Le("merchantUserId","==",t)),$e(De(Y,"userTransactions"),Le("createdBy","==",t))];for(const o of i)try{const l=(await We(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Kn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=ke(Y,"transactions",e);if((await en(a)).exists())console.log("     transactions   "),await Kn(a);else{const c=$e(De(Y,"transactions"),Le("transactionId","==",e)),d=await We(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Kn(m.ref))));const h=$e(De(Y,"transactions"),Le("originalTransactionId","==",e)),f=await We(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Kn(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},Rw={async getToday(t){const e=ke(Y,"dailyStats",t,"today","data"),n=await en(e);return n.exists()?n.data():{}},async setToday(t,e){const n=ke(Y,"dailyStats",t,"today","data");await mn(n,{..._l(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=ke(Y,"dailyStats",t,"history",e);await mn(r,_l(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},lG={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Ve()};return(await oi(De(Y,"installments"),n)).id},async getByUser(t){try{const e=$e(De(Y,"installments"),Le("userId","==",t));return(await We(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("installments fetch error",e),[]}},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await An(ke(Y,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Kn(ke(Y,"installments",t)),!0}},jl=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:lG,auditLogService:aG,dailyReportsArchiveService:j2,dailyStatsService:Rw,merchantWalletService:Po,profileService:Cm,profileServiceExtra:F2,recordAutoTransaction:sG,referralService:xw,sanitizeFirestoreData:_l,systemSettingsService:U2,telegramNotifier:oG,transactionService:CI,userDataService:Jr},Symbol.toStringTag,{value:"Module"}));var La=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(La||{});const qd=t=>{if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();if(t.seconds!==void 0&&typeof t.seconds=="number")return new Date(t.seconds*1e3);const e=new Date(t);return isNaN(e.getTime())?null:e},cG=(t,e=new Date)=>{const n=qd(e)||new Date;switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},uG=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const r=new Date,s=qd(t.activatedAt);return s&&r.getTime()-s.getTime()<4*60*60*1e3,!0}const e=new Date,n=qd(t.endDate);if(!n){const r=qd(t.activatedAt);return r&&e.getTime()-r.getTime()<4*60*60*1e3,!0}return e<=n},dG=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=qd(t.endDate);if(!n)return null;const r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},YY=async(t,e,n,r)=>{try{const s=new Date,i=cG(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=ke(Y,"users",t);if(await An(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},JY=async t=>{try{const e=ke(Y,"users",t);await An(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},hG=async t=>{try{const e=ke(Y,"users",t),n=await en(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},XY=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},ZY=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=dG(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},eJ=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var hu;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(hu||(hu={}));class yv extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const fG=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},mG=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:fG(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const I=s(),p=a(h);let y;const _=async()=>(!y&&I in f?y=typeof f[I]=="function"?y=await f[I]():y=f[I]:e!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),v=(S,R)=>{var C,N;if(p){const O=p==null?void 0:p.methods.find(k=>R===k.name);if(O)return O.rtype==="promise"?k=>n.nativePromise(h,R.toString(),k):(k,z)=>n.nativeCallback(h,R.toString(),k,z);if(S)return(C=S[R])===null||C===void 0?void 0:C.bind(S)}else{if(S)return(N=S[R])===null||N===void 0?void 0:N.bind(S);throw new yv(`"${h}" plugin is not implemented on ${I}`,hu.Unimplemented)}},w=S=>{let R;const C=(...N)=>{const O=_().then(k=>{const z=v(k,S);if(z){const de=z(...N);return R=de==null?void 0:de.remove,de}else throw new yv(`"${h}.${S}()" is not implemented on ${I}`,hu.Unimplemented)});return S==="addListener"&&(O.remove=async()=>R()),O};return C.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:S,writable:!1,configurable:!1}),C},x=w("addListener"),P=w("removeListener"),L=(S,R)=>{const C=x({eventName:S},R),N=async()=>{const k=await C;P({eventName:S,callbackId:k},R)},O=new Promise(k=>C.then(()=>k({remove:N})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},O},A=new Proxy({},{get(S,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?L:x;case"removeListener":return P;default:return w(R)}}});return r[h]=A,c.set(h,{name:h,proxy:A,platforms:new Set([...Object.keys(f),...p?[I]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=yv,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},pG=t=>t.Capacitor=mG(t),Ie=pG(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ny=Ie.registerPlugin;class $2{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Ie.Exception(e,hu.Unimplemented)}unavailable(e="not available"){return new Ie.Exception(e,hu.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const wx=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ex=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class gG extends $2{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Ex(s).trim(),i=Ex(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=wx(e.key),r=wx(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ny("CapacitorCookies",{web:()=>new gG});const yG=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),vG=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},_G=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,wG=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=vG(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class EG extends $2{async request(e){const n=wG(e,e.webFetchExtra),r=_G(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await yG(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ny("CapacitorHttp",{web:()=>new EG});const Va=ny("Preferences",{web:()=>te(()=>import("./web-CmuPFJap.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),vv=Object.freeze(Object.defineProperty({__proto__:null,Preferences:Va},Symbol.toStringTag,{value:"Module"})),IG={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},B2=b.createContext(void 0);function ga(){const t=b.useContext(B2);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const TG=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(null),[a,l]=b.useState(!1),[c,d]=b.useState(!0),h=b.useRef(null),f=async(S,R=!1)=>{var C,N,O,k,z,de,fe,Se;try{const $=ke(Y,"profiles",S),W=`profile_cache_v2_${S}`,re=Date.now(),we=1e3*60*60*24;if(!R)try{const se=localStorage.getItem(W);if(se){const{data:_e,timestamp:j}=JSON.parse(se);if(re-j<we&&(s(_e),d(!1),console.log(" Profile loaded from cache (valid)"),!(re-j>1e3*60*60)))return}}catch(se){console.warn("Cache parse error:",se)}const Ee=await en($);if(Ee.exists()){const se=Ee.data(),_e={userId:Ee.id,shopId:se.shopId,role:se.role,fullName:se.fullName,phone:se.phone,sim1Number:se.sim1Number||null,sim2Number:se.sim2Number||null,shopName:se.shopName||null,approved:se.approved,avatarId:se.avatarId,bridgeLink:se.bridgeLink||null,bridgeDeviceId:se.bridgeDeviceId||null,showWithdrawNote:se.showWithdrawNote!==void 0?!!se.showWithdrawNote:!0,isReceiptNoteEnabled:se.isReceiptNoteEnabled!==void 0?!!se.isReceiptNoteEnabled:!0,smsReadingEnabled:se.smsReadingEnabled!==void 0?!!se.smsReadingEnabled:!1,smsAutoRegisterEnabled:se.smsAutoRegisterEnabled!==void 0?!!se.smsAutoRegisterEnabled:!1,createdAt:((N=(C=se.createdAt)==null?void 0:C.toDate)==null?void 0:N.call(C))||new Date,updatedAt:((k=(O=se.updatedAt)==null?void 0:O.toDate)==null?void 0:k.call(O))||new Date,trialStarted:se.trialStarted||!1,trialStartDate:(de=(z=se.trialStartDate)==null?void 0:z.toDate)==null?void 0:de.call(z),trialEndDate:(Se=(fe=se.trialEndDate)==null?void 0:fe.toDate)==null?void 0:Se.call(fe),trialExpired:se.trialExpired||!1,referralCode:se.referralCode||null,referredBy:se.referredBy||null};s(_e);try{localStorage.setItem(W,JSON.stringify({data:_e,timestamp:re})),_e.shopId&&localStorage.setItem("shopId",_e.shopId)}catch{}}else try{const se=await F2.getByUserId(S);if(se){const _e={userId:S,shopId:se.shopId,role:se.role||"user",fullName:se.fullName||null,phone:se.phone||null,shopName:se.shopName||null,approved:se.approved??!1,avatarId:se.avatarId||void 0,bridgeLink:se.bridgeLink||null,bridgeDeviceId:se.bridgeDeviceId||null,createdAt:Ve(),updatedAt:Ve()};await mn(ke(Y,"profiles",S),_e,{merge:!0}),s({...se,userId:S})}else await I(S)}catch(se){console.error("Profile migration error:",se)}d(!1)}catch($){console.error("Error fetching profile:",$),d(!1)}},m=async S=>{try{const R=ke(Y,"users",S.uid);(await en(R)).exists()?(await An(R,{lastLogin:Ve(),updatedAt:Ve()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await mn(R,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ve(),updatedAt:Ve(),lastLogin:Ve()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(R){console.error(" ensureAdminUserDoc error:",R)}},I=async(S,R,C,N,O)=>{var k,z;try{console.log("Creating default profile for user:",S);const de=xw.generateReferralCode(S);let fe=null;const Se={userId:S,shopId:"default-shop",role:"user",fullName:R||" ",phone:C||null,shopName:N||null,approved:!1,referralCode:de,referredBy:O||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(Se),console.log("Created temporary profile:",Se);try{const{doc:$,setDoc:W,serverTimestamp:re}=await te(async()=>{const{doc:_e,setDoc:j,serverTimestamp:Ge}=await Promise.resolve().then(()=>Nn);return{doc:_e,setDoc:j,serverTimestamp:Ge}},void 0,import.meta.url),{db:we}=await te(async()=>{const{db:_e}=await Promise.resolve().then(()=>qt);return{db:_e}},void 0,import.meta.url),Ee={email:((k=Ot.currentUser)==null?void 0:k.email)||"",displayName:R||" ",phone:C||null,shopName:N||null,isActive:!1,referralCode:de,referredBy:O||null,createdAt:re(),lastLogin:null,updatedAt:re()};if(console.log("Attempting to add user to admin collection with data:",Ee),await W($(we,"users",S),Ee,{merge:!0}),console.log(" User successfully added to admin collection:",Ee),O)try{const{query:_e,collection:j,where:Ge,limit:Me,getDocs:xn}=await te(async()=>{const{query:Rn,collection:Ct,where:ft,limit:at,getDocs:ar}=await Promise.resolve().then(()=>Nn);return{query:Rn,collection:Ct,where:ft,limit:at,getDocs:ar}},void 0,import.meta.url),{db:Fn}=await te(async()=>{const{db:Rn}=await Promise.resolve().then(()=>qt);return{db:Rn}},void 0,import.meta.url),_n=_e(j(Fn,"users"),Ge("referralCode","==",O),Me(1)),wn=await xn(_n);wn.empty?console.log(" Referral code not found in users collection:",O):(fe=wn.docs[0].id,await xw.create({referrerId:fe,referredUserId:S,referredUserEmail:((z=Ot.currentUser)==null?void 0:z.email)||"",referralCode:O,status:"completed"}),console.log(" Referral record created successfully for referrer:",fe))}catch(_e){console.error(" Error creating referral record:",_e)}const se=await en($(we,"users",S));se.exists()?console.log(" User document verified in Firestore:",se.data()):console.log(" User document not found after creation")}catch($){console.error(" Error adding user to admin collection:",$)}try{const{addDoc:$,collection:W,serverTimestamp:re}=await te(async()=>{const{addDoc:j,collection:Ge,serverTimestamp:Me}=await Promise.resolve().then(()=>Nn);return{addDoc:j,collection:Ge,serverTimestamp:Me}},void 0,import.meta.url),{db:we}=await te(async()=>{const{db:j}=await Promise.resolve().then(()=>qt);return{db:j}},void 0,import.meta.url),se=(await $(W(we,"shops"),{name:N||" ",ownerId:S,createdAt:re(),updatedAt:re(),isActive:!0})).id;await Cm.create({userId:S,shopId:se,role:"user",fullName:" ",phone:null});try{await Cm.update(S,{referralCode:de,referredBy:fe||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(j){console.warn(" Failed to update profile with referral fields:",j)}const _e=await Cm.getById(S);_e&&(s(_e),console.log("Updated with Firebase profile:",_e))}catch($){console.error("Error creating profile:",$),console.log("Using local profile - Firebase unavailable")}}catch(de){console.error("Error creating default profile:",de)}};b.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const R=localStorage.getItem("demoUser"),C=localStorage.getItem("demoProfile");if(R&&C){console.log(" Found demo user in localStorage");try{const O=JSON.parse(R),k=JSON.parse(C);n(O),s(k),clearTimeout(S),d(!1);return}catch(O){console.error("Error parsing demo user data:",O),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const N=rz(Ot,async O=>{if(console.log(" Auth state changed:",{uid:O==null?void 0:O.uid,email:O==null?void 0:O.email,emailVerified:O==null?void 0:O.emailVerified,timestamp:new Date().toISOString()}),n(O),O){console.log(" User authenticated, starting profile hydration for:",O.uid);try{await Va.set({key:"current_user_id",value:O.uid}),console.log(" Synced current_user_id to Native:",O.uid)}catch(k){console.error("Failed to sync user ID to native:",k)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}f(O.uid),w(),m(O)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await Va.remove({key:"current_user_id"}),await Va.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(S)});return()=>{clearTimeout(S),N()}},[]),b.useEffect(()=>{const S=async()=>{try{await x(),await w()}catch{}};try{window.addEventListener("app:softRefresh",S)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",S)}catch{}}},[e==null?void 0:e.uid]),b.useEffect(()=>{},[e==null?void 0:e.uid,i]),b.useEffect(()=>{e!=null&&e.uid&&Jr.syncDeletedTransactionsLocal(e.uid)},[e==null?void 0:e.uid]);const p=async(S,R,C,N,O,k)=>{try{const z=(S||"").trim().toLowerCase(),de=(R||"").trim();console.log(" Attempting to sign up user:",z);const fe=await Nb(Ot,z,de);console.log(" Sign up successful:",fe.user.uid),await I(fe.user.uid,C,N,O,k),await m(fe.user);try{await f(fe.user.uid),await w()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(z){console.error(" Sign up error:",z);let de="    ";return z.code==="auth/email-already-in-use"?de="    ":z.code==="auth/weak-password"?de="   ":z.code==="auth/invalid-email"&&(de="   "),{error:{...z,message:de}}}},y=async(S,R)=>{var O;const C=(S||"").trim().toLowerCase(),N=(R||"").trim();try{const k=re=>re.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),z=re=>re.replace(/[-]/g,we=>String("0123456789"["".indexOf(we)])).replace(/[-]/g,we=>String("0123456789"["".indexOf(we)])),de=re=>re.replace(/[0-9]/g,we=>""[Number(we)]),fe=re=>z(k(re));if(console.log(" Attempting to sign in user:",C),C==="test@example.com"&&N==="123456"){console.log(" Demo user login detected");const re={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},we={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(re)),localStorage.setItem("demoProfile",JSON.stringify(we)),n(re),s(we),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Se;const $=[fe(N),k(N),de(k(N))];let W=null;for(const re of $)try{re!==N&&console.log(" Trying password variant"),Se=await X9(Ot,C,re);break}catch(we){if(W=we,(we==null?void 0:we.code)!=="auth/wrong-password"&&(we==null?void 0:we.code)!=="auth/invalid-credential")throw we}if(!Se)throw W||new Error("auth/invalid-credential");console.log(" Sign in successful:",Se.user.uid);try{if((await en(ke(Y,"deletedUsers",Se.user.uid))).exists())return console.log(" User is deleted, signing out"),await Ob(Ot),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(re){console.error("Error checking deleted users:",re)}await m(Se.user);try{await f(Se.user.uid),await w()}catch{}return{error:null}}catch(k){if(console.error(" Sign in error:",k),C==="test@example.com"&&k.code==="auth/user-not-found"){console.log(" Creating test user...");try{const fe=await Nb(Ot,C,N);return console.log(" Test user created:",fe.user.uid),await I(fe.user.uid," ","01000000000"," "),{error:null}}catch(fe){return console.error(" Error creating test user:",fe),{error:fe}}}let z="    ",de=k==null?void 0:k.code;if(de==="auth/invalid-credential")try{const fe=await ez(Ot,((O=k==null?void 0:k.customData)==null?void 0:O.email)||"");Array.isArray(fe)&&fe.length===0?(de="auth/user-not-found",z="     "):(de="auth/wrong-password",z="   ")}catch{z="      "}else de==="auth/invalid-email"?z="    ":de==="auth/user-not-found"?z="     ":de==="auth/wrong-password"?z="   ":de==="auth/too-many-requests"&&(z="      ");return{error:{...k,code:de,message:z}}}},_=async()=>{try{const S=e==null?void 0:e.uid;localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await Ob(Ot),S&&(localStorage.removeItem(`sub_cache_${S}`),localStorage.removeItem(`profile_cache_v2_${S}`),console.log(" Cleared user caches for:",S));try{await Va.remove({key:"selected_wallet_id"}),await Va.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const N=(()=>{try{const O=typeof window<"u"?window:null,k=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),z=typeof window<"u"&&window.location.protocol==="file:",de=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return k||z||de||typeof import.meta<"u"&&IG&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(N)}catch{window.location.href=N}}catch(S){console.error("Sign out error:",S)}},v=async S=>{try{return await J9(Ot,S),{error:null}}catch(R){console.error("Reset password error:",R);let C="        ";return R.code==="auth/user-not-found"?C="     ":R.code==="auth/invalid-email"&&(C="   "),{error:{...R,message:C}}}},w=async(S=!1)=>{var O,k,z,de,fe,Se,$,W,re,we,Ee,se,_e,j,Ge,Me,xn,Fn,_n,wn,Rn;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}h.current&&(h.current(),h.current=null),console.log("Checking subscription status for user:",e.uid,{force:S});const R=`sub_cache_${e.uid}`,C=Date.now(),N=1e3*60*60*24;if(!S)try{const Ct=localStorage.getItem(R);if(Ct){const{data:ft,timestamp:at}=JSON.parse(Ct);if(C-at<N){const ar={...ft,subscription:ft.subscription?{...ft.subscription,activatedAt:ft.subscription.activatedAt?{toDate:()=>new Date(ft.subscription.activatedAt)}:null,endDate:ft.subscription.endDate?{toDate:()=>new Date(ft.subscription.endDate)}:null}:null,branchPackage:ft.branchPackage?{...ft.branchPackage,activatedAt:ft.branchPackage.activatedAt?{toDate:()=>new Date(ft.branchPackage.activatedAt)}:null,endDate:ft.branchPackage.endDate?{toDate:()=>new Date(ft.branchPackage.endDate)}:null}:null,freeTrialStartDate:ft.freeTrialStartDate?{toDate:()=>new Date(ft.freeTrialStartDate)}:null,freeTrialEndDate:ft.freeTrialEndDate?{toDate:()=>new Date(ft.freeTrialEndDate)}:null};o(ar);const lr=((O=ft==null?void 0:ft.branchPackage)==null?void 0:O.status)==="active";let Un=!1;if(lr)Un=!0;else{const wt=ar.subscription,an=wt&&wt.isActive===!0,xr=wt&&wt.endDate&&new Date<wt.endDate.toDate();Un=an&&xr}l(Un),console.log(" Subscription loaded from cache (Client-side validity check applied)");return}}}catch(Ct){console.warn("Subscription Cache parse error:",Ct)}try{const Ct=ke(Y,"users",e.uid),ft=await en(Ct);if(ft.exists()){const at=ft.data();o(at);try{const Un={...at,subscription:at.subscription?{...at.subscription,activatedAt:((de=(z=(k=at.subscription.activatedAt)==null?void 0:k.toDate)==null?void 0:z.call(k))==null?void 0:de.toISOString())||at.subscription.activatedAt,endDate:(($=(Se=(fe=at.subscription.endDate)==null?void 0:fe.toDate)==null?void 0:Se.call(fe))==null?void 0:$.toISOString())||at.subscription.endDate}:null,branchPackage:at.branchPackage?{...at.branchPackage,activatedAt:((we=(re=(W=at.branchPackage.activatedAt)==null?void 0:W.toDate)==null?void 0:re.call(W))==null?void 0:we.toISOString())||at.branchPackage.activatedAt,endDate:((_e=(se=(Ee=at.branchPackage.endDate)==null?void 0:Ee.toDate)==null?void 0:se.call(Ee))==null?void 0:_e.toISOString())||at.branchPackage.endDate}:null,freeTrialStartDate:((Me=(Ge=(j=at.freeTrialStartDate)==null?void 0:j.toDate)==null?void 0:Ge.call(j))==null?void 0:Me.toISOString())||at.freeTrialStartDate,freeTrialEndDate:((_n=(Fn=(xn=at.freeTrialEndDate)==null?void 0:xn.toDate)==null?void 0:Fn.call(xn))==null?void 0:_n.toISOString())||at.freeTrialEndDate};localStorage.setItem(R,JSON.stringify({data:Un,timestamp:C}))}catch{}console.log(" Subscription Data Details (Fetched):",{userId:e.uid,isActive:(wn=at.subscription)==null?void 0:wn.isActive});const ar=((Rn=at==null?void 0:at.branchPackage)==null?void 0:Rn.status)==="active";let lr=!1;ar?lr=!0:lr=uG(at.subscription),l(lr)}}catch(Ct){console.error("Error checking subscription status:",Ct)}},x=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await f(e.uid,!0),await w()}catch(S){console.error("Error refreshing profile:",S)}},A={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:p,signIn:y,signOut:_,resetPassword:v,updateUserProfile:async S=>{if(e)try{const R={updatedAt:Ve()};if(S.fullName!==void 0&&(R.fullName=S.fullName),S.phone!==void 0&&(R.phone=S.phone),S.sim1Number!==void 0){const C=(S.sim1Number||"").trim();R.sim1Number=C.length?C:null}if(S.sim2Number!==void 0){const C=(S.sim2Number||"").trim();R.sim2Number=C.length?C:null}if(S.bridgeLink!==void 0){const C=(S.bridgeLink||"").trim();R.bridgeLink=C.length?C:null}if(S.bridgeDeviceId!==void 0){const C=(S.bridgeDeviceId||"").trim();R.bridgeDeviceId=C.length?C:null}S.showWithdrawNote!==void 0&&(R.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(R.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),S.smsReadingEnabled!==void 0&&(R.smsReadingEnabled=!!S.smsReadingEnabled),S.smsAutoRegisterEnabled!==void 0&&(R.smsAutoRegisterEnabled=!!S.smsAutoRegisterEnabled),await An(ke(Y,"profiles",e.uid),R),await f(e.uid,!0)}catch(R){console.error("Error updating user profile:",R)}},updateAvatarId:async S=>{if(e)try{await An(ke(Y,"profiles",e.uid),{avatarId:S,updatedAt:Ve()}),await f(e.uid)}catch(R){console.error("Error updating avatarId:",R)}},refreshProfile:x,checkSubscriptionStatus:w};return E.jsx(B2.Provider,{value:A,children:t})};function SG(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ry="Checkbox",[bG]=yu(ry),[AG,kI]=bG(ry);function xG(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,m]=D0({prop:n,defaultProp:s??!1,onChange:l,caller:ry}),[I,p]=b.useState(null),[y,_]=b.useState(null),v=b.useRef(!1),w=I?!!o||!!I.closest("form"):!0,x={checked:f,disabled:i,setChecked:m,control:I,setControl:p,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:v,required:c,defaultChecked:qo(s)?!1:s,isFormControl:w,bubbleInput:y,setBubbleInput:_};return E.jsx(AG,{scope:e,...x,children:RG(h)?h(x):r})}var z2="CheckboxTrigger",W2=b.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:I}=kI(z2,t),p=sr(s,d),y=b.useRef(l);return b.useEffect(()=>{const _=i==null?void 0:i.form;if(_){const v=()=>h(y.current);return _.addEventListener("reset",v),()=>_.removeEventListener("reset",v)}},[i,h]),E.jsx(sn.button,{type:"button",role:"checkbox","aria-checked":qo(l)?"mixed":l,"aria-required":c,"data-state":Q2(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:p,onKeyDown:Lt(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Lt(n,_=>{h(v=>qo(v)?!0:!v),I&&m&&(f.current=_.isPropagationStopped(),f.current||_.stopPropagation())})})});W2.displayName=z2;var DI=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return E.jsx(xG,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>E.jsxs(E.Fragment,{children:[E.jsx(W2,{...h,ref:e,__scopeCheckbox:n}),f&&E.jsx(G2,{__scopeCheckbox:n})]})})});DI.displayName=ry;var q2="CheckboxIndicator",H2=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=kI(q2,n);return E.jsx(Tl,{present:r||qo(i.checked)||i.checked===!0,children:E.jsx(sn.span,{"data-state":Q2(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});H2.displayName=q2;var K2="CheckboxBubbleInput",G2=b.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:m}=kI(K2,t),I=sr(n,m),p=SG(i),y=$C(r);b.useEffect(()=>{const v=f;if(!v)return;const w=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(w,"checked").set,L=!s.current;if(p!==i&&P){const A=new Event("click",{bubbles:L});v.indeterminate=qo(i),P.call(v,qo(i)?!1:i),v.dispatchEvent(A)}},[f,p,i,s]);const _=b.useRef(qo(i)?!1:i);return E.jsx(sn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:I,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});G2.displayName=K2;function RG(t){return typeof t=="function"}function qo(t){return t==="indeterminate"}function Q2(t){return qo(t)?"indeterminate":t?"checked":"unchecked"}const Y2=b.forwardRef(({className:t,...e},n)=>E.jsx(DI,{ref:n,className:ir("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:E.jsx(H2,{className:ir("flex items-center justify-center text-current"),children:E.jsx(jU,{className:"h-4 w-4"})})}));Y2.displayName=DI.displayName;const Wp=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(!1),[l,c]=b.useState(typeof navigator<"u"?!navigator.onLine:!1);b.useEffect(()=>{const x=()=>c(!navigator.onLine);return window.addEventListener("online",x),window.addEventListener("offline",x),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",x)}},[]);const[d,h]=b.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:I,loading:p}=ga(),y=Iu();b.useEffect(()=>{try{m&&!p&&y("/user/dashboard")}catch{}},[m,p,y]),b.useEffect(()=>{try{const x=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;x&&e(x)}catch{}try{const x=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;x==="true"?h(!0):x==="false"&&h(!1)}catch{}(async()=>{var x,P;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const L=await((P=(x=navigator.credentials).get)==null?void 0:P.call(x,{password:!0,mediation:"optional"}));L&&L.type==="password"&&(L.id&&e(L.id),L.password&&r(L.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const L=sessionStorage.getItem("cashy:rememberedPassword");L&&!n&&r(L)}catch{}}catch{}})()},[]);const _=async x=>{if(x.preventDefault(),o){hr.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){hr.error("   .      .");return}const P=(t||"").trim().toLowerCase(),L=(n||"").trim();if(console.log("    :",{email:P,password:"***"}),!t||!n){hr.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(P)){hr.error("    ");return}a(!0);try{try{await nz(Ot,d?oD:oz);try{window.localStorage.setItem("cashy:rememberLogin",d?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:A}=await f(P,L);if(console.log(" SignIn result:",{error:A}),A){console.error("    :",A);const S=A==null?void 0:A.code;S==="auth/user-not-found"?hr.error("     "):S==="auth/wrong-password"?hr.error("   "):S==="auth/invalid-credential"?hr.error("      "):S==="auth/too-many-requests"?hr.error("      "):hr.error((A==null?void 0:A.message)||"    ")}else{console.log("    !"),hr.success("   !");try{if(d&&navigator.credentials&&window.PasswordCredential){const S=new window.PasswordCredential({id:P,name:P,password:L});await navigator.credentials.store(S)}if(d)try{sessionStorage.setItem("cashy:rememberedPassword",L)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(A){console.error("   :",A),hr.error("   ")}finally{a(!1)}},v=x=>{if(o){x.preventDefault(),x.stopPropagation(),hr.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){x.preventDefault(),x.stopPropagation(),hr.error("   .      .");return}t||hr.error("   "),n||hr.error("   ");const P=(t||"").trim().toLowerCase();P&&!/^\S+@\S+\.\S+$/.test(P)&&hr.error("    ")},w=()=>{y("/user/forgot-password")};return b.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const x=document.documentElement,P=document.body,L=x.style.overflow,A=P.style.overflow,S=x.style.overscrollBehaviorY,R=P.style.overscrollBehaviorY;return x.style.overflow="hidden",P.style.overflow="hidden",x.style.overscrollBehaviorY="none",P.style.overscrollBehaviorY="none",()=>{x.style.overflow=L||"",P.style.overflow=A||"",x.style.overscrollBehaviorY=S||"",P.style.overscrollBehaviorY=R||""}},[]),E.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&E.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:E.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),E.jsx("div",{className:"absolute inset-0 bg-black/40"}),E.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:E.jsx(_4,{className:"w-10 h-10 text-white"})}),E.jsx("div",{className:"flex items-center justify-center mb-2",children:E.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),E.jsx("p",{className:"text-white/80",children:"    "})]}),E.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[E.jsxs("form",{onSubmit:_,className:"space-y-6",autoComplete:"on",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),E.jsxs("div",{className:"relative",children:[E.jsx(PS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),E.jsx(U_,{id:"username",type:"email",placeholder:"  ",value:t,onChange:x=>{const P=x.target.value;e(P);try{window.localStorage.setItem("cashy:lastEmail",P)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),E.jsxs("div",{className:"relative",children:[E.jsx(e4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),E.jsx(U_,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:x=>r(x.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),E.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?E.jsx(HU,{className:"w-5 h-5"}):E.jsx(GU,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[E.jsx(Y2,{id:"rememberLogin",checked:d,onCheckedChange:x=>h(!!x)}),E.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),E.jsx("div",{className:"flex justify-end",children:E.jsxs(us,{type:"button",variant:"ghost",size:"sm",onClick:w,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[E.jsx(PS,{className:"w-4 h-4 ml-1"}),"  "]})}),E.jsx("button",{type:"submit",onClick:v,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?E.jsxs("div",{className:"flex items-center justify-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):E.jsxs("div",{className:"flex items-center justify-center",children:[E.jsx(OU,{className:"w-5 h-5 ml-2"})," "]})})]}),E.jsxs("div",{className:"mt-6 text-center space-y-3",children:[E.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",E.jsx(m6,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),E.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",E.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",E.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},PG=Object.freeze(Object.defineProperty({__proto__:null,default:Wp},Symbol.toStringTag,{value:"Module"})),CG=()=>{const t=Iu(),e=hi(),{signOut:n,user:r,userSubscription:s}=ga(),{toast:i}=C0(),[o,a]=b.useState(!1),[l,c]=b.useState(!1),d=[{id:"home",label:"",icon:XU,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:YU,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:VU,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:CS,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:DU,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:By,path:"/transactions"},{id:"settings",label:"",icon:kS,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:FU,action:()=>{var _;a(!1);const y=(_=s==null?void 0:s.subscription)==null?void 0:_.planType;if(y===La.TAHWEELA||y===La.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:E4,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:WU,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:g4,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:By,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:yC,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:CS,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:BU,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:s4,action:()=>{a(!1);const _=`   
  : ${(r==null?void 0:r.email)||" "}`,v=encodeURIComponent(_);window.open(`https://wa.me/201000392539?text=${v}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:RS,action:async()=>{a(!1);try{await n()}catch(y){console.error("Logout error:",y)}},color:"#EF4444"}],m=[{id:"shop-expenses-settings",label:" ",icon:By,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:kS,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:RS,action:async()=>{c(!1);try{await n()}catch(y){console.error("Logout error:",y)}},color:"#EF4444"}],I=(y,_,v,w)=>{var S;const P=((S=s==null?void 0:s.subscription)==null?void 0:S.planType)===La.TAHWEELA,L=R=>["/user/dashboard","/profile-settings"].includes(R),A=R=>R==="debts";if(v){if(P&&!A(w)&&!L(y)){i({title:"  ",description:"      .",variant:"destructive"});return}v()}else if(_&&y==="/add"){if(P){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!_){if(P&&!L(y)){i({title:"  ",description:"      .",variant:"destructive"});return}t(y)}},p=y=>e.pathname===y;return E.jsxs("div",{className:"mobile-bottom-nav",children:[o&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),E.jsx("div",{className:"quick-actions-bottomsheet",children:E.jsx("div",{className:"quick-actions-grid",children:f.map((y,_)=>E.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var w;if(((w=s==null?void 0:s.subscription)==null?void 0:w.planType)===La.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),y.action()},style:{"--action-color":y.color,"--animation-delay":`${_*.06}s`},children:[E.jsx("div",{className:"quick-action-icon",children:E.jsx(y.icon,{className:"action-icon"})}),E.jsx("span",{className:"quick-action-label",children:y.label})]},y.id))})})]}),l&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),E.jsx("div",{className:"quick-actions-bottomsheet",children:E.jsx("div",{className:"quick-actions-grid",children:m.map((y,_)=>E.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var x;const v=(x=s==null?void 0:s.subscription)==null?void 0:x.planType,w=new Set(["logout","profile-settings"]);if(v===La.TAHWEELA&&!w.has(y.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),y.action()},style:{"--action-color":y.color,"--animation-delay":`${_*.06}s`},children:[E.jsx("div",{className:"quick-action-icon",children:E.jsx(y.icon,{className:"action-icon"})}),E.jsx("span",{className:"quick-action-label",children:y.label})]},y.id))})})]}),E.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(y=>{const _=y.icon,v=p(y.path);return E.jsxs("button",{onClick:()=>I(y.path,y.isSpecial,y.action,y.id),className:`mobile-nav-item ${v?"active":""} ${y.isSpecial?"special":""}`,type:"button","aria-label":y.label,children:[E.jsx("div",{className:`nav-icon-container ${y.isSpecial?"special-icon":""} ${y.isSpecial&&y.id==="add"&&o?"special-open":""}`,children:E.jsx(_,{className:`nav-icon ${v?"active-icon":""} ${y.isSpecial?"special-icon-svg":""} ${y.isSpecial&&y.id==="settings"&&l?"rotated":""}`})}),!y.isSpecial&&E.jsx("span",{className:`nav-label ${v?"active-label":""}`,children:y.label})]},y.id)})})]})};var pR,gR;const ac=(gR=(pR=import.meta)==null?void 0:pR.env)==null?void 0:gR.VITE_ANDROID_DOWNLOAD_URL;var yR,vR;const lc=(vR=(yR=import.meta)==null?void 0:yR.env)==null?void 0:vR.VITE_PC_DOWNLOAD_URL;var _R,wR;const cc=(wR=(_R=import.meta)==null?void 0:_R.env)==null?void 0:wR.VITE_PC32_DOWNLOAD_URL;var ER,IR;const uc=(IR=(ER=import.meta)==null?void 0:ER.env)==null?void 0:IR.VITE_ANDROID_VERSION;var TR,SR;const dc=(SR=(TR=import.meta)==null?void 0:TR.env)==null?void 0:SR.VITE_PC_VERSION;var bR,AR;const hc=(AR=(bR=import.meta)==null?void 0:bR.env)==null?void 0:AR.VITE_PC32_VERSION;function zn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function kG(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const fu=["siteContent","appDownloads"],qp=["siteContent","desktop_updates"],Hp=["siteContent","android_updates"],Gl="appDownloadsCache",DG=6*60*60*1e3;function NG(){try{const e=localStorage.getItem(Gl);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||ac,pcUrl:(n==null?void 0:n.pcUrl)||lc,pc32Url:(n==null?void 0:n.pc32Url)||cc,androidVersion:(n==null?void 0:n.androidVersion)||uc,pcVersion:(n==null?void 0:n.pcVersion)||dc,pc32Version:(n==null?void 0:n.pc32Version)||hc,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=zn(r.pcUrl)),r.androidVersion||(r.androidVersion=zn(r.androidUrl)),r.pc32Version||(r.pc32Version=zn(r.pc32Url)),r}}catch{}const t={androidUrl:ac,pcUrl:lc,pc32Url:cc,androidVersion:uc,pcVersion:dc,pc32Version:hc};return t.pcVersion||(t.pcVersion=zn(t.pcUrl)),t.androidVersion||(t.androidVersion=zn(t.androidUrl)),t.pc32Version||(t.pc32Version=zn(t.pc32Url)),t}async function J2(t=!1){try{if(!t)try{const r=localStorage.getItem(Gl),s=localStorage.getItem(Gl+"_ts");if(r&&s&&Date.now()-Number(s)<DG)return JSON.parse(r)}catch{}const e=await en(ke(Y,fu[0],fu[1]));if(e.exists()){const r=e.data();try{localStorage.setItem(Gl,JSON.stringify(r)),localStorage.setItem(Gl+"_ts",String(Date.now()))}catch{}const s={androidUrl:(r==null?void 0:r.androidUrl)||ac,pcUrl:(r==null?void 0:r.pcUrl)||lc,pc32Url:(r==null?void 0:r.pc32Url)||cc,androidVersion:(r==null?void 0:r.androidVersion)||uc,pcVersion:(r==null?void 0:r.pcVersion)||dc,pc32Version:(r==null?void 0:r.pc32Version)||hc,updatedAt:r==null?void 0:r.updatedAt,updatedBy:r==null?void 0:r.updatedBy};return s.pcVersion||(s.pcVersion=zn(s.pcUrl)),s.androidVersion||(s.androidVersion=zn(s.androidUrl)),s.pc32Version||(s.pc32Version=zn(s.pc32Url)),s}const n={androidUrl:ac,pcUrl:lc,pc32Url:cc,androidVersion:uc,pcVersion:dc,pc32Version:hc};return n.pcVersion||(n.pcVersion=zn(n.pcUrl)),n.androidVersion||(n.androidVersion=zn(n.androidUrl)),n.pc32Version||(n.pc32Version=zn(n.pc32Url)),n}catch(e){const n=(e==null?void 0:e.message)||"";((e==null?void 0:e.code)||"")==="permission-denied"||n.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",e):console.error(" Error loading app downloads:",e);try{const i=localStorage.getItem(Gl);if(i){const o=JSON.parse(i),a={androidUrl:(o==null?void 0:o.androidUrl)||ac,pcUrl:(o==null?void 0:o.pcUrl)||lc,pc32Url:(o==null?void 0:o.pc32Url)||cc,androidVersion:(o==null?void 0:o.androidVersion)||uc,pcVersion:(o==null?void 0:o.pcVersion)||dc,pc32Version:(o==null?void 0:o.pc32Version)||hc,updatedAt:o==null?void 0:o.updatedAt,updatedBy:o==null?void 0:o.updatedBy};return a.pcVersion||(a.pcVersion=zn(a.pcUrl)),a.androidVersion||(a.androidVersion=zn(a.androidUrl)),a.pc32Version||(a.pc32Version=zn(a.pc32Url)),a}}catch{}const s={androidUrl:ac,pcUrl:lc,pc32Url:cc,androidVersion:uc,pcVersion:dc,pc32Version:hc};return s.pcVersion||(s.pcVersion=zn(s.pcUrl)),s.androidVersion||(s.androidVersion=zn(s.androidUrl)),s.pc32Version||(s.pc32Version=zn(s.pc32Url)),s}}function OG(t){return J2().then(t),()=>{}}async function LG(t,e,n,r,s,i=12e4){const o=V2(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=GK(o,l);return new Promise((d,h)=>{const f=HK(c,t);let m=!1;const I=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",p=>{const y=Math.round(p.bytesTransferred/p.totalBytes*100);s&&s(y)},p=>{clearTimeout(I),h(p)},async()=>{try{if(clearTimeout(I),m)return;const p=await KK(c),y={updatedAt:Ve(),updatedBy:n||"admin"};e==="android"?(y.androidUrl=p,r&&(y.androidVersion=r)):e==="pc"?(y.pcUrl=p,r&&(y.pcVersion=r)):(y.pc32Url=p,r&&(y.pc32Version=r));const _=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),v=mn(ke(Y,fu[0],fu[1]),y,{merge:!0});let w=!1;const x=new Promise(P=>setTimeout(()=>{w=!0,P()},_));try{await Promise.race([v,x])}catch(P){console.warn(" Firestore write error, proceeding with URL only:",P)}w&&console.warn(" Firestore update timed out;             ."),d(p)}catch(p){h(p)}})})}async function VG(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ve(),updatedBy:e||"admin"};await mn(ke(Y,fu[0],fu[1]),r,{merge:!0})}async function MG(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ve(),updatedBy:e||"admin"};await mn(ke(Y,qp[0],qp[1]),r,{merge:!0})}async function X2(){try{try{const s=localStorage.getItem("desktop_update_cache");if(s){const i=JSON.parse(s)}}catch{}const t=ke(Y,qp[0],qp[1]),e=await en(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,downloadURL_64:n!=null&&n.downloadURL_64?String(n.downloadURL_64):void 0,downloadURL_32:n!=null&&n.downloadURL_32?String(n.downloadURL_32):void 0,notes:n!=null&&n.notes?String(n.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching desktop updates:",t);try{const e=localStorage.getItem("desktop_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function Z2(t){return X2().then(t),()=>{}}function eL(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function FG(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ve(),updatedBy:e||"admin"};await mn(ke(Y,Hp[0],Hp[1]),r,{merge:!0})}async function tL(){try{const t=ke(Y,Hp[0],Hp[1]),e=await en(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,url:n!=null&&n.url?String(n.url):void 0,notes:n!=null&&n.notes?String(n.notes):void 0,force:!!(n!=null&&n.force),code:typeof(n==null?void 0:n.code)=="number"?n.code:typeof(n==null?void 0:n.versionCode)=="number"?n.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching android updates:",t);try{const e=localStorage.getItem("android_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function UG(t){return tL().then(t),()=>{}}const jG=Object.freeze(Object.defineProperty({__proto__:null,fetchAndroidUpdates:tL,fetchDesktopUpdates:X2,getAppDownloads:J2,getCachedOrEnvAppDownloads:NG,listenAndroidUpdates:UG,listenAppDownloads:OG,listenDesktopUpdates:Z2,resolveDownloadUrl:kG,selectDesktopUrl:eL,setAndroidUpdateInfo:FG,setAppDownloadLinks:VG,setDesktopUpdateInfo:MG,uploadAppBinaryResumable:LG},Symbol.toStringTag,{value:"Module"})),$G=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=F.useState(!1),[s,i]=F.useState(!1),[o,a]=F.useState(!1),[l,c]=F.useState(0),[d,h]=F.useState(""),[f,m]=F.useState(!1),I=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(P){console.warn("failed to minimize",P)}},p=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(P){console.warn("failed to close",P)}},y=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(P){console.warn("failed to soft refresh",P),m(!1)}}};if(F.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(P=>{const L=(P==null?void 0:P.percent)==null?0:Number(P.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(P){console.warn("update init failed",P)}},[e,t]),F.useEffect(()=>{const P=Z2(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const S=eL({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(S)}});return()=>{try{P()}catch{}}},[]),!e)return null;const[v,w]=F.useState(!1),x=async()=>{try{if(!t)return;v?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),w(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),w(!0))}catch(P){console.warn("window toggle failed",P)}};return E.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[E.jsx("button",{type:"button","aria-label":"",title:"",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:E.jsx(M0,{className:"w-5 h-5"})}),E.jsx("button",{type:"button","aria-label":"",title:" ",onClick:y,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:E.jsx(V0,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),E.jsx("button",{type:"button","aria-label":"",title:"",onClick:I,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:E.jsx(o4,{className:"w-5 h-5"})}),E.jsx("button",{type:"button","aria-label":"/",title:v?"  ":"   ",onClick:x,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:E.jsx(m4,{className:"w-5 h-5"})})]})},Pw=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=b.useState(`${n}logo.svg`),[i,o]=b.useState(0),a=b.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return E.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:E.jsxs("div",{className:"flex flex-col items-center justify-center",children:[E.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),E.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},Ix=ny("AppLauncher",{web:()=>te(()=>import("./web-BX8U7p99.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function BG(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Ie&&Ie.getPlatform()!=="web"&&(Ix.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Ie&&Ie.getPlatform()!=="web"&&Ix.openUrl({url:n})}catch{}}}function nL(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function zG(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?nL(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function tJ(t,e,n){const r=nL(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function WG(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function qG(t){const e=WG(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function nJ(t,e,n){const r=zG(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=qG(t||e);BG(r,s)}async function HG(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function NI(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function KG(t,e,n=0){const r=NI(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const za=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:NI,calculateProfit:KG},Symbol.toStringTag,{value:"Module"})),GG=t=>t==="withdraw"||t==="receive"?"receive":"send",QG=async t=>{if(!t)return null;const e=$e(De(Y,"transactions"),Le("reference","==",t),Fu(1)),n=await We(e);return n.empty?null:n.docs[0].id},YG=async t=>{var e;try{const n=await Va.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return eQ(t||((e=Ot.currentUser)==null?void 0:e.uid)||"")||null},_v=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await Po.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},rL=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await QG(t.reference);if(e)return{id:e,duplicate:!0};const n=GG(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await _v(t.receiverMsisdn);if(o||(o=await _v(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await _v(a))}r=o||await YG(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await CI.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await HG(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=NI(t.amount,n);await Jr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},km=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},Cw=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Ot.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(p=>km(p)).filter(p=>!!p):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=p=>String(p||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:km(String((p==null?void 0:p.phone)||(p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn):[],d=new Map;for(const p of s){const y=l(p);for(const _ of c){const v=l(_.msisdn);if(_.msisdn===p){d.set(_.walletId,_.msisdn);continue}if(v.slice(-5)===y.slice(-5)){d.set(_.walletId,_.msisdn);continue}}}if(d.size===1){const[p,y]=Array.from(d.entries())[0];return{walletId:p,msisdn:y}}const f=(await Po.getByMerchantId(r)||[]).map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:km(String((p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn),m=[...c,...f],I=new Map;for(const p of s){const y=l(p);for(const _ of m){const v=l(_.msisdn);if(_.msisdn===p){I.set(_.walletId,_.msisdn);continue}if(v.slice(-5)===y.slice(-5)){I.set(_.walletId,_.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",I.size)}catch{}if(I.size===1){const[p,y]=Array.from(I.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:p,msisdn:y})}catch{}return{walletId:p,msisdn:y}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function JG(t,e){try{const n=i=>km(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function XG(t){var e;try{const n=t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await Cw(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");if(a&&o[a]&&o[a].walletId)return{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")};if(l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId)return{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")};if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";if(t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||""),c){const d=await Cw([c],n);if(d)return d}}return null}catch{return null}}function ZG(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const eQ=t=>{var e,n;try{const r=t||((e=Ot.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function sL(){return typeof window>"u"?()=>{}:()=>{}}const ho=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:ZG,detectWalletFromSim:JG,identifyWalletBySim:Cw,initMobileSmsBridge:sL,processMobileTransactionNotification:rL,resolveWalletBySimOrSlot:XG},Symbol.toStringTag,{value:"Module"})),tQ=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},nQ=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},rQ=()=>{var t,e;try{const n=((t=Ot.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},sQ=()=>{var t;try{const e=((t=Ot.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},wv=async(t,e)=>{var w;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=tQ(n),d=nQ(n);if(!c||c<=0)return;const h=((w=Ot.currentUser)==null?void 0:w.uid)||"",f=rQ()||void 0,m=sQ()||"",I=f||"default-line";if(!h||!f||!m)return;try{const x=await hG(h);if((x==null?void 0:x.planType)===La.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const p=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,y=`VF-${btoa(unescape(encodeURIComponent(p))).slice(0,24)}`,_=a?"withdraw":l?"transfer":"withdraw",v={type:_,amount:c,provider:"vodafone_cash",shopId:m,lineId:I,walletId:f,senderMsisdn:_==="transfer"&&d||void 0,receiverMsisdn:_==="withdraw"&&d||void 0,reference:y,createdBy:h,merchantUserId:h,note:"  "};try{await rL(v)}catch{}},Rs={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Jr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Jr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Jr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=Rs.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=Rs.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Jr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=Rs.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=Rs.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=Rs.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Jr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},iQ=Rs,rJ=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:iQ,reportsService:Rs},Symbol.toStringTag,{value:"Module"})),Kp={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=ke(Y,"walletLimits",t),s={updatedAt:Ve(),ownerId:(n=Ot.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await mn(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=ke(Y,"walletLimits",t);let r;try{r=await en(n)}catch(i){return console.error("     (     ):",i),null}if(r.exists()){const i=r.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||_t.now()}}const s={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:_t.now()};return await mn(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Ve(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid}),s}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=ke(Y,"walletLimits",t);return await mn(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Ve(),updatedAt:Ve(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=ke(Y,"walletLimits",t);return await mn(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Ve(),updatedAt:Ve(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=ke(Y,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Ve()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await mn(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n,r){try{const s=ke(Y,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Ve()},a=new Date,l=r?new Date(r):a,c=l.getDate()===a.getDate()&&l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear(),d=l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear();return n==="transfer"?(c&&(o.dailyTransferUsed=Math.max(0,(i.dailyTransferUsed||0)-e)),d&&(o.monthlyTransferUsed=Math.max(0,(i.monthlyTransferUsed||0)-e))):(c&&(o.dailyWithdrawUsed=Math.max(0,(i.dailyWithdrawUsed||0)-e)),d&&(o.monthlyWithdrawUsed=Math.max(0,(i.monthlyWithdrawUsed||0)-e))),Object.keys(o).length<=1?i:(await mn(s,{...o},{merge:!0}),await this.getWalletLimits(t))}catch(s){throw console.error("      :",s),s}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=ke(Y,"walletLimits",t);return await mn(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Ve(),lastMonthlyReset:Ve(),updatedAt:Ve(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},kw=Object.freeze(Object.defineProperty({__proto__:null,default:Kp,walletDailyLimitsService:Kp},Symbol.toStringTag,{value:"Module"}));class oQ{constructor(){Ku(this,"intervalId",null);Ku(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Ot.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await Rw.getToday(n);await Rw.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await Rs.syncReportsDataFromFirebase(e);const n=Rs.getReportsData(e);if(!n.lastDailyResetDate||!Rs.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Jr.getUserTransactions(e),l=v=>{const w=String(v||"").toLowerCase();return["completed","confirmed","success"].includes(w)?"completed":["failed","error"].includes(w)?"failed":["cancelled","canceled"].includes(w)?"cancelled":"pending"},c=(a||[]).filter(v=>{var x,P;const w=(x=v==null?void 0:v.createdAt)!=null&&x.toDate?v.createdAt.toDate():(v==null?void 0:v.createdAt)instanceof Date?v.createdAt:new Date(v==null?void 0:v.createdAt);return((P=w==null?void 0:w.toDateString)==null?void 0:P.call(w))===o&&l(v==null?void 0:v.status)==="completed"}),d=c.length,h=c.reduce((v,w)=>v+Number(w.amount||0),0),f=v=>{const w=String(((v==null?void 0:v.type)??(v==null?void 0:v.txnType))||"").toLowerCase();return w==="withdraw"||w==="withdrawal"||w==="receive"},m=v=>{const w=String(((v==null?void 0:v.type)??(v==null?void 0:v.txnType))||"").toLowerCase();return w==="send"||w==="transfer"},I=c.filter(f).reduce((v,w)=>{const x=w.withdrawnAmount!==void 0?Number(w.withdrawnAmount):Number(w.amount||0);return v+x},0),p=c.filter(m).reduce((v,w)=>{const x=w.sentAmount!==void 0?Number(w.sentAmount):Number(w.amount||0);return v+x},0),y=c.reduce((v,w)=>v+Number(Rs.calculateTransactionProfit(w)||0),0),_=new Date(i).toISOString().slice(0,10);await j2.add({userId:e,reportDate:_,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(I.toFixed(2)),totalSent:Number(p.toFixed(2)),profit:Number(y.toFixed(2)),walletId:null}),console.log("    :",_)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await Po.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await Kp.resetDailyLimits(i)}catch{}if(r)try{await Kp.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const Tx=new oQ,Ev=768;function aQ(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Ev-1}px)`),r=()=>{e(window.innerWidth<Ev)};return n.addEventListener("change",r),e(window.innerWidth<Ev),()=>n.removeEventListener("change",r)},[]),!!t}function lQ(){const[t,e]=b.useState("default"),[n,r]=b.useState(!1);return b.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const iL=b.createContext(void 0);function cQ({children:t}){const{profile:e,user:n,loading:r}=ga(),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(!0);b.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),b.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const I=localStorage.getItem(m);i(I||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const I=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==I))try{const p=localStorage.getItem(I);i(p||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return E.jsx(iL.Provider,{value:d,children:t})}function uQ(){const t=b.useContext(iL);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var Iv="focusScope.autoFocusOnMount",Tv="focusScope.autoFocusOnUnmount",Sx={bubbles:!1,cancelable:!0},dQ="FocusScope",oL=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=b.useState(null),c=ai(s),d=ai(i),h=b.useRef(null),f=sr(e,p=>l(p)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let p=function(w){if(m.paused||!a)return;const x=w.target;a.contains(x)?h.current=x:lo(h.current,{select:!0})},y=function(w){if(m.paused||!a)return;const x=w.relatedTarget;x!==null&&(a.contains(x)||lo(h.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const P of w)P.removedNodes.length>0&&lo(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const v=new MutationObserver(_);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),v.disconnect()}}},[r,a,m.paused]),b.useEffect(()=>{if(a){Ax.add(m);const p=document.activeElement;if(!a.contains(p)){const _=new CustomEvent(Iv,Sx);a.addEventListener(Iv,c),a.dispatchEvent(_),_.defaultPrevented||(hQ(yQ(aL(a)),{select:!0}),document.activeElement===p&&lo(a))}return()=>{a.removeEventListener(Iv,c),setTimeout(()=>{const _=new CustomEvent(Tv,Sx);a.addEventListener(Tv,d),a.dispatchEvent(_),_.defaultPrevented||lo(p??document.body,{select:!0}),a.removeEventListener(Tv,d),Ax.remove(m)},0)}}},[a,c,d,m]);const I=b.useCallback(p=>{if(!n&&!r||m.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,_=document.activeElement;if(y&&_){const v=p.currentTarget,[w,x]=fQ(v);w&&x?!p.shiftKey&&_===x?(p.preventDefault(),n&&lo(w,{select:!0})):p.shiftKey&&_===w&&(p.preventDefault(),n&&lo(x,{select:!0})):_===v&&p.preventDefault()}},[n,r,m.paused]);return E.jsx(sn.div,{tabIndex:-1,...o,ref:f,onKeyDown:I})});oL.displayName=dQ;function hQ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(lo(r,{select:e}),document.activeElement!==n)return}function fQ(t){const e=aL(t),n=bx(e,t),r=bx(e.reverse(),t);return[n,r]}function aL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bx(t,e){for(const n of t)if(!mQ(n,{upTo:e}))return n}function mQ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function pQ(t){return t instanceof HTMLInputElement&&"select"in t}function lo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&pQ(t)&&e&&t.select()}}var Ax=gQ();function gQ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=xx(t,e),t.unshift(e)},remove(e){var n;t=xx(t,e),(n=t[0])==null||n.resume()}}}function xx(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function yQ(t){return t.filter(e=>e.tagName!=="A")}var Sv=0;function vQ(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Rx()),document.body.insertAdjacentElement("beforeend",t[1]??Rx()),Sv++,()=>{Sv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Sv--}},[])}function Rx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ys=function(){return Ys=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ys.apply(this,arguments)};function lL(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function _Q(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Dm="right-scroll-bar-position",Nm="width-before-scroll-bar",wQ="with-scroll-bars-hidden",EQ="--removed-body-scroll-bar-size";function bv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function IQ(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var TQ=typeof window<"u"?b.useLayoutEffect:b.useEffect,Px=new WeakMap;function SQ(t,e){var n=IQ(null,function(r){return t.forEach(function(s){return bv(s,r)})});return TQ(function(){var r=Px.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||bv(a,null)}),i.forEach(function(a){s.has(a)||bv(a,o)})}Px.set(n,t)},[t]),n}function bQ(t){return t}function AQ(t,e){e===void 0&&(e=bQ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function xQ(t){t===void 0&&(t={});var e=AQ(null);return e.options=Ys({async:!0,ssr:!1},t),e}var cL=function(t){var e=t.sideCar,n=lL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Ys({},n))};cL.isSideCarExport=!0;function RQ(t,e){return t.useMedium(e),cL}var uL=xQ(),Av=function(){},sy=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:Av,onWheelCapture:Av,onTouchMoveCapture:Av}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,I=t.noIsolation,p=t.inert,y=t.allowPinchZoom,_=t.as,v=_===void 0?"div":_,w=t.gapMode,x=lL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=f,L=SQ([n,e]),A=Ys(Ys({},x),s);return b.createElement(b.Fragment,null,d&&b.createElement(P,{sideCar:uL,removeScrollBar:c,shards:h,noRelative:m,noIsolation:I,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:w}),o?b.cloneElement(b.Children.only(a),Ys(Ys({},A),{ref:L})):b.createElement(v,Ys({},A,{className:l,ref:L}),a))});sy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sy.classNames={fullWidth:Nm,zeroRight:Dm};var PQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function CQ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=PQ();return e&&t.setAttribute("nonce",e),t}function kQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function DQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var NQ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=CQ())&&(kQ(e,n),DQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},OQ=function(){var t=NQ();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},dL=function(){var t=OQ(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},LQ={left:0,top:0,right:0,gap:0},xv=function(t){return parseInt(t||"",10)||0},VQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[xv(n),xv(r),xv(s)]},MQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return LQ;var e=VQ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},FQ=dL(),bc="data-scroll-locked",UQ=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(wQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(bc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Dm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Nm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Dm," .").concat(Dm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Nm," .").concat(Nm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bc,`] {
    `).concat(EQ,": ").concat(a,`px;
  }
`)},Cx=function(){var t=parseInt(document.body.getAttribute(bc)||"0",10);return isFinite(t)?t:0},jQ=function(){b.useEffect(function(){return document.body.setAttribute(bc,(Cx()+1).toString()),function(){var t=Cx()-1;t<=0?document.body.removeAttribute(bc):document.body.setAttribute(bc,t.toString())}},[])},$Q=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;jQ();var i=b.useMemo(function(){return MQ(s)},[s]);return b.createElement(FQ,{styles:UQ(i,!e,s,n?"":"!important")})},Dw=!1;if(typeof window<"u")try{var Jf=Object.defineProperty({},"passive",{get:function(){return Dw=!0,!0}});window.addEventListener("test",Jf,Jf),window.removeEventListener("test",Jf,Jf)}catch{Dw=!1}var $l=Dw?{passive:!1}:!1,BQ=function(t){return t.tagName==="TEXTAREA"},hL=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!BQ(t)&&n[e]==="visible")},zQ=function(t){return hL(t,"overflowY")},WQ=function(t){return hL(t,"overflowX")},kx=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=fL(t,r);if(s){var i=mL(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},qQ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},HQ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},fL=function(t,e){return t==="v"?zQ(e):WQ(e)},mL=function(t,e){return t==="v"?qQ(e):HQ(e)},KQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},GQ=function(t,e,n,r,s){var i=KQ(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=mL(t,a),I=m[0],p=m[1],y=m[2],_=p-y-i*I;(I||_)&&fL(t,a)&&(h+=_,f+=I);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},Xf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Dx=function(t){return[t.deltaX,t.deltaY]},Nx=function(t){return t&&"current"in t?t.current:t},QQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},YQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},JQ=0,Bl=[];function XQ(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),s=b.useState(JQ++)[0],i=b.useState(dL)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=_Q([t.lockRef.current],(t.shards||[]).map(Nx),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var _=Xf(p),v=n.current,w="deltaX"in p?p.deltaX:v[0]-_[0],x="deltaY"in p?p.deltaY:v[1]-_[1],P,L=p.target,A=Math.abs(w)>Math.abs(x)?"h":"v";if("touches"in p&&A==="h"&&L.type==="range")return!1;var S=kx(A,L);if(!S)return!0;if(S?P=A:(P=A==="v"?"h":"v",S=kx(A,L)),!S)return!1;if(!r.current&&"changedTouches"in p&&(w||x)&&(r.current=P),!P)return!0;var R=r.current||P;return GQ(R,y,p,R==="h"?w:x)},[]),l=b.useCallback(function(p){var y=p;if(!(!Bl.length||Bl[Bl.length-1]!==i)){var _="deltaY"in y?Dx(y):Xf(y),v=e.current.filter(function(P){return P.name===y.type&&(P.target===y.target||y.target===P.shadowParent)&&QQ(P.delta,_)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(Nx).filter(Boolean).filter(function(P){return P.contains(y.target)}),x=w.length>0?a(y,w[0]):!o.current.noIsolation;x&&y.cancelable&&y.preventDefault()}}},[]),c=b.useCallback(function(p,y,_,v){var w={name:p,delta:y,target:_,should:v,shadowParent:ZQ(_)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(x){return x!==w})},1)},[]),d=b.useCallback(function(p){n.current=Xf(p),r.current=void 0},[]),h=b.useCallback(function(p){c(p.type,Dx(p),p.target,a(p,t.lockRef.current))},[]),f=b.useCallback(function(p){c(p.type,Xf(p),p.target,a(p,t.lockRef.current))},[]);b.useEffect(function(){return Bl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,$l),document.addEventListener("touchmove",l,$l),document.addEventListener("touchstart",d,$l),function(){Bl=Bl.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,$l),document.removeEventListener("touchmove",l,$l),document.removeEventListener("touchstart",d,$l)}},[]);var m=t.removeScrollBar,I=t.inert;return b.createElement(b.Fragment,null,I?b.createElement(i,{styles:YQ(s)}):null,m?b.createElement($Q,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function ZQ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const eY=RQ(uL,XQ);var pL=b.forwardRef(function(t,e){return b.createElement(sy,Ys({},t,{ref:e,sideCar:eY}))});pL.classNames=sy.classNames;var tY=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zl=new WeakMap,Zf=new WeakMap,em={},Rv=0,gL=function(t){return t&&(t.host||gL(t.parentNode))},nY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=gL(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},rY=function(t,e,n,r){var s=nY(e,Array.isArray(t)?t:[t]);em[n]||(em[n]=new WeakMap);var i=em[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),I=m!==null&&m!=="false",p=(zl.get(f)||0)+1,y=(i.get(f)||0)+1;zl.set(f,p),i.set(f,y),o.push(f),p===1&&I&&Zf.set(f,!0),y===1&&f.setAttribute(n,"true"),I||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return d(e),a.clear(),Rv++,function(){o.forEach(function(h){var f=zl.get(h)-1,m=i.get(h)-1;zl.set(h,f),i.set(h,m),f||(Zf.has(h)||h.removeAttribute(r),Zf.delete(h)),m||h.removeAttribute(n)}),Rv--,Rv||(zl=new WeakMap,zl=new WeakMap,Zf=new WeakMap,em={})}},sY=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=tY(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),rY(r,s,n,"aria-hidden")):function(){return null}},iy="Dialog",[yL,sJ]=yu(iy),[iY,js]=yL(iy),vL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=b.useRef(null),l=b.useRef(null),[c,d]=D0({prop:r,defaultProp:s??!1,onChange:i,caller:iy});return E.jsx(iY,{scope:e,triggerRef:a,contentRef:l,contentId:Wy(),titleId:Wy(),descriptionId:Wy(),open:c,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};vL.displayName=iy;var _L="DialogTrigger",wL=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=js(_L,n),i=sr(e,s.triggerRef);return E.jsx(sn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":VI(s.open),...r,ref:i,onClick:Lt(t.onClick,s.onOpenToggle)})});wL.displayName=_L;var OI="DialogPortal",[oY,EL]=yL(OI,{forceMount:void 0}),IL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=js(OI,e);return E.jsx(oY,{scope:e,forceMount:n,children:b.Children.map(r,o=>E.jsx(Tl,{present:n||i.open,children:E.jsx(k0,{asChild:!0,container:s,children:o})}))})};IL.displayName=OI;var Gp="DialogOverlay",TL=b.forwardRef((t,e)=>{const n=EL(Gp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=js(Gp,t.__scopeDialog);return i.modal?E.jsx(Tl,{present:r||i.open,children:E.jsx(lY,{...s,ref:e})}):null});TL.displayName=Gp;var aY=ch("DialogOverlay.RemoveScroll"),lY=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=js(Gp,n);return E.jsx(pL,{as:aY,allowPinchZoom:!0,shards:[s.contentRef],children:E.jsx(sn.div,{"data-state":VI(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),wl="DialogContent",SL=b.forwardRef((t,e)=>{const n=EL(wl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=js(wl,t.__scopeDialog);return E.jsx(Tl,{present:r||i.open,children:i.modal?E.jsx(cY,{...s,ref:e}):E.jsx(uY,{...s,ref:e})})});SL.displayName=wl;var cY=b.forwardRef((t,e)=>{const n=js(wl,t.__scopeDialog),r=b.useRef(null),s=sr(e,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return sY(i)},[]),E.jsx(bL,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Lt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Lt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Lt(t.onFocusOutside,i=>i.preventDefault())})}),uY=b.forwardRef((t,e)=>{const n=js(wl,t.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return E.jsx(bL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),bL=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=js(wl,n),l=b.useRef(null),c=sr(e,l);return vQ(),E.jsxs(E.Fragment,{children:[E.jsx(oL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:E.jsx(dg,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":VI(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),E.jsxs(E.Fragment,{children:[E.jsx(dY,{titleId:a.titleId}),E.jsx(fY,{contentRef:l,descriptionId:a.descriptionId})]})]})}),LI="DialogTitle",AL=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=js(LI,n);return E.jsx(sn.h2,{id:s.titleId,...r,ref:e})});AL.displayName=LI;var xL="DialogDescription",RL=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=js(xL,n);return E.jsx(sn.p,{id:s.descriptionId,...r,ref:e})});RL.displayName=xL;var PL="DialogClose",CL=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=js(PL,n);return E.jsx(sn.button,{type:"button",...r,ref:e,onClick:Lt(t.onClick,()=>s.onOpenChange(!1))})});CL.displayName=PL;function VI(t){return t?"open":"closed"}var kL="DialogTitleWarning",[iJ,DL]=NF(kL,{contentName:wl,titleName:LI,docsSlug:"dialog"}),dY=({titleId:t})=>{const e=DL(kL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},hY="DialogDescriptionWarning",fY=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${DL(hY).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},mY=vL,pY=wL,gY=IL,NL=TL,OL=SL,LL=AL,VL=RL,yY=CL;const Pv=mY,oJ=pY,vY=gY,ML=b.forwardRef(({className:t,...e},n)=>E.jsx(NL,{ref:n,className:ir("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));ML.displayName=NL.displayName;const Om=b.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>E.jsxs(vY,{children:[E.jsx(ML,{}),E.jsxs(OL,{ref:o,className:ir("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&E.jsxs(yY,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[E.jsx(M0,{className:"h-4 w-4"}),E.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Om.displayName=OL.displayName;const Lm=({className:t,...e})=>E.jsx("div",{className:ir("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Lm.displayName="DialogHeader";const _Y=({className:t,...e})=>E.jsx("div",{className:ir("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});_Y.displayName="DialogFooter";const Vm=b.forwardRef(({className:t,...e},n)=>E.jsx(LL,{ref:n,className:ir("text-lg font-semibold leading-none tracking-tight",t),...e}));Vm.displayName=LL.displayName;const Nw=b.forwardRef(({className:t,...e},n)=>E.jsx(VL,{ref:n,className:ir("text-sm text-muted-foreground",t),...e}));Nw.displayName=VL.displayName;const wY={},Ox=F.lazy(()=>te(()=>import("./Index-CAuDhf0A.js"),[],import.meta.url)),tm=F.lazy(()=>te(()=>import("./LandingPage-D1KijmfO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),Lx=F.lazy(()=>te(()=>import("./SubscriptionsPage-CYKYYznz.js"),__vite__mapDeps([11,1,4,12]),import.meta.url)),Vx=F.lazy(()=>te(()=>import("./AuthPage-CIdBJsVv.js"),__vite__mapDeps([13,1,2,3,8]),import.meta.url)),nm=F.lazy(()=>te(()=>import("./TopUpPage-C9kArsjK.js"),__vite__mapDeps([14,1,15]),import.meta.url)),Mx=F.lazy(()=>te(()=>import("./AdminTopupsPage-Sd0ZJHOr.js"),__vite__mapDeps([16,15]),import.meta.url)),Fx=F.lazy(()=>te(()=>import("./AdminNotificationsPage-TC0qfHv-.js"),__vite__mapDeps([17,1,18,19,20]),import.meta.url)),rm=F.lazy(()=>te(()=>import("./UserRegisterPage-CUURQEt3.js"),__vite__mapDeps([21,1,18,22,23,24,25,26]),import.meta.url)),Ux=F.lazy(()=>te(()=>import("./UserAccountSetupPage-B_X4eH6p.js"),__vite__mapDeps([27,1,18,22,26,25,10]),import.meta.url)),jx=F.lazy(()=>te(()=>import("./ForgotPasswordCodePage-CCgk7IEM.js"),[],import.meta.url)),$x=F.lazy(()=>te(()=>import("./DashboardLoginPage-CtXjmJ31.js"),__vite__mapDeps([28,1]),import.meta.url)),Bx=F.lazy(()=>te(()=>import("./ProtectedDashboard-CaHmKgCT.js"),__vite__mapDeps([29,1,15,30,18,31,32,33,23]),import.meta.url)),Mm=F.lazy(()=>te(()=>import("./ProtectedUserDashboard-C6X-urNA.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url)),zx=F.lazy(()=>te(()=>import("./MerchantDashboard-DNB8P5lb.js"),__vite__mapDeps([36,37,15,38,39,40,1,41,18,42]),import.meta.url)),Wx=F.lazy(()=>te(()=>import("./PendingApprovalPage-D6dwUpuY.js"),__vite__mapDeps([43,44,45]),import.meta.url)),qx=F.lazy(()=>te(()=>import("./AdminLogin-DdpAUpts.js"),[],import.meta.url)),Hx=F.lazy(()=>te(()=>import("./ProtectedAdminDashboard-DRX-h1bS.js"),__vite__mapDeps([46,12,47,37,15,38,18,30,31,48,1,19,22,39,49,4,45,25,50,51,35,9,7,10,3,8,52]),import.meta.url)),Kx=F.lazy(()=>te(()=>import("./AuthTestPage-pms577KB.js"),__vite__mapDeps([53,1,18]),import.meta.url)),Gx=F.lazy(()=>te(()=>import("./ProfileSettingsPage-B4Xs-T6b.js"),__vite__mapDeps([54,1,18,48,55,30,31,42,5,50,10,7,45]),import.meta.url)),Qx=F.lazy(()=>te(()=>import("./TransactionsPage-C9w_W7Bh.js"),__vite__mapDeps([56,1,15,39,57,38,49,30,18,31,4,41,10,8,32,45,33,5,52]),import.meta.url)),Yx=F.lazy(()=>te(()=>import("./WalletAdditionPage-W0qnwBwn.js"),__vite__mapDeps([58,1,18,15,5,23,25,31]),import.meta.url)),Jx=F.lazy(()=>te(()=>import("./ReferralsPage-0XUR0zQp.js"),__vite__mapDeps([59,1,39,22,24,20,10,51,52]),import.meta.url)),Xx=F.lazy(()=>te(()=>import("./CPanelPage-Bbs1vy3d.js"),__vite__mapDeps([60,1,18]),import.meta.url)),Zx=F.lazy(()=>te(()=>import("./CPanelLoginPage-CuzfLA13.js"),__vite__mapDeps([61,18,1]),import.meta.url)),eR=F.lazy(()=>te(()=>import("./NotFound-D7zQcfis.js"),[],import.meta.url)),tR=F.lazy(()=>te(()=>import("./PrivacyPolicyPage-4cqcPdZN.js"),[],import.meta.url)),Ma=new aB({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=fB({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});hB({queryClient:Ma,persister:t,maxAge:24*60*60*1e3})}catch{}const EY=()=>{if(!((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return E.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:E.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:E.jsx(V0,{className:"w-5 h-5"})})})},nR=()=>{const t=hi(),{user:e,loading:n}=ga(),r=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?E.jsx(CG,{}):null},IY=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},Cv=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await te(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>ho);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},TY=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await te(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>ho);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},rR=()=>{var Yn;const t=aQ(),e=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",{profile:n,user:r}=ga(),{shopId:s}=uQ(),i=hi(),o=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"&&i.pathname==="/"&&!!r,a=i.pathname.startsWith("/user/login")||i.pathname.startsWith("/auth")||i.pathname.startsWith("/landing")||i.pathname==="/"&&!o&&!r,l=!!r&&!a||i.pathname.startsWith("/user/dashboard")||o;F.useEffect(()=>{r&&console.log("Dashboard State Check:",{path:i.pathname,isUserDashboard:l,isAuthOrLanding:a,userUid:r.uid})},[i.pathname,l,r]);const c=Iu(),{toast:d}=C0(),[h,f]=F.useState(!1),[m,I]=F.useState(null),[p,y]=F.useState(!1),[_,v]=F.useState(null),[w,x]=F.useState(!1),[P,L]=F.useState(""),[A,S]=F.useState(""),[R,C]=F.useState(null),[N,O]=F.useState(null),k=F.useRef(null),z=F.useRef(null),de=F.useRef(!1),fe=F.useRef(null),Se=F.useRef(""),$=F.useRef(""),W=F.useRef(new Set);F.useEffect(()=>{try{const G=localStorage.getItem("sms_suppressed_ids")||"[]",H=Array.isArray(JSON.parse(G))?JSON.parse(G):[];W.current=new Set(H.map(q=>String(q||"")))}catch{}},[]);const[re,we]=F.useState(!1),Ee=F.useRef(n);F.useEffect(()=>{Ee.current=n},[n]),lQ(),F.useEffect(()=>{(async()=>{if(e)try{localStorage.getItem("hasCheckedNotificationPermission_v1")||(localStorage.setItem("hasCheckedNotificationPermission_v1","true"),setTimeout(()=>{try{window.location.href="cashy://openNotificationSettings"}catch{}},1500))}catch{}})();const H=q=>{};return window.addEventListener("notificationListenerStatus",H),()=>window.removeEventListener("notificationListenerStatus",H)},[d,e]),F.useEffect(()=>{if(!r)return;let G;return(async()=>{try{const{collection:q,query:ie,where:ee,onSnapshot:Z}=await te(async()=>{const{collection:J,query:oe,where:X,onSnapshot:ae}=await Promise.resolve().then(()=>Nn);return{collection:J,query:oe,where:X,onSnapshot:ae}},void 0,import.meta.url),{db:ue}=await te(async()=>{const{db:J}=await Promise.resolve().then(()=>qt);return{db:J}},void 0,import.meta.url),ce=ie(q(ue,"pendingSmsPopups"),ee("userId","==",r.uid),ee("status","==","pending"));G=Z(ce,J=>{J.docChanges().forEach(oe=>{var X,ae;if(oe.type==="added"){if(oe.doc.metadata.hasPendingWrites)return;const ve=oe.doc.data(),pe=((ae=(X=ve.createdAt)==null?void 0:X.toMillis)==null?void 0:ae.call(X))||Date.now();if(Date.now()-pe>5*60*1e3)return;const ge=ve.payload;if(ge){if(ge.popupId&&W.current.has(ge.popupId))return;Ge({...ge,popupId:oe.doc.id}),_e(!0);try{Gi()}catch{}}}else oe.type==="modified"?oe.doc.data().status!=="pending"&&Ge(pe=>(pe==null?void 0:pe.popupId)===oe.doc.id?(_e(!1),null):pe):oe.type==="removed"&&Ge(ve=>(ve==null?void 0:ve.popupId)===oe.doc.id?(_e(!1),null):ve)})})}catch(q){console.error("Error setting up popup listener:",q)}})(),()=>{G&&G()}},[r]);const[se,_e]=F.useState(!1),[j,Ge]=F.useState(null),[Me,xn]=F.useState(""),[Fn,_n]=F.useState(!1),[wn,Rn]=F.useState(!1),[Ct,ft]=F.useState(""),[at,ar]=F.useState(""),[lr,Un]=F.useState(!1),[wt,an]=F.useState(0),[xr,Ki]=F.useState(!1),[Rr,ya]=F.useState(""),[_s,Pn]=F.useState("");F.useEffect(()=>{try{const G=(r==null?void 0:r.uid)||"default",H=localStorage.getItem(`sim1Number_${G}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${G}`)??localStorage.getItem("sim2Number")??"";ya(H),Pn(q),Se.current=H,$.current=q}catch{}},[r==null?void 0:r.uid]);const ls=async(G,H)=>{if(!(!G||!j))try{const{resolveWalletBySimOrSlot:q,merchantWalletService:ie,detectWalletFromSim:ee}=await te(async()=>{const{resolveWalletBySimOrSlot:ce,merchantWalletService:J,detectWalletFromSim:oe}=await Promise.resolve().then(()=>ho);return{resolveWalletBySimOrSlot:ce,merchantWalletService:J,detectWalletFromSim:oe}},void 0,import.meta.url),Z=(r==null?void 0:r.uid)||"";Ge(ce=>ce?{...ce,simNumber:G,simLabel:H}:null);let ue=await q({simNumbers:[G],userId:Z});if(!ue||!ue.walletId)try{const ce=await ie.getByMerchantId(Z),J=localStorage.getItem(`wallets_${Z}`),oe=J?JSON.parse(J):[],X=(Array.isArray(oe)?oe:[]).map(ge=>({id:String((ge==null?void 0:ge.id)||""),phone:String((ge==null?void 0:ge.phone)||(ge==null?void 0:ge.msisdn)||""),isDefault:!!(ge!=null&&ge.isDefault)})),ae=(Array.isArray(ce)?ce:[]).map(ge=>({id:String((ge==null?void 0:ge.id)||""),msisdn:String((ge==null?void 0:ge.msisdn)||""),isDefault:!!(ge!=null&&ge.isDefault)})),ve=[...X,...ae],pe=await ee([G],ve);pe&&pe.walletId&&(ue={walletId:pe.walletId,msisdn:pe.msisdn})}catch{}if(ue&&ue.walletId){Ge(ce=>ce?{...ce,walletMsisdn:ue.msisdn}:null),localStorage.setItem(`selectedWallet_${Z}`,ue.walletId);try{localStorage.setItem(`selectedWallet_${Z}_${s||""}`,ue.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:ue.walletId}}))}catch{}try{const{Preferences:ce}=await te(async()=>{const{Preferences:J}=await Promise.resolve().then(()=>vv);return{Preferences:J}},void 0,import.meta.url);await ce.set({key:"selected_wallet_id",value:ue.walletId})}catch{}}}catch{}},va=F.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}Ki(!1);try{c("/user/login")}catch{}},[c]);F.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&Ki(!0)}catch{!r&&e&&Ki(!0)}},[r,e]);const Gi=F.useCallback(()=>{try{const G=window.AudioContext||window.webkitAudioContext;if(!G)return;const H=new G,q=H.createOscillator(),ie=H.createGain();q.type="sine",ie.gain.setValueAtTime(0,H.currentTime),q.connect(ie),ie.connect(H.destination);const ee=H.currentTime;q.frequency.setValueAtTime(800,ee),ie.gain.linearRampToValueAtTime(.15,ee+.02),q.start(ee),q.frequency.exponentialRampToValueAtTime(1200,ee+.08),ie.gain.exponentialRampToValueAtTime(1e-5,ee+.32),q.stop(ee+.35)}catch{}},[]),Yt=G=>{try{const H=String(G||"").replace(/[^0-9+]/g,"");if(!H)return"";if(H.startsWith("+20")){const q=H.slice(3);return q.startsWith("1")?"0"+q:q}if(H.startsWith("0020")){const q=H.slice(4);return q.startsWith("1")?"0"+q:q}if(H.startsWith("20")){const q=H.slice(2);return q.startsWith("1")?"0"+q:q}return H.startsWith("0")?H:/^(10|11|12|15)/.test(H)?"0"+H:H}catch{return""}},_a=G=>{try{const H=String(G||""),q=H.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let ie=q?parseFloat(String(q[1]).replace(",",".")):0;const ee=H.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let Z=ee?Yt(ee[1]):void 0;const ue=H.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),ce=H.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),J=ue?String(ue[1]).trim():ce?String(ce[1]).trim():void 0,oe=H.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),X=H.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),ae=H.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!ie||ie<=0){const pe=H.match(/Received\s*EGP\s*([0-9.,]+)/i)||H.match(/Received\s*EGP([0-9.,]+)/i);pe&&(ie=parseFloat(String(pe[1]).replace(/,/g,"")))}if(!Z){const pe=H.match(/from\s+([0-9+]+)/i);pe&&(Z=Yt(pe[1]))}const ve=oe?String(oe[1]).trim():X?String(X[1]).trim():ae?String(ae[1]).trim():void 0;return{amount:ie,sender:Z,senderName:J,reference:ve}}catch{return{amount:0}}};F.useEffect(()=>{(async()=>{var G;try{if(!se||!j){_n(!1);return}const{auth:H}=await te(async()=>{const{auth:Z}=await Promise.resolve().then(()=>qt);return{auth:Z}},void 0,import.meta.url),q=((G=H.currentUser)==null?void 0:G.uid)||"",ie=q?`selectedWallet_${q}`:"selectedWallet_default",ee=localStorage.getItem(ie)||"";if(!ee){_n(!0);return}try{const{merchantWalletService:Z}=await te(async()=>{const{merchantWalletService:J}=await Promise.resolve().then(()=>jl);return{merchantWalletService:J}},void 0,import.meta.url),ue=await Z.getById(ee),ce=ue&&ue.defaultWithdrawCommission!=null;_n(!ce)}catch{_n(!0)}}catch{_n(!0)}})()},[se,j]);const Qi=async G=>{try{const{merchantWalletService:H,detectWalletFromSim:q}=await te(async()=>{const{merchantWalletService:X,detectWalletFromSim:ae}=await Promise.resolve().then(()=>ho);return{merchantWalletService:X,detectWalletFromSim:ae}},void 0,import.meta.url),ie=(r==null?void 0:r.uid)||"";if(!ie)return;const ee=`wallets_${ie}`,Z=typeof localStorage<"u"?localStorage.getItem(ee):null,ue=Z?JSON.parse(Z):[],ce=await H.getByMerchantId(ie),J=[...(Array.isArray(ue)?ue:[]).map(X=>({id:String((X==null?void 0:X.id)||""),phone:String((X==null?void 0:X.phone)||(X==null?void 0:X.msisdn)||""),isDefault:!!(X!=null&&X.isDefault)})),...(Array.isArray(ce)?ce:[]).map(X=>({id:String((X==null?void 0:X.id)||""),msisdn:String((X==null?void 0:X.msisdn)||""),isDefault:!!(X!=null&&X.isDefault)}))],oe=await q(G||[],J);if(oe&&oe.walletId)try{localStorage.setItem(`selectedWallet_${ie}`,oe.walletId)}catch{}}catch{}};b.useEffect(()=>{const G=async H=>{var q;try{const ie=(H==null?void 0:H.detail)||{},ee=String(ie.text||"").trim(),Z=String(ie.title||"").trim();if(!ee)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*|instapay|received\s*egp|transaction/i.test(`${Z} ${ee}`)){try{wv(ie,{toast:d})}catch{}return}const{auth:ce}=await te(async()=>{const{auth:Be}=await Promise.resolve().then(()=>qt);return{auth:Be}},void 0,import.meta.url),J=((q=ce.currentUser)==null?void 0:q.uid)||"";let oe=s||"";if(!J){try{d({title:"  ",description:"   "})}catch{}return}if(!oe)try{const{doc:Be,getDoc:je}=await te(async()=>{const{doc:Wt,getDoc:It}=await Promise.resolve().then(()=>Nn);return{doc:Wt,getDoc:It}},void 0,import.meta.url),{db:Pe}=await te(async()=>{const{db:Wt}=await Promise.resolve().then(()=>qt);return{db:Wt}},void 0,import.meta.url),gt=await je(Be(Pe,"profiles",J));if(gt.exists()){const Wt=gt.data(),It=String((Wt==null?void 0:Wt.shopId)||"").trim();It&&(oe=It)}}catch{}let X="",ae="",ve=!1;try{const Be=J||"default";X=(localStorage.getItem(`sim1Number_${Be}`)??localStorage.getItem("sim1Number")??"").trim(),ae=(localStorage.getItem(`sim2Number_${Be}`)??localStorage.getItem("sim2Number")??"").trim(),ve=(localStorage.getItem(`smsAutoRegisterEnabled_${Be}`)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"}catch{}try{const{Preferences:Be}=await te(async()=>{const{Preferences:gt}=await Promise.resolve().then(()=>vv);return{Preferences:gt}},void 0,import.meta.url),je=await Be.get({key:"sim1_number"}),Pe=await Be.get({key:"sim2_number"});!X&&(je!=null&&je.value)&&(X=String(je.value).trim()),!ae&&(Pe!=null&&Pe.value)&&(ae=String(Pe.value).trim()),!X&&Se.current&&(X=Se.current),!ae&&$.current&&(ae=$.current)}catch{}let pe=[];const ge=Array.isArray(((H==null?void 0:H.detail)||{}).activeSimMsisdns)?H.detail.activeSimMsisdns.map(Be=>String(Be||"")):[];ge.length>0?pe=ge:pe=[X,ae].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(pe))}catch{}let Ne="";try{const Be=localStorage.getItem("lastSmsSimMsisdn")||"";Be&&pe.includes(Be)&&(Ne=Be)}catch{}if(Ne||(Ne=pe[0]||""),Ne)try{localStorage.setItem("lastSmsSimMsisdn",Ne)}catch{}const{resolveWalletBySimOrSlot:qe,bindSlotWalletMapping:Cn,merchantWalletService:ln}=await te(async()=>{const{resolveWalletBySimOrSlot:Be,bindSlotWalletMapping:je,merchantWalletService:Pe}=await Promise.resolve().then(()=>ho);return{resolveWalletBySimOrSlot:Be,bindSlotWalletMapping:je,merchantWalletService:Pe}},void 0,import.meta.url),He=J;let Ue=await qe({simNumbers:pe,userId:He});if(!Ue&&pe.length>0){try{await Qi(pe)}catch{}const Be=localStorage.getItem(`selectedWallet_${He}`)||"";if(Be)try{const je=await ln.getById(Be);Ue={walletId:Be,msisdn:String((je==null?void 0:je.msisdn)||"")}}catch{}}if(Ue&&Ue.walletId){try{localStorage.setItem(`selectedWallet_${He}`,Ue.walletId)}catch{}try{Cn({userId:He,walletId:Ue.walletId,msisdn:Ue.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ue.walletId}}))}catch{}try{const Be=String(Ue.msisdn||"").trim();Be&&(Ne=Be,localStorage.setItem("lastSmsSimMsisdn",Be))}catch{}}const Oe=_a(ee),Jn=Number(Oe.amount||0);if(!Jn||Jn<=0){try{wv(ie,{toast:d})}catch{}return}const mt=(Ue==null?void 0:Ue.msisdn)||await Cv(J),Nt=Oe.reference||`VF-${Date.now()}`,Rt={amount:Jn,sender:String(Oe.sender||""),senderName:Oe.senderName,text:ee,simNumber:Ne};if(ve)try{await Pr({...Rt,reference:Nt,walletMsisdn:mt})}catch{}else{try{const{addDoc:Be,collection:je,serverTimestamp:Pe}=await te(async()=>{const{addDoc:En,collection:Tt,serverTimestamp:xe}=await Promise.resolve().then(()=>Nn);return{addDoc:En,collection:Tt,serverTimestamp:xe}},void 0,import.meta.url),{db:gt}=await te(async()=>{const{db:En}=await Promise.resolve().then(()=>qt);return{db:En}},void 0,import.meta.url),Wt=await Be(je(gt,"pendingSmsPopups"),{userId:J,shopId:oe,payload:{...Rt,reference:Nt,walletMsisdn:mt,sim1Number:X,sim2Number:ae},status:"pending",createdAt:Pe()}),It=/Received\s*EGP/i.test(String(ee))?"InstaPay":"VF-Cash";Ge({...Rt,reference:Nt,providerLabel:It,walletMsisdn:mt,popupId:Wt.id})}catch{const Be=/Received\s*EGP/i.test(String(ee))?"InstaPay":"VF-Cash";Ge({...Rt,reference:Nt,providerLabel:Be,walletMsisdn:mt})}_e(!0);try{Gi()}catch{}}}catch{try{wv((H==null?void 0:H.detail)||{},{toast:d})}catch{}}};try{window.addEventListener("vfNotificationReceived",G)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",G)}catch{}}},[d,s]),b.useEffect(()=>{const G=async H=>{try{const q=(H==null?void 0:H.detail)||{},ie=String(q.text||"");if(!ie||!((n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true"))return;const Z=/Received\s*EGP/i.test(ie),ue=IY(ie,String(q.sender||q.msisdn||""));if(!Z&&!ue)return;const ce=(r==null?void 0:r.uid)||"";if(!ce)return;let J=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const oe=Ee.current;let X=(oe==null?void 0:oe.sim1Number)||"",ae=(oe==null?void 0:oe.sim2Number)||"";X||(X=localStorage.getItem(`sim1Number_${ce}`)||localStorage.getItem("sim1Number")||""),ae||(ae=localStorage.getItem(`sim2Number_${ce}`)||localStorage.getItem("sim2Number")||""),!X&&Se.current&&(X=Se.current),!ae&&$.current&&(ae=$.current),X=String(X).trim(),ae=String(ae).trim();const ve=String(q.msisdn||q.sender||""),pe=Yt(ve),ge=_a(ie);let Ne=Number(ge.amount||0),qe=ge.sender||pe||String(q.sender||""),Cn=ge.senderName,ln=ge.reference||"";if(Z){const je=String(ie).match(/Received\s*EGP\s*([0-9.,]+)/i);je&&(Ne=parseFloat(String(je[1]).replace(/,/g,"")));const Pe=String(ie).match(/from\s+([0-9+]+)/i);Pe&&(qe=Yt(Pe[1]));const gt=String(ie).match(/Ref:\s*([A-Za-z0-9\-]+)/i);gt&&(ln=String(gt[1]).trim())}if(!Ne||Ne<=0)return;let He="",Ue="";const Oe=[X,ae].filter(Boolean).map(je=>Yt(je));if(pe&&Oe.includes(pe)&&(He=pe,He===Yt(X)?Ue="SIM 1":He===Yt(ae)&&(Ue="SIM 2")),!Ue){const je=q==null?void 0:q.slot,Pe=je!=null?Number(je):-1;Pe===0?(Ue="SIM 1",He=X?Yt(X):""):Pe===1&&(Ue="SIM 2",He=ae?Yt(ae):"")}!Ue&&He&&(He===Yt(X)?Ue="SIM 1":He===Yt(ae)&&(Ue="SIM 2"));const Jn=Z?"InstaPay":"VF-Cash",mt={amount:Ne,sender:qe,senderName:Cn,text:ie,simNumber:He,simLabel:Ue},Nt=ce?`smsAutoRegisterEnabled_${ce}`:"smsAutoRegisterEnabled",Be=(localStorage.getItem(Nt)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!Be){Ge({...mt,reference:ln,providerLabel:Jn,walletMsisdn:""}),_e(!0);try{Gi()}catch{}}(async()=>{try{const{resolveWalletBySimOrSlot:je,bindSlotWalletMapping:Pe,merchantWalletService:gt}=await te(async()=>{const{resolveWalletBySimOrSlot:Tt,bindSlotWalletMapping:xe,merchantWalletService:tt}=await Promise.resolve().then(()=>ho);return{resolveWalletBySimOrSlot:Tt,bindSlotWalletMapping:xe,merchantWalletService:tt}},void 0,import.meta.url);let Wt=Array.isArray(q.activeSimMsisdns)&&q.activeSimMsisdns.length>0?q.activeSimMsisdns.map(Tt=>Yt(String(Tt||""))):pe?[pe]:[];Wt.length===0&&(Wt=[Yt(X),Yt(ae)].filter(Boolean));let It=await je({simNumbers:Wt,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),userId:ce});if(!It&&Wt.length>0){try{await Qi(Wt)}catch{}const Tt=localStorage.getItem(`selectedWallet_${ce}`)||"";if(Tt)try{const xe=await gt.getById(Tt);It={walletId:Tt,msisdn:String((xe==null?void 0:xe.msisdn)||"")}}catch{}}if(It&&It.walletId){try{localStorage.setItem(`selectedWallet_${ce}`,It.walletId)}catch{}try{Pe({userId:ce,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),walletId:It.walletId,msisdn:It.msisdn})}catch{}}const En=(It==null?void 0:It.msisdn)||(ce?await Cv(ce):"");if(Ge(Tt=>Tt?{...Tt,walletMsisdn:En}:null),Be)try{await Pr({...mt,reference:ln,walletMsisdn:En})}catch{}else try{const{addDoc:Tt,collection:xe,serverTimestamp:tt}=await te(async()=>{const{addDoc:lt,collection:Qe,serverTimestamp:cn}=await Promise.resolve().then(()=>Nn);return{addDoc:lt,collection:Qe,serverTimestamp:cn}},void 0,import.meta.url),{db:et}=await te(async()=>{const{db:lt}=await Promise.resolve().then(()=>qt);return{db:lt}},void 0,import.meta.url),Et=await Tt(xe(et,"pendingSmsPopups"),{userId:ce,shopId:J,payload:{...mt,reference:ln,walletMsisdn:En,sim1Number:X,sim2Number:ae},status:"pending",createdAt:tt()});Ge(lt=>lt?{...lt,popupId:Et.id}:null)}catch{}}catch(je){console.error("Background SMS processing error",je)}})()}catch(q){console.error("SMS Handler Error",q)}};try{window.addEventListener("mobileSmsReceived",G)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",G)}catch{}}},[d,s,n,r]),b.useEffect(()=>{},[d,s]),b.useEffect(()=>{},[d,s]);const Pr=async G=>{var H,q,ie;try{const ee=G||j;if(!ee)return;const{amount:Z,sender:ue,text:ce,simNumber:J,senderName:oe}=ee,X=String(ce||"");let ae=Number(Z||0);const ve=typeof(G==null?void 0:G.deferredMode)=="boolean"?G.deferredMode:wn,pe=(G==null?void 0:G.debtorName)??Ct,ge=(G==null?void 0:G.debtorNote)??at;try{_e(!1)}catch{}try{}catch{}const Ne=/Received\s*EGP/i.test(X)?"instapay":"vodafone_cash";if(!ae||ae<=0){const xe=X.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(xe&&(ae=parseFloat(String(xe[1]).replace(",","."))),!ae||ae<=0){const tt=X.match(/Received\s*EGP\s*([0-9.,]+)/i)||X.match(/Received\s*EGP([0-9.,]+)/i);tt&&(ae=parseFloat(String(tt[1]).replace(/,/g,"")))}}let qe=String(ue||"").trim();if(!qe){const xe=X.match(/\s+\s+(\d+)/i);qe=xe?Yt(xe[1]):""}let Cn=String((ee==null?void 0:ee.reference)||"").trim();if(!Cn){const xe=X.match(/\s*\s*([\d\.]+)/i);Cn=xe?String(xe[1]).trim():String(Date.now())}if(!ae||ae<=0){try{d({title:"      ",variant:"destructive"})}catch{}return}const{auth:ln}=await te(async()=>{const{auth:xe}=await Promise.resolve().then(()=>qt);return{auth:xe}},void 0,import.meta.url),He=((H=ln.currentUser)==null?void 0:H.uid)||"";let Ue=s||"";if(!He){try{d({title:"  ",description:"   "})}catch{}return}if(!Ue)try{const{doc:xe,getDoc:tt}=await te(async()=>{const{doc:lt,getDoc:Qe}=await Promise.resolve().then(()=>Nn);return{doc:lt,getDoc:Qe}},void 0,import.meta.url),{db:et}=await te(async()=>{const{db:lt}=await Promise.resolve().then(()=>qt);return{db:lt}},void 0,import.meta.url),Et=await tt(xe(et,"profiles",He));if(Et.exists()){const lt=Et.data(),Qe=String((lt==null?void 0:lt.shopId)||"").trim();Qe&&(Ue=Qe)}}catch{}if(!Ue){try{d({title:"  ",description:"   "})}catch{}return}let Oe="";if(J)try{const{detectWalletFromSim:xe}=await te(async()=>{const{detectWalletFromSim:Ye}=await Promise.resolve().then(()=>ho);return{detectWalletFromSim:Ye}},void 0,import.meta.url),{merchantWalletService:tt}=await te(async()=>{const{merchantWalletService:Ye}=await Promise.resolve().then(()=>jl);return{merchantWalletService:Ye}},void 0,import.meta.url),et=await tt.getByMerchantId(He),Et=localStorage.getItem(`wallets_${He}`),lt=Et?JSON.parse(Et):[],Qe=(Array.isArray(lt)?lt:[]).map(Ye=>({id:String((Ye==null?void 0:Ye.id)||""),phone:String((Ye==null?void 0:Ye.phone)||(Ye==null?void 0:Ye.msisdn)||""),isDefault:!!(Ye!=null&&Ye.isDefault)})),cn=(Array.isArray(et)?et:[]).map(Ye=>({id:String((Ye==null?void 0:Ye.id)||""),msisdn:String((Ye==null?void 0:Ye.msisdn)||""),isDefault:!!(Ye!=null&&Ye.isDefault)})),Xn=[...Qe,...cn],jn=await xe([J],Xn);jn&&jn.walletId&&(Oe=jn.walletId)}catch{}if(Oe||(Oe=await TY(He)),!Oe)try{const{doc:xe,getDoc:tt}=await te(async()=>{const{doc:Xe,getDoc:kr}=await Promise.resolve().then(()=>Nn);return{doc:Xe,getDoc:kr}},void 0,import.meta.url),{db:et}=await te(async()=>{const{db:Xe}=await Promise.resolve().then(()=>qt);return{db:Xe}},void 0,import.meta.url);let Et="",lt="";try{const Xe=await tt(xe(et,"profiles",He));if(Xe.exists()){const kr=Xe.data();Et=String((kr==null?void 0:kr.sim1Number)||"").trim(),lt=String((kr==null?void 0:kr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:Qe}=await te(async()=>{const{detectWalletFromSim:Xe}=await Promise.resolve().then(()=>ho);return{detectWalletFromSim:Xe}},void 0,import.meta.url),{merchantWalletService:cn}=await te(async()=>{const{merchantWalletService:Xe}=await Promise.resolve().then(()=>jl);return{merchantWalletService:Xe}},void 0,import.meta.url),Xn=`wallets_${He}`,jn=localStorage.getItem(Xn),Ye=jn?JSON.parse(jn):[],Jt=await cn.getByMerchantId(He),Xt=(Array.isArray(Ye)?Ye:[]).map(Xe=>({id:String((Xe==null?void 0:Xe.id)||""),phone:String((Xe==null?void 0:Xe.phone)||(Xe==null?void 0:Xe.msisdn)||""),isDefault:!!(Xe!=null&&Xe.isDefault)})),un=(Array.isArray(Jt)?Jt:[]).map(Xe=>({id:String((Xe==null?void 0:Xe.id)||""),msisdn:String((Xe==null?void 0:Xe.msisdn)||""),isDefault:!!(Xe!=null&&Xe.isDefault)})),Cr=[...Xt,...un],kn=J||String(localStorage.getItem("lastSmsSimMsisdn")||"");let In=(kn?[kn]:[]).filter(Boolean);In.length===0&&(In=[Et,lt].filter(Boolean));const ct=await Qe(In,Cr);if(ct&&ct.walletId){Oe=ct.walletId;try{localStorage.setItem(`selectedWallet_${He}`,Oe)}catch{}}}catch{}if(!Oe){try{d({title:"   ",description:"       "})}catch{}return}try{const xe=He;try{localStorage.setItem(`selectedWallet_${xe}`,Oe)}catch{}try{localStorage.setItem(`selectedWallet_${xe}_${Ue}`,Oe)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Oe}}))}catch{}try{const{Preferences:tt}=await te(async()=>{const{Preferences:et}=await Promise.resolve().then(()=>vv);return{Preferences:et}},void 0,import.meta.url);await tt.set({key:"selected_wallet_id",value:Oe}),await tt.set({key:"current_user_id",value:xe})}catch{}}catch{}const{recordAutoTransaction:Jn,userDataService:mt}=await te(async()=>{const{recordAutoTransaction:xe,userDataService:tt}=await Promise.resolve().then(()=>jl);return{recordAutoTransaction:xe,userDataService:tt}},void 0,import.meta.url),Nt=Me&&Me.trim()!==""?Math.max(0,parseFloat(Me)):null;let Rt=0;if(Nt!=null)Rt=Nt;else try{const{merchantWalletService:xe}=await te(async()=>{const{merchantWalletService:Et}=await Promise.resolve().then(()=>jl);return{merchantWalletService:Et}},void 0,import.meta.url),tt=await xe.getById(String(Oe)),et=tt&&tt.defaultWithdrawCommission;if(et!=null)Rt=Math.round((Number(et)||0)*Number(ae)/1e3*100)/100;else{const{calculateCommission:Et}=await te(async()=>{const{calculateCommission:lt}=await Promise.resolve().then(()=>za);return{calculateCommission:lt}},void 0,import.meta.url);Rt=Et(Number(ae),"receive")}}catch{const{calculateCommission:xe}=await te(async()=>{const{calculateCommission:tt}=await Promise.resolve().then(()=>za);return{calculateCommission:tt}},void 0,import.meta.url);Rt=xe(Number(ae),"receive")}try{const{walletDailyLimitsService:xe}=await te(async()=>{const{walletDailyLimitsService:et}=await Promise.resolve().then(()=>kw);return{walletDailyLimitsService:et}},void 0,import.meta.url),tt=await xe.canPerformOperation(String(Oe),Math.max(0,Number(ae||0)),"withdraw");if(!tt.canPerform)try{d({title:"  ",description:String(tt.message||"      "),variant:"destructive"})}catch{}}catch{}const Be=Cn||`${X}|${Date.now()}`,je=J||String(localStorage.getItem("lastSmsSimMsisdn")||""),gt=String((ee==null?void 0:ee.walletMsisdn)||"").trim()||je||await Cv(He)||"",Wt=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(ve)try{const xe=await mt.getUserData(He),tt=Array.isArray(xe==null?void 0:xe.debts)?xe.debts:[],et=Wt==="add"?Number(ae)+Number(Rt):Number(ae),Et={id:`DEBT-${Date.now()}`,debtorName:pe||oe||qe||"",amount:Math.round(Number(et)*100)/100,reason:ge||"  VodafoneCash",customerId:void 0,mobile:qe,status:"pending",createdAt:new Date},lt=[Et,...tt];await mt.updateUserData(He,{debts:lt});try{const Qe=Rt;await mt.saveUserTransaction(He,{type:"withdraw",amount:ae,withdrawnAmount:ae,commission:Qe,status:"pending",createdAt:new Date,senderMsisdn:qe,receiverMsisdn:gt,senderName:oe,walletId:Oe,fromWallet:Oe,lineId:gt,provider:Ne,reference:Be,transactionId:`DEFER-${Date.now()}`,linkedDebtId:Et.id})}catch{}try{const Qe=(G==null?void 0:G.popupId)||(j==null?void 0:j.popupId)||"";if(Qe){const{doc:cn,updateDoc:Xn,serverTimestamp:jn}=await te(async()=>{const{doc:Jt,updateDoc:Xt,serverTimestamp:un}=await Promise.resolve().then(()=>Nn);return{doc:Jt,updateDoc:Xt,serverTimestamp:un}},void 0,import.meta.url),{db:Ye}=await te(async()=>{const{db:Jt}=await Promise.resolve().then(()=>qt);return{db:Jt}},void 0,import.meta.url);try{await Xn(cn(Ye,"pendingSmsPopups",Qe),{status:"confirmed",confirmedAt:jn()})}catch{}try{(ie=(q=W.current)==null?void 0:q.add)==null||ie.call(q,Qe);const Jt=Array.from(W.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Jt))}catch{}}}catch{}try{d({title:"  ",description:"      "})}catch{}return}catch{}_e(!1),Ge(null);try{d({title:"  ..."})}catch{}const It=`TX-${Date.now()}`,En=Math.max(0,Number(ae||0)),Tt=Math.max(0,Rt);try{const xe=`cashBalance_${He}_${Ue||"main"}`,tt=`walletBalances_${He}_${Ue||"main"}`,et=localStorage.getItem(xe),Et=localStorage.getItem(tt);let lt=et?parseFloat(et):0,Qe=Et?JSON.parse(Et):{};Qe[Oe]=(Number(Qe[Oe])||0)+En,lt=lt-En+Tt;const cn={id:It,type:"withdraw",senderPhone:qe,receiverPhone:gt,amount:ae,status:"completed",createdAt:new Date,withdrawnAmount:ae,commission:Tt,fromWallet:Oe,senderName:oe,provider:Ne,reference:Be,shopName:"  ()"};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{delta:{amount:En,commission:Tt,walletId:Oe,type:"withdraw"},limitUpdate:{walletId:Oe,amount:En,type:"withdraw"}}}))}catch(xe){console.error("Optimistic update failed",xe)}(async()=>{var tt,et,Et,lt;let xe="";try{xe=await Jn({shopId:Ue,lineId:gt,walletId:Oe,amount:ae,note:"SMS-ManualConfirm",provider:Ne,createdBy:He,senderMsisdn:qe,senderName:oe,reference:Be,text:X});try{const Qe=(G==null?void 0:G.popupId)||(j==null?void 0:j.popupId)||"";if(Qe){const{doc:cn,updateDoc:Xn,serverTimestamp:jn}=await te(async()=>{const{doc:Jt,updateDoc:Xt,serverTimestamp:un}=await Promise.resolve().then(()=>Nn);return{doc:Jt,updateDoc:Xt,serverTimestamp:un}},void 0,import.meta.url),{db:Ye}=await te(async()=>{const{db:Jt}=await Promise.resolve().then(()=>qt);return{db:Jt}},void 0,import.meta.url);try{await Xn(cn(Ye,"pendingSmsPopups",Qe),{status:"confirmed",confirmedAt:jn()})}catch{}try{(et=(tt=W.current)==null?void 0:tt.add)==null||et.call(tt,Qe);const Jt=Array.from(W.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Jt))}catch{}}}catch{}}catch(Qe){console.error(Qe)}try{const Qe=Math.max(0,Number(ae||0)),{doc:cn,getDoc:Xn,updateDoc:jn}=await te(async()=>{const{doc:In,getDoc:ct,updateDoc:Xe}=await Promise.resolve().then(()=>Nn);return{doc:In,getDoc:ct,updateDoc:Xe}},void 0,import.meta.url),{db:Ye}=await te(async()=>{const{db:In}=await Promise.resolve().then(()=>qt);return{db:In}},void 0,import.meta.url),Jt=cn(Ye,"dashboardData",Ue),Xt=await Xn(Jt);let un=Xt.exists()?Number(((Et=Xt.data())==null?void 0:Et.cashBalance)||0):0;const Cr=Xt.exists()?((lt=Xt.data())==null?void 0:lt.walletBalances)||{}:{},kn=Number(Cr[Oe]||0);Cr[Oe]=kn+Qe,un=un-Qe+Math.max(0,Rt),await jn(Jt,{cashBalance:un,walletBalances:Cr,lastUpdated:new Date().toISOString()});try{const In={id:xe||`TX-${Date.now()}`,type:"withdraw",senderPhone:qe,receiverPhone:gt,amount:ae,status:"completed",createdAt:new Date,withdrawnAmount:ae,commission:Rt,fromWallet:Oe,senderName:oe,provider:Ne,reference:Be,shopName:" "};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{}}))}catch{}try{const{walletDailyLimitsService:In}=await te(async()=>{const{walletDailyLimitsService:ct}=await Promise.resolve().then(()=>kw);return{walletDailyLimitsService:ct}},void 0,import.meta.url);await In.updateUsage(String(Oe),Qe,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Oe)}}))}catch{}}catch{}}catch{}(async()=>{try{const Qe=Rt;await mt.saveUserTransaction(He,{type:"withdraw",amount:ae,withdrawnAmount:ae,commission:Qe,status:"completed",createdAt:new Date,senderMsisdn:qe,receiverMsisdn:gt,senderName:oe,walletId:Oe,fromWallet:Oe,lineId:gt,provider:Ne,reference:Be,transactionId:xe||It});try{window.dispatchEvent(new CustomEvent("transaction-created"))}catch{}}catch{}})(),Ma.invalidateQueries({queryKey:["dashboardData"]}),Ma.invalidateQueries({queryKey:["transactions"]}),Ma.invalidateQueries({queryKey:["walletDailyLimits"]}),Ma.invalidateQueries({queryKey:["wallets"]}),Ma.invalidateQueries({queryKey:["user-stats"]});try{d({title:`     ${xe||It}`})}catch{}})()}catch(ee){try{d({title:String((ee==null?void 0:ee.message)||"  "),variant:"destructive"})}catch{}}};b.useEffect(()=>{try{Tx.start()}catch{}return()=>{try{Tx.stop()}catch{}}},[]),b.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const G=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),H=String(localStorage.getItem("android_installed_version")||"").trim(),q=localStorage.getItem("android_last_ack_code"),ie=localStorage.getItem("android_installed_code"),ee=q?Number(q):null,Z=ie?Number(ie):null,ue=G||H,ce=ee??Z??null;ue&&L(ue),ce&&O(ce);const{doc:J,getDoc:oe}=await te(async()=>{const{doc:ve,getDoc:pe}=await Promise.resolve().then(()=>Nn);return{doc:ve,getDoc:pe}},void 0,import.meta.url),{db:X}=await te(async()=>{const{db:ve}=await Promise.resolve().then(()=>qt);return{db:ve}},void 0,import.meta.url),ae=await oe(J(X,"profiles",r.uid));if(ae.exists()){const ve=ae.data(),pe=String((ve==null?void 0:ve.lastAckAndroidVersion)||(ve==null?void 0:ve.androidInstalledVersion)||(ve==null?void 0:ve.lastAckUpdateId)||"").trim(),ge=typeof(ve==null?void 0:ve.lastAckAndroidCode)=="number"?ve.lastAckAndroidCode:typeof(ve==null?void 0:ve.androidInstalledCode)=="number"?ve.androidInstalledCode:null,Ne=(Cn,ln)=>{const He=String(Cn||"").replace(/^v/i,"").split(".").map(Oe=>parseInt(Oe,10)||0),Ue=String(ln||"").replace(/^v/i,"").split(".").map(Oe=>parseInt(Oe,10)||0);for(let Oe=0;Oe<Math.max(He.length,Ue.length);Oe++){const Jn=He[Oe]||0,mt=Ue[Oe]||0;if(Jn>mt)return 1;if(Jn<mt)return-1}return 0};let qe=!1;if(typeof ge=="number"&&typeof ce=="number"?qe=ge>ce:typeof ge=="number"&&ce==null?qe=!0:pe&&ue?qe=Ne(pe,ue)>0:pe&&!ue&&(qe=!0),qe){if(pe){try{localStorage.setItem("android_installed_version",pe)}catch{}L(pe)}if(typeof ge=="number"){try{localStorage.setItem("android_installed_code",String(ge))}catch{}O(ge)}}else if(typeof ge=="number"&&ce==null){try{localStorage.setItem("android_installed_code",String(ge))}catch{}O(ge)}}}catch{}})()},[r==null?void 0:r.uid]),b.useEffect(()=>{try{const H=String((window==null?void 0:window.__nativeAppVersion)||"").trim();H&&S(H);const q=window==null?void 0:window.__nativeAppVersionCode;if(typeof q=="number"){C(q);try{localStorage.setItem("android_installed_code",String(q))}catch{}}try{H&&localStorage.setItem("android_installed_version",H)}catch{}}catch{}const G=H=>{var q,ie;try{const ee=String((((q=H==null?void 0:H.detail)==null?void 0:q.version)??"")||"").trim(),Z=(ie=H==null?void 0:H.detail)==null?void 0:ie.code;ee&&S(ee);try{ee&&localStorage.setItem("android_installed_version",ee)}catch{}typeof Z=="number"&&C(Z)}catch{}};try{window.addEventListener("native-app-version",G)}catch{}return()=>{try{window.removeEventListener("native-app-version",G)}catch{}}},[]),b.useEffect(()=>{try{const G=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",H=String(A||"").trim();if(!G||!H||!(r!=null&&r.uid))return;(async()=>{try{const{doc:q,setDoc:ie,serverTimestamp:ee}=await te(async()=>{const{doc:ue,setDoc:ce,serverTimestamp:J}=await Promise.resolve().then(()=>Nn);return{doc:ue,setDoc:ce,serverTimestamp:J}},void 0,import.meta.url),{db:Z}=await te(async()=>{const{db:ue}=await Promise.resolve().then(()=>qt);return{db:ue}},void 0,import.meta.url);await ie(q(Z,"profiles",r.uid),{androidInstalledVersion:H,androidInstalledAt:ee()},{merge:!0});try{localStorage.setItem("android_installed_version",H)}catch{}}catch{}})()}catch{}},[A,r==null?void 0:r.uid]),b.useEffect(()=>{Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"&&(async()=>{try{await te(()=>import("./ProtectedUserDashboard-C6X-urNA.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url),await te(()=>import("./UserDashboardPage-CqrufyR-.js"),__vite__mapDeps([62,1,39,15,18,30,31,23,6,42,41,25,5,49,33,47,37,38,48,52,10,57,4,8,32,45,26,35,19,40,44,55,7]),import.meta.url),await te(()=>Promise.resolve().then(()=>PG),void 0,import.meta.url),await te(()=>import("./ProfileSettingsPage-B4Xs-T6b.js"),__vite__mapDeps([54,1,18,48,55,30,31,42,5,50,10,7,45]),import.meta.url),await te(()=>import("./TransactionsPage-C9w_W7Bh.js"),__vite__mapDeps([56,1,15,39,57,38,49,30,18,31,4,41,10,8,32,45,33,5,52]),import.meta.url)}catch{}})()},[]),b.useEffect(()=>{if(!t)return;const G=document.createElement("style");G.setAttribute("data-disable-pull-to-refresh","true"),G.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(G);let H=0,q=null;const ie=Z=>{var ue,ce;H=((ce=(ue=Z.touches)==null?void 0:ue[0])==null?void 0:ce.clientY)||0,q=Z.target},ee=Z=>{var ve,pe;const ue=((pe=(ve=Z.touches)==null?void 0:ve[0])==null?void 0:pe.clientY)||0,ce=document.scrollingElement||document.documentElement,J=ce.scrollTop||window.scrollY||0,oe=ce.scrollHeight-ce.clientHeight||0,X=q||null,ae=(()=>{let ge=X;for(;ge&&ge!==document.body;){const qe=window.getComputedStyle(ge).overflowY;if((qe==="auto"||qe==="scroll")&&ge.scrollHeight>ge.clientHeight)return!0;ge=ge.parentElement}return!1})();!ae&&J<=0&&ue>H&&Z.cancelable&&Z.preventDefault(),!ae&&J>=oe&&ue<H&&Z.cancelable&&Z.preventDefault()};return document.addEventListener("touchstart",ie,{passive:!0}),document.addEventListener("touchmove",ee,{passive:!1}),()=>{document.removeEventListener("touchstart",ie),document.removeEventListener("touchmove",ee);try{document.head.removeChild(G)}catch{}}},[t]),b.useEffect(()=>{if(!((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"))return;try{const ie=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=ie,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const ie=(window.location.assign||(ee=>{})).bind(window.location);window.__originalAssign=ie,window.location.assign=ee=>{try{if(String(ee||"").startsWith("/user/dashboard")){c("/user/dashboard");return}}catch{}try{ie(ee)}catch{}}}catch{}let H=null,q=!1;return(async()=>{try{const{listenAndroidUpdates:ie}=await te(async()=>{const{listenAndroidUpdates:ee}=await Promise.resolve().then(()=>jG);return{listenAndroidUpdates:ee}},void 0,import.meta.url);H=ie(ee=>{if(q)return;const Z=String((ee==null?void 0:ee.version)||"").trim(),ue=String((ee==null?void 0:ee.url)||"").trim(),ce=String((ee==null?void 0:ee.notes)||"").trim(),J=!!(ee!=null&&ee.force),oe=typeof(ee==null?void 0:ee.code)=="number"?ee.code:void 0,X=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),ae=String(P||X||"").trim(),ve=(mt,Nt)=>{const Rt=String(mt||"").replace(/^v/i,"").split(".").map(je=>parseInt(je,10)||0),Be=String(Nt||"").replace(/^v/i,"").split(".").map(je=>parseInt(je,10)||0);for(let je=0;je<Math.max(Rt.length,Be.length);je++){const Pe=Rt[je]||0,gt=Be[je]||0;if(Pe>gt)return 1;if(Pe<gt)return-1}return 0},pe=String(A||"").trim(),ge=String(localStorage.getItem("android_installed_version")||"").trim(),Ne=localStorage.getItem("android_installed_code"),qe=Ne?Number(Ne):null,Cn=[R,N,qe].filter(mt=>typeof mt=="number").reduce((mt,Nt)=>mt===void 0?Nt:Math.max(mt,Nt),void 0),ln=typeof oe=="number"&&typeof Cn=="number"?oe>Cn:void 0,He=(()=>{const mt=[pe,ae,ge].filter(Boolean);return mt.length===0?"":mt.reduce((Nt,Rt)=>ve(Rt,Nt)>0?Rt:Nt)})(),Ue=ve(Z,He)>0;if(!!ue&&(!!Z||typeof oe=="number")&&(ln!==void 0?ln:Ue)){const mt="   ",Nt=`${ce?ce+`
`:""} : ${Z}`;I({title:mt,message:Nt,apkUrl:ue,force:J,versionId:Z,versionCode:oe}),f(!0)}else try{f(!1)}catch{}})}catch{}})(),()=>{q=!0;try{typeof H=="function"&&H()}catch{}}},[P,A]),b.useEffect(()=>{const G=q=>{const ie=(q==null?void 0:q.detail)||{};try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{z.current&&(clearInterval(z.current),z.current=null)}catch{}y(!0),v({percent:ie.percent??null,downloaded:ie.downloaded??0,total:ie.total??0})},H=()=>{try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{z.current&&(clearInterval(z.current),z.current=null)}catch{}y(!1),x(!0),v({percent:100,downloaded:((_==null?void 0:_.total)??(_==null?void 0:_.downloaded)??0)||0,total:(_==null?void 0:_.total)??0});try{const q=String((m==null?void 0:m.versionId)||"").trim();if(q){try{localStorage.setItem("android_last_ack_version_id",q)}catch{}try{localStorage.setItem("android_installed_version",q)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:ie,setDoc:ee,serverTimestamp:Z}=await te(async()=>{const{doc:ce,setDoc:J,serverTimestamp:oe}=await Promise.resolve().then(()=>Nn);return{doc:ce,setDoc:J,serverTimestamp:oe}},void 0,import.meta.url),{db:ue}=await te(async()=>{const{db:ce}=await Promise.resolve().then(()=>qt);return{db:ce}},void 0,import.meta.url);await ee(ie(ue,"profiles",r.uid),{lastAckAndroidVersion:q,androidInstalledVersion:q,lastAckAt:Z(),androidInstalledAt:Z()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",G),window.addEventListener("androidUpdateDownloaded",H),()=>{window.removeEventListener("androidUpdateProgress",G),window.removeEventListener("androidUpdateDownloaded",H)}},[]),b.useEffect(()=>{let G=!0;return(async()=>{var H;try{const{auth:q}=await te(async()=>{const{auth:ve}=await Promise.resolve().then(()=>qt);return{auth:ve}},void 0,import.meta.url),ie=((H=q.currentUser)==null?void 0:H.uid)||"";if(!ie)return;const{db:ee}=await te(async()=>{const{db:ve}=await Promise.resolve().then(()=>qt);return{db:ve}},void 0,import.meta.url),{collection:Z,query:ue,where:ce,onSnapshot:J,deleteDoc:oe}=await te(async()=>{const{collection:ve,query:pe,where:ge,onSnapshot:Ne,deleteDoc:qe}=await Promise.resolve().then(()=>Nn);return{collection:ve,query:pe,where:ge,onSnapshot:Ne,deleteDoc:qe}},void 0,import.meta.url),X=ue(Z(ee,"pendingSmsPopups"),ce("userId","==",ie),ce("status","==","pending"),limit(20)),ae=J(X,ve=>{var pe,ge,Ne,qe,Cn,ln,He,Ue,Oe,Jn,mt,Nt,Rt;if(G)try{const Be=typeof ve.docChanges=="function"?ve.docChanges():[];console.log("Web Popup: Snapshot received",Be.length,"changes");for(const je of Be){if(je.type==="added"){const Pe=je.doc.data()||{},gt=je.doc.id;console.log("Web Popup: Received document",gt,Pe),(ge=(pe=W.current)==null?void 0:pe.has)!=null&&ge.call(pe,gt)&&console.log("Web Popup: ID is in suppressed list",gt);try{const kn=Pe.createdAt||Pe.timestamp||(Pe.payload||{}).createdAt||(Pe.payload||{}).timestamp,In=kn&&typeof kn.toMillis=="function"?kn.toMillis():typeof Pe.createdAtMs=="number"?Pe.createdAtMs:typeof(Pe.payload||{}).createdAtMs=="number"?(Pe.payload||{}).createdAtMs:null;if(typeof In=="number"&&In<Date.now()-36e5){console.log("Web Popup: Cleaning up old popup",gt),oe(je.doc.ref).catch(()=>{});continue}}catch{}let Wt=Pe.amount??((Ne=Pe.payload)==null?void 0:Ne.amount)??null,It=Pe.sender??((qe=Pe.payload)==null?void 0:qe.sender)??"";const En=Pe.senderName??((Cn=Pe.payload)==null?void 0:Cn.senderName)??"";let Tt=Pe.reference??((ln=Pe.payload)==null?void 0:ln.reference)??"";const xe=Pe.text??((He=Pe.payload)==null?void 0:He.text)??"";let tt=Pe.simNumber??((Ue=Pe.payload)==null?void 0:Ue.simNumber)??"",et=Pe.simSlot??((Oe=Pe.payload)==null?void 0:Oe.simSlot);et==null&&(et=Pe.slot??((Jn=Pe.payload)==null?void 0:Jn.slot)),et==null&&(et=Pe.sim_slot??((mt=Pe.payload)==null?void 0:mt.sim_slot)),et==null&&(et=Pe.lineId??((Nt=Pe.payload)==null?void 0:Nt.lineId));const Et=et!=null?String(et):"",lt=(r==null?void 0:r.uid)||"default";let Qe=localStorage.getItem(`sim1Number_${lt}`)??localStorage.getItem("sim1Number")??"",cn=localStorage.getItem(`sim2Number_${lt}`)??localStorage.getItem("sim2Number")??"";const Xn=Pe.payload||{},jn=Xn.sim1Number||Xn.sim1||Pe.sim1Number||"",Ye=Xn.sim2Number||Xn.sim2||Pe.sim2Number||"";jn&&(Qe=String(jn).trim(),ya(Qe)),Ye&&(cn=String(Ye).trim(),Pn(cn));let Jt=tt,Xt="";Et==="1"?(Xt="SIM 2",cn&&(Jt=cn)):(Et==="0"||!Et)&&(Xt="SIM 1",Qe&&(Jt=Qe));const un=Pe.walletMsisdn??((Rt=Pe.payload)==null?void 0:Rt.walletMsisdn)??"";let Cr="VF-Cash";if(/Received\s*EGP/i.test(String(xe))){Cr="InstaPay";const kn=String(xe).match(/Received\s*EGP\s*([0-9.,]+)/i);kn&&(Wt=parseFloat(String(kn[1]).replace(/,/g,"")));const In=String(xe).match(/from\s+([0-9+]+)/i);In&&(It=Yt(In[1]));const ct=String(xe).match(/Ref:\s*([A-Za-z0-9\-]+)/i);ct&&(Tt=String(ct[1]).trim())}if(G){console.log("Web Popup: Opening modal for",gt),Ge({amount:Number(Wt||0),sender:String(It||""),senderName:En,reference:String(Tt||""),text:xe,simNumber:Jt,simLabel:Xt,walletMsisdn:un,providerLabel:Cr,popupId:gt,sim1Number:Qe,sim2Number:cn}),_e(!0);try{d({title:" ",description:`   ${Wt}  ${It}`})}catch{}try{Gi()}catch(kn){console.error("PlayBell failed",kn)}}}je.type}}catch{}});fe.current=ae}catch{}})(),()=>{G=!1;try{const H=fe.current;typeof H=="function"&&H()}catch{}}},[r==null?void 0:r.uid]),b.useEffect(()=>{const G=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",H=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(G||H)return;let q=!1;return(async()=>{try{const ie="0.0.0",ee=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!ee.ok)return;const Z=await ee.json(),ue=String((Z==null?void 0:Z.version)||"0.0.0"),ce=!!(Z!=null&&Z.force);if(!q&&((oe,X)=>{const ae=String(oe).split(".").map(pe=>parseInt(pe,10)||0),ve=String(X).split(".").map(pe=>parseInt(pe,10)||0);for(let pe=0;pe<Math.max(ae.length,ve.length);pe++){const ge=ae[pe]||0,Ne=ve[pe]||0;if(ge>Ne)return 1;if(ge<Ne)return-1}return 0})(ue,ie)>0){if(ce){try{window.location.reload()}catch{}return}try{d({title:"  ",description:` ${ue}      `})}catch{}}}catch{}})(),()=>{q=!0}},[]),b.useEffect(()=>{if(se)try{const G=(r==null?void 0:r.uid)||"default",H=localStorage.getItem(`sim1Number_${G}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${G}`)??localStorage.getItem("sim2Number")??"";ya(H),Pn(q)}catch{}},[se,r==null?void 0:r.uid]);const cs=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),pi=(()=>{const G=(q,ie)=>{const ee=String(q||"").replace(/^v/i,"").split(".").map(ue=>parseInt(ue,10)||0),Z=String(ie||"").replace(/^v/i,"").split(".").map(ue=>parseInt(ue,10)||0);for(let ue=0;ue<Math.max(ee.length,Z.length);ue++){const ce=ee[ue]||0,J=Z[ue]||0;if(ce>J)return 1;if(ce<J)return-1}return 0},H=[A,P,cs].filter(Boolean);return H.length===0?"":H.reduce((q,ie)=>G(ie,q)>0?ie:q)})();return E.jsxs(E.Fragment,{children:[E.jsx(Pv,{open:xr,onOpenChange:()=>{},children:E.jsxs(Om,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:G=>{try{G.preventDefault()}catch{}},onEscapeKeyDown:G=>{try{G.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[E.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),E.jsx(Lm,{className:"text-center",children:E.jsxs("div",{className:"flex items-center justify-center gap-3",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:E.jsx(h4,{className:"w-6 h-6"})}),E.jsx(Vm,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),E.jsxs("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:[E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"1"}),E.jsx("div",{children:"  ( )                        ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"2"}),E.jsx("div",{children:"                         ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"3"}),E.jsx("div",{children:"       (   )        ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"4"}),E.jsx("div",{children:"                    ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"5"}),E.jsx("div",{children:"               ."})]})]}),E.jsx("div",{className:"mt-4",children:E.jsx(us,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:va,children:"  "})})]})}),(()=>{try{const G=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",H=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),re&&(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"&&E.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:E.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:E.jsx("span",{className:"text-2xl",children:"!"})}),E.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),E.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),E.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:E.jsx(us,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),h&&m&&E.jsx(Pv,{open:h,onOpenChange:G=>{m!=null&&m.force||f(G)},children:E.jsxs(Om,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[E.jsxs(Lm,{className:"text-center",children:[E.jsx(Vm,{className:"text-base md:text-lg font-bold text-gray-900",children:m.title}),E.jsx(Nw,{className:"text-sm text-gray-700 whitespace-pre-line",children:m.message}),E.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:pi?`  : v${pi}`:""})]}),E.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!m.force&&!p&&!w&&E.jsx(us,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>f(!1),children:""}),!w&&E.jsx(us,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const G=String((m==null?void 0:m.versionId)||"").trim(),H=m==null?void 0:m.versionCode;if(G)try{localStorage.setItem("android_last_ack_version_id",G)}catch{}if(typeof H=="number")try{localStorage.setItem("android_last_ack_code",String(H))}catch{}if((async()=>{try{if(r!=null&&r.uid&&G){const{doc:ie,setDoc:ee,serverTimestamp:Z}=await te(async()=>{const{doc:J,setDoc:oe,serverTimestamp:X}=await Promise.resolve().then(()=>Nn);return{doc:J,setDoc:oe,serverTimestamp:X}},void 0,import.meta.url),{db:ue}=await te(async()=>{const{db:J}=await Promise.resolve().then(()=>qt);return{db:J}},void 0,import.meta.url),ce={lastAckAndroidVersion:G,lastAckAt:Z()};typeof H=="number"&&(ce.lastAckAndroidCode=H),await ee(ie(ue,"profiles",r.uid),ce,{merge:!0})}}catch{}})(),(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"){const ie=m.apkUrl,ee=`cashy://update?url=${encodeURIComponent(ie)}`;y(!0),v({percent:0,downloaded:0,total:0});try{z.current&&clearInterval(z.current),z.current=setInterval(()=>{v(Z=>{const ue=typeof(Z==null?void 0:Z.percent)=="number"?Z.percent:0,ce=de.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(ue+ce))),downloaded:(Z==null?void 0:Z.downloaded)??0,total:(Z==null?void 0:Z.total)??0}})},600)}catch{}window.location.href=ee;try{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{try{de.current=!1}catch{}try{k.current=null}catch{}},8e3)}catch{}}else{const ie=m.apkUrl;try{window.open(ie,"_blank")}catch{}}}catch{}},children:p?" ...":" "}),w&&E.jsx(us,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"){f(!1);try{const H=String((m==null?void 0:m.versionId)||"").trim();if(H){try{localStorage.setItem("android_last_ack_version_id",H)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:q,setDoc:ie,serverTimestamp:ee}=await te(async()=>{const{doc:J,setDoc:oe,serverTimestamp:X}=await Promise.resolve().then(()=>Nn);return{doc:J,setDoc:oe,serverTimestamp:X}},void 0,import.meta.url),{db:Z}=await te(async()=>{const{db:J}=await Promise.resolve().then(()=>qt);return{db:J}},void 0,import.meta.url),ue={lastAckAndroidVersion:H,androidInstalledVersion:H,lastAckAt:ee(),androidInstalledAt:ee()},ce=m==null?void 0:m.versionCode;if(typeof ce=="number"){ue.lastAckAndroidCode=ce,ue.androidInstalledCode=ce;try{localStorage.setItem("android_installed_code",String(ce)),localStorage.setItem("android_last_ack_code",String(ce))}catch{}}await ie(q(Z,"profiles",r.uid),ue,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),p&&E.jsxs("div",{className:"mt-3 text-center",children:[E.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:E.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((_==null?void 0:_.percent)||0)))}%`}})}),E.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((_==null?void 0:_.percent)||0),"%"]})]})]})}),!!r&&se&&E.jsx(Pv,{open:se,onOpenChange:async G=>{G&&_e(!0)},children:E.jsxs(Om,{className:"sm:max-w-[420px] rounded-2xl shadow-xl z-[9999]",onInteractOutside:G=>{G.preventDefault()},onEscapeKeyDown:G=>{G.preventDefault()},hideClose:!0,children:[E.jsxs("div",{className:"absolute left-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground cursor-pointer z-50",onClick:async()=>{if(_e(!1),j!=null&&j.popupId)try{const{db:G}=await te(async()=>{const{db:ee}=await Promise.resolve().then(()=>qt);return{db:ee}},void 0,import.meta.url),{doc:H,updateDoc:q,serverTimestamp:ie}=await te(async()=>{const{doc:ee,updateDoc:Z,serverTimestamp:ue}=await Promise.resolve().then(()=>Nn);return{doc:ee,updateDoc:Z,serverTimestamp:ue}},void 0,import.meta.url);await q(H(G,"pendingSmsPopups",j.popupId),{status:"dismissed",dismissedAt:ie()})}catch{}},children:[E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",children:[E.jsx("path",{d:"M18 6 6 18"}),E.jsx("path",{d:"m6 6 12 12"})]}),E.jsx("span",{className:"sr-only",children:"Close"})]}),E.jsxs(Lm,{children:[E.jsx(Vm,{children:j!=null&&j.providerLabel?E.jsxs(E.Fragment,{children:["   ",E.jsx("span",{className:"text-red-600",children:j.providerLabel})]}):"   "}),E.jsx(Nw,{})]}),E.jsxs("div",{className:"text-sm",children:[E.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[E.jsx(us,{variant:(j==null?void 0:j.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(j==null?void 0:j.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>ls((j==null?void 0:j.sim1Number)||Rr,"SIM 1"),disabled:!(j!=null&&j.sim1Number||Rr),children:(j==null?void 0:j.sim1Number)||Rr||" "}),E.jsx(us,{variant:(j==null?void 0:j.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(j==null?void 0:j.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>ls((j==null?void 0:j.sim2Number)||_s,"SIM 2"),disabled:!(j!=null&&j.sim2Number||_s),children:(j==null?void 0:j.sim2Number)||_s||" "})]}),E.jsx("div",{className:"border rounded-lg p-3",children:E.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"font-bold",children:[" ",(Yn=j==null?void 0:j.amount)==null?void 0:Yn.toLocaleString()]}),E.jsx("div",{className:"font-mono",children:(j==null?void 0:j.sender)||""}),E.jsxs("div",{className:"font-mono",children:[(j==null?void 0:j.simLabel)&&E.jsx("span",{className:`inline-flex items-center justify-center rounded-md px-1.5 py-0.5 text-xs font-bold mr-2 ${j.simLabel==="SIM 1"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:j.simLabel}),(j==null?void 0:j.simNumber)||"-"]}),(j==null?void 0:j.senderName)&&E.jsx("div",{children:j==null?void 0:j.senderName}),(j==null?void 0:j.reference)&&E.jsx("div",{className:"font-mono",children:j==null?void 0:j.reference}),(j==null?void 0:j.walletMsisdn)&&E.jsx("div",{className:"font-mono",children:j==null?void 0:j.walletMsisdn})]}),E.jsxs("div",{className:"space-y-2 text-right",children:[E.jsx("div",{children:"  "}),E.jsx("div",{children:" "}),E.jsx("div",{children:" "}),(j==null?void 0:j.senderName)&&E.jsx("div",{children:"  "}),(j==null?void 0:j.reference)&&E.jsx("div",{children:"  "}),(j==null?void 0:j.walletMsisdn)&&E.jsx("div",{children:"  "})]})]})}),Fn&&E.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[E.jsx("span",{className:"flex-1",children:"  ()"}),E.jsx("input",{type:"number",step:"0.01",min:"0",value:Me,onChange:G=>xn(G.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),lr&&E.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"text-sm",children:" "}),E.jsxs("div",{className:"font-bold",children:[" ",wt.toLocaleString()]})]}),E.jsx("div",{className:"mt-3",children:E.jsx("input",{type:"text",value:Ct,onChange:G=>ft(G.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),E.jsx("div",{className:"mt-3",children:E.jsx(us,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Rn(!0),Un(!1)},children:""})})]}),wn&&!lr&&E.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),E.jsx("div",{className:"pt-2",children:E.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var G;try{const q=String((j==null?void 0:j.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),ie=q?parseFloat(String(q[1]).replace(",",".")):Number((j==null?void 0:j.amount)||0),{auth:ee}=await te(async()=>{const{auth:ve}=await Promise.resolve().then(()=>qt);return{auth:ve}},void 0,import.meta.url),Z=((G=ee.currentUser)==null?void 0:G.uid)||"",ue=Z?`selectedWallet_${Z}`:"selectedWallet_default",ce=localStorage.getItem(ue)||"",J=Me&&Me.trim()!==""?Math.max(0,parseFloat(Me)):null;let oe=0;if(J!=null)oe=J;else try{const{merchantWalletService:ve}=await te(async()=>{const{merchantWalletService:Ne}=await Promise.resolve().then(()=>jl);return{merchantWalletService:Ne}},void 0,import.meta.url),pe=await ve.getById(String(ce)),ge=pe&&pe.defaultWithdrawCommission;if(ge!=null)oe=Math.round((Number(ge)||0)*Number(ie)/1e3*100)/100;else{const{calculateCommission:Ne}=await te(async()=>{const{calculateCommission:qe}=await Promise.resolve().then(()=>za);return{calculateCommission:qe}},void 0,import.meta.url);oe=Ne(Number(ie),"receive")}}catch{const{calculateCommission:ve}=await te(async()=>{const{calculateCommission:pe}=await Promise.resolve().then(()=>za);return{calculateCommission:pe}},void 0,import.meta.url);oe=ve(Number(ie),"receive")}const ae=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(ie)+Number(oe):Number(ie);an(Math.round(ae*100)/100),Un(!0)}catch{Un(!0)}},children:""})})]}),E.jsx("div",{className:"pt-3",children:E.jsx(us,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const G=String((j==null?void 0:j.text)||""),H=G.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),q=H?parseFloat(String(H[1]).replace(",",".")):Number((j==null?void 0:j.amount)||0),ie=G.match(/\s+\s+(\d+)/i),ee=String((j==null?void 0:j.sender)||(ie?ie[1]:"")||""),Z=G.match(/\s*\s*([\d\.]+)/i),ue=String((j==null?void 0:j.reference)||(Z?Z[1]:String(Date.now())));Pr({...j,amount:q,sender:ee,reference:ue,deferredMode:wn,debtorName:Ct,debtorNote:at})}catch{Pr()}},children:" "})})]})})]})},sR=()=>{const t=hi(),{user:e}=ga(),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login")||t.pathname==="/"||t.pathname.startsWith("/landing");return e&&!n?E.jsxs(E.Fragment,{children:[E.jsx(sj,{}),E.jsx(Uj,{})]}):null},iR=()=>{const{user:t,loading:e}=ga();return e?E.jsx(Pw,{}):t?E.jsx(Mm,{}):E.jsx(Wp,{})},SY=()=>(b.useEffect(()=>{const t=document.getElementById("app-loading-screen");t&&setTimeout(()=>{t.style.opacity="0",t.style.transition="opacity 0.5s ease",setTimeout(()=>t.remove(),500)},500)},[]),E.jsx(lB,{client:Ma,children:E.jsx(g6,{children:E.jsxs(A$,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android")&&E.jsx($G,{}),E.jsx(EY,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&wY||Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android")?E.jsxs(d6,{children:[E.jsx(rR,{}),E.jsx(sR,{}),E.jsx(b.Suspense,{fallback:E.jsx(Pw,{}),children:E.jsxs(db,{children:[E.jsx(Re,{path:"/",element:Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"?E.jsx(iR,{}):E.jsx(tm,{})}),E.jsx(Re,{path:"/dashboard-redirect",element:E.jsx(Ox,{})}),E.jsx(Re,{path:"/landing",element:E.jsx(tm,{})}),E.jsx(Re,{path:"/subscriptions",element:E.jsx(Lx,{})}),E.jsx(Re,{path:"/auth",element:E.jsx(Vx,{})}),E.jsx(Re,{path:"/user/login",element:E.jsx(Wp,{})}),E.jsx(Re,{path:"/user/forgot-password",element:E.jsx(jx,{})}),E.jsx(Re,{path:"/user/register",element:E.jsx(rm,{})}),E.jsx(Re,{path:"/register",element:E.jsx(rm,{})}),E.jsx(Re,{path:"/user/account-setup",element:E.jsx(Ux,{})}),E.jsx(Re,{path:"/user/pending-approval",element:E.jsx(Wx,{})}),E.jsx(Re,{path:"/user/dashboard",element:E.jsx(Mm,{})}),E.jsx(Re,{path:"/branch/:shopId/dashboard",element:E.jsx(Mm,{})}),E.jsx(Re,{path:"/user/add-wallet",element:E.jsx(Yx,{})}),E.jsx(Re,{path:"/admin/login",element:E.jsx(qx,{})}),E.jsx(Re,{path:"/admin/dashboard",element:E.jsx(Hx,{})}),E.jsx(Re,{path:"/admin/topups",element:E.jsx(Mx,{})}),E.jsx(Re,{path:"/admin/notifications",element:E.jsx(Fx,{})}),E.jsx(Re,{path:"/profile-settings",element:E.jsx(Gx,{})}),E.jsx(Re,{path:"/transactions",element:E.jsx(Qx,{})}),E.jsx(Re,{path:"/referrals",element:E.jsx(Jx,{})}),E.jsx(Re,{path:"/privacy-policy",element:E.jsx(tR,{})}),E.jsx(Re,{path:"/cpanel",element:E.jsx(Xx,{})}),E.jsx(Re,{path:"/cpanel/login",element:E.jsx(Zx,{})}),E.jsx(Re,{path:"/auth-test",element:E.jsx(Kx,{})}),E.jsx(Re,{path:"/topup",element:E.jsx(nm,{})}),E.jsx(Re,{path:"/recharge",element:E.jsx(nm,{})}),E.jsx(Re,{path:"/merchant/*",element:E.jsx(zx,{})}),E.jsx(Re,{path:"/dashboard/login",element:E.jsx($x,{})}),E.jsx(Re,{path:"/dashboard",element:E.jsx(Bx,{})}),E.jsx(Re,{path:"*",element:E.jsx(eR,{})})]})}),E.jsx(nR,{})]}):E.jsxs(u6,{children:[E.jsx(rR,{}),E.jsx(sR,{}),E.jsx(b.Suspense,{fallback:E.jsx(Pw,{}),children:E.jsxs(db,{children:[E.jsx(Re,{path:"/",element:Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"?E.jsx(iR,{}):E.jsx(tm,{})}),E.jsx(Re,{path:"/dashboard-redirect",element:E.jsx(Ox,{})}),E.jsx(Re,{path:"/landing",element:E.jsx(tm,{})}),E.jsx(Re,{path:"/subscriptions",element:E.jsx(Lx,{})}),E.jsx(Re,{path:"/auth",element:E.jsx(Vx,{})}),E.jsx(Re,{path:"/user/login",element:E.jsx(Wp,{})}),E.jsx(Re,{path:"/user/forgot-password",element:E.jsx(jx,{})}),E.jsx(Re,{path:"/user/register",element:E.jsx(rm,{})}),E.jsx(Re,{path:"/register",element:E.jsx(rm,{})}),E.jsx(Re,{path:"/user/account-setup",element:E.jsx(Ux,{})}),E.jsx(Re,{path:"/user/pending-approval",element:E.jsx(Wx,{})}),E.jsx(Re,{path:"/user/dashboard",element:E.jsx(Mm,{})}),E.jsx(Re,{path:"/user/add-wallet",element:E.jsx(Yx,{})}),E.jsx(Re,{path:"/admin/login",element:E.jsx(qx,{})}),E.jsx(Re,{path:"/admin/dashboard",element:E.jsx(Hx,{})}),E.jsx(Re,{path:"/admin/topups",element:E.jsx(Mx,{})}),E.jsx(Re,{path:"/admin/notifications",element:E.jsx(Fx,{})}),E.jsx(Re,{path:"/profile-settings",element:E.jsx(Gx,{})}),E.jsx(Re,{path:"/transactions",element:E.jsx(Qx,{})}),E.jsx(Re,{path:"/referrals",element:E.jsx(Jx,{})}),E.jsx(Re,{path:"/privacy-policy",element:E.jsx(tR,{})}),E.jsx(Re,{path:"/cpanel",element:E.jsx(Xx,{})}),E.jsx(Re,{path:"/cpanel/login",element:E.jsx(Zx,{})}),E.jsx(Re,{path:"/auth-test",element:E.jsx(Kx,{})}),E.jsx(Re,{path:"/topup",element:E.jsx(nm,{})}),E.jsx(Re,{path:"/recharge",element:E.jsx(nm,{})}),E.jsx(Re,{path:"/merchant/*",element:E.jsx(zx,{})}),E.jsx(Re,{path:"/dashboard/login",element:E.jsx($x,{})}),E.jsx(Re,{path:"/dashboard",element:E.jsx(Bx,{})}),E.jsx(Re,{path:"*",element:E.jsx(eR,{})})]})}),E.jsx(nR,{})]})]})})})),FL=b.createContext(void 0),bY=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!1),[i,o]=b.useState(null),{profile:a,user:l}=ga();b.useEffect(()=>{try{const m=localStorage.getItem("cashier_shift_user"),I=localStorage.getItem("cashier_shift_active"),p=localStorage.getItem("cashier_shift_start_at");m&&n(JSON.parse(m)),I&&s(I==="true"),p&&o(Number(p))}catch{}},[]);const c=async()=>{if(a!=null&&a.shopId)try{const m=ke(Y,"cashierShift",a.shopId),I=await en(m);if(I.exists()){const p=I.data(),y=(p==null?void 0:p.shiftUser)||null,_=!!(p!=null&&p.isShiftActive),v=(p==null?void 0:p.shiftStartAt)??null;let w=y;if(!w)try{const x=localStorage.getItem("cashier_shift_user"),P=x?JSON.parse(x):null;P&&(w=P)}catch{}n(w),s(_),o(typeof v=="number"?v:v?Number(v):null);try{w?localStorage.setItem("cashier_shift_user",JSON.stringify(w)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",_?"true":"false"),v!=null&&localStorage.setItem("cashier_shift_start_at",String(v))}catch{}}else await mn(m,{isShiftActive:!1,shiftStartAt:null,shiftUser:null})}catch(m){console.warn("Failed to refresh shift status:",m)}};b.useEffect(()=>{c()},[a==null?void 0:a.shopId]);const d=m=>{n(m);try{m?localStorage.setItem("cashier_shift_user",JSON.stringify(m)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const I=ke(Y,"cashierShift",a.shopId);An(I,{shiftUser:m||null})}}catch{}},h=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const m=Date.now();o(m);try{localStorage.setItem("cashier_shift_start_at",String(m))}catch{}try{if(a!=null&&a.shopId){const I=ke(Y,"cashierShift",a.shopId);An(I,{isShiftActive:!0,shiftStartAt:m})}}catch{}try{const p=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,_=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let v=localStorage.getItem(p);if(v==null){const x=localStorage.getItem(y);if(x!=null){v=x;try{localStorage.setItem(p,x),localStorage.removeItem(y)}catch{}}}if(v==null&&(l!=null&&l.uid)){const x=localStorage.getItem("cashBalance"),P=localStorage.getItem("userCashBalance");if(x!=null){try{localStorage.setItem(p,x),localStorage.removeItem("cashBalance")}catch{}v=x}else if(P!=null){try{localStorage.setItem(p,P),localStorage.removeItem("userCashBalance")}catch{}v=P}}const w=localStorage.getItem(_);v?localStorage.setItem("shiftStartDrawerFunds",v):localStorage.setItem("shiftStartDrawerFunds","0"),w?localStorage.setItem("shiftStartWalletBalances",w):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const I=ke(Y,"dashboardData",a.shopId),p=await en(I);if(p.exists()){const y=p.data(),_=Number((y==null?void 0:y.cashBalance)??0),v=(y==null?void 0:y.walletBalances)??{};try{const w=localStorage.getItem("shiftStartDrawerFunds"),x=localStorage.getItem("shiftStartWalletBalances"),P=w?parseFloat(w):0,L=x?JSON.parse(x):{},A=!w||!Number.isFinite(P)||P===0,S=!x||Object.keys(L||{}).length===0;A&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(_)?_:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(v||{}))}catch{}}}catch(I){console.warn("Shift start Firebase read failed:",I)}})()}catch{}},f=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const m=ke(Y,"cashierShift",a.shopId);An(m,{isShiftActive:!1})}}catch{}};return E.jsx(FL.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:d,startShift:h,endShift:f,refreshShiftStatus:c},children:t})},aJ=()=>{const t=b.useContext(FL);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class AY extends b.Component{constructor(){super(...arguments);Ku(this,"state",{hasError:!1,error:null});Ku(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:E.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[E.jsx("div",{className:"flex justify-center",children:E.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:E.jsx(yC,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),E.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,E.jsxs(us,{onClick:this.handleReload,className:"w-full gap-2",children:[E.jsx(V0,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{sL()}catch{}const xY=()=>{const{theme:t="system"}=RC();return b.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};$1(document.getElementById("root")).render(E.jsx(AY,{children:E.jsx(aj,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:E.jsx(TG,{children:E.jsx(bY,{children:E.jsxs(cQ,{children:[E.jsx(SY,{}),E.jsx(xY,{})]})})})})}));export{Jr as $,OU as A,us as B,mn as C,ke as D,HU as E,Dt as F,en as G,An as H,U_ as I,xw as J,BU as K,m6 as L,PS as M,UY as N,ir as O,pC as P,Pv as Q,F as R,h4 as S,Om as T,_4 as U,Lm as V,Vm as W,_Y as X,hi as Y,Rs as Z,te as _,Iu as a,o4 as a$,yu as a0,$F as a1,Wy as a2,sn as a3,Lt as a4,sr as a5,D0 as a6,ai as a7,$2 as a8,OG as a9,SG as aA,$C as aB,DF as aC,uQ as aD,aG as aE,FU as aF,YU as aG,E4 as aH,jU as aI,zC as aJ,CY as aK,o$ as aL,Tl as aM,k0 as aN,sY as aO,W1 as aP,vQ as aQ,pL as aR,ch as aS,oL as aT,dg as aU,a$ as aV,l$ as aW,B1 as aX,$Y as aY,RC as aZ,nL as a_,g4 as aa,Cm as ab,aJ as ac,aQ as ad,Ie as ae,RS as af,VU as ag,V7 as ah,NI as ai,Pw as aj,kS as ak,db as al,Re as am,Po as an,CS as ao,WU as ap,La as aq,hG as ar,Kp as as,Le as at,Tw as au,M0 as av,sH as aw,Nw as ax,Au as ay,zY as az,jY as b,QY as b$,XY as b0,ZY as b1,eJ as b2,dG as b3,tJ as b4,BG as b5,Ni as b6,iU as b7,$h as b8,WY as b9,NL as bA,pY as bB,y6 as bC,FY as bD,MY as bE,j2 as bF,Va as bG,lH as bH,zG as bI,nJ as bJ,wg as bK,$$ as bL,O$ as bM,NY as bN,N_ as bO,Ir as bP,Eg as bQ,D$ as bR,N$ as bS,fp as bT,lk as bU,tB as bV,M$ as bW,Tr as bX,OY as bY,V2 as bZ,GK as b_,Z2 as ba,eL as bb,s4 as bc,yC as bd,qd as be,UG as bf,YY as bg,FG as bh,Kn as bi,JY as bj,MG as bk,CI as bl,KG as bm,By as bn,_t as bo,oJ as bp,oG as bq,sJ as br,mY as bs,gY as bt,iJ as bu,OL as bv,MF as bw,LL as bx,VL as by,yY as bz,C0 as c,KK as c0,lG as c1,DU as c2,Nn as c3,qt as c4,jl as c5,vv as c6,jG as c7,rJ as c8,kw as c9,J2 as d,kG as e,Ot as f,NG as g,De as h,Y as i,E as j,We as k,Fu as l,GY as m,ZK as n,Wo as o,oi as p,$e as q,b as r,Ve as s,e4 as t,ga as u,GU as v,J9 as w,uG as x,hr as y,X9 as z};
//# sourceMappingURL=index-DvnSb1Lh.js.map
