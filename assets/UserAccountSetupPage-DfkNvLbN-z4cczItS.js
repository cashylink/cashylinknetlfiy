const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C_crvORM.js","./index-Bpuv6Nub.css"])))=>i.map(i=>d[i]);
import{X as P,C as T,d as q,W,S as r,I as e,l as X,t as b,b as O,a as H,n as L,Z as w,_,p as M}from"./index-C_crvORM.js";import{o as R,c as V,i as z,l as B}from"./card-SlwaggFS-CAdsFCUe.js";import{u}from"./label-_mnIMROJ-DCx9a6ad.js";import{n as K,c as Q}from"./alert-NHJmLZVr-DrufTycw.js";import{h as A}from"./store-i3EEOQHb-BqQT5qw5.js";import{e as U}from"./phone-fkjnGVtI-D5yZCm03.js";import{t as Z}from"./circle-check-big-DcMEd0KV-kvVPwXiq.js";const g=(p,t=g,c=t.f||(t.f=["./index-tnWDkOuX.js","./index-Bpuv6Nub.css"]))=>p.map(o=>c[o]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=O("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),le=()=>{const[p]=P(),t=p.get("user_name")||"",c=T(),{toast:o}=q(),{user:a}=W(),[s,C]=r.useState({shopName:"",shopAddress:"",phoneNumber:"",description:""}),[j,v]=r.useState(!1),[y,i]=r.useState(""),[J,D]=r.useState(!1),[Y,I]=r.useState(!1);r.useEffect(()=>{if(!a){c("/auth");return}},[a,c]);const d=h=>{const{name:n,value:x}=h.target;C(m=>({...m,[n]:x}))},S=()=>s.shopName.trim()?s.phoneNumber.trim()?s.shopAddress.trim()?!0:(i("عنوان المتجر مطلوب"),!1):(i("رقم الهاتف مطلوب"),!1):(i("اسم المتجر مطلوب"),!1),$=async h=>{if(h.preventDefault(),i(""),!!S()){v(!0);try{if(a){const{addDoc:n,collection:x,serverTimestamp:m}=await w(async()=>{const{addDoc:f,collection:l,serverTimestamp:E}=await _(()=>import("./index-C_crvORM.js").then(N=>N.c3),__vite__mapDeps([0,1]),import.meta.url).then(N=>N.c2);return{addDoc:f,collection:l,serverTimestamp:E}},g([0,1]),import.meta.url),{db:F}=await w(async()=>{const{db:f}=await _(()=>import("./index-C_crvORM.js").then(l=>l.c3),__vite__mapDeps([0,1]),import.meta.url).then(l=>l.c3);return{db:f}},g([0,1]),import.meta.url),k=(await n(x(F,"shops"),{name:s.shopName||"متجر جديد",ownerId:a.uid,createdAt:m(),updatedAt:m(),isActive:!0})).id;await M.create({userId:a.uid,shopId:k,role:"merchant",fullName:t,phone:s.phoneNumber})}o({title:"تم إعداد الحساب بنجاح",description:`مرحباً ${t}! تم إعداد متجرك "${s.shopName}" بنجاح`}),I(!0),D(!0)}catch(n){console.error("Account setup error:",n),i("حدث خطأ أثناء إعداد الحساب"),o({title:"خطأ في إعداد الحساب",description:"حدث خطأ أثناء إعداد الحساب، يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{v(!1)}}};return a?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4 shadow-lg",children:e.jsx(A,{className:"h-8 w-8 text-white"})}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["مرحباً ",t,"!"]}),e.jsx("p",{className:"text-gray-600",children:"دعنا نقوم بإعداد حساب متجرك"})]}),e.jsxs(R,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[e.jsxs(V,{className:"text-center pb-4",children:[e.jsxs(z,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[e.jsx(X,{className:"h-6 w-6 text-blue-600"}),"إعداد حساب التاجر"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بيانات متجرك لإكمال إعداد الحساب"})]}),e.jsxs(B,{className:"space-y-6",children:[y&&e.jsx(K,{variant:"destructive",className:"fade-in-up",children:e.jsx(Q,{children:y})}),e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsxs(u,{htmlFor:"shopName",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-blue-600"}),"اسم المتجر"]}),e.jsx(b,{id:"shopName",name:"shopName",type:"text",placeholder:"أدخل اسم متجرك",value:s.shopName,onChange:d,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsxs(u,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-blue-600"}),"رقم الهاتف"]}),e.jsx(b,{id:"phoneNumber",name:"phoneNumber",type:"tel",placeholder:"أدخل رقم هاتف المتجر",value:s.phoneNumber,onChange:d,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsxs(u,{htmlFor:"shopAddress",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-blue-600"}),"عنوان المتجر"]}),e.jsx(b,{id:"shopAddress",name:"shopAddress",type:"text",placeholder:"أدخل عنوان المتجر",value:s.shopAddress,onChange:d,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(u,{htmlFor:"description",className:"text-sm font-medium text-gray-700",children:"وصف المتجر (اختياري)"}),e.jsx("textarea",{id:"description",name:"description",placeholder:"أدخل وصفاً مختصراً عن متجرك",value:s.description,onChange:d,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"})]}),e.jsx(H,{type:"submit",disabled:j,className:"w-full h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:j?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إعداد الحساب..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"إكمال إعداد الحساب",e.jsx(L,{className:"h-4 w-4"})]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:e.jsx("p",{className:"text-sm text-gray-600",children:"بعد إكمال الإعداد، ستتمكن من الوصول إلى لوحة تحكم التاجر وإدارة متجرك"})})]})]}),e.jsx("div",{className:"text-center mt-8 fade-in-up",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})}):null};export{le as default};
//# sourceMappingURL=UserAccountSetupPage-DfkNvLbN-z4cczItS.js.map
