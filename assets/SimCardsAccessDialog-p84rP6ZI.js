var ge=t=>{throw TypeError(t)};var te=(t,e,s)=>e.has(t)||ge("Cannot "+s);var i=(t,e,s)=>(te(t,e,"read from private field"),s?s.call(t):e.get(t)),y=(t,e,s)=>e.has(t)?ge("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),u=(t,e,s,r)=>(te(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),p=(t,e,s)=>(te(t,e,"access private method"),s);import{_ as W,c4 as Oe,c5 as be,c6 as w,c7 as se,c8 as H,c9 as ie,ca as re,cb as xe,cc as Te,cd as X,ce as De,cf as Qe,cg as ve,ch as ke,r as C,ci as Ne,cj as Ue,l as Pe,q as Fe,p as Re,s as Se,aF as Ce,t as Le,v as Ae,w as Be,j as c,af as ze,ag as He,ah as Ve,ai as $e,aG as We,B,A as Ge,D as Ke}from"./index-CzMrJEuC.js";import{S as Je,a as Xe,b as Ye,c as Ze,d as Y}from"./select-DHMtOuee.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],St=W("arrow-right-left",qe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ct=W("arrow-up-right",et);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Et=W("banknote",tt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],wt=W("calculator",st);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],jt=W("chart-no-axes-column-increasing",it);var x,a,V,g,O,P,N,I,$,F,L,T,D,_,A,l,z,ae,ne,ce,oe,he,le,ue,Ie,Me,rt=(Me=class extends Oe{constructor(e,s){super();y(this,l);y(this,x);y(this,a);y(this,V);y(this,g);y(this,O);y(this,P);y(this,N);y(this,I);y(this,$);y(this,F);y(this,L);y(this,T);y(this,D);y(this,_);y(this,A,new Set);this.options=s,u(this,x,e),u(this,I,null),u(this,N,be()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,a).addObserver(this),Ee(i(this,a),this.options)?p(this,l,z).call(this):this.updateResult(),p(this,l,oe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return de(i(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return de(i(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,l,he).call(this),p(this,l,le).call(this),i(this,a).removeObserver(this)}setOptions(e){const s=this.options,r=i(this,a);if(this.options=i(this,x).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof w(this.options.enabled,i(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,l,ue).call(this),i(this,a).setOptions(this.options),s._defaulted&&!se(this.options,s)&&i(this,x).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,a),observer:this});const o=this.hasListeners();o&&we(i(this,a),r,this.options,s)&&p(this,l,z).call(this),this.updateResult(),o&&(i(this,a)!==r||w(this.options.enabled,i(this,a))!==w(s.enabled,i(this,a))||H(this.options.staleTime,i(this,a))!==H(s.staleTime,i(this,a)))&&p(this,l,ae).call(this);const n=p(this,l,ne).call(this);o&&(i(this,a)!==r||w(this.options.enabled,i(this,a))!==w(s.enabled,i(this,a))||n!==i(this,_))&&p(this,l,ce).call(this,n)}getOptimisticResult(e){const s=i(this,x).getQueryCache().build(i(this,x),e),r=this.createResult(s,e);return nt(this,r)&&(u(this,g,r),u(this,P,this.options),u(this,O,i(this,a).state)),r}getCurrentResult(){return i(this,g)}trackResult(e,s){return new Proxy(e,{get:(r,o)=>(this.trackProp(o),s==null||s(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&i(this,N).status==="pending"&&i(this,N).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,o))})}trackProp(e){i(this,A).add(e)}getCurrentQuery(){return i(this,a)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,x).defaultQueryOptions(e),r=i(this,x).getQueryCache().build(i(this,x),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return p(this,l,z).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,g)))}createResult(e,s){var ye;const r=i(this,a),o=this.options,n=i(this,g),h=i(this,O),v=i(this,P),d=e!==r?e.state:i(this,V),{state:b}=e;let f={...b},k=!1,m;if(s._optimisticResults){const E=this.hasListeners(),K=!E&&Ee(e,s),U=E&&we(e,r,s,o);(K||U)&&(f={...f,...Qe(b.data,e.options)}),s._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:R,errorUpdatedAt:Q,status:S}=f;m=f.data;let G=!1;if(s.placeholderData!==void 0&&m===void 0&&S==="pending"){let E;n!=null&&n.isPlaceholderData&&s.placeholderData===(v==null?void 0:v.placeholderData)?(E=n.data,G=!0):E=typeof s.placeholderData=="function"?s.placeholderData((ye=i(this,L))==null?void 0:ye.state.data,i(this,L)):s.placeholderData,E!==void 0&&(S="success",m=ve(n==null?void 0:n.data,E,s),k=!0)}if(s.select&&m!==void 0&&!G)if(n&&m===(h==null?void 0:h.data)&&s.select===i(this,$))m=i(this,F);else try{u(this,$,s.select),m=s.select(m),m=ve(n==null?void 0:n.data,m,s),u(this,F,m),u(this,I,null)}catch(E){u(this,I,E)}i(this,I)&&(R=i(this,I),m=i(this,F),Q=Date.now(),S="error");const Z=f.fetchStatus==="fetching",q=S==="pending",ee=S==="error",pe=q&&Z,me=m!==void 0,j={status:S,fetchStatus:f.fetchStatus,isPending:q,isSuccess:S==="success",isError:ee,isInitialLoading:pe,isLoading:pe,data:m,dataUpdatedAt:f.dataUpdatedAt,error:R,errorUpdatedAt:Q,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:Z,isRefetching:Z&&!q,isLoadingError:ee&&!me,isPaused:f.fetchStatus==="paused",isPlaceholderData:k,isRefetchError:ee&&me,isStale:fe(e,s),refetch:this.refetch,promise:i(this,N),isEnabled:w(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=J=>{j.status==="error"?J.reject(j.error):j.data!==void 0&&J.resolve(j.data)},K=()=>{const J=u(this,N,j.promise=be());E(J)},U=i(this,N);switch(U.status){case"pending":e.queryHash===r.queryHash&&E(U);break;case"fulfilled":(j.status==="error"||j.data!==U.value)&&K();break;case"rejected":(j.status!=="error"||j.error!==U.reason)&&K();break}}return j}updateResult(){const e=i(this,g),s=this.createResult(i(this,a),this.options);if(u(this,O,i(this,a).state),u(this,P,this.options),i(this,O).data!==void 0&&u(this,L,i(this,a)),se(s,e))return;u(this,g,s);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,n=typeof o=="function"?o():o;if(n==="all"||!n&&!i(this,A).size)return!0;const h=new Set(n??i(this,A));return this.options.throwOnError&&h.add("error"),Object.keys(i(this,g)).some(v=>{const M=v;return i(this,g)[M]!==e[M]&&h.has(M)})};p(this,l,Ie).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,l,oe).call(this)}},x=new WeakMap,a=new WeakMap,V=new WeakMap,g=new WeakMap,O=new WeakMap,P=new WeakMap,N=new WeakMap,I=new WeakMap,$=new WeakMap,F=new WeakMap,L=new WeakMap,T=new WeakMap,D=new WeakMap,_=new WeakMap,A=new WeakMap,l=new WeakSet,z=function(e){p(this,l,ue).call(this);let s=i(this,a).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(ie)),s},ae=function(){p(this,l,he).call(this);const e=H(this.options.staleTime,i(this,a));if(re||i(this,g).isStale||!xe(e))return;const r=Te(i(this,g).dataUpdatedAt,e)+1;u(this,T,X.setTimeout(()=>{i(this,g).isStale||this.updateResult()},r))},ne=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,a)):this.options.refetchInterval)??!1},ce=function(e){p(this,l,le).call(this),u(this,_,e),!(re||w(this.options.enabled,i(this,a))===!1||!xe(i(this,_))||i(this,_)===0)&&u(this,D,X.setInterval(()=>{(this.options.refetchIntervalInBackground||De.isFocused())&&p(this,l,z).call(this)},i(this,_)))},oe=function(){p(this,l,ae).call(this),p(this,l,ce).call(this,p(this,l,ne).call(this))},he=function(){i(this,T)&&(X.clearTimeout(i(this,T)),u(this,T,void 0))},le=function(){i(this,D)&&(X.clearInterval(i(this,D)),u(this,D,void 0))},ue=function(){const e=i(this,x).getQueryCache().build(i(this,x),this.options);if(e===i(this,a))return;const s=i(this,a);u(this,a,e),u(this,V,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Ie=function(e){ke.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,g))}),i(this,x).getQueryCache().notify({query:i(this,a),type:"observerResultsUpdated"})})},Me);function at(t,e){return w(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ee(t,e){return at(t,e)||t.state.data!==void 0&&de(t,e,e.refetchOnMount)}function de(t,e,s){if(w(e.enabled,t)!==!1&&H(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&fe(t,e)}return!1}function we(t,e,s,r){return(t!==e||w(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&fe(t,s)}function fe(t,e){return w(e.enabled,t)!==!1&&t.isStaleByTime(H(e.staleTime,t))}function nt(t,e){return!se(t.getCurrentResult(),e)}var _e=C.createContext(!1),ct=()=>C.useContext(_e);_e.Provider;function ot(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ht=C.createContext(ot()),lt=()=>C.useContext(ht),ut=(t,e,s)=>{const r=s!=null&&s.state.error&&typeof t.throwOnError=="function"?Ne(t.throwOnError,[s.state.error,s]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},dt=t=>{C.useEffect(()=>{t.clearReset()},[t])},ft=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:o})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(o&&t.data===void 0||Ne(s,[t.error,r])),pt=t=>{if(t.suspense){const s=o=>o==="static"?o:Math.max(o??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...o)=>s(r(...o)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},mt=(t,e)=>t.isLoading&&t.isFetching&&!e,yt=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,je=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function gt(t,e,s){var k,m,R,Q;const r=ct(),o=lt(),n=Ue(),h=n.defaultQueryOptions(t);(m=(k=n.getDefaultOptions().queries)==null?void 0:k._experimental_beforeQuery)==null||m.call(k,h);const v=n.getQueryCache().get(h.queryHash);h._optimisticResults=r?"isRestoring":"optimistic",pt(h),ut(h,o,v),dt(o);const M=!n.getQueryCache().get(h.queryHash),[d]=C.useState(()=>new e(n,h)),b=d.getOptimisticResult(h),f=!r&&t.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(S=>{const G=f?d.subscribe(ke.batchCalls(S)):ie;return d.updateResult(),G},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),C.useEffect(()=>{d.setOptions(h)},[h,d]),yt(h,b))throw je(h,d,o);if(ft({result:b,errorResetBoundary:o,throwOnError:h.throwOnError,query:v,suspense:h.suspense}))throw b.error;if((Q=(R=n.getDefaultOptions().queries)==null?void 0:R._experimental_afterQuery)==null||Q.call(R,h,b),h.experimental_prefetchInRender&&!re&&mt(b,r)){const S=M?je(h,d,o):v==null?void 0:v.promise;S==null||S.catch(ie).finally(()=>{d.updateResult()})}return h.notifyOnChangeProps?b:d.trackResult(b)}function Mt(t,e){return gt(t,rt)}function kt(t){const e=typeof t=="string"?Number(t):t;return Number.isFinite(e)?e.toLocaleString("en-US"):"0"}const Nt=({isOpen:t,onClose:e,userId:s,userEmail:r})=>{const[o,n]=C.useState("initial"),[h,v]=C.useState(""),[M,d]=C.useState(!1),{toast:b}=Pe();C.useEffect(()=>{t&&f()},[t,s]);const f=async()=>{d(!0);try{const R=Fe(Re(Se,"simCardRequests"),Ce("userId","==",s),Ce("status","==","pending"),Le("createdAt","desc"),Ae(1));(await Be(R)).empty?n("initial"):n("pending")}catch(R){console.error("Error checking requests:",R)}finally{d(!1)}},k=async()=>{if(!h){b({title:"خطأ",description:"الرجاء اختيار باقة الاشتراك",variant:"destructive"});return}d(!0);try{await Ge(Re(Se,"simCardRequests"),{userId:s,email:r||"No Email",plan:h,status:"pending",createdAt:Ke()}),n("pending"),b({title:"تم الإرسال",description:"تم إرسال طلب الاشتراك بنجاح"})}catch(R){console.error("Error sending request:",R),b({title:"خطأ",description:"حدث خطأ أثناء إرسال الطلب",variant:"destructive"})}finally{d(!1)}},m=()=>{if(M)return c.jsx("div",{className:"py-8 text-center",children:"جاري التحميل..."});switch(o){case"pending":return c.jsxs("div",{className:"space-y-4 py-4 text-center",children:[c.jsxs("div",{className:"text-yellow-600 bg-yellow-50 p-4 rounded-lg",children:[c.jsx("p",{className:"font-semibold",children:"طلبك قيد المراجعة"}),c.jsx("p",{className:"text-sm mt-2",children:"لقد قمت بإرسال طلب اشتراك بالفعل. سيتم تفعيله قريباً."})]}),c.jsx(B,{onClick:e,variant:"outline",className:"w-full",children:"إغلاق"})]});case"subscribe":return c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"اختر باقة الاشتراك:"}),c.jsxs(Je,{value:h,onValueChange:v,children:[c.jsx(Xe,{children:c.jsx(Ye,{placeholder:"اختر الباقة"})}),c.jsxs(Ze,{children:[c.jsx(Y,{value:"monthly",children:"شهرية"}),c.jsx(Y,{value:"quarterly",children:"ربع سنوية (3 شهور)"}),c.jsx(Y,{value:"yearly",children:"سنوية"}),c.jsx(Y,{value:"lifetime",children:"مدى الحياة"})]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(B,{onClick:k,disabled:!h||M,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"ارسال طلب الاشتراك"}),c.jsx(B,{onClick:()=>n("initial"),variant:"outline",children:"رجوع"})]})]});default:return c.jsxs("div",{className:"space-y-4 py-4 text-center",children:[c.jsx("p",{className:"text-red-600 font-medium",children:"غير مفعلة على حسابك"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"للاشتراك في خدمة الخطوط، يرجى التواصل مع خدمة العملاء أو تقديم طلب اشتراك."}),c.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[c.jsx(B,{onClick:()=>n("subscribe"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"اشتراك"}),c.jsx(B,{onClick:e,variant:"outline",children:"إغلاق"})]})]})}};return c.jsx(ze,{open:t,onOpenChange:e,children:c.jsxs(He,{className:"sm:max-w-[425px]",dir:"rtl",children:[c.jsxs(Ve,{children:[c.jsx($e,{children:"خدمة الخطوط"}),c.jsx(We,{children:"إدارة اشتراك خدمة الخطوط"})]}),m()]})})};export{St as A,Et as B,wt as C,Nt as S,jt as a,Ct as b,kt as f,Mt as u};
//# sourceMappingURL=SimCardsAccessDialog-p84rP6ZI.js.map
