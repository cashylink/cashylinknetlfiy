const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-Be8vwlAe.js","./card-CdZ89wHA.js","./BrandLogo-ChQW6zrK.js","./brandingService-RKVqdubw.js","./whatsappService-Ch9FyFNb.js","./arrow-left-Dg0WTfXV.js","./star-Busk5wlQ.js","./crown-BorW8ZAE.js","./download-C6bsx04M.js","./zap-B1z1eBfm.js","./shield-BpPPeTvJ.js","./chart-column-u2WPvv2c.js","./circle-check-big-zx-PzrIn.js","./SubscriptionsPage-DvDSGGTi.js","./contentService-Mtu7l2Rb.js","./calendar-n6d7WDHa.js","./AuthPage-DLYMxRW2.js","./TopUpPage-ZQWcPeAf.js","./select-CNUPPz9r.js","./AdminTopupsPage-qSbsi2_r.js","./AdminNotificationsPage-CIOOsji2.js","./label-xK2gNCpt.js","./textarea-BczUxm2s.js","./link-Q_kgv9mk.js","./UserRegisterPage-BjaMPnD9.js","./alert-qqYksDuC.js","./wallet-CcB5ksMi.js","./user-plus-BSdTjspL.js","./share-2-DwK_RZaH.js","./phone-Bfk7DEDM.js","./store-CgAhD43e.js","./UserAccountSetupPage-UF7br-UE.js","./DashboardLoginPage-CehzCDEt.js","./ProtectedDashboard-CIe6QcoN.js","./badge-dOZ4uC2s.js","./MasterPinDialog-CZFMuEah.js","./circle-alert--64_gie4.js","./commissionCalculator-DbNVJv5a.js","./profitService-DRDD-Fph.js","./dollar-sign-CpfSiT3v.js","./circle-x-DCthG7Az.js","./ProtectedUserDashboard-DSRaUmSn.js","./broadcastService-C3ebSkVb.js","./MerchantDashboard-BJCS61Ue.js","./dropdown-menu-C65evTPM.js","./index-DyzQfDCv.js","./WalletsManagement-BI1Chrrb.js","./progress-CZUZSHBo.js","./walletDailyLimitsService-DdjjL_Zn.js","./square-pen-DmKhyk8U.js","./PendingApprovalPage-BlHkameu.js","./freeTrialService-ntIHdrwZ.js","./AdminLogin-BgISCjHT.js","./ProtectedAdminDashboard-Oct_AlYQ.js","./ProfileIcon-iQttrBlC.js","./switch-XqQIkNpM.js","./separator-hqlx8nZp.js","./save-DLfQkjiN.js","./copy-BVGPHHXZ.js","./users-DE8Xl0AF.js","./AuthTestPage-CeaWaW68.js","./ProfileSettingsPage-A95N6Uir.js","./walletSelectionPinService-CdDSQUNH.js","./TransactionsPage-D3QJMUmN.js","./MaintenanceDialog-BuCRnuhC.js","./WalletAdditionPage-UT_a_ESN.js","./ReferralsPage-Dm9o-HkX.js","./CPanelPage-BXkomUGY.js","./CPanelLoginPage-D0FnEn1d.js","./UserDashboardPage-B-nZi7Q8.js"])))=>i.map(i=>d[i]);
var _2=Object.defineProperty;var J0=t=>{throw TypeError(t)};var E2=(t,e,n)=>e in t?_2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gg=(t,e,n)=>E2(t,typeof e!="symbol"?e+"":e,n),yg=(t,e,n)=>e.has(t)||J0("Cannot "+n);var G=(t,e,n)=>(yg(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?J0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Se=(t,e,n,r)=>(yg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),rn=(t,e,n)=>(yg(t,e,"access private method"),n);var ch=(t,e,n,r)=>({set _(s){Se(t,e,s,n)},get _(){return G(t,e,r)}});function T2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fx={exports:{}},zp={},px={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=Symbol.for("react.element"),I2=Symbol.for("react.portal"),S2=Symbol.for("react.fragment"),b2=Symbol.for("react.strict_mode"),A2=Symbol.for("react.profiler"),x2=Symbol.for("react.provider"),R2=Symbol.for("react.context"),P2=Symbol.for("react.forward_ref"),C2=Symbol.for("react.suspense"),k2=Symbol.for("react.memo"),D2=Symbol.for("react.lazy"),Z0=Symbol.iterator;function N2(t){return t===null||typeof t!="object"?null:(t=Z0&&t[Z0]||t["@@iterator"],typeof t=="function"?t:null)}var mx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gx=Object.assign,yx={};function tc(t,e,n){this.props=t,this.context=e,this.refs=yx,this.updater=n||mx}tc.prototype.isReactComponent={};tc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vx(){}vx.prototype=tc.prototype;function Cw(t,e,n){this.props=t,this.context=e,this.refs=yx,this.updater=n||mx}var kw=Cw.prototype=new vx;kw.constructor=Cw;gx(kw,tc.prototype);kw.isPureReactComponent=!0;var eT=Array.isArray,wx=Object.prototype.hasOwnProperty,Dw={current:null},_x={key:!0,ref:!0,__self:!0,__source:!0};function Ex(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wx.call(e,r)&&!_x.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ad,type:t,key:i,ref:o,props:s,_owner:Dw.current}}function O2(t,e){return{$$typeof:Ad,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ad}function V2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tT=/\/+/g;function vg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V2(""+t.key):e.toString(36)}function Xh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ad:case I2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+vg(o,0):r,eT(s)?(n="",t!=null&&(n=t.replace(tT,"$&/")+"/"),Xh(s,e,n,"",function(c){return c})):s!=null&&(Nw(s)&&(s=O2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",eT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+vg(i,a);o+=Xh(i,e,n,l,s)}else if(l=N2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+vg(i,a++),o+=Xh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function uh(t,e,n){if(t==null)return t;var r=[],s=0;return Xh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function L2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},Jh={transition:null},M2={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:Jh,ReactCurrentOwner:Dw};function Tx(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:uh,forEach:function(t,e,n){uh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uh(t,function(){e++}),e},toArray:function(t){return uh(t,function(e){return e})||[]},only:function(t){if(!Nw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=tc;Oe.Fragment=S2;Oe.Profiler=A2;Oe.PureComponent=Cw;Oe.StrictMode=b2;Oe.Suspense=C2;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M2;Oe.act=Tx;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Dw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wx.call(e,l)&&!_x.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ad,type:t.type,key:s,ref:i,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:R2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:x2,_context:t},t.Consumer=t};Oe.createElement=Ex;Oe.createFactory=function(t){var e=Ex.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:P2,render:t}};Oe.isValidElement=Nw;Oe.lazy=function(t){return{$$typeof:D2,_payload:{_status:-1,_result:t},_init:L2}};Oe.memo=function(t,e){return{$$typeof:k2,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Jh.transition;Jh.transition={};try{t()}finally{Jh.transition=e}};Oe.unstable_act=Tx;Oe.useCallback=function(t,e){return An.current.useCallback(t,e)};Oe.useContext=function(t){return An.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return An.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return An.current.useEffect(t,e)};Oe.useId=function(){return An.current.useId()};Oe.useImperativeHandle=function(t,e,n){return An.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return An.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return An.current.useReducer(t,e,n)};Oe.useRef=function(t){return An.current.useRef(t)};Oe.useState=function(t){return An.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return An.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return An.current.useTransition()};Oe.version="18.3.1";px.exports=Oe;var I=px.exports;const q=hx(I),Ow=T2({__proto__:null,default:q},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=I,U2=Symbol.for("react.element"),j2=Symbol.for("react.fragment"),B2=Object.prototype.hasOwnProperty,$2=F2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z2={key:!0,ref:!0,__self:!0,__source:!0};function Ix(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)B2.call(e,r)&&!z2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:U2,type:t,key:i,ref:o,props:s,_owner:$2.current}}zp.Fragment=j2;zp.jsx=Ix;zp.jsxs=Ix;fx.exports=zp;var S=fx.exports,Sx={exports:{}},rr={},bx={exports:{}},Ax={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,M){var K=L.length;L.push(M);e:for(;0<K;){var X=K-1>>>1,z=L[X];if(0<s(z,M))L[X]=M,L[K]=z,K=X;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var M=L[0],K=L.pop();if(K!==M){L[0]=K;e:for(var X=0,z=L.length,se=z>>>1;X<se;){var oe=2*(X+1)-1,de=L[oe],ie=oe+1,ne=L[ie];if(0>s(de,K))ie<z&&0>s(ne,de)?(L[X]=ne,L[ie]=K,X=ie):(L[X]=de,L[oe]=K,X=oe);else if(ie<z&&0>s(ne,K))L[X]=ne,L[ie]=K,X=ie;else break e}}return M}function s(L,M){var K=L.sortIndex-M.sortIndex;return K!==0?K:L.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,T=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=L)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function R(L){if(g=!1,w(L),!T)if(n(l)!==null)T=!0,H(k);else{var M=n(c);M!==null&&Y(R,M.startTime-L)}}function k(L,M){T=!1,g&&(g=!1,_(b),b=-1),p=!0;var K=f;try{for(w(M),h=n(l);h!==null&&(!(h.expirationTime>M)||L&&!N());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var z=X(h.expirationTime<=M);M=t.unstable_now(),typeof z=="function"?h.callback=z:h===n(l)&&r(l),w(M)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var oe=n(c);oe!==null&&Y(R,oe.startTime-M),se=!1}return se}finally{h=null,f=K,p=!1}}var V=!1,x=null,b=-1,A=5,C=-1;function N(){return!(t.unstable_now()-C<A)}function O(){if(x!==null){var L=t.unstable_now();C=L;var M=!0;try{M=x(!0,L)}finally{M?P():(V=!1,x=null)}}else V=!1}var P;if(typeof y=="function")P=function(){y(O)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,$=F.port2;F.port1.onmessage=O,P=function(){$.postMessage(null)}}else P=function(){v(O,0)};function H(L){x=L,V||(V=!0,P())}function Y(L,M){b=v(function(){L(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){T||p||(T=!0,H(k))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var K=f;f=M;try{return L()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,M){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=f;f=L;try{return M()}finally{f=K}},t.unstable_scheduleCallback=function(L,M,K){var X=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,L){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=K+z,L={id:d++,callback:M,priorityLevel:L,startTime:K,expirationTime:z,sortIndex:-1},K>X?(L.sortIndex=K,e(c,L),n(l)===null&&L===n(c)&&(g?(_(b),b=-1):g=!0,Y(R,K-X))):(L.sortIndex=z,e(l,L),T||p||(T=!0,H(k))),L},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(L){var M=f;return function(){var K=f;f=M;try{return L.apply(this,arguments)}finally{f=K}}}})(Ax);bx.exports=Ax;var q2=bx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2=I,tr=q2;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xx=new Set,Vu={};function va(t,e){bl(t,e),bl(t+"Capture",e)}function bl(t,e){for(Vu[t]=e,t=0;t<e.length;t++)xx.add(e[t])}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cy=Object.prototype.hasOwnProperty,H2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nT={},rT={};function K2(t){return Cy.call(rT,t)?!0:Cy.call(nT,t)?!1:H2.test(t)?rT[t]=!0:(nT[t]=!0,!1)}function G2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Q2(t,e,n,r){if(e===null||typeof e>"u"||G2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new xn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new xn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new xn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new xn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new xn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new xn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new xn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new xn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new xn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vw=/[\-:]([a-z])/g;function Lw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vw,Lw);Zt[e]=new xn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vw,Lw);Zt[e]=new xn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vw,Lw);Zt[e]=new xn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new xn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new xn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mw(t,e,n,r){var s=Zt.hasOwnProperty(e)?Zt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q2(e,n,s,r)&&(n=null),r||s===null?K2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zs=W2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dh=Symbol.for("react.element"),Ha=Symbol.for("react.portal"),Ka=Symbol.for("react.fragment"),Fw=Symbol.for("react.strict_mode"),ky=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),Dy=Symbol.for("react.suspense"),Ny=Symbol.for("react.suspense_list"),jw=Symbol.for("react.memo"),hi=Symbol.for("react.lazy"),Cx=Symbol.for("react.offscreen"),sT=Symbol.iterator;function Mc(t){return t===null||typeof t!="object"?null:(t=sT&&t[sT]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,wg;function eu(t){if(wg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wg=e&&e[1]||""}return`
`+wg+t}var _g=!1;function Eg(t,e){if(!t||_g)return"";_g=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{_g=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eu(t):""}function Y2(t){switch(t.tag){case 5:return eu(t.type);case 16:return eu("Lazy");case 13:return eu("Suspense");case 19:return eu("SuspenseList");case 0:case 2:case 15:return t=Eg(t.type,!1),t;case 11:return t=Eg(t.type.render,!1),t;case 1:return t=Eg(t.type,!0),t;default:return""}}function Oy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ka:return"Fragment";case Ha:return"Portal";case ky:return"Profiler";case Fw:return"StrictMode";case Dy:return"Suspense";case Ny:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Px:return(t.displayName||"Context")+".Consumer";case Rx:return(t._context.displayName||"Context")+".Provider";case Uw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jw:return e=t.displayName||null,e!==null?e:Oy(t.type)||"Memo";case hi:e=t._payload,t=t._init;try{return Oy(t(e))}catch{}}return null}function X2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oy(e);case 8:return e===Fw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function J2(t){var e=kx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hh(t){t._valueTracker||(t._valueTracker=J2(t))}function Dx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vy(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nx(t,e){e=e.checked,e!=null&&Mw(t,"checked",e,!1)}function Ly(t,e){Nx(t,e);var n=Wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?My(t,e.type,n):e.hasOwnProperty("defaultValue")&&My(t,e.type,Wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function My(t,e,n){(e!=="number"||Pf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tu=Array.isArray;function il(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(tu(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wi(n)}}function Ox(t,e){var n=Wi(e.value),r=Wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fh,Lx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fh=fh||document.createElement("div"),fh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z2=["Webkit","ms","Moz","O"];Object.keys(hu).forEach(function(t){Z2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hu[e]=hu[t]})});function Mx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hu.hasOwnProperty(t)&&hu[t]?(""+e).trim():e+"px"}function Fx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Mx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eV=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jy(t,e){if(e){if(eV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function By(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $y=null;function Bw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zy=null,ol=null,al=null;function cT(t){if(t=Pd(t)){if(typeof zy!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Gp(e),zy(t.stateNode,t.type,e))}}function Ux(t){ol?al?al.push(t):al=[t]:ol=t}function jx(){if(ol){var t=ol,e=al;if(al=ol=null,cT(t),e)for(t=0;t<e.length;t++)cT(e[t])}}function Bx(t,e){return t(e)}function $x(){}var Tg=!1;function zx(t,e,n){if(Tg)return t(e,n);Tg=!0;try{return Bx(t,e,n)}finally{Tg=!1,(ol!==null||al!==null)&&($x(),jx())}}function Mu(t,e){var n=t.stateNode;if(n===null)return null;var r=Gp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var qy=!1;if(Ds)try{var Fc={};Object.defineProperty(Fc,"passive",{get:function(){qy=!0}}),window.addEventListener("test",Fc,Fc),window.removeEventListener("test",Fc,Fc)}catch{qy=!1}function tV(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var fu=!1,Cf=null,kf=!1,Wy=null,nV={onError:function(t){fu=!0,Cf=t}};function rV(t,e,n,r,s,i,o,a,l){fu=!1,Cf=null,tV.apply(nV,arguments)}function sV(t,e,n,r,s,i,o,a,l){if(rV.apply(this,arguments),fu){if(fu){var c=Cf;fu=!1,Cf=null}else throw Error(Z(198));kf||(kf=!0,Wy=c)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uT(t){if(wa(t)!==t)throw Error(Z(188))}function iV(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return uT(s),t;if(i===r)return uT(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function Wx(t){return t=iV(t),t!==null?Hx(t):null}function Hx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hx(t);if(e!==null)return e;t=t.sibling}return null}var Kx=tr.unstable_scheduleCallback,dT=tr.unstable_cancelCallback,oV=tr.unstable_shouldYield,aV=tr.unstable_requestPaint,At=tr.unstable_now,lV=tr.unstable_getCurrentPriorityLevel,$w=tr.unstable_ImmediatePriority,Gx=tr.unstable_UserBlockingPriority,Df=tr.unstable_NormalPriority,cV=tr.unstable_LowPriority,Qx=tr.unstable_IdlePriority,qp=null,ns=null;function uV(t){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(qp,t,void 0,(t.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:fV,dV=Math.log,hV=Math.LN2;function fV(t){return t>>>=0,t===0?32:31-(dV(t)/hV|0)|0}var ph=64,mh=4194304;function nu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=nu(a):(i&=o,i!==0&&(r=nu(i)))}else o=n&~s,o!==0?r=nu(o):i!==0&&(r=nu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xr(e),s=1<<n,r|=t[n],e&=~s;return r}function pV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-xr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=pV(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Hy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yx(){var t=ph;return ph<<=1,!(ph&4194240)&&(ph=64),t}function Ig(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xr(e),t[e]=n}function gV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function zw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var He=0;function Xx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jx,qw,Zx,eR,tR,Ky=!1,gh=[],Ci=null,ki=null,Di=null,Fu=new Map,Uu=new Map,pi=[],yV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hT(t,e){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":Fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(e.pointerId)}}function Uc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Pd(e),e!==null&&qw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vV(t,e,n,r,s){switch(e){case"focusin":return Ci=Uc(Ci,t,e,n,r,s),!0;case"dragenter":return ki=Uc(ki,t,e,n,r,s),!0;case"mouseover":return Di=Uc(Di,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Fu.set(i,Uc(Fu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Uu.set(i,Uc(Uu.get(i)||null,t,e,n,r,s)),!0}return!1}function nR(t){var e=ko(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=qx(n),e!==null){t.blockedOn=e,tR(t.priority,function(){Zx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$y=r,n.target.dispatchEvent(r),$y=null}else return e=Pd(n),e!==null&&qw(e),t.blockedOn=n,!1;e.shift()}return!0}function fT(t,e,n){Zh(t)&&n.delete(e)}function wV(){Ky=!1,Ci!==null&&Zh(Ci)&&(Ci=null),ki!==null&&Zh(ki)&&(ki=null),Di!==null&&Zh(Di)&&(Di=null),Fu.forEach(fT),Uu.forEach(fT)}function jc(t,e){t.blockedOn===e&&(t.blockedOn=null,Ky||(Ky=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,wV)))}function ju(t){function e(s){return jc(s,t)}if(0<gh.length){jc(gh[0],t);for(var n=1;n<gh.length;n++){var r=gh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ci!==null&&jc(Ci,t),ki!==null&&jc(ki,t),Di!==null&&jc(Di,t),Fu.forEach(e),Uu.forEach(e),n=0;n<pi.length;n++)r=pi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pi.length&&(n=pi[0],n.blockedOn===null);)nR(n),n.blockedOn===null&&pi.shift()}var ll=zs.ReactCurrentBatchConfig,Of=!0;function _V(t,e,n,r){var s=He,i=ll.transition;ll.transition=null;try{He=1,Ww(t,e,n,r)}finally{He=s,ll.transition=i}}function EV(t,e,n,r){var s=He,i=ll.transition;ll.transition=null;try{He=4,Ww(t,e,n,r)}finally{He=s,ll.transition=i}}function Ww(t,e,n,r){if(Of){var s=Gy(t,e,n,r);if(s===null)Ng(t,e,r,Vf,n),hT(t,r);else if(vV(s,t,e,n,r))r.stopPropagation();else if(hT(t,r),e&4&&-1<yV.indexOf(t)){for(;s!==null;){var i=Pd(s);if(i!==null&&Jx(i),i=Gy(t,e,n,r),i===null&&Ng(t,e,r,Vf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ng(t,e,r,null,n)}}var Vf=null;function Gy(t,e,n,r){if(Vf=null,t=Bw(r),t=ko(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vf=t,null}function rR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lV()){case $w:return 1;case Gx:return 4;case Df:case cV:return 16;case Qx:return 536870912;default:return 16}default:return 16}}var bi=null,Hw=null,ef=null;function sR(){if(ef)return ef;var t,e=Hw,n=e.length,r,s="value"in bi?bi.value:bi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ef=s.slice(t,1<r?1-r:void 0)}function tf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yh(){return!0}function pT(){return!1}function sr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yh:pT,this.isPropagationStopped=pT,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yh)},persist:function(){},isPersistent:yh}),e}var nc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kw=sr(nc),Rd=mt({},nc,{view:0,detail:0}),TV=sr(Rd),Sg,bg,Bc,Wp=mt({},Rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bc&&(Bc&&t.type==="mousemove"?(Sg=t.screenX-Bc.screenX,bg=t.screenY-Bc.screenY):bg=Sg=0,Bc=t),Sg)},movementY:function(t){return"movementY"in t?t.movementY:bg}}),mT=sr(Wp),IV=mt({},Wp,{dataTransfer:0}),SV=sr(IV),bV=mt({},Rd,{relatedTarget:0}),Ag=sr(bV),AV=mt({},nc,{animationName:0,elapsedTime:0,pseudoElement:0}),xV=sr(AV),RV=mt({},nc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PV=sr(RV),CV=mt({},nc,{data:0}),gT=sr(CV),kV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NV[t])?!!e[t]:!1}function Gw(){return OV}var VV=mt({},Rd,{key:function(t){if(t.key){var e=kV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gw,charCode:function(t){return t.type==="keypress"?tf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LV=sr(VV),MV=mt({},Wp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yT=sr(MV),FV=mt({},Rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gw}),UV=sr(FV),jV=mt({},nc,{propertyName:0,elapsedTime:0,pseudoElement:0}),BV=sr(jV),$V=mt({},Wp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zV=sr($V),qV=[9,13,27,32],Qw=Ds&&"CompositionEvent"in window,pu=null;Ds&&"documentMode"in document&&(pu=document.documentMode);var WV=Ds&&"TextEvent"in window&&!pu,iR=Ds&&(!Qw||pu&&8<pu&&11>=pu),vT=" ",wT=!1;function oR(t,e){switch(t){case"keyup":return qV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ga=!1;function HV(t,e){switch(t){case"compositionend":return aR(e);case"keypress":return e.which!==32?null:(wT=!0,vT);case"textInput":return t=e.data,t===vT&&wT?null:t;default:return null}}function KV(t,e){if(Ga)return t==="compositionend"||!Qw&&oR(t,e)?(t=sR(),ef=Hw=bi=null,Ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iR&&e.locale!=="ko"?null:e.data;default:return null}}var GV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _T(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GV[t.type]:e==="textarea"}function lR(t,e,n,r){Ux(r),e=Lf(e,"onChange"),0<e.length&&(n=new Kw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mu=null,Bu=null;function QV(t){wR(t,0)}function Hp(t){var e=Xa(t);if(Dx(e))return t}function YV(t,e){if(t==="change")return e}var cR=!1;if(Ds){var xg;if(Ds){var Rg="oninput"in document;if(!Rg){var ET=document.createElement("div");ET.setAttribute("oninput","return;"),Rg=typeof ET.oninput=="function"}xg=Rg}else xg=!1;cR=xg&&(!document.documentMode||9<document.documentMode)}function TT(){mu&&(mu.detachEvent("onpropertychange",uR),Bu=mu=null)}function uR(t){if(t.propertyName==="value"&&Hp(Bu)){var e=[];lR(e,Bu,t,Bw(t)),zx(QV,e)}}function XV(t,e,n){t==="focusin"?(TT(),mu=e,Bu=n,mu.attachEvent("onpropertychange",uR)):t==="focusout"&&TT()}function JV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hp(Bu)}function ZV(t,e){if(t==="click")return Hp(e)}function eL(t,e){if(t==="input"||t==="change")return Hp(e)}function tL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:tL;function $u(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cy.call(e,s)||!kr(t[s],e[s]))return!1}return!0}function IT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ST(t,e){var n=IT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=IT(n)}}function dR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hR(){for(var t=window,e=Pf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pf(t.document)}return e}function Yw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nL(t){var e=hR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dR(n.ownerDocument.documentElement,n)){if(r!==null&&Yw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ST(n,i);var o=ST(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rL=Ds&&"documentMode"in document&&11>=document.documentMode,Qa=null,Qy=null,gu=null,Yy=!1;function bT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yy||Qa==null||Qa!==Pf(r)||(r=Qa,"selectionStart"in r&&Yw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gu&&$u(gu,r)||(gu=r,r=Lf(Qy,"onSelect"),0<r.length&&(e=new Kw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qa)))}function vh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ya={animationend:vh("Animation","AnimationEnd"),animationiteration:vh("Animation","AnimationIteration"),animationstart:vh("Animation","AnimationStart"),transitionend:vh("Transition","TransitionEnd")},Pg={},fR={};Ds&&(fR=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Kp(t){if(Pg[t])return Pg[t];if(!Ya[t])return t;var e=Ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fR)return Pg[t]=e[n];return t}var pR=Kp("animationend"),mR=Kp("animationiteration"),gR=Kp("animationstart"),yR=Kp("transitionend"),vR=new Map,AT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ro(t,e){vR.set(t,e),va(e,[t])}for(var Cg=0;Cg<AT.length;Cg++){var kg=AT[Cg],sL=kg.toLowerCase(),iL=kg[0].toUpperCase()+kg.slice(1);ro(sL,"on"+iL)}ro(pR,"onAnimationEnd");ro(mR,"onAnimationIteration");ro(gR,"onAnimationStart");ro("dblclick","onDoubleClick");ro("focusin","onFocus");ro("focusout","onBlur");ro(yR,"onTransitionEnd");bl("onMouseEnter",["mouseout","mouseover"]);bl("onMouseLeave",["mouseout","mouseover"]);bl("onPointerEnter",["pointerout","pointerover"]);bl("onPointerLeave",["pointerout","pointerover"]);va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));va("onBeforeInput",["compositionend","keypress","textInput","paste"]);va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oL=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function xT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sV(r,e,void 0,t),t.currentTarget=null}function wR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;xT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;xT(s,a,c),i=l}}}if(kf)throw t=Wy,kf=!1,Wy=null,t}function ot(t,e){var n=e[tv];n===void 0&&(n=e[tv]=new Set);var r=t+"__bubble";n.has(r)||(_R(e,t,2,!1),n.add(r))}function Dg(t,e,n){var r=0;e&&(r|=4),_R(n,t,r,e)}var wh="_reactListening"+Math.random().toString(36).slice(2);function zu(t){if(!t[wh]){t[wh]=!0,xx.forEach(function(n){n!=="selectionchange"&&(oL.has(n)||Dg(n,!1,t),Dg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wh]||(e[wh]=!0,Dg("selectionchange",!1,e))}}function _R(t,e,n,r){switch(rR(e)){case 1:var s=_V;break;case 4:s=EV;break;default:s=Ww}n=s.bind(null,e,n,t),s=void 0,!qy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ng(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ko(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}zx(function(){var c=i,d=Bw(n),h=[];e:{var f=vR.get(t);if(f!==void 0){var p=Kw,T=t;switch(t){case"keypress":if(tf(n)===0)break e;case"keydown":case"keyup":p=LV;break;case"focusin":T="focus",p=Ag;break;case"focusout":T="blur",p=Ag;break;case"beforeblur":case"afterblur":p=Ag;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=mT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=UV;break;case pR:case mR:case gR:p=xV;break;case yR:p=BV;break;case"scroll":p=TV;break;case"wheel":p=zV;break;case"copy":case"cut":case"paste":p=PV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=yT}var g=(e&4)!==0,v=!g&&t==="scroll",_=g?f!==null?f+"Capture":null:f;g=[];for(var y=c,w;y!==null;){w=y;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,_!==null&&(R=Mu(y,_),R!=null&&g.push(qu(y,R,w)))),v)break;y=y.return}0<g.length&&(f=new p(f,T,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==$y&&(T=n.relatedTarget||n.fromElement)&&(ko(T)||T[Ns]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(T=n.relatedTarget||n.toElement,p=c,T=T?ko(T):null,T!==null&&(v=wa(T),T!==v||T.tag!==5&&T.tag!==6)&&(T=null)):(p=null,T=c),p!==T)){if(g=mT,R="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=yT,R="onPointerLeave",_="onPointerEnter",y="pointer"),v=p==null?f:Xa(p),w=T==null?f:Xa(T),f=new g(R,y+"leave",p,n,d),f.target=v,f.relatedTarget=w,R=null,ko(d)===c&&(g=new g(_,y+"enter",T,n,d),g.target=w,g.relatedTarget=v,R=g),v=R,p&&T)t:{for(g=p,_=T,y=0,w=g;w;w=Pa(w))y++;for(w=0,R=_;R;R=Pa(R))w++;for(;0<y-w;)g=Pa(g),y--;for(;0<w-y;)_=Pa(_),w--;for(;y--;){if(g===_||_!==null&&g===_.alternate)break t;g=Pa(g),_=Pa(_)}g=null}else g=null;p!==null&&RT(h,f,p,g,!1),T!==null&&v!==null&&RT(h,v,T,g,!0)}}e:{if(f=c?Xa(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=YV;else if(_T(f))if(cR)k=eL;else{k=JV;var V=XV}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=ZV);if(k&&(k=k(t,c))){lR(h,k,n,d);break e}V&&V(t,f,c),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&My(f,"number",f.value)}switch(V=c?Xa(c):window,t){case"focusin":(_T(V)||V.contentEditable==="true")&&(Qa=V,Qy=c,gu=null);break;case"focusout":gu=Qy=Qa=null;break;case"mousedown":Yy=!0;break;case"contextmenu":case"mouseup":case"dragend":Yy=!1,bT(h,n,d);break;case"selectionchange":if(rL)break;case"keydown":case"keyup":bT(h,n,d)}var x;if(Qw)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ga?oR(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(iR&&n.locale!=="ko"&&(Ga||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ga&&(x=sR()):(bi=d,Hw="value"in bi?bi.value:bi.textContent,Ga=!0)),V=Lf(c,b),0<V.length&&(b=new gT(b,t,null,n,d),h.push({event:b,listeners:V}),x?b.data=x:(x=aR(n),x!==null&&(b.data=x)))),(x=WV?HV(t,n):KV(t,n))&&(c=Lf(c,"onBeforeInput"),0<c.length&&(d=new gT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=x))}wR(h,e)})}function qu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Mu(t,n),i!=null&&r.unshift(qu(t,i,s)),i=Mu(t,e),i!=null&&r.push(qu(t,i,s))),t=t.return}return r}function Pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function RT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Mu(n,i),l!=null&&o.unshift(qu(n,l,a))):s||(l=Mu(n,i),l!=null&&o.push(qu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aL=/\r\n?/g,lL=/\u0000|\uFFFD/g;function PT(t){return(typeof t=="string"?t:""+t).replace(aL,`
`).replace(lL,"")}function _h(t,e,n){if(e=PT(e),PT(t)!==e&&n)throw Error(Z(425))}function Mf(){}var Xy=null,Jy=null;function Zy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ev=typeof setTimeout=="function"?setTimeout:void 0,cL=typeof clearTimeout=="function"?clearTimeout:void 0,CT=typeof Promise=="function"?Promise:void 0,uL=typeof queueMicrotask=="function"?queueMicrotask:typeof CT<"u"?function(t){return CT.resolve(null).then(t).catch(dL)}:ev;function dL(t){setTimeout(function(){throw t})}function Og(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ju(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ju(e)}function Ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rc=Math.random().toString(36).slice(2),Yr="__reactFiber$"+rc,Wu="__reactProps$"+rc,Ns="__reactContainer$"+rc,tv="__reactEvents$"+rc,hL="__reactListeners$"+rc,fL="__reactHandles$"+rc;function ko(t){var e=t[Yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ns]||n[Yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kT(t);t!==null;){if(n=t[Yr])return n;t=kT(t)}return e}t=n,n=t.parentNode}return null}function Pd(t){return t=t[Yr]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Gp(t){return t[Wu]||null}var nv=[],Ja=-1;function so(t){return{current:t}}function at(t){0>Ja||(t.current=nv[Ja],nv[Ja]=null,Ja--)}function Ze(t,e){Ja++,nv[Ja]=t.current,t.current=e}var Hi={},mn=so(Hi),Mn=so(!1),na=Hi;function Al(t,e){var n=t.type.contextTypes;if(!n)return Hi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fn(t){return t=t.childContextTypes,t!=null}function Ff(){at(Mn),at(mn)}function DT(t,e,n){if(mn.current!==Hi)throw Error(Z(168));Ze(mn,e),Ze(Mn,n)}function ER(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,X2(t)||"Unknown",s));return mt({},n,r)}function Uf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hi,na=mn.current,Ze(mn,t),Ze(Mn,Mn.current),!0}function NT(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=ER(t,e,na),r.__reactInternalMemoizedMergedChildContext=t,at(Mn),at(mn),Ze(mn,t)):at(Mn),Ze(Mn,n)}var ws=null,Qp=!1,Vg=!1;function TR(t){ws===null?ws=[t]:ws.push(t)}function pL(t){Qp=!0,TR(t)}function io(){if(!Vg&&ws!==null){Vg=!0;var t=0,e=He;try{var n=ws;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ws=null,Qp=!1}catch(s){throw ws!==null&&(ws=ws.slice(t+1)),Kx($w,io),s}finally{He=e,Vg=!1}}return null}var Za=[],el=0,jf=null,Bf=0,ar=[],lr=0,ra=null,Is=1,Ss="";function _o(t,e){Za[el++]=Bf,Za[el++]=jf,jf=t,Bf=e}function IR(t,e,n){ar[lr++]=Is,ar[lr++]=Ss,ar[lr++]=ra,ra=t;var r=Is;t=Ss;var s=32-xr(r)-1;r&=~(1<<s),n+=1;var i=32-xr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Is=1<<32-xr(e)+s|n<<s|r,Ss=i+t}else Is=1<<i|n<<s|r,Ss=t}function Xw(t){t.return!==null&&(_o(t,1),IR(t,1,0))}function Jw(t){for(;t===jf;)jf=Za[--el],Za[el]=null,Bf=Za[--el],Za[el]=null;for(;t===ra;)ra=ar[--lr],ar[lr]=null,Ss=ar[--lr],ar[lr]=null,Is=ar[--lr],ar[lr]=null}var Xn=null,Gn=null,ut=!1,Sr=null;function SR(t,e){var n=cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function OT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Gn=Ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ra!==null?{id:Is,overflow:Ss}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Gn=null,!0):!1;default:return!1}}function rv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sv(t){if(ut){var e=Gn;if(e){var n=e;if(!OT(t,e)){if(rv(t))throw Error(Z(418));e=Ni(n.nextSibling);var r=Xn;e&&OT(t,e)?SR(r,n):(t.flags=t.flags&-4097|2,ut=!1,Xn=t)}}else{if(rv(t))throw Error(Z(418));t.flags=t.flags&-4097|2,ut=!1,Xn=t}}}function VT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function Eh(t){if(t!==Xn)return!1;if(!ut)return VT(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zy(t.type,t.memoizedProps)),e&&(e=Gn)){if(rv(t))throw bR(),Error(Z(418));for(;e;)SR(t,e),e=Ni(e.nextSibling)}if(VT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gn=Ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gn=null}}else Gn=Xn?Ni(t.stateNode.nextSibling):null;return!0}function bR(){for(var t=Gn;t;)t=Ni(t.nextSibling)}function xl(){Gn=Xn=null,ut=!1}function Zw(t){Sr===null?Sr=[t]:Sr.push(t)}var mL=zs.ReactCurrentBatchConfig;function $c(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Th(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LT(t){var e=t._init;return e(t._payload)}function AR(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Mi(_,y),_.index=0,_.sibling=null,_}function i(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,R){return y===null||y.tag!==6?(y=$g(w,_.mode,R),y.return=_,y):(y=s(y,w),y.return=_,y)}function l(_,y,w,R){var k=w.type;return k===Ka?d(_,y,w.props.children,R,w.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===hi&&LT(k)===y.type)?(R=s(y,w.props),R.ref=$c(_,y,w),R.return=_,R):(R=cf(w.type,w.key,w.props,null,_.mode,R),R.ref=$c(_,y,w),R.return=_,R)}function c(_,y,w,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=zg(w,_.mode,R),y.return=_,y):(y=s(y,w.children||[]),y.return=_,y)}function d(_,y,w,R,k){return y===null||y.tag!==7?(y=Yo(w,_.mode,R,k),y.return=_,y):(y=s(y,w),y.return=_,y)}function h(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$g(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case dh:return w=cf(y.type,y.key,y.props,null,_.mode,w),w.ref=$c(_,null,y),w.return=_,w;case Ha:return y=zg(y,_.mode,w),y.return=_,y;case hi:var R=y._init;return h(_,R(y._payload),w)}if(tu(y)||Mc(y))return y=Yo(y,_.mode,w,null),y.return=_,y;Th(_,y)}return null}function f(_,y,w,R){var k=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(_,y,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dh:return w.key===k?l(_,y,w,R):null;case Ha:return w.key===k?c(_,y,w,R):null;case hi:return k=w._init,f(_,y,k(w._payload),R)}if(tu(w)||Mc(w))return k!==null?null:d(_,y,w,R,null);Th(_,w)}return null}function p(_,y,w,R,k){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(w)||null,a(y,_,""+R,k);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case dh:return _=_.get(R.key===null?w:R.key)||null,l(y,_,R,k);case Ha:return _=_.get(R.key===null?w:R.key)||null,c(y,_,R,k);case hi:var V=R._init;return p(_,y,w,V(R._payload),k)}if(tu(R)||Mc(R))return _=_.get(w)||null,d(y,_,R,k,null);Th(y,R)}return null}function T(_,y,w,R){for(var k=null,V=null,x=y,b=y=0,A=null;x!==null&&b<w.length;b++){x.index>b?(A=x,x=null):A=x.sibling;var C=f(_,x,w[b],R);if(C===null){x===null&&(x=A);break}t&&x&&C.alternate===null&&e(_,x),y=i(C,y,b),V===null?k=C:V.sibling=C,V=C,x=A}if(b===w.length)return n(_,x),ut&&_o(_,b),k;if(x===null){for(;b<w.length;b++)x=h(_,w[b],R),x!==null&&(y=i(x,y,b),V===null?k=x:V.sibling=x,V=x);return ut&&_o(_,b),k}for(x=r(_,x);b<w.length;b++)A=p(x,_,b,w[b],R),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?b:A.key),y=i(A,y,b),V===null?k=A:V.sibling=A,V=A);return t&&x.forEach(function(N){return e(_,N)}),ut&&_o(_,b),k}function g(_,y,w,R){var k=Mc(w);if(typeof k!="function")throw Error(Z(150));if(w=k.call(w),w==null)throw Error(Z(151));for(var V=k=null,x=y,b=y=0,A=null,C=w.next();x!==null&&!C.done;b++,C=w.next()){x.index>b?(A=x,x=null):A=x.sibling;var N=f(_,x,C.value,R);if(N===null){x===null&&(x=A);break}t&&x&&N.alternate===null&&e(_,x),y=i(N,y,b),V===null?k=N:V.sibling=N,V=N,x=A}if(C.done)return n(_,x),ut&&_o(_,b),k;if(x===null){for(;!C.done;b++,C=w.next())C=h(_,C.value,R),C!==null&&(y=i(C,y,b),V===null?k=C:V.sibling=C,V=C);return ut&&_o(_,b),k}for(x=r(_,x);!C.done;b++,C=w.next())C=p(x,_,b,C.value,R),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?b:C.key),y=i(C,y,b),V===null?k=C:V.sibling=C,V=C);return t&&x.forEach(function(O){return e(_,O)}),ut&&_o(_,b),k}function v(_,y,w,R){if(typeof w=="object"&&w!==null&&w.type===Ka&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case dh:e:{for(var k=w.key,V=y;V!==null;){if(V.key===k){if(k=w.type,k===Ka){if(V.tag===7){n(_,V.sibling),y=s(V,w.props.children),y.return=_,_=y;break e}}else if(V.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===hi&&LT(k)===V.type){n(_,V.sibling),y=s(V,w.props),y.ref=$c(_,V,w),y.return=_,_=y;break e}n(_,V);break}else e(_,V);V=V.sibling}w.type===Ka?(y=Yo(w.props.children,_.mode,R,w.key),y.return=_,_=y):(R=cf(w.type,w.key,w.props,null,_.mode,R),R.ref=$c(_,y,w),R.return=_,_=R)}return o(_);case Ha:e:{for(V=w.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=s(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=zg(w,_.mode,R),y.return=_,_=y}return o(_);case hi:return V=w._init,v(_,y,V(w._payload),R)}if(tu(w))return T(_,y,w,R);if(Mc(w))return g(_,y,w,R);Th(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,w),y.return=_,_=y):(n(_,y),y=$g(w,_.mode,R),y.return=_,_=y),o(_)):n(_,y)}return v}var Rl=AR(!0),xR=AR(!1),$f=so(null),zf=null,tl=null,e_=null;function t_(){e_=tl=zf=null}function n_(t){var e=$f.current;at($f),t._currentValue=e}function iv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cl(t,e){zf=t,e_=tl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function hr(t){var e=t._currentValue;if(e_!==t)if(t={context:t,memoizedValue:e,next:null},tl===null){if(zf===null)throw Error(Z(308));tl=t,zf.dependencies={lanes:0,firstContext:t}}else tl=tl.next=t;return e}var Do=null;function r_(t){Do===null?Do=[t]:Do.push(t)}function RR(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,r_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Os(t,r)}function Os(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fi=!1;function s_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Os(t,n)}return s=r.interleaved,s===null?(e.next=e,r_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Os(t,n)}function nf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zw(t,n)}}function MT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qf(t,e,n,r){var s=t.updateQueue;fi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,g=a;switch(f=e,p=n,g.tag){case 1:if(T=g.payload,typeof T=="function"){h=T.call(p,h,f);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=g.payload,f=typeof T=="function"?T.call(p,h,f):T,f==null)break e;h=mt({},h,f);break e;case 2:fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ia|=o,t.lanes=o,t.memoizedState=h}}function FT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var Cd={},rs=so(Cd),Hu=so(Cd),Ku=so(Cd);function No(t){if(t===Cd)throw Error(Z(174));return t}function i_(t,e){switch(Ze(Ku,e),Ze(Hu,t),Ze(rs,Cd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uy(e,t)}at(rs),Ze(rs,e)}function Pl(){at(rs),at(Hu),at(Ku)}function CR(t){No(Ku.current);var e=No(rs.current),n=Uy(e,t.type);e!==n&&(Ze(Hu,t),Ze(rs,n))}function o_(t){Hu.current===t&&(at(rs),at(Hu))}var ft=so(0);function Wf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lg=[];function a_(){for(var t=0;t<Lg.length;t++)Lg[t]._workInProgressVersionPrimary=null;Lg.length=0}var rf=zs.ReactCurrentDispatcher,Mg=zs.ReactCurrentBatchConfig,sa=0,pt=null,jt=null,Kt=null,Hf=!1,yu=!1,Gu=0,gL=0;function sn(){throw Error(Z(321))}function l_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kr(t[n],e[n]))return!1;return!0}function c_(t,e,n,r,s,i){if(sa=i,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rf.current=t===null||t.memoizedState===null?_L:EL,t=n(r,s),yu){i=0;do{if(yu=!1,Gu=0,25<=i)throw Error(Z(301));i+=1,Kt=jt=null,e.updateQueue=null,rf.current=TL,t=n(r,s)}while(yu)}if(rf.current=Kf,e=jt!==null&&jt.next!==null,sa=0,Kt=jt=pt=null,Hf=!1,e)throw Error(Z(300));return t}function u_(){var t=Gu!==0;return Gu=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?pt.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function fr(){if(jt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Kt===null?pt.memoizedState:Kt.next;if(e!==null)Kt=e,jt=t;else{if(t===null)throw Error(Z(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Kt===null?pt.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function Qu(t,e){return typeof e=="function"?e(t):e}function Fg(t){var e=fr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=jt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((sa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,pt.lanes|=d,ia|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,kr(r,e.memoizedState)||(Nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pt.lanes|=i,ia|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ug(t){var e=fr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);kr(i,e.memoizedState)||(Nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function kR(){}function DR(t,e){var n=pt,r=fr(),s=e(),i=!kr(r.memoizedState,s);if(i&&(r.memoizedState=s,Nn=!0),r=r.queue,d_(VR.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Kt!==null&&Kt.memoizedState.tag&1){if(n.flags|=2048,Yu(9,OR.bind(null,n,r,s,e),void 0,null),Qt===null)throw Error(Z(349));sa&30||NR(n,e,s)}return s}function NR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OR(t,e,n,r){e.value=n,e.getSnapshot=r,LR(e)&&MR(t)}function VR(t,e,n){return n(function(){LR(e)&&MR(t)})}function LR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kr(t,n)}catch{return!0}}function MR(t){var e=Os(t,1);e!==null&&Rr(e,t,1,-1)}function UT(t){var e=qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},e.queue=t,t=t.dispatch=wL.bind(null,pt,t),[e.memoizedState,t]}function Yu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function FR(){return fr().memoizedState}function sf(t,e,n,r){var s=qr();pt.flags|=t,s.memoizedState=Yu(1|e,n,void 0,r===void 0?null:r)}function Yp(t,e,n,r){var s=fr();r=r===void 0?null:r;var i=void 0;if(jt!==null){var o=jt.memoizedState;if(i=o.destroy,r!==null&&l_(r,o.deps)){s.memoizedState=Yu(e,n,i,r);return}}pt.flags|=t,s.memoizedState=Yu(1|e,n,i,r)}function jT(t,e){return sf(8390656,8,t,e)}function d_(t,e){return Yp(2048,8,t,e)}function UR(t,e){return Yp(4,2,t,e)}function jR(t,e){return Yp(4,4,t,e)}function BR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $R(t,e,n){return n=n!=null?n.concat([t]):null,Yp(4,4,BR.bind(null,e,t),n)}function h_(){}function zR(t,e){var n=fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&l_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qR(t,e){var n=fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&l_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function WR(t,e,n){return sa&21?(kr(n,e)||(n=Yx(),pt.lanes|=n,ia|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function yL(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=Mg.transition;Mg.transition={};try{t(!1),e()}finally{He=n,Mg.transition=r}}function HR(){return fr().memoizedState}function vL(t,e,n){var r=Li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KR(t))GR(e,n);else if(n=RR(t,e,n,r),n!==null){var s=Tn();Rr(n,t,r,s),QR(n,e,r)}}function wL(t,e,n){var r=Li(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KR(t))GR(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,kr(a,o)){var l=e.interleaved;l===null?(s.next=s,r_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=RR(t,e,s,r),n!==null&&(s=Tn(),Rr(n,t,r,s),QR(n,e,r))}}function KR(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function GR(t,e){yu=Hf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zw(t,n)}}var Kf={readContext:hr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},_L={readContext:hr,useCallback:function(t,e){return qr().memoizedState=[t,e===void 0?null:e],t},useContext:hr,useEffect:jT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sf(4194308,4,BR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sf(4194308,4,t,e)},useInsertionEffect:function(t,e){return sf(4,2,t,e)},useMemo:function(t,e){var n=qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vL.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var e=qr();return t={current:t},e.memoizedState=t},useState:UT,useDebugValue:h_,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=UT(!1),e=t[0];return t=yL.bind(null,t[1]),qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pt,s=qr();if(ut){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Qt===null)throw Error(Z(349));sa&30||NR(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,jT(VR.bind(null,r,i,t),[t]),r.flags|=2048,Yu(9,OR.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qr(),e=Qt.identifierPrefix;if(ut){var n=Ss,r=Is;n=(r&~(1<<32-xr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EL={readContext:hr,useCallback:zR,useContext:hr,useEffect:d_,useImperativeHandle:$R,useInsertionEffect:UR,useLayoutEffect:jR,useMemo:qR,useReducer:Fg,useRef:FR,useState:function(){return Fg(Qu)},useDebugValue:h_,useDeferredValue:function(t){var e=fr();return WR(e,jt.memoizedState,t)},useTransition:function(){var t=Fg(Qu)[0],e=fr().memoizedState;return[t,e]},useMutableSource:kR,useSyncExternalStore:DR,useId:HR,unstable_isNewReconciler:!1},TL={readContext:hr,useCallback:zR,useContext:hr,useEffect:d_,useImperativeHandle:$R,useInsertionEffect:UR,useLayoutEffect:jR,useMemo:qR,useReducer:Ug,useRef:FR,useState:function(){return Ug(Qu)},useDebugValue:h_,useDeferredValue:function(t){var e=fr();return jt===null?e.memoizedState=t:WR(e,jt.memoizedState,t)},useTransition:function(){var t=Ug(Qu)[0],e=fr().memoizedState;return[t,e]},useMutableSource:kR,useSyncExternalStore:DR,useId:HR,unstable_isNewReconciler:!1};function vr(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ov(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xp={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tn(),s=Li(t),i=xs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Oi(t,i,s),e!==null&&(Rr(e,t,s,r),nf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tn(),s=Li(t),i=xs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Oi(t,i,s),e!==null&&(Rr(e,t,s,r),nf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tn(),r=Li(t),s=xs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Oi(t,s,r),e!==null&&(Rr(e,t,r,n),nf(e,t,r))}};function BT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!$u(n,r)||!$u(s,i):!0}function YR(t,e,n){var r=!1,s=Hi,i=e.contextType;return typeof i=="object"&&i!==null?i=hr(i):(s=Fn(e)?na:mn.current,r=e.contextTypes,i=(r=r!=null)?Al(t,s):Hi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $T(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xp.enqueueReplaceState(e,e.state,null)}function av(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},s_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=hr(i):(i=Fn(e)?na:mn.current,s.context=Al(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ov(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xp.enqueueReplaceState(s,s.state,null),qf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cl(t,e){try{var n="",r=e;do n+=Y2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IL=typeof WeakMap=="function"?WeakMap:Map;function XR(t,e,n){n=xs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qf||(Qf=!0,vv=r),lv(t,e)},n}function JR(t,e,n){n=xs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lv(t,e),typeof r!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IL;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ML.bind(null,t,e,n),e.then(t,t))}function qT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xs(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var SL=zs.ReactCurrentOwner,Nn=!1;function _n(t,e,n,r){e.child=t===null?xR(e,null,n,r):Rl(e,t.child,n,r)}function HT(t,e,n,r,s){n=n.render;var i=e.ref;return cl(e,s),r=c_(t,e,n,r,i,s),n=u_(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vs(t,e,s)):(ut&&n&&Xw(e),e.flags|=1,_n(t,e,r,s),e.child)}function KT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!__(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ZR(t,e,i,r,s)):(t=cf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:$u,n(o,r)&&t.ref===e.ref)return Vs(t,e,s)}return e.flags|=1,t=Mi(i,r),t.ref=e.ref,t.return=e,e.child=t}function ZR(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if($u(i,r)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,Vs(t,e,s)}return cv(t,e,n,r,s)}function e1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(rl,zn),zn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(rl,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ze(rl,zn),zn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ze(rl,zn),zn|=r;return _n(t,e,s,n),e.child}function t1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cv(t,e,n,r,s){var i=Fn(n)?na:mn.current;return i=Al(e,i),cl(e,s),n=c_(t,e,n,r,i,s),r=u_(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vs(t,e,s)):(ut&&r&&Xw(e),e.flags|=1,_n(t,e,n,s),e.child)}function GT(t,e,n,r,s){if(Fn(n)){var i=!0;Uf(e)}else i=!1;if(cl(e,s),e.stateNode===null)of(t,e),YR(e,n,r),av(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=hr(c):(c=Fn(n)?na:mn.current,c=Al(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$T(e,o,r,c),fi=!1;var f=e.memoizedState;o.state=f,qf(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Mn.current||fi?(typeof d=="function"&&(ov(e,n,d,r),l=e.memoizedState),(a=fi||BT(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,PR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vr(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=hr(l):(l=Fn(n)?na:mn.current,l=Al(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&$T(e,o,r,l),fi=!1,f=e.memoizedState,o.state=f,qf(e,r,o,s);var T=e.memoizedState;a!==h||f!==T||Mn.current||fi?(typeof p=="function"&&(ov(e,n,p,r),T=e.memoizedState),(c=fi||BT(e,n,c,r,f,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return uv(t,e,n,r,i,s)}function uv(t,e,n,r,s,i){t1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&NT(e,n,!1),Vs(t,e,i);r=e.stateNode,SL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Rl(e,t.child,null,i),e.child=Rl(e,null,a,i)):_n(t,e,a,i),e.memoizedState=r.state,s&&NT(e,n,!0),e.child}function n1(t){var e=t.stateNode;e.pendingContext?DT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&DT(t,e.context,!1),i_(t,e.containerInfo)}function QT(t,e,n,r,s){return xl(),Zw(s),e.flags|=256,_n(t,e,n,r),e.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function hv(t){return{baseLanes:t,cachePool:null,transitions:null}}function r1(t,e,n){var r=e.pendingProps,s=ft.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ze(ft,s&1),t===null)return sv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=em(o,r,0,null),t=Yo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hv(n),e.memoizedState=dv,t):f_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return bL(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Mi(a,i):(i=Yo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dv,r}return i=t.child,t=i.sibling,r=Mi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function f_(t,e){return e=em({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ih(t,e,n,r){return r!==null&&Zw(r),Rl(e,t.child,null,n),t=f_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bL(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jg(Error(Z(422))),Ih(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=em({mode:"visible",children:r.children},s,0,null),i=Yo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Rl(e,t.child,null,o),e.child.memoizedState=hv(o),e.memoizedState=dv,i);if(!(e.mode&1))return Ih(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Z(419)),r=jg(i,r,void 0),Ih(t,e,o,r)}if(a=(o&t.childLanes)!==0,Nn||a){if(r=Qt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Os(t,s),Rr(r,t,s,-1))}return w_(),r=jg(Error(Z(421))),Ih(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=FL.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Gn=Ni(s.nextSibling),Xn=e,ut=!0,Sr=null,t!==null&&(ar[lr++]=Is,ar[lr++]=Ss,ar[lr++]=ra,Is=t.id,Ss=t.overflow,ra=e),e=f_(e,r.children),e.flags|=4096,e)}function YT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iv(t.return,e,n)}function Bg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function s1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_n(t,e,r.children,n),r=ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&YT(t,n,e);else if(t.tag===19)YT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ze(ft,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Wf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bg(e,!0,n,null,i);break;case"together":Bg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function of(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ia|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Mi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AL(t,e,n){switch(e.tag){case 3:n1(e),xl();break;case 5:CR(e);break;case 1:Fn(e.type)&&Uf(e);break;case 4:i_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ze($f,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ze(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?r1(t,e,n):(Ze(ft,ft.current&1),t=Vs(t,e,n),t!==null?t.sibling:null);Ze(ft,ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ze(ft,ft.current),r)break;return null;case 22:case 23:return e.lanes=0,e1(t,e,n)}return Vs(t,e,n)}var i1,fv,o1,a1;i1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fv=function(){};o1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,No(rs.current);var i=null;switch(n){case"input":s=Vy(t,s),r=Vy(t,r),i=[];break;case"select":s=mt({},s,{value:void 0}),r=mt({},r,{value:void 0}),i=[];break;case"textarea":s=Fy(t,s),r=Fy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mf)}jy(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Vu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Vu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ot("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};a1=function(t,e,n,r){n!==r&&(e.flags|=4)};function zc(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function on(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xL(t,e,n){var r=e.pendingProps;switch(Jw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(e),null;case 1:return Fn(e.type)&&Ff(),on(e),null;case 3:return r=e.stateNode,Pl(),at(Mn),at(mn),a_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sr!==null&&(Ev(Sr),Sr=null))),fv(t,e),on(e),null;case 5:o_(e);var s=No(Ku.current);if(n=e.type,t!==null&&e.stateNode!=null)o1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return on(e),null}if(t=No(rs.current),Eh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yr]=e,r[Wu]=i,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(s=0;s<ru.length;s++)ot(ru[s],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":iT(r,i),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ot("invalid",r);break;case"textarea":aT(r,i),ot("invalid",r)}jy(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&_h(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&_h(r.textContent,a,t),s=["children",""+a]):Vu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ot("scroll",r)}switch(n){case"input":hh(r),oT(r,i,!0);break;case"textarea":hh(r),lT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yr]=e,t[Wu]=r,i1(t,e,!1,!1),e.stateNode=t;e:{switch(o=By(n,r),n){case"dialog":ot("cancel",t),ot("close",t),s=r;break;case"iframe":case"object":case"embed":ot("load",t),s=r;break;case"video":case"audio":for(s=0;s<ru.length;s++)ot(ru[s],t);s=r;break;case"source":ot("error",t),s=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),s=r;break;case"details":ot("toggle",t),s=r;break;case"input":iT(t,r),s=Vy(t,r),ot("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=mt({},r,{value:void 0}),ot("invalid",t);break;case"textarea":aT(t,r),s=Fy(t,r),ot("invalid",t);break;default:s=r}jy(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Fx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lu(t,l):typeof l=="number"&&Lu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ot("scroll",t):l!=null&&Mw(t,i,l,o))}switch(n){case"input":hh(t),oT(t,r,!1);break;case"textarea":hh(t),lT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?il(t,!!r.multiple,i,!1):r.defaultValue!=null&&il(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Mf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return on(e),null;case 6:if(t&&e.stateNode!=null)a1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=No(Ku.current),No(rs.current),Eh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yr]=e,(i=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:_h(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_h(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yr]=e,e.stateNode=r}return on(e),null;case 13:if(at(ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&Gn!==null&&e.mode&1&&!(e.flags&128))bR(),xl(),e.flags|=98560,i=!1;else if(i=Eh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[Yr]=e}else xl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;on(e),i=!1}else Sr!==null&&(Ev(Sr),Sr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Bt===0&&(Bt=3):w_())),e.updateQueue!==null&&(e.flags|=4),on(e),null);case 4:return Pl(),fv(t,e),t===null&&zu(e.stateNode.containerInfo),on(e),null;case 10:return n_(e.type._context),on(e),null;case 17:return Fn(e.type)&&Ff(),on(e),null;case 19:if(at(ft),i=e.memoizedState,i===null)return on(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)zc(i,!1);else{if(Bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wf(t),o!==null){for(e.flags|=128,zc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(ft,ft.current&1|2),e.child}t=t.sibling}i.tail!==null&&At()>kl&&(e.flags|=128,r=!0,zc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Wf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ut)return on(e),null}else 2*At()-i.renderingStartTime>kl&&n!==1073741824&&(e.flags|=128,r=!0,zc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=At(),e.sibling=null,n=ft.current,Ze(ft,r?n&1|2:n&1),e):(on(e),null);case 22:case 23:return v_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zn&1073741824&&(on(e),e.subtreeFlags&6&&(e.flags|=8192)):on(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function RL(t,e){switch(Jw(e),e.tag){case 1:return Fn(e.type)&&Ff(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pl(),at(Mn),at(mn),a_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return o_(e),null;case 13:if(at(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));xl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(ft),null;case 4:return Pl(),null;case 10:return n_(e.type._context),null;case 22:case 23:return v_(),null;case 24:return null;default:return null}}var Sh=!1,dn=!1,PL=typeof WeakSet=="function"?WeakSet:Set,ae=null;function nl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function pv(t,e,n){try{n()}catch(r){_t(t,e,r)}}var XT=!1;function CL(t,e){if(Xy=Of,t=hR(),Yw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jy={focusedElem:t,selectionRange:n},Of=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var g=T.memoizedProps,v=T.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?g:vr(e.type,g),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(R){_t(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return T=XT,XT=!1,T}function vu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pv(e,n,i)}s=s.next}while(s!==r)}}function Jp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l1(t){var e=t.alternate;e!==null&&(t.alternate=null,l1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yr],delete e[Wu],delete e[tv],delete e[hL],delete e[fL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c1(t){return t.tag===5||t.tag===3||t.tag===4}function JT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mf));else if(r!==4&&(t=t.child,t!==null))for(gv(t,e,n),t=t.sibling;t!==null;)gv(t,e,n),t=t.sibling}function yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yv(t,e,n),t=t.sibling;t!==null;)yv(t,e,n),t=t.sibling}var Yt=null,Tr=!1;function ri(t,e,n){for(n=n.child;n!==null;)u1(t,e,n),n=n.sibling}function u1(t,e,n){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(qp,n)}catch{}switch(n.tag){case 5:dn||nl(n,e);case 6:var r=Yt,s=Tr;Yt=null,ri(t,e,n),Yt=r,Tr=s,Yt!==null&&(Tr?(t=Yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(Tr?(t=Yt,n=n.stateNode,t.nodeType===8?Og(t.parentNode,n):t.nodeType===1&&Og(t,n),ju(t)):Og(Yt,n.stateNode));break;case 4:r=Yt,s=Tr,Yt=n.stateNode.containerInfo,Tr=!0,ri(t,e,n),Yt=r,Tr=s;break;case 0:case 11:case 14:case 15:if(!dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pv(n,e,o),s=s.next}while(s!==r)}ri(t,e,n);break;case 1:if(!dn&&(nl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_t(n,e,a)}ri(t,e,n);break;case 21:ri(t,e,n);break;case 22:n.mode&1?(dn=(r=dn)||n.memoizedState!==null,ri(t,e,n),dn=r):ri(t,e,n);break;default:ri(t,e,n)}}function ZT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PL),e.forEach(function(r){var s=UL.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,Tr=!1;break e;case 3:Yt=a.stateNode.containerInfo,Tr=!0;break e;case 4:Yt=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(Yt===null)throw Error(Z(160));u1(i,o,s),Yt=null,Tr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){_t(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d1(e,t),e=e.sibling}function d1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gr(e,t),zr(t),r&4){try{vu(3,t,t.return),Jp(3,t)}catch(g){_t(t,t.return,g)}try{vu(5,t,t.return)}catch(g){_t(t,t.return,g)}}break;case 1:gr(e,t),zr(t),r&512&&n!==null&&nl(n,n.return);break;case 5:if(gr(e,t),zr(t),r&512&&n!==null&&nl(n,n.return),t.flags&32){var s=t.stateNode;try{Lu(s,"")}catch(g){_t(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Nx(s,i),By(a,o);var c=By(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Fx(s,h):d==="dangerouslySetInnerHTML"?Lx(s,h):d==="children"?Lu(s,h):Mw(s,d,h,c)}switch(a){case"input":Ly(s,i);break;case"textarea":Ox(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?il(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?il(s,!!i.multiple,i.defaultValue,!0):il(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wu]=i}catch(g){_t(t,t.return,g)}}break;case 6:if(gr(e,t),zr(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){_t(t,t.return,g)}}break;case 3:if(gr(e,t),zr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ju(e.containerInfo)}catch(g){_t(t,t.return,g)}break;case 4:gr(e,t),zr(t);break;case 13:gr(e,t),zr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(g_=At())),r&4&&ZT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(dn=(c=dn)||d,gr(e,t),dn=c):gr(e,t),zr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ae=t,d=t.child;d!==null;){for(h=ae=d;ae!==null;){switch(f=ae,p=f.child,f.tag){case 0:case 11:case 14:case 15:vu(4,f,f.return);break;case 1:nl(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(g){_t(r,n,g)}}break;case 5:nl(f,f.return);break;case 22:if(f.memoizedState!==null){tI(h);continue}}p!==null?(p.return=f,ae=p):tI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Mx("display",o))}catch(g){_t(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){_t(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gr(e,t),zr(t),r&4&&ZT(t);break;case 21:break;default:gr(e,t),zr(t)}}function zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c1(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lu(s,""),r.flags&=-33);var i=JT(t);yv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=JT(t);gv(t,a,o);break;default:throw Error(Z(161))}}catch(l){_t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kL(t,e,n){ae=t,h1(t)}function h1(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||dn;a=Sh;var c=dn;if(Sh=o,(dn=l)&&!c)for(ae=s;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?nI(s):l!==null?(l.return=o,ae=l):nI(s);for(;i!==null;)ae=i,h1(i),i=i.sibling;ae=s,Sh=a,dn=c}eI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):eI(t)}}function eI(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||Jp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:vr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&FT(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ju(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}dn||e.flags&512&&mv(e)}catch(f){_t(e,e.return,f)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function tI(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function nI(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jp(4,e)}catch(l){_t(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){_t(e,s,l)}}var i=e.return;try{mv(e)}catch(l){_t(e,i,l)}break;case 5:var o=e.return;try{mv(e)}catch(l){_t(e,o,l)}}}catch(l){_t(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var DL=Math.ceil,Gf=zs.ReactCurrentDispatcher,p_=zs.ReactCurrentOwner,ur=zs.ReactCurrentBatchConfig,Be=0,Qt=null,Nt=null,Jt=0,zn=0,rl=so(0),Bt=0,Xu=null,ia=0,Zp=0,m_=0,wu=null,Dn=null,g_=0,kl=1/0,vs=null,Qf=!1,vv=null,Vi=null,bh=!1,Ai=null,Yf=0,_u=0,wv=null,af=-1,lf=0;function Tn(){return Be&6?At():af!==-1?af:af=At()}function Li(t){return t.mode&1?Be&2&&Jt!==0?Jt&-Jt:mL.transition!==null?(lf===0&&(lf=Yx()),lf):(t=He,t!==0||(t=window.event,t=t===void 0?16:rR(t.type)),t):1}function Rr(t,e,n,r){if(50<_u)throw _u=0,wv=null,Error(Z(185));xd(t,n,r),(!(Be&2)||t!==Qt)&&(t===Qt&&(!(Be&2)&&(Zp|=n),Bt===4&&mi(t,Jt)),Un(t,r),n===1&&Be===0&&!(e.mode&1)&&(kl=At()+500,Qp&&io()))}function Un(t,e){var n=t.callbackNode;mV(t,e);var r=Nf(t,t===Qt?Jt:0);if(r===0)n!==null&&dT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dT(n),e===1)t.tag===0?pL(rI.bind(null,t)):TR(rI.bind(null,t)),uL(function(){!(Be&6)&&io()}),n=null;else{switch(Xx(r)){case 1:n=$w;break;case 4:n=Gx;break;case 16:n=Df;break;case 536870912:n=Qx;break;default:n=Df}n=_1(n,f1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function f1(t,e){if(af=-1,lf=0,Be&6)throw Error(Z(327));var n=t.callbackNode;if(ul()&&t.callbackNode!==n)return null;var r=Nf(t,t===Qt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xf(t,r);else{e=r;var s=Be;Be|=2;var i=m1();(Qt!==t||Jt!==e)&&(vs=null,kl=At()+500,Qo(t,e));do try{VL();break}catch(a){p1(t,a)}while(!0);t_(),Gf.current=i,Be=s,Nt!==null?e=0:(Qt=null,Jt=0,e=Bt)}if(e!==0){if(e===2&&(s=Hy(t),s!==0&&(r=s,e=_v(t,s))),e===1)throw n=Xu,Qo(t,0),mi(t,r),Un(t,At()),n;if(e===6)mi(t,r);else{if(s=t.current.alternate,!(r&30)&&!NL(s)&&(e=Xf(t,r),e===2&&(i=Hy(t),i!==0&&(r=i,e=_v(t,i))),e===1))throw n=Xu,Qo(t,0),mi(t,r),Un(t,At()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Eo(t,Dn,vs);break;case 3:if(mi(t,r),(r&130023424)===r&&(e=g_+500-At(),10<e)){if(Nf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ev(Eo.bind(null,t,Dn,vs),e);break}Eo(t,Dn,vs);break;case 4:if(mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DL(r/1960))-r,10<r){t.timeoutHandle=ev(Eo.bind(null,t,Dn,vs),r);break}Eo(t,Dn,vs);break;case 5:Eo(t,Dn,vs);break;default:throw Error(Z(329))}}}return Un(t,At()),t.callbackNode===n?f1.bind(null,t):null}function _v(t,e){var n=wu;return t.current.memoizedState.isDehydrated&&(Qo(t,e).flags|=256),t=Xf(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&Ev(e)),t}function Ev(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function NL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!kr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~m_,e&=~Zp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xr(e),r=1<<n;t[n]=-1,e&=~r}}function rI(t){if(Be&6)throw Error(Z(327));ul();var e=Nf(t,0);if(!(e&1))return Un(t,At()),null;var n=Xf(t,e);if(t.tag!==0&&n===2){var r=Hy(t);r!==0&&(e=r,n=_v(t,r))}if(n===1)throw n=Xu,Qo(t,0),mi(t,e),Un(t,At()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eo(t,Dn,vs),Un(t,At()),null}function y_(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(kl=At()+500,Qp&&io())}}function oa(t){Ai!==null&&Ai.tag===0&&!(Be&6)&&ul();var e=Be;Be|=1;var n=ur.transition,r=He;try{if(ur.transition=null,He=1,t)return t()}finally{He=r,ur.transition=n,Be=e,!(Be&6)&&io()}}function v_(){zn=rl.current,at(rl)}function Qo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cL(n)),Nt!==null)for(n=Nt.return;n!==null;){var r=n;switch(Jw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ff();break;case 3:Pl(),at(Mn),at(mn),a_();break;case 5:o_(r);break;case 4:Pl();break;case 13:at(ft);break;case 19:at(ft);break;case 10:n_(r.type._context);break;case 22:case 23:v_()}n=n.return}if(Qt=t,Nt=t=Mi(t.current,null),Jt=zn=e,Bt=0,Xu=null,m_=Zp=ia=0,Dn=wu=null,Do!==null){for(e=0;e<Do.length;e++)if(n=Do[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Do=null}return t}function p1(t,e){do{var n=Nt;try{if(t_(),rf.current=Kf,Hf){for(var r=pt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hf=!1}if(sa=0,Kt=jt=pt=null,yu=!1,Gu=0,p_.current=null,n===null||n.return===null){Bt=1,Xu=e,Nt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=qT(o);if(p!==null){p.flags&=-257,WT(p,o,a,i,e),p.mode&1&&zT(i,c,e),e=p,l=c;var T=e.updateQueue;if(T===null){var g=new Set;g.add(l),e.updateQueue=g}else T.add(l);break e}else{if(!(e&1)){zT(i,c,e),w_();break e}l=Error(Z(426))}}else if(ut&&a.mode&1){var v=qT(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),WT(v,o,a,i,e),Zw(Cl(l,a));break e}}i=l=Cl(l,a),Bt!==4&&(Bt=2),wu===null?wu=[i]:wu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=XR(i,l,e);MT(i,_);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Vi===null||!Vi.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=JR(i,a,e);MT(i,R);break e}}i=i.return}while(i!==null)}y1(n)}catch(k){e=k,Nt===n&&n!==null&&(Nt=n=n.return);continue}break}while(!0)}function m1(){var t=Gf.current;return Gf.current=Kf,t===null?Kf:t}function w_(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Qt===null||!(ia&268435455)&&!(Zp&268435455)||mi(Qt,Jt)}function Xf(t,e){var n=Be;Be|=2;var r=m1();(Qt!==t||Jt!==e)&&(vs=null,Qo(t,e));do try{OL();break}catch(s){p1(t,s)}while(!0);if(t_(),Be=n,Gf.current=r,Nt!==null)throw Error(Z(261));return Qt=null,Jt=0,Bt}function OL(){for(;Nt!==null;)g1(Nt)}function VL(){for(;Nt!==null&&!oV();)g1(Nt)}function g1(t){var e=w1(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?y1(t):Nt=e,p_.current=null}function y1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RL(n,e),n!==null){n.flags&=32767,Nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,Nt=null;return}}else if(n=xL(n,e,zn),n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Bt===0&&(Bt=5)}function Eo(t,e,n){var r=He,s=ur.transition;try{ur.transition=null,He=1,LL(t,e,n,r)}finally{ur.transition=s,He=r}return null}function LL(t,e,n,r){do ul();while(Ai!==null);if(Be&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gV(t,i),t===Qt&&(Nt=Qt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bh||(bh=!0,_1(Df,function(){return ul(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ur.transition,ur.transition=null;var o=He;He=1;var a=Be;Be|=4,p_.current=null,CL(t,n),d1(n,t),nL(Jy),Of=!!Xy,Jy=Xy=null,t.current=n,kL(n),aV(),Be=a,He=o,ur.transition=i}else t.current=n;if(bh&&(bh=!1,Ai=t,Yf=s),i=t.pendingLanes,i===0&&(Vi=null),uV(n.stateNode),Un(t,At()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qf)throw Qf=!1,t=vv,vv=null,t;return Yf&1&&t.tag!==0&&ul(),i=t.pendingLanes,i&1?t===wv?_u++:(_u=0,wv=t):_u=0,io(),null}function ul(){if(Ai!==null){var t=Xx(Yf),e=ur.transition,n=He;try{if(ur.transition=null,He=16>t?16:t,Ai===null)var r=!1;else{if(t=Ai,Ai=null,Yf=0,Be&6)throw Error(Z(331));var s=Be;for(Be|=4,ae=t.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:vu(8,d,i)}var h=d.child;if(h!==null)h.return=d,ae=h;else for(;ae!==null;){d=ae;var f=d.sibling,p=d.return;if(l1(d),d===c){ae=null;break}if(f!==null){f.return=p,ae=f;break}ae=p}}}var T=i.alternate;if(T!==null){var g=T.child;if(g!==null){T.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vu(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ae=_;break e}ae=i.return}}var y=t.current;for(ae=y;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=y;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jp(9,a)}}catch(k){_t(a,a.return,k)}if(a===o){ae=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ae=R;break e}ae=a.return}}if(Be=s,io(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(qp,t)}catch{}r=!0}return r}finally{He=n,ur.transition=e}}return!1}function sI(t,e,n){e=Cl(n,e),e=XR(t,e,1),t=Oi(t,e,1),e=Tn(),t!==null&&(xd(t,1,e),Un(t,e))}function _t(t,e,n){if(t.tag===3)sI(t,t,n);else for(;e!==null;){if(e.tag===3){sI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vi===null||!Vi.has(r))){t=Cl(n,t),t=JR(e,t,1),e=Oi(e,t,1),t=Tn(),e!==null&&(xd(e,1,t),Un(e,t));break}}e=e.return}}function ML(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(Jt&n)===n&&(Bt===4||Bt===3&&(Jt&130023424)===Jt&&500>At()-g_?Qo(t,0):m_|=n),Un(t,e)}function v1(t,e){e===0&&(t.mode&1?(e=mh,mh<<=1,!(mh&130023424)&&(mh=4194304)):e=1);var n=Tn();t=Os(t,e),t!==null&&(xd(t,e,n),Un(t,n))}function FL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),v1(t,n)}function UL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),v1(t,n)}var w1;w1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mn.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,AL(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,ut&&e.flags&1048576&&IR(e,Bf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;of(t,e),t=e.pendingProps;var s=Al(e,mn.current);cl(e,n),s=c_(null,e,r,t,s,n);var i=u_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(r)?(i=!0,Uf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s_(e),s.updater=Xp,e.stateNode=s,s._reactInternals=e,av(e,r,t,n),e=uv(null,e,r,!0,i,n)):(e.tag=0,ut&&i&&Xw(e),_n(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(of(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=BL(r),t=vr(r,t),s){case 0:e=cv(null,e,r,t,n);break e;case 1:e=GT(null,e,r,t,n);break e;case 11:e=HT(null,e,r,t,n);break e;case 14:e=KT(null,e,r,vr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),cv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),GT(t,e,r,s,n);case 3:e:{if(n1(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,PR(t,e),qf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cl(Error(Z(423)),e),e=QT(t,e,r,n,s);break e}else if(r!==s){s=Cl(Error(Z(424)),e),e=QT(t,e,r,n,s);break e}else for(Gn=Ni(e.stateNode.containerInfo.firstChild),Xn=e,ut=!0,Sr=null,n=xR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xl(),r===s){e=Vs(t,e,n);break e}_n(t,e,r,n)}e=e.child}return e;case 5:return CR(e),t===null&&sv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zy(r,s)?o=null:i!==null&&Zy(r,i)&&(e.flags|=32),t1(t,e),_n(t,e,o,n),e.child;case 6:return t===null&&sv(e),null;case 13:return r1(t,e,n);case 4:return i_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rl(e,null,r,n):_n(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),HT(t,e,r,s,n);case 7:return _n(t,e,e.pendingProps,n),e.child;case 8:return _n(t,e,e.pendingProps.children,n),e.child;case 12:return _n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ze($f,r._currentValue),r._currentValue=o,i!==null)if(kr(i.value,o)){if(i.children===s.children&&!Mn.current){e=Vs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=xs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),iv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_n(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,cl(e,n),s=hr(s),r=r(s),e.flags|=1,_n(t,e,r,n),e.child;case 14:return r=e.type,s=vr(r,e.pendingProps),s=vr(r.type,s),KT(t,e,r,s,n);case 15:return ZR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),of(t,e),e.tag=1,Fn(r)?(t=!0,Uf(e)):t=!1,cl(e,n),YR(e,r,s),av(e,r,s,n),uv(null,e,r,!0,t,n);case 19:return s1(t,e,n);case 22:return e1(t,e,n)}throw Error(Z(156,e.tag))};function _1(t,e){return Kx(t,e)}function jL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(t,e,n,r){return new jL(t,e,n,r)}function __(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BL(t){if(typeof t=="function")return __(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uw)return 11;if(t===jw)return 14}return 2}function Mi(t,e){var n=t.alternate;return n===null?(n=cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")__(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ka:return Yo(n.children,s,i,e);case Fw:o=8,s|=8;break;case ky:return t=cr(12,n,e,s|2),t.elementType=ky,t.lanes=i,t;case Dy:return t=cr(13,n,e,s),t.elementType=Dy,t.lanes=i,t;case Ny:return t=cr(19,n,e,s),t.elementType=Ny,t.lanes=i,t;case Cx:return em(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rx:o=10;break e;case Px:o=9;break e;case Uw:o=11;break e;case jw:o=14;break e;case hi:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=cr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yo(t,e,n,r){return t=cr(7,t,r,e),t.lanes=n,t}function em(t,e,n,r){return t=cr(22,t,r,e),t.elementType=Cx,t.lanes=n,t.stateNode={isHidden:!1},t}function $g(t,e,n){return t=cr(6,t,null,e),t.lanes=n,t}function zg(t,e,n){return e=cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $L(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ig(0),this.expirationTimes=Ig(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ig(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function E_(t,e,n,r,s,i,o,a,l){return t=new $L(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=cr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},s_(i),t}function zL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ha,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E1(t){if(!t)return Hi;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Fn(n))return ER(t,n,e)}return e}function T1(t,e,n,r,s,i,o,a,l){return t=E_(n,r,!0,t,s,i,o,a,l),t.context=E1(null),n=t.current,r=Tn(),s=Li(n),i=xs(r,s),i.callback=e??null,Oi(n,i,s),t.current.lanes=s,xd(t,s,r),Un(t,r),t}function tm(t,e,n,r){var s=e.current,i=Tn(),o=Li(s);return n=E1(n),e.context===null?e.context=n:e.pendingContext=n,e=xs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oi(s,e,o),t!==null&&(Rr(t,s,o,i),nf(t,s,o)),o}function Jf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function T_(t,e){iI(t,e),(t=t.alternate)&&iI(t,e)}function qL(){return null}var I1=typeof reportError=="function"?reportError:function(t){console.error(t)};function I_(t){this._internalRoot=t}nm.prototype.render=I_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));tm(t,e,null,null)};nm.prototype.unmount=I_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oa(function(){tm(null,t,null,null)}),e[Ns]=null}};function nm(t){this._internalRoot=t}nm.prototype.unstable_scheduleHydration=function(t){if(t){var e=eR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pi.length&&e!==0&&e<pi[n].priority;n++);pi.splice(n,0,t),n===0&&nR(t)}};function S_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oI(){}function WL(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Jf(o);i.call(c)}}var o=T1(e,r,t,0,null,!1,!1,"",oI);return t._reactRootContainer=o,t[Ns]=o.current,zu(t.nodeType===8?t.parentNode:t),oa(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Jf(l);a.call(c)}}var l=E_(t,0,!1,null,null,!1,!1,"",oI);return t._reactRootContainer=l,t[Ns]=l.current,zu(t.nodeType===8?t.parentNode:t),oa(function(){tm(e,l,n,r)}),l}function sm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Jf(o);a.call(l)}}tm(e,o,t,s)}else o=WL(n,e,t,s,r);return Jf(o)}Jx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nu(e.pendingLanes);n!==0&&(zw(e,n|1),Un(e,At()),!(Be&6)&&(kl=At()+500,io()))}break;case 13:oa(function(){var r=Os(t,1);if(r!==null){var s=Tn();Rr(r,t,1,s)}}),T_(t,1)}};qw=function(t){if(t.tag===13){var e=Os(t,134217728);if(e!==null){var n=Tn();Rr(e,t,134217728,n)}T_(t,134217728)}};Zx=function(t){if(t.tag===13){var e=Li(t),n=Os(t,e);if(n!==null){var r=Tn();Rr(n,t,e,r)}T_(t,e)}};eR=function(){return He};tR=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};zy=function(t,e,n){switch(e){case"input":if(Ly(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gp(r);if(!s)throw Error(Z(90));Dx(r),Ly(r,s)}}}break;case"textarea":Ox(t,n);break;case"select":e=n.value,e!=null&&il(t,!!n.multiple,e,!1)}};Bx=y_;$x=oa;var HL={usingClientEntryPoint:!1,Events:[Pd,Xa,Gp,Ux,jx,y_]},qc={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KL={bundleType:qc.bundleType,version:qc.version,rendererPackageName:qc.rendererPackageName,rendererConfig:qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wx(t),t===null?null:t.stateNode},findFiberByHostInstance:qc.findFiberByHostInstance||qL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{qp=Ah.inject(KL),ns=Ah}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HL;rr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S_(e))throw Error(Z(200));return zL(t,e,null,n)};rr.createRoot=function(t,e){if(!S_(t))throw Error(Z(299));var n=!1,r="",s=I1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=E_(t,1,!1,null,null,n,!1,r,s),t[Ns]=e.current,zu(t.nodeType===8?t.parentNode:t),new I_(e)};rr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Wx(e),t=t===null?null:t.stateNode,t};rr.flushSync=function(t){return oa(t)};rr.hydrate=function(t,e,n){if(!rm(e))throw Error(Z(200));return sm(null,t,e,!0,n)};rr.hydrateRoot=function(t,e,n){if(!S_(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=I1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=T1(e,null,t,1,n??null,s,!1,i,o),t[Ns]=e.current,zu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nm(e)};rr.render=function(t,e,n){if(!rm(e))throw Error(Z(200));return sm(null,t,e,!1,n)};rr.unmountComponentAtNode=function(t){if(!rm(t))throw Error(Z(40));return t._reactRootContainer?(oa(function(){sm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};rr.unstable_batchedUpdates=y_;rr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rm(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return sm(t,e,n,!1,r)};rr.version="18.3.1-next-f1338f8080-20240426";function S1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S1)}catch(t){console.error(t)}}S1(),Sx.exports=rr;var kd=Sx.exports;const b1=hx(kd);var A1,aI=kd;A1=aI.createRoot,aI.hydrateRoot;const GL="modulepreload",QL=function(t,e){return new URL(t,e).href},lI={},_e=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=QL(c,r),c in lI)return;lI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let T=o.length-1;T>=0;T--){const g=o[T];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":GL,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((T,g)=>{p.addEventListener("load",T),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},YL=1,XL=1e6;let qg=0;function JL(){return qg=(qg+1)%Number.MAX_SAFE_INTEGER,qg.toString()}const Wg=new Map,cI=t=>{if(Wg.has(t))return;const e=setTimeout(()=>{Wg.delete(t),Eu({type:"REMOVE_TOAST",toastId:t})},XL);Wg.set(t,e)},ZL=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,YL)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?cI(n):t.toasts.forEach(r=>{cI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},uf=[];let df={toasts:[]};function Eu(t){df=ZL(df,t),uf.forEach(e=>{e(df)})}function eM({...t}){const e=JL(),n=s=>Eu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Eu({type:"DISMISS_TOAST",toastId:e});return Eu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function b_(){const[t,e]=I.useState(df);return I.useEffect(()=>(uf.push(e),()=>{const n=uf.indexOf(e);n>-1&&uf.splice(n,1)}),[t]),{...t,toast:eM,dismiss:n=>Eu({type:"DISMISS_TOAST",toastId:n})}}function Je(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function uI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function x1(...t){return e=>{let n=!1;const r=t.map(s=>{const i=uI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():uI(t[s],null)}}}}function en(...t){return I.useCallback(x1(...t),t)}function tM(t,e){const n=I.createContext(e),r=i=>{const{children:o,...a}=i,l=I.useMemo(()=>a,Object.values(a));return S.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=I.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function sc(t,e=[]){let n=[];function r(i,o){const a=I.createContext(o),l=n.length;n=[...n,o];const c=h=>{var _;const{scope:f,children:p,...T}=h,g=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,v=I.useMemo(()=>T,Object.values(T));return S.jsx(g.Provider,{value:v,children:p})};c.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,T=I.useContext(p);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return I.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,nM(s,...e)]}function nM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ju(t){const e=sM(t),n=I.forwardRef((r,s)=>{const{children:i,...o}=r,a=I.Children.toArray(i),l=a.find(oM);if(l){const c=l.props.children,d=a.map(h=>h===l?I.Children.count(c)>1?I.Children.only(null):I.isValidElement(c)?c.props.children:null:h);return S.jsx(e,{...o,ref:s,children:I.isValidElement(c)?I.cloneElement(c,void 0,d):null})}return S.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var rM=Ju("Slot");function sM(t){const e=I.forwardRef((n,r)=>{const{children:s,...i}=n;if(I.isValidElement(s)){const o=lM(s),a=aM(i,s.props);return s.type!==I.Fragment&&(a.ref=r?x1(r,o):o),I.cloneElement(s,a)}return I.Children.count(s)>1?I.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var R1=Symbol("radix.slottable");function iM(t){const e=({children:n})=>S.jsx(S.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=R1,e}function oM(t){return I.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===R1}function aM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function lM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function cM(t){const e=t+"CollectionProvider",[n,r]=sc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:_}=g,y=q.useRef(null),w=q.useRef(new Map).current;return S.jsx(s,{scope:v,itemMap:w,collectionRef:y,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=Ju(a),c=q.forwardRef((g,v)=>{const{scope:_,children:y}=g,w=i(a,_),R=en(v,w.collectionRef);return S.jsx(l,{ref:R,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Ju(d),p=q.forwardRef((g,v)=>{const{scope:_,children:y,...w}=g,R=q.useRef(null),k=en(v,R),V=i(d,_);return q.useEffect(()=>(V.itemMap.set(R,{ref:R,...w}),()=>void V.itemMap.delete(R))),S.jsx(f,{[h]:"",ref:k,children:y})});p.displayName=d;function T(g){const v=i(t+"CollectionConsumer",g);return q.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((V,x)=>w.indexOf(V.ref.current)-w.indexOf(x.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},T,r]}var uM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gt=uM.reduce((t,e)=>{const n=Ju(`Primitive.${e}`),r=I.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function P1(t,e){t&&kd.flushSync(()=>t.dispatchEvent(e))}function as(t){const e=I.useRef(t);return I.useEffect(()=>{e.current=t}),I.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function dM(t,e=globalThis==null?void 0:globalThis.document){const n=as(t);I.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var hM="DismissableLayer",Tv="dismissableLayer.update",fM="dismissableLayer.pointerDownOutside",pM="dismissableLayer.focusOutside",dI,C1=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),im=I.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=I.useContext(C1),[d,h]=I.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=I.useState({}),T=en(e,x=>h(x)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=g.indexOf(v),y=d?g.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,R=y>=_,k=gM(x=>{const b=x.target,A=[...c.branches].some(C=>C.contains(b));!R||A||(s==null||s(x),o==null||o(x),x.defaultPrevented||a==null||a())},f),V=yM(x=>{const b=x.target;[...c.branches].some(C=>C.contains(b))||(i==null||i(x),o==null||o(x),x.defaultPrevented||a==null||a())},f);return dM(x=>{y===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),I.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(dI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),hI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=dI)}},[d,f,n,c]),I.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),hI())},[d,c]),I.useEffect(()=>{const x=()=>p({});return document.addEventListener(Tv,x),()=>document.removeEventListener(Tv,x)},[]),S.jsx(gt.div,{...l,ref:T,style:{pointerEvents:w?R?"auto":"none":void 0,...t.style},onFocusCapture:Je(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Je(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Je(t.onPointerDownCapture,k.onPointerDownCapture)})});im.displayName=hM;var mM="DismissableLayerBranch",k1=I.forwardRef((t,e)=>{const n=I.useContext(C1),r=I.useRef(null),s=en(e,r);return I.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),S.jsx(gt.div,{...t,ref:s})});k1.displayName=mM;function gM(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),r=I.useRef(!1),s=I.useRef(()=>{});return I.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){D1(fM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function yM(t,e=globalThis==null?void 0:globalThis.document){const n=as(t),r=I.useRef(!1);return I.useEffect(()=>{const s=i=>{i.target&&!r.current&&D1(pM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function hI(){const t=new CustomEvent(Tv);document.dispatchEvent(t)}function D1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?P1(s,i):s.dispatchEvent(i)}var vM=im,wM=k1,Ls=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},_M="Portal",A_=I.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=I.useState(!1);Ls(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?b1.createPortal(S.jsx(gt.div,{...r,ref:e}),o):null});A_.displayName=_M;function EM(t,e){return I.useReducer((n,r)=>e[n][r]??n,t)}var _a=t=>{const{present:e,children:n}=t,r=TM(e),s=typeof n=="function"?n({present:r.isPresent}):I.Children.only(n),i=en(r.ref,IM(s));return typeof n=="function"||r.isPresent?I.cloneElement(s,{ref:i}):null};_a.displayName="Presence";function TM(t){const[e,n]=I.useState(),r=I.useRef(null),s=I.useRef(t),i=I.useRef("none"),o=t?"mounted":"unmounted",[a,l]=EM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const c=xh(r.current);i.current=a==="mounted"?c:"none"},[a]),Ls(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=xh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ls(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const g=xh(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(i.current=xh(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function xh(t){return(t==null?void 0:t.animationName)||"none"}function IM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var SM=Ow[" useInsertionEffect ".trim().toString()]||Ls;function x_({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=bM({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=I.useRef(t!==void 0);I.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=I.useCallback(d=>{var h;if(a){const f=AM(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function bM({defaultProp:t,onChange:e}){const[n,r]=I.useState(t),s=I.useRef(n),i=I.useRef(e);return SM(()=>{i.current=e},[e]),I.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function AM(t){return typeof t=="function"}var xM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),RM="VisuallyHidden",om=I.forwardRef((t,e)=>S.jsx(gt.span,{...t,ref:e,style:{...xM,...t.style}}));om.displayName=RM;var PM=om,R_="ToastProvider",[P_,CM,kM]=cM("Toast"),[N1]=sc("Toast",[kM]),[DM,am]=N1(R_),O1=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=I.useState(null),[c,d]=I.useState(0),h=I.useRef(!1),f=I.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${R_}\`. Expected non-empty \`string\`.`),S.jsx(P_.Provider,{scope:e,children:S.jsx(DM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:I.useCallback(()=>d(p=>p+1),[]),onToastRemove:I.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};O1.displayName=R_;var V1="ToastViewport",NM=["F8"],Iv="toast.viewportPause",Sv="toast.viewportResume",L1=I.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=NM,label:s="Notifications ({hotkey})",...i}=t,o=am(V1,n),a=CM(n),l=I.useRef(null),c=I.useRef(null),d=I.useRef(null),h=I.useRef(null),f=en(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;I.useEffect(()=>{const v=_=>{var w;r.length!==0&&r.every(R=>_[R]||_.code===R)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),I.useEffect(()=>{const v=l.current,_=h.current;if(T&&v&&_){const y=()=>{if(!o.isClosePausedRef.current){const V=new CustomEvent(Iv);_.dispatchEvent(V),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const V=new CustomEvent(Sv);_.dispatchEvent(V),o.isClosePausedRef.current=!1}},R=V=>{!v.contains(V.relatedTarget)&&w()},k=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",y),v.addEventListener("focusout",R),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",R),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[T,o.isClosePausedRef]);const g=I.useCallback(({tabbingDirection:v})=>{const y=a().map(w=>{const R=w.ref.current,k=[R,...HM(R)];return v==="forwards"?k:k.reverse()});return(v==="forwards"?y.reverse():y).flat()},[a]);return I.useEffect(()=>{const v=h.current;if(v){const _=y=>{var k,V,x;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const b=document.activeElement,A=y.shiftKey;if(y.target===v&&A){(k=c.current)==null||k.focus();return}const O=g({tabbingDirection:A?"backwards":"forwards"}),P=O.findIndex(F=>F===b);Hg(O.slice(P+1))?y.preventDefault():A?(V=c.current)==null||V.focus():(x=d.current)==null||x.focus()}};return v.addEventListener("keydown",_),()=>v.removeEventListener("keydown",_)}},[a,g]),S.jsxs(wM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&S.jsx(bv,{ref:c,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});Hg(v)}}),S.jsx(P_.Slot,{scope:n,children:S.jsx(gt.ol,{tabIndex:-1,...i,ref:f})}),T&&S.jsx(bv,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});Hg(v)}})]})});L1.displayName=V1;var M1="ToastFocusProxy",bv=I.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=am(M1,n);return S.jsx(om,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});bv.displayName=M1;var Dd="Toast",OM="toast.swipeStart",VM="toast.swipeMove",LM="toast.swipeCancel",MM="toast.swipeEnd",F1=I.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=x_({prop:r,defaultProp:s??!0,onChange:i,caller:Dd});return S.jsx(_a,{present:n||a,children:S.jsx(jM,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:as(t.onPause),onResume:as(t.onResume),onSwipeStart:Je(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Je(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Je(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Je(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});F1.displayName=Dd;var[FM,UM]=N1(Dd,{onClose(){}}),jM=I.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...T}=t,g=am(Dd,n),[v,_]=I.useState(null),y=en(e,F=>_(F)),w=I.useRef(null),R=I.useRef(null),k=s||g.duration,V=I.useRef(0),x=I.useRef(k),b=I.useRef(0),{onToastAdd:A,onToastRemove:C}=g,N=as(()=>{var $;(v==null?void 0:v.contains(document.activeElement))&&(($=g.viewport)==null||$.focus()),o()}),O=I.useCallback(F=>{!F||F===1/0||(window.clearTimeout(b.current),V.current=new Date().getTime(),b.current=window.setTimeout(N,F))},[N]);I.useEffect(()=>{const F=g.viewport;if(F){const $=()=>{O(x.current),c==null||c()},H=()=>{const Y=new Date().getTime()-V.current;x.current=x.current-Y,window.clearTimeout(b.current),l==null||l()};return F.addEventListener(Iv,H),F.addEventListener(Sv,$),()=>{F.removeEventListener(Iv,H),F.removeEventListener(Sv,$)}}},[g.viewport,k,l,c,O]),I.useEffect(()=>{i&&!g.isClosePausedRef.current&&O(k)},[i,k,g.isClosePausedRef,O]),I.useEffect(()=>(A(),()=>C()),[A,C]);const P=I.useMemo(()=>v?W1(v):null,[v]);return g.viewport?S.jsxs(S.Fragment,{children:[P&&S.jsx(BM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:P}),S.jsx(FM,{scope:n,onClose:N,children:kd.createPortal(S.jsx(P_.ItemSlot,{scope:n,children:S.jsx(vM,{asChild:!0,onEscapeKeyDown:Je(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||N(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:S.jsx(gt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...T,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Je(t.onKeyDown,F=>{F.key==="Escape"&&(a==null||a(F.nativeEvent),F.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Je(t.onPointerDown,F=>{F.button===0&&(w.current={x:F.clientX,y:F.clientY})}),onPointerMove:Je(t.onPointerMove,F=>{if(!w.current)return;const $=F.clientX-w.current.x,H=F.clientY-w.current.y,Y=!!R.current,L=["left","right"].includes(g.swipeDirection),M=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,K=L?M(0,$):0,X=L?0:M(0,H),z=F.pointerType==="touch"?10:2,se={x:K,y:X},oe={originalEvent:F,delta:se};Y?(R.current=se,Rh(VM,h,oe,{discrete:!1})):fI(se,g.swipeDirection,z)?(R.current=se,Rh(OM,d,oe,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs($)>z||Math.abs(H)>z)&&(w.current=null)}),onPointerUp:Je(t.onPointerUp,F=>{const $=R.current,H=F.target;if(H.hasPointerCapture(F.pointerId)&&H.releasePointerCapture(F.pointerId),R.current=null,w.current=null,$){const Y=F.currentTarget,L={originalEvent:F,delta:$};fI($,g.swipeDirection,g.swipeThreshold)?Rh(MM,p,L,{discrete:!0}):Rh(LM,f,L,{discrete:!0}),Y.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),BM=t=>{const{__scopeToast:e,children:n,...r}=t,s=am(Dd,e),[i,o]=I.useState(!1),[a,l]=I.useState(!1);return qM(()=>o(!0)),I.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:S.jsx(A_,{asChild:!0,children:S.jsx(om,{...r,children:i&&S.jsxs(S.Fragment,{children:[s.label," ",n]})})})},$M="ToastTitle",U1=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return S.jsx(gt.div,{...r,ref:e})});U1.displayName=$M;var zM="ToastDescription",j1=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return S.jsx(gt.div,{...r,ref:e})});j1.displayName=zM;var B1="ToastAction",$1=I.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?S.jsx(q1,{altText:n,asChild:!0,children:S.jsx(C_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${B1}\`. Expected non-empty \`string\`.`),null)});$1.displayName=B1;var z1="ToastClose",C_=I.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=UM(z1,n);return S.jsx(q1,{asChild:!0,children:S.jsx(gt.button,{type:"button",...r,ref:e,onClick:Je(t.onClick,s.onClose)})})});C_.displayName=z1;var q1=I.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return S.jsx(gt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function W1(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),WM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...W1(r))}}),e}function Rh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?P1(s,i):s.dispatchEvent(i)}var fI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function qM(t=()=>{}){const e=as(t);Ls(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function WM(t){return t.nodeType===t.ELEMENT_NODE}function HM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Hg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var KM=O1,H1=L1,K1=F1,G1=U1,Q1=j1,Y1=$1,X1=C_;function J1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=J1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Z1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=J1(t))&&(r&&(r+=" "),r+=e);return r}const pI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,mI=Z1,eP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return mI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=pI(d)||pI(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(T=>{let[g,v]=T;return Array.isArray(v)?v.includes({...i,...a}[g]):{...i,...a}[g]===v})?[...c,h,f]:c},[]);return mI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>I.createElement("svg",{ref:l,...QM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tP("lucide",s),...a},[...o.map(([c,d])=>I.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(t,e)=>{const n=I.forwardRef(({className:r,...s},i)=>I.createElement(YM,{ref:i,iconNode:e,className:tP(`lucide-${GM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=tt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=tt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=tt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=tt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=tt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=tt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=tt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=tt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=tt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=tt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=tt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=tt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=tt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=tt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=tt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=tt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=tt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=tt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=tt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),D_="-",gF=t=>{const e=vF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(D_);return a[0]===""&&a.length!==1&&a.shift(),rP(a,e)||yF(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},rP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?rP(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(D_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},_I=/^\[(.+)\]$/,yF=t=>{if(_I.test(t)){const e=_I.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},vF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return _F(Object.entries(t.classGroups),n).forEach(([i,o])=>{Av(o,r,i,e)}),r},Av=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:EI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(wF(s)){Av(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Av(o,EI(e,i),n,r)})})},EI=(t,e)=>{let n=t;return e.split(D_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},wF=t=>t.isThemeGetter,_F=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,EF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},sP="!",TF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let _=a[v];if(c===0){if(_===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(_==="/"){h=v;continue}}_==="["?c++:_==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(sP),T=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:T,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},IF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},SF=t=>({cache:EF(t.cacheSize),parseClassName:TF(t),...gF(t)}),bF=/\s+/,AF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(bF);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let T=!!p,g=r(T?f.substring(0,p):f);if(!g){if(!T){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}T=!1}const v=IF(d).join(":"),_=h?v+sP:v,y=_+g;if(i.includes(y))continue;i.push(y);const w=s(g,T);for(let R=0;R<w.length;++R){const k=w[R];i.push(_+k)}a=c+(a.length>0?" "+a:a)}return a};function xF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=iP(e))&&(r&&(r+=" "),r+=n);return r}const iP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=iP(t[r]))&&(n&&(n+=" "),n+=e);return n};function RF(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=SF(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=AF(l,n);return s(l,d),d}return function(){return i(xF.apply(null,arguments))}}const it=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},oP=/^\[(?:([a-z-]+):)?(.+)\]$/i,PF=/^\d+\/\d+$/,CF=new Set(["px","full","screen"]),kF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,NF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,OF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gs=t=>dl(t)||CF.has(t)||PF.test(t),si=t=>ic(t,"length",zF),dl=t=>!!t&&!Number.isNaN(Number(t)),Gg=t=>ic(t,"number",dl),Wc=t=>!!t&&Number.isInteger(Number(t)),LF=t=>t.endsWith("%")&&dl(t.slice(0,-1)),Pe=t=>oP.test(t),ii=t=>kF.test(t),MF=new Set(["length","size","percentage"]),FF=t=>ic(t,MF,aP),UF=t=>ic(t,"position",aP),jF=new Set(["image","url"]),BF=t=>ic(t,jF,WF),$F=t=>ic(t,"",qF),Hc=()=>!0,ic=(t,e,n)=>{const r=oP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},zF=t=>DF.test(t)&&!NF.test(t),aP=()=>!1,qF=t=>OF.test(t),WF=t=>VF.test(t),HF=()=>{const t=it("colors"),e=it("spacing"),n=it("blur"),r=it("brightness"),s=it("borderColor"),i=it("borderRadius"),o=it("borderSpacing"),a=it("borderWidth"),l=it("contrast"),c=it("grayscale"),d=it("hueRotate"),h=it("invert"),f=it("gap"),p=it("gradientColorStops"),T=it("gradientColorStopPositions"),g=it("inset"),v=it("margin"),_=it("opacity"),y=it("padding"),w=it("saturate"),R=it("scale"),k=it("sepia"),V=it("skew"),x=it("space"),b=it("translate"),A=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Pe,e],O=()=>[Pe,e],P=()=>["",gs,si],F=()=>["auto",dl,Pe],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",Pe],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[dl,Pe];return{cacheSize:500,separator:":",theme:{colors:[Hc],spacing:[gs,si],blur:["none","",ii,Pe],brightness:X(),borderColor:[t],borderRadius:["none","","full",ii,Pe],borderSpacing:O(),borderWidth:P(),contrast:X(),grayscale:M(),hueRotate:X(),invert:M(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[LF,si],inset:N(),margin:N(),opacity:X(),padding:O(),saturate:X(),scale:X(),sepia:M(),skew:X(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[ii]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Pe]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wc,Pe]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Wc,Pe]}],"grid-cols":[{"grid-cols":[Hc]}],"col-start-end":[{col:["auto",{span:["full",Wc,Pe]},Pe]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Hc]}],"row-start-end":[{row:["auto",{span:[Wc,Pe]},Pe]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,e]}],"min-w":[{"min-w":[Pe,e,"min","max","fit"]}],"max-w":[{"max-w":[Pe,e,"none","full","min","max","fit","prose",{screen:[ii]},ii]}],h:[{h:[Pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ii,si]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gg]}],"font-family":[{font:[Hc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",dl,Gg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gs,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gs,si]}],"underline-offset":[{"underline-offset":["auto",gs,Pe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),UF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BF]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[gs,Pe]}],"outline-w":[{outline:[gs,si]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[gs,si]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ii,$F]}],"shadow-color":[{shadow:[Hc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ii,Pe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Wc,Pe]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gs,si,Gg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},KF=RF(HF);function tn(...t){return KF(Z1(t))}const GF=KM,lP=I.forwardRef(({className:t,...e},n)=>S.jsx(H1,{ref:n,className:tn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));lP.displayName=H1.displayName;const QF=eP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cP=I.forwardRef(({className:t,variant:e,...n},r)=>S.jsx(K1,{ref:r,className:tn(QF({variant:e}),t),...n}));cP.displayName=K1.displayName;const YF=I.forwardRef(({className:t,...e},n)=>S.jsx(Y1,{ref:n,className:tn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));YF.displayName=Y1.displayName;const uP=I.forwardRef(({className:t,...e},n)=>S.jsx(X1,{ref:n,className:tn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:S.jsx(k_,{className:"h-4 w-4"})}));uP.displayName=X1.displayName;const dP=I.forwardRef(({className:t,...e},n)=>S.jsx(G1,{ref:n,className:tn("text-sm font-semibold",t),...e}));dP.displayName=G1.displayName;const hP=I.forwardRef(({className:t,...e},n)=>S.jsx(Q1,{ref:n,className:tn("text-sm opacity-90",t),...e}));hP.displayName=Q1.displayName;function XF(){const{toasts:t}=b_();return S.jsxs(GF,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return S.jsxs(cP,{...i,children:[S.jsxs("div",{className:"grid gap-1",children:[n&&S.jsx(dP,{children:n}),r&&S.jsx(hP,{children:r})]}),s,S.jsx(uP,{})]},e)}),S.jsx(lP,{})]})}var Zf=["light","dark"],N_="(prefers-color-scheme: dark)",JF=typeof window>"u",O_=I.createContext(void 0),ZF={setTheme:t=>{},themes:[]},fP=()=>{var t;return(t=I.useContext(O_))!=null?t:ZF},e4=t=>I.useContext(O_)?t.children:I.createElement(n4,{...t}),t4=["light","dark"],n4=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=t4,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=I.useState(()=>TI(s,o)),[p,T]=I.useState(()=>TI(s)),g=l?Object.values(l):i,v=I.useCallback(R=>{let k=R;if(!k)return;R==="system"&&n&&(k=II());let V=l?l[k]:k,x=e?s4():null,b=document.documentElement;if(a==="class"?(b.classList.remove(...g),V&&b.classList.add(V)):V?b.setAttribute(a,V):b.removeAttribute(a),r){let A=Zf.includes(o)?o:null,C=Zf.includes(k)?k:A;b.style.colorScheme=C}x==null||x()},[]),_=I.useCallback(R=>{let k=typeof R=="function"?R(R):R;f(k);try{localStorage.setItem(s,k)}catch{}},[t]),y=I.useCallback(R=>{let k=II(R);T(k),h==="system"&&n&&!t&&v("system")},[h,t]);I.useEffect(()=>{let R=window.matchMedia(N_);return R.addListener(y),y(R),()=>R.removeListener(y)},[y]),I.useEffect(()=>{let R=k=>{if(k.key!==s)return;let V=k.newValue||o;_(V)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[_]),I.useEffect(()=>{v(t??h)},[t,h]);let w=I.useMemo(()=>({theme:h,setTheme:_,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,_,t,p,n,i]);return I.createElement(O_.Provider,{value:w},I.createElement(r4,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:d}),c)},r4=I.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Zf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(T,g=!1,v=!0)=>{let _=o?o[T]:T,y=g?T+"|| ''":`'${_}'`,w="";return s&&v&&!g&&Zf.includes(T)&&(w+=`d.style.colorScheme = '${T}';`),n==="class"?g||_?w+=`c.add(${y})`:w+="null":_&&(w+=`d[s](n,${y})`),w},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${N_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return I.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),TI=(t,e)=>{if(JF)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},s4=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},II=t=>(t||(t=window.matchMedia(N_)),t.matches?"dark":"light"),i4=t=>{switch(t){case"success":return l4;case"info":return u4;case"warning":return c4;case"error":return d4;default:return null}},o4=Array(12).fill(0),a4=({visible:t,className:e})=>q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},q.createElement("div",{className:"sonner-spinner"},o4.map((n,r)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),l4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),c4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),u4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),d4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h4=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),f4=()=>{let[t,e]=q.useState(document.hidden);return q.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},xv=1,p4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:xv++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],q.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(g4(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||xv++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Cn=new p4,m4=(t,e)=>{let n=(e==null?void 0:e.id)||xv++;return Cn.addToast({title:t,...e,id:n}),n},g4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",y4=m4,v4=()=>Cn.toasts,w4=()=>Cn.getActiveToasts(),an=Object.assign(y4,{success:Cn.success,info:Cn.info,warning:Cn.warning,error:Cn.error,custom:Cn.custom,message:Cn.message,promise:Cn.promise,dismiss:Cn.dismiss,loading:Cn.loading},{getHistory:v4,getToasts:w4});function _4(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}_4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ph(t){return t.label!==void 0}var E4=3,T4="32px",I4="16px",SI=4e3,S4=356,b4=14,A4=20,x4=200;function yr(...t){return t.filter(Boolean).join(" ")}function R4(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var P4=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:T,interacting:g,setHeights:v,visibleToasts:_,heights:y,index:w,toasts:R,expanded:k,removeToast:V,defaultRichColors:x,closeButton:b,style:A,cancelButtonStyle:C,actionButtonStyle:N,className:O="",descriptionClassName:P="",duration:F,position:$,gap:H,loadingIcon:Y,expandByDefault:L,classNames:M,icons:K,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:z}=t,[se,oe]=q.useState(null),[de,ie]=q.useState(null),[ne,xe]=q.useState(!1),[Ie,ge]=q.useState(!1),[Re,nt]=q.useState(!1),[rt,Vt]=q.useState(!1),[kt,Lt]=q.useState(!1),[Qe,ye]=q.useState(0),[Ue,St]=q.useState(0),Mt=q.useRef(p.duration||F||SI),ho=q.useRef(null),jn=q.useRef(null),eg=w===0,fo=w+1<=_,gn=p.type,ps=p.dismissible!==!1,Ic=p.className||"",tg=p.descriptionClassName||"",Sa=q.useMemo(()=>y.findIndex(Ee=>Ee.toastId===p.id)||0,[y,p.id]),Xd=q.useMemo(()=>{var Ee;return(Ee=p.closeButton)!=null?Ee:b},[p.closeButton,b]),Sc=q.useMemo(()=>p.duration||F||SI,[p.duration,F]),ms=q.useRef(0),Ur=q.useRef(0),ba=q.useRef(0),Rn=q.useRef(null),[Jd,Aa]=$.split("-"),bc=q.useMemo(()=>y.reduce((Ee,ze,Xe)=>Xe>=Sa?Ee:Ee+ze.height,0),[y,Sa]),Ys=f4(),Zd=p.invert||f,Ft=gn==="loading";Ur.current=q.useMemo(()=>Sa*H+bc,[Sa,bc]),q.useEffect(()=>{Mt.current=Sc},[Sc]),q.useEffect(()=>{xe(!0)},[]),q.useEffect(()=>{let Ee=jn.current;if(Ee){let ze=Ee.getBoundingClientRect().height;return St(ze),v(Xe=>[{toastId:p.id,height:ze,position:p.position},...Xe]),()=>v(Xe=>Xe.filter(zt=>zt.toastId!==p.id))}},[v,p.id]),q.useLayoutEffect(()=>{if(!ne)return;let Ee=jn.current,ze=Ee.style.height;Ee.style.height="auto";let Xe=Ee.getBoundingClientRect().height;Ee.style.height=ze,St(Xe),v(zt=>zt.find(Bn=>Bn.toastId===p.id)?zt.map(Bn=>Bn.toastId===p.id?{...Bn,height:Xe}:Bn):[{toastId:p.id,height:Xe,position:p.position},...zt])},[ne,p.title,p.description,v,p.id]);let pr=q.useCallback(()=>{ge(!0),ye(Ur.current),v(Ee=>Ee.filter(ze=>ze.toastId!==p.id)),setTimeout(()=>{V(p)},x4)},[p,V,v,Ur]);q.useEffect(()=>{if(p.promise&&gn==="loading"||p.duration===1/0||p.type==="loading")return;let Ee;return k||g||z&&Ys?(()=>{if(ba.current<ms.current){let ze=new Date().getTime()-ms.current;Mt.current=Mt.current-ze}ba.current=new Date().getTime()})():Mt.current!==1/0&&(ms.current=new Date().getTime(),Ee=setTimeout(()=>{var ze;(ze=p.onAutoClose)==null||ze.call(p,p),pr()},Mt.current)),()=>clearTimeout(Ee)},[k,g,p,gn,z,Ys,pr]),q.useEffect(()=>{p.delete&&pr()},[pr,p.delete]);function po(){var Ee,ze,Xe;return K!=null&&K.loading?q.createElement("div",{className:yr(M==null?void 0:M.loader,(Ee=p==null?void 0:p.classNames)==null?void 0:Ee.loader,"sonner-loader"),"data-visible":gn==="loading"},K.loading):Y?q.createElement("div",{className:yr(M==null?void 0:M.loader,(ze=p==null?void 0:p.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":gn==="loading"},Y):q.createElement(a4,{className:yr(M==null?void 0:M.loader,(Xe=p==null?void 0:p.classNames)==null?void 0:Xe.loader),visible:gn==="loading"})}return q.createElement("li",{tabIndex:0,ref:jn,className:yr(O,Ic,M==null?void 0:M.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[gn],(n=p==null?void 0:p.classNames)==null?void 0:n[gn]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:x,"data-styled":!(p.jsx||p.unstyled||T),"data-mounted":ne,"data-promise":!!p.promise,"data-swiped":kt,"data-removed":Ie,"data-visible":fo,"data-y-position":Jd,"data-x-position":Aa,"data-index":w,"data-front":eg,"data-swiping":Re,"data-dismissible":ps,"data-type":gn,"data-invert":Zd,"data-swipe-out":rt,"data-swipe-direction":de,"data-expanded":!!(k||L&&ne),style:{"--index":w,"--toasts-before":w,"--z-index":R.length-w,"--offset":`${Ie?Qe:Ur.current}px`,"--initial-height":L?"auto":`${Ue}px`,...A,...p.style},onDragEnd:()=>{nt(!1),oe(null),Rn.current=null},onPointerDown:Ee=>{Ft||!ps||(ho.current=new Date,ye(Ur.current),Ee.target.setPointerCapture(Ee.pointerId),Ee.target.tagName!=="BUTTON"&&(nt(!0),Rn.current={x:Ee.clientX,y:Ee.clientY}))},onPointerUp:()=>{var Ee,ze,Xe,zt;if(rt||!ps)return;Rn.current=null;let Bn=Number(((Ee=jn.current)==null?void 0:Ee.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jr=Number(((ze=jn.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ir=new Date().getTime()-((Xe=ho.current)==null?void 0:Xe.getTime()),Pn=se==="x"?Bn:jr,mr=Math.abs(Pn)/ir;if(Math.abs(Pn)>=A4||mr>.11){ye(Ur.current),(zt=p.onDismiss)==null||zt.call(p,p),ie(se==="x"?Bn>0?"right":"left":jr>0?"down":"up"),pr(),Vt(!0),Lt(!1);return}nt(!1),oe(null)},onPointerMove:Ee=>{var ze,Xe,zt,Bn;if(!Rn.current||!ps||((ze=window.getSelection())==null?void 0:ze.toString().length)>0)return;let jr=Ee.clientY-Rn.current.y,ir=Ee.clientX-Rn.current.x,Pn=(Xe=t.swipeDirections)!=null?Xe:R4($);!se&&(Math.abs(ir)>1||Math.abs(jr)>1)&&oe(Math.abs(ir)>Math.abs(jr)?"x":"y");let mr={x:0,y:0};se==="y"?(Pn.includes("top")||Pn.includes("bottom"))&&(Pn.includes("top")&&jr<0||Pn.includes("bottom")&&jr>0)&&(mr.y=jr):se==="x"&&(Pn.includes("left")||Pn.includes("right"))&&(Pn.includes("left")&&ir<0||Pn.includes("right")&&ir>0)&&(mr.x=ir),(Math.abs(mr.x)>0||Math.abs(mr.y)>0)&&Lt(!0),(zt=jn.current)==null||zt.style.setProperty("--swipe-amount-x",`${mr.x}px`),(Bn=jn.current)==null||Bn.style.setProperty("--swipe-amount-y",`${mr.y}px`)}},Xd&&!p.jsx?q.createElement("button",{"aria-label":X,"data-disabled":Ft,"data-close-button":!0,onClick:Ft||!ps?()=>{}:()=>{var Ee;pr(),(Ee=p.onDismiss)==null||Ee.call(p,p)},className:yr(M==null?void 0:M.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=K==null?void 0:K.close)!=null?i:h4):null,p.jsx||I.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:q.createElement(q.Fragment,null,gn||p.icon||p.promise?q.createElement("div",{"data-icon":"",className:yr(M==null?void 0:M.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||po():null,p.type!=="loading"?p.icon||(K==null?void 0:K[gn])||i4(gn):null):null,q.createElement("div",{"data-content":"",className:yr(M==null?void 0:M.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},q.createElement("div",{"data-title":"",className:yr(M==null?void 0:M.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?q.createElement("div",{"data-description":"",className:yr(P,tg,M==null?void 0:M.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),I.isValidElement(p.cancel)?p.cancel:p.cancel&&Ph(p.cancel)?q.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||C,onClick:Ee=>{var ze,Xe;Ph(p.cancel)&&ps&&((Xe=(ze=p.cancel).onClick)==null||Xe.call(ze,Ee),pr())},className:yr(M==null?void 0:M.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,I.isValidElement(p.action)?p.action:p.action&&Ph(p.action)?q.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||N,onClick:Ee=>{var ze,Xe;Ph(p.action)&&((Xe=(ze=p.action).onClick)==null||Xe.call(ze,Ee),!Ee.defaultPrevented&&pr())},className:yr(M==null?void 0:M.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function bI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function C4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?I4:T4;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var k4=I.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:T=E4,toastOptions:g,dir:v=bI(),gap:_=b4,loadingIcon:y,icons:w,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:k}=t,[V,x]=q.useState([]),b=q.useMemo(()=>Array.from(new Set([r].concat(V.filter(z=>z.position).map(z=>z.position)))),[V,r]),[A,C]=q.useState([]),[N,O]=q.useState(!1),[P,F]=q.useState(!1),[$,H]=q.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=q.useRef(null),L=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=q.useRef(null),K=q.useRef(!1),X=q.useCallback(z=>{x(se=>{var oe;return(oe=se.find(de=>de.id===z.id))!=null&&oe.delete||Cn.dismiss(z.id),se.filter(({id:de})=>de!==z.id)})},[]);return q.useEffect(()=>Cn.subscribe(z=>{if(z.dismiss){x(se=>se.map(oe=>oe.id===z.id?{...oe,delete:!0}:oe));return}setTimeout(()=>{b1.flushSync(()=>{x(se=>{let oe=se.findIndex(de=>de.id===z.id);return oe!==-1?[...se.slice(0,oe),{...se[oe],...z},...se.slice(oe+1)]:[z,...se]})})})}),[]),q.useEffect(()=>{if(d!=="system"){H(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;let z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:se})=>{H(se?"dark":"light")})}catch{z.addListener(({matches:oe})=>{try{H(oe?"dark":"light")}catch(de){console.error(de)}})}},[d]),q.useEffect(()=>{V.length<=1&&O(!1)},[V]),q.useEffect(()=>{let z=se=>{var oe,de;s.every(ie=>se[ie]||se.code===ie)&&(O(!0),(oe=Y.current)==null||oe.focus()),se.code==="Escape"&&(document.activeElement===Y.current||(de=Y.current)!=null&&de.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[s]),q.useEffect(()=>{if(Y.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,K.current=!1)}},[Y.current]),q.createElement("section",{ref:e,"aria-label":`${R} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},b.map((z,se)=>{var oe;let[de,ie]=z.split("-");return V.length?q.createElement("ol",{key:z,dir:v==="auto"?bI():v,tabIndex:-1,ref:Y,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":de,"data-lifted":N&&V.length>1&&!i,"data-x-position":ie,style:{"--front-toast-height":`${((oe=A[0])==null?void 0:oe.height)||0}px`,"--width":`${S4}px`,"--gap":`${_}px`,...p,...C4(l,c)},onBlur:ne=>{K.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(K.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||K.current||(K.current=!0,M.current=ne.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{P||O(!1)},onDragEnd:()=>O(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},V.filter(ne=>!ne.position&&se===0||ne.position===z).map((ne,xe)=>{var Ie,ge;return q.createElement(P4,{key:ne.id,icons:w,index:xe,toast:ne,defaultRichColors:h,duration:(Ie=g==null?void 0:g.duration)!=null?Ie:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:T,closeButton:(ge=g==null?void 0:g.closeButton)!=null?ge:o,interacting:P,position:z,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:X,toasts:V.filter(Re=>Re.position==ne.position),heights:A.filter(Re=>Re.position==ne.position),setHeights:C,expandByDefault:i,gap:_,loadingIcon:y,expanded:N,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const D4=({...t})=>{const{theme:e="system"}=fP();return S.jsx(k4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var N4=Ow[" useId ".trim().toString()]||(()=>{}),O4=0;function Qg(t){const[e,n]=I.useState(N4());return Ls(()=>{n(r=>r??String(O4++))},[t]),t||(e?`radix-${e}`:"")}const V4=["top","right","bottom","left"],Ki=Math.min,Wn=Math.max,ep=Math.round,Ch=Math.floor,ss=t=>({x:t,y:t}),L4={left:"right",right:"left",bottom:"top",top:"bottom"},M4={start:"end",end:"start"};function Rv(t,e,n){return Wn(t,Ki(e,n))}function Ms(t,e){return typeof t=="function"?t(e):t}function Fs(t){return t.split("-")[0]}function oc(t){return t.split("-")[1]}function V_(t){return t==="x"?"y":"x"}function L_(t){return t==="y"?"height":"width"}const F4=new Set(["top","bottom"]);function Jr(t){return F4.has(Fs(t))?"y":"x"}function M_(t){return V_(Jr(t))}function U4(t,e,n){n===void 0&&(n=!1);const r=oc(t),s=M_(t),i=L_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=tp(o)),[o,tp(o)]}function j4(t){const e=tp(t);return[Pv(t),e,Pv(e)]}function Pv(t){return t.replace(/start|end/g,e=>M4[e])}const AI=["left","right"],xI=["right","left"],B4=["top","bottom"],$4=["bottom","top"];function z4(t,e,n){switch(t){case"top":case"bottom":return n?e?xI:AI:e?AI:xI;case"left":case"right":return e?B4:$4;default:return[]}}function q4(t,e,n,r){const s=oc(t);let i=z4(Fs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Pv)))),i}function tp(t){return t.replace(/left|right|bottom|top/g,e=>L4[e])}function W4(t){return{top:0,right:0,bottom:0,left:0,...t}}function pP(t){return typeof t!="number"?W4(t):{top:t,right:t,bottom:t,left:t}}function np(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function RI(t,e,n){let{reference:r,floating:s}=t;const i=Jr(e),o=M_(e),a=L_(o),l=Fs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(oc(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const H4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=RI(c,r,l),f=r,p={},T=0;for(let g=0;g<a.length;g++){const{name:v,fn:_}=a[g],{x:y,y:w,data:R,reset:k}=await _({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=y??d,h=w??h,p={...p,[v]:{...p[v],...R}},k&&T<=50&&(T++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:d,y:h}=RI(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Zu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Ms(e,t),T=pP(p),v=a[f?h==="floating"?"reference":"floating":h],_=np(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=np(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(_.top-k.top+T.top)/R.y,bottom:(k.bottom-_.bottom+T.bottom)/R.y,left:(_.left-k.left+T.left)/R.x,right:(k.right-_.right+T.right)/R.x}}const K4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ms(t,e)||{};if(c==null)return{};const h=pP(d),f={x:n,y:r},p=M_(s),T=L_(p),g=await o.getDimensions(c),v=p==="y",_=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",R=i.reference[T]+i.reference[p]-f[p]-i.floating[T],k=f[p]-i.reference[p],V=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=V?V[w]:0;(!x||!await(o.isElement==null?void 0:o.isElement(V)))&&(x=a.floating[w]||i.floating[T]);const b=R/2-k/2,A=x/2-g[T]/2-1,C=Ki(h[_],A),N=Ki(h[y],A),O=C,P=x-g[T]-N,F=x/2-g[T]/2+b,$=Rv(O,F,P),H=!l.arrow&&oc(s)!=null&&F!==$&&i.reference[T]/2-(F<O?C:N)-g[T]/2<0,Y=H?F<O?F-O:F-P:0;return{[p]:f[p]+Y,data:{[p]:$,centerOffset:F-$-Y,...H&&{alignmentOffset:Y}},reset:H}}}),G4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:g=!0,...v}=Ms(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Fs(s),y=Jr(a),w=Fs(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(w||!g?[tp(a)]:j4(a)),V=T!=="none";!f&&V&&k.push(...q4(a,g,T,R));const x=[a,...k],b=await Zu(e,v),A=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&A.push(b[_]),h){const F=U4(s,o,R);A.push(b[F[0]],b[F[1]])}if(C=[...C,{placement:s,overflows:A}],!A.every(F=>F<=0)){var N,O;const F=(((N=i.flip)==null?void 0:N.index)||0)+1,$=x[F];if($&&(!(h==="alignment"?y!==Jr($):!1)||C.every(L=>Jr(L.placement)===y?L.overflows[0]>0:!0)))return{data:{index:F,overflows:C},reset:{placement:$}};let H=(O=C.filter(Y=>Y.overflows[0]<=0).sort((Y,L)=>Y.overflows[1]-L.overflows[1])[0])==null?void 0:O.placement;if(!H)switch(p){case"bestFit":{var P;const Y=(P=C.filter(L=>{if(V){const M=Jr(L.placement);return M===y||M==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(M=>M>0).reduce((M,K)=>M+K,0)]).sort((L,M)=>L[1]-M[1])[0])==null?void 0:P[0];Y&&(H=Y);break}case"initialPlacement":H=a;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function PI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function CI(t){return V4.some(e=>t[e]>=0)}const Q4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ms(t,e);switch(r){case"referenceHidden":{const i=await Zu(e,{...s,elementContext:"reference"}),o=PI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:CI(o)}}}case"escaped":{const i=await Zu(e,{...s,altBoundary:!0}),o=PI(i,n.floating);return{data:{escapedOffsets:o,escaped:CI(o)}}}default:return{}}}}},mP=new Set(["left","top"]);async function Y4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Fs(n),a=oc(n),l=Jr(n)==="y",c=mP.has(o)?-1:1,d=i&&l?-1:1,h=Ms(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:T}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof T=="number"&&(p=a==="end"?T*-1:T),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const X4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await Y4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},J4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:_,y}=v;return{x:_,y}}},...l}=Ms(t,e),c={x:n,y:r},d=await Zu(e,l),h=Jr(Fs(s)),f=V_(h);let p=c[f],T=c[h];if(i){const v=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=p+d[v],w=p-d[_];p=Rv(y,p,w)}if(o){const v=h==="y"?"top":"left",_=h==="y"?"bottom":"right",y=T+d[v],w=T-d[_];T=Rv(y,T,w)}const g=a.fn({...e,[f]:p,[h]:T});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},Z4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ms(t,e),d={x:n,y:r},h=Jr(s),f=V_(h);let p=d[f],T=d[h];const g=Ms(a,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=f==="y"?"height":"width",R=i.reference[f]-i.floating[w]+v.mainAxis,k=i.reference[f]+i.reference[w]-v.mainAxis;p<R?p=R:p>k&&(p=k)}if(c){var _,y;const w=f==="y"?"width":"height",R=mP.has(Fs(s)),k=i.reference[h]-i.floating[w]+(R&&((_=o.offset)==null?void 0:_[h])||0)+(R?0:v.crossAxis),V=i.reference[h]+i.reference[w]+(R?0:((y=o.offset)==null?void 0:y[h])||0)-(R?v.crossAxis:0);T<k?T=k:T>V&&(T=V)}return{[f]:p,[h]:T}}}},eU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ms(t,e),d=await Zu(e,c),h=Fs(s),f=oc(s),p=Jr(s)==="y",{width:T,height:g}=i.floating;let v,_;h==="top"||h==="bottom"?(v=h,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,v=f==="end"?"top":"bottom");const y=g-d.top-d.bottom,w=T-d.left-d.right,R=Ki(g-d[v],y),k=Ki(T-d[_],w),V=!e.middlewareData.shift;let x=R,b=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(b=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=y),V&&!f){const C=Wn(d.left,0),N=Wn(d.right,0),O=Wn(d.top,0),P=Wn(d.bottom,0);p?b=T-2*(C!==0||N!==0?C+N:Wn(d.left,d.right)):x=g-2*(O!==0||P!==0?O+P:Wn(d.top,d.bottom))}await l({...e,availableWidth:b,availableHeight:x});const A=await o.getDimensions(a.floating);return T!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function lm(){return typeof window<"u"}function ac(t){return gP(t)?(t.nodeName||"").toLowerCase():"#document"}function Jn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(gP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gP(t){return lm()?t instanceof Node||t instanceof Jn(t).Node:!1}function Dr(t){return lm()?t instanceof Element||t instanceof Jn(t).Element:!1}function ls(t){return lm()?t instanceof HTMLElement||t instanceof Jn(t).HTMLElement:!1}function kI(t){return!lm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jn(t).ShadowRoot}const tU=new Set(["inline","contents"]);function Nd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Nr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!tU.has(s)}const nU=new Set(["table","td","th"]);function rU(t){return nU.has(ac(t))}const sU=[":popover-open",":modal"];function cm(t){return sU.some(e=>{try{return t.matches(e)}catch{return!1}})}const iU=["transform","translate","scale","rotate","perspective"],oU=["transform","translate","scale","rotate","perspective","filter"],aU=["paint","layout","strict","content"];function F_(t){const e=U_(),n=Dr(t)?Nr(t):t;return iU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||oU.some(r=>(n.willChange||"").includes(r))||aU.some(r=>(n.contain||"").includes(r))}function lU(t){let e=Gi(t);for(;ls(e)&&!Dl(e);){if(F_(e))return e;if(cm(e))return null;e=Gi(e)}return null}function U_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const cU=new Set(["html","body","#document"]);function Dl(t){return cU.has(ac(t))}function Nr(t){return Jn(t).getComputedStyle(t)}function um(t){return Dr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Gi(t){if(ac(t)==="html")return t;const e=t.assignedSlot||t.parentNode||kI(t)&&t.host||ds(t);return kI(e)?e.host:e}function yP(t){const e=Gi(t);return Dl(e)?t.ownerDocument?t.ownerDocument.body:t.body:ls(e)&&Nd(e)?e:yP(e)}function ed(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=yP(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Jn(s);if(i){const a=Cv(o);return e.concat(o,o.visualViewport||[],Nd(s)?s:[],a&&n?ed(a):[])}return e.concat(s,ed(s,[],n))}function Cv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function vP(t){const e=Nr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ls(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=ep(n)!==i||ep(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function j_(t){return Dr(t)?t:t.contextElement}function hl(t){const e=j_(t);if(!ls(e))return ss(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=vP(e);let o=(i?ep(n.width):n.width)/r,a=(i?ep(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const uU=ss(0);function wP(t){const e=Jn(t);return!U_()||!e.visualViewport?uU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function dU(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Jn(t)?!1:e}function aa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=j_(t);let o=ss(1);e&&(r?Dr(r)&&(o=hl(r)):o=hl(t));const a=dU(i,n,r)?wP(i):ss(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Jn(i),p=r&&Dr(r)?Jn(r):r;let T=f,g=Cv(T);for(;g&&r&&p!==T;){const v=hl(g),_=g.getBoundingClientRect(),y=Nr(g),w=_.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,R=_.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=w,c+=R,T=Jn(g),g=Cv(T)}}return np({width:d,height:h,x:l,y:c})}function dm(t,e){const n=um(t).scrollLeft;return e?e.left+n:aa(ds(t)).left+n}function _P(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-dm(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function hU(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ds(r),a=e?cm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ss(1);const d=ss(0),h=ls(r);if((h||!h&&!i)&&((ac(r)!=="body"||Nd(o))&&(l=um(r)),ls(r))){const p=aa(r);c=hl(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?_P(o,l):ss(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function fU(t){return Array.from(t.getClientRects())}function pU(t){const e=ds(t),n=um(t),r=t.ownerDocument.body,s=Wn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Wn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dm(t);const a=-n.scrollTop;return Nr(r).direction==="rtl"&&(o+=Wn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const DI=25;function mU(t,e){const n=Jn(t),r=ds(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=U_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=dm(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,T=Math.abs(r.clientWidth-h.clientWidth-p);T<=DI&&(i-=T)}else c<=DI&&(i+=c);return{width:i,height:o,x:a,y:l}}const gU=new Set(["absolute","fixed"]);function yU(t,e){const n=aa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ls(t)?hl(t):ss(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function NI(t,e,n){let r;if(e==="viewport")r=mU(t,n);else if(e==="document")r=pU(ds(t));else if(Dr(e))r=yU(e,n);else{const s=wP(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return np(r)}function EP(t,e){const n=Gi(t);return n===e||!Dr(n)||Dl(n)?!1:Nr(n).position==="fixed"||EP(n,e)}function vU(t,e){const n=e.get(t);if(n)return n;let r=ed(t,[],!1).filter(a=>Dr(a)&&ac(a)!=="body"),s=null;const i=Nr(t).position==="fixed";let o=i?Gi(t):t;for(;Dr(o)&&!Dl(o);){const a=Nr(o),l=F_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&gU.has(s.position)||Nd(o)&&!l&&EP(t,o))?r=r.filter(d=>d!==o):s=a,o=Gi(o)}return e.set(t,r),r}function wU(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?cm(e)?[]:vU(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=NI(e,d,s);return c.top=Wn(h.top,c.top),c.right=Ki(h.right,c.right),c.bottom=Ki(h.bottom,c.bottom),c.left=Wn(h.left,c.left),c},NI(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _U(t){const{width:e,height:n}=vP(t);return{width:e,height:n}}function EU(t,e,n){const r=ls(e),s=ds(e),i=n==="fixed",o=aa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ss(0);function c(){l.x=dm(s)}if(r||!r&&!i)if((ac(e)!=="body"||Nd(s))&&(a=um(e)),r){const p=aa(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?_P(s,a):ss(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Yg(t){return Nr(t).position==="static"}function OI(t,e){if(!ls(t)||Nr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function TP(t,e){const n=Jn(t);if(cm(t))return n;if(!ls(t)){let s=Gi(t);for(;s&&!Dl(s);){if(Dr(s)&&!Yg(s))return s;s=Gi(s)}return n}let r=OI(t,e);for(;r&&rU(r)&&Yg(r);)r=OI(r,e);return r&&Dl(r)&&Yg(r)&&!F_(r)?n:r||lU(t)||n}const TU=async function(t){const e=this.getOffsetParent||TP,n=this.getDimensions,r=await n(t.floating);return{reference:EU(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function IU(t){return Nr(t).direction==="rtl"}const SU={convertOffsetParentRelativeRectToViewportRelativeRect:hU,getDocumentElement:ds,getClippingRect:wU,getOffsetParent:TP,getElementRects:TU,getClientRects:fU,getDimensions:_U,getScale:hl,isElement:Dr,isRTL:IU};function IP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function bU(t,e){let n=null,r;const s=ds(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const T=Ch(h),g=Ch(s.clientWidth-(d+f)),v=Ch(s.clientHeight-(h+p)),_=Ch(d),w={rootMargin:-T+"px "+-g+"px "+-v+"px "+-_+"px",threshold:Wn(0,Ki(1,l))||1};let R=!0;function k(V){const x=V[0].intersectionRatio;if(x!==l){if(!R)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!IP(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(k,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(t)}return o(!0),i}function AU(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=j_(t),d=s||i?[...c?ed(c):[],...ed(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=c&&a?bU(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(_=>{let[y]=_;y&&y.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let T,g=l?aa(t):null;l&&v();function v(){const _=aa(t);g&&!IP(g,_)&&n(),g=_,T=requestAnimationFrame(v)}return n(),()=>{var _;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(_=p)==null||_.disconnect(),p=null,l&&cancelAnimationFrame(T)}}const xU=X4,RU=J4,PU=G4,CU=eU,kU=Q4,VI=K4,DU=Z4,NU=(t,e,n)=>{const r=new Map,s={platform:SU,...n},i={...s.platform,_c:r};return H4(t,e,{...s,platform:i})};var OU=typeof document<"u",VU=function(){},hf=OU?I.useLayoutEffect:VU;function rp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!rp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!rp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function SP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function LI(t,e){const n=SP(t);return Math.round(e*n)/n}function Xg(t){const e=I.useRef(t);return hf(()=>{e.current=t}),e}function LU(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=I.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=I.useState(r);rp(f,r)||p(r);const[T,g]=I.useState(null),[v,_]=I.useState(null),y=I.useCallback(L=>{L!==V.current&&(V.current=L,g(L))},[]),w=I.useCallback(L=>{L!==x.current&&(x.current=L,_(L))},[]),R=i||T,k=o||v,V=I.useRef(null),x=I.useRef(null),b=I.useRef(d),A=l!=null,C=Xg(l),N=Xg(s),O=Xg(c),P=I.useCallback(()=>{if(!V.current||!x.current)return;const L={placement:e,strategy:n,middleware:f};N.current&&(L.platform=N.current),NU(V.current,x.current,L).then(M=>{const K={...M,isPositioned:O.current!==!1};F.current&&!rp(b.current,K)&&(b.current=K,kd.flushSync(()=>{h(K)}))})},[f,e,n,N,O]);hf(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[c]);const F=I.useRef(!1);hf(()=>(F.current=!0,()=>{F.current=!1}),[]),hf(()=>{if(R&&(V.current=R),k&&(x.current=k),R&&k){if(C.current)return C.current(R,k,P);P()}},[R,k,P,C,A]);const $=I.useMemo(()=>({reference:V,floating:x,setReference:y,setFloating:w}),[y,w]),H=I.useMemo(()=>({reference:R,floating:k}),[R,k]),Y=I.useMemo(()=>{const L={position:n,left:0,top:0};if(!H.floating)return L;const M=LI(H.floating,d.x),K=LI(H.floating,d.y);return a?{...L,transform:"translate("+M+"px, "+K+"px)",...SP(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:K}},[n,a,H.floating,d.x,d.y]);return I.useMemo(()=>({...d,update:P,refs:$,elements:H,floatingStyles:Y}),[d,P,$,H,Y])}const MU=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?VI({element:r.current,padding:s}).fn(n):{}:r?VI({element:r,padding:s}).fn(n):{}}}},FU=(t,e)=>({...xU(t),options:[t,e]}),UU=(t,e)=>({...RU(t),options:[t,e]}),jU=(t,e)=>({...DU(t),options:[t,e]}),BU=(t,e)=>({...PU(t),options:[t,e]}),$U=(t,e)=>({...CU(t),options:[t,e]}),zU=(t,e)=>({...kU(t),options:[t,e]}),qU=(t,e)=>({...MU(t),options:[t,e]});var WU="Arrow",bP=I.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return S.jsx(gt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:S.jsx("polygon",{points:"0,0 30,0 15,10"})})});bP.displayName=WU;var HU=bP;function AP(t){const[e,n]=I.useState(void 0);return Ls(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var B_="Popper",[xP,RP]=sc(B_),[KU,PP]=xP(B_),CP=t=>{const{__scopePopper:e,children:n}=t,[r,s]=I.useState(null);return S.jsx(KU,{scope:e,anchor:r,onAnchorChange:s,children:n})};CP.displayName=B_;var kP="PopperAnchor",DP=I.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=PP(kP,n),o=I.useRef(null),a=en(e,o),l=I.useRef(null);return I.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:S.jsx(gt.div,{...s,ref:a})});DP.displayName=kP;var $_="PopperContent",[GU,QU]=xP($_),NP=I.forwardRef((t,e)=>{var ne,xe,Ie,ge,Re,nt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:T,...g}=t,v=PP($_,n),[_,y]=I.useState(null),w=en(e,rt=>y(rt)),[R,k]=I.useState(null),V=AP(R),x=(V==null?void 0:V.width)??0,b=(V==null?void 0:V.height)??0,A=r+(i!=="center"?"-"+i:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(c)?c:[c],O=N.length>0,P={padding:C,boundary:N.filter(XU),altBoundary:O},{refs:F,floatingStyles:$,placement:H,isPositioned:Y,middlewareData:L}=LU({strategy:"fixed",placement:A,whileElementsMounted:(...rt)=>AU(...rt,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[FU({mainAxis:s+b,alignmentAxis:o}),l&&UU({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?jU():void 0,...P}),l&&BU({...P}),$U({...P,apply:({elements:rt,rects:Vt,availableWidth:kt,availableHeight:Lt})=>{const{width:Qe,height:ye}=Vt.reference,Ue=rt.floating.style;Ue.setProperty("--radix-popper-available-width",`${kt}px`),Ue.setProperty("--radix-popper-available-height",`${Lt}px`),Ue.setProperty("--radix-popper-anchor-width",`${Qe}px`),Ue.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),R&&qU({element:R,padding:a}),JU({arrowWidth:x,arrowHeight:b}),f&&zU({strategy:"referenceHidden",...P})]}),[M,K]=LP(H),X=as(T);Ls(()=>{Y&&(X==null||X())},[Y,X]);const z=(ne=L.arrow)==null?void 0:ne.x,se=(xe=L.arrow)==null?void 0:xe.y,oe=((Ie=L.arrow)==null?void 0:Ie.centerOffset)!==0,[de,ie]=I.useState();return Ls(()=>{_&&ie(window.getComputedStyle(_).zIndex)},[_]),S.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:Y?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(ge=L.transformOrigin)==null?void 0:ge.x,(Re=L.transformOrigin)==null?void 0:Re.y].join(" "),...((nt=L.hide)==null?void 0:nt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:S.jsx(GU,{scope:n,placedSide:M,onArrowChange:k,arrowX:z,arrowY:se,shouldHideArrow:oe,children:S.jsx(gt.div,{"data-side":M,"data-align":K,...g,ref:w,style:{...g.style,animation:Y?void 0:"none"}})})})});NP.displayName=$_;var OP="PopperArrow",YU={top:"bottom",right:"left",bottom:"top",left:"right"},VP=I.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=QU(OP,r),o=YU[i.placedSide];return S.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:S.jsx(HU,{...s,ref:n,style:{...s.style,display:"block"}})})});VP.displayName=OP;function XU(t){return t!==null}var JU=t=>({name:"transformOrigin",options:t,fn(e){var v,_,y;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=LP(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let T="",g="";return c==="bottom"?(T=o?h:`${f}px`,g=`${-l}px`):c==="top"?(T=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(T=`${-l}px`,g=o?h:`${p}px`):c==="left"&&(T=`${r.floating.width+l}px`,g=o?h:`${p}px`),{data:{x:T,y:g}}}});function LP(t){const[e,n="center"]=t.split("-");return[e,n]}var zH=CP,ZU=DP,ej=NP,tj=VP,[hm]=sc("Tooltip",[RP]),z_=RP(),MP="TooltipProvider",nj=700,MI="tooltip.open",[rj,FP]=hm(MP),UP=t=>{const{__scopeTooltip:e,delayDuration:n=nj,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=I.useRef(!0),a=I.useRef(!1),l=I.useRef(0);return I.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),S.jsx(rj,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:I.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:I.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:I.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};UP.displayName=MP;var jP="Tooltip",[qH,fm]=hm(jP),kv="TooltipTrigger",sj=I.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=fm(kv,n),i=FP(kv,n),o=z_(n),a=I.useRef(null),l=en(e,a,s.onTriggerChange),c=I.useRef(!1),d=I.useRef(!1),h=I.useCallback(()=>c.current=!1,[]);return I.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),S.jsx(ZU,{asChild:!0,...o,children:S.jsx(gt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Je(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Je(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Je(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Je(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Je(t.onBlur,s.onClose),onClick:Je(t.onClick,s.onClose)})})});sj.displayName=kv;var ij="TooltipPortal",[WH,oj]=hm(ij,{forceMount:void 0}),Nl="TooltipContent",BP=I.forwardRef((t,e)=>{const n=oj(Nl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=fm(Nl,t.__scopeTooltip);return S.jsx(_a,{present:r||o.open,children:o.disableHoverableContent?S.jsx($P,{side:s,...i,ref:e}):S.jsx(aj,{side:s,...i,ref:e})})}),aj=I.forwardRef((t,e)=>{const n=fm(Nl,t.__scopeTooltip),r=FP(Nl,t.__scopeTooltip),s=I.useRef(null),i=en(e,s),[o,a]=I.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=I.useCallback(()=>{a(null),h(!1)},[h]),p=I.useCallback((T,g)=>{const v=T.currentTarget,_={x:T.clientX,y:T.clientY},y=hj(_,v.getBoundingClientRect()),w=fj(_,y),R=pj(g.getBoundingClientRect()),k=gj([...w,...R]);a(k),h(!0)},[h]);return I.useEffect(()=>()=>f(),[f]),I.useEffect(()=>{if(l&&d){const T=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",T),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",T),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),I.useEffect(()=>{if(o){const T=g=>{const v=g.target,_={x:g.clientX,y:g.clientY},y=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),w=!mj(_,o);y?f():w&&(f(),c())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[l,d,o,c,f]),S.jsx($P,{...t,ref:i})}),[lj,cj]=hm(jP,{isInside:!1}),uj=iM("TooltipContent"),$P=I.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=fm(Nl,n),c=z_(n),{onClose:d}=l;return I.useEffect(()=>(document.addEventListener(MI,d),()=>document.removeEventListener(MI,d)),[d]),I.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),S.jsx(im,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:S.jsxs(ej,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[S.jsx(uj,{children:r}),S.jsx(lj,{scope:n,isInside:!0,children:S.jsx(PM,{id:l.contentId,role:"tooltip",children:s||r})})]})})});BP.displayName=Nl;var zP="TooltipArrow",dj=I.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=z_(n);return cj(zP,n).isInside?null:S.jsx(tj,{...s,...r,ref:e})});dj.displayName=zP;function hj(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function fj(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function pj(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function mj(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function gj(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),yj(e)}function yj(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var vj=UP,qP=BP;const wj=vj,_j=I.forwardRef(({className:t,sideOffset:e=4,...n},r)=>S.jsx(qP,{ref:r,sideOffset:e,className:tn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));_j.displayName=qP.displayName;var pm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ej={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},wi,Pw,WA,Tj=(WA=class{constructor(){Fe(this,wi,Ej);Fe(this,Pw,!1)}setTimeoutProvider(t){Se(this,wi,t)}setTimeout(t,e){return G(this,wi).setTimeout(t,e)}clearTimeout(t){G(this,wi).clearTimeout(t)}setInterval(t,e){return G(this,wi).setInterval(t,e)}clearInterval(t){G(this,wi).clearInterval(t)}},wi=new WeakMap,Pw=new WeakMap,WA),Dv=new Tj;function Ij(t){setTimeout(t,0)}var mm=typeof window>"u"||"Deno"in globalThis;function wr(){}function Sj(t,e){return typeof t=="function"?t(e):t}function bj(t){return typeof t=="number"&&t>=0&&t!==1/0}function Aj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Nv(t,e){return typeof t=="function"?t(e):t}function xj(t,e){return typeof t=="function"?t(e):t}function FI(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==q_(o,e.options))return!1}else if(!nd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function UI(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(td(e.options.mutationKey)!==td(i))return!1}else if(!nd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function q_(t,e){return((e==null?void 0:e.queryKeyHashFn)||td)(t)}function td(t){return JSON.stringify(t,(e,n)=>Ov(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function nd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>nd(t[n],e[n])):!1}var Rj=Object.prototype.hasOwnProperty;function WP(t,e){if(t===e)return t;const n=jI(t)&&jI(e);if(!n&&!(Ov(t)&&Ov(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:Rj.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=WP(h,f);a[d]=p,p===h&&l++}return s===o&&l===s?t:a}function jI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ov(t){if(!BI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!BI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function BI(t){return Object.prototype.toString.call(t)==="[object Object]"}function Pj(t){return new Promise(e=>{Dv.setTimeout(e,t)})}function Cj(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?WP(t,e):e}function kj(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Dj(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var W_=Symbol();function HP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===W_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var zo,_i,yl,HA,Nj=(HA=class extends pm{constructor(){super();Fe(this,zo);Fe(this,_i);Fe(this,yl);Se(this,yl,e=>{if(!mm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,_i)||this.setEventListener(G(this,yl))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,_i))==null||e.call(this),Se(this,_i,void 0))}setEventListener(e){var n;Se(this,yl,e),(n=G(this,_i))==null||n.call(this),Se(this,_i,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){G(this,zo)!==e&&(Se(this,zo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof G(this,zo)=="boolean"?G(this,zo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zo=new WeakMap,_i=new WeakMap,yl=new WeakMap,HA),KP=new Nj;function Oj(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var Vj=Ij;function Lj(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Vj;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var En=Lj(),vl,Ei,wl,KA,Mj=(KA=class extends pm{constructor(){super();Fe(this,vl,!0);Fe(this,Ei);Fe(this,wl);Se(this,wl,e=>{if(!mm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Ei)||this.setEventListener(G(this,wl))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,Ei))==null||e.call(this),Se(this,Ei,void 0))}setEventListener(e){var n;Se(this,wl,e),(n=G(this,Ei))==null||n.call(this),Se(this,Ei,e(this.setOnline.bind(this)))}setOnline(e){G(this,vl)!==e&&(Se(this,vl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return G(this,vl)}},vl=new WeakMap,Ei=new WeakMap,wl=new WeakMap,KA),sp=new Mj;function Fj(t){return Math.min(1e3*2**t,3e4)}function GP(t){return(t??"online")==="online"?sp.isOnline():!0}var Vv=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function QP(t){let e=!1,n=0,r;const s=Oj(),i=()=>s.status!=="pending",o=g=>{var v;if(!i()){const _=new Vv(g);f(_),(v=t.onCancel)==null||v.call(t,_)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>KP.isFocused()&&(t.networkMode==="always"||sp.isOnline())&&t.canRun(),d=()=>GP(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var v;r=_=>{(i()||c())&&g(_)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),T=()=>{if(i())return;let g;const v=n===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(_){g=Promise.reject(_)}Promise.resolve(g).then(h).catch(_=>{var V;if(i())return;const y=t.retry??(mm?0:3),w=t.retryDelay??Fj,R=typeof w=="function"?w(n,_):w,k=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,_);if(e||!k){f(_);return}n++,(V=t.onFail)==null||V.call(t,n,_),Pj(R).then(()=>c()?void 0:p()).then(()=>{e?f(_):T()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?T():p().then(T),s)}}var qo,GA,YP=(GA=class{constructor(){Fe(this,qo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bj(this.gcTime)&&Se(this,qo,Dv.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(mm?1/0:5*60*1e3))}clearGcTimeout(){G(this,qo)&&(Dv.clearTimeout(G(this,qo)),Se(this,qo,void 0))}},qo=new WeakMap,GA),Wo,_l,or,Ho,Wt,Id,Ko,_r,ys,QA,Uj=(QA=class extends YP{constructor(n){super();Fe(this,_r);Fe(this,Wo);Fe(this,_l);Fe(this,or);Fe(this,Ho);Fe(this,Wt);Fe(this,Id);Fe(this,Ko);Se(this,Ko,!1),Se(this,Id,n.defaultOptions),this.setOptions(n.options),this.observers=[],Se(this,Ho,n.client),Se(this,or,G(this,Ho).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Se(this,Wo,zI(this.options)),this.state=n.state??G(this,Wo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=G(this,Wt))==null?void 0:n.promise}setOptions(n){if(this.options={...G(this,Id),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=zI(this.options);r.data!==void 0&&(this.setState($I(r.data,r.dataUpdatedAt)),Se(this,Wo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,or).remove(this)}setData(n,r){const s=Cj(this.state.data,n,this.options);return rn(this,_r,ys).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){rn(this,_r,ys).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=G(this,Wt))==null?void 0:s.promise;return(i=G(this,Wt))==null||i.cancel(n),r?r.then(wr).catch(wr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Wo))}isActive(){return this.observers.some(n=>xj(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===W_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Nv(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Aj(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Wt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Wt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),G(this,or).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(G(this,Wt)&&(G(this,Ko)?G(this,Wt).cancel({revert:!0}):G(this,Wt).cancelRetry()),this.scheduleGc()),G(this,or).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||rn(this,_r,ys).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,p,T,g,v,_,y,w,R;if(this.state.fetchStatus!=="idle"&&((c=G(this,Wt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(G(this,Wt))return G(this,Wt).continueRetry(),G(this,Wt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const k=this.observers.find(V=>V.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,i=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(Se(this,Ko,!0),s.signal)})},o=()=>{const k=HP(this.options,r),x=(()=>{const b={client:G(this,Ho),queryKey:this.queryKey,meta:this.meta};return i(b),b})();return Se(this,Ko,!1),this.options.persister?this.options.persister(k,x,this):k(x)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:G(this,Ho),state:this.state,fetchFn:o};return i(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),Se(this,_l,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&rn(this,_r,ys).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),Se(this,Wt,QP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof Vv&&k.revert&&this.setState({...G(this,_l),fetchStatus:"idle"}),s.abort()},onFail:(k,V)=>{rn(this,_r,ys).call(this,{type:"failed",failureCount:k,error:V})},onPause:()=>{rn(this,_r,ys).call(this,{type:"pause"})},onContinue:()=>{rn(this,_r,ys).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await G(this,Wt).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(T=(p=G(this,or).config).onSuccess)==null||T.call(p,k,this),(v=(g=G(this,or).config).onSettled)==null||v.call(g,k,this.state.error,this),k}catch(k){if(k instanceof Vv){if(k.silent)return G(this,Wt).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw rn(this,_r,ys).call(this,{type:"error",error:k}),(y=(_=G(this,or).config).onError)==null||y.call(_,k,this),(R=(w=G(this,or).config).onSettled)==null||R.call(w,this.state.data,k,this),k}finally{this.scheduleGc()}}},Wo=new WeakMap,_l=new WeakMap,or=new WeakMap,Ho=new WeakMap,Wt=new WeakMap,Id=new WeakMap,Ko=new WeakMap,_r=new WeakSet,ys=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...jj(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...$I(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Se(this,_l,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),En.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),G(this,or).notify({query:this,type:"updated",action:n})})},QA);function jj(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:GP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $I(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function zI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function qI(t){return{onFetch:(e,n)=>{var d,h,f,p,T;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},_=HP(e.options,e.fetchOptions),y=async(w,R,k)=>{if(g)return Promise.reject();if(R==null&&w.pages.length)return Promise.resolve(w);const x=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:R,direction:k?"backward":"forward",meta:e.options.meta};return v(N),N})(),b=await _(x),{maxPages:A}=e.options,C=k?Dj:kj;return{pages:C(w.pages,b,A),pageParams:C(w.pageParams,R,A)}};if(s&&i.length){const w=s==="backward",R=w?Bj:WI,k={pages:i,pageParams:o},V=R(r,k);a=await y(k,V,w)}else{const w=t??i.length;do{const R=l===0?o[0]??r.initialPageParam:WI(r,a);if(l>0&&R==null)break;a=await y(a,R),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function WI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Bj(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Sd,Hr,vn,Go,Kr,ui,YA,$j=(YA=class extends YP{constructor(n){super();Fe(this,Kr);Fe(this,Sd);Fe(this,Hr);Fe(this,vn);Fe(this,Go);Se(this,Sd,n.client),this.mutationId=n.mutationId,Se(this,vn,n.mutationCache),Se(this,Hr,[]),this.state=n.state||zj(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){G(this,Hr).includes(n)||(G(this,Hr).push(n),this.clearGcTimeout(),G(this,vn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Se(this,Hr,G(this,Hr).filter(r=>r!==n)),this.scheduleGc(),G(this,vn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){G(this,Hr).length||(this.state.status==="pending"?this.scheduleGc():G(this,vn).remove(this))}continue(){var n;return((n=G(this,Go))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,p,T,g,v,_,y,w,R,k,V,x,b,A,C;const r=()=>{rn(this,Kr,ui).call(this,{type:"continue"})},s={client:G(this,Sd),meta:this.options.meta,mutationKey:this.options.mutationKey};Se(this,Go,QP({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(N,O)=>{rn(this,Kr,ui).call(this,{type:"failed",failureCount:N,error:O})},onPause:()=>{rn(this,Kr,ui).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,vn).canRun(this)}));const i=this.state.status==="pending",o=!G(this,Go).canStart();try{if(i)r();else{rn(this,Kr,ui).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=G(this,vn).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&rn(this,Kr,ui).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const N=await G(this,Go).start();return await((f=(h=G(this,vn).config).onSuccess)==null?void 0:f.call(h,N,n,this.state.context,this,s)),await((T=(p=this.options).onSuccess)==null?void 0:T.call(p,N,n,this.state.context,s)),await((v=(g=G(this,vn).config).onSettled)==null?void 0:v.call(g,N,null,this.state.variables,this.state.context,this,s)),await((y=(_=this.options).onSettled)==null?void 0:y.call(_,N,null,n,this.state.context,s)),rn(this,Kr,ui).call(this,{type:"success",data:N}),N}catch(N){try{throw await((R=(w=G(this,vn).config).onError)==null?void 0:R.call(w,N,n,this.state.context,this,s)),await((V=(k=this.options).onError)==null?void 0:V.call(k,N,n,this.state.context,s)),await((b=(x=G(this,vn).config).onSettled)==null?void 0:b.call(x,void 0,N,this.state.variables,this.state.context,this,s)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,void 0,N,n,this.state.context,s)),N}finally{rn(this,Kr,ui).call(this,{type:"error",error:N})}}finally{G(this,vn).runNext(this)}}},Sd=new WeakMap,Hr=new WeakMap,vn=new WeakMap,Go=new WeakMap,Kr=new WeakSet,ui=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),En.batch(()=>{G(this,Hr).forEach(s=>{s.onMutationUpdate(n)}),G(this,vn).notify({mutation:this,type:"updated",action:n})})},YA);function zj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _s,Er,bd,XA,qj=(XA=class extends pm{constructor(e={}){super();Fe(this,_s);Fe(this,Er);Fe(this,bd);this.config=e,Se(this,_s,new Set),Se(this,Er,new Map),Se(this,bd,0)}build(e,n,r){const s=new $j({client:e,mutationCache:this,mutationId:++ch(this,bd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){G(this,_s).add(e);const n=kh(e);if(typeof n=="string"){const r=G(this,Er).get(n);r?r.push(e):G(this,Er).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(G(this,_s).delete(e)){const n=kh(e);if(typeof n=="string"){const r=G(this,Er).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&G(this,Er).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=kh(e);if(typeof n=="string"){const r=G(this,Er).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=kh(e);if(typeof n=="string"){const s=(r=G(this,Er).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){En.batch(()=>{G(this,_s).forEach(e=>{this.notify({type:"removed",mutation:e})}),G(this,_s).clear(),G(this,Er).clear()})}getAll(){return Array.from(G(this,_s))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>UI(n,r))}findAll(e={}){return this.getAll().filter(n=>UI(e,n))}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return En.batch(()=>Promise.all(e.map(n=>n.continue().catch(wr))))}},_s=new WeakMap,Er=new WeakMap,bd=new WeakMap,XA);function kh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Gr,JA,Wj=(JA=class extends pm{constructor(e={}){super();Fe(this,Gr);this.config=e,Se(this,Gr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??q_(s,n);let o=this.get(i);return o||(o=new Uj({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){G(this,Gr).has(e.queryHash)||(G(this,Gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=G(this,Gr).get(e.queryHash);n&&(e.destroy(),n===e&&G(this,Gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){En.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,Gr).get(e)}getAll(){return[...G(this,Gr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>FI(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>FI(e,r)):n}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){En.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Gr=new WeakMap,JA),wt,Ti,Ii,El,Tl,Si,Il,Sl,ZA,Hj=(ZA=class{constructor(t={}){Fe(this,wt);Fe(this,Ti);Fe(this,Ii);Fe(this,El);Fe(this,Tl);Fe(this,Si);Fe(this,Il);Fe(this,Sl);Se(this,wt,t.queryCache||new Wj),Se(this,Ti,t.mutationCache||new qj),Se(this,Ii,t.defaultOptions||{}),Se(this,El,new Map),Se(this,Tl,new Map),Se(this,Si,0)}mount(){ch(this,Si)._++,G(this,Si)===1&&(Se(this,Il,KP.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,wt).onFocus())})),Se(this,Sl,sp.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,wt).onOnline())})))}unmount(){var t,e;ch(this,Si)._--,G(this,Si)===0&&((t=G(this,Il))==null||t.call(this),Se(this,Il,void 0),(e=G(this,Sl))==null||e.call(this),Se(this,Sl,void 0))}isFetching(t){return G(this,wt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return G(this,Ti).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,wt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=G(this,wt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Nv(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return G(this,wt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=G(this,wt).get(r.queryHash),i=s==null?void 0:s.state.data,o=Sj(e,i);if(o!==void 0)return G(this,wt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return En.batch(()=>G(this,wt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,wt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=G(this,wt);En.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=G(this,wt);return En.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=En.batch(()=>G(this,wt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(wr).catch(wr)}invalidateQueries(t,e={}){return En.batch(()=>(G(this,wt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=En.batch(()=>G(this,wt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(wr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(wr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=G(this,wt).build(this,e);return n.isStaleByTime(Nv(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(wr).catch(wr)}fetchInfiniteQuery(t){return t.behavior=qI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(wr).catch(wr)}ensureInfiniteQueryData(t){return t.behavior=qI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return sp.isOnline()?G(this,Ti).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,wt)}getMutationCache(){return G(this,Ti)}getDefaultOptions(){return G(this,Ii)}setDefaultOptions(t){Se(this,Ii,t)}setQueryDefaults(t,e){G(this,El).set(td(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...G(this,El).values()],n={};return e.forEach(r=>{nd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){G(this,Tl).set(td(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...G(this,Tl).values()],n={};return e.forEach(r=>{nd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...G(this,Ii).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=q_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===W_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...G(this,Ii).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){G(this,wt).clear(),G(this,Ti).clear()}},wt=new WeakMap,Ti=new WeakMap,Ii=new WeakMap,El=new WeakMap,Tl=new WeakMap,Si=new WeakMap,Il=new WeakMap,Sl=new WeakMap,ZA),Kj=I.createContext(void 0),Gj=({client:t,children:e})=>(I.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),S.jsx(Kj.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rd.apply(this,arguments)}var xi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xi||(xi={}));const HI="popstate";function Qj(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return ip("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:sd(s)}return XP(e,n,null,t)}function Yj(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Ea(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ip("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:sd(i))}function r(s,i){H_(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return XP(e,n,r,t)}function Rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function H_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xj(){return Math.random().toString(36).substr(2,8)}function KI(t,e){return{usr:t.state,key:t.key,idx:e}}function ip(t,e,n,r){return n===void 0&&(n=null),rd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ea(e):e,{state:n,key:e&&e.key||r||Xj()})}function sd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ea(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function XP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=xi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(rd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=xi.Pop;let v=d(),_=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:_})}function f(v,_){a=xi.Push;let y=ip(g.location,v,_);n&&n(y,v),c=d()+1;let w=KI(y,c),R=g.createHref(y);try{o.pushState(w,"",R)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(R)}i&&l&&l({action:a,location:g.location,delta:1})}function p(v,_){a=xi.Replace;let y=ip(g.location,v,_);n&&n(y,v),c=d();let w=KI(y,c),R=g.createHref(y);o.replaceState(w,"",R),i&&l&&l({action:a,location:g.location,delta:0})}function T(v){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:sd(v);return y=y.replace(/ $/,"%20"),Rt(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let g={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(HI,h),l=v,()=>{s.removeEventListener(HI,h),l=null}},createHref(v){return e(s,v)},createURL:T,encodeLocation(v){let _=T(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var GI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(GI||(GI={}));function Jj(t,e,n){return n===void 0&&(n="/"),Zj(t,e,n)}function Zj(t,e,n,r){let s=typeof e=="string"?Ea(e):e,i=K_(s.pathname||"/",n);if(i==null)return null;let o=JP(t);e3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=h3(i);a=c3(o[l],c)}return a}function JP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Rt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Fi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Rt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),JP(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:a3(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of ZP(i.path))s(i,o,l)}),e}function ZP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ZP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function e3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:l3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const t3=/^:[\w-]+$/,n3=3,r3=2,s3=1,i3=10,o3=-2,QI=t=>t==="*";function a3(t,e){let n=t.split("/"),r=n.length;return n.some(QI)&&(r+=o3),e&&(r+=r3),n.filter(s=>!QI(s)).reduce((s,i)=>s+(t3.test(i)?n3:i===""?s3:i3),r)}function l3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function c3(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=u3({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Fi([i,h.pathname]),pathnameBase:g3(Fi([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Fi([i,h.pathnameBase]))}return o}function u3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=d3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const T=a[h];return p&&!T?c[f]=void 0:c[f]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function d3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),H_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function h3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return H_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function K_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function f3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ea(t):t;return{pathname:n?n.startsWith("/")?n:p3(n,e):e,search:y3(r),hash:v3(s)}}function p3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Jg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function G_(t,e){let n=m3(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Q_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ea(t):(s=rd({},t),Rt(!s.pathname||!s.pathname.includes("?"),Jg("?","pathname","search",s)),Rt(!s.pathname||!s.pathname.includes("#"),Jg("#","pathname","hash",s)),Rt(!s.search||!s.search.includes("#"),Jg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=f3(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Fi=t=>t.join("/").replace(/\/\/+/g,"/"),g3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),y3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function w3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eC=["post","put","patch","delete"];new Set(eC);const _3=["get",...eC];new Set(_3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function id(){return id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},id.apply(this,arguments)}const Y_=I.createContext(null),E3=I.createContext(null),oo=I.createContext(null),gm=I.createContext(null),qs=I.createContext({outlet:null,matches:[],isDataRoute:!1}),tC=I.createContext(null);function T3(t,e){let{relative:n}=e===void 0?{}:e;lc()||Rt(!1);let{basename:r,navigator:s}=I.useContext(oo),{hash:i,pathname:o,search:a}=rC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Fi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function lc(){return I.useContext(gm)!=null}function hs(){return lc()||Rt(!1),I.useContext(gm).location}function nC(t){I.useContext(oo).static||I.useLayoutEffect(t)}function cc(){let{isDataRoute:t}=I.useContext(qs);return t?V3():I3()}function I3(){lc()||Rt(!1);let t=I.useContext(Y_),{basename:e,future:n,navigator:r}=I.useContext(oo),{matches:s}=I.useContext(qs),{pathname:i}=hs(),o=JSON.stringify(G_(s,n.v7_relativeSplatPath)),a=I.useRef(!1);return nC(()=>{a.current=!0}),I.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Q_(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function GH(){let{matches:t}=I.useContext(qs),e=t[t.length-1];return e?e.params:{}}function rC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(oo),{matches:s}=I.useContext(qs),{pathname:i}=hs(),o=JSON.stringify(G_(s,r.v7_relativeSplatPath));return I.useMemo(()=>Q_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function S3(t,e){return b3(t,e)}function b3(t,e,n,r){lc()||Rt(!1);let{navigator:s}=I.useContext(oo),{matches:i}=I.useContext(qs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=hs(),d;if(e){var h;let v=typeof e=="string"?Ea(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Rt(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let T=Jj(t,{pathname:p}),g=C3(T&&T.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Fi([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Fi([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&g?I.createElement(gm.Provider,{value:{location:id({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:xi.Pop}},g):g}function A3(){let t=O3(),e=w3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,null)}const x3=I.createElement(A3,null);class R3 extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(qs.Provider,{value:this.props.routeContext},I.createElement(tC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P3(t){let{routeContext:e,match:n,children:r}=t,s=I.useContext(Y_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(qs.Provider,{value:e},r)}function C3(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Rt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,T=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,T=!1,g=null,v=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||x3,l&&(c<0&&f===0?(L3("route-fallback"),T=!0,v=null):c===f&&(T=!0,v=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),y=()=>{let w;return p?w=g:T?w=v:h.route.Component?w=I.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,I.createElement(P3,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?I.createElement(R3,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var sC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sC||{}),iC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iC||{});function k3(t){let e=I.useContext(Y_);return e||Rt(!1),e}function D3(t){let e=I.useContext(E3);return e||Rt(!1),e}function N3(t){let e=I.useContext(qs);return e||Rt(!1),e}function oC(t){let e=N3(),n=e.matches[e.matches.length-1];return n.route.id||Rt(!1),n.route.id}function O3(){var t;let e=I.useContext(tC),n=D3(),r=oC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function V3(){let{router:t}=k3(sC.UseNavigateStable),e=oC(iC.UseNavigateStable),n=I.useRef(!1);return nC(()=>{n.current=!0}),I.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,id({fromRouteId:e},i)))},[t,e])}const YI={};function L3(t,e,n){YI[t]||(YI[t]=!0)}function aC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function QH(t){let{to:e,replace:n,state:r,relative:s}=t;lc()||Rt(!1);let{future:i,static:o}=I.useContext(oo),{matches:a}=I.useContext(qs),{pathname:l}=hs(),c=cc(),d=Q_(e,G_(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return I.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function ue(t){Rt(!1)}function lC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=xi.Pop,navigator:i,static:o=!1,future:a}=t;lc()&&Rt(!1);let l=e.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:i,static:o,future:id({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ea(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:T="default"}=r,g=I.useMemo(()=>{let v=K_(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:T},navigationType:s}},[l,d,h,f,p,T,s]);return g==null?null:I.createElement(oo.Provider,{value:c},I.createElement(gm.Provider,{children:n,value:g}))}function XI(t){let{children:e,location:n}=t;return S3(Lv(e),n)}new Promise(()=>{});function Lv(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){n.push.apply(n,Lv(r.props.children,i));return}r.type!==ue&&Rt(!1),!r.props.index||!r.props.children||Rt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mv(){return Mv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mv.apply(this,arguments)}function M3(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function F3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function U3(t,e){return t.button===0&&(!e||e==="_self")&&!F3(t)}function Fv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function j3(t,e){let n=Fv(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const B3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$3="6";try{window.__reactRouterVersion=$3}catch{}const z3="startTransition",op=Ow[z3];function q3(t){let{basename:e,children:n,future:r,window:s}=t,i=I.useRef();i.current==null&&(i.current=Qj({window:s,v5Compat:!0}));let o=i.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=I.useCallback(h=>{c&&op?op(()=>l(h)):l(h)},[l,c]);return I.useLayoutEffect(()=>o.listen(d),[o,d]),I.useEffect(()=>aC(r),[r]),I.createElement(lC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function W3(t){let{basename:e,children:n,future:r,window:s}=t,i=I.useRef();i.current==null&&(i.current=Yj({window:s,v5Compat:!0}));let o=i.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=I.useCallback(h=>{c&&op?op(()=>l(h)):l(h)},[l,c]);return I.useLayoutEffect(()=>o.listen(d),[o,d]),I.useEffect(()=>aC(r),[r]),I.createElement(lC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const H3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G3=I.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=M3(e,B3),{basename:p}=I.useContext(oo),T,g=!1;if(typeof c=="string"&&K3.test(c)&&(T=c,H3))try{let w=new URL(window.location.href),R=c.startsWith("//")?new URL(w.protocol+c):new URL(c),k=K_(R.pathname,p);R.origin===w.origin&&k!=null?c=k+R.search+R.hash:g=!0}catch{}let v=T3(c,{relative:s}),_=Q3(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(w){r&&r(w),w.defaultPrevented||_(w)}return I.createElement("a",Mv({},f,{href:T||v,onClick:g||i?r:y,ref:n,target:l}))});var JI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(JI||(JI={}));var ZI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ZI||(ZI={}));function Q3(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=cc(),c=hs(),d=rC(t,{relative:o});return I.useCallback(h=>{if(U3(h,n)){h.preventDefault();let f=r!==void 0?r:sd(c)===sd(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function YH(t){let e=I.useRef(Fv(t)),n=I.useRef(!1),r=hs(),s=I.useMemo(()=>j3(r.search,n.current?null:e.current),[r.search]),i=cc(),o=I.useCallback((a,l)=>{const c=Fv(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const cC=I.createContext(void 0),Y3=({children:t})=>{const[e,n]=I.useState("medium"),[r,s]=I.useState(!1),[i,o]=I.useState(!1);I.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),I.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),I.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),I.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return S.jsx(cC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},XH=()=>{const t=I.useContext(cC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},X3=eP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),sl=I.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?rM:"button";return S.jsx(o,{className:tn(X3({variant:e,size:n,className:t})),ref:i,...s})});sl.displayName="Button";const Uv=I.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),S.jsx("input",{type:e,className:tn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Uv.displayName="Input";const J3=()=>{};var eS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Z3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},X_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new e6;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class e6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t6=function(t){const e=uC(t);return X_.encodeByteArray(e,!0)},ap=function(t){return t6(t).replace(/\./g,"")},dC=function(t){try{return X_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=()=>hC().__FIREBASE_DEFAULTS__,r6=()=>{if(typeof process>"u"||typeof eS>"u")return;const t=eS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},s6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dC(t[1]);return e&&JSON.parse(e)},ym=()=>{try{return J3()||n6()||r6()||s6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i6=t=>{var e,n;return(n=(e=ym())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},fC=t=>{const e=i6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pC=()=>{var t;return(t=ym())==null?void 0:t.config},o6=t=>{var e;return(e=ym())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ap(JSON.stringify(n)),ap(JSON.stringify(o)),""].join(".")}const Tu={};function l6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?t.emulator.push(e):t.prod.push(e);return t}function c6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tS=!1;function mC(t,e){if(typeof window>"u"||typeof document>"u"||!Ws(window.location.host)||Tu[t]===e||Tu[t]||tS)return;Tu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=l6().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{tS=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=c6(r),p=n("text"),T=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),v=document.getElementById(g)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),d(v,g);const R=c();l(y,_),w.append(y,T,v,R),document.body.appendChild(w)}i?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function gC(){var e;const t=(e=ym())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function h6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function f6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p6(){const t=nn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yC(){return!gC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vC(){return!gC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Z_(){try{return typeof indexedDB=="object"}catch{return!1}}function m6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="FirebaseError";class Lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=g6,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?y6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Lr(s,a,r)}}function y6(t,e){return t.replace(v6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const v6=/\{\$([^}]+)}/g;function Ol(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(nS(i)&&nS(o)){if(!Ol(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function su(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function iu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function w6(t,e){const n=new _6(t,e);return n.subscribe.bind(n)}class _6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");E6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Zg),s.error===void 0&&(s.error=Zg),s.complete===void 0&&(s.complete=Zg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S6(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:I6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I6(t){return t===To?void 0:t}function S6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new T6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const A6={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},x6=Ve.INFO,R6={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},P6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=R6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vm{constructor(e){this.name=e,this._logLevel=x6,this._logHandler=P6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const C6=(t,e)=>e.some(n=>t instanceof n);let rS,sS;function k6(){return rS||(rS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D6(){return sS||(sS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _C=new WeakMap,Bv=new WeakMap,EC=new WeakMap,ey=new WeakMap,eE=new WeakMap;function N6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ui(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_C.set(n,t)}).catch(()=>{}),eE.set(e,t),e}function O6(t){if(Bv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bv.set(t,e)}let $v={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function V6(t){$v=t($v)}function L6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ty(this),e,...n);return EC.set(r,e.sort?e.sort():[e]),Ui(r)}:D6().includes(t)?function(...e){return t.apply(ty(this),e),Ui(_C.get(this))}:function(...e){return Ui(t.apply(ty(this),e))}}function M6(t){return typeof t=="function"?L6(t):(t instanceof IDBTransaction&&O6(t),C6(t,k6())?new Proxy(t,$v):t)}function Ui(t){if(t instanceof IDBRequest)return N6(t);if(ey.has(t))return ey.get(t);const e=M6(t);return e!==t&&(ey.set(t,e),eE.set(e,t)),e}const ty=t=>eE.get(t);function F6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ui(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ui(o.result),l.oldVersion,l.newVersion,Ui(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const U6=["get","getKey","getAll","getAllKeys","count"],j6=["put","add","delete","clear"],ny=new Map;function iS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ny.get(e))return ny.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=j6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||U6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ny.set(e,i),i}V6(t=>({...t,get:(e,n,r)=>iS(e,n)||t.get(e,n,r),has:(e,n)=>!!iS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zv="@firebase/app",oS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new vm("@firebase/app"),z6="@firebase/app-compat",q6="@firebase/analytics-compat",W6="@firebase/analytics",H6="@firebase/app-check-compat",K6="@firebase/app-check",G6="@firebase/auth",Q6="@firebase/auth-compat",Y6="@firebase/database",X6="@firebase/data-connect",J6="@firebase/database-compat",Z6="@firebase/functions",e5="@firebase/functions-compat",t5="@firebase/installations",n5="@firebase/installations-compat",r5="@firebase/messaging",s5="@firebase/messaging-compat",i5="@firebase/performance",o5="@firebase/performance-compat",a5="@firebase/remote-config",l5="@firebase/remote-config-compat",c5="@firebase/storage",u5="@firebase/storage-compat",d5="@firebase/firestore",h5="@firebase/ai",f5="@firebase/firestore-compat",p5="firebase",m5="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="[DEFAULT]",g5={[zv]:"fire-core",[z6]:"fire-core-compat",[W6]:"fire-analytics",[q6]:"fire-analytics-compat",[K6]:"fire-app-check",[H6]:"fire-app-check-compat",[G6]:"fire-auth",[Q6]:"fire-auth-compat",[Y6]:"fire-rtdb",[X6]:"fire-data-connect",[J6]:"fire-rtdb-compat",[Z6]:"fire-fn",[e5]:"fire-fn-compat",[t5]:"fire-iid",[n5]:"fire-iid-compat",[r5]:"fire-fcm",[s5]:"fire-fcm-compat",[i5]:"fire-perf",[o5]:"fire-perf-compat",[a5]:"fire-rc",[l5]:"fire-rc-compat",[c5]:"fire-gcs",[u5]:"fire-gcs-compat",[d5]:"fire-fst",[f5]:"fire-fst-compat",[h5]:"fire-vertex","fire-js":"fire-js",[p5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=new Map,y5=new Map,Wv=new Map;function aS(t,e){try{t.container.addComponent(e)}catch(n){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cs(t){const e=t.name;if(Wv.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;Wv.set(e,t);for(const n of lp.values())aS(n,t);for(const n of y5.values())aS(n,t);return!0}function wm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ji=new uc("app","Firebase",v5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=m5;function TC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qv,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ji.create("bad-app-name",{appName:String(s)});if(n||(n=pC()),!n)throw ji.create("no-options");const i=lp.get(s);if(i){if(Ol(n,i.options)&&Ol(r,i.config))return i;throw ji.create("duplicate-app",{appName:s})}const o=new b6(s);for(const l of Wv.values())o.addComponent(l);const a=new w5(n,r,o);return lp.set(s,a),a}function IC(t=qv){const e=lp.get(t);if(!e&&t===qv&&pC())return TC();if(!e)throw ji.create("no-app",{appName:t});return e}function Zn(t,e,n){let r=g5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(o.join(" "));return}cs(new Or(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="firebase-heartbeat-database",E5=1,od="firebase-heartbeat-store";let ry=null;function SC(){return ry||(ry=F6(_5,E5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(od)}catch(n){console.warn(n)}}}}).catch(t=>{throw ji.create("idb-open",{originalErrorMessage:t.message})})),ry}async function T5(t){try{const n=(await SC()).transaction(od),r=await n.objectStore(od).get(bC(t));return await n.done,r}catch(e){if(e instanceof Lr)Us.warn(e.message);else{const n=ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(n.message)}}}async function lS(t,e){try{const r=(await SC()).transaction(od,"readwrite");await r.objectStore(od).put(e,bC(t)),await r.done}catch(n){if(n instanceof Lr)Us.warn(n.message);else{const r=ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Us.warn(r.message)}}}function bC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=1024,S5=30;class b5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>S5){const o=R5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Us.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cS(),{heartbeatsToSend:r,unsentEntries:s}=A5(this._heartbeatsCache.heartbeats),i=ap(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Us.warn(n),""}}}function cS(){return new Date().toISOString().substring(0,10)}function A5(t,e=I5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),uS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class x5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z_()?m6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await T5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return lS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return lS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function uS(t){return ap(JSON.stringify({version:2,heartbeats:t})).length}function R5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(t){cs(new Or("platform-logger",e=>new B6(e),"PRIVATE")),cs(new Or("heartbeat",e=>new b5(e),"PRIVATE")),Zn(zv,oS,t),Zn(zv,oS,"esm2020"),Zn("fire-js","")}P5("");function AC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const C5=AC,xC=new uc("auth","Firebase",AC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=new vm("@firebase/auth");function k5(t,...e){cp.logLevel<=Ve.WARN&&cp.warn(`Auth (${Od}): ${t}`,...e)}function ff(t,...e){cp.logLevel<=Ve.ERROR&&cp.error(`Auth (${Od}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t,...e){throw nE(t,...e)}function tE(t,...e){return nE(t,...e)}function RC(t,e,n){const r={...C5(),[e]:n};return new uc("auth","Firebase",r).create(e,{appName:t.name})}function Bi(t){return RC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xC.create(t,...e)}function Le(t,e,...n){if(!t)throw nE(e,...n)}function bs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ff(e),new Error(e)}function up(t,e){t||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function PC(){return dS()==="http:"||dS()==="https:"}function dS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PC()||h6()||"connection"in navigator)?navigator.onLine:!0}function O5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.shortDelay=e,this.longDelay=n,up(n>e,"Short delay should be less than long delay!"),this.isMobile=u6()||f6()}get(){return N5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(t,e){up(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F5=new Vd(3e4,6e4);function Hs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fs(t,e,n,r,s={}){return kC(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=wC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return d6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ws(t.emulatorConfig.host)&&(c.credentials="include"),CC.fetch()(await DC(t,t.config.apiHost,n,a),c)})}async function kC(t,e,n){t._canInitEmulator=!1;const r={...L5,...e};try{const s=new j5(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Dh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Dh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Dh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw RC(t,d,c);la(t,d)}}catch(s){if(s instanceof Lr)throw s;la(t,"network-request-failed",{message:String(s)})}}async function _m(t,e,n,r,s={}){const i=await fs(t,e,n,r,s);return"mfaPendingCredential"in i&&la(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function DC(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?V5(t.config,s):`${t.config.apiScheme}://${s}`;return M5.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function U5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tE(this.auth,"network-request-failed")),F5.get())})}}function Dh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tE(t,e,r);return s.customData._tokenResponse=n,s}function hS(t){return t!==void 0&&t.enterprise!==void 0}class B5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return U5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $5(t,e){return fs(t,"GET","/v2/recaptchaConfig",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z5(t,e){return fs(t,"POST","/v1/accounts:delete",e)}async function dp(t,e){return fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q5(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=rE(r);Le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Iu(sy(s.auth_time)),issuedAtTime:Iu(sy(s.iat)),expirationTime:Iu(sy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function sy(t){return Number(t)*1e3}function rE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ff("JWT malformed, contained fewer than 3 sections"),null;try{const s=dC(n);return s?JSON.parse(s):(ff("Failed to decode base64 JWT payload"),null)}catch(s){return ff("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fS(t){const e=rE(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Lr&&W5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function W5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await ad(t,dp(e,{idToken:n}));Le(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?NC(s.providerUserInfo):[],o=G5(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function K5(t){const e=Ge(t);await hp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function G5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function NC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5(t,e){const n=await kC(t,{},async()=>{const r=wC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await DC(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ws(t.emulatorConfig.host)&&(l.credentials="include"),CC.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Y5(t,e){return fs(t,"POST","/v2/accounts:revokeToken",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=fS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Q5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new fl;return r&&(Le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ar{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new H5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ad(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q5(this,e)}reload(){return K5(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Bi(this.auth));const e=await this.getIdToken();return await ad(this,z5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:T,stsTokenManager:g}=n;Le(h&&g,e,"internal-error");const v=fl.fromJSON(this.name,g);Le(typeof h=="string",e,"internal-error"),oi(r,e.name),oi(s,e.name),Le(typeof f=="boolean",e,"internal-error"),Le(typeof p=="boolean",e,"internal-error"),oi(i,e.name),oi(o,e.name),oi(a,e.name),oi(l,e.name),oi(c,e.name),oi(d,e.name);const _=new Ar({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return T&&Array.isArray(T)&&(_.providerData=T.map(y=>({...y}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new fl;s.updateFromServerResponse(n);const i=new Ar({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?NC(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new fl;a.updateFromIdToken(r);const l=new Ar({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Map;function Oo(t){up(t instanceof Function,"Expected a class definition");let e=pS.get(t);return e?(up(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OC.type="NONE";const Kv=OC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e,n){return`firebase:${t}:${e}:${n}`}class pl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=iy(this.userKey,s.apiKey,i),this.fullPersistenceKey=iy("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dp(this.auth,{idToken:e}).catch(()=>{});return n?Ar._fromGetAccountInfoResponse(this.auth,n,e):null}return Ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new pl(Oo(Kv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Oo(Kv);const o=iy(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await dp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Ar._fromGetAccountInfoResponse(e,f,d)}else h=Ar._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new pl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new pl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MC(e))return"Blackberry";if(FC(e))return"Webos";if(J5(e))return"Safari";if((e.includes("chrome/")||Z5(e))&&!e.includes("edge/"))return"Chrome";if(LC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function X5(t=nn()){return/firefox\//i.test(t)}function J5(t=nn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z5(t=nn()){return/crios\//i.test(t)}function VC(t=nn()){return/iemobile/i.test(t)}function LC(t=nn()){return/android/i.test(t)}function MC(t=nn()){return/blackberry/i.test(t)}function FC(t=nn()){return/webos/i.test(t)}function eB(t=nn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tB(){return p6()&&document.documentMode===10}function nB(t=nn()){return eB(t)||LC(t)||FC(t)||MC(t)||/windows phone/i.test(t)||VC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t,e=[]){let n;switch(t){case"Browser":n=mS(nn());break;case"Worker":n=`${mS(nn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Od}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e={}){return fs(t,"GET","/v2/passwordPolicy",Hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=6;class oB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gS(this),this.idTokenSubscription=new gS(this),this.beforeStateQueue=new rB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Oo(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await pl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dp(this,{idToken:e}),r=await Ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=O5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Bi(this));const n=e?Ge(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sB(this),n=new oB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Y5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Oo(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await pl.create(this,[Oo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&k5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function dc(t){return Ge(t)}class gS{constructor(e){this.auth=e,this.observer=null,this.addObserver=w6(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lB(t){sE=t}function cB(t){return sE.loadJS(t)}function uB(){return sE.recaptchaEnterpriseScript}class dB{constructor(){this.enterprise=new hB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fB="recaptcha-enterprise",jC="NO_RECAPTCHA";class pB{constructor(e){this.type=fB,this.auth=dc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{$5(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new B5(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;hS(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(jC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&hS(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=uB();l.length!==0&&(l+=a),cB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function yS(t,e,n,r=!1,s=!1){const i=new pB(t);let o;if(s)o=jC;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function fp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await yS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await yS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(t,e){const n=wm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ol(i,e??{}))return s;la(s,"already-initialized")}return n.initialize({options:e})}function gB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Oo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,n){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function vB(t,e){return fs(t,"POST","/v1/accounts:update",e)}async function wB(t,e){return fs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(t,e){return _m(t,"POST","/v1/accounts:signInWithPassword",Hs(t,e))}async function EB(t,e){return fs(t,"POST","/v1/accounts:sendOobCode",Hs(t,e))}async function TB(t,e){return EB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e){return _m(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}async function SB(t,e){return _m(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends yB{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ld(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ld(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fp(e,n,"signInWithPassword",_B);case"emailLink":return IB(e,{email:this._email,oobCode:this._password});default:la(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fp(e,r,"signUpPassword",wB);case"emailLink":return SB(e,{idToken:n,email:this._email,oobCode:this._password});default:la(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AB(t){const e=su(iu(t)).link,n=e?su(iu(e)).deep_link_id:null,r=su(iu(t)).deep_link_id;return(r?su(iu(r)).link:null)||r||n||e||t}class iE{constructor(e){const n=su(iu(e)),r=n.apiKey??null,s=n.oobCode??null,i=bB(n.mode??null);Le(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=AB(e);try{return new iE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.providerId=hc.PROVIDER_ID}static credential(e,n){return ld._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=iE.parseLink(n);return Le(r,"argument-error"),ld._fromEmailAndCode(e,r.code,r.tenantId)}}hc.PROVIDER_ID="password";hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xB(t,e){return _m(t,"POST","/v1/accounts:signUp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ar._fromIdTokenResponse(e,r,s),o=vS(r);return new Vl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=vS(r);return new Vl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function vS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Lr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,pp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new pp(e,n,r,s)}}function BC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?pp._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(Bi(r));const s="reauthenticate";try{const i=await ad(t,BC(r,s,e,t),n);Le(i.idToken,r,"internal-error");const o=rE(i.idToken);Le(o,r,"internal-error");const{sub:a}=o;return Le(t.uid===a,r,"user-mismatch"),Vl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&la(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PB(t,e,n=!1){if(Hn(t.app))return Promise.reject(Bi(t));const r="signIn",s=await BC(t,r,e),i=await Vl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function CB(t,e){return PB(dc(t),e)}async function ZH(t,e){return RB(Ge(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(t){const e=dc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kB(t,e,n){const r=dc(t);await fp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",TB)}async function wS(t,e,n){if(Hn(t.app))return Promise.reject(Bi(t));const r=dc(t),o=await fp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&$C(t),l}),a=await Vl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function DB(t,e,n){return Hn(t.app)?Promise.reject(Bi(t)):CB(Ge(t),hc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$C(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB(t,e){return fs(t,"POST","/v1/accounts:createAuthUri",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OB(t,e){const n=PC()?D5():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await NB(Ge(t),r);return s||[]}function eK(t,e){return VB(Ge(t),null,e)}async function VB(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await ad(t,vB(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(t,e){return Ge(t).setPersistence(e)}function MB(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function _S(t){return Ge(t).signOut()}const ES="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ES,"1"),this.storage.removeItem(ES),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=1e3,UB=10;class qC extends zC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qC.type="LOCAL";const WC=qC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC extends zC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HC.type="SESSION";const jB=HC;new Vd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Vd(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Vd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Vd(5e3,15e3);var TS="@firebase/auth",IS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zB(t){cs(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UC(t)},c=new aB(r,s,i,l);return gB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cs(new Or("auth-internal",e=>{const n=dc(e.getProvider("auth").getImmediate());return(r=>new BB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(TS,IS,$B(t)),Zn(TS,IS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=5*60;o6("authIdTokenMaxAge");function WB(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}lB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tE("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",WB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zB("Browser");var HB="firebase",KB="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(HB,KB,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=new Map,QB={activated:!1,tokenObservers:[]},YB={initialized:!1,enabled:!1};function Vr(t){return GB.get(t)||{...QB}}function KC(){return YB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB="https://content-firebaseappcheck.googleapis.com/v1";const JB="exchangeDebugToken",SS={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},tK=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new jv,this.pending.promise.catch(n=>{}),await e$(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new jv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function e$(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ri=new uc("appCheck","AppCheck",t$);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){if(!Vr(t).activated)throw Ri.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw Ri.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw Ri.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Ri.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ri.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function YC(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${XB}/projects/${n}/apps/${r}:${JB}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$="firebase-app-check-database",r$=1,Gv="firebase-app-check-store";let Nh=null;function s$(){return Nh||(Nh=new Promise((t,e)=>{try{const n=indexedDB.open(n$,r$);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Ri.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Gv,{keyPath:"compositeKey"})}}}catch(n){e(Ri.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Nh)}function i$(t,e){return o$(a$(t),e)}async function o$(t,e){const r=(await s$()).transaction(Gv,"readwrite"),i=r.objectStore(Gv).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Ri.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function a$(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new vm("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){return Z_()?i$(t,e).catch(n=>{ou.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return KC().enabled}async function JC(){const t=KC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$={error:"UNKNOWN_ERROR"};function c$(t){return X_.encodeString(JSON.stringify(t),!1)}async function Qv(t,e=!1,n=!1){const r=t.app;GC(r);const s=Vr(r);let i=s.token,o;if(i&&!au(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(au(c)?i=c:await oy(r,void 0))}if(!e&&i&&au(i))return{token:i.token};let a=!1;if(XC())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=QC(YC(r,await JC()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await oy(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?ou.warn(c.message):n&&ou.error(c),ay(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Vr(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?ou.warn(c.message):n&&ou.error(c),o=c}let l;return i?o?au(i)?l={token:i.token,internalError:o}:l=ay(o):(l={token:i.token},s.token=i,await oy(r,i)):l=ay(o),a&&f$(r,l),l}async function u$(t){const e=t.app;GC(e);const{provider:n}=Vr(e);if(XC()){const r=await JC(),{token:s}=await QC(YC(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function d$(t,e,n,r){const{app:s}=t,i=Vr(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&au(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),bS(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>bS(t))}function ZC(t,e){const n=Vr(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function bS(t){const{app:e}=t,n=Vr(e);let r=n.tokenRefresher;r||(r=h$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function h$(t){const{app:e}=t;return new ZB(async()=>{const n=Vr(e);let r;if(n.token?r=await Qv(t,!0):r=await Qv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Vr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},SS.RETRIAL_MIN_WAIT,SS.RETRIAL_MAX_WAIT)}function f$(t,e){const n=Vr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function au(t){return t.expireTimeMillis-Date.now()>0}function ay(t){return{token:c$(l$),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Vr(this.app);for(const n of e)ZC(this.app,n.next);return Promise.resolve()}}function m$(t,e){return new p$(t,e)}function g$(t){return{getToken:e=>Qv(t,e),getLimitedUseToken:()=>u$(t),addTokenListener:e=>d$(t,"INTERNAL",e),removeTokenListener:e=>ZC(t.app,e)}}const y$="@firebase/app-check",v$="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$="app-check",AS="app-check-internal";function _$(){cs(new Or(w$,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return m$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(AS).initialize()})),cs(new Or(AS,t=>{const e=t.getProvider("app-check").getImmediate();return g$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Zn(y$,v$)}_$();var xS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $i,ek;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,b){function A(){}A.prototype=b.prototype,x.F=b.prototype,x.prototype=new A,x.prototype.constructor=x,x.D=function(C,N,O){for(var P=Array(arguments.length-2),F=2;F<arguments.length;F++)P[F-2]=arguments[F];return b.prototype[N].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,b,A){A||(A=0);const C=Array(16);if(typeof b=="string")for(var N=0;N<16;++N)C[N]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(N=0;N<16;++N)C[N]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=x.g[0],A=x.g[1],N=x.g[2];let O=x.g[3],P;P=b+(O^A&(N^O))+C[0]+3614090360&4294967295,b=A+(P<<7&4294967295|P>>>25),P=O+(N^b&(A^N))+C[1]+3905402710&4294967295,O=b+(P<<12&4294967295|P>>>20),P=N+(A^O&(b^A))+C[2]+606105819&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(b^N&(O^b))+C[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=b+(O^A&(N^O))+C[4]+4118548399&4294967295,b=A+(P<<7&4294967295|P>>>25),P=O+(N^b&(A^N))+C[5]+1200080426&4294967295,O=b+(P<<12&4294967295|P>>>20),P=N+(A^O&(b^A))+C[6]+2821735955&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(b^N&(O^b))+C[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=b+(O^A&(N^O))+C[8]+1770035416&4294967295,b=A+(P<<7&4294967295|P>>>25),P=O+(N^b&(A^N))+C[9]+2336552879&4294967295,O=b+(P<<12&4294967295|P>>>20),P=N+(A^O&(b^A))+C[10]+4294925233&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(b^N&(O^b))+C[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=b+(O^A&(N^O))+C[12]+1804603682&4294967295,b=A+(P<<7&4294967295|P>>>25),P=O+(N^b&(A^N))+C[13]+4254626195&4294967295,O=b+(P<<12&4294967295|P>>>20),P=N+(A^O&(b^A))+C[14]+2792965006&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(b^N&(O^b))+C[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=b+(N^O&(A^N))+C[1]+4129170786&4294967295,b=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(b^A))+C[6]+3225465664&4294967295,O=b+(P<<9&4294967295|P>>>23),P=N+(b^A&(O^b))+C[11]+643717713&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^b&(N^O))+C[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=b+(N^O&(A^N))+C[5]+3593408605&4294967295,b=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(b^A))+C[10]+38016083&4294967295,O=b+(P<<9&4294967295|P>>>23),P=N+(b^A&(O^b))+C[15]+3634488961&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^b&(N^O))+C[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=b+(N^O&(A^N))+C[9]+568446438&4294967295,b=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(b^A))+C[14]+3275163606&4294967295,O=b+(P<<9&4294967295|P>>>23),P=N+(b^A&(O^b))+C[3]+4107603335&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^b&(N^O))+C[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=b+(N^O&(A^N))+C[13]+2850285829&4294967295,b=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(b^A))+C[2]+4243563512&4294967295,O=b+(P<<9&4294967295|P>>>23),P=N+(b^A&(O^b))+C[7]+1735328473&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^b&(N^O))+C[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=b+(A^N^O)+C[5]+4294588738&4294967295,b=A+(P<<4&4294967295|P>>>28),P=O+(b^A^N)+C[8]+2272392833&4294967295,O=b+(P<<11&4294967295|P>>>21),P=N+(O^b^A)+C[11]+1839030562&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^b)+C[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=b+(A^N^O)+C[1]+2763975236&4294967295,b=A+(P<<4&4294967295|P>>>28),P=O+(b^A^N)+C[4]+1272893353&4294967295,O=b+(P<<11&4294967295|P>>>21),P=N+(O^b^A)+C[7]+4139469664&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^b)+C[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=b+(A^N^O)+C[13]+681279174&4294967295,b=A+(P<<4&4294967295|P>>>28),P=O+(b^A^N)+C[0]+3936430074&4294967295,O=b+(P<<11&4294967295|P>>>21),P=N+(O^b^A)+C[3]+3572445317&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^b)+C[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=b+(A^N^O)+C[9]+3654602809&4294967295,b=A+(P<<4&4294967295|P>>>28),P=O+(b^A^N)+C[12]+3873151461&4294967295,O=b+(P<<11&4294967295|P>>>21),P=N+(O^b^A)+C[15]+530742520&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^b)+C[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=b+(N^(A|~O))+C[0]+4096336452&4294967295,b=A+(P<<6&4294967295|P>>>26),P=O+(A^(b|~N))+C[7]+1126891415&4294967295,O=b+(P<<10&4294967295|P>>>22),P=N+(b^(O|~A))+C[14]+2878612391&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~b))+C[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=b+(N^(A|~O))+C[12]+1700485571&4294967295,b=A+(P<<6&4294967295|P>>>26),P=O+(A^(b|~N))+C[3]+2399980690&4294967295,O=b+(P<<10&4294967295|P>>>22),P=N+(b^(O|~A))+C[10]+4293915773&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~b))+C[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=b+(N^(A|~O))+C[8]+1873313359&4294967295,b=A+(P<<6&4294967295|P>>>26),P=O+(A^(b|~N))+C[15]+4264355552&4294967295,O=b+(P<<10&4294967295|P>>>22),P=N+(b^(O|~A))+C[6]+2734768916&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~b))+C[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=b+(N^(A|~O))+C[4]+4149444226&4294967295,b=A+(P<<6&4294967295|P>>>26),P=O+(A^(b|~N))+C[11]+3174756917&4294967295,O=b+(P<<10&4294967295|P>>>22),P=N+(b^(O|~A))+C[2]+718787259&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~b))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+b&4294967295,x.g[1]=x.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.v=function(x,b){b===void 0&&(b=x.length);const A=b-this.blockSize,C=this.C;let N=this.h,O=0;for(;O<b;){if(N==0)for(;O<=A;)s(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<b;)if(C[N++]=x.charCodeAt(O++),N==this.blockSize){s(this,C),N=0;break}}else for(;O<b;)if(C[N++]=x[O++],N==this.blockSize){s(this,C),N=0;break}}this.h=N,this.o+=b},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var b=1;b<x.length-8;++b)x[b]=0;b=this.o*8;for(var A=x.length-8;A<x.length;++A)x[A]=b&255,b/=256;for(this.v(x),x=Array(16),b=0,A=0;A<4;++A)for(let C=0;C<32;C+=8)x[b++]=this.g[A]>>>C&255;return x};function i(x,b){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=b(x)}function o(x,b){this.h=b;const A=[];let C=!0;for(let N=x.length-1;N>=0;N--){const O=x[N]|0;C&&O==b||(A[N]=O,C=!1)}this.g=A}var a={};function l(x){return-128<=x&&x<128?i(x,function(b){return new o([b|0],b<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(x<0)return v(c(-x));const b=[];let A=1;for(let C=0;x>=A;C++)b[C]=x/A|0,A*=4294967296;return new o(b,0)}function d(x,b){if(x.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(x.charAt(0)=="-")return v(d(x.substring(1),b));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(b,8));let C=h;for(let O=0;O<x.length;O+=8){var N=Math.min(8,x.length-O);const P=parseInt(x.substring(O,O+N),b);N<8?(N=c(Math.pow(b,N)),C=C.j(N).add(c(P))):(C=C.j(A),C=C.add(c(P)))}return C}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-v(this).m();let x=0,b=1;for(let A=0;A<this.g.length;A++){const C=this.i(A);x+=(C>=0?C:4294967296+C)*b,b*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(T(this))return"0";if(g(this))return"-"+v(this).toString(x);const b=c(Math.pow(x,6));var A=this;let C="";for(;;){const N=R(A,b).g;A=_(A,N.j(b));let O=((A.g.length>0?A.g[0]:A.h)>>>0).toString(x);if(A=N,T(A))return O+C;for(;O.length<6;)O="0"+O;C=O+C}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function T(x){if(x.h!=0)return!1;for(let b=0;b<x.g.length;b++)if(x.g[b]!=0)return!1;return!0}function g(x){return x.h==-1}t.l=function(x){return x=_(this,x),g(x)?-1:T(x)?0:1};function v(x){const b=x.g.length,A=[];for(let C=0;C<b;C++)A[C]=~x.g[C];return new o(A,~x.h).add(f)}t.abs=function(){return g(this)?v(this):this},t.add=function(x){const b=Math.max(this.g.length,x.g.length),A=[];let C=0;for(let N=0;N<=b;N++){let O=C+(this.i(N)&65535)+(x.i(N)&65535),P=(O>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);C=P>>>16,O&=65535,P&=65535,A[N]=P<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function _(x,b){return x.add(v(b))}t.j=function(x){if(T(this)||T(x))return h;if(g(this))return g(x)?v(this).j(v(x)):v(v(this).j(x));if(g(x))return v(this.j(v(x)));if(this.l(p)<0&&x.l(p)<0)return c(this.m()*x.m());const b=this.g.length+x.g.length,A=[];for(var C=0;C<2*b;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(let N=0;N<x.g.length;N++){const O=this.i(C)>>>16,P=this.i(C)&65535,F=x.i(N)>>>16,$=x.i(N)&65535;A[2*C+2*N]+=P*$,y(A,2*C+2*N),A[2*C+2*N+1]+=O*$,y(A,2*C+2*N+1),A[2*C+2*N+1]+=P*F,y(A,2*C+2*N+1),A[2*C+2*N+2]+=O*F,y(A,2*C+2*N+2)}for(x=0;x<b;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=b;x<2*b;x++)A[x]=0;return new o(A,0)};function y(x,b){for(;(x[b]&65535)!=x[b];)x[b+1]+=x[b]>>>16,x[b]&=65535,b++}function w(x,b){this.g=x,this.h=b}function R(x,b){if(T(b))throw Error("division by zero");if(T(x))return new w(h,h);if(g(x))return b=R(v(x),b),new w(v(b.g),v(b.h));if(g(b))return b=R(x,v(b)),new w(v(b.g),b.h);if(x.g.length>30){if(g(x)||g(b))throw Error("slowDivide_ only works with positive integers.");for(var A=f,C=b;C.l(x)<=0;)A=k(A),C=k(C);var N=V(A,1),O=V(C,1);for(C=V(C,2),A=V(A,2);!T(C);){var P=O.add(C);P.l(x)<=0&&(N=N.add(A),O=P),C=V(C,1),A=V(A,1)}return b=_(x,N.j(b)),new w(N,b)}for(N=h;x.l(b)>=0;){for(A=Math.max(1,Math.floor(x.m()/b.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),O=c(A),P=O.j(b);g(P)||P.l(x)>0;)A-=C,O=c(A),P=O.j(b);T(O)&&(O=f),N=N.add(O),x=_(x,P)}return new w(N,x)}t.B=function(x){return R(this,x).h},t.and=function(x){const b=Math.max(this.g.length,x.g.length),A=[];for(let C=0;C<b;C++)A[C]=this.i(C)&x.i(C);return new o(A,this.h&x.h)},t.or=function(x){const b=Math.max(this.g.length,x.g.length),A=[];for(let C=0;C<b;C++)A[C]=this.i(C)|x.i(C);return new o(A,this.h|x.h)},t.xor=function(x){const b=Math.max(this.g.length,x.g.length),A=[];for(let C=0;C<b;C++)A[C]=this.i(C)^x.i(C);return new o(A,this.h^x.h)};function k(x){const b=x.g.length+1,A=[];for(let C=0;C<b;C++)A[C]=x.i(C)<<1|x.i(C-1)>>>31;return new o(A,x.h)}function V(x,b){const A=b>>5;b%=32;const C=x.g.length-A,N=[];for(let O=0;O<C;O++)N[O]=b>0?x.i(O+A)>>>b|x.i(O+A+1)<<32-b:x.i(O+A);return new o(N,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ek=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,$i=o}).apply(typeof xS<"u"?xS:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tk,lu,nk,pf,Yv,rk,sk,ik;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var m=0;m<u.length;++m){var E=u[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var E=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var j=u[D];if(!(j in E))break e;E=E[j]}u=u[u.length-1],D=E[u],m=m(D),m!=D&&m!=null&&e(E,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var E=[],D;for(D in m)Object.prototype.hasOwnProperty.call(m,D)&&E.push([D,m[D]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,E){return u.call.apply(u.bind,arguments)}function c(u,m,E){return c=l,c.apply(null,arguments)}function d(u,m){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function h(u,m){function E(){}E.prototype=m.prototype,u.Z=m.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(D,j,B){for(var te=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)te[ke-2]=arguments[ke];return m.prototype[j].apply(D,te)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const E=Array(m);for(let D=0;D<m;D++)E[D]=u[D];return E}return[]}function T(u,m){for(let D=1;D<arguments.length;D++){const j=arguments[D];var E=typeof j;if(E=E!="object"?E:j?Array.isArray(j)?"array":E:"null",E=="array"||E=="object"&&typeof j.length=="number"){E=u.length||0;const B=j.length||0;u.length=E+B;for(let te=0;te<B;te++)u[E+te]=j[te]}else u.push(j)}}class g{constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(u){o.setTimeout(()=>{throw u},0)}function _(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,E){const D=w.get();D.set(m,E),this.h?this.h.next=D:this.g=D,this.h=D}}var w=new g(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let k,V=!1,x=new y,b=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(A)}};function A(){for(var u;u=_();){try{u.h.call(u.g)}catch(E){v(E)}var m=w;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};o.addEventListener("test",E,m),o.removeEventListener("test",E,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function F(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(F,N),F.prototype.init=function(u,m){const E=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(E=="mouseover"?m=u.fromElement:E=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),H=0;function Y(u,m,E,D,j){this.listener=u,this.proxy=null,this.src=m,this.type=E,this.capture=!!D,this.ha=j,this.key=++H,this.da=this.fa=!1}function L(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function M(u,m,E){for(const D in u)m.call(E,u[D],D,u)}function K(u,m){for(const E in u)m.call(void 0,u[E],E,u)}function X(u){const m={};for(const E in u)m[E]=u[E];return m}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,m){let E,D;for(let j=1;j<arguments.length;j++){D=arguments[j];for(E in D)u[E]=D[E];for(let B=0;B<z.length;B++)E=z[B],Object.prototype.hasOwnProperty.call(D,E)&&(u[E]=D[E])}}function oe(u){this.src=u,this.g={},this.h=0}oe.prototype.add=function(u,m,E,D,j){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const te=ie(u,m,D,j);return te>-1?(m=u[te],E||(m.fa=!1)):(m=new Y(m,this.src,B,!!D,j),m.fa=E,u.push(m)),m};function de(u,m){const E=m.type;if(E in u.g){var D=u.g[E],j=Array.prototype.indexOf.call(D,m,void 0),B;(B=j>=0)&&Array.prototype.splice.call(D,j,1),B&&(L(m),u.g[E].length==0&&(delete u.g[E],u.h--))}}function ie(u,m,E,D){for(let j=0;j<u.length;++j){const B=u[j];if(!B.da&&B.listener==m&&B.capture==!!E&&B.ha==D)return j}return-1}var ne="closure_lm_"+(Math.random()*1e6|0),xe={};function Ie(u,m,E,D,j){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Ie(u,m[B],E,D,j);return null}return E=ye(E),u&&u[$]?u.J(m,E,a(D)?!!D.capture:!1,j):ge(u,m,E,!1,D,j)}function ge(u,m,E,D,j,B){if(!m)throw Error("Invalid event type");const te=a(j)?!!j.capture:!!j;let ke=Lt(u);if(ke||(u[ne]=ke=new oe(u)),E=ke.add(m,E,D,te,B),E.proxy)return E;if(D=Re(),E.proxy=D,D.src=u,D.listener=E,u.addEventListener)O||(j=te),j===void 0&&(j=!1),u.addEventListener(m.toString(),D,j);else if(u.attachEvent)u.attachEvent(Vt(m.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Re(){function u(E){return m.call(u.src,u.listener,E)}const m=kt;return u}function nt(u,m,E,D,j){if(Array.isArray(m))for(var B=0;B<m.length;B++)nt(u,m[B],E,D,j);else D=a(D)?!!D.capture:!!D,E=ye(E),u&&u[$]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],E=ie(m,E,D,j),E>-1&&(L(m[E]),Array.prototype.splice.call(m,E,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=Lt(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ie(m,E,D,j)),(E=u>-1?m[u]:null)&&rt(E))}function rt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[$])de(m.i,u);else{var E=u.type,D=u.proxy;m.removeEventListener?m.removeEventListener(E,D,u.capture):m.detachEvent?m.detachEvent(Vt(E),D):m.addListener&&m.removeListener&&m.removeListener(D),(E=Lt(m))?(de(E,u),E.h==0&&(E.src=null,m[ne]=null)):L(u)}}}function Vt(u){return u in xe?xe[u]:xe[u]="on"+u}function kt(u,m){if(u.da)u=!0;else{m=new F(m,this);const E=u.listener,D=u.ha||u.src;u.fa&&rt(u),u=E.call(D,m)}return u}function Lt(u){return u=u[ne],u instanceof oe?u:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function ye(u){return typeof u=="function"?u:(u[Qe]||(u[Qe]=function(m){return u.handleEvent(m)}),u[Qe])}function Ue(){C.call(this),this.i=new oe(this),this.M=this,this.G=null}h(Ue,C),Ue.prototype[$]=!0,Ue.prototype.removeEventListener=function(u,m,E,D){nt(this,u,m,E,D)};function St(u,m){var E,D=u.G;if(D)for(E=[];D;D=D.G)E.push(D);if(u=u.M,D=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var j=m;m=new N(D,u),se(m,j)}j=!0;let B,te;if(E)for(te=E.length-1;te>=0;te--)B=m.g=E[te],j=Mt(B,D,!0,m)&&j;if(B=m.g=u,j=Mt(B,D,!0,m)&&j,j=Mt(B,D,!1,m)&&j,E)for(te=0;te<E.length;te++)B=m.g=E[te],j=Mt(B,D,!1,m)&&j}Ue.prototype.N=function(){if(Ue.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const E=u.g[m];for(let D=0;D<E.length;D++)L(E[D]);delete u.g[m],u.h--}}this.G=null},Ue.prototype.J=function(u,m,E,D){return this.i.add(String(u),m,!1,E,D)},Ue.prototype.K=function(u,m,E,D){return this.i.add(String(u),m,!0,E,D)};function Mt(u,m,E,D){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let B=0;B<m.length;++B){const te=m[B];if(te&&!te.da&&te.capture==E){const ke=te.listener,Ut=te.ha||te.src;te.fa&&de(u.i,te),j=ke.call(Ut,D)!==!1&&j}}return j&&!D.defaultPrevented}function ho(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function jn(u){u.g=ho(()=>{u.g=null,u.i&&(u.i=!1,jn(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class eg extends C{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:jn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fo(u){C.call(this),this.h=u,this.g={}}h(fo,C);var gn=[];function ps(u){M(u.g,function(m,E){this.g.hasOwnProperty(E)&&rt(m)},u),u.g={}}fo.prototype.N=function(){fo.Z.N.call(this),ps(this)},fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ic=o.JSON.stringify,tg=o.JSON.parse,Sa=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Xd(){}function Sc(){}var ms={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ur(){N.call(this,"d")}h(Ur,N);function ba(){N.call(this,"c")}h(ba,N);var Rn={},Jd=null;function Aa(){return Jd=Jd||new Ue}Rn.Ia="serverreachability";function bc(u){N.call(this,Rn.Ia,u)}h(bc,N);function Ys(u){const m=Aa();St(m,new bc(m))}Rn.STAT_EVENT="statevent";function Zd(u,m){N.call(this,Rn.STAT_EVENT,u),this.stat=m}h(Zd,N);function Ft(u){const m=Aa();St(m,new Zd(m,u))}Rn.Ja="timingevent";function pr(u,m){N.call(this,Rn.Ja,u),this.size=m}h(pr,N);function po(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function Ee(){this.g=!0}Ee.prototype.ua=function(){this.g=!1};function ze(u,m,E,D,j,B){u.info(function(){if(u.g)if(B){var te="",ke=B.split("&");for(let Ye=0;Ye<ke.length;Ye++){var Ut=ke[Ye].split("=");if(Ut.length>1){const qt=Ut[0];Ut=Ut[1];const $r=qt.split("_");te=$r.length>=2&&$r[1]=="type"?te+(qt+"="+Ut+"&"):te+(qt+"=redacted&")}}}else te=null;else te=B;return"XMLHTTP REQ ("+D+") [attempt "+j+"]: "+m+`
`+E+`
`+te})}function Xe(u,m,E,D,j,B,te){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+j+"]: "+m+`
`+E+`
`+B+" "+te})}function zt(u,m,E,D){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+jr(u,E)+(D?" "+D:"")})}function Bn(u,m){u.info(function(){return"TIMEOUT: "+m})}Ee.prototype.info=function(){};function jr(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var E=B[u];if(!(E.length<2)){var D=E[1];if(Array.isArray(D)&&!(D.length<1)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(let te=1;te<D.length;te++)D[te]=""}}}}return Ic(B)}catch{return m}}var ir={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mr;function ng(){}h(ng,Xd),ng.prototype.g=function(){return new XMLHttpRequest},mr=new ng;function Ac(u){return encodeURIComponent(String(u))}function n2(u){var m=1;u=u.split(":");const E=[];for(;m>0&&u.length;)E.push(u.shift()),m--;return u.length&&E.push(u.join(":")),E}function Xs(u,m,E,D){this.j=u,this.i=m,this.l=E,this.S=D||1,this.V=new fo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new m0}function m0(){this.i=null,this.g="",this.h=!1}var g0={},rg={};function sg(u,m,E){u.M=1,u.A=th(Br(m)),u.u=E,u.R=!0,y0(u,null)}function y0(u,m){u.F=Date.now(),eh(u),u.B=Br(u.A);var E=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),C0(E.i,"t",D),u.C=0,E=u.j.L,u.h=new m0,u.g=G0(u.j,E?m:null,!u.u),u.P>0&&(u.O=new eg(c(u.Y,u,u.g),u.P)),m=u.V,E=u.g,D=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(gn[0]=j.toString()),j=gn);for(let B=0;B<j.length;B++){const te=Ie(E,j[B],D||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.J?X(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ys(),ze(u.i,u.v,u.B,u.l,u.S,u.u)}Xs.prototype.ba=function(u){u=u.target;const m=this.O;m&&ei(u)==3?m.j():this.Y(u)},Xs.prototype.Y=function(u){try{if(u==this.g)e:{const ke=ei(this.g),Ut=this.g.ya(),Ye=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||M0(this.g)))){this.K||ke!=4||Ut==7||(Ut==8||Ye<=0?Ys(3):Ys(2)),ig(this);var m=this.g.ca();this.X=m;var E=r2(this);if(this.o=m==200,Xe(this.i,this.v,this.B,this.l,this.S,ke,m),this.o){if(this.U&&!this.L){t:{if(this.g){var D,j=this.g;if((D=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(D)){var B=D;break t}}B=null}if(u=B)zt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,og(this,u);else{this.o=!1,this.m=3,Ft(12),mo(this),xc(this);break e}}if(this.R){u=!0;let qt;for(;!this.K&&this.C<E.length;)if(qt=s2(this,E),qt==rg){ke==4&&(this.m=4,Ft(14),u=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==g0){this.m=4,Ft(15),zt(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else zt(this.i,this.l,qt,null),og(this,qt);if(v0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||E.length!=0||this.h.h||(this.m=1,Ft(16),u=!1),this.o=this.o&&u,!u)zt(this.i,this.l,E,"[Invalid Chunked Response]"),mo(this),xc(this);else if(E.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),pg(te),te.P=!0,Ft(11))}}else zt(this.i,this.l,E,null),og(this,E);ke==4&&mo(this),this.o&&!this.K&&(ke==4?q0(this.j,this):(this.o=!1,eh(this)))}else v2(this.g),m==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),mo(this),xc(this)}}}catch{}finally{}};function r2(u){if(!v0(u))return u.g.la();const m=M0(u.g);if(m==="")return"";let E="";const D=m.length,j=ei(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return mo(u),xc(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<D;B++)u.h.h=!0,E+=u.h.i.decode(m[B],{stream:!(j&&B==D-1)});return m.length=0,u.h.g+=E,u.C=0,u.h.g}function v0(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function s2(u,m){var E=u.C,D=m.indexOf(`
`,E);return D==-1?rg:(E=Number(m.substring(E,D)),isNaN(E)?g0:(D+=1,D+E>m.length?rg:(m=m.slice(D,D+E),u.C=D+E,m)))}Xs.prototype.cancel=function(){this.K=!0,mo(this)};function eh(u){u.T=Date.now()+u.H,w0(u,u.H)}function w0(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=po(c(u.aa,u),m)}function ig(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Xs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Bn(this.i,this.B),this.M!=2&&(Ys(),Ft(17)),mo(this),this.m=2,xc(this)):w0(this,this.T-u)};function xc(u){u.j.I==0||u.K||q0(u.j,u)}function mo(u){ig(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,ps(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function og(u,m){try{var E=u.j;if(E.I!=0&&(E.g==u||ag(E.h,u))){if(!u.L&&ag(E.h,u)&&E.I==3){try{var D=E.Ba.g.parse(m)}catch{D=null}if(Array.isArray(D)&&D.length==3){var j=D;if(j[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)oh(E),sh(E);else break e;fg(E),Ft(18)}}else E.xa=j[1],0<E.xa-E.K&&j[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=po(c(E.Va,E),6e3));T0(E.h)<=1&&E.ta&&(E.ta=void 0)}else yo(E,11)}else if((u.L||E.g==u)&&oh(E),!P(m))for(j=E.Ba.g.parse(m),m=0;m<j.length;m++){let Ye=j[m];const qt=Ye[0];if(!(qt<=E.K))if(E.K=qt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const $r=Ye[3];$r!=null&&(E.ka=$r,E.j.info("VER="+E.ka));const vo=Ye[4];vo!=null&&(E.za=vo,E.j.info("SVER="+E.za));const ti=Ye[5];ti!=null&&typeof ti=="number"&&ti>0&&(D=1.5*ti,E.O=D,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const ni=u.g;if(ni){const lh=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lh){var B=D.h;B.g||lh.indexOf("spdy")==-1&&lh.indexOf("quic")==-1&&lh.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(lg(B,B.h),B.h=null))}if(D.G){const mg=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;mg&&(D.wa=mg,st(D.J,D.G,mg))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),D=E;var te=u;if(D.na=K0(D,D.L?D.ba:null,D.W),te.L){I0(D.h,te);var ke=te,Ut=D.O;Ut&&(ke.H=Ut),ke.D&&(ig(ke),eh(ke)),D.g=te}else $0(D);E.i.length>0&&ih(E)}else Ye[0]!="stop"&&Ye[0]!="close"||yo(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?yo(E,7):hg(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}Ys(4)}catch{}}var i2=class{constructor(u,m){this.g=u,this.map=m}};function _0(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function E0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function T0(u){return u.h?1:u.g?u.g.size:0}function ag(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function lg(u,m){u.g?u.g.add(m):u.h=m}function I0(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}_0.prototype.cancel=function(){if(this.i=S0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function S0(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const E of u.g.values())m=m.concat(E.G);return m}return p(u.i)}var b0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function o2(u,m){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const D=u[E].indexOf("=");let j,B=null;D>=0?(j=u[E].substring(0,D),B=u[E].substring(D+1)):j=u[E],m(j,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Js(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Js?(this.l=u.l,Rc(this,u.j),this.o=u.o,this.g=u.g,Pc(this,u.u),this.h=u.h,cg(this,k0(u.i)),this.m=u.m):u&&(m=String(u).match(b0))?(this.l=!1,Rc(this,m[1]||"",!0),this.o=Cc(m[2]||""),this.g=Cc(m[3]||"",!0),Pc(this,m[4]),this.h=Cc(m[5]||"",!0),cg(this,m[6]||"",!0),this.m=Cc(m[7]||"")):(this.l=!1,this.i=new Dc(null,this.l))}Js.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(kc(m,A0,!0),":");var E=this.g;return(E||m=="file")&&(u.push("//"),(m=this.o)&&u.push(kc(m,A0,!0),"@"),u.push(Ac(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(kc(E,E.charAt(0)=="/"?c2:l2,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",kc(E,d2)),u.join("")},Js.prototype.resolve=function(u){const m=Br(this);let E=!!u.j;E?Rc(m,u.j):E=!!u.o,E?m.o=u.o:E=!!u.g,E?m.g=u.g:E=u.u!=null;var D=u.h;if(E)Pc(m,u.u);else if(E=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var j=m.h.lastIndexOf("/");j!=-1&&(D=m.h.slice(0,j+1)+D)}if(j=D,j==".."||j==".")D="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){D=j.lastIndexOf("/",0)==0,j=j.split("/");const B=[];for(let te=0;te<j.length;){const ke=j[te++];ke=="."?D&&te==j.length&&B.push(""):ke==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),D&&te==j.length&&B.push("")):(B.push(ke),D=!0)}D=B.join("/")}else D=j}return E?m.h=D:E=u.i.toString()!=="",E?cg(m,k0(u.i)):E=!!u.m,E&&(m.m=u.m),m};function Br(u){return new Js(u)}function Rc(u,m,E){u.j=E?Cc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Pc(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function cg(u,m,E){m instanceof Dc?(u.i=m,h2(u.i,u.l)):(E||(m=kc(m,u2)),u.i=new Dc(m,u.l))}function st(u,m,E){u.i.set(m,E)}function th(u){return st(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Cc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function kc(u,m,E){return typeof u=="string"?(u=encodeURI(u).replace(m,a2),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function a2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var A0=/[#\/\?@]/g,l2=/[#\?:]/g,c2=/[#\?]/g,u2=/[#\?@]/g,d2=/#/g;function Dc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function go(u){u.g||(u.g=new Map,u.h=0,u.i&&o2(u.i,function(m,E){u.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}t=Dc.prototype,t.add=function(u,m){go(this),this.i=null,u=xa(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(m),this.h+=1,this};function x0(u,m){go(u),m=xa(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function R0(u,m){return go(u),m=xa(u,m),u.g.has(m)}t.forEach=function(u,m){go(this),this.g.forEach(function(E,D){E.forEach(function(j){u.call(m,j,D,this)},this)},this)};function P0(u,m){go(u);let E=[];if(typeof m=="string")R0(u,m)&&(E=E.concat(u.g.get(xa(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)E=E.concat(u[m]);return E}t.set=function(u,m){return go(this),this.i=null,u=xa(this,u),R0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=P0(this,u),u.length>0?String(u[0]):m):m};function C0(u,m,E){x0(u,m),E.length>0&&(u.i=null,u.g.set(xa(u,m),p(E)),u.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let D=0;D<m.length;D++){var E=m[D];const j=Ac(E);E=P0(this,E);for(let B=0;B<E.length;B++){let te=j;E[B]!==""&&(te+="="+Ac(E[B])),u.push(te)}}return this.i=u.join("&")};function k0(u){const m=new Dc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function xa(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function h2(u,m){m&&!u.j&&(go(u),u.i=null,u.g.forEach(function(E,D){const j=D.toLowerCase();D!=j&&(x0(this,D),C0(this,j,E))},u)),u.j=m}function f2(u,m){const E=new Ee;if(o.Image){const D=new Image;D.onload=d(Zs,E,"TestLoadImage: loaded",!0,m,D),D.onerror=d(Zs,E,"TestLoadImage: error",!1,m,D),D.onabort=d(Zs,E,"TestLoadImage: abort",!1,m,D),D.ontimeout=d(Zs,E,"TestLoadImage: timeout",!1,m,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else m(!1)}function p2(u,m){const E=new Ee,D=new AbortController,j=setTimeout(()=>{D.abort(),Zs(E,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:D.signal}).then(B=>{clearTimeout(j),B.ok?Zs(E,"TestPingServer: ok",!0,m):Zs(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Zs(E,"TestPingServer: error",!1,m)})}function Zs(u,m,E,D,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),D(E)}catch{}}function m2(){this.g=new Sa}function ug(u){this.i=u.Sb||null,this.h=u.ab||!1}h(ug,Xd),ug.prototype.g=function(){return new nh(this.i,this.h)};function nh(u,m){Ue.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(nh,Ue),t=nh.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Oc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Oc(this)),this.g&&(this.readyState=3,Oc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;D0(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function D0(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Nc(this):Oc(this),this.readyState==3&&D0(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Nc(this))},t.Na=function(u){this.g&&(this.response=u,Nc(this))},t.ga=function(){this.g&&Nc(this)};function Nc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Oc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=m.next();return u.join(`\r
`)};function Oc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function N0(u){let m="";return M(u,function(E,D){m+=D,m+=":",m+=E,m+=`\r
`}),m}function dg(u,m,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=N0(E),typeof u=="string"?E!=null&&Ac(E):st(u,m,E))}function vt(u){Ue.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(vt,Ue);var g2=/^https?$/i,y2=["POST","PUT"];t=vt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mr.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){O0(this,B);return}if(u=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var j in D)E.set(j,D[j]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const B of D.keys())E.set(B,D.get(B));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(E.keys()).find(B=>B.toLowerCase()=="content-type"),j=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(y2,m,void 0)>=0)||D||j||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of E)this.g.setRequestHeader(B,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){O0(this,B)}};function O0(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,V0(u),rh(u)}function V0(u){u.A||(u.A=!0,St(u,"complete"),St(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,St(this,"complete"),St(this,"abort"),rh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rh(this,!0)),vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?L0(this):this.Xa())},t.Xa=function(){L0(this)};function L0(u){if(u.h&&typeof i<"u"){if(u.v&&ei(u)==4)setTimeout(u.Ca.bind(u),0);else if(St(u,"readystatechange"),ei(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var E;if(!(E=m)){var D;if(D=B===0){let te=String(u.D).match(b0)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),D=!g2.test(te?te.toLowerCase():"")}E=D}if(E)St(u,"complete"),St(u,"success");else{u.o=6;try{var j=ei(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",V0(u)}}finally{rh(u)}}}}function rh(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,m||St(u,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ei(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),tg(m)}};function M0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function v2(u){const m={};u=(u.g&&ei(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(P(u[D]))continue;var E=n2(u[D]);const j=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const B=m[j]||[];m[j]=B,B.push(E)}K(m,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vc(u,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||m}function F0(u){this.za=0,this.i=[],this.j=new Ee,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vc("baseRetryDelayMs",5e3,u),this.Za=Vc("retryDelaySeedMs",1e4,u),this.Ta=Vc("forwardChannelMaxRetries",2,u),this.va=Vc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new _0(u&&u.concurrentRequestLimit),this.Ba=new m2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=F0.prototype,t.ka=8,t.I=1,t.connect=function(u,m,E,D){Ft(0),this.W=u,this.H=m||{},E&&D!==void 0&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.J=K0(this,null,this.W),ih(this)};function hg(u){if(U0(u),u.I==3){var m=u.V++,E=Br(u.J);if(st(E,"SID",u.M),st(E,"RID",m),st(E,"TYPE","terminate"),Lc(u,E),m=new Xs(u,u.j,m),m.M=2,m.A=th(Br(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=m.A,E=!0),E||(m.g=G0(m.j,null),m.g.ea(m.A)),m.F=Date.now(),eh(m)}H0(u)}function sh(u){u.g&&(pg(u),u.g.cancel(),u.g=null)}function U0(u){sh(u),u.v&&(o.clearTimeout(u.v),u.v=null),oh(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function ih(u){if(!E0(u.h)&&!u.m){u.m=!0;var m=u.Ea;k||b(),V||(k(),V=!0),x.add(m,u),u.D=0}}function w2(u,m){return T0(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=po(c(u.Ea,u,m),W0(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new Xs(this,this.j,u);let B=this.o;if(this.U&&(B?(B=X(B),se(B,this.U)):B=this.U),this.u!==null||this.R||(j.J=B,B=null),this.S)e:{for(var m=0,E=0;E<this.i.length;E++){t:{var D=this.i[E];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(m+=D,m>4096){m=E;break e}if(m===4096||E===this.i.length-1){m=E+1;break e}}m=1e3}else m=1e3;m=B0(this,j,m),E=Br(this.J),st(E,"RID",u),st(E,"CVER",22),this.G&&st(E,"X-HTTP-Session-Id",this.G),Lc(this,E),B&&(this.R?m="headers="+Ac(N0(B))+"&"+m:this.u&&dg(E,this.u,B)),lg(this.h,j),this.Ra&&st(E,"TYPE","init"),this.S?(st(E,"$req",m),st(E,"SID","null"),j.U=!0,sg(j,E,null)):sg(j,E,m),this.I=2}}else this.I==3&&(u?j0(this,u):this.i.length==0||E0(this.h)||j0(this))};function j0(u,m){var E;m?E=m.l:E=u.V++;const D=Br(u.J);st(D,"SID",u.M),st(D,"RID",E),st(D,"AID",u.K),Lc(u,D),u.u&&u.o&&dg(D,u.u,u.o),E=new Xs(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),m&&(u.i=m.G.concat(u.i)),m=B0(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),lg(u.h,E),sg(E,D,m)}function Lc(u,m){u.H&&M(u.H,function(E,D){st(m,D,E)}),u.l&&M({},function(E,D){st(m,D,E)})}function B0(u,m,E){E=Math.min(u.i.length,E);const D=u.l?c(u.l.Ka,u.l,u):null;e:{var j=u.i;let ke=-1;for(;;){const Ut=["count="+E];ke==-1?E>0?(ke=j[0].g,Ut.push("ofs="+ke)):ke=0:Ut.push("ofs="+ke);let Ye=!0;for(let qt=0;qt<E;qt++){var B=j[qt].g;const $r=j[qt].map;if(B-=ke,B<0)ke=Math.max(0,j[qt].g-100),Ye=!1;else try{B="req"+B+"_"||"";try{var te=$r instanceof Map?$r:Object.entries($r);for(const[vo,ti]of te){let ni=ti;a(ti)&&(ni=Ic(ti)),Ut.push(B+vo+"="+encodeURIComponent(ni))}}catch(vo){throw Ut.push(B+"type="+encodeURIComponent("_badmap")),vo}}catch{D&&D($r)}}if(Ye){te=Ut.join("&");break e}}te=void 0}return u=u.i.splice(0,E),m.G=u,te}function $0(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;k||b(),V||(k(),V=!0),x.add(m,u),u.A=0}}function fg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=po(c(u.Da,u),W0(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,z0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=po(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),sh(this),z0(this))};function pg(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function z0(u){u.g=new Xs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Br(u.na);st(m,"RID","rpc"),st(m,"SID",u.M),st(m,"AID",u.K),st(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&st(m,"TO",u.ia),st(m,"TYPE","xmlhttp"),Lc(u,m),u.u&&u.o&&dg(m,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=th(Br(m)),E.u=null,E.R=!0,y0(E,u)}t.Va=function(){this.C!=null&&(this.C=null,sh(this),fg(this),Ft(19))};function oh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function q0(u,m){var E=null;if(u.g==m){oh(u),pg(u),u.g=null;var D=2}else if(ag(u.h,m))E=m.G,I0(u.h,m),D=1;else return;if(u.I!=0){if(m.o)if(D==1){E=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;D=Aa(),St(D,new pr(D,E)),ih(u)}else $0(u);else if(j=m.m,j==3||j==0&&m.X>0||!(D==1&&w2(u,m)||D==2&&fg(u)))switch(E&&E.length>0&&(m=u.h,m.i=m.i.concat(E)),j){case 1:yo(u,5);break;case 4:yo(u,10);break;case 3:yo(u,6);break;default:yo(u,2)}}}function W0(u,m){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*m}function yo(u,m){if(u.j.info("Error code "+m),m==2){var E=c(u.bb,u),D=u.Ua;const j=!D;D=new Js(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Rc(D,"https"),th(D),j?f2(D.toString(),E):p2(D.toString(),E)}else Ft(2);u.I=0,u.l&&u.l.pa(m),H0(u),U0(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function H0(u){if(u.I=0,u.ja=[],u.l){const m=S0(u.h);(m.length!=0||u.i.length!=0)&&(T(u.ja,m),T(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function K0(u,m,E){var D=E instanceof Js?Br(E):new Js(E);if(D.g!="")m&&(D.g=m+"."+D.g),Pc(D,D.u);else{var j=o.location;D=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const B=new Js(null);D&&Rc(B,D),m&&(B.g=m),j&&Pc(B,j),E&&(B.h=E),D=B}return E=u.G,m=u.wa,E&&m&&st(D,E,m),st(D,"VER",u.ka),Lc(u,D),D}function G0(u,m,E){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new vt(new ug({ab:E})):new vt(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Q0(){}t=Q0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ah(){}ah.prototype.g=function(u,m){return new $n(u,m)};function $n(u,m){Ue.call(this),this.g=new F0(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ra(this)}h($n,Ue),$n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){hg(this.g)},$n.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=Ic(u),u=E);m.i.push(new i2(m.Ya++,u)),m.I==3&&ih(m)},$n.prototype.N=function(){this.g.l=null,delete this.j,hg(this.g),delete this.g,$n.Z.N.call(this)};function Y0(u){Ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const E in m){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(Y0,Ur);function X0(){ba.call(this),this.status=1}h(X0,ba);function Ra(u){this.g=u}h(Ra,Q0),Ra.prototype.ra=function(){St(this.g,"a")},Ra.prototype.qa=function(u){St(this.g,new Y0(u))},Ra.prototype.pa=function(u){St(this.g,new X0)},Ra.prototype.oa=function(){St(this.g,"b")},ah.prototype.createWebChannel=ah.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,ik=function(){return new ah},sk=function(){return Aa()},rk=Rn,Yv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,pf=ir,Pn.COMPLETE="complete",nk=Pn,Sc.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",Ue.prototype.listen=Ue.prototype.J,lu=Sc,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,tk=vt}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const RS="@firebase/firestore",PS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new vm("@firebase/firestore");function ja(){return Qi.logLevel}function ok(t){Qi.setLogLevel(t)}function J(t,...e){if(Qi.logLevel<=Ve.DEBUG){const n=e.map(oE);Qi.debug(`Firestore (${fc}): ${t}`,...n)}}function xt(t,...e){if(Qi.logLevel<=Ve.ERROR){const n=e.map(oE);Qi.error(`Firestore (${fc}): ${t}`,...n)}}function Yi(t,...e){if(Qi.logLevel<=Ve.WARN){const n=e.map(oE);Qi.warn(`Firestore (${fc}): ${t}`,...n)}}function oE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ak(t,r,n)}function ak(t,e,n){let r=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xt(r),new Error(r)}function he(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ak(e,s,r)}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(cn.UNAUTHENTICATED))}shutdown(){}}class T${constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new E$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class I${constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S${constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new I$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){he(this.o===void 0,3512);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new CS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new CS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=A$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function Xv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ly(s)===ly(i)?be(s,i):ly(s)?1:-1}return be(t.length,e.length)}const x$=55296,R$=57343;function ly(t){const e=t.charCodeAt(0);return e>=x$&&e<=R$}function Ll(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function ck(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="__name__";class Wr{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&le(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Wr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return be(e.length,n.length)}static compareSegments(e,n){const r=Wr.isNumericId(e),s=Wr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Wr.extractNumericId(e).compare(Wr.extractNumericId(n)):Xv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $i.fromString(e.substring(4,e.length-2))}}class $e extends Wr{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const P$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Wr{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return P$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kS}static keyField(){return new dt([kS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ee(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ee(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re($e.fromString(e))}static fromName(e){return new re($e.fromString(e).popFirst(5))}static empty(){return new re($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e,n){if(!n)throw new ee(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dk(t,e,n,r){if(e===!0&&r===!0)throw new ee(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function DS(t){if(!re.isDocumentKey(t))throw new ee(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NS(t){if(re.isDocumentKey(t))throw new ee(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function Pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tm(t);throw new ee(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function C$(t,e){if(e<=0)throw new ee(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ld(t,e){if(!hk(t))throw new ee(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ee(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=-62135596800,VS=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*VS);return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<OS)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VS}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ld(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:Ot("string",qe._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new qe(0,0))}static max(){return new me(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;class mp{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Jv(t){return t.fields.find(e=>e.kind===2)}function Io(t){return t.fields.filter(e=>e.kind!==2)}mp.UNKNOWN_ID=-1;class mf{constructor(e,n){this.fieldPath=e,this.kind=n}}class cd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new cd(0,nr.min())}}function fk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new nr(s,re.empty(),e)}function pk(t){return new nr(t.readTime,t.key,Ml)}class nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new nr(me.min(),re.empty(),Ml)}static max(){return new nr(me.max(),re.empty(),Ml)}}function aE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==mk)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="SimpleDb";class Im{static open(e,n,r,s){try{return new Im(n,e.transaction(s,r))}catch(i){throw new Su(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new dr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Su(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=lE(r.target.error);this.S.reject(new Su(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(J(qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new D$(n)}}class zi{static delete(e){return J(qn,"Removing database:",e),Ao(hC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Z_())return!1;if(zi.F())return!0;const e=nn(),n=zi.M(e),r=0<n&&n<10,s=yk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,zi.M(nn())===12.2&&xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(J(qn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Su(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ee(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ee(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Su(e,o))},s.onupgradeneeded=i=>{J(qn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{J(qn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Im.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),U.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(J(qn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class k${constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ao(this.U.delete())}}class Su extends ee{constructor(e,n){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function lo(t){return t.name==="IndexedDbTransactionError"}class D${constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(J(qn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(J(qn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ao(r)}add(e){return J(qn,"ADD",this.store.name,e,e),Ao(this.store.add(e))}get(e){return Ao(this.store.get(e)).next(n=>(n===void 0&&(n=null),J(qn,"GET",this.store.name,e,n),n))}delete(e){return J(qn,"DELETE",this.store.name,e),Ao(this.store.delete(e))}count(){return J(qn,"COUNT",this.store.name),Ao(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new U((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new U((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){J(qn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new U((r,s)=>{n.onerror=i=>{const o=lE(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new U((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new k$(a),c=n(a.primaryKey,a.value,l);if(c instanceof U){const d=c.catch(h=>(l.done(),U.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>U.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ao(t){return new U((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=lE(r.target.error);n(s)}})}let LS=!1;function lE(t){const e=zi.M(nn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LS||(LS=!0,setTimeout(()=>{throw r},0)),r}}return t}const bu="IndexBackfiller";class N${constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){J(bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();J(bu,`Documents written: ${n}`)}catch(n){lo(n)?J(bu,"Ignoring IndexedDB error during index backfill: ",n):await ao(n)}await this.re(6e4)})}}class O${constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return U.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return J(bu,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(J(bu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=pk(i);aE(o,r)>0&&(r=o)}),new nr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}On.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=-1;function Sm(t){return t==null}function ud(t){return t===0&&1/t==-1/0}function vk(t){return typeof t=="number"&&Number.isInteger(t)&&!ud(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="";function pn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MS(e)),e=V$(t.get(n),e);return MS(e)}function V$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case gp:n+="";break;default:n+=i}}return n}function MS(t){return t+gp+""}function Zr(t){const e=t.length;if(he(e>=2,64408,{path:t}),e===2)return he(t.charAt(0)===gp&&t.charAt(1)==="",56145,{path:t}),$e.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(gp,i);switch((o<0||o>n)&&le(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:le(61167,{path:t})}i=o+2}return new $e(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="remoteDocuments",Md="owner",Ca="owner",dd="mutationQueues",L$="userId",Ir="mutations",FS="batchId",Vo="userMutationsIndex",US=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t,e){return[t,pn(e)]}function wk(t,e,n){return[t,pn(e),n]}const M$={},Fl="documentMutations",yp="remoteDocumentsV14",F$=["prefixPath","collectionGroup","readTime","documentId"],yf="documentKeyIndex",U$=["prefixPath","collectionGroup","documentId"],_k="collectionGroupIndex",j$=["collectionGroup","readTime","prefixPath","documentId"],hd="remoteDocumentGlobal",Zv="remoteDocumentGlobalKey",Ul="targets",Ek="queryTargetsIndex",B$=["canonicalId","targetId"],jl="targetDocuments",$$=["targetId","path"],cE="documentTargetsIndex",z$=["path","targetId"],vp="targetGlobalKey",Jo="targetGlobal",fd="collectionParents",q$=["collectionId","parent"],Bl="clientMetadata",W$="clientId",bm="bundles",H$="bundleId",Am="namedQueries",K$="name",uE="indexConfiguration",G$="indexId",ew="collectionGroupIndex",Q$="collectionGroup",Au="indexState",Y$=["indexId","uid"],Tk="sequenceNumberIndex",X$=["uid","sequenceNumber"],xu="indexEntries",J$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ik="documentKeyIndex",Z$=["indexId","uid","orderedDocumentKey"],xm="documentOverlays",e9=["userId","collectionPath","documentId"],tw="collectionPathOverlayIndex",t9=["userId","collectionPath","largestBatchId"],Sk="collectionGroupOverlayIndex",n9=["userId","collectionGroup","largestBatchId"],dE="globals",r9="name",bk=[dd,Ir,Fl,So,Ul,Md,Jo,jl,Bl,hd,fd,bm,Am],s9=[...bk,xm],Ak=[dd,Ir,Fl,yp,Ul,Md,Jo,jl,Bl,hd,fd,bm,Am,xm],xk=Ak,hE=[...xk,uE,Au,xu],i9=hE,Rk=[...hE,dE],o9=Rk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw extends gk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function $t(t,e){const n=ce(t);return zi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Pk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vh(this.root,e,this.comparator,!0)}}class Vh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new BS(this.data.getIterator())}getIteratorFrom(e){return new BS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class BS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ka(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Ke(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ll(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ck("Invalid base64 string: "+i):i}}(e);return new It(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const a9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(t){if(he(!!t,39018),typeof t=="string"){let e=0;const n=a9.exec(t);if(he(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bs(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="server_timestamp",Dk="__type__",Nk="__previous_value__",Ok="__local_write_time__";function fE(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Dk])==null?void 0:r.stringValue)===kk}function Rm(t){const e=t.mapValue.fields[Nk];return fE(e)?Rm(e):e}function pd(t){const e=js(t.mapValue.fields[Ok].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const wp="(default)";class Xi{constructor(e,n){this.projectId=e,this.database=n||wp}static empty(){return new Xi("","")}get isDefaultDatabase(){return this.database===wp}isEqual(e){return e instanceof Xi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="__type__",Vk="__max__",Pi={mapValue:{fields:{__type__:{stringValue:Vk}}}},mE="__vector__",$l="value",vf={nullValue:"NULL_VALUE"};function Ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fE(t)?4:Lk(t)?9007199254740991:Pm(t)?10:11:le(28295,{value:t})}function us(t,e){if(t===e)return!0;const n=Ji(t);if(n!==Ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pd(t).isEqual(pd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=js(s.timestampValue),a=js(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Bs(s.bytesValue).isEqual(Bs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ct(s.geoPointValue.latitude)===ct(i.geoPointValue.latitude)&&ct(s.geoPointValue.longitude)===ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ct(s.integerValue)===ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ct(s.doubleValue),a=ct(i.doubleValue);return o===a?ud(o)===ud(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ll(t.arrayValue.values||[],e.arrayValue.values||[],us);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(jS(o)!==jS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!us(o[l],a[l])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function md(t,e){return(t.values||[]).find(n=>us(n,e))!==void 0}function Zi(t,e){if(t===e)return 0;const n=Ji(t),r=Ji(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ct(i.integerValue||i.doubleValue),l=ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return $S(t.timestampValue,e.timestampValue);case 4:return $S(pd(t),pd(e));case 5:return Xv(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Bs(i),l=Bs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=be(a[c],l[c]);if(d!==0)return d}return be(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=be(ct(i.latitude),ct(o.latitude));return a!==0?a:be(ct(i.longitude),ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,p,T,g;const a=i.fields||{},l=o.fields||{},c=(f=a[$l])==null?void 0:f.arrayValue,d=(p=l[$l])==null?void 0:p.arrayValue,h=be(((T=c==null?void 0:c.values)==null?void 0:T.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:zS(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Pi.mapValue&&o===Pi.mapValue)return 0;if(i===Pi.mapValue)return 1;if(o===Pi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Xv(l[h],d[h]);if(f!==0)return f;const p=Zi(a[l[h]],c[d[h]]);if(p!==0)return p}return be(l.length,d.length)}(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function $S(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=js(t),r=js(e),s=be(n.seconds,r.seconds);return s!==0?s:be(n.nanos,r.nanos)}function zS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zi(n[s],r[s]);if(i)return i}return be(n.length,r.length)}function zl(t){return rw(t)}function rw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=js(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${rw(n.fields[o])}`;return s+"}"}(t.mapValue):le(61005,{value:t})}function wf(t){switch(Ji(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rm(t);return e?16+wf(e):16;case 5:return 2*t.stringValue.length;case 6:return Bs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+wf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return co(r.fields,(i,o)=>{s+=i.length+wf(o)}),s}(t.mapValue);default:throw le(13486,{value:t})}}function gd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sw(t){return!!t&&"integerValue"in t}function yd(t){return!!t&&"arrayValue"in t}function qS(t){return!!t&&"nullValue"in t}function WS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _f(t){return!!t&&"mapValue"in t}function Pm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[pE])==null?void 0:r.stringValue)===mE}function Ru(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ru(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ru(t.arrayValue.values[n]);return e}return{...t}}function Lk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Vk}const Mk={mapValue:{fields:{[pE]:{stringValue:mE},[$l]:{arrayValue:{}}}}};function c9(t){return"nullValue"in t?vf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?gd(Xi.empty(),re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Pm(t)?Mk:{mapValue:{}}:le(35942,{value:t})}function u9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?gd(Xi.empty(),re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Mk:"mapValue"in t?Pm(t)?{mapValue:{}}:Pi:le(61959,{value:t})}function HS(t,e){const n=Zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function KS(t,e){const n=Zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_f(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ru(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_f(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_f(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){co(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new hn(Ru(this.value))}}function Fk(t){const e=[];return co(t.fields,(n,r)=>{const s=new dt([n]);if(_f(r)){const i=Fk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tt(e,0,me.min(),me.min(),me.min(),hn.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,me.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,me.min(),me.min(),hn.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,me.min(),me.min(),hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.position=e,this.inclusive=n}}function GS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Zi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function QS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!us(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n="asc"){this.field=e,this.dir=n}}function d9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{}class Me extends Uk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new h9(e,n,r):n==="array-contains"?new m9(e,r):n==="in"?new Wk(e,r):n==="not-in"?new g9(e,r):n==="array-contains-any"?new y9(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f9(e,r):new p9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zi(n,this.value)):n!==null&&Ji(this.value)===Ji(n)&&this.matchesComparison(Zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends Uk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new We(e,n)}matches(e){return Wl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wl(t){return t.op==="and"}function iw(t){return t.op==="or"}function gE(t){return jk(t)&&Wl(t)}function jk(t){for(const e of t.filters)if(e instanceof We)return!1;return!0}function ow(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+zl(t.value);if(gE(t))return t.filters.map(e=>ow(e)).join(",");{const e=t.filters.map(n=>ow(n)).join(",");return`${t.op}(${e})`}}function Bk(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&us(r.value,s.value)}(t,e):t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Bk(o,s.filters[a]),!0):!1}(t,e):void le(19439)}function $k(t,e){const n=t.filters.concat(e);return We.create(n,t.op)}function zk(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${zl(n.value)}`}(t):t instanceof We?function(n){return n.op.toString()+" {"+n.getFilters().map(zk).join(" ,")+"}"}(t):"Filter"}class h9 extends Me{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class f9 extends Me{constructor(e,n){super(e,"in",n),this.keys=qk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p9 extends Me{constructor(e,n){super(e,"not-in",n),this.keys=qk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class m9 extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yd(n)&&md(n.arrayValue,this.value)}}class Wk extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&md(this.value.arrayValue,n)}}class g9 extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!md(this.value.arrayValue,n)}}class y9 extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>md(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function aw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new v9(t,e,n,r,s,i,o)}function ca(t){const e=ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ow(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zl(r)).join(",")),e.Te=n}return e.Te}function Fd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!d9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Bk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QS(t.startAt,e.startAt)&&QS(t.endAt,e.endAt)}function _p(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ep(t,e){return t.filters.filter(n=>n instanceof Me&&n.field.isEqual(e))}function YS(t,e,n){let r=vf,s=!0;for(const i of Ep(t,e)){let o=vf,a=!0;switch(i.op){case"<":case"<=":o=c9(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=vf}HS({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];HS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function XS(t,e,n){let r=Pi,s=!0;for(const i of Ep(t,e)){let o=Pi,a=!0;switch(i.op){case">=":case">":o=u9(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Pi}KS({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];KS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Hk(t,e,n,r,s,i,o,a){return new pc(t,e,n,r,s,i,o,a)}function Ud(t){return new pc(t)}function JS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kk(t){return t.collectionGroup!==null}function Pu(t){const e=ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ke(dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new vd(i,r))}),n.has(dt.keyField().canonicalString())||e.Ie.push(new vd(dt.keyField(),r))}return e.Ie}function er(t){const e=ce(t);return e.Ee||(e.Ee=w9(e,Pu(t))),e.Ee}function w9(t,e){if(t.limitType==="F")return aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new vd(s.field,i)});const n=t.endAt?new ql(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ql(t.startAt.position,t.startAt.inclusive):null;return aw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lw(t,e){const n=t.filters.concat([e]);return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tp(t,e,n){return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cm(t,e){return Fd(er(t),er(e))&&t.limitType===e.limitType}function Gk(t){return`${ca(er(t))}|lt:${t.limitType}`}function Ba(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>zk(s)).join(", ")}]`),Sm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zl(s)).join(",")),`Target(${r})`}(er(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Pu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=GS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Pu(r),s)||r.endAt&&!function(o,a,l){const c=GS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Pu(r),s))}(t,e)}function Qk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Yk(t){return(e,n)=>{let r=!1;for(const s of Pu(t)){const i=_9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _9(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Zi(l,c):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Pk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=new et(re.comparator);function Qn(){return E9}const Xk=new et(re.comparator);function cu(...t){let e=Xk;for(const n of t)e=e.insert(n.key,n);return e}function Jk(t){let e=Xk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function es(){return Cu()}function Zk(){return Cu()}function Cu(){return new Ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const T9=new et(re.comparator),I9=new Ke(re.comparator);function Ne(...t){let e=I9;for(const n of t)e=e.add(n);return e}const S9=new Ke(be);function yE(){return S9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function eD(t){return{integerValue:""+t}}function b9(t,e){return vk(e)?eD(e):vE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this._=void 0}}function A9(t,e,n){return t instanceof Hl?function(s,i){const o={fields:{[Dk]:{stringValue:kk},[Ok]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&fE(i)&&(i=Rm(i)),i&&(o.fields[Nk]=i),{mapValue:o}}(n,e):t instanceof ua?nD(t,e):t instanceof Kl?rD(t,e):function(s,i){const o=tD(s,i),a=ZS(o)+ZS(s.Ae);return sw(o)&&sw(s.Ae)?eD(a):vE(s.serializer,a)}(t,e)}function x9(t,e,n){return t instanceof ua?nD(t,e):t instanceof Kl?rD(t,e):n}function tD(t,e){return t instanceof wd?function(r){return sw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hl extends km{}class ua extends km{constructor(e){super(),this.elements=e}}function nD(t,e){const n=sD(e);for(const r of t.elements)n.some(s=>us(s,r))||n.push(r);return{arrayValue:{values:n}}}class Kl extends km{constructor(e){super(),this.elements=e}}function rD(t,e){let n=sD(e);for(const r of t.elements)n=n.filter(s=>!us(s,r));return{arrayValue:{values:n}}}class wd extends km{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ZS(t){return ct(t.integerValue||t.doubleValue)}function sD(t){return yd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.field=e,this.transform=n}}function R9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ua&&s instanceof ua||r instanceof Kl&&s instanceof Kl?Ll(r.elements,s.elements,us):r instanceof wd&&s instanceof wd?us(r.Ae,s.Ae):r instanceof Hl&&s instanceof Hl}(t.transform,e.transform)}class P9{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dm{}function iD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nm(t.key,fn.none()):new mc(t.key,t.data,fn.none());{const n=t.data,r=hn.empty();let s=new Ke(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gs(t.key,r,new Vn(s.toArray()),fn.none())}}function C9(t,e,n){t instanceof mc?function(s,i,o){const a=s.value.clone(),l=tb(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Gs?function(s,i,o){if(!Ef(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=tb(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(oD(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ku(t,e,n,r){return t instanceof mc?function(i,o,a,l){if(!Ef(i.precondition,o))return a;const c=i.value.clone(),d=nb(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gs?function(i,o,a,l){if(!Ef(i.precondition,o))return a;const c=nb(i.fieldTransforms,l,o),d=o.data;return d.setAll(oD(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Ef(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function k9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=tD(r.transform,s||null);i!=null&&(n===null&&(n=hn.empty()),n.set(r.field,i))}return n||null}function eb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ll(r,s,(i,o)=>R9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mc extends Dm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gs extends Dm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tb(t,e,n){const r=new Map;he(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,x9(o,a,n[s]))}return r}function nb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,A9(i,o,e))}return r}class Nm extends Dm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aD extends Dm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&C9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ku(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ku(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Zk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=iD(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Ll(this.mutations,e.mutations,(n,r)=>eb(n,r))&&Ll(this.baseMutations,e.baseMutations,(n,r)=>eb(n,r))}}class EE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return T9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new EE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,je;function N9(t){switch(t){case W.OK:return le(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function lD(t){if(t===void 0)return xt("GRPC error has no .code"),W.UNKNOWN;switch(t){case Dt.OK:return W.OK;case Dt.CANCELLED:return W.CANCELLED;case Dt.UNKNOWN:return W.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return W.INTERNAL;case Dt.UNAVAILABLE:return W.UNAVAILABLE;case Dt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Dt.NOT_FOUND:return W.NOT_FOUND;case Dt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Dt.ABORTED:return W.ABORTED;case Dt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Dt.DATA_LOSS:return W.DATA_LOSS;default:return le(39323,{code:t})}}(je=Dt||(Dt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=new $i([4294967295,4294967295],0);function rb(t){const e=O9().encode(t),n=new ek;return n.update(e),new Uint8Array(n.digest())}function sb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $i([n,r],0),new $i([s,i],0)]}class IE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uu(`Invalid padding: ${n}`);if(r<0)throw new uu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$i.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply($i.fromNumber(r)));return s.compare(V9)===1&&(s=new $i([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=rb(e),[r,s]=sb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new IE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=rb(e),[r,s]=sb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$d.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bd(me.min(),s,new et(be),Qn(),Ne())}}class $d{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $d(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class cD{constructor(e,n){this.targetId=e,this.Ce=n}}class uD{constructor(e,n,r=It.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ib{constructor(){this.ve=0,this.Fe=ob(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),n=Ne(),r=Ne();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le(38017,{changeType:i})}}),new $d(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ob()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class L9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qn(),this.Je=Lh(),this.He=Lh(),this.Ye=new et(be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(_p(i))if(r===0){const o=new re(i.path);this.et(n,o,Tt.newNoDocument(o,me.min()))}else he(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Bs(r).toUint8Array()}catch(l){if(l instanceof Ck)return Yi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new IE(o,s,i)}catch(l){return Yi(l instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&_p(a.target)){const l=new re(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Tt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ne();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Bd(e,n,this.Ye,this.je,r);return this.je=Qn(),this.Je=Lh(),this.He=Lh(),this.Ye=new et(be),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ib,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ke(be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ke(be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ib),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lh(){return new et(re.comparator)}function ob(){return new et(re.comparator)}const M9={asc:"ASCENDING",desc:"DESCENDING"},F9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U9={and:"AND",or:"OR"};class j9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cw(t,e){return t.useProto3Json||Sm(e)?e:{value:e}}function Gl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B9(t,e){return Gl(t,e.toTimestamp())}function In(t){return he(!!t,49232),me.fromTimestamp(function(n){const r=js(n);return new qe(r.seconds,r.nanos)}(t))}function SE(t,e){return uw(t,e).canonicalString()}function uw(t,e){const n=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hD(t){const e=$e.fromString(t);return he(ED(e),10190,{key:e.toString()}),e}function Ip(t,e){return SE(t.databaseId,e.path)}function Zo(t,e){const n=hD(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(mD(n))}function fD(t,e){return SE(t.databaseId,e)}function pD(t){const e=hD(t);return e.length===4?$e.emptyPath():mD(e)}function dw(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mD(t){return he(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ab(t,e,n){return{name:Ip(t,e),fields:n.value.mapValue.fields}}function $9(t,e,n){const r=Zo(t,e.name),s=In(e.updateTime),i=e.createTime?In(e.createTime):me.min(),o=new hn({mapValue:{fields:e.fields}}),a=Tt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function z9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(he(d===void 0||typeof d=="string",58123),It.fromBase64String(d||"")):(he(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),It.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?W.UNKNOWN:lD(c.code);return new ee(d,c.message||"")}(o);n=new uD(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zo(t,r.document.name),i=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):me.min(),a=new hn({mapValue:{fields:r.document.fields}}),l=Tt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Tf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zo(t,r.document),i=r.readTime?In(r.readTime):me.min(),o=Tt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Tf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zo(t,r.document),i=r.removedTargetIds||[];n=new Tf([],i,s,null)}else{if(!("filter"in e))return le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new D9(s,i),a=r.targetId;n=new cD(a,o)}}return n}function Sp(t,e){let n;if(e instanceof mc)n={update:ab(t,e.key,e.value)};else if(e instanceof Nm)n={delete:Ip(t,e.key)};else if(e instanceof Gs)n={update:ab(t,e.key,e.data),updateMask:Q9(e.fieldMask)};else{if(!(e instanceof aD))return le(16599,{Vt:e.type});n={verify:Ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Kl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw le(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:B9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le(27497)}(t,e.precondition)),n}function hw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?fn.updateTime(In(i.updateTime)):i.exists!==void 0?fn.exists(i.exists):fn.none()}(e.currentDocument):fn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)he(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Hl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ua(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Kl(d)}else"increment"in a?l=new wd(o,a.increment):le(16584,{proto:a});const c=dt.fromServerFormat(a.fieldPath);return new wE(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Zo(t,e.update.name),i=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Vn(c.map(d=>dt.fromServerFormat(d)))}(e.updateMask);return new Gs(s,i,o,n,r)}return new mc(s,i,n,r)}if(e.delete){const s=Zo(t,e.delete);return new Nm(s,n)}if(e.verify){const s=Zo(t,e.verify);return new aD(s,n)}return le(1463,{proto:e})}function q9(t,e){return t&&t.length>0?(he(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?In(s.updateTime):In(i);return o.isEqual(me.min())&&(o=In(i)),new P9(o,s.transformResults||[])}(n,e))):[]}function gD(t,e){return{documents:[fD(t,e.path)]}}function yD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fD(t,s);const i=function(c){if(c.length!==0)return _D(We.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:$a(f.field),direction:H9(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=cw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function vD(t){let e=pD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=wD(h);return f instanceof We&&gE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new vd(za(T.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Sm(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new ql(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new ql(p,f)}(n.endAt)),Hk(e,s,o,i,a,"F",l,c)}function W9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=za(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=za(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=za(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=za(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(za(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return We.create(n.compositeFilter.filters.map(r=>wD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function H9(t){return M9[t]}function K9(t){return F9[t]}function G9(t){return U9[t]}function $a(t){return{fieldPath:t.canonicalString()}}function za(t){return dt.fromServerFormat(t.fieldPath)}function _D(t){return t instanceof Me?function(n){if(n.op==="=="){if(WS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(qS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(qS(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:K9(n.op),value:n.value}}}(t):t instanceof We?function(n){const r=n.getFilters().map(s=>_D(s));return r.length===1?r[0]:{compositeFilter:{op:G9(n.op),filters:r}}}(t):le(54877,{filter:t})}function Q9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ED(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,i=me.min(),o=me.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.yt=e}}function Y9(t,e){let n;if(e.document)n=$9(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=re.fromSegments(e.noDocument.path),s=ha(e.noDocument.readTime);n=Tt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return le(56709);{const r=re.fromSegments(e.unknownDocument.path),s=ha(e.unknownDocument.version);n=Tt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new qe(s[0],s[1]);return me.fromTimestamp(i)}(e.readTime)),n}function lb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Ip(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Gl(i,o.version.toTimestamp()),createTime:Gl(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:da(e.version)};else{if(!e.isUnknownDocument())return le(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:da(e.version)}}return r}function bp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function da(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ha(t){const e=new qe(t.seconds,t.nanoseconds);return me.fromTimestamp(e)}function xo(t,e){const n=(e.baseMutations||[]).map(i=>hw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>hw(t.yt,i)),s=qe.fromMillis(e.localWriteTimeMs);return new _E(e.batchId,s,n,r)}function du(t){const e=ha(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ha(t.lastLimboFreeSnapshotVersion):me.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return he(o===1,1966,{count:o}),er(Ud(pD(i.documents[0])))}(t.query):function(i){return er(vD(i))}(t.query),new As(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,It.fromBase64String(t.resumeToken))}function ID(t,e){const n=da(e.snapshotVersion),r=da(e.lastLimboFreeSnapshotVersion);let s;s=_p(e.target)?gD(t.yt,e.target):yD(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ca(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function SD(t){const e=vD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tp(e,e.limit,"L"):e}function cy(t,e){return new TE(e.largestBatchId,hw(t.yt,e.overlayMutation))}function cb(t,e){const n=e.path.lastSegment();return[t,pn(e.path.popLast()),n]}function ub(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:da(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{getBundleMetadata(e,n){return db(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:ha(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return db(e).put(function(s){return{bundleId:s.id,createTime:da(In(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return hb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:SD(i.bundledQuery),readTime:ha(i.readTime)}}(r)})}saveNamedQuery(e,n){return hb(e).put(function(s){return{name:s.name,readTime:da(In(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function db(t){return $t(t,bm)}function hb(t){return $t(t,Am)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Om(e,r)}getOverlay(e,n){return Kc(e).get(cb(this.userId,n)).next(r=>r?cy(this.serializer,r):null)}getOverlays(e,n){const r=es();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new TE(n,o);s.push(this.St(e,a))}),U.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(pn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Kc(e).Z(tw,a))}),U.waitFor(i)}getOverlaysForCollection(e,n,r){const s=es(),i=pn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Kc(e).J(tw,o).next(a=>{for(const l of a){const c=cy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=es();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Kc(e).ee({index:Sk,range:a},(l,c,d)=>{const h=cy(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return Kc(e).put(function(s,i,o){const[a,l,c]=cb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Kc(t){return $t(t,xm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{bt(e){return $t(e,dE)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?It.fromUint8Array(r):It.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ct(e.integerValue));else if("doubleValue"in e){const r=ct(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ud(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=js(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Bs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Lk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Pm(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):le(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=$l,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(ct(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),re.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ro.Kt=new Ro;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=255;function Z9(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function fb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=Z9(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class ez{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=fb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=fb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Da),this.sn(255)}_n(){this.an(Da),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Da?(this.sn(Da),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Da?(this.an(Da),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class tz{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class nz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Gc{constructor(){this.cn=new ez,this.ln=new tz(this.cn),this.hn=new nz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Po(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:If(this.En),directionalValue:If(this.dn),orderedDocumentKey:If(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ai(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=pb(t.En,e.En),n!==0?n:(n=pb(t.dn,e.dn),n!==0?n:re.comparator(t.In,e.In)))}function pb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function If(t){return vC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function mb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class gb{constructor(e){this.mn=new Ke((n,r)=>dt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(he(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Jv(e);if(n!==void 0&&!this.wn(n))return!1;const r=Io(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ke(dt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new mf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new mf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new mf(r.field,r.dir==="asc"?0:1)));return new mp(mp.UNKNOWN_ID,this.collectionId,n,cd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){var n,r;if(he(t instanceof Me||t instanceof We,20012),t instanceof Me){if(t instanceof Wk){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>Me.create(t.field,"==",i)))||[];return We.create(s,"or")}return t}const e=t.filters.map(s=>bD(s));return We.create(e,t.op)}function rz(t){if(t.getFilters().length===0)return[];const e=mw(bD(t));return he(AD(e),7391),fw(e)||pw(e)?[e]:e.getFilters()}function fw(t){return t instanceof Me}function pw(t){return t instanceof We&&gE(t)}function AD(t){return fw(t)||pw(t)||function(n){if(n instanceof We&&iw(n)){for(const r of n.getFilters())if(!fw(r)&&!pw(r))return!1;return!0}return!1}(t)}function mw(t){if(he(t instanceof Me||t instanceof We,34018),t instanceof Me)return t;if(t.filters.length===1)return mw(t.filters[0]);const e=t.filters.map(r=>mw(r));let n=We.create(e,t.op);return n=Ap(n),AD(n)?n:(he(n instanceof We,64498),he(Wl(n),40251),he(n.filters.length>1,57927),n.filters.reduce((r,s)=>bE(r,s)))}function bE(t,e){let n;return he(t instanceof Me||t instanceof We,38388),he(e instanceof Me||e instanceof We,25473),n=t instanceof Me?e instanceof Me?function(s,i){return We.create([s,i],"and")}(t,e):yb(t,e):e instanceof Me?yb(e,t):function(s,i){if(he(s.filters.length>0&&i.filters.length>0,48005),Wl(s)&&Wl(i))return $k(s,i.getFilters());const o=iw(s)?s:i,a=iw(s)?i:s,l=o.filters.map(c=>bE(c,a));return We.create(l,"or")}(t,e),Ap(n)}function yb(t,e){if(Wl(e))return $k(e,t.getFilters());{const n=e.filters.map(r=>bE(t,r));return We.create(n,"or")}}function Ap(t){if(he(t instanceof Me||t instanceof We,11850),t instanceof Me)return t;const e=t.getFilters();if(e.length===1)return Ap(e[0]);if(jk(t))return t;const n=e.map(s=>Ap(s)),r=[];return n.forEach(s=>{s instanceof Me?r.push(s):s instanceof We&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:We.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(){this.Cn=new AE}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(nr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class AE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="IndexedDbIndexManager",Mh=new Uint8Array(0);class iz{constructor(e,n){this.databaseId=n,this.vn=new AE,this.Fn=new Ks(r=>ca(r),(r,s)=>Fd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:pn(s)};return wb(e).put(i)}return U.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[ck(n),""],!1,!0);return wb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Zr(o.parent))}return r})}addFieldIndex(e,n){const r=Qc(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Oa(e);return i.next(a=>{o.put(ub(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Qc(e),s=Oa(e),i=Na(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Qc(e),r=Na(e),s=Oa(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return U.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new gb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Na(e);let s=!0;const i=new Map;return U.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ne();const a=[];return U.forEach(i,(l,c)=>{J(vb,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${ca(n)}`);const d=function(w,R){const k=Jv(R);if(k===void 0)return null;for(const V of Ep(w,k.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),h=function(w,R){const k=new Map;for(const V of Io(R))for(const x of Ep(w,V.fieldPath))switch(x.op){case"==":case"in":k.set(V.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return k.set(V.fieldPath.canonicalString(),x.value),Array.from(k.values())}return null}(c,l),f=function(w,R){const k=[];let V=!0;for(const x of Io(R)){const b=x.kind===0?YS(w,x.fieldPath,w.startAt):XS(w,x.fieldPath,w.startAt);k.push(b.value),V&&(V=b.inclusive)}return new ql(k,V)}(c,l),p=function(w,R){const k=[];let V=!0;for(const x of Io(R)){const b=x.kind===0?XS(w,x.fieldPath,w.endAt):YS(w,x.fieldPath,w.endAt);k.push(b.value),V&&(V=b.inclusive)}return new ql(k,V)}(c,l),T=this.On(l,c,f),g=this.On(l,c,p),v=this.Nn(l,c,h),_=this.Bn(l.indexId,d,T,f.inclusive,g,p.inclusive,v);return U.forEach(_,y=>r.Y(y,n.limit).next(w=>{w.forEach(R=>{const k=re.fromSegments(R.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return U.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=rz(We.create(e.filters,"and")).map(r=>aw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):Mh,p=this.kn(e,f,r[h%c],s),T=this.qn(e,f,i[h%c],o),g=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(p,T,g))}return d}kn(e,n,r,s){const i=new Po(e,re.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Po(e,re.empty(),n,r);return s?i.An():i}xn(e,n){const r=new gb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return U.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ke(dt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Gc;for(const s of Io(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Ro.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Gc;return Ro.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Gc;return Ro.Kt.Dt(gd(this.databaseId,n),r.Pn(function(i){const o=Io(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Gc);let i=0;for(const o of Io(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&yd(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);Ro.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Gc;l.seed(a.un()),Ro.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof Me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Qc(e),s=Oa(e);return(n?r.J(ew,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return U.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new cd(h.sequenceNumber,new nr(ha(h.readTime),new re(Zr(h.documentKey)),h.largestBatchId)):cd.empty(),p=d.fields.map(([T,g])=>new mf(dt.fromServerFormat(T),g));return new mp(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:be(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Qc(e),i=Oa(e);return this.Gn(e).next(o=>s.J(ew,IDBKeyRange.bound(n,n)).next(a=>U.forEach(a,l=>i.put(ub(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return U.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?U.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),U.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?U.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Na(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Na(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Na(e);let i=new Ke(ai);return s.ee({index:Ik,range:IDBKeyRange.only([r.indexId,this.uid,If(this.$n(r,n))])},(o,a)=>{i=i.add(new Po(r.indexId,n,mb(a.arrayValue),mb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new Ke(ai);const s=this.Qn(n,e);if(s==null)return r;const i=Jv(n);if(i!=null){const o=e.data.field(i.fieldPath);if(yd(o))for(const a of o.arrayValue.values||[])r=r.add(new Po(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Po(n.indexId,e.key,Mh,s));return r}Jn(e,n,r,s,i){J(vb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const p=l.getIterator(),T=c.getIterator();let g=ka(p),v=ka(T);for(;g||v;){let _=!1,y=!1;if(g&&v){const w=d(g,v);w<0?y=!0:w>0&&(_=!0)}else g!=null?y=!0:_=!0;_?(h(v),v=ka(T)):y?(f(g),g=ka(p)):(g=ka(p),v=ka(T))}}(s,i,ai,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),U.waitFor(o)}Gn(e){let n=1;return Oa(e).ee({index:Tk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ai(o,a)).filter((o,a,l)=>!a||ai(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ai(o,e),l=ai(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Mh,re.empty()),l=s[o+1].Vn(this.uid,Mh,re.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return ai(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(_b)}getMinOffset(e,n){return U.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||le(44426))).next(_b)}}function wb(t){return $t(t,fd)}function Na(t){return $t(t,xu)}function Qc(t){return $t(t,uE)}function Oa(t){return $t(t,Au)}function _b(t){he(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;aE(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new nr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xD=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e,n){const r=t.store(Ir),s=t.store(Fl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{he(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=wk(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return U.waitFor(i).next(()=>c)}function xp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw le(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(xD,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class Vm{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){he(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Vm(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).ee({index:Vo,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=qa(e),o=li(e);return o.add({}).next(a=>{he(typeof a=="number",49019);const l=new _E(a,n,r,s),c=function(p,T,g){const v=g.baseMutations.map(y=>Sp(p.yt,y)),_=g.mutations.map(y=>Sp(p.yt,y));return{userId:T,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new Ke((f,p)=>be(f.canonicalString(),p.canonicalString()));for(const f of s){const p=wk(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(p,M$))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),U.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return li(e).get(n).next(r=>r?(he(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),xo(this.serializer,r)):null)}er(e,n){return this.Xn[n]?U.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return li(e).ee({index:Vo,range:s},(o,a,l)=>{a.userId===this.userId&&(he(a.batchId>=r,47524,{tr:r}),i=xo(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Xo;return li(e).ee({index:Vo,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Xo],[this.userId,Number.POSITIVE_INFINITY]);return li(e).J(Vo,n).next(r=>r.map(s=>xo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=gf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return qa(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Zr(d);if(c===this.userId&&n.path.isEqual(f))return li(e).get(h).next(p=>{if(!p)throw le(61480,{nr:o,batchId:h});he(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:h}),i.push(xo(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(be);const s=[];return n.forEach(i=>{const o=gf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=qa(e).ee({range:a},(c,d,h)=>{const[f,p,T]=c,g=Zr(p);f===this.userId&&i.path.isEqual(g)?r=r.add(T):h.done()});s.push(l)}),U.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=gf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ke(be);return qa(e).ee({range:o},(l,c,d)=>{const[h,f,p]=l,T=Zr(f);h===this.userId&&r.isPrefixOf(T)?T.length===s&&(a=a.add(p)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(li(e).get(i).next(o=>{if(o===null)throw le(35274,{batchId:i});he(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(xo(this.serializer,o))}))}),U.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return RD(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),U.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return U.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return qa(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Zr(i[1]);s.push(l)}else a.done()}).next(()=>{he(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return PD(e,this.userId,n)}_r(e){return CD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Xo,lastStreamToken:""})}}function PD(t,e,n){const r=gf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return qa(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function li(t){return $t(t,Ir)}function qa(t){return $t(t,Fl)}function CD(t){return $t(t,dd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fa(0)}static cr(){return new fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new fa(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>me.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Va(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(he(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Va(e).ee((o,a)=>{const l=du(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Va(e).ee((r,s)=>{const i=du(s);n(i)})}lr(e){return Tb(e).get(vp).next(n=>(he(n!==null,2888),n))}hr(e,n){return Tb(e).put(vp,n)}Pr(e,n){return Va(e).put(ID(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ca(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Va(e).ee({range:s,index:Ek},(o,a,l)=>{const c=du(a);Fd(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=gi(e);return n.forEach(o=>{const a=pn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),U.waitFor(s)}removeMatchingKeys(e,n,r){const s=gi(e);return U.forEach(n,i=>{const o=pn(i.path);return U.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=gi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=gi(e);let i=Ne();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Zr(o[1]),d=new re(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=pn(n.path),s=IDBKeyRange.bound([r],[ck(r)],!1,!0);let i=0;return gi(e).ee({index:cE,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return Va(e).get(n).next(r=>r?du(r):null)}}function Va(t){return $t(t,Ul)}function Tb(t){return $t(t,Jo)}function gi(t){return $t(t,jl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="LruGarbageCollector",kD=1048576;function Sb([t,e],[n,r]){const s=be(t,n);return s===0?be(e,r):s}class az{constructor(e){this.Ir=e,this.buffer=new Ke(Sb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Sb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(Ib,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?J(Ib,"Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.Vr(3e5)})}}class lz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(On.ce);const r=new az(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Eb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ja()<=Ve.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function ND(t,e){return new lz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,n){this.db=e,this.garbageCollector=ND(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return Fh(e,r)}removeReference(e,n,r){return Fh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Fh(e,n)}br(e,n){return function(s,i){let o=!1;return CD(s).te(a=>PD(s,a,i).next(l=>(l&&(o=!0),U.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,me.min()),gi(e).delete(function(h){return[0,pn(h.path)]}(o))))});s.push(l)}}).next(()=>U.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Fh(e,n)}Sr(e,n){const r=gi(e);let s,i=On.ce;return r.ee({index:cE},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==On.ce&&n(new re(Zr(s)),i),i=c,s=l):i=On.ce}).next(()=>{i!==On.ce&&n(new re(Zr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fh(t,e){return gi(t).put(function(r,s){return{targetId:0,path:pn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.changes=new Ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return wo(e).put(r)}removeEntry(e,n,r){return wo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],bp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=Tt.newInvalidDocument(n);return wo(e).ee({index:yf,range:IDBKeyRange.only(Yc(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:Tt.newInvalidDocument(n)};return wo(e).ee({index:yf,range:IDBKeyRange.only(Yc(n))},(s,i)=>{r={document:this.Cr(n,i),size:xp(i)}}).next(()=>r)}getEntries(e,n){let r=Qn();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Qn(),s=new et(re.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,xp(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return U.resolve();let s=new Ke(xb);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Yc(s.first()),Yc(s.last())),o=s.getIterator();let a=o.getNext();return wo(e).ee({index:yf,range:i},(l,c,d)=>{const h=re.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&xb(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Yc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),bp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Qn();for(const h of c){const f=this.Cr(re.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(jd(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Qn();const o=Ab(n,r),a=Ab(n,nr.max());return wo(e).ee({index:_k,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(re.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new dz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return bb(e).get(Zv).next(n=>(he(!!n,20021),n))}Dr(e,n){return bb(e).put(Zv,n)}Cr(e,n){if(n){const r=Y9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(me.min())))return r}return Tt.newInvalidDocument(e)}}function VD(t){return new uz(t)}class dz extends OD{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ks(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Ke((i,o)=>be(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=lb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=xp(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=lb(this.Nr.serializer,o.convertToNoDocument(me.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),U.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function bb(t){return $t(t,hd)}function wo(t){return $t(t,yp)}function Yc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ab(t,e){const n=e.documentKey.path.toArray();return[t,bp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xb(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=be(n[i],r[i]),s)return s;return s=be(n.length,r.length),s||(s=be(n[n.length-2],r[r.length-2]),s||be(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ku(r.mutation,s,Vn.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ne()){const s=es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=cu();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Qn();const o=Cu(),a=function(){return Cu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Gs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ku(d.mutation,c,d.mutation.getFieldMask(),qe.now())):o.set(c.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new hz(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Cu();let s=new et((o,a)=>o-a),i=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Vn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ne()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=Zk();d.forEach(f=>{if(!i.has(f)){const p=iD(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Kk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(es());let a=Ml,l=i;return o.next(c=>U.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ne())).next(d=>({batchId:a,changes:Jk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=cu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=cu();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(h,f){return new pc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Tt.newInvalidDocument(d)))});let a=cu();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&ku(d.mutation,c,Vn.empty(),qe.now()),jd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:In(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:SD(s.bundledQuery),readTime:In(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(){this.overlays=new et(re.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=es();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=es(),i=n.length+1,o=new re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new et((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=es(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=es(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return U.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TE(n,r));let i=this.qr.get(n);i===void 0&&(i=Ne(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.Qr=new Ke(Ht.$r),this.Ur=new Ke(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ht(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ht(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new re(new $e([])),r=new Ht(n,e),s=new Ht(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new re(new $e([])),r=new Ht(n,e),s=new Ht(n,e+1);let i=Ne();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ht(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return re.comparator(e.key,n.key)||be(e.Yr,n.Yr)}static Kr(e,n){return be(e.Yr,n.Yr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ke(Ht.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _E(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Xo:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(be);return n.forEach(s=>{const i=new Ht(s,0),o=new Ht(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new Ht(new re(i),0);let a=new Ke(be);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),U.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new Ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ht(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e){this.ri=e,this.docs=function(){return new et(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Tt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qn();const o=n.path,a=new re(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||aE(pk(d),r)<=0||(s.has(d.key)||jd(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){le(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vz(this)}getSize(e){return U.resolve(this.size)}}class vz extends OD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.persistence=e,this.si=new Ks(n=>ca(n),Fd),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new xE,this.targetCount=0,this.ai=fa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.ui={},this.overlays={},this.ci=new On(0),this.li=!1,this.li=!0,this.hi=new mz,this.referenceDelegate=e(this),this.Pi=new wz(this),this.indexManager=new sz,this.remoteDocumentCache=function(s){return new yz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new TD(n),this.Ii=new fz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new gz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new _z(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class _z extends gk{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Ri=new xE,this.Vi=null}static mi(e){return new Lm(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=re.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rp{constructor(e,n){this.persistence=e,this.pi=new Ks(r=>pn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=ND(this,n)}static mi(e,n){return new Rp(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,me.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wf(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Im("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Md)}(e),function(l){l.createObjectStore(dd,{keyPath:L$}),l.createObjectStore(Ir,{keyPath:FS,autoIncrement:!0}).createIndex(Vo,US,{unique:!0}),l.createObjectStore(Fl)}(e),Rb(e),function(l){l.createObjectStore(So)}(e));let o=U.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(jl),l.deleteObjectStore(Ul),l.deleteObjectStore(Jo)}(e),Rb(e)),o=o.next(()=>function(l){const c=l.store(Jo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return c.put(vp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(Ir).J().next(h=>{l.deleteObjectStore(Ir),l.createObjectStore(Ir,{keyPath:FS,autoIncrement:!0}).createIndex(Vo,US,{unique:!0});const f=c.store(Ir),p=h.map(T=>f.put(T));return U.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Bl,{keyPath:W$})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(hd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(bm,{keyPath:H$})})(e),function(l){l.createObjectStore(Am,{keyPath:K$})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(xm,{keyPath:e9});c.createIndex(tw,t9,{unique:!1}),c.createIndex(Sk,n9,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(yp,{keyPath:F$});c.createIndex(yf,U$),c.createIndex(_k,j$)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(So))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(uE,{keyPath:G$,autoIncrement:!0}).createIndex(ew,Q$,{unique:!1}),l.createObjectStore(Au,{keyPath:Y$}).createIndex(Tk,X$,{unique:!1}),l.createObjectStore(xu,{keyPath:J$}).createIndex(Ik,Z$,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Au).clear()}).next(()=>{n.objectStore(xu).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(dE,{keyPath:r9})})(e)})),r<18&&s>=18&&vC()&&(o=o.next(()=>{n.objectStore(Au).clear()}).next(()=>{n.objectStore(xu).clear()})),o}wi(e){let n=0;return e.store(So).ee((r,s)=>{n+=xp(s)}).next(()=>{const r={byteSize:n};return e.store(hd).put(Zv,r)})}yi(e){const n=e.store(dd),r=e.store(Ir);return n.J().next(s=>U.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Xo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Vo,o).next(a=>U.forEach(a,l=>{he(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=xo(this.serializer,l);return RD(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(jl),r=e.store(So);return e.store(Jo).get(vp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new $e(o),c=function(h){return[0,pn(h)]}(l);i.push(n.get(c).next(d=>d?U.resolve():(h=>n.put({targetId:0,path:pn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>U.waitFor(i))})}bi(e,n){e.createObjectStore(fd,{keyPath:q$});const r=n.store(fd),s=new AE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:pn(l)})}};return n.store(So).ee({X:!0},(o,a)=>{const l=new $e(o);return i(l.popLast())}).next(()=>n.store(Fl).ee({X:!0},([o,a,l],c)=>{const d=Zr(a);return i(d.popLast())}))}Di(e){const n=e.store(Ul);return n.ee((r,s)=>{const i=du(s),o=ID(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(So),s=[];return r.ee((i,o)=>{const a=n.store(yp),l=function(h){return h.document?new re($e.fromString(h.document.name).popFirst(5)):h.noDocument?re.fromSegments(h.noDocument.path):h.unknownDocument?re.fromSegments(h.unknownDocument.path):le(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>U.waitFor(s))}Fi(e,n){const r=n.store(Ir),s=VD(this.serializer),i=new RE(Lm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ne();xo(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),U.forEach(a,(l,c)=>{const d=new cn(c),h=Om.wt(this.serializer,d),f=i.getIndexManager(d),p=Vm.wt(d,this.serializer,f,i.referenceDelegate);return new LD(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new nw(n,On.ce),l).next()})})}}function Rb(t){t.createObjectStore(jl,{keyPath:$$}).createIndex(cE,z$,{unique:!0}),t.createObjectStore(Ul,{keyPath:"targetId"}).createIndex(Ek,B$,{unique:!0}),t.createObjectStore(Jo)}const ci="IndexedDbPersistence",uy=18e5,dy=5e3,hy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Tz="main";class PE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!PE.v())throw new ee(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cz(this,s),this.$i=n+Tz,this.serializer=new TD(l),this.Ui=new zi(this.$i,this.Ni,new Ez(this.serializer)),this.hi=new J9,this.Pi=new oz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VD(this.serializer),this.Ii=new X9,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&xt(ci,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(W.FAILED_PRECONDITION,hy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new On(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(lo(e))return J(ci,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J(ci,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Xc(e).get(Ca).next(n=>U.resolve(this.es(n)))}ts(e){return Uh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,uy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=$t(n,Bl);return r.J().next(s=>{const i=this.ss(s,uy),o=s.filter(a=>i.indexOf(a)===-1);return U.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?U.resolve(!0):Xc(e).get(Ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,dy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ee(W.FAILED_PRECONDITION,hy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uh(e).J().next(r=>this.ss(r,dy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&J(ci,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Md,Bl],e=>{const n=new nw(e,On.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Uh(e).J().next(n=>this.ss(n,uy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Vm.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Om.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){J(ci,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?o9:l===17?Rk:l===16?i9:l===15?hE:l===14?xk:l===13?Ak:l===12?s9:l===11?bk:void le(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new nw(a,this.ci?this.ci.next():On.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ee(W.FAILED_PRECONDITION,mk);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Xc(e).get(Ca).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,dy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(W.FAILED_PRECONDITION,hy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xc(e).put(Ca,n)}static v(){return zi.v()}Zi(e){const n=Xc(e);return n.get(Ca).next(r=>this.es(r)?(J(ci,"Releasing primary lease."),n.delete(Ca)):U.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(xt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;yC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return J(ci,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xt(ci,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){xt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xc(t){return $t(t,Md)}function Uh(t){return $t(t,Bl)}function MD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ne(),s=Ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new CE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return yC()?8:yk(nn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Iz;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ja()<=Ve.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(ja()<=Ve.DEBUG&&J("QueryEngine","Query:",Ba(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ja()<=Ve.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(n))):U.resolve())}ys(e,n){if(JS(n))return U.resolve(null);let r=er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Tp(n,null,"F"),r=er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ne(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Tp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return JS(n)||s.isEqual(me.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(ja()<=Ve.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ba(n)),this.vs(e,o,n,fk(s,Ml)).next(a=>a))})}Ds(e,n){let r=new Ke(Yk(e));return n.forEach((s,i)=>{jd(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ja()<=Ve.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ba(n)),this.ps.getDocumentsMatchingQuery(e,n,nr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="LocalStore",Sz=3e8;class bz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new et(be),this.xs=new Ks(i=>ca(i),Fd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UD(t,e,n,r){return new bz(t,e,n,r)}async function jD(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ne();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function Az(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=U.resolve();return f.forEach(T=>{p=p.next(()=>d.getEntry(l,T)).next(g=>{const v=c.docVersions.get(T);he(v!==null,48541),g.version.compareTo(v)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function BD(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function xz(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(It.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(g,v,_){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Sz?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,d)&&a.push(n.Pi.updateTargetData(i,p))});let l=Qn(),c=Ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(Rz(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(me.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function Rz(t,e,n){let r=Ne(),s=Ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Qn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J(kE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function Pz(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Xo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pp(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new As(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ql(t,e,n){const r=ce(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lo(o))throw o;J(kE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Cp(t,e,n){const r=ce(t);let s=me.min(),i=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=ce(l),f=h.xs.get(d);return f!==void 0?U.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,er(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:me.min(),n?i:Ne())).next(a=>(qD(r,Qk(e),a),{documents:a,Qs:i})))}function $D(t,e){const n=ce(t),r=ce(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function zD(t,e){const n=ce(t),r=n.Os.get(e)||me.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,fk(r,Ml),Number.MAX_SAFE_INTEGER)).then(s=>(qD(n,e,s),s))}function qD(t,e,n){let r=t.Os.get(e)||me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="firestore_clients";function Pb(t,e){return`${WD}_${t}_${e}`}const HD="firestore_mutations";function Cb(t,e,n){let r=`${HD}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const KD="firestore_targets";function fy(t,e){return`${KD}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="SharedClientState";class kp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ee(s.error.code,s.error.message))),o?new kp(e,n,s.state,i):(xt(Qr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Du{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ee(r.error.code,r.error.message))),i?new Du(e,r.state,s):(xt(Qr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=yE();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=vk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Dp(e,i):(xt(Qr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class DE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new DE(n.clientId,n.onlineState):(xt(Qr,`Failed to parse online state: ${e}`),null)}}class gw{constructor(){this.activeTargetIds=yE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class py{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new et(be),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Pb(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new gw),this.ro=new RegExp(`^${WD}_${o}_([^_]*)$`),this.io=new RegExp(`^${HD}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${KD}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Pb(this.persistenceKey,r));if(s){const i=Dp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(fy(this.persistenceKey,e));if(s){const i=Du.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J(Qr,"READ",e,n),n}setItem(e,n){J(Qr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){J(Qr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(J(Qr,"EVENT",n.key,n.newValue),n.key===this.eo)return void xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=On.ce;if(i!=null)try{const a=JSON.parse(i);he(typeof a=="number",30636,{So:i}),o=a}catch(a){xt(Qr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==On.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new kp(this.currentUser,e,n,r),i=Cb(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Cb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=fy(this.persistenceKey,e),i=new Du(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Dp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return kp.Ws(new cn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Du.Ws(s,n)}uo(e){return DE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);J(Qr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=yE();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class GD{constructor(){this.Mo=new gw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="ConnectivityMonitor";class Db{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(kb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(kb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=null;function yw(){return jh===null?jh=function(){return 268435456+Math.round(2147483648*Math.random())}():jh++,"0x"+jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="RestConnection",kz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===wp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=yw(),a=this.zo(e,n.toUriEncodedString());J(my,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Ws(c);return this.Jo(e,a,l,r,d).then(h=>(J(my,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Yi(my,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=kz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Oz extends Dz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=yw();return new Promise((a,l)=>{const c=new tk;c.setWithCredentials(!0),c.listenOnce(nk.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case pf.NO_ERROR:const h=c.getResponseJson();J(ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case pf.TIMEOUT:J(ln,`RPC '${e}' ${o} timed out`),l(new ee(W.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const f=c.getStatus();if(J(ln,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const T=p==null?void 0:p.error;if(T&&T.status&&T.message){const g=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(y)>=0?y:W.UNKNOWN}(T.status);l(new ee(g,T.message))}else l(new ee(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ee(W.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{J(ln,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);J(ln,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=yw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ik(),a=sk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");J(ln,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,p=!1;const T=new Nz({Yo:v=>{p?J(ln,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(J(ln,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),J(ln,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),g=(v,_,y)=>{v.listen(_,w=>{try{y(w)}catch(R){setTimeout(()=>{throw R},0)}})};return g(h,lu.EventType.OPEN,()=>{p||(J(ln,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),g(h,lu.EventType.CLOSE,()=>{p||(p=!0,J(ln,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(h))}),g(h,lu.EventType.ERROR,v=>{p||(p=!0,Yi(ln,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),T.a_(new ee(W.UNAVAILABLE,"The operation could not be completed")))}),g(h,lu.EventType.MESSAGE,v=>{var _;if(!p){const y=v.data[0];he(!!y,16349);const w=y,R=(w==null?void 0:w.error)||((_=w[0])==null?void 0:_.error);if(R){J(ln,`RPC '${e}' stream ${s} received error:`,R);const k=R.status;let V=function(A){const C=Dt[A];if(C!==void 0)return lD(C)}(k),x=R.message;V===void 0&&(V=W.INTERNAL,x="Unknown error status: "+k+" with message "+R.message),p=!0,T.a_(new ee(V,x)),h.close()}else J(ln,`RPC '${e}' stream ${s} received:`,y),T.u_(y)}}),g(a,rk.STAT_EVENT,v=>{v.stat===Yv.PROXY?J(ln,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Yv.NOPROXY&&J(ln,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return typeof window<"u"?window:null}function Sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){return new j9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="PersistentStream";class XD{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YD(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(xt(n.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ee(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(Nb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(Nb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Vz extends XD{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=z9(this.serializer,e),r=function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?In(o.readTime):me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=dw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=_p(l)?{documents:gD(i,l)}:{query:yD(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dD(i,o.resumeToken);const c=cw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=Gl(i,o.snapshotVersion.toTimestamp());const c=cw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=W9(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=dw(this.serializer),n.removeTarget=e,this.q_(n)}}class Lz extends XD{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=q9(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=dw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{}class Fz extends Mz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,uw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(W.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,uw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Uz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xt(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class jz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ta(this)&&(J(pa,"Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.Ea.add(4),await gc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await zd(c)}(this))})}),this.Ra=new Uz(r,s)}}async function zd(t){if(Ta(t))for(const e of t.da)await e(!0)}async function gc(t){for(const e of t.da)await e(!1)}function Fm(t,e){const n=ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),VE(n)?OE(n):vc(n).O_()&&NE(n,e))}function Yl(t,e){const n=ce(t),r=vc(n);n.Ia.delete(e),r.O_()&&JD(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ta(n)&&n.Ra.set("Unknown"))}function NE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vc(t).Y_(e)}function JD(t,e){t.Va.Ue(e),vc(t).Z_(e)}function OE(t){t.Va=new L9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),vc(t).start(),t.Ra.ua()}function VE(t){return Ta(t)&&!vc(t).x_()&&t.Ia.size>0}function Ta(t){return ce(t).Ea.size===0}function ZD(t){t.Va=void 0}async function Bz(t){t.Ra.set("Online")}async function $z(t){t.Ia.forEach((e,n)=>{NE(t,e)})}async function zz(t,e){ZD(t),VE(t)?(t.Ra.ha(e),OE(t)):t.Ra.set("Unknown")}async function qz(t,e,n){if(t.Ra.set("Online"),e instanceof uD&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){J(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Np(t,r)}else if(e instanceof Tf?t.Va.Ze(e):e instanceof cD?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const r=await BD(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(It.EMPTY_BYTE_STRING,d.snapshotVersion)),JD(i,l);const h=new As(d.target,l,c,d.sequenceNumber);NE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J(pa,"Failed to raise snapshot:",r),await Np(t,r)}}async function Np(t,e,n){if(!lo(e))throw e;t.Ea.add(1),await gc(t),t.Ra.set("Offline"),n||(n=()=>BD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(pa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zd(t)})}function eN(t,e){return e().catch(n=>Np(t,n,e))}async function yc(t){const e=ce(t),n=eo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xo;for(;Wz(e);)try{const s=await Pz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Hz(e,s)}catch(s){await Np(e,s)}tN(e)&&nN(e)}function Wz(t){return Ta(t)&&t.Ta.length<10}function Hz(t,e){t.Ta.push(e);const n=eo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function tN(t){return Ta(t)&&!eo(t).x_()&&t.Ta.length>0}function nN(t){eo(t).start()}async function Kz(t){eo(t).ra()}async function Gz(t){const e=eo(t);for(const n of t.Ta)e.ea(n.mutations)}async function Qz(t,e,n){const r=t.Ta.shift(),s=EE.from(r,e,n);await eN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yc(t)}async function Yz(t,e){e&&eo(t).X_&&await async function(r,s){if(function(o){return N9(o)&&o!==W.ABORTED}(s.code)){const i=r.Ta.shift();eo(r).B_(),await eN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yc(r)}}(t,e),tN(t)&&nN(t)}async function Ob(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),J(pa,"RemoteStore received new credentials");const r=Ta(n);n.Ea.add(3),await gc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zd(n)}async function vw(t,e){const n=ce(t);e?(n.Ea.delete(2),await zd(n)):e||(n.Ea.add(2),await gc(n),n.Ra.set("Unknown"))}function vc(t){return t.ma||(t.ma=function(n,r,s){const i=ce(n);return i.sa(),new Vz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Bz.bind(null,t),t_:$z.bind(null,t),r_:zz.bind(null,t),H_:qz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),VE(t)?OE(t):t.Ra.set("Unknown")):(await t.ma.stop(),ZD(t))})),t.ma}function eo(t){return t.fa||(t.fa=function(n,r,s){const i=ce(n);return i.sa(),new Lz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kz.bind(null,t),r_:Yz.bind(null,t),ta:Gz.bind(null,t),na:Qz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await yc(t)):(await t.fa.stop(),t.Ta.length>0&&(J(pa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new LE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qd(t,e){if(xt("AsyncQueue",`${e}: ${t}`),lo(t))return new ee(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=cu(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.ga=new et(re.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xl(e,n,ml.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Jz{constructor(){this.queries=Lb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ce(n),i=s.queries;s.queries=Lb(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ee(W.ABORTED,"Firestore shutting down"))}}function Lb(){return new Ks(t=>Gk(t),Cm)}async function ME(t,e){const n=ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Xz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=qd(o,`Initialization of query '${Ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&UE(n)}async function FE(t,e){const n=ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Zz(t,e){const n=ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&UE(n)}function e7(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function UE(t){t.Ca.forEach(e=>{e.next()})}var ww,Mb;(Mb=ww||(ww={})).Ma="default",Mb.Cache="cache";class jE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ww.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.key=e}}class sN{constructor(e){this.key=e}}class iN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=Yk(e),this.tu=new ml(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Vb,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=jd(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?T!==g&&(r.track({type:3,doc:p}),v=!0):this.su(f,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(p,T){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Rt:v})}};return g(p)-g(T)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Xl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new rN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wc="SyncEngine";class t7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class n7{constructor(e){this.key=e,this.hu=!1}}class r7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ks(a=>Gk(a),Cm),this.Iu=new Map,this.Eu=new Set,this.du=new et(re.comparator),this.Au=new Map,this.Ru=new xE,this.Vu={},this.mu=new Map,this.fu=fa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s7(t,e,n=!0){const r=Um(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await oN(r,e,n,!0),s}async function i7(t,e){const n=Um(t);await oN(n,e,!0,!1)}async function oN(t,e,n,r){const s=await Pp(t.localStore,er(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await BE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Fm(t.remoteStore,s),a}async function BE(t,e,n,r,s){t.pu=(h,f,p)=>async function(g,v,_,y){let w=v.view.ru(_);w.Cs&&(w=await Cp(g.localStore,v.query,!1).then(({documents:x})=>v.view.ru(x,w)));const R=y&&y.targetChanges.get(v.targetId),k=y&&y.targetMismatches.get(v.targetId)!=null,V=v.view.applyChanges(w,g.isPrimaryClient,R,k);return _w(g,v.targetId,V.au),V.snapshot}(t,h,f,p);const i=await Cp(t.localStore,e,!0),o=new iN(e,i.Qs),a=o.ru(i.documents),l=$d.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);_w(t,n,c.au);const d=new t7(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function o7(t,e,n){const r=ce(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Cm(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ql(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Yl(r.remoteStore,s.targetId),Jl(r,s.targetId)}).catch(ao)):(Jl(r,s.targetId),await Ql(r.localStore,s.targetId,!0))}async function a7(t,e){const n=ce(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yl(n.remoteStore,r.targetId))}async function l7(t,e,n){const r=WE(t);try{const s=await function(o,a){const l=ce(o),c=qe.now(),d=a.reduce((p,T)=>p.add(T.key),Ne());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let T=Qn(),g=Ne();return l.Ns.getEntries(p,d).next(v=>{T=v,T.forEach((_,y)=>{y.isValidDocument()||(g=g.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,T)).next(v=>{h=v;const _=[];for(const y of a){const w=k9(y,h.get(y.key).overlayedDocument);w!=null&&_.push(new Gs(y.key,w,Fk(w.value.mapValue),fn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(v=>{f=v;const _=v.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,_)})}).then(()=>({batchId:f.batchId,changes:Jk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new et(be)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await uo(r,s.changes),await yc(r.remoteStore)}catch(s){const i=qd(s,"Failed to persist write");n.reject(i)}}async function aN(t,e){const n=ce(t);try{const r=await xz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?he(o.hu,14607):s.removedDocuments.size>0&&(he(o.hu,42227),o.hu=!1))}),await uo(n,r,e)}catch(r){await ao(r)}}function Fb(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&UE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function c7(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new et(re.comparator);o=o.insert(i,Tt.newNoDocument(i,me.min()));const a=Ne().add(i),l=new Bd(me.min(),new Map,new et(be),o,a);await aN(r,l),r.du=r.du.remove(i),r.Au.delete(e),qE(r)}else await Ql(r.localStore,e,!1).then(()=>Jl(r,e,n)).catch(ao)}async function u7(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await Az(n.localStore,e);zE(n,r,null),$E(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,s)}catch(s){await ao(s)}}async function d7(t,e,n){const r=ce(t);try{const s=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(he(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);zE(r,e,n),$E(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,s)}catch(s){await ao(s)}}function $E(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function zE(t,e,n){const r=ce(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Jl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||lN(t,r)})}function lN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Yl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),qE(t))}function _w(t,e,n){for(const r of n)r instanceof rN?(t.Ru.addReference(r.key,e),h7(t,r)):r instanceof sN?(J(wc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||lN(t,r.key)):le(19791,{wu:r})}function h7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(wc,"New document in limbo: "+n),t.Eu.add(r),qE(t))}function qE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new re($e.fromString(e)),r=t.fu.next();t.Au.set(r,new n7(n)),t.du=t.du.insert(n,r),Fm(t.remoteStore,new As(er(Ud(n.path)),r,"TargetPurposeLimboResolution",On.ce))}}async function uo(t,e,n){const r=ce(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=CE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=ce(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(c,f=>U.forEach(f.Es,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>U.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!lo(h))throw h;J(kE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Ms.get(f),T=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(T);d.Ms=d.Ms.insert(f,g)}}}(r.localStore,i))}async function f7(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){J(wc,"User change. New user:",e.toKey());const r=await jD(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new ee(W.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uo(n,r.Ls)}}function p7(t,e){const n=ce(t),r=n.Au.get(e);if(r&&r.hu)return Ne().add(r.key);{let s=Ne();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function m7(t,e){const n=ce(t),r=await Cp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&_w(n,e.targetId,s.au),s}async function g7(t,e){const n=ce(t);return zD(n.localStore,e).then(r=>uo(n,r))}async function y7(t,e,n,r){const s=ce(t),i=await function(a,l){const c=ce(a),d=ce(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):U.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await yc(s.remoteStore):n==="acknowledged"||n==="rejected"?(zE(s,e,r||null),$E(s,e),function(a,l){ce(ce(a).mutationQueue).ir(l)}(s.localStore,e)):le(6720,"Unknown batchState",{Su:n}),await uo(s,i)):J(wc,"Cannot apply mutation batch with id: "+e)}async function v7(t,e){const n=ce(t);if(Um(n),WE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Ub(n,r.toArray());n.gu=!0,await vw(n.remoteStore,!0);for(const i of s)Fm(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Jl(n,o),Ql(n.localStore,o,!0))),Yl(n.remoteStore,o)}),await s,await Ub(n,r),function(o){const a=ce(o);a.Au.forEach((l,c)=>{Yl(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new et(re.comparator)}(n),n.gu=!1,await vw(n.remoteStore,!1)}}async function Ub(t,e,n){const r=ce(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Pp(r.localStore,er(l[0]));for(const c of l){const d=r.Tu.get(c),h=await m7(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await $D(r.localStore,o);a=await Pp(r.localStore,c),await BE(r,cN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function cN(t){return Hk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function w7(t){return function(n){return ce(ce(n).persistence).Ts()}(ce(t).localStore)}async function _7(t,e,n,r){const s=ce(t);if(s.gu)return void J(wc,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await zD(s.localStore,Qk(i[0])),a=Bd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",It.EMPTY_BYTE_STRING);await uo(s,o,a);break}case"rejected":await Ql(s.localStore,e,!0),Jl(s,e,r);break;default:le(64155,n)}}async function E7(t,e,n){const r=Um(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){J(wc,"Adding an already active target "+s);continue}const i=await $D(r.localStore,s),o=await Pp(r.localStore,i);await BE(r,cN(i),o.targetId,!1,o.resumeToken),Fm(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Ql(r.localStore,s,!1).then(()=>{Yl(r.remoteStore,s),Jl(r,s)}).catch(ao)}}function Um(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c7.bind(null,e),e.Pu.H_=Zz.bind(null,e.eventManager),e.Pu.yu=e7.bind(null,e.eventManager),e}function WE(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d7.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UD(this.persistence,new FD,e.initialUser,this.serializer)}Cu(e){return new RE(Lm.mi,this.serializer)}Du(e){return new GD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class T7 extends _d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){he(this.persistence.referenceDelegate instanceof Rp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new DD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new RE(r=>Rp.mi(r,n),this.serializer)}}class uN extends _d{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await WE(this.xu.syncEngine),await yc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return UD(this.persistence,new FD,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new DD(r,e.asyncQueue,n)}Mu(e,n){const r=new O$(n,this.persistence);return new N$(e.asyncQueue,r)}Cu(e){const n=MD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new PE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,QD(),Sf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new GD}}class I7 extends uN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof py&&(this.sharedClientState.syncEngine={Co:y7.bind(null,n),vo:_7.bind(null,n),Fo:E7.bind(null,n),Ts:w7.bind(null,n),Do:g7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await v7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=QD();if(!py.v(n))throw new ee(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=MD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new py(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ed{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f7.bind(null,this.syncEngine),await vw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Jz}()}createDatastore(e){const n=Mm(e.databaseInfo.databaseId),r=function(i){return new Oz(i)}(e.databaseInfo);return function(i,o,a,l){return new Fz(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new jz(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Fb(this.syncEngine,n,0),function(){return Db.v()?new Db:new Cz}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new r7(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ce(s);J(pa,"RemoteStore shutting down."),i.Ea.add(5),await gc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ed.provider={build:()=>new Ed};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="FirestoreClient";class S7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=cn.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J(to,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(to,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gy(t,e){t.asyncQueue.verifyOperationInProgress(),J(to,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await jD(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KE(t);J(to,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ob(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ob(e.remoteStore,s)),t._onlineComponents=e}async function KE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(to,"Using user provided OfflineComponentProvider");try{await gy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Yi("Error using user provided cache. Falling back to memory cache: "+n),await gy(t,new _d)}}else J(to,"Using default OfflineComponentProvider"),await gy(t,new T7(void 0));return t._offlineComponents}async function GE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(to,"Using user provided OnlineComponentProvider"),await jb(t,t._uninitializedComponentsProvider._online)):(J(to,"Using default OnlineComponentProvider"),await jb(t,new Ed))),t._onlineComponents}function dN(t){return KE(t).then(e=>e.persistence)}function hN(t){return KE(t).then(e=>e.localStore)}function fN(t){return GE(t).then(e=>e.remoteStore)}function b7(t){return GE(t).then(e=>e.syncEngine)}async function Op(t){const e=await GE(t),n=e.eventManager;return n.onListen=s7.bind(null,e.syncEngine),n.onUnlisten=o7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=i7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=a7.bind(null,e.syncEngine),n}function A7(t){return t.asyncQueue.enqueue(async()=>{const e=await dN(t),n=await fN(t);return e.setNetworkEnabled(!0),function(s){const i=ce(s);return i.Ea.delete(0),zd(i)}(n)})}function x7(t){return t.asyncQueue.enqueue(async()=>{const e=await dN(t),n=await fN(t);return e.setNetworkEnabled(!1),async function(s){const i=ce(s);i.Ea.add(0),await gc(i),i.Ra.set("Offline")}(n)})}function R7(t,e){const n=new dr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=ce(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new ee(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=qd(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await hN(t),e,n)),n.promise}function P7(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new HE({next:f=>{d.Nu(),o.enqueueAndForget(()=>FE(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new ee(W.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new ee(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new jE(Ud(a.path),d,{includeMetadataChanges:!0,qa:!0});return ME(i,h)}(await Op(t),t.asyncQueue,e,n,r)),r.promise}function C7(t,e){const n=new dr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Cp(s,i,!0),l=new iN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=qd(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await hN(t),e,n)),n.promise}function k7(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new HE({next:f=>{d.Nu(),o.enqueueAndForget(()=>FE(i,h)),f.fromCache&&l.source==="server"?c.reject(new ee(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new jE(a,d,{includeMetadataChanges:!0,qa:!0});return ME(i,h)}(await Op(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7="firestore.googleapis.com",$b=!0;class zb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D7,this.ssl=$b}else this.host=e.host,this.ssl=e.ssl??$b;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kD)throw new ee(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class QE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lk;switch(r.type){case"firstParty":return new S$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Bb.get(n);r&&(J("ComponentProvider","Removing Datastore"),Bb.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ld(n,ht._jsonSchema))return new ht(e,r||null,new re($e.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:Ot("string",ht._jsonSchemaVersion),referencePath:Ot("string")};class Rs extends Mr{constructor(e,n,r){super(e,n,Ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new re(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function fe(t,e,...n){if(t=Ge(t),uk("collection","path",e),t instanceof QE){const r=$e.fromString(e,...n);return NS(r),new Rs(t,null,r)}{if(!(t instanceof ht||t instanceof Rs))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return NS(r),new Rs(t.firestore,null,r)}}function ve(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=Em.newId()),uk("doc","path",e),t instanceof QE){const r=$e.fromString(e,...n);return DS(r),new ht(t,null,new re(r))}{if(!(t instanceof ht||t instanceof Rs))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return DS(r),new ht(t.firestore,t instanceof Rs?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="AsyncQueue";class Wb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YD(this,"async_queue_retry"),this._c=()=>{const r=Sf();r&&J(qb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Sf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new dr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;J(qb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,xt("INTERNAL UNHANDLED ERROR: ",Hb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=LE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&le(47125,{Pc:Hb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Hb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Sn extends QE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Wb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wb(e),this._firestoreClient=void 0,await e}}}function mN(t,e,n){n||(n=wp);const r=wm(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Ol(i,e))return s;throw new ee(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ee(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kD)throw new ee(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ws(e.host)&&J_(e.host),r.initialize({options:e,instanceIdentifier:n})}function Qs(t){if(t._terminated)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gN(t),t._firestoreClient}function gN(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new l9(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new S7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function N7(t,e){Yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return yN(t,Ed.provider,{build:r=>new uN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function O7(t){Yi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();yN(t,Ed.provider,{build:n=>new I7(n,e.cacheSizeBytes)})}function yN(t,e,n){if((t=Pt(t,Sn))._firestoreClient||t._terminated)throw new ee(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ee(W.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},gN(t)}function YE(t){return A7(Qs(t=Pt(t,Sn)))}function XE(t){return x7(Qs(t=Pt(t,Sn)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(It.fromBase64String(e))}catch(n){throw new ee(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ld(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Ot("string",Kn._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(Ld(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:Ot("string",Pr._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ld(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cr(e.vectorValues);throw new ee(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:Ot("string",Cr._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=/^__.*__$/;class L7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new mc(e,this.data,n,this.fieldTransforms)}}class vN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:t})}}class jm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wN(this.Ac)&&V7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class M7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mm(e)}Cc(e,n,r,s=!1){return new jm({Ac:e,methodName:n,Dc:r,path:dt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bm(t){const e=t._freezeSettings(),n=Mm(t._databaseId);return new M7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _N(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);e0("Data must be an object, but it was:",o,r);const a=EN(r,o);let l,c;if(i.merge)l=new Vn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Ew(e,h,n);if(!o.contains(f))throw new ee(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);IN(d,f)||d.push(f)}l=new Vn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new L7(new hn(a),l,c)}class $m extends _c{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $m}}function F7(t,e,n){return new jm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class JE extends _c{_toFieldTransform(e){return new wE(e.path,new Hl)}isEqual(e){return e instanceof JE}}class ZE extends _c{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=F7(this,e,!0),r=this.vc.map(i=>Ec(i,n)),s=new ua(r);return new wE(e.path,s)}isEqual(e){return e instanceof ZE&&Ol(this.vc,e.vc)}}function U7(t,e,n,r){const s=t.Cc(1,e,n);e0("Data must be an object, but it was:",s,r);const i=[],o=hn.empty();co(r,(l,c)=>{const d=t0(e,l,n);c=Ge(c);const h=s.yc(d);if(c instanceof $m)i.push(d);else{const f=Ec(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Vn(i);return new vN(o,a,s.fieldTransforms)}function j7(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Ew(e,r,n)],l=[s];if(i.length%2!=0)throw new ee(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Ew(e,i[f])),l.push(i[f+1]);const c=[],d=hn.empty();for(let f=a.length-1;f>=0;--f)if(!IN(c,a[f])){const p=a[f];let T=l[f];T=Ge(T);const g=o.yc(p);if(T instanceof $m)c.push(p);else{const v=Ec(T,g);v!=null&&(c.push(p),d.set(p,v))}}const h=new Vn(c);return new vN(d,h,o.fieldTransforms)}function B7(t,e,n,r=!1){return Ec(n,t.Cc(r?4:3,e))}function Ec(t,e){if(TN(t=Ge(t)))return e0("Unsupported field value:",e,t),EN(t,e);if(t instanceof _c)return function(r,s){if(!wN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ec(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return b9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:Gl(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gl(s.serializer,i)}}if(r instanceof Pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:dD(s.serializer,r._byteString)};if(r instanceof ht){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:SE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cr)return function(o,a){return{mapValue:{fields:{[pE]:{stringValue:mE},[$l]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return vE(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Tm(r)}`)}(t,e)}function EN(t,e){const n={};return Pk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(r,s)=>{const i=Ec(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function TN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Pr||t instanceof Kn||t instanceof ht||t instanceof _c||t instanceof Cr)}function e0(t,e,n){if(!TN(n)||!hk(n)){const r=Tm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ew(t,e,n){if((e=Ge(e))instanceof Wd)return e._internalPath;if(typeof e=="string")return t0(t,e);throw Vp("Field path arguments must be of type string or ",t,!1,void 0,n)}const $7=new RegExp("[~\\*/\\[\\]]");function t0(t,e,n){if(e.search($7)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wd(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ee(W.INVALID_ARGUMENT,a+t+l)}function IN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z7 extends SN{data(){return super.data()}}function zm(t,e){return typeof e=="string"?t0(t,e):e instanceof Wd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}class qm extends n0{}function Te(t,e,...n){let r=[];e instanceof n0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Wm).length,a=i.filter(l=>l instanceof Hd).length;if(o>1||o>0&&a>0)throw new ee(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Hd extends qm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hd(e,n,r)}_apply(e){const n=this._parse(e);return AN(e._query,n),new Mr(e.firestore,e.converter,lw(e._query,n))}_parse(e){const n=Bm(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ee(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Qb(h,d);const T=[];for(const g of h)T.push(Gb(l,i,g));f={arrayValue:{values:T}}}else f=Gb(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Qb(h,d),f=B7(a,o,h,d==="in"||d==="not-in");return Me.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function we(t,e,n){const r=e,s=zm("where",t);return Hd._create(s,r,n)}class Wm extends n0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:We.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)AN(o,l),o=lw(o,l)}(e._query,n),new Mr(e.firestore,e.converter,lw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hm extends qm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Hm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vd(i,o)}(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new pc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function is(t,e="asc"){const n=e,r=zm("orderBy",t);return Hm._create(r,n)}class Km extends qm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Km(e,n,r)}_apply(e){return new Mr(e.firestore,e.converter,Tp(e._query,this._limit,this._limitType))}}function ea(t){return C$("limit",t),Km._create("limit",t,"F")}function Gb(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new ee(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kk(e)&&n.indexOf("/")!==-1)throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!re.isDocumentKey(r))throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gd(t,new re(r))}if(n instanceof ht)return gd(t,n._key);throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tm(n)}.`)}function Qb(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AN(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xN{convertValue(e,n="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return co(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[$l].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>ct(o.doubleValue));return new Cr(n)}convertGeoPoint(e){return new Pr(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pd(e));default:return null}}convertTimestamp(e){const n=js(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);he(ED(r),9688,{name:e});const s=new Xi(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||xt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ps extends SN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:Ot("string",Ps._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Nu extends Ps{data(e={}){return super.data(e)}}class Cs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nu(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Nu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Nu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:q7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Em.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function q7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){t=Pt(t,ht);const e=Pt(t.firestore,Sn);return P7(Qs(e),t._key).then(n=>CN(e,t,n))}Cs._jsonSchemaVersion="firestore/querySnapshot/1.0",Cs._jsonSchema={type:Ot("string",Cs._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Kd extends xN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function PN(t){t=Pt(t,ht);const e=Pt(t.firestore,Sn),n=Qs(e),r=new Kd(e);return R7(n,t._key).then(s=>new Ps(e,r,t._key,s,new Lo(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ae(t){t=Pt(t,Mr);const e=Pt(t.firestore,Sn),n=Qs(e),r=new Kd(e);return bN(t._query),k7(n,t._query).then(s=>new Cs(e,r,t,s))}function W7(t){t=Pt(t,Mr);const e=Pt(t.firestore,Sn),n=Qs(e),r=new Kd(e);return C7(n,t._query).then(s=>new Cs(e,r,t,s))}function bn(t,e,n){t=Pt(t,ht);const r=Pt(t.firestore,Sn),s=RN(t.converter,e,n);return Gd(r,[_N(Bm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fn.none())])}function Ct(t,e,n,...r){t=Pt(t,ht);const s=Pt(t.firestore,Sn),i=Bm(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Wd?j7(i,"updateDoc",t._key,e,n,r):U7(i,"updateDoc",t._key,e),Gd(s,[o.toMutation(t._key,fn.exists(!0))])}function Gt(t){return Gd(Pt(t.firestore,Sn),[new Nm(t._key,fn.none())])}function os(t,e){const n=Pt(t.firestore,Sn),r=ve(t),s=RN(t.converter,e);return Gd(n,[_N(Bm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function $s(t,...e){var l,c,d;t=Ge(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Kb(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Kb(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof ht)o=Pt(t.firestore,Sn),a=Ud(t._key.path),i={next:h=>{e[r]&&e[r](CN(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Pt(t,Mr);o=Pt(h.firestore,Sn),a=h._query;const f=new Kd(o);i={next:p=>{e[r]&&e[r](new Cs(o,f,h,p))},error:e[r+1],complete:e[r+2]},bN(t._query)}return function(f,p,T,g){const v=new HE(g),_=new jE(p,v,T);return f.asyncQueue.enqueueAndForget(async()=>ME(await Op(f),_)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>FE(await Op(f),_))}}(Qs(o),a,s,i)}function Gd(t,e){return function(r,s){const i=new dr;return r.asyncQueue.enqueueAndForget(async()=>l7(await b7(r),s,i)),i.promise}(Qs(t),e)}function CN(t,e,n){const r=n.docs.get(e._key),s=new Kd(t);return new Ps(t,s,e._key,r,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}function Ce(){return new JE("serverTimestamp")}function H7(...t){return new ZE("arrayUnion",t)}(function(e,n=!0){(function(s){fc=s})(Od),cs(new Or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Sn(new T$(r.getProvider("auth-internal")),new b$(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Zn(RS,PS,e),Zn(RS,PS,"esm2020")})();const yi=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xN,Bytes:Kn,CollectionReference:Rs,DocumentReference:ht,DocumentSnapshot:Ps,FieldPath:Wd,FieldValue:_c,Firestore:Sn,FirestoreError:ee,GeoPoint:Pr,Query:Mr,QueryCompositeFilterConstraint:Wm,QueryConstraint:qm,QueryDocumentSnapshot:Nu,QueryFieldFilterConstraint:Hd,QueryLimitConstraint:Km,QueryOrderByConstraint:Hm,QuerySnapshot:Cs,SnapshotMetadata:Lo,Timestamp:qe,VectorValue:Cr,_AutoId:Em,_ByteString:It,_DatabaseId:Xi,_DocumentKey:re,_EmptyAuthCredentialsProvider:lk,_FieldPath:dt,_cast:Pt,_logWarn:Yi,_validateIsNotUsedTogether:dk,addDoc:os,arrayUnion:H7,collection:fe,deleteDoc:Gt,disableNetwork:XE,doc:ve,enableIndexedDbPersistence:N7,enableMultiTabIndexedDbPersistence:O7,enableNetwork:YE,ensureFirestoreConfigured:Qs,executeWrite:Gd,getDoc:Et,getDocFromCache:PN,getDocs:Ae,getDocsFromCache:W7,initializeFirestore:mN,limit:ea,onSnapshot:$s,orderBy:is,query:Te,serverTimestamp:Ce,setDoc:bn,setLogLevel:ok,updateDoc:Ct,where:we},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7="type.googleapis.com/google.protobuf.Int64Value",G7="type.googleapis.com/google.protobuf.UInt64Value";function kN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Lp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Lp(e));if(typeof t=="function"||typeof t=="object")return kN(t,e=>Lp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Zl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case K7:case G7:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Zl(e)):typeof t=="function"||typeof t=="object"?kN(t,e=>Zl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ln extends Lr{constructor(e,n,r){super(`${r0}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Ln.prototype)}}function Q7(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Mp(t,e){let n=Q7(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Yb[o])return new Ln("internal","internal");n=Yb[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Zl(s))}}catch{}return n==="ok"?null:new Ln(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Hn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="us-central1",X7=/^data: (.*?)(?:\n|$)/;function J7(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Ln("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Z7{constructor(e,n,r,s,i=Tw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Y7(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Tw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function e8(t,e,n){const r=Ws(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(J_(t.emulatorOrigin+"/backends"),mC("Functions",!0))}function t8(t,e,n){const r=s=>r8(t,e,s,{});return r.stream=(s,i)=>i8(t,e,s,i),r}function DN(t){return t.emulatorOrigin&&Ws(t.emulatorOrigin)?"include":void 0}async function n8(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:DN(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function NN(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function r8(t,e,n,r){const s=t._url(e);return s8(t,s,n,r)}async function s8(t,e,n,r){n=Lp(n);const s={data:n},i=await NN(t,r),o=r.timeout||7e4,a=J7(o),l=await Promise.race([n8(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Ln("cancelled","Firebase Functions instance was deleted.");const c=Mp(l.status,l.json);if(c)throw c;if(!l.json)throw new Ln("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Ln("internal","Response is missing data field.");return{data:Zl(d)}}function i8(t,e,n,r){const s=t._url(e);return o8(t,s,n,r||{})}async function o8(t,e,n,r){var f;n=Lp(n);const s={data:n},i=await NN(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:DN(t)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const g=new Ln("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const T=Mp(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let a,l;const c=new Promise((p,T)=>{a=p,l=T});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const p=new Ln("cancelled","Request was cancelled.");l(p)});const d=o.body.getReader(),h=a8(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:T,done:g}=await p.read();return{value:T,done:g}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function a8(t,e,n,r){const s=(o,a)=>{const l=o.match(X7);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Zl(d.result));return}if("message"in d){a.enqueue(Zl(d.message));return}if("error"in d){const h=Mp(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Ln){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Ln("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Ln("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Ln?c:Mp(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const Xb="@firebase/functions",Jb="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8="auth-internal",c8="app-check-internal",u8="messaging-internal";function d8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(l8),o=n.getProvider(u8),a=n.getProvider(c8);return new Z7(s,i,o,a,r)};cs(new Or(r0,e,"PUBLIC").setMultipleInstances(!0)),Zn(Xb,Jb,t),Zn(Xb,Jb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(t=IC(),e=Tw){const r=wm(Ge(t),r0).getImmediate({identifier:e}),s=fC("functions");return s&&f8(r,...s),r}function f8(t,e,n){e8(Ge(t),e,n)}function sK(t,e,n){return t8(Ge(t),e)}d8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="firebasestorage.googleapis.com",VN="storageBucket",p8=2*60*1e3,m8=10*60*1e3,g8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt extends Lr{constructor(e,n,r=0){super(yy(e),`Firebase Storage: ${n} (${yy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function yy(t){return"storage/"+t}function s0(){const t="An unknown error occurred, please check the error payload for server response.";return new yt(lt.UNKNOWN,t)}function y8(t){return new yt(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function v8(t){return new yt(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function w8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(lt.UNAUTHENTICATED,t)}function _8(){return new yt(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function E8(t){return new yt(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function LN(){return new yt(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MN(){return new yt(lt.CANCELED,"User canceled the upload/download.")}function T8(t){return new yt(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function I8(t){return new yt(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function S8(){return new yt(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VN+"' property when initializing the app?")}function FN(){return new yt(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function b8(){return new yt(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function A8(){return new yt(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function x8(t){return new yt(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Iw(t){return new yt(lt.INVALID_ARGUMENT,t)}function UN(){return new yt(lt.APP_DELETED,"The Firebase app was deleted.")}function R8(t){return new yt(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ou(t,e){return new yt(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Jc(t){throw new yt(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Yn.makeFromUrl(e,n)}catch{return new Yn(e,"")}if(r.path==="")return r;throw I8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),T={bucket:1,path:3},g=n===ON?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${g}/${s}/${v}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:p,indices:T,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<w.length;R++){const k=w[R],V=k.regex.exec(e);if(V){const x=V[k.indices.bucket];let b=V[k.indices.path];b||(b=""),r=new Yn(x,b),k.postModify(r);break}}if(r==null)throw T8(e);return r}}class P8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function f(){i&&clearTimeout(i)}function p(v,..._){if(c){f();return}if(v){f(),d.call(null,v,..._);return}if(l()||o){f(),d.call(null,v,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let T=!1;function g(v){T||(T=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function k8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(t){return t!==void 0}function N8(t){return typeof t=="function"}function O8(t){return typeof t=="object"&&!Array.isArray(t)}function Gm(t){return typeof t=="string"||t instanceof String}function Zb(t){return i0()&&t instanceof Blob}function i0(){return typeof Blob<"u"}function eA(t,e,n,r){if(r<e)throw Iw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Iw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ta;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ta||(ta={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,g)=>{this.resolve_=T,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ta.NO_ERROR,l=i.getStatus();if(!a||BN(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ta.ABORT;r(!1,new Bh(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Bh(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());D8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=s0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?UN():MN();o(l)}else{const l=LN();o(l)}};this.canceled_?n(!1,new Bh(!1,null,!0)):this.backoffId_=C8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&k8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function L8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function M8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function F8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function U8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function j8(t,e,n,r,s,i,o=!0,a=!1){const l=jN(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return F8(d,e),L8(d,n),M8(d,i),U8(d,r),new V8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $8(...t){const e=B8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(i0())return new Blob(t);throw new yt(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function z8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(t){if(typeof atob>"u")throw x8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vy{constructor(e,n){this.data=e,this.contentType=n||null}}function W8(t,e){switch(t){case ts.RAW:return new vy($N(e));case ts.BASE64:case ts.BASE64URL:return new vy(zN(t,e));case ts.DATA_URL:return new vy(K8(e),G8(e))}throw s0()}function $N(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function H8(t){let e;try{e=decodeURIComponent(t)}catch{throw Ou(ts.DATA_URL,"Malformed data URL.")}return $N(e)}function zN(t,e){switch(t){case ts.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ou(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ou(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=q8(e)}catch(s){throw s.message.includes("polyfill")?s:Ou(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class qN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ou(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Q8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function K8(t){const e=new qN(t);return e.base64?zN(ts.BASE64,e.rest):H8(e.rest)}function G8(t){return new qN(t).contentType}function Q8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){let r=0,s="";Zb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Zb(this.data_)){const r=this.data_,s=z8(r,e,n);return s===null?null:new Es(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Es(r,!0)}}static getBlob(...e){if(i0()){const n=e.map(r=>r instanceof Es?r.data_:r);return new Es($8.apply(null,n))}else{const n=e.map(o=>Gm(o)?W8(ts.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Es(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t){let e;try{e=JSON.parse(t)}catch{return null}return O8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function X8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function HN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t,e){return e}class yn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||J8}}let $h=null;function Z8(t){return!Gm(t)||t.length<2?t:HN(t)}function o0(){if($h)return $h;const t=[];t.push(new yn("bucket")),t.push(new yn("generation")),t.push(new yn("metageneration")),t.push(new yn("name","fullPath",!0));function e(i,o){return Z8(o)}const n=new yn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new yn("size");return s.xform=r,t.push(s),t.push(new yn("timeCreated")),t.push(new yn("updated")),t.push(new yn("md5Hash",null,!0)),t.push(new yn("cacheControl",null,!0)),t.push(new yn("contentDisposition",null,!0)),t.push(new yn("contentEncoding",null,!0)),t.push(new yn("contentLanguage",null,!0)),t.push(new yn("contentType",null,!0)),t.push(new yn("metadata","customMetadata",!0)),$h=t,$h}function eq(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Yn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function tq(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return eq(r,t),r}function KN(t,e,n){const r=WN(e);return r===null?null:tq(t,r,n)}function nq(t,e,n,r){const s=WN(e);if(s===null||!Gm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=Qd(f,n,r),T=jN({alt:"media",token:c});return p+T})[0]}function GN(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Tc{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t){if(!t)throw s0()}function a0(t,e){function n(r,s){const i=KN(t,s,e);return ks(i!==null),i}return n}function rq(t,e){function n(r,s){const i=KN(t,s,e);return ks(i!==null),nq(i,s,t.host,t._protocol)}return n}function Yd(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=_8():s=w8():n.getStatus()===402?s=v8(t.bucket):n.getStatus()===403?s=E8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function QN(t){const e=Yd(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=y8(t.path)),i.serverResponse=s.serverResponse,i}return n}function sq(t,e,n){const r=e.fullServerUrl(),s=Qd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Tc(s,i,a0(t,n),o);return a.errorHandler=QN(e),a}function iq(t,e,n){const r=e.fullServerUrl(),s=Qd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Tc(s,i,rq(t,n),o);return a.errorHandler=QN(e),a}function oq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function YN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=oq(null,e)),r}function XN(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let R=0;R<2;R++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=YN(e,r,s),d=GN(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Es.getBlob(h,r,f);if(p===null)throw FN();const T={name:c.fullPath},g=Qd(i,t.host,t._protocol),v="POST",_=t.maxUploadRetryTime,y=new Tc(g,v,a0(t,n),_);return y.urlParams=T,y.headers=o,y.body=p.uploadData(),y.errorHandler=Yd(e),y}class Fp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function l0(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ks(!1)}return ks(!!n&&(e||["active"]).indexOf(n)!==-1),n}function aq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=YN(e,r,s),a={name:o.fullPath},l=Qd(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=GN(o,n),f=t.maxUploadRetryTime;function p(g){l0(g);let v;try{v=g.getResponseHeader("X-Goog-Upload-URL")}catch{ks(!1)}return ks(Gm(v)),v}const T=new Tc(l,c,p,f);return T.urlParams=a,T.headers=d,T.body=h,T.errorHandler=Yd(e),T}function lq(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=l0(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ks(!1)}h||ks(!1);const f=Number(h);return ks(!isNaN(f)),new Fp(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Tc(n,o,i,a);return l.headers=s,l.errorHandler=Yd(e),l}const tA=256*1024;function cq(t,e,n,r,s,i,o,a){const l=new Fp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw b8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let p="";d===0?p="finalize":c===d?p="upload, finalize":p="upload";const T={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw FN();function v(R,k){const V=l0(R,["active","final"]),x=l.current+d,b=r.size();let A;return V==="final"?A=a0(e,i)(R,k):A=null,new Fp(x,b,V==="final",A)}const _="POST",y=e.maxUploadRetryTime,w=new Tc(n,_,v,y);return w.headers=T,w.body=g.uploadData(),w.progressCallback=a||null,w.errorHandler=Yd(t),w}const kn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wy(t){switch(t){case"running":case"pausing":case"canceling":return kn.RUNNING;case"paused":return kn.PAUSED;case"success":return kn.SUCCESS;case"canceled":return kn.CANCELED;case"error":return kn.ERROR;default:return kn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e,n,r){if(N8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class dq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ta.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ta.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ta.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Jc("cannot .send() more than once");if(Ws(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class hq extends dq{initXhr(){this.xhr_.responseType="text"}}function Co(){return new hq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=o0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(BN(s.status,[]))if(i)s=LN();else{this.sleepTime=Math.max(this.sleepTime*2,g8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=aq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Co,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=lq(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Co,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=tA*this._chunkMultiplier,n=new Fp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=cq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Co,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){tA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=sq(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Co,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=XN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Co,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=MN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=wy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new uq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(wy(this._state)){case kn.SUCCESS:La(this._resolve.bind(null,this.snapshot))();break;case kn.CANCELED:case kn.ERROR:const n=this._reject;La(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wy(this._state)){case kn.RUNNING:case kn.PAUSED:e.next&&La(e.next.bind(e,this.snapshot))();break;case kn.SUCCESS:e.complete&&La(e.complete.bind(e))();break;case kn.CANCELED:case kn.ERROR:e.error&&La(e.error.bind(e,this._error))();break;default:e.error&&La(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n){this._service=e,n instanceof Yn?this._location=n:this._location=Yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ma(e,n)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HN(this._location.path)}get storage(){return this._service}get parent(){const e=Y8(this._location.path);if(e===null)return null;const n=new Yn(this._location.bucket,e);return new ma(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw R8(e)}}function pq(t,e,n){t._throwIfRoot("uploadBytes");const r=XN(t.storage,t._location,o0(),new Es(e,!0),n);return t.storage.makeRequestWithTokens(r,Co).then(s=>({metadata:s,ref:t}))}function mq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new fq(t,new Es(e),n)}function gq(t){t._throwIfRoot("getDownloadURL");const e=iq(t.storage,t._location,o0());return t.storage.makeRequestWithTokens(e,Co).then(n=>{if(n===null)throw A8();return n})}function yq(t,e){const n=X8(t._location.path,e),r=new Yn(t._location.bucket,n);return new ma(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t){return/^[A-Za-z]+:\/\//.test(t)}function wq(t,e){return new ma(t,e)}function JN(t,e){if(t instanceof c0){const n=t;if(n._bucket==null)throw S8();const r=new ma(n,n._bucket);return e!=null?JN(r,e):r}else return e!==void 0?yq(t,e):t}function _q(t,e){if(e&&vq(e)){if(t instanceof c0)return wq(t,e);throw Iw("To use ref(service, url), the first argument must be a Storage instance.")}else return JN(t,e)}function nA(t,e){const n=e==null?void 0:e[VN];return n==null?null:Yn.makeFromBucketSpec(n,t)}function Eq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ws(e);s&&(J_(`https://${t.host}/b`),mC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:a6(i,t.app.options.projectId))}class c0{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=ON,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p8,this._maxUploadRetryTime=m8,this._requests=new Set,s!=null?this._bucket=Yn.makeFromBucketSpec(s,this._host):this._bucket=nA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=nA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ma(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new P8(UN());{const o=j8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const rA="@firebase/storage",sA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="storage";function iK(t,e,n){return t=Ge(t),pq(t,e,n)}function Tq(t,e,n){return t=Ge(t),mq(t,e,n)}function Iq(t){return t=Ge(t),gq(t)}function Sq(t,e){return t=Ge(t),_q(t,e)}function eO(t=IC(),e){t=Ge(t);const r=wm(t,ZN).getImmediate({identifier:e}),s=fC("storage");return s&&bq(r,...s),r}function bq(t,e,n,r={}){Eq(t,e,n,r)}function Aq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new c0(n,r,s,e,Od)}function xq(){cs(new Or(ZN,Aq,"PUBLIC").setMultipleInstances(!0)),Zn(rA,sA,""),Zn(rA,sA,"esm2020")}xq();const Rq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Sw={apiKey:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Sw.projectId,authDomain:Sw.authDomain,emulatorMode:!1});const Qm=TC(Sw);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const wn=mB(Qm,{persistence:[WC,Kv]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const Q=mN(Qm,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{ok("error")}catch{}const Pq=h8(Qm,"us-central1"),Cq=eO(Qm);console.log(" Firebase initialized successfully");const kq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(kq,100);let bo=0;const _y=3,Dq=1e3,tO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&bo<_y){bo++;const r=Math.min(Dq*Math.pow(2,bo-1),1e4);console.log(` Attempting to reconnect (${bo}/${_y}) in ${r}ms...`);try{await XE(Q),await new Promise(s=>setTimeout(s,r)),await YE(Q),console.log(" Firestore reconnected successfully"),bo=0}catch(s){console.error(" Failed to reconnect:",s),bo>=_y&&(console.error(" Maximum reconnection attempts reached."),Nq())}}},Nq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await YE(Q),bo=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await XE(Q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(tO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const vi=Object.freeze(Object.defineProperty({__proto__:null,auth:wn,db:Q,functions:Pq,handleFirestoreError:tO,storage:Cq},Symbol.toStringTag,{value:"Module"})),De=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Oq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},ga=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>ga(n)).filter(n=>n!==void 0);if(t instanceof Date||!Oq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=ga(r);s!==void 0&&(e[n]=s)}return e},bf={async create(t){await bn(ve(Q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ce()})},async getById(t){const e=ve(Q,"profiles",t),n=await Et(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:De(r.createdAt)}}return null},async update(t,e){const n=ve(Q,"profiles",t);await Ct(n,{...e,updatedAt:Ce()})},async getByShopId(t){const e=Te(fe(Q,"profiles"),we("shopId","==",t));return(await Ae(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:De(s.createdAt)}})}},bw={async create(t){return(await os(fe(Q,"referrals"),{...t,createdAt:Ce(),updatedAt:Ce()})).id},async getByReferrerId(t){try{const e=Te(fe(Q,"referrals"),we("referrerId","==",t),is("createdAt","desc"));return(await Ae(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:De(r.data().createdAt),updatedAt:De(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Te(fe(Q,"referrals"),we("referrerId","==",t));return(await Ae(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:De(i.data().createdAt),updatedAt:De(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Te(fe(Q,"referrals"),we("referralCode","==",t),ea(1)),n=await Ae(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:De(r.data().createdAt),updatedAt:De(r.data().updatedAt)}},async updateStatus(t,e){await Ct(ve(Q,"referrals",t),{status:e,updatedAt:Ce()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},nO={async getByUserId(t){const e=Te(fe(Q,"profiles"),we("userId","==",t)),n=await Ae(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:De(s.createdAt),updatedAt:De(s.updatedAt)}}return null},async update(t,e){const n=Te(fe(Q,"profiles"),we("userId","==",t)),r=await Ae(n);if(!r.empty){const s=ve(Q,"profiles",r.docs[0].id);await Ct(s,{...e,updatedAt:Ce()})}}},rO={async create(t){return(await os(fe(Q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ce(),updatedAt:Ce()})).id},async getByMerchantId(t){const e=Te(fe(Q,"merchantWallets"),we("merchantUserId","==",t)),r=(await Ae(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:De(l.createdAt),updatedAt:De(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Te(fe(Q,"wallets"),we("userId","==",t));return(await Ae(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:De(l.createdAt),updatedAt:De(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=ve(Q,"merchantWallets",t),n=await Et(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:De(r.createdAt),updatedAt:De(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=Te(fe(Q,"merchantWallets"),we("iccid","==",t)),n=await Ae(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:De(s.createdAt),updatedAt:De(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=Te(fe(Q,"merchantWallets"),we("msisdn","==",t)),r=await Ae(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:De(l.createdAt),updatedAt:De(l.updatedAt)}}const s=Te(fe(Q,"merchantWallets")),i=await Ae(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:De(l.createdAt),updatedAt:De(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=ve(Q,"merchantWallets",t);await Ct(n,{...e,updatedAt:Ce()})},async updateUsage(t,e,n){const r=ve(Q,"merchantWallets",t),s={updatedAt:Ce()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await Ct(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Te(fe(Q,"merchantWallets"),we("msisdn","in",o)),c=(await Ae(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await Ct(d.ref,{merchantUserId:e,updatedAt:Ce()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=ve(Q,"merchantWallets",t);await Gt(e)}},Vq={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await _e(async()=>{const{calculateCommission:c,calculateProfit:d}=await import("./commissionCalculator-DbNVJv5a.js");return{calculateCommission:c,calculateProfit:d}},[],import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ce(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await os(fe(Q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await _e(async()=>{const{ProfitService:d}=await import("./profitService-DRDD-Fph.js");return{ProfitService:d}},[],import.meta.url);c.addProfit(s),console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let p="";if(h)try{const g=await rO.getById(h);p=String((g==null?void 0:g.msisdn)||(g==null?void 0:g.label)||h).trim()}catch{}let T="";f==="withdraw"?T=p?`   ${c}   ${p}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?T=`   ${c}   ${p||" "}   ${d||""}    ${r}`:T=p?`  ${c}   ${p}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Te(fe(Q,"transactions"),we("shopId","==",t),is("createdAt","desc"));return(await Ae(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:De(r.data().createdAt),confirmedAt:r.data().confirmedAt?De(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Te(fe(Q,"transactions"),we("merchantUserId","==",t),is("createdAt","desc"));return(await Ae(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:De(r.data().createdAt),confirmedAt:r.data().confirmedAt?De(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Te(fe(Q,"transactions"),we("merchantUserId","==",t)),n=Te(fe(Q,"transactions"),we("userId","==",t)),[r,s]=await Promise.all([Ae(e),Ae(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:De(c.createdAt),confirmedAt:c.confirmedAt?De(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=ve(Q,"transactions",t);await Ct(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}},Lq="https://summer-cake-5149.alkaptin2030.workers.dev",sO={async getTelegramWorkerUrl(){var t;try{const e=ve(Q,"systemSettings","core"),n=await Et(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=ve(Q,"systemSettings","core");await bn(e,{telegramWorkerUrl:t,updatedAt:Ce()},{merge:!0})}},Mq={async send(t,e){try{const n=await Ts.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await sO.getTelegramWorkerUrl()||Lq).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},Fq={async log(t,e,n,r,s){await os(fe(Q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ce()})},async getLogs(t=100){const e=Te(fe(Q,"auditLogs"),is("createdAt","desc"),ea(t));return(await Ae(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:De(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Te(fe(Q,"deletedTransactions"),is("deletedAt","desc"));return(await Ae(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:De(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Te(fe(Q,"deletedTransactions"),we("userId","==",t),is("deletedAt","desc"));return(await Ae(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:De(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Te(fe(Q,"deletedTransactions"),we("userId","==",t));return(await Ae(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:De(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ce(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await os(fe(Q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Te(fe(Q,"deletedTransactions"),we("originalTransactionId","==",t),we("userId","==",e)),r=await Ae(n);r.empty?await os(fe(Q,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Ce()}):await Promise.all(r.docs.map(s=>Ct(s.ref,{permanent:!0,deletedAt:Ce()}))),console.log("    :",t);try{const s=Te(fe(Q,"userTransactions"),we("userId","==",e)),o=(await Ae(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Gt(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=ve(Q,"transactions",t);(await Et(s)).exists()&&(console.log("     transactions  "),await Gt(s));const o=Te(fe(Q,"transactions"),we("transactionId","==",t)),a=await Ae(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Gt(d.ref))));const l=Te(fe(Q,"transactions"),we("originalTransactionId","==",t)),c=await Ae(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Gt(d.ref))));try{const d=Te(fe(Q,"deletedTransactions"),we("userId","==",e),we("originalTransactionId","==",t)),h=await Ae(d),f=h.docs.map(T=>{var g;return String(((g=T.data())==null?void 0:g.reference)||"")}).filter(Boolean),p=h.docs.map(T=>{var g;return String(((g=T.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const T of f){const g=Te(fe(Q,"transactions"),we("reference","==",T)),v=await Ae(g);v.empty||(console.log(`  ${v.size}   transactions  reference=${T}`),await Promise.all(v.docs.map(_=>Gt(_.ref))))}for(const T of p){try{const _=ve(Q,"transactions",T);(await Et(_)).exists()&&(console.log("     transactions  :",T),await Gt(_))}catch{}const g=Te(fe(Q,"transactions"),we("transactionId","==",T)),v=await Ae(g);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${T}`),await Promise.all(v.docs.map(_=>Gt(_.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},iO={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=ve(Q,"daily_reports_archive",e);return await bn(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Ce()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=Te(fe(Q,"daily_reports_archive"),we("userId","==",t),ea(e)),a=await Ae(o);let l=[];try{l=(await Ae(Te(fe(Q,"deletedDailyArchives"),we("userId","==",t)))).docs.map(T=>{var g,v;return{id:T.id,reportDate:String(((g=T.data())==null?void 0:g.reportDate)||""),archiveId:String(((v=T.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(p,T)=>l.some(g=>g.archiveId&&g.archiveId===p||g.reportDate&&g.reportDate===T),d=a.docs.map(p=>({id:p.id,userId:String(p.data().userId),reportDate:String(p.data().reportDate),totalTransactions:Number(p.data().totalTransactions||0),totalAmount:Number(p.data().totalAmount||0),totalWithdrawn:Number(p.data().totalWithdrawn||0),totalSent:Number(p.data().totalSent||0),profit:p.data().profit!==void 0?Number(p.data().profit):void 0,walletId:p.data().walletId??null,createdAt:De(p.data().createdAt||p.data().updatedAt)})).filter(p=>!c(p.id,p.reportDate)),h=new Map;for(const p of d){const T=h.get(p.reportDate);(!T||(((r=(n=p.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=T.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(p.reportDate,p)}const f=Array.from(h.values());return f.sort((p,T)=>p.reportDate<T.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Te(fe(Q,"daily_reports_archive"),we("userId","==",t)),s=await Ae(r);let i=0;for(const o of s.docs){const a=De(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Gt(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Te(fe(Q,"daily_reports_archive"),we("userId","==",t)),s=(await Ae(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:De(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Gt(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=Te(fe(Q,"daily_reports_archive"),we("userId","==",t)),n=await Ae(e);let r=0;for(const s of n.docs)try{await Gt(s.ref),r++}catch{const o=s.data();try{await os(fe(Q,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Ce()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Ts={async getUserData(t){try{console.log("     :",{userId:t});const e=ve(Q,"users",t),n=await Et(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:De(r.createdAt),updatedAt:De(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=Te(fe(Q,"deletedTransactions"),we("userId","==",t));return $s(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data(),o=String((i==null?void 0:i.originalTransactionId)||""),a=String((i==null?void 0:i.transactionId)||""),l=String((i==null?void 0:i.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=ve(Q,"users",t),r=ga(e);await bn(n,{...r||{},updatedAt:Ce()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=ve(Q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=ga(r);let i={};try{const l=await Et(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ce()};console.log("   :",o);let a=3;for(;a>0;)try{await bn(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=Te(fe(Q,"userTransactions"),we("userId","==",t),is("createdAt","desc"),ea(200));e=await Ae(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=Te(fe(Q,"userTransactions"),we("userId","==",t));e=await Ae(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:De(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=Te(fe(Q,"deletedTransactions"),we("userId","==",t),we("reference","==",o));if(!(await Ae(c)).empty)return console.log("          ."),"skip-deleted"}{const c=Te(fe(Q,"deletedTransactions"),we("userId","==",t),we("permanent","==",!0)),d=await Ae(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(p=>!!p).map(p=>String(p));if(d.docs.find(p=>{const T=p.data(),g=String(T.originalTransactionId||T.transactionId||p.id||""),v=String(T.reference||"");return g&&h.includes(g)||v&&h.includes(v)}))return console.log("        /   ."),"skip-deleted"}}const a=Te(fe(Q,"deletedTransactions"),we("userId","==",t),is("deletedAt","desc"),ea(20)),l=await Ae(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=10*60*1e3;if(l.docs.find(g=>{const v=g.data(),_=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,w=Number(v.amount||0),R=v.createdAt?new Date(String(v.createdAt)):f;return Math.abs(R.getTime()-f.getTime())<=p&&w===h&&_===c&&y===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=Te(fe(Q,"userTransactions"),we("userId","==",t));if(s.transactionId){const g=Te(fe(Q,"userTransactions"),we("userId","==",t),we("transactionId","==",s.transactionId)),v=await Ae(g);if(!v.empty){const _=v.docs[0];return await Ct(ve(Q,"userTransactions",_.id),{...s,uploadedAt:Ce()}),_.id}}if(s.reference){const g=Te(fe(Q,"userTransactions"),we("userId","==",t),we("reference","==",s.reference)),v=await Ae(g);if(!v.empty){const _=v.docs[0];return await Ct(ve(Q,"userTransactions",_.id),{...s,uploadedAt:Ce()}),_.id}}const a=Te(fe(Q,"userTransactions"),we("userId","==",t),is("createdAt","desc"),ea(20)),l=await Ae(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=5*60*1e3,T=l.docs.find(g=>{const v=g.data(),_=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,w=Number(v.amount||0),R=De(v.createdAt);return Math.abs(R.getTime()-f.getTime())<=p&&w===h&&_===c&&y===d});if(T)return await Ct(ve(Q,"userTransactions",T.id),{...s,uploadedAt:Ce()}),T.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await os(fe(Q,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Ce(),uploadedAt:Ce()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=ve(Q,"userTransactions",e),a=await Et(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Gt(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=Te(fe(Q,"userTransactions"),we("userId","==",t)),r=await Ae(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(p=>p===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[Te(fe(Q,"userTransactions"),we("merchantUserId","==",t)),Te(fe(Q,"userTransactions"),we("createdBy","==",t))];for(const o of i)try{const l=(await Ae(o)).docs.filter(c=>{var f,p;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((p=d.receipt)==null?void 0:p.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Gt(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=ve(Q,"transactions",e);if((await Et(a)).exists())console.log("     transactions   "),await Gt(a);else{const c=Te(fe(Q,"transactions"),we("transactionId","==",e)),d=await Ae(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(p=>Gt(p.ref))));const h=Te(fe(Q,"transactions"),we("originalTransactionId","==",e)),f=await Ae(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(p=>Gt(p.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},Aw={async getToday(t){const e=ve(Q,"dailyStats",t,"today","data"),n=await Et(e);return n.exists()?n.data():{}},async setToday(t,e){const n=ve(Q,"dailyStats",t,"today","data");await bn(n,{...ga(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=ve(Q,"dailyStats",t,"history",e);await bn(r,ga(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},Uq={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Ce()};return(await os(fe(Q,"installments"),n)).id},listenByUser(t,e){const n=Te(fe(Q,"installments"),we("userId","==",t));return $s(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await Ct(ve(Q,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Gt(ve(Q,"installments",t)),!0}},oK=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:Uq,auditLogService:Fq,dailyReportsArchiveService:iO,dailyStatsService:Aw,merchantWalletService:rO,profileService:bf,profileServiceExtra:nO,referralService:bw,sanitizeFirestoreData:ga,systemSettingsService:sO,telegramNotifier:Mq,transactionService:Vq,userDataService:Ts},Symbol.toStringTag,{value:"Module"}));var Wa=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(Wa||{});const jq=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},zh=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},Bq=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},aK=async(t,e,n,r)=>{try{const s=new Date,i=jq(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=ve(Q,"users",t);if(await Ct(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},iA=async t=>{try{const e=ve(Q,"users",t);await Ct(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},lK=async t=>{try{const e=ve(Q,"users",t),n=await Et(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},cK=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},uK=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=Bq(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},dK=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var ec;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(ec||(ec={}));class Ey extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const $q=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},zq=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:$q(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const T=s(),g=a(h);let v;const _=async()=>(!v&&T in f?v=typeof f[T]=="function"?v=await f[T]():v=f[T]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),y=(b,A)=>{var C,N;if(g){const O=g==null?void 0:g.methods.find(P=>A===P.name);if(O)return O.rtype==="promise"?P=>n.nativePromise(h,A.toString(),P):(P,F)=>n.nativeCallback(h,A.toString(),P,F);if(b)return(C=b[A])===null||C===void 0?void 0:C.bind(b)}else{if(b)return(N=b[A])===null||N===void 0?void 0:N.bind(b);throw new Ey(`"${h}" plugin is not implemented on ${T}`,ec.Unimplemented)}},w=b=>{let A;const C=(...N)=>{const O=_().then(P=>{const F=y(P,b);if(F){const $=F(...N);return A=$==null?void 0:$.remove,$}else throw new Ey(`"${h}.${b}()" is not implemented on ${T}`,ec.Unimplemented)});return b==="addListener"&&(O.remove=async()=>A()),O};return C.toString=()=>`${b.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:b,writable:!1,configurable:!1}),C},R=w("addListener"),k=w("removeListener"),V=(b,A)=>{const C=R({eventName:b},A),N=async()=>{const P=await C;k({eventName:b,callbackId:P},A)},O=new Promise(P=>C.then(()=>P({remove:N})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},O},x=new Proxy({},{get(b,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?V:R;case"removeListener":return k;default:return w(A)}}});return r[h]=x,c.set(h,{name:h,proxy:x,platforms:new Set([...Object.keys(f),...g?[T]:[]])}),x};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Ey,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},qq=t=>t.Capacitor=zq(t),pe=qq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ym=pe.registerPlugin;class oO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new pe.Exception(e,ec.Unimplemented)}unavailable(e="not available"){return new pe.Exception(e,ec.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const oA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),aA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Wq extends oO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=aA(s).trim(),i=aA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=oA(e.key),r=oA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ym("CapacitorCookies",{web:()=>new Wq});const Hq=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Kq=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},Gq=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,Qq=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Kq(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Yq extends oO{async request(e){const n=Qq(e,e.webFetchExtra),r=Gq(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Hq(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Ym("CapacitorHttp",{web:()=>new Yq});const Zc=Ym("Preferences",{web:()=>_e(()=>import("./web-BUp-j65f.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Xq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:"AIzaSyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s",VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},aO=I.createContext(void 0);function Ia(){const t=I.useContext(aO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Jq=({children:t})=>{var x,b;const[e,n]=I.useState(null),[r,s]=I.useState(null),[i,o]=I.useState(null),[a,l]=I.useState(!1),[c,d]=I.useState(!0),h=async A=>{var C,N,O,P,F,$,H,Y,L,M,K,X,z,se,oe,de;try{const ie=ve(Q,"profiles",A);let ne=!1;try{const Ie=await PN(ie);if(Ie.exists()){const ge=Ie.data(),Re={userId:Ie.id,shopId:ge.shopId,role:ge.role,fullName:ge.fullName,phone:ge.phone,shopName:ge.shopName||null,approved:ge.approved,avatarId:ge.avatarId,bridgeLink:ge.bridgeLink||null,bridgeDeviceId:ge.bridgeDeviceId||null,showWithdrawNote:ge.showWithdrawNote!==void 0?!!ge.showWithdrawNote:!0,isReceiptNoteEnabled:ge.isReceiptNoteEnabled!==void 0?!!ge.isReceiptNoteEnabled:!0,createdAt:((N=(C=ge.createdAt)==null?void 0:C.toDate)==null?void 0:N.call(C))||new Date,updatedAt:((P=(O=ge.updatedAt)==null?void 0:O.toDate)==null?void 0:P.call(O))||new Date,trialStarted:ge.trialStarted||!1,trialStartDate:($=(F=ge.trialStartDate)==null?void 0:F.toDate)==null?void 0:$.call(F),trialEndDate:(Y=(H=ge.trialEndDate)==null?void 0:H.toDate)==null?void 0:Y.call(H),trialExpired:ge.trialExpired||!1};s(Re),ne=!0,d(!1)}}catch(Ie){console.log("Cache profile not available:",(Ie==null?void 0:Ie.code)||Ie)}try{if(!ne){const Ie=localStorage.getItem(`profile_cache_${A}`);if(Ie){const ge=JSON.parse(Ie);s(ge),ne=!0,d(!1)}}}catch{}if(!ne)for(let Ie=0;Ie<3;Ie++)try{const ge=await Et(ie);if(ge.exists()){const Re=ge.data(),nt={userId:ge.id,shopId:Re.shopId,role:Re.role,fullName:Re.fullName,phone:Re.phone,shopName:Re.shopName||null,approved:Re.approved,avatarId:Re.avatarId,bridgeLink:Re.bridgeLink||null,bridgeDeviceId:Re.bridgeDeviceId||null,showWithdrawNote:Re.showWithdrawNote!==void 0?!!Re.showWithdrawNote:!0,isReceiptNoteEnabled:Re.isReceiptNoteEnabled!==void 0?!!Re.isReceiptNoteEnabled:!0,createdAt:((M=(L=Re.createdAt)==null?void 0:L.toDate)==null?void 0:M.call(L))||new Date,updatedAt:((X=(K=Re.updatedAt)==null?void 0:K.toDate)==null?void 0:X.call(K))||new Date,trialStarted:Re.trialStarted||!1,trialStartDate:(se=(z=Re.trialStartDate)==null?void 0:z.toDate)==null?void 0:se.call(z),trialEndDate:(de=(oe=Re.trialEndDate)==null?void 0:oe.toDate)==null?void 0:de.call(oe),trialExpired:Re.trialExpired||!1};s(nt);try{localStorage.setItem(`profile_cache_${ge.id}`,JSON.stringify(nt))}catch{}ne=!0,d(!1);break}}catch{}return $s(ie,async Ie=>{var ge,Re,nt,rt,Vt,kt,Lt,Qe;if(Ie.exists()){const ye=Ie.data(),Ue={userId:Ie.id,shopId:ye.shopId,role:ye.role,fullName:ye.fullName,phone:ye.phone,shopName:ye.shopName||null,approved:ye.approved,avatarId:ye.avatarId,bridgeLink:ye.bridgeLink||null,bridgeDeviceId:ye.bridgeDeviceId||null,showWithdrawNote:ye.showWithdrawNote!==void 0?!!ye.showWithdrawNote:!0,isReceiptNoteEnabled:ye.isReceiptNoteEnabled!==void 0?!!ye.isReceiptNoteEnabled:!0,createdAt:((Re=(ge=ye.createdAt)==null?void 0:ge.toDate)==null?void 0:Re.call(ge))||new Date,updatedAt:((rt=(nt=ye.updatedAt)==null?void 0:nt.toDate)==null?void 0:rt.call(nt))||new Date,trialStarted:ye.trialStarted||!1,trialStartDate:(kt=(Vt=ye.trialStartDate)==null?void 0:Vt.toDate)==null?void 0:kt.call(Vt),trialEndDate:(Qe=(Lt=ye.trialEndDate)==null?void 0:Lt.toDate)==null?void 0:Qe.call(Lt),trialExpired:ye.trialExpired||!1};s(Ue);try{localStorage.setItem(`profile_cache_${Ie.id}`,JSON.stringify(Ue))}catch{}ne||(ne=!0,d(!1))}else if(!ne)try{const ye=await nO.getByUserId(A);if(ye){const Ue={userId:A,shopId:ye.shopId,role:ye.role||"user",fullName:ye.fullName||null,phone:ye.phone||null,shopName:ye.shopName||null,approved:ye.approved??!1,avatarId:ye.avatarId||void 0,bridgeLink:ye.bridgeLink||null,bridgeDeviceId:ye.bridgeDeviceId||null,createdAt:Ce(),updatedAt:Ce()};await bn(ve(Q,"profiles",A),Ue,{merge:!0}),s({...ye,userId:A,createdAt:ye.createdAt||new Date,updatedAt:ye.updatedAt||new Date})}else await p(A)}catch(ye){console.error("Profile migration/create error:",ye)}finally{ne=!0,d(!1)}},Ie=>{console.error("Profile listener error:",Ie);try{d(!1)}catch{}})}catch(ie){return console.error("Error setting up profile listener:",ie),await p(A),d(!1),()=>{}}},f=async A=>{try{const C=ve(Q,"users",A.uid);(await Et(C)).exists()?(await Ct(C,{lastLogin:Ce(),updatedAt:Ce()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",A.uid)):(await bn(C,{email:A.email||"",displayName:A.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ce(),updatedAt:Ce(),lastLogin:Ce()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",A.uid))}catch(C){console.error(" ensureAdminUserDoc error:",C)}},p=async(A,C,N,O,P)=>{var F,$;try{console.log("Creating default profile for user:",A);const H=bw.generateReferralCode(A);let Y=null;const L={userId:A,shopId:"default-shop",role:"user",fullName:C||" ",phone:N||null,shopName:O||null,approved:!1,referralCode:H,referredBy:P||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,createdAt:new Date,updatedAt:new Date};s(L),console.log("Created temporary profile:",L);try{const{doc:M,setDoc:K,serverTimestamp:X}=await _e(async()=>{const{doc:de,setDoc:ie,serverTimestamp:ne}=await Promise.resolve().then(()=>yi);return{doc:de,setDoc:ie,serverTimestamp:ne}},void 0,import.meta.url),{db:z}=await _e(async()=>{const{db:de}=await Promise.resolve().then(()=>vi);return{db:de}},void 0,import.meta.url),se={email:((F=wn.currentUser)==null?void 0:F.email)||"",displayName:C||" ",phone:N||null,shopName:O||null,isActive:!1,referralCode:H,referredBy:P||null,createdAt:X(),lastLogin:null,updatedAt:X()};if(console.log("Attempting to add user to admin collection with data:",se),await K(M(z,"users",A),se,{merge:!0}),console.log(" User successfully added to admin collection:",se),P)try{const{query:de,collection:ie,where:ne,limit:xe,getDocs:Ie}=await _e(async()=>{const{query:rt,collection:Vt,where:kt,limit:Lt,getDocs:Qe}=await Promise.resolve().then(()=>yi);return{query:rt,collection:Vt,where:kt,limit:Lt,getDocs:Qe}},void 0,import.meta.url),{db:ge}=await _e(async()=>{const{db:rt}=await Promise.resolve().then(()=>vi);return{db:rt}},void 0,import.meta.url),Re=de(ie(ge,"users"),ne("referralCode","==",P),xe(1)),nt=await Ie(Re);nt.empty?console.log(" Referral code not found in users collection:",P):(Y=nt.docs[0].id,await bw.create({referrerId:Y,referredUserId:A,referredUserEmail:(($=wn.currentUser)==null?void 0:$.email)||"",referralCode:P,status:"completed"}),console.log(" Referral record created successfully for referrer:",Y))}catch(de){console.error(" Error creating referral record:",de)}const oe=await Et(M(z,"users",A));oe.exists()?console.log(" User document verified in Firestore:",oe.data()):console.log(" User document not found after creation")}catch(M){console.error(" Error adding user to admin collection:",M)}try{const{addDoc:M,collection:K,serverTimestamp:X}=await _e(async()=>{const{addDoc:ie,collection:ne,serverTimestamp:xe}=await Promise.resolve().then(()=>yi);return{addDoc:ie,collection:ne,serverTimestamp:xe}},void 0,import.meta.url),{db:z}=await _e(async()=>{const{db:ie}=await Promise.resolve().then(()=>vi);return{db:ie}},void 0,import.meta.url),oe=(await M(K(z,"shops"),{name:O||" ",ownerId:A,createdAt:X(),updatedAt:X(),isActive:!0})).id;await bf.create({userId:A,shopId:oe,role:"user",fullName:" ",phone:null});try{await bf.update(A,{referralCode:H,referredBy:Y||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(ie){console.warn(" Failed to update profile with referral fields:",ie)}const de=await bf.getById(A);de&&(s(de),console.log("Updated with Firebase profile:",de))}catch(M){console.error("Error creating profile:",M),console.log("Using local profile - Firebase unavailable")}}catch(H){console.error("Error creating default profile:",H)}};I.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const A=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const C=localStorage.getItem("demoUser"),N=localStorage.getItem("demoProfile");if(C&&N){console.log(" Found demo user in localStorage");try{const P=JSON.parse(C),F=JSON.parse(N);n(P),s(F),clearTimeout(A),d(!1);return}catch(P){console.error("Error parsing demo user data:",P),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const O=MB(wn,async P=>{if(console.log(" Auth state changed:",{uid:P==null?void 0:P.uid,email:P==null?void 0:P.email,emailVerified:P==null?void 0:P.emailVerified,timestamp:new Date().toISOString()}),n(P),P){console.log(" User authenticated, starting profile hydration for:",P.uid);try{await Zc.set({key:"current_user_id",value:P.uid}),console.log(" Synced current_user_id to Native:",P.uid)}catch(F){console.error("Failed to sync user ID to native:",F)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(P.uid),y(),f(P)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await Zc.remove({key:"current_user_id"}),await Zc.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(A)});return()=>{clearTimeout(A),O()}},[]),I.useEffect(()=>{const A=async()=>{try{await w(),await y()}catch{}};try{window.addEventListener("app:softRefresh",A)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",A)}catch{}}},[e==null?void 0:e.uid]),I.useEffect(()=>{if(!(e!=null&&e.uid))return;const A=i==null?void 0:i.subscription,C=A==null?void 0:A.endDate,N=C!=null&&C.toDate?C.toDate():C?new Date(C):null;let O=null;const P=async()=>{try{const F=new Date;A&&A.isActive===!0&&N&&!isNaN(N.getTime())&&F>N&&(await iA(e.uid),await y())}catch{}};return P(),O=setInterval(P,36e5),()=>{try{clearInterval(O)}catch{}}},[e==null?void 0:e.uid,(x=i==null?void 0:i.subscription)==null?void 0:x.endDate,(b=i==null?void 0:i.subscription)==null?void 0:b.isActive]),I.useEffect(()=>{if(!(e!=null&&e.uid))return;const A=Ts.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{A==null||A()}catch{}}},[e==null?void 0:e.uid]);const T=async(A,C,N,O,P,F)=>{try{const $=(A||"").trim().toLowerCase(),H=(C||"").trim();console.log(" Attempting to sign up user:",$);const Y=await wS(wn,$,H);console.log(" Sign up successful:",Y.user.uid),await p(Y.user.uid,N,O,P,F),await f(Y.user);try{await h(Y.user.uid),await y()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch($){console.error(" Sign up error:",$);let H="    ";return $.code==="auth/email-already-in-use"?H="    ":$.code==="auth/weak-password"?H="   ":$.code==="auth/invalid-email"&&(H="   "),{error:{...$,message:H}}}},g=async(A,C)=>{var P;const N=(A||"").trim().toLowerCase(),O=(C||"").trim();try{const F=X=>X.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),$=X=>X.replace(/[-]/g,z=>String("0123456789"["".indexOf(z)])).replace(/[-]/g,z=>String("0123456789"["".indexOf(z)])),H=X=>X.replace(/[0-9]/g,z=>""[Number(z)]),Y=X=>$(F(X));if(console.log(" Attempting to sign in user:",N),N==="test@example.com"&&O==="123456"){console.log(" Demo user login detected");const X={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},z={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(X)),localStorage.setItem("demoProfile",JSON.stringify(z)),n(X),s(z),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let L;const M=[Y(O),F(O),H(F(O))];let K=null;for(const X of M)try{X!==O&&console.log(" Trying password variant"),L=await DB(wn,N,X);break}catch(z){if(K=z,(z==null?void 0:z.code)!=="auth/wrong-password"&&(z==null?void 0:z.code)!=="auth/invalid-credential")throw z}if(!L)throw K||new Error("auth/invalid-credential");console.log(" Sign in successful:",L.user.uid);try{if((await Et(ve(Q,"deletedUsers",L.user.uid))).exists())return console.log(" User is deleted, signing out"),await _S(wn),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(X){console.error("Error checking deleted users:",X)}await f(L.user);try{await h(L.user.uid),await y()}catch{}return{error:null}}catch(F){if(console.error(" Sign in error:",F),N==="test@example.com"&&F.code==="auth/user-not-found"){console.log(" Creating test user...");try{const Y=await wS(wn,N,O);return console.log(" Test user created:",Y.user.uid),await p(Y.user.uid," ","01000000000"," "),{error:null}}catch(Y){return console.error(" Error creating test user:",Y),{error:Y}}}let $="    ",H=F==null?void 0:F.code;if(H==="auth/invalid-credential")try{const Y=await OB(wn,((P=F==null?void 0:F.customData)==null?void 0:P.email)||"");Array.isArray(Y)&&Y.length===0?(H="auth/user-not-found",$="     "):(H="auth/wrong-password",$="   ")}catch{$="      "}else H==="auth/invalid-email"?$="    ":H==="auth/user-not-found"?$="     ":H==="auth/wrong-password"?$="   ":H==="auth/too-many-requests"&&($="      ");return{error:{...F,code:H,message:$}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await _S(wn);try{await Zc.remove({key:"selected_wallet_id"}),await Zc.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const N=(()=>{try{const O=typeof window<"u"?window:null,P=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),F=typeof window<"u"&&window.location.protocol==="file:",$=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return P||F||$||typeof import.meta<"u"&&Xq&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(N)}catch{window.location.href=N}}catch(A){console.error("Sign out error:",A)}},_=async A=>{try{return await kB(wn,A),{error:null}}catch(C){console.error("Reset password error:",C);let N="        ";return C.code==="auth/user-not-found"?N="     ":C.code==="auth/invalid-email"&&(N="   "),{error:{...C,message:N}}}},y=async()=>{var A,C;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{const N=ve(Q,"users",e.uid);try{const P=await Et(N);if(P.exists()){const F=P.data();o(F);const $=((A=F==null?void 0:F.branchPackage)==null?void 0:A.status)==="active";let H=!1;$?H=!0:H=zh(F.subscription),l(H)}}catch{}return $s(N,async P=>{var F,$,H,Y,L,M,K,X;if(P.exists()){const z=P.data();o(z),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:z.subscription,subscriptionExists:!!z.subscription,planType:(F=z.subscription)==null?void 0:F.planType,isActive:($=z.subscription)==null?void 0:$.isActive,startDate:(H=z.subscription)==null?void 0:H.startDate,endDate:(Y=z.subscription)==null?void 0:Y.endDate,activatedBy:(L=z.subscription)==null?void 0:L.activatedBy,activatedAt:(M=z.subscription)==null?void 0:M.activatedAt,isOnFreeTrial:z.isOnFreeTrial,freeTrialEndDate:z.freeTrialEndDate,branchPackageStatus:(K=z==null?void 0:z.branchPackage)==null?void 0:K.status});const se=((X=z==null?void 0:z.branchPackage)==null?void 0:X.status)==="active";let oe=!1;se?(console.log(" Branch package is active, granting access"),oe=!0):oe=zh(z.subscription),l(oe),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:oe,isOnFreeTrial:z.isOnFreeTrial,hasActiveBranchPackage:se,reason:se?"Branch package active":z.subscription?z.subscription.isActive?z.subscription.planType==="lifetime"?"Lifetime plan":z.subscription.endDate?new Date>new Date(z.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const de=z.subscription,ie=de==null?void 0:de.planType,ne=de==null?void 0:de.endDate,xe=ne!=null&&ne.toDate?ne.toDate():ne?new Date(ne):null,Ie=new Date;de&&de.isActive===!0&&xe&&!isNaN(xe.getTime())&&Ie>xe&&(await iA(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:ie,endDate:xe}))}catch(de){console.warn("Failed to auto-deactivate expired subscription:",de)}}},P=>{console.error(" Subscription listener error:",P),(async()=>{var F;try{const $=await Et(N);if($.exists()){const H=$.data();o(H);const Y=((F=H==null?void 0:H.branchPackage)==null?void 0:F.status)==="active";let L=!1;Y?L=!0:L=zh(H.subscription),l(L)}}catch{}})()})}catch(N){console.error("Error setting up subscription listener:",N);try{const O=await Et(ve(Q,"users",e.uid));if(O.exists()){const P=O.data();o(P);const F=((C=P==null?void 0:P.branchPackage)==null?void 0:C.status)==="active";let $=!1;F?$=!0:$=zh(P.subscription),l($)}}catch{}}},w=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await y()}catch(A){console.error("Error refreshing profile:",A)}},V={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:T,signIn:g,signOut:v,resetPassword:_,updateUserProfile:async A=>{if(e)try{const C={updatedAt:Ce()};if(A.fullName!==void 0&&(C.fullName=A.fullName),A.phone!==void 0&&(C.phone=A.phone),A.bridgeLink!==void 0){const N=(A.bridgeLink||"").trim();C.bridgeLink=N.length?N:null}if(A.bridgeDeviceId!==void 0){const N=(A.bridgeDeviceId||"").trim();C.bridgeDeviceId=N.length?N:null}A.showWithdrawNote!==void 0&&(C.showWithdrawNote=!!A.showWithdrawNote),A.isReceiptNoteEnabled!==void 0&&(C.isReceiptNoteEnabled=!!A.isReceiptNoteEnabled),await Ct(ve(Q,"profiles",e.uid),C),await h(e.uid)}catch(C){console.error("Error updating user profile:",C)}},updateAvatarId:async A=>{if(e)try{await Ct(ve(Q,"profiles",e.uid),{avatarId:A,updatedAt:Ce()}),await h(e.uid)}catch(C){console.error("Error updating avatarId:",C)}},refreshProfile:w,checkSubscriptionStatus:y};return S.jsx(aO.Provider,{value:V,children:t})};function Zq(t){const e=I.useRef({value:t,previous:t});return I.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Xm="Checkbox",[eW]=sc(Xm),[tW,u0]=eW(Xm);function nW(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,p]=x_({prop:n,defaultProp:s??!1,onChange:l,caller:Xm}),[T,g]=I.useState(null),[v,_]=I.useState(null),y=I.useRef(!1),w=T?!!o||!!T.closest("form"):!0,R={checked:f,disabled:i,setChecked:p,control:T,setControl:g,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:qi(s)?!1:s,isFormControl:w,bubbleInput:v,setBubbleInput:_};return S.jsx(tW,{scope:e,...R,children:rW(h)?h(R):r})}var lO="CheckboxTrigger",cO=I.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:T}=u0(lO,t),g=en(s,d),v=I.useRef(l);return I.useEffect(()=>{const _=i==null?void 0:i.form;if(_){const y=()=>h(v.current);return _.addEventListener("reset",y),()=>_.removeEventListener("reset",y)}},[i,h]),S.jsx(gt.button,{type:"button",role:"checkbox","aria-checked":qi(l)?"mixed":l,"aria-required":c,"data-state":pO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:Je(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Je(n,_=>{h(y=>qi(y)?!0:!y),T&&p&&(f.current=_.isPropagationStopped(),f.current||_.stopPropagation())})})});cO.displayName=lO;var d0=I.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return S.jsx(nW,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>S.jsxs(S.Fragment,{children:[S.jsx(cO,{...h,ref:e,__scopeCheckbox:n}),f&&S.jsx(fO,{__scopeCheckbox:n})]})})});d0.displayName=Xm;var uO="CheckboxIndicator",dO=I.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=u0(uO,n);return S.jsx(_a,{present:r||qi(i.checked)||i.checked===!0,children:S.jsx(gt.span,{"data-state":pO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});dO.displayName=uO;var hO="CheckboxBubbleInput",fO=I.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:p}=u0(hO,t),T=en(n,p),g=Zq(i),v=AP(r);I.useEffect(()=>{const y=f;if(!y)return;const w=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(w,"checked").set,V=!s.current;if(g!==i&&k){const x=new Event("click",{bubbles:V});y.indeterminate=qi(i),k.call(y,qi(i)?!1:i),y.dispatchEvent(x)}},[f,g,i,s]);const _=I.useRef(qi(i)?!1:i);return S.jsx(gt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:T,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});fO.displayName=hO;function rW(t){return typeof t=="function"}function qi(t){return t==="indeterminate"}function pO(t){return qi(t)?"indeterminate":t?"checked":"unchecked"}const mO=I.forwardRef(({className:t,...e},n)=>S.jsx(d0,{ref:n,className:tn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:S.jsx(dO,{className:tn("flex items-center justify-center text-current"),children:S.jsx(tF,{className:"h-4 w-4"})})}));mO.displayName=d0.displayName;const Up=()=>{const[t,e]=I.useState(""),[n,r]=I.useState(""),[s,i]=I.useState(!1),[o,a]=I.useState(!1),[l,c]=I.useState(!0),{signIn:d,user:h,checkSubscriptionStatus:f,loading:p}=Ia(),T=cc();I.useEffect(()=>{try{h&&!p&&T("/user/dashboard")}catch{}},[h,p,T]),I.useEffect(()=>{try{const y=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;y&&e(y)}catch{}try{const y=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;y==="true"?c(!0):y==="false"&&c(!1)}catch{}(async()=>{var y,w;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const R=await((w=(y=navigator.credentials).get)==null?void 0:w.call(y,{password:!0,mediation:"optional"}));R&&R.type==="password"&&(R.id&&e(R.id),R.password&&r(R.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const R=sessionStorage.getItem("cashy:rememberedPassword");R&&!n&&r(R)}catch{}}catch{}})()},[]);const g=async y=>{if(y.preventDefault(),o){an.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){an.error("   .      .");return}const w=(t||"").trim().toLowerCase(),R=(n||"").trim();if(console.log("    :",{email:w,password:"***"}),!t||!n){an.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(w)){an.error("    ");return}a(!0);try{try{await LB(wn,l?WC:jB);try{window.localStorage.setItem("cashy:rememberLogin",l?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:k}=await d(w,R);if(console.log(" SignIn result:",{error:k}),k){console.error("    :",k);const V=k==null?void 0:k.code;V==="auth/user-not-found"?an.error("     "):V==="auth/wrong-password"?an.error("   "):V==="auth/invalid-credential"?an.error("      "):V==="auth/too-many-requests"?an.error("      "):an.error((k==null?void 0:k.message)||"    ")}else{console.log("    !"),an.success("   !");try{if(l&&navigator.credentials&&window.PasswordCredential){const V=new window.PasswordCredential({id:w,name:w,password:R});await navigator.credentials.store(V)}if(l)try{sessionStorage.setItem("cashy:rememberedPassword",R)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(k){console.error("   :",k),an.error("   ")}finally{a(!1)}},v=y=>{if(o){y.preventDefault(),y.stopPropagation(),an.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){y.preventDefault(),y.stopPropagation(),an.error("   .      .");return}t||an.error("   "),n||an.error("   ");const w=(t||"").trim().toLowerCase();w&&!/^\S+@\S+\.\S+$/.test(w)&&an.error("    ")},_=()=>{T("/user/forgot-password")};return I.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const y=document.documentElement,w=document.body,R=y.style.overflow,k=w.style.overflow,V=y.style.overscrollBehaviorY,x=w.style.overscrollBehaviorY;return y.style.overflow="hidden",w.style.overflow="hidden",y.style.overscrollBehaviorY="none",w.style.overscrollBehaviorY="none",()=>{y.style.overflow=R||"",w.style.overflow=k||"",y.style.overscrollBehaviorY=V||"",w.style.overscrollBehaviorY=x||""}},[]),S.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:S.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:S.jsx(pF,{className:"w-10 h-10 text-white"})}),S.jsx("div",{className:"flex items-center justify-center mb-2",children:S.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),S.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),S.jsx("p",{className:"text-white/80",children:"    "})]}),S.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[S.jsxs("form",{onSubmit:g,className:"space-y-6",autoComplete:"on",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),S.jsxs("div",{className:"relative",children:[S.jsx(yI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),S.jsx(Uv,{id:"username",type:"email",placeholder:"  ",value:t,onChange:y=>{const w=y.target.value;e(w);try{window.localStorage.setItem("cashy:lastEmail",w)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),S.jsxs("div",{className:"relative",children:[S.jsx(lF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),S.jsx(Uv,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:y=>r(y.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),S.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?S.jsx(sF,{className:"w-5 h-5"}):S.jsx(iF,{className:"w-5 h-5"})})]}),S.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[S.jsx(mO,{id:"rememberLogin",checked:l,onCheckedChange:y=>c(!!y)}),S.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),S.jsx("div",{className:"flex justify-end",children:S.jsxs(sl,{type:"button",variant:"ghost",size:"sm",onClick:_,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[S.jsx(yI,{className:"w-4 h-4 ml-1"}),"  "]})}),S.jsx("button",{type:"submit",onClick:v,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx(JM,{className:"w-5 h-5 ml-2"})," "]})})]}),S.jsxs("div",{className:"mt-6 text-center space-y-3",children:[S.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",S.jsx(G3,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),S.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",S.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",S.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),S.jsx("div",{className:"mt-6 text-center",children:S.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},sW=Object.freeze(Object.defineProperty({__proto__:null,default:Up},Symbol.toStringTag,{value:"Module"})),iW=()=>{const t=cc(),e=hs(),{signOut:n,user:r,userSubscription:s}=Ia(),{toast:i}=b_(),[o,a]=I.useState(!1),[l,c]=I.useState(!1),d=[{id:"home",label:"",icon:aF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:oF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:ZM,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:vI,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:XM,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:Kg,path:"/transactions"},{id:"settings",label:"",icon:wI,path:"/profile-settings"}],h=[{id:"installment",label:"",icon:eF,action:()=>{var v;a(!1);const g=(v=s==null?void 0:s.subscription)==null?void 0:v.planType;if(g===Wa.TAHWEELA||g===Wa.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:mF,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:rF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:hF,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:Kg,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:fF,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:vI,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:nF,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:cF,action:()=>{a(!1);const v=`   
  : ${(r==null?void 0:r.email)||" "}`,_=encodeURIComponent(v);window.open(`https://wa.me/201000392539?text=${_}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:gI,action:async()=>{a(!1);try{await n()}catch(g){console.error("Logout error:",g)}},color:"#EF4444"}],f=[{id:"shop-expenses-settings",label:" ",icon:Kg,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:wI,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:gI,action:async()=>{c(!1);try{await n()}catch(g){console.error("Logout error:",g)}},color:"#EF4444"}],p=(g,v,_,y)=>{var x;const R=((x=s==null?void 0:s.subscription)==null?void 0:x.planType)===Wa.TAHWEELA,k=b=>["/user/dashboard","/profile-settings"].includes(b),V=b=>b==="debts";if(_){if(R&&!V(y)&&!k(g)){i({title:"  ",description:"      .",variant:"destructive"});return}_()}else if(v&&g==="/add"){if(R){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!v){if(R&&!k(g)){i({title:"  ",description:"      .",variant:"destructive"});return}t(g)}},T=g=>e.pathname===g;return S.jsxs("div",{className:"mobile-bottom-nav",children:[o&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),S.jsx("div",{className:"floating-actions-container",children:h.map((g,v)=>S.jsxs("div",{className:"floating-action-button",onClick:()=>{var y;if(((y=s==null?void 0:s.subscription)==null?void 0:y.planType)===Wa.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${v*.1}s`},children:[S.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:S.jsx(g.icon,{className:"action-icon"})}),S.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),l&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),S.jsx("div",{className:"floating-actions-container",children:f.map((g,v)=>S.jsxs("div",{className:"floating-action-button",onClick:()=>{var w;const _=(w=s==null?void 0:s.subscription)==null?void 0:w.planType,y=new Set(["logout","profile-settings"]);if(_===Wa.TAHWEELA&&!y.has(g.id)){i({title:"  ",description:"      .",variant:"destructive"});return}g.action()},style:{"--action-color":g.color,"--animation-delay":`${v*.1}s`},children:[S.jsx("div",{className:"floating-action-icon",style:{backgroundColor:g.color},children:S.jsx(g.icon,{className:"action-icon"})}),S.jsx("span",{className:"floating-action-label",children:g.label})]},g.id))})]}),S.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(g=>{const v=g.icon,_=T(g.path);return S.jsxs("button",{onClick:()=>p(g.path,g.isSpecial,g.action,g.id),className:`mobile-nav-item ${_?"active":""} ${g.isSpecial?"special":""}`,type:"button","aria-label":g.label,children:[S.jsx("div",{className:`nav-icon-container ${g.isSpecial?"special-icon":""} ${g.isSpecial&&g.id==="add"&&o?"special-open":""}`,children:S.jsx(v,{className:`nav-icon ${_?"active-icon":""} ${g.isSpecial?"special-icon-svg":""} ${g.isSpecial&&g.id==="add"&&o?"rotated":""} ${g.isSpecial&&g.id==="settings"&&l?"rotated":""}`})}),!g.isSpecial&&S.jsx("span",{className:`nav-label ${_?"active-label":""}`,children:g.label})]},g.id)})})]})};var ex,tx;const Mo=(tx=(ex=import.meta)==null?void 0:ex.env)==null?void 0:tx.VITE_ANDROID_DOWNLOAD_URL;var nx,rx;const Fo=(rx=(nx=import.meta)==null?void 0:nx.env)==null?void 0:rx.VITE_PC_DOWNLOAD_URL;var sx,ix;const Uo=(ix=(sx=import.meta)==null?void 0:sx.env)==null?void 0:ix.VITE_PC32_DOWNLOAD_URL;var ox,ax;const jo=(ax=(ox=import.meta)==null?void 0:ox.env)==null?void 0:ax.VITE_ANDROID_VERSION;var lx,cx;const Bo=(cx=(lx=import.meta)==null?void 0:lx.env)==null?void 0:cx.VITE_PC_VERSION;var ux,dx;const $o=(dx=(ux=import.meta)==null?void 0:ux.env)==null?void 0:dx.VITE_PC32_VERSION;function bt(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function oW(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const no=["siteContent","appDownloads"],jp=["siteContent","desktop_updates"],Bp=["siteContent","android_updates"],Td="appDownloadsCache";function aW(){try{const e=localStorage.getItem(Td);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||Mo,pcUrl:(n==null?void 0:n.pcUrl)||Fo,pc32Url:(n==null?void 0:n.pc32Url)||Uo,androidVersion:(n==null?void 0:n.androidVersion)||jo,pcVersion:(n==null?void 0:n.pcVersion)||Bo,pc32Version:(n==null?void 0:n.pc32Version)||$o,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=bt(r.pcUrl)),r.androidVersion||(r.androidVersion=bt(r.androidUrl)),r.pc32Version||(r.pc32Version=bt(r.pc32Url)),r}}catch{}const t={androidUrl:Mo,pcUrl:Fo,pc32Url:Uo,androidVersion:jo,pcVersion:Bo,pc32Version:$o};return t.pcVersion||(t.pcVersion=bt(t.pcUrl)),t.androidVersion||(t.androidVersion=bt(t.androidUrl)),t.pc32Version||(t.pc32Version=bt(t.pc32Url)),t}async function lW(){try{const t=await Et(ve(Q,no[0],no[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(Td,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||Mo,pcUrl:(n==null?void 0:n.pcUrl)||Fo,pc32Url:(n==null?void 0:n.pc32Url)||Uo,androidVersion:(n==null?void 0:n.androidVersion)||jo,pcVersion:(n==null?void 0:n.pcVersion)||Bo,pc32Version:(n==null?void 0:n.pc32Version)||$o,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=bt(r.pcUrl)),r.androidVersion||(r.androidVersion=bt(r.androidUrl)),r.pc32Version||(r.pc32Version=bt(r.pc32Url)),r}const e={androidUrl:Mo,pcUrl:Fo,pc32Url:Uo,androidVersion:jo,pcVersion:Bo,pc32Version:$o};return e.pcVersion||(e.pcVersion=bt(e.pcUrl)),e.androidVersion||(e.androidVersion=bt(e.androidUrl)),e.pc32Version||(e.pc32Version=bt(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(Td);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||Mo,pcUrl:(i==null?void 0:i.pcUrl)||Fo,pc32Url:(i==null?void 0:i.pc32Url)||Uo,androidVersion:(i==null?void 0:i.androidVersion)||jo,pcVersion:(i==null?void 0:i.pcVersion)||Bo,pc32Version:(i==null?void 0:i.pc32Version)||$o,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=bt(o.pcUrl)),o.androidVersion||(o.androidVersion=bt(o.androidUrl)),o.pc32Version||(o.pc32Version=bt(o.pc32Url)),o}}catch{}const r={androidUrl:Mo,pcUrl:Fo,pc32Url:Uo,androidVersion:jo,pcVersion:Bo,pc32Version:$o};return r.pcVersion||(r.pcVersion=bt(r.pcUrl)),r.androidVersion||(r.androidVersion=bt(r.androidUrl)),r.pc32Version||(r.pc32Version=bt(r.pc32Url)),r}}function cW(t){try{const e=ve(Q,no[0],no[1]);return $s(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||Mo,pcUrl:(s==null?void 0:s.pcUrl)||Fo,pc32Url:(s==null?void 0:s.pc32Url)||Uo,androidVersion:(s==null?void 0:s.androidVersion)||jo,pcVersion:(s==null?void 0:s.pcVersion)||Bo,pc32Version:(s==null?void 0:s.pc32Version)||$o,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=bt(i.pcUrl)),i.androidVersion||(i.androidVersion=bt(i.androidUrl)),i.pc32Version||(i.pc32Version=bt(i.pc32Url));try{localStorage.setItem(Td,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(Td);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function uW(t,e,n,r,s,i=12e4){const o=eO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=Sq(o,l);return new Promise((d,h)=>{const f=Tq(c,t);let p=!1;const T=setTimeout(()=>{p=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",g=>{const v=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(v)},g=>{clearTimeout(T),h(g)},async()=>{try{if(clearTimeout(T),p)return;const g=await Iq(c),v={updatedAt:Ce(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=g,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=g,r&&(v.pcVersion=r)):(v.pc32Url=g,r&&(v.pc32Version=r));const _=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=bn(ve(Q,no[0],no[1]),v,{merge:!0});let w=!1;const R=new Promise(k=>setTimeout(()=>{w=!0,k()},_));try{await Promise.race([y,R])}catch(k){console.warn(" Firestore write error, proceeding with URL only:",k)}w&&console.warn(" Firestore update timed out;             ."),d(g)}catch(g){h(g)}})})}async function dW(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ce(),updatedBy:e||"admin"};await bn(ve(Q,no[0],no[1]),r,{merge:!0})}async function hW(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ce(),updatedBy:e||"admin"};await bn(ve(Q,jp[0],jp[1]),r,{merge:!0})}function gO(t){try{const e=ve(Q,jp[0],jp[1]);return $s(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function yO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function fW(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ce(),updatedBy:e||"admin"};await bn(ve(Q,Bp[0],Bp[1]),r,{merge:!0})}function pW(t){try{const e=ve(Q,Bp[0],Bp[1]);return $s(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const mW=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:lW,getCachedOrEnvAppDownloads:aW,listenAndroidUpdates:pW,listenAppDownloads:cW,listenDesktopUpdates:gO,resolveDownloadUrl:oW,selectDesktopUrl:yO,setAndroidUpdateInfo:fW,setAppDownloadLinks:dW,setDesktopUpdateInfo:hW,uploadAppBinaryResumable:uW},Symbol.toStringTag,{value:"Module"})),gW=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=q.useState(!1),[s,i]=q.useState(!1),[o,a]=q.useState(!1),[l,c]=q.useState(0),[d,h]=q.useState(""),[f,p]=q.useState(!1),T=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(k){console.warn("failed to minimize",k)}},g=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(k){console.warn("failed to close",k)}},v=async()=>{if(!f){p(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>p(!1),600);return}try{window.location.reload()}catch{}}catch(k){console.warn("failed to soft refresh",k),p(!1)}}};if(q.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(k=>{const V=(k==null?void 0:k.percent)==null?0:Number(k.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(V)?0:V)))}),t.checkUpdate()}catch(k){console.warn("update init failed",k)}},[e,t]),q.useEffect(()=>{const k=gO(V=>{if(String((V==null?void 0:V.version)||"")){r(!0);const b=yO({downloadURL_64:V==null?void 0:V.downloadURL_64,downloadURL_32:V==null?void 0:V.downloadURL_32})||"";h(b)}});return()=>{try{k()}catch{}}},[]),!e)return null;const[y,w]=q.useState(!1),R=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),w(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),w(!0))}catch(k){console.warn("window toggle failed",k)}};return S.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[S.jsx("button",{type:"button","aria-label":"",title:"",onClick:g,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:S.jsx(k_,{className:"w-5 h-5"})}),S.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:S.jsx(nP,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),S.jsx("button",{type:"button","aria-label":"",title:"",onClick:T,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:S.jsx(uF,{className:"w-5 h-5"})}),S.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:R,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:S.jsx(dF,{className:"w-5 h-5"})})]})},xw=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=I.useState(`${n}logo.svg`),[i,o]=I.useState(0),a=I.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return S.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:S.jsxs("div",{className:"flex flex-col items-center justify-center",children:[S.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),S.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},br={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Ts.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Ts.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Ts.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=br.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(i=>!s.includes(i.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=br.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Ts.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=br.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=br.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=br.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Ts.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const s=Math.max(0,Number(t.commission||0));return Math.round((s+Math.max(0,e))*100)/100}const n=String(t.type||"").toLowerCase(),r=n==="withdrawal"?"withdraw":n;if(r==="withdraw"||r==="receive"||r==="send"||r==="transfer"){const s=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((s+Math.max(0,e))*100)/100}return 0}},yW=br,hK=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:yW,reportsService:br},Symbol.toStringTag,{value:"Module"}));class vW{constructor(){gg(this,"intervalId",null);gg(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=wn.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await Aw.getToday(n);await Aw.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await br.syncReportsDataFromFirebase(e);const n=br.getReportsData(e);if(!n.lastDailyResetDate||!br.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Ts.getUserTransactions(e),l=y=>{const w=String(y||"").toLowerCase();return["completed","confirmed","success"].includes(w)?"completed":["failed","error"].includes(w)?"failed":["cancelled","canceled"].includes(w)?"cancelled":"pending"},c=(a||[]).filter(y=>{var R,k;const w=(R=y==null?void 0:y.createdAt)!=null&&R.toDate?y.createdAt.toDate():(y==null?void 0:y.createdAt)instanceof Date?y.createdAt:new Date(y==null?void 0:y.createdAt);return((k=w==null?void 0:w.toDateString)==null?void 0:k.call(w))===o&&l(y==null?void 0:y.status)==="completed"}),d=c.length,h=c.reduce((y,w)=>y+Number(w.amount||0),0),f=y=>{const w=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return w==="withdraw"||w==="withdrawal"||w==="receive"},p=y=>{const w=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return w==="send"||w==="transfer"},T=c.filter(f).reduce((y,w)=>{const R=w.withdrawnAmount!==void 0?Number(w.withdrawnAmount):Number(w.amount||0);return y+R},0),g=c.filter(p).reduce((y,w)=>{const R=w.sentAmount!==void 0?Number(w.sentAmount):Number(w.amount||0);return y+R},0),v=c.reduce((y,w)=>y+Number(br.calculateTransactionProfit(w)||0),0),_=new Date(i).toISOString().slice(0,10);await iO.add({userId:e,reportDate:_,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(T.toFixed(2)),totalSent:Number(g.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",_)}catch(n){console.warn("      :",n)}}}const lA=new vW,Ty=768;function wW(){const[t,e]=I.useState(void 0);return I.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Ty-1}px)`),r=()=>{e(window.innerWidth<Ty)};return n.addEventListener("change",r),e(window.innerWidth<Ty),()=>n.removeEventListener("change",r)},[]),!!t}function _W(){const[t,e]=I.useState("default"),[n,r]=I.useState(!1);return I.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}var Iy="focusScope.autoFocusOnMount",Sy="focusScope.autoFocusOnUnmount",cA={bubbles:!1,cancelable:!0},EW="FocusScope",vO=I.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=I.useState(null),c=as(s),d=as(i),h=I.useRef(null),f=en(e,g=>l(g)),p=I.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;I.useEffect(()=>{if(r){let g=function(w){if(p.paused||!a)return;const R=w.target;a.contains(R)?h.current=R:di(h.current,{select:!0})},v=function(w){if(p.paused||!a)return;const R=w.relatedTarget;R!==null&&(a.contains(R)||di(h.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&di(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,p.paused]),I.useEffect(()=>{if(a){dA.add(p);const g=document.activeElement;if(!a.contains(g)){const _=new CustomEvent(Iy,cA);a.addEventListener(Iy,c),a.dispatchEvent(_),_.defaultPrevented||(TW(xW(wO(a)),{select:!0}),document.activeElement===g&&di(a))}return()=>{a.removeEventListener(Iy,c),setTimeout(()=>{const _=new CustomEvent(Sy,cA);a.addEventListener(Sy,d),a.dispatchEvent(_),_.defaultPrevented||di(g??document.body,{select:!0}),a.removeEventListener(Sy,d),dA.remove(p)},0)}}},[a,c,d,p]);const T=I.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,_=document.activeElement;if(v&&_){const y=g.currentTarget,[w,R]=IW(y);w&&R?!g.shiftKey&&_===R?(g.preventDefault(),n&&di(w,{select:!0})):g.shiftKey&&_===w&&(g.preventDefault(),n&&di(R,{select:!0})):_===y&&g.preventDefault()}},[n,r,p.paused]);return S.jsx(gt.div,{tabIndex:-1,...o,ref:f,onKeyDown:T})});vO.displayName=EW;function TW(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(di(r,{select:e}),document.activeElement!==n)return}function IW(t){const e=wO(t),n=uA(e,t),r=uA(e.reverse(),t);return[n,r]}function wO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function uA(t,e){for(const n of t)if(!SW(n,{upTo:e}))return n}function SW(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function bW(t){return t instanceof HTMLInputElement&&"select"in t}function di(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&bW(t)&&e&&t.select()}}var dA=AW();function AW(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=hA(t,e),t.unshift(e)},remove(e){var n;t=hA(t,e),(n=t[0])==null||n.resume()}}}function hA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function xW(t){return t.filter(e=>e.tagName!=="A")}var by=0;function RW(){I.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??fA()),document.body.insertAdjacentElement("beforeend",t[1]??fA()),by++,()=>{by===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),by--}},[])}function fA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Xr=function(){return Xr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xr.apply(this,arguments)};function _O(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function PW(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Af="right-scroll-bar-position",xf="width-before-scroll-bar",CW="with-scroll-bars-hidden",kW="--removed-body-scroll-bar-size";function Ay(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function DW(t,e){var n=I.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var NW=typeof window<"u"?I.useLayoutEffect:I.useEffect,pA=new WeakMap;function OW(t,e){var n=DW(null,function(r){return t.forEach(function(s){return Ay(s,r)})});return NW(function(){var r=pA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Ay(a,null)}),i.forEach(function(a){s.has(a)||Ay(a,o)})}pA.set(n,t)},[t]),n}function VW(t){return t}function LW(t,e){e===void 0&&(e=VW);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function MW(t){t===void 0&&(t={});var e=LW(null);return e.options=Xr({async:!0,ssr:!1},t),e}var EO=function(t){var e=t.sideCar,n=_O(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Xr({},n))};EO.isSideCarExport=!0;function FW(t,e){return t.useMedium(e),EO}var TO=MW(),xy=function(){},Jm=I.forwardRef(function(t,e){var n=I.useRef(null),r=I.useState({onScrollCapture:xy,onWheelCapture:xy,onTouchMoveCapture:xy}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,T=t.noIsolation,g=t.inert,v=t.allowPinchZoom,_=t.as,y=_===void 0?"div":_,w=t.gapMode,R=_O(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,V=OW([n,e]),x=Xr(Xr({},R),s);return I.createElement(I.Fragment,null,d&&I.createElement(k,{sideCar:TO,removeScrollBar:c,shards:h,noRelative:p,noIsolation:T,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?I.cloneElement(I.Children.only(a),Xr(Xr({},x),{ref:V})):I.createElement(y,Xr({},x,{className:l,ref:V}),a))});Jm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jm.classNames={fullWidth:xf,zeroRight:Af};var UW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jW(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=UW();return e&&t.setAttribute("nonce",e),t}function BW(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function $W(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var zW=function(){var t=0,e=null;return{add:function(n){t==0&&(e=jW())&&(BW(e,n),$W(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qW=function(){var t=zW();return function(e,n){I.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},IO=function(){var t=qW(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},WW={left:0,top:0,right:0,gap:0},Ry=function(t){return parseInt(t||"",10)||0},HW=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ry(n),Ry(r),Ry(s)]},KW=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return WW;var e=HW(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},GW=IO(),gl="data-scroll-locked",QW=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(CW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(gl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Af,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xf,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Af," .").concat(Af,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xf," .").concat(xf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gl,`] {
    `).concat(kW,": ").concat(a,`px;
  }
`)},mA=function(){var t=parseInt(document.body.getAttribute(gl)||"0",10);return isFinite(t)?t:0},YW=function(){I.useEffect(function(){return document.body.setAttribute(gl,(mA()+1).toString()),function(){var t=mA()-1;t<=0?document.body.removeAttribute(gl):document.body.setAttribute(gl,t.toString())}},[])},XW=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;YW();var i=I.useMemo(function(){return KW(s)},[s]);return I.createElement(GW,{styles:QW(i,!e,s,n?"":"!important")})},Rw=!1;if(typeof window<"u")try{var qh=Object.defineProperty({},"passive",{get:function(){return Rw=!0,!0}});window.addEventListener("test",qh,qh),window.removeEventListener("test",qh,qh)}catch{Rw=!1}var Ma=Rw?{passive:!1}:!1,JW=function(t){return t.tagName==="TEXTAREA"},SO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!JW(t)&&n[e]==="visible")},ZW=function(t){return SO(t,"overflowY")},eH=function(t){return SO(t,"overflowX")},gA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=bO(t,r);if(s){var i=AO(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},tH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},nH=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bO=function(t,e){return t==="v"?ZW(e):eH(e)},AO=function(t,e){return t==="v"?tH(e):nH(e)},rH=function(t,e){return t==="h"&&e==="rtl"?-1:1},sH=function(t,e,n,r,s){var i=rH(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=AO(t,a),T=p[0],g=p[1],v=p[2],_=g-v-i*T;(T||_)&&bO(t,a)&&(h+=_,f+=T);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},Wh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yA=function(t){return[t.deltaX,t.deltaY]},vA=function(t){return t&&"current"in t?t.current:t},iH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},oH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},aH=0,Fa=[];function lH(t){var e=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),s=I.useState(aH++)[0],i=I.useState(IO)[0],o=I.useRef(t);I.useEffect(function(){o.current=t},[t]),I.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=PW([t.lockRef.current],(t.shards||[]).map(vA),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=I.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var _=Wh(g),y=n.current,w="deltaX"in g?g.deltaX:y[0]-_[0],R="deltaY"in g?g.deltaY:y[1]-_[1],k,V=g.target,x=Math.abs(w)>Math.abs(R)?"h":"v";if("touches"in g&&x==="h"&&V.type==="range")return!1;var b=gA(x,V);if(!b)return!0;if(b?k=x:(k=x==="v"?"h":"v",b=gA(x,V)),!b)return!1;if(!r.current&&"changedTouches"in g&&(w||R)&&(r.current=k),!k)return!0;var A=r.current||k;return sH(A,v,g,A==="h"?w:R)},[]),l=I.useCallback(function(g){var v=g;if(!(!Fa.length||Fa[Fa.length-1]!==i)){var _="deltaY"in v?yA(v):Wh(v),y=e.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&iH(k.delta,_)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(vA).filter(Boolean).filter(function(k){return k.contains(v.target)}),R=w.length>0?a(v,w[0]):!o.current.noIsolation;R&&v.cancelable&&v.preventDefault()}}},[]),c=I.useCallback(function(g,v,_,y){var w={name:g,delta:v,target:_,should:y,shadowParent:cH(_)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(R){return R!==w})},1)},[]),d=I.useCallback(function(g){n.current=Wh(g),r.current=void 0},[]),h=I.useCallback(function(g){c(g.type,yA(g),g.target,a(g,t.lockRef.current))},[]),f=I.useCallback(function(g){c(g.type,Wh(g),g.target,a(g,t.lockRef.current))},[]);I.useEffect(function(){return Fa.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ma),document.addEventListener("touchmove",l,Ma),document.addEventListener("touchstart",d,Ma),function(){Fa=Fa.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Ma),document.removeEventListener("touchmove",l,Ma),document.removeEventListener("touchstart",d,Ma)}},[]);var p=t.removeScrollBar,T=t.inert;return I.createElement(I.Fragment,null,T?I.createElement(i,{styles:oH(s)}):null,p?I.createElement(XW,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function cH(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const uH=FW(TO,lH);var xO=I.forwardRef(function(t,e){return I.createElement(Jm,Xr({},t,{ref:e,sideCar:uH}))});xO.classNames=Jm.classNames;var dH=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ua=new WeakMap,Hh=new WeakMap,Kh={},Py=0,RO=function(t){return t&&(t.host||RO(t.parentNode))},hH=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=RO(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},fH=function(t,e,n,r){var s=hH(e,Array.isArray(t)?t:[t]);Kh[n]||(Kh[n]=new WeakMap);var i=Kh[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),T=p!==null&&p!=="false",g=(Ua.get(f)||0)+1,v=(i.get(f)||0)+1;Ua.set(f,g),i.set(f,v),o.push(f),g===1&&T&&Hh.set(f,!0),v===1&&f.setAttribute(n,"true"),T||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return d(e),a.clear(),Py++,function(){o.forEach(function(h){var f=Ua.get(h)-1,p=i.get(h)-1;Ua.set(h,f),i.set(h,p),f||(Hh.has(h)||h.removeAttribute(r),Hh.delete(h)),p||h.removeAttribute(n)}),Py--,Py||(Ua=new WeakMap,Ua=new WeakMap,Hh=new WeakMap,Kh={})}},pH=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=dH(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),fH(r,s,n,"aria-hidden")):function(){return null}},Zm="Dialog",[PO,fK]=sc(Zm),[mH,Fr]=PO(Zm),CO=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=I.useRef(null),l=I.useRef(null),[c,d]=x_({prop:r,defaultProp:s??!1,onChange:i,caller:Zm});return S.jsx(mH,{scope:e,triggerRef:a,contentRef:l,contentId:Qg(),titleId:Qg(),descriptionId:Qg(),open:c,onOpenChange:d,onOpenToggle:I.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};CO.displayName=Zm;var kO="DialogTrigger",DO=I.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fr(kO,n),i=en(e,s.triggerRef);return S.jsx(gt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":p0(s.open),...r,ref:i,onClick:Je(t.onClick,s.onOpenToggle)})});DO.displayName=kO;var h0="DialogPortal",[gH,NO]=PO(h0,{forceMount:void 0}),OO=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Fr(h0,e);return S.jsx(gH,{scope:e,forceMount:n,children:I.Children.map(r,o=>S.jsx(_a,{present:n||i.open,children:S.jsx(A_,{asChild:!0,container:s,children:o})}))})};OO.displayName=h0;var $p="DialogOverlay",VO=I.forwardRef((t,e)=>{const n=NO($p,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Fr($p,t.__scopeDialog);return i.modal?S.jsx(_a,{present:r||i.open,children:S.jsx(vH,{...s,ref:e})}):null});VO.displayName=$p;var yH=Ju("DialogOverlay.RemoveScroll"),vH=I.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fr($p,n);return S.jsx(xO,{as:yH,allowPinchZoom:!0,shards:[s.contentRef],children:S.jsx(gt.div,{"data-state":p0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ya="DialogContent",LO=I.forwardRef((t,e)=>{const n=NO(ya,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Fr(ya,t.__scopeDialog);return S.jsx(_a,{present:r||i.open,children:i.modal?S.jsx(wH,{...s,ref:e}):S.jsx(_H,{...s,ref:e})})});LO.displayName=ya;var wH=I.forwardRef((t,e)=>{const n=Fr(ya,t.__scopeDialog),r=I.useRef(null),s=en(e,n.contentRef,r);return I.useEffect(()=>{const i=r.current;if(i)return pH(i)},[]),S.jsx(MO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Je(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Je(t.onFocusOutside,i=>i.preventDefault())})}),_H=I.forwardRef((t,e)=>{const n=Fr(ya,t.__scopeDialog),r=I.useRef(!1),s=I.useRef(!1);return S.jsx(MO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),MO=I.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Fr(ya,n),l=I.useRef(null),c=en(e,l);return RW(),S.jsxs(S.Fragment,{children:[S.jsx(vO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:S.jsx(im,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":p0(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),S.jsxs(S.Fragment,{children:[S.jsx(EH,{titleId:a.titleId}),S.jsx(IH,{contentRef:l,descriptionId:a.descriptionId})]})]})}),f0="DialogTitle",FO=I.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fr(f0,n);return S.jsx(gt.h2,{id:s.titleId,...r,ref:e})});FO.displayName=f0;var UO="DialogDescription",jO=I.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fr(UO,n);return S.jsx(gt.p,{id:s.descriptionId,...r,ref:e})});jO.displayName=UO;var BO="DialogClose",$O=I.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fr(BO,n);return S.jsx(gt.button,{type:"button",...r,ref:e,onClick:Je(t.onClick,()=>s.onOpenChange(!1))})});$O.displayName=BO;function p0(t){return t?"open":"closed"}var zO="DialogTitleWarning",[pK,qO]=tM(zO,{contentName:ya,titleName:f0,docsSlug:"dialog"}),EH=({titleId:t})=>{const e=qO(zO),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return I.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},TH="DialogDescriptionWarning",IH=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qO(TH).contentName}}.`;return I.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},SH=CO,bH=DO,AH=OO,WO=VO,HO=LO,KO=FO,GO=jO,xH=$O;const RH=SH,mK=bH,PH=AH,QO=I.forwardRef(({className:t,...e},n)=>S.jsx(WO,{ref:n,className:tn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));QO.displayName=WO.displayName;const YO=I.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>S.jsxs(PH,{children:[S.jsx(QO,{}),S.jsxs(HO,{ref:o,className:tn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&S.jsxs(xH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[S.jsx(k_,{className:"h-4 w-4"}),S.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));YO.displayName=HO.displayName;const XO=({className:t,...e})=>S.jsx("div",{className:tn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});XO.displayName="DialogHeader";const CH=({className:t,...e})=>S.jsx("div",{className:tn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});CH.displayName="DialogFooter";const JO=I.forwardRef(({className:t,...e},n)=>S.jsx(KO,{ref:n,className:tn("text-lg font-semibold leading-none tracking-tight",t),...e}));JO.displayName=KO.displayName;const ZO=I.forwardRef(({className:t,...e},n)=>S.jsx(GO,{ref:n,className:tn("text-sm text-muted-foreground",t),...e}));ZO.displayName=GO.displayName;const kH={},wA=q.lazy(()=>_e(()=>import("./Index-BE4V7YTN.js"),[],import.meta.url)),Gh=q.lazy(()=>_e(()=>import("./LandingPage-Be8vwlAe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),_A=q.lazy(()=>_e(()=>import("./SubscriptionsPage-DvDSGGTi.js"),__vite__mapDeps([13,1,4,14,15,6,7,5,12]),import.meta.url)),EA=q.lazy(()=>_e(()=>import("./AuthPage-DLYMxRW2.js"),__vite__mapDeps([16,1,2,3,8]),import.meta.url)),Qh=q.lazy(()=>_e(()=>import("./TopUpPage-ZQWcPeAf.js"),__vite__mapDeps([17,1,18]),import.meta.url)),TA=q.lazy(()=>_e(()=>import("./AdminTopupsPage-qSbsi2_r.js"),__vite__mapDeps([19,18]),import.meta.url)),IA=q.lazy(()=>_e(()=>import("./AdminNotificationsPage-CIOOsji2.js"),__vite__mapDeps([20,1,21,22,23]),import.meta.url)),Yh=q.lazy(()=>_e(()=>import("./UserRegisterPage-BjaMPnD9.js"),__vite__mapDeps([24,1,21,25,26,27,28,29,30]),import.meta.url)),SA=q.lazy(()=>_e(()=>import("./UserAccountSetupPage-UF7br-UE.js"),__vite__mapDeps([31,1,21,25,30,29,12]),import.meta.url)),bA=q.lazy(()=>_e(()=>import("./ForgotPasswordCodePage-qxRiM-Sc.js"),[],import.meta.url)),AA=q.lazy(()=>_e(()=>import("./DashboardLoginPage-CehzCDEt.js"),__vite__mapDeps([32,1,10]),import.meta.url)),xA=q.lazy(()=>_e(()=>import("./ProtectedDashboard-CIe6QcoN.js"),__vite__mapDeps([33,1,34,18,35,21,10,36,37,38,39,26,12,40]),import.meta.url)),Rf=q.lazy(()=>_e(()=>import("./ProtectedUserDashboard-DSRaUmSn.js"),__vite__mapDeps([41,42,23,35,21,10,36]),import.meta.url)),RA=q.lazy(()=>_e(()=>import("./MerchantDashboard-BJCS61Ue.js"),__vite__mapDeps([43,44,18,45,34,46,1,47,21,48,49]),import.meta.url)),PA=q.lazy(()=>_e(()=>import("./PendingApprovalPage-BlHkameu.js"),__vite__mapDeps([50,51,10]),import.meta.url)),CA=q.lazy(()=>_e(()=>import("./AdminLogin-BgISCjHT.js"),__vite__mapDeps([52,10]),import.meta.url)),kA=q.lazy(()=>_e(()=>import("./ProtectedAdminDashboard-Oct_AlYQ.js"),__vite__mapDeps([53,14,3,54,44,18,45,21,35,10,36,55,1,22,25,34,56,4,29,57,58,42,15,9,59,7,8,12,40]),import.meta.url)),DA=q.lazy(()=>_e(()=>import("./AuthTestPage-CeaWaW68.js"),__vite__mapDeps([60,1,21]),import.meta.url)),NA=q.lazy(()=>_e(()=>import("./ProfileSettingsPage-A95N6Uir.js"),__vite__mapDeps([61,1,21,55,62,35,10,36,49,5,57,28,58,7]),import.meta.url)),OA=q.lazy(()=>_e(()=>import("./TransactionsPage-D3QJMUmN.js"),__vite__mapDeps([63,1,18,34,45,64,56,35,21,10,36,4,47,12,8,15,38,39,5,40]),import.meta.url)),VA=q.lazy(()=>_e(()=>import("./WalletAdditionPage-UT_a_ESN.js"),__vite__mapDeps([65,1,21,18,48,5,26,29,36]),import.meta.url)),LA=q.lazy(()=>_e(()=>import("./ReferralsPage-Dm9o-HkX.js"),__vite__mapDeps([66,1,34,25,28,23,12,58,59,27,40]),import.meta.url)),MA=q.lazy(()=>_e(()=>import("./CPanelPage-BXkomUGY.js"),__vite__mapDeps([67,1,21]),import.meta.url)),FA=q.lazy(()=>_e(()=>import("./CPanelLoginPage-D0FnEn1d.js"),__vite__mapDeps([68,21,1,10]),import.meta.url)),UA=q.lazy(()=>_e(()=>import("./NotFound-Bsvl9Vwl.js"),[],import.meta.url)),jA=q.lazy(()=>_e(()=>import("./PrivacyPolicyPage-BcpfM77V.js"),[],import.meta.url)),DH=new Hj,NH=()=>{if(!((pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return S.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:S.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:S.jsx(nP,{className:"w-5 h-5"})})})},BA=()=>{const t=hs(),{user:e,loading:n}=Ia(),r=(pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?S.jsx(iW,{}):null},$A=()=>{const t=wW(),{profile:e,user:n}=Ia();hs();const r=cc(),{toast:s}=b_(),[i,o]=q.useState(!1),[a,l]=q.useState(null),[c,d]=q.useState(!1),[h,f]=q.useState(null),[p,T]=q.useState(!1),[g,v]=q.useState(""),[_,y]=q.useState(""),[w,R]=q.useState(null),[k,V]=q.useState(null),x=q.useRef(null),b=q.useRef(null),A=q.useRef(!1),[C,N]=q.useState(!1);_W(),I.useEffect(()=>{try{lA.start()}catch{}return()=>{try{lA.stop()}catch{}}},[]),I.useEffect(()=>{(async()=>{try{if(!(n!=null&&n.uid))return;const F=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),$=String(localStorage.getItem("android_installed_version")||"").trim(),H=localStorage.getItem("android_last_ack_code"),Y=localStorage.getItem("android_installed_code"),L=H?Number(H):null,M=Y?Number(Y):null,K=F||$,X=L??M??null;K&&v(K),X&&V(X);const{doc:z,getDoc:se}=await _e(async()=>{const{doc:ie,getDoc:ne}=await Promise.resolve().then(()=>yi);return{doc:ie,getDoc:ne}},void 0,import.meta.url),{db:oe}=await _e(async()=>{const{db:ie}=await Promise.resolve().then(()=>vi);return{db:ie}},void 0,import.meta.url),de=await se(z(oe,"profiles",n.uid));if(de.exists()){const ie=de.data(),ne=String((ie==null?void 0:ie.lastAckAndroidVersion)||(ie==null?void 0:ie.androidInstalledVersion)||(ie==null?void 0:ie.lastAckUpdateId)||"").trim(),xe=typeof(ie==null?void 0:ie.lastAckAndroidCode)=="number"?ie.lastAckAndroidCode:typeof(ie==null?void 0:ie.androidInstalledCode)=="number"?ie.androidInstalledCode:null,Ie=(Re,nt)=>{const rt=String(Re||"").replace(/^v/i,"").split(".").map(kt=>parseInt(kt,10)||0),Vt=String(nt||"").replace(/^v/i,"").split(".").map(kt=>parseInt(kt,10)||0);for(let kt=0;kt<Math.max(rt.length,Vt.length);kt++){const Lt=rt[kt]||0,Qe=Vt[kt]||0;if(Lt>Qe)return 1;if(Lt<Qe)return-1}return 0};let ge=!1;if(typeof xe=="number"&&typeof X=="number"?ge=xe>X:typeof xe=="number"&&X==null?ge=!0:ne&&K?ge=Ie(ne,K)>0:ne&&!K&&(ge=!0),ge){if(ne){try{localStorage.setItem("android_installed_version",ne)}catch{}v(ne)}if(typeof xe=="number"){try{localStorage.setItem("android_installed_code",String(xe))}catch{}V(xe)}}else if(typeof xe=="number"&&X==null){try{localStorage.setItem("android_installed_code",String(xe))}catch{}V(xe)}}}catch{}})()},[n==null?void 0:n.uid]),I.useEffect(()=>{try{const $=String((window==null?void 0:window.__nativeAppVersion)||"").trim();$&&y($);const H=window==null?void 0:window.__nativeAppVersionCode;if(typeof H=="number"){R(H);try{localStorage.setItem("android_installed_code",String(H))}catch{}}try{$&&localStorage.setItem("android_installed_version",$)}catch{}}catch{}const F=$=>{var H,Y;try{const L=String((((H=$==null?void 0:$.detail)==null?void 0:H.version)??"")||"").trim(),M=(Y=$==null?void 0:$.detail)==null?void 0:Y.code;L&&y(L);try{L&&localStorage.setItem("android_installed_version",L)}catch{}typeof M=="number"&&R(M)}catch{}};try{window.addEventListener("native-app-version",F)}catch{}return()=>{try{window.removeEventListener("native-app-version",F)}catch{}}},[]),I.useEffect(()=>{try{const F=(pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android",$=String(_||"").trim();if(!F||!$||!(n!=null&&n.uid))return;(async()=>{try{const{doc:H,setDoc:Y,serverTimestamp:L}=await _e(async()=>{const{doc:K,setDoc:X,serverTimestamp:z}=await Promise.resolve().then(()=>yi);return{doc:K,setDoc:X,serverTimestamp:z}},void 0,import.meta.url),{db:M}=await _e(async()=>{const{db:K}=await Promise.resolve().then(()=>vi);return{db:K}},void 0,import.meta.url);await Y(H(M,"profiles",n.uid),{androidInstalledVersion:$,androidInstalledAt:L()},{merge:!0});try{localStorage.setItem("android_installed_version",$)}catch{}}catch{}})()}catch{}},[_,n==null?void 0:n.uid]),I.useEffect(()=>{pe!=null&&pe.isNativePlatform&&pe.getPlatform()==="android"&&(async()=>{try{await _e(()=>import("./ProtectedUserDashboard-DSRaUmSn.js"),__vite__mapDeps([41,42,23,35,21,10,36]),import.meta.url),await _e(()=>import("./UserDashboardPage-B-nZi7Q8.js"),__vite__mapDeps([69,1,34,18,21,35,10,36,48,26,6,49,47,29,5,56,37,15,11,39,54,44,45,55,40,12,64,4,8,38,30,42,22,46,51,62,7]),import.meta.url),await _e(()=>Promise.resolve().then(()=>sW),void 0,import.meta.url),await _e(()=>import("./ProfileSettingsPage-A95N6Uir.js"),__vite__mapDeps([61,1,21,55,62,35,10,36,49,5,57,28,58,7]),import.meta.url),await _e(()=>import("./TransactionsPage-D3QJMUmN.js"),__vite__mapDeps([63,1,18,34,45,64,56,35,21,10,36,4,47,12,8,15,38,39,5,40]),import.meta.url)}catch{}})()},[]),I.useEffect(()=>{if(!t)return;const F=document.createElement("style");F.setAttribute("data-disable-pull-to-refresh","true"),F.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(F);let $=0,H=null;const Y=M=>{var K,X;$=((X=(K=M.touches)==null?void 0:K[0])==null?void 0:X.clientY)||0,H=M.target},L=M=>{var ie,ne;const K=((ne=(ie=M.touches)==null?void 0:ie[0])==null?void 0:ne.clientY)||0,X=document.scrollingElement||document.documentElement,z=X.scrollTop||window.scrollY||0,se=X.scrollHeight-X.clientHeight||0,oe=H||null,de=(()=>{let xe=oe;for(;xe&&xe!==document.body;){const ge=window.getComputedStyle(xe).overflowY;if((ge==="auto"||ge==="scroll")&&xe.scrollHeight>xe.clientHeight)return!0;xe=xe.parentElement}return!1})();!de&&z<=0&&K>$&&M.cancelable&&M.preventDefault(),!de&&z>=se&&K<$&&M.cancelable&&M.preventDefault()};return document.addEventListener("touchstart",Y,{passive:!0}),document.addEventListener("touchmove",L,{passive:!1}),()=>{document.removeEventListener("touchstart",Y),document.removeEventListener("touchmove",L);try{document.head.removeChild(F)}catch{}}},[t]),I.useEffect(()=>{if(!((pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android"))return;try{const Y=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=Y,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const Y=(window.location.assign||(L=>{})).bind(window.location);window.__originalAssign=Y,window.location.assign=L=>{try{if(String(L||"").startsWith("/user/dashboard")){r("/user/dashboard");return}}catch{}try{Y(L)}catch{}}}catch{}let $=null,H=!1;return(async()=>{try{const{listenAndroidUpdates:Y}=await _e(async()=>{const{listenAndroidUpdates:L}=await Promise.resolve().then(()=>mW);return{listenAndroidUpdates:L}},void 0,import.meta.url);$=Y(L=>{if(H)return;const M=String((L==null?void 0:L.version)||"").trim(),K=String((L==null?void 0:L.url)||"").trim(),X=String((L==null?void 0:L.notes)||"").trim(),z=!!(L!=null&&L.force),se=typeof(L==null?void 0:L.code)=="number"?L.code:void 0,oe=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),de=String(g||oe||"").trim(),ie=(Qe,ye)=>{const Ue=String(Qe||"").replace(/^v/i,"").split(".").map(Mt=>parseInt(Mt,10)||0),St=String(ye||"").replace(/^v/i,"").split(".").map(Mt=>parseInt(Mt,10)||0);for(let Mt=0;Mt<Math.max(Ue.length,St.length);Mt++){const ho=Ue[Mt]||0,jn=St[Mt]||0;if(ho>jn)return 1;if(ho<jn)return-1}return 0},ne=String(_||"").trim(),xe=String(localStorage.getItem("android_installed_version")||"").trim(),Ie=localStorage.getItem("android_installed_code"),ge=Ie?Number(Ie):null,Re=[w,k,ge].filter(Qe=>typeof Qe=="number").reduce((Qe,ye)=>Qe===void 0?ye:Math.max(Qe,ye),void 0),nt=typeof se=="number"&&typeof Re=="number"?se>Re:void 0,rt=(()=>{const Qe=[ne,de,xe].filter(Boolean);return Qe.length===0?"":Qe.reduce((ye,Ue)=>ie(Ue,ye)>0?Ue:ye)})(),Vt=ie(M,rt)>0;if(!!K&&(!!M||typeof se=="number")&&(nt!==void 0?nt:Vt)){const Qe="   ",ye=`${X?X+`
`:""} : ${M}`;l({title:Qe,message:ye,apkUrl:K,force:z,versionId:M,versionCode:se}),o(!0)}else try{o(!1)}catch{}})}catch{}})(),()=>{H=!0;try{typeof $=="function"&&$()}catch{}}},[g,_]),I.useEffect(()=>{const F=H=>{const Y=(H==null?void 0:H.detail)||{};try{x.current&&(clearTimeout(x.current),x.current=null)}catch{}try{b.current&&(clearInterval(b.current),b.current=null)}catch{}d(!0),f({percent:Y.percent??null,downloaded:Y.downloaded??0,total:Y.total??0})},$=()=>{try{x.current&&(clearTimeout(x.current),x.current=null)}catch{}try{b.current&&(clearInterval(b.current),b.current=null)}catch{}d(!1),T(!0),f({percent:100,downloaded:((h==null?void 0:h.total)??(h==null?void 0:h.downloaded)??0)||0,total:(h==null?void 0:h.total)??0});try{const H=String((a==null?void 0:a.versionId)||"").trim();if(H){try{localStorage.setItem("android_last_ack_version_id",H)}catch{}try{localStorage.setItem("android_installed_version",H)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:Y,setDoc:L,serverTimestamp:M}=await _e(async()=>{const{doc:X,setDoc:z,serverTimestamp:se}=await Promise.resolve().then(()=>yi);return{doc:X,setDoc:z,serverTimestamp:se}},void 0,import.meta.url),{db:K}=await _e(async()=>{const{db:X}=await Promise.resolve().then(()=>vi);return{db:X}},void 0,import.meta.url);await L(Y(K,"profiles",n.uid),{lastAckAndroidVersion:H,androidInstalledVersion:H,lastAckAt:M(),androidInstalledAt:M()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",F),window.addEventListener("androidUpdateDownloaded",$),()=>{window.removeEventListener("androidUpdateProgress",F),window.removeEventListener("androidUpdateDownloaded",$)}},[]),I.useEffect(()=>{const F=(pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android",$=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(F||$)return;let H=!1;return(async()=>{try{const Y="0.0.0",L=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!L.ok)return;const M=await L.json(),K=String((M==null?void 0:M.version)||"0.0.0"),X=!!(M!=null&&M.force);if(!H&&((se,oe)=>{const de=String(se).split(".").map(ne=>parseInt(ne,10)||0),ie=String(oe).split(".").map(ne=>parseInt(ne,10)||0);for(let ne=0;ne<Math.max(de.length,ie.length);ne++){const xe=de[ne]||0,Ie=ie[ne]||0;if(xe>Ie)return 1;if(xe<Ie)return-1}return 0})(K,Y)>0){if(X){try{window.location.reload()}catch{}return}try{s({title:"  ",description:` ${K}      `})}catch{}}}catch{}})(),()=>{H=!0}},[]);const O=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),P=(()=>{const F=(H,Y)=>{const L=String(H||"").replace(/^v/i,"").split(".").map(K=>parseInt(K,10)||0),M=String(Y||"").replace(/^v/i,"").split(".").map(K=>parseInt(K,10)||0);for(let K=0;K<Math.max(L.length,M.length);K++){const X=L[K]||0,z=M[K]||0;if(X>z)return 1;if(X<z)return-1}return 0},$=[_,g,O].filter(Boolean);return $.length===0?"":$.reduce((H,Y)=>F(Y,H)>0?Y:H)})();return S.jsxs(S.Fragment,{children:[C&&(pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android"&&S.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[S.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:S.jsx("span",{className:"text-2xl",children:"!"})}),S.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),S.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),S.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:S.jsx(sl,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),i&&a&&S.jsx(RH,{open:i,onOpenChange:F=>{a!=null&&a.force||o(F)},children:S.jsxs(YO,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[S.jsxs(XO,{className:"text-center",children:[S.jsx(JO,{className:"text-base md:text-lg font-bold text-gray-900",children:a.title}),S.jsx(ZO,{className:"text-sm text-gray-700 whitespace-pre-line",children:a.message}),S.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:P?`  : v${P}`:""})]}),S.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!a.force&&!c&&!p&&S.jsx(sl,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>o(!1),children:""}),!p&&S.jsx(sl,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const F=String((a==null?void 0:a.versionId)||"").trim(),$=a==null?void 0:a.versionCode;if(F)try{localStorage.setItem("android_last_ack_version_id",F)}catch{}if(typeof $=="number")try{localStorage.setItem("android_last_ack_code",String($))}catch{}if((async()=>{try{if(n!=null&&n.uid&&F){const{doc:Y,setDoc:L,serverTimestamp:M}=await _e(async()=>{const{doc:z,setDoc:se,serverTimestamp:oe}=await Promise.resolve().then(()=>yi);return{doc:z,setDoc:se,serverTimestamp:oe}},void 0,import.meta.url),{db:K}=await _e(async()=>{const{db:z}=await Promise.resolve().then(()=>vi);return{db:z}},void 0,import.meta.url),X={lastAckAndroidVersion:F,lastAckAt:M()};typeof $=="number"&&(X.lastAckAndroidCode=$),await L(Y(K,"profiles",n.uid),X,{merge:!0})}}catch{}})(),(pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android"){const Y=a.apkUrl,L=`cashy://update?url=${encodeURIComponent(Y)}`;d(!0),f({percent:0,downloaded:0,total:0});try{b.current&&clearInterval(b.current),b.current=setInterval(()=>{f(M=>{const K=typeof(M==null?void 0:M.percent)=="number"?M.percent:0,X=A.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(K+X))),downloaded:(M==null?void 0:M.downloaded)??0,total:(M==null?void 0:M.total)??0}})},600)}catch{}window.location.href=L;try{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{try{A.current=!1}catch{}try{x.current=null}catch{}},8e3)}catch{}}else{const Y=a.apkUrl;try{window.open(Y,"_blank")}catch{}}}catch{}},children:c?" ...":" "}),p&&S.jsx(sl,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((pe==null?void 0:pe.isNativePlatform)&&pe.getPlatform()==="android"){o(!1);try{const $=String((a==null?void 0:a.versionId)||"").trim();if($){try{localStorage.setItem("android_last_ack_version_id",$)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:H,setDoc:Y,serverTimestamp:L}=await _e(async()=>{const{doc:z,setDoc:se,serverTimestamp:oe}=await Promise.resolve().then(()=>yi);return{doc:z,setDoc:se,serverTimestamp:oe}},void 0,import.meta.url),{db:M}=await _e(async()=>{const{db:z}=await Promise.resolve().then(()=>vi);return{db:z}},void 0,import.meta.url),K={lastAckAndroidVersion:$,androidInstalledVersion:$,lastAckAt:L(),androidInstalledAt:L()},X=a==null?void 0:a.versionCode;if(typeof X=="number"){K.lastAckAndroidCode=X,K.androidInstalledCode=X;try{localStorage.setItem("android_installed_code",String(X)),localStorage.setItem("android_last_ack_code",String(X))}catch{}}await Y(H(M,"profiles",n.uid),K,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),c&&S.jsxs("div",{className:"mt-3 text-center",children:[S.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:S.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((h==null?void 0:h.percent)||0)))}%`}})}),S.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((h==null?void 0:h.percent)||0),"%"]})]})]})})]})},zA=()=>{const t=hs(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?S.jsxs(S.Fragment,{children:[S.jsx(XF,{}),S.jsx(D4,{})]}):null},qA=()=>{const{user:t,loading:e}=Ia();return e?S.jsx(xw,{}):t?S.jsx(Rf,{}):S.jsx(Up,{})},OH=()=>S.jsx(Gj,{client:DH,children:S.jsx(Y3,{children:S.jsxs(wj,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(pe!=null&&pe.isNativePlatform&&pe.getPlatform()==="android")&&S.jsx(gW,{}),S.jsx(NH,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&kH||pe!=null&&pe.isNativePlatform&&pe.getPlatform()==="android")?S.jsxs(W3,{children:[S.jsx($A,{}),S.jsx(zA,{}),S.jsx(I.Suspense,{fallback:S.jsx(xw,{}),children:S.jsxs(XI,{children:[S.jsx(ue,{path:"/",element:pe!=null&&pe.isNativePlatform&&pe.getPlatform()==="android"?S.jsx(qA,{}):S.jsx(Gh,{})}),S.jsx(ue,{path:"/dashboard-redirect",element:S.jsx(wA,{})}),S.jsx(ue,{path:"/landing",element:S.jsx(Gh,{})}),S.jsx(ue,{path:"/subscriptions",element:S.jsx(_A,{})}),S.jsx(ue,{path:"/auth",element:S.jsx(EA,{})}),S.jsx(ue,{path:"/user/login",element:S.jsx(Up,{})}),S.jsx(ue,{path:"/user/forgot-password",element:S.jsx(bA,{})}),S.jsx(ue,{path:"/user/register",element:S.jsx(Yh,{})}),S.jsx(ue,{path:"/register",element:S.jsx(Yh,{})}),S.jsx(ue,{path:"/user/account-setup",element:S.jsx(SA,{})}),S.jsx(ue,{path:"/user/pending-approval",element:S.jsx(PA,{})}),S.jsx(ue,{path:"/user/dashboard",element:S.jsx(Rf,{})}),S.jsx(ue,{path:"/branch/:shopId/dashboard",element:S.jsx(Rf,{})}),S.jsx(ue,{path:"/user/add-wallet",element:S.jsx(VA,{})}),S.jsx(ue,{path:"/admin/login",element:S.jsx(CA,{})}),S.jsx(ue,{path:"/admin/dashboard",element:S.jsx(kA,{})}),S.jsx(ue,{path:"/admin/topups",element:S.jsx(TA,{})}),S.jsx(ue,{path:"/admin/notifications",element:S.jsx(IA,{})}),S.jsx(ue,{path:"/profile-settings",element:S.jsx(NA,{})}),S.jsx(ue,{path:"/transactions",element:S.jsx(OA,{})}),S.jsx(ue,{path:"/referrals",element:S.jsx(LA,{})}),S.jsx(ue,{path:"/privacy-policy",element:S.jsx(jA,{})}),S.jsx(ue,{path:"/cpanel",element:S.jsx(MA,{})}),S.jsx(ue,{path:"/cpanel/login",element:S.jsx(FA,{})}),S.jsx(ue,{path:"/auth-test",element:S.jsx(DA,{})}),S.jsx(ue,{path:"/topup",element:S.jsx(Qh,{})}),S.jsx(ue,{path:"/recharge",element:S.jsx(Qh,{})}),S.jsx(ue,{path:"/merchant/*",element:S.jsx(RA,{})}),S.jsx(ue,{path:"/dashboard/login",element:S.jsx(AA,{})}),S.jsx(ue,{path:"/dashboard",element:S.jsx(xA,{})}),S.jsx(ue,{path:"*",element:S.jsx(UA,{})})]})}),S.jsx(BA,{})]}):S.jsxs(q3,{children:[S.jsx($A,{}),S.jsx(zA,{}),S.jsx(I.Suspense,{fallback:S.jsx(xw,{}),children:S.jsxs(XI,{children:[S.jsx(ue,{path:"/",element:pe!=null&&pe.isNativePlatform&&pe.getPlatform()==="android"?S.jsx(qA,{}):S.jsx(Gh,{})}),S.jsx(ue,{path:"/dashboard-redirect",element:S.jsx(wA,{})}),S.jsx(ue,{path:"/landing",element:S.jsx(Gh,{})}),S.jsx(ue,{path:"/subscriptions",element:S.jsx(_A,{})}),S.jsx(ue,{path:"/auth",element:S.jsx(EA,{})}),S.jsx(ue,{path:"/user/login",element:S.jsx(Up,{})}),S.jsx(ue,{path:"/user/forgot-password",element:S.jsx(bA,{})}),S.jsx(ue,{path:"/user/register",element:S.jsx(Yh,{})}),S.jsx(ue,{path:"/register",element:S.jsx(Yh,{})}),S.jsx(ue,{path:"/user/account-setup",element:S.jsx(SA,{})}),S.jsx(ue,{path:"/user/pending-approval",element:S.jsx(PA,{})}),S.jsx(ue,{path:"/user/dashboard",element:S.jsx(Rf,{})}),S.jsx(ue,{path:"/user/add-wallet",element:S.jsx(VA,{})}),S.jsx(ue,{path:"/admin/login",element:S.jsx(CA,{})}),S.jsx(ue,{path:"/admin/dashboard",element:S.jsx(kA,{})}),S.jsx(ue,{path:"/admin/topups",element:S.jsx(TA,{})}),S.jsx(ue,{path:"/admin/notifications",element:S.jsx(IA,{})}),S.jsx(ue,{path:"/profile-settings",element:S.jsx(NA,{})}),S.jsx(ue,{path:"/transactions",element:S.jsx(OA,{})}),S.jsx(ue,{path:"/referrals",element:S.jsx(LA,{})}),S.jsx(ue,{path:"/privacy-policy",element:S.jsx(jA,{})}),S.jsx(ue,{path:"/cpanel",element:S.jsx(MA,{})}),S.jsx(ue,{path:"/cpanel/login",element:S.jsx(FA,{})}),S.jsx(ue,{path:"/auth-test",element:S.jsx(DA,{})}),S.jsx(ue,{path:"/topup",element:S.jsx(Qh,{})}),S.jsx(ue,{path:"/recharge",element:S.jsx(Qh,{})}),S.jsx(ue,{path:"/merchant/*",element:S.jsx(RA,{})}),S.jsx(ue,{path:"/dashboard/login",element:S.jsx(AA,{})}),S.jsx(ue,{path:"/dashboard",element:S.jsx(xA,{})}),S.jsx(ue,{path:"*",element:S.jsx(UA,{})})]})}),S.jsx(BA,{})]})]})})}),e2=I.createContext(void 0),VH=({children:t})=>{const[e,n]=I.useState(null),[r,s]=I.useState(!1),[i,o]=I.useState(null),{profile:a,user:l}=Ia();I.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),p=localStorage.getItem("cashier_shift_active"),T=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),p&&s(p==="true"),T&&o(Number(T))}catch{}},[]),I.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=ve(Q,"cashierShift",a.shopId);let p=null;return(async()=>{try{(await Et(f)).exists()||await bn(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),p=$s(f,g=>{if(g.exists()){const v=g.data(),_=(v==null?void 0:v.shiftUser)||null,y=!!(v!=null&&v.isShiftActive),w=(v==null?void 0:v.shiftStartAt)??null;let R=_;if(!R)try{const k=localStorage.getItem("cashier_shift_user"),V=k?JSON.parse(k):null;V&&(R=V)}catch{}n(R),s(y),o(typeof w=="number"?w:w?Number(w):null);try{R?localStorage.setItem("cashier_shift_user",JSON.stringify(R)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",y?"true":"false"),w!=null&&localStorage.setItem("cashier_shift_start_at",String(w))}catch{}}},g=>{console.warn("cashierShift snapshot error:",g)})}catch(T){console.warn("Failed to init cashierShift doc:",T)}})(),()=>{p&&p()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const p=ve(Q,"cashierShift",a.shopId);Ct(p,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const p=ve(Q,"cashierShift",a.shopId);Ct(p,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const T=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,g=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let _=localStorage.getItem(T);if(_==null){const w=localStorage.getItem(g);if(w!=null){_=w;try{localStorage.setItem(T,w),localStorage.removeItem(g)}catch{}}}if(_==null&&(l!=null&&l.uid)){const w=localStorage.getItem("cashBalance"),R=localStorage.getItem("userCashBalance");if(w!=null){try{localStorage.setItem(T,w),localStorage.removeItem("cashBalance")}catch{}_=w}else if(R!=null){try{localStorage.setItem(T,R),localStorage.removeItem("userCashBalance")}catch{}_=R}}const y=localStorage.getItem(v);_?localStorage.setItem("shiftStartDrawerFunds",_):localStorage.setItem("shiftStartDrawerFunds","0"),y?localStorage.setItem("shiftStartWalletBalances",y):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const p=ve(Q,"dashboardData",a.shopId),T=await Et(p);if(T.exists()){const g=T.data(),v=Number((g==null?void 0:g.cashBalance)??0),_=(g==null?void 0:g.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),w=localStorage.getItem("shiftStartWalletBalances"),R=y?parseFloat(y):0,k=w?JSON.parse(w):{},V=!y||!Number.isFinite(R)||R===0,x=!w||Object.keys(k||{}).length===0;V&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),x&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(p){console.warn("Shift start Firebase read failed:",p)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=ve(Q,"cashierShift",a.shopId);Ct(f,{isShiftActive:!1})}}catch{}};return S.jsx(e2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},gK=()=>{const t=I.useContext(e2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t},t2=I.createContext(void 0);function LH({children:t}){const{profile:e,user:n,loading:r}=Ia(),[s,i]=I.useState(null),[o,a]=I.useState(null),[l,c]=I.useState(!0);I.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),I.useEffect(()=>{const h=()=>{const p=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const T=localStorage.getItem(p);i(T||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=p=>{const T=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!p.key||p.key!==T))try{const g=localStorage.getItem(T);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return S.jsx(t2.Provider,{value:d,children:t})}function yK(){const t=I.useContext(t2);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}const vK=Ym("AppLauncher",{web:()=>_e(()=>import("./web-l5uzc54L.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)}),MH=()=>{var n,r;const t=(r=(n=import.meta)==null?void 0:n.env)==null?void 0:r.VITE_CLOUDFLARE_SMS_WEBHOOK_URL;return t||"https://frosty-sun-0baf.alkaptin2030.workers.dev/"},FH=t=>{var e,n;try{const r=t||((e=wn.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function UH(){if(typeof window>"u")return()=>{};const t=async e=>{var n;try{const r=e.detail||{},s=String(r.text||""),i=String(r.sender||r.msisdn||""),o=((n=wn.currentUser)==null?void 0:n.uid)||"",a=FH(o)||"",l=void 0,c=MH();if(!s||!o||!a)return;const d=new Date().toISOString().slice(0,16).replace("T"," ");try{await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,sender:i,timestamp:d,walletId:a,userId:o,shopId:l})})}catch{}}catch{}};return window.addEventListener("mobileSmsReceived",t),()=>{window.removeEventListener("mobileSmsReceived",t)}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{UH()}catch{}const jH=()=>{const{theme:t="system"}=fP();return I.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};A1(document.getElementById("root")).render(S.jsx(e4,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:S.jsx(Jq,{children:S.jsx(VH,{children:S.jsxs(LH,{children:[S.jsx(OH,{}),S.jsx(jH,{})]})})})}));export{hs as $,JM as A,sl as B,an as C,aK as D,sF as E,zh as F,DB as G,bn as H,Uv as I,tt as J,Et as K,G3 as L,cF as M,QH as N,Ct as O,bw as P,nF as Q,q as R,Wa as S,tn as T,pF as U,eP as V,RH as W,YO as X,XO as Y,JO as Z,CH as _,cc as a,pH as a$,sc as a0,cM as a1,Qg as a2,gt as a3,Je as a4,en as a5,x_ as a6,as as a7,br as a8,Ts as a9,Cq as aA,vK as aB,ZO as aC,hc as aD,ZH as aE,Zq as aF,AP as aG,XH as aH,fP as aI,uF as aJ,cK as aK,uK as aL,dK as aM,Bq as aN,_a as aO,eM as aP,yK as aQ,W7 as aR,Fq as aS,eF as aT,oF as aU,mF as aV,Gt as aW,RP as aX,zH as aY,ZU as aZ,A_ as a_,qe as aa,oO as ab,cW as ac,hF as ad,_e as ae,bf as af,gK as ag,wW as ah,pe as ai,gI as aj,ZM as ak,PN as al,xw as am,wI as an,XI as ao,ue as ap,rO as aq,vI as ar,rF as as,lK as at,we as au,k_ as av,H7 as aw,Sq as ax,iK as ay,Iq as az,YH as b,P1 as b0,RW as b1,xO as b2,Ju as b3,vO as b4,im as b5,ej as b6,tj as b7,x1 as b8,tF as b9,X3 as bA,GH as bB,iO as bC,Zc as bD,eO as bE,Uq as bF,XM as bG,yi as bH,vi as bI,oK as bJ,mW as bK,hK as bL,Ls as ba,xM as bb,kd as bc,eK as bd,gO as be,yO as bf,fF as bg,pW as bh,fW as bi,iA as bj,hW as bk,Vq as bl,Kg as bm,mK as bn,Mq as bo,fK as bp,SH as bq,AH as br,pK as bs,HO as bt,iM as bu,KO as bv,GO as bw,xH as bx,WO as by,bH as bz,b_ as c,lW as d,oW as e,wn as f,aW as g,fe as h,Q as i,S as j,Ae as k,ea as l,sK as m,Pq as n,is as o,os as p,Te as q,I as r,Ce as s,yI as t,Ia as u,lF as v,iF as w,kB as x,ve as y,$s as z};
//# sourceMappingURL=index-DKHjTn06.js.map
