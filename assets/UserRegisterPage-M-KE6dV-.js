import{b as A,r as n,u as U,c as D,a as I,j as e,U as $,I as m,t as M,v as N,E as w,w as b,B as z,A as B,L as T}from"./index-gOTNP7ME.js";import{C as W,a as H,b as O,d as q}from"./card-BQR6WmIt.js";import{L as c}from"./label-BvE0EeZv.js";import{A as j,a as v}from"./alert-BILMw3Za.js";import{W as G}from"./wallet-bsm-6TqW.js";import{U as J}from"./user-plus-CzG-70Xs.js";import{S as K}from"./share-2-Ccm4HzZi.js";import{P as Q}from"./phone-B5VvzQKp.js";import{S as V}from"./store-DvQj4atB.js";const le=()=>{const[y]=A(),i=y.get("ref"),[s,C]=n.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",shopName:""}),[x,P]=n.useState(!1),[p,S]=n.useState(!1),[r,u]=n.useState(!1),[f,o]=n.useState(""),[g,F]=n.useState(null),{signUp:R}=U(),{toast:h}=D(),E=I();n.useEffect(()=>{i&&(F(`تم استخدام رمز الإحالة: ${i}`),h({title:"رمز الإحالة مُطبق",description:`تم تطبيق رمز الإحالة: ${i}`}))},[i,h]);const d=(a,l)=>{C(t=>({...t,[a]:l}))},k=()=>{if(!s.name||!s.email||!s.password||!s.confirmPassword||!s.phone||!s.shopName)return o("يرجى ملء جميع الحقول"),!1;if(s.name.length<2)return o("يجب أن يكون الاسم أكثر من حرفين"),!1;if(s.shopName.length<2)return o("يجب أن يكون اسم المحل أكثر من حرفين"),!1;const a=s.phone.replace(/\D/g,"");return/^01(0|1|2|5)\d{8}$/.test(a)?s.password.length<6?(o("يجب أن تكون كلمة المرور 6 أحرف على الأقل"),!1):s.password!==s.confirmPassword?(o("كلمات المرور غير متطابقة"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?!0:(o("البريد الإلكتروني غير صالح"),!1):(o("رقم مصري غير صالح: 11 رقم ويبدأ بـ 010/011/012/015"),!1)},L=async a=>{if(a.preventDefault(),o(""),!!k()){u(!0);try{const l=(s.email||"").trim().toLowerCase(),t=(s.password||"").trim();await R(l,t,s.name,s.phone,s.shopName,i||void 0),h({title:"تم إنشاء الحساب بنجاح",description:i?"تم إنشاء الحساب بنجاح مع رمز الإحالة":"سيتم مراجعة حسابك من قبل الإدارة قبل تفعيله"}),E("/dashboard-redirect")}catch(l){console.error("Registration error:",l);let t="حدث خطأ أثناء إنشاء الحساب";l.code==="auth/email-already-in-use"?t="البريد الإلكتروني مستخدم بالفعل":l.code==="auth/invalid-email"?t="البريد الإلكتروني غير صالح":l.code==="auth/weak-password"?t="كلمة المرور ضعيفة جداً":l.code==="auth/operation-not-allowed"&&(t="إنشاء الحسابات غير مفعل حالياً"),o(t),h({title:"خطأ في إنشاء الحساب",description:t,variant:"destructive"})}finally{u(!1)}}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-4 shadow-lg",children:e.jsx(G,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"كاشي لينك"}),e.jsx("p",{className:"text-gray-600",children:"نظام إدارة المحافظ الإلكترونية"})]}),e.jsxs(W,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[e.jsxs(H,{className:"text-center pb-4",children:[e.jsxs(O,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[e.jsx(J,{className:"h-6 w-6 text-green-600"}),"إنشاء حساب جديد"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بياناتك لإنشاء حساب جديد"})]}),e.jsxs(q,{className:"space-y-6",children:[g&&e.jsxs(j,{className:"fade-in-up border-green-200 bg-green-50",children:[e.jsx(K,{className:"h-4 w-4 text-green-600"}),e.jsx(v,{className:"text-green-700",children:g})]}),f&&e.jsx(j,{variant:"destructive",className:"fade-in-up",children:e.jsx(v,{children:f})}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"الاسم الكامل"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"name",type:"text",value:s.name,onChange:a=>d("name",a.target.value),placeholder:"أدخل اسمك الكامل",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:r})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"رقم الجوال"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"phone",type:"tel",value:s.phone,onChange:a=>d("phone",a.target.value),placeholder:"أدخل رقم مصري (11 رقم يبدأ بـ 010/011/012/015)",dir:"ltr",inputMode:"numeric",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:r})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"shopName",className:"text-sm font-medium text-gray-700",children:"اسم المحل"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"shopName",type:"text",value:s.shopName,onChange:a=>d("shopName",a.target.value),placeholder:"أدخل اسم المحل الخاص بك",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:r})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"email",type:"email",value:s.email,onChange:a=>d("email",a.target.value),placeholder:"أدخل بريدك الإلكتروني",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:r})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"password",type:x?"text":"password",value:s.password,onChange:a=>d("password",a.target.value),placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",autoComplete:"new-password",disabled:r}),e.jsx("button",{type:"button",onClick:()=>P(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:r,children:x?e.jsx(w,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"confirmPassword",type:p?"text":"password",value:s.confirmPassword,onChange:a=>d("confirmPassword",a.target.value),placeholder:"أعد إدخال كلمة المرور",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",autoComplete:"new-password",disabled:r}),e.jsx("button",{type:"button",onClick:()=>S(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:r,children:p?e.jsx(w,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})]}),e.jsx(z,{type:"submit",disabled:r||!s.name||!s.email||!s.password||!s.confirmPassword||!s.phone||!s.shopName,className:"w-full h-12 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:["إنشاء حساب جديد",e.jsx(B,{className:"h-4 w-4"})]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",e.jsx(T,{to:"/user/login",className:"text-green-600 hover:text-green-700 font-medium transition-colors hover:underline",children:"تسجيل الدخول"})]})})]})]}),e.jsx("div",{className:"text-center mt-8 fade-in-up",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})})};export{le as default};
