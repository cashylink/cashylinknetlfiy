import{O as oe,r as o,j as e,a5 as _e,a8 as J,ac as Me,bf as X,W as Z,u as ie,c as ce,Y as le,Z as de,_ as ue,$ as fe,aE as Re,I as W,B as C,E as B,w as q,a0 as Oe,aF as Fe,aG as Ve,bi as Ge,a as Te,ai as $e,bj as Ke,bk as We,M as Be,aq as qe,al as ze}from"./index-gOTNP7ME.js";import{L as He,D as Ye,a as Xe,b as Je,c as Ze,d as z,e as G}from"./dropdown-menu-Cun2tHO3.js";import{L as H}from"./label-BvE0EeZv.js";import{M as Qe}from"./MasterPinDialog-BZURpLXG.js";import{g as es}from"./switch-TvgC6AJN.js";import{S as ss}from"./shield-DG1jRZIq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=oe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=oe("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);var he={exports:{}},me={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=o;function as(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var rs=typeof Object.is=="function"?Object.is:as,ns=_.useState,os=_.useEffect,is=_.useLayoutEffect,cs=_.useDebugValue;function ls(r,t){var s=t(),d=ns({inst:{value:s,getSnapshot:t}}),i=d[0].inst,c=d[1];return is(function(){i.value=s,i.getSnapshot=t,Y(i)&&c({inst:i})},[r,s,t]),os(function(){return Y(i)&&c({inst:i}),r(function(){Y(i)&&c({inst:i})})},[r]),cs(s),s}function Y(r){var t=r.getSnapshot;r=r.value;try{var s=t();return!rs(r,s)}catch{return!0}}function ds(r,t){return t()}var us=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ds:ls;me.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:us;he.exports=me;var fs=he.exports;function hs(){return fs.useSyncExternalStore(ms,()=>!0,()=>!1)}function ms(){return()=>{}}var Q="Avatar",[ws]=_e(Q),[gs,we]=ws(Q),ge=o.forwardRef((r,t)=>{const{__scopeAvatar:s,...d}=r,[i,c]=o.useState("idle");return e.jsx(gs,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:c,children:e.jsx(J.span,{...d,ref:t})})});ge.displayName=Q;var pe="AvatarImage",xe=o.forwardRef((r,t)=>{const{__scopeAvatar:s,src:d,onLoadingStatusChange:i=()=>{},...c}=r,b=we(pe,s),x=ps(d,c),w=Me(h=>{i(h),b.onImageLoadingStatusChange(h)});return X(()=>{x!=="idle"&&w(x)},[x,w]),x==="loaded"?e.jsx(J.img,{...c,ref:t,src:d}):null});xe.displayName=pe;var ve="AvatarFallback",je=o.forwardRef((r,t)=>{const{__scopeAvatar:s,delayMs:d,...i}=r,c=we(ve,s),[b,x]=o.useState(d===void 0);return o.useEffect(()=>{if(d!==void 0){const w=window.setTimeout(()=>x(!0),d);return()=>window.clearTimeout(w)}},[d]),b&&c.imageLoadingStatus!=="loaded"?e.jsx(J.span,{...i,ref:t}):null});je.displayName=ve;function ne(r,t){return r?t?(r.src!==t&&(r.src=t),r.complete&&r.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ps(r,{referrerPolicy:t,crossOrigin:s}){const d=hs(),i=o.useRef(null),c=d?(i.current||(i.current=new window.Image),i.current):null,[b,x]=o.useState(()=>ne(c,r));return X(()=>{x(ne(c,r))},[c,r]),X(()=>{const w=R=>()=>{x(R)};if(!c)return;const h=w("loaded"),A=w("error");return c.addEventListener("load",h),c.addEventListener("error",A),t&&(c.referrerPolicy=t),typeof s=="string"&&(c.crossOrigin=s),()=>{c.removeEventListener("load",h),c.removeEventListener("error",A)}},[c,s,t]),b}var Se=ge,Ne=xe,be=je;const Pe=o.forwardRef(({className:r,...t},s)=>e.jsx(Se,{ref:s,className:Z("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...t}));Pe.displayName=Se.displayName;const ye=o.forwardRef(({className:r,...t},s)=>e.jsx(Ne,{ref:s,className:Z("aspect-square h-full w-full",r),...t}));ye.displayName=Ne.displayName;const ke=o.forwardRef(({className:r,...t},s)=>e.jsx(be,{ref:s,className:Z("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...t}));ke.displayName=be.displayName;function xs({open:r,onOpenChange:t}){const{user:s}=ie(),{toast:d}=ce(),[i,c]=o.useState(!1),[b,x]=o.useState(!1),[w,h]=o.useState(!1),[A,R]=o.useState(!1),[ee,I]=o.useState(!1),[se,L]=o.useState(!1),[j,O]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[l,v]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),M=()=>{const u={currentPassword:"",newPassword:"",confirmPassword:""};return j.currentPassword||(u.currentPassword="كلمة المرور الحالية مطلوبة"),j.newPassword?j.newPassword.length<6&&(u.newPassword="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):u.newPassword="كلمة المرور الجديدة مطلوبة",j.confirmPassword?j.newPassword!==j.confirmPassword&&(u.confirmPassword="كلمات المرور غير متطابقة"):u.confirmPassword="تأكيد كلمة المرور مطلوب",v(u),!Object.values(u).some(m=>m!=="")},S=async u=>{if(u.preventDefault(),!(!M()||!s||!s.email)){c(!0);try{const m=Fe.credential(s.email,j.currentPassword);await Ve(s,m),L(!0),I(!0),d({title:"تأكيد الهوية",description:"أدخل الرقم السري الرئيسي لتأكيد تغيير كلمة المرور"})}catch(m){console.error("خطأ في تغيير كلمة المرور:",m);let y="حدث خطأ أثناء تغيير كلمة المرور";if(m.code==="auth/wrong-password"){v(k=>({...k,currentPassword:"كلمة المرور الحالية غير صحيحة"}));return}else if(m.code==="auth/weak-password"){v(k=>({...k,newPassword:"كلمة المرور ضعيفة جداً"}));return}else m.code==="auth/requires-recent-login"&&(y="يجب تسجيل الدخول مرة أخرى لتغيير كلمة المرور");d({title:"خطأ في تغيير كلمة المرور",description:y,variant:"destructive"})}finally{c(!1)}}},T=async()=>{if(s){c(!0);try{await Ge(s,j.newPassword),d({title:"تم تغيير كلمة المرور بنجاح",description:"تم تحديث كلمة المرور الخاصة بك بنجاح"}),O({currentPassword:"",newPassword:"",confirmPassword:""}),v({currentPassword:"",newPassword:"",confirmPassword:""}),I(!1),L(!1),t(!1)}catch(u){console.error("خطأ في تحديث كلمة المرور:",u);let m="حدث خطأ أثناء تغيير كلمة المرور";u.code==="auth/requires-recent-login"&&(m="انتهت جلسة المصادقة. يرجى إعادة إدخال كلمة المرور الحالية"),d({title:"خطأ في تغيير كلمة المرور",description:m,variant:"destructive"})}finally{c(!1)}}},P=u=>m=>{O(y=>({...y,[u]:m.target.value})),l[u]&&v(y=>({...y,[u]:""}))},g=()=>{O({currentPassword:"",newPassword:"",confirmPassword:""}),v({currentPassword:"",newPassword:"",confirmPassword:""}),I(!1),L(!1),t(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(le,{open:r,onOpenChange:g,children:e.jsxs(de,{className:"sm:max-w-[425px]",children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"تغيير كلمة المرور"}),e.jsx(Re,{children:"أدخل كلمة المرور الحالية وكلمة المرور الجديدة لتحديث حسابك"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"currentPassword",children:"كلمة المرور الحالية"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"currentPassword",type:b?"text":"password",value:j.currentPassword,onChange:P("currentPassword"),className:l.currentPassword?"border-red-500":"",autoComplete:"off",disabled:i}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!b),disabled:i,children:b?e.jsx(B,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]}),l.currentPassword&&e.jsx("p",{className:"text-sm text-red-500",children:l.currentPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"newPassword",children:"كلمة المرور الجديدة"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"newPassword",type:w?"text":"password",value:j.newPassword,onChange:P("newPassword"),className:l.newPassword?"border-red-500":"",autoComplete:"new-password",disabled:i}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!w),disabled:i,children:w?e.jsx(B,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]}),l.newPassword&&e.jsx("p",{className:"text-sm text-red-500",children:l.newPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور الجديدة"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"confirmPassword",type:A?"text":"password",value:j.confirmPassword,onChange:P("confirmPassword"),className:l.confirmPassword?"border-red-500":"",autoComplete:"new-password",disabled:i}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>R(!A),disabled:i,children:A?e.jsx(B,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]}),l.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:l.confirmPassword})]}),e.jsxs(Oe,{children:[e.jsx(C,{type:"button",variant:"outline",onClick:g,disabled:i,children:"إلغاء"}),e.jsxs(C,{type:"submit",disabled:i,children:[i&&e.jsx(He,{className:"mr-2 h-4 w-4 animate-spin"}),"تغيير كلمة المرور"]})]})]})]})}),e.jsx(Qe,{open:ee&&se,onOpenChange:u=>{I(u),u||L(!1)},mode:"verify",title:"التحقق من الرقم السري الرئيسي",description:"لا يمكن تغيير كلمة المرور إلا بعد التحقق من الرقم السري الرئيسي",onSuccess:T,onCancel:()=>{I(!1),L(!1)}})]})}const vs="cashy.google.accessToken",js="cashy.google.email",Ss="cashy.google.expiresAt";function Ns(){try{const r=localStorage.getItem(vs),t=localStorage.getItem(js),s=localStorage.getItem(Ss),d=s?Number(s):null;return{token:r,email:t,expiresAt:d}}catch{return{token:null,email:null,expiresAt:null}}}async function bs(r,t,s){try{const d=await fetch("/user/google-backup-token",{method:"POST",headers:{"Content-Type":"application/json","X-USER-ID":r},body:JSON.stringify({email:t,refresh_token:s})}),i=await d.json().catch(()=>({}));return!!(d.ok&&(i!=null&&i.ok))}catch{return!1}}function Ls({className:r}){const{user:t,profile:s,signOut:d,updateUserProfile:i}=ie(),c=Te(),[b,x]=o.useState(!1),{isShiftActive:w}=$e(),{toast:h}=ce(),[A,R]=o.useState(!1),[ee,I]=o.useState(!1),[se,L]=o.useState(!1),[{token:j},O]=o.useState(()=>Ns()),l=typeof window<"u"?window.electronAPI:void 0,v=!!l,[M,S]=o.useState(!1),[T,P]=o.useState(!1),[g,u]=o.useState(""),[m,y]=o.useState(""),[k,$]=o.useState(0),[K,F]=o.useState(!1),[Ce,Ee]=o.useState(""),[E,Ae]=o.useState(""),[te,Ie]=o.useState(!1),U=(a,n)=>{const f=String(a||"").split(".").map(p=>parseInt(p,10)||0),N=String(n||"").split(".").map(p=>parseInt(p,10)||0);for(let p=0;p<Math.max(f.length,N.length);p++){const D=f[p]||0,V=N[p]||0;if(D>V)return 1;if(D<V)return-1}return 0};o.useEffect(()=>{if(!(!v||!l))try{l.onUpdateAvailable(a=>{var f,N;const n=String(((f=a==null?void 0:a.info)==null?void 0:f.version)||"");u(n),y(String(((N=a==null?void 0:a.info)==null?void 0:N.notes)||"")),U(n,E)>0?S(!0):S(!1)}),l.onUpdateDownloaded(a=>{var f,N;const n=String(((f=a==null?void 0:a.info)==null?void 0:f.version)||"");u(n),y(String(((N=a==null?void 0:a.info)==null?void 0:N.notes)||"")),F(!1),$(100),U(n,E)>0?S(!0):S(!1)}),l.onUpdateError(a=>{try{h({title:"فشل التحديث",description:String((a==null?void 0:a.message)||(a==null?void 0:a.code)||"تعذر التحميل"),variant:"destructive"})}catch{}}),typeof l.onUpdateProgress=="function"&&l.onUpdateProgress(a=>{const n=(a==null?void 0:a.percent)==null?0:Number(a.percent);F(!0),$(Math.max(0,Math.min(100,isNaN(n)?0:n)))}),typeof l.appVersion=="function"&&l.appVersion().then(a=>{typeof a=="string"&&Ae(a)}).catch(()=>{})}catch{}},[v,l]),o.useEffect(()=>{!v||te||k>=100&&(Ie(!0),ae())},[v,k,te]),o.useEffect(()=>{const a=Ke(n=>{const f=String((n==null?void 0:n.version)||""),p=`desktop_update_seen_${String((t==null?void 0:t.uid)||"anon")}`;let D="";try{D=localStorage.getItem(p)||""}catch{}if(f&&f!==g){if(U(f,E)>0)if(D===f)S(!1),P(!1);else{S(!0),P(!0);try{localStorage.setItem(p,f)}catch{}}else S(!1);u(f),y(String((n==null?void 0:n.notes)||""));const V=We({downloadURL_64:n==null?void 0:n.downloadURL_64,downloadURL_32:n==null?void 0:n.downloadURL_32})||"";Ee(V)}});return()=>{try{a()}catch{}}},[g,E,t==null?void 0:t.uid]);const Le=async()=>{var a;try{if(l){try{await l.checkUpdate()}catch{}P(!0),F(!0),$(0);const n=await((a=l.downloadUpdate)==null?void 0:a.call(l,Ce))??await l.downloadUpdate();if(typeof n=="string"&&n.startsWith("err:")){try{h({title:"فشل التحديث",description:n.slice(4),variant:"destructive"})}catch{}F(!1)}else if(n==="noop")try{h({title:"لا يوجد تحديث",description:"لا تتوفر نسخة أحدث حالياً."})}catch{}else if(n==="manual")try{h({title:"جارٍ تنزيل التحديث",description:"سيتم تطبيق التحديث تلقائيًا بعد اكتمال التنزيل."})}catch{}else if(n==="autoUpdater")try{h({title:"تنزيل تلقائي",description:"سيتم تطبيق التحديث تلقائياً بواسطة النظام."})}catch{}}}catch(n){try{h({title:"فشل التحديث",description:(n==null?void 0:n.message)||"حدث خطأ أثناء التنزيل",variant:"destructive"})}catch{}}},ae=async()=>{try{if(l){const a=await l.applyUpdate();if(typeof a=="string"&&a.startsWith("err:"))try{h({title:"فشل تطبيق التحديث",description:a.slice(4),variant:"destructive"})}catch{}}}catch(a){try{h({title:"فشل تطبيق التحديث",description:(a==null?void 0:a.message)||"حدث خطأ أثناء تطبيق التحديث",variant:"destructive"})}catch{}}},Ue=()=>s!=null&&s.fullName?s==null?void 0:s.fullName.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2):t.email?t.email.charAt(0).toUpperCase():"U",re=s!=null&&s.avatarId?es(s.avatarId):null;if(o.useEffect(()=>{console.log("Profile updated in ProfileIcon:",s==null?void 0:s.avatarId)},[s==null?void 0:s.avatarId]),o.useEffect(()=>{const a=async n=>{try{if(!(n!=null&&n.data)||typeof n.data!="object"||n.origin!=="https://cashy.link")return;const{type:f,email:N,refresh_token:p}=n.data||{};f==="cashy_oauth_token"&&(t!=null&&t.uid)&&N&&p&&await bs(t.uid,String(N),String(p))&&h({title:"تم ربط جوجل",description:"تم حفظ توكن النسخ الاحتياطي عبر الخادم."})}catch{}};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[t==null?void 0:t.uid]),!t)return null;const De=async()=>{try{await d()}catch(a){console.error("خطأ في تسجيل الخروج:",a)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsxs(C,{type:"button",onClick:()=>{P(!0),U(g,E)>0&&S(!0)},title:"تحديث التطبيق",className:"relative inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",variant:"ghost",children:[e.jsx(ts,{className:"w-5 h-5"}),M&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 inline-block w-2 h-2 rounded-full bg-red-500"})]}),e.jsxs(Ye,{children:[e.jsx(Xe,{asChild:!0,children:e.jsx(C,{variant:"ghost",disabled:w,title:w?"غير متاح أثناء وجود وردية كاشير نشطة":void 0,className:`relative h-8 w-8 rounded-full p-0 hover:bg-transparent focus:ring-1 focus:ring-primary focus:ring-offset-1 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed ${r}`,children:e.jsx(Pe,{className:"h-8 w-8 border border-border shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105 bg-white",children:re?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white dark:bg-neutral-900/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center scale-[2.5]",children:re.component})}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{src:t.photoURL||void 0,alt:(s==null?void 0:s.fullName)||t.email||"المستخدم",className:"object-cover"}),e.jsx(ke,{className:"bg-white text-gray-900 font-semibold text-lg border-0",children:Ue()})]})})})}),e.jsxs(Je,{className:"w-64",align:"end",forceMount:!0,children:[e.jsx(Ze,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:(s==null?void 0:s.fullName)||"المستخدم"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t.email}),(s==null?void 0:s.role)&&e.jsxs("p",{className:"text-xs leading-none text-muted-foreground",children:["الدور: ",s.role==="staff"?"مدير":s.role==="merchant"?"تاجر":"مستخدم"]})]})}),e.jsx(z,{}),e.jsxs(G,{onClick:async()=>{try{await i({showWithdrawNote:!((s==null?void 0:s.showWithdrawNote)??!0)})}catch{}},className:"cursor-pointer",children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:(s==null?void 0:s.showWithdrawNote)??!0?"إخفاء خانة ملاحظة السحب":"إظهار خانة ملاحظة السحب"})]}),e.jsx(z,{}),e.jsxs(G,{onClick:()=>c("/profile-settings"),className:"cursor-pointer",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"إعدادات البروفيل"})]}),((s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="staff")&&e.jsxs(G,{onClick:()=>c("/admin"),className:"cursor-pointer",children:[e.jsx(ss,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"لوحة الإدارة"})]}),e.jsx(z,{}),e.jsxs(G,{onClick:De,className:"cursor-pointer text-red-600 focus:text-red-600",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"تسجيل الخروج"})]})]})]})]}),v&&e.jsx(le,{open:T,onOpenChange:a=>{if(P(a),!a){const f=`desktop_update_seen_${String((t==null?void 0:t.uid)||"anon")}`;try{g&&localStorage.setItem(f,g)}catch{}S(!1)}},children:e.jsxs(de,{className:"sm:max-w-md",children:[e.jsx(ue,{children:e.jsx(fe,{children:"يوجد تحديث جديد للبرنامج"})}),e.jsx("div",{className:"text-sm",children:K?"جارٍ تنزيل التحديث...":M&&U(g,E)>0?"هل ترغب في تنزيله الآن؟":"التطبيق مُحدَّث لآخر إصدار"}),g&&e.jsxs("div",{className:"mt-2 text-xs",children:["الإصدار الجديد: ",e.jsxs("span",{className:"font-semibold",children:["v",g]})]}),E&&e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["إصدار التطبيق لديك: ",e.jsxs("span",{className:"font-semibold",children:["v",E]})]}),m&&e.jsx("div",{className:"mt-2 text-xs text-muted-foreground whitespace-pre-line",children:m}),K&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:e.jsx("div",{className:"h-2 bg-blue-600 rounded",style:{width:`${k}%`}})}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[Math.round(k),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3",children:[e.jsx(C,{variant:"outline",onClick:()=>{const n=`desktop_update_seen_${String((t==null?void 0:t.uid)||"anon")}`;try{g&&localStorage.setItem(n,g)}catch{}S(!1),P(!1)},children:"إلغاء"}),!K&&k<100&&M&&U(g,E)>0&&e.jsx(C,{className:"bg-blue-600 hover:bg-blue-700",onClick:Le,children:"بدء التنزيل"}),k>=100&&e.jsx(C,{className:"bg-green-600 hover:bg-green-700",onClick:ae,children:"تحديث الآن"})]})]})}),e.jsx(xs,{open:b,onOpenChange:x})]})}export{Is as A,Ls as P};
