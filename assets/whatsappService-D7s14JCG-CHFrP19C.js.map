{"version":3,"file":"whatsappService-D7s14JCG-CHFrP19C.js","sources":["../../assets/whatsappService-D7s14JCG.js"],"sourcesContent":["import{R as d,f as m,y as p,i as g,K as E,H as N}from\"./index-tnWDkOuX.js\";const a={phoneNumber:\"201000392539\",defaultMessage:\"مرحباً، أريد الاستفسار عن خدماتكم\",isEnabled:!0,lastUpdated:new Date},h=\"whatsapp-settings\",f=\"app-settings\",l=\"whatsapp_settings_cache\",i=async()=>{var s;try{if(!m.currentUser){try{const e=localStorage.getItem(l);if(e){const r=JSON.parse(e);return{phoneNumber:r.phoneNumber||a.phoneNumber,defaultMessage:r.defaultMessage||a.defaultMessage,isEnabled:r.isEnabled!==void 0?r.isEnabled:a.isEnabled,lastUpdated:r.lastUpdated?new Date(r.lastUpdated):a.lastUpdated}}}catch{}return a}const t=p(g,f,h),n=await E(t);if(n.exists()){const e=n.data(),r={phoneNumber:e.phoneNumber||a.phoneNumber,defaultMessage:e.defaultMessage||a.defaultMessage,isEnabled:e.isEnabled!==void 0?e.isEnabled:a.isEnabled,lastUpdated:((s=e.lastUpdated)==null?void 0:s.toDate())||a.lastUpdated};try{localStorage.setItem(l,JSON.stringify(r))}catch{}return r}else return await S(a),a}catch{try{const n=localStorage.getItem(l);if(n){const e=JSON.parse(n);return{phoneNumber:e.phoneNumber||a.phoneNumber,defaultMessage:e.defaultMessage||a.defaultMessage,isEnabled:e.isEnabled!==void 0?e.isEnabled:a.isEnabled,lastUpdated:e.lastUpdated?new Date(e.lastUpdated):a.lastUpdated}}}catch{}return a}},S=async s=>{try{const t=p(g,f,h),n={...s,lastUpdated:new Date};await N(t,n,{merge:!0});try{localStorage.setItem(l,JSON.stringify(n))}catch{}return!0}catch(t){return console.error(\"خطأ في حفظ إعدادات الواتساب:\",t),!1}},b=s=>{const t=s.replace(/\\D/g,\"\");if(t.length<10)throw new Error(\"رقم الهاتف يجب أن يحتوي على 10 أرقام على الأقل\");return t},w=s=>{try{const t=b(s);return t.length>=10&&t.length<=15}catch{return!1}},D=(s,t)=>{const n=b(s),e=encodeURIComponent(t);return`https://wa.me/${n}?text=${e}`},M=()=>{const[s,t]=d.useState(null),[n,e]=d.useState(!0),[r,c]=d.useState(null);return d.useEffect(()=>{(async()=>{try{e(!0);const o=await i();t(o),c(null)}catch(o){c(\"فشل في تحميل إعدادات الواتساب\"),console.error(o)}finally{e(!1)}})()},[]),{settings:s,loading:n,error:r,updateSettings:async u=>{try{return e(!0),await S(u)&&s?(t({...s,...u,lastUpdated:new Date}),c(null),!0):(c(\"فشل في حفظ الإعدادات\"),!1)}catch(o){return c(\"خطأ في تحديث الإعدادات\"),console.error(o),!1}finally{e(!1)}},refreshSettings:()=>i().then(t)}};export{D as c,b as f,M as u,w as v};\r\n//# sourceMappingURL=whatsappService-D7s14JCG.js.map\r\n"],"names":["h","f","l","i","s","m","e","t","p","g","n","E","S","N","w","D","d","c","o","u"],"mappings":"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"}