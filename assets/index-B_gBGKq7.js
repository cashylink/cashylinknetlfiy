const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-jZjYoDig.js","./star-BjFunOwU.js","./arrow-left-Bg8p_XH8.js","./monitor-CN9_Lutf.js","./chart-column-CMR5q3vE.js","./download-B8PMjXuP.js","./zap-38FSzyiv.js","./circle-check-big-BdOp3NER.js","./crown-CnkjJdXN.js","./SubscriptionsPage-EPggLBhi.js","./contentService-CMlf5Era.js","./calendar-CUkXbiwo.js","./sparkles-XPyifv4v.js","./AuthPage-oEdpV9EM.js","./TopUpPage-D-6RvW1H.js","./select-Bl6ugBui.js","./AdminTopupsPage-BUK68GW_.js","./AdminNotificationsPage-D76Ipn4G.js","./textarea-CEVbF0bg.js","./bell-BszxRAK4.js","./link-DU28S6Se.js","./UserRegisterPage-BV_eD2tw.js","./alert-CHvAUPGd.js","./wallet-BSoaTeXa.js","./user-plus-BcYxLmmR.js","./UserAccountSetupPage-RwlQpo5g.js","./ProtectedDashboard-ALLbIFwq.js","./profitService-nvtdNO18.js","./dollar-sign-Da4CpVmB.js","./arrow-down-left-DzS8unHE.js","./ProtectedUserDashboard-BpXbe1Kx.js","./broadcastService-STwfWqJ4.js","./MerchantDashboard-B3JBbJjF.js","./dropdown-menu-B2RzPa5I.js","./index-D-P8AyVC.js","./badge-4QOla6lR.js","./WalletsManagement-DLTliNKs.js","./progress-BgM6Z3d0.js","./WalletPrinterDialog-DYPeY7tH.js","./html2canvas.esm-BfYXEYrK.js","./printer-BhEFfqSw.js","./save-BVFgWeAc.js","./square-pen-DWEDp6rV.js","./PendingApprovalPage-Blkf_cIj.js","./freeTrialService-C6i8U9PG.js","./ProtectedAdminDashboard-CdtsL0H6.js","./ProfileIcon-DaTXZUV2.js","./switch-CVb20kPa.js","./separator-smRfrCcW.js","./refresh-cw-BMgLMLF1.js","./gift-DTonZBBD.js","./table-D1VONN2O.js","./tabs-DtaBon4N.js","./users-DGxkTdg6.js","./activity-iGmndThA.js","./pen-line-DuutGIjo.js","./ProfileSettingsPage-KxdkwGi7.js","./TransactionsPage-CXyLg4ak.js","./ReceiptModal-DzxjO9pI.js","./SimCardsAccessDialog-CkIEbKut.js","./InstallmentModal-ptt-_ci_.js","./CreditCardsDialog-BMdurprg.js","./MaintenanceDialog-R5BuAxB2.js","./SimCardsDialog-DmdMo18I.js","./alert-dialog-B8AHZMa_.js","./wifi-DPaRLvqe.js","./battery-charging-Be5OGZQW.js","./WalletAdditionPage-Plur751x.js","./building-2-Bb8vzRaU.js","./ReferralsPage-Y_Pipy7S.js","./UserDashboardPage-DGugjAJx.js"])))=>i.map(i=>d[i]);
var KV=Object.defineProperty;var fI=t=>{throw TypeError(t)};var GV=(t,e,n)=>e in t?KV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xd=(t,e,n)=>GV(t,typeof e!="symbol"?e+"":e,n),uv=(t,e,n)=>e.has(t)||fI("Cannot "+n);var ee=(t,e,n)=>(uv(t,e,"read from private field"),n?n.call(t):e.get(t)),Vt=(t,e,n)=>e.has(t)?fI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ft=(t,e,n,r)=>(uv(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),xr=(t,e,n)=>(uv(t,e,"access private method"),n);var Zf=(t,e,n,r)=>({set _(s){ft(t,e,s,n)},get _(){return ee(t,e,r)}});function QV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var mee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var QR={exports:{}},$g={},YR={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf=Symbol.for("react.element"),YV=Symbol.for("react.portal"),JV=Symbol.for("react.fragment"),XV=Symbol.for("react.strict_mode"),ZV=Symbol.for("react.profiler"),eF=Symbol.for("react.provider"),tF=Symbol.for("react.context"),nF=Symbol.for("react.forward_ref"),rF=Symbol.for("react.suspense"),sF=Symbol.for("react.memo"),iF=Symbol.for("react.lazy"),mI=Symbol.iterator;function oF(t){return t===null||typeof t!="object"?null:(t=mI&&t[mI]||t["@@iterator"],typeof t=="function"?t:null)}var JR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XR=Object.assign,ZR={};function Xu(t,e,n){this.props=t,this.context=e,this.refs=ZR,this.updater=n||JR}Xu.prototype.isReactComponent={};Xu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e1(){}e1.prototype=Xu.prototype;function D0(t,e,n){this.props=t,this.context=e,this.refs=ZR,this.updater=n||JR}var O0=D0.prototype=new e1;O0.constructor=D0;XR(O0,Xu.prototype);O0.isPureReactComponent=!0;var pI=Array.isArray,t1=Object.prototype.hasOwnProperty,L0={current:null},n1={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)t1.call(e,r)&&!n1.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:pf,type:t,key:i,ref:o,props:s,_owner:L0.current}}function aF(t,e){return{$$typeof:pf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function M0(t){return typeof t=="object"&&t!==null&&t.$$typeof===pf}function lF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gI=/\/+/g;function dv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lF(""+t.key):e.toString(36)}function zm(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pf:case YV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dv(o,0):r,pI(s)?(n="",t!=null&&(n=t.replace(gI,"$&/")+"/"),zm(s,e,n,"",function(c){return c})):s!=null&&(M0(s)&&(s=aF(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",pI(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+dv(i,a);o+=zm(i,e,n,l,s)}else if(l=oF(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+dv(i,a++),o+=zm(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function em(t,e,n){if(t==null)return t;var r=[],s=0;return zm(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zr={current:null},Wm={transition:null},uF={ReactCurrentDispatcher:zr,ReactCurrentBatchConfig:Wm,ReactCurrentOwner:L0};function s1(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:em,forEach:function(t,e,n){em(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return em(t,function(){e++}),e},toArray:function(t){return em(t,function(e){return e})||[]},only:function(t){if(!M0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Dt.Component=Xu;Dt.Fragment=JV;Dt.Profiler=ZV;Dt.PureComponent=D0;Dt.StrictMode=XV;Dt.Suspense=rF;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uF;Dt.act=s1;Dt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=XR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=L0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)t1.call(e,l)&&!n1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:pf,type:t.type,key:s,ref:i,props:r,_owner:o}};Dt.createContext=function(t){return t={$$typeof:tF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eF,_context:t},t.Consumer=t};Dt.createElement=r1;Dt.createFactory=function(t){var e=r1.bind(null,t);return e.type=t,e};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(t){return{$$typeof:nF,render:t}};Dt.isValidElement=M0;Dt.lazy=function(t){return{$$typeof:iF,_payload:{_status:-1,_result:t},_init:cF}};Dt.memo=function(t,e){return{$$typeof:sF,type:t,compare:e===void 0?null:e}};Dt.startTransition=function(t){var e=Wm.transition;Wm.transition={};try{t()}finally{Wm.transition=e}};Dt.unstable_act=s1;Dt.useCallback=function(t,e){return zr.current.useCallback(t,e)};Dt.useContext=function(t){return zr.current.useContext(t)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(t){return zr.current.useDeferredValue(t)};Dt.useEffect=function(t,e){return zr.current.useEffect(t,e)};Dt.useId=function(){return zr.current.useId()};Dt.useImperativeHandle=function(t,e,n){return zr.current.useImperativeHandle(t,e,n)};Dt.useInsertionEffect=function(t,e){return zr.current.useInsertionEffect(t,e)};Dt.useLayoutEffect=function(t,e){return zr.current.useLayoutEffect(t,e)};Dt.useMemo=function(t,e){return zr.current.useMemo(t,e)};Dt.useReducer=function(t,e,n){return zr.current.useReducer(t,e,n)};Dt.useRef=function(t){return zr.current.useRef(t)};Dt.useState=function(t){return zr.current.useState(t)};Dt.useSyncExternalStore=function(t,e,n){return zr.current.useSyncExternalStore(t,e,n)};Dt.useTransition=function(){return zr.current.useTransition()};Dt.version="18.3.1";YR.exports=Dt;var v=YR.exports;const M=GR(v),Bg=QV({__proto__:null,default:M},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dF=v,hF=Symbol.for("react.element"),fF=Symbol.for("react.fragment"),mF=Object.prototype.hasOwnProperty,pF=dF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gF={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mF.call(e,r)&&!gF.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hF,type:t,key:i,ref:o,props:s,_owner:pF.current}}$g.Fragment=fF;$g.jsx=i1;$g.jsxs=i1;QR.exports=$g;var p=QR.exports,o1={exports:{}},bs={},a1={exports:{}},l1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,K){var ie=W.length;W.push(K);e:for(;0<ie;){var le=ie-1>>>1,fe=W[le];if(0<s(fe,K))W[le]=K,W[ie]=fe,ie=le;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var K=W[0],ie=W.pop();if(ie!==K){W[0]=ie;e:for(var le=0,fe=W.length,Le=fe>>>1;le<Le;){var Pe=2*(le+1)-1,Q=W[Pe],et=Pe+1,nt=W[et];if(0>s(Q,ie))et<fe&&0>s(nt,Q)?(W[le]=nt,W[et]=ie,le=et):(W[le]=Q,W[Pe]=ie,le=Pe);else if(et<fe&&0>s(nt,ie))W[le]=nt,W[et]=ie,le=et;else break e}}return K}function s(W,K){var ie=W.sortIndex-K.sortIndex;return ie!==0?ie:W.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,m=!1,_=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=W)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function P(W){if(g=!1,S(W),!_)if(n(l)!==null)_=!0,ke(x);else{var K=n(c);K!==null&&Fe(P,K.startTime-W)}}function x(W,K){_=!1,g&&(g=!1,E(A),A=-1),m=!0;var ie=f;try{for(S(K),h=n(l);h!==null&&(!(h.expirationTime>K)||W&&!C());){var le=h.callback;if(typeof le=="function"){h.callback=null,f=h.priorityLevel;var fe=le(h.expirationTime<=K);K=t.unstable_now(),typeof fe=="function"?h.callback=fe:h===n(l)&&r(l),S(K)}else r(l);h=n(l)}if(h!==null)var Le=!0;else{var Pe=n(c);Pe!==null&&Fe(P,Pe.startTime-K),Le=!1}return Le}finally{h=null,f=ie,m=!1}}var O=!1,I=null,A=-1,R=5,N=-1;function C(){return!(t.unstable_now()-N<R)}function L(){if(I!==null){var W=t.unstable_now();N=W;var K=!0;try{K=I(!0,W)}finally{K?D():(O=!1,I=null)}}else O=!1}var D;if(typeof w=="function")D=function(){w(L)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,Ae=X.port2;X.port1.onmessage=L,D=function(){Ae.postMessage(null)}}else D=function(){b(L,0)};function ke(W){I=W,O||(O=!0,D())}function Fe(W,K){A=b(function(){W(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,ke(x))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var ie=f;f=K;try{return W()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,K){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=f;f=W;try{return K()}finally{f=ie}},t.unstable_scheduleCallback=function(W,K,ie){var le=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?le+ie:le):ie=le,W){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ie+fe,W={id:u++,callback:K,priorityLevel:W,startTime:ie,expirationTime:fe,sortIndex:-1},ie>le?(W.sortIndex=ie,e(c,W),n(l)===null&&W===n(c)&&(g?(E(A),A=-1):g=!0,Fe(P,ie-le))):(W.sortIndex=fe,e(l,W),_||m||(_=!0,ke(x))),W},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(W){var K=f;return function(){var ie=f;f=K;try{return W.apply(this,arguments)}finally{f=ie}}}})(l1);a1.exports=l1;var yF=a1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vF=v,ws=yF;function me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c1=new Set,xh={};function Ql(t,e){yu(t,e),yu(t+"Capture",e)}function yu(t,e){for(xh[t]=e,t=0;t<e.length;t++)c1.add(e[t])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aw=Object.prototype.hasOwnProperty,wF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yI={},vI={};function _F(t){return Aw.call(vI,t)?!0:Aw.call(yI,t)?!1:wF.test(t)?vI[t]=!0:(yI[t]=!0,!1)}function EF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bF(t,e,n,r){if(e===null||typeof e>"u"||EF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){br[t]=new Wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];br[e]=new Wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){br[t]=new Wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){br[t]=new Wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){br[t]=new Wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){br[t]=new Wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){br[t]=new Wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){br[t]=new Wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){br[t]=new Wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var V0=/[\-:]([a-z])/g;function F0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(V0,F0);br[e]=new Wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(V0,F0);br[e]=new Wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(V0,F0);br[e]=new Wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){br[t]=new Wr(t,1,!1,t.toLowerCase(),null,!1,!1)});br.xlinkHref=new Wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){br[t]=new Wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function j0(t,e,n,r){var s=br.hasOwnProperty(e)?br[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bF(e,n,s,r)&&(n=null),r||s===null?_F(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var oo=vF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tm=Symbol.for("react.element"),Cc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),Pw=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),$0=Symbol.for("react.forward_ref"),Rw=Symbol.for("react.suspense"),Cw=Symbol.for("react.suspense_list"),B0=Symbol.for("react.memo"),Po=Symbol.for("react.lazy"),h1=Symbol.for("react.offscreen"),wI=Symbol.iterator;function Ad(t){return t===null||typeof t!="object"?null:(t=wI&&t[wI]||t["@@iterator"],typeof t=="function"?t:null)}var Cn=Object.assign,hv;function zd(t){if(hv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hv=e&&e[1]||""}return`
`+hv+t}var fv=!1;function mv(t,e){if(!t||fv)return"";fv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zd(t):""}function SF(t){switch(t.tag){case 5:return zd(t.type);case 16:return zd("Lazy");case 13:return zd("Suspense");case 19:return zd("SuspenseList");case 0:case 2:case 15:return t=mv(t.type,!1),t;case 11:return t=mv(t.type.render,!1),t;case 1:return t=mv(t.type,!0),t;default:return""}}function kw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kc:return"Fragment";case Cc:return"Portal";case Pw:return"Profiler";case U0:return"StrictMode";case Rw:return"Suspense";case Cw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d1:return(t.displayName||"Context")+".Consumer";case u1:return(t._context.displayName||"Context")+".Provider";case $0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B0:return e=t.displayName||null,e!==null?e:kw(t.type)||"Memo";case Po:e=t._payload,t=t._init;try{return kw(t(e))}catch{}}return null}function IF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kw(e);case 8:return e===U0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TF(t){var e=f1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nm(t){t._valueTracker||(t._valueTracker=TF(t))}function m1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=f1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nw(t,e){var n=e.checked;return Cn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _I(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function p1(t,e){e=e.checked,e!=null&&j0(t,"checked",e,!1)}function Dw(t,e){p1(t,e);var n=wa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ow(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ow(t,e.type,wa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function EI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ow(t,e,n){(e!=="number"||Tp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wd=Array.isArray;function Qc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wa(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(me(91));return Cn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(me(92));if(Wd(n)){if(1<n.length)throw Error(me(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wa(n)}}function g1(t,e){var n=wa(e.value),r=wa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function SI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rm,v1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rm=rm||document.createElement("div"),rm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ah(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var th={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xF=["Webkit","ms","Moz","O"];Object.keys(th).forEach(function(t){xF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),th[e]=th[t]})});function w1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||th.hasOwnProperty(t)&&th[t]?(""+e).trim():e+"px"}function _1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=w1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var AF=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vw(t,e){if(e){if(AF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(me(62))}}function Fw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jw=null;function z0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uw=null,Yc=null,Jc=null;function II(t){if(t=vf(t)){if(typeof Uw!="function")throw Error(me(280));var e=t.stateNode;e&&(e=Kg(e),Uw(t.stateNode,t.type,e))}}function E1(t){Yc?Jc?Jc.push(t):Jc=[t]:Yc=t}function b1(){if(Yc){var t=Yc,e=Jc;if(Jc=Yc=null,II(t),e)for(t=0;t<e.length;t++)II(e[t])}}function S1(t,e){return t(e)}function I1(){}var pv=!1;function T1(t,e,n){if(pv)return t(e,n);pv=!0;try{return S1(t,e,n)}finally{pv=!1,(Yc!==null||Jc!==null)&&(I1(),b1())}}function Ph(t,e){var n=t.stateNode;if(n===null)return null;var r=Kg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(me(231,e,typeof n));return n}var $w=!1;if(Qi)try{var Pd={};Object.defineProperty(Pd,"passive",{get:function(){$w=!0}}),window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{$w=!1}function PF(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var nh=!1,xp=null,Ap=!1,Bw=null,RF={onError:function(t){nh=!0,xp=t}};function CF(t,e,n,r,s,i,o,a,l){nh=!1,xp=null,PF.apply(RF,arguments)}function kF(t,e,n,r,s,i,o,a,l){if(CF.apply(this,arguments),nh){if(nh){var c=xp;nh=!1,xp=null}else throw Error(me(198));Ap||(Ap=!0,Bw=c)}}function Yl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function x1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TI(t){if(Yl(t)!==t)throw Error(me(188))}function NF(t){var e=t.alternate;if(!e){if(e=Yl(t),e===null)throw Error(me(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return TI(s),t;if(i===r)return TI(s),e;i=i.sibling}throw Error(me(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(me(189))}}if(n.alternate!==r)throw Error(me(190))}if(n.tag!==3)throw Error(me(188));return n.stateNode.current===n?t:e}function A1(t){return t=NF(t),t!==null?P1(t):null}function P1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P1(t);if(e!==null)return e;t=t.sibling}return null}var R1=ws.unstable_scheduleCallback,xI=ws.unstable_cancelCallback,DF=ws.unstable_shouldYield,OF=ws.unstable_requestPaint,Un=ws.unstable_now,LF=ws.unstable_getCurrentPriorityLevel,W0=ws.unstable_ImmediatePriority,C1=ws.unstable_UserBlockingPriority,Pp=ws.unstable_NormalPriority,MF=ws.unstable_LowPriority,k1=ws.unstable_IdlePriority,zg=null,_i=null;function VF(t){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(zg,t,void 0,(t.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:UF,FF=Math.log,jF=Math.LN2;function UF(t){return t>>>=0,t===0?32:31-(FF(t)/jF|0)|0}var sm=64,im=4194304;function qd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=qd(a):(i&=o,i!==0&&(r=qd(i)))}else o=n&~s,o!==0?r=qd(o):i!==0&&(r=qd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zs(e),s=1<<n,r|=t[n],e&=~s;return r}function $F(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=$F(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function zw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function N1(){var t=sm;return sm<<=1,!(sm&4194240)&&(sm=64),t}function gv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zs(e),t[e]=n}function zF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function q0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Zt=0;function D1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var O1,H0,L1,M1,V1,Ww=!1,om=[],ta=null,na=null,ra=null,Rh=new Map,Ch=new Map,No=[],WF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AI(t,e){switch(t){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":Rh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ch.delete(e.pointerId)}}function Rd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vf(e),e!==null&&H0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function qF(t,e,n,r,s){switch(e){case"focusin":return ta=Rd(ta,t,e,n,r,s),!0;case"dragenter":return na=Rd(na,t,e,n,r,s),!0;case"mouseover":return ra=Rd(ra,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Rh.set(i,Rd(Rh.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ch.set(i,Rd(Ch.get(i)||null,t,e,n,r,s)),!0}return!1}function F1(t){var e=dl(t.target);if(e!==null){var n=Yl(e);if(n!==null){if(e=n.tag,e===13){if(e=x1(n),e!==null){t.blockedOn=e,V1(t.priority,function(){L1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jw=r,n.target.dispatchEvent(r),jw=null}else return e=vf(n),e!==null&&H0(e),t.blockedOn=n,!1;e.shift()}return!0}function PI(t,e,n){qm(t)&&n.delete(e)}function HF(){Ww=!1,ta!==null&&qm(ta)&&(ta=null),na!==null&&qm(na)&&(na=null),ra!==null&&qm(ra)&&(ra=null),Rh.forEach(PI),Ch.forEach(PI)}function Cd(t,e){t.blockedOn===e&&(t.blockedOn=null,Ww||(Ww=!0,ws.unstable_scheduleCallback(ws.unstable_NormalPriority,HF)))}function kh(t){function e(s){return Cd(s,t)}if(0<om.length){Cd(om[0],t);for(var n=1;n<om.length;n++){var r=om[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ta!==null&&Cd(ta,t),na!==null&&Cd(na,t),ra!==null&&Cd(ra,t),Rh.forEach(e),Ch.forEach(e),n=0;n<No.length;n++)r=No[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<No.length&&(n=No[0],n.blockedOn===null);)F1(n),n.blockedOn===null&&No.shift()}var Xc=oo.ReactCurrentBatchConfig,Cp=!0;function KF(t,e,n,r){var s=Zt,i=Xc.transition;Xc.transition=null;try{Zt=1,K0(t,e,n,r)}finally{Zt=s,Xc.transition=i}}function GF(t,e,n,r){var s=Zt,i=Xc.transition;Xc.transition=null;try{Zt=4,K0(t,e,n,r)}finally{Zt=s,Xc.transition=i}}function K0(t,e,n,r){if(Cp){var s=qw(t,e,n,r);if(s===null)xv(t,e,r,kp,n),AI(t,r);else if(qF(s,t,e,n,r))r.stopPropagation();else if(AI(t,r),e&4&&-1<WF.indexOf(t)){for(;s!==null;){var i=vf(s);if(i!==null&&O1(i),i=qw(t,e,n,r),i===null&&xv(t,e,r,kp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xv(t,e,r,null,n)}}var kp=null;function qw(t,e,n,r){if(kp=null,t=z0(r),t=dl(t),t!==null)if(e=Yl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=x1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kp=t,null}function j1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LF()){case W0:return 1;case C1:return 4;case Pp:case MF:return 16;case k1:return 536870912;default:return 16}default:return 16}}var Ko=null,G0=null,Hm=null;function U1(){if(Hm)return Hm;var t,e=G0,n=e.length,r,s="value"in Ko?Ko.value:Ko.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Hm=s.slice(t,1<r?1-r:void 0)}function Km(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function am(){return!0}function RI(){return!1}function Ss(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?am:RI,this.isPropagationStopped=RI,this}return Cn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=am)},persist:function(){},isPersistent:am}),e}var Zu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Q0=Ss(Zu),yf=Cn({},Zu,{view:0,detail:0}),QF=Ss(yf),yv,vv,kd,Wg=Cn({},yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kd&&(kd&&t.type==="mousemove"?(yv=t.screenX-kd.screenX,vv=t.screenY-kd.screenY):vv=yv=0,kd=t),yv)},movementY:function(t){return"movementY"in t?t.movementY:vv}}),CI=Ss(Wg),YF=Cn({},Wg,{dataTransfer:0}),JF=Ss(YF),XF=Cn({},yf,{relatedTarget:0}),wv=Ss(XF),ZF=Cn({},Zu,{animationName:0,elapsedTime:0,pseudoElement:0}),ej=Ss(ZF),tj=Cn({},Zu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nj=Ss(tj),rj=Cn({},Zu,{data:0}),kI=Ss(rj),sj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ij={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oj[t])?!!e[t]:!1}function Y0(){return aj}var lj=Cn({},yf,{key:function(t){if(t.key){var e=sj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Km(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ij[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y0,charCode:function(t){return t.type==="keypress"?Km(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Km(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cj=Ss(lj),uj=Cn({},Wg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NI=Ss(uj),dj=Cn({},yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y0}),hj=Ss(dj),fj=Cn({},Zu,{propertyName:0,elapsedTime:0,pseudoElement:0}),mj=Ss(fj),pj=Cn({},Wg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gj=Ss(pj),yj=[9,13,27,32],J0=Qi&&"CompositionEvent"in window,rh=null;Qi&&"documentMode"in document&&(rh=document.documentMode);var vj=Qi&&"TextEvent"in window&&!rh,$1=Qi&&(!J0||rh&&8<rh&&11>=rh),DI=" ",OI=!1;function B1(t,e){switch(t){case"keyup":return yj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nc=!1;function wj(t,e){switch(t){case"compositionend":return z1(e);case"keypress":return e.which!==32?null:(OI=!0,DI);case"textInput":return t=e.data,t===DI&&OI?null:t;default:return null}}function _j(t,e){if(Nc)return t==="compositionend"||!J0&&B1(t,e)?(t=U1(),Hm=G0=Ko=null,Nc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $1&&e.locale!=="ko"?null:e.data;default:return null}}var Ej={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ej[t.type]:e==="textarea"}function W1(t,e,n,r){E1(r),e=Np(e,"onChange"),0<e.length&&(n=new Q0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sh=null,Nh=null;function bj(t){tC(t,0)}function qg(t){var e=Lc(t);if(m1(e))return t}function Sj(t,e){if(t==="change")return e}var q1=!1;if(Qi){var _v;if(Qi){var Ev="oninput"in document;if(!Ev){var MI=document.createElement("div");MI.setAttribute("oninput","return;"),Ev=typeof MI.oninput=="function"}_v=Ev}else _v=!1;q1=_v&&(!document.documentMode||9<document.documentMode)}function VI(){sh&&(sh.detachEvent("onpropertychange",H1),Nh=sh=null)}function H1(t){if(t.propertyName==="value"&&qg(Nh)){var e=[];W1(e,Nh,t,z0(t)),T1(bj,e)}}function Ij(t,e,n){t==="focusin"?(VI(),sh=e,Nh=n,sh.attachEvent("onpropertychange",H1)):t==="focusout"&&VI()}function Tj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qg(Nh)}function xj(t,e){if(t==="click")return qg(e)}function Aj(t,e){if(t==="input"||t==="change")return qg(e)}function Pj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ks=typeof Object.is=="function"?Object.is:Pj;function Dh(t,e){if(Ks(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Aw.call(e,s)||!Ks(t[s],e[s]))return!1}return!0}function FI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jI(t,e){var n=FI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=FI(n)}}function K1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?K1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function G1(){for(var t=window,e=Tp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tp(t.document)}return e}function X0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rj(t){var e=G1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&K1(n.ownerDocument.documentElement,n)){if(r!==null&&X0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=jI(n,i);var o=jI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cj=Qi&&"documentMode"in document&&11>=document.documentMode,Dc=null,Hw=null,ih=null,Kw=!1;function UI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kw||Dc==null||Dc!==Tp(r)||(r=Dc,"selectionStart"in r&&X0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ih&&Dh(ih,r)||(ih=r,r=Np(Hw,"onSelect"),0<r.length&&(e=new Q0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Dc)))}function lm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oc={animationend:lm("Animation","AnimationEnd"),animationiteration:lm("Animation","AnimationIteration"),animationstart:lm("Animation","AnimationStart"),transitionend:lm("Transition","TransitionEnd")},bv={},Q1={};Qi&&(Q1=document.createElement("div").style,"AnimationEvent"in window||(delete Oc.animationend.animation,delete Oc.animationiteration.animation,delete Oc.animationstart.animation),"TransitionEvent"in window||delete Oc.transitionend.transition);function Hg(t){if(bv[t])return bv[t];if(!Oc[t])return t;var e=Oc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Q1)return bv[t]=e[n];return t}var Y1=Hg("animationend"),J1=Hg("animationiteration"),X1=Hg("animationstart"),Z1=Hg("transitionend"),eC=new Map,$I="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Na(t,e){eC.set(t,e),Ql(e,[t])}for(var Sv=0;Sv<$I.length;Sv++){var Iv=$I[Sv],kj=Iv.toLowerCase(),Nj=Iv[0].toUpperCase()+Iv.slice(1);Na(kj,"on"+Nj)}Na(Y1,"onAnimationEnd");Na(J1,"onAnimationIteration");Na(X1,"onAnimationStart");Na("dblclick","onDoubleClick");Na("focusin","onFocus");Na("focusout","onBlur");Na(Z1,"onTransitionEnd");yu("onMouseEnter",["mouseout","mouseover"]);yu("onMouseLeave",["mouseout","mouseover"]);yu("onPointerEnter",["pointerout","pointerover"]);yu("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hd));function BI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kF(r,e,void 0,t),t.currentTarget=null}function tC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;BI(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;BI(s,a,c),i=l}}}if(Ap)throw t=Bw,Ap=!1,Bw=null,t}function fn(t,e){var n=e[Xw];n===void 0&&(n=e[Xw]=new Set);var r=t+"__bubble";n.has(r)||(nC(e,t,2,!1),n.add(r))}function Tv(t,e,n){var r=0;e&&(r|=4),nC(n,t,r,e)}var cm="_reactListening"+Math.random().toString(36).slice(2);function Oh(t){if(!t[cm]){t[cm]=!0,c1.forEach(function(n){n!=="selectionchange"&&(Dj.has(n)||Tv(n,!1,t),Tv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cm]||(e[cm]=!0,Tv("selectionchange",!1,e))}}function nC(t,e,n,r){switch(j1(e)){case 1:var s=KF;break;case 4:s=GF;break;default:s=K0}n=s.bind(null,e,n,t),s=void 0,!$w||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=dl(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}T1(function(){var c=i,u=z0(n),h=[];e:{var f=eC.get(t);if(f!==void 0){var m=Q0,_=t;switch(t){case"keypress":if(Km(n)===0)break e;case"keydown":case"keyup":m=cj;break;case"focusin":_="focus",m=wv;break;case"focusout":_="blur",m=wv;break;case"beforeblur":case"afterblur":m=wv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=CI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=JF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hj;break;case Y1:case J1:case X1:m=ej;break;case Z1:m=mj;break;case"scroll":m=QF;break;case"wheel":m=gj;break;case"copy":case"cut":case"paste":m=nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=NI}var g=(e&4)!==0,b=!g&&t==="scroll",E=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,S;w!==null;){S=w;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,E!==null&&(P=Ph(w,E),P!=null&&g.push(Lh(w,P,S)))),b)break;w=w.return}0<g.length&&(f=new m(f,_,null,n,u),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==jw&&(_=n.relatedTarget||n.fromElement)&&(dl(_)||_[Yi]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?dl(_):null,_!==null&&(b=Yl(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(g=CI,P="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=NI,P="onPointerLeave",E="onPointerEnter",w="pointer"),b=m==null?f:Lc(m),S=_==null?f:Lc(_),f=new g(P,w+"leave",m,n,u),f.target=b,f.relatedTarget=S,P=null,dl(u)===c&&(g=new g(E,w+"enter",_,n,u),g.target=S,g.relatedTarget=b,P=g),b=P,m&&_)t:{for(g=m,E=_,w=0,S=g;S;S=dc(S))w++;for(S=0,P=E;P;P=dc(P))S++;for(;0<w-S;)g=dc(g),w--;for(;0<S-w;)E=dc(E),S--;for(;w--;){if(g===E||E!==null&&g===E.alternate)break t;g=dc(g),E=dc(E)}g=null}else g=null;m!==null&&zI(h,f,m,g,!1),_!==null&&b!==null&&zI(h,b,_,g,!0)}}e:{if(f=c?Lc(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var x=Sj;else if(LI(f))if(q1)x=Aj;else{x=Tj;var O=Ij}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=xj);if(x&&(x=x(t,c))){W1(h,x,n,u);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Ow(f,"number",f.value)}switch(O=c?Lc(c):window,t){case"focusin":(LI(O)||O.contentEditable==="true")&&(Dc=O,Hw=c,ih=null);break;case"focusout":ih=Hw=Dc=null;break;case"mousedown":Kw=!0;break;case"contextmenu":case"mouseup":case"dragend":Kw=!1,UI(h,n,u);break;case"selectionchange":if(Cj)break;case"keydown":case"keyup":UI(h,n,u)}var I;if(J0)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Nc?B1(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&($1&&n.locale!=="ko"&&(Nc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Nc&&(I=U1()):(Ko=u,G0="value"in Ko?Ko.value:Ko.textContent,Nc=!0)),O=Np(c,A),0<O.length&&(A=new kI(A,t,null,n,u),h.push({event:A,listeners:O}),I?A.data=I:(I=z1(n),I!==null&&(A.data=I)))),(I=vj?wj(t,n):_j(t,n))&&(c=Np(c,"onBeforeInput"),0<c.length&&(u=new kI("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=I))}tC(h,e)})}function Lh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Np(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ph(t,n),i!=null&&r.unshift(Lh(t,i,s)),i=Ph(t,e),i!=null&&r.push(Lh(t,i,s))),t=t.return}return r}function dc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zI(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ph(n,i),l!=null&&o.unshift(Lh(n,l,a))):s||(l=Ph(n,i),l!=null&&o.push(Lh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Oj=/\r\n?/g,Lj=/\u0000|\uFFFD/g;function WI(t){return(typeof t=="string"?t:""+t).replace(Oj,`
`).replace(Lj,"")}function um(t,e,n){if(e=WI(e),WI(t)!==e&&n)throw Error(me(425))}function Dp(){}var Gw=null,Qw=null;function Yw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jw=typeof setTimeout=="function"?setTimeout:void 0,Mj=typeof clearTimeout=="function"?clearTimeout:void 0,qI=typeof Promise=="function"?Promise:void 0,Vj=typeof queueMicrotask=="function"?queueMicrotask:typeof qI<"u"?function(t){return qI.resolve(null).then(t).catch(Fj)}:Jw;function Fj(t){setTimeout(function(){throw t})}function Av(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),kh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);kh(e)}function sa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ed=Math.random().toString(36).slice(2),mi="__reactFiber$"+ed,Mh="__reactProps$"+ed,Yi="__reactContainer$"+ed,Xw="__reactEvents$"+ed,jj="__reactListeners$"+ed,Uj="__reactHandles$"+ed;function dl(t){var e=t[mi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yi]||n[mi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HI(t);t!==null;){if(n=t[mi])return n;t=HI(t)}return e}t=n,n=t.parentNode}return null}function vf(t){return t=t[mi]||t[Yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(me(33))}function Kg(t){return t[Mh]||null}var Zw=[],Mc=-1;function Da(t){return{current:t}}function yn(t){0>Mc||(t.current=Zw[Mc],Zw[Mc]=null,Mc--)}function un(t,e){Mc++,Zw[Mc]=t.current,t.current=e}var _a={},Lr=Da(_a),rs=Da(!1),Rl=_a;function vu(t,e){var n=t.type.contextTypes;if(!n)return _a;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ss(t){return t=t.childContextTypes,t!=null}function Op(){yn(rs),yn(Lr)}function KI(t,e,n){if(Lr.current!==_a)throw Error(me(168));un(Lr,e),un(rs,n)}function rC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(me(108,IF(t)||"Unknown",s));return Cn({},n,r)}function Lp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_a,Rl=Lr.current,un(Lr,t),un(rs,rs.current),!0}function GI(t,e,n){var r=t.stateNode;if(!r)throw Error(me(169));n?(t=rC(t,e,Rl),r.__reactInternalMemoizedMergedChildContext=t,yn(rs),yn(Lr),un(Lr,t)):yn(rs),un(rs,n)}var Vi=null,Gg=!1,Pv=!1;function sC(t){Vi===null?Vi=[t]:Vi.push(t)}function $j(t){Gg=!0,sC(t)}function Oa(){if(!Pv&&Vi!==null){Pv=!0;var t=0,e=Zt;try{var n=Vi;for(Zt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vi=null,Gg=!1}catch(s){throw Vi!==null&&(Vi=Vi.slice(t+1)),R1(W0,Oa),s}finally{Zt=e,Pv=!1}}return null}var Vc=[],Fc=0,Mp=null,Vp=0,Ts=[],xs=0,Cl=null,Ui=1,$i="";function Ya(t,e){Vc[Fc++]=Vp,Vc[Fc++]=Mp,Mp=t,Vp=e}function iC(t,e,n){Ts[xs++]=Ui,Ts[xs++]=$i,Ts[xs++]=Cl,Cl=t;var r=Ui;t=$i;var s=32-zs(r)-1;r&=~(1<<s),n+=1;var i=32-zs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ui=1<<32-zs(e)+s|n<<s|r,$i=i+t}else Ui=1<<i|n<<s|r,$i=t}function Z0(t){t.return!==null&&(Ya(t,1),iC(t,1,0))}function eE(t){for(;t===Mp;)Mp=Vc[--Fc],Vc[Fc]=null,Vp=Vc[--Fc],Vc[Fc]=null;for(;t===Cl;)Cl=Ts[--xs],Ts[xs]=null,$i=Ts[--xs],Ts[xs]=null,Ui=Ts[--xs],Ts[xs]=null}var ps=null,fs=null,bn=!1,$s=null;function oC(t,e){var n=As(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function QI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ps=t,fs=sa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ps=t,fs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cl!==null?{id:Ui,overflow:$i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=As(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ps=t,fs=null,!0):!1;default:return!1}}function e_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function t_(t){if(bn){var e=fs;if(e){var n=e;if(!QI(t,e)){if(e_(t))throw Error(me(418));e=sa(n.nextSibling);var r=ps;e&&QI(t,e)?oC(r,n):(t.flags=t.flags&-4097|2,bn=!1,ps=t)}}else{if(e_(t))throw Error(me(418));t.flags=t.flags&-4097|2,bn=!1,ps=t}}}function YI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ps=t}function dm(t){if(t!==ps)return!1;if(!bn)return YI(t),bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yw(t.type,t.memoizedProps)),e&&(e=fs)){if(e_(t))throw aC(),Error(me(418));for(;e;)oC(t,e),e=sa(e.nextSibling)}if(YI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fs=sa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fs=null}}else fs=ps?sa(t.stateNode.nextSibling):null;return!0}function aC(){for(var t=fs;t;)t=sa(t.nextSibling)}function wu(){fs=ps=null,bn=!1}function tE(t){$s===null?$s=[t]:$s.push(t)}var Bj=oo.ReactCurrentBatchConfig;function Nd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(me(309));var r=n.stateNode}if(!r)throw Error(me(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(me(284));if(!n._owner)throw Error(me(290,t))}return t}function hm(t,e){throw t=Object.prototype.toString.call(e),Error(me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function JI(t){var e=t._init;return e(t._payload)}function lC(t){function e(E,w){if(t){var S=E.deletions;S===null?(E.deletions=[w],E.flags|=16):S.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=la(E,w),E.index=0,E.sibling=null,E}function i(E,w,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<w?(E.flags|=2,w):S):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,S,P){return w===null||w.tag!==6?(w=Lv(S,E.mode,P),w.return=E,w):(w=s(w,S),w.return=E,w)}function l(E,w,S,P){var x=S.type;return x===kc?u(E,w,S.props.children,P,S.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Po&&JI(x)===w.type)?(P=s(w,S.props),P.ref=Nd(E,w,S),P.return=E,P):(P=ep(S.type,S.key,S.props,null,E.mode,P),P.ref=Nd(E,w,S),P.return=E,P)}function c(E,w,S,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Mv(S,E.mode,P),w.return=E,w):(w=s(w,S.children||[]),w.return=E,w)}function u(E,w,S,P,x){return w===null||w.tag!==7?(w=bl(S,E.mode,P,x),w.return=E,w):(w=s(w,S),w.return=E,w)}function h(E,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Lv(""+w,E.mode,S),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tm:return S=ep(w.type,w.key,w.props,null,E.mode,S),S.ref=Nd(E,null,w),S.return=E,S;case Cc:return w=Mv(w,E.mode,S),w.return=E,w;case Po:var P=w._init;return h(E,P(w._payload),S)}if(Wd(w)||Ad(w))return w=bl(w,E.mode,S,null),w.return=E,w;hm(E,w)}return null}function f(E,w,S,P){var x=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return x!==null?null:a(E,w,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tm:return S.key===x?l(E,w,S,P):null;case Cc:return S.key===x?c(E,w,S,P):null;case Po:return x=S._init,f(E,w,x(S._payload),P)}if(Wd(S)||Ad(S))return x!==null?null:u(E,w,S,P,null);hm(E,S)}return null}function m(E,w,S,P,x){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(S)||null,a(w,E,""+P,x);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case tm:return E=E.get(P.key===null?S:P.key)||null,l(w,E,P,x);case Cc:return E=E.get(P.key===null?S:P.key)||null,c(w,E,P,x);case Po:var O=P._init;return m(E,w,S,O(P._payload),x)}if(Wd(P)||Ad(P))return E=E.get(S)||null,u(w,E,P,x,null);hm(w,P)}return null}function _(E,w,S,P){for(var x=null,O=null,I=w,A=w=0,R=null;I!==null&&A<S.length;A++){I.index>A?(R=I,I=null):R=I.sibling;var N=f(E,I,S[A],P);if(N===null){I===null&&(I=R);break}t&&I&&N.alternate===null&&e(E,I),w=i(N,w,A),O===null?x=N:O.sibling=N,O=N,I=R}if(A===S.length)return n(E,I),bn&&Ya(E,A),x;if(I===null){for(;A<S.length;A++)I=h(E,S[A],P),I!==null&&(w=i(I,w,A),O===null?x=I:O.sibling=I,O=I);return bn&&Ya(E,A),x}for(I=r(E,I);A<S.length;A++)R=m(I,E,A,S[A],P),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?A:R.key),w=i(R,w,A),O===null?x=R:O.sibling=R,O=R);return t&&I.forEach(function(C){return e(E,C)}),bn&&Ya(E,A),x}function g(E,w,S,P){var x=Ad(S);if(typeof x!="function")throw Error(me(150));if(S=x.call(S),S==null)throw Error(me(151));for(var O=x=null,I=w,A=w=0,R=null,N=S.next();I!==null&&!N.done;A++,N=S.next()){I.index>A?(R=I,I=null):R=I.sibling;var C=f(E,I,N.value,P);if(C===null){I===null&&(I=R);break}t&&I&&C.alternate===null&&e(E,I),w=i(C,w,A),O===null?x=C:O.sibling=C,O=C,I=R}if(N.done)return n(E,I),bn&&Ya(E,A),x;if(I===null){for(;!N.done;A++,N=S.next())N=h(E,N.value,P),N!==null&&(w=i(N,w,A),O===null?x=N:O.sibling=N,O=N);return bn&&Ya(E,A),x}for(I=r(E,I);!N.done;A++,N=S.next())N=m(I,E,A,N.value,P),N!==null&&(t&&N.alternate!==null&&I.delete(N.key===null?A:N.key),w=i(N,w,A),O===null?x=N:O.sibling=N,O=N);return t&&I.forEach(function(L){return e(E,L)}),bn&&Ya(E,A),x}function b(E,w,S,P){if(typeof S=="object"&&S!==null&&S.type===kc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case tm:e:{for(var x=S.key,O=w;O!==null;){if(O.key===x){if(x=S.type,x===kc){if(O.tag===7){n(E,O.sibling),w=s(O,S.props.children),w.return=E,E=w;break e}}else if(O.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Po&&JI(x)===O.type){n(E,O.sibling),w=s(O,S.props),w.ref=Nd(E,O,S),w.return=E,E=w;break e}n(E,O);break}else e(E,O);O=O.sibling}S.type===kc?(w=bl(S.props.children,E.mode,P,S.key),w.return=E,E=w):(P=ep(S.type,S.key,S.props,null,E.mode,P),P.ref=Nd(E,w,S),P.return=E,E=P)}return o(E);case Cc:e:{for(O=S.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(E,w.sibling),w=s(w,S.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Mv(S,E.mode,P),w.return=E,E=w}return o(E);case Po:return O=S._init,b(E,w,O(S._payload),P)}if(Wd(S))return _(E,w,S,P);if(Ad(S))return g(E,w,S,P);hm(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,S),w.return=E,E=w):(n(E,w),w=Lv(S,E.mode,P),w.return=E,E=w),o(E)):n(E,w)}return b}var _u=lC(!0),cC=lC(!1),Fp=Da(null),jp=null,jc=null,nE=null;function rE(){nE=jc=jp=null}function sE(t){var e=Fp.current;yn(Fp),t._currentValue=e}function n_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zc(t,e){jp=t,nE=jc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xr=!0),t.firstContext=null)}function ks(t){var e=t._currentValue;if(nE!==t)if(t={context:t,memoizedValue:e,next:null},jc===null){if(jp===null)throw Error(me(308));jc=t,jp.dependencies={lanes:0,firstContext:t}}else jc=jc.next=t;return e}var hl=null;function iE(t){hl===null?hl=[t]:hl.push(t)}function uC(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,iE(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ji(t,r)}function Ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ro=!1;function oE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ia(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Bt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ji(t,n)}return s=r.interleaved,s===null?(e.next=e,iE(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ji(t,n)}function Gm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,q0(t,n)}}function XI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Up(t,e,n,r){var s=t.updateQueue;Ro=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,g=a;switch(f=e,m=n,g.tag){case 1:if(_=g.payload,typeof _=="function"){h=_.call(m,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,f=typeof _=="function"?_.call(m,h,f):_,f==null)break e;h=Cn({},h,f);break e;case 2:Ro=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Nl|=o,t.lanes=o,t.memoizedState=h}}function ZI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(me(191,s));s.call(r)}}}var wf={},Ei=Da(wf),Vh=Da(wf),Fh=Da(wf);function fl(t){if(t===wf)throw Error(me(174));return t}function aE(t,e){switch(un(Fh,e),un(Vh,t),un(Ei,wf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mw(e,t)}yn(Ei),un(Ei,e)}function Eu(){yn(Ei),yn(Vh),yn(Fh)}function hC(t){fl(Fh.current);var e=fl(Ei.current),n=Mw(e,t.type);e!==n&&(un(Vh,t),un(Ei,n))}function lE(t){Vh.current===t&&(yn(Ei),yn(Vh))}var Pn=Da(0);function $p(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rv=[];function cE(){for(var t=0;t<Rv.length;t++)Rv[t]._workInProgressVersionPrimary=null;Rv.length=0}var Qm=oo.ReactCurrentDispatcher,Cv=oo.ReactCurrentBatchConfig,kl=0,Rn=null,tr=null,fr=null,Bp=!1,oh=!1,jh=0,zj=0;function Ar(){throw Error(me(321))}function uE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ks(t[n],e[n]))return!1;return!0}function dE(t,e,n,r,s,i){if(kl=i,Rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qm.current=t===null||t.memoizedState===null?Kj:Gj,t=n(r,s),oh){i=0;do{if(oh=!1,jh=0,25<=i)throw Error(me(301));i+=1,fr=tr=null,e.updateQueue=null,Qm.current=Qj,t=n(r,s)}while(oh)}if(Qm.current=zp,e=tr!==null&&tr.next!==null,kl=0,fr=tr=Rn=null,Bp=!1,e)throw Error(me(300));return t}function hE(){var t=jh!==0;return jh=0,t}function li(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Rn.memoizedState=fr=t:fr=fr.next=t,fr}function Ns(){if(tr===null){var t=Rn.alternate;t=t!==null?t.memoizedState:null}else t=tr.next;var e=fr===null?Rn.memoizedState:fr.next;if(e!==null)fr=e,tr=t;else{if(t===null)throw Error(me(310));tr=t,t={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},fr===null?Rn.memoizedState=fr=t:fr=fr.next=t}return fr}function Uh(t,e){return typeof e=="function"?e(t):e}function kv(t){var e=Ns(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=tr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((kl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Rn.lanes|=u,Nl|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Ks(r,e.memoizedState)||(Xr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Rn.lanes|=i,Nl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nv(t){var e=Ns(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ks(i,e.memoizedState)||(Xr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fC(){}function mC(t,e){var n=Rn,r=Ns(),s=e(),i=!Ks(r.memoizedState,s);if(i&&(r.memoizedState=s,Xr=!0),r=r.queue,fE(yC.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,$h(9,gC.bind(null,n,r,s,e),void 0,null),pr===null)throw Error(me(349));kl&30||pC(n,e,s)}return s}function pC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gC(t,e,n,r){e.value=n,e.getSnapshot=r,vC(e)&&wC(t)}function yC(t,e,n){return n(function(){vC(e)&&wC(t)})}function vC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ks(t,n)}catch{return!0}}function wC(t){var e=Ji(t,1);e!==null&&Ws(e,t,1,-1)}function eT(t){var e=li();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:t},e.queue=t,t=t.dispatch=Hj.bind(null,Rn,t),[e.memoizedState,t]}function $h(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _C(){return Ns().memoizedState}function Ym(t,e,n,r){var s=li();Rn.flags|=t,s.memoizedState=$h(1|e,n,void 0,r===void 0?null:r)}function Qg(t,e,n,r){var s=Ns();r=r===void 0?null:r;var i=void 0;if(tr!==null){var o=tr.memoizedState;if(i=o.destroy,r!==null&&uE(r,o.deps)){s.memoizedState=$h(e,n,i,r);return}}Rn.flags|=t,s.memoizedState=$h(1|e,n,i,r)}function tT(t,e){return Ym(8390656,8,t,e)}function fE(t,e){return Qg(2048,8,t,e)}function EC(t,e){return Qg(4,2,t,e)}function bC(t,e){return Qg(4,4,t,e)}function SC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IC(t,e,n){return n=n!=null?n.concat([t]):null,Qg(4,4,SC.bind(null,e,t),n)}function mE(){}function TC(t,e){var n=Ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xC(t,e){var n=Ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function AC(t,e,n){return kl&21?(Ks(n,e)||(n=N1(),Rn.lanes|=n,Nl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xr=!0),t.memoizedState=n)}function Wj(t,e){var n=Zt;Zt=n!==0&&4>n?n:4,t(!0);var r=Cv.transition;Cv.transition={};try{t(!1),e()}finally{Zt=n,Cv.transition=r}}function PC(){return Ns().memoizedState}function qj(t,e,n){var r=aa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},RC(t))CC(e,n);else if(n=uC(t,e,n,r),n!==null){var s=Br();Ws(n,t,r,s),kC(n,e,r)}}function Hj(t,e,n){var r=aa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(RC(t))CC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ks(a,o)){var l=e.interleaved;l===null?(s.next=s,iE(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=uC(t,e,s,r),n!==null&&(s=Br(),Ws(n,t,r,s),kC(n,e,r))}}function RC(t){var e=t.alternate;return t===Rn||e!==null&&e===Rn}function CC(t,e){oh=Bp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,q0(t,n)}}var zp={readContext:ks,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},Kj={readContext:ks,useCallback:function(t,e){return li().memoizedState=[t,e===void 0?null:e],t},useContext:ks,useEffect:tT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ym(4194308,4,SC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ym(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ym(4,2,t,e)},useMemo:function(t,e){var n=li();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=li();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qj.bind(null,Rn,t),[r.memoizedState,t]},useRef:function(t){var e=li();return t={current:t},e.memoizedState=t},useState:eT,useDebugValue:mE,useDeferredValue:function(t){return li().memoizedState=t},useTransition:function(){var t=eT(!1),e=t[0];return t=Wj.bind(null,t[1]),li().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Rn,s=li();if(bn){if(n===void 0)throw Error(me(407));n=n()}else{if(n=e(),pr===null)throw Error(me(349));kl&30||pC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tT(yC.bind(null,r,i,t),[t]),r.flags|=2048,$h(9,gC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=li(),e=pr.identifierPrefix;if(bn){var n=$i,r=Ui;n=(r&~(1<<32-zs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gj={readContext:ks,useCallback:TC,useContext:ks,useEffect:fE,useImperativeHandle:IC,useInsertionEffect:EC,useLayoutEffect:bC,useMemo:xC,useReducer:kv,useRef:_C,useState:function(){return kv(Uh)},useDebugValue:mE,useDeferredValue:function(t){var e=Ns();return AC(e,tr.memoizedState,t)},useTransition:function(){var t=kv(Uh)[0],e=Ns().memoizedState;return[t,e]},useMutableSource:fC,useSyncExternalStore:mC,useId:PC,unstable_isNewReconciler:!1},Qj={readContext:ks,useCallback:TC,useContext:ks,useEffect:fE,useImperativeHandle:IC,useInsertionEffect:EC,useLayoutEffect:bC,useMemo:xC,useReducer:Nv,useRef:_C,useState:function(){return Nv(Uh)},useDebugValue:mE,useDeferredValue:function(t){var e=Ns();return tr===null?e.memoizedState=t:AC(e,tr.memoizedState,t)},useTransition:function(){var t=Nv(Uh)[0],e=Ns().memoizedState;return[t,e]},useMutableSource:fC,useSyncExternalStore:mC,useId:PC,unstable_isNewReconciler:!1};function Ms(t,e){if(t&&t.defaultProps){e=Cn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function r_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yg={isMounted:function(t){return(t=t._reactInternals)?Yl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Br(),s=aa(t),i=Hi(r,s);i.payload=e,n!=null&&(i.callback=n),e=ia(t,i,s),e!==null&&(Ws(e,t,s,r),Gm(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Br(),s=aa(t),i=Hi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ia(t,i,s),e!==null&&(Ws(e,t,s,r),Gm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Br(),r=aa(t),s=Hi(n,r);s.tag=2,e!=null&&(s.callback=e),e=ia(t,s,r),e!==null&&(Ws(e,t,r,n),Gm(e,t,r))}};function nT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Dh(n,r)||!Dh(s,i):!0}function NC(t,e,n){var r=!1,s=_a,i=e.contextType;return typeof i=="object"&&i!==null?i=ks(i):(s=ss(e)?Rl:Lr.current,r=e.contextTypes,i=(r=r!=null)?vu(t,s):_a),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yg.enqueueReplaceState(e,e.state,null)}function s_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},oE(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ks(i):(i=ss(e)?Rl:Lr.current,s.context=vu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(r_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Yg.enqueueReplaceState(s,s.state,null),Up(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bu(t,e){try{var n="",r=e;do n+=SF(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Dv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function i_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yj=typeof WeakMap=="function"?WeakMap:Map;function DC(t,e,n){n=Hi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qp||(qp=!0,p_=r),i_(t,e)},n}function OC(t,e,n){n=Hi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){i_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){i_(t,e),typeof r!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uU.bind(null,t,e,n),e.then(t,t))}function iT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hi(-1,1),e.tag=2,ia(n,e,1))),n.lanes|=1),t)}var Jj=oo.ReactCurrentOwner,Xr=!1;function jr(t,e,n,r){e.child=t===null?cC(e,null,n,r):_u(e,t.child,n,r)}function aT(t,e,n,r,s){n=n.render;var i=e.ref;return Zc(e,s),r=dE(t,e,n,r,i,s),n=hE(),t!==null&&!Xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xi(t,e,s)):(bn&&n&&Z0(e),e.flags|=1,jr(t,e,r,s),e.child)}function lT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!bE(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,LC(t,e,i,r,s)):(t=ep(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Dh,n(o,r)&&t.ref===e.ref)return Xi(t,e,s)}return e.flags|=1,t=la(i,r),t.ref=e.ref,t.return=e,e.child=t}function LC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Dh(i,r)&&t.ref===e.ref)if(Xr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xr=!0);else return e.lanes=t.lanes,Xi(t,e,s)}return o_(t,e,n,r,s)}function MC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un($c,cs),cs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,un($c,cs),cs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,un($c,cs),cs|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,un($c,cs),cs|=r;return jr(t,e,s,n),e.child}function VC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function o_(t,e,n,r,s){var i=ss(n)?Rl:Lr.current;return i=vu(e,i),Zc(e,s),n=dE(t,e,n,r,i,s),r=hE(),t!==null&&!Xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xi(t,e,s)):(bn&&r&&Z0(e),e.flags|=1,jr(t,e,n,s),e.child)}function cT(t,e,n,r,s){if(ss(n)){var i=!0;Lp(e)}else i=!1;if(Zc(e,s),e.stateNode===null)Jm(t,e),NC(e,n,r),s_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ks(c):(c=ss(n)?Rl:Lr.current,c=vu(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&rT(e,o,r,c),Ro=!1;var f=e.memoizedState;o.state=f,Up(e,r,o,s),l=e.memoizedState,a!==r||f!==l||rs.current||Ro?(typeof u=="function"&&(r_(e,n,u,r),l=e.memoizedState),(a=Ro||nT(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ms(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ks(l):(l=ss(n)?Rl:Lr.current,l=vu(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&rT(e,o,r,l),Ro=!1,f=e.memoizedState,o.state=f,Up(e,r,o,s);var _=e.memoizedState;a!==h||f!==_||rs.current||Ro?(typeof m=="function"&&(r_(e,n,m,r),_=e.memoizedState),(c=Ro||nT(e,n,c,r,f,_,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return a_(t,e,n,r,i,s)}function a_(t,e,n,r,s,i){VC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&GI(e,n,!1),Xi(t,e,i);r=e.stateNode,Jj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_u(e,t.child,null,i),e.child=_u(e,null,a,i)):jr(t,e,a,i),e.memoizedState=r.state,s&&GI(e,n,!0),e.child}function FC(t){var e=t.stateNode;e.pendingContext?KI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&KI(t,e.context,!1),aE(t,e.containerInfo)}function uT(t,e,n,r,s){return wu(),tE(s),e.flags|=256,jr(t,e,n,r),e.child}var l_={dehydrated:null,treeContext:null,retryLane:0};function c_(t){return{baseLanes:t,cachePool:null,transitions:null}}function jC(t,e,n){var r=e.pendingProps,s=Pn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),un(Pn,s&1),t===null)return t_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zg(o,r,0,null),t=bl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=c_(n),e.memoizedState=l_,t):pE(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Xj(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=la(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=la(a,i):(i=bl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?c_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=l_,r}return i=t.child,t=i.sibling,r=la(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pE(t,e){return e=Zg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fm(t,e,n,r){return r!==null&&tE(r),_u(e,t.child,null,n),t=pE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xj(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Dv(Error(me(422))),fm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zg({mode:"visible",children:r.children},s,0,null),i=bl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_u(e,t.child,null,o),e.child.memoizedState=c_(o),e.memoizedState=l_,i);if(!(e.mode&1))return fm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(me(419)),r=Dv(i,r,void 0),fm(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xr||a){if(r=pr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ji(t,s),Ws(r,t,s,-1))}return EE(),r=Dv(Error(me(421))),fm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dU.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fs=sa(s.nextSibling),ps=e,bn=!0,$s=null,t!==null&&(Ts[xs++]=Ui,Ts[xs++]=$i,Ts[xs++]=Cl,Ui=t.id,$i=t.overflow,Cl=e),e=pE(e,r.children),e.flags|=4096,e)}function dT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),n_(t.return,e,n)}function Ov(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function UC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(jr(t,e,r.children,n),r=Pn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dT(t,n,e);else if(t.tag===19)dT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(un(Pn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$p(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ov(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$p(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ov(e,!0,n,null,i);break;case"together":Ov(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,n=la(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=la(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Zj(t,e,n){switch(e.tag){case 3:FC(e),wu();break;case 5:hC(e);break;case 1:ss(e.type)&&Lp(e);break;case 4:aE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;un(Fp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(Pn,Pn.current&1),e.flags|=128,null):n&e.child.childLanes?jC(t,e,n):(un(Pn,Pn.current&1),t=Xi(t,e,n),t!==null?t.sibling:null);un(Pn,Pn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return UC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),un(Pn,Pn.current),r)break;return null;case 22:case 23:return e.lanes=0,MC(t,e,n)}return Xi(t,e,n)}var $C,u_,BC,zC;$C=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};u_=function(){};BC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fl(Ei.current);var i=null;switch(n){case"input":s=Nw(t,s),r=Nw(t,r),i=[];break;case"select":s=Cn({},s,{value:void 0}),r=Cn({},r,{value:void 0}),i=[];break;case"textarea":s=Lw(t,s),r=Lw(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dp)}Vw(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xh.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&fn("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};zC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Dd(t,e){if(!bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eU(t,e,n){var r=e.pendingProps;switch(eE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(e),null;case 1:return ss(e.type)&&Op(),Pr(e),null;case 3:return r=e.stateNode,Eu(),yn(rs),yn(Lr),cE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$s!==null&&(v_($s),$s=null))),u_(t,e),Pr(e),null;case 5:lE(e);var s=fl(Fh.current);if(n=e.type,t!==null&&e.stateNode!=null)BC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(me(166));return Pr(e),null}if(t=fl(Ei.current),dm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mi]=e,r[Mh]=i,t=(e.mode&1)!==0,n){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(s=0;s<Hd.length;s++)fn(Hd[s],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":_I(r,i),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fn("invalid",r);break;case"textarea":bI(r,i),fn("invalid",r)}Vw(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&um(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&um(r.textContent,a,t),s=["children",""+a]):xh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fn("scroll",r)}switch(n){case"input":nm(r),EI(r,i,!0);break;case"textarea":nm(r),SI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Dp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mi]=e,t[Mh]=r,$C(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fw(n,r),n){case"dialog":fn("cancel",t),fn("close",t),s=r;break;case"iframe":case"object":case"embed":fn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hd.length;s++)fn(Hd[s],t);s=r;break;case"source":fn("error",t),s=r;break;case"img":case"image":case"link":fn("error",t),fn("load",t),s=r;break;case"details":fn("toggle",t),s=r;break;case"input":_I(t,r),s=Nw(t,r),fn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Cn({},r,{value:void 0}),fn("invalid",t);break;case"textarea":bI(t,r),s=Lw(t,r),fn("invalid",t);break;default:s=r}Vw(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&v1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ah(t,l):typeof l=="number"&&Ah(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&fn("scroll",t):l!=null&&j0(t,i,l,o))}switch(n){case"input":nm(t),EI(t,r,!1);break;case"textarea":nm(t),SI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wa(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Qc(t,!!r.multiple,i,!1):r.defaultValue!=null&&Qc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Dp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pr(e),null;case 6:if(t&&e.stateNode!=null)zC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(me(166));if(n=fl(Fh.current),fl(Ei.current),dm(e)){if(r=e.stateNode,n=e.memoizedProps,r[mi]=e,(i=r.nodeValue!==n)&&(t=ps,t!==null))switch(t.tag){case 3:um(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&um(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mi]=e,e.stateNode=r}return Pr(e),null;case 13:if(yn(Pn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bn&&fs!==null&&e.mode&1&&!(e.flags&128))aC(),wu(),e.flags|=98560,i=!1;else if(i=dm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(me(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(me(317));i[mi]=e}else wu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pr(e),i=!1}else $s!==null&&(v_($s),$s=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pn.current&1?rr===0&&(rr=3):EE())),e.updateQueue!==null&&(e.flags|=4),Pr(e),null);case 4:return Eu(),u_(t,e),t===null&&Oh(e.stateNode.containerInfo),Pr(e),null;case 10:return sE(e.type._context),Pr(e),null;case 17:return ss(e.type)&&Op(),Pr(e),null;case 19:if(yn(Pn),i=e.memoizedState,i===null)return Pr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Dd(i,!1);else{if(rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$p(t),o!==null){for(e.flags|=128,Dd(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return un(Pn,Pn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Un()>Su&&(e.flags|=128,r=!0,Dd(i,!1),e.lanes=4194304)}else{if(!r)if(t=$p(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Dd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!bn)return Pr(e),null}else 2*Un()-i.renderingStartTime>Su&&n!==1073741824&&(e.flags|=128,r=!0,Dd(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Un(),e.sibling=null,n=Pn.current,un(Pn,r?n&1|2:n&1),e):(Pr(e),null);case 22:case 23:return _E(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cs&1073741824&&(Pr(e),e.subtreeFlags&6&&(e.flags|=8192)):Pr(e),null;case 24:return null;case 25:return null}throw Error(me(156,e.tag))}function tU(t,e){switch(eE(e),e.tag){case 1:return ss(e.type)&&Op(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Eu(),yn(rs),yn(Lr),cE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lE(e),null;case 13:if(yn(Pn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(me(340));wu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yn(Pn),null;case 4:return Eu(),null;case 10:return sE(e.type._context),null;case 22:case 23:return _E(),null;case 24:return null;default:return null}}var mm=!1,Nr=!1,nU=typeof WeakSet=="function"?WeakSet:Set,je=null;function Uc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fn(t,e,r)}else n.current=null}function d_(t,e,n){try{n()}catch(r){Fn(t,e,r)}}var hT=!1;function rU(t,e){if(Gw=Cp,t=G1(),X0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qw={focusedElem:t,selectionRange:n},Cp=!1,je=e;je!==null;)if(e=je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,je=t;else for(;je!==null;){e=je;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var g=_.memoizedProps,b=_.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ms(e.type,g),b);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(P){Fn(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}return _=hT,hT=!1,_}function ah(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&d_(e,n,i)}s=s.next}while(s!==r)}}function Jg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function h_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WC(t){var e=t.alternate;e!==null&&(t.alternate=null,WC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mi],delete e[Mh],delete e[Xw],delete e[jj],delete e[Uj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qC(t){return t.tag===5||t.tag===3||t.tag===4}function fT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function f_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dp));else if(r!==4&&(t=t.child,t!==null))for(f_(t,e,n),t=t.sibling;t!==null;)f_(t,e,n),t=t.sibling}function m_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(m_(t,e,n),t=t.sibling;t!==null;)m_(t,e,n),t=t.sibling}var yr=null,js=!1;function yo(t,e,n){for(n=n.child;n!==null;)HC(t,e,n),n=n.sibling}function HC(t,e,n){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(zg,n)}catch{}switch(n.tag){case 5:Nr||Uc(n,e);case 6:var r=yr,s=js;yr=null,yo(t,e,n),yr=r,js=s,yr!==null&&(js?(t=yr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yr.removeChild(n.stateNode));break;case 18:yr!==null&&(js?(t=yr,n=n.stateNode,t.nodeType===8?Av(t.parentNode,n):t.nodeType===1&&Av(t,n),kh(t)):Av(yr,n.stateNode));break;case 4:r=yr,s=js,yr=n.stateNode.containerInfo,js=!0,yo(t,e,n),yr=r,js=s;break;case 0:case 11:case 14:case 15:if(!Nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&d_(n,e,o),s=s.next}while(s!==r)}yo(t,e,n);break;case 1:if(!Nr&&(Uc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fn(n,e,a)}yo(t,e,n);break;case 21:yo(t,e,n);break;case 22:n.mode&1?(Nr=(r=Nr)||n.memoizedState!==null,yo(t,e,n),Nr=r):yo(t,e,n);break;default:yo(t,e,n)}}function mT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nU),e.forEach(function(r){var s=hU.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Os(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yr=a.stateNode,js=!1;break e;case 3:yr=a.stateNode.containerInfo,js=!0;break e;case 4:yr=a.stateNode.containerInfo,js=!0;break e}a=a.return}if(yr===null)throw Error(me(160));HC(i,o,s),yr=null,js=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Fn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KC(e,t),e=e.sibling}function KC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Os(e,t),oi(t),r&4){try{ah(3,t,t.return),Jg(3,t)}catch(g){Fn(t,t.return,g)}try{ah(5,t,t.return)}catch(g){Fn(t,t.return,g)}}break;case 1:Os(e,t),oi(t),r&512&&n!==null&&Uc(n,n.return);break;case 5:if(Os(e,t),oi(t),r&512&&n!==null&&Uc(n,n.return),t.flags&32){var s=t.stateNode;try{Ah(s,"")}catch(g){Fn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&p1(s,i),Fw(a,o);var c=Fw(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?_1(s,h):u==="dangerouslySetInnerHTML"?v1(s,h):u==="children"?Ah(s,h):j0(s,u,h,c)}switch(a){case"input":Dw(s,i);break;case"textarea":g1(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Qc(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Qc(s,!!i.multiple,i.defaultValue,!0):Qc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mh]=i}catch(g){Fn(t,t.return,g)}}break;case 6:if(Os(e,t),oi(t),r&4){if(t.stateNode===null)throw Error(me(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Fn(t,t.return,g)}}break;case 3:if(Os(e,t),oi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kh(e.containerInfo)}catch(g){Fn(t,t.return,g)}break;case 4:Os(e,t),oi(t);break;case 13:Os(e,t),oi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vE=Un())),r&4&&mT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Nr=(c=Nr)||u,Os(e,t),Nr=c):Os(e,t),oi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(je=t,u=t.child;u!==null;){for(h=je=u;je!==null;){switch(f=je,m=f.child,f.tag){case 0:case 11:case 14:case 15:ah(4,f,f.return);break;case 1:Uc(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(g){Fn(r,n,g)}}break;case 5:Uc(f,f.return);break;case 22:if(f.memoizedState!==null){gT(h);continue}}m!==null?(m.return=f,je=m):gT(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=w1("display",o))}catch(g){Fn(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Fn(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Os(e,t),oi(t),r&4&&mT(t);break;case 21:break;default:Os(e,t),oi(t)}}function oi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qC(n)){var r=n;break e}n=n.return}throw Error(me(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ah(s,""),r.flags&=-33);var i=fT(t);m_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fT(t);f_(t,a,o);break;default:throw Error(me(161))}}catch(l){Fn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sU(t,e,n){je=t,GC(t)}function GC(t,e,n){for(var r=(t.mode&1)!==0;je!==null;){var s=je,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Nr;a=mm;var c=Nr;if(mm=o,(Nr=l)&&!c)for(je=s;je!==null;)o=je,l=o.child,o.tag===22&&o.memoizedState!==null?yT(s):l!==null?(l.return=o,je=l):yT(s);for(;i!==null;)je=i,GC(i),i=i.sibling;je=s,mm=a,Nr=c}pT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,je=i):pT(t)}}function pT(t){for(;je!==null;){var e=je;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nr||Jg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ms(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ZI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ZI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&kh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}Nr||e.flags&512&&h_(e)}catch(f){Fn(e,e.return,f)}}if(e===t){je=null;break}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}}function gT(t){for(;je!==null;){var e=je;if(e===t){je=null;break}var n=e.sibling;if(n!==null){n.return=e.return,je=n;break}je=e.return}}function yT(t){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jg(4,e)}catch(l){Fn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Fn(e,s,l)}}var i=e.return;try{h_(e)}catch(l){Fn(e,i,l)}break;case 5:var o=e.return;try{h_(e)}catch(l){Fn(e,o,l)}}}catch(l){Fn(e,e.return,l)}if(e===t){je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,je=a;break}je=e.return}}var iU=Math.ceil,Wp=oo.ReactCurrentDispatcher,gE=oo.ReactCurrentOwner,Rs=oo.ReactCurrentBatchConfig,Bt=0,pr=null,Kn=null,Er=0,cs=0,$c=Da(0),rr=0,Bh=null,Nl=0,Xg=0,yE=0,lh=null,Qr=null,vE=0,Su=1/0,Mi=null,qp=!1,p_=null,oa=null,pm=!1,Go=null,Hp=0,ch=0,g_=null,Xm=-1,Zm=0;function Br(){return Bt&6?Un():Xm!==-1?Xm:Xm=Un()}function aa(t){return t.mode&1?Bt&2&&Er!==0?Er&-Er:Bj.transition!==null?(Zm===0&&(Zm=N1()),Zm):(t=Zt,t!==0||(t=window.event,t=t===void 0?16:j1(t.type)),t):1}function Ws(t,e,n,r){if(50<ch)throw ch=0,g_=null,Error(me(185));gf(t,n,r),(!(Bt&2)||t!==pr)&&(t===pr&&(!(Bt&2)&&(Xg|=n),rr===4&&Do(t,Er)),is(t,r),n===1&&Bt===0&&!(e.mode&1)&&(Su=Un()+500,Gg&&Oa()))}function is(t,e){var n=t.callbackNode;BF(t,e);var r=Rp(t,t===pr?Er:0);if(r===0)n!==null&&xI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xI(n),e===1)t.tag===0?$j(vT.bind(null,t)):sC(vT.bind(null,t)),Vj(function(){!(Bt&6)&&Oa()}),n=null;else{switch(D1(r)){case 1:n=W0;break;case 4:n=C1;break;case 16:n=Pp;break;case 536870912:n=k1;break;default:n=Pp}n=nk(n,QC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QC(t,e){if(Xm=-1,Zm=0,Bt&6)throw Error(me(327));var n=t.callbackNode;if(eu()&&t.callbackNode!==n)return null;var r=Rp(t,t===pr?Er:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kp(t,r);else{e=r;var s=Bt;Bt|=2;var i=JC();(pr!==t||Er!==e)&&(Mi=null,Su=Un()+500,El(t,e));do try{lU();break}catch(a){YC(t,a)}while(!0);rE(),Wp.current=i,Bt=s,Kn!==null?e=0:(pr=null,Er=0,e=rr)}if(e!==0){if(e===2&&(s=zw(t),s!==0&&(r=s,e=y_(t,s))),e===1)throw n=Bh,El(t,0),Do(t,r),is(t,Un()),n;if(e===6)Do(t,r);else{if(s=t.current.alternate,!(r&30)&&!oU(s)&&(e=Kp(t,r),e===2&&(i=zw(t),i!==0&&(r=i,e=y_(t,i))),e===1))throw n=Bh,El(t,0),Do(t,r),is(t,Un()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(me(345));case 2:Ja(t,Qr,Mi);break;case 3:if(Do(t,r),(r&130023424)===r&&(e=vE+500-Un(),10<e)){if(Rp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Br(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jw(Ja.bind(null,t,Qr,Mi),e);break}Ja(t,Qr,Mi);break;case 4:if(Do(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iU(r/1960))-r,10<r){t.timeoutHandle=Jw(Ja.bind(null,t,Qr,Mi),r);break}Ja(t,Qr,Mi);break;case 5:Ja(t,Qr,Mi);break;default:throw Error(me(329))}}}return is(t,Un()),t.callbackNode===n?QC.bind(null,t):null}function y_(t,e){var n=lh;return t.current.memoizedState.isDehydrated&&(El(t,e).flags|=256),t=Kp(t,e),t!==2&&(e=Qr,Qr=n,e!==null&&v_(e)),t}function v_(t){Qr===null?Qr=t:Qr.push.apply(Qr,t)}function oU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ks(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Do(t,e){for(e&=~yE,e&=~Xg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zs(e),r=1<<n;t[n]=-1,e&=~r}}function vT(t){if(Bt&6)throw Error(me(327));eu();var e=Rp(t,0);if(!(e&1))return is(t,Un()),null;var n=Kp(t,e);if(t.tag!==0&&n===2){var r=zw(t);r!==0&&(e=r,n=y_(t,r))}if(n===1)throw n=Bh,El(t,0),Do(t,e),is(t,Un()),n;if(n===6)throw Error(me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ja(t,Qr,Mi),is(t,Un()),null}function wE(t,e){var n=Bt;Bt|=1;try{return t(e)}finally{Bt=n,Bt===0&&(Su=Un()+500,Gg&&Oa())}}function Dl(t){Go!==null&&Go.tag===0&&!(Bt&6)&&eu();var e=Bt;Bt|=1;var n=Rs.transition,r=Zt;try{if(Rs.transition=null,Zt=1,t)return t()}finally{Zt=r,Rs.transition=n,Bt=e,!(Bt&6)&&Oa()}}function _E(){cs=$c.current,yn($c)}function El(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mj(n)),Kn!==null)for(n=Kn.return;n!==null;){var r=n;switch(eE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Op();break;case 3:Eu(),yn(rs),yn(Lr),cE();break;case 5:lE(r);break;case 4:Eu();break;case 13:yn(Pn);break;case 19:yn(Pn);break;case 10:sE(r.type._context);break;case 22:case 23:_E()}n=n.return}if(pr=t,Kn=t=la(t.current,null),Er=cs=e,rr=0,Bh=null,yE=Xg=Nl=0,Qr=lh=null,hl!==null){for(e=0;e<hl.length;e++)if(n=hl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}hl=null}return t}function YC(t,e){do{var n=Kn;try{if(rE(),Qm.current=zp,Bp){for(var r=Rn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bp=!1}if(kl=0,fr=tr=Rn=null,oh=!1,jh=0,gE.current=null,n===null||n.return===null){rr=1,Bh=e,Kn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Er,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=iT(o);if(m!==null){m.flags&=-257,oT(m,o,a,i,e),m.mode&1&&sT(i,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var g=new Set;g.add(l),e.updateQueue=g}else _.add(l);break e}else{if(!(e&1)){sT(i,c,e),EE();break e}l=Error(me(426))}}else if(bn&&a.mode&1){var b=iT(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),oT(b,o,a,i,e),tE(bu(l,a));break e}}i=l=bu(l,a),rr!==4&&(rr=2),lh===null?lh=[i]:lh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=DC(i,l,e);XI(i,E);break e;case 1:a=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(oa===null||!oa.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=OC(i,a,e);XI(i,P);break e}}i=i.return}while(i!==null)}ZC(n)}catch(x){e=x,Kn===n&&n!==null&&(Kn=n=n.return);continue}break}while(!0)}function JC(){var t=Wp.current;return Wp.current=zp,t===null?zp:t}function EE(){(rr===0||rr===3||rr===2)&&(rr=4),pr===null||!(Nl&268435455)&&!(Xg&268435455)||Do(pr,Er)}function Kp(t,e){var n=Bt;Bt|=2;var r=JC();(pr!==t||Er!==e)&&(Mi=null,El(t,e));do try{aU();break}catch(s){YC(t,s)}while(!0);if(rE(),Bt=n,Wp.current=r,Kn!==null)throw Error(me(261));return pr=null,Er=0,rr}function aU(){for(;Kn!==null;)XC(Kn)}function lU(){for(;Kn!==null&&!DF();)XC(Kn)}function XC(t){var e=tk(t.alternate,t,cs);t.memoizedProps=t.pendingProps,e===null?ZC(t):Kn=e,gE.current=null}function ZC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tU(n,e),n!==null){n.flags&=32767,Kn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rr=6,Kn=null;return}}else if(n=eU(n,e,cs),n!==null){Kn=n;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=t}while(e!==null);rr===0&&(rr=5)}function Ja(t,e,n){var r=Zt,s=Rs.transition;try{Rs.transition=null,Zt=1,cU(t,e,n,r)}finally{Rs.transition=s,Zt=r}return null}function cU(t,e,n,r){do eu();while(Go!==null);if(Bt&6)throw Error(me(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(me(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(zF(t,i),t===pr&&(Kn=pr=null,Er=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pm||(pm=!0,nk(Pp,function(){return eu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rs.transition,Rs.transition=null;var o=Zt;Zt=1;var a=Bt;Bt|=4,gE.current=null,rU(t,n),KC(n,t),Rj(Qw),Cp=!!Gw,Qw=Gw=null,t.current=n,sU(n),OF(),Bt=a,Zt=o,Rs.transition=i}else t.current=n;if(pm&&(pm=!1,Go=t,Hp=s),i=t.pendingLanes,i===0&&(oa=null),VF(n.stateNode),is(t,Un()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qp)throw qp=!1,t=p_,p_=null,t;return Hp&1&&t.tag!==0&&eu(),i=t.pendingLanes,i&1?t===g_?ch++:(ch=0,g_=t):ch=0,Oa(),null}function eu(){if(Go!==null){var t=D1(Hp),e=Rs.transition,n=Zt;try{if(Rs.transition=null,Zt=16>t?16:t,Go===null)var r=!1;else{if(t=Go,Go=null,Hp=0,Bt&6)throw Error(me(331));var s=Bt;for(Bt|=4,je=t.current;je!==null;){var i=je,o=i.child;if(je.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(je=c;je!==null;){var u=je;switch(u.tag){case 0:case 11:case 15:ah(8,u,i)}var h=u.child;if(h!==null)h.return=u,je=h;else for(;je!==null;){u=je;var f=u.sibling,m=u.return;if(WC(u),u===c){je=null;break}if(f!==null){f.return=m,je=f;break}je=m}}}var _=i.alternate;if(_!==null){var g=_.child;if(g!==null){_.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}je=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,je=o;else e:for(;je!==null;){if(i=je,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ah(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,je=E;break e}je=i.return}}var w=t.current;for(je=w;je!==null;){o=je;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,je=S;else e:for(o=w;je!==null;){if(a=je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jg(9,a)}}catch(x){Fn(a,a.return,x)}if(a===o){je=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,je=P;break e}je=a.return}}if(Bt=s,Oa(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(zg,t)}catch{}r=!0}return r}finally{Zt=n,Rs.transition=e}}return!1}function wT(t,e,n){e=bu(n,e),e=DC(t,e,1),t=ia(t,e,1),e=Br(),t!==null&&(gf(t,1,e),is(t,e))}function Fn(t,e,n){if(t.tag===3)wT(t,t,n);else for(;e!==null;){if(e.tag===3){wT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oa===null||!oa.has(r))){t=bu(n,t),t=OC(e,t,1),e=ia(e,t,1),t=Br(),e!==null&&(gf(e,1,t),is(e,t));break}}e=e.return}}function uU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Br(),t.pingedLanes|=t.suspendedLanes&n,pr===t&&(Er&n)===n&&(rr===4||rr===3&&(Er&130023424)===Er&&500>Un()-vE?El(t,0):yE|=n),is(t,e)}function ek(t,e){e===0&&(t.mode&1?(e=im,im<<=1,!(im&130023424)&&(im=4194304)):e=1);var n=Br();t=Ji(t,e),t!==null&&(gf(t,e,n),is(t,n))}function dU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ek(t,n)}function hU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(me(314))}r!==null&&r.delete(e),ek(t,n)}var tk;tk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rs.current)Xr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xr=!1,Zj(t,e,n);Xr=!!(t.flags&131072)}else Xr=!1,bn&&e.flags&1048576&&iC(e,Vp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jm(t,e),t=e.pendingProps;var s=vu(e,Lr.current);Zc(e,n),s=dE(null,e,r,t,s,n);var i=hE();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ss(r)?(i=!0,Lp(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,oE(e),s.updater=Yg,e.stateNode=s,s._reactInternals=e,s_(e,r,t,n),e=a_(null,e,r,!0,i,n)):(e.tag=0,bn&&i&&Z0(e),jr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jm(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mU(r),t=Ms(r,t),s){case 0:e=o_(null,e,r,t,n);break e;case 1:e=cT(null,e,r,t,n);break e;case 11:e=aT(null,e,r,t,n);break e;case 14:e=lT(null,e,r,Ms(r.type,t),n);break e}throw Error(me(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),o_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),cT(t,e,r,s,n);case 3:e:{if(FC(e),t===null)throw Error(me(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dC(t,e),Up(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bu(Error(me(423)),e),e=uT(t,e,r,n,s);break e}else if(r!==s){s=bu(Error(me(424)),e),e=uT(t,e,r,n,s);break e}else for(fs=sa(e.stateNode.containerInfo.firstChild),ps=e,bn=!0,$s=null,n=cC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wu(),r===s){e=Xi(t,e,n);break e}jr(t,e,r,n)}e=e.child}return e;case 5:return hC(e),t===null&&t_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yw(r,s)?o=null:i!==null&&Yw(r,i)&&(e.flags|=32),VC(t,e),jr(t,e,o,n),e.child;case 6:return t===null&&t_(e),null;case 13:return jC(t,e,n);case 4:return aE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_u(e,null,r,n):jr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),aT(t,e,r,s,n);case 7:return jr(t,e,e.pendingProps,n),e.child;case 8:return jr(t,e,e.pendingProps.children,n),e.child;case 12:return jr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,un(Fp,r._currentValue),r._currentValue=o,i!==null)if(Ks(i.value,o)){if(i.children===s.children&&!rs.current){e=Xi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Hi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),n_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(me(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),n_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Zc(e,n),s=ks(s),r=r(s),e.flags|=1,jr(t,e,r,n),e.child;case 14:return r=e.type,s=Ms(r,e.pendingProps),s=Ms(r.type,s),lT(t,e,r,s,n);case 15:return LC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ms(r,s),Jm(t,e),e.tag=1,ss(r)?(t=!0,Lp(e)):t=!1,Zc(e,n),NC(e,r,s),s_(e,r,s,n),a_(null,e,r,!0,t,n);case 19:return UC(t,e,n);case 22:return MC(t,e,n)}throw Error(me(156,e.tag))};function nk(t,e){return R1(t,e)}function fU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(t,e,n,r){return new fU(t,e,n,r)}function bE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mU(t){if(typeof t=="function")return bE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$0)return 11;if(t===B0)return 14}return 2}function la(t,e){var n=t.alternate;return n===null?(n=As(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ep(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")bE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kc:return bl(n.children,s,i,e);case U0:o=8,s|=8;break;case Pw:return t=As(12,n,e,s|2),t.elementType=Pw,t.lanes=i,t;case Rw:return t=As(13,n,e,s),t.elementType=Rw,t.lanes=i,t;case Cw:return t=As(19,n,e,s),t.elementType=Cw,t.lanes=i,t;case h1:return Zg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u1:o=10;break e;case d1:o=9;break e;case $0:o=11;break e;case B0:o=14;break e;case Po:o=16,r=null;break e}throw Error(me(130,t==null?t:typeof t,""))}return e=As(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bl(t,e,n,r){return t=As(7,t,r,e),t.lanes=n,t}function Zg(t,e,n,r){return t=As(22,t,r,e),t.elementType=h1,t.lanes=n,t.stateNode={isHidden:!1},t}function Lv(t,e,n){return t=As(6,t,null,e),t.lanes=n,t}function Mv(t,e,n){return e=As(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pU(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gv(0),this.expirationTimes=gv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function SE(t,e,n,r,s,i,o,a,l){return t=new pU(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=As(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oE(i),t}function gU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rk(t){if(!t)return _a;t=t._reactInternals;e:{if(Yl(t)!==t||t.tag!==1)throw Error(me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(me(171))}if(t.tag===1){var n=t.type;if(ss(n))return rC(t,n,e)}return e}function sk(t,e,n,r,s,i,o,a,l){return t=SE(n,r,!0,t,s,i,o,a,l),t.context=rk(null),n=t.current,r=Br(),s=aa(n),i=Hi(r,s),i.callback=e??null,ia(n,i,s),t.current.lanes=s,gf(t,s,r),is(t,r),t}function ey(t,e,n,r){var s=e.current,i=Br(),o=aa(s);return n=rk(n),e.context===null?e.context=n:e.pendingContext=n,e=Hi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ia(s,e,o),t!==null&&(Ws(t,s,o,i),Gm(t,s,o)),o}function Gp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _T(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function IE(t,e){_T(t,e),(t=t.alternate)&&_T(t,e)}function yU(){return null}var ik=typeof reportError=="function"?reportError:function(t){console.error(t)};function TE(t){this._internalRoot=t}ty.prototype.render=TE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(me(409));ey(t,e,null,null)};ty.prototype.unmount=TE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dl(function(){ey(null,t,null,null)}),e[Yi]=null}};function ty(t){this._internalRoot=t}ty.prototype.unstable_scheduleHydration=function(t){if(t){var e=M1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<No.length&&e!==0&&e<No[n].priority;n++);No.splice(n,0,t),n===0&&F1(t)}};function xE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ny(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ET(){}function vU(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Gp(o);i.call(c)}}var o=sk(e,r,t,0,null,!1,!1,"",ET);return t._reactRootContainer=o,t[Yi]=o.current,Oh(t.nodeType===8?t.parentNode:t),Dl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Gp(l);a.call(c)}}var l=SE(t,0,!1,null,null,!1,!1,"",ET);return t._reactRootContainer=l,t[Yi]=l.current,Oh(t.nodeType===8?t.parentNode:t),Dl(function(){ey(e,l,n,r)}),l}function ry(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Gp(o);a.call(l)}}ey(e,o,t,s)}else o=vU(n,e,t,s,r);return Gp(o)}O1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qd(e.pendingLanes);n!==0&&(q0(e,n|1),is(e,Un()),!(Bt&6)&&(Su=Un()+500,Oa()))}break;case 13:Dl(function(){var r=Ji(t,1);if(r!==null){var s=Br();Ws(r,t,1,s)}}),IE(t,1)}};H0=function(t){if(t.tag===13){var e=Ji(t,134217728);if(e!==null){var n=Br();Ws(e,t,134217728,n)}IE(t,134217728)}};L1=function(t){if(t.tag===13){var e=aa(t),n=Ji(t,e);if(n!==null){var r=Br();Ws(n,t,e,r)}IE(t,e)}};M1=function(){return Zt};V1=function(t,e){var n=Zt;try{return Zt=t,e()}finally{Zt=n}};Uw=function(t,e,n){switch(e){case"input":if(Dw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Kg(r);if(!s)throw Error(me(90));m1(r),Dw(r,s)}}}break;case"textarea":g1(t,n);break;case"select":e=n.value,e!=null&&Qc(t,!!n.multiple,e,!1)}};S1=wE;I1=Dl;var wU={usingClientEntryPoint:!1,Events:[vf,Lc,Kg,E1,b1,wE]},Od={findFiberByHostInstance:dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_U={bundleType:Od.bundleType,version:Od.version,rendererPackageName:Od.rendererPackageName,rendererConfig:Od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=A1(t),t===null?null:t.stateNode},findFiberByHostInstance:Od.findFiberByHostInstance||yU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gm.isDisabled&&gm.supportsFiber)try{zg=gm.inject(_U),_i=gm}catch{}}bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wU;bs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xE(e))throw Error(me(200));return gU(t,e,null,n)};bs.createRoot=function(t,e){if(!xE(t))throw Error(me(299));var n=!1,r="",s=ik;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=SE(t,1,!1,null,null,n,!1,r,s),t[Yi]=e.current,Oh(t.nodeType===8?t.parentNode:t),new TE(e)};bs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):(t=Object.keys(t).join(","),Error(me(268,t)));return t=A1(e),t=t===null?null:t.stateNode,t};bs.flushSync=function(t){return Dl(t)};bs.hydrate=function(t,e,n){if(!ny(e))throw Error(me(200));return ry(null,t,e,!0,n)};bs.hydrateRoot=function(t,e,n){if(!xE(t))throw Error(me(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ik;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sk(e,null,t,1,n??null,s,!1,i,o),t[Yi]=e.current,Oh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ty(e)};bs.render=function(t,e,n){if(!ny(e))throw Error(me(200));return ry(null,t,e,!1,n)};bs.unmountComponentAtNode=function(t){if(!ny(t))throw Error(me(40));return t._reactRootContainer?(Dl(function(){ry(null,null,t,!1,function(){t._reactRootContainer=null,t[Yi]=null})}),!0):!1};bs.unstable_batchedUpdates=wE;bs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ny(n))throw Error(me(200));if(t==null||t._reactInternals===void 0)throw Error(me(38));return ry(t,e,n,!1,r)};bs.version="18.3.1-next-f1338f8080-20240426";function ok(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ok)}catch(t){console.error(t)}}ok(),o1.exports=bs;var _f=o1.exports;const ak=GR(_f);var lk,bT=_f;lk=bT.createRoot,bT.hydrateRoot;const EU="modulepreload",bU=function(t,e){return new URL(t,e).href},ST={},ae=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=bU(c,r),c in ST)return;ST[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const g=o[_];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":EU,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((_,g)=>{m.addEventListener("load",_),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},SU=1,IU=1e6;let Vv=0;function TU(){return Vv=(Vv+1)%Number.MAX_SAFE_INTEGER,Vv.toString()}const Fv=new Map,IT=t=>{if(Fv.has(t))return;const e=setTimeout(()=>{Fv.delete(t),uh({type:"REMOVE_TOAST",toastId:t})},IU);Fv.set(t,e)},xU=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,SU)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?IT(n):t.toasts.forEach(r=>{IT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},tp=[];let np={toasts:[]};function uh(t){np=xU(np,t),tp.forEach(e=>{e(np)})}function AU({...t}){const e=TU(),n=s=>uh({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>uh({type:"DISMISS_TOAST",toastId:e});return uh({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Jl(){const[t,e]=v.useState(np);return v.useEffect(()=>(tp.push(e),()=>{const n=tp.indexOf(e);n>-1&&tp.splice(n,1)}),[t]),{...t,toast:AU,dismiss:n=>uh({type:"DISMISS_TOAST",toastId:n})}}function cn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function TT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ef(...t){return e=>{let n=!1;const r=t.map(s=>{const i=TT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():TT(t[s],null)}}}}function Sr(...t){return v.useCallback(Ef(...t),t)}function PU(t,e){const n=v.createContext(e),r=i=>{const{children:o,...a}=i,l=v.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=v.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function td(t,e=[]){let n=[];function r(i,o){const a=v.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:m,..._}=h,g=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,b=v.useMemo(()=>_,Object.values(_));return p.jsx(g.Provider,{value:b,children:m})};c.displayName=i+"Provider";function u(h,f){var g;const m=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,_=v.useContext(m);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>v.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,RU(s,...e)]}function RU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function xT(t){const e=CU(t),n=v.forwardRef((r,s)=>{const{children:i,...o}=r,a=v.Children.toArray(i),l=a.find(NU);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return p.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function CU(t){const e=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const o=OU(s),a=DU(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var kU=Symbol("radix.slottable");function NU(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===kU}function DU(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function OU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function LU(t){const e=t+"CollectionProvider",[n,r]=td(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:E}=g,w=M.useRef(null),S=M.useRef(new Map).current;return p.jsx(s,{scope:b,itemMap:S,collectionRef:w,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=xT(a),c=M.forwardRef((g,b)=>{const{scope:E,children:w}=g,S=i(a,E),P=Sr(b,S.collectionRef);return p.jsx(l,{ref:P,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=xT(u),m=M.forwardRef((g,b)=>{const{scope:E,children:w,...S}=g,P=M.useRef(null),x=Sr(b,P),O=i(u,E);return M.useEffect(()=>(O.itemMap.set(P,{ref:P,...S}),()=>void O.itemMap.delete(P))),p.jsx(f,{[h]:"",ref:x,children:w})});m.displayName=u;function _(g){const b=i(t+"CollectionConsumer",g);return M.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((O,I)=>S.indexOf(O.ref.current)-S.indexOf(I.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},_,r]}function MU(t){const e=VU(t),n=v.forwardRef((r,s)=>{const{children:i,...o}=r,a=v.Children.toArray(i),l=a.find(jU);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return p.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function VU(t){const e=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const o=$U(s),a=UU(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var FU=Symbol("radix.slottable");function jU(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===FU}function UU(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function $U(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var BU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nn=BU.reduce((t,e)=>{const n=MU(`Primitive.${e}`),r=v.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function ck(t,e){t&&_f.flushSync(()=>t.dispatchEvent(e))}function Pi(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function zU(t,e=globalThis==null?void 0:globalThis.document){const n=Pi(t);v.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var WU="DismissableLayer",w_="dismissableLayer.update",qU="dismissableLayer.pointerDownOutside",HU="dismissableLayer.focusOutside",AT,uk=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sy=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=v.useContext(uk),[u,h]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=v.useState({}),_=Sr(e,I=>h(I)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=g.indexOf(b),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,P=w>=E,x=GU(I=>{const A=I.target,R=[...c.branches].some(N=>N.contains(A));!P||R||(s==null||s(I),o==null||o(I),I.defaultPrevented||a==null||a())},f),O=QU(I=>{const A=I.target;[...c.branches].some(N=>N.contains(A))||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},f);return zU(I=>{w===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(AT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),PT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=AT)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),PT())},[u,c]),v.useEffect(()=>{const I=()=>m({});return document.addEventListener(w_,I),()=>document.removeEventListener(w_,I)},[]),p.jsx(Nn.div,{...l,ref:_,style:{pointerEvents:S?P?"auto":"none":void 0,...t.style},onFocusCapture:cn(t.onFocusCapture,O.onFocusCapture),onBlurCapture:cn(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:cn(t.onPointerDownCapture,x.onPointerDownCapture)})});sy.displayName=WU;var KU="DismissableLayerBranch",dk=v.forwardRef((t,e)=>{const n=v.useContext(uk),r=v.useRef(null),s=Sr(e,r);return v.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(Nn.div,{...t,ref:s})});dk.displayName=KU;function GU(t,e=globalThis==null?void 0:globalThis.document){const n=Pi(t),r=v.useRef(!1),s=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){hk(qU,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function QU(t,e=globalThis==null?void 0:globalThis.document){const n=Pi(t),r=v.useRef(!1);return v.useEffect(()=>{const s=i=>{i.target&&!r.current&&hk(HU,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function PT(){const t=new CustomEvent(w_);document.dispatchEvent(t)}function hk(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?ck(s,i):s.dispatchEvent(i)}var YU=sy,JU=dk,Zi=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},XU="Portal",AE=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=v.useState(!1);Zi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ak.createPortal(p.jsx(Nn.div,{...r,ref:e}),o):null});AE.displayName=XU;function ZU(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Xl=t=>{const{present:e,children:n}=t,r=e4(e),s=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),i=Sr(r.ref,t4(s));return typeof n=="function"||r.isPresent?v.cloneElement(s,{ref:i}):null};Xl.displayName="Presence";function e4(t){const[e,n]=v.useState(),r=v.useRef(null),s=v.useRef(t),i=v.useRef("none"),o=t?"mounted":"unmounted",[a,l]=ZU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=ym(r.current);i.current=a==="mounted"?c:"none"},[a]),Zi(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,m=ym(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Zi(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=m=>{const g=ym(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=m=>{m.target===e&&(i.current=ym(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function ym(t){return(t==null?void 0:t.animationName)||"none"}function t4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var n4=Bg[" useInsertionEffect ".trim().toString()]||Zi;function PE({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=r4({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const u=v.useRef(t!==void 0);v.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=v.useCallback(u=>{var h;if(a){const f=s4(u)?u(t):u;f!==t&&((h=o.current)==null||h.call(o,f))}else i(u)},[a,t,i,o]);return[l,c]}function r4({defaultProp:t,onChange:e}){const[n,r]=v.useState(t),s=v.useRef(n),i=v.useRef(e);return n4(()=>{i.current=e},[e]),v.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function s4(t){return typeof t=="function"}var i4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),o4="VisuallyHidden",iy=v.forwardRef((t,e)=>p.jsx(Nn.span,{...t,ref:e,style:{...i4,...t.style}}));iy.displayName=o4;var a4=iy,RE="ToastProvider",[CE,l4,c4]=LU("Toast"),[fk]=td("Toast",[c4]),[u4,oy]=fk(RE),mk=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=v.useState(null),[c,u]=v.useState(0),h=v.useRef(!1),f=v.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${RE}\`. Expected non-empty \`string\`.`),p.jsx(CE.Provider,{scope:e,children:p.jsx(u4,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:v.useCallback(()=>u(m=>m+1),[]),onToastRemove:v.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};mk.displayName=RE;var pk="ToastViewport",d4=["F8"],__="toast.viewportPause",E_="toast.viewportResume",gk=v.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=d4,label:s="Notifications ({hotkey})",...i}=t,o=oy(pk,n),a=l4(n),l=v.useRef(null),c=v.useRef(null),u=v.useRef(null),h=v.useRef(null),f=Sr(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;v.useEffect(()=>{const b=E=>{var S;r.length!==0&&r.every(P=>E[P]||E.code===P)&&((S=h.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),v.useEffect(()=>{const b=l.current,E=h.current;if(_&&b&&E){const w=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(__);E.dispatchEvent(O),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(E_);E.dispatchEvent(O),o.isClosePausedRef.current=!1}},P=O=>{!b.contains(O.relatedTarget)&&S()},x=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",w),b.addEventListener("focusout",P),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",x),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",P),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",x),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[_,o.isClosePausedRef]);const g=v.useCallback(({tabbingDirection:b})=>{const w=a().map(S=>{const P=S.ref.current,x=[P,...I4(P)];return b==="forwards"?x:x.reverse()});return(b==="forwards"?w.reverse():w).flat()},[a]);return v.useEffect(()=>{const b=h.current;if(b){const E=w=>{var x,O,I;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const A=document.activeElement,R=w.shiftKey;if(w.target===b&&R){(x=c.current)==null||x.focus();return}const L=g({tabbingDirection:R?"backwards":"forwards"}),D=L.findIndex(X=>X===A);jv(L.slice(D+1))?w.preventDefault():R?(O=c.current)==null||O.focus():(I=u.current)==null||I.focus()}};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)}},[a,g]),p.jsxs(JU,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&p.jsx(b_,{ref:c,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});jv(b)}}),p.jsx(CE.Slot,{scope:n,children:p.jsx(Nn.ol,{tabIndex:-1,...i,ref:f})}),_&&p.jsx(b_,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});jv(b)}})]})});gk.displayName=pk;var yk="ToastFocusProxy",b_=v.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=oy(yk,n);return p.jsx(iy,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});b_.displayName=yk;var bf="Toast",h4="toast.swipeStart",f4="toast.swipeMove",m4="toast.swipeCancel",p4="toast.swipeEnd",vk=v.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=PE({prop:r,defaultProp:s??!0,onChange:i,caller:bf});return p.jsx(Xl,{present:n||a,children:p.jsx(v4,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Pi(t.onPause),onResume:Pi(t.onResume),onSwipeStart:cn(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:cn(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:cn(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:cn(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});vk.displayName=bf;var[g4,y4]=fk(bf,{onClose(){}}),v4=v.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,..._}=t,g=oy(bf,n),[b,E]=v.useState(null),w=Sr(e,X=>E(X)),S=v.useRef(null),P=v.useRef(null),x=s||g.duration,O=v.useRef(0),I=v.useRef(x),A=v.useRef(0),{onToastAdd:R,onToastRemove:N}=g,C=Pi(()=>{var Ae;(b==null?void 0:b.contains(document.activeElement))&&((Ae=g.viewport)==null||Ae.focus()),o()}),L=v.useCallback(X=>{!X||X===1/0||(window.clearTimeout(A.current),O.current=new Date().getTime(),A.current=window.setTimeout(C,X))},[C]);v.useEffect(()=>{const X=g.viewport;if(X){const Ae=()=>{L(I.current),c==null||c()},ke=()=>{const Fe=new Date().getTime()-O.current;I.current=I.current-Fe,window.clearTimeout(A.current),l==null||l()};return X.addEventListener(__,ke),X.addEventListener(E_,Ae),()=>{X.removeEventListener(__,ke),X.removeEventListener(E_,Ae)}}},[g.viewport,x,l,c,L]),v.useEffect(()=>{i&&!g.isClosePausedRef.current&&L(x)},[i,x,g.isClosePausedRef,L]),v.useEffect(()=>(R(),()=>N()),[R,N]);const D=v.useMemo(()=>b?Tk(b):null,[b]);return g.viewport?p.jsxs(p.Fragment,{children:[D&&p.jsx(w4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),p.jsx(g4,{scope:n,onClose:C,children:_f.createPortal(p.jsx(CE.ItemSlot,{scope:n,children:p.jsx(YU,{asChild:!0,onEscapeKeyDown:cn(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||C(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Nn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,..._,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:cn(t.onKeyDown,X=>{X.key==="Escape"&&(a==null||a(X.nativeEvent),X.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:cn(t.onPointerDown,X=>{X.button===0&&(S.current={x:X.clientX,y:X.clientY})}),onPointerMove:cn(t.onPointerMove,X=>{if(!S.current)return;const Ae=X.clientX-S.current.x,ke=X.clientY-S.current.y,Fe=!!P.current,W=["left","right"].includes(g.swipeDirection),K=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ie=W?K(0,Ae):0,le=W?0:K(0,ke),fe=X.pointerType==="touch"?10:2,Le={x:ie,y:le},Pe={originalEvent:X,delta:Le};Fe?(P.current=Le,vm(f4,h,Pe,{discrete:!1})):RT(Le,g.swipeDirection,fe)?(P.current=Le,vm(h4,u,Pe,{discrete:!1}),X.target.setPointerCapture(X.pointerId)):(Math.abs(Ae)>fe||Math.abs(ke)>fe)&&(S.current=null)}),onPointerUp:cn(t.onPointerUp,X=>{const Ae=P.current,ke=X.target;if(ke.hasPointerCapture(X.pointerId)&&ke.releasePointerCapture(X.pointerId),P.current=null,S.current=null,Ae){const Fe=X.currentTarget,W={originalEvent:X,delta:Ae};RT(Ae,g.swipeDirection,g.swipeThreshold)?vm(p4,m,W,{discrete:!0}):vm(m4,f,W,{discrete:!0}),Fe.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),w4=t=>{const{__scopeToast:e,children:n,...r}=t,s=oy(bf,e),[i,o]=v.useState(!1),[a,l]=v.useState(!1);return b4(()=>o(!0)),v.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(AE,{asChild:!0,children:p.jsx(iy,{...r,children:i&&p.jsxs(p.Fragment,{children:[s.label," ",n]})})})},_4="ToastTitle",wk=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Nn.div,{...r,ref:e})});wk.displayName=_4;var E4="ToastDescription",_k=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Nn.div,{...r,ref:e})});_k.displayName=E4;var Ek="ToastAction",bk=v.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(Ik,{altText:n,asChild:!0,children:p.jsx(kE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ek}\`. Expected non-empty \`string\`.`),null)});bk.displayName=Ek;var Sk="ToastClose",kE=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=y4(Sk,n);return p.jsx(Ik,{asChild:!0,children:p.jsx(Nn.button,{type:"button",...r,ref:e,onClick:cn(t.onClick,s.onClose)})})});kE.displayName=Sk;var Ik=v.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return p.jsx(Nn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Tk(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),S4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Tk(r))}}),e}function vm(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?ck(s,i):s.dispatchEvent(i)}var RT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function b4(t=()=>{}){const e=Pi(t);Zi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function S4(t){return t.nodeType===t.ELEMENT_NODE}function I4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function jv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var T4=mk,xk=gk,Ak=vk,Pk=wk,Rk=_k,Ck=bk,kk=kE;function Nk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Nk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Dk(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Nk(t))&&(r&&(r+=" "),r+=e);return r}const CT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,kT=Dk,NE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return kT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],h=i==null?void 0:i[c];if(u===null)return null;const f=CT(u)||CT(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(_=>{let[g,b]=_;return Array.isArray(b)?b.includes({...i,...a}[g]):{...i,...a}[g]===b})?[...c,h,f]:c},[]);return kT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),NT=t=>{const e=A4(t);return e.charAt(0).toUpperCase()+e.slice(1)},Ok=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),P4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>v.createElement("svg",{ref:l,...R4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ok("lucide",s),...!i&&!P4(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>v.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(t,e)=>{const n=v.forwardRef(({className:r,...s},i)=>v.createElement(C4,{ref:i,iconNode:e,className:Ok(`lucide-${x4(NT(t))}`,`lucide-${t}`,r),...s}));return n.displayName=NT(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],N4=Ft("arrow-down",k4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lk=Ft("arrow-right",D4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],L4=Ft("arrow-up-down",O4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],V4=Ft("badge-percent",M4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],j4=Ft("check",F4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$4=Ft("circle-alert",U4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],z4=Ft("clock",B4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],q4=Ft("credit-card",W4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dh=Ft("eye-off",H4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hh=Ft("eye",K4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Q4=Ft("file-text",G4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],J4=Ft("house",Y4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Z4=Ft("image",X4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],t3=Ft("landmark",e3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ay=Ft("lock",n3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],DT=Ft("log-out",r3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],S_=Ft("mail",s3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ic=Ft("message-circle",i3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M5 12h14",key:"1ays0h"}]],a3=Ft("minus",o3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],c3=Ft("phone",l3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],OT=Ft("plus",u3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],LT=Ft("receipt",d3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],DE=Ft("refresh-ccw",h3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],m3=Ft("send",f3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MT=Ft("settings",p3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],OE=Ft("shield",g3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],v3=Ft("smartphone",y3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],_3=Ft("square",w3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],b3=Ft("store",E3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],I3=Ft("trash-2",S3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],x3=Ft("trending-up",T3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mk=Ft("triangle-alert",A3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],R3=Ft("user",P3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],k3=Ft("wrench",C3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oo=Ft("x",N3),LE="-",D3=t=>{const e=L3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(LE);return a[0]===""&&a.length!==1&&a.shift(),Vk(a,e)||O3(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Vk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Vk(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(LE);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},VT=/^\[(.+)\]$/,O3=t=>{if(VT.test(t)){const e=VT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},L3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return V3(Object.entries(t.classGroups),n).forEach(([i,o])=>{I_(o,r,i,e)}),r},I_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:FT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(M3(s)){I_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{I_(o,FT(e,i),n,r)})})},FT=(t,e)=>{let n=t;return e.split(LE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},M3=t=>t.isThemeGetter,V3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,F3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Fk="!",j3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let E=a[b];if(c===0){if(E===s&&(r||a.slice(b,b+i)===e)){l.push(a.slice(u,b)),u=b+i;continue}if(E==="/"){h=b;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(u),m=f.startsWith(Fk),_=m?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:_,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},U3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},$3=t=>({cache:F3(t.cacheSize),parseClassName:j3(t),...D3(t)}),B3=/\s+/,z3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(B3);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let _=!!m,g=r(_?f.substring(0,m):f);if(!g){if(!_){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}_=!1}const b=U3(u).join(":"),E=h?b+Fk:b,w=E+g;if(i.includes(w))continue;i.push(w);const S=s(g,_);for(let P=0;P<S.length;++P){const x=S[P];i.push(E+x)}a=c+(a.length>0?" "+a:a)}return a};function W3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jk(e))&&(r&&(r+=" "),r+=n);return r}const jk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jk(t[r]))&&(n&&(n+=" "),n+=e);return n};function q3(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,h)=>h(u),t());return n=$3(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=z3(l,n);return s(l,u),u}return function(){return i(W3.apply(null,arguments))}}const hn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Uk=/^\[(?:([a-z-]+):)?(.+)\]$/i,H3=/^\d+\/\d+$/,K3=new Set(["px","full","screen"]),G3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Q3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Y3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,J3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,X3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oi=t=>tu(t)||K3.has(t)||H3.test(t),vo=t=>nd(t,"length",o$),tu=t=>!!t&&!Number.isNaN(Number(t)),Uv=t=>nd(t,"number",tu),Ld=t=>!!t&&Number.isInteger(Number(t)),Z3=t=>t.endsWith("%")&&tu(t.slice(0,-1)),_t=t=>Uk.test(t),wo=t=>G3.test(t),e$=new Set(["length","size","percentage"]),t$=t=>nd(t,e$,$k),n$=t=>nd(t,"position",$k),r$=new Set(["image","url"]),s$=t=>nd(t,r$,l$),i$=t=>nd(t,"",a$),Md=()=>!0,nd=(t,e,n)=>{const r=Uk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},o$=t=>Q3.test(t)&&!Y3.test(t),$k=()=>!1,a$=t=>J3.test(t),l$=t=>X3.test(t),c$=()=>{const t=hn("colors"),e=hn("spacing"),n=hn("blur"),r=hn("brightness"),s=hn("borderColor"),i=hn("borderRadius"),o=hn("borderSpacing"),a=hn("borderWidth"),l=hn("contrast"),c=hn("grayscale"),u=hn("hueRotate"),h=hn("invert"),f=hn("gap"),m=hn("gradientColorStops"),_=hn("gradientColorStopPositions"),g=hn("inset"),b=hn("margin"),E=hn("opacity"),w=hn("padding"),S=hn("saturate"),P=hn("scale"),x=hn("sepia"),O=hn("skew"),I=hn("space"),A=hn("translate"),R=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",_t,e],L=()=>[_t,e],D=()=>["",Oi,vo],X=()=>["auto",tu,_t],Ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ke=()=>["solid","dashed","dotted","double","none"],Fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",_t],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[tu,_t];return{cacheSize:500,separator:":",theme:{colors:[Md],spacing:[Oi,vo],blur:["none","",wo,_t],brightness:le(),borderColor:[t],borderRadius:["none","","full",wo,_t],borderSpacing:L(),borderWidth:D(),contrast:le(),grayscale:K(),hueRotate:le(),invert:K(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[Z3,vo],inset:C(),margin:C(),opacity:le(),padding:L(),saturate:le(),scale:le(),sepia:K(),skew:le(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",_t]}],container:["container"],columns:[{columns:[wo]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ae(),_t]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ld,_t]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_t]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Ld,_t]}],"grid-cols":[{"grid-cols":[Md]}],"col-start-end":[{col:["auto",{span:["full",Ld,_t]},_t]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[Md]}],"row-start-end":[{row:["auto",{span:[Ld,_t]},_t]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_t]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_t,e]}],"min-w":[{"min-w":[_t,e,"min","max","fit"]}],"max-w":[{"max-w":[_t,e,"none","full","min","max","fit","prose",{screen:[wo]},wo]}],h:[{h:[_t,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_t,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wo,vo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Uv]}],"font-family":[{font:[Md]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_t]}],"line-clamp":[{"line-clamp":["none",tu,Uv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Oi,_t]}],"list-image":[{"list-image":["none",_t]}],"list-style-type":[{list:["none","disc","decimal",_t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Oi,vo]}],"underline-offset":[{"underline-offset":["auto",Oi,_t]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ae(),n$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",t$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},s$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...ke(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:ke()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ke()]}],"outline-offset":[{"outline-offset":[Oi,_t]}],"outline-w":[{outline:[Oi,vo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Oi,vo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wo,i$]}],"shadow-color":[{shadow:[Md]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Fe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",wo,_t]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_t]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",_t]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",_t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Ld,_t]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_t]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Oi,vo,Uv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},u$=q3(c$);function vn(...t){return u$(Dk(t))}function pee(t){const e=Number(t)||0;return new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}const d$=T4,Bk=v.forwardRef(({className:t,...e},n)=>p.jsx(xk,{ref:n,className:vn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Bk.displayName=xk.displayName;const h$=NE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),zk=v.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(Ak,{ref:r,className:vn(h$({variant:e}),t),...n}));zk.displayName=Ak.displayName;const f$=v.forwardRef(({className:t,...e},n)=>p.jsx(Ck,{ref:n,className:vn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));f$.displayName=Ck.displayName;const Wk=v.forwardRef(({className:t,...e},n)=>p.jsx(kk,{ref:n,className:vn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(Oo,{className:"h-4 w-4"})}));Wk.displayName=kk.displayName;const qk=v.forwardRef(({className:t,...e},n)=>p.jsx(Pk,{ref:n,className:vn("text-sm font-semibold",t),...e}));qk.displayName=Pk.displayName;const Hk=v.forwardRef(({className:t,...e},n)=>p.jsx(Rk,{ref:n,className:vn("text-sm opacity-90",t),...e}));Hk.displayName=Rk.displayName;function m$(){const{toasts:t}=Jl();return p.jsxs(d$,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return p.jsxs(zk,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(qk,{children:n}),r&&p.jsx(Hk,{children:r})]}),s,p.jsx(Wk,{})]},e)}),p.jsx(Bk,{})]})}var Qp=["light","dark"],ME="(prefers-color-scheme: dark)",p$=typeof window>"u",VE=v.createContext(void 0),g$={setTheme:t=>{},themes:[]},Kk=()=>{var t;return(t=v.useContext(VE))!=null?t:g$},y$=t=>v.useContext(VE)?t.children:v.createElement(w$,{...t}),v$=["light","dark"],w$=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=v$,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u})=>{let[h,f]=v.useState(()=>jT(s,o)),[m,_]=v.useState(()=>jT(s)),g=l?Object.values(l):i,b=v.useCallback(P=>{let x=P;if(!x)return;P==="system"&&n&&(x=UT());let O=l?l[x]:x,I=e?E$():null,A=document.documentElement;if(a==="class"?(A.classList.remove(...g),O&&A.classList.add(O)):O?A.setAttribute(a,O):A.removeAttribute(a),r){let R=Qp.includes(o)?o:null,N=Qp.includes(x)?x:R;A.style.colorScheme=N}I==null||I()},[]),E=v.useCallback(P=>{let x=typeof P=="function"?P(P):P;f(x);try{localStorage.setItem(s,x)}catch{}},[t]),w=v.useCallback(P=>{let x=UT(P);_(x),h==="system"&&n&&!t&&b("system")},[h,t]);v.useEffect(()=>{let P=window.matchMedia(ME);return P.addListener(w),w(P),()=>P.removeListener(w)},[w]),v.useEffect(()=>{let P=x=>{if(x.key!==s)return;let O=x.newValue||o;E(O)};return window.addEventListener("storage",P),()=>window.removeEventListener("storage",P)},[E]),v.useEffect(()=>{b(t??h)},[t,h]);let S=v.useMemo(()=>({theme:h,setTheme:E,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,E,t,m,n,i]);return v.createElement(VE.Provider,{value:S},v.createElement(_$,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:u}),c)},_$=v.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Qp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(_,g=!1,b=!0)=>{let E=o?o[_]:_,w=g?_+"|| ''":`'${E}'`,S="";return s&&b&&!g&&Qp.includes(_)&&(S+=`d.style.colorScheme = '${_}';`),n==="class"?g||E?S+=`c.add(${w})`:S+="null":E&&(S+=`d[s](n,${w})`),S},m=t?`!function(){${u}${f(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${ME}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return v.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),jT=(t,e)=>{if(p$)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},E$=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},UT=t=>(t||(t=window.matchMedia(ME)),t.matches?"dark":"light"),b$=t=>{switch(t){case"success":return T$;case"info":return A$;case"warning":return x$;case"error":return P$;default:return null}},S$=Array(12).fill(0),I$=({visible:t,className:e})=>M.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},M.createElement("div",{className:"sonner-spinner"},S$.map((n,r)=>M.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),T$=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),x$=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),A$=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),P$=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),R$=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},M.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),M.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),C$=()=>{let[t,e]=M.useState(document.hidden);return M.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},T_=1,k$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:T_++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],M.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(D$(c)&&!c.ok){i=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:h})}else if(n.success!==void 0){i=!1;let u=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let u=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||T_++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Kr=new k$,N$=(t,e)=>{let n=(e==null?void 0:e.id)||T_++;return Kr.addToast({title:t,...e,id:n}),n},D$=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",O$=N$,L$=()=>Kr.toasts,M$=()=>Kr.getActiveToasts(),Kt=Object.assign(O$,{success:Kr.success,info:Kr.info,warning:Kr.warning,error:Kr.error,custom:Kr.custom,message:Kr.message,promise:Kr.promise,dismiss:Kr.dismiss,loading:Kr.loading},{getHistory:L$,getToasts:M$});function V$(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}V$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function wm(t){return t.label!==void 0}var F$=3,j$="32px",U$="16px",$T=4e3,$$=356,B$=14,z$=20,W$=200;function Ls(...t){return t.filter(Boolean).join(" ")}function q$(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var H$=t=>{var e,n,r,s,i,o,a,l,c,u,h;let{invert:f,toast:m,unstyled:_,interacting:g,setHeights:b,visibleToasts:E,heights:w,index:S,toasts:P,expanded:x,removeToast:O,defaultRichColors:I,closeButton:A,style:R,cancelButtonStyle:N,actionButtonStyle:C,className:L="",descriptionClassName:D="",duration:X,position:Ae,gap:ke,loadingIcon:Fe,expandByDefault:W,classNames:K,icons:ie,closeButtonAriaLabel:le="Close toast",pauseWhenPageIsHidden:fe}=t,[Le,Pe]=M.useState(null),[Q,et]=M.useState(null),[nt,Tn]=M.useState(!1),[Wn,an]=M.useState(!1),[Qn,Yn]=M.useState(!1),[Jn,qr]=M.useState(!1),[Y,ce]=M.useState(!1),[ye,Ke]=M.useState(0),[ue,Ie]=M.useState(0),Me=M.useRef(m.duration||X||$T),Ge=M.useRef(null),z=M.useRef(null),be=S===0,Ne=S+1<=E,pe=m.type,Qe=m.dismissible!==!1,st=m.className||"",We=m.descriptionClassName||"",re=M.useMemo(()=>w.findIndex(oe=>oe.toastId===m.id)||0,[w,m.id]),Ye=M.useMemo(()=>{var oe;return(oe=m.closeButton)!=null?oe:A},[m.closeButton,A]),It=M.useMemo(()=>m.duration||X||$T,[m.duration,X]),kt=M.useRef(0),On=M.useRef(0),Ir=M.useRef(0),Ln=M.useRef(null),[q,U]=Ae.split("-"),F=M.useMemo(()=>w.reduce((oe,de,he)=>he>=re?oe:oe+de.height,0),[w,re]),Z=C$(),G=m.invert||f,J=pe==="loading";On.current=M.useMemo(()=>re*ke+F,[re,F]),M.useEffect(()=>{Me.current=It},[It]),M.useEffect(()=>{Tn(!0)},[]),M.useEffect(()=>{let oe=z.current;if(oe){let de=oe.getBoundingClientRect().height;return Ie(de),b(he=>[{toastId:m.id,height:de,position:m.position},...he]),()=>b(he=>he.filter(ge=>ge.toastId!==m.id))}},[b,m.id]),M.useLayoutEffect(()=>{if(!nt)return;let oe=z.current,de=oe.style.height;oe.style.height="auto";let he=oe.getBoundingClientRect().height;oe.style.height=de,Ie(he),b(ge=>ge.find(_e=>_e.toastId===m.id)?ge.map(_e=>_e.toastId===m.id?{..._e,height:he}:_e):[{toastId:m.id,height:he,position:m.position},...ge])},[nt,m.title,m.description,b,m.id]);let ne=M.useCallback(()=>{an(!0),Ke(On.current),b(oe=>oe.filter(de=>de.toastId!==m.id)),setTimeout(()=>{O(m)},W$)},[m,O,b,On]);M.useEffect(()=>{if(m.promise&&pe==="loading"||m.duration===1/0||m.type==="loading")return;let oe;return x||g||fe&&Z?(()=>{if(Ir.current<kt.current){let de=new Date().getTime()-kt.current;Me.current=Me.current-de}Ir.current=new Date().getTime()})():Me.current!==1/0&&(kt.current=new Date().getTime(),oe=setTimeout(()=>{var de;(de=m.onAutoClose)==null||de.call(m,m),ne()},Me.current)),()=>clearTimeout(oe)},[x,g,m,pe,fe,Z,ne]),M.useEffect(()=>{m.delete&&ne()},[ne,m.delete]);function De(){var oe,de,he;return ie!=null&&ie.loading?M.createElement("div",{className:Ls(K==null?void 0:K.loader,(oe=m==null?void 0:m.classNames)==null?void 0:oe.loader,"sonner-loader"),"data-visible":pe==="loading"},ie.loading):Fe?M.createElement("div",{className:Ls(K==null?void 0:K.loader,(de=m==null?void 0:m.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":pe==="loading"},Fe):M.createElement(I$,{className:Ls(K==null?void 0:K.loader,(he=m==null?void 0:m.classNames)==null?void 0:he.loader),visible:pe==="loading"})}return M.createElement("li",{tabIndex:0,ref:z,className:Ls(L,st,K==null?void 0:K.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,K==null?void 0:K.default,K==null?void 0:K[pe],(n=m==null?void 0:m.classNames)==null?void 0:n[pe]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:I,"data-styled":!(m.jsx||m.unstyled||_),"data-mounted":nt,"data-promise":!!m.promise,"data-swiped":Y,"data-removed":Wn,"data-visible":Ne,"data-y-position":q,"data-x-position":U,"data-index":S,"data-front":be,"data-swiping":Qn,"data-dismissible":Qe,"data-type":pe,"data-invert":G,"data-swipe-out":Jn,"data-swipe-direction":Q,"data-expanded":!!(x||W&&nt),style:{"--index":S,"--toasts-before":S,"--z-index":P.length-S,"--offset":`${Wn?ye:On.current}px`,"--initial-height":W?"auto":`${ue}px`,...R,...m.style},onDragEnd:()=>{Yn(!1),Pe(null),Ln.current=null},onPointerDown:oe=>{J||!Qe||(Ge.current=new Date,Ke(On.current),oe.target.setPointerCapture(oe.pointerId),oe.target.tagName!=="BUTTON"&&(Yn(!0),Ln.current={x:oe.clientX,y:oe.clientY}))},onPointerUp:()=>{var oe,de,he,ge;if(Jn||!Qe)return;Ln.current=null;let _e=Number(((oe=z.current)==null?void 0:oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Re=Number(((de=z.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ce=new Date().getTime()-((he=Ge.current)==null?void 0:he.getTime()),ot=Le==="x"?_e:Re,Ue=Math.abs(ot)/Ce;if(Math.abs(ot)>=z$||Ue>.11){Ke(On.current),(ge=m.onDismiss)==null||ge.call(m,m),et(Le==="x"?_e>0?"right":"left":Re>0?"down":"up"),ne(),qr(!0),ce(!1);return}Yn(!1),Pe(null)},onPointerMove:oe=>{var de,he,ge,_e;if(!Ln.current||!Qe||((de=window.getSelection())==null?void 0:de.toString().length)>0)return;let Re=oe.clientY-Ln.current.y,Ce=oe.clientX-Ln.current.x,ot=(he=t.swipeDirections)!=null?he:q$(Ae);!Le&&(Math.abs(Ce)>1||Math.abs(Re)>1)&&Pe(Math.abs(Ce)>Math.abs(Re)?"x":"y");let Ue={x:0,y:0};Le==="y"?(ot.includes("top")||ot.includes("bottom"))&&(ot.includes("top")&&Re<0||ot.includes("bottom")&&Re>0)&&(Ue.y=Re):Le==="x"&&(ot.includes("left")||ot.includes("right"))&&(ot.includes("left")&&Ce<0||ot.includes("right")&&Ce>0)&&(Ue.x=Ce),(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&ce(!0),(ge=z.current)==null||ge.style.setProperty("--swipe-amount-x",`${Ue.x}px`),(_e=z.current)==null||_e.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},Ye&&!m.jsx?M.createElement("button",{"aria-label":le,"data-disabled":J,"data-close-button":!0,onClick:J||!Qe?()=>{}:()=>{var oe;ne(),(oe=m.onDismiss)==null||oe.call(m,m)},className:Ls(K==null?void 0:K.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=ie==null?void 0:ie.close)!=null?i:R$):null,m.jsx||v.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:M.createElement(M.Fragment,null,pe||m.icon||m.promise?M.createElement("div",{"data-icon":"",className:Ls(K==null?void 0:K.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||De():null,m.type!=="loading"?m.icon||(ie==null?void 0:ie[pe])||b$(pe):null):null,M.createElement("div",{"data-content":"",className:Ls(K==null?void 0:K.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},M.createElement("div",{"data-title":"",className:Ls(K==null?void 0:K.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?M.createElement("div",{"data-description":"",className:Ls(D,We,K==null?void 0:K.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),v.isValidElement(m.cancel)?m.cancel:m.cancel&&wm(m.cancel)?M.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||N,onClick:oe=>{var de,he;wm(m.cancel)&&Qe&&((he=(de=m.cancel).onClick)==null||he.call(de,oe),ne())},className:Ls(K==null?void 0:K.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,v.isValidElement(m.action)?m.action:m.action&&wm(m.action)?M.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:oe=>{var de,he;wm(m.action)&&((he=(de=m.action).onClick)==null||he.call(de,oe),!oe.defaultPrevented&&ne())},className:Ls(K==null?void 0:K.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function BT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function K$(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?U$:j$;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var G$=v.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:h,duration:f,style:m,visibleToasts:_=F$,toastOptions:g,dir:b=BT(),gap:E=B$,loadingIcon:w,icons:S,containerAriaLabel:P="Notifications",pauseWhenPageIsHidden:x}=t,[O,I]=M.useState([]),A=M.useMemo(()=>Array.from(new Set([r].concat(O.filter(fe=>fe.position).map(fe=>fe.position)))),[O,r]),[R,N]=M.useState([]),[C,L]=M.useState(!1),[D,X]=M.useState(!1),[Ae,ke]=M.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Fe=M.useRef(null),W=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=M.useRef(null),ie=M.useRef(!1),le=M.useCallback(fe=>{I(Le=>{var Pe;return(Pe=Le.find(Q=>Q.id===fe.id))!=null&&Pe.delete||Kr.dismiss(fe.id),Le.filter(({id:Q})=>Q!==fe.id)})},[]);return M.useEffect(()=>Kr.subscribe(fe=>{if(fe.dismiss){I(Le=>Le.map(Pe=>Pe.id===fe.id?{...Pe,delete:!0}:Pe));return}setTimeout(()=>{ak.flushSync(()=>{I(Le=>{let Pe=Le.findIndex(Q=>Q.id===fe.id);return Pe!==-1?[...Le.slice(0,Pe),{...Le[Pe],...fe},...Le.slice(Pe+1)]:[fe,...Le]})})})}),[]),M.useEffect(()=>{if(u!=="system"){ke(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ke("dark"):ke("light")),typeof window>"u")return;let fe=window.matchMedia("(prefers-color-scheme: dark)");try{fe.addEventListener("change",({matches:Le})=>{ke(Le?"dark":"light")})}catch{fe.addListener(({matches:Pe})=>{try{ke(Pe?"dark":"light")}catch(Q){console.error(Q)}})}},[u]),M.useEffect(()=>{O.length<=1&&L(!1)},[O]),M.useEffect(()=>{let fe=Le=>{var Pe,Q;s.every(et=>Le[et]||Le.code===et)&&(L(!0),(Pe=Fe.current)==null||Pe.focus()),Le.code==="Escape"&&(document.activeElement===Fe.current||(Q=Fe.current)!=null&&Q.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",fe),()=>document.removeEventListener("keydown",fe)},[s]),M.useEffect(()=>{if(Fe.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,ie.current=!1)}},[Fe.current]),M.createElement("section",{ref:e,"aria-label":`${P} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((fe,Le)=>{var Pe;let[Q,et]=fe.split("-");return O.length?M.createElement("ol",{key:fe,dir:b==="auto"?BT():b,tabIndex:-1,ref:Fe,className:a,"data-sonner-toaster":!0,"data-theme":Ae,"data-y-position":Q,"data-lifted":C&&O.length>1&&!i,"data-x-position":et,style:{"--front-toast-height":`${((Pe=R[0])==null?void 0:Pe.height)||0}px`,"--width":`${$$}px`,"--gap":`${E}px`,...m,...K$(l,c)},onBlur:nt=>{ie.current&&!nt.currentTarget.contains(nt.relatedTarget)&&(ie.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:nt=>{nt.target instanceof HTMLElement&&nt.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,K.current=nt.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{D||L(!1)},onDragEnd:()=>L(!1),onPointerDown:nt=>{nt.target instanceof HTMLElement&&nt.target.dataset.dismissible==="false"||X(!0)},onPointerUp:()=>X(!1)},O.filter(nt=>!nt.position&&Le===0||nt.position===fe).map((nt,Tn)=>{var Wn,an;return M.createElement(H$,{key:nt.id,icons:S,index:Tn,toast:nt,defaultRichColors:h,duration:(Wn=g==null?void 0:g.duration)!=null?Wn:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:_,closeButton:(an=g==null?void 0:g.closeButton)!=null?an:o,interacting:D,position:fe,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:le,toasts:O.filter(Qn=>Qn.position==nt.position),heights:R.filter(Qn=>Qn.position==nt.position),setHeights:N,expandByDefault:i,gap:E,loadingIcon:w,expanded:C,pauseWhenPageIsHidden:x,swipeDirections:t.swipeDirections})})):null}))});const Q$=({...t})=>{const{theme:e="system"}=Kk();return p.jsx(G$,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Y$=Bg[" useId ".trim().toString()]||(()=>{}),J$=0;function $v(t){const[e,n]=v.useState(Y$());return Zi(()=>{n(r=>r??String(J$++))},[t]),t||(e?`radix-${e}`:"")}const X$=["top","right","bottom","left"],Ea=Math.min,hs=Math.max,Yp=Math.round,_m=Math.floor,bi=t=>({x:t,y:t}),Z$={left:"right",right:"left",bottom:"top",top:"bottom"},e6={start:"end",end:"start"};function x_(t,e,n){return hs(t,Ea(e,n))}function eo(t,e){return typeof t=="function"?t(e):t}function to(t){return t.split("-")[0]}function rd(t){return t.split("-")[1]}function FE(t){return t==="x"?"y":"x"}function jE(t){return t==="y"?"height":"width"}const t6=new Set(["top","bottom"]);function gi(t){return t6.has(to(t))?"y":"x"}function UE(t){return FE(gi(t))}function n6(t,e,n){n===void 0&&(n=!1);const r=rd(t),s=UE(t),i=jE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Jp(o)),[o,Jp(o)]}function r6(t){const e=Jp(t);return[A_(t),e,A_(e)]}function A_(t){return t.replace(/start|end/g,e=>e6[e])}const zT=["left","right"],WT=["right","left"],s6=["top","bottom"],i6=["bottom","top"];function o6(t,e,n){switch(t){case"top":case"bottom":return n?e?WT:zT:e?zT:WT;case"left":case"right":return e?s6:i6;default:return[]}}function a6(t,e,n,r){const s=rd(t);let i=o6(to(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(A_)))),i}function Jp(t){return t.replace(/left|right|bottom|top/g,e=>Z$[e])}function l6(t){return{top:0,right:0,bottom:0,left:0,...t}}function Gk(t){return typeof t!="number"?l6(t):{top:t,right:t,bottom:t,left:t}}function Xp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function qT(t,e,n){let{reference:r,floating:s}=t;const i=gi(e),o=UE(e),a=jE(o),l=to(e),c=i==="y",u=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(rd(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const c6=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=qT(c,r,l),f=r,m={},_=0;for(let g=0;g<a.length;g++){const{name:b,fn:E}=a[g],{x:w,y:S,data:P,reset:x}=await E({x:u,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,h=S??h,m={...m,[b]:{...m[b],...P}},x&&_<=50&&(_++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):x.rects),{x:u,y:h}=qT(c,f,l)),g=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:m}};async function zh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=eo(e,t),_=Gk(m),b=a[f?h==="floating"?"reference":"floating":h],E=Xp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),P=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},x=Xp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(E.top-x.top+_.top)/P.y,bottom:(x.bottom-E.bottom+_.bottom)/P.y,left:(E.left-x.left+_.left)/P.x,right:(x.right-E.right+_.right)/P.x}}const u6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=eo(t,e)||{};if(c==null)return{};const h=Gk(u),f={x:n,y:r},m=UE(s),_=jE(m),g=await o.getDimensions(c),b=m==="y",E=b?"top":"left",w=b?"bottom":"right",S=b?"clientHeight":"clientWidth",P=i.reference[_]+i.reference[m]-f[m]-i.floating[_],x=f[m]-i.reference[m],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=O?O[S]:0;(!I||!await(o.isElement==null?void 0:o.isElement(O)))&&(I=a.floating[S]||i.floating[_]);const A=P/2-x/2,R=I/2-g[_]/2-1,N=Ea(h[E],R),C=Ea(h[w],R),L=N,D=I-g[_]-C,X=I/2-g[_]/2+A,Ae=x_(L,X,D),ke=!l.arrow&&rd(s)!=null&&X!==Ae&&i.reference[_]/2-(X<L?N:C)-g[_]/2<0,Fe=ke?X<L?X-L:X-D:0;return{[m]:f[m]+Fe,data:{[m]:Ae,centerOffset:X-Ae-Fe,...ke&&{alignmentOffset:Fe}},reset:ke}}}),d6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:g=!0,...b}=eo(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=to(s),w=gi(a),S=to(a)===a,P=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=f||(S||!g?[Jp(a)]:r6(a)),O=_!=="none";!f&&O&&x.push(...a6(a,g,_,P));const I=[a,...x],A=await zh(e,b),R=[];let N=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&R.push(A[E]),h){const X=n6(s,o,P);R.push(A[X[0]],A[X[1]])}if(N=[...N,{placement:s,overflows:R}],!R.every(X=>X<=0)){var C,L;const X=(((C=i.flip)==null?void 0:C.index)||0)+1,Ae=I[X];if(Ae&&(!(h==="alignment"?w!==gi(Ae):!1)||N.every(W=>gi(W.placement)===w?W.overflows[0]>0:!0)))return{data:{index:X,overflows:N},reset:{placement:Ae}};let ke=(L=N.filter(Fe=>Fe.overflows[0]<=0).sort((Fe,W)=>Fe.overflows[1]-W.overflows[1])[0])==null?void 0:L.placement;if(!ke)switch(m){case"bestFit":{var D;const Fe=(D=N.filter(W=>{if(O){const K=gi(W.placement);return K===w||K==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(K=>K>0).reduce((K,ie)=>K+ie,0)]).sort((W,K)=>W[1]-K[1])[0])==null?void 0:D[0];Fe&&(ke=Fe);break}case"initialPlacement":ke=a;break}if(s!==ke)return{reset:{placement:ke}}}return{}}}};function HT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KT(t){return X$.some(e=>t[e]>=0)}const h6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=eo(t,e);switch(r){case"referenceHidden":{const i=await zh(e,{...s,elementContext:"reference"}),o=HT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KT(o)}}}case"escaped":{const i=await zh(e,{...s,altBoundary:!0}),o=HT(i,n.floating);return{data:{escapedOffsets:o,escaped:KT(o)}}}default:return{}}}}},Qk=new Set(["left","top"]);async function f6(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=to(n),a=rd(n),l=gi(n)==="y",c=Qk.has(o)?-1:1,u=i&&l?-1:1,h=eo(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(m=a==="end"?_*-1:_),l?{x:m*u,y:f*c}:{x:f*c,y:m*u}}const m6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await f6(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},p6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:E,y:w}=b;return{x:E,y:w}}},...l}=eo(t,e),c={x:n,y:r},u=await zh(e,l),h=gi(to(s)),f=FE(h);let m=c[f],_=c[h];if(i){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=m+u[b],S=m-u[E];m=x_(w,m,S)}if(o){const b=h==="y"?"top":"left",E=h==="y"?"bottom":"right",w=_+u[b],S=_-u[E];_=x_(w,_,S)}const g=a.fn({...e,[f]:m,[h]:_});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},g6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=eo(t,e),u={x:n,y:r},h=gi(s),f=FE(h);let m=u[f],_=u[h];const g=eo(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const S=f==="y"?"height":"width",P=i.reference[f]-i.floating[S]+b.mainAxis,x=i.reference[f]+i.reference[S]-b.mainAxis;m<P?m=P:m>x&&(m=x)}if(c){var E,w;const S=f==="y"?"width":"height",P=Qk.has(to(s)),x=i.reference[h]-i.floating[S]+(P&&((E=o.offset)==null?void 0:E[h])||0)+(P?0:b.crossAxis),O=i.reference[h]+i.reference[S]+(P?0:((w=o.offset)==null?void 0:w[h])||0)-(P?b.crossAxis:0);_<x?_=x:_>O&&(_=O)}return{[f]:m,[h]:_}}}},y6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=eo(t,e),u=await zh(e,c),h=to(s),f=rd(s),m=gi(s)==="y",{width:_,height:g}=i.floating;let b,E;h==="top"||h==="bottom"?(b=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,b=f==="end"?"top":"bottom");const w=g-u.top-u.bottom,S=_-u.left-u.right,P=Ea(g-u[b],w),x=Ea(_-u[E],S),O=!e.middlewareData.shift;let I=P,A=x;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=w),O&&!f){const N=hs(u.left,0),C=hs(u.right,0),L=hs(u.top,0),D=hs(u.bottom,0);m?A=_-2*(N!==0||C!==0?N+C:hs(u.left,u.right)):I=g-2*(L!==0||D!==0?L+D:hs(u.top,u.bottom))}await l({...e,availableWidth:A,availableHeight:I});const R=await o.getDimensions(a.floating);return _!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function ly(){return typeof window<"u"}function sd(t){return Yk(t)?(t.nodeName||"").toLowerCase():"#document"}function gs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ni(t){var e;return(e=(Yk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Yk(t){return ly()?t instanceof Node||t instanceof gs(t).Node:!1}function Gs(t){return ly()?t instanceof Element||t instanceof gs(t).Element:!1}function Ri(t){return ly()?t instanceof HTMLElement||t instanceof gs(t).HTMLElement:!1}function GT(t){return!ly()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gs(t).ShadowRoot}const v6=new Set(["inline","contents"]);function Sf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Qs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!v6.has(s)}const w6=new Set(["table","td","th"]);function _6(t){return w6.has(sd(t))}const E6=[":popover-open",":modal"];function cy(t){return E6.some(e=>{try{return t.matches(e)}catch{return!1}})}const b6=["transform","translate","scale","rotate","perspective"],S6=["transform","translate","scale","rotate","perspective","filter"],I6=["paint","layout","strict","content"];function $E(t){const e=BE(),n=Gs(t)?Qs(t):t;return b6.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||S6.some(r=>(n.willChange||"").includes(r))||I6.some(r=>(n.contain||"").includes(r))}function T6(t){let e=ba(t);for(;Ri(e)&&!Iu(e);){if($E(e))return e;if(cy(e))return null;e=ba(e)}return null}function BE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const x6=new Set(["html","body","#document"]);function Iu(t){return x6.has(sd(t))}function Qs(t){return gs(t).getComputedStyle(t)}function uy(t){return Gs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ba(t){if(sd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||GT(t)&&t.host||Ni(t);return GT(e)?e.host:e}function Jk(t){const e=ba(t);return Iu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ri(e)&&Sf(e)?e:Jk(e)}function Wh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Jk(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=gs(s);if(i){const a=P_(o);return e.concat(o,o.visualViewport||[],Sf(s)?s:[],a&&n?Wh(a):[])}return e.concat(s,Wh(s,[],n))}function P_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Xk(t){const e=Qs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ri(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Yp(n)!==i||Yp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function zE(t){return Gs(t)?t:t.contextElement}function nu(t){const e=zE(t);if(!Ri(e))return bi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Xk(e);let o=(i?Yp(n.width):n.width)/r,a=(i?Yp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const A6=bi(0);function Zk(t){const e=gs(t);return!BE()||!e.visualViewport?A6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function P6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==gs(t)?!1:e}function Ol(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=zE(t);let o=bi(1);e&&(r?Gs(r)&&(o=nu(r)):o=nu(t));const a=P6(i,n,r)?Zk(i):bi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=gs(i),m=r&&Gs(r)?gs(r):r;let _=f,g=P_(_);for(;g&&r&&m!==_;){const b=nu(g),E=g.getBoundingClientRect(),w=Qs(g),S=E.left+(g.clientLeft+parseFloat(w.paddingLeft))*b.x,P=E.top+(g.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=S,c+=P,_=gs(g),g=P_(_)}}return Xp({width:u,height:h,x:l,y:c})}function dy(t,e){const n=uy(t).scrollLeft;return e?e.left+n:Ol(Ni(t)).left+n}function eN(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-dy(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function R6(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ni(r),a=e?cy(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=bi(1);const u=bi(0),h=Ri(r);if((h||!h&&!i)&&((sd(r)!=="body"||Sf(o))&&(l=uy(r)),Ri(r))){const m=Ol(r);c=nu(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const f=o&&!h&&!i?eN(o,l):bi(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function C6(t){return Array.from(t.getClientRects())}function k6(t){const e=Ni(t),n=uy(t),r=t.ownerDocument.body,s=hs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=hs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dy(t);const a=-n.scrollTop;return Qs(r).direction==="rtl"&&(o+=hs(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const QT=25;function N6(t,e){const n=gs(t),r=Ni(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=BE();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=dy(r);if(c<=0){const u=r.ownerDocument,h=u.body,f=getComputedStyle(h),m=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,_=Math.abs(r.clientWidth-h.clientWidth-m);_<=QT&&(i-=_)}else c<=QT&&(i+=c);return{width:i,height:o,x:a,y:l}}const D6=new Set(["absolute","fixed"]);function O6(t,e){const n=Ol(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ri(t)?nu(t):bi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function YT(t,e,n){let r;if(e==="viewport")r=N6(t,n);else if(e==="document")r=k6(Ni(t));else if(Gs(e))r=O6(e,n);else{const s=Zk(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Xp(r)}function tN(t,e){const n=ba(t);return n===e||!Gs(n)||Iu(n)?!1:Qs(n).position==="fixed"||tN(n,e)}function L6(t,e){const n=e.get(t);if(n)return n;let r=Wh(t,[],!1).filter(a=>Gs(a)&&sd(a)!=="body"),s=null;const i=Qs(t).position==="fixed";let o=i?ba(t):t;for(;Gs(o)&&!Iu(o);){const a=Qs(o),l=$E(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&D6.has(s.position)||Sf(o)&&!l&&tN(t,o))?r=r.filter(u=>u!==o):s=a,o=ba(o)}return e.set(t,r),r}function M6(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?cy(e)?[]:L6(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=YT(e,u,s);return c.top=hs(h.top,c.top),c.right=Ea(h.right,c.right),c.bottom=Ea(h.bottom,c.bottom),c.left=hs(h.left,c.left),c},YT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function V6(t){const{width:e,height:n}=Xk(t);return{width:e,height:n}}function F6(t,e,n){const r=Ri(e),s=Ni(e),i=n==="fixed",o=Ol(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=bi(0);function c(){l.x=dy(s)}if(r||!r&&!i)if((sd(e)!=="body"||Sf(s))&&(a=uy(e)),r){const m=Ol(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?eN(s,a):bi(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function Bv(t){return Qs(t).position==="static"}function JT(t,e){if(!Ri(t)||Qs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ni(t)===n&&(n=n.ownerDocument.body),n}function nN(t,e){const n=gs(t);if(cy(t))return n;if(!Ri(t)){let s=ba(t);for(;s&&!Iu(s);){if(Gs(s)&&!Bv(s))return s;s=ba(s)}return n}let r=JT(t,e);for(;r&&_6(r)&&Bv(r);)r=JT(r,e);return r&&Iu(r)&&Bv(r)&&!$E(r)?n:r||T6(t)||n}const j6=async function(t){const e=this.getOffsetParent||nN,n=this.getDimensions,r=await n(t.floating);return{reference:F6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function U6(t){return Qs(t).direction==="rtl"}const $6={convertOffsetParentRelativeRectToViewportRelativeRect:R6,getDocumentElement:Ni,getClippingRect:M6,getOffsetParent:nN,getElementRects:j6,getClientRects:C6,getDimensions:V6,getScale:nu,isElement:Gs,isRTL:U6};function rN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function B6(t,e){let n=null,r;const s=Ni(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const _=_m(h),g=_m(s.clientWidth-(u+f)),b=_m(s.clientHeight-(h+m)),E=_m(u),S={rootMargin:-_+"px "+-g+"px "+-b+"px "+-E+"px",threshold:hs(0,Ea(1,l))||1};let P=!0;function x(O){const I=O[0].intersectionRatio;if(I!==l){if(!P)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!rN(c,t.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(x,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(x,S)}n.observe(t)}return o(!0),i}function z6(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=zE(t),u=s||i?[...c?Wh(c):[],...Wh(e)]:[];u.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?B6(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(E=>{let[w]=E;w&&w.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let _,g=l?Ol(t):null;l&&b();function b(){const E=Ol(t);g&&!rN(g,E)&&n(),g=E,_=requestAnimationFrame(b)}return n(),()=>{var E;u.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h==null||h(),(E=m)==null||E.disconnect(),m=null,l&&cancelAnimationFrame(_)}}const W6=m6,q6=p6,H6=d6,K6=y6,G6=h6,XT=u6,Q6=g6,Y6=(t,e,n)=>{const r=new Map,s={platform:$6,...n},i={...s.platform,_c:r};return c6(t,e,{...s,platform:i})};var J6=typeof document<"u",X6=function(){},rp=J6?v.useLayoutEffect:X6;function Zp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Zp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Zp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function sN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ZT(t,e){const n=sN(t);return Math.round(e*n)/n}function zv(t){const e=v.useRef(t);return rp(()=>{e.current=t}),e}function Z6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=v.useState(r);Zp(f,r)||m(r);const[_,g]=v.useState(null),[b,E]=v.useState(null),w=v.useCallback(W=>{W!==O.current&&(O.current=W,g(W))},[]),S=v.useCallback(W=>{W!==I.current&&(I.current=W,E(W))},[]),P=i||_,x=o||b,O=v.useRef(null),I=v.useRef(null),A=v.useRef(u),R=l!=null,N=zv(l),C=zv(s),L=zv(c),D=v.useCallback(()=>{if(!O.current||!I.current)return;const W={placement:e,strategy:n,middleware:f};C.current&&(W.platform=C.current),Y6(O.current,I.current,W).then(K=>{const ie={...K,isPositioned:L.current!==!1};X.current&&!Zp(A.current,ie)&&(A.current=ie,_f.flushSync(()=>{h(ie)}))})},[f,e,n,C,L]);rp(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[c]);const X=v.useRef(!1);rp(()=>(X.current=!0,()=>{X.current=!1}),[]),rp(()=>{if(P&&(O.current=P),x&&(I.current=x),P&&x){if(N.current)return N.current(P,x,D);D()}},[P,x,D,N,R]);const Ae=v.useMemo(()=>({reference:O,floating:I,setReference:w,setFloating:S}),[w,S]),ke=v.useMemo(()=>({reference:P,floating:x}),[P,x]),Fe=v.useMemo(()=>{const W={position:n,left:0,top:0};if(!ke.floating)return W;const K=ZT(ke.floating,u.x),ie=ZT(ke.floating,u.y);return a?{...W,transform:"translate("+K+"px, "+ie+"px)",...sN(ke.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:ie}},[n,a,ke.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:D,refs:Ae,elements:ke,floatingStyles:Fe}),[u,D,Ae,ke,Fe])}const e5=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?XT({element:r.current,padding:s}).fn(n):{}:r?XT({element:r,padding:s}).fn(n):{}}}},t5=(t,e)=>({...W6(t),options:[t,e]}),n5=(t,e)=>({...q6(t),options:[t,e]}),r5=(t,e)=>({...Q6(t),options:[t,e]}),s5=(t,e)=>({...H6(t),options:[t,e]}),i5=(t,e)=>({...K6(t),options:[t,e]}),o5=(t,e)=>({...G6(t),options:[t,e]}),a5=(t,e)=>({...e5(t),options:[t,e]});var l5="Arrow",iN=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return p.jsx(Nn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});iN.displayName=l5;var c5=iN;function oN(t){const[e,n]=v.useState(void 0);return Zi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var WE="Popper",[aN,lN]=td(WE),[u5,cN]=aN(WE),uN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=v.useState(null);return p.jsx(u5,{scope:e,anchor:r,onAnchorChange:s,children:n})};uN.displayName=WE;var dN="PopperAnchor",hN=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=cN(dN,n),o=v.useRef(null),a=Sr(e,o),l=v.useRef(null);return v.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:p.jsx(Nn.div,{...s,ref:a})});hN.displayName=dN;var qE="PopperContent",[d5,h5]=aN(qE),fN=v.forwardRef((t,e)=>{var nt,Tn,Wn,an,Qn,Yn;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:_,...g}=t,b=cN(qE,n),[E,w]=v.useState(null),S=Sr(e,Jn=>w(Jn)),[P,x]=v.useState(null),O=oN(P),I=(O==null?void 0:O.width)??0,A=(O==null?void 0:O.height)??0,R=r+(i!=="center"?"-"+i:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},C=Array.isArray(c)?c:[c],L=C.length>0,D={padding:N,boundary:C.filter(m5),altBoundary:L},{refs:X,floatingStyles:Ae,placement:ke,isPositioned:Fe,middlewareData:W}=Z6({strategy:"fixed",placement:R,whileElementsMounted:(...Jn)=>z6(...Jn,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[t5({mainAxis:s+A,alignmentAxis:o}),l&&n5({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?r5():void 0,...D}),l&&s5({...D}),i5({...D,apply:({elements:Jn,rects:qr,availableWidth:Y,availableHeight:ce})=>{const{width:ye,height:Ke}=qr.reference,ue=Jn.floating.style;ue.setProperty("--radix-popper-available-width",`${Y}px`),ue.setProperty("--radix-popper-available-height",`${ce}px`),ue.setProperty("--radix-popper-anchor-width",`${ye}px`),ue.setProperty("--radix-popper-anchor-height",`${Ke}px`)}}),P&&a5({element:P,padding:a}),p5({arrowWidth:I,arrowHeight:A}),f&&o5({strategy:"referenceHidden",...D})]}),[K,ie]=gN(ke),le=Pi(_);Zi(()=>{Fe&&(le==null||le())},[Fe,le]);const fe=(nt=W.arrow)==null?void 0:nt.x,Le=(Tn=W.arrow)==null?void 0:Tn.y,Pe=((Wn=W.arrow)==null?void 0:Wn.centerOffset)!==0,[Q,et]=v.useState();return Zi(()=>{E&&et(window.getComputedStyle(E).zIndex)},[E]),p.jsx("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ae,transform:Fe?Ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(an=W.transformOrigin)==null?void 0:an.x,(Qn=W.transformOrigin)==null?void 0:Qn.y].join(" "),...((Yn=W.hide)==null?void 0:Yn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(d5,{scope:n,placedSide:K,onArrowChange:x,arrowX:fe,arrowY:Le,shouldHideArrow:Pe,children:p.jsx(Nn.div,{"data-side":K,"data-align":ie,...g,ref:S,style:{...g.style,animation:Fe?void 0:"none"}})})})});fN.displayName=qE;var mN="PopperArrow",f5={top:"bottom",right:"left",bottom:"top",left:"right"},pN=v.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=h5(mN,r),o=f5[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(c5,{...s,ref:n,style:{...s.style,display:"block"}})})});pN.displayName=mN;function m5(t){return t!==null}var p5=t=>({name:"transformOrigin",options:t,fn(e){var b,E,w;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=gN(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,m=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let _="",g="";return c==="bottom"?(_=o?h:`${f}px`,g=`${-l}px`):c==="top"?(_=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,g=o?h:`${m}px`):c==="left"&&(_=`${r.floating.width+l}px`,g=o?h:`${m}px`),{data:{x:_,y:g}}}});function gN(t){const[e,n="center"]=t.split("-");return[e,n]}var yee=uN,g5=hN,y5=fN,v5=pN,w5=Symbol("radix.slottable");function _5(t){const e=({children:n})=>p.jsx(p.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=w5,e}var[hy]=td("Tooltip",[lN]),HE=lN(),yN="TooltipProvider",E5=700,ex="tooltip.open",[b5,vN]=hy(yN),wN=t=>{const{__scopeTooltip:e,delayDuration:n=E5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=v.useRef(!0),a=v.useRef(!1),l=v.useRef(0);return v.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(b5,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:v.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:v.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};wN.displayName=yN;var _N="Tooltip",[vee,fy]=hy(_N),R_="TooltipTrigger",S5=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=fy(R_,n),i=vN(R_,n),o=HE(n),a=v.useRef(null),l=Sr(e,a,s.onTriggerChange),c=v.useRef(!1),u=v.useRef(!1),h=v.useCallback(()=>c.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(g5,{asChild:!0,...o,children:p.jsx(Nn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:cn(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:cn(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:cn(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:cn(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:cn(t.onBlur,s.onClose),onClick:cn(t.onClick,s.onClose)})})});S5.displayName=R_;var I5="TooltipPortal",[wee,T5]=hy(I5,{forceMount:void 0}),Tu="TooltipContent",EN=v.forwardRef((t,e)=>{const n=T5(Tu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=fy(Tu,t.__scopeTooltip);return p.jsx(Xl,{present:r||o.open,children:o.disableHoverableContent?p.jsx(bN,{side:s,...i,ref:e}):p.jsx(x5,{side:s,...i,ref:e})})}),x5=v.forwardRef((t,e)=>{const n=fy(Tu,t.__scopeTooltip),r=vN(Tu,t.__scopeTooltip),s=v.useRef(null),i=Sr(e,s),[o,a]=v.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:h}=r,f=v.useCallback(()=>{a(null),h(!1)},[h]),m=v.useCallback((_,g)=>{const b=_.currentTarget,E={x:_.clientX,y:_.clientY},w=k5(E,b.getBoundingClientRect()),S=N5(E,w),P=D5(g.getBoundingClientRect()),x=L5([...S,...P]);a(x),h(!0)},[h]);return v.useEffect(()=>()=>f(),[f]),v.useEffect(()=>{if(l&&u){const _=b=>m(b,u),g=b=>m(b,l);return l.addEventListener("pointerleave",_),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",g)}}},[l,u,m,f]),v.useEffect(()=>{if(o){const _=g=>{const b=g.target,E={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),S=!O5(E,o);w?f():S&&(f(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,u,o,c,f]),p.jsx(bN,{...t,ref:i})}),[A5,P5]=hy(_N,{isInside:!1}),R5=_5("TooltipContent"),bN=v.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=fy(Tu,n),c=HE(n),{onClose:u}=l;return v.useEffect(()=>(document.addEventListener(ex,u),()=>document.removeEventListener(ex,u)),[u]),v.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),p.jsx(sy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:p.jsxs(y5,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(R5,{children:r}),p.jsx(A5,{scope:n,isInside:!0,children:p.jsx(a4,{id:l.contentId,role:"tooltip",children:s||r})})]})})});EN.displayName=Tu;var SN="TooltipArrow",C5=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=HE(n);return P5(SN,n).isInside?null:p.jsx(v5,{...s,...r,ref:e})});C5.displayName=SN;function k5(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function N5(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function D5(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function O5(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,h=l.x,f=l.y;u>r!=f>r&&n<(h-c)*(r-u)/(f-u)+c&&(s=!s)}return s}function L5(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),M5(e)}function M5(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var V5=wN,IN=EN;const F5=V5,j5=v.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(IN,{ref:r,sideOffset:e,className:vn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));j5.displayName=IN.displayName;var my=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},U5={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},$o,N0,AR,$5=(AR=class{constructor(){Vt(this,$o,U5);Vt(this,N0,!1)}setTimeoutProvider(t){ft(this,$o,t)}setTimeout(t,e){return ee(this,$o).setTimeout(t,e)}clearTimeout(t){ee(this,$o).clearTimeout(t)}setInterval(t,e){return ee(this,$o).setInterval(t,e)}clearInterval(t){ee(this,$o).clearInterval(t)}},$o=new WeakMap,N0=new WeakMap,AR),eg=new $5;function B5(t){setTimeout(t,0)}var py=typeof window>"u"||"Deno"in globalThis;function Ur(){}function z5(t,e){return typeof t=="function"?t(e):t}function W5(t){return typeof t=="number"&&t>=0&&t!==1/0}function q5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function C_(t,e){return typeof t=="function"?t(e):t}function H5(t,e){return typeof t=="function"?t(e):t}function tx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==KE(o,e.options))return!1}else if(!Hh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function nx(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(qh(e.options.mutationKey)!==qh(i))return!1}else if(!Hh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function KE(t,e){return((e==null?void 0:e.queryKeyHashFn)||qh)(t)}function qh(t){return JSON.stringify(t,(e,n)=>k_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Hh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Hh(t[n],e[n])):!1}var K5=Object.prototype.hasOwnProperty;function TN(t,e){if(t===e)return t;const n=rx(t)&&rx(e);if(!n&&!(k_(t)&&k_(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c],h=t[u],f=e[u];if(h===f){a[u]=h,(n?c<s:K5.call(t,u))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[u]=f;continue}const m=TN(h,f);a[u]=m,m===h&&l++}return s===o&&l===s?t:a}function _ee(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function rx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function k_(t){if(!sx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!sx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sx(t){return Object.prototype.toString.call(t)==="[object Object]"}function G5(t){return new Promise(e=>{eg.setTimeout(e,t)})}function Q5(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?TN(t,e):e}function Y5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function J5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var GE=Symbol();function xN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===GE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Eee(t,e){return typeof t=="function"?t(...e):!!t}function X5(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var pl,Bo,cu,PR,Z5=(PR=class extends my{constructor(){super();Vt(this,pl);Vt(this,Bo);Vt(this,cu);ft(this,cu,e=>{if(!py&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ee(this,Bo)||this.setEventListener(ee(this,cu))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,Bo))==null||e.call(this),ft(this,Bo,void 0))}setEventListener(e){var n;ft(this,cu,e),(n=ee(this,Bo))==null||n.call(this),ft(this,Bo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ee(this,pl)!==e&&(ft(this,pl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ee(this,pl)=="boolean"?ee(this,pl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},pl=new WeakMap,Bo=new WeakMap,cu=new WeakMap,PR),AN=new Z5;function eB(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function tB(t){var n;let e;if((n=t.then(r=>(e=r,r),Ur))==null||n.catch(Ur),e!==void 0)return{data:e}}function PN(t){return t}function nB(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function rB(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(Ur),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function sB(t){return t.state.isPaused}function iB(t){return t.state.status==="success"}function oB(t){return!0}function aB(t,e={}){var l,c,u,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??sB,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[nB(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??iB,i=e.shouldRedactErrors??((u=t.getDefaultOptions().dehydrate)==null?void 0:u.shouldRedactErrors)??oB,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??PN,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[rB(f,o,i)]:[]);return{mutations:r,queries:a}}function lB(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??PN,o=e.mutations||[],a=e.queries||[];o.forEach(({state:u,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},u)}),a.forEach(({queryKey:u,state:h,queryHash:f,meta:m,promise:_,dehydratedAt:g})=>{var O,I;const b=_?tB(_):void 0,E=h.data===void 0?b==null?void 0:b.data:h.data,w=E===void 0?E:i(E);let S=s.get(f);const P=(S==null?void 0:S.state.status)==="pending",x=(S==null?void 0:S.state.fetchStatus)==="fetching";if(S){const A=b&&g!==void 0&&g>S.state.dataUpdatedAt;if(h.dataUpdatedAt>S.state.dataUpdatedAt||A){const{fetchStatus:R,...N}=h;S.setState({...N,data:w})}}else S=s.build(t,{...(O=t.getDefaultOptions().hydrate)==null?void 0:O.queries,...(I=n==null?void 0:n.defaultOptions)==null?void 0:I.queries,queryKey:u,queryHash:f,meta:m},{...h,data:w,fetchStatus:"idle",status:w!==void 0?"success":h.status});_&&!P&&!x&&(g===void 0||g>S.state.dataUpdatedAt)&&S.fetch(void 0,{initialPromise:Promise.resolve(_).then(i)}).catch(Ur)})}var cB=B5;function uB(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=cB;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var $r=uB(),uu,zo,du,RR,dB=(RR=class extends my{constructor(){super();Vt(this,uu,!0);Vt(this,zo);Vt(this,du);ft(this,du,e=>{if(!py&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,zo)||this.setEventListener(ee(this,du))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,zo))==null||e.call(this),ft(this,zo,void 0))}setEventListener(e){var n;ft(this,du,e),(n=ee(this,zo))==null||n.call(this),ft(this,zo,e(this.setOnline.bind(this)))}setOnline(e){ee(this,uu)!==e&&(ft(this,uu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ee(this,uu)}},uu=new WeakMap,zo=new WeakMap,du=new WeakMap,RR),tg=new dB;function hB(t){return Math.min(1e3*2**t,3e4)}function RN(t){return(t??"online")==="online"?tg.isOnline():!0}var N_=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function CN(t){let e=!1,n=0,r;const s=eB(),i=()=>s.status!=="pending",o=g=>{var b;if(!i()){const E=new N_(g);f(E),(b=t.onCancel)==null||b.call(t,E)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>AN.isFocused()&&(t.networkMode==="always"||tg.isOnline())&&t.canRun(),u=()=>RN(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},m=()=>new Promise(g=>{var b;r=E=>{(i()||c())&&g(E)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),_=()=>{if(i())return;let g;const b=n===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(E){g=Promise.reject(E)}Promise.resolve(g).then(h).catch(E=>{var O;if(i())return;const w=t.retry??(py?0:3),S=t.retryDelay??hB,P=typeof S=="function"?S(n,E):S,x=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,E);if(e||!x){f(E);return}n++,(O=t.onFail)==null||O.call(t,n,E),G5(P).then(()=>c()?void 0:m()).then(()=>{e?f(E):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?_():m().then(_),s)}}var gl,CR,kN=(CR=class{constructor(){Vt(this,gl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),W5(this.gcTime)&&ft(this,gl,eg.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(py?1/0:5*60*1e3))}clearGcTimeout(){ee(this,gl)&&(eg.clearTimeout(ee(this,gl)),ft(this,gl,void 0))}},gl=new WeakMap,CR),yl,hu,Is,vl,ur,hf,wl,Vs,Li,kR,fB=(kR=class extends kN{constructor(n){super();Vt(this,Vs);Vt(this,yl);Vt(this,hu);Vt(this,Is);Vt(this,vl);Vt(this,ur);Vt(this,hf);Vt(this,wl);ft(this,wl,!1),ft(this,hf,n.defaultOptions),this.setOptions(n.options),this.observers=[],ft(this,vl,n.client),ft(this,Is,ee(this,vl).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ft(this,yl,ox(this.options)),this.state=n.state??ee(this,yl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=ee(this,ur))==null?void 0:n.promise}setOptions(n){if(this.options={...ee(this,hf),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=ox(this.options);r.data!==void 0&&(this.setState(ix(r.data,r.dataUpdatedAt)),ft(this,yl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,Is).remove(this)}setData(n,r){const s=Q5(this.state.data,n,this.options);return xr(this,Vs,Li).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){xr(this,Vs,Li).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=ee(this,ur))==null?void 0:s.promise;return(i=ee(this,ur))==null||i.cancel(n),r?r.then(Ur).catch(Ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,yl))}isActive(){return this.observers.some(n=>H5(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===GE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>C_(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!q5(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=ee(this,ur))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=ee(this,ur))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),ee(this,Is).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(ee(this,ur)&&(ee(this,wl)?ee(this,ur).cancel({revert:!0}):ee(this,ur).cancelRetry()),this.scheduleGc()),ee(this,Is).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xr(this,Vs,Li).call(this,{type:"invalidate"})}async fetch(n,r){var c,u,h,f,m,_,g,b,E,w,S,P;if(this.state.fetchStatus!=="idle"&&((c=ee(this,ur))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ee(this,ur))return ee(this,ur).continueRetry(),ee(this,ur).promise}if(n&&this.setOptions(n),!this.options.queryFn){const x=this.observers.find(O=>O.options.queryFn);x&&this.setOptions(x.options)}const s=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ft(this,wl,!0),s.signal)})},o=()=>{const x=xN(this.options,r),I=(()=>{const A={client:ee(this,vl),queryKey:this.queryKey,meta:this.meta};return i(A),A})();return ft(this,wl,!1),this.options.persister?this.options.persister(x,I,this):x(I)},l=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ee(this,vl),state:this.state,fetchFn:o};return i(x),x})();(u=this.options.behavior)==null||u.onFetch(l,this),ft(this,hu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&xr(this,Vs,Li).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ft(this,ur,CN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:x=>{x instanceof N_&&x.revert&&this.setState({...ee(this,hu),fetchStatus:"idle"}),s.abort()},onFail:(x,O)=>{xr(this,Vs,Li).call(this,{type:"failed",failureCount:x,error:O})},onPause:()=>{xr(this,Vs,Li).call(this,{type:"pause"})},onContinue:()=>{xr(this,Vs,Li).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const x=await ee(this,ur).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(_=(m=ee(this,Is).config).onSuccess)==null||_.call(m,x,this),(b=(g=ee(this,Is).config).onSettled)==null||b.call(g,x,this.state.error,this),x}catch(x){if(x instanceof N_){if(x.silent)return ee(this,ur).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw xr(this,Vs,Li).call(this,{type:"error",error:x}),(w=(E=ee(this,Is).config).onError)==null||w.call(E,x,this),(P=(S=ee(this,Is).config).onSettled)==null||P.call(S,this.state.data,x,this),x}finally{this.scheduleGc()}}},yl=new WeakMap,hu=new WeakMap,Is=new WeakMap,vl=new WeakMap,ur=new WeakMap,hf=new WeakMap,wl=new WeakMap,Vs=new WeakSet,Li=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...mB(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...ix(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ft(this,hu,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),$r.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ee(this,Is).notify({query:this,type:"updated",action:n})})},kR);function mB(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ix(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ox(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function ax(t){return{onFetch:(e,n)=>{var u,h,f,m,_;const r=e.options,s=(f=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const b=S=>{X5(S,()=>e.signal,()=>g=!0)},E=xN(e.options,e.fetchOptions),w=async(S,P,x)=>{if(g)return Promise.reject();if(P==null&&S.pages.length)return Promise.resolve(S);const I=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:P,direction:x?"backward":"forward",meta:e.options.meta};return b(C),C})(),A=await E(I),{maxPages:R}=e.options,N=x?J5:Y5;return{pages:N(S.pages,A,R),pageParams:N(S.pageParams,P,R)}};if(s&&i.length){const S=s==="backward",P=S?pB:lx,x={pages:i,pageParams:o},O=P(r,x);a=await w(x,O,S)}else{const S=t??i.length;do{const P=l===0?o[0]??r.initialPageParam:lx(r,a);if(l>0&&P==null)break;a=await w(a,P),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function lx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function pB(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ff,ui,Fr,_l,di,xo,NR,gB=(NR=class extends kN{constructor(n){super();Vt(this,di);Vt(this,ff);Vt(this,ui);Vt(this,Fr);Vt(this,_l);ft(this,ff,n.client),this.mutationId=n.mutationId,ft(this,Fr,n.mutationCache),ft(this,ui,[]),this.state=n.state||yB(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){ee(this,ui).includes(n)||(ee(this,ui).push(n),this.clearGcTimeout(),ee(this,Fr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ft(this,ui,ee(this,ui).filter(r=>r!==n)),this.scheduleGc(),ee(this,Fr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){ee(this,ui).length||(this.state.status==="pending"?this.scheduleGc():ee(this,Fr).remove(this))}continue(){var n;return((n=ee(this,_l))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,u,h,f,m,_,g,b,E,w,S,P,x,O,I,A,R,N;const r=()=>{xr(this,di,xo).call(this,{type:"continue"})},s={client:ee(this,ff),meta:this.options.meta,mutationKey:this.options.mutationKey};ft(this,_l,CN({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(C,L)=>{xr(this,di,xo).call(this,{type:"failed",failureCount:C,error:L})},onPause:()=>{xr(this,di,xo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,Fr).canRun(this)}));const i=this.state.status==="pending",o=!ee(this,_l).canStart();try{if(i)r();else{xr(this,di,xo).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=ee(this,Fr).config).onMutate)==null?void 0:l.call(a,n,this,s));const L=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n,s));L!==this.state.context&&xr(this,di,xo).call(this,{type:"pending",context:L,variables:n,isPaused:o})}const C=await ee(this,_l).start();return await((f=(h=ee(this,Fr).config).onSuccess)==null?void 0:f.call(h,C,n,this.state.context,this,s)),await((_=(m=this.options).onSuccess)==null?void 0:_.call(m,C,n,this.state.context,s)),await((b=(g=ee(this,Fr).config).onSettled)==null?void 0:b.call(g,C,null,this.state.variables,this.state.context,this,s)),await((w=(E=this.options).onSettled)==null?void 0:w.call(E,C,null,n,this.state.context,s)),xr(this,di,xo).call(this,{type:"success",data:C}),C}catch(C){try{await((P=(S=ee(this,Fr).config).onError)==null?void 0:P.call(S,C,n,this.state.context,this,s))}catch(L){Promise.reject(L)}try{await((O=(x=this.options).onError)==null?void 0:O.call(x,C,n,this.state.context,s))}catch(L){Promise.reject(L)}try{await((A=(I=ee(this,Fr).config).onSettled)==null?void 0:A.call(I,void 0,C,this.state.variables,this.state.context,this,s))}catch(L){Promise.reject(L)}try{await((N=(R=this.options).onSettled)==null?void 0:N.call(R,void 0,C,n,this.state.context,s))}catch(L){Promise.reject(L)}throw xr(this,di,xo).call(this,{type:"error",error:C}),C}finally{ee(this,Fr).runNext(this)}}},ff=new WeakMap,ui=new WeakMap,Fr=new WeakMap,_l=new WeakMap,di=new WeakSet,xo=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$r.batch(()=>{ee(this,ui).forEach(s=>{s.onMutationUpdate(n)}),ee(this,Fr).notify({mutation:this,type:"updated",action:n})})},NR);function yB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fi,Fs,mf,DR,vB=(DR=class extends my{constructor(e={}){super();Vt(this,Fi);Vt(this,Fs);Vt(this,mf);this.config=e,ft(this,Fi,new Set),ft(this,Fs,new Map),ft(this,mf,0)}build(e,n,r){const s=new gB({client:e,mutationCache:this,mutationId:++Zf(this,mf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){ee(this,Fi).add(e);const n=Em(e);if(typeof n=="string"){const r=ee(this,Fs).get(n);r?r.push(e):ee(this,Fs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ee(this,Fi).delete(e)){const n=Em(e);if(typeof n=="string"){const r=ee(this,Fs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&ee(this,Fs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Em(e);if(typeof n=="string"){const r=ee(this,Fs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Em(e);if(typeof n=="string"){const s=(r=ee(this,Fs).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$r.batch(()=>{ee(this,Fi).forEach(e=>{this.notify({type:"removed",mutation:e})}),ee(this,Fi).clear(),ee(this,Fs).clear()})}getAll(){return Array.from(ee(this,Fi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>nx(n,r))}findAll(e={}){return this.getAll().filter(n=>nx(e,n))}notify(e){$r.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return $r.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ur))))}},Fi=new WeakMap,Fs=new WeakMap,mf=new WeakMap,DR);function Em(t){var e;return(e=t.options.scope)==null?void 0:e.id}var hi,OR,wB=(OR=class extends my{constructor(e={}){super();Vt(this,hi);this.config=e,ft(this,hi,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??KE(s,n);let o=this.get(i);return o||(o=new fB({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){ee(this,hi).has(e.queryHash)||(ee(this,hi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ee(this,hi).get(e.queryHash);n&&(e.destroy(),n===e&&ee(this,hi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$r.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,hi).get(e)}getAll(){return[...ee(this,hi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>tx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>tx(e,r)):n}notify(e){$r.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){$r.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$r.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hi=new WeakMap,OR),Vn,Wo,qo,fu,mu,Ho,pu,gu,LR,_B=(LR=class{constructor(t={}){Vt(this,Vn);Vt(this,Wo);Vt(this,qo);Vt(this,fu);Vt(this,mu);Vt(this,Ho);Vt(this,pu);Vt(this,gu);ft(this,Vn,t.queryCache||new wB),ft(this,Wo,t.mutationCache||new vB),ft(this,qo,t.defaultOptions||{}),ft(this,fu,new Map),ft(this,mu,new Map),ft(this,Ho,0)}mount(){Zf(this,Ho)._++,ee(this,Ho)===1&&(ft(this,pu,AN.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,Vn).onFocus())})),ft(this,gu,tg.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,Vn).onOnline())})))}unmount(){var t,e;Zf(this,Ho)._--,ee(this,Ho)===0&&((t=ee(this,pu))==null||t.call(this),ft(this,pu,void 0),(e=ee(this,gu))==null||e.call(this),ft(this,gu,void 0))}isFetching(t){return ee(this,Vn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ee(this,Wo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,Vn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ee(this,Vn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(C_(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ee(this,Vn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=ee(this,Vn).get(r.queryHash),i=s==null?void 0:s.state.data,o=z5(e,i);if(o!==void 0)return ee(this,Vn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return $r.batch(()=>ee(this,Vn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,Vn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ee(this,Vn);$r.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ee(this,Vn);return $r.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=$r.batch(()=>ee(this,Vn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ur).catch(Ur)}invalidateQueries(t,e={}){return $r.batch(()=>(ee(this,Vn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=$r.batch(()=>ee(this,Vn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ur)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ur)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ee(this,Vn).build(this,e);return n.isStaleByTime(C_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ur).catch(Ur)}fetchInfiniteQuery(t){return t.behavior=ax(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ur).catch(Ur)}ensureInfiniteQueryData(t){return t.behavior=ax(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tg.isOnline()?ee(this,Wo).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,Vn)}getMutationCache(){return ee(this,Wo)}getDefaultOptions(){return ee(this,qo)}setDefaultOptions(t){ft(this,qo,t)}setQueryDefaults(t,e){ee(this,fu).set(qh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ee(this,fu).values()],n={};return e.forEach(r=>{Hh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ee(this,mu).set(qh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ee(this,mu).values()],n={};return e.forEach(r=>{Hh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ee(this,qo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=KE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===GE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ee(this,qo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ee(this,Vn).clear(),ee(this,Wo).clear()}},Vn=new WeakMap,Wo=new WeakMap,qo=new WeakMap,fu=new WeakMap,mu=new WeakMap,Ho=new WeakMap,pu=new WeakMap,gu=new WeakMap,LR),NN=v.createContext(void 0),Iee=t=>{const e=v.useContext(NN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},EB=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(NN.Provider,{value:t,children:e})),bB=["added","removed","updated"];function cx(t){return bB.includes(t)}async function SB({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();lB(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function ux({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:aB(t,r)};await e.persistClient(s)}function IB(t){const e=t.queryClient.getQueryCache().subscribe(r=>{cx(r.type)&&ux(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{cx(r.type)&&ux(t)});return()=>{e(),n()}}function TB(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=SB(t).then(()=>{e||(n=IB(t))});return[r,s]}function Wv(){}function xB({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:AB(a=>{let l=a,c=o(l),u=0;for(;c&&l;)u++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:u}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Wv,restoreClient:Wv,removeClient:Wv}}function AB(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=eg.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(this,arguments)}var Qo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qo||(Qo={}));const dx="popstate";function PB(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return ng("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Gh(s)}return DN(e,n,null,t)}function RB(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Zl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ng("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Gh(i))}function r(s,i){gy(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return DN(e,n,r,t)}function Bn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CB(){return Math.random().toString(36).substr(2,8)}function hx(t,e){return{usr:t.state,key:t.key,idx:e}}function ng(t,e,n,r){return n===void 0&&(n=null),Kh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zl(e):e,{state:n,key:e&&e.key||r||CB()})}function Gh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function DN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Qo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Kh({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Qo.Pop;let b=u(),E=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:E})}function f(b,E){a=Qo.Push;let w=ng(g.location,b,E);n&&n(w,b),c=u()+1;let S=hx(w,c),P=g.createHref(w);try{o.pushState(S,"",P)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(P)}i&&l&&l({action:a,location:g.location,delta:1})}function m(b,E){a=Qo.Replace;let w=ng(g.location,b,E);n&&n(w,b),c=u();let S=hx(w,c),P=g.createHref(w);o.replaceState(S,"",P),i&&l&&l({action:a,location:g.location,delta:0})}function _(b){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:Gh(b);return w=w.replace(/ $/,"%20"),Bn(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let g={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(dx,h),l=b,()=>{s.removeEventListener(dx,h),l=null}},createHref(b){return e(s,b)},createURL:_,encodeLocation(b){let E=_(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(b){return o.go(b)}};return g}var fx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fx||(fx={}));function kB(t,e,n){return n===void 0&&(n="/"),NB(t,e,n)}function NB(t,e,n,r){let s=typeof e=="string"?Zl(e):e,i=QE(s.pathname||"/",n);if(i==null)return null;let o=ON(t);DB(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=qB(i);a=BB(o[l],c)}return a}function ON(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Bn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ca([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Bn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ON(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:UB(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of LN(i.path))s(i,o,l)}),e}function LN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=LN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function DB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$B(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OB=/^:[\w-]+$/,LB=3,MB=2,VB=1,FB=10,jB=-2,mx=t=>t==="*";function UB(t,e){let n=t.split("/"),r=n.length;return n.some(mx)&&(r+=jB),e&&(r+=MB),n.filter(s=>!mx(s)).reduce((s,i)=>s+(OB.test(i)?LB:i===""?VB:FB),r)}function $B(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function BB(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=zB({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ca([i,h.pathname]),pathnameBase:YB(ca([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ca([i,h.pathnameBase]))}return o}function zB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WB(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const _=a[h];return m&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function WB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function qB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function QE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const HB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KB=t=>HB.test(t);function GB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Zl(t):t,i;if(n)if(KB(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),gy(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=px(n.substring(1),"/"):i=px(n,e)}else i=e;return{pathname:i,search:JB(r),hash:XB(s)}}function px(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function YE(t,e){let n=QB(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function JE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Zl(t):(s=Kh({},t),Bn(!s.pathname||!s.pathname.includes("?"),qv("?","pathname","search",s)),Bn(!s.pathname||!s.pathname.includes("#"),qv("#","pathname","hash",s)),Bn(!s.search||!s.search.includes("#"),qv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=GB(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ca=t=>t.join("/").replace(/\/\/+/g,"/"),YB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const MN=["post","put","patch","delete"];new Set(MN);const e9=["get",...MN];new Set(e9);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qh(){return Qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qh.apply(this,arguments)}const XE=v.createContext(null),t9=v.createContext(null),La=v.createContext(null),yy=v.createContext(null),ao=v.createContext({outlet:null,matches:[],isDataRoute:!1}),VN=v.createContext(null);function n9(t,e){let{relative:n}=e===void 0?{}:e;id()||Bn(!1);let{basename:r,navigator:s}=v.useContext(La),{hash:i,pathname:o,search:a}=jN(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ca([r,o])),s.createHref({pathname:l,search:a,hash:i})}function id(){return v.useContext(yy)!=null}function ei(){return id()||Bn(!1),v.useContext(yy).location}function FN(t){v.useContext(La).static||v.useLayoutEffect(t)}function ec(){let{isDataRoute:t}=v.useContext(ao);return t?p9():r9()}function r9(){id()||Bn(!1);let t=v.useContext(XE),{basename:e,future:n,navigator:r}=v.useContext(La),{matches:s}=v.useContext(ao),{pathname:i}=ei(),o=JSON.stringify(YE(s,n.v7_relativeSplatPath)),a=v.useRef(!1);return FN(()=>{a.current=!0}),v.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=JE(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ca([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}function Tee(){let{matches:t}=v.useContext(ao),e=t[t.length-1];return e?e.params:{}}function jN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=v.useContext(La),{matches:s}=v.useContext(ao),{pathname:i}=ei(),o=JSON.stringify(YE(s,r.v7_relativeSplatPath));return v.useMemo(()=>JE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function s9(t,e){return i9(t,e)}function i9(t,e,n,r){id()||Bn(!1);let{navigator:s}=v.useContext(La),{matches:i}=v.useContext(ao),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ei(),u;if(e){var h;let b=typeof e=="string"?Zl(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Bn(!1),u=b}else u=c;let f=u.pathname||"/",m=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let _=kB(t,{pathname:m}),g=u9(_&&_.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:ca([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:ca([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&g?v.createElement(yy.Provider,{value:{location:Qh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qo.Pop}},g):g}function o9(){let t=m9(),e=ZB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:s},n):null,null)}const a9=v.createElement(o9,null);class l9 extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(ao.Provider,{value:this.props.routeContext},v.createElement(VN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c9(t){let{routeContext:e,match:n,children:r}=t,s=v.useContext(XE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(ao.Provider,{value:e},r)}function u9(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Bn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:m}=n,_=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let m,_=!1,g=null,b=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||a9,l&&(c<0&&f===0?(g9("route-fallback"),_=!0,b=null):c===f&&(_=!0,b=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),w=()=>{let S;return m?S=g:_?S=b:h.route.Component?S=v.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=u,v.createElement(c9,{match:h,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(l9,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var UN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UN||{}),$N=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($N||{});function d9(t){let e=v.useContext(XE);return e||Bn(!1),e}function h9(t){let e=v.useContext(t9);return e||Bn(!1),e}function f9(t){let e=v.useContext(ao);return e||Bn(!1),e}function BN(t){let e=f9(),n=e.matches[e.matches.length-1];return n.route.id||Bn(!1),n.route.id}function m9(){var t;let e=v.useContext(VN),n=h9(),r=BN();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function p9(){let{router:t}=d9(UN.UseNavigateStable),e=BN($N.UseNavigateStable),n=v.useRef(!1);return FN(()=>{n.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Qh({fromRouteId:e},i)))},[t,e])}const gx={};function g9(t,e,n){gx[t]||(gx[t]=!0)}function zN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xee(t){let{to:e,replace:n,state:r,relative:s}=t;id()||Bn(!1);let{future:i,static:o}=v.useContext(La),{matches:a}=v.useContext(ao),{pathname:l}=ei(),c=ec(),u=JE(e,YE(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return v.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function He(t){Bn(!1)}function WN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Qo.Pop,navigator:i,static:o=!1,future:a}=t;id()&&Bn(!1);let l=e.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:l,navigator:i,static:o,future:Qh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Zl(r));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:_="default"}=r,g=v.useMemo(()=>{let b=QE(u,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:_},navigationType:s}},[l,u,h,f,m,_,s]);return g==null?null:v.createElement(La.Provider,{value:c},v.createElement(yy.Provider,{children:n,value:g}))}function yx(t){let{children:e,location:n}=t;return s9(D_(e),n)}new Promise(()=>{});function D_(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,s)=>{if(!v.isValidElement(r))return;let i=[...e,s];if(r.type===v.Fragment){n.push.apply(n,D_(r.props.children,i));return}r.type!==He&&Bn(!1),!r.props.index||!r.props.children||Bn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=D_(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O_.apply(this,arguments)}function y9(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function v9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function w9(t,e){return t.button===0&&(!e||e==="_self")&&!v9(t)}function L_(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function _9(t,e){let n=L_(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const E9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],b9="6";try{window.__reactRouterVersion=b9}catch{}const S9="startTransition",rg=Bg[S9];function I9(t){let{basename:e,children:n,future:r,window:s}=t,i=v.useRef();i.current==null&&(i.current=PB({window:s,v5Compat:!0}));let o=i.current,[a,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=v.useCallback(h=>{c&&rg?rg(()=>l(h)):l(h)},[l,c]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>zN(r),[r]),v.createElement(WN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function T9(t){let{basename:e,children:n,future:r,window:s}=t,i=v.useRef();i.current==null&&(i.current=RB({window:s,v5Compat:!0}));let o=i.current,[a,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=v.useCallback(h=>{c&&rg?rg(()=>l(h)):l(h)},[l,c]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>zN(r),[r]),v.createElement(WN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const x9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M_=v.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=y9(e,E9),{basename:m}=v.useContext(La),_,g=!1;if(typeof c=="string"&&A9.test(c)&&(_=c,x9))try{let S=new URL(window.location.href),P=c.startsWith("//")?new URL(S.protocol+c):new URL(c),x=QE(P.pathname,m);P.origin===S.origin&&x!=null?c=x+P.search+P.hash:g=!0}catch{}let b=n9(c,{relative:s}),E=P9(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function w(S){r&&r(S),S.defaultPrevented||E(S)}return v.createElement("a",O_({},f,{href:_||b,onClick:g||i?r:w,ref:n,target:l}))});var vx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vx||(vx={}));var wx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wx||(wx={}));function P9(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ec(),c=ei(),u=jN(t,{relative:o});return v.useCallback(h=>{if(w9(h,n)){h.preventDefault();let f=r!==void 0?r:Gh(c)===Gh(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function Aee(t){let e=v.useRef(L_(t)),n=v.useRef(!1),r=ei(),s=v.useMemo(()=>_9(r.search,n.current?null:e.current),[r.search]),i=ec(),o=v.useCallback((a,l)=>{const c=L_(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const qN=v.createContext(void 0),R9=({children:t})=>{const[e,n]=v.useState(()=>{if(typeof window<"u"){const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const u=localStorage.getItem(c);if(u&&["small","medium","large"].includes(u))return u}return window.innerWidth<=768?"small":"medium"}return"medium"}),[r,s]=v.useState(!1),[i,o]=v.useState(!1);v.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),v.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),v.useEffect(()=>{},[]),v.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return p.jsx(qN.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},Pee=()=>{const t=v.useContext(qN);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t};var C9=Symbol.for("react.lazy"),sg=Bg[" use ".trim().toString()];function k9(t){return typeof t=="object"&&t!==null&&"then"in t}function HN(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===C9&&"_payload"in t&&k9(t._payload)}function KN(t){const e=D9(t),n=v.forwardRef((r,s)=>{let{children:i,...o}=r;HN(i)&&typeof sg=="function"&&(i=sg(i._payload));const a=v.Children.toArray(i),l=a.find(L9);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return p.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var N9=KN("Slot");function D9(t){const e=v.forwardRef((n,r)=>{let{children:s,...i}=n;if(HN(s)&&typeof sg=="function"&&(s=sg(s._payload)),v.isValidElement(s)){const o=V9(s),a=M9(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var O9=Symbol("radix.slottable");function L9(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===O9}function M9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function V9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const F9=NE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),xt=v.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?N9:"button";return p.jsx(o,{className:vn(F9({variant:e,size:n,className:t})),ref:i,...s})});xt.displayName="Button";const nr=v.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),p.jsx("input",{type:e,className:vn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});nr.displayName="Input";const j9=()=>{};var _x={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},U9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ZE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):U9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new $9;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B9=function(t){const e=GN(t);return ZE.encodeByteArray(e,!0)},ig=function(t){return B9(t).replace(/\./g,"")},QN=function(t){try{return ZE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=()=>YN().__FIREBASE_DEFAULTS__,W9=()=>{if(typeof process>"u"||typeof _x>"u")return;const t=_x.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},q9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QN(t[1]);return e&&JSON.parse(e)},vy=()=>{try{return j9()||z9()||W9()||q9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JN=t=>{var e,n;return(n=(e=vy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},eb=t=>{const e=JN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XN=()=>{var t;return(t=vy())==null?void 0:t.config},ZN=t=>{var e;return(e=vy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function If(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ig(JSON.stringify(n)),ig(JSON.stringify(o)),""].join(".")}const fh={};function H9(){const t={prod:[],emulator:[]};for(const e of Object.keys(fh))fh[e]?t.emulator.push(e):t.prod.push(e);return t}function K9(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ex=!1;function wy(t,e){if(typeof window>"u"||typeof document>"u"||!ti(window.location.host)||fh[t]===e||fh[t]||Ex)return;fh[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=H9().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Ex=!0,o()},f}function u(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=K9(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),g=n("learnmore"),b=document.getElementById(g)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;a(S),u(b,g);const P=c();l(w,E),S.append(w,_,b,P),document.body.appendChild(S)}i?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sr())}function tD(){var e;const t=(e=vy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X9(){const t=sr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nD(){return!tD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rD(){return!tD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tb(){try{return typeof indexedDB=="object"}catch{return!1}}function Z9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez="FirebaseError";class ni extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ez,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,od.prototype.create)}}class od{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?tz(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ni(s,a,r)}}function tz(t,e){return t.replace(nz,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nz=/\{\$([^}]+)}/g;function rz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ys(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(bx(i)&&bx(o)){if(!Ys(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sz(t,e){const n=new iz(t,e);return n.subscribe.bind(n)}class iz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oz(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hv),s.error===void 0&&(s.error=Hv),s.complete===void 0&&(s.complete=Hv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ree=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new V_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cz(e))try{this.getOrInitializeService({instanceIdentifier:Xa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xa){return this.instances.has(e)}getOptions(e=Xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xa){return this.component?this.component.multipleInstances?e:Xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lz(t){return t===Xa?void 0:t}function cz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new az(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Lt||(Lt={}));const dz={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},hz=Lt.INFO,fz={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},mz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=fz[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _y{constructor(e){this.name=e,this._logLevel=hz,this._logHandler=mz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const pz=(t,e)=>e.some(n=>t instanceof n);let Sx,Ix;function gz(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yz(){return Ix||(Ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sD=new WeakMap,F_=new WeakMap,iD=new WeakMap,Kv=new WeakMap,nb=new WeakMap;function vz(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ua(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sD.set(n,t)}).catch(()=>{}),nb.set(e,t),e}function wz(t){if(F_.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});F_.set(t,e)}let j_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return F_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ua(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _z(t){j_=t(j_)}function Ez(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gv(this),e,...n);return iD.set(r,e.sort?e.sort():[e]),ua(r)}:yz().includes(t)?function(...e){return t.apply(Gv(this),e),ua(sD.get(this))}:function(...e){return ua(t.apply(Gv(this),e))}}function bz(t){return typeof t=="function"?Ez(t):(t instanceof IDBTransaction&&wz(t),pz(t,gz())?new Proxy(t,j_):t)}function ua(t){if(t instanceof IDBRequest)return vz(t);if(Kv.has(t))return Kv.get(t);const e=bz(t);return e!==t&&(Kv.set(t,e),nb.set(e,t)),e}const Gv=t=>nb.get(t);function Sz(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ua(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ua(o.result),l.oldVersion,l.newVersion,ua(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Iz=["get","getKey","getAll","getAllKeys","count"],Tz=["put","add","delete","clear"],Qv=new Map;function Tx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qv.get(e))return Qv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Tz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Iz.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Qv.set(e,i),i}_z(t=>({...t,get:(e,n,r)=>Tx(e,n)||t.get(e,n,r),has:(e,n)=>!!Tx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Az(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Az(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const U_="@firebase/app",xx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new _y("@firebase/app"),Pz="@firebase/app-compat",Rz="@firebase/analytics-compat",Cz="@firebase/analytics",kz="@firebase/app-check-compat",Nz="@firebase/app-check",Dz="@firebase/auth",Oz="@firebase/auth-compat",Lz="@firebase/database",Mz="@firebase/data-connect",Vz="@firebase/database-compat",Fz="@firebase/functions",jz="@firebase/functions-compat",Uz="@firebase/installations",$z="@firebase/installations-compat",Bz="@firebase/messaging",zz="@firebase/messaging-compat",Wz="@firebase/performance",qz="@firebase/performance-compat",Hz="@firebase/remote-config",Kz="@firebase/remote-config-compat",Gz="@firebase/storage",Qz="@firebase/storage-compat",Yz="@firebase/firestore",Jz="@firebase/ai",Xz="@firebase/firestore-compat",Zz="firebase",eW="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="[DEFAULT]",tW={[U_]:"fire-core",[Pz]:"fire-core-compat",[Cz]:"fire-analytics",[Rz]:"fire-analytics-compat",[Nz]:"fire-app-check",[kz]:"fire-app-check-compat",[Dz]:"fire-auth",[Oz]:"fire-auth-compat",[Lz]:"fire-rtdb",[Mz]:"fire-data-connect",[Vz]:"fire-rtdb-compat",[Fz]:"fire-fn",[jz]:"fire-fn-compat",[Uz]:"fire-iid",[$z]:"fire-iid-compat",[Bz]:"fire-fcm",[zz]:"fire-fcm-compat",[Wz]:"fire-perf",[qz]:"fire-perf-compat",[Hz]:"fire-rc",[Kz]:"fire-rc-compat",[Gz]:"fire-gcs",[Qz]:"fire-gcs-compat",[Yz]:"fire-fst",[Xz]:"fire-fst-compat",[Jz]:"fire-vertex","fire-js":"fire-js",[Zz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new Map,$_=new Map,B_=new Map;function Ax(t,e){try{t.container.addComponent(e)}catch(n){no.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ci(t){const e=t.name;if(B_.has(e))return no.debug(`There were multiple attempts to register component ${e}.`),!1;B_.set(e,t);for(const n of xu.values())Ax(n,t);for(const n of $_.values())Ax(n,t);return!0}function tc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nW(t,e,n=og){tc(t,e).clearInstance(n)}function Yr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},da=new od("app","Firebase",rW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw da.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=eW;function oD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:og,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw da.create("bad-app-name",{appName:String(s)});if(n||(n=XN()),!n)throw da.create("no-options");const i=xu.get(s);if(i){if(Ys(n,i.options)&&Ys(r,i.config))return i;throw da.create("duplicate-app",{appName:s})}const o=new uz(s);for(const l of B_.values())o.addComponent(l);const a=new sW(n,r,o);return xu.set(s,a),a}function Ey(t=og){const e=xu.get(t);if(!e&&t===og&&XN())return oD();if(!e)throw da.create("no-app",{appName:t});return e}async function Cee(t){let e=!1;const n=t.name;xu.has(n)?(e=!0,xu.delete(n)):$_.has(n)&&t.decRefCount()<=0&&($_.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function ys(t,e,n){let r=tW[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),no.warn(o.join(" "));return}Ci(new Js(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW="firebase-heartbeat-database",oW=1,Yh="firebase-heartbeat-store";let Yv=null;function aD(){return Yv||(Yv=Sz(iW,oW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yh)}catch(n){console.warn(n)}}}}).catch(t=>{throw da.create("idb-open",{originalErrorMessage:t.message})})),Yv}async function aW(t){try{const n=(await aD()).transaction(Yh),r=await n.objectStore(Yh).get(lD(t));return await n.done,r}catch(e){if(e instanceof ni)no.warn(e.message);else{const n=da.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});no.warn(n.message)}}}async function Px(t,e){try{const r=(await aD()).transaction(Yh,"readwrite");await r.objectStore(Yh).put(e,lD(t)),await r.done}catch(n){if(n instanceof ni)no.warn(n.message);else{const r=da.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});no.warn(r.message)}}}function lD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW=1024,cW=30;class uW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>cW){const o=fW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){no.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rx(),{heartbeatsToSend:r,unsentEntries:s}=dW(this._heartbeatsCache.heartbeats),i=ig(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return no.warn(n),""}}}function Rx(){return new Date().toISOString().substring(0,10)}function dW(t,e=lW){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Cx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tb()?Z9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aW(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cx(t){return ig(JSON.stringify({version:2,heartbeats:t})).length}function fW(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(t){Ci(new Js("platform-logger",e=>new xz(e),"PRIVATE")),Ci(new Js("heartbeat",e=>new uW(e),"PRIVATE")),ys(U_,xx,t),ys(U_,xx,"esm2020"),ys("fire-js","")}mW("");function cD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pW=cD,uD=new od("auth","Firebase",cD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new _y("@firebase/auth");function gW(t,...e){ag.logLevel<=Lt.WARN&&ag.warn(`Auth (${nc}): ${t}`,...e)}function sp(t,...e){ag.logLevel<=Lt.ERROR&&ag.error(`Auth (${nc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t,...e){throw rb(t,...e)}function Si(t,...e){return rb(t,...e)}function dD(t,e,n){const r={...pW(),[e]:n};return new od("auth","Firebase",r).create(e,{appName:t.name})}function Ki(t){return dD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uD.create(t,...e)}function at(t,e,...n){if(!t)throw rb(e,...n)}function Bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sp(e),new Error(e)}function ro(t,e){t||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function hD(){return kx()==="http:"||kx()==="https:"}function kx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hD()||Y9()||"connection"in navigator)?navigator.onLine:!0}function vW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n){this.shortDelay=e,this.longDelay=n,ro(n>e,"Short delay should be less than long delay!"),this.isMobile=G9()||J9()}get(){return yW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e){ro(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EW=new xf(3e4,6e4);function Di(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ri(t,e,n,r,s={}){return mD(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Tf({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return Q9()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ti(t.emulatorConfig.host)&&(c.credentials="include"),fD.fetch()(await pD(t,t.config.apiHost,n,a),c)})}async function mD(t,e,n){t._canInitEmulator=!1;const r={...wW,...e};try{const s=new SW(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw bm(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bm(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw bm(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw bm(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw dD(t,u,c);Xs(t,u)}}catch(s){if(s instanceof ni)throw s;Xs(t,"network-request-failed",{message:String(s)})}}async function Af(t,e,n,r,s={}){const i=await ri(t,e,n,r,s);return"mfaPendingCredential"in i&&Xs(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function pD(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?sb(t.config,s):`${t.config.apiScheme}://${s}`;return _W.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function bW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),EW.get())})}}function bm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Si(t,e,r);return s.customData._tokenResponse=n,s}function Nx(t){return t!==void 0&&t.enterprise!==void 0}class IW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TW(t,e){return ri(t,"GET","/v2/recaptchaConfig",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xW(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function cg(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AW(t,e=!1){const n=St(t),r=await n.getIdToken(e),s=ib(r);at(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:mh(Jv(s.auth_time)),issuedAtTime:mh(Jv(s.iat)),expirationTime:mh(Jv(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Jv(t){return Number(t)*1e3}function ib(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sp("JWT malformed, contained fewer than 3 sections"),null;try{const s=QN(n);return s?JSON.parse(s):(sp("Failed to decode base64 JWT payload"),null)}catch(s){return sp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Dx(t){const e=ib(t);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ni&&PW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mh(this.lastLoginAt),this.creationTime=mh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ug(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Au(t,cg(e,{idToken:n}));at(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?gD(s.providerUserInfo):[],o=kW(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new z_(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function CW(t){const e=St(t);await ug(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kW(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NW(t,e){const n=await mD(t,{},async()=>{const r=Tf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await pD(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ti(t.emulatorConfig.host)&&(l.credentials="include"),fD.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DW(t,e){return ri(t,"POST","/v2/accounts:revokeToken",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){at(e.length!==0,"internal-error");const n=Dx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await NW(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ru;return r&&(at(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(at(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(at(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ru,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,e){at(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bs{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new RW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new z_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Au(this,this.stsTokenManager.getToken(this.auth,e));return at(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AW(this,e)}reload(){return CW(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ug(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject(Ki(this.auth));const e=await this.getIdToken();return await Au(this,xW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:_,stsTokenManager:g}=n;at(h&&g,e,"internal-error");const b=ru.fromJSON(this.name,g);at(typeof h=="string",e,"internal-error"),_o(r,e.name),_o(s,e.name),at(typeof f=="boolean",e,"internal-error"),at(typeof m=="boolean",e,"internal-error"),_o(i,e.name),_o(o,e.name),_o(a,e.name),_o(l,e.name),_o(c,e.name),_o(u,e.name);const E=new Bs({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return _&&Array.isArray(_)&&(E.providerData=_.map(w=>({...w}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ru;s.updateFromServerResponse(n);const i=new Bs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ug(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];at(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gD(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ru;a.updateFromIdToken(r);const l=new Bs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new z_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new Map;function zi(t){ro(t instanceof Function,"Expected a class definition");let e=Ox.get(t);return e?(ro(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ox.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yD.type="NONE";const W_=yD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e,n){return`firebase:${t}:${e}:${n}`}class su{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ip(this.userKey,s.apiKey,i),this.fullPersistenceKey=ip("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cg(this.auth,{idToken:e}).catch(()=>{});return n?Bs._fromGetAccountInfoResponse(this.auth,n,e):null}return Bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new su(zi(W_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||zi(W_);const o=ip(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await cg(e,{idToken:u}).catch(()=>{});if(!f)break;h=await Bs._fromGetAccountInfoResponse(e,f,u)}else h=Bs._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new su(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new su(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ED(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SD(e))return"Blackberry";if(ID(e))return"Webos";if(wD(e))return"Safari";if((e.includes("chrome/")||_D(e))&&!e.includes("edge/"))return"Chrome";if(bD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vD(t=sr()){return/firefox\//i.test(t)}function wD(t=sr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _D(t=sr()){return/crios\//i.test(t)}function ED(t=sr()){return/iemobile/i.test(t)}function bD(t=sr()){return/android/i.test(t)}function SD(t=sr()){return/blackberry/i.test(t)}function ID(t=sr()){return/webos/i.test(t)}function ob(t=sr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OW(t=sr()){var e;return ob(t)&&!!((e=window.navigator)!=null&&e.standalone)}function LW(){return X9()&&document.documentMode===10}function TD(t=sr()){return ob(t)||bD(t)||ID(t)||SD(t)||/windows phone/i.test(t)||ED(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e=[]){let n;switch(t){case"Browser":n=Lx(sr());break;case"Worker":n=`${Lx(sr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VW(t,e={}){return ri(t,"GET","/v2/passwordPolicy",Di(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=6;class jW{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??FW,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mx(this),this.idTokenSubscription=new Mx(this),this.beforeStateQueue=new MW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await su.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cg(this,{idToken:e}),r=await Bs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ug(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject(Ki(this));const n=e?St(e):null;return n&&at(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yr(this.app)?Promise.reject(Ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject(Ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VW(this),n=new jW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new od("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;at(n,this,"argument-error"),this.redirectPersistenceManager=await su.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&gW(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ma(t){return St(t)}class Mx{constructor(e){this.auth=e,this.observer=null,this.addObserver=sz(n=>this.observer=n)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let by={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $W(t){by=t}function AD(t){return by.loadJS(t)}function BW(){return by.recaptchaEnterpriseScript}function zW(){return by.gapiScript}function WW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class qW{constructor(){this.enterprise=new HW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class HW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const KW="recaptcha-enterprise",PD="NO_RECAPTCHA";class GW{constructor(e){this.type=KW,this.auth=Ma(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{TW(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new IW(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Nx(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(PD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qW().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Nx(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=BW();l.length!==0&&(l+=a),AD(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Vx(t,e,n,r=!1,s=!1){const i=new GW(t);let o;if(s)o=PD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function dg(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Vx(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Vx(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e){const n=tc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ys(i,e??{}))return s;Xs(s,"already-initialized")}return n.initialize({options:e})}function QW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YW(t,e,n){const r=Ma(t);at(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=CD(e),{host:o,port:a}=JW(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){at(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),at(Ys(c,r.config.emulator)&&Ys(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ti(o)?(If(`${i}//${o}${l}`),wy("Auth",!0)):XW()}function CD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JW(t){const e=CD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Fx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Fx(o)}}}function Fx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,n){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function ZW(t,e){return ri(t,"POST","/v1/accounts:update",e)}async function e8(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(t,e){return Af(t,"POST","/v1/accounts:signInWithPassword",Di(t,e))}async function n8(t,e){return ri(t,"POST","/v1/accounts:sendOobCode",Di(t,e))}async function r8(t,e){return n8(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s8(t,e){return Af(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,e))}async function i8(t,e){return Af(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends ab{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Jh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,n,"signInWithPassword",t8);case"emailLink":return s8(e,{email:this._email,oobCode:this._password});default:Xs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,r,"signUpPassword",e8);case"emailLink":return i8(e,{idToken:n,email:this._email,oobCode:this._password});default:Xs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t,e){return Af(t,"POST","/v1/accounts:signInWithIdp",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="http://localhost";class Ll extends ab{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ll(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ll(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return iu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,iu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,iu(e,n)}buildRequest(){const e={requestUri:o8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l8(t){const e=Kd(Gd(t)).link,n=e?Kd(Gd(e)).deep_link_id:null,r=Kd(Gd(t)).deep_link_id;return(r?Kd(Gd(r)).link:null)||r||n||e||t}class lb{constructor(e){const n=Kd(Gd(e)),r=n.apiKey??null,s=n.oobCode??null,i=a8(n.mode??null);at(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=l8(e);try{return new lb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.providerId=rc.PROVIDER_ID}static credential(e,n){return Jh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=lb.parseLink(n);return at(r,"argument-error"),Jh._fromEmailAndCode(e,r.code,r.tenantId)}}rc.PROVIDER_ID="password";rc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends kD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Pf{constructor(){super("facebook.com")}static credential(e){return Ll._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lo.credential(e.oauthAccessToken)}catch{return null}}}Lo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Pf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ll._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mo.credential(n,r)}catch{return null}}}Mo.GOOGLE_SIGN_IN_METHOD="google.com";Mo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Pf{constructor(){super("github.com")}static credential(e){return Ll._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vo.credential(e.oauthAccessToken)}catch{return null}}}Vo.GITHUB_SIGN_IN_METHOD="github.com";Vo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Pf{constructor(){super("twitter.com")}static credential(e,n){return Ll._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Fo.credential(n,r)}catch{return null}}}Fo.TWITTER_SIGN_IN_METHOD="twitter.com";Fo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(t,e){return Af(t,"POST","/v1/accounts:signUp",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Bs._fromIdTokenResponse(e,r,s),o=jx(r);return new Ml({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=jx(r);return new Ml({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function jx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg extends ni{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,hg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new hg(e,n,r,s)}}function ND(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?hg._fromErrorAndOperation(t,i,e,r):i})}async function u8(t,e,n=!1){const r=await Au(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ml._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t,e,n=!1){const{auth:r}=t;if(Yr(r.app))return Promise.reject(Ki(r));const s="reauthenticate";try{const i=await Au(t,ND(r,s,e,t),n);at(i.idToken,r,"internal-error");const o=ib(i.idToken);at(o,r,"internal-error");const{sub:a}=o;return at(t.uid===a,r,"user-mismatch"),Ml._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xs(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(t,e,n=!1){if(Yr(t.app))return Promise.reject(Ki(t));const r="signIn",s=await ND(t,r,e),i=await Ml._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function d8(t,e){return OD(Ma(t),e)}async function h8(t,e){return DD(St(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t){const e=Ma(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function f8(t,e,n){const r=Ma(t);await dg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",r8)}async function Ux(t,e,n){if(Yr(t.app))return Promise.reject(Ki(t));const r=Ma(t),o=await dg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c8).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&LD(t),l}),a=await Ml._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function m8(t,e,n){return Yr(t.app)?Promise.reject(Ki(t)):d8(St(t),rc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p8(t,e){return ri(t,"POST","/v1/accounts:createAuthUri",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g8(t,e){const n=hD()?lg():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await p8(St(t),r);return s||[]}function kee(t,e){return y8(St(t),null,e)}async function y8(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Au(t,ZW(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t,e){return St(t).setPersistence(e)}function w8(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function _8(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function E8(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}function $x(t){return St(t).signOut()}const fg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fg,"1"),this.storage.removeItem(fg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=1e3,S8=10;class VD extends MD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);LW()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,S8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},b8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VD.type="LOCAL";const cb=VD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD extends MD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}FD.type="SESSION";const ub=FD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Sy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await I8(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=db("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function x8(t){Ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function A8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function R8(){return jD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="firebaseLocalStorageDb",C8=1,mg="firebaseLocalStorage",$D="fbase_key";class Rf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Iy(t,e){return t.transaction([mg],e?"readwrite":"readonly").objectStore(mg)}function k8(){const t=indexedDB.deleteDatabase(UD);return new Rf(t).toPromise()}function q_(){const t=indexedDB.open(UD,C8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mg,{keyPath:$D})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mg)?e(r):(r.close(),await k8(),e(await q_()))})})}async function Bx(t,e,n){const r=Iy(t,!0).put({[$D]:e,value:n});return new Rf(r).toPromise()}async function N8(t,e){const n=Iy(t,!1).get(e),r=await new Rf(n).toPromise();return r===void 0?null:r.value}function zx(t,e){const n=Iy(t,!0).delete(e);return new Rf(n).toPromise()}const D8=800,O8=3;class BD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await q_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>O8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sy._getInstance(R8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await A8(),!this.activeServiceWorker)return;this.sender=new T8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await q_();return await Bx(e,fg,"1"),await zx(e,fg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Bx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>N8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Iy(s,!1).getAll();return new Rf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BD.type="LOCAL";const L8=BD;new xf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t,e){return e?zi(e):(at(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends ab{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return iu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return iu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function V8(t){return OD(t.auth,new hb(t),t.bypassAuthState)}function F8(t){const{auth:e,user:n}=t;return at(n,e,"internal-error"),DD(n,new hb(t),t.bypassAuthState)}async function j8(t){const{auth:e,user:n}=t;return at(n,e,"internal-error"),u8(n,new hb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V8;case"linkViaPopup":case"linkViaRedirect":return j8;case"reauthViaPopup":case"reauthViaRedirect":return F8;default:Xs(this.auth,"internal-error")}}resolve(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=new xf(2e3,1e4);class Bc extends zD{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Bc.currentPopupAction&&Bc.currentPopupAction.cancel(),Bc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return at(e,this.auth,"internal-error"),e}async onExecution(){ro(this.filter.length===1,"Popup operations only handle one event");const e=db();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U8.get())};e()}}Bc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8="pendingRedirect",op=new Map;class B8 extends zD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=op.get(this.auth._key());if(!e){try{const r=await z8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}op.set(this.auth._key(),e)}return this.bypassAuthState||op.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z8(t,e){const n=H8(e),r=q8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function W8(t,e){op.set(t._key(),e)}function q8(t){return zi(t._redirectPersistence)}function H8(t){return ip($8,t.config.apiKey,t.name)}async function K8(t,e,n=!1){if(Yr(t.app))return Promise.reject(Ki(t));const r=Ma(t),s=M8(r,e),o=await new B8(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=10*60*1e3;class Q8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WD(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=G8&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wx(e))}saveEventToCache(e){this.cachedEventUids.add(Wx(e)),this.lastProcessedEventTime=Date.now()}}function Wx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Y8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z8=/^https?/;async function eq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J8(t);for(const n of e)try{if(tq(n))return}catch{}Xs(t,"unauthorized-domain")}function tq(t){const e=lg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Z8.test(n))return!1;if(X8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq=new xf(3e4,6e4);function qx(){const t=Ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rq(t){return new Promise((e,n)=>{var s,i,o;function r(){qx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qx(),n(Si(t,"network-request-failed"))},timeout:nq.get()})}if((i=(s=Ii().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Ii().gapi)!=null&&o.load)r();else{const a=WW("iframefcb");return Ii()[a]=()=>{gapi.load?r():n(Si(t,"network-request-failed"))},AD(`${zW()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ap=null,e})}let ap=null;function sq(t){return ap=ap||rq(t),ap}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq=new xf(5e3,15e3),oq="__/auth/iframe",aq="emulator/auth/iframe",lq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uq(t){const e=t.config;at(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sb(e,aq):`https://${t.config.authDomain}/${oq}`,r={apiKey:e.apiKey,appName:t.name,v:nc},s=cq.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Tf(r).slice(1)}`}async function dq(t){const e=await sq(t),n=Ii().gapi;return at(n,t,"internal-error"),e.open({where:document.body,url:uq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lq,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Si(t,"network-request-failed"),a=Ii().setTimeout(()=>{i(o)},iq.get());function l(){Ii().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fq=500,mq=600,pq="_blank",gq="http://localhost";class Hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yq(t,e,n,r=fq,s=mq){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...hq,width:r.toString(),height:s.toString(),top:i,left:o},c=sr().toLowerCase();n&&(a=_D(c)?pq:n),vD(c)&&(e=e||gq,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[m,_])=>`${f}${m}=${_},`,"");if(OW(c)&&a!=="_self")return vq(e||"",a),new Hx(null);const h=window.open(e||"",a,u);at(h,t,"popup-blocked");try{h.focus()}catch{}return new Hx(h)}function vq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq="__/auth/handler",_q="emulator/auth/handler",Eq=encodeURIComponent("fac");async function Kx(t,e,n,r,s,i){at(t.config.authDomain,t,"auth-domain-config-required"),at(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:nc,eventId:s};if(e instanceof kD){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Pf){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${Eq}=${encodeURIComponent(l)}`:"";return`${bq(t)}?${Tf(a).slice(1)}${c}`}function bq({config:t}){return t.emulator?sb(t,_q):`https://${t.authDomain}/${wq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="webStorageSupport";class Sq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ub,this._completeRedirectFn=K8,this._overrideRedirectResult=W8}async _openPopup(e,n,r,s){var o;ro((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Kx(e,n,r,lg(),s);return yq(e,i,db())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Kx(e,n,r,lg(),s);return x8(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ro(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dq(e),r=new Q8(e);return n.register("authEvent",s=>(at(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xv,{type:Xv},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Xv];i!==void 0&&n(!!i),Xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TD()||wD()||ob()}}const Iq=Sq;var Gx="@firebase/auth",Qx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Aq(t){Ci(new Js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;at(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xD(t)},c=new UW(r,s,i,l);return QW(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ci(new Js("auth-internal",e=>{const n=Ma(e.getProvider("auth").getImmediate());return(r=>new Tq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(Gx,Qx,xq(t)),ys(Gx,Qx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq=5*60,Rq=ZN("authIdTokenMaxAge")||Pq;let Yx=null;const Cq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Rq)return;const s=n==null?void 0:n.token;Yx!==s&&(Yx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Nee(t=Ey()){const e=tc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RD(t,{popupRedirectResolver:Iq,persistence:[L8,cb,ub]}),r=ZN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Cq(i.toString());_8(n,o,()=>o(n.currentUser)),w8(n,a=>o(a))}}const s=JN("auth");return s&&YW(n,`http://${s}`),n}function kq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}$W({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Si("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",kq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Aq("Browser");var Nq="firebase",Dq="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(Nq,Dq,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq=new Map,Lq={activated:!1,tokenObservers:[]},Mq={initialized:!1,enabled:!1};function Zs(t){return Oq.get(t)||{...Lq}}function qD(){return Mq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq="https://content-firebaseappcheck.googleapis.com/v1";const Fq="exchangeDebugToken",Jx={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Dee=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new V_,this.pending.promise.catch(n=>{}),await Uq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new V_,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Uq(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Yo=new od("appCheck","AppCheck",$q);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){if(!Zs(t).activated)throw Yo.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw Yo.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw Yo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Yo.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Yo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+c,issuedAtTimeMillis:u}}function GD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Vq}/projects/${n}/apps/${r}:${Fq}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq="firebase-app-check-database",zq=1,H_="firebase-app-check-store";let Sm=null;function Wq(){return Sm||(Sm=new Promise((t,e)=>{try{const n=indexedDB.open(Bq,zq);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Yo.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(H_,{keyPath:"compositeKey"})}}}catch(n){e(Yo.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Sm)}function qq(t,e){return Hq(Kq(t),e)}async function Hq(t,e){const r=(await Wq()).transaction(H_,"readwrite"),i=r.objectStore(H_).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Yo.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function Kq(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new _y("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e){return tb()?qq(t,e).catch(n=>{Qd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return qD().enabled}async function YD(){const t=qD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq={error:"UNKNOWN_ERROR"};function Qq(t){return ZE.encodeString(JSON.stringify(t),!1)}async function K_(t,e=!1,n=!1){const r=t.app;HD(r);const s=Zs(r);let i=s.token,o;if(i&&!Yd(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Yd(c)?i=c:await Zv(r,void 0))}if(!e&&i&&Yd(i))return{token:i.token};let a=!1;if(QD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=KD(GD(r,await YD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Zv(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Qd.warn(c.message):n&&Qd.error(c),ew(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Zs(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Qd.warn(c.message):n&&Qd.error(c),o=c}let l;return i?o?Yd(i)?l={token:i.token,internalError:o}:l=ew(o):(l={token:i.token},s.token=i,await Zv(r,i)):l=ew(o),a&&Zq(r,l),l}async function Yq(t){const e=t.app;HD(e);const{provider:n}=Zs(e);if(QD()){const r=await YD(),{token:s}=await KD(GD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function Jq(t,e,n,r){const{app:s}=t,i=Zs(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Yd(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),Xx(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Xx(t))}function JD(t,e){const n=Zs(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Xx(t){const{app:e}=t,n=Zs(e);let r=n.tokenRefresher;r||(r=Xq(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Xq(t){const{app:e}=t;return new jq(async()=>{const n=Zs(e);let r;if(n.token?r=await K_(t,!0):r=await K_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Zs(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},Jx.RETRIAL_MIN_WAIT,Jx.RETRIAL_MAX_WAIT)}function Zq(t,e){const n=Zs(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Yd(t){return t.expireTimeMillis-Date.now()>0}function ew(t){return{token:Qq(Gq),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Zs(this.app);for(const n of e)JD(this.app,n.next);return Promise.resolve()}}function t7(t,e){return new e7(t,e)}function n7(t){return{getToken:e=>K_(t,e),getLimitedUseToken:()=>Yq(t),addTokenListener:e=>Jq(t,"INTERNAL",e),removeTokenListener:e=>JD(t.app,e)}}const r7="@firebase/app-check",s7="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="app-check",Zx="app-check-internal";function o7(){Ci(new Js(i7,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return t7(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Zx).initialize()})),Ci(new Js(Zx,t=>{const e=t.getProvider("app-check").getImmediate();return n7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ys(r7,s7)}o7();var eA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ha,XD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function R(){}R.prototype=A.prototype,I.F=A.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(N,C,L){for(var D=Array(arguments.length-2),X=2;X<arguments.length;X++)D[X-2]=arguments[X];return A.prototype[C].apply(N,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,R){R||(R=0);const N=Array(16);if(typeof A=="string")for(var C=0;C<16;++C)N[C]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(C=0;C<16;++C)N[C]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=I.g[0],R=I.g[1],C=I.g[2];let L=I.g[3],D;D=A+(L^R&(C^L))+N[0]+3614090360&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[1]+3905402710&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[2]+606105819&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[3]+3250441966&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(L^R&(C^L))+N[4]+4118548399&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[5]+1200080426&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[6]+2821735955&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[7]+4249261313&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(L^R&(C^L))+N[8]+1770035416&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[9]+2336552879&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[10]+4294925233&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[11]+2304563134&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(L^R&(C^L))+N[12]+1804603682&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[13]+4254626195&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[14]+2792965006&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[15]+1236535329&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(C^L&(R^C))+N[1]+4129170786&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[6]+3225465664&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[11]+643717713&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[0]+3921069994&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(C^L&(R^C))+N[5]+3593408605&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[10]+38016083&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[15]+3634488961&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[4]+3889429448&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(C^L&(R^C))+N[9]+568446438&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[14]+3275163606&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[3]+4107603335&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[8]+1163531501&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(C^L&(R^C))+N[13]+2850285829&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[2]+4243563512&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[7]+1735328473&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[12]+2368359562&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(R^C^L)+N[5]+4294588738&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[8]+2272392833&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[11]+1839030562&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[14]+4259657740&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(R^C^L)+N[1]+2763975236&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[4]+1272893353&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[7]+4139469664&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[10]+3200236656&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(R^C^L)+N[13]+681279174&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[0]+3936430074&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[3]+3572445317&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[6]+76029189&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(R^C^L)+N[9]+3654602809&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[12]+3873151461&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[15]+530742520&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[2]+3299628645&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(C^(R|~L))+N[0]+4096336452&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[7]+1126891415&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[14]+2878612391&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[5]+4237533241&4294967295,R=C+(D<<21&4294967295|D>>>11),D=A+(C^(R|~L))+N[12]+1700485571&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[3]+2399980690&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[10]+4293915773&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[1]+2240044497&4294967295,R=C+(D<<21&4294967295|D>>>11),D=A+(C^(R|~L))+N[8]+1873313359&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[15]+4264355552&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[6]+2734768916&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[13]+1309151649&4294967295,R=C+(D<<21&4294967295|D>>>11),D=A+(C^(R|~L))+N[4]+4149444226&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[11]+3174756917&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[2]+718787259&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+L&4294967295}r.prototype.v=function(I,A){A===void 0&&(A=I.length);const R=A-this.blockSize,N=this.C;let C=this.h,L=0;for(;L<A;){if(C==0)for(;L<=R;)s(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<A;)if(N[C++]=I.charCodeAt(L++),C==this.blockSize){s(this,N),C=0;break}}else for(;L<A;)if(N[C++]=I[L++],C==this.blockSize){s(this,N),C=0;break}}this.h=C,this.o+=A},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)I[A++]=this.g[R]>>>N&255;return I};function i(I,A){var R=a;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=A(I)}function o(I,A){this.h=A;const R=[];let N=!0;for(let C=I.length-1;C>=0;C--){const L=I[C]|0;N&&L==A||(R[C]=L,N=!1)}this.g=R}var a={};function l(I){return-128<=I&&I<128?i(I,function(A){return new o([A|0],A<0?-1:0)}):new o([I|0],I<0?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(I<0)return b(c(-I));const A=[];let R=1;for(let N=0;I>=R;N++)A[N]=I/R|0,R*=4294967296;return new o(A,0)}function u(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return b(u(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(A,8));let N=h;for(let L=0;L<I.length;L+=8){var C=Math.min(8,I.length-L);const D=parseInt(I.substring(L,L+C),A);C<8?(C=c(Math.pow(A,C)),N=N.j(C).add(c(D))):(N=N.j(R),N=N.add(c(D)))}return N}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-b(this).m();let I=0,A=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);I+=(N>=0?N:4294967296+N)*A,A*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(g(this))return"-"+b(this).toString(I);const A=c(Math.pow(I,6));var R=this;let N="";for(;;){const C=P(R,A).g;R=E(R,C.j(A));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=C,_(R))return L+N;for(;L.length<6;)L="0"+L;N=L+N}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function g(I){return I.h==-1}t.l=function(I){return I=E(this,I),g(I)?-1:_(I)?0:1};function b(I){const A=I.g.length,R=[];for(let N=0;N<A;N++)R[N]=~I.g[N];return new o(R,~I.h).add(f)}t.abs=function(){return g(this)?b(this):this},t.add=function(I){const A=Math.max(this.g.length,I.g.length),R=[];let N=0;for(let C=0;C<=A;C++){let L=N+(this.i(C)&65535)+(I.i(C)&65535),D=(L>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);N=D>>>16,L&=65535,D&=65535,R[C]=D<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function E(I,A){return I.add(b(A))}t.j=function(I){if(_(this)||_(I))return h;if(g(this))return g(I)?b(this).j(b(I)):b(b(this).j(I));if(g(I))return b(this.j(b(I)));if(this.l(m)<0&&I.l(m)<0)return c(this.m()*I.m());const A=this.g.length+I.g.length,R=[];for(var N=0;N<2*A;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let C=0;C<I.g.length;C++){const L=this.i(N)>>>16,D=this.i(N)&65535,X=I.i(C)>>>16,Ae=I.i(C)&65535;R[2*N+2*C]+=D*Ae,w(R,2*N+2*C),R[2*N+2*C+1]+=L*Ae,w(R,2*N+2*C+1),R[2*N+2*C+1]+=D*X,w(R,2*N+2*C+1),R[2*N+2*C+2]+=L*X,w(R,2*N+2*C+2)}for(I=0;I<A;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=A;I<2*A;I++)R[I]=0;return new o(R,0)};function w(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function S(I,A){this.g=I,this.h=A}function P(I,A){if(_(A))throw Error("division by zero");if(_(I))return new S(h,h);if(g(I))return A=P(b(I),A),new S(b(A.g),b(A.h));if(g(A))return A=P(I,b(A)),new S(b(A.g),A.h);if(I.g.length>30){if(g(I)||g(A))throw Error("slowDivide_ only works with positive integers.");for(var R=f,N=A;N.l(I)<=0;)R=x(R),N=x(N);var C=O(R,1),L=O(N,1);for(N=O(N,2),R=O(R,2);!_(N);){var D=L.add(N);D.l(I)<=0&&(C=C.add(R),L=D),N=O(N,1),R=O(R,1)}return A=E(I,C.j(A)),new S(C,A)}for(C=h;I.l(A)>=0;){for(R=Math.max(1,Math.floor(I.m()/A.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),L=c(R),D=L.j(A);g(D)||D.l(I)>0;)R-=N,L=c(R),D=L.j(A);_(L)&&(L=f),C=C.add(L),I=E(I,D)}return new S(C,I)}t.B=function(I){return P(this,I).h},t.and=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)&I.i(N);return new o(R,this.h&I.h)},t.or=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)|I.i(N);return new o(R,this.h|I.h)},t.xor=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)^I.i(N);return new o(R,this.h^I.h)};function x(I){const A=I.g.length+1,R=[];for(let N=0;N<A;N++)R[N]=I.i(N)<<1|I.i(N-1)>>>31;return new o(R,I.h)}function O(I,A){const R=A>>5;A%=32;const N=I.g.length-R,C=[];for(let L=0;L<N;L++)C[L]=A>0?I.i(L+R)>>>A|I.i(L+R+1)<<32-A:I.i(L+R);return new o(C,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,XD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,ha=o}).apply(typeof eA<"u"?eA:typeof self<"u"?self:typeof window<"u"?window:{});var Im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZD,Jd,e2,lp,G_,t2,n2,r2;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Im=="object"&&Im];for(var y=0;y<d.length;++y){var T=d[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var T=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var j=d[k];if(!(j in T))break e;T=T[j]}d=d[d.length-1],k=T[d],y=y(k),y!=k&&y!=null&&e(T,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var T=[],k;for(k in y)Object.prototype.hasOwnProperty.call(y,k)&&T.push([k,y[k]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function l(d,y,T){return d.call.apply(d.bind,arguments)}function c(d,y,T){return c=l,c.apply(null,arguments)}function u(d,y){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function h(d,y){function T(){}T.prototype=y.prototype,d.Z=y.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(k,j,H){for(var Ee=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)Ee[Et-2]=arguments[Et];return y.prototype[j].apply(k,Ee)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function m(d){const y=d.length;if(y>0){const T=Array(y);for(let k=0;k<y;k++)T[k]=d[k];return T}return[]}function _(d,y){for(let k=1;k<arguments.length;k++){const j=arguments[k];var T=typeof j;if(T=T!="object"?T:j?Array.isArray(j)?"array":T:"null",T=="array"||T=="object"&&typeof j.length=="number"){T=d.length||0;const H=j.length||0;d.length=T+H;for(let Ee=0;Ee<H;Ee++)d[T+Ee]=j[Ee]}else d.push(j)}}class g{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function b(d){o.setTimeout(()=>{throw d},0)}function E(){var d=I;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class w{constructor(){this.h=this.g=null}add(y,T){const k=S.get();k.set(y,T),this.h?this.h.next=k:this.g=k,this.h=k}}var S=new g(()=>new P,d=>d.reset());class P{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let x,O=!1,I=new w,A=()=>{const d=Promise.resolve(void 0);x=()=>{d.then(R)}};function R(){for(var d;d=E();){try{d.h.call(d.g)}catch(T){b(T)}var y=S;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}O=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};o.addEventListener("test",T,y),o.removeEventListener("test",T,y)}catch{}return d}();function D(d){return/^[\s\xa0]*$/.test(d)}function X(d,y){C.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}h(X,C),X.prototype.init=function(d,y){const T=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(T=="mouseover"?y=d.fromElement:T=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),ke=0;function Fe(d,y,T,k,j){this.listener=d,this.proxy=null,this.src=y,this.type=T,this.capture=!!k,this.ha=j,this.key=++ke,this.da=this.fa=!1}function W(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function K(d,y,T){for(const k in d)y.call(T,d[k],k,d)}function ie(d,y){for(const T in d)y.call(void 0,d[T],T,d)}function le(d){const y={};for(const T in d)y[T]=d[T];return y}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Le(d,y){let T,k;for(let j=1;j<arguments.length;j++){k=arguments[j];for(T in k)d[T]=k[T];for(let H=0;H<fe.length;H++)T=fe[H],Object.prototype.hasOwnProperty.call(k,T)&&(d[T]=k[T])}}function Pe(d){this.src=d,this.g={},this.h=0}Pe.prototype.add=function(d,y,T,k,j){const H=d.toString();d=this.g[H],d||(d=this.g[H]=[],this.h++);const Ee=et(d,y,k,j);return Ee>-1?(y=d[Ee],T||(y.fa=!1)):(y=new Fe(y,this.src,H,!!k,j),y.fa=T,d.push(y)),y};function Q(d,y){const T=y.type;if(T in d.g){var k=d.g[T],j=Array.prototype.indexOf.call(k,y,void 0),H;(H=j>=0)&&Array.prototype.splice.call(k,j,1),H&&(W(y),d.g[T].length==0&&(delete d.g[T],d.h--))}}function et(d,y,T,k){for(let j=0;j<d.length;++j){const H=d[j];if(!H.da&&H.listener==y&&H.capture==!!T&&H.ha==k)return j}return-1}var nt="closure_lm_"+(Math.random()*1e6|0),Tn={};function Wn(d,y,T,k,j){if(Array.isArray(y)){for(let H=0;H<y.length;H++)Wn(d,y[H],T,k,j);return null}return T=Ke(T),d&&d[Ae]?d.J(y,T,a(k)?!!k.capture:!1,j):an(d,y,T,!1,k,j)}function an(d,y,T,k,j,H){if(!y)throw Error("Invalid event type");const Ee=a(j)?!!j.capture:!!j;let Et=ce(d);if(Et||(d[nt]=Et=new Pe(d)),T=Et.add(y,T,k,Ee,H),T.proxy)return T;if(k=Qn(),T.proxy=k,k.src=d,k.listener=T,d.addEventListener)L||(j=Ee),j===void 0&&(j=!1),d.addEventListener(y.toString(),k,j);else if(d.attachEvent)d.attachEvent(qr(y.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Qn(){function d(T){return y.call(d.src,d.listener,T)}const y=Y;return d}function Yn(d,y,T,k,j){if(Array.isArray(y))for(var H=0;H<y.length;H++)Yn(d,y[H],T,k,j);else k=a(k)?!!k.capture:!!k,T=Ke(T),d&&d[Ae]?(d=d.i,H=String(y).toString(),H in d.g&&(y=d.g[H],T=et(y,T,k,j),T>-1&&(W(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete d.g[H],d.h--)))):d&&(d=ce(d))&&(y=d.g[y.toString()],d=-1,y&&(d=et(y,T,k,j)),(T=d>-1?y[d]:null)&&Jn(T))}function Jn(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Ae])Q(y.i,d);else{var T=d.type,k=d.proxy;y.removeEventListener?y.removeEventListener(T,k,d.capture):y.detachEvent?y.detachEvent(qr(T),k):y.addListener&&y.removeListener&&y.removeListener(k),(T=ce(y))?(Q(T,d),T.h==0&&(T.src=null,y[nt]=null)):W(d)}}}function qr(d){return d in Tn?Tn[d]:Tn[d]="on"+d}function Y(d,y){if(d.da)d=!0;else{y=new X(y,this);const T=d.listener,k=d.ha||d.src;d.fa&&Jn(d),d=T.call(k,y)}return d}function ce(d){return d=d[nt],d instanceof Pe?d:null}var ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ke(d){return typeof d=="function"?d:(d[ye]||(d[ye]=function(y){return d.handleEvent(y)}),d[ye])}function ue(){N.call(this),this.i=new Pe(this),this.M=this,this.G=null}h(ue,N),ue.prototype[Ae]=!0,ue.prototype.removeEventListener=function(d,y,T,k){Yn(this,d,y,T,k)};function Ie(d,y){var T,k=d.G;if(k)for(T=[];k;k=k.G)T.push(k);if(d=d.M,k=y.type||y,typeof y=="string")y=new C(y,d);else if(y instanceof C)y.target=y.target||d;else{var j=y;y=new C(k,d),Le(y,j)}j=!0;let H,Ee;if(T)for(Ee=T.length-1;Ee>=0;Ee--)H=y.g=T[Ee],j=Me(H,k,!0,y)&&j;if(H=y.g=d,j=Me(H,k,!0,y)&&j,j=Me(H,k,!1,y)&&j,T)for(Ee=0;Ee<T.length;Ee++)H=y.g=T[Ee],j=Me(H,k,!1,y)&&j}ue.prototype.N=function(){if(ue.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const T=d.g[y];for(let k=0;k<T.length;k++)W(T[k]);delete d.g[y],d.h--}}this.G=null},ue.prototype.J=function(d,y,T,k){return this.i.add(String(d),y,!1,T,k)},ue.prototype.K=function(d,y,T,k){return this.i.add(String(d),y,!0,T,k)};function Me(d,y,T,k){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let j=!0;for(let H=0;H<y.length;++H){const Ee=y[H];if(Ee&&!Ee.da&&Ee.capture==T){const Et=Ee.listener,er=Ee.ha||Ee.src;Ee.fa&&Q(d.i,Ee),j=Et.call(er,k)!==!1&&j}}return j&&!k.defaultPrevented}function Ge(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=c(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(d,y||0)}function z(d){d.g=Ge(()=>{d.g=null,d.i&&(d.i=!1,z(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class be extends N{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:z(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(d){N.call(this),this.h=d,this.g={}}h(Ne,N);var pe=[];function Qe(d){K(d.g,function(y,T){this.g.hasOwnProperty(T)&&Jn(y)},d),d.g={}}Ne.prototype.N=function(){Ne.Z.N.call(this),Qe(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var st=o.JSON.stringify,We=o.JSON.parse,re=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Ye(){}function It(){}var kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function On(){C.call(this,"d")}h(On,C);function Ir(){C.call(this,"c")}h(Ir,C);var Ln={},q=null;function U(){return q=q||new ue}Ln.Ia="serverreachability";function F(d){C.call(this,Ln.Ia,d)}h(F,C);function Z(d){const y=U();Ie(y,new F(y))}Ln.STAT_EVENT="statevent";function G(d,y){C.call(this,Ln.STAT_EVENT,d),this.stat=y}h(G,C);function J(d){const y=U();Ie(y,new G(y,d))}Ln.Ja="timingevent";function ne(d,y){C.call(this,Ln.Ja,d),this.size=y}h(ne,C);function De(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},y)}function oe(){this.g=!0}oe.prototype.ua=function(){this.g=!1};function de(d,y,T,k,j,H){d.info(function(){if(d.g)if(H){var Ee="",Et=H.split("&");for(let sn=0;sn<Et.length;sn++){var er=Et[sn].split("=");if(er.length>1){const lr=er[0];er=er[1];const ii=lr.split("_");Ee=ii.length>=2&&ii[1]=="type"?Ee+(lr+"="+er+"&"):Ee+(lr+"=redacted&")}}}else Ee=null;else Ee=H;return"XMLHTTP REQ ("+k+") [attempt "+j+"]: "+y+`
`+T+`
`+Ee})}function he(d,y,T,k,j,H,Ee){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+j+"]: "+y+`
`+T+`
`+H+" "+Ee})}function ge(d,y,T,k){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Re(d,T)+(k?" "+k:"")})}function _e(d,y){d.info(function(){return"TIMEOUT: "+y})}oe.prototype.info=function(){};function Re(d,y){if(!d.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(d=0;d<H.length;d++)if(Array.isArray(H[d])){var T=H[d];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(let Ee=1;Ee<k.length;Ee++)k[Ee]=""}}}}return st(H)}catch{return y}}var Ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ot={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ue;function zt(){}h(zt,Ye),zt.prototype.g=function(){return new XMLHttpRequest},Ue=new zt;function jt(d){return encodeURIComponent(String(d))}function At(d){var y=1;d=d.split(":");const T=[];for(;y>0&&d.length;)T.push(d.shift()),y--;return d.length&&T.push(d.join(":")),T}function Ut(d,y,T,k){this.j=d,this.i=y,this.l=T,this.S=k||1,this.V=new Ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rt}function rt(){this.i=null,this.g="",this.h=!1}var Xn={},vt={};function Wt(d,y,T){d.M=1,d.A=Mr(rn(y)),d.u=T,d.R=!0,pt(d,null)}function pt(d,y){d.F=Date.now(),qe(d),d.B=rn(d.A);var T=d.B,k=d.S;Array.isArray(k)||(k=[String(k)]),qS(T.i,"t",k),d.C=0,T=d.j.L,d.h=new rt,d.g=cI(d.j,T?y:null,!d.u),d.P>0&&(d.O=new be(c(d.Y,d,d.g),d.P)),y=d.V,T=d.g,k=d.ba;var j="readystatechange";Array.isArray(j)||(j&&(pe[0]=j.toString()),j=pe);for(let H=0;H<j.length;H++){const Ee=Wn(T,j[H],k||y.handleEvent,!1,y.h||y);if(!Ee)break;y.g[Ee.key]=Ee}y=d.J?le(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Z(),de(d.i,d.v,d.B,d.l,d.S,d.u)}Ut.prototype.ba=function(d){d=d.target;const y=this.O;y&&mo(d)==3?y.j():this.Y(d)},Ut.prototype.Y=function(d){try{if(d==this.g)e:{const Et=mo(this.g),er=this.g.ya(),sn=this.g.ca();if(!(Et<3)&&(Et!=3||this.g&&(this.h.h||this.g.la()||XS(this.g)))){this.K||Et!=4||er==7||(er==8||sn<=0?Z(3):Z(2)),ct(this);var y=this.g.ca();this.X=y;var T=Ht(this);if(this.o=y==200,he(this.i,this.v,this.B,this.l,this.S,Et,y),this.o){if(this.U&&!this.L){t:{if(this.g){var k,j=this.g;if((k=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(k)){var H=k;break t}}H=null}if(d=H)ge(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tt(this,d);else{this.o=!1,this.m=3,J(12),Qt(this),Ot(this);break e}}if(this.R){d=!0;let lr;for(;!this.K&&this.C<T.length;)if(lr=ar(this,T),lr==vt){Et==4&&(this.m=4,J(14),d=!1),ge(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==Xn){this.m=4,J(15),ge(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else ge(this.i,this.l,lr,null),Tt(this,lr);if(jn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||T.length!=0||this.h.h||(this.m=1,J(16),d=!1),this.o=this.o&&d,!d)ge(this.i,this.l,T,"[Invalid Chunked Response]"),Qt(this),Ot(this);else if(T.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),lv(Ee),Ee.P=!0,J(11))}}else ge(this.i,this.l,T,null),Tt(this,T);Et==4&&Qt(this),this.o&&!this.K&&(Et==4?iI(this.j,this):(this.o=!1,qe(this)))}else qV(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,J(12)):(this.m=0,J(13)),Qt(this),Ot(this)}}}catch{}finally{}};function Ht(d){if(!jn(d))return d.g.la();const y=XS(d.g);if(y==="")return"";let T="";const k=y.length,j=mo(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Qt(d),Ot(d),"";d.h.i=new o.TextDecoder}for(let H=0;H<k;H++)d.h.h=!0,T+=d.h.i.decode(y[H],{stream:!(j&&H==k-1)});return y.length=0,d.h.g+=T,d.C=0,d.h.g}function jn(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function ar(d,y){var T=d.C,k=y.indexOf(`
`,T);return k==-1?vt:(T=Number(y.substring(T,k)),isNaN(T)?Xn:(k+=1,k+T>y.length?vt:(y=y.slice(k,k+T),d.C=k+T,y)))}Ut.prototype.cancel=function(){this.K=!0,Qt(this)};function qe(d){d.T=Date.now()+d.H,it(d,d.H)}function it(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=De(c(d.aa,d),y)}function ct(d){d.D&&(o.clearTimeout(d.D),d.D=null)}Ut.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(_e(this.i,this.B),this.M!=2&&(Z(),J(17)),Qt(this),this.m=2,Ot(this)):it(this,this.T-d)};function Ot(d){d.j.I==0||d.K||iI(d.j,d)}function Qt(d){ct(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,Qe(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Tt(d,y){try{var T=d.j;if(T.I!=0&&(T.g==d||Pt(T.h,d))){if(!d.L&&Pt(T.h,d)&&T.I==3){try{var k=T.Ba.g.parse(y)}catch{k=null}if(Array.isArray(k)&&k.length==3){var j=k;if(j[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)Yf(T),Gf(T);else break e;av(T),J(18)}}else T.xa=j[1],0<T.xa-T.K&&j[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=De(c(T.Va,T),6e3));ut(T.h)<=1&&T.ta&&(T.ta=void 0)}else Ha(T,11)}else if((d.L||T.g==d)&&Yf(T),!D(y))for(j=T.Ba.g.parse(y),y=0;y<j.length;y++){let sn=j[y];const lr=sn[0];if(!(lr<=T.K))if(T.K=lr,sn=sn[1],T.I==2)if(sn[0]=="c"){T.M=sn[1],T.ba=sn[2];const ii=sn[3];ii!=null&&(T.ka=ii,T.j.info("VER="+T.ka));const Ka=sn[4];Ka!=null&&(T.za=Ka,T.j.info("SVER="+T.za));const po=sn[5];po!=null&&typeof po=="number"&&po>0&&(k=1.5*po,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const go=d.g;if(go){const Xf=go.g?go.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xf){var H=k.h;H.g||Xf.indexOf("spdy")==-1&&Xf.indexOf("quic")==-1&&Xf.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(tt(H,H.h),H.h=null))}if(k.G){const cv=go.g?go.g.getResponseHeader("X-HTTP-Session-Id"):null;cv&&(k.wa=cv,mt(k.J,k.G,cv))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var Ee=d;if(k.na=lI(k,k.L?k.ba:null,k.W),Ee.L){nn(k.h,Ee);var Et=Ee,er=k.O;er&&(Et.H=er),Et.D&&(ct(Et),qe(Et)),k.g=Ee}else rI(k);T.i.length>0&&Qf(T)}else sn[0]!="stop"&&sn[0]!="close"||Ha(T,7);else T.I==3&&(sn[0]=="stop"||sn[0]=="close"?sn[0]=="stop"?Ha(T,7):ov(T):sn[0]!="noop"&&T.l&&T.l.qa(sn),T.A=0)}}Z(4)}catch{}}var Ve=class{constructor(d,y){this.g=d,this.map=y}};function dt(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ht(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ut(d){return d.h?1:d.g?d.g.size:0}function Pt(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function tt(d,y){d.g?d.g.add(y):d.h=y}function nn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}dt.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function _n(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const T of d.g.values())y=y.concat(T.G);return y}return m(d.i)}var qn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yt(d,y){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const k=d[T].indexOf("=");let j,H=null;k>=0?(j=d[T].substring(0,k),H=d[T].substring(k+1)):j=d[T],y(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Nt(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Nt?(this.l=d.l,xn(this,d.j),this.o=d.o,this.g=d.g,Tr(this,d.u),this.h=d.h,Zn(this,HS(d.i)),this.m=d.m):d&&(y=String(d).match(qn))?(this.l=!1,xn(this,y[1]||"",!0),this.o=wt(y[2]||""),this.g=wt(y[3]||"",!0),Tr(this,y[4]),this.h=wt(y[5]||"",!0),Zn(this,y[6]||"",!0),this.m=wt(y[7]||"")):(this.l=!1,this.i=new Ed(null,this.l))}Nt.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Hr(y,$S,!0),":");var T=this.g;return(T||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Hr(y,$S,!0),"@"),d.push(jt(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Hr(T,T.charAt(0)=="/"?MV:LV,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Hr(T,FV)),d.join("")},Nt.prototype.resolve=function(d){const y=rn(this);let T=!!d.j;T?xn(y,d.j):T=!!d.o,T?y.o=d.o:T=!!d.g,T?y.g=d.g:T=d.u!=null;var k=d.h;if(T)Tr(y,d.u);else if(T=!!d.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var j=y.h.lastIndexOf("/");j!=-1&&(k=y.h.slice(0,j+1)+k)}if(j=k,j==".."||j==".")k="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){k=j.lastIndexOf("/",0)==0,j=j.split("/");const H=[];for(let Ee=0;Ee<j.length;){const Et=j[Ee++];Et=="."?k&&Ee==j.length&&H.push(""):Et==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),k&&Ee==j.length&&H.push("")):(H.push(Et),k=!0)}k=H.join("/")}else k=j}return T?y.h=k:T=d.i.toString()!=="",T?Zn(y,HS(d.i)):T=!!d.m,T&&(y.m=d.m),y};function rn(d){return new Nt(d)}function xn(d,y,T){d.j=T?wt(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Tr(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Zn(d,y,T){y instanceof Ed?(d.i=y,jV(d.i,d.l)):(T||(y=Hr(y,VV)),d.i=new Ed(y,d.l))}function mt(d,y,T){d.i.set(y,T)}function Mr(d){return mt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function wt(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hr(d,y,T){return typeof d=="string"?(d=encodeURI(d).replace(y,OV),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function OV(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $S=/[#\/\?@]/g,LV=/[#\?:]/g,MV=/[#\?]/g,VV=/[#\?@]/g,FV=/#/g;function Ed(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function qa(d){d.g||(d.g=new Map,d.h=0,d.i&&yt(d.i,function(y,T){d.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}t=Ed.prototype,t.add=function(d,y){qa(this),this.i=null,d=cc(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(y),this.h+=1,this};function BS(d,y){qa(d),y=cc(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function zS(d,y){return qa(d),y=cc(d,y),d.g.has(y)}t.forEach=function(d,y){qa(this),this.g.forEach(function(T,k){T.forEach(function(j){d.call(y,j,k,this)},this)},this)};function WS(d,y){qa(d);let T=[];if(typeof y=="string")zS(d,y)&&(T=T.concat(d.g.get(cc(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)T=T.concat(d[y]);return T}t.set=function(d,y){return qa(this),this.i=null,d=cc(this,d),zS(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=WS(this,d),d.length>0?String(d[0]):y):y};function qS(d,y,T){BS(d,y),T.length>0&&(d.i=null,d.g.set(cc(d,y),m(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let k=0;k<y.length;k++){var T=y[k];const j=jt(T);T=WS(this,T);for(let H=0;H<T.length;H++){let Ee=j;T[H]!==""&&(Ee+="="+jt(T[H])),d.push(Ee)}}return this.i=d.join("&")};function HS(d){const y=new Ed;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function cc(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function jV(d,y){y&&!d.j&&(qa(d),d.i=null,d.g.forEach(function(T,k){const j=k.toLowerCase();k!=j&&(BS(this,k),qS(this,j,T))},d)),d.j=y}function UV(d,y){const T=new oe;if(o.Image){const k=new Image;k.onload=u(fo,T,"TestLoadImage: loaded",!0,y,k),k.onerror=u(fo,T,"TestLoadImage: error",!1,y,k),k.onabort=u(fo,T,"TestLoadImage: abort",!1,y,k),k.ontimeout=u(fo,T,"TestLoadImage: timeout",!1,y,k),o.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else y(!1)}function $V(d,y){const T=new oe,k=new AbortController,j=setTimeout(()=>{k.abort(),fo(T,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:k.signal}).then(H=>{clearTimeout(j),H.ok?fo(T,"TestPingServer: ok",!0,y):fo(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),fo(T,"TestPingServer: error",!1,y)})}function fo(d,y,T,k,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),k(T)}catch{}}function BV(){this.g=new re}function sv(d){this.i=d.Sb||null,this.h=d.ab||!1}h(sv,Ye),sv.prototype.g=function(){return new Hf(this.i,this.h)};function Hf(d,y){ue.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Hf,ue),t=Hf.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Sd(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bd(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Sd(this)),this.g&&(this.readyState=3,Sd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;KS(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function KS(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?bd(this):Sd(this),this.readyState==3&&KS(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,bd(this))},t.Na=function(d){this.g&&(this.response=d,bd(this))},t.ga=function(){this.g&&bd(this)};function bd(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Sd(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=y.next();return d.join(`\r
`)};function Sd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Hf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function GS(d){let y="";return K(d,function(T,k){y+=k,y+=":",y+=T,y+=`\r
`}),y}function iv(d,y,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=GS(T),typeof d=="string"?T!=null&&jt(T):mt(d,y,T))}function Mn(d){ue.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Mn,ue);var zV=/^https?$/i,WV=["POST","PUT"];t=Mn.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ue.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(H){QS(this,H);return}if(d=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var j in k)T.set(j,k[j]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const H of k.keys())T.set(H,k.get(H));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(H=>H.toLowerCase()=="content-type"),j=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(WV,y,void 0)>=0)||k||j||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,Ee]of T)this.g.setRequestHeader(H,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(H){QS(this,H)}};function QS(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,YS(d),Kf(d)}function YS(d){d.A||(d.A=!0,Ie(d,"complete"),Ie(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ie(this,"complete"),Ie(this,"abort"),Kf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kf(this,!0)),Mn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?JS(this):this.Xa())},t.Xa=function(){JS(this)};function JS(d){if(d.h&&typeof i<"u"){if(d.v&&mo(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ie(d,"readystatechange"),mo(d)==4){d.h=!1;try{const H=d.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var k;if(k=H===0){let Ee=String(d.D).match(qn)[1]||null;!Ee&&o.self&&o.self.location&&(Ee=o.self.location.protocol.slice(0,-1)),k=!zV.test(Ee?Ee.toLowerCase():"")}T=k}if(T)Ie(d,"complete"),Ie(d,"success");else{d.o=6;try{var j=mo(d)>2?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.ca()+"]",YS(d)}}finally{Kf(d)}}}}function Kf(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,y||Ie(d,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function mo(d){return d.g?d.g.readyState:0}t.ca=function(){try{return mo(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),We(y)}};function XS(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function qV(d){const y={};d=(d.g&&mo(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(D(d[k]))continue;var T=At(d[k]);const j=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const H=y[j]||[];y[j]=H,H.push(T)}ie(y,function(k){return k.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Id(d,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||y}function ZS(d){this.za=0,this.i=[],this.j=new oe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Id("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Id("baseRetryDelayMs",5e3,d),this.Za=Id("retryDelaySeedMs",1e4,d),this.Ta=Id("forwardChannelMaxRetries",2,d),this.va=Id("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new dt(d&&d.concurrentRequestLimit),this.Ba=new BV,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ZS.prototype,t.ka=8,t.I=1,t.connect=function(d,y,T,k){J(0),this.W=d,this.H=y||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=lI(this,null,this.W),Qf(this)};function ov(d){if(eI(d),d.I==3){var y=d.V++,T=rn(d.J);if(mt(T,"SID",d.M),mt(T,"RID",y),mt(T,"TYPE","terminate"),Td(d,T),y=new Ut(d,d.j,y),y.M=2,y.A=Mr(rn(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=y.A,T=!0),T||(y.g=cI(y.j,null),y.g.ea(y.A)),y.F=Date.now(),qe(y)}aI(d)}function Gf(d){d.g&&(lv(d),d.g.cancel(),d.g=null)}function eI(d){Gf(d),d.v&&(o.clearTimeout(d.v),d.v=null),Yf(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Qf(d){if(!ht(d.h)&&!d.m){d.m=!0;var y=d.Ea;x||A(),O||(x(),O=!0),I.add(y,d),d.D=0}}function HV(d,y){return ut(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=De(c(d.Ea,d,y),oI(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const j=new Ut(this,this.j,d);let H=this.o;if(this.U&&(H?(H=le(H),Le(H,this.U)):H=this.U),this.u!==null||this.R||(j.J=H,H=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(y+=k,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=nI(this,j,y),T=rn(this.J),mt(T,"RID",d),mt(T,"CVER",22),this.G&&mt(T,"X-HTTP-Session-Id",this.G),Td(this,T),H&&(this.R?y="headers="+jt(GS(H))+"&"+y:this.u&&iv(T,this.u,H)),tt(this.h,j),this.Ra&&mt(T,"TYPE","init"),this.S?(mt(T,"$req",y),mt(T,"SID","null"),j.U=!0,Wt(j,T,null)):Wt(j,T,y),this.I=2}}else this.I==3&&(d?tI(this,d):this.i.length==0||ht(this.h)||tI(this))};function tI(d,y){var T;y?T=y.l:T=d.V++;const k=rn(d.J);mt(k,"SID",d.M),mt(k,"RID",T),mt(k,"AID",d.K),Td(d,k),d.u&&d.o&&iv(k,d.u,d.o),T=new Ut(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),y&&(d.i=y.G.concat(d.i)),y=nI(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),tt(d.h,T),Wt(T,k,y)}function Td(d,y){d.H&&K(d.H,function(T,k){mt(y,k,T)}),d.l&&K({},function(T,k){mt(y,k,T)})}function nI(d,y,T){T=Math.min(d.i.length,T);const k=d.l?c(d.l.Ka,d.l,d):null;e:{var j=d.i;let Et=-1;for(;;){const er=["count="+T];Et==-1?T>0?(Et=j[0].g,er.push("ofs="+Et)):Et=0:er.push("ofs="+Et);let sn=!0;for(let lr=0;lr<T;lr++){var H=j[lr].g;const ii=j[lr].map;if(H-=Et,H<0)Et=Math.max(0,j[lr].g-100),sn=!1;else try{H="req"+H+"_"||"";try{var Ee=ii instanceof Map?ii:Object.entries(ii);for(const[Ka,po]of Ee){let go=po;a(po)&&(go=st(po)),er.push(H+Ka+"="+encodeURIComponent(go))}}catch(Ka){throw er.push(H+"type="+encodeURIComponent("_badmap")),Ka}}catch{k&&k(ii)}}if(sn){Ee=er.join("&");break e}}Ee=void 0}return d=d.i.splice(0,T),y.G=d,Ee}function rI(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;x||A(),O||(x(),O=!0),I.add(y,d),d.A=0}}function av(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=De(c(d.Da,d),oI(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,sI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=De(c(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,J(10),Gf(this),sI(this))};function lv(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function sI(d){d.g=new Ut(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=rn(d.na);mt(y,"RID","rpc"),mt(y,"SID",d.M),mt(y,"AID",d.K),mt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&mt(y,"TO",d.ia),mt(y,"TYPE","xmlhttp"),Td(d,y),d.u&&d.o&&iv(y,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=Mr(rn(y)),T.u=null,T.R=!0,pt(T,d)}t.Va=function(){this.C!=null&&(this.C=null,Gf(this),av(this),J(19))};function Yf(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function iI(d,y){var T=null;if(d.g==y){Yf(d),lv(d),d.g=null;var k=2}else if(Pt(d.h,y))T=y.G,nn(d.h,y),k=1;else return;if(d.I!=0){if(y.o)if(k==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var j=d.D;k=U(),Ie(k,new ne(k,T)),Qf(d)}else rI(d);else if(j=y.m,j==3||j==0&&y.X>0||!(k==1&&HV(d,y)||k==2&&av(d)))switch(T&&T.length>0&&(y=d.h,y.i=y.i.concat(T)),j){case 1:Ha(d,5);break;case 4:Ha(d,10);break;case 3:Ha(d,6);break;default:Ha(d,2)}}}function oI(d,y){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*y}function Ha(d,y){if(d.j.info("Error code "+y),y==2){var T=c(d.bb,d),k=d.Ua;const j=!k;k=new Nt(k||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||xn(k,"https"),Mr(k),j?UV(k.toString(),T):$V(k.toString(),T)}else J(2);d.I=0,d.l&&d.l.pa(y),aI(d),eI(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),J(2)):(this.j.info("Failed to ping google.com"),J(1))};function aI(d){if(d.I=0,d.ja=[],d.l){const y=_n(d.h);(y.length!=0||d.i.length!=0)&&(_(d.ja,y),_(d.ja,d.i),d.h.i.length=0,m(d.i),d.i.length=0),d.l.oa()}}function lI(d,y,T){var k=T instanceof Nt?rn(T):new Nt(T);if(k.g!="")y&&(k.g=y+"."+k.g),Tr(k,k.u);else{var j=o.location;k=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;const H=new Nt(null);k&&xn(H,k),y&&(H.g=y),j&&Tr(H,j),T&&(H.h=T),k=H}return T=d.G,y=d.wa,T&&y&&mt(k,T,y),mt(k,"VER",d.ka),Td(d,k),k}function cI(d,y,T){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new Mn(new sv({ab:T})):new Mn(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uI(){}t=uI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jf(){}Jf.prototype.g=function(d,y){return new ls(d,y)};function ls(d,y){ue.call(this),this.g=new ZS(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!D(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new uc(this)}h(ls,ue),ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ls.prototype.close=function(){ov(this.g)},ls.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=st(d),d=T);y.i.push(new Ve(y.Ya++,d)),y.I==3&&Qf(y)},ls.prototype.N=function(){this.g.l=null,delete this.j,ov(this.g),delete this.g,ls.Z.N.call(this)};function dI(d){On.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const T in y){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}h(dI,On);function hI(){Ir.call(this),this.status=1}h(hI,Ir);function uc(d){this.g=d}h(uc,uI),uc.prototype.ra=function(){Ie(this.g,"a")},uc.prototype.qa=function(d){Ie(this.g,new dI(d))},uc.prototype.pa=function(d){Ie(this.g,new hI)},uc.prototype.oa=function(){Ie(this.g,"b")},Jf.prototype.createWebChannel=Jf.prototype.g,ls.prototype.send=ls.prototype.o,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,r2=function(){return new Jf},n2=function(){return U()},t2=Ln,G_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,lp=Ce,ot.COMPLETE="complete",e2=ot,It.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",ue.prototype.listen=ue.prototype.J,Jd=It,Mn.prototype.listenOnce=Mn.prototype.K,Mn.prototype.getLastError=Mn.prototype.Ha,Mn.prototype.getLastErrorCode=Mn.prototype.ya,Mn.prototype.getStatus=Mn.prototype.ca,Mn.prototype.getResponseJson=Mn.prototype.La,Mn.prototype.getResponseText=Mn.prototype.la,Mn.prototype.send=Mn.prototype.ea,Mn.prototype.setWithCredentials=Mn.prototype.Fa,ZD=Mn}).apply(typeof Im<"u"?Im:typeof self<"u"?self:typeof window<"u"?window:{});const tA="@firebase/firestore",nA="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new _y("@firebase/firestore");function Tc(){return Sa.logLevel}function s2(t){Sa.setLogLevel(t)}function se(t,...e){if(Sa.logLevel<=Lt.DEBUG){const n=e.map(fb);Sa.debug(`Firestore (${ad}): ${t}`,...n)}}function $n(t,...e){if(Sa.logLevel<=Lt.ERROR){const n=e.map(fb);Sa.error(`Firestore (${ad}): ${t}`,...n)}}function _s(t,...e){if(Sa.logLevel<=Lt.WARN){const n=e.map(fb);Sa.warn(`Firestore (${ad}): ${t}`,...n)}}function fb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,i2(t,r,n)}function i2(t,e,n){let r=`FIRESTORE (${ad}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $n(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||i2(e,s,r)}function a7(t,e){t||Oe(57014,e)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mr.UNAUTHENTICATED))}shutdown(){}}class l7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c7{constructor(e){this.t=e,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new o2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new mr(e)}}class u7{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class d7{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new u7(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h7{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class f7{getToken(){return Promise.resolve(new Q_(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=m7(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function lt(t,e){return t<e?-1:t>e?1:0}function Y_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return tw(s)===tw(i)?lt(s,i):tw(s)?1:-1}return lt(t.length,e.length)}const p7=55296,g7=57343;function tw(t){const e=t.charCodeAt(0);return e>=p7&&e<=g7}function Pu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function l2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__name__";class ci{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ci.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return lt(e.length,n.length)}static compareSegments(e,n){const r=ci.isNumericId(e),s=ci.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ci.extractNumericId(e).compare(ci.extractNumericId(n)):Y_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class Rt extends ci{construct(e,n,r){return new Rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Rt(n)}static emptyPath(){return new Rt([])}}const y7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends ci{construct(e,n,r){return new pn(e,n,r)}static isValidIdentifier(e){return y7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J_}static keyField(){return new pn([J_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new te($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new te($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Rt.fromString(e))}static fromName(e){return new ve(Rt.fromString(e).popFirst(5))}static empty(){return new ve(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t,e,n){if(!n)throw new te($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function c2(t,e,n,r){if(e===!0&&r===!0)throw new te($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rA(t){if(!ve.isDocumentKey(t))throw new te($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sA(t){if(ve.isDocumentKey(t))throw new te($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function u2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe(12329,{type:typeof t})}function Ct(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xy(t);throw new te($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function d2(t,e){if(e<=0)throw new te($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){const n={typeString:t};return e&&(n.value=e),n}function sc(t,e){if(!u2(t))throw new te($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new te($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=-62135596800,oA=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*oA);return new qt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iA)throw new te($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oA}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sc(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:Gn("string",qt._jsonSchemaVersion),seconds:Gn("number"),nanoseconds:Gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new qt(0,0))}static max(){return new Ze(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=-1;class Cu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function X_(t){return t.fields.find(e=>e.kind===2)}function Za(t){return t.fields.filter(e=>e.kind!==2)}function v7(t,e){let n=lt(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=w7(t.fields[r],e.fields[r]),n!==0)return n;return lt(t.fields.length,e.fields.length)}Cu.UNKNOWN_ID=-1;class Sl{constructor(e,n){this.fieldPath=e,this.kind=n}}function w7(t,e){const n=pn.comparator(t.fieldPath,e.fieldPath);return n!==0?n:lt(t.kind,e.kind)}class ku{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ku(0,Es.min())}}function h2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ze.fromTimestamp(r===1e9?new qt(n+1,0):new qt(n,r));return new Es(s,ve.empty(),e)}function f2(t){return new Es(t.readTime,t.key,Ru)}class Es{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Es(Ze.min(),ve.empty(),Ru)}static max(){return new Es(Ze.max(),ve.empty(),Ru)}}function pb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==m2)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="SimpleDb";class Ay{static open(e,n,r,s){try{return new Ay(n,e.transaction(s,r))}catch(i){throw new ph(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new gr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ph(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=gb(r.target.error);this.S.reject(new ph(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(se(us,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new E7(n)}}class Ti{static delete(e){return se(us,"Removing database:",e),nl(YN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!tb())return!1;if(Ti.F())return!0;const e=sr(),n=Ti.M(e),r=0<n&&n<10,s=g2(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ti.M(sr())===12.2&&$n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(se(us,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ph(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new te($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new te($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ph(e,o))},s.onupgradeneeded=i=>{se(us,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{se(us,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Ay.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(se(us,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function g2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class _7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return nl(this.U.delete())}}class ph extends te{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Fa(t){return t.name==="IndexedDbTransactionError"}class E7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se(us,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(se(us,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),nl(r)}add(e){return se(us,"ADD",this.store.name,e,e),nl(this.store.add(e))}get(e){return nl(this.store.get(e)).next(n=>(n===void 0&&(n=null),se(us,"GET",this.store.name,e,n),n))}delete(e){return se(us,"DELETE",this.store.name,e),nl(this.store.delete(e))}count(){return se(us,"COUNT",this.store.name),nl(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){se(us,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=gb(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new _7(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const u=c.catch(h=>(l.done(),V.reject(h)));r.push(u)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function nl(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=gb(r.target.error);n(s)}})}let aA=!1;function gb(t){const e=Ti.M(sr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aA||(aA=!0,setTimeout(()=>{throw r},0)),r}}return t}const gh="IndexBackfiller";class b7{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){se(gh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();se(gh,`Documents written: ${n}`)}catch(n){Fa(n)?se(gh,"Ignoring IndexedDB error during index backfill: ",n):await Va(n)}await this.re(6e4)})}}class S7{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return se(gh,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(se(gh,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=f2(i);pb(o,r)>0&&(r=o)}),new Es(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=-1;function Cf(t){return t==null}function Xh(t){return t===0&&1/t==-1/0}function y2(t){return typeof t=="number"&&Number.isInteger(t)&&!Xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="";function Dr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lA(e)),e=I7(t.get(n),e);return lA(e)}function I7(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case pg:n+="";break;default:n+=i}}return n}function lA(t){return t+pg+""}function yi(t){const e=t.length;if(ze(e>=2,64408,{path:t}),e===2)return ze(t.charAt(0)===pg&&t.charAt(1)==="",56145,{path:t}),Rt.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(pg,i);switch((o<0||o>n)&&Oe(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Oe(61167,{path:t})}i=o+2}return new Rt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="remoteDocuments",kf="owner",hc="owner",Zh="mutationQueues",T7="userId",Us="mutations",cA="batchId",ml="userMutationsIndex",uA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t,e){return[t,Dr(e)]}function v2(t,e,n){return[t,Dr(e),n]}const x7={},Nu="documentMutations",gg="remoteDocumentsV14",A7=["prefixPath","collectionGroup","readTime","documentId"],up="documentKeyIndex",P7=["prefixPath","collectionGroup","documentId"],w2="collectionGroupIndex",R7=["collectionGroup","readTime","prefixPath","documentId"],ef="remoteDocumentGlobal",Z_="remoteDocumentGlobalKey",Du="targets",_2="queryTargetsIndex",C7=["canonicalId","targetId"],Ou="targetDocuments",k7=["targetId","path"],yb="documentTargetsIndex",N7=["path","targetId"],yg="targetGlobalKey",Il="targetGlobal",tf="collectionParents",D7=["collectionId","parent"],Lu="clientMetadata",O7="clientId",Py="bundles",L7="bundleId",Ry="namedQueries",M7="name",vb="indexConfiguration",V7="indexId",e0="collectionGroupIndex",F7="collectionGroup",yh="indexState",j7=["indexId","uid"],E2="sequenceNumberIndex",U7=["uid","sequenceNumber"],vh="indexEntries",$7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],b2="documentKeyIndex",B7=["indexId","uid","orderedDocumentKey"],Cy="documentOverlays",z7=["userId","collectionPath","documentId"],t0="collectionPathOverlayIndex",W7=["userId","collectionPath","largestBatchId"],S2="collectionGroupOverlayIndex",q7=["userId","collectionGroup","largestBatchId"],wb="globals",H7="name",I2=[Zh,Us,Nu,el,Du,kf,Il,Ou,Lu,ef,tf,Py,Ry],K7=[...I2,Cy],T2=[Zh,Us,Nu,gg,Du,kf,Il,Ou,Lu,ef,tf,Py,Ry,Cy],x2=T2,_b=[...x2,vb,yh,vh],G7=_b,A2=[..._b,wb],Q7=A2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends p2{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function or(t,e){const n=we(t);return Ti.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ja(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P2(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function R2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.comparator=e,this.root=n||vr.EMPTY}insert(e,n){return new dn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tm(this.root,e,this.comparator,!0)}}class Tm{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??vr.RED,this.left=s??vr.EMPTY,this.right=i??vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new vr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return vr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1;vr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new vr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hA(this.data.getIterator())}getIteratorFrom(e){return new hA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class hA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fc(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new es([])}unionWith(e){let n=new en(pn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new C2("Invalid base64 string: "+i):i}}(e);return new kn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const J7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=J7.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:En(t.seconds),nanos:En(t.nanos)}}function En(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?kn.fromBase64String(t):kn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="server_timestamp",N2="__type__",D2="__previous_value__",O2="__local_write_time__";function ky(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[N2])==null?void 0:r.stringValue)===k2}function Ny(t){const e=t.mapValue.fields[D2];return ky(e)?Ny(e):e}function nf(t){const e=so(t.mapValue.fields[O2].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,n,r,s,i,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const rf="(default)";class Ia{constructor(e,n){this.projectId=e,this.database=n||rf}static empty(){return new Ia("","")}get isDefaultDatabase(){return this.database===rf}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="__type__",L2="__max__",Jo={mapValue:{fields:{__type__:{stringValue:L2}}}},bb="__vector__",Mu="value",dp={nullValue:"NULL_VALUE"};function Ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ky(t)?4:M2(t)?9007199254740991:Dy(t)?10:11:Oe(28295,{value:t})}function ki(t,e){if(t===e)return!0;const n=Ta(t);if(n!==Ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nf(t).isEqual(nf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=so(s.timestampValue),a=so(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return io(s.bytesValue).isEqual(io(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return En(s.geoPointValue.latitude)===En(i.geoPointValue.latitude)&&En(s.geoPointValue.longitude)===En(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return En(s.integerValue)===En(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=En(s.doubleValue),a=En(i.doubleValue);return o===a?Xh(o)===Xh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Pu(t.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(dA(o)!==dA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ki(o[l],a[l])))return!1;return!0}(t,e);default:return Oe(52216,{left:t})}}function sf(t,e){return(t.values||[]).find(n=>ki(n,e))!==void 0}function xa(t,e){if(t===e)return 0;const n=Ta(t),r=Ta(e);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=En(i.integerValue||i.doubleValue),l=En(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return fA(t.timestampValue,e.timestampValue);case 4:return fA(nf(t),nf(e));case 5:return Y_(t.stringValue,e.stringValue);case 6:return function(i,o){const a=io(i),l=io(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=lt(a[c],l[c]);if(u!==0)return u}return lt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=lt(En(i.latitude),En(o.latitude));return a!==0?a:lt(En(i.longitude),En(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mA(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,_,g;const a=i.fields||{},l=o.fields||{},c=(f=a[Mu])==null?void 0:f.arrayValue,u=(m=l[Mu])==null?void 0:m.arrayValue,h=lt(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((g=u==null?void 0:u.values)==null?void 0:g.length)||0);return h!==0?h:mA(c,u)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Jo.mapValue&&o===Jo.mapValue)return 0;if(i===Jo.mapValue)return 1;if(o===Jo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=Y_(l[h],u[h]);if(f!==0)return f;const m=xa(a[l[h]],c[u[h]]);if(m!==0)return m}return lt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Oe(23264,{he:n})}}function fA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=so(t),r=so(e),s=lt(n.seconds,r.seconds);return s!==0?s:lt(n.nanos,r.nanos)}function mA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=xa(n[s],r[s]);if(i)return i}return lt(n.length,r.length)}function Vu(t){return r0(t)}function r0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=so(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return io(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=r0(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${r0(n.fields[o])}`;return s+"}"}(t.mapValue):Oe(61005,{value:t})}function hp(t){switch(Ta(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ny(t);return e?16+hp(e):16;case 5:return 2*t.stringValue.length;case 6:return io(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+hp(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ja(r.fields,(i,o)=>{s+=i.length+hp(o)}),s}(t.mapValue);default:throw Oe(13486,{value:t})}}function Vl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function s0(t){return!!t&&"integerValue"in t}function of(t){return!!t&&"arrayValue"in t}function pA(t){return!!t&&"nullValue"in t}function gA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fp(t){return!!t&&"mapValue"in t}function Dy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Eb])==null?void 0:r.stringValue)===bb}function wh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ja(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wh(t.arrayValue.values[n]);return e}return{...t}}function M2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===L2}const V2={mapValue:{fields:{[Eb]:{stringValue:bb},[Mu]:{arrayValue:{}}}}};function Z7(t){return"nullValue"in t?dp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vl(Ia.empty(),ve.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Dy(t)?V2:{mapValue:{}}:Oe(35942,{value:t})}function eH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vl(Ia.empty(),ve.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?V2:"mapValue"in t?Dy(t)?{mapValue:{}}:Jo:Oe(61959,{value:t})}function yA(t,e){const n=xa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vA(t,e){const n=xa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wh(n)}setAll(e){let n=pn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=wh(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());fp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ja(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wr(wh(this.value))}}function F2(t){const e=[];return ja(t.fields,(n,r)=>{const s=new pn([n]);if(fp(r)){const i=F2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mn(e,0,Ze.min(),Ze.min(),Ze.min(),wr.empty(),0)}static newFoundDocument(e,n,r,s){return new mn(e,1,n,Ze.min(),r,s,0)}static newNoDocument(e,n){return new mn(e,2,n,Ze.min(),Ze.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,Ze.min(),Ze.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.position=e,this.inclusive=n}}function wA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),n.key):r=xa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _A(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ki(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n="asc"){this.field=e,this.dir=n}}function tH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{}class Mt extends j2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nH(e,n,r):n==="array-contains"?new iH(e,r):n==="in"?new q2(e,r):n==="not-in"?new oH(e,r):n==="array-contains-any"?new aH(e,r):new Mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rH(e,r):new sH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xa(n,this.value)):n!==null&&Ta(this.value)===Ta(n)&&this.matchesComparison(xa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends j2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Jt(e,n)}matches(e){return Fu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fu(t){return t.op==="and"}function i0(t){return t.op==="or"}function Sb(t){return U2(t)&&Fu(t)}function U2(t){for(const e of t.filters)if(e instanceof Jt)return!1;return!0}function o0(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+Vu(t.value);if(Sb(t))return t.filters.map(e=>o0(e)).join(",");{const e=t.filters.map(n=>o0(n)).join(",");return`${t.op}(${e})`}}function $2(t,e){return t instanceof Mt?function(r,s){return s instanceof Mt&&r.op===s.op&&r.field.isEqual(s.field)&&ki(r.value,s.value)}(t,e):t instanceof Jt?function(r,s){return s instanceof Jt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&$2(o,s.filters[a]),!0):!1}(t,e):void Oe(19439)}function B2(t,e){const n=t.filters.concat(e);return Jt.create(n,t.op)}function z2(t){return t instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Vu(n.value)}`}(t):t instanceof Jt?function(n){return n.op.toString()+" {"+n.getFilters().map(z2).join(" ,")+"}"}(t):"Filter"}class nH extends Mt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class rH extends Mt{constructor(e,n){super(e,"in",n),this.keys=W2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sH extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=W2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function W2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class iH extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return of(n)&&sf(n.arrayValue,this.value)}}class q2 extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sf(this.value.arrayValue,n)}}class oH extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sf(this.value.arrayValue,n)}}class aH extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function a0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new lH(t,e,n,r,s,i,o)}function Fl(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>o0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vu(r)).join(",")),e.Te=n}return e.Te}function Nf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_A(t.startAt,e.startAt)&&_A(t.endAt,e.endAt)}function vg(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wg(t,e){return t.filters.filter(n=>n instanceof Mt&&n.field.isEqual(e))}function EA(t,e,n){let r=dp,s=!0;for(const i of wg(t,e)){let o=dp,a=!0;switch(i.op){case"<":case"<=":o=Z7(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=dp}yA({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function bA(t,e,n){let r=Jo,s=!0;for(const i of wg(t,e)){let o=Jo,a=!0;switch(i.op){case">=":case">":o=eH(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Jo}vA({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];vA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H2(t,e,n,r,s,i,o,a){return new lo(t,e,n,r,s,i,o,a)}function ld(t){return new lo(t)}function SA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ib(t){return t.collectionGroup!==null}function ou(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new en(pn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new af(i,r))}),n.has(pn.keyField().canonicalString())||e.Ie.push(new af(pn.keyField(),r))}return e.Ie}function Or(t){const e=we(t);return e.Ee||(e.Ee=G2(e,ou(t))),e.Ee}function K2(t){const e=we(t);return e.de||(e.de=G2(e,t.explicitOrderBy)),e.de}function G2(t,e){if(t.limitType==="F")return a0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new af(s.field,i)});const n=t.endAt?new Aa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Aa(t.startAt.position,t.startAt.inclusive):null;return a0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function l0(t,e){const n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _g(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return Nf(Or(t),Or(e))&&t.limitType===e.limitType}function Q2(t){return`${Fl(Or(t))}|lt:${t.limitType}`}function xc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>z2(s)).join(", ")}]`),Cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Vu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Vu(s)).join(",")),`Target(${r})`}(Or(t))}; limitType=${t.limitType})`}function Of(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ve.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ou(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=wA(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ou(r),s)||r.endAt&&!function(o,a,l){const c=wA(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ou(r),s))}(t,e)}function Y2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function J2(t){return(e,n)=>{let r=!1;for(const s of ou(t)){const i=cH(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function cH(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?xa(l,c):Oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return R2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=new dn(ve.comparator);function ts(){return uH}const X2=new dn(ve.comparator);function Xd(...t){let e=X2;for(const n of t)e=e.insert(n.key,n);return e}function Z2(t){let e=X2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vi(){return _h()}function eO(){return _h()}function _h(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const dH=new dn(ve.comparator),hH=new en(ve.comparator);function gt(...t){let e=hH;for(const n of t)e=e.add(n);return e}const fH=new en(lt);function Tb(){return fH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function tO(t){return{integerValue:""+t}}function nO(t,e){return y2(e)?tO(e):xb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this._=void 0}}function mH(t,e,n){return t instanceof ju?function(s,i){const o={fields:{[N2]:{stringValue:k2},[O2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ky(i)&&(i=Ny(i)),i&&(o.fields[D2]=i),{mapValue:o}}(n,e):t instanceof jl?sO(t,e):t instanceof Ul?iO(t,e):function(s,i){const o=rO(s,i),a=IA(o)+IA(s.Ae);return s0(o)&&s0(s.Ae)?tO(a):xb(s.serializer,a)}(t,e)}function pH(t,e,n){return t instanceof jl?sO(t,e):t instanceof Ul?iO(t,e):n}function rO(t,e){return t instanceof Uu?function(r){return s0(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ju extends Oy{}class jl extends Oy{constructor(e){super(),this.elements=e}}function sO(t,e){const n=oO(e);for(const r of t.elements)n.some(s=>ki(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ul extends Oy{constructor(e){super(),this.elements=e}}function iO(t,e){let n=oO(e);for(const r of t.elements)n=n.filter(s=>!ki(s,r));return{arrayValue:{values:n}}}class Uu extends Oy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function IA(t){return En(t.integerValue||t.doubleValue)}function oO(t){return of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.field=e,this.transform=n}}function gH(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jl&&s instanceof jl||r instanceof Ul&&s instanceof Ul?Pu(r.elements,s.elements,ki):r instanceof Uu&&s instanceof Uu?ki(r.Ae,s.Ae):r instanceof ju&&s instanceof ju}(t.transform,e.transform)}class yH{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ly{}function aO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ud(t.key,Sn.none()):new cd(t.key,t.data,Sn.none());{const n=t.data,r=wr.empty();let s=new en(pn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new uo(t.key,r,new es(s.toArray()),Sn.none())}}function vH(t,e,n){t instanceof cd?function(s,i,o){const a=s.value.clone(),l=xA(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof uo?function(s,i,o){if(!mp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=xA(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(lO(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Eh(t,e,n,r){return t instanceof cd?function(i,o,a,l){if(!mp(i.precondition,o))return a;const c=i.value.clone(),u=AA(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof uo?function(i,o,a,l){if(!mp(i.precondition,o))return a;const c=AA(i.fieldTransforms,l,o),u=o.data;return u.setAll(lO(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return mp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function wH(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=rO(r.transform,s||null);i!=null&&(n===null&&(n=wr.empty()),n.set(r.field,i))}return n||null}function TA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pu(r,s,(i,o)=>gH(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cd extends Ly{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class uo extends Ly{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xA(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,pH(o,a,n[s]))}return r}function AA(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,mH(i,o,e))}return r}class ud extends Ly{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ab extends Ly{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vH(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Eh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Eh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eO();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=aO(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gt())}isEqual(e){return this.batchId===e.batchId&&Pu(this.mutations,e.mutations,(n,r)=>TA(n,r))&&Pu(this.baseMutations,e.baseMutations,(n,r)=>TA(n,r))}}class Rb{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return dH}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Rb(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cb=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn,$t;function uO(t){switch(t){case $.OK:return Oe(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Oe(15467,{code:t})}}function dO(t){if(t===void 0)return $n("GRPC error has no .code"),$.UNKNOWN;switch(t){case Hn.OK:return $.OK;case Hn.CANCELLED:return $.CANCELLED;case Hn.UNKNOWN:return $.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return $.INTERNAL;case Hn.UNAVAILABLE:return $.UNAVAILABLE;case Hn.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Hn.NOT_FOUND:return $.NOT_FOUND;case Hn.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Hn.ABORTED:return $.ABORTED;case Hn.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Hn.DATA_LOSS:return $.DATA_LOSS;default:return Oe(39323,{code:t})}}($t=Hn||(Hn={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=new ha([4294967295,4294967295],0);function PA(t){const e=hO().encode(t),n=new XD;return n.update(e),new Uint8Array(n.digest())}function RA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ha([n,r],0),new ha([s,i],0)]}class kb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zd(`Invalid padding: ${n}`);if(r<0)throw new Zd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ha.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ha.fromNumber(r)));return s.compare(EH)===1&&(s=new ha([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=PA(e),[r,s]=RA(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new kb(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=PA(e),[r,s]=RA(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mf(Ze.min(),s,new dn(lt),ts(),gt())}}class Vf{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vf(r,n,gt(),gt(),gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class fO{constructor(e,n){this.targetId=e,this.Ce=n}}class mO{constructor(e,n,r=kn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class CA{constructor(){this.ve=0,this.Fe=kA(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gt(),n=gt(),r=gt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Oe(38017,{changeType:i})}}),new Vf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=kA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bH{constructor(e){this.Ge=e,this.ze=new Map,this.je=ts(),this.Je=xm(),this.He=xm(),this.Ye=new dn(lt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(vg(i))if(r===0){const o=new ve(i.path);this.et(n,o,mn.newNoDocument(o,Ze.min()))}else ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}bh==null||bh.lt(function(u,h,f,m,_){var E,w,S;const g={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},b=h.unchangedNames;return b&&(g.bloomFilter={applied:_===0,hashCount:(b==null?void 0:b.hashCount)??0,bitmapLength:((w=(E=b==null?void 0:b.bits)==null?void 0:E.bitmap)==null?void 0:w.length)??0,padding:((S=b==null?void 0:b.bits)==null?void 0:S.padding)??0,mightContain:P=>(m==null?void 0:m.mightContain(P))??!1}),g}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=io(r).toUint8Array()}catch(l){if(l instanceof C2)return _s("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kb(o,s,i)}catch(l){return _s(l instanceof Zd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&vg(a.target)){const l=new ve(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mn.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=gt();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Mf(e,n,this.Ye,this.je,r);return this.je=ts(),this.Je=xm(),this.He=xm(),this.Ye=new dn(lt),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new CA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new en(lt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new en(lt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xm(){return new dn(ve.comparator)}function kA(){return new dn(ve.comparator)}const SH={asc:"ASCENDING",desc:"DESCENDING"},IH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TH={and:"AND",or:"OR"};class xH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function c0(t,e){return t.useProto3Json||Cf(e)?e:{value:e}}function $u(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AH(t,e){return $u(t,e.toTimestamp())}function zn(t){return ze(!!t,49232),Ze.fromTimestamp(function(n){const r=so(n);return new qt(r.seconds,r.nanos)}(t))}function Nb(t,e){return u0(t,e).canonicalString()}function u0(t,e){const n=function(s){return new Rt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gO(t){const e=Rt.fromString(t);return ze(TO(e),10190,{key:e.toString()}),e}function lf(t,e){return Nb(t.databaseId,e.path)}function xi(t,e){const n=gO(e);if(n.get(1)!==t.databaseId.projectId)throw new te($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(wO(n))}function yO(t,e){return Nb(t.databaseId,e)}function vO(t){const e=gO(t);return e.length===4?Rt.emptyPath():wO(e)}function d0(t){return new Rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wO(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function NA(t,e,n){return{name:lf(t,e),fields:n.value.mapValue.fields}}function My(t,e,n){const r=xi(t,e.name),s=zn(e.updateTime),i=e.createTime?zn(e.createTime):Ze.min(),o=new wr({mapValue:{fields:e.fields}}),a=mn.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function PH(t,e){return"found"in e?function(r,s){ze(!!s.found,43571),s.found.name,s.found.updateTime;const i=xi(r,s.found.name),o=zn(s.found.updateTime),a=s.found.createTime?zn(s.found.createTime):Ze.min(),l=new wr({mapValue:{fields:s.found.fields}});return mn.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){ze(!!s.missing,3894),ze(!!s.readTime,22933);const i=xi(r,s.missing),o=zn(s.readTime);return mn.newNoDocument(i,o)}(t,e):Oe(7234,{result:e})}function RH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Oe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ze(u===void 0||typeof u=="string",58123),kn.fromBase64String(u||"")):(ze(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),kn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?$.UNKNOWN:dO(c.code);return new te(u,c.message||"")}(o);n=new mO(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xi(t,r.document.name),i=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):Ze.min(),a=new wr({mapValue:{fields:r.document.fields}}),l=mn.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new pp(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xi(t,r.document),i=r.readTime?zn(r.readTime):Ze.min(),o=mn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new pp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xi(t,r.document),i=r.removedTargetIds||[];n=new pp([],i,s,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new _H(s,i),a=r.targetId;n=new fO(a,o)}}return n}function cf(t,e){let n;if(e instanceof cd)n={update:NA(t,e.key,e.value)};else if(e instanceof ud)n={delete:lf(t,e.key)};else if(e instanceof uo)n={update:NA(t,e.key,e.data),updateMask:LH(e.fieldMask)};else{if(!(e instanceof Ab))return Oe(16599,{Vt:e.type});n={verify:lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ju)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:AH(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Oe(27497)}(t,e.precondition)),n}function h0(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Sn.updateTime(zn(i.updateTime)):i.exists!==void 0?Sn.exists(i.exists):Sn.none()}(e.currentDocument):Sn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ze(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new ju;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new jl(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new Ul(u)}else"increment"in a?l=new Uu(o,a.increment):Oe(16584,{proto:a});const c=pn.fromServerFormat(a.fieldPath);return new Lf(c,l)}(t,s)):[];if(e.update){e.update.name;const s=xi(t,e.update.name),i=new wr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new es(c.map(u=>pn.fromServerFormat(u)))}(e.updateMask);return new uo(s,i,o,n,r)}return new cd(s,i,n,r)}if(e.delete){const s=xi(t,e.delete);return new ud(s,n)}if(e.verify){const s=xi(t,e.verify);return new Ab(s,n)}return Oe(1463,{proto:e})}function CH(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?zn(s.updateTime):zn(i);return o.isEqual(Ze.min())&&(o=zn(i)),new yH(o,s.transformResults||[])}(n,e))):[]}function _O(t,e){return{documents:[yO(t,e.path)]}}function Vy(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yO(t,s);const i=function(c){if(c.length!==0)return IO(Jt.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:jo(f.field),direction:NH(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=c0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function EO(t,e,n,r){const{ft:s,parent:i}=Vy(t,e),o={},a=[];let l=0;return n.forEach(c=>{const u=r?c.alias:"aggregate_"+l++;o[u]=c.alias,c.aggregateType==="count"?a.push({alias:u,count:{}}):c.aggregateType==="avg"?a.push({alias:u,avg:{field:jo(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:u,sum:{field:jo(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function bO(t){let e=vO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=SO(h);return f instanceof Jt&&Sb(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(_){return new af(Ac(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Cf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Aa(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Aa(m,f)}(n.endAt)),H2(e,s,o,i,a,"F",l,c)}function kH(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ac(n.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ac(n.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ac(n.unaryFilter.field);return Mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ac(n.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Mt.create(Ac(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jt.create(n.compositeFilter.filters.map(r=>SO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}}(n.compositeFilter.op))}(t):Oe(30097,{filter:t})}function NH(t){return SH[t]}function DH(t){return IH[t]}function OH(t){return TH[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Ac(t){return pn.fromServerFormat(t.fieldPath)}function IO(t){return t instanceof Mt?function(n){if(n.op==="=="){if(gA(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(pA(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gA(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(pA(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:DH(n.op),value:n.value}}}(t):t instanceof Jt?function(n){const r=n.getFilters().map(s=>IO(s));return r.length===1?r[0]:{compositeFilter:{op:OH(n.op),filters:r}}}(t):Oe(54877,{filter:t})}function LH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r,s,i=Ze.min(),o=Ze.min(),a=kn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.yt=e}}function MH(t,e){let n;if(e.document)n=My(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ve.fromSegments(e.noDocument.path),s=Bl(e.noDocument.readTime);n=mn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe(56709);{const r=ve.fromSegments(e.unknownDocument.path),s=Bl(e.unknownDocument.version);n=mn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new qt(s[0],s[1]);return Ze.fromTimestamp(i)}(e.readTime)),n}function DA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Eg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:lf(i,o.key),fields:o.data.value.mapValue.fields,updateTime:$u(i,o.version.toTimestamp()),createTime:$u(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$l(e.version)};else{if(!e.isUnknownDocument())return Oe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:$l(e.version)}}return r}function Eg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $l(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bl(t){const e=new qt(t.seconds,t.nanoseconds);return Ze.fromTimestamp(e)}function rl(t,e){const n=(e.baseMutations||[]).map(i=>h0(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>h0(t.yt,i)),s=qt.fromMillis(e.localWriteTimeMs);return new Pb(e.batchId,s,n,r)}function eh(t){const e=Bl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Bl(t.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return ze(o===1,1966,{count:o}),Or(ld(vO(i.documents[0])))}(t.query):function(i){return Or(bO(i))}(t.query),new Wi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,kn.fromBase64String(t.resumeToken))}function AO(t,e){const n=$l(e.snapshotVersion),r=$l(e.lastLimboFreeSnapshotVersion);let s;s=vg(e.target)?_O(t.yt,e.target):Vy(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fl(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Fy(t){const e=bO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}function nw(t,e){return new Cb(e.largestBatchId,h0(t.yt,e.overlayMutation))}function OA(t,e){const n=e.path.lastSegment();return[t,Dr(e.path.popLast()),n]}function LA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:$l(r.readTime),documentKey:Dr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{getBundleMetadata(e,n){return MA(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Bl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return MA(e).put(function(s){return{bundleId:s.id,createTime:$l(zn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return VA(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Fy(i.bundledQuery),readTime:Bl(i.readTime)}}(r)})}saveNamedQuery(e,n){return VA(e).put(function(s){return{name:s.name,readTime:$l(zn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function MA(t){return or(t,Py)}function VA(t){return or(t,Ry)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new jy(e,r)}getOverlay(e,n){return Vd(e).get(OA(this.userId,n)).next(r=>r?nw(this.serializer,r):null)}getOverlays(e,n){const r=vi();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Cb(n,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Dr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Vd(e).Z(t0,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=vi(),i=Dr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vd(e).J(t0,o).next(a=>{for(const l of a){const c=nw(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=vi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Vd(e).ee({index:S2,range:a},(l,c,u)=>{const h=nw(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>i)}St(e,n){return Vd(e).put(function(s,i,o){const[a,l,c]=OA(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cf(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Vd(t){return or(t,Cy)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{bt(e){return or(e,wb)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?kn.fromUint8Array(r):kn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(En(e.integerValue));else if("doubleValue"in e){const r=En(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Xh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=so(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(io(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?M2(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Dy(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Oe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Mu,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(En(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ve.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}sl.Kt=new sl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=255;function jH(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function FA(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=jH(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class UH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=FA(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=FA(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(mc),this.sn(255)}_n(){this.an(mc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===mc?(this.sn(mc),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===mc?(this.an(mc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class $H{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class BH{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Fd{constructor(){this.cn=new UH,this.ln=new $H(this.cn),this.hn=new BH(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new il(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:gp(this.En),directionalValue:gp(this.dn),orderedDocumentKey:gp(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Eo(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=jA(t.En,e.En),n!==0?n:(n=jA(t.dn,e.dn),n!==0?n:ve.comparator(t.In,e.In)))}function jA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function gp(t){return rD()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function UA(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class $A{constructor(e){this.mn=new en((n,r)=>pn.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ze(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=X_(e);if(n!==void 0&&!this.wn(n))return!1;const r=Za(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new en(pn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Sl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Sl(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Sl(r.field,r.dir==="asc"?0:1)));return new Cu(Cu.UNKNOWN_ID,this.collectionId,n,ku.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){var n,r;if(ze(t instanceof Mt||t instanceof Jt,20012),t instanceof Mt){if(t instanceof q2){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>Mt.create(t.field,"==",i)))||[];return Jt.create(s,"or")}return t}const e=t.filters.map(s=>PO(s));return Jt.create(e,t.op)}function zH(t){if(t.getFilters().length===0)return[];const e=p0(PO(t));return ze(RO(e),7391),f0(e)||m0(e)?[e]:e.getFilters()}function f0(t){return t instanceof Mt}function m0(t){return t instanceof Jt&&Sb(t)}function RO(t){return f0(t)||m0(t)||function(n){if(n instanceof Jt&&i0(n)){for(const r of n.getFilters())if(!f0(r)&&!m0(r))return!1;return!0}return!1}(t)}function p0(t){if(ze(t instanceof Mt||t instanceof Jt,34018),t instanceof Mt)return t;if(t.filters.length===1)return p0(t.filters[0]);const e=t.filters.map(r=>p0(r));let n=Jt.create(e,t.op);return n=bg(n),RO(n)?n:(ze(n instanceof Jt,64498),ze(Fu(n),40251),ze(n.filters.length>1,57927),n.filters.reduce((r,s)=>Db(r,s)))}function Db(t,e){let n;return ze(t instanceof Mt||t instanceof Jt,38388),ze(e instanceof Mt||e instanceof Jt,25473),n=t instanceof Mt?e instanceof Mt?function(s,i){return Jt.create([s,i],"and")}(t,e):BA(t,e):e instanceof Mt?BA(e,t):function(s,i){if(ze(s.filters.length>0&&i.filters.length>0,48005),Fu(s)&&Fu(i))return B2(s,i.getFilters());const o=i0(s)?s:i,a=i0(s)?i:s,l=o.filters.map(c=>Db(c,a));return Jt.create(l,"or")}(t,e),bg(n)}function BA(t,e){if(Fu(e))return B2(e,t.getFilters());{const n=e.filters.map(r=>Db(t,r));return Jt.create(n,"or")}}function bg(t){if(ze(t instanceof Mt||t instanceof Jt,11850),t instanceof Mt)return t;const e=t.getFilters();if(e.length===1)return bg(e[0]);if(U2(t))return t;const n=e.map(s=>bg(s)),r=[];return n.forEach(s=>{s instanceof Mt?r.push(s):s instanceof Jt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Jt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(){this.Cn=new Ob}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Es.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Ob{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new en(Rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new en(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="IndexedDbIndexManager",Am=new Uint8Array(0);class qH{constructor(e,n){this.databaseId=n,this.vn=new Ob,this.Fn=new co(r=>Fl(r),(r,s)=>Nf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:Dr(s)};return WA(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[l2(n),""],!1,!0);return WA(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(yi(o.parent))}return r})}addFieldIndex(e,n){const r=jd(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=gc(e);return i.next(a=>{o.put(LA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=jd(e),s=gc(e),i=pc(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=jd(e),r=pc(e),s=gc(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new $A(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=pc(e);let s=!0;const i=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=gt();const a=[];return V.forEach(i,(l,c)=>{se(zA,`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${Fl(n)}`);const u=function(S,P){const x=X_(P);if(x===void 0)return null;for(const O of wg(S,x.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),h=function(S,P){const x=new Map;for(const O of Za(P))for(const I of wg(S,O.fieldPath))switch(I.op){case"==":case"in":x.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return x.set(O.fieldPath.canonicalString(),I.value),Array.from(x.values())}return null}(c,l),f=function(S,P){const x=[];let O=!0;for(const I of Za(P)){const A=I.kind===0?EA(S,I.fieldPath,S.startAt):bA(S,I.fieldPath,S.startAt);x.push(A.value),O&&(O=A.inclusive)}return new Aa(x,O)}(c,l),m=function(S,P){const x=[];let O=!0;for(const I of Za(P)){const A=I.kind===0?bA(S,I.fieldPath,S.endAt):EA(S,I.fieldPath,S.endAt);x.push(A.value),O&&(O=A.inclusive)}return new Aa(x,O)}(c,l),_=this.On(l,c,f),g=this.On(l,c,m),b=this.Nn(l,c,h),E=this.Bn(l.indexId,u,_,f.inclusive,g,m.inclusive,b);return V.forEach(E,w=>r.Y(w,n.limit).next(S=>{S.forEach(P=>{const x=ve.fromSegments(P.documentKey);o.has(x)||(o=o.add(x),a.push(x))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=zH(Jt.create(e.filters,"and")).map(r=>a0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):Am,m=this.kn(e,f,r[h%c],s),_=this.qn(e,f,i[h%c],o),g=a.map(b=>this.kn(e,f,b,!0));u.push(...this.createRange(m,_,g))}return u}kn(e,n,r,s){const i=new il(e,ve.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new il(e,ve.empty(),n,r);return s?i.An():i}xn(e,n){const r=new $A(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new en(pn.comparator),u=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Fd;for(const s of Za(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);sl.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Fd;return sl.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Fd;return sl.Kt.Dt(Vl(this.databaseId,n),r.Pn(function(i){const o=Za(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Fd);let i=0;for(const o of Za(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&of(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);sl.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Fd;l.seed(a.un()),sl.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof Mt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=jd(e),s=gc(e);return(n?r.J(e0,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const f=h?new ku(h.sequenceNumber,new Es(Bl(h.readTime),new ve(yi(h.documentKey)),h.largestBatchId)):ku.empty(),m=u.fields.map(([_,g])=>new Sl(pn.fromServerFormat(_),g));return new Cu(u.indexId,u.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:lt(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=jd(e),i=gc(e);return this.Gn(e).next(o=>s.J(e0,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(LA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(c=>{const u=this.jn(i,l);return c.isEqual(u)?V.resolve():this.Jn(e,i,l,c,u)}))))})}Hn(e,n,r,s){return pc(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return pc(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=pc(e);let i=new en(Eo);return s.ee({index:b2,range:IDBKeyRange.only([r.indexId,this.uid,gp(this.$n(r,n))])},(o,a)=>{i=i.add(new il(r.indexId,n,UA(a.arrayValue),UA(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new en(Eo);const s=this.Qn(n,e);if(s==null)return r;const i=X_(n);if(i!=null){const o=e.data.field(i.fieldPath);if(of(o))for(const a of o.arrayValue.values||[])r=r.add(new il(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new il(n.indexId,e.key,Am,s));return r}Jn(e,n,r,s,i){se(zA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,h,f){const m=l.getIterator(),_=c.getIterator();let g=fc(m),b=fc(_);for(;g||b;){let E=!1,w=!1;if(g&&b){const S=u(g,b);S<0?w=!0:S>0&&(E=!0)}else g!=null?w=!0:E=!0;E?(h(b),b=fc(_)):w?(f(g),g=fc(m)):(g=fc(m),b=fc(_))}}(s,i,Eo,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return gc(e).ee({index:E2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Eo(o,a)).filter((o,a,l)=>!a||Eo(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Eo(o,e),l=Eo(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Am,ve.empty()),l=s[o+1].Vn(this.uid,Am,ve.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Eo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qA)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Oe(44426))).next(qA)}}function WA(t){return or(t,tf)}function pc(t){return or(t,vh)}function jd(t){return or(t,vb)}function gc(t){return or(t,yh)}function qA(t){ze(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;pb(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Es(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CO=41943040;class kr{static withCacheSize(e){return new kr(e,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e,n){const r=t.store(Us),s=t.store(Nu),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(u,h,f)=>(a++,f.delete()));i.push(l.next(()=>{ze(a===1,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const h=v2(e,u.key.path,n.batchId);i.push(s.delete(h)),c.push(u.key)}return V.waitFor(i).next(()=>c)}function Sg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oe(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(CO,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);class Uy{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){ze(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Uy(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bo(e).ee({index:ml,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Pc(e),o=bo(e);return o.add({}).next(a=>{ze(typeof a=="number",49019);const l=new Pb(a,n,r,s),c=function(m,_,g){const b=g.baseMutations.map(w=>cf(m.yt,w)),E=g.mutations.map(w=>cf(m.yt,w));return{userId:_,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:b,mutations:E}}(this.serializer,this.userId,l),u=[];let h=new en((f,m)=>lt(f.canonicalString(),m.canonicalString()));for(const f of s){const m=v2(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),u.push(o.put(c)),u.push(i.put(m,x7))}return h.forEach(f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return bo(e).get(n).next(r=>r?(ze(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),rl(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return bo(e).ee({index:ml,range:s},(o,a,l)=>{a.userId===this.userId&&(ze(a.batchId>=r,47524,{tr:r}),i=rl(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fa;return bo(e).ee({index:ml,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,fa],[this.userId,Number.POSITIVE_INFINITY]);return bo(e).J(ml,n).next(r=>r.map(s=>rl(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=cp(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Pc(e).ee({range:s},(o,a,l)=>{const[c,u,h]=o,f=yi(u);if(c===this.userId&&n.path.isEqual(f))return bo(e).get(h).next(m=>{if(!m)throw Oe(61480,{nr:o,batchId:h});ze(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(rl(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new en(lt);const s=[];return n.forEach(i=>{const o=cp(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Pc(e).ee({range:a},(c,u,h)=>{const[f,m,_]=c,g=yi(m);f===this.userId&&i.path.isEqual(g)?r=r.add(_):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=cp(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new en(lt);return Pc(e).ee({range:o},(l,c,u)=>{const[h,f,m]=l,_=yi(f);h===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(m)):u.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(bo(e).get(i).next(o=>{if(o===null)throw Oe(35274,{batchId:i});ze(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(rl(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return kO(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Pc(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=yi(i[1]);s.push(l)}else a.done()}).next(()=>{ze(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return NO(e,this.userId,n)}_r(e){return DO(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:fa,lastStreamToken:""})}}function NO(t,e,n){const r=cp(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Pc(t).ee({range:i,X:!0},(a,l,c)=>{const[u,h,f]=a;u===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function bo(t){return or(t,Us)}function Pc(t){return or(t,Nu)}function DO(t){return or(t,Zh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zl(0)}static cr(){return new zl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new zl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Ze.fromTimestamp(new qt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>yc(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ze(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return yc(e).ee((o,a)=>{const l=eh(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return yc(e).ee((r,s)=>{const i=eh(s);n(i)})}lr(e){return KA(e).get(yg).next(n=>(ze(n!==null,2888),n))}hr(e,n){return KA(e).put(yg,n)}Pr(e,n){return yc(e).put(AO(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Fl(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return yc(e).ee({range:s,index:_2},(o,a,l)=>{const c=eh(a);Nf(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Uo(e);return n.forEach(o=>{const a=Dr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=Uo(e);return V.forEach(n,i=>{const o=Dr(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Uo(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Uo(e);let i=gt();return s.ee({range:r,X:!0},(o,a,l)=>{const c=yi(o[1]),u=new ve(c);i=i.add(u)}).next(()=>i)}containsKey(e,n){const r=Dr(n.path),s=IDBKeyRange.bound([r],[l2(r)],!1,!0);let i=0;return Uo(e).ee({index:yb,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return yc(e).get(n).next(r=>r?eh(r):null)}}function yc(t){return or(t,Du)}function KA(t){return or(t,Il)}function Uo(t){return or(t,Ou)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="LruGarbageCollector",OO=1048576;function QA([t,e],[n,r]){const s=lt(t,n);return s===0?lt(e,r):s}class KH{constructor(e){this.Ir=e,this.buffer=new en(QA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(GA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fa(n)?se(GA,"Ignoring IndexedDB error during garbage collection: ",n):await Va(n)}await this.Vr(3e5)})}}class GH{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Zr.ce);const r=new KH(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(HA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Tc()<=Lt.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function MO(t,e){return new GH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this.db=e,this.garbageCollector=MO(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return Pm(e,r)}removeReference(e,n,r){return Pm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Pm(e,n)}br(e,n){return function(s,i){let o=!1;return DO(s).te(a=>NO(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ze.min()),Uo(e).delete(function(h){return[0,Dr(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Pm(e,n)}Sr(e,n){const r=Uo(e);let s,i=Zr.ce;return r.ee({index:yb},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Zr.ce&&n(new ve(yi(s)),i),i=c,s=l):i=Zr.ce}).next(()=>{i!==Zr.ce&&n(new ve(yi(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pm(t,e){return Uo(t).put(function(r,s){return{targetId:0,path:Dr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ga(e).put(r)}removeEntry(e,n,r){return Ga(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Eg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=mn.newInvalidDocument(n);return Ga(e).ee({index:up,range:IDBKeyRange.only(Ud(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:mn.newInvalidDocument(n)};return Ga(e).ee({index:up,range:IDBKeyRange.only(Ud(n))},(s,i)=>{r={document:this.Cr(n,i),size:Sg(i)}}).next(()=>r)}getEntries(e,n){let r=ts();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=ts(),s=new dn(ve.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Sg(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let s=new en(XA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ud(s.first()),Ud(s.last())),o=s.getIterator();let a=o.getNext();return Ga(e).ee({index:up,range:i},(l,c,u)=>{const h=ve.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&XA(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(Ud(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Eg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ga(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=ts();for(const h of c){const f=this.Cr(ve.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Of(n,f)||s.has(f.key))&&(u=u.insert(f.key,f))}return u})}getAllFromCollectionGroup(e,n,r,s){let i=ts();const o=JA(n,r),a=JA(n,Es.max());return Ga(e).ee({index:w2,range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.Cr(ve.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new JH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return YA(e).get(Z_).next(n=>(ze(!!n,20021),n))}Dr(e,n){return YA(e).put(Z_,n)}Cr(e,n){if(n){const r=MH(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ze.min())))return r}return mn.newInvalidDocument(e)}}function FO(t){return new YH(t)}class JH extends VO{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new co(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new en((i,o)=>lt(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=DA(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Sg(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=DA(this.Nr.serializer,o.convertToNoDocument(Ze.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function YA(t){return or(t,ef)}function Ga(t){return or(t,gg)}function Ud(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JA(t,e){const n=e.documentKey.path.toArray();return[t,Eg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=lt(n[i],r[i]),s)return s;return s=lt(n.length,r.length),s||(s=lt(n[n.length-2],r[r.length-2]),s||lt(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Eh(r.mutation,s,es.empty(),qt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=gt()){const s=vi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Xd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,gt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ts();const o=_h(),a=function(){return _h()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof uo)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Eh(u.mutation,c,u.mutation.getFieldMask(),qt.now())):o.set(c.key,es.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>a.set(c,new XH(u,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=_h();let s=new dn((o,a)=>o-a),i=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||es.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||gt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=eO();u.forEach(f=>{if(!i.has(f)){const m=aO(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ib(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(vi());let a=Ru,l=i;return o.next(c=>V.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?V.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,gt())).next(u=>({batchId:a,changes:Z2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let s=Xd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Xd();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,f){return new lo(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,mn.newInvalidDocument(u)))});let a=Xd();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Eh(u.mutation,c,es.empty(),qt.now()),Of(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:zn(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Fy(s.bundledQuery),readTime:zn(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(){this.overlays=new dn(ve.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vi();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=vi(),i=n.length+1,o=new ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new dn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=vi(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=vi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return V.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cb(n,r));let i=this.qr.get(n);i===void 0&&(i=gt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Qr=new en(hr.$r),this.Ur=new en(hr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new hr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new hr(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ve(new Rt([])),r=new hr(n,e),s=new hr(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new Rt([])),r=new hr(n,e),s=new hr(n,e+1);let i=gt();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new hr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||lt(e.Yr,n.Yr)}static Kr(e,n){return lt(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new en(hr.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Pb(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new hr(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?fa:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hr(n,0),s=new hr(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new en(lt);return n.forEach(s=>{const i=new hr(s,0),o=new hr(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ve.isDocumentKey(i)||(i=i.child(""));const o=new hr(new ve(i),0);let a=new en(lt);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new hr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new hr(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e){this.ri=e,this.docs=function(){return new dn(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=ts();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mn.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ts();const o=n.path,a=new ve(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||pb(f2(u),r)<=0||(s.has(u.key)||Of(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Oe(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sK(this)}getSize(e){return V.resolve(this.size)}}class sK extends VO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e){this.persistence=e,this.si=new co(n=>Fl(n),Nf),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.oi=0,this._i=new Lb,this.targetCount=0,this.ai=zl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zr(0),this.li=!1,this.li=!0,this.hi=new tK,this.referenceDelegate=e(this),this.Pi=new iK(this),this.indexManager=new WH,this.remoteDocumentCache=function(s){return new rK(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new xO(n),this.Ii=new ZH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new nK(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new oK(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class oK extends p2{constructor(e){super(),this.currentSequenceNumber=e}}class $y{constructor(e){this.persistence=e,this.Ri=new Lb,this.Vi=null}static mi(e){return new $y(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=ve.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ze.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ig{constructor(e,n){this.persistence=e,this.pi=new co(r=>Dr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=MO(this,n)}static mi(e,n){return new Ig(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ze.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hp(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Ay("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(kf)}(e),function(l){l.createObjectStore(Zh,{keyPath:T7}),l.createObjectStore(Us,{keyPath:cA,autoIncrement:!0}).createIndex(ml,uA,{unique:!0}),l.createObjectStore(Nu)}(e),ZA(e),function(l){l.createObjectStore(el)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Ou),l.deleteObjectStore(Du),l.deleteObjectStore(Il)}(e),ZA(e)),o=o.next(()=>function(l){const c=l.store(Il),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return c.put(yg,u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(Us).J().next(h=>{l.deleteObjectStore(Us),l.createObjectStore(Us,{keyPath:cA,autoIncrement:!0}).createIndex(ml,uA,{unique:!0});const f=c.store(Us),m=h.map(_=>f.put(_));return V.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Lu,{keyPath:O7})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(ef)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Py,{keyPath:L7})})(e),function(l){l.createObjectStore(Ry,{keyPath:M7})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Cy,{keyPath:z7});c.createIndex(t0,W7,{unique:!1}),c.createIndex(S2,q7,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(gg,{keyPath:A7});c.createIndex(up,P7),c.createIndex(w2,R7)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(el))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(vb,{keyPath:V7,autoIncrement:!0}).createIndex(e0,F7,{unique:!1}),l.createObjectStore(yh,{keyPath:j7}).createIndex(E2,U7,{unique:!1}),l.createObjectStore(vh,{keyPath:$7}).createIndex(b2,B7,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(yh).clear()}).next(()=>{n.objectStore(vh).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(wb,{keyPath:H7})})(e)})),r<18&&s>=18&&rD()&&(o=o.next(()=>{n.objectStore(yh).clear()}).next(()=>{n.objectStore(vh).clear()})),o}wi(e){let n=0;return e.store(el).ee((r,s)=>{n+=Sg(s)}).next(()=>{const r={byteSize:n};return e.store(ef).put(Z_,r)})}yi(e){const n=e.store(Zh),r=e.store(Us);return n.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,fa],[i.userId,i.lastAcknowledgedBatchId]);return r.J(ml,o).next(a=>V.forEach(a,l=>{ze(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=rl(this.serializer,l);return kO(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Ou),r=e.store(el);return e.store(Il).get(yg).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Rt(o),c=function(h){return[0,Dr(h)]}(l);i.push(n.get(c).next(u=>u?V.resolve():(h=>n.put({targetId:0,path:Dr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,n){e.createObjectStore(tf,{keyPath:D7});const r=n.store(tf),s=new Ob,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Dr(l)})}};return n.store(el).ee({X:!0},(o,a)=>{const l=new Rt(o);return i(l.popLast())}).next(()=>n.store(Nu).ee({X:!0},([o,a,l],c)=>{const u=yi(a);return i(u.popLast())}))}Di(e){const n=e.store(Du);return n.ee((r,s)=>{const i=eh(s),o=AO(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(el),s=[];return r.ee((i,o)=>{const a=n.store(gg),l=function(h){return h.document?new ve(Rt.fromString(h.document.name).popFirst(5)):h.noDocument?ve.fromSegments(h.noDocument.path):h.unknownDocument?ve.fromSegments(h.unknownDocument.path):Oe(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}Fi(e,n){const r=n.store(Us),s=FO(this.serializer),i=new Mb($y.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??gt();rl(this.serializer,l).keys().forEach(u=>c=c.add(u)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const u=new mr(c),h=jy.wt(this.serializer,u),f=i.getIndexManager(u),m=Uy.wt(u,this.serializer,f,i.referenceDelegate);return new jO(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new n0(n,Zr.ce),l).next()})})}}function ZA(t){t.createObjectStore(Ou,{keyPath:k7}).createIndex(yb,N7,{unique:!0}),t.createObjectStore(Du,{keyPath:"targetId"}).createIndex(_2,C7,{unique:!0}),t.createObjectStore(Il)}const So="IndexedDbPersistence",rw=18e5,sw=5e3,iw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UO="main";class Vb{constructor(e,n,r,s,i,o,a,l,c,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=u,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!Vb.v())throw new te($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QH(this,s),this.$i=n+UO,this.serializer=new xO(l),this.Ui=new Ti(this.$i,this.Ni,new aK(this.serializer)),this.hi=new FH,this.Pi=new HH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FO(this.serializer),this.Ii=new VH,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&$n(So,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te($.FAILED_PRECONDITION,iw);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Zr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Fa(e))return se(So,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(So,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return $d(e).get(hc).next(n=>V.resolve(this.es(n)))}ts(e){return Rm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,rw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=or(n,Lu);return r.J().next(s=>{const i=this.ss(s,rw),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):$d(e).get(hc).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,sw)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new te($.FAILED_PRECONDITION,iw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rm(e).J().next(r=>this.ss(r,sw).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&se(So,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kf,Lu],e=>{const n=new n0(e,Zr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Rm(e).J().next(n=>this.ss(n,rw).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Uy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qH(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return jy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){se(So,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Q7:l===17?A2:l===16?G7:l===15?_b:l===14?x2:l===13?T2:l===12?K7:l===11?I2:void Oe(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new n0(a,this.ci?this.ci.next():Zr.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw $n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new te($.FAILED_PRECONDITION,m2);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return $d(e).get(hc).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,sw)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new te($.FAILED_PRECONDITION,iw)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $d(e).put(hc,n)}static v(){return Ti.v()}Zi(e){const n=$d(e);return n.get(hc).next(r=>this.es(r)?(se(So,"Releasing primary lease."),n.delete(hc)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||($n(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;nD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return se(So,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $n(So,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){$n("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $d(t){return or(t,kf)}function Rm(t){return or(t,Lu)}function Fb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=gt(),s=gt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jb(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nD()?8:g2(sr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new lK;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Tc()<=Lt.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",xc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Tc()<=Lt.DEBUG&&se("QueryEngine","Query:",xc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Tc()<=Lt.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",xc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(n))):V.resolve())}ys(e,n){if(SA(n))return V.resolve(null);let r=Or(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_g(n,null,"F"),r=Or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=gt(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,_g(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return SA(n)||s.isEqual(Ze.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(Tc()<=Lt.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xc(n)),this.vs(e,o,n,h2(s,Ru)).next(a=>a))})}Ds(e,n){let r=new en(J2(e));return n.forEach((s,i)=>{Of(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Tc()<=Lt.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",xc(n)),this.ps.getDocumentsMatchingQuery(e,n,Es.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="LocalStore",cK=3e8;class uK{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new dn(lt),this.xs=new co(i=>Fl(i),Nf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BO(t,e,n,r){return new uK(t,e,n,r)}async function zO(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=gt();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function dK(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let m=V.resolve();return f.forEach(_=>{m=m.next(()=>u.getEntry(l,_)).next(g=>{const b=c.docVersions.get(_);ze(b!==null,48541),g.version.compareTo(b)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=gt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function WO(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function hK(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,u.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(kn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(g,b,E){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=cK?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,u)&&a.push(n.Pi.updateTargetData(i,m))});let l=ts(),c=gt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(qO(i,o,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!r.isEqual(Ze.min())){const u=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function qO(t,e,n){let r=gt(),s=gt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ts();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ze.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se(Ub,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function fK(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fa),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bu(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Wi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function zu(t,e,n){const r=we(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Fa(o))throw o;se(Ub,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Tg(t,e,n){const r=we(t);let s=Ze.min(),i=gt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=we(l),f=h.xs.get(u);return f!==void 0?V.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,u)}(r,o,Or(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ze.min(),n?i:gt())).next(a=>(GO(r,Y2(e),a),{documents:a,Qs:i})))}function HO(t,e){const n=we(t),r=we(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function KO(t,e){const n=we(t),r=n.Os.get(e)||Ze.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,h2(r,Ru),Number.MAX_SAFE_INTEGER)).then(s=>(GO(n,e,s),s))}function GO(t,e,n){let r=t.Os.get(e)||Ze.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}async function mK(t,e,n,r){const s=we(t);let i=gt(),o=ts();for(const c of n){const u=e.$s(c.metadata.name);c.document&&(i=i.add(u));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(u,h)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),l=await Bu(s,function(u){return Or(ld(Rt.fromString(`__bundle__/docs/${u}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>qO(c,a,o).next(u=>(a.apply(c),u)).next(u=>s.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Pi.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,u.ks,u.qs)).next(()=>u.ks)))}async function pK(t,e,n=gt()){const r=await Bu(t,Or(Fy(e.bundledQuery))),s=we(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=zn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const a=r.withResumeToken(kn.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(i,a).next(()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Pi.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ii.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="firestore_clients";function eP(t,e){return`${QO}_${t}_${e}`}const YO="firestore_mutations";function tP(t,e,n){let r=`${YO}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const JO="firestore_targets";function ow(t,e){return`${JO}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="SharedClientState";class xg{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new te(s.error.code,s.error.message))),o?new xg(e,n,s.state,i):($n(fi,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new te(r.error.code,r.error.message))),i?new Sh(e,r.state,s):($n(fi,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ag{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Tb();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=y2(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Ag(e,i):($n(fi,`Failed to parse client data for instance '${e}': ${n}`),null)}}class $b{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new $b(n.clientId,n.onlineState):($n(fi,`Failed to parse online state: ${e}`),null)}}class g0{constructor(){this.activeTargetIds=Tb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aw{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new dn(lt),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=eP(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new g0),this.ro=new RegExp(`^${QO}_${o}_([^_]*)$`),this.io=new RegExp(`^${YO}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${JO}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(eP(this.persistenceKey,r));if(s){const i=Ag.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(ow(this.persistenceKey,e));if(s){const i=Sh.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ow(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return se(fi,"READ",e,n),n}setItem(e,n){se(fi,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){se(fi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(se(fi,"EVENT",n.key,n.newValue),n.key===this.eo)return void $n("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Zr.ce;if(i!=null)try{const a=JSON.parse(i);ze(typeof a=="number",30636,{So:i}),o=a}catch(a){$n(fi,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Zr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new xg(this.currentUser,e,n,r),i=tP(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=tP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=ow(this.persistenceKey,e),i=new Sh(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Ag.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return xg.Ws(new mr(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Sh.Ws(s,n)}uo(e){return $b.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);se(fi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Tb();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class XO{constructor(){this.Mo=new g0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="ConnectivityMonitor";class rP{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(nP,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(nP,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm=null;function y0(){return Cm===null?Cm=function(){return 268435456+Math.round(2147483648*Math.random())}():Cm++,"0x"+Cm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="RestConnection",yK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===rf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=y0(),a=this.zo(e,n.toUriEncodedString());se(lw,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),u=ti(c);return this.Jo(e,a,l,r,u).then(h=>(se(lw,`Received RPC '${e}' ${o}: `,h),h),h=>{throw _s(lw,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ad}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=yK[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="WebChannelConnection";class _K extends vK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=y0();return new Promise((a,l)=>{const c=new ZD;c.setWithCredentials(!0),c.listenOnce(e2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case lp.NO_ERROR:const h=c.getResponseJson();se(Rr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case lp.TIMEOUT:se(Rr,`RPC '${e}' ${o} timed out`),l(new te($.DEADLINE_EXCEEDED,"Request time out"));break;case lp.HTTP_ERROR:const f=c.getStatus();if(se(Rr,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const g=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(_.status);l(new te(g,_.message))}else l(new te($.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new te($.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{se(Rr,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(s);se(Rr,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",u,r,15)})}T_(e,n,r){const s=y0(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=r2(),a=n2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");se(Rr,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let f=!1,m=!1;const _=new wK({Yo:b=>{m?se(Rr,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(f||(se(Rr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),se(Rr,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Zo:()=>h.close()}),g=(b,E,w)=>{b.listen(E,S=>{try{w(S)}catch(P){setTimeout(()=>{throw P},0)}})};return g(h,Jd.EventType.OPEN,()=>{m||(se(Rr,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),g(h,Jd.EventType.CLOSE,()=>{m||(m=!0,se(Rr,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(h))}),g(h,Jd.EventType.ERROR,b=>{m||(m=!0,_s(Rr,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),_.a_(new te($.UNAVAILABLE,"The operation could not be completed")))}),g(h,Jd.EventType.MESSAGE,b=>{var E;if(!m){const w=b.data[0];ze(!!w,16349);const S=w,P=(S==null?void 0:S.error)||((E=S[0])==null?void 0:E.error);if(P){se(Rr,`RPC '${e}' stream ${s} received error:`,P);const x=P.status;let O=function(R){const N=Hn[R];if(N!==void 0)return dO(N)}(x),I=P.message;O===void 0&&(O=$.INTERNAL,I="Unknown error status: "+x+" with message "+P.message),m=!0,_.a_(new te(O,I)),h.close()}else se(Rr,`RPC '${e}' stream ${s} received:`,w),_.u_(w)}}),g(a,t2.STAT_EVENT,b=>{b.stat===G_.PROXY?se(Rr,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===G_.NOPROXY&&se(Rr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(){return typeof window<"u"?window:null}function yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t){return new xH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="PersistentStream";class eL{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new te($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(sP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(sP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EK extends eL{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=RH(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ze.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ze.min():o.readTime?zn(o.readTime):Ze.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=d0(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=vg(l)?{documents:_O(i,l)}:{query:Vy(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pO(i,o.resumeToken);const c=c0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ze.min())>0){a.readTime=$u(i,o.snapshotVersion.toTimestamp());const c=c0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=kH(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=d0(this.serializer),n.removeTarget=e,this.q_(n)}}class bK extends eL{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=CH(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=d0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cf(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{}class IK extends SK{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new te($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,u0(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te($.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,u0(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te($.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class TK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($n(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="RemoteStore";class xK{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ua(this)&&(se(Wl,"Restarting streams for network reachability change."),await async function(l){const c=we(l);c.Ea.add(4),await dd(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ff(c)}(this))})}),this.Ra=new TK(r,s)}}async function Ff(t){if(Ua(t))for(const e of t.da)await e(!0)}async function dd(t){for(const e of t.da)await e(!1)}function By(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qb(n)?Wb(n):fd(n).O_()&&zb(n,e))}function Wu(t,e){const n=we(t),r=fd(n);n.Ia.delete(e),r.O_()&&tL(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ua(n)&&n.Ra.set("Unknown"))}function zb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fd(t).Y_(e)}function tL(t,e){t.Va.Ue(e),fd(t).Z_(e)}function Wb(t){t.Va=new bH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fd(t).start(),t.Ra.ua()}function qb(t){return Ua(t)&&!fd(t).x_()&&t.Ia.size>0}function Ua(t){return we(t).Ea.size===0}function nL(t){t.Va=void 0}async function AK(t){t.Ra.set("Online")}async function PK(t){t.Ia.forEach((e,n)=>{zb(t,e)})}async function RK(t,e){nL(t),qb(t)?(t.Ra.ha(e),Wb(t)):t.Ra.set("Unknown")}async function CK(t,e,n){if(t.Ra.set("Online"),e instanceof mO&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){se(Wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pg(t,r)}else if(e instanceof pp?t.Va.Ze(e):e instanceof fO?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ze.min()))try{const r=await WO(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Ia.get(c);u&&i.Ia.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.Ia.get(l);if(!u)return;i.Ia.set(l,u.withResumeToken(kn.EMPTY_BYTE_STRING,u.snapshotVersion)),tL(i,l);const h=new Wi(u.target,l,c,u.sequenceNumber);zb(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se(Wl,"Failed to raise snapshot:",r),await Pg(t,r)}}async function Pg(t,e,n){if(!Fa(e))throw e;t.Ea.add(1),await dd(t),t.Ra.set("Offline"),n||(n=()=>WO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(Wl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ff(t)})}function rL(t,e){return e().catch(n=>Pg(t,n,e))}async function hd(t){const e=we(t),n=Pa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fa;for(;kK(e);)try{const s=await fK(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,NK(e,s)}catch(s){await Pg(e,s)}sL(e)&&iL(e)}function kK(t){return Ua(t)&&t.Ta.length<10}function NK(t,e){t.Ta.push(e);const n=Pa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sL(t){return Ua(t)&&!Pa(t).x_()&&t.Ta.length>0}function iL(t){Pa(t).start()}async function DK(t){Pa(t).ra()}async function OK(t){const e=Pa(t);for(const n of t.Ta)e.ea(n.mutations)}async function LK(t,e,n){const r=t.Ta.shift(),s=Rb.from(r,e,n);await rL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hd(t)}async function MK(t,e){e&&Pa(t).X_&&await async function(r,s){if(function(o){return uO(o)&&o!==$.ABORTED}(s.code)){const i=r.Ta.shift();Pa(r).B_(),await rL(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await hd(r)}}(t,e),sL(t)&&iL(t)}async function iP(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),se(Wl,"RemoteStore received new credentials");const r=Ua(n);n.Ea.add(3),await dd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ff(n)}async function v0(t,e){const n=we(t);e?(n.Ea.delete(2),await Ff(n)):e||(n.Ea.add(2),await dd(n),n.Ra.set("Unknown"))}function fd(t){return t.ma||(t.ma=function(n,r,s){const i=we(n);return i.sa(),new EK(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:AK.bind(null,t),t_:PK.bind(null,t),r_:RK.bind(null,t),H_:CK.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),qb(t)?Wb(t):t.Ra.set("Unknown")):(await t.ma.stop(),nL(t))})),t.ma}function Pa(t){return t.fa||(t.fa=function(n,r,s){const i=we(n);return i.sa(),new bK(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:DK.bind(null,t),r_:MK.bind(null,t),ta:OK.bind(null,t),na:LK.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await hd(t)):(await t.fa.stop(),t.Ta.length>0&&(se(Wl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Hb(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(t,e){if($n("AsyncQueue",`${e}: ${t}`),Fa(t))return new te($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Xd(),this.sortedSet=new dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Tl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.ga=new dn(ve.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ql{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ql(e,n,Tl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class FK{constructor(){this.queries=aP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=aP(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new te($.ABORTED,"Firestore shutting down"))}}function aP(){return new co(t=>Q2(t),Df)}async function Kb(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new VK,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=md(o,`Initialization of query '${xc(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Qb(n)}async function Gb(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jK(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Qb(n)}function UK(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Qb(t){t.Ca.forEach(e=>{e.next()})}var w0,lP;(lP=w0||(w0={})).Ma="default",lP.Cache="cache";class Yb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ql(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==w0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.serializer=e}$s(e){return xi(this.serializer,e)}Us(e){return e.metadata.exists?My(this.serializer,e.document,!1):mn.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return zn(e)}}class Jb{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=aL(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=Rt.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new cP(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||gt()).add(i);n.set(o,a)}}return n}async ja(e){const n=await mK(e,new cP(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await pK(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function aL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.key=e}}class cL{constructor(e){this.key=e}}class uL{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gt(),this.mutatedKeys=gt(),this.eu=J2(e),this.tu=new Tl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new oP,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const f=s.get(u),m=Of(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;f&&m?f.data.isEqual(m.data)?_!==g&&(r.track({type:3,doc:m}),b=!0):this.su(f,m)||(r.track({type:2,doc:m}),b=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),b=!0):f&&!m&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(m?(o=o.add(m),i=g?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,h)=>function(m,_){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:b})}};return g(m)-g(_)}(u.type,h.type)||this.eu(u.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new ql(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new cL(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new lL(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=gt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $a="SyncEngine";class $K{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BK{constructor(e){this.key=e,this.hu=!1}}class zK{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new co(a=>Q2(a),Df),this.Iu=new Map,this.Eu=new Set,this.du=new dn(ve.comparator),this.Au=new Map,this.Ru=new Lb,this.Vu={},this.mu=new Map,this.fu=zl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WK(t,e,n=!0){const r=zy(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await dL(r,e,n,!0),s}async function qK(t,e){const n=zy(t);await dL(n,e,!0,!1)}async function dL(t,e,n,r){const s=await Bu(t.localStore,Or(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Xb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&By(t.remoteStore,s),a}async function Xb(t,e,n,r,s){t.pu=(h,f,m)=>async function(g,b,E,w){let S=b.view.ru(E);S.Cs&&(S=await Tg(g.localStore,b.query,!1).then(({documents:I})=>b.view.ru(I,S)));const P=w&&w.targetChanges.get(b.targetId),x=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(S,g.isPrimaryClient,P,x);return _0(g,b.targetId,O.au),O.snapshot}(t,h,f,m);const i=await Tg(t.localStore,e,!0),o=new uL(e,i.Qs),a=o.ru(i.documents),l=Vf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);_0(t,n,c.au);const u=new $K(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function HK(t,e,n){const r=we(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Df(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Wu(r.remoteStore,s.targetId),qu(r,s.targetId)}).catch(Va)):(qu(r,s.targetId),await zu(r.localStore,s.targetId,!0))}async function KK(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wu(n.remoteStore,r.targetId))}async function GK(t,e,n){const r=nS(t);try{const s=await function(o,a){const l=we(o),c=qt.now(),u=a.reduce((m,_)=>m.add(_.key),gt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=ts(),g=gt();return l.Ns.getEntries(m,u).next(b=>{_=b,_.forEach((E,w)=>{w.isValidDocument()||(g=g.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(b=>{h=b;const E=[];for(const w of a){const S=wH(w,h.get(w.key).overlayedDocument);S!=null&&E.push(new uo(w.key,S,F2(S.value.mapValue),Sn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,E,a)}).next(b=>{f=b;const E=b.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(m,b.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Z2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new dn(lt)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await ho(r,s.changes),await hd(r.remoteStore)}catch(s){const i=md(s,"Failed to persist write");n.reject(i)}}async function hL(t,e){const n=we(t);try{const r=await hK(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ze(o.hu,14607):s.removedDocuments.size>0&&(ze(o.hu,42227),o.hu=!1))}),await ho(n,r,e)}catch(r){await Va(r)}}function uP(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=we(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&Qb(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QK(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new dn(ve.comparator);o=o.insert(i,mn.newNoDocument(i,Ze.min()));const a=gt().add(i),l=new Mf(Ze.min(),new Map,new dn(lt),o,a);await hL(r,l),r.du=r.du.remove(i),r.Au.delete(e),tS(r)}else await zu(r.localStore,e,!1).then(()=>qu(r,e,n)).catch(Va)}async function YK(t,e){const n=we(t),r=e.batch.batchId;try{const s=await dK(n.localStore,e);eS(n,r,null),Zb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ho(n,s)}catch(s){await Va(s)}}async function JK(t,e,n){const r=we(t);try{const s=await function(o,a){const l=we(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ze(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);eS(r,e,n),Zb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ho(r,s)}catch(s){await Va(s)}}async function XK(t,e){const n=we(t);Ua(n.remoteStore)||se($a,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=we(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===fa)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=md(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Zb(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function eS(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function qu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||fL(t,r)})}function fL(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tS(t))}function _0(t,e,n){for(const r of n)r instanceof lL?(t.Ru.addReference(r.key,e),ZK(t,r)):r instanceof cL?(se($a,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||fL(t,r.key)):Oe(19791,{wu:r})}function ZK(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(se($a,"New document in limbo: "+n),t.Eu.add(r),tS(t))}function tS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ve(Rt.fromString(e)),r=t.fu.next();t.Au.set(r,new BK(n)),t.du=t.du.insert(n,r),By(t.remoteStore,new Wi(Or(ld(n.path)),r,"TargetPurposeLimboResolution",Zr.ce))}}async function ho(t,e,n){const r=we(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=jb.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const u=we(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.Es,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>V.forEach(f.ds,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Fa(h))throw h;se(Ub,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.Ms.get(f),_=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(_);u.Ms=u.Ms.insert(f,g)}}}(r.localStore,i))}async function eG(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){se($a,"User change. New user:",e.toKey());const r=await zO(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new te($.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ho(n,r.Ls)}}function tG(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return gt().add(r.key);{let s=gt();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function nG(t,e){const n=we(t),r=await Tg(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&_0(n,e.targetId,s.au),s}async function rG(t,e){const n=we(t);return KO(n.localStore,e).then(r=>ho(n,r))}async function sG(t,e,n,r){const s=we(t),i=await function(a,l){const c=we(a),u=we(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await hd(s.remoteStore):n==="acknowledged"||n==="rejected"?(eS(s,e,r||null),Zb(s,e),function(a,l){we(we(a).mutationQueue).ir(l)}(s.localStore,e)):Oe(6720,"Unknown batchState",{Su:n}),await ho(s,i)):se($a,"Cannot apply mutation batch with id: "+e)}async function iG(t,e){const n=we(t);if(zy(n),nS(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await dP(n,r.toArray());n.gu=!0,await v0(n.remoteStore,!0);for(const i of s)By(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(qu(n,o),zu(n.localStore,o,!0))),Wu(n.remoteStore,o)}),await s,await dP(n,r),function(o){const a=we(o);a.Au.forEach((l,c)=>{Wu(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new dn(ve.comparator)}(n),n.gu=!1,await v0(n.remoteStore,!1)}}async function dP(t,e,n){const r=we(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Bu(r.localStore,Or(l[0]));for(const c of l){const u=r.Tu.get(c),h=await nG(r,u);h.snapshot&&i.push(h.snapshot)}}else{const c=await HO(r.localStore,o);a=await Bu(r.localStore,c),await Xb(r,mL(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function mL(t){return H2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oG(t){return function(n){return we(we(n).persistence).Ts()}(we(t).localStore)}async function aG(t,e,n,r){const s=we(t);if(s.gu)return void se($a,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await KO(s.localStore,Y2(i[0])),a=Mf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",kn.EMPTY_BYTE_STRING);await ho(s,o,a);break}case"rejected":await zu(s.localStore,e,!0),qu(s,e,r);break;default:Oe(64155,n)}}async function lG(t,e,n){const r=zy(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){se($a,"Adding an already active target "+s);continue}const i=await HO(r.localStore,s),o=await Bu(r.localStore,i);await Xb(r,mL(i),o.targetId,!1,o.resumeToken),By(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await zu(r.localStore,s,!1).then(()=>{Wu(r.remoteStore,s),qu(r,s)}).catch(Va)}}function zy(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QK.bind(null,e),e.Pu.H_=jK.bind(null,e.eventManager),e.Pu.yu=UK.bind(null,e.eventManager),e}function nS(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JK.bind(null,e),e}function cG(t,e,n){const r=we(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(m,_){const g=we(m),b=zn(_.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",E=>g.Ii.getBundleMetadata(E,_.id)).then(E=>!!E&&E.createTime.compareTo(b)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(aL(l));const c=new Jb(l,o.serializer);let u=await o.bu();for(;u;){const f=await c.Ga(u);f&&a._updateProgress(f),u=await o.bu()}const h=await c.ja(i.localStore);return await ho(i,h.Ha,void 0),await function(m,_){const g=we(m);return g.persistence.runTransaction("Save bundle","readwrite",b=>g.Ii.saveBundleMetadata(b,_))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return _s($a,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ic(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BO(this.persistence,new $O,e.initialUser,this.serializer)}Cu(e){return new Mb($y.mi,this.serializer)}Du(e){return new XO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hu.provider={build:()=>new Hu};class rS extends Hu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Ig,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new Mb(r=>Ig.mi(r,n),this.serializer)}}class sS extends Hu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await nS(this.xu.syncEngine),await hd(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return BO(this.persistence,new $O,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new LO(r,e.asyncQueue,n)}Mu(e,n){const r=new S7(n,this.persistence);return new b7(e.asyncQueue,r)}Cu(e){const n=Fb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new Vb(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ZO(),yp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new XO}}class pL extends sS{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof aw&&(this.sharedClientState.syncEngine={Co:sG.bind(null,n),vo:aG.bind(null,n),Fo:lG.bind(null,n),Ts:oG.bind(null,n),Do:rG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await iG(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=ZO();if(!aw.v(n))throw new te($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Fb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ra{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eG.bind(null,this.syncEngine),await v0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FK}()}createDatastore(e){const n=ic(e.databaseInfo.databaseId),r=function(i){return new _K(i)}(e.databaseInfo);return function(i,o,a,l){return new IK(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new xK(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>uP(this.syncEngine,n,0),function(){return rP.v()?new rP:new gK}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new zK(s,i,o,a,l,c);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);se(Wl,"RemoteStore shutting down."),i.Ea.add(5),await dd(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ra.provider={build:()=>new Ra};function hP(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new gr,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const s=await this.$u(r);return new oL(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new oL(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new te($.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=we(s),a={documents:i.map(h=>lf(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Rt.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const f=PH(o.serializer,h);c.set(f.key.toString(),f)});const u=[];return i.forEach(h=>{const f=c.get(h.toString());ze(!!f,55234,{key:h}),u.push(f)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ud(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=ve.fromPath(r);this.mutations.push(new Ab(s,this.precondition(s)))}),await async function(r,s){const i=we(r),o={writes:s.map(a=>cf(i.serializer,a))};await i.Go("Commit",i.serializer.databaseId,Rt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Oe(50498,{Gu:e.constructor.name});n=Ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new te($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ze.min())?Sn.exists(!1):Sn.updateTime(n):Sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ze.min()))throw new te($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sn.updateTime(n)}return Sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new Bb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new hG(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Yu(s)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!Cf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!uO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="FirestoreClient";class mG{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mr.UNAUTHENTICATED,this.clientId=Ty.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se(Ca,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(Ca,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=md(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cw(t,e){t.asyncQueue.verifyOperationInProgress(),se(Ca,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await zO(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iS(t);se(Ca,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>iP(e.remoteStore,s)),t._onlineComponents=e}async function iS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Ca,"Using user provided OfflineComponentProvider");try{await cw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_s("Error using user provided cache. Falling back to memory cache: "+n),await cw(t,new Hu)}}else se(Ca,"Using default OfflineComponentProvider"),await cw(t,new rS(void 0));return t._offlineComponents}async function qy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Ca,"Using user provided OnlineComponentProvider"),await fP(t,t._uninitializedComponentsProvider._online)):(se(Ca,"Using default OnlineComponentProvider"),await fP(t,new Ra))),t._onlineComponents}function gL(t){return iS(t).then(e=>e.persistence)}function pd(t){return iS(t).then(e=>e.localStore)}function yL(t){return qy(t).then(e=>e.remoteStore)}function oS(t){return qy(t).then(e=>e.syncEngine)}function vL(t){return qy(t).then(e=>e.datastore)}async function Ku(t){const e=await qy(t),n=e.eventManager;return n.onListen=WK.bind(null,e.syncEngine),n.onUnlisten=HK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KK.bind(null,e.syncEngine),n}function pG(t){return t.asyncQueue.enqueue(async()=>{const e=await gL(t),n=await yL(t);return e.setNetworkEnabled(!0),function(s){const i=we(s);return i.Ea.delete(0),Ff(i)}(n)})}function gG(t){return t.asyncQueue.enqueue(async()=>{const e=await gL(t),n=await yL(t);return e.setNetworkEnabled(!1),async function(s){const i=we(s);i.Ea.add(0),await dd(i),i.Ra.set("Offline")}(n)})}function yG(t,e){const n=new gr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,u){const h=we(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,u))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new te($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=md(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await pd(t),e,n)),n.promise}function wL(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Wy({next:f=>{u.Nu(),o.enqueueAndForget(()=>Gb(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new te($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new te($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Yb(ld(a.path),u,{includeMetadataChanges:!0,qa:!0});return Kb(i,h)}(await Ku(t),t.asyncQueue,e,n,r)),r.promise}function vG(t,e){const n=new gr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Tg(s,i,!0),l=new uL(i,a.Qs),c=l.ru(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=md(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await pd(t),e,n)),n.promise}function _L(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Wy({next:f=>{u.Nu(),o.enqueueAndForget(()=>Gb(i,h)),f.fromCache&&l.source==="server"?c.reject(new te($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Yb(a,u,{includeMetadataChanges:!0,qa:!0});return Kb(i,h)}(await Ku(t),t.asyncQueue,e,n,r)),r.promise}function wG(t,e,n){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await vL(t);r.resolve(async function(o,a,l){var g;const c=we(o),{request:u,gt:h,parent:f}=EO(c.serializer,K2(a),l);c.connection.$o||delete u.parent;const m=(await c.Ho("RunAggregationQuery",c.serializer.databaseId,f,u,1)).filter(b=>!!b.result);ze(m.length===1,64727);const _=(g=m[0].result)==null?void 0:g.aggregateFields;return Object.keys(_).reduce((b,E)=>(b[h[E]]=_[E],b),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function _G(t,e){const n=new Wy(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){we(s).Ca.add(i),i.next()}(await Ku(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){we(s).Ca.delete(i)}(await Ku(t),n))}}function EG(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?hO().encode(o):o,function(u,h){return new uG(u,h)}(function(u,h){if(u instanceof Uint8Array)return hP(u,h);if(u instanceof ArrayBuffer)return hP(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,ic(e));t.asyncQueue.enqueueAndForget(async()=>{cG(await oS(t),s,r)})}function bG(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=we(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ii.getNamedQuery(o,s))}(await pd(t),e))}function EL(t,e){return function(r,s){return new dG(r,s)}(t,e)}function SG(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=we(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,f,m,_,g){h=[...h],f=[...f],h.sort(m),f.sort(m);const b=h.length,E=f.length;let w=0,S=0;for(;w<E&&S<b;){const P=m(h[S],f[w]);P<0?g(h[S++]):P>0?_(f[w++]):(w++,S++)}for(;w<E;)_(f[w++]);for(;S<b;)g(h[S++])}(c,s,v7,u=>{a.push(o.addFieldIndex(l,u))},u=>{a.push(o.deleteFieldIndex(l,u))})).next(()=>V.waitFor(a)))}(await pd(t),e))}function IG(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){we(r).Fs.Vs=s}(await pd(t),e))}function TG(t){return t.asyncQueue.enqueue(async()=>function(n){const r=we(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await pd(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="firestore.googleapis.com",pP=!0;class gP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SL,this.ssl=pP}else this.host=e.host,this.ssl=e.ssl??pP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OO)throw new te($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bL(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new a2;switch(r.type){case"firstParty":return new d7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mP.get(n);r&&(se("ComponentProvider","Removing Datastore"),mP.delete(n),r.terminate())}(this),Promise.resolve()}}function IL(t,e,n,r={}){var c;t=Ct(t,jf);const s=ti(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(If(`https://${a}`),wy("Firestore",!0)),i.host!==SL&&i.host!==a&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Ys(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=mr.MOCK_USER;else{u=eD(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new te($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mr(f)}t._authCredentials=new l7(new o2(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}toJSON(){return{type:Xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sc(n,Xt._jsonSchema))return new Xt(e,r||null,new ve(Rt.fromString(n.referencePath)))}}Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:Gn("string",Xt._jsonSchemaVersion),referencePath:Gn("string")};class qs extends ir{constructor(e,n,r){super(e,n,ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new ve(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function xe(t,e,...n){if(t=St(t),mb("collection","path",e),t instanceof jf){const r=Rt.fromString(e,...n);return sA(r),new qs(t,null,r)}{if(!(t instanceof Xt||t instanceof qs))throw new te($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Rt.fromString(e,...n));return sA(r),new qs(t.firestore,null,r)}}function xG(t,e){if(t=Ct(t,jf),mb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ir(t,null,function(r){return new lo(Rt.emptyPath(),r)}(e))}function Se(t,e,...n){if(t=St(t),arguments.length===1&&(e=Ty.newId()),mb("doc","path",e),t instanceof jf){const r=Rt.fromString(e,...n);return rA(r),new Xt(t,null,new ve(r))}{if(!(t instanceof Xt||t instanceof qs))throw new te($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Rt.fromString(e,...n));return rA(r),new Xt(t.firestore,t instanceof qs?t.converter:null,new ve(r))}}function AG(t,e){return t=St(t),e=St(e),(t instanceof Xt||t instanceof qs)&&(e instanceof Xt||e instanceof qs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function aS(t,e){return t=St(t),e=St(e),t instanceof ir&&e instanceof ir&&t.firestore===e.firestore&&Df(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="AsyncQueue";class vP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bb(this,"async_queue_retry"),this._c=()=>{const r=yp();r&&se(yP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fa(e))throw e;se(yP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$n("INTERNAL UNHANDLED ERROR: ",wP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Hb.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Oe(47125,{Pc:wP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class TL{constructor(){this._progressObserver={},this._taskCompletionResolver=new gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG=-1;class tn extends jf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vP,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vP(e),this._firestoreClient=void 0,await e}}}function xL(t,e,n){n||(n=rf);const r=tc(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Ys(i,e))return s;throw new te($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new te($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OO)throw new te($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ti(e.host)&&If(e.host),r.initialize({options:e,instanceIdentifier:n})}function RG(t,e){const n=typeof t=="object"?t:Ey(),r=typeof t=="string"?t:e||rf,s=tc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=eb("firestore");i&&IL(s,...i)}return s}function In(t){if(t._terminated)throw new te($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AL(t),t._firestoreClient}function AL(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,u){return new X7(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,bL(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function CG(t,e){_s("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return PL(t,Ra.provider,{build:r=>new sS(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function kG(t){_s("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();PL(t,Ra.provider,{build:n=>new pL(n,e.cacheSizeBytes)})}function PL(t,e,n){if((t=Ct(t,tn))._firestoreClient||t._terminated)throw new te($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new te($.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},AL(t)}function NG(t){if(t._initialized&&!t._terminated)throw new te($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Ti.v())return Promise.resolve();const s=r+UO;await Ti.delete(s)}(Fb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function DG(t){return function(n){const r=new gr;return n.asyncQueue.enqueueAndForget(async()=>XK(await oS(n),r)),r.promise}(In(t=Ct(t,tn)))}function lS(t){return pG(In(t=Ct(t,tn)))}function cS(t){return gG(In(t=Ct(t,tn)))}function OG(t){return nW(t.app,"firestore",t._databaseId.database),t._delete()}function E0(t,e){const n=In(t=Ct(t,tn)),r=new TL;return EG(n,t._databaseId,e,r),r}function RL(t,e){return bG(In(t=Ct(t,tn)),e).then(n=>n?new ir(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class CL{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jr(kn.fromBase64String(e))}catch(n){throw new te($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jr(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sc(e,Jr._jsonSchema))return Jr.fromBase64String(e.bytes)}}Jr._jsonSchemaVersion="firestore/bytes/1.0",Jr._jsonSchema={type:Gn("string",Jr._jsonSchemaVersion),bytes:Gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function LG(){return new Ba(J_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hs._jsonSchemaVersion}}static fromJSON(e){if(sc(e,Hs._jsonSchema))return new Hs(e.latitude,e.longitude)}}Hs._jsonSchemaVersion="firestore/geoPoint/1.0",Hs._jsonSchema={type:Gn("string",Hs._jsonSchemaVersion),latitude:Gn("number"),longitude:Gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sc(e,Cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cs(e.vectorValues);throw new te($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cs._jsonSchemaVersion="firestore/vectorValue/1.0",Cs._jsonSchema={type:Gn("string",Cs._jsonSchemaVersion),vectorValues:Gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG=/^__.*__$/;class VG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new cd(e,this.data,n,this.fieldTransforms)}}class kL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new uo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:t})}}class Hy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NL(this.Ac)&&MG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ic(e)}Cc(e,n,r,s=!1){return new Hy({Ac:e,methodName:n,Dc:r,path:pn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oc(t){const e=t._freezeSettings(),n=ic(t._databaseId);return new FG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ky(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);gS("Data must be an object, but it was:",o,r);const a=LL(r,o);let l,c;if(i.merge)l=new es(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=uf(e,h,n);if(!o.contains(f))throw new te($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);VL(u,f)||u.push(f)}l=new es(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new VG(new wr(a),l,c)}class Uf extends za{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uf}}function DL(t,e,n){return new Hy({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uS extends za{_toFieldTransform(e){return new Lf(e.path,new ju)}isEqual(e){return e instanceof uS}}class dS extends za{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=DL(this,e,!0),r=this.vc.map(i=>ac(i,n)),s=new jl(r);return new Lf(e.path,s)}isEqual(e){return e instanceof dS&&Ys(this.vc,e.vc)}}class hS extends za{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=DL(this,e,!0),r=this.vc.map(i=>ac(i,n)),s=new Ul(r);return new Lf(e.path,s)}isEqual(e){return e instanceof hS&&Ys(this.vc,e.vc)}}class fS extends za{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Uu(e.serializer,nO(e.serializer,this.Fc));return new Lf(e.path,n)}isEqual(e){return e instanceof fS&&this.Fc===e.Fc}}function mS(t,e,n,r){const s=t.Cc(1,e,n);gS("Data must be an object, but it was:",s,r);const i=[],o=wr.empty();ja(r,(l,c)=>{const u=Gy(e,l,n);c=St(c);const h=s.yc(u);if(c instanceof Uf)i.push(u);else{const f=ac(c,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new es(i);return new kL(o,a,s.fieldTransforms)}function pS(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[uf(e,r,n)],l=[s];if(i.length%2!=0)throw new te($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(uf(e,i[f])),l.push(i[f+1]);const c=[],u=wr.empty();for(let f=a.length-1;f>=0;--f)if(!VL(c,a[f])){const m=a[f];let _=l[f];_=St(_);const g=o.yc(m);if(_ instanceof Uf)c.push(m);else{const b=ac(_,g);b!=null&&(c.push(m),u.set(m,b))}}const h=new es(c);return new kL(u,h,o.fieldTransforms)}function OL(t,e,n,r=!1){return ac(n,t.Cc(r?4:3,e))}function ac(t,e){if(ML(t=St(t)))return gS("Unsupported field value:",e,t),LL(t,e);if(t instanceof za)return function(r,s){if(!NL(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ac(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qt.fromDate(r);return{timestampValue:$u(s.serializer,i)}}if(r instanceof qt){const i=new qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$u(s.serializer,i)}}if(r instanceof Hs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jr)return{bytesValue:pO(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nb(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cs)return function(o,a){return{mapValue:{fields:{[Eb]:{stringValue:bb},[Mu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return xb(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${xy(r)}`)}(t,e)}function LL(t,e){const n={};return R2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(t,(r,s)=>{const i=ac(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ML(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof Hs||t instanceof Jr||t instanceof Xt||t instanceof za||t instanceof Cs)}function gS(t,e,n){if(!ML(n)||!u2(n)){const r=xy(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function uf(t,e,n){if((e=St(e))instanceof Ba)return e._internalPath;if(typeof e=="string")return Gy(t,e);throw Rg("Field path arguments must be of type string or ",t,!1,void 0,n)}const jG=new RegExp("[~\\*/\\[\\]]");function Gy(t,e,n){if(e.search(jG)>=0)throw Rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ba(...e.split("."))._internalPath}catch{throw Rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rg(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new te($.INVALID_ARGUMENT,a+t+l)}function VL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UG extends df{data(){return super.data()}}function Qy(t,e){return typeof e=="string"?Gy(t,e):e instanceof Ba?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yS{}class gd extends yS{}function Xe(t,e,...n){let r=[];e instanceof yS&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof lc).length,a=i.filter(l=>l instanceof yd).length;if(o>1||o>0&&a>0)throw new te($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class yd extends gd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yd(e,n,r)}_apply(e){const n=this._parse(e);return UL(e._query,n),new ir(e.firestore,e.converter,l0(e._query,n))}_parse(e){const n=oc(e.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new te($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){EP(h,u);const _=[];for(const g of h)_.push(_P(l,i,g));f={arrayValue:{values:_}}}else f=_P(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||EP(h,u),f=OL(a,o,h,u==="in"||u==="not-in");return Mt.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $e(t,e,n){const r=e,s=Qy("where",t);return yd._create(s,r,n)}class lc extends yS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)UL(o,l),o=l0(o,l)}(e._query,n),new ir(e.firestore,e.converter,l0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $G(...t){return t.forEach(e=>$L("or",e)),lc._create("or",t)}function BG(...t){return t.forEach(e=>$L("and",e)),lc._create("and",t)}class Yy extends gd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new te($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new af(i,o)}(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new lo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ai(t,e="asc"){const n=e,r=Qy("orderBy",t);return Yy._create(r,n)}class $f extends gd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $f(e,n,r)}_apply(e){return new ir(e.firestore,e.converter,_g(e._query,this._limit,this._limitType))}}function ma(t){return d2("limit",t),$f._create("limit",t,"F")}function zG(t){return d2("limitToLast",t),$f._create("limitToLast",t,"L")}class Bf extends gd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=jL(e,this.type,this._docOrFields,this._inclusive);return new ir(e.firestore,e.converter,function(s,i){return new lo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function WG(...t){return Bf._create("startAt",t,!0)}function qG(...t){return Bf._create("startAfter",t,!1)}class zf extends gd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new zf(e,n,r)}_apply(e){const n=jL(e,this.type,this._docOrFields,this._inclusive);return new ir(e.firestore,e.converter,function(s,i){return new lo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function HG(...t){return zf._create("endBefore",t,!1)}function KG(...t){return zf._create("endAt",t,!0)}function jL(t,e,n,r){if(n[0]=St(n[0]),n[0]instanceof df)return function(i,o,a,l,c){if(!l)throw new te($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of ou(i))if(h.field.isKeyField())u.push(Vl(o,l.key));else{const f=l.data.field(h.field);if(ky(f))throw new te($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new te($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}u.push(f)}return new Aa(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=oc(t.firestore);return function(o,a,l,c,u,h){const f=o.explicitOrderBy;if(u.length>f.length)throw new te($.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let _=0;_<u.length;_++){const g=u[_];if(f[_].field.isKeyField()){if(typeof g!="string")throw new te($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!Ib(o)&&g.indexOf("/")!==-1)throw new te($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);const b=o.path.child(Rt.fromString(g));if(!ve.isDocumentKey(b))throw new te($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const E=new ve(b);m.push(Vl(a,E))}else{const b=OL(l,c,g);m.push(b)}}return new Aa(m,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function _P(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new te($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ib(e)&&n.indexOf("/")!==-1)throw new te($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Rt.fromString(n));if(!ve.isDocumentKey(r))throw new te($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vl(t,new ve(r))}if(n instanceof Xt)return Vl(t,n._key);throw new te($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xy(n)}.`)}function EP(t,e){if(!Array.isArray(t)||t.length===0)throw new te($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UL(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function $L(t,e){if(!(e instanceof yd||e instanceof lc))throw new te($.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class vS{convertValue(e,n="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return En(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ja(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Mu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>En(o.doubleValue));return new Cs(n)}convertGeoPoint(e){return new Hs(En(e.latitude),En(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ny(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nf(e));default:return null}}convertTimestamp(e){const n=so(e);return new qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Rt.fromString(e);ze(TO(r),9688,{name:e});const s=new Ia(r.get(1),r.get(3)),i=new ve(r.popFirst(5));return s.isEqual(n)||$n(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wS extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GG(t){return new Gu("sum",uf("sum",t))}function QG(t){return new Gu("avg",uf("average",t))}function BL(){return new Gu("count")}function YG(t,e){var n,r;return t instanceof Gu&&e instanceof Gu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function JG(t,e){return aS(t.query,e.query)&&Ys(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL="NOT SUPPORTED";class qi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class os extends df{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=os._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function XG(t,e,n){if(sc(e,os._jsonSchema)){if(e.bundle===zL)throw new te($.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=ic(t._databaseId),s=EL(e.bundle,r),i=s.Wu(),o=new Jb(s.getMetadata(),r);for(const u of i)o.Ga(u);const a=o.documents;if(a.length!==1)throw new te($.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=My(r,a[0].document),c=new ve(Rt.fromString(e.bundleName));return new os(t,new wS(t),c,l,new qi(!1,!1),n||null)}}os._jsonSchemaVersion="firestore/documentSnapshot/1.0",os._jsonSchema={type:Gn("string",os._jsonSchemaVersion),bundleSource:Gn("string","DocumentSnapshot"),bundleName:Gn("string"),bundle:Gn("string")};class Ih extends os{data(e={}){return super.data(e)}}class as{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ih(this._firestore,this._userDataWriter,r.key,r,new qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ih(s._firestore,s._userDataWriter,a.doc.key,a.doc,new qi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ih(s._firestore,s._userDataWriter,a.doc.key,a.doc,new qi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:eQ(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=as._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ty.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZG(t,e,n){if(sc(e,as._jsonSchema)){if(e.bundle===zL)throw new te($.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=ic(t._databaseId),s=EL(e.bundle,r),i=s.Wu(),o=new Jb(s.getMetadata(),r);for(const f of i)o.Ga(f);if(o.queries.length!==1)throw new te($.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=Fy(o.queries[0].bundledQuery),l=o.documents;let c=new Tl;l.map(f=>{const m=My(r,f.document);c=c.add(m)});const u=ql.fromInitialDocuments(a,c,gt(),!1,!1),h=new ir(t,n||null,a);return new as(t,new wS(t),h,u)}}function eQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:t})}}function tQ(t,e){return t instanceof os&&e instanceof os?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof as&&e instanceof as&&t._firestore===e._firestore&&aS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){t=Ct(t,Xt);const e=Ct(t.firestore,tn);return wL(In(e),t._key).then(n=>_S(e,t,n))}as._jsonSchemaVersion="firestore/querySnapshot/1.0",as._jsonSchema={type:Gn("string",as._jsonSchemaVersion),bundleSource:Gn("string","QuerySnapshot"),bundleName:Gn("string"),bundle:Gn("string")};class Wa extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function nQ(t){t=Ct(t,Xt);const e=Ct(t.firestore,tn),n=In(e),r=new Wa(e);return yG(n,t._key).then(s=>new os(e,r,t._key,s,new qi(s!==null&&s.hasLocalMutations,!0),t.converter))}function rQ(t){t=Ct(t,Xt);const e=Ct(t.firestore,tn);return wL(In(e),t._key,{source:"server"}).then(n=>_S(e,t,n))}function Je(t){t=Ct(t,ir);const e=Ct(t.firestore,tn),n=In(e),r=new Wa(e);return FL(t._query),_L(n,t._query).then(s=>new as(e,r,t,s))}function sQ(t){t=Ct(t,ir);const e=Ct(t.firestore,tn),n=In(e),r=new Wa(e);return vG(n,t._query).then(s=>new as(e,r,t,s))}function iQ(t){t=Ct(t,ir);const e=Ct(t.firestore,tn),n=In(e),r=new Wa(e);return _L(n,t._query,{source:"server"}).then(s=>new as(e,r,t,s))}function ln(t,e,n){t=Ct(t,Xt);const r=Ct(t.firestore,tn),s=Jy(t.converter,e,n);return vd(r,[Ky(oc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Sn.none())])}function gn(t,e,n,...r){t=Ct(t,Xt);const s=Ct(t.firestore,tn),i=oc(s);let o;return o=typeof(e=St(e))=="string"||e instanceof Ba?pS(i,"updateDoc",t._key,e,n,r):mS(i,"updateDoc",t._key,e),vd(s,[o.toMutation(t._key,Sn.exists(!0))])}function Yt(t){return vd(Ct(t.firestore,tn),[new ud(t._key,Sn.none())])}function vs(t,e){const n=Ct(t.firestore,tn),r=Se(t),s=Jy(t.converter,e);return vd(n,[Ky(oc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function ka(t,...e){var l,c,u;t=St(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||au(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(au(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(u=h.complete)==null?void 0:u.bind(h)}let i,o,a;if(t instanceof Xt)o=Ct(t.firestore,tn),a=ld(t._key.path),i={next:h=>{e[r]&&e[r](_S(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Ct(t,ir);o=Ct(h.firestore,tn),a=h._query;const f=new Wa(o);i={next:m=>{e[r]&&e[r](new as(o,f,h,m))},error:e[r+1],complete:e[r+2]},FL(t._query)}return function(f,m,_,g){const b=new Wy(g),E=new Yb(m,b,_);return f.asyncQueue.enqueueAndForget(async()=>Kb(await Ku(f),E)),()=>{b.Nu(),f.asyncQueue.enqueueAndForget(async()=>Gb(await Ku(f),E))}}(In(o),a,s,i)}function oQ(t,e,...n){const r=St(t),s=function(l){const c={bundle:"",bundleName:"",bundleSource:""},u=["bundle","bundleName","bundleSource"];for(const h of u){if(!(h in l)){c.error=`snapshotJson missing required field: ${h}`;break}const f=l[h];if(typeof f!="string"){c.error=`snapshotJson field '${h}' must be a string.`;break}if(f.length===0){c.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?c.bundle=f:h==="bundleName"?c.bundleName=f:h==="bundleSource"&&(c.bundleSource=f)}return c}(e);if(s.error)throw new te($.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||au(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&au(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,u,h,f,m){let _,g=!1;return E0(c,u.bundle).then(()=>RL(c,u.bundleName)).then(E=>{E&&!g&&(m&&E.withConverter(m),_=ka(E,h||{},f))}).catch(E=>(f.error&&f.error(E),()=>{})),()=>{g||(g=!0,_&&_())}}(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&au(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,u,h,f,m){let _,g=!1;return E0(c,u.bundle).then(()=>{if(!g){const E=new Xt(c,m||null,ve.fromPath(u.bundleName));_=ka(E,h||{},f)}}).catch(E=>(f.error&&f.error(E),()=>{})),()=>{g||(g=!0,_&&_())}}(r,s,i,a,n[o])}throw new te($.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function aQ(t,e){return _G(In(t=Ct(t,tn)),au(e)?e:{next:e})}function vd(t,e){return function(r,s){const i=new gr;return r.asyncQueue.enqueueAndForget(async()=>GK(await oS(r),s,i)),i.promise}(In(t),e)}function _S(t,e,n){const r=n.docs.get(e._key),s=new Wa(t);return new os(t,s,e._key,r,new qi(n.hasPendingWrites,n.fromCache),e.converter)}function WL(t){return qL(t,{count:BL()})}function qL(t,e){const n=Ct(t.firestore,tn),r=In(n),s=P2(e,(i,o)=>new cO(o,i.aggregateType,i._internalFieldPath));return wG(r,t._query,s).then(i=>function(a,l,c){const u=new Wa(a);return new CL(l,u,c)}(n,t,i))}class lQ{constructor(e){this.kind="memory",this._onlineComponentProvider=Ra.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new rS(void 0)}}toJSON(){return{kind:this.kind}}}class cQ{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=HL(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class uQ{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Hu.provider}toJSON(){return{kind:this.kind}}}class dQ{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new rS(e)}}toJSON(){return{kind:this.kind}}}function hQ(){return new uQ}function fQ(t){return new dQ(t==null?void 0:t.cacheSizeBytes)}function mQ(t){return new lQ(t)}function pQ(t){return new cQ(t)}class gQ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ra.provider,this._offlineComponentProvider={build:n=>new sS(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class yQ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ra.provider,this._offlineComponentProvider={build:n=>new pL(n,e==null?void 0:e.cacheSizeBytes)}}}function HL(t){return new gQ(t==null?void 0:t.forceOwnership)}function vQ(){return new yQ}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQ={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=oc(e)}set(e,n,r){this._verifyNotCommitted();const s=Xo(e,this._firestore),i=Jy(s.converter,n,r),o=Ky(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Sn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Xo(e,this._firestore);let o;return o=typeof(n=St(n))=="string"||n instanceof Ba?pS(this._dataReader,"WriteBatch.update",i._key,n,r,s):mS(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xo(e,this._firestore);return this._mutations=this._mutations.concat(new ud(n._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xo(t,e){if((t=St(t)).firestore!==e)throw new te($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=oc(e)}get(e){const n=Xo(e,this._firestore),r=new wS(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Oe(24041);const i=s[0];if(i.isFoundDocument())return new df(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new df(this._firestore,r,n._key,null,n.converter);throw Oe(18433,{doc:i})})}set(e,n,r){const s=Xo(e,this._firestore),i=Jy(s.converter,n,r),o=Ky(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=Xo(e,this._firestore);let o;return o=typeof(n=St(n))=="string"||n instanceof Ba?pS(this._dataReader,"Transaction.update",i._key,n,r,s):mS(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=Xo(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL extends _Q{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Xo(e,this._firestore),r=new Wa(this._firestore);return super.get(e).then(s=>new os(this._firestore,r,n._key,s._document,new qi(!1,!1),n.converter))}}function EQ(t,e,n){t=Ct(t,tn);const r={...wQ,...n};return function(i){if(i.maxAttempts<1)throw new te($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new gr;return i.asyncQueue.enqueueAndForget(async()=>{const c=await vL(i);new fG(i.asyncQueue,c,a,o,l).ju()}),l.promise}(In(t),s=>e(new GL(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(){return new Uf("deleteField")}function Be(){return new uS("serverTimestamp")}function SQ(...t){return new dS("arrayUnion",t)}function IQ(...t){return new hS("arrayRemove",t)}function TQ(t){return new fS("increment",t)}function xQ(t){return new Cs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){return In(t=Ct(t,tn)),new KL(t,e=>vd(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQ(t,e){const n=In(t=Ct(t,tn));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return _s("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(u){throw new te($.INVALID_ARGUMENT,"Failed to parse JSON: "+(u==null?void 0:u.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=bP(l,"collectionGroup"),u=[];if(Array.isArray(l.fields))for(const h of l.fields){const f=Gy("setIndexConfiguration",bP(h,"fieldPath"));h.arrayConfig==="CONTAINS"?u.push(new Sl(f,2)):h.order==="ASCENDING"?u.push(new Sl(f,0)):h.order==="DESCENDING"&&u.push(new Sl(f,1))}a.push(new Cu(Cu.UNKNOWN_ID,c,u,ku.empty()))}return a}(e);return SG(n,r)}function bP(t,e){if(typeof t[e]!="string")throw new te($.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function PQ(t){var s;t=Ct(t,tn);const e=SP.get(t);if(e)return e;if(((s=In(t)._uninitializedComponentsProvider)==null?void 0:s._offline.kind)!=="persistent")return null;const r=new QL(t);return SP.set(t,r),r}function RQ(t){YL(t,!0)}function CQ(t){YL(t,!1)}function kQ(t){TG(In(t._firestore)).then(e=>se("deleting all persistent cache indexes succeeded")).catch(e=>_s("deleting all persistent cache indexes failed",e))}function YL(t,e){IG(In(t._firestore),e).then(n=>se(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>_s(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const SP=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(t){var r;const e=In(Ct(t.firestore,tn)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:Vy(n,Or(t._query)).ft}function DQ(t,e){var i;const n=P2(e,(o,a)=>new cO(a,o.aggregateType,o._internalFieldPath)),r=In(Ct(t.firestore,tn)),s=(i=r._onlineComponents)==null?void 0:i.datastore.serializer;return s===void 0?null:EO(s,K2(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return bS.instance.onExistenceFilterMismatch(e)}}class bS{constructor(){this.Mc=new Map}static get instance(){return km||(km=new bS,function(n){if(bh)throw new Error("a TestingHooksSpi instance is already set");bh=n}(km)),km}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let km=null;(function(e,n=!0){(function(s){ad=s})(nc),Ci(new Js("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new tn(new c7(r.getProvider("auth-internal")),new h7(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(c.options.projectId,u)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ys(tA,nA,e),ys(tA,nA,"esm2020")})();const cr=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:vS,AggregateField:Gu,AggregateQuerySnapshot:CL,Bytes:Jr,CACHE_SIZE_UNLIMITED:PG,CollectionReference:qs,DocumentReference:Xt,DocumentSnapshot:os,FieldPath:Ba,FieldValue:za,Firestore:tn,FirestoreError:te,GeoPoint:Hs,LoadBundleTask:TL,PersistentCacheIndexManager:QL,Query:ir,QueryCompositeFilterConstraint:lc,QueryConstraint:gd,QueryDocumentSnapshot:Ih,QueryEndAtConstraint:zf,QueryFieldFilterConstraint:yd,QueryLimitConstraint:$f,QueryOrderByConstraint:Yy,QuerySnapshot:as,QueryStartAtConstraint:Bf,SnapshotMetadata:qi,Timestamp:qt,Transaction:GL,VectorValue:Cs,WriteBatch:KL,_AutoId:Ty,_ByteString:kn,_DatabaseId:Ia,_DocumentKey:ve,_EmptyAppCheckTokenProvider:f7,_EmptyAuthCredentialsProvider:a2,_FieldPath:pn,_TestingHooks:OQ,_cast:Ct,_debugAssert:a7,_internalAggregationQueryToProtoRunAggregationQueryRequest:DQ,_internalQueryToProtoQueryTarget:NQ,_isBase64Available:Y7,_logWarn:_s,_validateIsNotUsedTogether:c2,addDoc:vs,aggregateFieldEqual:YG,aggregateQuerySnapshotEqual:JG,and:BG,arrayRemove:IQ,arrayUnion:SQ,average:QG,clearIndexedDbPersistence:NG,collection:xe,collectionGroup:xG,connectFirestoreEmulator:IL,count:BL,deleteAllPersistentCacheIndexes:kQ,deleteDoc:Yt,deleteField:bQ,disableNetwork:cS,disablePersistentCacheIndexAutoCreation:CQ,doc:Se,documentId:LG,documentSnapshotFromJSON:XG,enableIndexedDbPersistence:CG,enableMultiTabIndexedDbPersistence:kG,enableNetwork:lS,enablePersistentCacheIndexAutoCreation:RQ,endAt:KG,endBefore:HG,ensureFirestoreConfigured:In,executeWrite:vd,getAggregateFromServer:qL,getCountFromServer:WL,getDoc:on,getDocFromCache:nQ,getDocFromServer:rQ,getDocs:Je,getDocsFromCache:sQ,getDocsFromServer:iQ,getFirestore:RG,getPersistentCacheIndexManager:PQ,increment:TQ,initializeFirestore:xL,limit:ma,limitToLast:zG,loadBundle:E0,memoryEagerGarbageCollector:hQ,memoryLocalCache:mQ,memoryLruGarbageCollector:fQ,namedQuery:RL,onSnapshot:ka,onSnapshotResume:oQ,onSnapshotsInSync:aQ,or:$G,orderBy:Ai,persistentLocalCache:pQ,persistentMultipleTabManager:vQ,persistentSingleTabManager:HL,query:Xe,queryEqual:aS,querySnapshotFromJSON:ZG,refEqual:AG,runTransaction:EQ,serverTimestamp:Be,setDoc:ln,setIndexConfiguration:AQ,setLogLevel:s2,snapshotEqual:tQ,startAfter:qG,startAt:WG,sum:GG,terminate:OG,updateDoc:gn,vector:xQ,waitForPendingWrites:DG,where:$e,writeBatch:ES},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQ="type.googleapis.com/google.protobuf.Int64Value",MQ="type.googleapis.com/google.protobuf.UInt64Value";function JL(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Cg(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Cg(e));if(typeof t=="function"||typeof t=="object")return JL(t,e=>Cg(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Qu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case LQ:case MQ:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Qu(e)):typeof t=="function"||typeof t=="object"?JL(t,e=>Qu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ns extends ni{constructor(e,n,r){super(`${SS}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ns.prototype)}}function VQ(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function kg(t,e){let n=VQ(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!IP[o])return new ns("internal","internal");n=IP[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Qu(s))}}catch{}return n==="ok"?null:new ns(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Yr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="us-central1",jQ=/^data: (.*?)(?:\n|$)/;function UQ(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ns("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class $Q{constructor(e,n,r,s,i=b0,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new FQ(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=b0}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function BQ(t,e,n){const r=ti(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(If(t.emulatorOrigin+"/backends"),wy("Functions",!0))}function zQ(t,e,n){const r=s=>qQ(t,e,s,{});return r.stream=(s,i)=>KQ(t,e,s,i),r}function XL(t){return t.emulatorOrigin&&ti(t.emulatorOrigin)?"include":void 0}async function WQ(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:XL(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function ZL(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function qQ(t,e,n,r){const s=t._url(e);return HQ(t,s,n,r)}async function HQ(t,e,n,r){n=Cg(n);const s={data:n},i=await ZL(t,r),o=r.timeout||7e4,a=UQ(o),l=await Promise.race([WQ(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new ns("cancelled","Firebase Functions instance was deleted.");const c=kg(l.status,l.json);if(c)throw c;if(!l.json)throw new ns("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new ns("internal","Response is missing data field.");return{data:Qu(u)}}function KQ(t,e,n,r){const s=t._url(e);return GQ(t,s,n,r||{})}async function GQ(t,e,n,r){var f;n=Cg(n);const s={data:n},i=await ZL(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:XL(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new ns("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const _=kg(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let a,l;const c=new Promise((m,_)=>{a=m,l=_});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new ns("cancelled","Request was cancelled.");l(m)});const u=o.body.getReader(),h=QQ(u,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:_,done:g}=await m.read();return{value:_,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function QQ(t,e,n,r){const s=(o,a)=>{const l=o.match(jQ);if(!l)return;const c=l[1];try{const u=JSON.parse(c);if("result"in u){e(Qu(u.result));return}if("message"in u){a.enqueue(Qu(u.message));return}if("error"in u){const h=kg(0,u);a.error(h),n(h);return}}catch(u){if(u instanceof ns){a.error(u),n(u);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new ns("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:u}=await t.read();if(u){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new ns("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const u=c instanceof ns?c:kg(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const TP="@firebase/functions",xP="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ="auth-internal",JQ="app-check-internal",XQ="messaging-internal";function ZQ(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(YQ),o=n.getProvider(XQ),a=n.getProvider(JQ);return new $Q(s,i,o,a,r)};Ci(new Js(SS,e,"PUBLIC").setMultipleInstances(!0)),ys(TP,xP,t),ys(TP,xP,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(t=Ey(),e=b0){const r=tc(St(t),SS).getImmediate({identifier:e}),s=eb("functions");return s&&tY(r,...s),r}function tY(t,e,n){BQ(St(t),e,n)}function nY(t,e,n){return zQ(St(t),e)}ZQ();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="firebasestorage.googleapis.com",tM="storageBucket",rY=2*60*1e3,sY=10*60*1e3,iY=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends ni{constructor(e,n,r=0){super(uw(e),`Firebase Storage: ${n} (${uw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wn||(wn={}));function uw(t){return"storage/"+t}function IS(){const t="An unknown error occurred, please check the error payload for server response.";return new Dn(wn.UNKNOWN,t)}function oY(t){return new Dn(wn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function aY(t){return new Dn(wn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dn(wn.UNAUTHENTICATED,t)}function cY(){return new Dn(wn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uY(t){return new Dn(wn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nM(){return new Dn(wn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rM(){return new Dn(wn.CANCELED,"User canceled the upload/download.")}function dY(t){return new Dn(wn.INVALID_URL,"Invalid URL '"+t+"'.")}function hY(t){return new Dn(wn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fY(){return new Dn(wn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tM+"' property when initializing the app?")}function sM(){return new Dn(wn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mY(){return new Dn(wn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function pY(){return new Dn(wn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gY(t){return new Dn(wn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function S0(t){return new Dn(wn.INVALID_ARGUMENT,t)}function iM(){return new Dn(wn.APP_DELETED,"The Firebase app was deleted.")}function yY(t){return new Dn(wn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Th(t,e){return new Dn(wn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bd(t){throw new Dn(wn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ms.makeFromUrl(e,n)}catch{return new ms(e,"")}if(r.path==="")return r;throw hY(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),_={bucket:1,path:3},g=n===eM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",E=new RegExp(`^https?://${g}/${s}/${b}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:m,indices:_,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<S.length;P++){const x=S[P],O=x.regex.exec(e);if(O){const I=O[x.indices.bucket];let A=O[x.indices.path];A||(A=""),r=new ms(I,A),x.postModify(r);break}}if(r==null)throw dY(e);return r}}class vY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(m,l())},b)}function f(){i&&clearTimeout(i)}function m(b,...E){if(c){f();return}if(b){f(),u.call(null,b,...E);return}if(l()||o){f(),u.call(null,b,...E);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,h(S)}let _=!1;function g(b){_||(_=!0,f(),!c&&(s!==null?(b||(a=2),clearTimeout(s),h(0)):b||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function _Y(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EY(t){return t!==void 0}function bY(t){return typeof t=="function"}function SY(t){return typeof t=="object"&&!Array.isArray(t)}function Xy(t){return typeof t=="string"||t instanceof String}function AP(t){return TS()&&t instanceof Blob}function TS(){return typeof Blob<"u"}function PP(t,e,n,r){if(r<e)throw S0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw S0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function oM(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var xl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xl||(xl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(e,n,r,s,i,o,a,l,c,u,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,g)=>{this.resolve_=_,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Nm(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===xl.NO_ERROR,l=i.getStatus();if(!a||aM(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===xl.ABORT;r(!1,new Nm(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Nm(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());EY(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=IS();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?iM():rM();o(l)}else{const l=nM();o(l)}};this.canceled_?n(!1,new Nm(!1,null,!0)):this.backoffId_=wY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_Y(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function TY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function xY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function RY(t,e,n,r,s,i,o=!0,a=!1){const l=oM(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return AY(u,e),TY(u,n),xY(u,i),PY(u,r),new IY(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kY(...t){const e=CY();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(TS())return new Blob(t);throw new Dn(wn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NY(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DY(t){if(typeof atob>"u")throw gY("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dw{constructor(e,n){this.data=e,this.contentType=n||null}}function OY(t,e){switch(t){case wi.RAW:return new dw(lM(e));case wi.BASE64:case wi.BASE64URL:return new dw(cM(t,e));case wi.DATA_URL:return new dw(MY(e),VY(e))}throw IS()}function lM(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function LY(t){let e;try{e=decodeURIComponent(t)}catch{throw Th(wi.DATA_URL,"Malformed data URL.")}return lM(e)}function cM(t,e){switch(t){case wi.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Th(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case wi.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Th(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=DY(e)}catch(s){throw s.message.includes("polyfill")?s:Th(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class uM{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Th(wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=FY(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function MY(t){const e=new uM(t);return e.base64?cM(wi.BASE64,e.rest):LY(e.rest)}function VY(t){return new uM(t).contentType}function FY(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){let r=0,s="";AP(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(AP(this.data_)){const r=this.data_,s=NY(r,e,n);return s===null?null:new ji(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ji(r,!0)}}static getBlob(...e){if(TS()){const n=e.map(r=>r instanceof ji?r.data_:r);return new ji(kY.apply(null,n))}else{const n=e.map(o=>Xy(o)?OY(wi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ji(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){let e;try{e=JSON.parse(t)}catch{return null}return SY(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function UY(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function hM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Y(t,e){return e}class Vr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||$Y}}let Dm=null;function BY(t){return!Xy(t)||t.length<2?t:hM(t)}function xS(){if(Dm)return Dm;const t=[];t.push(new Vr("bucket")),t.push(new Vr("generation")),t.push(new Vr("metageneration")),t.push(new Vr("name","fullPath",!0));function e(i,o){return BY(o)}const n=new Vr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Vr("size");return s.xform=r,t.push(s),t.push(new Vr("timeCreated")),t.push(new Vr("updated")),t.push(new Vr("md5Hash",null,!0)),t.push(new Vr("cacheControl",null,!0)),t.push(new Vr("contentDisposition",null,!0)),t.push(new Vr("contentEncoding",null,!0)),t.push(new Vr("contentLanguage",null,!0)),t.push(new Vr("contentType",null,!0)),t.push(new Vr("metadata","customMetadata",!0)),Dm=t,Dm}function zY(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new ms(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function WY(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return zY(r,t),r}function fM(t,e,n){const r=dM(e);return r===null?null:WY(t,r,n)}function qY(t,e,n,r){const s=dM(e);if(s===null||!Xy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,h=t.fullPath,f="/b/"+o(u)+"/o/"+o(h),m=Wf(f,n,r),_=oM({alt:"media",token:c});return m+_})[0]}function mM(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class wd{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){if(!t)throw IS()}function AS(t,e){function n(r,s){const i=fM(t,s,e);return Gi(i!==null),i}return n}function HY(t,e){function n(r,s){const i=fM(t,s,e);return Gi(i!==null),qY(i,s,t.host,t._protocol)}return n}function qf(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=cY():s=lY():n.getStatus()===402?s=aY(t.bucket):n.getStatus()===403?s=uY(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function pM(t){const e=qf(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=oY(t.path)),i.serverResponse=s.serverResponse,i}return n}function KY(t,e,n){const r=e.fullServerUrl(),s=Wf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new wd(s,i,AS(t,n),o);return a.errorHandler=pM(e),a}function GY(t,e,n){const r=e.fullServerUrl(),s=Wf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new wd(s,i,HY(t,n),o);return a.errorHandler=pM(e),a}function QY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gM(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=QY(null,e)),r}function yM(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let P=0;P<2;P++)S=S+Math.random().toString().slice(2);return S}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=gM(e,r,s),u=mM(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=ji.getBlob(h,r,f);if(m===null)throw sM();const _={name:c.fullPath},g=Wf(i,t.host,t._protocol),b="POST",E=t.maxUploadRetryTime,w=new wd(g,b,AS(t,n),E);return w.urlParams=_,w.headers=o,w.body=m.uploadData(),w.errorHandler=qf(e),w}class Ng{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function PS(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Gi(!1)}return Gi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function YY(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=gM(e,r,s),a={name:o.fullPath},l=Wf(i,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=mM(o,n),f=t.maxUploadRetryTime;function m(g){PS(g);let b;try{b=g.getResponseHeader("X-Goog-Upload-URL")}catch{Gi(!1)}return Gi(Xy(b)),b}const _=new wd(l,c,m,f);return _.urlParams=a,_.headers=u,_.body=h,_.errorHandler=qf(e),_}function JY(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const u=PS(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Gi(!1)}h||Gi(!1);const f=Number(h);return Gi(!isNaN(f)),new Ng(f,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new wd(n,o,i,a);return l.headers=s,l.errorHandler=qf(e),l}const RP=256*1024;function XY(t,e,n,r,s,i,o,a){const l=new Ng(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw mY();const c=l.total-l.current;let u=c;s>0&&(u=Math.min(u,s));const h=l.current,f=h+u;let m="";u===0?m="finalize":c===u?m="upload, finalize":m="upload";const _={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw sM();function b(P,x){const O=PS(P,["active","final"]),I=l.current+u,A=r.size();let R;return O==="final"?R=AS(e,i)(P,x):R=null,new Ng(I,A,O==="final",R)}const E="POST",w=e.maxUploadRetryTime,S=new wd(n,E,b,w);return S.headers=_,S.body=g.uploadData(),S.progressCallback=a||null,S.errorHandler=qf(t),S}const Gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hw(t){switch(t){case"running":case"pausing":case"canceling":return Gr.RUNNING;case"paused":return Gr.PAUSED;case"success":return Gr.SUCCESS;case"canceled":return Gr.CANCELED;case"error":return Gr.ERROR;default:return Gr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(e,n,r){if(bY(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class eJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Bd("cannot .send() more than once");if(ti(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tJ extends eJ{initXhr(){this.xhr_.responseType="text"}}function ol(){return new tJ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=xS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(wn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(aM(s.status,[]))if(i)s=nM();else{this.sleepTime=Math.max(this.sleepTime*2,iY),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(wn.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=YY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ol,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=JY(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,ol,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=RP*this._chunkMultiplier,n=new Ng(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=XY(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ol,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RP*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=KY(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,ol,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=yM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ol,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=rM(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=hw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new ZY(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(hw(this._state)){case Gr.SUCCESS:vc(this._resolve.bind(null,this.snapshot))();break;case Gr.CANCELED:case Gr.ERROR:const n=this._reject;vc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hw(this._state)){case Gr.RUNNING:case Gr.PAUSED:e.next&&vc(e.next.bind(e,this.snapshot))();break;case Gr.SUCCESS:e.complete&&vc(e.complete.bind(e))();break;case Gr.CANCELED:case Gr.ERROR:e.error&&vc(e.error.bind(e,this._error))();break;default:e.error&&vc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this._service=e,n instanceof ms?this._location=n:this._location=ms.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Hl(e,n)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hM(this._location.path)}get storage(){return this._service}get parent(){const e=jY(this._location.path);if(e===null)return null;const n=new ms(this._location.bucket,e);return new Hl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw yY(e)}}function rJ(t,e,n){t._throwIfRoot("uploadBytes");const r=yM(t.storage,t._location,xS(),new ji(e,!0),n);return t.storage.makeRequestWithTokens(r,ol).then(s=>({metadata:s,ref:t}))}function sJ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new nJ(t,new ji(e),n)}function iJ(t){t._throwIfRoot("getDownloadURL");const e=GY(t.storage,t._location,xS());return t.storage.makeRequestWithTokens(e,ol).then(n=>{if(n===null)throw pY();return n})}function oJ(t,e){const n=UY(t._location.path,e),r=new ms(t._location.bucket,n);return new Hl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aJ(t){return/^[A-Za-z]+:\/\//.test(t)}function lJ(t,e){return new Hl(t,e)}function vM(t,e){if(t instanceof RS){const n=t;if(n._bucket==null)throw fY();const r=new Hl(n,n._bucket);return e!=null?vM(r,e):r}else return e!==void 0?oJ(t,e):t}function cJ(t,e){if(e&&aJ(e)){if(t instanceof RS)return lJ(t,e);throw S0("To use ref(service, url), the first argument must be a Storage instance.")}else return vM(t,e)}function CP(t,e){const n=e==null?void 0:e[tM];return n==null?null:ms.makeFromBucketSpec(n,t)}function uJ(t,e,n,r={}){t.host=`${e}:${n}`;const s=ti(e);s&&(If(`https://${t.host}/b`),wy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:eD(i,t.app.options.projectId))}class RS{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=eM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rY,this._maxUploadRetryTime=sY,this._requests=new Set,s!=null?this._bucket=ms.makeFromBucketSpec(s,this._host):this._bucket=CP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ms.makeFromBucketSpec(this._url,e):this._bucket=CP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new vY(iM());{const o=RY(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const kP="@firebase/storage",NP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="storage";function Mee(t,e,n){return t=St(t),rJ(t,e,n)}function dJ(t,e,n){return t=St(t),sJ(t,e,n)}function hJ(t){return t=St(t),iJ(t)}function fJ(t,e){return t=St(t),cJ(t,e)}function _M(t=Ey(),e){t=St(t);const r=tc(t,wM).getImmediate({identifier:e}),s=eb("storage");return s&&mJ(r,...s),r}function mJ(t,e,n,r={}){uJ(t,e,n,r)}function pJ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new RS(n,r,s,e,nc)}function gJ(){Ci(new Js(wM,pJ,"PUBLIC").setMultipleInstances(!0)),ys(kP,NP,""),ys(kP,NP,"esm2020")}gJ();const yJ={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Dg={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Dg.projectId,authDomain:Dg.authDomain,emulatorMode:!1});const Zy=oD(Dg);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Gt=RD(Zy,{persistence:[cb,W_]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const B=xL(Zy,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{s2("error")}catch{}const EM=eY(Zy,"us-central1");_M(Zy);console.log(" Firebase initialized successfully");const vJ=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(vJ,100);let tl=0;const fw=3,wJ=1e3,bM=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&tl<fw){tl++;const r=Math.min(wJ*Math.pow(2,tl-1),1e4);console.log(` Attempting to reconnect (${tl}/${fw}) in ${r}ms...`);try{await cS(B),await new Promise(s=>setTimeout(s,r)),await lS(B),console.log(" Firestore reconnected successfully"),tl=0}catch(s){console.error(" Failed to reconnect:",s),tl>=fw&&(console.error(" Maximum reconnection attempts reached."),_J())}}},_J=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await lS(B),tl=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await cS(B),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(bM(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const An=Object.freeze(Object.defineProperty({__proto__:null,auth:Gt,db:B,firebaseConfig:Dg,functions:EM,handleFirestoreError:bM},Symbol.toStringTag,{value:"Module"})),bt=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},EJ=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Kl=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Kl(n)).filter(n=>n!==void 0);if(t instanceof Date||!EJ(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Kl(r);s!==void 0&&(e[n]=s)}return e},vp={async create(t){await ln(Se(B,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Be()})},async getById(t){const e=Se(B,"profiles",t),n=await on(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:bt(r.createdAt)}}return null},async update(t,e){const n=Se(B,"profiles",t);await gn(n,{...e,updatedAt:Be()})},async getByShopId(t){const e=Xe(xe(B,"profiles"),$e("shopId","==",t));return(await Je(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:bt(s.createdAt)}})}},I0={async create(t){return(await vs(xe(B,"referrals"),{...t,createdAt:Be(),updatedAt:Be()})).id},async getByReferrerId(t){try{const e=Xe(xe(B,"referrals"),$e("referrerId","==",t),Ai("createdAt","desc"));return(await Je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:bt(r.data().createdAt),updatedAt:bt(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Xe(xe(B,"referrals"),$e("referrerId","==",t));return(await Je(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:bt(i.data().createdAt),updatedAt:bt(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,u;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((u=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:u.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Xe(xe(B,"referrals"),$e("referralCode","==",t),ma(1)),n=await Je(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:bt(r.data().createdAt),updatedAt:bt(r.data().updatedAt)}},async updateStatus(t,e){await gn(Se(B,"referrals",t),{status:e,updatedAt:Be()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},SM={async getByUserId(t){const e=Xe(xe(B,"profiles"),$e("userId","==",t)),n=await Je(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:bt(s.createdAt),updatedAt:bt(s.updatedAt)}}return null},async update(t,e){const n=Xe(xe(B,"profiles"),$e("userId","==",t)),r=await Je(n);if(!r.empty){const s=Se(B,"profiles",r.docs[0].id);await gn(s,{...e,updatedAt:Be()})}}},Zo={async create(t){return(await vs(xe(B,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Be(),updatedAt:Be()})).id},async getByMerchantId(t){const e=Xe(xe(B,"merchantWallets"),$e("merchantUserId","==",t)),r=(await Je(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:bt(l.createdAt),updatedAt:bt(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,u=l.createdAt;return c&&u?u.getTime()-c.getTime():c&&!u?-1:!c&&u?1:0});const s=Xe(xe(B,"wallets"),$e("userId","==",t));return(await Je(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:bt(l.createdAt),updatedAt:bt(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,u=l.createdAt;return c&&u?u.getTime()-c.getTime():c&&!u?-1:!c&&u?1:0})},async getById(t){const e=Se(B,"merchantWallets",t),n=await on(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:bt(r.createdAt),updatedAt:bt(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=Xe(xe(B,"merchantWallets"),$e("iccid","==",t)),n=await Je(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:bt(s.createdAt),updatedAt:bt(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=Xe(xe(B,"merchantWallets"),$e("msisdn","==",t)),r=await Je(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:bt(l.createdAt),updatedAt:bt(l.updatedAt)}}const s=Xe(xe(B,"merchantWallets")),i=await Je(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:bt(l.createdAt),updatedAt:bt(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Se(B,"merchantWallets",t);await gn(n,{...e,updatedAt:Be()})},async updateUsage(t,e,n){const r=Se(B,"merchantWallets",t),s={updatedAt:Be()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await gn(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,u)=>(u%a===0&&l.push(o.slice(u,u+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Xe(xe(B,"merchantWallets"),$e("msisdn","in",o)),c=(await Je(a)).docs.map(async u=>{try{const h=u.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await gn(u.ref,{merchantUserId:e,updatedAt:Be()}),s+=1}catch(h){console.error("Failed to reassign wallet",u.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Se(B,"merchantWallets",t);await Yt(e)}},CS={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await ae(async()=>{const{calculateCommission:c,calculateProfit:u}=await Promise.resolve().then(()=>ea);return{calculateCommission:c,calculateProfit:u}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,u])=>u!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Be(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await vs(xe(B,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await ae(async()=>{const{ProfitService:u}=await import("./profitService-nvtdNO18.js");return{ProfitService:u}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const u=await Zo.getById(c),h=Number((u==null?void 0:u.transferUsage)||0),f=Number((u==null?void 0:u.withdrawUsage)||0),m=Number(t.amount||0),_=String((t==null?void 0:t.originType)||"").trim()==="withdraw",g=String(t.txnType||"")==="receive";_||g?await Zo.updateUsage(c,void 0,f+m):await Zo.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),u=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const g=await Zo.getById(h);m=String((g==null?void 0:g.msisdn)||(g==null?void 0:g.label)||h).trim()}catch{}let _="";f==="withdraw"?_=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?_=`   ${c}   ${m||" "}   ${u||""}    ${r}`:_=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Xe(xe(B,"transactions"),$e("shopId","==",t),Ai("createdAt","desc"));return(await Je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:bt(r.data().createdAt),confirmedAt:r.data().confirmedAt?bt(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Xe(xe(B,"transactions"),$e("merchantUserId","==",t),Ai("createdAt","desc"));return(await Je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:bt(r.data().createdAt),confirmedAt:r.data().confirmedAt?bt(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Xe(xe(B,"transactions"),$e("merchantUserId","==",t)),n=Xe(xe(B,"transactions"),$e("userId","==",t)),[r,s]=await Promise.all([Je(e),Je(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:bt(c.createdAt),confirmedAt:c.confirmedAt?bt(c.confirmedAt):void 0})}return a.sort((l,c)=>{const u=l.createdAt,h=c.createdAt;return u&&h?h.getTime()-u.getTime():u&&!h?-1:!u&&h?1:0})},async updateStatus(t,e,n){const r=Se(B,"transactions",t);await gn(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function bJ(t){const e=t.txnType||"receive",n={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:e,originType:e==="send"?"send":"withdraw",amount:t.amount,receiverMsisdn:e==="send"?t.senderMsisdn:t.lineId,senderMsisdn:e==="send"?t.lineId:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},r=await CS.create(n);try{const{calculateCommission:s}=await ae(async()=>{const{calculateCommission:a}=await Promise.resolve().then(()=>ea);return{calculateCommission:a}},void 0,import.meta.url),i=s(Number(t.amount||0),e),o={transactionId:r,userId:t.createdBy,transactionType:e==="send"?"send":"withdraw",txnType:e,status:"confirmed",amount:Number(t.amount||0),commission:i,senderMsisdn:e==="send"?t.lineId:t.senderMsisdn,receiverMsisdn:e==="send"?t.senderMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await _r.saveUserTransaction(t.createdBy,o)}catch{}return(async()=>{try{const{calculateCommission:s}=await ae(async()=>{const{calculateCommission:u}=await Promise.resolve().then(()=>ea);return{calculateCommission:u}},void 0,import.meta.url),i=s(Number(t.amount||0),e),o=await _r.getUserData(t.createdBy),a={...(o==null?void 0:o.walletBalances)||{}},l=Math.max(0,Number(a[t.walletId]||0)),c=Math.max(0,Number(t.amount||0));if(e==="send"){a[t.walletId]=l-c;const h=Number((o==null?void 0:o.cashBalance)||0)+c+Math.max(0,i);await _r.updateUserData(t.createdBy,{walletBalances:a,cashBalance:h,lastUpdated:new Date().toISOString()})}else{a[t.walletId]=l+c;const h=Number((o==null?void 0:o.cashBalance)||0)-c+Math.max(0,i);await _r.updateUserData(t.createdBy,{walletBalances:a,cashBalance:h,lastUpdated:new Date().toISOString()})}}catch{}})(),(async()=>{try{const{walletDailyLimitsService:s}=await ae(async()=>{const{walletDailyLimitsService:o}=await Promise.resolve().then(()=>Ug);return{walletDailyLimitsService:o}},void 0,import.meta.url),i=Math.max(0,Number(t.amount||0));await s.updateUsage(String(t.walletId),i,e==="send"?"send":"withdraw")}catch(s){console.warn("      SMS:",s)}})(),r}const SJ="https://summer-cake-5149.alkaptin2030.workers.dev",IM={async getTelegramWorkerUrl(){var t;try{const e=Se(B,"systemSettings","core"),n=await on(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Se(B,"systemSettings","core");await ln(e,{telegramWorkerUrl:t,updatedAt:Be()},{merge:!0})}},IJ={async send(t,e){try{const n=await _r.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await IM.getTelegramWorkerUrl()||SJ).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},TJ={async log(t,e,n,r,s){await vs(xe(B,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Be()})},async getLogs(t=100){const e=Xe(xe(B,"auditLogs"),Ai("createdAt","desc"),ma(t));return(await Je(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:bt(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Xe(xe(B,"deletedTransactions"),Ai("deletedAt","desc"));return(await Je(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:bt(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Xe(xe(B,"deletedTransactions"),$e("userId","==",t),Ai("deletedAt","desc"));return(await Je(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:bt(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Xe(xe(B,"deletedTransactions"),$e("userId","==",t));return(await Je(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:bt(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Be(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await vs(xe(B,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Xe(xe(B,"deletedTransactions"),$e("originalTransactionId","==",t),$e("userId","==",e)),r=await Je(n);r.empty?await vs(xe(B,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Be()}):await Promise.all(r.docs.map(s=>gn(s.ref,{permanent:!0,deletedAt:Be()}))),console.log("    :",t);try{const s=Xe(xe(B,"userTransactions"),$e("userId","==",e)),o=(await Je(s)).docs.filter(a=>{var c,u;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((u=l.receipt)==null?void 0:u.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Yt(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Se(B,"transactions",t);(await on(s)).exists()&&(console.log("     transactions  "),await Yt(s));const o=Xe(xe(B,"transactions"),$e("transactionId","==",t)),a=await Je(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(u=>Yt(u.ref))));const l=Xe(xe(B,"transactions"),$e("originalTransactionId","==",t)),c=await Je(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(u=>Yt(u.ref))));try{const u=Xe(xe(B,"deletedTransactions"),$e("userId","==",e),$e("originalTransactionId","==",t)),h=await Je(u),f=h.docs.map(_=>{var g;return String(((g=_.data())==null?void 0:g.reference)||"")}).filter(Boolean),m=h.docs.map(_=>{var g;return String(((g=_.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const _ of f){const g=Xe(xe(B,"transactions"),$e("reference","==",_)),b=await Je(g);b.empty||(console.log(`  ${b.size}   transactions  reference=${_}`),await Promise.all(b.docs.map(E=>Yt(E.ref))))}for(const _ of m){try{const E=Se(B,"transactions",_);(await on(E)).exists()&&(console.log("     transactions  :",_),await Yt(E))}catch{}const g=Xe(xe(B,"transactions"),$e("transactionId","==",_)),b=await Je(g);b.empty||(console.log(`  ${b.size}   transactions  transactionId=${_}`),await Promise.all(b.docs.map(E=>Yt(E.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},TM={async add(t){const e=xe(B,"daily_reports_archive");return(await vs(e,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:Be(),updatedAt:Be()})).id},async getByUser(t,e=50){var n,r,s,i;try{const o=Xe(xe(B,"daily_reports_archive"),$e("userId","==",t),ma(e)),a=await Je(o);let l=[];try{l=(await Je(Xe(xe(B,"deletedDailyArchives"),$e("userId","==",t)))).docs.map(_=>{var g,b;return{id:_.id,reportDate:String(((g=_.data())==null?void 0:g.reportDate)||""),archiveId:String(((b=_.data())==null?void 0:b.archiveId)||"")}})}catch{}const c=(m,_)=>l.some(g=>g.archiveId&&g.archiveId===m||g.reportDate&&g.reportDate===_),u=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:bt(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of u){const _=h.get(m.reportDate);(!_||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=_.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,_)=>m.reportDate<_.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Xe(xe(B,"daily_reports_archive"),$e("userId","==",t)),s=await Je(r);let i=0;for(const o of s.docs){const a=bt(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Yt(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Xe(xe(B,"daily_reports_archive"),$e("userId","==",t)),s=(await Je(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:bt(o.data().createdAt)}));if(s.sort((o,a)=>{var u,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((u=o.createdAt)==null?void 0:u.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Yt(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=Xe(xe(B,"daily_reports_archive"),$e("userId","==",t)),n=await Je(e);let r=0;for(const s of n.docs)try{await Yt(s.ref),r++}catch{const o=s.data();try{await vs(xe(B,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Be()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},_r={async getUserData(t){try{console.log("     :",{userId:t});const e=Se(B,"users",t),n=await on(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:bt(r.createdAt),updatedAt:bt(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},async syncDeletedTransactionsLocal(t){try{const e=Xe(xe(B,"deletedTransactions"),$e("userId","==",t));(await Je(e)).docs.forEach(r=>{const s=r.data();if(!((s==null?void 0:s.permanent)===!0))return;const o=String((s==null?void 0:s.originalTransactionId)||""),a=String((s==null?void 0:s.transactionId)||""),l=String((s==null?void 0:s.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch(e){console.warn("syncDeletedTransactionsLocal failed:",e)}},async factoryResetUserData(t){const e={},n=[],r=async(a,l,c)=>{try{const u=Xe(xe(B,a),$e(l,"==",c)),h=await Je(u);h.empty||await Promise.all(h.docs.map(f=>Yt(f.ref))),e[`${a}:${l}`]=(e[`${a}:${l}`]||0)+h.size}catch(u){console.error(`factoryResetUserData client: error deleting from ${a} by ${l}=`,u),n.push(`${a}:${l}: ${(u==null?void 0:u.message)||String(u)}`)}};let s=null;try{const a=await on(Se(B,"profiles",t));if(a.exists()){const l=a.data();l!=null&&l.shopId&&(s=String(l.shopId))}}catch(a){console.warn("factoryResetUserData client: failed to fetch profile for shopId:",a)}if(await r("userTransactions","userId",t),await r("userTransactions","merchantUserId",t),await r("userTransactions","createdBy",t),await r("transactions","userId",t),await r("transactions","createdBy",t),await r("deletedTransactions","userId",t),await r("daily_reports_archive","userId",t),await r("deletedDailyArchives","userId",t),await r("wallets","userId",t),await r("wallets","merchantUserId",t),await r("dailySales","userId",t),await r("products","userId",t),await r("debts","userId",t),await r("installments","userId",t),s){await r("shop_expenses","shopId",s),await r("deficiencies","shopId",s),await r("categories","shopId",s);try{const a=xe(B,"shops",s,"machines"),l=await Je(a);if(!l.empty){for(const c of l.docs){const u=c.id,h=["transfers","deliveries","withdrawals"];for(const f of h)try{const m=xe(B,"shops",s,"machines",u,f),_=await Je(m);_.empty||await Promise.all(_.docs.map(g=>Yt(g.ref))),e[`machines/${u}/${f}`]=(e[`machines/${u}/${f}`]||0)+_.size}catch(m){console.warn(`factoryResetUserData client: error deleting machines/${u}/${f}:`,m)}await Yt(c.ref)}e.machines=(e.machines||0)+l.size}}catch(a){console.error("factoryResetUserData client: error deleting machines:",a),n.push(`machines: ${(a==null?void 0:a.message)||String(a)}`)}}else await r("shop_expenses","userId",t),await r("deficiencies","userId",t),await r("categories","shopId",t);await r("maintenance_items","userId",t),await r("cashSummaries","userId",t),await r("deviceTokens","userId",t);try{const a=Se(B,"users",t);await ln(a,{cashBalance:0,walletBalances:{},debts:[],debtsDeletedAt:Be(),reportsData:{},lastUpdated:new Date().toISOString()},{merge:!0}),e["users:embedded"]=(e["users:embedded"]||0)+1}catch(a){console.error("factoryResetUserData client: error clearing embedded user fields:",a),n.push(`users:embedded: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=await Je(xe(B,"users",t,"debts"));a.empty||await Promise.all(a.docs.map(l=>Yt(l.ref))),e["users/debts"]=(e["users/debts"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting debts subcollection:",a),n.push(`users/debts: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=await Je(xe(B,"users",t,"dailySales"));a.empty||await Promise.all(a.docs.map(l=>Yt(l.ref))),e["users/dailySales"]=(e["users/dailySales"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting dailySales subcollection:",a),n.push(`users/dailySales: ${(a==null?void 0:a.message)||String(a)}`)}const i=[];try{const a=await Je(Xe(xe(B,"merchantWallets"),$e("merchantUserId","==",t)));a.empty||(a.docs.forEach(l=>i.push(l.id)),await Promise.all(a.docs.map(l=>Yt(l.ref)))),e["merchantWallets:merchantUserId"]=(e["merchantWallets:merchantUserId"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting merchantWallets:",a),n.push(`merchantWallets:merchantUserId: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=await Je(xe(B,"users",t,"wallets"));a.empty||(a.docs.forEach(l=>i.push(l.id)),await Promise.all(a.docs.map(l=>Yt(l.ref)))),e["users/wallets"]=(e["users/wallets"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting user wallets subcollection:",a),n.push(`users/wallets: ${(a==null?void 0:a.message)||String(a)}`)}const o=Array.from(new Set(i));for(const a of o){try{await Yt(Se(B,"walletLimits",a)),e["walletLimits:doc"]=(e["walletLimits:doc"]||0)+1}catch(l){console.warn("factoryResetUserData client: error deleting walletLimits doc:",l),n.push(`walletLimits:doc:${a}: ${(l==null?void 0:l.message)||String(l)}`)}try{await Yt(Se(B,"walletDailyLimits",a)),e["walletDailyLimits:doc"]=(e["walletDailyLimits:doc"]||0)+1}catch(l){console.warn("factoryResetUserData client: error deleting walletDailyLimits doc:",l),n.push(`walletDailyLimits:doc:${a}: ${(l==null?void 0:l.message)||String(l)}`)}}if(await r("walletLimits","ownerId",t),await r("walletDailyLimits","ownerId",t),s)try{await ln(Se(B,"dashboardData",s),{cashBalance:0,walletBalances:{},lastUpdated:new Date().toISOString()},{merge:!0}),e["dashboardData:shop"]=(e["dashboardData:shop"]||0)+1}catch(a){console.error("factoryResetUserData client: error resetting dashboardData:",a),n.push(`dashboardData:shop:${s}: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=typeof localStorage<"u"?localStorage:null;if(a){const l=[];for(let c=0;c<a.length;c++){const u=a.key(c);u&&(u.includes(t)||u.startsWith("cashBalance_")||u.startsWith("walletBalances_")||u.startsWith("walletBalances_backup_")||u.startsWith("debts_")||u.startsWith("shopProducts_")||u.startsWith("deficiencies_"))&&l.push(u)}l.forEach(c=>{try{a.removeItem(c)}catch{}})}}catch(a){console.warn("factoryResetUserData client: failed to cleanup localStorage:",a)}try{await vs(xe(B,"factoryResets"),{userId:t,summary:e,errors:n,createdAt:Be()})}catch(a){console.warn("factoryResetUserData client: failed to log factory reset:",a)}return{success:n.length===0,summary:e,errors:n}},async saveUserData(t,e){try{const n=Se(B,"users",t),r=Kl(e);await ln(n,{...r||{},updatedAt:Be()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Se(B,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Kl(r);let i={};try{const l=await on(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Be()};console.log("   :",o);let a=3;for(;a>0;)try{await ln(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=Xe(xe(B,"userTransactions"),$e("userId","==",t),Ai("createdAt","desc"),ma(200));e=await Je(l)}catch(l){const c=String((l==null?void 0:l.message)||""),u=Xe(xe(B,"userTransactions"),$e("userId","==",t));e=await Je(u)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:bt(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const u=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-u})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},subscribeToUserTransactions(t,e,n=30){try{const r=Xe(xe(B,"userTransactions"),$e("userId","==",t),Ai("createdAt","desc"),ma(n));return ka(r,s=>{const i=s.docs.map(o=>({id:o.id,...o.data(),createdAt:bt(o.data().createdAt)}));e(i)},s=>{console.error("Error in transactions subscription:",s)})}catch(r){return console.error("Error setting up subscription:",r),()=>{}}},subscribeToDashboardData(t,e){try{const n=Se(B,"dashboardData",t);return ka(n,r=>{r.exists()?e(r.data()):e({})},r=>{console.error("Error in dashboard data subscription:",r)})}catch(n){return console.error("Error setting up dashboard subscription:",n),()=>{}}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=Xe(xe(B,"deletedTransactions"),$e("userId","==",t),$e("reference","==",o));if(!(await Je(a)).empty)return console.log("          ."),"skip-deleted"}{const a=Xe(xe(B,"deletedTransactions"),$e("userId","==",t),$e("permanent","==",!0)),l=await Je(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),m=String(f.originalTransactionId||f.transactionId||h.id||""),_=String(f.reference||"");return m&&c.includes(m)||_&&c.includes(_)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=Xe(xe(B,"userTransactions"),$e("userId","==",t));if(s.transactionId){const E=Xe(xe(B,"userTransactions"),$e("userId","==",t),$e("transactionId","==",s.transactionId)),w=await Je(E);if(!w.empty){const S=w.docs[0];return await gn(Se(B,"userTransactions",S.id),{...s,uploadedAt:Be()}),S.id}}if(s.reference){const E=Xe(xe(B,"userTransactions"),$e("userId","==",t),$e("reference","==",s.reference)),w=await Je(E);if(!w.empty){const S=w.docs[0];return await gn(Se(B,"userTransactions",S.id),{...s,uploadedAt:Be()}),S.id}}const a=Xe(xe(B,"userTransactions"),$e("userId","==",t),Ai("createdAt","desc"),ma(10)),l=await Je(a),c=s.type||s.txnType,u=Number(s.amount||0),h=s.senderName,f=s.senderMsisdn||s.senderPhone||s.sender_msisdn,m=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,_=s.createdAt?new Date(String(s.createdAt)):new Date,g=60*1e3,b=l.docs.find(E=>{const w=E.data(),S=w.type||w.txnType,P=Number(w.amount||0),x=w.senderName,O=w.senderMsisdn||w.senderPhone||w.sender_msisdn,I=w.receiverMsisdn||w.receiverPhone||w.receiver_msisdn,A=bt(w.createdAt);return!(Math.abs(A.getTime()-_.getTime())<=g)||P!==u||S!==c?!1:c==="machine_withdrawal"?x===h:O===f&&I===m});if(b)return console.log("            :",b.id),await gn(Se(B,"userTransactions",b.id),{...s,uploadedAt:Be()}),b.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await vs(xe(B,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Be(),uploadedAt:Be()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Se(B,"userTransactions",e),a=await on(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(u=>String(u||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Yt(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=Xe(xe(B,"userTransactions"),$e("userId","==",t)),r=await Je(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,u=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return u&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),u}),i=[Xe(xe(B,"userTransactions"),$e("merchantUserId","==",t)),Xe(xe(B,"userTransactions"),$e("createdBy","==",t))];for(const o of i)try{const l=(await Je(o)).docs.filter(c=>{var f,m;const u=c.data(),h=c.id;return u.id===e||u.transactionId===e||h===e||u.originalTransactionId===e||((f=u.receipt)==null?void 0:f.transactionId)===e||((m=u.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Yt(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Se(B,"transactions",e);if((await on(a)).exists())console.log("     transactions   "),await Yt(a);else{const c=Xe(xe(B,"transactions"),$e("transactionId","==",e)),u=await Je(c);u.empty||(console.log(`   ${u.size}   transactions  transactionId `),await Promise.all(u.docs.map(m=>Yt(m.ref))));const h=Xe(xe(B,"transactions"),$e("originalTransactionId","==",e)),f=await Je(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Yt(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},T0={async getToday(t){const e=Se(B,"dailyStats",t,"today","data"),n=await on(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Se(B,"dailyStats",t,"today","data");await ln(n,{...Kl(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Se(B,"dailyStats",t,"history",e);await ln(r,Kl(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},xJ={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Be()};return(await vs(xe(B,"installments"),n)).id},async getByUser(t){try{const e=Xe(xe(B,"installments"),$e("userId","==",t));return(await Je(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("installments fetch error",e),[]}},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await gn(Se(B,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Yt(Se(B,"installments",t)),!0}},wc=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:xJ,auditLogService:TJ,dailyReportsArchiveService:TM,dailyStatsService:T0,merchantWalletService:Zo,profileService:vp,profileServiceExtra:SM,recordAutoTransaction:bJ,referralService:I0,sanitizeFirestoreData:Kl,systemSettingsService:IM,telegramNotifier:IJ,transactionService:CS,userDataService:_r},Symbol.toStringTag,{value:"Module"}));var al=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.HALF_YEARLY="half_yearly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t.BRANCH="branch",t))(al||{});const Al=t=>{if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();if(t.seconds!==void 0&&typeof t.seconds=="number")return new Date(t.seconds*1e3);const e=new Date(t);return isNaN(e.getTime())?null:e},AJ=(t,e=new Date)=>{const n=Al(e)||new Date;switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"half_yearly":{const r=new Date(n);return r.setDate(r.getDate()+180),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},DP=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const r=new Date,s=Al(t.activatedAt);return s&&r.getTime()-s.getTime()<4*60*60*1e3,!0}const e=new Date,n=Al(t.endDate);if(!n){const r=Al(t.activatedAt);return r&&e.getTime()-r.getTime()<4*60*60*1e3,!0}return e<=n},PJ=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=Al(t.endDate);if(!n)return null;const r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},Vee=async(t,e,n,r)=>{try{const s=new Date,i=AJ(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Se(B,"users",t);await gn(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});try{const l=await on(a);if(l.exists()){const c=l.data();if(c.ownerId){const u=c.ownerId;try{const h=Se(B,"users",u,"branches",t);await gn(h,{isActive:!0,updatedAt:new Date})}catch(h){console.warn("Could not update branch reference in parent subcollection",h)}}}}catch(l){console.warn("Error syncing branch status to parent:",l)}if(console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},Fee=async t=>{try{const e=ES(B),n=Se(B,"users",t);e.update(n,{"subscription.isActive":!1,isActive:!1,"branchPackage.status":"canceled","branchPackage.canceledAt":new Date,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});const r=Xe(xe(B,"users"),$e("ownerId","==",t)),s=await Je(r);s.forEach(i=>{e.update(i.ref,{isActive:!1,"subscription.isActive":!1,updatedAt:new Date})}),await e.commit(),console.log(`      ${t}   (${s.size})`)}catch(e){throw console.error("     :",e),new Error("    ")}},RJ=async t=>{try{const e=ES(B),n=Se(B,"users",t);e.update(n,{"branchPackage.status":"expired","branchPackage.expiredAt":new Date,updatedAt:new Date});const r=Xe(xe(B,"users"),$e("ownerId","==",t));(await Je(r)).forEach(i=>{e.update(i.ref,{isActive:!1,updatedAt:new Date})}),await e.commit(),console.log(` Branch package expired for user ${t}`)}catch(e){console.error("Failed to expire branch package:",e)}},CJ=async(t,e)=>{if((e==null?void 0:e.status)!=="active"||!e.endDate)return;const n=Al(e.endDate);n&&new Date>n&&(console.log(`Branch package expired for user ${t}. Deactivating...`),await RJ(t))},kJ=async t=>{try{const e=Se(B,"users",t),n=await on(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},jee=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"half_yearly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";case"branch":return" ";default:return" "}},Uee=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=PJ(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},NJ=t=>{const e=Al(t);return e?e.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" "};/*! Capacitor: https://capacitorjs.com/ - MIT License */const DJ=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(i,o)=>{n.platforms.set(i,o)},s=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=r,n.setPlatform=s,n},OJ=t=>t.CapacitorPlatforms=DJ(t),xM=OJ(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});xM.addPlatform;xM.setPlatform;var Yu;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Yu||(Yu={}));class mw extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const LJ=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},MJ=t=>{var e,n,r,s,i;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},l=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,u=()=>o!==null?o.name:LJ(t),h=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||u,f=()=>h()!=="web",m=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||f,_=I=>{const A=P.get(I);return!!(A!=null&&A.platforms.has(h())||E(I))},g=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||_,b=I=>{var A;return(A=a.PluginHeaders)===null||A===void 0?void 0:A.find(R=>R.name===I)},E=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||b,w=I=>t.console.error(I),S=(I,A,R)=>Promise.reject(`${R} does not have an implementation of "${A}".`),P=new Map,x=(I,A={})=>{const R=P.get(I);if(R)return console.warn(`Capacitor plugin "${I}" already registered. Cannot register plugins twice.`),R.proxy;const N=h(),C=E(I);let L;const D=async()=>(!L&&N in A?L=typeof A[N]=="function"?L=await A[N]():L=A[N]:o!==null&&!L&&"web"in A&&(L=typeof A.web=="function"?L=await A.web():L=A.web),L),X=(ie,le)=>{var fe,Le;if(C){const Pe=C==null?void 0:C.methods.find(Q=>le===Q.name);if(Pe)return Pe.rtype==="promise"?Q=>a.nativePromise(I,le.toString(),Q):(Q,et)=>a.nativeCallback(I,le.toString(),Q,et);if(ie)return(fe=ie[le])===null||fe===void 0?void 0:fe.bind(ie)}else{if(ie)return(Le=ie[le])===null||Le===void 0?void 0:Le.bind(ie);throw new mw(`"${I}" plugin is not implemented on ${N}`,Yu.Unimplemented)}},Ae=ie=>{let le;const fe=(...Le)=>{const Pe=D().then(Q=>{const et=X(Q,ie);if(et){const nt=et(...Le);return le=nt==null?void 0:nt.remove,nt}else throw new mw(`"${I}.${ie}()" is not implemented on ${N}`,Yu.Unimplemented)});return ie==="addListener"&&(Pe.remove=async()=>le()),Pe};return fe.toString=()=>`${ie.toString()}() { [capacitor code] }`,Object.defineProperty(fe,"name",{value:ie,writable:!1,configurable:!1}),fe},ke=Ae("addListener"),Fe=Ae("removeListener"),W=(ie,le)=>{const fe=ke({eventName:ie},le),Le=async()=>{const Q=await fe;Fe({eventName:ie,callbackId:Q},le)},Pe=new Promise(Q=>fe.then(()=>Q({remove:Le})));return Pe.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Le()},Pe},K=new Proxy({},{get(ie,le){switch(le){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?W:ke;case"removeListener":return Fe;default:return Ae(le)}}});return l[I]=K,P.set(I,{name:I,proxy:K,platforms:new Set([...Object.keys(A),...C?[N]:[]])}),K},O=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||x;return a.convertFileSrc||(a.convertFileSrc=I=>I),a.getPlatform=h,a.handleError=w,a.isNativePlatform=m,a.isPluginAvailable=g,a.pluginMethodNoop=S,a.registerPlugin=O,a.Exception=mw,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},VJ=t=>t.Capacitor=MJ(t),Te=VJ(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),_d=Te.registerPlugin;Te.Plugins;class AM{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const i=async()=>this.removeListener(e,n),o=Promise.resolve({remove:i});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const r=this.listeners[e];r&&r.forEach(s=>s(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Te.Exception(e,Yu.Unimplemented)}unavailable(e="not available"){return new Te.Exception(e,Yu.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const OP=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),LP=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class FJ extends AM{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=LP(s).trim(),i=LP(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=OP(e.key),r=OP(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}_d("CapacitorCookies",{web:()=>new FJ});const jJ=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),UJ=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},$J=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,BJ=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=UJ(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class zJ extends AM{async request(e){const n=BJ(e,e.webFetchExtra),r=$J(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await jJ(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const u={};return i.headers.forEach((h,f)=>{u[f]=h}),{data:l,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}_d("CapacitorHttp",{web:()=>new zJ});const ll=_d("Preferences",{web:()=>ae(()=>import("./web-BpZBfN9E.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),MP=Object.freeze(Object.defineProperty({__proto__:null,Preferences:ll},Symbol.toStringTag,{value:"Module"}));var WJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qJ=WJ.reduce((t,e)=>{const n=KN(`Primitive.${e}`),r=v.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),HJ="Label",PM=v.forwardRef((t,e)=>p.jsx(qJ.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));PM.displayName=HJ;var RM=PM;const KJ=NE("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ps=v.forwardRef(({className:t,...e},n)=>p.jsx(RM,{ref:n,className:vn(KJ(),t),...e}));Ps.displayName=RM.displayName;var pw="focusScope.autoFocusOnMount",gw="focusScope.autoFocusOnUnmount",VP={bubbles:!1,cancelable:!0},GJ="FocusScope",CM=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=v.useState(null),c=Pi(s),u=Pi(i),h=v.useRef(null),f=Sr(e,g=>l(g)),m=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let g=function(S){if(m.paused||!a)return;const P=S.target;a.contains(P)?h.current=P:Ao(h.current,{select:!0})},b=function(S){if(m.paused||!a)return;const P=S.relatedTarget;P!==null&&(a.contains(P)||Ao(h.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const x of S)x.removedNodes.length>0&&Ao(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(E);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[r,a,m.paused]),v.useEffect(()=>{if(a){jP.add(m);const g=document.activeElement;if(!a.contains(g)){const E=new CustomEvent(pw,VP);a.addEventListener(pw,c),a.dispatchEvent(E),E.defaultPrevented||(QJ(eX(kM(a)),{select:!0}),document.activeElement===g&&Ao(a))}return()=>{a.removeEventListener(pw,c),setTimeout(()=>{const E=new CustomEvent(gw,VP);a.addEventListener(gw,u),a.dispatchEvent(E),E.defaultPrevented||Ao(g??document.body,{select:!0}),a.removeEventListener(gw,u),jP.remove(m)},0)}}},[a,c,u,m]);const _=v.useCallback(g=>{if(!n&&!r||m.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,E=document.activeElement;if(b&&E){const w=g.currentTarget,[S,P]=YJ(w);S&&P?!g.shiftKey&&E===P?(g.preventDefault(),n&&Ao(S,{select:!0})):g.shiftKey&&E===S&&(g.preventDefault(),n&&Ao(P,{select:!0})):E===w&&g.preventDefault()}},[n,r,m.paused]);return p.jsx(Nn.div,{tabIndex:-1,...o,ref:f,onKeyDown:_})});CM.displayName=GJ;function QJ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ao(r,{select:e}),document.activeElement!==n)return}function YJ(t){const e=kM(t),n=FP(e,t),r=FP(e.reverse(),t);return[n,r]}function kM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function FP(t,e){for(const n of t)if(!JJ(n,{upTo:e}))return n}function JJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function XJ(t){return t instanceof HTMLInputElement&&"select"in t}function Ao(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&XJ(t)&&e&&t.select()}}var jP=ZJ();function ZJ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=UP(t,e),t.unshift(e)},remove(e){var n;t=UP(t,e),(n=t[0])==null||n.resume()}}}function UP(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function eX(t){return t.filter(e=>e.tagName!=="A")}var yw=0;function tX(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??$P()),document.body.insertAdjacentElement("beforeend",t[1]??$P()),yw++,()=>{yw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),yw--}},[])}function $P(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pi=function(){return pi=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pi.apply(this,arguments)};function NM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function nX(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var wp="right-scroll-bar-position",_p="width-before-scroll-bar",rX="with-scroll-bars-hidden",sX="--removed-body-scroll-bar-size";function vw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function iX(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var oX=typeof window<"u"?v.useLayoutEffect:v.useEffect,BP=new WeakMap;function aX(t,e){var n=iX(null,function(r){return t.forEach(function(s){return vw(s,r)})});return oX(function(){var r=BP.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||vw(a,null)}),i.forEach(function(a){s.has(a)||vw(a,o)})}BP.set(n,t)},[t]),n}function lX(t){return t}function cX(t,e){e===void 0&&(e=lX);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function uX(t){t===void 0&&(t={});var e=cX(null);return e.options=pi({async:!0,ssr:!1},t),e}var DM=function(t){var e=t.sideCar,n=NM(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,pi({},n))};DM.isSideCarExport=!0;function dX(t,e){return t.useMedium(e),DM}var OM=uX(),ww=function(){},ev=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:ww,onWheelCapture:ww,onTouchMoveCapture:ww}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,_=t.noIsolation,g=t.inert,b=t.allowPinchZoom,E=t.as,w=E===void 0?"div":E,S=t.gapMode,P=NM(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,O=aX([n,e]),I=pi(pi({},P),s);return v.createElement(v.Fragment,null,u&&v.createElement(x,{sideCar:OM,removeScrollBar:c,shards:h,noRelative:m,noIsolation:_,inert:g,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),o?v.cloneElement(v.Children.only(a),pi(pi({},I),{ref:O})):v.createElement(w,pi({},I,{className:l,ref:O}),a))});ev.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ev.classNames={fullWidth:_p,zeroRight:wp};var hX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=hX();return e&&t.setAttribute("nonce",e),t}function mX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function pX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var gX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=fX())&&(mX(e,n),pX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},yX=function(){var t=gX();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},LM=function(){var t=yX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},vX={left:0,top:0,right:0,gap:0},_w=function(t){return parseInt(t||"",10)||0},wX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[_w(n),_w(r),_w(s)]},_X=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vX;var e=wX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},EX=LM(),lu="data-scroll-locked",bX=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(rX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(lu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(_p,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wp," .").concat(wp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_p," .").concat(_p,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lu,`] {
    `).concat(sX,": ").concat(a,`px;
  }
`)},zP=function(){var t=parseInt(document.body.getAttribute(lu)||"0",10);return isFinite(t)?t:0},SX=function(){v.useEffect(function(){return document.body.setAttribute(lu,(zP()+1).toString()),function(){var t=zP()-1;t<=0?document.body.removeAttribute(lu):document.body.setAttribute(lu,t.toString())}},[])},IX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;SX();var i=v.useMemo(function(){return _X(s)},[s]);return v.createElement(EX,{styles:bX(i,!e,s,n?"":"!important")})},x0=!1;if(typeof window<"u")try{var Om=Object.defineProperty({},"passive",{get:function(){return x0=!0,!0}});window.addEventListener("test",Om,Om),window.removeEventListener("test",Om,Om)}catch{x0=!1}var _c=x0?{passive:!1}:!1,TX=function(t){return t.tagName==="TEXTAREA"},MM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!TX(t)&&n[e]==="visible")},xX=function(t){return MM(t,"overflowY")},AX=function(t){return MM(t,"overflowX")},WP=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=VM(t,r);if(s){var i=FM(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},PX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},RX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},VM=function(t,e){return t==="v"?xX(e):AX(e)},FM=function(t,e){return t==="v"?PX(e):RX(e)},CX=function(t,e){return t==="h"&&e==="rtl"?-1:1},kX=function(t,e,n,r,s){var i=CX(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,f=0;do{if(!a)break;var m=FM(t,a),_=m[0],g=m[1],b=m[2],E=g-b-i*_;(_||E)&&VM(t,a)&&(h+=E,f+=_);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Lm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},qP=function(t){return[t.deltaX,t.deltaY]},HP=function(t){return t&&"current"in t?t.current:t},NX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},DX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},OX=0,Ec=[];function LX(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),s=v.useState(OX++)[0],i=v.useState(LM)[0],o=v.useRef(t);v.useEffect(function(){o.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=nX([t.lockRef.current],(t.shards||[]).map(HP),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var E=Lm(g),w=n.current,S="deltaX"in g?g.deltaX:w[0]-E[0],P="deltaY"in g?g.deltaY:w[1]-E[1],x,O=g.target,I=Math.abs(S)>Math.abs(P)?"h":"v";if("touches"in g&&I==="h"&&O.type==="range")return!1;var A=window.getSelection(),R=A&&A.anchorNode,N=R?R===O||R.contains(O):!1;if(N)return!1;var C=WP(I,O);if(!C)return!0;if(C?x=I:(x=I==="v"?"h":"v",C=WP(I,O)),!C)return!1;if(!r.current&&"changedTouches"in g&&(S||P)&&(r.current=x),!x)return!0;var L=r.current||x;return kX(L,b,g,L==="h"?S:P)},[]),l=v.useCallback(function(g){var b=g;if(!(!Ec.length||Ec[Ec.length-1]!==i)){var E="deltaY"in b?qP(b):Lm(b),w=e.current.filter(function(x){return x.name===b.type&&(x.target===b.target||b.target===x.shadowParent)&&NX(x.delta,E)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(HP).filter(Boolean).filter(function(x){return x.contains(b.target)}),P=S.length>0?a(b,S[0]):!o.current.noIsolation;P&&b.cancelable&&b.preventDefault()}}},[]),c=v.useCallback(function(g,b,E,w){var S={name:g,delta:b,target:E,should:w,shadowParent:MX(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(P){return P!==S})},1)},[]),u=v.useCallback(function(g){n.current=Lm(g),r.current=void 0},[]),h=v.useCallback(function(g){c(g.type,qP(g),g.target,a(g,t.lockRef.current))},[]),f=v.useCallback(function(g){c(g.type,Lm(g),g.target,a(g,t.lockRef.current))},[]);v.useEffect(function(){return Ec.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,_c),document.addEventListener("touchmove",l,_c),document.addEventListener("touchstart",u,_c),function(){Ec=Ec.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,_c),document.removeEventListener("touchmove",l,_c),document.removeEventListener("touchstart",u,_c)}},[]);var m=t.removeScrollBar,_=t.inert;return v.createElement(v.Fragment,null,_?v.createElement(i,{styles:DX(s)}):null,m?v.createElement(IX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function MX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const VX=dX(OM,LX);var jM=v.forwardRef(function(t,e){return v.createElement(ev,pi({},t,{ref:e,sideCar:VX}))});jM.classNames=ev.classNames;var FX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},bc=new WeakMap,Mm=new WeakMap,Vm={},Ew=0,UM=function(t){return t&&(t.host||UM(t.parentNode))},jX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=UM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},UX=function(t,e,n,r){var s=jX(e,Array.isArray(t)?t:[t]);Vm[n]||(Vm[n]=new WeakMap);var i=Vm[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var m=f.getAttribute(r),_=m!==null&&m!=="false",g=(bc.get(f)||0)+1,b=(i.get(f)||0)+1;bc.set(f,g),i.set(f,b),o.push(f),g===1&&_&&Mm.set(f,!0),b===1&&f.setAttribute(n,"true"),_||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(e),a.clear(),Ew++,function(){o.forEach(function(h){var f=bc.get(h)-1,m=i.get(h)-1;bc.set(h,f),i.set(h,m),f||(Mm.has(h)||h.removeAttribute(r),Mm.delete(h)),m||h.removeAttribute(n)}),Ew--,Ew||(bc=new WeakMap,bc=new WeakMap,Mm=new WeakMap,Vm={})}},$X=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=FX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),UX(r,s,n,"aria-hidden")):function(){return null}};function BX(t){const e=zX(t),n=v.forwardRef((r,s)=>{const{children:i,...o}=r,a=v.Children.toArray(i),l=a.find(qX);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return p.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function zX(t){const e=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const o=KX(s),a=HX(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var WX=Symbol("radix.slottable");function qX(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===WX}function HX(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function KX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tv="Dialog",[$M,$ee]=td(tv),[GX,si]=$M(tv),BM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=v.useRef(null),l=v.useRef(null),[c,u]=PE({prop:r,defaultProp:s??!1,onChange:i,caller:tv});return p.jsx(GX,{scope:e,triggerRef:a,contentRef:l,contentId:$v(),titleId:$v(),descriptionId:$v(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};BM.displayName=tv;var zM="DialogTrigger",WM=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=si(zM,n),i=Sr(e,s.triggerRef);return p.jsx(Nn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":DS(s.open),...r,ref:i,onClick:cn(t.onClick,s.onOpenToggle)})});WM.displayName=zM;var kS="DialogPortal",[QX,qM]=$M(kS,{forceMount:void 0}),HM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=si(kS,e);return p.jsx(QX,{scope:e,forceMount:n,children:v.Children.map(r,o=>p.jsx(Xl,{present:n||i.open,children:p.jsx(AE,{asChild:!0,container:s,children:o})}))})};HM.displayName=kS;var Og="DialogOverlay",KM=v.forwardRef((t,e)=>{const n=qM(Og,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=si(Og,t.__scopeDialog);return i.modal?p.jsx(Xl,{present:r||i.open,children:p.jsx(JX,{...s,ref:e})}):null});KM.displayName=Og;var YX=BX("DialogOverlay.RemoveScroll"),JX=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=si(Og,n);return p.jsx(jM,{as:YX,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(Nn.div,{"data-state":DS(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Gl="DialogContent",GM=v.forwardRef((t,e)=>{const n=qM(Gl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=si(Gl,t.__scopeDialog);return p.jsx(Xl,{present:r||i.open,children:i.modal?p.jsx(XX,{...s,ref:e}):p.jsx(ZX,{...s,ref:e})})});GM.displayName=Gl;var XX=v.forwardRef((t,e)=>{const n=si(Gl,t.__scopeDialog),r=v.useRef(null),s=Sr(e,n.contentRef,r);return v.useEffect(()=>{const i=r.current;if(i)return $X(i)},[]),p.jsx(QM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cn(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:cn(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:cn(t.onFocusOutside,i=>i.preventDefault())})}),ZX=v.forwardRef((t,e)=>{const n=si(Gl,t.__scopeDialog),r=v.useRef(!1),s=v.useRef(!1);return p.jsx(QM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),QM=v.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=si(Gl,n),l=v.useRef(null),c=Sr(e,l);return tX(),p.jsxs(p.Fragment,{children:[p.jsx(CM,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(sy,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":DS(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(eZ,{titleId:a.titleId}),p.jsx(nZ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),NS="DialogTitle",YM=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=si(NS,n);return p.jsx(Nn.h2,{id:s.titleId,...r,ref:e})});YM.displayName=NS;var JM="DialogDescription",XM=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=si(JM,n);return p.jsx(Nn.p,{id:s.descriptionId,...r,ref:e})});XM.displayName=JM;var ZM="DialogClose",eV=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=si(ZM,n);return p.jsx(Nn.button,{type:"button",...r,ref:e,onClick:cn(t.onClick,()=>s.onOpenChange(!1))})});eV.displayName=ZM;function DS(t){return t?"open":"closed"}var tV="DialogTitleWarning",[Bee,nV]=PU(tV,{contentName:Gl,titleName:NS,docsSlug:"dialog"}),eZ=({titleId:t})=>{const e=nV(tV),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},tZ="DialogDescriptionWarning",nZ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nV(tZ).contentName}}.`;return v.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},rZ=BM,sZ=WM,iZ=HM,rV=KM,sV=GM,iV=YM,oV=XM,oZ=eV;const Pl=rZ,zee=sZ,aZ=iZ,aV=v.forwardRef(({className:t,...e},n)=>p.jsx(rV,{ref:n,className:vn("fixed inset-0 z-[9998] bg-black/30 dark:bg-black backdrop-blur-[5px] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));aV.displayName=rV.displayName;const pa=v.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,overlayClassName:i,...o},a)=>p.jsxs(aZ,{children:[p.jsx(aV,{className:i}),p.jsxs(sV,{ref:a,className:vn("fixed left-[50%] top-[50%] z-[9999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background dark:bg-[#0f172a] dark:text-slate-100 dark:border-slate-800 p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:l=>{r&&l.preventDefault()},onEscapeKeyDown:l=>{s&&l.preventDefault()},...o,children:[e,!n&&p.jsxs(oZ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(Oo,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pa.displayName=sV.displayName;const ga=({className:t,...e})=>p.jsx("div",{className:vn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ga.displayName="DialogHeader";const nv=({className:t,...e})=>p.jsx("div",{className:vn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});nv.displayName="DialogFooter";const ya=v.forwardRef(({className:t,...e},n)=>p.jsx(iV,{ref:n,className:vn("text-lg font-semibold leading-none tracking-tight",t),...e}));ya.displayName=iV.displayName;const Lg=v.forwardRef(({className:t,...e},n)=>p.jsx(oV,{ref:n,className:vn("text-sm text-muted-foreground",t),...e}));Lg.displayName=oV.displayName;const KP="master_pin",ai=new Map;function lZ(t){return t.replace(/[-]/g,e=>"0123456789"["".indexOf(e)])}function Co(t){return t?`${KP}_${t}`:KP}async function cZ(t){try{const e=await _r.getUserData(t),n=(e==null?void 0:e.security)&&e.security.masterPin||(e==null?void 0:e.masterPin)||null;return typeof n=="string"&&n.length>0?n:null}catch{try{const e=Se(B,"users",t),n=await on(e);if(n.exists()){const r=n.data(),s=(r==null?void 0:r.security)&&r.security.masterPin||(r==null?void 0:r.masterPin)||null;return typeof s=="string"&&s.length>0?s:null}}catch{}return null}}function GP(t){try{const e=localStorage.getItem(Co(t));return e&&e.length>0?e:null}catch{return null}}async function Fm(t,e){try{const n={security:{masterPin:e||null,masterPinUpdatedAt:Be()},updatedAt:Be()};await ln(Se(B,"users",t),n,{merge:!0})}catch{try{await gn(Se(B,"users",t),{security:{masterPin:e||null,masterPinUpdatedAt:Be()},updatedAt:Be()})}catch{}}}function Io(t,e){try{const n=Co(t);e?localStorage.setItem(n,e):localStorage.removeItem(n)}catch{}}class Qa{static async hasMasterPin(e){const n=Co(e);if(ai.has(n)){const s=ai.get(n);return s!==""&&s!=null}const r=GP(e);if(r)return ai.set(n,r),!0;if(e){const s=GP(void 0);if(s){ai.set(n,s),Io(e,s);try{Io(void 0,null)}catch{}return await Fm(e,s),!0}}if(e){const s=await cZ(e);if(s){ai.set(n,s),Io(e,s);try{Io(void 0,null)}catch{}return!0}}return!1}static async createMasterPin(e,n){try{if(!e||e.length<4)return!1;const r=btoa(e),s=Co(n);return ai.set(s,r),Io(n,r),n&&await Fm(n,r),!0}catch(r){return console.error("Error creating master PIN:",r),!1}}static async verifyMasterPin(e,n){try{const r=e.trim(),s=lZ(r),i=Co(n);if(await this.hasMasterPin(n)){const o=ai.get(i);if(o){const a=atob(o);if(a===r||a===s)return!0}}if(n){const o=Co(void 0),a=localStorage.getItem(o);if(a)try{const l=atob(a);if(l===r||l===s)return console.log("Master PIN auto-correction: Generic PIN matched while User PIN failed. Updating User PIN."),ai.set(i,a),Io(n,a),await Fm(n,a),!0}catch{}}return!1}catch(r){return console.error("Error verifying master PIN:",r),!1}}static async changeMasterPin(e,n,r){try{return await this.verifyMasterPin(e,r)?await this.createMasterPin(n,r):!1}catch(s){return console.error("Error changing master PIN:",s),!1}}static async deleteMasterPin(e){try{const n=Co(e);return ai.delete(n),Io(e,null),e&&(Io(void 0,null),await Fm(e,null)),!0}catch(n){return console.error("Error deleting master PIN:",n),!1}}static async getMasterPin(e){try{const n=Co(e);if(!await this.hasMasterPin(e))return null;const r=ai.get(n);return r?atob(r):null}catch(n){return console.error("Error getting master PIN:",n),null}}}const lV=({open:t,onOpenChange:e,title:n="  ",description:r="     ",onSuccess:s})=>{const{toast:i}=Jl(),[o,a]=v.useState(""),[l,c]=v.useState(!1),[u,h]=v.useState(null),f=async()=>{h(null);try{const _=Gt.currentUser;if(!_||!_.email){h("    .    .");return}c(!0);const g=rc.credential(_.email,o);await h8(_,g),c(!1),a(""),i({title:" ",description:"     "}),s(),e&&e(!1)}catch(_){console.error("    :",_),c(!1);const g=(_==null?void 0:_.code)||"";h(g==="auth/wrong-password"?"   .   .":g==="auth/too-many-requests"?"  .     .":"   .   .")}},m=_=>{e&&e(_),_||(a(""),h(null),c(!1))};return p.jsx(Pl,{open:t,onOpenChange:m,children:p.jsxs(pa,{className:"sm:max-w-[400px] bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",dir:"rtl",children:[p.jsxs(ga,{children:[p.jsx(ya,{className:"text-right text-gray-900 dark:text-gray-100",children:n}),p.jsx(Lg,{className:"text-right text-gray-500 dark:text-gray-400",children:r})]}),p.jsxs("div",{className:"grid gap-4 py-2",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-2",children:[p.jsx("label",{htmlFor:"password",className:"text-right col-span-1 text-sm text-gray-700 dark:text-gray-300",children:" "}),p.jsxs("div",{className:"col-span-3 relative",children:[p.jsx(ay,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),p.jsx(nr,{id:"password",type:"password",value:o,onChange:_=>a(_.target.value),onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),f())},placeholder:"    ",autoComplete:"off",className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100"})]})]}),u&&p.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs text-right",children:u})]}),p.jsxs(nv,{className:"flex justify-end gap-2",children:[p.jsx(xt,{variant:"outline",onClick:()=>m(!1),disabled:l,className:"dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",children:""}),p.jsx(xt,{onClick:f,disabled:l,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:l?" ...":""})]})]})})},Wee=Object.freeze(Object.defineProperty({__proto__:null,default:lV},Symbol.toStringTag,{value:"Module"})),A0=({open:t,onOpenChange:e,onSuccess:n,title:r="  ",description:s="      ",mode:i="verify",className:o,overlayClassName:a,userId:l,userRole:c})=>{const[u,h]=v.useState(""),[f,m]=v.useState(""),[_,g]=v.useState(""),[b,E]=v.useState(!1),[w,S]=v.useState(!1),[P,x]=v.useState(!1),[O,I]=v.useState(""),[A,R]=v.useState(!1),{toast:N}=Jl(),[C,L]=v.useState(!1),[D,X]=v.useState(!1),Ae=c==="admin"||c==="staff",[ke,Fe]=v.useState(!1),[W,K]=v.useState(!1),ie=v.useRef(null),[le,fe]=v.useState(i);v.useEffect(()=>{fe(i)},[i]),v.useEffect(()=>{let Q=!0;return t&&(async()=>{var nt;try{const Tn=l||((nt=Gt.currentUser)==null?void 0:nt.uid),Wn=await Qa.hasMasterPin(Tn);Q&&L(Wn)}catch{}})(),()=>{Q=!1}},[l,t]);const Le=async Q=>{var nt;Q.preventDefault(),I(""),R(!0);const et=l||((nt=Gt.currentUser)==null?void 0:nt.uid);try{if(le==="verify"){if(!u){I("    "),R(!1);return}if(!await Qa.verifyMasterPin(u,et)){I("   "),R(!1);return}N({title:" ",description:"     "}),n==null||n(),Pe()}else if(le==="create"){if(!f||f.length<4){I("      4   "),R(!1);return}if(f!==_){I("     "),R(!1);return}if(!await Qa.createMasterPin(f,et)){I("    "),R(!1);return}N({title:"    ",description:"     "}),n==null||n(),Pe()}else if(le==="change"){if(!et){I("        .         ."),R(!1);return}if(C&&!D&&!W){if(!u){I("        "),R(!1);return}if(!await Qa.verifyMasterPin(u,et)){I("    "),R(!1);return}}if(!f||f.length<4){I("      4   "),R(!1);return}if(f!==_){I("     "),R(!1);return}if(!(C?D&&Ae||W?await Qa.createMasterPin(f,et):await Qa.changeMasterPin(u,f,et):await Qa.createMasterPin(f,et))){I("    "),R(!1);return}N({title:C?D&&Ae||W?"     ":"    ":"    ",description:C?D&&Ae||W?"      ":"     ":"     "}),n==null||n(),Pe()}}catch{I("     ")}finally{R(!1)}},Pe=()=>{h(""),m(""),g(""),I(""),E(!1),S(!1),x(!1),K(!1),Fe(!1),X(!1),fe(i),e(!1)};return p.jsx(Pl,{open:t,onOpenChange:Pe,children:p.jsxs(pa,{className:vn("sm:max-w-md bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",o),dir:"rtl",overlayClassName:a,children:[p.jsx(ga,{children:p.jsxs(ya,{className:"flex items-center gap-2 text-center justify-center text-gray-900 dark:text-gray-100",children:[p.jsx(OE,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),r]})}),p.jsx("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 mb-4",children:s}),p.jsxs("form",{ref:ie,onSubmit:Le,className:"space-y-4",children:[(le==="verify"||le==="change"&&C)&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ps,{htmlFor:"currentPin",className:"text-right block text-gray-700 dark:text-gray-300",children:le==="verify"?"  ":"  "}),p.jsxs("div",{className:"relative",children:[p.jsx(nr,{id:"currentPin",type:b?"text":"password",autoComplete:"off",value:u,onChange:Q=>h(Q.target.value),onKeyDown:Q=>{var et;if(Q.key==="Enter")try{(et=ie.current)==null||et.requestSubmit()}catch{}},placeholder:le==="verify"?"   ":"   ",className:"pr-10 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100",dir:"ltr",inputMode:"numeric",autoFocus:!0,disabled:le==="change"&&W}),p.jsx(xt,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 dark:text-gray-400",onClick:()=>E(!b),children:b?p.jsx(dh,{className:"h-4 w-4"}):p.jsx(hh,{className:"h-4 w-4"})})]}),le==="verify"&&p.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 flex items-center justify-between",children:[p.jsx("span",{children:"   "}),p.jsx(xt,{type:"button",variant:"link",size:"sm",className:"h-auto p-0 text-blue-600 dark:text-blue-400 hover:no-underline",onClick:()=>Fe(!0),children:" "})]}),le==="change"&&C&&Ae&&p.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 flex items-center justify-between",children:[p.jsx("span",{children:"  "}),p.jsx(xt,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 dark:border-gray-700 dark:text-gray-300",onClick:()=>{X(Q=>!Q)},children:D?"   ":"    "})]}),le==="change"&&C&&p.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 flex items-center justify-between",children:[p.jsx("span",{children:"       "}),p.jsx(xt,{type:"button",variant:"secondary",size:"sm",className:"h-7 px-2 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",onClick:()=>Fe(!0),children:"  "})]}),le==="change"&&W&&p.jsx("div",{className:"text-[11px] text-green-600 dark:text-green-400",children:"          "})]}),(le==="create"||le==="change")&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ps,{htmlFor:"newPin",className:"text-right block text-gray-700 dark:text-gray-300",children:le==="create"?"   ":"  "}),p.jsxs("div",{className:"relative",children:[p.jsx(nr,{id:"newPin",type:w?"text":"password",autoComplete:"off",value:f,onChange:Q=>m(Q.target.value),onKeyDown:Q=>{var et;if(Q.key==="Enter")try{(et=ie.current)==null||et.requestSubmit()}catch{}},placeholder:"   ",className:"pr-10 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100",dir:"ltr",inputMode:"numeric"}),p.jsx(xt,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 dark:text-gray-400",onClick:()=>S(!w),children:w?p.jsx(dh,{className:"h-4 w-4"}):p.jsx(hh,{className:"h-4 w-4"})})]})]}),(le==="create"||le==="change")&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ps,{htmlFor:"confirmPin",className:"text-right block text-gray-700 dark:text-gray-300",children:"   "}),p.jsxs("div",{className:"relative",children:[p.jsx(nr,{id:"confirmPin",type:P?"text":"password",autoComplete:"off",value:_,onChange:Q=>g(Q.target.value),onKeyDown:Q=>{var et;if(Q.key==="Enter")try{(et=ie.current)==null||et.requestSubmit()}catch{}},placeholder:"    ",className:"pr-10 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100",dir:"ltr",inputMode:"numeric"}),p.jsx(xt,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 dark:text-gray-400",onClick:()=>x(!P),children:P?p.jsx(dh,{className:"h-4 w-4"}):p.jsx(hh,{className:"h-4 w-4"})})]})]}),O&&p.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/30 p-3 rounded-lg border border-red-100 dark:border-red-900/50",children:[p.jsx($4,{className:"h-4 w-4"}),O]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx(xt,{type:"button",variant:"outline",onClick:Pe,className:"flex-1 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",children:""}),p.jsx(xt,{type:"submit",disabled:A,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:A?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):p.jsxs(p.Fragment,{children:[p.jsx(ay,{className:"h-4 w-4 mr-2"}),le==="verify"?"":le==="create"?"":""]})})]})]}),p.jsx(lV,{open:ke,onOpenChange:Fe,title:"   ",description:"         ",onSuccess:()=>{K(!0),Fe(!1),I(""),le==="verify"&&fe("change")}})]})})},qee=Object.freeze(Object.defineProperty({__proto__:null,MasterPinDialog:A0,default:A0},Symbol.toStringTag,{value:"Module"})),uZ={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},cV=v.createContext(void 0);function Ds(){const t=v.useContext(cV);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Sc=2,dZ=1e3*60*60*24,hZ=({children:t})=>{const[e,n]=v.useState(null),[r,s]=v.useState(null),[i,o]=v.useState(null),[a,l]=v.useState(null),[c,u]=v.useState(!1),[h,f]=v.useState(!0),m=v.useRef(null),_=v.useRef(null),[g,b]=v.useState(!1),[E,w]=v.useState(Sc),[S,P]=v.useState([]),[x,O]=v.useState(!1),[I,A]=v.useState(null),[R,N]=v.useState(!1),[C,L]=v.useState(!1),{toast:D}=Jl(),X=()=>{try{const Y="device_id",ce=localStorage.getItem(Y);if(ce&&ce.length>0)return ce;const ye=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`dev-${Math.random().toString(36).slice(2)}-${Date.now()}`;return localStorage.setItem(Y,ye),ye}catch{return"unknown-device"}},Ae=()=>{try{const Y=typeof window<"u"?window:null,ce=typeof navigator<"u"&&navigator.userAgent||"",ye=typeof navigator<"u"&&navigator.platform||"",Ke=ce.toLowerCase(),ue=ye.toLowerCase();return Y&&Y.electronAPI?Ke.includes("windows")?{deviceName:"  - ",deviceType:"desktop"}:Ke.includes("mac")?{deviceName:"  - ",deviceType:"desktop"}:Ke.includes("linux")?{deviceName:"  - ",deviceType:"desktop"}:{deviceName:"  ",deviceType:"desktop"}:/android/i.test(ce)?{deviceName:" ",deviceType:"mobile-web"}:/iphone|ipad|ipod/i.test(ce)?{deviceName:" iOS",deviceType:"mobile-web"}:/mobile/i.test(ce)?{deviceName:" ",deviceType:"mobile-web"}:ue.includes("win")?{deviceName:"   - ",deviceType:"web"}:ue.includes("mac")?{deviceName:"   - ",deviceType:"web"}:ue.includes("linux")?{deviceName:"   - ",deviceType:"web"}:{deviceName:"  ",deviceType:"web"}}catch{return{deviceName:"  ",deviceType:"unknown"}}},ke=Y=>{const ce=String(Y||"").toLowerCase();return ce==="desktop"?"  ":ce==="web"?"  ":ce==="mobile-web"?" ":ce==="android"?" ":" "},Fe=async()=>{if(!(e!=null&&e.uid)){P([]);return}O(!0);try{const Y=xe(B,"userSessions"),ce=Xe(Y,$e("userId","==",e.uid)),ye=await Je(ce),Ke=Date.now(),ue=1e3*60*60*24,Ie=ye.docs.map(Me=>{const Ge=Me.data(),z=Ge.forcedLogout===!0;let be,Ne;try{const pe=Ge.createdAt;be=pe&&typeof pe.toDate=="function"?pe.toDate():pe?new Date(pe):void 0}catch{be=void 0}try{const pe=Ge.lastSeen;Ne=pe&&typeof pe.toDate=="function"?pe.toDate():pe?new Date(pe):be}catch{Ne=be}return{id:Me.id,deviceId:String(Ge.deviceId||""),deviceName:Ge.deviceName?String(Ge.deviceName):void 0,deviceType:Ge.deviceType?String(Ge.deviceType):void 0,createdAt:be,lastSeen:Ne,forcedLogout:z}}).filter(Me=>{if(Me.forcedLogout||!Me.lastSeen)return!1;const Ge=Me.lastSeen.getTime();return!Ge||isNaN(Ge)?!1:Ke-Ge<ue}).sort((Me,Ge)=>{const z=Date.now();let be=Me.lastSeen instanceof Date?Me.lastSeen.getTime():0,Ne=Ge.lastSeen instanceof Date?Ge.lastSeen.getTime():0;be>z+6e4&&(be=z),Ne>z+6e4&&(Ne=z);const pe=Ne-be;return pe!==0?pe:Me.deviceId===currentDeviceId?-1:Ge.deviceId===currentDeviceId?1:0});P(Ie)}catch{P([])}finally{O(!1)}},W=async Y=>{try{const ce=X(),ye=Ae(),Ke=xe(B,"userSessions"),ue=Xe(Ke,$e("userId","==",Y),$e("deviceId","==",ce)),Ie=await Je(ue);if(!Ie.empty){const Me=Ie.docs[0].ref;await gn(Me,{lastSeen:Be(),deviceName:ye.deviceName,deviceType:ye.deviceType});return}await vs(Ke,{userId:Y,deviceId:ce,deviceName:ye.deviceName,deviceType:ye.deviceType,createdAt:Be(),lastSeen:Be()})}catch(ce){console.error("session registration error:",ce)}},K=async Y=>{try{const ce=X(),ye=xe(B,"userSessions"),Ke=Xe(ye,$e("userId","==",Y),$e("deviceId","==",ce)),Ie=(await Je(Ke)).docs.map(Me=>Yt(Me.ref));Ie.length>0&&await Promise.all(Ie)}catch(ce){console.error("session clear error:",ce)}},ie=(Y,ce)=>{if(ce===!0)return null;const Ke=typeof Y=="number"?Y:parseInt(String(Y??""),10);return!isNaN(Ke)&&Ke>0?Ke:Sc},le=async Y=>{try{const ce=Se(B,"users",Y),ye=await on(ce);if(!ye.exists())return w(Sc),Sc;const Ke=ye.data(),ue=ie(Ke.sessionLimit,Ke.sessionLimitDisabled);return w(ue),ue}catch(ce){return console.error("session limit load error:",ce),w(Sc),Sc}},fe=(Y,ce)=>{try{const ye=X(),Ke=xe(B,"userSessions"),ue=Xe(Ke,$e("userId","==",Y));if(_.current)try{_.current()}catch{}_.current=ka(ue,Ie=>{try{const Me=Ie.docs.map(We=>{const re=We.data();let Ye,It;try{const kt=re.createdAt;Ye=kt&&typeof kt.toDate=="function"?kt.toDate():new Date(kt||Date.now())}catch{Ye=new Date}try{const kt=re.lastSeen;It=kt&&typeof kt.toDate=="function"?kt.toDate():new Date(kt||Ye)}catch{It=Ye}return{id:We.id,deviceId:String(re.deviceId||""),createdAt:Ye,lastSeen:It,forcedLogout:re.forcedLogout===!0}});Me.sort((We,re)=>{const Ye=Date.now();let It=We.lastSeen instanceof Date?We.lastSeen.getTime():0,kt=re.lastSeen instanceof Date?re.lastSeen.getTime():0;It>Ye+6e4&&(It=Ye),kt>Ye+6e4&&(kt=Ye);const On=kt-It;return On!==0?On:We.deviceId===ye?-1:re.deviceId===ye?1:0});const Ge=Date.now(),z=Me.filter(We=>{const re=We.lastSeen instanceof Date?We.lastSeen:We.createdAt;return!(re instanceof Date)||isNaN(re.getTime())||We.forcedLogout?!1:Ge-re.getTime()<dZ}),be=Me.filter(We=>!z.some(re=>re.id===We.id));if(be.length>0&&be.forEach(We=>{try{Yt(Se(B,"userSessions",We.id))}catch{}}),Me.some(We=>We.deviceId===ye&&We.forcedLogout)){b(!0);try{Tn()}catch{}return}if(ce==null||ce<=0){b(!1);return}const pe=[...z].sort((We,re)=>{const Ye=We.createdAt instanceof Date?We.createdAt.getTime():0,It=re.createdAt instanceof Date?re.createdAt.getTime():0;return Ye-It}),st=pe.slice(0,ce).some(We=>We.deviceId===ye);pe.length>ce?b(!st):b(!1)}catch(Me){console.error("sessions listener error:",Me),b(!1)}},Ie=>{console.error("sessions listener subscribe error:",Ie),b(!1)})}catch(ye){console.error("attachSessionsListener error:",ye),b(!1)}};v.useEffect(()=>{const Y=()=>{console.log(" Received userSubscriptionUpdated event - Refreshing profile..."),e&&(Le(e.uid,!0),an(!0))};return window.addEventListener("userSubscriptionUpdated",Y),()=>{window.removeEventListener("userSubscriptionUpdated",Y)}},[e]),v.useEffect(()=>{let Y=null;if(e){const ce=Se(B,"users",e.uid);Y=ka(ce,ye=>{if(ye.exists()){const Ke=ye.data();o(Ke);const ue=ie(Ke.sessionLimit,Ke.sessionLimitDisabled);w(Ie=>Ie!==ue?(fe(e.uid,ue),ue):Ie)}else o(null)},ye=>{console.error("Error listening to user data:",ye)})}else o(null);return()=>{Y&&Y()}},[e]);const Le=async(Y,ce=!1)=>{var ye,Ke,ue,Ie,Me,Ge,z,be;try{const Ne=Se(B,"profiles",Y),pe=`profile_cache_v2_${Y}`,Qe=Date.now(),st=1e3*60*60*24;if(!ce)try{const re=localStorage.getItem(pe);if(re){const{data:Ye,timestamp:It}=JSON.parse(re);if(Qe-It<st&&(s(Ye),f(!1),console.log(" Profile loaded from cache (valid)"),!(Qe-It>1e3*60*60)))return}}catch(re){console.warn("Cache parse error:",re)}const We=await on(Ne);if(We.exists()){const re=We.data(),Ye={userId:We.id,shopId:re.shopId,role:re.role,fullName:re.fullName,phone:re.phone,sim1Number:re.sim1Number||null,sim2Number:re.sim2Number||null,shopName:re.shopName||null,approved:re.approved,avatarId:re.avatarId,bridgeLink:re.bridgeLink||null,bridgeDeviceId:re.bridgeDeviceId||null,showWithdrawNote:re.showWithdrawNote!==void 0?!!re.showWithdrawNote:!0,isReceiptNoteEnabled:re.isReceiptNoteEnabled!==void 0?!!re.isReceiptNoteEnabled:!0,smsReadingEnabled:re.smsReadingEnabled!==void 0?!!re.smsReadingEnabled:!1,smsAutoRegisterEnabled:re.smsAutoRegisterEnabled!==void 0?!!re.smsAutoRegisterEnabled:!1,createdAt:((Ke=(ye=re.createdAt)==null?void 0:ye.toDate)==null?void 0:Ke.call(ye))||new Date,updatedAt:((Ie=(ue=re.updatedAt)==null?void 0:ue.toDate)==null?void 0:Ie.call(ue))||new Date,trialStarted:re.trialStarted||!1,trialStartDate:(Ge=(Me=re.trialStartDate)==null?void 0:Me.toDate)==null?void 0:Ge.call(Me),trialEndDate:(be=(z=re.trialEndDate)==null?void 0:z.toDate)==null?void 0:be.call(z),trialExpired:re.trialExpired||!1,referralCode:re.referralCode||null,referredBy:re.referredBy||null};s(Ye);try{localStorage.setItem(pe,JSON.stringify({data:Ye,timestamp:Qe})),Ye.shopId&&localStorage.setItem("shopId",Ye.shopId)}catch{}}else try{const re=await SM.getByUserId(Y);if(re){const Ye={userId:Y,shopId:re.shopId,role:re.role||"user",fullName:re.fullName||null,phone:re.phone||null,shopName:re.shopName||null,approved:re.approved??!1,avatarId:re.avatarId||void 0,bridgeLink:re.bridgeLink||null,bridgeDeviceId:re.bridgeDeviceId||null,createdAt:Be(),updatedAt:Be()};await ln(Se(B,"profiles",Y),Ye,{merge:!0}),s({...re,userId:Y})}else await Q(Y)}catch(re){console.error("Profile migration error:",re)}f(!1)}catch(Ne){console.error("Error fetching profile:",Ne),f(!1)}},Pe=async Y=>{try{const ce=Se(B,"users",Y.uid);(await on(ce)).exists()?(await gn(ce,{lastLogin:Be(),updatedAt:Be()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",Y.uid)):(await ln(ce,{email:Y.email||"",displayName:Y.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Be(),updatedAt:Be(),lastLogin:Be()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",Y.uid))}catch(ce){console.error(" ensureAdminUserDoc error:",ce)}},Q=async(Y,ce,ye,Ke,ue)=>{var Ie,Me;try{console.log("Creating default profile for user:",Y);const Ge=I0.generateReferralCode(Y);let z=null;const be={userId:Y,shopId:"default-shop",role:"user",fullName:ce||" ",phone:ye||null,shopName:Ke||null,approved:!1,referralCode:Ge,referredBy:ue||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(be),console.log("Created temporary profile:",be);try{const{doc:Ne,setDoc:pe,serverTimestamp:Qe}=await ae(async()=>{const{doc:Ye,setDoc:It,serverTimestamp:kt}=await Promise.resolve().then(()=>cr);return{doc:Ye,setDoc:It,serverTimestamp:kt}},void 0,import.meta.url),{db:st}=await ae(async()=>{const{db:Ye}=await Promise.resolve().then(()=>An);return{db:Ye}},void 0,import.meta.url),We={email:((Ie=Gt.currentUser)==null?void 0:Ie.email)||"",displayName:ce||" ",phone:ye||null,shopName:Ke||null,isActive:!1,referralCode:Ge,referredBy:ue||null,createdAt:Qe(),lastLogin:null,updatedAt:Qe()};if(console.log("Attempting to add user to admin collection with data:",We),await pe(Ne(st,"users",Y),We,{merge:!0}),console.log(" User successfully added to admin collection:",We),ue)try{const{query:Ye,collection:It,where:kt,limit:On,getDocs:Ir}=await ae(async()=>{const{query:F,collection:Z,where:G,limit:J,getDocs:ne}=await Promise.resolve().then(()=>cr);return{query:F,collection:Z,where:G,limit:J,getDocs:ne}},void 0,import.meta.url),{db:Ln}=await ae(async()=>{const{db:F}=await Promise.resolve().then(()=>An);return{db:F}},void 0,import.meta.url),q=Ye(It(Ln,"users"),kt("referralCode","==",ue),On(1)),U=await Ir(q);U.empty?console.log(" Referral code not found in users collection:",ue):(z=U.docs[0].id,await I0.create({referrerId:z,referredUserId:Y,referredUserEmail:((Me=Gt.currentUser)==null?void 0:Me.email)||"",referralCode:ue,status:"completed"}),console.log(" Referral record created successfully for referrer:",z))}catch(Ye){console.error(" Error creating referral record:",Ye)}const re=await on(Ne(st,"users",Y));re.exists()?console.log(" User document verified in Firestore:",re.data()):console.log(" User document not found after creation")}catch(Ne){console.error(" Error adding user to admin collection:",Ne)}try{const{addDoc:Ne,collection:pe,serverTimestamp:Qe}=await ae(async()=>{const{addDoc:It,collection:kt,serverTimestamp:On}=await Promise.resolve().then(()=>cr);return{addDoc:It,collection:kt,serverTimestamp:On}},void 0,import.meta.url),{db:st}=await ae(async()=>{const{db:It}=await Promise.resolve().then(()=>An);return{db:It}},void 0,import.meta.url),re=(await Ne(pe(st,"shops"),{name:Ke||" ",ownerId:Y,createdAt:Qe(),updatedAt:Qe(),isActive:!0})).id;await vp.create({userId:Y,shopId:re,role:"user",fullName:" ",phone:null});try{await vp.update(Y,{referralCode:Ge,referredBy:z||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(It){console.warn(" Failed to update profile with referral fields:",It)}const Ye=await vp.getById(Y);Ye&&(s(Ye),console.log("Updated with Firebase profile:",Ye))}catch(Ne){console.error("Error creating profile:",Ne),console.log("Using local profile - Firebase unavailable")}}catch(Ge){console.error("Error creating default profile:",Ge)}};v.useEffect(()=>{console.log(" Setting up auth state listener"),f(!0);const Y=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),f(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const ce=localStorage.getItem("demoUser"),ye=localStorage.getItem("demoProfile");if(ce&&ye){console.log(" Found demo user in localStorage");try{const ue=JSON.parse(ce),Ie=JSON.parse(ye);n(ue),s(Ie),clearTimeout(Y),f(!1);return}catch(ue){console.error("Error parsing demo user data:",ue),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const Ke=E8(Gt,async ue=>{if(console.log(" Auth state changed:",{uid:ue==null?void 0:ue.uid,email:ue==null?void 0:ue.email,emailVerified:ue==null?void 0:ue.emailVerified,timestamp:new Date().toISOString()}),n(ue),ue){console.log(" User authenticated, starting profile hydration for:",ue.uid);try{const Ie=await le(ue.uid);await W(ue.uid),fe(ue.uid,Ie)}catch(Ie){console.error("session registration on auth change error:",Ie)}try{await ll.set({key:"current_user_id",value:ue.uid}),console.log(" Synced current_user_id to Native:",ue.uid)}catch(Ie){console.error("Failed to sync user ID to native:",Ie)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}Le(ue.uid),an(),Pe(ue)}else{if(console.log(" User not authenticated, clearing profile"),s(null),l(null),u(!1),b(!1),_.current){try{_.current()}catch{}_.current=null}f(!1);try{await ll.remove({key:"current_user_id"}),await ll.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(Y)});return()=>{clearTimeout(Y),Ke()}},[]),v.useEffect(()=>{const Y=async()=>{try{await Qn(),await an(!0)}catch{}};try{window.addEventListener("app:softRefresh",Y)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",Y)}catch{}}},[e==null?void 0:e.uid]),v.useEffect(()=>{const Y=()=>{try{an(!0)}catch{}};try{window.addEventListener("userSubscriptionUpdated",Y),window.addEventListener("subscriptionActivated",Y)}catch{}return()=>{try{window.removeEventListener("userSubscriptionUpdated",Y),window.removeEventListener("subscriptionActivated",Y)}catch{}}},[e==null?void 0:e.uid]),v.useEffect(()=>{e!=null&&e.uid&&_r.syncDeletedTransactionsLocal(e.uid)},[e==null?void 0:e.uid]);const et=async(Y,ce,ye,Ke,ue,Ie)=>{try{const Me=(Y||"").trim().toLowerCase(),Ge=(ce||"").trim();console.log(" Attempting to sign up user:",Me);const z=await Ux(Gt,Me,Ge);console.log(" Sign up successful:",z.user.uid),await Q(z.user.uid,ye,Ke,ue,Ie),await Pe(z.user);try{await Le(z.user.uid),await an()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(Me){console.error(" Sign up error:",Me);let Ge="    ";return Me.code==="auth/email-already-in-use"?Ge="    ":Me.code==="auth/weak-password"?Ge="   ":Me.code==="auth/invalid-email"&&(Ge="   "),{error:{...Me,message:Ge}}}},nt=async(Y,ce)=>{var ue;const ye=(Y||"").trim().toLowerCase(),Ke=(ce||"").trim();try{const Ie=Qe=>Qe.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),Me=Qe=>Qe.replace(/[-]/g,st=>String("0123456789"["".indexOf(st)])).replace(/[-]/g,st=>String("0123456789"["".indexOf(st)])),Ge=Qe=>Qe.replace(/[0-9]/g,st=>""[Number(st)]),z=Qe=>Me(Ie(Qe));if(console.log(" Attempting to sign in user:",ye),ye==="test@example.com"&&Ke==="123456"){console.log(" Demo user login detected");const Qe={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},st={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(Qe)),localStorage.setItem("demoProfile",JSON.stringify(st)),n(Qe),s(st),f(!1),console.log(" Demo user signed in successfully"),{error:null}}let be;const Ne=[z(Ke),Ie(Ke),Ge(Ie(Ke))];let pe=null;for(const Qe of Ne)try{Qe!==Ke&&console.log(" Trying password variant"),be=await m8(Gt,ye,Qe);break}catch(st){if(pe=st,(st==null?void 0:st.code)!=="auth/wrong-password"&&(st==null?void 0:st.code)!=="auth/invalid-credential")throw st}if(!be)throw pe||new Error("auth/invalid-credential");console.log(" Sign in successful:",be.user.uid);try{if((await on(Se(B,"deletedUsers",be.user.uid))).exists())return console.log(" User is deleted, signing out"),await $x(Gt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(Qe){console.error("Error checking deleted users:",Qe)}await Pe(be.user);try{await Le(be.user.uid),await an()}catch{}return{error:null}}catch(Ie){if(console.error(" Sign in error:",Ie),ye==="test@example.com"&&Ie.code==="auth/user-not-found"){console.log(" Creating test user...");try{const z=await Ux(Gt,ye,Ke);return console.log(" Test user created:",z.user.uid),await Q(z.user.uid," ","01000000000"," "),{error:null}}catch(z){return console.error(" Error creating test user:",z),{error:z}}}let Me="    ",Ge=Ie==null?void 0:Ie.code;if(Ge==="auth/invalid-credential")try{const z=await g8(Gt,((ue=Ie==null?void 0:Ie.customData)==null?void 0:ue.email)||"");Array.isArray(z)&&z.length===0?(Ge="auth/user-not-found",Me="     "):(Ge="auth/wrong-password",Me="   ")}catch{Me="      "}else Ge==="auth/invalid-email"?Me="    ":Ge==="auth/user-not-found"?Me="     ":Ge==="auth/wrong-password"?Me="   ":Ge==="auth/too-many-requests"&&(Me="      ");return{error:{...Ie,code:Ge,message:Me}}}},Tn=async()=>{try{const Y=e==null?void 0:e.uid;if(localStorage.getItem("demoUser"))console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),f(!1);else{if(Y)try{await K(Y)}catch(ue){console.error("session clear on sign out error:",ue)}await $x(Gt)}Y&&(localStorage.removeItem(`sub_cache_${Y}`),localStorage.removeItem(`profile_cache_v2_${Y}`),console.log(" Cleared user caches for:",Y));try{await ll.remove({key:"selected_wallet_id"}),await ll.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(ue){console.error(" Failed to clear Preferences:",ue)}const Ke=(()=>{try{const ue=typeof window<"u"?window:null,Ie=!!(ue&&ue.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),Me=typeof window<"u"&&window.location.protocol==="file:",Ge=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return Ie||Me||Ge||typeof import.meta<"u"&&uZ&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(Ke)}catch{window.location.href=Ke}}catch(Y){console.error("Sign out error:",Y)}},Wn=async Y=>{try{return await f8(Gt,Y),{error:null}}catch(ce){console.error("Reset password error:",ce);let ye="        ";return ce.code==="auth/user-not-found"?ye="     ":ce.code==="auth/invalid-email"&&(ye="   "),{error:{...ce,message:ye}}}},an=async(Y=!1)=>{var ue,Ie,Me,Ge,z,be,Ne,pe,Qe,st,We,re,Ye,It,kt,On,Ir,Ln,q,U,F;if(!e){console.log("No user found for subscription check"),l(null),u(!1);return}m.current&&(m.current(),m.current=null),console.log("Checking subscription status for user:",e.uid,{force:Y});const ce=`sub_cache_${e.uid}`,ye=Date.now(),Ke=1e3*60*60*24;if(!Y)try{const Z=localStorage.getItem(ce);if(Z){const{data:G,timestamp:J}=JSON.parse(Z);if(ye-J<Ke){const ne={...G,subscription:G.subscription?{...G.subscription,activatedAt:G.subscription.activatedAt?{toDate:()=>new Date(G.subscription.activatedAt)}:null,endDate:G.subscription.endDate?{toDate:()=>new Date(G.subscription.endDate)}:null}:null,branchPackage:G.branchPackage?{...G.branchPackage,activatedAt:G.branchPackage.activatedAt?{toDate:()=>new Date(G.branchPackage.activatedAt)}:null,endDate:G.branchPackage.endDate?{toDate:()=>new Date(G.branchPackage.endDate)}:null}:null,freeTrialStartDate:G.freeTrialStartDate?{toDate:()=>new Date(G.freeTrialStartDate)}:null,freeTrialEndDate:G.freeTrialEndDate?{toDate:()=>new Date(G.freeTrialEndDate)}:null};l(ne);const De=((ue=G==null?void 0:G.branchPackage)==null?void 0:ue.status)==="active";let oe=!1;if(De)oe=!0;else{const de=ne.subscription;oe=DP(de)}u(oe),console.log(" Subscription loaded from cache (Client-side validity check applied)");return}}}catch(Z){console.warn("Subscription Cache parse error:",Z)}try{const Z=Se(B,"users",e.uid),G=await on(Z);if(G.exists()){const J=G.data();l(J);try{const de={...J,subscription:J.subscription?{...J.subscription,activatedAt:((Ge=(Me=(Ie=J.subscription.activatedAt)==null?void 0:Ie.toDate)==null?void 0:Me.call(Ie))==null?void 0:Ge.toISOString())||J.subscription.activatedAt,endDate:((Ne=(be=(z=J.subscription.endDate)==null?void 0:z.toDate)==null?void 0:be.call(z))==null?void 0:Ne.toISOString())||J.subscription.endDate}:null,branchPackage:J.branchPackage?{...J.branchPackage,activatedAt:((st=(Qe=(pe=J.branchPackage.activatedAt)==null?void 0:pe.toDate)==null?void 0:Qe.call(pe))==null?void 0:st.toISOString())||J.branchPackage.activatedAt,endDate:((Ye=(re=(We=J.branchPackage.endDate)==null?void 0:We.toDate)==null?void 0:re.call(We))==null?void 0:Ye.toISOString())||J.branchPackage.endDate}:null,freeTrialStartDate:((On=(kt=(It=J.freeTrialStartDate)==null?void 0:It.toDate)==null?void 0:kt.call(It))==null?void 0:On.toISOString())||J.freeTrialStartDate,freeTrialEndDate:((q=(Ln=(Ir=J.freeTrialEndDate)==null?void 0:Ir.toDate)==null?void 0:Ln.call(Ir))==null?void 0:q.toISOString())||J.freeTrialEndDate};localStorage.setItem(ce,JSON.stringify({data:de,timestamp:ye}))}catch{}console.log(" Subscription Data Details (Fetched):",{userId:e.uid,isActive:(U=J.subscription)==null?void 0:U.isActive});const ne=((F=J==null?void 0:J.branchPackage)==null?void 0:F.status)==="active";let De=!1;if(ne){const de=J.branchPackage;let he=!1;if(de.endDate){const ge=de.endDate.toDate?de.endDate.toDate():new Date(de.endDate);!isNaN(ge.getTime())&&new Date>ge&&(he=!0,CJ(e.uid,de).catch(console.error))}De=!he}const oe=De||DP(J.subscription);u(oe)}}catch(Z){console.error("Error checking subscription status:",Z)}},Qn=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await Le(e.uid,!0),await an(!0)}catch(Y){console.error("Error refreshing profile:",Y)}},qr={user:e,profile:r,userData:i,userSubscription:a,isSubscriptionActive:c,loading:h,signUp:et,signIn:nt,signOut:Tn,resetPassword:Wn,updateUserProfile:async Y=>{if(e)try{const ce={updatedAt:Be()};if(Y.fullName!==void 0&&(ce.fullName=Y.fullName),Y.phone!==void 0&&(ce.phone=Y.phone),Y.sim1Number!==void 0){const ye=(Y.sim1Number||"").trim();ce.sim1Number=ye.length?ye:null}if(Y.sim2Number!==void 0){const ye=(Y.sim2Number||"").trim();ce.sim2Number=ye.length?ye:null}if(Y.bridgeLink!==void 0){const ye=(Y.bridgeLink||"").trim();ce.bridgeLink=ye.length?ye:null}if(Y.bridgeDeviceId!==void 0){const ye=(Y.bridgeDeviceId||"").trim();ce.bridgeDeviceId=ye.length?ye:null}Y.showWithdrawNote!==void 0&&(ce.showWithdrawNote=!!Y.showWithdrawNote),Y.isReceiptNoteEnabled!==void 0&&(ce.isReceiptNoteEnabled=!!Y.isReceiptNoteEnabled),Y.smsReadingEnabled!==void 0&&(ce.smsReadingEnabled=!!Y.smsReadingEnabled),Y.smsAutoRegisterEnabled!==void 0&&(ce.smsAutoRegisterEnabled=!!Y.smsAutoRegisterEnabled),await gn(Se(B,"profiles",e.uid),ce),await Le(e.uid,!0)}catch(ce){console.error("Error updating user profile:",ce)}},updateAvatarId:async Y=>{if(e)try{await gn(Se(B,"profiles",e.uid),{avatarId:Y,updatedAt:Be()}),await Le(e.uid)}catch(ce){console.error("Error updating avatarId:",ce)}},refreshProfile:Qn,checkSubscriptionStatus:an,isSessionBlocked:g};return p.jsxs(cV.Provider,{value:qr,children:[t,g&&p.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 p-4",children:[p.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h2",{className:"mb-3 text-lg font-semibold text-gray-900",children:"   "}),p.jsx("p",{className:"mb-1 text-sm text-gray-700",children:"       ."}),p.jsx("p",{className:"mb-1 text-sm text-gray-700",children:"          ."}),p.jsx("p",{className:"text-sm text-gray-700",children:"                   ."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(xt,{onClick:()=>{L(!C),C||Fe()},variant:"outline",className:"w-full",children:C?"  ":"  "}),C&&p.jsxs("div",{className:"space-y-3 mt-4",children:[x&&p.jsx("p",{className:"text-center text-sm text-gray-500",children:" ..."}),!x&&S.length===0&&p.jsx("p",{className:"text-center text-sm text-gray-500",children:"   "}),!x&&S.map(Y=>{const ce=Y.deviceId&&Y.deviceId===X(),ye=ke(Y.deviceType);return p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border p-3 text-right",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-gray-900",children:Y.deviceName||"  "}),ce&&p.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:" "})]}),p.jsxs("div",{className:"text-xs text-gray-500",children:[ye,Y.lastSeen&&`  ${NJ(Y.lastSeen)}`]}),!ce&&p.jsx(xt,{size:"sm",variant:"destructive",className:"w-full mt-2 h-8 text-xs",onClick:()=>{A(Y.id),N(!0)},children:" "})]},Y.id)})]})]})]}),p.jsx(A0,{open:R,onOpenChange:Y=>{N(Y),Y||A(null)},mode:"verify",title:"   ",description:"         .",userId:e==null?void 0:e.uid,userRole:r==null?void 0:r.role,onSuccess:async()=>{if(I)try{await gn(Se(B,"userSessions",I),{forcedLogout:!0}),P(Y=>Y.filter(ce=>ce.id!==I)),D({title:"   ",description:"       ."})}catch{D({title:"   ",description:"     .",variant:"destructive"})}A(null),N(!1)}})]})]})};function fZ(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var rv="Checkbox",[mZ]=td(rv),[pZ,OS]=mZ(rv);function gZ(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:h}=t,[f,m]=PE({prop:n,defaultProp:s??!1,onChange:l,caller:rv}),[_,g]=v.useState(null),[b,E]=v.useState(null),w=v.useRef(!1),S=_?!!o||!!_.closest("form"):!0,P={checked:f,disabled:i,setChecked:m,control:_,setControl:g,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:c,defaultChecked:va(s)?!1:s,isFormControl:S,bubbleInput:b,setBubbleInput:E};return p.jsx(pZ,{scope:e,...P,children:yZ(h)?h(P):r})}var uV="CheckboxTrigger",dV=v.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:_}=OS(uV,t),g=Sr(s,u),b=v.useRef(l);return v.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const w=()=>h(b.current);return E.addEventListener("reset",w),()=>E.removeEventListener("reset",w)}},[i,h]),p.jsx(Nn.button,{type:"button",role:"checkbox","aria-checked":va(l)?"mixed":l,"aria-required":c,"data-state":gV(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:cn(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:cn(n,E=>{h(w=>va(w)?!0:!w),_&&m&&(f.current=E.isPropagationStopped(),f.current||E.stopPropagation())})})});dV.displayName=uV;var LS=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...h}=t;return p.jsx(gZ,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>p.jsxs(p.Fragment,{children:[p.jsx(dV,{...h,ref:e,__scopeCheckbox:n}),f&&p.jsx(pV,{__scopeCheckbox:n})]})})});LS.displayName=rv;var hV="CheckboxIndicator",fV=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=OS(hV,n);return p.jsx(Xl,{present:r||va(i.checked)||i.checked===!0,children:p.jsx(Nn.span,{"data-state":gV(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});fV.displayName=hV;var mV="CheckboxBubbleInput",pV=v.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:h,bubbleInput:f,setBubbleInput:m}=OS(mV,t),_=Sr(n,m),g=fZ(i),b=oN(r);v.useEffect(()=>{const w=f;if(!w)return;const S=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(S,"checked").set,O=!s.current;if(g!==i&&x){const I=new Event("click",{bubbles:O});w.indeterminate=va(i),x.call(w,va(i)?!1:i),w.dispatchEvent(I)}},[f,g,i,s]);const E=v.useRef(va(i)?!1:i);return p.jsx(Nn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:l,name:c,value:u,form:h,...e,tabIndex:-1,ref:_,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});pV.displayName=mV;function yZ(t){return typeof t=="function"}function va(t){return t==="indeterminate"}function gV(t){return va(t)?"indeterminate":t?"checked":"unchecked"}const yV=v.forwardRef(({className:t,...e},n)=>p.jsx(LS,{ref:n,className:vn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:p.jsx(fV,{className:vn("flex items-center justify-center text-current"),children:p.jsx(j4,{className:"h-4 w-4"})})}));yV.displayName=LS.displayName;const Mg=()=>{const[t,e]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[l,c]=v.useState(typeof navigator<"u"?!navigator.onLine:!1);v.useEffect(()=>{const P=()=>c(!navigator.onLine);return window.addEventListener("online",P),window.addEventListener("offline",P),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",P)}},[]);const[u,h]=v.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:_,loading:g}=Ds(),b=ec();v.useEffect(()=>{try{m&&!g&&b("/user/dashboard")}catch{}},[m,g,b]),v.useEffect(()=>{try{const P=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;P&&e(P)}catch{}try{const P=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;P==="true"?h(!0):P==="false"&&h(!1)}catch{}(async()=>{var P,x;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const O=await((x=(P=navigator.credentials).get)==null?void 0:x.call(P,{password:!0,mediation:"optional"}));O&&O.type==="password"&&(O.id&&e(O.id),O.password&&r(O.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const O=sessionStorage.getItem("cashy:rememberedPassword");O&&!n&&r(O)}catch{}}catch{}})()},[]);const E=async P=>{if(P.preventDefault(),o){Kt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Kt.error("   .      .");return}const x=(t||"").trim().toLowerCase(),O=(n||"").trim();if(console.log("    :",{email:x,password:"***"}),!t||!n){Kt.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(x)){Kt.error("    ");return}a(!0);try{try{await v8(Gt,u?cb:ub);try{window.localStorage.setItem("cashy:rememberLogin",u?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:I}=await f(x,O);if(console.log(" SignIn result:",{error:I}),I){console.error("    :",I);const A=I==null?void 0:I.code;A==="auth/user-not-found"?Kt.error("     "):A==="auth/wrong-password"?Kt.error("   "):A==="auth/invalid-credential"?Kt.error("      "):A==="auth/too-many-requests"?Kt.error("      "):Kt.error((I==null?void 0:I.message)||"    ")}else{console.log("    !"),Kt.success("   !");try{if(u&&navigator.credentials&&window.PasswordCredential){const A=new window.PasswordCredential({id:x,name:x,password:O});await navigator.credentials.store(A)}if(u)try{sessionStorage.setItem("cashy:rememberedPassword",O)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(I){console.error("   :",I),Kt.error("   ")}finally{a(!1)}},w=P=>{if(o){P.preventDefault(),P.stopPropagation(),Kt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){P.preventDefault(),P.stopPropagation(),Kt.error("   .      .");return}t||Kt.error("   "),n||Kt.error("   ");const x=(t||"").trim().toLowerCase();x&&!/^\S+@\S+\.\S+$/.test(x)&&Kt.error("    ")},S=()=>{b("/user/forgot-password")};return v.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const P=document.documentElement,x=document.body,O=P.style.overflow,I=x.style.overflow,A=P.style.overscrollBehaviorY,R=x.style.overscrollBehaviorY;return P.style.overflow="hidden",x.style.overflow="hidden",P.style.overscrollBehaviorY="none",x.style.overscrollBehaviorY="none",()=>{P.style.overflow=O||"",x.style.overflow=I||"",P.style.overscrollBehaviorY=A||"",x.style.overscrollBehaviorY=R||""}},[]),p.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&p.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:p.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),p.jsx("div",{className:"absolute inset-0 bg-black/40"}),p.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:p.jsx(R3,{className:"w-10 h-10 text-white"})}),p.jsx("div",{className:"flex items-center justify-center mb-2",children:p.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),p.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),p.jsx("p",{className:"text-white/80",children:"    "})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[p.jsxs("form",{onSubmit:E,className:"space-y-6",autoComplete:"on",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),p.jsxs("div",{className:"relative",children:[p.jsx(S_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),p.jsx(nr,{id:"username",type:"email",placeholder:"  ",value:t,onChange:P=>{const x=P.target.value;e(x);try{window.localStorage.setItem("cashy:lastEmail",x)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),p.jsxs("div",{className:"relative",children:[p.jsx(ay,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),p.jsx(nr,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:P=>r(P.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),p.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?p.jsx(dh,{className:"w-5 h-5"}):p.jsx(hh,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[p.jsx(yV,{id:"rememberLogin",checked:u,onCheckedChange:P=>h(!!P)}),p.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),p.jsx("div",{className:"flex justify-end",children:p.jsxs(xt,{type:"button",variant:"ghost",size:"sm",onClick:S,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[p.jsx(S_,{className:"w-4 h-4 ml-1"}),"  "]})}),p.jsx("button",{type:"submit",onClick:w,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?p.jsxs("div",{className:"flex items-center justify-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):p.jsxs("div",{className:"flex items-center justify-center",children:[p.jsx(Lk,{className:"w-5 h-5 ml-2"})," "]})})]}),p.jsxs("div",{className:"mt-6 text-center space-y-3",children:[p.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",p.jsx(M_,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),p.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",p.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",p.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},vZ=Object.freeze(Object.defineProperty({__proto__:null,default:Mg},Symbol.toStringTag,{value:"Module"})),MS=v.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:vn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));MS.displayName="Card";const VS=v.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:vn("flex flex-col space-y-1.5 p-6",t),...e}));VS.displayName="CardHeader";const FS=v.forwardRef(({className:t,...e},n)=>p.jsx("h3",{ref:n,className:vn("text-2xl font-semibold leading-none tracking-tight",t),...e}));FS.displayName="CardTitle";const vV=v.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:vn("text-sm text-muted-foreground",t),...e}));vV.displayName="CardDescription";const jS=v.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:vn("p-6 pt-0",t),...e}));jS.displayName="CardContent";const wZ=v.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:vn("flex items-center p-6 pt-0",t),...e}));wZ.displayName="CardFooter";function wV({open:t,onOpenChange:e,onSuccess:n}){const{user:r,userSubscription:s}=Ds(),[i,o]=v.useState("1"),[a,l]=v.useState("basic"),[c,u]=v.useState(!1),[h,f]=v.useState(null),m=async()=>{var _;if(r){u(!0),f(null);try{const g=((_=s==null?void 0:s.branchPackage)==null?void 0:_.limit)||0;await gn(Se(B,"users",r.uid),{branchPackage:{status:"pending",requested:!0,limit:g+parseInt(i),packageType:a,requestedAt:new Date().toISOString()}}),f("       ."),window.dispatchEvent(new CustomEvent("userSubscriptionUpdated",{detail:{userId:r.uid,isActive:!0}})),setTimeout(()=>{e(!1),n&&n()},1500)}catch(g){f("  : "+g.message)}finally{u(!1)}}};return p.jsx(Pl,{open:t,onOpenChange:e,children:p.jsxs(pa,{children:[p.jsx(ga,{children:p.jsx(ya,{children:" "})}),p.jsxs("div",{className:"grid gap-4 py-2",children:[p.jsxs("div",{className:"grid gap-2",children:[p.jsx(Ps,{children:"   "}),p.jsx(nr,{type:"number",min:"1",value:i,onChange:_=>o(_.target.value),placeholder:"   "})]}),p.jsxs("div",{className:"grid gap-2",children:[p.jsx(Ps,{children:" "}),p.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a,onChange:_=>l(_.target.value),children:[p.jsx("option",{value:"basic",children:"  ()"}),p.jsx("option",{value:"quarterly",children:"   (3 )"}),p.jsx("option",{value:"pro",children:"  ()"}),p.jsx("option",{value:"enterprise",children:"  ( )"})]})]}),h&&p.jsx("p",{className:`text-sm ${h.includes("")?"text-green-600":"text-red-600"}`,children:h})]}),p.jsxs(nv,{children:[p.jsx(xt,{variant:"outline",onClick:()=>e(!1),children:""}),p.jsx(xt,{onClick:m,disabled:c,className:"bg-black text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200",children:c?" ...":" "})]})]})})}const Hee=Object.freeze(Object.defineProperty({__proto__:null,BranchRequestDialog:wV},Symbol.toStringTag,{value:"Module"}));function QP(){var N,C,L,D;const{user:t,profile:e,isSubscriptionActive:n,userSubscription:r}=Ds(),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[l,c]=v.useState(""),[u,h]=v.useState(""),[f,m]=v.useState(""),[_,g]=v.useState(""),[b,E]=v.useState(!1),[w,S]=v.useState(null),[P,x]=v.useState(0),O=((N=r==null?void 0:r.branchPackage)==null?void 0:N.status)==="active",I=((C=r==null?void 0:r.branchPackage)==null?void 0:C.limit)||0;M.useEffect(()=>{t&&(async()=>{try{const Ae=Xe(xe(B,"shops"),$e("ownerId","==",t.uid)),ke=await WL(Ae);x(ke.data().count)}catch(Ae){console.error("Error fetching shops count:",Ae)}})()},[t]),(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="merchant"||n||O&&P<I;const A=()=>{c(""),h(""),m(""),g("")},R=async()=>{S(null);const X=l.trim(),Ae=u.trim(),ke=f.trim(),Fe=_;if(O&&P>=I&&(e==null?void 0:e.role)!=="admin"&&(e==null?void 0:e.role)!=="merchant"){S(`        (${I}).   .`);return}if(!X||!Ae||!ke||!Fe){S("    .");return}try{E(!0);const K=await nY(EM,"createShopAndManager")({shopName:X,managerName:Ae,email:ke,password:Fe,branchCode:null}),ie=K==null?void 0:K.data;ie!=null&&ie.success?(S(`   (${ie.shopId})   .`),A(),i(!1)):S("     .")}catch(W){const K=(W==null?void 0:W.message)||"     ";S(K)}finally{E(!1)}};return p.jsxs("div",{className:"container mx-auto p-4",children:[p.jsxs(MS,{children:[p.jsx(VS,{children:p.jsx(FS,{children:"  (CPanel)"})}),p.jsxs(jS,{children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{children:p.jsx("p",{className:"text-sm text-muted-foreground",children:"           ."})}),p.jsxs("div",{className:"flex gap-2",children:[!O&&((L=r==null?void 0:r.branchPackage)==null?void 0:L.status)!=="pending"&&p.jsx(xt,{onClick:()=>a(!0),variant:"outline",children:"  "}),((D=r==null?void 0:r.branchPackage)==null?void 0:D.status)==="pending"&&p.jsx(xt,{disabled:!0,variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50",children:"  "}),p.jsx(xt,{onClick:()=>i(!0),disabled:!1,children:" "})]})]}),!t&&p.jsx("p",{className:"mt-3 text-sm text-red-600",children:"      ."}),O&&p.jsxs("p",{className:"mt-3 text-sm text-green-600 font-medium",children:["  :  ",P,"   ",I," ."]}),t&&!1]})]}),p.jsx(Pl,{open:s,onOpenChange:i,children:p.jsxs(pa,{children:[p.jsx(ga,{children:p.jsx(ya,{children:"  "})}),p.jsxs("div",{className:"grid gap-4 py-2",children:[p.jsxs("div",{className:"grid gap-2",children:[p.jsx(Ps,{htmlFor:"shopName",children:" "}),p.jsx(nr,{id:"shopName",value:l,onChange:X=>c(X.target.value),placeholder:":  "})]}),p.jsxs("div",{className:"grid gap-2",children:[p.jsx(Ps,{htmlFor:"managerName",children:" "}),p.jsx(nr,{id:"managerName",value:u,onChange:X=>h(X.target.value),placeholder:":  "})]}),p.jsxs("div",{className:"grid gap-2",children:[p.jsx(Ps,{htmlFor:"email",children:""}),p.jsx(nr,{id:"email",type:"email",value:f,onChange:X=>m(X.target.value),placeholder:"example@mail.com"})]}),p.jsxs("div",{className:"grid gap-2",children:[p.jsx(Ps,{htmlFor:"password",children:""}),p.jsx(nr,{id:"password",type:"password",value:_,onChange:X=>g(X.target.value),onKeyDown:X=>{X.key==="Enter"&&(X.preventDefault(),R())},placeholder:""})]}),w&&p.jsx("p",{className:"text-sm text-muted-foreground",children:w})]}),p.jsxs(nv,{children:[p.jsx(xt,{variant:"outline",onClick:()=>i(!1),disabled:b,children:""}),p.jsx(xt,{onClick:R,disabled:b||!1,children:b?" ...":" "})]})]})}),p.jsx(wV,{open:o,onOpenChange:a})]})}const YP=()=>{const[t,e]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(!1),[o,a]=v.useState(!1),{signIn:l}=Ds(),c=ec();v.useEffect(()=>{try{const h=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;h&&e(h)}catch{}},[]);const u=async h=>{var f;if(h.preventDefault(),o){Kt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Kt.error("   .      .");return}if(!t||!n){Kt.error("     ");return}a(!0);try{const{error:m}=await l(t,n);if(m){const _=m==null?void 0:m.code;_==="auth/invalid-email"?Kt.error("    "):_==="auth/user-not-found"?Kt.error("     "):_==="auth/wrong-password"?Kt.error("   "):_==="auth/invalid-credential"?Kt.error("      "):_==="auth/too-many-requests"?Kt.error("      "):Kt.error((m==null?void 0:m.message)||"    ");return}try{const _=(f=Gt.currentUser)==null?void 0:f.uid;_&&await ln(Se(B,"users",_),{branchPackage:{requested:!0,status:"pending",requestedAt:Be()},updatedAt:Be()},{merge:!0})}catch(_){console.warn("    :",_)}Kt.success("   "),c("/cpanel")}catch(m){Kt.error((m==null?void 0:m.message)||"     ")}finally{a(!1)}};return p.jsx("div",{className:"min-h-screen bg-background px-4 py-8 flex items-center justify-center",children:p.jsxs(MS,{className:"w-full max-w-md",children:[p.jsxs(VS,{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(OE,{className:"w-6 h-6"}),p.jsx(FS,{children:"   "})]}),p.jsx(vV,{children:"     "})]}),p.jsx(jS,{children:p.jsxs("form",{onSubmit:u,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ps,{htmlFor:"email",children:" "}),p.jsxs("div",{className:"relative",children:[p.jsx(S_,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),p.jsx(nr,{id:"email",type:"email",value:t,onChange:h=>{const f=h.target.value;e(f);try{window.localStorage.setItem("cashy:lastEmail",f)}catch{}},placeholder:"example@mail.com",className:"pr-10"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ps,{htmlFor:"password",children:" "}),p.jsxs("div",{className:"relative",children:[p.jsx(ay,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),p.jsx(nr,{id:"password",type:s?"text":"password",value:n,onChange:h=>r(h.target.value),placeholder:"",className:"pr-10"}),p.jsx("button",{type:"button",onClick:()=>i(h=>!h),className:"absolute left-3 top-2.5 text-muted-foreground","aria-label":s?"  ":"  ",children:s?p.jsx(dh,{className:"w-5 h-5"}):p.jsx(hh,{className:"w-5 h-5"})})]})]}),p.jsx("button",{type:"submit",onClick:h=>{o?(h.preventDefault(),h.stopPropagation(),Kt.info("     ...")):typeof navigator<"u"&&navigator.onLine===!1?(h.preventDefault(),h.stopPropagation(),Kt.error("   .      .")):(t||Kt.error("   "),n||Kt.error("   "))},className:"w-full inline-flex items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-white hover:opacity-90",children:o?p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):p.jsxs("div",{className:"flex items-center justify-center",children:[p.jsx(Lk,{className:"w-5 h-5 ml-2"})," "]})}),p.jsxs("div",{className:"mt-4 text-center space-y-3",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:"  "}),p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(M_,{to:"/user/forgot-password",className:"text-primary text-sm",children:"   "}),p.jsx("span",{className:"text-muted-foreground",children:""}),p.jsx(M_,{to:"/auth?mode=signup",className:"text-primary text-sm",children:"  "})]})]})]})})]})})};function _Z({size:t=24,className:e,...n}){return p.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,...n,children:[p.jsx("rect",{x:"5",y:"2.5",width:"14",height:"19",rx:"2.5",stroke:"currentColor",strokeWidth:"1.5"}),p.jsx("rect",{x:"7",y:"4.5",width:"10",height:"5.5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),p.jsx("path",{d:"M9.5 11.5h5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),p.jsx("circle",{cx:"8.5",cy:"14",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),p.jsx("circle",{cx:"12",cy:"14",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),p.jsx("circle",{cx:"15.5",cy:"14",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),p.jsx("circle",{cx:"8.5",cy:"17",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),p.jsx("circle",{cx:"12",cy:"17",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),p.jsx("circle",{cx:"15.5",cy:"17",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),p.jsx("rect",{x:"8",y:"19",width:"9",height:"1.8",rx:"0.6",stroke:"currentColor",strokeWidth:"1"})]})}const JP=t=>{try{const e=t||"default",n=localStorage.getItem(`hiddenQuickActions_${e}`)??localStorage.getItem("hiddenQuickActions"),r=n?JSON.parse(n):[];return Array.isArray(r)?r.filter(s=>typeof s=="string"):[]}catch{return[]}},EZ=()=>{const t=ec(),e=ei(),{signOut:n,user:r,userSubscription:s}=Ds(),{toast:i}=Jl(),[o,a]=v.useState(!1),[l,c]=v.useState(!1),[u,h]=v.useState(()=>JP(r==null?void 0:r.uid)),[f,m]=v.useState(0);M.useEffect(()=>{const x=I=>{m(I.detail.count)};window.addEventListener("support-chat-unread",x);const O=localStorage.getItem("support_chat_unread_count");return O&&m(parseInt(O,10)),()=>window.removeEventListener("support-chat-unread",x)},[]),M.useEffect(()=>{h(JP(r==null?void 0:r.uid))},[r==null?void 0:r.uid]);const _=(x,O,I={},A={})=>{if(e.pathname.startsWith("/user/dashboard"))window.dispatchEvent(new CustomEvent("dashboard-navigation-action",{detail:{action:x,payload:A}}));else{const R=O?{[O]:!0,...I}:{...I};t("/user/dashboard",{state:R})}},g=[{id:"home",label:"",icon:J4,path:"/user/dashboard",action:()=>{const x=()=>{const O=document.getElementById("dashboard-content-container");O&&(O.scrollTop=0,O.scrollTo(0,0));const I=document.querySelector(".user-dashboard");I&&(I.scrollTop=0,I.scrollTo(0,0)),window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0};e.pathname==="/user/dashboard"?(e.state&&Object.keys(e.state).length>0&&t("/user/dashboard",{replace:!0,state:{}}),x()):t("/user/dashboard"),setTimeout(x,10),setTimeout(x,50),setTimeout(x,150),setTimeout(x,300)}},{id:"debts",label:"",icon:Q4,path:"/debts",action:()=>{var x;(x=e.state)!=null&&x.openDebtDialog||_("debts","openDebtDialog")}},{id:"transfer",label:"",icon:L4,path:"/transfer",action:()=>{_("transaction-section","openTransactionSection",{transactionType:"transfer",startNewTransaction:!0},{transactionType:"transfer",startNewTransaction:!0,skipAnimation:!0})}},{id:"add",label:"",icon:OT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:N4,path:"/withdraw",action:()=>{_("transaction-section","openTransactionSection",{transactionType:"withdraw",startNewTransaction:!0},{transactionType:"withdraw",startNewTransaction:!0,skipAnimation:!0})}},{id:"support",label:"",icon:Ic,path:"#",action:()=>{window.dispatchEvent(new CustomEvent("open-support-chat"))}},{id:"settings",label:"",icon:MT,path:"/user/dashboard",action:()=>{_("profile-settings","openProfileSettings")}}],E=[{id:"lines",label:"",icon:v3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openSimCardsDialog)&&_("lines","openSimCardsDialog")},color:"#9333ea"},{id:"installment",label:"",icon:V4,action:()=>{var O,I;a(!1);const x=(O=s==null?void 0:s.subscription)==null?void 0:O.planType;if(x===al.TAHWEELA||x===al.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}(I=e.state)!=null&&I.openInstallment||_("installment","openInstallment")},color:"#7C3AED"},{id:"maintenance",label:"",icon:k3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openMaintenanceDialog)&&_("maintenance","openMaintenanceDialog")},color:"#0EA5E9"},{id:"machine",label:"",icon:_Z,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openMachineDailyDialog)&&_("machine-daily","openMachineDailyDialog")},color:"#F59E0B"},{id:"atm-withdraw",label:" ATM",icon:t3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openAtmWithdrawDialog)&&_("atm-withdraw","openAtmWithdrawDialog")},color:"#10B981"},{id:"credit-cards",label:" ",icon:q4,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openCreditCardsDialog)&&_("credit-cards","openCreditCardsDialog")},color:"#8B5CF6"},{id:"sales",label:"",icon:x3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openSalesDialog)&&_("sales","openSalesDialog")},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:LT,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openShopExpensesDialog)&&_("shop-expenses","openShopExpensesDialog")},color:"#F97316"},{id:"deficiencies",label:"",icon:Mk,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openDeficienciesDialog)&&_("deficiencies","openDeficienciesDialog")},color:"#DB2777"},{id:"branch-management",label:" ",icon:b3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openBranchManagement)&&_("branch-management","openBranchManagement")},color:"#14b8a6"},{id:"my-client-numbers",label:"",icon:c3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openMyClientNumbersDialog)&&_("my-client-numbers","openMyClientNumbersDialog")},color:"#22C55E"},{id:"add-wallet",label:" ",icon:OT,action:()=>{a(!1),e.pathname!=="/user/add-wallet"&&t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:z4,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openCashierShiftModal)&&_("cashier-shift","openCashierShiftModal")},color:"#3B82F6"},{id:"logout",label:" ",icon:DT,action:async()=>{a(!1);try{await n()}catch(x){console.error("Logout error:",x)}},color:"#EF4444"}].filter(x=>!u.includes(x.id)),w=[{id:"shop-expenses-settings",label:" ",icon:LT,action:()=>{var x;c(!1),!((x=e.state)!=null&&x.openShopExpensesDialog)&&t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:MT,action:()=>{c(!1),e.pathname.startsWith("/user/dashboard")?window.dispatchEvent(new CustomEvent("dashboard-navigation-action",{detail:{action:"profile-settings"}})):t("/user/dashboard",{state:{openProfileSettings:!0}})},color:"#6366F1"},{id:"logout",label:" ",icon:DT,action:async()=>{c(!1);try{await n()}catch(x){console.error("Logout error:",x)}},color:"#EF4444"}],S=(x,O,I,A)=>{var D;const N=((D=s==null?void 0:s.subscription)==null?void 0:D.planType)===al.TAHWEELA,C=X=>["/user/dashboard","/profile-settings"].includes(X),L=X=>X==="debts";if(I){if(N&&!L(A)&&!C(x)){i({title:"  ",description:"      .",variant:"destructive"});return}I()}else if(O&&x==="/add"){if(N){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!O){if(N&&!C(x)){i({title:"  ",description:"      .",variant:"destructive"});return}if(e.pathname===x&&!I)return;t(x)}},P=x=>e.pathname===x;return p.jsxs("div",{className:"mobile-bottom-nav",children:[o&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),p.jsx("div",{className:"quick-actions-bottomsheet",children:p.jsx("div",{className:"quick-actions-grid",children:E.map((x,O)=>p.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var A;if(((A=s==null?void 0:s.subscription)==null?void 0:A.planType)===al.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),x.action()},style:{"--action-color":x.color,"--animation-delay":"0s"},children:[p.jsx("div",{className:"quick-action-icon",children:p.jsx(x.icon,{className:"action-icon"})}),p.jsx("span",{className:"quick-action-label",children:x.label})]},x.id))})})]}),l&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),p.jsx("div",{className:"quick-actions-bottomsheet",children:p.jsx("div",{className:"quick-actions-grid",children:w.map((x,O)=>p.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var R;const I=(R=s==null?void 0:s.subscription)==null?void 0:R.planType,A=new Set(["logout","profile-settings"]);if(I===al.TAHWEELA&&!A.has(x.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),x.action()},style:{"--action-color":x.color,"--animation-delay":`${O*.06}s`},children:[p.jsx("div",{className:"quick-action-icon",children:p.jsx(x.icon,{className:"action-icon"})}),p.jsx("span",{className:"quick-action-label",children:x.label})]},x.id))})})]}),p.jsx("nav",{className:"mobile-bottom-nav-container",children:g.map(x=>{const O=x.icon,I=P(x.path);return p.jsxs("button",{onClick:()=>S(x.path,x.isSpecial,x.action,x.id),className:`mobile-nav-item ${I?"active":""} ${x.isSpecial?"special":""}`,type:"button","aria-label":x.label,style:{backgroundColor:"transparent"},children:[p.jsxs("div",{className:`nav-icon-container relative ${x.isSpecial?"special-icon":""} ${x.isSpecial&&x.id==="add"&&o?"special-open":""}`,children:[p.jsx(O,{className:`nav-icon ${I?"active-icon":""} ${x.isSpecial?"special-icon-svg":""} ${x.isSpecial&&x.id==="settings"&&l?"rotated":""}`}),x.id==="support"&&f>0&&p.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white shadow-sm ring-1 ring-white",children:f>99?"99+":f})]}),!x.isSpecial&&p.jsx("span",{className:`nav-label ${I?"active-label":""}`,children:x.label})]},x.id)})})]})};var MR,VR;const zc=(VR=(MR=import.meta)==null?void 0:MR.env)==null?void 0:VR.VITE_ANDROID_DOWNLOAD_URL;var FR,jR;const Wc=(jR=(FR=import.meta)==null?void 0:FR.env)==null?void 0:jR.VITE_PC_DOWNLOAD_URL;var UR,$R;const qc=($R=(UR=import.meta)==null?void 0:UR.env)==null?void 0:$R.VITE_PC32_DOWNLOAD_URL;var BR,zR;const Hc=(zR=(BR=import.meta)==null?void 0:BR.env)==null?void 0:zR.VITE_ANDROID_VERSION;var WR,qR;const Kc=(qR=(WR=import.meta)==null?void 0:WR.env)==null?void 0:qR.VITE_PC_VERSION;var HR,KR;const Gc=(KR=(HR=import.meta)==null?void 0:HR.env)==null?void 0:KR.VITE_PC32_VERSION;function dr(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function bZ(t){if(t&&Ep(t)!==void 0)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Ju=["siteContent","appDownloads"],Vg=["siteContent","desktop_updates"],Fg=["siteContent","android_updates"],Rc="appDownloadsCache",SZ=6*60*60*1e3,IZ=["1LMXQdSVB3-gIW-89fwWoq113IIEelhxR"];function Ep(t){if(t){for(const e of IZ)if(t.includes(e))return;return t}}function cl(t){return{...t,androidUrl:Ep(t.androidUrl),pcUrl:Ep(t.pcUrl),pc32Url:Ep(t.pc32Url)}}function TZ(){try{const e=localStorage.getItem(Rc);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||zc,pcUrl:(n==null?void 0:n.pcUrl)||Wc,pc32Url:(n==null?void 0:n.pc32Url)||qc,androidVersion:(n==null?void 0:n.androidVersion)||Hc,pcVersion:(n==null?void 0:n.pcVersion)||Kc,pc32Version:(n==null?void 0:n.pc32Version)||Gc,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=dr(r.pcUrl)),r.androidVersion||(r.androidVersion=dr(r.androidUrl)),r.pc32Version||(r.pc32Version=dr(r.pc32Url)),cl(r)}}catch{}const t={androidUrl:zc,pcUrl:Wc,pc32Url:qc,androidVersion:Hc,pcVersion:Kc,pc32Version:Gc};return t.pcVersion||(t.pcVersion=dr(t.pcUrl)),t.androidVersion||(t.androidVersion=dr(t.androidUrl)),t.pc32Version||(t.pc32Version=dr(t.pc32Url)),cl(t)}async function _V(t=!1){try{if(!t)try{const r=localStorage.getItem(Rc),s=localStorage.getItem(Rc+"_ts");if(r&&s&&Date.now()-Number(s)<SZ){const o=JSON.parse(r);return cl(o)}}catch{}const e=await on(Se(B,Ju[0],Ju[1]));if(e.exists()){const r=e.data();try{localStorage.setItem(Rc,JSON.stringify(r)),localStorage.setItem(Rc+"_ts",String(Date.now()))}catch{}const s={androidUrl:(r==null?void 0:r.androidUrl)||zc,pcUrl:(r==null?void 0:r.pcUrl)||Wc,pc32Url:(r==null?void 0:r.pc32Url)||qc,androidVersion:(r==null?void 0:r.androidVersion)||Hc,pcVersion:(r==null?void 0:r.pcVersion)||Kc,pc32Version:(r==null?void 0:r.pc32Version)||Gc,updatedAt:r==null?void 0:r.updatedAt,updatedBy:r==null?void 0:r.updatedBy};return s.pcVersion||(s.pcVersion=dr(s.pcUrl)),s.androidVersion||(s.androidVersion=dr(s.androidUrl)),s.pc32Version||(s.pc32Version=dr(s.pc32Url)),cl(s)}const n={androidUrl:zc,pcUrl:Wc,pc32Url:qc,androidVersion:Hc,pcVersion:Kc,pc32Version:Gc};return n.pcVersion||(n.pcVersion=dr(n.pcUrl)),n.androidVersion||(n.androidVersion=dr(n.androidUrl)),n.pc32Version||(n.pc32Version=dr(n.pc32Url)),cl(n)}catch(e){const n=(e==null?void 0:e.message)||"";((e==null?void 0:e.code)||"")==="permission-denied"||n.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",e):console.error(" Error loading app downloads:",e);try{const i=localStorage.getItem(Rc);if(i){const o=JSON.parse(i),a={androidUrl:(o==null?void 0:o.androidUrl)||zc,pcUrl:(o==null?void 0:o.pcUrl)||Wc,pc32Url:(o==null?void 0:o.pc32Url)||qc,androidVersion:(o==null?void 0:o.androidVersion)||Hc,pcVersion:(o==null?void 0:o.pcVersion)||Kc,pc32Version:(o==null?void 0:o.pc32Version)||Gc,updatedAt:o==null?void 0:o.updatedAt,updatedBy:o==null?void 0:o.updatedBy};return a.pcVersion||(a.pcVersion=dr(a.pcUrl)),a.androidVersion||(a.androidVersion=dr(a.androidUrl)),a.pc32Version||(a.pc32Version=dr(a.pc32Url)),cl(a)}}catch{}const s={androidUrl:zc,pcUrl:Wc,pc32Url:qc,androidVersion:Hc,pcVersion:Kc,pc32Version:Gc};return s.pcVersion||(s.pcVersion=dr(s.pcUrl)),s.androidVersion||(s.androidVersion=dr(s.androidUrl)),s.pc32Version||(s.pc32Version=dr(s.pc32Url)),cl(s)}}function xZ(t){return _V().then(t),()=>{}}async function AZ(t,e,n,r,s,i=12e4){const o=_M(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=fJ(o,l);return new Promise((u,h)=>{const f=dJ(c,t);let m=!1;const _=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",g=>{const b=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(b)},g=>{clearTimeout(_),h(g)},async()=>{try{if(clearTimeout(_),m)return;const g=await hJ(c),b={updatedAt:Be(),updatedBy:n||"admin"};e==="android"?(b.androidUrl=g,r&&(b.androidVersion=r)):e==="pc"?(b.pcUrl=g,r&&(b.pcVersion=r)):(b.pc32Url=g,r&&(b.pc32Version=r));const E=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),w=ln(Se(B,Ju[0],Ju[1]),b,{merge:!0});let S=!1;const P=new Promise(x=>setTimeout(()=>{S=!0,x()},E));try{await Promise.race([w,P])}catch(x){console.warn(" Firestore write error, proceeding with URL only:",x)}S&&console.warn(" Firestore update timed out;             ."),u(g)}catch(g){h(g)}})})}async function PZ(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Be(),updatedBy:e||"admin"};await ln(Se(B,Ju[0],Ju[1]),r,{merge:!0})}async function RZ(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Be(),updatedBy:e||"admin"};await ln(Se(B,Vg[0],Vg[1]),r,{merge:!0})}function EV(t){const e=Se(B,Vg[0],Vg[1]);return ka(e,r=>{if(r.exists()){const s=r.data(),i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:(s==null?void 0:s.force)===!0||(s==null?void 0:s.force)==="true"};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)}},r=>{console.warn("Error listening to desktop updates:",r)})}function bV(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function CZ(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Be(),updatedBy:e||"admin"};await ln(Se(B,Fg[0],Fg[1]),r,{merge:!0})}async function SV(){try{const t=Se(B,Fg[0],Fg[1]),e=await on(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,url:n!=null&&n.url?String(n.url):void 0,notes:n!=null&&n.notes?String(n.notes):void 0,force:!!(n!=null&&n.force),code:typeof(n==null?void 0:n.code)=="number"?n.code:typeof(n==null?void 0:n.versionCode)=="number"?n.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching android updates:",t);try{const e=localStorage.getItem("android_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function kZ(t){return SV().then(t),()=>{}}const NZ=Object.freeze(Object.defineProperty({__proto__:null,fetchAndroidUpdates:SV,getAppDownloads:_V,getCachedOrEnvAppDownloads:TZ,listenAndroidUpdates:kZ,listenAppDownloads:xZ,listenDesktopUpdates:EV,resolveDownloadUrl:bZ,selectDesktopUrl:bV,setAndroidUpdateInfo:CZ,setAppDownloadLinks:PZ,setDesktopUpdateInfo:RZ,uploadAppBinaryResumable:AZ},Symbol.toStringTag,{value:"Module"})),DZ=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=M.useState(!1),[s,i]=M.useState(!1),[o,a]=M.useState(!1),[l,c]=M.useState(0),[u,h]=M.useState(""),[f,m]=M.useState(!1),_=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(x){console.warn("failed to minimize",x)}},g=async()=>{n&&(updateData!=null&&updateData.force)&&compareVersions(updateData.version,updateVersion)>0;try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(x){console.warn("failed to close",x)}},b=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(x){console.warn("failed to soft refresh",x),m(!1)}}};if(M.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(x=>{const O=(x==null?void 0:x.percent)==null?0:Number(x.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(O)?0:O)))}),t.checkUpdate()}catch(x){console.warn("update init failed",x)}},[e,t]),M.useEffect(()=>{const x=EV(O=>{if(String((O==null?void 0:O.version)||"")){r(!0);const A=bV({downloadURL_64:O==null?void 0:O.downloadURL_64,downloadURL_32:O==null?void 0:O.downloadURL_32})||"";h(A)}});return()=>{try{x()}catch{}}},[]),!e)return null;const[w,S]=M.useState(!1),P=async()=>{try{if(!t)return;w?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),S(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),S(!0))}catch(x){console.warn("window toggle failed",x)}};return p.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[p.jsx("button",{type:"button","aria-label":"",title:"",onClick:g,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:p.jsx(Oo,{className:"w-5 h-5"})}),p.jsx("button",{type:"button","aria-label":"",title:" ",onClick:b,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:p.jsx(DE,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),p.jsx("button",{type:"button","aria-label":"",title:"",onClick:_,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:p.jsx(a3,{className:"w-5 h-5"})}),p.jsx("button",{type:"button","aria-label":"/",title:w?"":" ",onClick:P,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:p.jsx(_3,{className:"w-5 h-5"})})]})},P0=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=v.useState(`${n}logo.svg`),[i,o]=v.useState(0),a=v.useCallback(()=>{o(u=>{const h=u+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return p.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:p.jsxs("div",{className:"flex flex-col items-center justify-center",children:[p.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),p.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},OZ=_d("SplashScreen",{web:()=>ae(()=>import("./web-BElVOeF0.js"),[],import.meta.url).then(t=>new t.SplashScreenWeb)});var R0;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(R0||(R0={}));var XP;(function(t){t.None="NONE",t.Slide="SLIDE",t.Fade="FADE"})(XP||(XP={}));const bw=_d("StatusBar"),ZP=_d("AppLauncher",{web:()=>ae(()=>import("./web-Yrgbovbn.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function LZ(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Te&&Te.getPlatform()!=="web"&&(ZP.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Te&&Te.getPlatform()!=="web"&&ZP.openUrl({url:n})}catch{}}}function IV(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function MZ(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?IV(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*7115*7*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function Kee(t,e,n){const r=IV(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function VZ(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function FZ(t){const e=VZ(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function Gee(t,e,n){const r=MZ(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=FZ(t||e);LZ(r,s)}async function jZ(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function US(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function UZ(t,e,n=0){const r=US(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const ea=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:US,calculateProfit:UZ},Symbol.toStringTag,{value:"Module"})),$Z=t=>t==="withdraw"||t==="receive"?"receive":"send",BZ=async t=>{if(!t)return null;const e=Xe(xe(B,"transactions"),$e("reference","==",t),ma(1)),n=await Je(e);return n.empty?null:n.docs[0].id},zZ=async t=>{var e;try{const n=await ll.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return KZ(t||((e=Gt.currentUser)==null?void 0:e.uid)||"")||null},Sw=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await Zo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},TV=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await BZ(t.reference);if(e)return{id:e,duplicate:!0};const n=$Z(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Sw(t.receiverMsisdn);if(o||(o=await Sw(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Sw(a))}r=o||await zZ(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await CS.create(s);if(n==="send")try{const{calculateCommission:o}=await ae(async()=>{const{calculateCommission:E}=await Promise.resolve().then(()=>ea);return{calculateCommission:E}},void 0,import.meta.url),a=o(t.amount,"send"),l=t.merchantUserId||t.createdBy,c=t.fee||0,u=await _r.getUserData(l),h={...(u==null?void 0:u.walletBalances)||{}},m=Number(h[r]||0)-(t.amount+c);h[r]=m;const g=Number((u==null?void 0:u.cashBalance)||0)+t.amount+a;await _r.updateUserData(l,{walletBalances:h,cashBalance:g,lastUpdated:new Date().toISOString()});const{walletDailyLimitsService:b}=await ae(async()=>{const{walletDailyLimitsService:E}=await Promise.resolve().then(()=>Ug);return{walletDailyLimitsService:E}},void 0,import.meta.url);await b.updateUsage(r,t.amount,"transfer")}catch(o){console.warn("     :",o)}try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await jZ(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=US(t.amount,n);await _r.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},bp=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},C0=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Gt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(g=>bp(g)).filter(g=>!!g):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=g=>String(g||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(g=>({walletId:String((g==null?void 0:g.id)||""),msisdn:bp(String((g==null?void 0:g.phone)||(g==null?void 0:g.msisdn)||"")),isDefault:!!(g!=null&&g.isDefault)})).filter(g=>g.walletId&&g.msisdn):[],u=new Map;for(const g of s){const b=l(g);for(const E of c){const w=l(E.msisdn);if(E.msisdn===g){u.set(E.walletId,{msisdn:E.msisdn,isDefault:!!E.isDefault});continue}if(w.slice(-5)===b.slice(-5)){u.set(E.walletId,{msisdn:E.msisdn,isDefault:!!E.isDefault});continue}}}if(u.size>0){const g=Array.from(u.entries()),b=g.find(([S,P])=>P.isDefault),[E,w]=b||g[0];return{walletId:E,msisdn:w.msisdn}}const f=(await Zo.getByMerchantId(r)||[]).map(g=>({walletId:String((g==null?void 0:g.id)||""),msisdn:bp(String((g==null?void 0:g.msisdn)||"")),isDefault:!!(g!=null&&g.isDefault)})).filter(g=>g.walletId&&g.msisdn),m=[...c,...f],_=new Map;for(const g of s){const b=l(g);for(const E of m){const w=l(E.msisdn);if(E.msisdn===g){_.set(E.walletId,{msisdn:E.msisdn,isDefault:!!E.isDefault});continue}if(w.slice(-5)===b.slice(-5)){_.set(E.walletId,{msisdn:E.msisdn,isDefault:!!E.isDefault});continue}}}try{console.log("identifyWalletBySim  matched size",_.size)}catch{}if(_.size>0){const g=Array.from(_.entries()),b=g.find(([S,P])=>P.isDefault),[E,w]=b||g[0];try{console.log("identifyWalletBySim  selected match",{walletId:E,msisdn:w.msisdn})}catch{}return{walletId:E,msisdn:w.msisdn}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function WZ(t,e){try{const n=i=>bp(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.filter(u=>u.msisdn===o);if(l.length>0){const h=l.find(f=>f.isDefault)||l[0];return{walletId:h.walletId,msisdn:h.msisdn}}const c=r.filter(u=>s(u.msisdn).slice(-5)===a.slice(-5));if(c.length>0){const h=c.find(f=>f.isDefault)||c[0];return{walletId:h.walletId,msisdn:h.msisdn}}}return null}catch{return null}}async function qZ(t){var e;try{const n=t.userId||((e=Gt.currentUser)==null?void 0:e.uid)||"default";if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";try{t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||"")}catch{}if(c){const u=await C0([c],n);if(u)return u}}const r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await C0(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");return a&&o[a]&&o[a].walletId?{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")}:l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId?{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")}:null}catch{return null}}function HZ(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Gt.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const KZ=t=>{var e,n;try{const r=t||((e=Gt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const u=JSON.parse(c);if(Array.isArray(u)&&u.length>0){const h=u.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=u[0])==null?void 0:n.id)||null}}}}catch{}return null};function xV(){return typeof window>"u"?()=>{}:()=>{}}const ko=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:HZ,detectWalletFromSim:WZ,identifyWalletBySim:C0,initMobileSmsBridge:xV,processMobileTransactionNotification:TV,resolveWalletBySimOrSlot:qZ},Symbol.toStringTag,{value:"Module"})),GZ=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},QZ=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},YZ=t=>{try{const e=t.match(/(?:|)(?:\s+(?:|))?\s*([0-9]+(?:[.,][0-9]+)?)/);if(!e)return;const n=e[1].replace(",",".");return Number(n)||0}catch{return}},JZ=()=>{var t,e;try{const n=((t=Gt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},XZ=()=>{var t;try{const e=((t=Gt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},ZZ=(t,e)=>{try{const n=`wallets_${t}`,r=localStorage.getItem(n);if(!r)return null;const s=JSON.parse(r);if(Array.isArray(s)){const i=e.trim(),o=s.find(a=>a.phone&&String(a.phone).trim()===i||a.msisdn&&String(a.msisdn).trim()===i);return o?o.id:null}}catch{}return null},Iw=async(t,e)=>{var O;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices|etisalat|e&|instapay/.test(s)||/vodafone|vf\-?cash|||etisalat|e&|money|instapay/.test(i)||/\s*?\s*|\s*|\s*|ana\s*vodafone|e&\s*money|etisalat/i.test(n)))return;try{console.log("VF/ETISALAT NOTIFICATION RECEIVED",t)}catch{}const a=/|?|/.test(n),l=/\s*|\s*/.test(n);if(l&&!(localStorage.getItem("autoTransferRecord")==="true")){console.log("Transfer detected but Auto-Record is disabled by user preference. Ignoring.");return}let c=GZ(n);if(l){const I=n.match(/\s*\s+(\d+(?:\.\d+)?)\s+/);I&&(c=Number(I[1]))}const u=QZ(n),h=YZ(n)||0;if(!c||c<=0)return;let f="vodafone_cash";/etisalat|e&|/i.test(n)||/etisalat|e&/i.test(s)||/etisalat|e&/i.test(i)?f="etisalat_cash":(/instapay/i.test(n)||/instapay/i.test(s)||/instapay/i.test(i))&&(f="instapay");const m=((O=Gt.currentUser)==null?void 0:O.uid)||"";let _;if((t==null?void 0:t.simSlot)!==void 0&&m)try{if(t.simSlot===0){const I=localStorage.getItem(`sim1Number_${m}`)??localStorage.getItem("sim1Number");I&&(_=String(I).trim())}else if(t.simSlot===1){const I=localStorage.getItem(`sim2Number_${m}`)??localStorage.getItem("sim2Number");I&&(_=String(I).trim())}}catch(I){console.error("Error resolving SIM from profile",I)}let g;if((t==null?void 0:t.simSlot)!==void 0){if(!_){console.warn("Transaction detected but no SIM number found in profile for slot",t==null?void 0:t.simSlot),e&&e.toast&&e.toast({title:"",description:`     ${t.simSlot+1}         .`,variant:"destructive"});return}const I=ZZ(m,_);if(I)g=I;else{console.warn("Transaction detected but no wallet found for number",_),e&&e.toast&&e.toast({title:"",description:`       ${_}.       .`,variant:"destructive"});return}}else g=JZ()||void 0;const b=XZ()||"",E=g||"default-line";if(!m||!g||!b)return;try{const I=await kJ(m);if((I==null?void 0:I.planType)===al.ZERO){console.log("Ignoring Notification for Zero Plan user");return}}catch{}const w=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,S=`VF-${btoa(unescape(encodeURIComponent(w))).slice(0,24)}`,P=a?"withdraw":l?"transfer":"withdraw";_||(_=(t==null?void 0:t.receiverMsisdn)||void 0);const x={type:P,amount:c,provider:f,shopId:b,lineId:E,walletId:g,senderMsisdn:P==="withdraw"?u||void 0:_,receiverMsisdn:P==="withdraw"?_:u||void 0,reference:S,fee:h,createdBy:m,merchantUserId:m,note:f==="etisalat_cash"?"  ":f==="instapay"?"  ":"  "};try{await TV(x)}catch{}};let To={};const ds={invalidateCache:t=>{const e=t||"default";delete To[e]},async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await _r.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=a=>{if(!a)return null;try{return a!=null&&a.toDate?a.toDate():new Date(a)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)},o=ds.getReportsData(t);o.lastDailyResetDate&&(!i.lastDailyResetDate||o.lastDailyResetDate.getTime()>i.lastDailyResetDate.getTime())&&(i.lastDailyResetDate=o.lastDailyResetDate,i.hiddenDailyTransactionIds=o.hiddenDailyTransactionIds,i.dailyProfit=o.dailyProfit,i.lastDailyProfitResetDate=o.lastDailyProfitResetDate),o.lastMonthlyResetDate&&(!i.lastMonthlyResetDate||o.lastMonthlyResetDate.getTime()>i.lastMonthlyResetDate.getTime())&&(i.lastMonthlyResetDate=o.lastMonthlyResetDate,i.hiddenMonthlyTransactionIds=o.hiddenMonthlyTransactionIds,i.monthlyProfit=o.monthlyProfit,i.lastMonthlyProfitResetDate=o.lastMonthlyProfitResetDate);try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData";let n=ds.getReportsData(t);const r=!1,s=!1;if(n.lastDailyResetDate||(n.lastDailyResetDate=new Date),n.lastDailyProfitResetDate||(n.lastDailyProfitResetDate=new Date),n.lastMonthlyResetDate||(n.lastMonthlyResetDate=new Date),n.lastMonthlyProfitResetDate||(n.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(n)),To[t||"default"]=n,t)try{_r.updateUserData(t,{reportsData:{...n}})}catch(i){console.warn("     Firebase   :",i)}return{dailyReset:r,monthlyReset:s}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const u=new Date(c.createdAt);return u.getMonth()===a&&u.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),To[n||"default"]=i,n)try{_r.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t||"default";if(To[e])return{...To[e]};const n=t?`reportsData_${t}`:"reportsData",r=localStorage.getItem(n);let s={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(r){const i=JSON.parse(r);s={lastDailyResetDate:i.lastDailyResetDate?new Date(i.lastDailyResetDate):null,lastMonthlyResetDate:i.lastMonthlyResetDate?new Date(i.lastMonthlyResetDate):null,hiddenDailyTransactionIds:i.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:i.hiddenMonthlyTransactionIds||[],dailyProfit:i.dailyProfit||0,monthlyProfit:i.monthlyProfit||0,lastDailyProfitResetDate:i.lastDailyProfitResetDate?new Date(i.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:i.lastMonthlyProfitResetDate?new Date(i.lastMonthlyProfitResetDate):null}}else if(t){const i=localStorage.getItem("reportsData");if(i)try{const o=JSON.parse(i);s={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null},localStorage.setItem(n,JSON.stringify(s))}catch{}}return To[e]=s,{...s}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=ds.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=ds.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),To[n||"default"]=s,n)try{_r.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=ds.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=ds.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=ds.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),To[e||"default"]=r,e)try{_r.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},eee=ds,Qee=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:eee,reportsService:ds},Symbol.toStringTag,{value:"Module"})),jg={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Se(B,"walletLimits",t),s={updatedAt:Be(),ownerId:(n=Gt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await ln(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Se(B,"walletLimits",t);let r;try{r=await on(n)}catch(i){return console.error("     (     ):",i),null}if(r.exists()){const i=r.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||qt.now()}}const s={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:qt.now()};return await ln(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Be(),ownerId:(e=Gt.currentUser)==null?void 0:e.uid}),s}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Se(B,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Be(),updatedAt:Be(),ownerId:(e=Gt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Se(B,"walletLimits",t);return await ln(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Be(),updatedAt:Be(),ownerId:(e=Gt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Se(B,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Be()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await ln(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n,r){try{const s=Se(B,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Be()},a=new Date,l=r?new Date(r):a,c=l.getDate()===a.getDate()&&l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear(),u=l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear();return n==="transfer"?(c&&(o.dailyTransferUsed=Math.max(0,(i.dailyTransferUsed||0)-e)),u&&(o.monthlyTransferUsed=Math.max(0,(i.monthlyTransferUsed||0)-e))):(c&&(o.dailyWithdrawUsed=Math.max(0,(i.dailyWithdrawUsed||0)-e)),u&&(o.monthlyWithdrawUsed=Math.max(0,(i.monthlyWithdrawUsed||0)-e))),Object.keys(o).length<=1?i:(await ln(s,{...o},{merge:!0}),await this.getWalletLimits(t))}catch(s){throw console.error("      :",s),s}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Se(B,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Be(),lastMonthlyReset:Be(),updatedAt:Be(),ownerId:(e=Gt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},Ug=Object.freeze(Object.defineProperty({__proto__:null,default:jg,walletDailyLimitsService:jg},Symbol.toStringTag,{value:"Module"}));class tee{constructor(){xd(this,"intervalId",null);xd(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Gt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await T0.getToday(n);await T0.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await ds.syncReportsDataFromFirebase(e);const n=ds.getReportsData(e);if(!n.lastDailyResetDate||!ds.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await _r.getUserTransactions(e),l=w=>{const S=String(w||"").toLowerCase();return["completed","confirmed","success"].includes(S)?"completed":["failed","error"].includes(S)?"failed":["cancelled","canceled"].includes(S)?"cancelled":"pending"},c=(a||[]).filter(w=>{var P,x;const S=(P=w==null?void 0:w.createdAt)!=null&&P.toDate?w.createdAt.toDate():(w==null?void 0:w.createdAt)instanceof Date?w.createdAt:new Date(w==null?void 0:w.createdAt);return((x=S==null?void 0:S.toDateString)==null?void 0:x.call(S))===o&&l(w==null?void 0:w.status)==="completed"}),u=c.length,h=c.reduce((w,S)=>w+Number(S.amount||0),0),f=w=>{const S=String(((w==null?void 0:w.type)??(w==null?void 0:w.txnType))||"").toLowerCase();return S==="withdraw"||S==="withdrawal"||S==="receive"},m=w=>{const S=String(((w==null?void 0:w.type)??(w==null?void 0:w.txnType))||"").toLowerCase();return S==="send"||S==="transfer"},_=c.filter(f).reduce((w,S)=>{const P=S.withdrawnAmount!==void 0?Number(S.withdrawnAmount):Number(S.amount||0);return w+P},0),g=c.filter(w=>m(w)&&!["  "].includes(String((w==null?void 0:w.title)||""))).reduce((w,S)=>{const P=S.sentAmount!==void 0?Number(S.sentAmount):Number(S.amount||0);return w+P},0),b=c.reduce((w,S)=>w+Number(ds.calculateTransactionProfit(S)||0),0),E=new Date(i).toISOString().slice(0,10);await TM.add({userId:e,reportDate:E,totalTransactions:u,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(_.toFixed(2)),totalSent:Number(g.toFixed(2)),profit:Number(b.toFixed(2)),walletId:null}),console.log("    :",E)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await Zo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await jg.resetDailyLimits(i)}catch{}if(r)try{await jg.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const eR=new tee,Tw=768;function AV(){const[t,e]=v.useState(void 0);return v.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Tw-1}px)`),r=()=>{e(window.innerWidth<Tw)};return n.addEventListener("change",r),e(window.innerWidth<Tw),()=>n.removeEventListener("change",r)},[]),!!t}function nee(){const[t,e]=v.useState("default"),[n,r]=v.useState(!1);return v.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const PV=v.createContext(void 0);function ree({children:t}){const{profile:e,user:n,loading:r}=Ds(),[s,i]=v.useState(null),[o,a]=v.useState(null),[l,c]=v.useState(!0);v.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),v.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const _=localStorage.getItem(m);i(_||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const _=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==_))try{const g=localStorage.getItem(_);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const u={shopId:s,shopName:o,loading:l};return p.jsx(PV.Provider,{value:u,children:t})}function see(){const t=v.useContext(PV);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}const Cr={phoneNumber:"201000392539",defaultMessage:"    ",isEnabled:!0,lastUpdated:new Date},RV="whatsapp-settings",CV="app-settings",Sp="whatsapp_settings_cache",k0=async()=>{var t;try{if(!Gt.currentUser){try{const r=localStorage.getItem(Sp);if(r){const s=JSON.parse(r);return{phoneNumber:s.phoneNumber||Cr.phoneNumber,defaultMessage:s.defaultMessage||Cr.defaultMessage,isEnabled:s.isEnabled!==void 0?s.isEnabled:Cr.isEnabled,lastUpdated:s.lastUpdated?new Date(s.lastUpdated):Cr.lastUpdated}}}catch{}return Cr}const e=Se(B,CV,RV),n=await on(e);if(n.exists()){const r=n.data(),s={phoneNumber:r.phoneNumber||Cr.phoneNumber,defaultMessage:r.defaultMessage||Cr.defaultMessage,isEnabled:r.isEnabled!==void 0?r.isEnabled:Cr.isEnabled,lastUpdated:((t=r.lastUpdated)==null?void 0:t.toDate())||Cr.lastUpdated};try{localStorage.setItem(Sp,JSON.stringify(s))}catch{}return s}else return await kV(Cr),Cr}catch{try{const n=localStorage.getItem(Sp);if(n){const r=JSON.parse(n);return{phoneNumber:r.phoneNumber||Cr.phoneNumber,defaultMessage:r.defaultMessage||Cr.defaultMessage,isEnabled:r.isEnabled!==void 0?r.isEnabled:Cr.isEnabled,lastUpdated:r.lastUpdated?new Date(r.lastUpdated):Cr.lastUpdated}}}catch{}return Cr}},kV=async t=>{try{const e=Se(B,CV,RV),n={...t,lastUpdated:new Date};await ln(e,n,{merge:!0});try{localStorage.setItem(Sp,JSON.stringify(n))}catch{}return!0}catch(e){return console.error("    :",e),!1}},NV=t=>{const e=t.replace(/\D/g,"");if(e.length<10)throw new Error("      10   ");return e},Yee=t=>{try{const e=NV(t);return e.length>=10&&e.length<=15}catch{return!1}},iee=(t,e)=>{const n=NV(t),r=encodeURIComponent(e);return`https://wa.me/${n}?text=${r}`},Jee=()=>{const[t,e]=M.useState(null),[n,r]=M.useState(!0),[s,i]=M.useState(null);return M.useEffect(()=>{(async()=>{try{r(!0);const l=await k0();e(l),i(null)}catch(l){i("    "),console.error(l)}finally{r(!1)}})()},[]),{settings:t,loading:n,error:s,updateSettings:async a=>{try{return r(!0),await kV(a)&&t?(e({...t,...a,lastUpdated:new Date}),i(null),!0):(i("   "),!1)}catch(l){return i("   "),console.error(l),!1}finally{r(!1)}},refreshSettings:()=>k0().then(e)}},jm="https://cashy-link-chat.shop",tR=({position:t="left"})=>{const[e,n]=v.useState(!0),[r,s]=v.useState(!1),[i,o]=v.useState(null),[a,l]=v.useState(""),[c,u]=v.useState(""),[h,f]=v.useState(()=>{if(typeof window<"u"){const z=localStorage.getItem("support_chat_messages");return z?JSON.parse(z):[]}return[]}),[m,_]=v.useState(null),[g,b]=v.useState(null),[E,w]=v.useState(!1),[S,P]=v.useState(()=>{if(typeof window<"u"){const z=localStorage.getItem("support_chat_unread_count");return z?parseInt(z,10):0}return 0}),[x,O]=v.useState(new Set),[I,A]=v.useState(null),[R,N]=v.useState(!1),[C,L]=v.useState({name:"",email:"",phone:""});v.useEffect(()=>{const z=localStorage.getItem("support_chat_user_data");if(z)try{const be=JSON.parse(z);L(Ne=>({...Ne,...be}))}catch(be){console.error("Error parsing saved chat user data",be)}},[]);const[D,X]=v.useState(null),Ae=v.useRef(null),ke=v.useRef(null),Fe=v.useRef(null),W=v.useRef(r),K=v.useRef(null);v.useEffect(()=>{window.dispatchEvent(new CustomEvent("support-chat-unread",{detail:{count:S}}))},[S]),v.useEffect(()=>{W.current=r},[r]),v.useEffect(()=>{const z=()=>{I&&Yn(I),s(!0),P(0)};return window.addEventListener("open-support-chat",z),()=>window.removeEventListener("open-support-chat",z)},[I]);const ie=()=>{var z;(z=Fe.current)==null||z.scrollIntoView({behavior:"auto"})};v.useEffect(()=>{ie()},[h,r,R]);const{toast:le}=Jl(),{user:fe}=Ds(),Le=ei(),Pe=AV(),Q=Te.isNativePlatform(),et=Pe||Q;v.useEffect(()=>{fe&&L(z=>({...z,name:fe.displayName||z.name,email:fe.email||z.email,phone:fe.phoneNumber||z.phone}))},[fe]);const nt=Le.pathname.startsWith("/admin"),Tn=Le.pathname.startsWith("/profile-settings");v.useEffect(()=>{localStorage.setItem("support_chat_messages",JSON.stringify(h))},[h]),v.useEffect(()=>{localStorage.setItem("support_chat_unread_count",S.toString())},[S]),v.useEffect(()=>{const z=localStorage.getItem("support_chat_user_id");z&&(A(z),Yn(z))},[]),v.useEffect(()=>()=>{ke.current!==null&&(window.clearInterval(ke.current),ke.current=null)},[]);const Wn=async()=>{N(!0)},an=async()=>{if(!C.name||!C.email||!C.phone){le({title:" ",description:"    ",variant:"destructive"});return}try{let z=fe==null?void 0:fe.uid;if(!z){if(C.phone){const pe=C.phone.replace(/[^0-9]/g,"");pe.length>=5&&(z=`user_${pe}`)}if(!z){const pe=localStorage.getItem("support_chat_user_id");pe?z=pe:z=`guest_${Date.now()}_${Math.random().toString(36).slice(2,10)}`}}const Ne=await(await fetch(`${jm}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:z,name:C.name,email:C.email,phone:C.phone})})).json().catch(()=>null);if((Ne==null?void 0:Ne.status)==="missing_fields"){le({title:" ",description:"    ",variant:"destructive"});return}if((Ne==null?void 0:Ne.status)!=="registered"){const pe=localStorage.getItem("support_chat_user_id");if(!(z===pe||(fe==null?void 0:fe.uid)&&z===fe.uid)){le({title:"",description:"    ",variant:"destructive"});return}}localStorage.setItem("support_chat_user_data",JSON.stringify({name:C.name,email:C.email,phone:C.phone})),o("local"),A(z),localStorage.setItem("support_chat_user_id",z),N(!1),Yn(z)}catch(z){console.error("Registration check failed:",z),le({title:"  ",description:"    ",variant:"destructive"})}},Qn=z=>{if(!z)return new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});let be;if(typeof z=="object"&&z.toDate)be=z.toDate();else if(typeof z=="string")be=new Date(z);else return"";if(isNaN(be.getTime()))return"";const Ne=new Date;return be.getDate()===Ne.getDate()&&be.getMonth()===Ne.getMonth()&&be.getFullYear()===Ne.getFullYear()?be.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):`${be.toLocaleDateString()} ${be.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`},Yn=z=>{if(ke.current!==null)return;const be=window.setInterval(async()=>{try{const Ne=await fetch(`${jm}/get/${z}`);if(!Ne.ok)return;const pe=await Ne.json().catch(()=>null);if(!pe)return;const Qe=`server_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;let st=null,We=pe.message||pe.msg||pe.text||pe.imageUrl||pe.url||pe.image||pe.data||pe.content;pe.imageBase64&&(We=`data:image/jpeg;base64,${pe.imageBase64}`);let re=pe.type;if(We&&typeof We=="string"&&(We.startsWith("data:image")||We.match(/\.(jpeg|jpg|gif|png|webp)$/i)||We.length>200&&!We.includes(" ")&&/^[A-Za-z0-9+/=]+$/.test(We))&&(re="image"),!re&&We&&(re="text"),re==="text"&&We&&(st={id:Qe,senderType:"admin",message:We,content:We,type:"text",timestamp:new Date().toISOString()}),re==="image"&&We){let Ye=We;!Ye.startsWith("http")&&!Ye.startsWith("data:image")&&(Ye=`data:image/jpeg;base64,${We}`),st={id:Qe,senderType:"admin",message:"",content:Ye,imageUrl:Ye,type:"image",timestamp:new Date().toISOString()}}st&&(f(Ye=>[...Ye,st]),K.current&&(K.current.currentTime=0,K.current.play().catch(Ye=>console.error("Error playing notification sound:",Ye))),W.current||P(Ye=>Ye+1),O(Ye=>new Set([...Ye,Qe])),setTimeout(()=>{O(Ye=>{const It=new Set(Ye);return It.delete(Qe),It})},5e3))}catch(Ne){console.error("Error polling support messages:",Ne)}},3e3);ke.current=be},Jn=()=>{ke.current!==null&&(window.clearInterval(ke.current),ke.current=null)},qr=async()=>{if(!a.trim())return;const z=a;l("");let be=I;if(!be){const Qe=localStorage.getItem("support_chat_user_id");if(Qe)be=Qe;else{const st=`web_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;localStorage.setItem("support_chat_user_id",st),be=st}A(be)}const Ne=`client_${Date.now()}_${Math.random().toString(36).slice(2,10)}`,pe={id:Ne,senderType:"client",message:z,content:z,timestamp:new Date().toISOString()};f(Qe=>[...Qe,pe]);try{await fetch(`${jm}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:be,type:"text",message:z,name:C.name,email:C.email,phone:C.phone})}),Yn(be)}catch(Qe){console.error("Error sending support message:",Qe),f(st=>st.filter(We=>We.id!==Ne)),l(z),le({title:"  ",description:"   ",variant:"destructive"})}},Y=async()=>{if(!c.trim())return;const z=c;u("");try{const be=await k0(),Ne=iee(be.phoneNumber,z);window.open(Ne,"_blank")}catch(be){console.error("Error opening WhatsApp:",be),le({title:"",description:"      ",variant:"destructive"}),u(z)}},ce=async()=>{o(null),f([]),localStorage.removeItem("support_chat_messages"),localStorage.removeItem("support_chat_user_id"),l(""),_(null),b(null),P(0),Jn(),le({title:"  ",description:"     "})},ye=z=>{var Ne;const be=(Ne=z.target.files)==null?void 0:Ne[0];if(be){if(!be.type.startsWith("image/")){le({title:"   ",description:"   ",variant:"destructive"});return}if(be.size>5*1024*1024){le({title:"   ",description:"     5 ",variant:"destructive"});return}_(be);const pe=new FileReader;pe.onload=Qe=>{var st;b((st=Qe.target)==null?void 0:st.result)},pe.readAsDataURL(be)}},Ke=z=>new Promise((be,Ne)=>{const pe=new FileReader;pe.onload=()=>{const Qe=pe.result.split(",")[1];be(Qe)},pe.onerror=Ne,pe.readAsDataURL(z)}),ue=async()=>{if(!m)return;const z=m;_(null),b(null),w(!0);let be=I;if(!be){const Ne=localStorage.getItem("support_chat_user_id");if(Ne)be=Ne;else{const pe=`web_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;localStorage.setItem("support_chat_user_id",pe),be=pe}A(be)}try{const Ne=await Ke(z);await fetch(`${jm}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:be,name:C.name,email:C.email,phone:C.phone,type:"image",imageBase64:Ne})});const Qe={id:`client_img_${Date.now()}_${Math.random().toString(36).slice(2,10)}`,senderType:"client",message:"",content:"",imageUrl:`data:image/jpeg;base64,${Ne}`,type:"image",timestamp:new Date().toISOString()};f(st=>[...st,Qe]),Yn(be),le({title:" ",description:"   "})}catch(Ne){console.error("Error sending image:",Ne),le({title:"",description:"   .    .",variant:"destructive"})}finally{w(!1),Ae.current&&(Ae.current.value="")}},Ie=()=>{var z;(z=Ae.current)==null||z.click()},Me=()=>{s(!1),P(0)},Ge=()=>{r||(P(0),I&&Yn(I)),s(!r)};return nt||Tn||!e?null:p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
           @keyframes pulse {
             0% {
               transform: scale(1);
               box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
             }
             70% {
               transform: scale(1.05);
               box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
             }
             100% {
               transform: scale(1);
               box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
             }
           }

           @keyframes slideIn {
             0% {
               transform: translateX(${t==="left"?"-100%":"100%"});
               opacity: 0;
             }
             100% {
               transform: translateX(0);
               opacity: 1;
             }
           }

           .chat-container {
             position: fixed;
             bottom: 40px;
             ${t}: 40px;
             z-index: 100;
             animation: slideIn 0.8s ease-out;
           }

           .chat-float {
             width: 60px;
             height: 60px;
             background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 0.9));
             color: #FFF;
             border-radius: 50px;
             text-align: center;
             font-size: 30px;
             box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
             cursor: pointer;
             transition: all 0.3s ease;
             display: flex;
             align-items: center;
             justify-content: center;
             border: 2px solid rgba(255, 255, 255, 0.3);
             outline: none;
             position: relative;
             backdrop-filter: blur(10px);
           }

           .chat-float:hover {
             transform: scale(1.1) rotate(5deg);
             box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
           }

           .chat-dialog {
             position: absolute;
             bottom: 80px;
             ${t}: 0;
             width: 350px;
             max-height: 70vh;
             background: white;
             border-radius: 16px;
             box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
             border: 1px solid rgba(59, 130, 246, 0.2);
             overflow: hidden;
             transform-origin: bottom ${t};
             animation: slideIn 0.3s ease-out;
             display: flex;
             flex-direction: column;
           }

           .messages-container {
             flex: 1;
             overflow-y: auto;
             padding: 16px;
             background: #f8fafc;
             min-height: 0;
           }

           .message {
             margin-bottom: 12px;
             padding: 8px 12px;
             border-radius: 12px;
             max-width: 80%;
             word-wrap: break-word;
           }

           .message.client {
             background: linear-gradient(135deg, #3b82f6, #2563eb);
             color: white;
             margin-left: auto;
             text-align: right;
           }

           .message.admin {
-                background: #e2e8f0;
-                color: #334155;
+                background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
+                color: #0f172a;
+                border: 2px solid #0ea5e9;
+                box-shadow: 0 2px 8px rgba(14, 165, 233, 0.2);
             margin-right: auto;
+             position: relative;
+           }
+           
+           .message.admin.new-message {
+             animation: newMessagePulse 2s ease-in-out;
+             border-color: #10b981;
+             background: linear-gradient(135deg, #f0fdf4, #dcfce7);
+             box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
+           }
+           
+           .message.admin.new-message::before {
+             content: "";
+             position: absolute;
+             top: -8px;
+             right: -8px;
+             background: #10b981;
+             color: white;
+             font-size: 10px;
+             padding: 2px 6px;
+             border-radius: 8px;
+             font-weight: bold;
+           }
+           
+           @keyframes newMessagePulse {
+             0% {
+               transform: scale(1);
+               box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
+             }
+             50% {
+               transform: scale(1.02);
+               box-shadow: 0 6px 16px rgba(16, 185, 129, 0.5);
+             }
+             100% {
+               transform: scale(1);
+               box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
+             }
            }
            margin-right: auto;
          }

          @media (max-width: 768px) {
            .chat-container {
              bottom: 80px;
              ${t}: 16px;
              pointer-events: none;
            }
            
            .chat-dialog {
              width: 300px;
              max-height: 400px;
              pointer-events: auto;
              bottom: 0;
            }
            
            .chat-float {
              display: none !important;
            }
          }
        `}),p.jsxs("div",{className:"chat-container",children:[r&&p.jsxs("div",{className:"chat-dialog",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ic,{className:"h-5 w-5"}),p.jsx("span",{className:"font-semibold",children:"   cashy link"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[i&&p.jsx(xt,{variant:"ghost",size:"sm",onClick:ce,className:"text-white hover:bg-red-500/20 h-8 w-8 p-0",title:" ",children:p.jsx(I3,{className:"h-4 w-4"})}),p.jsx(xt,{variant:"ghost",size:"sm",onClick:Me,className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:p.jsx(Oo,{className:"h-4 w-4"})})]})]}),!i&&!R?p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("h3",{className:"font-semibold text-lg",children:"    "}),p.jsx("p",{className:"text-sm text-gray-500",children:"  .    :"})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs(xt,{onClick:Wn,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[p.jsx(Ic,{className:"w-4 h-4 ml-2"}),"   "]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-white px-2 text-gray-500",children:""})})]}),p.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-medium",children:[p.jsx(Ic,{className:"w-4 h-4"}),p.jsx("span",{children:""})]}),p.jsx(nr,{dir:"ltr",placeholder:"  ...",value:c,onChange:z=>u(z.target.value),className:"mb-2 bg-white"}),p.jsx(xt,{className:"w-full bg-[#25D366] hover:bg-[#128C7E] text-white",onClick:Y,children:" "})]})]})]}):R&&!i?p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("h3",{className:"font-semibold text-lg",children:" "}),p.jsx("p",{className:"text-sm text-gray-500",children:"    "})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium mb-1 block",children:""}),p.jsx(nr,{placeholder:" ",value:C.name,onChange:z=>L({...C,name:z.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium mb-1 block",children:" "}),p.jsx(nr,{placeholder:"example@email.com",type:"email",value:C.email,onChange:z=>L({...C,email:z.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium mb-1 block",children:" "}),p.jsx(nr,{placeholder:"01xxxxxxxxx",type:"tel",value:C.phone,onChange:z=>L({...C,phone:z.target.value})})]}),p.jsx(xt,{onClick:an,className:"w-full mt-4 bg-blue-600 text-white hover:bg-blue-700",children:"  "}),p.jsx(xt,{variant:"ghost",onClick:()=>N(!1),className:"w-full",children:""})]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"messages-container",children:[h.length===0?p.jsxs("div",{className:"text-center text-gray-500 py-8",children:[p.jsx(Ic,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),p.jsx("p",{children:"   "}),p.jsx("p",{className:"text-sm",children:"   "})]}):h.map(z=>p.jsx("div",{className:`flex mb-4 ${z.senderType==="client"?"justify-end":"justify-start"}`,children:p.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${z.senderType==="client"?"bg-blue-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[z.type==="image"?p.jsxs("div",{children:[p.jsx("img",{src:z.imageUrl||"https://placehold.co/300x200?text=Image+Unavailable",alt:" ",className:"max-w-full h-auto rounded-lg mb-2 cursor-pointer",onClick:()=>z.imageUrl&&X(z.imageUrl),style:{maxHeight:"200px"}}),z.message&&p.jsx("div",{className:"text-sm",children:z.message})]}):p.jsx("div",{className:"text-sm",children:z.message||z.content||" "}),p.jsx("span",{className:"text-[10px] opacity-70 mt-1 block",children:Qn(z.timestamp)})]})},z.id)),p.jsx("div",{ref:Fe})]}),p.jsxs("div",{className:"p-4 border-t bg-white",children:[g&&p.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:" :"}),p.jsx(xt,{variant:"ghost",size:"sm",onClick:()=>{_(null),b(null),Ae.current&&(Ae.current.value="")},className:"h-6 w-6 p-0 text-gray-500 hover:text-red-500",children:p.jsx(Oo,{className:"h-4 w-4"})})]}),p.jsx("img",{src:g,alt:"",className:"max-w-full h-auto rounded-lg",style:{maxHeight:"150px"}}),p.jsx("div",{className:"flex gap-2 mt-2",children:p.jsx(xt,{onClick:ue,disabled:E,size:"sm",className:"bg-green-600 hover:bg-green-700 flex-1",children:E?" ...":" "})})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(nr,{placeholder:"  ...",value:a,onChange:z=>l(z.target.value),onKeyPress:z=>z.key==="Enter"&&qr(),className:"flex-1 text-right",dir:"rtl"}),p.jsx("input",{type:"file",ref:Ae,onChange:ye,accept:"image/*",className:"hidden"}),p.jsx(xt,{onClick:Ie,size:"sm",variant:"outline",className:"px-3",title:" ",children:p.jsx(Z4,{className:"h-4 w-4"})}),p.jsx(xt,{onClick:qr,disabled:!a.trim(),size:"sm",className:"bg-blue-600 hover:bg-blue-700 px-3",children:p.jsx(m3,{className:"h-4 w-4"})})]})]})]})]}),!et&&p.jsxs("button",{className:"chat-float",onClick:Ge,title:"  ",children:[!r&&p.jsx("div",{onClick:z=>{z.stopPropagation(),n(!1)},className:"absolute -top-1 -left-1 bg-gray-200 hover:bg-red-500 hover:text-white text-gray-600 rounded-full p-0.5 w-5 h-5 flex items-center justify-center shadow-md cursor-pointer transition-colors z-[102]",title:"",children:p.jsx(Oo,{size:12})}),!r&&S>0&&p.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center min-w-[24px] shadow-lg",children:S>99?"99+":S}),r?p.jsx(Oo,{className:"h-6 w-6"}):p.jsx(Ic,{className:"h-6 w-6"})]}),D&&p.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>X(null),children:p.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full flex items-center justify-center",onClick:z=>z.stopPropagation(),children:[p.jsx("button",{onClick:()=>X(null),className:"absolute -top-12 right-0 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 transition-colors",children:p.jsx(Oo,{className:"h-6 w-6"})}),p.jsx("img",{src:D,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"})]})}),p.jsx("audio",{ref:K,src:"https://res.cloudinary.com/dxfq3iotg/video/upload/v1557233524/success.mp3",hidden:!0})]})]})},oee={},nR=M.lazy(()=>ae(()=>import("./Index-DvSv4RQI.js"),[],import.meta.url)),Um=M.lazy(()=>ae(()=>import("./LandingPage-jZjYoDig.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),rR=M.lazy(()=>ae(()=>import("./SubscriptionsPage-EPggLBhi.js"),__vite__mapDeps([9,10,11,1,2,12,7]),import.meta.url)),sR=M.lazy(()=>ae(()=>import("./AuthPage-oEdpV9EM.js"),__vite__mapDeps([13,5,3]),import.meta.url)),$m=M.lazy(()=>ae(()=>import("./TopUpPage-D-6RvW1H.js"),__vite__mapDeps([14,15]),import.meta.url)),iR=M.lazy(()=>ae(()=>import("./AdminTopupsPage-BUK68GW_.js"),__vite__mapDeps([16,15]),import.meta.url)),oR=M.lazy(()=>ae(()=>import("./AdminNotificationsPage-D76Ipn4G.js"),__vite__mapDeps([17,18,19,20]),import.meta.url)),Bm=M.lazy(()=>ae(()=>import("./UserRegisterPage-BV_eD2tw.js"),__vite__mapDeps([21,22,23,24]),import.meta.url)),aR=M.lazy(()=>ae(()=>import("./UserAccountSetupPage-RwlQpo5g.js"),__vite__mapDeps([25,22,7]),import.meta.url)),lR=M.lazy(()=>ae(()=>import("./ForgotPasswordCodePage-B-g3FHJ-.js"),[],import.meta.url)),cR=M.lazy(()=>ae(()=>import("./DashboardLoginPage-Dy-IV51V.js"),[],import.meta.url)),uR=M.lazy(()=>ae(()=>import("./ProtectedDashboard-ALLbIFwq.js"),__vite__mapDeps([26,15,27,28,23,29]),import.meta.url)),Ip=M.lazy(()=>ae(()=>import("./ProtectedUserDashboard-BpXbe1Kx.js"),__vite__mapDeps([30,31,20]),import.meta.url)),dR=M.lazy(()=>ae(()=>import("./MerchantDashboard-B3JBbJjF.js"),__vite__mapDeps([32,33,15,34,35,36,37,38,18,39,40,23,2,41,5,42]),import.meta.url)),hR=M.lazy(()=>ae(()=>import("./PendingApprovalPage-Blkf_cIj.js"),__vite__mapDeps([43,44]),import.meta.url)),fR=M.lazy(()=>ae(()=>import("./AdminLogin-dO-e9IoV.js"),[],import.meta.url)),mR=M.lazy(()=>ae(()=>import("./ProtectedAdminDashboard-CdtsL0H6.js"),__vite__mapDeps([45,10,46,33,15,34,47,44,18,22,35,48,49,41,50,31,19,11,6,8,1,7,51,52,42,53,54,5,3,55]),import.meta.url)),pR=M.lazy(()=>ae(()=>import("./AuthTestPage-DzDfoSIS.js"),[],import.meta.url)),gR=M.lazy(()=>ae(()=>import("./ProfileSettingsPage-KxdkwGi7.js").then(t=>t.b),__vite__mapDeps([56,47,42,18,15,53,28,7,41,49,8,2]),import.meta.url)),yR=M.lazy(()=>ae(()=>import("./TransactionsPage-CXyLg4ak.js"),__vite__mapDeps([57,15,35,52,34,58,59,48,39,7,40,5,60,11,61,55,28,62,27,49,63,64,18,51,53,65,41,29,2,66]),import.meta.url)),vR=M.lazy(()=>ae(()=>import("./WalletAdditionPage-Plur751x.js"),__vite__mapDeps([67,15,2,23,68]),import.meta.url)),wR=M.lazy(()=>ae(()=>import("./ReferralsPage-Y_Pipy7S.js"),__vite__mapDeps([69,35,22,24,20,7,50,53]),import.meta.url)),_R=M.lazy(()=>ae(()=>import("./NotFound-wOeAcj0h.js"),[],import.meta.url)),ER=M.lazy(()=>ae(()=>import("./PrivacyPolicyPage-7Ubm-8RX.js"),[],import.meta.url)),ul=new _B({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=xB({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});TB({queryClient:ul,persister:t,maxAge:24*60*60*1e3})}catch{}const aee=()=>{if(!((Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return p.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:p.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:p.jsx(DE,{className:"w-5 h-5"})})})},bR=()=>{const t=ei(),{user:e,loading:n}=Ds(),r=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?p.jsx(EZ,{}):null},lee=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||n.includes("etisalat")||n.includes("e&")||/\s*|etisalat|e&|money/i.test(t)||r.includes("vodafone cash")||r.includes("etisalat cash"))}catch{return!1}},xw=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await ae(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>ko);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},SR=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await ae(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>ko);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],u=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(u.length>0){const h=u.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=u[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},IR=()=>{var Ln;const t=AV(),e=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",{profile:n,user:r}=Ds(),{shopId:s}=see(),i=ei(),o=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"&&i.pathname==="/"&&!!r;M.useEffect(()=>{(async()=>{if(Te.isNativePlatform())try{await bw.setOverlaysWebView({overlay:!1}),await bw.setStyle({style:R0.Dark}),Te.getPlatform()==="android"&&await bw.setBackgroundColor({color:"#000000"})}catch(U){console.warn("StatusBar config failed",U)}})()},[]),M.useEffect(()=>{if(!e||!(r!=null&&r.uid))return;const q=async()=>{try{const F=await SR(r.uid),Z=F,G=s||"";window.CashyAndroid&&(window.CashyAndroid.setUserId&&window.CashyAndroid.setUserId(r.uid),window.CashyAndroid.setContext&&window.CashyAndroid.setContext(G,F,Z))}catch(F){console.error("Context Sync Error",F)}};q();const U=setInterval(q,1e4);return()=>clearInterval(U)},[e,r==null?void 0:r.uid,s]),M.useEffect(()=>{const q=window.electronAPI;if(q){try{const U=localStorage.getItem("adbSmsReadingEnabled")==="true";q.toggleAdbSms&&q.toggleAdbSms(U)}catch{}q.onAdbSmsReceived&&q.onAdbSmsReceived(U=>{console.log("[App] ADB SMS Received:",U);const F={text:U.text,sender:U.sender,msisdn:U.sender,receivedAt:Date.now()};window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:F}))})}},[]);const a=i.pathname.startsWith("/user/login")||i.pathname.startsWith("/auth")||i.pathname.startsWith("/landing")||i.pathname==="/"&&!o&&!r,l=!!r&&!a||i.pathname.startsWith("/user/dashboard")||o;M.useEffect(()=>{r&&console.log("Dashboard State Check:",{path:i.pathname,isUserDashboard:l,isAuthOrLanding:a,userUid:r.uid})},[i.pathname,l,r]);const c=ec(),{toast:u}=Jl(),[h,f]=M.useState(!1),[m,_]=M.useState(null),[g,b]=M.useState(!1),[E,w]=M.useState(null),[S,P]=M.useState(!1),[x,O]=M.useState(""),[I,A]=M.useState(""),[R,N]=M.useState(null),[C,L]=M.useState(null),D=M.useRef(null),X=M.useRef(null),Ae=M.useRef(!1),ke=M.useRef(null),Fe=M.useRef(""),W=M.useRef(""),K=M.useRef(new Set);M.useEffect(()=>{try{const q=localStorage.getItem("sms_suppressed_ids")||"[]",U=Array.isArray(JSON.parse(q))?JSON.parse(q):[];K.current=new Set(U.map(F=>String(F||"")))}catch{}},[]);const[ie,le]=M.useState(!1),fe=M.useRef(n);M.useEffect(()=>{fe.current=n},[n]),nee(),M.useEffect(()=>{(async()=>{if(e)try{localStorage.getItem("hasCheckedNotificationPermission_v1")||localStorage.setItem("hasCheckedNotificationPermission_v1","true")}catch{}})();const U=F=>{};return window.addEventListener("notificationListenerStatus",U),()=>window.removeEventListener("notificationListenerStatus",U)},[u,e]),M.useEffect(()=>{if(!r)return;let q;return(async()=>{try{const{collection:F,query:Z,where:G,onSnapshot:J}=await ae(async()=>{const{collection:oe,query:de,where:he,onSnapshot:ge}=await Promise.resolve().then(()=>cr);return{collection:oe,query:de,where:he,onSnapshot:ge}},void 0,import.meta.url),{db:ne}=await ae(async()=>{const{db:oe}=await Promise.resolve().then(()=>An);return{db:oe}},void 0,import.meta.url),De=Z(F(ne,"pendingSmsPopups"),G("userId","==",r.uid),G("status","==","pending"));q=J(De,oe=>{oe.docChanges().forEach(de=>{var he,ge;if(de.type==="added"){if(de.doc.metadata.hasPendingWrites)return;const _e=de.doc.data(),Re=((ge=(he=_e.createdAt)==null?void 0:he.toMillis)==null?void 0:ge.call(he))||Date.now();if(Date.now()-Re>5*60*1e3)return;const Ce=_e.payload;if(Ce){if(Ce.popupId&&K.current.has(Ce.popupId))return;if(et({...Ce,popupId:de.doc.id}),Pe(!0),Ce.isFakeSender)try{We()}catch{}else try{st()}catch{}}}else de.type==="modified"?de.doc.data().status!=="pending"&&et(Re=>(Re==null?void 0:Re.popupId)===de.doc.id?(Pe(!1),null):Re):de.type==="removed"&&et(_e=>(_e==null?void 0:_e.popupId)===de.doc.id?(Pe(!1),null):_e)})})}catch(F){console.error("Error setting up popup listener:",F)}})(),()=>{q&&q()}},[r]);const[Le,Pe]=M.useState(!1),[Q,et]=M.useState(null),[nt,Tn]=M.useState(""),[Wn,an]=M.useState(!1),[Qn,Yn]=M.useState(!1),[Jn,qr]=M.useState(""),[Y,ce]=M.useState(""),[ye,Ke]=M.useState(!1),[ue,Ie]=M.useState(0),[Me,Ge]=M.useState(!1),[z,be]=M.useState(""),[Ne,pe]=M.useState("");M.useEffect(()=>{try{const q=(r==null?void 0:r.uid)||"default",U=localStorage.getItem(`sim1Number_${q}`)??localStorage.getItem("sim1Number")??"",F=localStorage.getItem(`sim2Number_${q}`)??localStorage.getItem("sim2Number")??"";be(U),pe(F),Fe.current=U,W.current=F}catch{}},[r==null?void 0:r.uid]);const Qe=M.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}Ge(!1);try{c("/user/login")}catch{}},[c]);M.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&Ge(!0)}catch{!r&&e&&Ge(!0)}},[r,e]);const st=M.useCallback(()=>{try{const q=window.AudioContext||window.webkitAudioContext;if(!q)return;const U=new q,F=U.createOscillator(),Z=U.createGain();F.type="sine",Z.gain.setValueAtTime(0,U.currentTime),F.connect(Z),Z.connect(U.destination);const G=U.currentTime;F.frequency.setValueAtTime(800,G),Z.gain.linearRampToValueAtTime(.15,G+.02),F.start(G),F.frequency.exponentialRampToValueAtTime(1200,G+.08),Z.gain.exponentialRampToValueAtTime(1e-5,G+.32),F.stop(G+.35)}catch{}},[]),We=M.useCallback(()=>{try{const q=window.AudioContext||window.webkitAudioContext;if(!q)return;const U=new q,F=U.createOscillator(),Z=U.createGain();F.type="sawtooth",Z.gain.setValueAtTime(.5,U.currentTime),F.connect(Z),Z.connect(U.destination);const G=U.currentTime;F.start(G);for(let J=0;J<14;J++){const ne=G+J*.5;F.frequency.setValueAtTime(600,ne),F.frequency.linearRampToValueAtTime(800,ne+.25),F.frequency.setValueAtTime(800,ne+.25),F.frequency.linearRampToValueAtTime(600,ne+.5)}F.stop(G+7)}catch{}},[]),re=q=>{try{const U=String(q||"").replace(/[^0-9+]/g,"");if(!U)return"";if(U.startsWith("+20")){const F=U.slice(3);return F.startsWith("1")?"0"+F:F}if(U.startsWith("0020")){const F=U.slice(4);return F.startsWith("1")?"0"+F:F}if(U.startsWith("20")){const F=U.slice(2);return F.startsWith("1")?"0"+F:F}return U.startsWith("0")?U:/^(10|11|12|15)/.test(U)?"0"+U:U}catch{return""}},Ye=q=>{try{const U=String(q||"");let F="receive";/(?:\s*|\s*|sent|transferred)/i.test(U)&&(F="transfer");const Z=U.match(/(?:\s*)\s+(\d+(?:[\.,]\d+)?)\s+/i)||U.match(/(?:\s*?\s*|?\s*|\s*(?:\s*)?|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let G=Z?parseFloat(String(Z[1]).replace(",",".")):0,J;F==="transfer"?J=U.match(/(?:|\s*||to)\s*[:\-\s]*([\+\d]{10,14})/i):J=U.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let ne=J?re(J[1]):void 0;const De=U.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference||\.|$))/i),oe=U.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),de=De?String(De[1]).trim():oe?String(oe[1]).trim():void 0,he=U.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),ge=U.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),_e=U.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!G||G<=0){const Ce=U.match(/Received\s*EGP\s*([0-9.,]+)/i)||U.match(/Received\s*EGP([0-9.,]+)/i);Ce&&(G=parseFloat(String(Ce[1]).replace(/,/g,"")))}if(!ne){const Ce=U.match(/from\s+([0-9+]+)/i);Ce&&(ne=re(Ce[1]))}const Re=he?String(he[1]).trim():ge?String(ge[1]).trim():_e?String(_e[1]).trim():void 0;return{amount:G,sender:ne,senderName:de,reference:Re,type:F}}catch{return{amount:0,type:"receive"}}};M.useEffect(()=>{(async()=>{var q;try{if(!Le||!Q){an(!1);return}const{auth:U}=await ae(async()=>{const{auth:J}=await Promise.resolve().then(()=>An);return{auth:J}},void 0,import.meta.url),F=((q=U.currentUser)==null?void 0:q.uid)||"",Z=F?`selectedWallet_${F}`:"selectedWallet_default",G=localStorage.getItem(Z)||"";if(!G){an(!0);return}try{const{merchantWalletService:J}=await ae(async()=>{const{merchantWalletService:oe}=await Promise.resolve().then(()=>wc);return{merchantWalletService:oe}},void 0,import.meta.url),ne=await J.getById(G),De=ne&&ne.defaultWithdrawCommission!=null;an(!De)}catch{an(!0)}}catch{an(!0)}})()},[Le,Q]);const It=async q=>{try{const{merchantWalletService:U,detectWalletFromSim:F}=await ae(async()=>{const{merchantWalletService:he,detectWalletFromSim:ge}=await Promise.resolve().then(()=>ko);return{merchantWalletService:he,detectWalletFromSim:ge}},void 0,import.meta.url),Z=(r==null?void 0:r.uid)||"";if(!Z)return;const G=`wallets_${Z}`,J=typeof localStorage<"u"?localStorage.getItem(G):null,ne=J?JSON.parse(J):[],De=await U.getByMerchantId(Z),oe=[...(Array.isArray(ne)?ne:[]).map(he=>({id:String((he==null?void 0:he.id)||""),phone:String((he==null?void 0:he.phone)||(he==null?void 0:he.msisdn)||""),isDefault:!!(he!=null&&he.isDefault)})),...(Array.isArray(De)?De:[]).map(he=>({id:String((he==null?void 0:he.id)||""),msisdn:String((he==null?void 0:he.msisdn)||""),isDefault:!!(he!=null&&he.isDefault)}))],de=await F(q||[],oe);if(de&&de.walletId)try{localStorage.setItem(`selectedWallet_${Z}`,de.walletId)}catch{}}catch{}};v.useEffect(()=>{const q=async U=>{var F,Z,G,J;try{const ne=(U==null?void 0:U.detail)||{},De=String(ne.text||"").trim(),oe=String(ne.title||"").trim();if(!De)return;if(!/vodafone|vf\-?cash|||\s*[]?\s*|\s*|instapay|received\s*egp|transaction|etisalat|e&|money|/i.test(`${oe} ${De}`)){try{Iw(ne,{toast:u})}catch{}return}const{auth:he}=await ae(async()=>{const{auth:it}=await Promise.resolve().then(()=>An);return{auth:it}},void 0,import.meta.url),ge=((F=he.currentUser)==null?void 0:F.uid)||((Z=fe.current)==null?void 0:Z.userId)||"";let _e=s||"";if(!ge){try{u({title:"  ",description:"   "})}catch{}return}if(!_e)try{const{doc:it,getDoc:ct}=await ae(async()=>{const{doc:Tt,getDoc:Ve}=await Promise.resolve().then(()=>cr);return{doc:Tt,getDoc:Ve}},void 0,import.meta.url),{db:Ot}=await ae(async()=>{const{db:Tt}=await Promise.resolve().then(()=>An);return{db:Tt}},void 0,import.meta.url),Qt=await ct(it(Ot,"profiles",ge));if(Qt.exists()){const Tt=Qt.data(),Ve=String((Tt==null?void 0:Tt.shopId)||"").trim();Ve&&(_e=Ve)}}catch{}let Re="",Ce="",ot=!1;try{const it=ge||"default";Re=(localStorage.getItem(`sim1Number_${it}`)??localStorage.getItem("sim1Number")??"").trim(),Ce=(localStorage.getItem(`sim2Number_${it}`)??localStorage.getItem("sim2Number")??"").trim();const ct=localStorage.getItem(`smsAutoRegisterEnabled_${it}`)??localStorage.getItem("smsAutoRegisterEnabled"),Ot=((G=fe.current)==null?void 0:G.smsAutoRegisterEnabled)===!0;ot=ct==="true"||Ot}catch{}try{const it=((J=fe.current)==null?void 0:J.smsReadingEnabled)!==void 0?!!fe.current.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true",ct=localStorage.getItem("adbSmsReadingEnabled")==="true";if(!it&&!ct&&!ot)return}catch{}try{const{Preferences:it}=await ae(async()=>{const{Preferences:Qt}=await Promise.resolve().then(()=>MP);return{Preferences:Qt}},void 0,import.meta.url),ct=await it.get({key:"sim1_number"}),Ot=await it.get({key:"sim2_number"});!Re&&(ct!=null&&ct.value)&&(Re=String(ct.value).trim()),!Ce&&(Ot!=null&&Ot.value)&&(Ce=String(Ot.value).trim()),!Re&&Fe.current&&(Re=Fe.current),!Ce&&W.current&&(Ce=W.current)}catch{}let Ue=[];const zt=Array.isArray(((U==null?void 0:U.detail)||{}).activeSimMsisdns)?U.detail.activeSimMsisdns.map(it=>String(it||"")):[];zt.length>0?Ue=zt:Ue=[Re,Ce].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(Ue))}catch{}let jt="";if(ne.receiverMsisdn&&(jt=String(ne.receiverMsisdn).trim()),!jt&&ne.simSlot!==void 0&&ne.simSlot!==-1){const it=Number(ne.simSlot);it===0&&Re?jt=Re:it===1&&Ce&&(jt=Ce)}try{if(!jt){const it=localStorage.getItem("lastSmsSimMsisdn")||"";it&&Ue.includes(it)&&(jt=it)}}catch{}if(jt||((ne.simSlot!==void 0&&ne.simSlot!==-1?Number(ne.simSlot):void 0)===1&&!Ce?jt="":jt=Ue[0]||""),jt)try{localStorage.setItem("lastSmsSimMsisdn",jt)}catch{}const{resolveWalletBySimOrSlot:At,bindSlotWalletMapping:Ut,merchantWalletService:rt}=await ae(async()=>{const{resolveWalletBySimOrSlot:it,bindSlotWalletMapping:ct,merchantWalletService:Ot}=await Promise.resolve().then(()=>ko);return{resolveWalletBySimOrSlot:it,bindSlotWalletMapping:ct,merchantWalletService:Ot}},void 0,import.meta.url),Xn=ge;let vt=await At({simNumbers:Ue,userId:Xn,slotIndex:ne.simSlot!==void 0&&ne.simSlot!==-1?Number(ne.simSlot):void 0});if(!vt&&Ue.length>0){try{await It(Ue)}catch{}const it=localStorage.getItem(`selectedWallet_${Xn}`)||"";if(it)try{const ct=await rt.getById(it),Ot=String((ct==null?void 0:ct.msisdn)||""),Qt=ne.simSlot!==void 0&&ne.simSlot!==-1?Number(ne.simSlot):void 0;let Tt=!0;Qt===1&&Re&&re(Ot)===re(Re)&&(Tt=!1),Qt===0&&Ce&&re(Ot)===re(Ce)&&(Tt=!1),Tt&&(!jt||re(Ot)===re(jt))&&(vt={walletId:it,msisdn:Ot})}catch{}}if(vt&&vt.walletId){try{localStorage.setItem(`selectedWallet_${Xn}`,vt.walletId)}catch{}try{Ut({userId:Xn,walletId:vt.walletId,msisdn:vt.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:vt.walletId}}))}catch{}try{const it=String(vt.msisdn||"").trim();it&&(jt=it,localStorage.setItem("lastSmsSimMsisdn",it))}catch{}}const Wt=Ye(De);if(ne.isTransfer===!0&&(Wt.type="transfer"),Wt.type==="transfer")try{if(!(localStorage.getItem("autoTransferRecord")==="true"))return}catch{}const pt=Number(Wt.amount||0);if(!pt||pt<=0){try{Iw(ne,{toast:u})}catch{}return}const Ht=(vt==null?void 0:vt.msisdn)||jt||await xw(ge),jn=ne.postedAt?ne.postedAt:Date.now(),ar=Wt.reference||`VF-${jn}`,qe={amount:pt,sender:String(Wt.sender||""),senderName:Wt.senderName,text:De,simNumber:jt,type:Wt.type};if(ot)try{await kt({...qe,reference:ar,walletMsisdn:Ht})}catch{}else{try{const{addDoc:it,collection:ct,serverTimestamp:Ot}=await ae(async()=>{const{addDoc:dt,collection:ht,serverTimestamp:ut}=await Promise.resolve().then(()=>cr);return{addDoc:dt,collection:ht,serverTimestamp:ut}},void 0,import.meta.url),{db:Qt}=await ae(async()=>{const{db:dt}=await Promise.resolve().then(()=>An);return{db:dt}},void 0,import.meta.url),Tt=await it(ct(Qt,"pendingSmsPopups"),{userId:ge,shopId:_e,payload:{...qe,reference:ar,walletMsisdn:Ht,sim1Number:Re,sim2Number:Ce},status:"pending",createdAt:Ot()}),Ve=/Received\s*EGP/i.test(String(De))?"InstaPay":/etisalat|e&|/i.test(String(De))?"Etisalat Cash":"VF-Cash";et({...qe,reference:ar,providerLabel:Ve,walletMsisdn:Ht,popupId:Tt.id})}catch{const it=/Received\s*EGP/i.test(String(De))?"InstaPay":/etisalat|e&|/i.test(String(De))?"Etisalat Cash":"VF-Cash";et({...qe,reference:ar,providerLabel:it,walletMsisdn:Ht})}Pe(!0);try{st()}catch{}}}catch{try{Iw((U==null?void 0:U.detail)||{},{toast:u})}catch{}}};try{window.addEventListener("vfNotificationReceived",q)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",q)}catch{}}},[u,s]),v.useEffect(()=>{const q=window.electronAPI;q&&typeof q.onAdbSmsReceived=="function"&&q.onAdbSmsReceived(U=>{const F={sender:U.sender,text:U.text,msisdn:U.sender,deviceId:U.deviceId,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:F}))})},[]),v.useEffect(()=>{const q=async U=>{try{const F=(U==null?void 0:U.detail)||{},Z=String(F.text||"");if(!Z)return;const G=(n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true",J=localStorage.getItem("adbSmsReadingEnabled")==="true",ne=(r==null?void 0:r.uid)||"",De=ne?`smsAutoRegisterEnabled_${ne}`:"smsAutoRegisterEnabled",de=(localStorage.getItem(De)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!G&&!J&&!de)return;const he=/Received\s*EGP/i.test(Z),ge=/etisalat|e&|/i.test(Z),_e=lee(Z,String(F.sender||F.msisdn||"")),Re=/(?:\s*?\s*|?\s*|\s*|Deposit|\s*|\s*)/i.test(Z);if(!he&&!_e&&!ge&&!Re||!ne)return;let Ce=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const ot=fe.current;let Ue=(ot==null?void 0:ot.sim1Number)||"",zt=(ot==null?void 0:ot.sim2Number)||"";Ue||(Ue=localStorage.getItem(`sim1Number_${userId}`)||localStorage.getItem("sim1Number")||""),zt||(zt=localStorage.getItem(`sim2Number_${userId}`)||localStorage.getItem("sim2Number")||""),!Ue&&Fe.current&&(Ue=Fe.current),!zt&&W.current&&(zt=W.current),Ue=String(Ue).trim(),zt=String(zt).trim();const jt=String(F.msisdn||F.sender||""),At=re(jt),Ut=Ye(Z);if(Ut.type==="transfer")try{if(!(localStorage.getItem("autoTransferRecord")==="true"))return}catch{}let rt=Number(Ut.amount||0),Xn=Ut.sender||At||String(F.sender||""),vt=Ut.senderName,Wt=Ut.reference||"";if(he){const Tt=String(Z).match(/Received\s*EGP\s*([0-9.,]+)/i);Tt&&(rt=parseFloat(String(Tt[1]).replace(/,/g,"")));const Ve=String(Z).match(/from\s+([0-9+]+)/i);Ve&&(Xn=re(Ve[1]));const dt=String(Z).match(/Ref:\s*([A-Za-z0-9\-]+)/i);dt&&(Wt=String(dt[1]).trim())}if(!rt||rt<=0)return;let pt="",Ht="";const jn=[Ue,zt].filter(Boolean).map(Tt=>re(Tt));if(At&&jn.includes(At)&&(pt=At,pt===re(Ue)?Ht="SIM 1":pt===re(zt)&&(Ht="SIM 2")),!Ht){const Tt=F==null?void 0:F.slot,Ve=Tt!=null?Number(Tt):-1;Ve===0?(Ht="SIM 1",pt=Ue?re(Ue):""):Ve===1&&(Ht="SIM 2",pt=zt?re(zt):"")}!Ht&&pt&&(pt===re(Ue)?Ht="SIM 1":pt===re(zt)&&(Ht="SIM 2"));const ar=he?"InstaPay":ge?"Etisalat Cash":"VF-Cash",qe=String(F.sender||F.msisdn||""),ct=!/VF-Cash|Vodafone|Etisalat|e&|InstaPay/i.test(qe),Ot={amount:rt,sender:Xn,senderName:vt,text:Z,simNumber:pt,simLabel:Ht,lineId:F==null?void 0:F.slot,isFakeSender:ct,type:Ut.type},Qt=de&&!ct;if(!Qt)if(et({...Ot,reference:Wt,providerLabel:ar,walletMsisdn:pt}),Pe(!0),ct)try{We()}catch{}else try{st()}catch{}(async()=>{try{const{resolveWalletBySimOrSlot:Tt,bindSlotWalletMapping:Ve,merchantWalletService:dt}=await ae(async()=>{const{resolveWalletBySimOrSlot:tt,bindSlotWalletMapping:nn,merchantWalletService:_n}=await Promise.resolve().then(()=>ko);return{resolveWalletBySimOrSlot:tt,bindSlotWalletMapping:nn,merchantWalletService:_n}},void 0,import.meta.url);let ht=Array.isArray(F.activeSimMsisdns)&&F.activeSimMsisdns.length>0?F.activeSimMsisdns.map(tt=>re(String(tt||""))):At?[At]:[];ht.length===0&&(ht=[re(Ue),re(zt)].filter(Boolean));let ut=await Tt({simNumbers:ht,subId:Number((F==null?void 0:F.subId)||-1),slotIndex:Number((F==null?void 0:F.slot)||-1),userId:ne});if(!ut&&ht.length>0){try{await It(ht)}catch{}const tt=localStorage.getItem(`selectedWallet_${ne}`)||"";if(tt)try{const nn=await dt.getById(tt),_n=String((nn==null?void 0:nn.msisdn)||"");(!pt||re(_n)===re(pt))&&(ut={walletId:tt,msisdn:_n})}catch{}}if(ut&&ut.walletId){try{localStorage.setItem(`selectedWallet_${ne}`,ut.walletId)}catch{}try{Ve({userId:ne,subId:Number((F==null?void 0:F.subId)||-1),slotIndex:Number((F==null?void 0:F.slot)||-1),walletId:ut.walletId,msisdn:ut.msisdn})}catch{}}const Pt=(ut==null?void 0:ut.msisdn)||pt||(ne?await xw(ne):"");if(et(tt=>tt?{...tt,walletMsisdn:Pt}:null),Qt)try{await kt({...Ot,reference:Wt,walletMsisdn:Pt,walletId:ut==null?void 0:ut.walletId})}catch{}else try{const{addDoc:tt,collection:nn,serverTimestamp:_n}=await ae(async()=>{const{addDoc:Nt,collection:rn,serverTimestamp:xn}=await Promise.resolve().then(()=>cr);return{addDoc:Nt,collection:rn,serverTimestamp:xn}},void 0,import.meta.url),{db:qn}=await ae(async()=>{const{db:Nt}=await Promise.resolve().then(()=>An);return{db:Nt}},void 0,import.meta.url),yt=await tt(nn(qn,"pendingSmsPopups"),{userId:ne,shopId:Ce,payload:{...Ot,reference:Wt,walletMsisdn:Pt,sim1Number:Ue,sim2Number:zt},status:"pending",createdAt:_n()});et(Nt=>Nt?{...Nt,popupId:yt.id}:null)}catch{}}catch(Tt){console.error("Background SMS processing error",Tt)}})()}catch(F){console.error("SMS Handler Error",F)}};try{window.addEventListener("mobileSmsReceived",q)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",q)}catch{}}},[u,s,n,r]),v.useEffect(()=>{},[u,s]),v.useEffect(()=>{},[u,s]);const kt=async q=>{var U,F,Z;try{const G=q||Q;if(!G)return;const{amount:J,sender:ne,text:De,simNumber:oe,senderName:de}=G,he=String(De||"");let ge=Number(J||0);const _e=typeof(q==null?void 0:q.deferredMode)=="boolean"?q.deferredMode:Qn,Re=(q==null?void 0:q.debtorName)??Jn,Ce=(q==null?void 0:q.debtorNote)??Y;try{Pe(!1)}catch{}try{}catch{}const ot=/Received\s*EGP/i.test(he)?"instapay":"vodafone_cash";if(!ge||ge<=0){const Ve=he.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(Ve&&(ge=parseFloat(String(Ve[1]).replace(",","."))),!ge||ge<=0){const dt=he.match(/Received\s*EGP\s*([0-9.,]+)/i)||he.match(/Received\s*EGP([0-9.,]+)/i);dt&&(ge=parseFloat(String(dt[1]).replace(/,/g,"")))}}let Ue=String(ne||"").trim();if(!Ue){const Ve=he.match(/\s+\s+(\d+)/i);Ue=Ve?re(Ve[1]):""}let zt=String((G==null?void 0:G.reference)||"").trim();if(!zt){const Ve=he.match(/\s*\s*([\d\.]+)/i);zt=Ve?String(Ve[1]).trim():String(Date.now())}if(!ge||ge<=0){try{u({title:"      ",variant:"destructive"})}catch{}return}const{auth:jt}=await ae(async()=>{const{auth:Ve}=await Promise.resolve().then(()=>An);return{auth:Ve}},void 0,import.meta.url),At=((U=jt.currentUser)==null?void 0:U.uid)||"";let Ut=s||"";if(!At){try{u({title:"  ",description:"   "})}catch{}return}if(!Ut)try{const{doc:Ve,getDoc:dt}=await ae(async()=>{const{doc:Pt,getDoc:tt}=await Promise.resolve().then(()=>cr);return{doc:Pt,getDoc:tt}},void 0,import.meta.url),{db:ht}=await ae(async()=>{const{db:Pt}=await Promise.resolve().then(()=>An);return{db:Pt}},void 0,import.meta.url),ut=await dt(Ve(ht,"profiles",At));if(ut.exists()){const Pt=ut.data(),tt=String((Pt==null?void 0:Pt.shopId)||"").trim();tt&&(Ut=tt)}}catch{}if(!Ut){try{u({title:"  ",description:"   "})}catch{}return}let rt=(q==null?void 0:q.walletId)||"";if(!rt)try{const{resolveWalletBySimOrSlot:Ve}=await ae(async()=>{const{resolveWalletBySimOrSlot:Pt}=await Promise.resolve().then(()=>ko);return{resolveWalletBySimOrSlot:Pt}},void 0,import.meta.url),dt=G==null?void 0:G.simLabel,ut=await Ve({simNumbers:oe?[oe]:[],userId:At,slotIndex:dt==="SIM 1"?0:dt==="SIM 2"?1:-1});ut&&ut.walletId&&(rt=ut.walletId)}catch{}if(!rt&&oe)try{const{detectWalletFromSim:Ve}=await ae(async()=>{const{detectWalletFromSim:yt}=await Promise.resolve().then(()=>ko);return{detectWalletFromSim:yt}},void 0,import.meta.url),{merchantWalletService:dt}=await ae(async()=>{const{merchantWalletService:yt}=await Promise.resolve().then(()=>wc);return{merchantWalletService:yt}},void 0,import.meta.url),ht=await dt.getByMerchantId(At),ut=localStorage.getItem(`wallets_${At}`),Pt=ut?JSON.parse(ut):[],tt=(Array.isArray(Pt)?Pt:[]).map(yt=>({id:String((yt==null?void 0:yt.id)||""),phone:String((yt==null?void 0:yt.phone)||(yt==null?void 0:yt.msisdn)||""),isDefault:!!(yt!=null&&yt.isDefault)})),nn=(Array.isArray(ht)?ht:[]).map(yt=>({id:String((yt==null?void 0:yt.id)||""),msisdn:String((yt==null?void 0:yt.msisdn)||""),isDefault:!!(yt!=null&&yt.isDefault)})),_n=[...tt,...nn],qn=await Ve([oe],_n);qn&&qn.walletId&&(rt=qn.walletId)}catch{}if(rt||(rt=await SR(At)),!rt)try{const{doc:Ve,getDoc:dt}=await ae(async()=>{const{doc:wt,getDoc:Hr}=await Promise.resolve().then(()=>cr);return{doc:wt,getDoc:Hr}},void 0,import.meta.url),{db:ht}=await ae(async()=>{const{db:wt}=await Promise.resolve().then(()=>An);return{db:wt}},void 0,import.meta.url);let ut="",Pt="";try{const wt=await dt(Ve(ht,"profiles",At));if(wt.exists()){const Hr=wt.data();ut=String((Hr==null?void 0:Hr.sim1Number)||"").trim(),Pt=String((Hr==null?void 0:Hr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:tt}=await ae(async()=>{const{detectWalletFromSim:wt}=await Promise.resolve().then(()=>ko);return{detectWalletFromSim:wt}},void 0,import.meta.url),{merchantWalletService:nn}=await ae(async()=>{const{merchantWalletService:wt}=await Promise.resolve().then(()=>wc);return{merchantWalletService:wt}},void 0,import.meta.url),_n=`wallets_${At}`,qn=localStorage.getItem(_n),yt=qn?JSON.parse(qn):[],Nt=await nn.getByMerchantId(At),rn=(Array.isArray(yt)?yt:[]).map(wt=>({id:String((wt==null?void 0:wt.id)||""),phone:String((wt==null?void 0:wt.phone)||(wt==null?void 0:wt.msisdn)||""),isDefault:!!(wt!=null&&wt.isDefault)})),xn=(Array.isArray(Nt)?Nt:[]).map(wt=>({id:String((wt==null?void 0:wt.id)||""),msisdn:String((wt==null?void 0:wt.msisdn)||""),isDefault:!!(wt!=null&&wt.isDefault)})),Tr=[...rn,...xn],Zn=oe||String(localStorage.getItem("lastSmsSimMsisdn")||"");let mt=(Zn?[Zn]:[]).filter(Boolean);mt.length===0&&(mt=[ut,Pt].filter(Boolean));const Mr=await tt(mt,Tr);if(Mr&&Mr.walletId){rt=Mr.walletId;try{localStorage.setItem(`selectedWallet_${At}`,rt)}catch{}}}catch{}if(!rt){try{u({title:"   ",description:"       "})}catch{}return}try{const Ve=At;try{localStorage.setItem(`selectedWallet_${Ve}`,rt)}catch{}try{localStorage.setItem(`selectedWallet_${Ve}_${Ut}`,rt)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:rt}}))}catch{}try{const{Preferences:dt}=await ae(async()=>{const{Preferences:ht}=await Promise.resolve().then(()=>MP);return{Preferences:ht}},void 0,import.meta.url);await dt.set({key:"selected_wallet_id",value:rt}),await dt.set({key:"current_user_id",value:Ve})}catch{}}catch{}const{recordAutoTransaction:Xn,userDataService:vt}=await ae(async()=>{const{recordAutoTransaction:Ve,userDataService:dt}=await Promise.resolve().then(()=>wc);return{recordAutoTransaction:Ve,userDataService:dt}},void 0,import.meta.url),Wt=nt&&nt.trim()!==""?Math.max(0,parseFloat(nt)):null;let pt=0;if(Wt!=null)pt=Wt;else try{const{merchantWalletService:Ve}=await ae(async()=>{const{merchantWalletService:ut}=await Promise.resolve().then(()=>wc);return{merchantWalletService:ut}},void 0,import.meta.url),dt=await Ve.getById(String(rt)),ht=dt&&dt.defaultWithdrawCommission;if(ht!=null)pt=Math.round((Number(ht)||0)*Number(ge)/1e3*100)/100;else{const{calculateCommission:ut}=await ae(async()=>{const{calculateCommission:Pt}=await Promise.resolve().then(()=>ea);return{calculateCommission:Pt}},void 0,import.meta.url);pt=ut(Number(ge),"receive")}}catch{const{calculateCommission:Ve}=await ae(async()=>{const{calculateCommission:dt}=await Promise.resolve().then(()=>ea);return{calculateCommission:dt}},void 0,import.meta.url);pt=Ve(Number(ge),"receive")}try{const{walletDailyLimitsService:Ve}=await ae(async()=>{const{walletDailyLimitsService:ht}=await Promise.resolve().then(()=>Ug);return{walletDailyLimitsService:ht}},void 0,import.meta.url),dt=await Ve.canPerformOperation(String(rt),Math.max(0,Number(ge||0)),"withdraw");if(!dt.canPerform)try{u({title:"  ",description:String(dt.message||"      "),variant:"destructive"})}catch{}}catch{}const Ht=zt||`${he}|${Date.now()}`,jn=oe||String(localStorage.getItem("lastSmsSimMsisdn")||""),qe=String((G==null?void 0:G.walletMsisdn)||"").trim()||jn||await xw(At)||"",it=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(_e)try{const Ve=await vt.getUserData(At),dt=Array.isArray(Ve==null?void 0:Ve.debts)?Ve.debts:[],ht=it==="add"?Number(ge)+Number(pt):Number(ge),ut={id:`DEBT-${Date.now()}`,debtorName:Re||de||Ue||"",amount:Math.round(Number(ht)*100)/100,reason:Ce||"  VodafoneCash",customerId:void 0,mobile:Ue,status:"pending",createdAt:new Date},Pt=[ut,...dt];await vt.updateUserData(At,{debts:Pt});try{const tt=pt;await vt.saveUserTransaction(At,{type:"withdraw",amount:ge,withdrawnAmount:ge,commission:tt,status:"pending",createdAt:new Date,senderMsisdn:Ue,receiverMsisdn:qe,senderName:de,walletId:rt,fromWallet:rt,lineId:qe,provider:ot,reference:Ht,transactionId:`DEFER-${Date.now()}`,linkedDebtId:ut.id})}catch{}try{const tt=(q==null?void 0:q.popupId)||(Q==null?void 0:Q.popupId)||"";if(tt){const{doc:nn,updateDoc:_n,serverTimestamp:qn}=await ae(async()=>{const{doc:Nt,updateDoc:rn,serverTimestamp:xn}=await Promise.resolve().then(()=>cr);return{doc:Nt,updateDoc:rn,serverTimestamp:xn}},void 0,import.meta.url),{db:yt}=await ae(async()=>{const{db:Nt}=await Promise.resolve().then(()=>An);return{db:Nt}},void 0,import.meta.url);try{await _n(nn(yt,"pendingSmsPopups",tt),{status:"confirmed",confirmedAt:qn()})}catch{}try{(Z=(F=K.current)==null?void 0:F.add)==null||Z.call(F,tt);const Nt=Array.from(K.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Nt))}catch{}}}catch{}try{u({title:"  ",description:"      "})}catch{}return}catch{}Pe(!1),et(null);const ct=(G==null?void 0:G.type)==="transfer"?"send":"withdraw";try{u({title:ct==="send"?"  ...":"  ..."})}catch{}const Ot=`TX-${Date.now()}`,Qt=Math.max(0,Number(ge||0)),Tt=Math.max(0,pt);try{const Ve=`cashBalance_${At}_${Ut||"main"}`,dt=`walletBalances_${At}_${Ut||"main"}`,ht=localStorage.getItem(Ve),ut=localStorage.getItem(dt);let Pt=ht?parseFloat(ht):0,tt=ut?JSON.parse(ut):{};ct==="send"?(tt[rt]=(Number(tt[rt])||0)-Qt,Pt=Pt+Qt+Tt):(tt[rt]=(Number(tt[rt])||0)+Qt,Pt=Pt-Qt+Tt);const nn={id:Ot,type:ct,senderPhone:ct==="send"?qe:Ue,receiverPhone:ct==="send"?Ue:qe,amount:ge,status:"completed",createdAt:new Date,withdrawnAmount:ge,commission:Tt,fromWallet:rt,senderName:de,provider:ot,reference:Ht,shopName:"  ()"};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{delta:{amount:Qt,commission:Tt,walletId:rt,type:ct},limitUpdate:{walletId:rt,amount:Qt,type:ct}}}))}catch(Ve){console.error("Optimistic update failed",Ve)}(async()=>{var dt,ht,ut,Pt;let Ve="";try{Ve=await Xn({shopId:Ut,lineId:qe,walletId:rt,amount:ge,note:"SMS-ManualConfirm",provider:ot,createdBy:At,senderMsisdn:Ue,senderName:de,reference:Ht,text:he,txnType:ct==="send"?"send":"receive"});try{const tt=(q==null?void 0:q.popupId)||(Q==null?void 0:Q.popupId)||"";if(tt){const{doc:nn,updateDoc:_n,serverTimestamp:qn}=await ae(async()=>{const{doc:Nt,updateDoc:rn,serverTimestamp:xn}=await Promise.resolve().then(()=>cr);return{doc:Nt,updateDoc:rn,serverTimestamp:xn}},void 0,import.meta.url),{db:yt}=await ae(async()=>{const{db:Nt}=await Promise.resolve().then(()=>An);return{db:Nt}},void 0,import.meta.url);try{await _n(nn(yt,"pendingSmsPopups",tt),{status:"confirmed",confirmedAt:qn()})}catch{}try{(ht=(dt=K.current)==null?void 0:dt.add)==null||ht.call(dt,tt);const Nt=Array.from(K.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Nt))}catch{}}}catch{}}catch(tt){console.error(tt)}try{const tt=Math.max(0,Number(ge||0)),{doc:nn,getDoc:_n,updateDoc:qn}=await ae(async()=>{const{doc:mt,getDoc:Mr,updateDoc:wt}=await Promise.resolve().then(()=>cr);return{doc:mt,getDoc:Mr,updateDoc:wt}},void 0,import.meta.url),{db:yt}=await ae(async()=>{const{db:mt}=await Promise.resolve().then(()=>An);return{db:mt}},void 0,import.meta.url),Nt=nn(yt,"dashboardData",Ut),rn=await _n(Nt);let xn=rn.exists()?Number(((ut=rn.data())==null?void 0:ut.cashBalance)||0):0;const Tr=rn.exists()?((Pt=rn.data())==null?void 0:Pt.walletBalances)||{}:{},Zn=Number(Tr[rt]||0);ct==="send"?(Tr[rt]=Zn-tt,xn=xn+tt+Math.max(0,pt)):(Tr[rt]=Zn+tt,xn=xn-tt+Math.max(0,pt)),await qn(Nt,{cashBalance:xn,walletBalances:Tr,lastUpdated:new Date().toISOString()});try{const mt={id:Ve||`TX-${Date.now()}`,type:ct,senderPhone:ct==="send"?qe:Ue,receiverPhone:ct==="send"?Ue:qe,amount:ge,status:"completed",createdAt:new Date,withdrawnAmount:ge,commission:pt,fromWallet:rt,senderName:de,provider:ot,reference:Ht,shopName:" "};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{cashBalance:xn,walletBalances:Tr,newTransaction:mt}}))}catch{}try{const{walletDailyLimitsService:mt}=await ae(async()=>{const{walletDailyLimitsService:Mr}=await Promise.resolve().then(()=>Ug);return{walletDailyLimitsService:Mr}},void 0,import.meta.url);await mt.updateUsage(String(rt),tt,ct);try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(rt)}}))}catch{}}catch{}}catch{}(async()=>{try{const tt=pt;await vt.saveUserTransaction(At,{type:ct,amount:ge,withdrawnAmount:ge,commission:tt,status:"completed",createdAt:new Date,senderMsisdn:ct==="send"?qe:Ue,receiverMsisdn:ct==="send"?Ue:qe,senderName:de,walletId:rt,fromWallet:rt,lineId:qe,provider:ot,reference:Ht,transactionId:Ve||Ot});try{window.dispatchEvent(new CustomEvent("transaction-created"))}catch{}}catch{}})(),ul.invalidateQueries({queryKey:["dashboardData"]}),ul.invalidateQueries({queryKey:["transactions"]}),ul.invalidateQueries({queryKey:["walletDailyLimits"]}),ul.invalidateQueries({queryKey:["wallets"]}),ul.invalidateQueries({queryKey:["user-stats"]});try{const tt=ct==="send"?`     ${Ve||Ot}`:`     ${Ve||Ot}`;u({title:tt})}catch{}})()}catch(G){try{u({title:String((G==null?void 0:G.message)||"  "),variant:"destructive"})}catch{}}};v.useEffect(()=>{try{eR.start()}catch{}return()=>{try{eR.stop()}catch{}}},[]),v.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const q=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),U=String(localStorage.getItem("android_installed_version")||"").trim(),F=localStorage.getItem("android_last_ack_code"),Z=localStorage.getItem("android_installed_code"),G=F?Number(F):null,J=Z?Number(Z):null,ne=q||U,De=G??J??null;ne&&O(ne),De&&L(De);const{doc:oe,getDoc:de}=await ae(async()=>{const{doc:_e,getDoc:Re}=await Promise.resolve().then(()=>cr);return{doc:_e,getDoc:Re}},void 0,import.meta.url),{db:he}=await ae(async()=>{const{db:_e}=await Promise.resolve().then(()=>An);return{db:_e}},void 0,import.meta.url),ge=await de(oe(he,"profiles",r.uid));if(ge.exists()){const _e=ge.data(),Re=String((_e==null?void 0:_e.lastAckAndroidVersion)||(_e==null?void 0:_e.androidInstalledVersion)||(_e==null?void 0:_e.lastAckUpdateId)||"").trim(),Ce=typeof(_e==null?void 0:_e.lastAckAndroidCode)=="number"?_e.lastAckAndroidCode:typeof(_e==null?void 0:_e.androidInstalledCode)=="number"?_e.androidInstalledCode:null,ot=(zt,jt)=>{const At=String(zt||"").replace(/^v/i,"").split(".").map(rt=>parseInt(rt,10)||0),Ut=String(jt||"").replace(/^v/i,"").split(".").map(rt=>parseInt(rt,10)||0);for(let rt=0;rt<Math.max(At.length,Ut.length);rt++){const Xn=At[rt]||0,vt=Ut[rt]||0;if(Xn>vt)return 1;if(Xn<vt)return-1}return 0};let Ue=!1;if(typeof Ce=="number"&&typeof De=="number"?Ue=Ce>De:typeof Ce=="number"&&De==null?Ue=!0:Re&&ne?Ue=ot(Re,ne)>0:Re&&!ne&&(Ue=!0),Ue){if(Re){try{localStorage.setItem("android_installed_version",Re)}catch{}O(Re)}if(typeof Ce=="number"){try{localStorage.setItem("android_installed_code",String(Ce))}catch{}L(Ce)}}else if(typeof Ce=="number"&&De==null){try{localStorage.setItem("android_installed_code",String(Ce))}catch{}L(Ce)}}}catch{}})()},[r==null?void 0:r.uid]),v.useEffect(()=>{try{const U=String((window==null?void 0:window.__nativeAppVersion)||"").trim();U&&A(U);const F=window==null?void 0:window.__nativeAppVersionCode;if(typeof F=="number"){N(F);try{localStorage.setItem("android_installed_code",String(F))}catch{}}try{U&&localStorage.setItem("android_installed_version",U)}catch{}}catch{}const q=U=>{var F,Z;try{const G=String((((F=U==null?void 0:U.detail)==null?void 0:F.version)??"")||"").trim(),J=(Z=U==null?void 0:U.detail)==null?void 0:Z.code;G&&A(G);try{G&&localStorage.setItem("android_installed_version",G)}catch{}typeof J=="number"&&N(J)}catch{}};try{window.addEventListener("native-app-version",q)}catch{}return()=>{try{window.removeEventListener("native-app-version",q)}catch{}}},[]),v.useEffect(()=>{try{const q=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",U=String(I||"").trim();if(!q||!U||!(r!=null&&r.uid))return;(async()=>{try{const{doc:F,setDoc:Z,serverTimestamp:G}=await ae(async()=>{const{doc:ne,setDoc:De,serverTimestamp:oe}=await Promise.resolve().then(()=>cr);return{doc:ne,setDoc:De,serverTimestamp:oe}},void 0,import.meta.url),{db:J}=await ae(async()=>{const{db:ne}=await Promise.resolve().then(()=>An);return{db:ne}},void 0,import.meta.url);await Z(F(J,"profiles",r.uid),{androidInstalledVersion:U,androidInstalledAt:G()},{merge:!0});try{localStorage.setItem("android_installed_version",U)}catch{}}catch{}})()}catch{}},[I,r==null?void 0:r.uid]),v.useEffect(()=>{Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android"&&(async()=>{try{await ae(()=>import("./ProtectedUserDashboard-BpXbe1Kx.js"),__vite__mapDeps([30,31,20]),import.meta.url),await ae(()=>import("./UserDashboardPage-DGugjAJx.js").then(U=>U.U),__vite__mapDeps([70,56,47,42,18,15,53,28,7,41,49,8,2,35,52,34,33,46,44,31,19,27,11,29,59,23,40,1]),import.meta.url),await ae(()=>Promise.resolve().then(()=>vZ),void 0,import.meta.url),await ae(()=>import("./ProfileSettingsPage-KxdkwGi7.js").then(U=>U.b),__vite__mapDeps([56,47,42,18,15,53,28,7,41,49,8,2]),import.meta.url),await ae(()=>import("./TransactionsPage-CXyLg4ak.js"),__vite__mapDeps([57,15,35,52,34,58,59,48,39,7,40,5,60,11,61,55,28,62,27,49,63,64,18,51,53,65,41,29,2,66]),import.meta.url)}catch{}})()},[]),v.useEffect(()=>{if(!t)return;const q=document.createElement("style");q.setAttribute("data-disable-pull-to-refresh","true"),q.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(q);let U=0,F=null;const Z=J=>{var ne,De;U=((De=(ne=J.touches)==null?void 0:ne[0])==null?void 0:De.clientY)||0,F=J.target},G=J=>{var _e,Re;const ne=((Re=(_e=J.touches)==null?void 0:_e[0])==null?void 0:Re.clientY)||0,De=document.scrollingElement||document.documentElement,oe=De.scrollTop||window.scrollY||0,de=De.scrollHeight-De.clientHeight||0,he=F||null,ge=(()=>{let Ce=he;for(;Ce&&Ce!==document.body;){const Ue=window.getComputedStyle(Ce).overflowY;if((Ue==="auto"||Ue==="scroll")&&Ce.scrollHeight>Ce.clientHeight)return!0;Ce=Ce.parentElement}return!1})();!ge&&oe<=0&&ne>U&&J.cancelable&&J.preventDefault(),!ge&&oe>=de&&ne<U&&J.cancelable&&J.preventDefault()};return document.addEventListener("touchstart",Z,{passive:!0}),document.addEventListener("touchmove",G,{passive:!1}),()=>{document.removeEventListener("touchstart",Z),document.removeEventListener("touchmove",G);try{document.head.removeChild(q)}catch{}}},[t]),v.useEffect(()=>{if(!((Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"))return;try{const Z=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=Z,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const Z=(window.location.assign||(G=>{})).bind(window.location);window.__originalAssign=Z,window.location.assign=G=>{try{if(String(G||"").startsWith("/user/dashboard")){c("/user/dashboard");return}}catch{}try{Z(G)}catch{}}}catch{}let U=null,F=!1;return(async()=>{try{const{listenAndroidUpdates:Z}=await ae(async()=>{const{listenAndroidUpdates:G}=await Promise.resolve().then(()=>NZ);return{listenAndroidUpdates:G}},void 0,import.meta.url);U=Z(G=>{if(F)return;const J=String((G==null?void 0:G.version)||"").trim(),ne=String((G==null?void 0:G.url)||"").trim(),De=String((G==null?void 0:G.notes)||"").trim(),oe=!!(G!=null&&G.force),de=typeof(G==null?void 0:G.code)=="number"?G.code:void 0,he=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),ge=String(x||he||"").trim(),_e=(vt,Wt)=>{const pt=String(vt||"").replace(/^v/i,"").split(".").map(jn=>parseInt(jn,10)||0),Ht=String(Wt||"").replace(/^v/i,"").split(".").map(jn=>parseInt(jn,10)||0);for(let jn=0;jn<Math.max(pt.length,Ht.length);jn++){const ar=pt[jn]||0,qe=Ht[jn]||0;if(ar>qe)return 1;if(ar<qe)return-1}return 0},Re=String(I||"").trim(),Ce=String(localStorage.getItem("android_installed_version")||"").trim(),ot=localStorage.getItem("android_installed_code"),Ue=ot?Number(ot):null,zt=[R,C,Ue].filter(vt=>typeof vt=="number").reduce((vt,Wt)=>vt===void 0?Wt:Math.max(vt,Wt),void 0),jt=typeof de=="number"&&typeof zt=="number"?de>zt:void 0,At=(()=>{const vt=[Re,ge,Ce].filter(Boolean);return vt.length===0?"":vt.reduce((Wt,pt)=>_e(pt,Wt)>0?pt:Wt)})(),Ut=_e(J,At)>0;if(!!ne&&(!!J||typeof de=="number")&&(jt!==void 0?jt:Ut)){const vt="   ",Wt=`${De?De+`
`:""} : ${J}`;_({title:vt,message:Wt,apkUrl:ne,force:oe,versionId:J,versionCode:de}),f(!0);try{const pt=localStorage.getItem("android_update_ready_version"),Ht=localStorage.getItem("android_update_ready_code");(pt&&pt===J||Ht&&de&&String(de)===Ht)&&P(!0)}catch{}}else try{f(!1)}catch{}})}catch{}})(),()=>{F=!0;try{typeof U=="function"&&U()}catch{}}},[x,I]),v.useEffect(()=>{if(r!=null&&r.uid)try{const q=localStorage.getItem("android_update_ready_version"),U=localStorage.getItem("android_update_ready_code"),F=String(I||"").trim(),Z=R,G=q&&F&&F===q,J=U&&Z&&String(Z)===U;(G||J)&&(async()=>{try{const{doc:ne,setDoc:De,serverTimestamp:oe}=await ae(async()=>{const{doc:ge,setDoc:_e,serverTimestamp:Re}=await Promise.resolve().then(()=>cr);return{doc:ge,setDoc:_e,serverTimestamp:Re}},void 0,import.meta.url),{db:de}=await ae(async()=>{const{db:ge}=await Promise.resolve().then(()=>An);return{db:ge}},void 0,import.meta.url),he={lastAckAndroidVersion:F||q,androidInstalledVersion:F||q,lastAckAt:oe(),androidInstalledAt:oe()};Z&&(he.lastAckAndroidCode=Z,he.androidInstalledCode=Z),await De(ne(de,"profiles",r.uid),he,{merge:!0}),localStorage.removeItem("android_update_ready_version"),localStorage.removeItem("android_update_ready_code"),F&&localStorage.setItem("android_last_ack_version_id",F),F&&localStorage.setItem("android_installed_version",F),Z&&localStorage.setItem("android_last_ack_code",String(Z)),Z&&localStorage.setItem("android_installed_code",String(Z)),f(!1)}catch{}})()}catch{}},[r==null?void 0:r.uid,I,R]),v.useEffect(()=>{const q=F=>{const Z=(F==null?void 0:F.detail)||{};try{D.current&&(clearTimeout(D.current),D.current=null)}catch{}try{X.current&&(clearInterval(X.current),X.current=null)}catch{}b(!0),w({percent:Z.percent??null,downloaded:Z.downloaded??0,total:Z.total??0})},U=()=>{try{D.current&&(clearTimeout(D.current),D.current=null)}catch{}try{X.current&&(clearInterval(X.current),X.current=null)}catch{}b(!1),P(!0),w({percent:100,downloaded:((E==null?void 0:E.total)??(E==null?void 0:E.downloaded)??0)||0,total:(E==null?void 0:E.total)??0});try{const F=String((m==null?void 0:m.versionId)||"").trim(),Z=m==null?void 0:m.versionCode;if(F)try{localStorage.setItem("android_update_ready_version",F)}catch{}if(typeof Z=="number")try{localStorage.setItem("android_update_ready_code",String(Z))}catch{}}catch{}};return window.addEventListener("androidUpdateProgress",q),window.addEventListener("androidUpdateDownloaded",U),()=>{window.removeEventListener("androidUpdateProgress",q),window.removeEventListener("androidUpdateDownloaded",U)}},[]),M.useEffect(()=>{g&&(E!=null&&E.percent)&&E.percent>=99&&window.dispatchEvent(new CustomEvent("androidUpdateDownloaded"))},[E,g]),v.useEffect(()=>{let q=!0;return(async()=>{var U;try{const{auth:F}=await ae(async()=>{const{auth:_e}=await Promise.resolve().then(()=>An);return{auth:_e}},void 0,import.meta.url),Z=((U=F.currentUser)==null?void 0:U.uid)||"";if(!Z)return;const{db:G}=await ae(async()=>{const{db:_e}=await Promise.resolve().then(()=>An);return{db:_e}},void 0,import.meta.url),{collection:J,query:ne,where:De,onSnapshot:oe,deleteDoc:de}=await ae(async()=>{const{collection:_e,query:Re,where:Ce,onSnapshot:ot,deleteDoc:Ue}=await Promise.resolve().then(()=>cr);return{collection:_e,query:Re,where:Ce,onSnapshot:ot,deleteDoc:Ue}},void 0,import.meta.url),he=ne(J(G,"pendingSmsPopups"),De("userId","==",Z),De("status","==","pending"),limit(20)),ge=oe(he,_e=>{var Re,Ce,ot,Ue,zt,jt,At,Ut,rt,Xn,vt,Wt,pt,Ht;if(q)try{const jn=typeof _e.docChanges=="function"?_e.docChanges():[];console.log("Web Popup: Snapshot received",jn.length,"changes");for(const ar of jn){if(ar.type==="added"){const qe=ar.doc.data()||{},it=ar.doc.id;console.log("Web Popup: Received document",it,qe),(Ce=(Re=K.current)==null?void 0:Re.has)!=null&&Ce.call(Re,it)&&console.log("Web Popup: ID is in suppressed list",it);try{const Zn=qe.createdAt||qe.timestamp||(qe.payload||{}).createdAt||(qe.payload||{}).timestamp,mt=Zn&&typeof Zn.toMillis=="function"?Zn.toMillis():typeof qe.createdAtMs=="number"?qe.createdAtMs:typeof(qe.payload||{}).createdAtMs=="number"?(qe.payload||{}).createdAtMs:null;if(typeof mt=="number"&&mt<Date.now()-36e5){console.log("Web Popup: Cleaning up old popup",it),de(ar.doc.ref).catch(()=>{});continue}}catch{}let ct=qe.amount??((ot=qe.payload)==null?void 0:ot.amount)??null,Ot=qe.sender??((Ue=qe.payload)==null?void 0:Ue.sender)??"";const Qt=qe.senderName??((zt=qe.payload)==null?void 0:zt.senderName)??"";let Tt=qe.reference??((jt=qe.payload)==null?void 0:jt.reference)??"";const Ve=qe.text??((At=qe.payload)==null?void 0:At.text)??"";let dt=qe.simNumber??((Ut=qe.payload)==null?void 0:Ut.simNumber)??"",ht=qe.simSlot??((rt=qe.payload)==null?void 0:rt.simSlot);ht==null&&(ht=qe.slot??((Xn=qe.payload)==null?void 0:Xn.slot)),ht==null&&(ht=qe.sim_slot??((vt=qe.payload)==null?void 0:vt.sim_slot)),ht==null&&(ht=qe.lineId??((Wt=qe.payload)==null?void 0:Wt.lineId));const ut=ht!=null?String(ht):"",Pt=(r==null?void 0:r.uid)||"default";let tt=localStorage.getItem(`sim1Number_${Pt}`)??localStorage.getItem("sim1Number")??"",nn=localStorage.getItem(`sim2Number_${Pt}`)??localStorage.getItem("sim2Number")??"";const _n=qe.payload||{},qn=_n.sim1Number||_n.sim1||qe.sim1Number||"",yt=_n.sim2Number||_n.sim2||qe.sim2Number||"";qn&&(tt=String(qn).trim(),be(tt)),yt&&(nn=String(yt).trim(),pe(nn));let Nt=dt,rn="";ut==="1"?(rn="SIM 2",nn&&(Nt=nn)):(ut==="0"||!ut)&&(rn="SIM 1",tt&&(Nt=tt));const xn=qe.walletMsisdn??((pt=qe.payload)==null?void 0:pt.walletMsisdn)??"";let Tr="VF-Cash";if(/Received\s*EGP/i.test(String(Ve))){Tr="InstaPay";const Zn=String(Ve).match(/Received\s*EGP\s*([0-9.,]+)/i);Zn&&(ct=parseFloat(String(Zn[1]).replace(/,/g,"")));const mt=String(Ve).match(/from\s+([0-9+]+)/i);mt&&(Ot=re(mt[1]));const Mr=String(Ve).match(/Ref:\s*([A-Za-z0-9\-]+)/i);Mr&&(Tt=String(Mr[1]).trim())}if(q){console.log("Web Popup: Opening modal for",it);const Zn=!!qe.isFakeSender||!!((Ht=qe.payload)!=null&&Ht.isFakeSender);et({amount:Number(ct||0),sender:String(Ot||""),senderName:Qt,reference:String(Tt||""),text:Ve,simNumber:xn||Nt,simLabel:rn,walletMsisdn:xn,providerLabel:Tr,popupId:it,sim1Number:tt,sim2Number:nn,isFakeSender:Zn}),Pe(!0);try{u({title:" ",description:`   ${ct}  ${Ot}`})}catch{}if(Zn)try{We()}catch{}else try{st()}catch(mt){console.error("PlayBell failed",mt)}}}ar.type}}catch{}});ke.current=ge}catch{}})(),()=>{q=!1;try{const U=ke.current;typeof U=="function"&&U()}catch{}}},[r==null?void 0:r.uid]),v.useEffect(()=>{const q=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"||/android/i.test(navigator.userAgent.toLowerCase()),U=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(q||U)return;let F=!1;return(async()=>{try{const Z="0.0.0",G=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!G.ok)return;const J=await G.json(),ne=String((J==null?void 0:J.version)||"0.0.0"),De=!!(J!=null&&J.force);if(!F&&((de,he)=>{const ge=String(de).split(".").map(Re=>parseInt(Re,10)||0),_e=String(he).split(".").map(Re=>parseInt(Re,10)||0);for(let Re=0;Re<Math.max(ge.length,_e.length);Re++){const Ce=ge[Re]||0,ot=_e[Re]||0;if(Ce>ot)return 1;if(Ce<ot)return-1}return 0})(ne,Z)>0){if(De){try{window.location.reload()}catch{}return}try{u({title:"  ",description:` ${ne}      `})}catch{}}}catch{}})(),()=>{F=!0}},[]),v.useEffect(()=>{if(Le)try{const q=(r==null?void 0:r.uid)||"default",U=localStorage.getItem(`sim1Number_${q}`)??localStorage.getItem("sim1Number")??"",F=localStorage.getItem(`sim2Number_${q}`)??localStorage.getItem("sim2Number")??"";be(U),pe(F)}catch{}},[Le,r==null?void 0:r.uid]);const On=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),Ir=(()=>{const q=(F,Z)=>{const G=String(F||"").replace(/^v/i,"").split(".").map(ne=>parseInt(ne,10)||0),J=String(Z||"").replace(/^v/i,"").split(".").map(ne=>parseInt(ne,10)||0);for(let ne=0;ne<Math.max(G.length,J.length);ne++){const De=G[ne]||0,oe=J[ne]||0;if(De>oe)return 1;if(De<oe)return-1}return 0},U=[I,x,On].filter(Boolean);return U.length===0?"":U.reduce((F,Z)=>q(Z,F)>0?Z:F)})();return p.jsxs(p.Fragment,{children:[p.jsx(Pl,{open:Me,onOpenChange:()=>{},children:p.jsxs(pa,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:q=>{try{q.preventDefault()}catch{}},onEscapeKeyDown:q=>{try{q.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[p.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),p.jsx(ga,{className:"text-center",children:p.jsxs("div",{className:"flex items-center justify-center gap-3",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:p.jsx(OE,{className:"w-6 h-6"})}),p.jsx(ya,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),p.jsx("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:p.jsxs("div",{className:"mt-4 text-center text-gray-700 leading-relaxed",children:[p.jsx("p",{children:"   .                    ."}),p.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"        ."})]})}),p.jsx("div",{className:"mt-4",children:p.jsx(xt,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Qe,children:"  "})})]})}),(()=>{try{const q=(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android",U=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),ie&&(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"&&p.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:p.jsx("span",{className:"text-2xl",children:"!"})}),p.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),p.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),p.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:p.jsx(xt,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),h&&m&&p.jsx(Pl,{open:h,onOpenChange:q=>{m!=null&&m.force||f(q)},children:p.jsxs(pa,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[p.jsxs(ga,{className:"text-center",children:[p.jsx(ya,{className:"text-base md:text-lg font-bold text-gray-900",children:m.title}),p.jsx(Lg,{className:"text-sm text-gray-700 whitespace-pre-line",children:m.message}),p.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:Ir?`  : v${Ir}`:""})]}),p.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!m.force&&!g&&!S&&p.jsx(xt,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>f(!1),children:""}),!S&&p.jsx(xt,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const q=String((m==null?void 0:m.versionId)||"").trim(),U=m==null?void 0:m.versionCode;if(q)try{localStorage.setItem("android_last_ack_version_id",q)}catch{}if(typeof U=="number")try{localStorage.setItem("android_last_ack_code",String(U))}catch{}if((async()=>{try{if(r!=null&&r.uid&&q){const{doc:Z,setDoc:G,serverTimestamp:J}=await ae(async()=>{const{doc:oe,setDoc:de,serverTimestamp:he}=await Promise.resolve().then(()=>cr);return{doc:oe,setDoc:de,serverTimestamp:he}},void 0,import.meta.url),{db:ne}=await ae(async()=>{const{db:oe}=await Promise.resolve().then(()=>An);return{db:oe}},void 0,import.meta.url),De={lastAckAndroidVersion:q,lastAckAt:J()};typeof U=="number"&&(De.lastAckAndroidCode=U),await G(Z(ne,"profiles",r.uid),De,{merge:!0})}}catch{}})(),(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"){const Z=m.apkUrl,G=`cashy://update?url=${encodeURIComponent(Z)}`;b(!0),w({percent:0,downloaded:0,total:0});try{X.current&&clearInterval(X.current),X.current=setInterval(()=>{w(J=>{const ne=typeof(J==null?void 0:J.percent)=="number"?J.percent:0,De=Ae.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(ne+De))),downloaded:(J==null?void 0:J.downloaded)??0,total:(J==null?void 0:J.total)??0}})},600)}catch{}window.location.href=G;try{D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{try{Ae.current=!1}catch{}try{D.current=null}catch{}},8e3)}catch{}}else{const Z=m.apkUrl;try{window.open(Z,"_blank")}catch{}}}catch{}},children:g?" ...":" "}),S&&p.jsx(xt,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{(Te==null?void 0:Te.isNativePlatform)&&Te.getPlatform()==="android"&&(f(!1),window.location.href="cashy://applyUpdate")}catch{}},children:" "})]}),g&&p.jsxs("div",{className:"mt-3 text-center",children:[p.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:p.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((E==null?void 0:E.percent)||0)))}%`}})}),p.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((E==null?void 0:E.percent)||0),"%"]})]})]})}),!!r&&Le&&p.jsx(Pl,{open:Le,onOpenChange:async q=>{q&&Pe(!0)},children:p.jsxs(pa,{className:"sm:max-w-[420px] rounded-2xl shadow-xl z-[9999]",onInteractOutside:q=>{q.preventDefault()},onEscapeKeyDown:q=>{q.preventDefault()},hideClose:!0,children:[p.jsxs("div",{className:"absolute left-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground cursor-pointer z-50",onClick:async()=>{if(Pe(!1),Q!=null&&Q.popupId)try{const{db:q}=await ae(async()=>{const{db:G}=await Promise.resolve().then(()=>An);return{db:G}},void 0,import.meta.url),{doc:U,updateDoc:F,serverTimestamp:Z}=await ae(async()=>{const{doc:G,updateDoc:J,serverTimestamp:ne}=await Promise.resolve().then(()=>cr);return{doc:G,updateDoc:J,serverTimestamp:ne}},void 0,import.meta.url);await F(U(q,"pendingSmsPopups",Q.popupId),{status:"dismissed",dismissedAt:Z()})}catch{}},children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",children:[p.jsx("path",{d:"M18 6 6 18"}),p.jsx("path",{d:"m6 6 12 12"})]}),p.jsx("span",{className:"sr-only",children:"Close"})]}),p.jsxs(ga,{children:[p.jsx(ya,{children:Q!=null&&Q.providerLabel?p.jsxs(p.Fragment,{children:["   ",p.jsx("span",{className:"text-red-600",children:Q.providerLabel})]}):"   "}),p.jsx(Lg,{children:(Q==null?void 0:Q.isFakeSender)&&p.jsxs("div",{className:"mt-2 p-3 bg-red-100 border border-red-400 rounded text-red-800 text-right text-sm font-bold animate-pulse",children:[" :        (",Q.sender,")!",p.jsx("br",{}),"   .           ."]})})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("div",{className:"border rounded-lg p-3",children:p.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"font-bold",children:[" ",(Ln=Q==null?void 0:Q.amount)==null?void 0:Ln.toLocaleString()]}),p.jsx("div",{className:"font-mono",children:(Q==null?void 0:Q.sender)||""}),(Q==null?void 0:Q.senderName)&&p.jsx("div",{children:Q==null?void 0:Q.senderName}),(Q==null?void 0:Q.reference)&&p.jsx("div",{className:"font-mono",children:Q==null?void 0:Q.reference}),(Q==null?void 0:Q.walletMsisdn)&&p.jsx("div",{className:"font-mono",children:Q==null?void 0:Q.walletMsisdn})]}),p.jsxs("div",{className:"space-y-2 text-right",children:[p.jsx("div",{children:"  "}),p.jsx("div",{children:" "}),(Q==null?void 0:Q.senderName)&&p.jsx("div",{children:"  "}),(Q==null?void 0:Q.reference)&&p.jsx("div",{children:"  "}),(Q==null?void 0:Q.walletMsisdn)&&p.jsx("div",{children:"  "})]})]})}),Wn&&p.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[p.jsx("span",{className:"flex-1",children:"  ()"}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:nt,onChange:q=>Tn(q.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),ye&&p.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"text-sm",children:" "}),p.jsxs("div",{className:"font-bold",children:[" ",ue.toLocaleString()]})]}),p.jsx("div",{className:"mt-3",children:p.jsx("input",{type:"text",value:Jn,onChange:q=>qr(q.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),p.jsx("div",{className:"mt-3",children:p.jsx(xt,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Yn(!0),Ke(!1)},children:""})})]}),Qn&&!ye&&p.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),p.jsx("div",{className:"pt-2",children:p.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var q;try{const F=String((Q==null?void 0:Q.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),Z=F?parseFloat(String(F[1]).replace(",",".")):Number((Q==null?void 0:Q.amount)||0),{auth:G}=await ae(async()=>{const{auth:_e}=await Promise.resolve().then(()=>An);return{auth:_e}},void 0,import.meta.url),J=((q=G.currentUser)==null?void 0:q.uid)||"",ne=J?`selectedWallet_${J}`:"selectedWallet_default",De=localStorage.getItem(ne)||"",oe=nt&&nt.trim()!==""?Math.max(0,parseFloat(nt)):null;let de=0;if(oe!=null)de=oe;else try{const{merchantWalletService:_e}=await ae(async()=>{const{merchantWalletService:ot}=await Promise.resolve().then(()=>wc);return{merchantWalletService:ot}},void 0,import.meta.url),Re=await _e.getById(String(De)),Ce=Re&&Re.defaultWithdrawCommission;if(Ce!=null)de=Math.round((Number(Ce)||0)*Number(Z)/1e3*100)/100;else{const{calculateCommission:ot}=await ae(async()=>{const{calculateCommission:Ue}=await Promise.resolve().then(()=>ea);return{calculateCommission:Ue}},void 0,import.meta.url);de=ot(Number(Z),"receive")}}catch{const{calculateCommission:_e}=await ae(async()=>{const{calculateCommission:Re}=await Promise.resolve().then(()=>ea);return{calculateCommission:Re}},void 0,import.meta.url);de=_e(Number(Z),"receive")}const ge=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(Z)+Number(de):Number(Z);Ie(Math.round(ge*100)/100),Ke(!0)}catch{Ke(!0)}},children:""})})]}),p.jsx("div",{className:"pt-3",children:p.jsx(xt,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const q=String((Q==null?void 0:Q.text)||""),U=q.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),F=U?parseFloat(String(U[1]).replace(",",".")):Number((Q==null?void 0:Q.amount)||0),Z=q.match(/\s+\s+(\d+)/i),G=String((Q==null?void 0:Q.sender)||(Z?Z[1]:"")||""),J=q.match(/\s*\s*([\d\.]+)/i),ne=String((Q==null?void 0:Q.reference)||(J?J[1]:String(Date.now())));kt({...Q,amount:F,sender:G,reference:ne,deferredMode:Qn,debtorName:Jn,debtorNote:Y})}catch{kt()}},children:" "})})]})})]})},TR=()=>{const t=ei(),{user:e}=Ds(),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login")||t.pathname==="/"||t.pathname.startsWith("/landing");return e&&!n?p.jsxs(p.Fragment,{children:[p.jsx(m$,{}),p.jsx(Q$,{})]}):null},xR=()=>{const{user:t,loading:e}=Ds();return e?p.jsx(P0,{}):t?p.jsx(Ip,{}):p.jsx(Mg,{})},cee=()=>(v.useEffect(()=>{const t=async()=>{try{await OZ.hide()}catch(n){console.warn("Error hiding splash screen:",n)}},e=document.getElementById("app-loading-screen");e&&(e.style.opacity="0",e.style.transition="opacity 0.2s ease",setTimeout(()=>e.remove(),200)),t()},[]),p.jsx(EB,{client:ul,children:p.jsx(R9,{children:p.jsxs(F5,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android")&&p.jsx(DZ,{}),p.jsx(aee,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&oee||Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android")?p.jsxs(T9,{children:[p.jsx(IR,{}),p.jsx(TR,{}),p.jsx(v.Suspense,{fallback:p.jsx(P0,{}),children:p.jsxs(yx,{children:[p.jsx(He,{path:"/",element:Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android"?p.jsx(xR,{}):p.jsx(Um,{})}),p.jsx(He,{path:"/dashboard-redirect",element:p.jsx(nR,{})}),p.jsx(He,{path:"/landing",element:p.jsx(Um,{})}),p.jsx(He,{path:"/subscriptions",element:p.jsx(rR,{})}),p.jsx(He,{path:"/auth",element:p.jsx(sR,{})}),p.jsx(He,{path:"/user/login",element:p.jsx(Mg,{})}),p.jsx(He,{path:"/user/forgot-password",element:p.jsx(lR,{})}),p.jsx(He,{path:"/user/register",element:p.jsx(Bm,{})}),p.jsx(He,{path:"/register",element:p.jsx(Bm,{})}),p.jsx(He,{path:"/user/account-setup",element:p.jsx(aR,{})}),p.jsx(He,{path:"/user/pending-approval",element:p.jsx(hR,{})}),p.jsx(He,{path:"/user/dashboard",element:p.jsx(Ip,{})}),p.jsx(He,{path:"/branch/:shopId/dashboard",element:p.jsx(Ip,{})}),p.jsx(He,{path:"/user/add-wallet",element:p.jsx(vR,{})}),p.jsx(He,{path:"/admin/login",element:p.jsx(fR,{})}),p.jsx(He,{path:"/admin/dashboard",element:p.jsx(mR,{})}),p.jsx(He,{path:"/admin/topups",element:p.jsx(iR,{})}),p.jsx(He,{path:"/admin/notifications",element:p.jsx(oR,{})}),p.jsx(He,{path:"/profile-settings",element:p.jsx(gR,{})}),p.jsx(He,{path:"/transactions",element:p.jsx(yR,{})}),p.jsx(He,{path:"/referrals",element:p.jsx(wR,{})}),p.jsx(He,{path:"/privacy-policy",element:p.jsx(ER,{})}),p.jsx(He,{path:"/cpanel",element:p.jsx(QP,{})}),p.jsx(He,{path:"/cpanel/login",element:p.jsx(YP,{})}),p.jsx(He,{path:"/auth-test",element:p.jsx(pR,{})}),p.jsx(He,{path:"/topup",element:p.jsx($m,{})}),p.jsx(He,{path:"/recharge",element:p.jsx($m,{})}),p.jsx(He,{path:"/merchant/*",element:p.jsx(dR,{})}),p.jsx(He,{path:"/dashboard/login",element:p.jsx(cR,{})}),p.jsx(He,{path:"/dashboard",element:p.jsx(uR,{})}),p.jsx(He,{path:"*",element:p.jsx(_R,{})})]})}),p.jsx(tR,{position:"right"}),p.jsx(bR,{})]}):p.jsxs(I9,{children:[p.jsx(IR,{}),p.jsx(TR,{}),p.jsx(v.Suspense,{fallback:p.jsx(P0,{}),children:p.jsxs(yx,{children:[p.jsx(He,{path:"/",element:Te!=null&&Te.isNativePlatform&&Te.getPlatform()==="android"?p.jsx(xR,{}):p.jsx(Um,{})}),p.jsx(He,{path:"/dashboard-redirect",element:p.jsx(nR,{})}),p.jsx(He,{path:"/landing",element:p.jsx(Um,{})}),p.jsx(He,{path:"/subscriptions",element:p.jsx(rR,{})}),p.jsx(He,{path:"/auth",element:p.jsx(sR,{})}),p.jsx(He,{path:"/user/login",element:p.jsx(Mg,{})}),p.jsx(He,{path:"/user/forgot-password",element:p.jsx(lR,{})}),p.jsx(He,{path:"/user/register",element:p.jsx(Bm,{})}),p.jsx(He,{path:"/register",element:p.jsx(Bm,{})}),p.jsx(He,{path:"/user/account-setup",element:p.jsx(aR,{})}),p.jsx(He,{path:"/user/pending-approval",element:p.jsx(hR,{})}),p.jsx(He,{path:"/user/dashboard",element:p.jsx(Ip,{})}),p.jsx(He,{path:"/user/add-wallet",element:p.jsx(vR,{})}),p.jsx(He,{path:"/admin/login",element:p.jsx(fR,{})}),p.jsx(He,{path:"/admin/dashboard",element:p.jsx(mR,{})}),p.jsx(He,{path:"/admin/topups",element:p.jsx(iR,{})}),p.jsx(He,{path:"/admin/notifications",element:p.jsx(oR,{})}),p.jsx(He,{path:"/profile-settings",element:p.jsx(gR,{})}),p.jsx(He,{path:"/transactions",element:p.jsx(yR,{})}),p.jsx(He,{path:"/referrals",element:p.jsx(wR,{})}),p.jsx(He,{path:"/privacy-policy",element:p.jsx(ER,{})}),p.jsx(He,{path:"/cpanel",element:p.jsx(QP,{})}),p.jsx(He,{path:"/cpanel/login",element:p.jsx(YP,{})}),p.jsx(He,{path:"/auth-test",element:p.jsx(pR,{})}),p.jsx(He,{path:"/topup",element:p.jsx($m,{})}),p.jsx(He,{path:"/recharge",element:p.jsx($m,{})}),p.jsx(He,{path:"/merchant/*",element:p.jsx(dR,{})}),p.jsx(He,{path:"/dashboard/login",element:p.jsx(cR,{})}),p.jsx(He,{path:"/dashboard",element:p.jsx(uR,{})}),p.jsx(He,{path:"*",element:p.jsx(_R,{})})]})}),p.jsx(tR,{position:"right"}),p.jsx(bR,{})]})]})})})),DV=v.createContext(void 0),uee=({children:t})=>{const[e,n]=v.useState(null),[r,s]=v.useState(!1),[i,o]=v.useState(null),{profile:a,user:l}=Ds();v.useEffect(()=>{try{const m=localStorage.getItem("cashier_shift_user"),_=localStorage.getItem("cashier_shift_active"),g=localStorage.getItem("cashier_shift_start_at");m&&n(JSON.parse(m)),_&&s(_==="true"),g&&o(Number(g))}catch{}},[]);const c=async()=>{if(a!=null&&a.shopId)try{const m=Se(B,"cashierShift",a.shopId),_=await on(m);if(_.exists()){const g=_.data(),b=!!(g!=null&&g.isShiftActive),E=(g==null?void 0:g.shiftStartAt)??null,w=localStorage.getItem("cashier_shift_active")==="true";if(!b&&w){s(!1),n(null),localStorage.setItem("cashier_shift_active","false"),localStorage.removeItem("cashier_shift_user");return}if(b&&!w){s(!1),n(null);return}if(b&&w){s(!0);try{const S=localStorage.getItem("cashier_shift_user");S&&n(JSON.parse(S))}catch{}E&&(o(Number(E)),localStorage.setItem("cashier_shift_start_at",String(E)))}}else await ln(m,{isShiftActive:!1,shiftStartAt:null,shiftUser:null})}catch(m){console.warn("Failed to refresh shift status:",m)}};v.useEffect(()=>{c()},[a==null?void 0:a.shopId]);const u=m=>{n(m);try{m?localStorage.setItem("cashier_shift_user",JSON.stringify(m)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const _=Se(B,"cashierShift",a.shopId);gn(_,{shiftUser:m||null})}}catch{}},h=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const m=Date.now();o(m);try{localStorage.setItem("cashier_shift_start_at",String(m))}catch{}try{if(a!=null&&a.shopId){const _=Se(B,"cashierShift",a.shopId);gn(_,{isShiftActive:!0,shiftStartAt:m})}}catch{}try{const g=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,b=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,E=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(g);if(w==null){const P=localStorage.getItem(b);if(P!=null){w=P;try{localStorage.setItem(g,P),localStorage.removeItem(b)}catch{}}}if(w==null&&(l!=null&&l.uid)){const P=localStorage.getItem("cashBalance"),x=localStorage.getItem("userCashBalance");if(P!=null){try{localStorage.setItem(g,P),localStorage.removeItem("cashBalance")}catch{}w=P}else if(x!=null){try{localStorage.setItem(g,x),localStorage.removeItem("userCashBalance")}catch{}w=x}}const S=localStorage.getItem(E);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),S?localStorage.setItem("shiftStartWalletBalances",S):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const _=Se(B,"dashboardData",a.shopId),g=await on(_);if(g.exists()){const b=g.data(),E=Number((b==null?void 0:b.cashBalance)??0),w=(b==null?void 0:b.walletBalances)??{};try{const S=localStorage.getItem("shiftStartDrawerFunds"),P=localStorage.getItem("shiftStartWalletBalances"),x=S?parseFloat(S):0,O=P?JSON.parse(P):{},I=!S||!Number.isFinite(x)||x===0,A=!P||Object.keys(O||{}).length===0;I&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(E)?E:0)),A&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(_){console.warn("Shift start Firebase read failed:",_)}})()}catch{}},f=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const m=Se(B,"cashierShift",a.shopId);gn(m,{isShiftActive:!1})}}catch{}};return p.jsx(DV.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:u,startShift:h,endShift:f,refreshShiftStatus:c},children:t})},Xee=()=>{const t=v.useContext(DV);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class dee extends v.Component{constructor(){super(...arguments);xd(this,"state",{hasError:!1,error:null});xd(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:p.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:p.jsx(Mk,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,p.jsxs(xt,{onClick:this.handleReload,className:"w-full gap-2",children:[p.jsx(DE,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{xV()}catch{}const hee=()=>{const{theme:t="system"}=Kk();return v.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};lk(document.getElementById("root")).render(p.jsx(dee,{children:p.jsx(y$,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:p.jsx(hZ,{children:p.jsx(uee,{children:p.jsxs(ree,{children:[p.jsx(cee,{}),p.jsx(hee,{})]})})})})}));export{Ft as $,EM as A,xt as B,z4 as C,vs as D,Be as E,b3 as F,S_ as G,ay as H,nr as I,dh as J,hh as K,M_ as L,Ic as M,xee as N,Lk as O,c3 as P,f8 as Q,M as R,v3 as S,ka as T,R3 as U,Se as V,DP as W,OE as X,Kt as Y,m8 as Z,ln as _,ec as a,wV as a$,on as a0,Zo as a1,OT as a2,q4 as a3,$4 as a4,al as a5,kJ as a6,jg as a7,I0 as a8,vn as a9,Mee as aA,hJ as aB,AM as aC,MT as aD,a3 as aE,A0 as aF,$e as aG,Lg as aH,pee as aI,Yt as aJ,ES as aK,Xee as aL,ae as aM,_Z as aN,DE as aO,yV as aP,nv as aQ,j4 as aR,Q4 as aS,vp as aT,AV as aU,Te as aV,DT as aW,L4 as aX,nQ as aY,US as aZ,P0 as a_,NE as aa,ei as ab,ds as ac,_r as ad,see as ae,Pl as af,pa as ag,ga as ah,ya as ai,td as aj,LU as ak,$v as al,Nn as am,cn as an,Sr as ao,PE as ap,Pi as aq,gn as ar,LT as as,I3 as at,Oo as au,Qa as av,NV as aw,Yee as ax,_M as ay,fJ as az,Jee as b,rc as b$,yx as b0,He as b1,N4 as b2,k3 as b3,IJ as b4,SQ as b5,AU as b6,TJ as b7,V4 as b8,lV as b9,tX as bA,jM as bB,CM as bC,sy as bD,y5 as bE,v5 as bF,Zi as bG,i4 as bH,_f as bI,zee as bJ,Mk as bK,oD as bL,Dg as bM,Nee as bN,RG as bO,Ux as bP,$x as bQ,Cee as bR,Pee as bS,Kk as bT,IV as bU,NJ as bV,jee as bW,Uee as bX,PJ as bY,Kee as bZ,LZ as b_,Xl as ba,KN as bb,$ee as bc,rZ as bd,iZ as be,Bee as bf,sV as bg,iV as bh,oV as bi,oZ as bj,rV as bk,sZ as bl,F9 as bm,xZ as bn,x3 as bo,fZ as bp,oN as bq,CS as br,UZ as bs,Ef as bt,lN as bu,yee as bv,g5 as bw,AE as bx,$X as by,ck as bz,MS as c,h8 as c0,kee as c1,EV as c2,bV as c3,my as c4,eB as c5,H5 as c6,_ee as c7,C_ as c8,Ur as c9,VZ as cA,MZ as cB,Gee as cC,xJ as cD,cr as cE,An as cF,wc as cG,MP as cH,Wee as cI,qee as cJ,Hee as cK,NZ as cL,Qee as cM,Ug as cN,py as ca,W5 as cb,q5 as cc,eg as cd,AN as ce,mB as cf,Q5 as cg,$r as ch,Eee as ci,Iee as cj,Al as ck,AJ as cl,kZ as cm,Vee as cn,CZ as co,Fee as cp,RZ as cq,GR as cr,mee as cs,qt as ct,TQ as cu,Tee as cv,TM as cw,ll as cx,t3 as cy,m3 as cz,VS as d,FS as e,vV as f,jS as g,wZ as h,iee as i,p as j,Aee as k,TZ as l,Jl as m,_V as n,bZ as o,Gt as p,Xe as q,v as r,xe as s,B as t,Ds as u,Ai as v,ma as w,Je as x,Ps as y,nY as z};
//# sourceMappingURL=index-B_gBGKq7.js.map
