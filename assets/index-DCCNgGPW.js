const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-wkVsOBXE.js","./BrandLogo-6bRz-I6K.js","./smartphone-tsBUEtpG.js","./whatsappService-B1cIRXDd.js","./arrow-left-CaId6H0o.js","./star-OBsEMadB.js","./crown-2KbebdC6.js","./download-o2Ens89R.js","./zap-ByT9Dbe3.js","./circle-check-big-BoX_IbGj.js","./SubscriptionsPage-CQv9BENB.js","./contentService-loH71wG3.js","./AuthPage-3D0EiTAi.js","./TopUpPage-DfpE2DzQ.js","./select-DGlsBkiO.js","./AdminTopupsPage-D6IN3fkp.js","./AdminNotificationsPage-R0GPM2FQ.js","./textarea-_K9oMTvR.js","./bell-CZi6ERVz.js","./link-DSKM3bY8.js","./UserRegisterPage-Ci_MpPbz.js","./alert-DCVNuTWK.js","./wallet-DWHebgmj.js","./user-plus-D1UyP7Vc.js","./phone-CFLT9Th1.js","./UserAccountSetupPage-CWbYBpnr.js","./ProtectedDashboard-CxaSgm0F.js","./MasterPinDialog-BxzQrVxp.js","./circle-alert-Dp4UJch_.js","./profitService-Bwg-yNfl.js","./dollar-sign-Cx5pdup0.js","./arrow-down-left-DACJ6E-y.js","./ProtectedUserDashboard-bA7Qlo2m.js","./broadcastService-B0YvnSDq.js","./MerchantDashboard-hA5mXqCH.js","./dropdown-menu-Cnglh8kr.js","./index-TUMzqYWw.js","./badge-DfJ_Cd6V.js","./WalletsManagement-BRF77ef_.js","./progress-D56HxldF.js","./square-pen-C4KnS8Ce.js","./trash-2-DcC1U_Hc.js","./PendingApprovalPage-Ds7YdPKy.js","./freeTrialService-CSiXFwUm.js","./ProtectedAdminDashboard-vqkKGJFA.js","./table-Dcug6DJe.js","./switch-BF7eo6Gr.js","./tabs-sXmhEuOx.js","./refresh-cw-BB3NaMkG.js","./save-Bew0xRbX.js","./gift-DV3LQ3nJ.js","./users-CdmWCUAg.js","./circle-x-kanmRERm.js","./ProfileSettingsPage-BZg2Qs-H.js","./walletSelectionPinService-DObvrOOL.js","./TransactionsPage-BUl9Bn7R.js","./MaintenanceDialog-DgzlfQZR.js","./WalletAdditionPage-C51prc-Z.js","./ReferralsPage-DMggTOgV.js","./UserDashboardPage-1AkkOoGQ.js"])))=>i.map(i=>d[i]);
var yV=Object.defineProperty;var GT=t=>{throw TypeError(t)};var vV=(t,e,n)=>e in t?yV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fd=(t,e,n)=>vV(t,typeof e!="symbol"?e+"":e,n),$y=(t,e,n)=>e.has(t)||GT("Cannot "+n);var Y=(t,e,n)=>($y(t,e,"read from private field"),n?n.call(t):e.get(t)),pt=(t,e,n)=>e.has(t)?GT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>($y(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ur=(t,e,n)=>($y(t,e,"access private method"),n);var jf=(t,e,n,r)=>({set _(s){qe(t,e,s,n)},get _(){return Y(t,e,r)}});function _V(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function EP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IP={exports:{}},Ig={},TP={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=Symbol.for("react.element"),wV=Symbol.for("react.portal"),EV=Symbol.for("react.fragment"),IV=Symbol.for("react.strict_mode"),TV=Symbol.for("react.profiler"),SV=Symbol.for("react.provider"),bV=Symbol.for("react.context"),AV=Symbol.for("react.forward_ref"),xV=Symbol.for("react.suspense"),RV=Symbol.for("react.memo"),PV=Symbol.for("react.lazy"),QT=Symbol.iterator;function CV(t){return t===null||typeof t!="object"?null:(t=QT&&t[QT]||t["@@iterator"],typeof t=="function"?t:null)}var SP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bP=Object.assign,AP={};function Vu(t,e,n){this.props=t,this.context=e,this.refs=AP,this.updater=n||SP}Vu.prototype.isReactComponent={};Vu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xP(){}xP.prototype=Vu.prototype;function u0(t,e,n){this.props=t,this.context=e,this.refs=AP,this.updater=n||SP}var d0=u0.prototype=new xP;d0.constructor=u0;bP(d0,Vu.prototype);d0.isPureReactComponent=!0;var YT=Array.isArray,RP=Object.prototype.hasOwnProperty,h0={current:null},PP={key:!0,ref:!0,__self:!0,__source:!0};function CP(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)RP.call(e,r)&&!PP.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:tf,type:t,key:i,ref:o,props:s,_owner:h0.current}}function kV(t,e){return{$$typeof:tf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function f0(t){return typeof t=="object"&&t!==null&&t.$$typeof===tf}function DV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var JT=/\/+/g;function By(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DV(""+t.key):e.toString(36)}function Rm(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tf:case wV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+By(o,0):r,YT(s)?(n="",t!=null&&(n=t.replace(JT,"$&/")+"/"),Rm(s,e,n,"",function(c){return c})):s!=null&&(f0(s)&&(s=kV(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(JT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",YT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+By(i,a);o+=Rm(i,e,n,l,s)}else if(l=CV(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+By(i,a++),o+=Rm(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $f(t,e,n){if(t==null)return t;var r=[],s=0;return Rm(t,r,"","",function(i){return e.call(n,i,s++)}),r}function NV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xr={current:null},Pm={transition:null},OV={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:Pm,ReactCurrentOwner:h0};function kP(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:$f,forEach:function(t,e,n){$f(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $f(t,function(){e++}),e},toArray:function(t){return $f(t,function(e){return e})||[]},only:function(t){if(!f0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=Vu;ct.Fragment=EV;ct.Profiler=TV;ct.PureComponent=u0;ct.StrictMode=IV;ct.Suspense=xV;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OV;ct.act=kP;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bP({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=h0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)RP.call(e,l)&&!PP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:tf,type:t.type,key:s,ref:i,props:r,_owner:o}};ct.createContext=function(t){return t={$$typeof:bV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SV,_context:t},t.Consumer=t};ct.createElement=CP;ct.createFactory=function(t){var e=CP.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:AV,render:t}};ct.isValidElement=f0;ct.lazy=function(t){return{$$typeof:PV,_payload:{_status:-1,_result:t},_init:NV}};ct.memo=function(t,e){return{$$typeof:RV,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Pm.transition;Pm.transition={};try{t()}finally{Pm.transition=e}};ct.unstable_act=kP;ct.useCallback=function(t,e){return xr.current.useCallback(t,e)};ct.useContext=function(t){return xr.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return xr.current.useDeferredValue(t)};ct.useEffect=function(t,e){return xr.current.useEffect(t,e)};ct.useId=function(){return xr.current.useId()};ct.useImperativeHandle=function(t,e,n){return xr.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return xr.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return xr.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return xr.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return xr.current.useReducer(t,e,n)};ct.useRef=function(t){return xr.current.useRef(t)};ct.useState=function(t){return xr.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return xr.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return xr.current.useTransition()};ct.version="18.3.1";TP.exports=ct;var S=TP.exports;const F=EP(S),m0=_V({__proto__:null,default:F},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LV=S,MV=Symbol.for("react.element"),VV=Symbol.for("react.fragment"),FV=Object.prototype.hasOwnProperty,UV=LV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jV={key:!0,ref:!0,__self:!0,__source:!0};function DP(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FV.call(e,r)&&!jV.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:MV,type:t,key:i,ref:o,props:s,_owner:UV.current}}Ig.Fragment=VV;Ig.jsx=DP;Ig.jsxs=DP;IP.exports=Ig;var v=IP.exports,NP={exports:{}},as={},OP={exports:{}},LP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,q){var X=$.length;$.push(q);e:for(;0<X;){var we=X-1>>>1,Ee=$[we];if(0<s(Ee,q))$[we]=q,$[X]=Ee,X=we;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],X=$.pop();if(X!==q){$[0]=X;e:for(var we=0,Ee=$.length,re=Ee>>>1;we<re;){var ve=2*(we+1)-1,j=$[ve],Ge=ve+1,Fe=$[Ge];if(0>s(j,X))Ge<Ee&&0>s(Fe,j)?($[we]=Fe,$[Ge]=X,we=Ge):($[we]=j,$[ve]=X,we=ve);else if(Ge<Ee&&0>s(Fe,X))$[we]=Fe,$[Ge]=X,we=Ge;else break e}}return q}function s($,q){var X=$.sortIndex-q.sortIndex;return X!==0?X:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,E=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=$)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function x($){if(p=!1,I($),!E)if(n(l)!==null)E=!0,he(P);else{var q=n(c);q!==null&&Se(x,q.startTime-$)}}function P($,q){E=!1,p&&(p=!1,w(T),T=-1),m=!0;var X=f;try{for(I(q),h=n(l);h!==null&&(!(h.expirationTime>q)||$&&!N());){var we=h.callback;if(typeof we=="function"){h.callback=null,f=h.priorityLevel;var Ee=we(h.expirationTime<=q);q=t.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===n(l)&&r(l),I(q)}else r(l);h=n(l)}if(h!==null)var re=!0;else{var ve=n(c);ve!==null&&Se(x,ve.startTime-q),re=!1}return re}finally{h=null,f=X,m=!1}}var L=!1,A=null,T=-1,R=5,C=-1;function N(){return!(t.unstable_now()-C<R)}function O(){if(A!==null){var $=t.unstable_now();C=$;var q=!0;try{q=A(!0,$)}finally{q?k():(L=!1,A=null)}}else L=!1}var k;if(typeof _=="function")k=function(){_(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ce=B.port2;B.port1.onmessage=O,k=function(){ce.postMessage(null)}}else k=function(){y(O,0)};function he($){A=$,L||(L=!0,k())}function Se($,q){T=y(function(){$(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,he(P))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var X=f;f=q;try{return $()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=f;f=$;try{return q()}finally{f=X}},t.unstable_scheduleCallback=function($,q,X){var we=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?we+X:we):X=we,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=X+Ee,$={id:d++,callback:q,priorityLevel:$,startTime:X,expirationTime:Ee,sortIndex:-1},X>we?($.sortIndex=X,e(c,$),n(l)===null&&$===n(c)&&(p?(w(T),T=-1):p=!0,Se(x,X-we))):($.sortIndex=Ee,e(l,$),E||m||(E=!0,he(P))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var q=f;return function(){var X=f;f=q;try{return $.apply(this,arguments)}finally{f=X}}}})(LP);OP.exports=LP;var $V=OP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BV=S,ss=$V;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MP=new Set,hh={};function Ll(t,e){nu(t,e),nu(t+"Capture",e)}function nu(t,e){for(hh[t]=e,t=0;t<e.length;t++)MP.add(e[t])}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s_=Object.prototype.hasOwnProperty,zV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XT={},ZT={};function WV(t){return s_.call(ZT,t)?!0:s_.call(XT,t)?!1:zV.test(t)?ZT[t]=!0:(XT[t]=!0,!1)}function qV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HV(t,e,n,r){if(e===null||typeof e>"u"||qV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ar[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ar[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ar[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ar[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ar[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ar[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ar[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ar[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ar[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var p0=/[\-:]([a-z])/g;function g0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(p0,g0);ar[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(p0,g0);ar[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(p0,g0);ar[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ar[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});ar.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ar[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function y0(t,e,n,r){var s=ar.hasOwnProperty(e)?ar[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HV(e,n,s,r)&&(n=null),r||s===null?WV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yi=BV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bf=Symbol.for("react.element"),hc=Symbol.for("react.portal"),fc=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),i_=Symbol.for("react.profiler"),VP=Symbol.for("react.provider"),FP=Symbol.for("react.context"),_0=Symbol.for("react.forward_ref"),o_=Symbol.for("react.suspense"),a_=Symbol.for("react.suspense_list"),w0=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),UP=Symbol.for("react.offscreen"),eS=Symbol.iterator;function md(t){return t===null||typeof t!="object"?null:(t=eS&&t[eS]||t["@@iterator"],typeof t=="function"?t:null)}var ln=Object.assign,zy;function Cd(t){if(zy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zy=e&&e[1]||""}return`
`+zy+t}var Wy=!1;function qy(t,e){if(!t||Wy)return"";Wy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Wy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Cd(t):""}function KV(t){switch(t.tag){case 5:return Cd(t.type);case 16:return Cd("Lazy");case 13:return Cd("Suspense");case 19:return Cd("SuspenseList");case 0:case 2:case 15:return t=qy(t.type,!1),t;case 11:return t=qy(t.type.render,!1),t;case 1:return t=qy(t.type,!0),t;default:return""}}function l_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fc:return"Fragment";case hc:return"Portal";case i_:return"Profiler";case v0:return"StrictMode";case o_:return"Suspense";case a_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case FP:return(t.displayName||"Context")+".Consumer";case VP:return(t._context.displayName||"Context")+".Provider";case _0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w0:return e=t.displayName||null,e!==null?e:l_(t.type)||"Memo";case _o:e=t._payload,t=t._init;try{return l_(t(e))}catch{}}return null}function GV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return l_(e);case 8:return e===v0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QV(t){var e=jP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zf(t){t._valueTracker||(t._valueTracker=QV(t))}function $P(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function c_(t,e){var n=e.checked;return ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function BP(t,e){e=e.checked,e!=null&&y0(t,"checked",e,!1)}function u_(t,e){BP(t,e);var n=sa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?d_(t,e.type,n):e.hasOwnProperty("defaultValue")&&d_(t,e.type,sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function d_(t,e,n){(e!=="number"||cp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kd=Array.isArray;function kc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sa(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function h_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return ln({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(kd(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sa(n)}}function zP(t,e){var n=sa(e.value),r=sa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function WP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function f_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wf,qP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wf=Wf||document.createElement("div"),Wf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YV=["Webkit","ms","Moz","O"];Object.keys(Bd).forEach(function(t){YV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bd[e]=Bd[t]})});function HP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bd.hasOwnProperty(t)&&Bd[t]?(""+e).trim():e+"px"}function KP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=HP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JV=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function m_(t,e){if(e){if(JV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function p_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g_=null;function E0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var y_=null,Dc=null,Nc=null;function iS(t){if(t=sf(t)){if(typeof y_!="function")throw Error(le(280));var e=t.stateNode;e&&(e=xg(e),y_(t.stateNode,t.type,e))}}function GP(t){Dc?Nc?Nc.push(t):Nc=[t]:Dc=t}function QP(){if(Dc){var t=Dc,e=Nc;if(Nc=Dc=null,iS(t),e)for(t=0;t<e.length;t++)iS(e[t])}}function YP(t,e){return t(e)}function JP(){}var Hy=!1;function XP(t,e,n){if(Hy)return t(e,n);Hy=!0;try{return YP(t,e,n)}finally{Hy=!1,(Dc!==null||Nc!==null)&&(JP(),QP())}}function mh(t,e){var n=t.stateNode;if(n===null)return null;var r=xg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var v_=!1;if(Ui)try{var pd={};Object.defineProperty(pd,"passive",{get:function(){v_=!0}}),window.addEventListener("test",pd,pd),window.removeEventListener("test",pd,pd)}catch{v_=!1}function XV(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var zd=!1,up=null,dp=!1,__=null,ZV={onError:function(t){zd=!0,up=t}};function eF(t,e,n,r,s,i,o,a,l){zd=!1,up=null,XV.apply(ZV,arguments)}function tF(t,e,n,r,s,i,o,a,l){if(eF.apply(this,arguments),zd){if(zd){var c=up;zd=!1,up=null}else throw Error(le(198));dp||(dp=!0,__=c)}}function Ml(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ZP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oS(t){if(Ml(t)!==t)throw Error(le(188))}function nF(t){var e=t.alternate;if(!e){if(e=Ml(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return oS(s),t;if(i===r)return oS(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function e1(t){return t=nF(t),t!==null?t1(t):null}function t1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=t1(t);if(e!==null)return e;t=t.sibling}return null}var n1=ss.unstable_scheduleCallback,aS=ss.unstable_cancelCallback,rF=ss.unstable_shouldYield,sF=ss.unstable_requestPaint,gn=ss.unstable_now,iF=ss.unstable_getCurrentPriorityLevel,I0=ss.unstable_ImmediatePriority,r1=ss.unstable_UserBlockingPriority,hp=ss.unstable_NormalPriority,oF=ss.unstable_LowPriority,s1=ss.unstable_IdlePriority,Tg=null,ai=null;function aF(t){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(Tg,t,void 0,(t.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:uF,lF=Math.log,cF=Math.LN2;function uF(t){return t>>>=0,t===0?32:31-(lF(t)/cF|0)|0}var qf=64,Hf=4194304;function Dd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Dd(a):(i&=o,i!==0&&(r=Dd(i)))}else o=n&~s,o!==0?r=Dd(o):i!==0&&(r=Dd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cs(e),s=1<<n,r|=t[n],e&=~s;return r}function dF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=dF(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function w_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function i1(){var t=qf;return qf<<=1,!(qf&4194240)&&(qf=64),t}function Ky(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cs(e),t[e]=n}function fF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function T0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var At=0;function o1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var a1,S0,l1,c1,u1,E_=!1,Kf=[],zo=null,Wo=null,qo=null,ph=new Map,gh=new Map,Io=[],mF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lS(t,e){switch(t){case"focusin":case"focusout":zo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":qo=null;break;case"pointerover":case"pointerout":ph.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(e.pointerId)}}function gd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=sf(e),e!==null&&S0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pF(t,e,n,r,s){switch(e){case"focusin":return zo=gd(zo,t,e,n,r,s),!0;case"dragenter":return Wo=gd(Wo,t,e,n,r,s),!0;case"mouseover":return qo=gd(qo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ph.set(i,gd(ph.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gh.set(i,gd(gh.get(i)||null,t,e,n,r,s)),!0}return!1}function d1(t){var e=Ja(t.target);if(e!==null){var n=Ml(e);if(n!==null){if(e=n.tag,e===13){if(e=ZP(n),e!==null){t.blockedOn=e,u1(t.priority,function(){l1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=I_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);g_=r,n.target.dispatchEvent(r),g_=null}else return e=sf(n),e!==null&&S0(e),t.blockedOn=n,!1;e.shift()}return!0}function cS(t,e,n){Cm(t)&&n.delete(e)}function gF(){E_=!1,zo!==null&&Cm(zo)&&(zo=null),Wo!==null&&Cm(Wo)&&(Wo=null),qo!==null&&Cm(qo)&&(qo=null),ph.forEach(cS),gh.forEach(cS)}function yd(t,e){t.blockedOn===e&&(t.blockedOn=null,E_||(E_=!0,ss.unstable_scheduleCallback(ss.unstable_NormalPriority,gF)))}function yh(t){function e(s){return yd(s,t)}if(0<Kf.length){yd(Kf[0],t);for(var n=1;n<Kf.length;n++){var r=Kf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zo!==null&&yd(zo,t),Wo!==null&&yd(Wo,t),qo!==null&&yd(qo,t),ph.forEach(e),gh.forEach(e),n=0;n<Io.length;n++)r=Io[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Io.length&&(n=Io[0],n.blockedOn===null);)d1(n),n.blockedOn===null&&Io.shift()}var Oc=Yi.ReactCurrentBatchConfig,mp=!0;function yF(t,e,n,r){var s=At,i=Oc.transition;Oc.transition=null;try{At=1,b0(t,e,n,r)}finally{At=s,Oc.transition=i}}function vF(t,e,n,r){var s=At,i=Oc.transition;Oc.transition=null;try{At=4,b0(t,e,n,r)}finally{At=s,Oc.transition=i}}function b0(t,e,n,r){if(mp){var s=I_(t,e,n,r);if(s===null)rv(t,e,r,pp,n),lS(t,r);else if(pF(s,t,e,n,r))r.stopPropagation();else if(lS(t,r),e&4&&-1<mF.indexOf(t)){for(;s!==null;){var i=sf(s);if(i!==null&&a1(i),i=I_(t,e,n,r),i===null&&rv(t,e,r,pp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else rv(t,e,r,null,n)}}var pp=null;function I_(t,e,n,r){if(pp=null,t=E0(r),t=Ja(t),t!==null)if(e=Ml(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ZP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pp=t,null}function h1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iF()){case I0:return 1;case r1:return 4;case hp:case oF:return 16;case s1:return 536870912;default:return 16}default:return 16}}var Mo=null,A0=null,km=null;function f1(){if(km)return km;var t,e=A0,n=e.length,r,s="value"in Mo?Mo.value:Mo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return km=s.slice(t,1<r?1-r:void 0)}function Dm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gf(){return!0}function uS(){return!1}function ls(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gf:uS,this.isPropagationStopped=uS,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gf)},persist:function(){},isPersistent:Gf}),e}var Fu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x0=ls(Fu),rf=ln({},Fu,{view:0,detail:0}),_F=ls(rf),Gy,Qy,vd,Sg=ln({},rf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vd&&(vd&&t.type==="mousemove"?(Gy=t.screenX-vd.screenX,Qy=t.screenY-vd.screenY):Qy=Gy=0,vd=t),Gy)},movementY:function(t){return"movementY"in t?t.movementY:Qy}}),dS=ls(Sg),wF=ln({},Sg,{dataTransfer:0}),EF=ls(wF),IF=ln({},rf,{relatedTarget:0}),Yy=ls(IF),TF=ln({},Fu,{animationName:0,elapsedTime:0,pseudoElement:0}),SF=ls(TF),bF=ln({},Fu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AF=ls(bF),xF=ln({},Fu,{data:0}),hS=ls(xF),RF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CF[t])?!!e[t]:!1}function R0(){return kF}var DF=ln({},rf,{key:function(t){if(t.key){var e=RF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R0,charCode:function(t){return t.type==="keypress"?Dm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NF=ls(DF),OF=ln({},Sg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fS=ls(OF),LF=ln({},rf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R0}),MF=ls(LF),VF=ln({},Fu,{propertyName:0,elapsedTime:0,pseudoElement:0}),FF=ls(VF),UF=ln({},Sg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jF=ls(UF),$F=[9,13,27,32],P0=Ui&&"CompositionEvent"in window,Wd=null;Ui&&"documentMode"in document&&(Wd=document.documentMode);var BF=Ui&&"TextEvent"in window&&!Wd,m1=Ui&&(!P0||Wd&&8<Wd&&11>=Wd),mS=" ",pS=!1;function p1(t,e){switch(t){case"keyup":return $F.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mc=!1;function zF(t,e){switch(t){case"compositionend":return g1(e);case"keypress":return e.which!==32?null:(pS=!0,mS);case"textInput":return t=e.data,t===mS&&pS?null:t;default:return null}}function WF(t,e){if(mc)return t==="compositionend"||!P0&&p1(t,e)?(t=f1(),km=A0=Mo=null,mc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m1&&e.locale!=="ko"?null:e.data;default:return null}}var qF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qF[t.type]:e==="textarea"}function y1(t,e,n,r){GP(r),e=gp(e,"onChange"),0<e.length&&(n=new x0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qd=null,vh=null;function HF(t){R1(t,0)}function bg(t){var e=yc(t);if($P(e))return t}function KF(t,e){if(t==="change")return e}var v1=!1;if(Ui){var Jy;if(Ui){var Xy="oninput"in document;if(!Xy){var yS=document.createElement("div");yS.setAttribute("oninput","return;"),Xy=typeof yS.oninput=="function"}Jy=Xy}else Jy=!1;v1=Jy&&(!document.documentMode||9<document.documentMode)}function vS(){qd&&(qd.detachEvent("onpropertychange",_1),vh=qd=null)}function _1(t){if(t.propertyName==="value"&&bg(vh)){var e=[];y1(e,vh,t,E0(t)),XP(HF,e)}}function GF(t,e,n){t==="focusin"?(vS(),qd=e,vh=n,qd.attachEvent("onpropertychange",_1)):t==="focusout"&&vS()}function QF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bg(vh)}function YF(t,e){if(t==="click")return bg(e)}function JF(t,e){if(t==="input"||t==="change")return bg(e)}function XF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Os=typeof Object.is=="function"?Object.is:XF;function _h(t,e){if(Os(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!s_.call(e,s)||!Os(t[s],e[s]))return!1}return!0}function _S(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wS(t,e){var n=_S(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_S(n)}}function w1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?w1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function E1(){for(var t=window,e=cp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cp(t.document)}return e}function C0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZF(t){var e=E1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&w1(n.ownerDocument.documentElement,n)){if(r!==null&&C0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=wS(n,i);var o=wS(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eU=Ui&&"documentMode"in document&&11>=document.documentMode,pc=null,T_=null,Hd=null,S_=!1;function ES(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;S_||pc==null||pc!==cp(r)||(r=pc,"selectionStart"in r&&C0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hd&&_h(Hd,r)||(Hd=r,r=gp(T_,"onSelect"),0<r.length&&(e=new x0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pc)))}function Qf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gc={animationend:Qf("Animation","AnimationEnd"),animationiteration:Qf("Animation","AnimationIteration"),animationstart:Qf("Animation","AnimationStart"),transitionend:Qf("Transition","TransitionEnd")},Zy={},I1={};Ui&&(I1=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function Ag(t){if(Zy[t])return Zy[t];if(!gc[t])return t;var e=gc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in I1)return Zy[t]=e[n];return t}var T1=Ag("animationend"),S1=Ag("animationiteration"),b1=Ag("animationstart"),A1=Ag("transitionend"),x1=new Map,IS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(t,e){x1.set(t,e),Ll(e,[t])}for(var ev=0;ev<IS.length;ev++){var tv=IS[ev],tU=tv.toLowerCase(),nU=tv[0].toUpperCase()+tv.slice(1);ga(tU,"on"+nU)}ga(T1,"onAnimationEnd");ga(S1,"onAnimationIteration");ga(b1,"onAnimationStart");ga("dblclick","onDoubleClick");ga("focusin","onFocus");ga("focusout","onBlur");ga(A1,"onTransitionEnd");nu("onMouseEnter",["mouseout","mouseover"]);nu("onMouseLeave",["mouseout","mouseover"]);nu("onPointerEnter",["pointerout","pointerover"]);nu("onPointerLeave",["pointerout","pointerover"]);Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function TS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tF(r,e,void 0,t),t.currentTarget=null}function R1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;TS(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;TS(s,a,c),i=l}}}if(dp)throw t=__,dp=!1,__=null,t}function Ut(t,e){var n=e[P_];n===void 0&&(n=e[P_]=new Set);var r=t+"__bubble";n.has(r)||(P1(e,t,2,!1),n.add(r))}function nv(t,e,n){var r=0;e&&(r|=4),P1(n,t,r,e)}var Yf="_reactListening"+Math.random().toString(36).slice(2);function wh(t){if(!t[Yf]){t[Yf]=!0,MP.forEach(function(n){n!=="selectionchange"&&(rU.has(n)||nv(n,!1,t),nv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yf]||(e[Yf]=!0,nv("selectionchange",!1,e))}}function P1(t,e,n,r){switch(h1(e)){case 1:var s=yF;break;case 4:s=vF;break;default:s=b0}n=s.bind(null,e,n,t),s=void 0,!v_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function rv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ja(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}XP(function(){var c=i,d=E0(n),h=[];e:{var f=x1.get(t);if(f!==void 0){var m=x0,E=t;switch(t){case"keypress":if(Dm(n)===0)break e;case"keydown":case"keyup":m=NF;break;case"focusin":E="focus",m=Yy;break;case"focusout":E="blur",m=Yy;break;case"beforeblur":case"afterblur":m=Yy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=dS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=EF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=MF;break;case T1:case S1:case b1:m=SF;break;case A1:m=FF;break;case"scroll":m=_F;break;case"wheel":m=jF;break;case"copy":case"cut":case"paste":m=AF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=fS}var p=(e&4)!==0,y=!p&&t==="scroll",w=p?f!==null?f+"Capture":null:f;p=[];for(var _=c,I;_!==null;){I=_;var x=I.stateNode;if(I.tag===5&&x!==null&&(I=x,w!==null&&(x=mh(_,w),x!=null&&p.push(Eh(_,x,I)))),y)break;_=_.return}0<p.length&&(f=new m(f,E,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==g_&&(E=n.relatedTarget||n.fromElement)&&(Ja(E)||E[ji]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=c,E=E?Ja(E):null,E!==null&&(y=Ml(E),E!==y||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=c),m!==E)){if(p=dS,x="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(p=fS,x="onPointerLeave",w="onPointerEnter",_="pointer"),y=m==null?f:yc(m),I=E==null?f:yc(E),f=new p(x,_+"leave",m,n,d),f.target=y,f.relatedTarget=I,x=null,Ja(d)===c&&(p=new p(w,_+"enter",E,n,d),p.target=I,p.relatedTarget=y,x=p),y=x,m&&E)t:{for(p=m,w=E,_=0,I=p;I;I=Ql(I))_++;for(I=0,x=w;x;x=Ql(x))I++;for(;0<_-I;)p=Ql(p),_--;for(;0<I-_;)w=Ql(w),I--;for(;_--;){if(p===w||w!==null&&p===w.alternate)break t;p=Ql(p),w=Ql(w)}p=null}else p=null;m!==null&&SS(h,f,m,p,!1),E!==null&&y!==null&&SS(h,y,E,p,!0)}}e:{if(f=c?yc(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=KF;else if(gS(f))if(v1)P=JF;else{P=QF;var L=GF}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=YF);if(P&&(P=P(t,c))){y1(h,P,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&d_(f,"number",f.value)}switch(L=c?yc(c):window,t){case"focusin":(gS(L)||L.contentEditable==="true")&&(pc=L,T_=c,Hd=null);break;case"focusout":Hd=T_=pc=null;break;case"mousedown":S_=!0;break;case"contextmenu":case"mouseup":case"dragend":S_=!1,ES(h,n,d);break;case"selectionchange":if(eU)break;case"keydown":case"keyup":ES(h,n,d)}var A;if(P0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else mc?p1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(m1&&n.locale!=="ko"&&(mc||T!=="onCompositionStart"?T==="onCompositionEnd"&&mc&&(A=f1()):(Mo=d,A0="value"in Mo?Mo.value:Mo.textContent,mc=!0)),L=gp(c,T),0<L.length&&(T=new hS(T,t,null,n,d),h.push({event:T,listeners:L}),A?T.data=A:(A=g1(n),A!==null&&(T.data=A)))),(A=BF?zF(t,n):WF(t,n))&&(c=gp(c,"onBeforeInput"),0<c.length&&(d=new hS("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=A))}R1(h,e)})}function Eh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=mh(t,n),i!=null&&r.unshift(Eh(t,i,s)),i=mh(t,e),i!=null&&r.push(Eh(t,i,s))),t=t.return}return r}function Ql(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SS(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=mh(n,i),l!=null&&o.unshift(Eh(n,l,a))):s||(l=mh(n,i),l!=null&&o.push(Eh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sU=/\r\n?/g,iU=/\u0000|\uFFFD/g;function bS(t){return(typeof t=="string"?t:""+t).replace(sU,`
`).replace(iU,"")}function Jf(t,e,n){if(e=bS(e),bS(t)!==e&&n)throw Error(le(425))}function yp(){}var b_=null,A_=null;function x_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var R_=typeof setTimeout=="function"?setTimeout:void 0,oU=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,aU=typeof queueMicrotask=="function"?queueMicrotask:typeof AS<"u"?function(t){return AS.resolve(null).then(t).catch(lU)}:R_;function lU(t){setTimeout(function(){throw t})}function sv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),yh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yh(e)}function Ho(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uu=Math.random().toString(36).slice(2),ei="__reactFiber$"+Uu,Ih="__reactProps$"+Uu,ji="__reactContainer$"+Uu,P_="__reactEvents$"+Uu,cU="__reactListeners$"+Uu,uU="__reactHandles$"+Uu;function Ja(t){var e=t[ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ji]||n[ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xS(t);t!==null;){if(n=t[ei])return n;t=xS(t)}return e}t=n,n=t.parentNode}return null}function sf(t){return t=t[ei]||t[ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function xg(t){return t[Ih]||null}var C_=[],vc=-1;function ya(t){return{current:t}}function Bt(t){0>vc||(t.current=C_[vc],C_[vc]=null,vc--)}function Mt(t,e){vc++,C_[vc]=t.current,t.current=e}var ia={},vr=ya(ia),zr=ya(!1),pl=ia;function ru(t,e){var n=t.type.contextTypes;if(!n)return ia;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wr(t){return t=t.childContextTypes,t!=null}function vp(){Bt(zr),Bt(vr)}function RS(t,e,n){if(vr.current!==ia)throw Error(le(168));Mt(vr,e),Mt(zr,n)}function C1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,GV(t)||"Unknown",s));return ln({},n,r)}function _p(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ia,pl=vr.current,Mt(vr,t),Mt(zr,zr.current),!0}function PS(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=C1(t,e,pl),r.__reactInternalMemoizedMergedChildContext=t,Bt(zr),Bt(vr),Mt(vr,t)):Bt(zr),Mt(zr,n)}var Ai=null,Rg=!1,iv=!1;function k1(t){Ai===null?Ai=[t]:Ai.push(t)}function dU(t){Rg=!0,k1(t)}function va(){if(!iv&&Ai!==null){iv=!0;var t=0,e=At;try{var n=Ai;for(At=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ai=null,Rg=!1}catch(s){throw Ai!==null&&(Ai=Ai.slice(t+1)),n1(I0,va),s}finally{At=e,iv=!1}}return null}var _c=[],wc=0,wp=null,Ep=0,hs=[],fs=0,gl=null,Pi=1,Ci="";function Ma(t,e){_c[wc++]=Ep,_c[wc++]=wp,wp=t,Ep=e}function D1(t,e,n){hs[fs++]=Pi,hs[fs++]=Ci,hs[fs++]=gl,gl=t;var r=Pi;t=Ci;var s=32-Cs(r)-1;r&=~(1<<s),n+=1;var i=32-Cs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pi=1<<32-Cs(e)+s|n<<s|r,Ci=i+t}else Pi=1<<i|n<<s|r,Ci=t}function k0(t){t.return!==null&&(Ma(t,1),D1(t,1,0))}function D0(t){for(;t===wp;)wp=_c[--wc],_c[wc]=null,Ep=_c[--wc],_c[wc]=null;for(;t===gl;)gl=hs[--fs],hs[fs]=null,Ci=hs[--fs],hs[fs]=null,Pi=hs[--fs],hs[fs]=null}var ts=null,Zr=null,Kt=!1,xs=null;function N1(t,e){var n=ms(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function CS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,Zr=Ho(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,Zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gl!==null?{id:Pi,overflow:Ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ms(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ts=t,Zr=null,!0):!1;default:return!1}}function k_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function D_(t){if(Kt){var e=Zr;if(e){var n=e;if(!CS(t,e)){if(k_(t))throw Error(le(418));e=Ho(n.nextSibling);var r=ts;e&&CS(t,e)?N1(r,n):(t.flags=t.flags&-4097|2,Kt=!1,ts=t)}}else{if(k_(t))throw Error(le(418));t.flags=t.flags&-4097|2,Kt=!1,ts=t}}}function kS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function Xf(t){if(t!==ts)return!1;if(!Kt)return kS(t),Kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!x_(t.type,t.memoizedProps)),e&&(e=Zr)){if(k_(t))throw O1(),Error(le(418));for(;e;)N1(t,e),e=Ho(e.nextSibling)}if(kS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zr=Ho(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zr=null}}else Zr=ts?Ho(t.stateNode.nextSibling):null;return!0}function O1(){for(var t=Zr;t;)t=Ho(t.nextSibling)}function su(){Zr=ts=null,Kt=!1}function N0(t){xs===null?xs=[t]:xs.push(t)}var hU=Yi.ReactCurrentBatchConfig;function _d(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Zf(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function DS(t){var e=t._init;return e(t._payload)}function L1(t){function e(w,_){if(t){var I=w.deletions;I===null?(w.deletions=[_],w.flags|=16):I.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function s(w,_){return w=Yo(w,_),w.index=0,w.sibling=null,w}function i(w,_,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<_?(w.flags|=2,_):I):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,I,x){return _===null||_.tag!==6?(_=hv(I,w.mode,x),_.return=w,_):(_=s(_,I),_.return=w,_)}function l(w,_,I,x){var P=I.type;return P===fc?d(w,_,I.props.children,x,I.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===_o&&DS(P)===_.type)?(x=s(_,I.props),x.ref=_d(w,_,I),x.return=w,x):(x=Um(I.type,I.key,I.props,null,w.mode,x),x.ref=_d(w,_,I),x.return=w,x)}function c(w,_,I,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=fv(I,w.mode,x),_.return=w,_):(_=s(_,I.children||[]),_.return=w,_)}function d(w,_,I,x,P){return _===null||_.tag!==7?(_=cl(I,w.mode,x,P),_.return=w,_):(_=s(_,I),_.return=w,_)}function h(w,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=hv(""+_,w.mode,I),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bf:return I=Um(_.type,_.key,_.props,null,w.mode,I),I.ref=_d(w,null,_),I.return=w,I;case hc:return _=fv(_,w.mode,I),_.return=w,_;case _o:var x=_._init;return h(w,x(_._payload),I)}if(kd(_)||md(_))return _=cl(_,w.mode,I,null),_.return=w,_;Zf(w,_)}return null}function f(w,_,I,x){var P=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return P!==null?null:a(w,_,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Bf:return I.key===P?l(w,_,I,x):null;case hc:return I.key===P?c(w,_,I,x):null;case _o:return P=I._init,f(w,_,P(I._payload),x)}if(kd(I)||md(I))return P!==null?null:d(w,_,I,x,null);Zf(w,I)}return null}function m(w,_,I,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(I)||null,a(_,w,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bf:return w=w.get(x.key===null?I:x.key)||null,l(_,w,x,P);case hc:return w=w.get(x.key===null?I:x.key)||null,c(_,w,x,P);case _o:var L=x._init;return m(w,_,I,L(x._payload),P)}if(kd(x)||md(x))return w=w.get(I)||null,d(_,w,x,P,null);Zf(_,x)}return null}function E(w,_,I,x){for(var P=null,L=null,A=_,T=_=0,R=null;A!==null&&T<I.length;T++){A.index>T?(R=A,A=null):R=A.sibling;var C=f(w,A,I[T],x);if(C===null){A===null&&(A=R);break}t&&A&&C.alternate===null&&e(w,A),_=i(C,_,T),L===null?P=C:L.sibling=C,L=C,A=R}if(T===I.length)return n(w,A),Kt&&Ma(w,T),P;if(A===null){for(;T<I.length;T++)A=h(w,I[T],x),A!==null&&(_=i(A,_,T),L===null?P=A:L.sibling=A,L=A);return Kt&&Ma(w,T),P}for(A=r(w,A);T<I.length;T++)R=m(A,w,T,I[T],x),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?T:R.key),_=i(R,_,T),L===null?P=R:L.sibling=R,L=R);return t&&A.forEach(function(N){return e(w,N)}),Kt&&Ma(w,T),P}function p(w,_,I,x){var P=md(I);if(typeof P!="function")throw Error(le(150));if(I=P.call(I),I==null)throw Error(le(151));for(var L=P=null,A=_,T=_=0,R=null,C=I.next();A!==null&&!C.done;T++,C=I.next()){A.index>T?(R=A,A=null):R=A.sibling;var N=f(w,A,C.value,x);if(N===null){A===null&&(A=R);break}t&&A&&N.alternate===null&&e(w,A),_=i(N,_,T),L===null?P=N:L.sibling=N,L=N,A=R}if(C.done)return n(w,A),Kt&&Ma(w,T),P;if(A===null){for(;!C.done;T++,C=I.next())C=h(w,C.value,x),C!==null&&(_=i(C,_,T),L===null?P=C:L.sibling=C,L=C);return Kt&&Ma(w,T),P}for(A=r(w,A);!C.done;T++,C=I.next())C=m(A,w,T,C.value,x),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?T:C.key),_=i(C,_,T),L===null?P=C:L.sibling=C,L=C);return t&&A.forEach(function(O){return e(w,O)}),Kt&&Ma(w,T),P}function y(w,_,I,x){if(typeof I=="object"&&I!==null&&I.type===fc&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Bf:e:{for(var P=I.key,L=_;L!==null;){if(L.key===P){if(P=I.type,P===fc){if(L.tag===7){n(w,L.sibling),_=s(L,I.props.children),_.return=w,w=_;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===_o&&DS(P)===L.type){n(w,L.sibling),_=s(L,I.props),_.ref=_d(w,L,I),_.return=w,w=_;break e}n(w,L);break}else e(w,L);L=L.sibling}I.type===fc?(_=cl(I.props.children,w.mode,x,I.key),_.return=w,w=_):(x=Um(I.type,I.key,I.props,null,w.mode,x),x.ref=_d(w,_,I),x.return=w,w=x)}return o(w);case hc:e:{for(L=I.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(w,_.sibling),_=s(_,I.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=fv(I,w.mode,x),_.return=w,w=_}return o(w);case _o:return L=I._init,y(w,_,L(I._payload),x)}if(kd(I))return E(w,_,I,x);if(md(I))return p(w,_,I,x);Zf(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(w,_.sibling),_=s(_,I),_.return=w,w=_):(n(w,_),_=hv(I,w.mode,x),_.return=w,w=_),o(w)):n(w,_)}return y}var iu=L1(!0),M1=L1(!1),Ip=ya(null),Tp=null,Ec=null,O0=null;function L0(){O0=Ec=Tp=null}function M0(t){var e=Ip.current;Bt(Ip),t._currentValue=e}function N_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Lc(t,e){Tp=t,O0=Ec=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fr=!0),t.firstContext=null)}function ys(t){var e=t._currentValue;if(O0!==t)if(t={context:t,memoizedValue:e,next:null},Ec===null){if(Tp===null)throw Error(le(308));Ec=t,Tp.dependencies={lanes:0,firstContext:t}}else Ec=Ec.next=t;return e}var Xa=null;function V0(t){Xa===null?Xa=[t]:Xa.push(t)}function V1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,V0(e)):(n.next=s.next,s.next=n),e.interleaved=n,$i(t,r)}function $i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wo=!1;function F0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ko(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$i(t,n)}return s=r.interleaved,s===null?(e.next=e,V0(r)):(e.next=s.next,s.next=e),r.interleaved=e,$i(t,n)}function Nm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,T0(t,n)}}function NS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sp(t,e,n,r){var s=t.updateQueue;wo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,p=a;switch(f=e,m=n,p.tag){case 1:if(E=p.payload,typeof E=="function"){h=E.call(m,h,f);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=p.payload,f=typeof E=="function"?E.call(m,h,f):E,f==null)break e;h=ln({},h,f);break e;case 2:wo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);vl|=o,t.lanes=o,t.memoizedState=h}}function OS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var of={},li=ya(of),Th=ya(of),Sh=ya(of);function Za(t){if(t===of)throw Error(le(174));return t}function U0(t,e){switch(Mt(Sh,e),Mt(Th,t),Mt(li,of),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:f_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=f_(e,t)}Bt(li),Mt(li,e)}function ou(){Bt(li),Bt(Th),Bt(Sh)}function U1(t){Za(Sh.current);var e=Za(li.current),n=f_(e,t.type);e!==n&&(Mt(Th,t),Mt(li,n))}function j0(t){Th.current===t&&(Bt(li),Bt(Th))}var sn=ya(0);function bp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ov=[];function $0(){for(var t=0;t<ov.length;t++)ov[t]._workInProgressVersionPrimary=null;ov.length=0}var Om=Yi.ReactCurrentDispatcher,av=Yi.ReactCurrentBatchConfig,yl=0,an=null,Fn=null,Yn=null,Ap=!1,Kd=!1,bh=0,fU=0;function dr(){throw Error(le(321))}function B0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Os(t[n],e[n]))return!1;return!0}function z0(t,e,n,r,s,i){if(yl=i,an=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Om.current=t===null||t.memoizedState===null?yU:vU,t=n(r,s),Kd){i=0;do{if(Kd=!1,bh=0,25<=i)throw Error(le(301));i+=1,Yn=Fn=null,e.updateQueue=null,Om.current=_U,t=n(r,s)}while(Kd)}if(Om.current=xp,e=Fn!==null&&Fn.next!==null,yl=0,Yn=Fn=an=null,Ap=!1,e)throw Error(le(300));return t}function W0(){var t=bh!==0;return bh=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?an.memoizedState=Yn=t:Yn=Yn.next=t,Yn}function vs(){if(Fn===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=Fn.next;var e=Yn===null?an.memoizedState:Yn.next;if(e!==null)Yn=e,Fn=t;else{if(t===null)throw Error(le(310));Fn=t,t={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Yn===null?an.memoizedState=Yn=t:Yn=Yn.next=t}return Yn}function Ah(t,e){return typeof e=="function"?e(t):e}function lv(t){var e=vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=Fn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((yl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,an.lanes|=d,vl|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Os(r,e.memoizedState)||(Fr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,an.lanes|=i,vl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cv(t){var e=vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Os(i,e.memoizedState)||(Fr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function j1(){}function $1(t,e){var n=an,r=vs(),s=e(),i=!Os(r.memoizedState,s);if(i&&(r.memoizedState=s,Fr=!0),r=r.queue,q0(W1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Yn!==null&&Yn.memoizedState.tag&1){if(n.flags|=2048,xh(9,z1.bind(null,n,r,s,e),void 0,null),Zn===null)throw Error(le(349));yl&30||B1(n,e,s)}return s}function B1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function z1(t,e,n,r){e.value=n,e.getSnapshot=r,q1(e)&&H1(t)}function W1(t,e,n){return n(function(){q1(e)&&H1(t)})}function q1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Os(t,n)}catch{return!0}}function H1(t){var e=$i(t,1);e!==null&&ks(e,t,1,-1)}function LS(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ah,lastRenderedState:t},e.queue=t,t=t.dispatch=gU.bind(null,an,t),[e.memoizedState,t]}function xh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function K1(){return vs().memoizedState}function Lm(t,e,n,r){var s=Gs();an.flags|=t,s.memoizedState=xh(1|e,n,void 0,r===void 0?null:r)}function Pg(t,e,n,r){var s=vs();r=r===void 0?null:r;var i=void 0;if(Fn!==null){var o=Fn.memoizedState;if(i=o.destroy,r!==null&&B0(r,o.deps)){s.memoizedState=xh(e,n,i,r);return}}an.flags|=t,s.memoizedState=xh(1|e,n,i,r)}function MS(t,e){return Lm(8390656,8,t,e)}function q0(t,e){return Pg(2048,8,t,e)}function G1(t,e){return Pg(4,2,t,e)}function Q1(t,e){return Pg(4,4,t,e)}function Y1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J1(t,e,n){return n=n!=null?n.concat([t]):null,Pg(4,4,Y1.bind(null,e,t),n)}function H0(){}function X1(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Z1(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function eC(t,e,n){return yl&21?(Os(n,e)||(n=i1(),an.lanes|=n,vl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fr=!0),t.memoizedState=n)}function mU(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var r=av.transition;av.transition={};try{t(!1),e()}finally{At=n,av.transition=r}}function tC(){return vs().memoizedState}function pU(t,e,n){var r=Qo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nC(t))rC(e,n);else if(n=V1(t,e,n,r),n!==null){var s=Ar();ks(n,t,r,s),sC(n,e,r)}}function gU(t,e,n){var r=Qo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nC(t))rC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Os(a,o)){var l=e.interleaved;l===null?(s.next=s,V0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=V1(t,e,s,r),n!==null&&(s=Ar(),ks(n,t,r,s),sC(n,e,r))}}function nC(t){var e=t.alternate;return t===an||e!==null&&e===an}function rC(t,e){Kd=Ap=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,T0(t,n)}}var xp={readContext:ys,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useInsertionEffect:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useSyncExternalStore:dr,useId:dr,unstable_isNewReconciler:!1},yU={readContext:ys,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:ys,useEffect:MS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lm(4194308,4,Y1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lm(4,2,t,e)},useMemo:function(t,e){var n=Gs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pU.bind(null,an,t),[r.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:LS,useDebugValue:H0,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=LS(!1),e=t[0];return t=mU.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=an,s=Gs();if(Kt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Zn===null)throw Error(le(349));yl&30||B1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,MS(W1.bind(null,r,i,t),[t]),r.flags|=2048,xh(9,z1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gs(),e=Zn.identifierPrefix;if(Kt){var n=Ci,r=Pi;n=(r&~(1<<32-Cs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vU={readContext:ys,useCallback:X1,useContext:ys,useEffect:q0,useImperativeHandle:J1,useInsertionEffect:G1,useLayoutEffect:Q1,useMemo:Z1,useReducer:lv,useRef:K1,useState:function(){return lv(Ah)},useDebugValue:H0,useDeferredValue:function(t){var e=vs();return eC(e,Fn.memoizedState,t)},useTransition:function(){var t=lv(Ah)[0],e=vs().memoizedState;return[t,e]},useMutableSource:j1,useSyncExternalStore:$1,useId:tC,unstable_isNewReconciler:!1},_U={readContext:ys,useCallback:X1,useContext:ys,useEffect:q0,useImperativeHandle:J1,useInsertionEffect:G1,useLayoutEffect:Q1,useMemo:Z1,useReducer:cv,useRef:K1,useState:function(){return cv(Ah)},useDebugValue:H0,useDeferredValue:function(t){var e=vs();return Fn===null?e.memoizedState=t:eC(e,Fn.memoizedState,t)},useTransition:function(){var t=cv(Ah)[0],e=vs().memoizedState;return[t,e]},useMutableSource:j1,useSyncExternalStore:$1,useId:tC,unstable_isNewReconciler:!1};function Is(t,e){if(t&&t.defaultProps){e=ln({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function O_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cg={isMounted:function(t){return(t=t._reactInternals)?Ml(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ar(),s=Qo(t),i=Mi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,s),e!==null&&(ks(e,t,s,r),Nm(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ar(),s=Qo(t),i=Mi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,s),e!==null&&(ks(e,t,s,r),Nm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ar(),r=Qo(t),s=Mi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ko(t,s,r),e!==null&&(ks(e,t,r,n),Nm(e,t,r))}};function VS(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_h(n,r)||!_h(s,i):!0}function iC(t,e,n){var r=!1,s=ia,i=e.contextType;return typeof i=="object"&&i!==null?i=ys(i):(s=Wr(e)?pl:vr.current,r=e.contextTypes,i=(r=r!=null)?ru(t,s):ia),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function FS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cg.enqueueReplaceState(e,e.state,null)}function L_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},F0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ys(i):(i=Wr(e)?pl:vr.current,s.context=ru(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(O_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cg.enqueueReplaceState(s,s.state,null),Sp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function au(t,e){try{var n="",r=e;do n+=KV(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function uv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function M_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wU=typeof WeakMap=="function"?WeakMap:Map;function oC(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pp||(Pp=!0,H_=r),M_(t,e)},n}function aC(t,e,n){n=Mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){M_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){M_(t,e),typeof r!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function US(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wU;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OU.bind(null,t,e,n),e.then(t,t))}function jS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $S(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,Ko(n,e,1))),n.lanes|=1),t)}var EU=Yi.ReactCurrentOwner,Fr=!1;function Tr(t,e,n,r){e.child=t===null?M1(e,null,n,r):iu(e,t.child,n,r)}function BS(t,e,n,r,s){n=n.render;var i=e.ref;return Lc(e,s),r=z0(t,e,n,r,i,s),n=W0(),t!==null&&!Fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Kt&&n&&k0(e),e.flags|=1,Tr(t,e,r,s),e.child)}function zS(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!eE(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,lC(t,e,i,r,s)):(t=Um(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_h,n(o,r)&&t.ref===e.ref)return Bi(t,e,s)}return e.flags|=1,t=Yo(i,r),t.ref=e.ref,t.return=e,e.child=t}function lC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_h(i,r)&&t.ref===e.ref)if(Fr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fr=!0);else return e.lanes=t.lanes,Bi(t,e,s)}return V_(t,e,n,r,s)}function cC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Tc,Qr),Qr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mt(Tc,Qr),Qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Mt(Tc,Qr),Qr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Mt(Tc,Qr),Qr|=r;return Tr(t,e,s,n),e.child}function uC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function V_(t,e,n,r,s){var i=Wr(n)?pl:vr.current;return i=ru(e,i),Lc(e,s),n=z0(t,e,n,r,i,s),r=W0(),t!==null&&!Fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Kt&&r&&k0(e),e.flags|=1,Tr(t,e,n,s),e.child)}function WS(t,e,n,r,s){if(Wr(n)){var i=!0;_p(e)}else i=!1;if(Lc(e,s),e.stateNode===null)Mm(t,e),iC(e,n,r),L_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ys(c):(c=Wr(n)?pl:vr.current,c=ru(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&FS(e,o,r,c),wo=!1;var f=e.memoizedState;o.state=f,Sp(e,r,o,s),l=e.memoizedState,a!==r||f!==l||zr.current||wo?(typeof d=="function"&&(O_(e,n,d,r),l=e.memoizedState),(a=wo||VS(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,F1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Is(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ys(l):(l=Wr(n)?pl:vr.current,l=ru(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&FS(e,o,r,l),wo=!1,f=e.memoizedState,o.state=f,Sp(e,r,o,s);var E=e.memoizedState;a!==h||f!==E||zr.current||wo?(typeof m=="function"&&(O_(e,n,m,r),E=e.memoizedState),(c=wo||VS(e,n,c,r,f,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return F_(t,e,n,r,i,s)}function F_(t,e,n,r,s,i){uC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&PS(e,n,!1),Bi(t,e,i);r=e.stateNode,EU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=iu(e,t.child,null,i),e.child=iu(e,null,a,i)):Tr(t,e,a,i),e.memoizedState=r.state,s&&PS(e,n,!0),e.child}function dC(t){var e=t.stateNode;e.pendingContext?RS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&RS(t,e.context,!1),U0(t,e.containerInfo)}function qS(t,e,n,r,s){return su(),N0(s),e.flags|=256,Tr(t,e,n,r),e.child}var U_={dehydrated:null,treeContext:null,retryLane:0};function j_(t){return{baseLanes:t,cachePool:null,transitions:null}}function hC(t,e,n){var r=e.pendingProps,s=sn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Mt(sn,s&1),t===null)return D_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ng(o,r,0,null),t=cl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=j_(n),e.memoizedState=U_,t):K0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return IU(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Yo(a,i):(i=cl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?j_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=U_,r}return i=t.child,t=i.sibling,r=Yo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function K0(t,e){return e=Ng({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function em(t,e,n,r){return r!==null&&N0(r),iu(e,t.child,null,n),t=K0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IU(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=uv(Error(le(422))),em(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ng({mode:"visible",children:r.children},s,0,null),i=cl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&iu(e,t.child,null,o),e.child.memoizedState=j_(o),e.memoizedState=U_,i);if(!(e.mode&1))return em(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(le(419)),r=uv(i,r,void 0),em(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fr||a){if(r=Zn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$i(t,s),ks(r,t,s,-1))}return Z0(),r=uv(Error(le(421))),em(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LU.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Zr=Ho(s.nextSibling),ts=e,Kt=!0,xs=null,t!==null&&(hs[fs++]=Pi,hs[fs++]=Ci,hs[fs++]=gl,Pi=t.id,Ci=t.overflow,gl=e),e=K0(e,r.children),e.flags|=4096,e)}function HS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),N_(t.return,e,n)}function dv(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tr(t,e,r.children,n),r=sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HS(t,n,e);else if(t.tag===19)HS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Mt(sn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bp(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),dv(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bp(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}dv(e,!0,n,null,i);break;case"together":dv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=Yo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TU(t,e,n){switch(e.tag){case 3:dC(e),su();break;case 5:U1(e);break;case 1:Wr(e.type)&&_p(e);break;case 4:U0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Mt(Ip,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Mt(sn,sn.current&1),e.flags|=128,null):n&e.child.childLanes?hC(t,e,n):(Mt(sn,sn.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);Mt(sn,sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mt(sn,sn.current),r)break;return null;case 22:case 23:return e.lanes=0,cC(t,e,n)}return Bi(t,e,n)}var mC,$_,pC,gC;mC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$_=function(){};pC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Za(li.current);var i=null;switch(n){case"input":s=c_(t,s),r=c_(t,r),i=[];break;case"select":s=ln({},s,{value:void 0}),r=ln({},r,{value:void 0}),i=[];break;case"textarea":s=h_(t,s),r=h_(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yp)}m_(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hh.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ut("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};gC=function(t,e,n,r){n!==r&&(e.flags|=4)};function wd(t,e){if(!Kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function hr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function SU(t,e,n){var r=e.pendingProps;switch(D0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(e),null;case 1:return Wr(e.type)&&vp(),hr(e),null;case 3:return r=e.stateNode,ou(),Bt(zr),Bt(vr),$0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(Q_(xs),xs=null))),$_(t,e),hr(e),null;case 5:j0(e);var s=Za(Sh.current);if(n=e.type,t!==null&&e.stateNode!=null)pC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return hr(e),null}if(t=Za(li.current),Xf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ei]=e,r[Ih]=i,t=(e.mode&1)!==0,n){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(s=0;s<Nd.length;s++)Ut(Nd[s],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":tS(r,i),Ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ut("invalid",r);break;case"textarea":rS(r,i),Ut("invalid",r)}m_(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Jf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Jf(r.textContent,a,t),s=["children",""+a]):hh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ut("scroll",r)}switch(n){case"input":zf(r),nS(r,i,!0);break;case"textarea":zf(r),sS(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=yp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=WP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ei]=e,t[Ih]=r,mC(t,e,!1,!1),e.stateNode=t;e:{switch(o=p_(n,r),n){case"dialog":Ut("cancel",t),Ut("close",t),s=r;break;case"iframe":case"object":case"embed":Ut("load",t),s=r;break;case"video":case"audio":for(s=0;s<Nd.length;s++)Ut(Nd[s],t);s=r;break;case"source":Ut("error",t),s=r;break;case"img":case"image":case"link":Ut("error",t),Ut("load",t),s=r;break;case"details":Ut("toggle",t),s=r;break;case"input":tS(t,r),s=c_(t,r),Ut("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ln({},r,{value:void 0}),Ut("invalid",t);break;case"textarea":rS(t,r),s=h_(t,r),Ut("invalid",t);break;default:s=r}m_(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?KP(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qP(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&fh(t,l):typeof l=="number"&&fh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ut("scroll",t):l!=null&&y0(t,i,l,o))}switch(n){case"input":zf(t),nS(t,r,!1);break;case"textarea":zf(t),sS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sa(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?kc(t,!!r.multiple,i,!1):r.defaultValue!=null&&kc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hr(e),null;case 6:if(t&&e.stateNode!=null)gC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Za(Sh.current),Za(li.current),Xf(e)){if(r=e.stateNode,n=e.memoizedProps,r[ei]=e,(i=r.nodeValue!==n)&&(t=ts,t!==null))switch(t.tag){case 3:Jf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ei]=e,e.stateNode=r}return hr(e),null;case 13:if(Bt(sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Kt&&Zr!==null&&e.mode&1&&!(e.flags&128))O1(),su(),e.flags|=98560,i=!1;else if(i=Xf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[ei]=e}else su(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hr(e),i=!1}else xs!==null&&(Q_(xs),xs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||sn.current&1?Un===0&&(Un=3):Z0())),e.updateQueue!==null&&(e.flags|=4),hr(e),null);case 4:return ou(),$_(t,e),t===null&&wh(e.stateNode.containerInfo),hr(e),null;case 10:return M0(e.type._context),hr(e),null;case 17:return Wr(e.type)&&vp(),hr(e),null;case 19:if(Bt(sn),i=e.memoizedState,i===null)return hr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)wd(i,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bp(t),o!==null){for(e.flags|=128,wd(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mt(sn,sn.current&1|2),e.child}t=t.sibling}i.tail!==null&&gn()>lu&&(e.flags|=128,r=!0,wd(i,!1),e.lanes=4194304)}else{if(!r)if(t=bp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Kt)return hr(e),null}else 2*gn()-i.renderingStartTime>lu&&n!==1073741824&&(e.flags|=128,r=!0,wd(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=gn(),e.sibling=null,n=sn.current,Mt(sn,r?n&1|2:n&1),e):(hr(e),null);case 22:case 23:return X0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qr&1073741824&&(hr(e),e.subtreeFlags&6&&(e.flags|=8192)):hr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function bU(t,e){switch(D0(e),e.tag){case 1:return Wr(e.type)&&vp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ou(),Bt(zr),Bt(vr),$0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return j0(e),null;case 13:if(Bt(sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));su()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(sn),null;case 4:return ou(),null;case 10:return M0(e.type._context),null;case 22:case 23:return X0(),null;case 24:return null;default:return null}}var tm=!1,pr=!1,AU=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Ic(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(t,e,r)}else n.current=null}function B_(t,e,n){try{n()}catch(r){pn(t,e,r)}}var KS=!1;function xU(t,e){if(b_=mp,t=E1(),C0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(A_={focusedElem:t,selectionRange:n},mp=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var p=E.memoizedProps,y=E.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?p:Is(e.type,p),y);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(x){pn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return E=KS,KS=!1,E}function Gd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&B_(e,n,i)}s=s.next}while(s!==r)}}function kg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function z_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yC(t){var e=t.alternate;e!==null&&(t.alternate=null,yC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ei],delete e[Ih],delete e[P_],delete e[cU],delete e[uU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vC(t){return t.tag===5||t.tag===3||t.tag===4}function GS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function W_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yp));else if(r!==4&&(t=t.child,t!==null))for(W_(t,e,n),t=t.sibling;t!==null;)W_(t,e,n),t=t.sibling}function q_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(q_(t,e,n),t=t.sibling;t!==null;)q_(t,e,n),t=t.sibling}var rr=null,bs=!1;function co(t,e,n){for(n=n.child;n!==null;)_C(t,e,n),n=n.sibling}function _C(t,e,n){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(Tg,n)}catch{}switch(n.tag){case 5:pr||Ic(n,e);case 6:var r=rr,s=bs;rr=null,co(t,e,n),rr=r,bs=s,rr!==null&&(bs?(t=rr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(bs?(t=rr,n=n.stateNode,t.nodeType===8?sv(t.parentNode,n):t.nodeType===1&&sv(t,n),yh(t)):sv(rr,n.stateNode));break;case 4:r=rr,s=bs,rr=n.stateNode.containerInfo,bs=!0,co(t,e,n),rr=r,bs=s;break;case 0:case 11:case 14:case 15:if(!pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&B_(n,e,o),s=s.next}while(s!==r)}co(t,e,n);break;case 1:if(!pr&&(Ic(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pn(n,e,a)}co(t,e,n);break;case 21:co(t,e,n);break;case 22:n.mode&1?(pr=(r=pr)||n.memoizedState!==null,co(t,e,n),pr=r):co(t,e,n);break;default:co(t,e,n)}}function QS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AU),e.forEach(function(r){var s=MU.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ws(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rr=a.stateNode,bs=!1;break e;case 3:rr=a.stateNode.containerInfo,bs=!0;break e;case 4:rr=a.stateNode.containerInfo,bs=!0;break e}a=a.return}if(rr===null)throw Error(le(160));_C(i,o,s),rr=null,bs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wC(e,t),e=e.sibling}function wC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ws(e,t),Ks(t),r&4){try{Gd(3,t,t.return),kg(3,t)}catch(p){pn(t,t.return,p)}try{Gd(5,t,t.return)}catch(p){pn(t,t.return,p)}}break;case 1:ws(e,t),Ks(t),r&512&&n!==null&&Ic(n,n.return);break;case 5:if(ws(e,t),Ks(t),r&512&&n!==null&&Ic(n,n.return),t.flags&32){var s=t.stateNode;try{fh(s,"")}catch(p){pn(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&BP(s,i),p_(a,o);var c=p_(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?KP(s,h):d==="dangerouslySetInnerHTML"?qP(s,h):d==="children"?fh(s,h):y0(s,d,h,c)}switch(a){case"input":u_(s,i);break;case"textarea":zP(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?kc(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?kc(s,!!i.multiple,i.defaultValue,!0):kc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ih]=i}catch(p){pn(t,t.return,p)}}break;case 6:if(ws(e,t),Ks(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){pn(t,t.return,p)}}break;case 3:if(ws(e,t),Ks(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yh(e.containerInfo)}catch(p){pn(t,t.return,p)}break;case 4:ws(e,t),Ks(t);break;case 13:ws(e,t),Ks(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Y0=gn())),r&4&&QS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(pr=(c=pr)||d,ws(e,t),pr=c):ws(e,t),Ks(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ae=t,d=t.child;d!==null;){for(h=Ae=d;Ae!==null;){switch(f=Ae,m=f.child,f.tag){case 0:case 11:case 14:case 15:Gd(4,f,f.return);break;case 1:Ic(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(p){pn(r,n,p)}}break;case 5:Ic(f,f.return);break;case 22:if(f.memoizedState!==null){JS(h);continue}}m!==null?(m.return=f,Ae=m):JS(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=HP("display",o))}catch(p){pn(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){pn(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ws(e,t),Ks(t),r&4&&QS(t);break;case 21:break;default:ws(e,t),Ks(t)}}function Ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vC(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fh(s,""),r.flags&=-33);var i=GS(t);q_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=GS(t);W_(t,a,o);break;default:throw Error(le(161))}}catch(l){pn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RU(t,e,n){Ae=t,EC(t)}function EC(t,e,n){for(var r=(t.mode&1)!==0;Ae!==null;){var s=Ae,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||pr;a=tm;var c=pr;if(tm=o,(pr=l)&&!c)for(Ae=s;Ae!==null;)o=Ae,l=o.child,o.tag===22&&o.memoizedState!==null?XS(s):l!==null?(l.return=o,Ae=l):XS(s);for(;i!==null;)Ae=i,EC(i),i=i.sibling;Ae=s,tm=a,pr=c}YS(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ae=i):YS(t)}}function YS(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pr||kg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Is(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&OS(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&yh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}pr||e.flags&512&&z_(e)}catch(f){pn(e,e.return,f)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function JS(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function XS(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kg(4,e)}catch(l){pn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pn(e,s,l)}}var i=e.return;try{z_(e)}catch(l){pn(e,i,l)}break;case 5:var o=e.return;try{z_(e)}catch(l){pn(e,o,l)}}}catch(l){pn(e,e.return,l)}if(e===t){Ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ae=a;break}Ae=e.return}}var PU=Math.ceil,Rp=Yi.ReactCurrentDispatcher,G0=Yi.ReactCurrentOwner,ps=Yi.ReactCurrentBatchConfig,vt=0,Zn=null,xn=null,or=0,Qr=0,Tc=ya(0),Un=0,Rh=null,vl=0,Dg=0,Q0=0,Qd=null,Lr=null,Y0=0,lu=1/0,bi=null,Pp=!1,H_=null,Go=null,nm=!1,Vo=null,Cp=0,Yd=0,K_=null,Vm=-1,Fm=0;function Ar(){return vt&6?gn():Vm!==-1?Vm:Vm=gn()}function Qo(t){return t.mode&1?vt&2&&or!==0?or&-or:hU.transition!==null?(Fm===0&&(Fm=i1()),Fm):(t=At,t!==0||(t=window.event,t=t===void 0?16:h1(t.type)),t):1}function ks(t,e,n,r){if(50<Yd)throw Yd=0,K_=null,Error(le(185));nf(t,n,r),(!(vt&2)||t!==Zn)&&(t===Zn&&(!(vt&2)&&(Dg|=n),Un===4&&To(t,or)),qr(t,r),n===1&&vt===0&&!(e.mode&1)&&(lu=gn()+500,Rg&&va()))}function qr(t,e){var n=t.callbackNode;hF(t,e);var r=fp(t,t===Zn?or:0);if(r===0)n!==null&&aS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aS(n),e===1)t.tag===0?dU(ZS.bind(null,t)):k1(ZS.bind(null,t)),aU(function(){!(vt&6)&&va()}),n=null;else{switch(o1(r)){case 1:n=I0;break;case 4:n=r1;break;case 16:n=hp;break;case 536870912:n=s1;break;default:n=hp}n=PC(n,IC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IC(t,e){if(Vm=-1,Fm=0,vt&6)throw Error(le(327));var n=t.callbackNode;if(Mc()&&t.callbackNode!==n)return null;var r=fp(t,t===Zn?or:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kp(t,r);else{e=r;var s=vt;vt|=2;var i=SC();(Zn!==t||or!==e)&&(bi=null,lu=gn()+500,ll(t,e));do try{DU();break}catch(a){TC(t,a)}while(!0);L0(),Rp.current=i,vt=s,xn!==null?e=0:(Zn=null,or=0,e=Un)}if(e!==0){if(e===2&&(s=w_(t),s!==0&&(r=s,e=G_(t,s))),e===1)throw n=Rh,ll(t,0),To(t,r),qr(t,gn()),n;if(e===6)To(t,r);else{if(s=t.current.alternate,!(r&30)&&!CU(s)&&(e=kp(t,r),e===2&&(i=w_(t),i!==0&&(r=i,e=G_(t,i))),e===1))throw n=Rh,ll(t,0),To(t,r),qr(t,gn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Va(t,Lr,bi);break;case 3:if(To(t,r),(r&130023424)===r&&(e=Y0+500-gn(),10<e)){if(fp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ar(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=R_(Va.bind(null,t,Lr,bi),e);break}Va(t,Lr,bi);break;case 4:if(To(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PU(r/1960))-r,10<r){t.timeoutHandle=R_(Va.bind(null,t,Lr,bi),r);break}Va(t,Lr,bi);break;case 5:Va(t,Lr,bi);break;default:throw Error(le(329))}}}return qr(t,gn()),t.callbackNode===n?IC.bind(null,t):null}function G_(t,e){var n=Qd;return t.current.memoizedState.isDehydrated&&(ll(t,e).flags|=256),t=kp(t,e),t!==2&&(e=Lr,Lr=n,e!==null&&Q_(e)),t}function Q_(t){Lr===null?Lr=t:Lr.push.apply(Lr,t)}function CU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Os(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function To(t,e){for(e&=~Q0,e&=~Dg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cs(e),r=1<<n;t[n]=-1,e&=~r}}function ZS(t){if(vt&6)throw Error(le(327));Mc();var e=fp(t,0);if(!(e&1))return qr(t,gn()),null;var n=kp(t,e);if(t.tag!==0&&n===2){var r=w_(t);r!==0&&(e=r,n=G_(t,r))}if(n===1)throw n=Rh,ll(t,0),To(t,e),qr(t,gn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Va(t,Lr,bi),qr(t,gn()),null}function J0(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(lu=gn()+500,Rg&&va())}}function _l(t){Vo!==null&&Vo.tag===0&&!(vt&6)&&Mc();var e=vt;vt|=1;var n=ps.transition,r=At;try{if(ps.transition=null,At=1,t)return t()}finally{At=r,ps.transition=n,vt=e,!(vt&6)&&va()}}function X0(){Qr=Tc.current,Bt(Tc)}function ll(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oU(n)),xn!==null)for(n=xn.return;n!==null;){var r=n;switch(D0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vp();break;case 3:ou(),Bt(zr),Bt(vr),$0();break;case 5:j0(r);break;case 4:ou();break;case 13:Bt(sn);break;case 19:Bt(sn);break;case 10:M0(r.type._context);break;case 22:case 23:X0()}n=n.return}if(Zn=t,xn=t=Yo(t.current,null),or=Qr=e,Un=0,Rh=null,Q0=Dg=vl=0,Lr=Qd=null,Xa!==null){for(e=0;e<Xa.length;e++)if(n=Xa[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xa=null}return t}function TC(t,e){do{var n=xn;try{if(L0(),Om.current=xp,Ap){for(var r=an.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ap=!1}if(yl=0,Yn=Fn=an=null,Kd=!1,bh=0,G0.current=null,n===null||n.return===null){Un=1,Rh=e,xn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=or,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=jS(o);if(m!==null){m.flags&=-257,$S(m,o,a,i,e),m.mode&1&&US(i,c,e),e=m,l=c;var E=e.updateQueue;if(E===null){var p=new Set;p.add(l),e.updateQueue=p}else E.add(l);break e}else{if(!(e&1)){US(i,c,e),Z0();break e}l=Error(le(426))}}else if(Kt&&a.mode&1){var y=jS(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),$S(y,o,a,i,e),N0(au(l,a));break e}}i=l=au(l,a),Un!==4&&(Un=2),Qd===null?Qd=[i]:Qd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=oC(i,l,e);NS(i,w);break e;case 1:a=l;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Go===null||!Go.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=aC(i,a,e);NS(i,x);break e}}i=i.return}while(i!==null)}AC(n)}catch(P){e=P,xn===n&&n!==null&&(xn=n=n.return);continue}break}while(!0)}function SC(){var t=Rp.current;return Rp.current=xp,t===null?xp:t}function Z0(){(Un===0||Un===3||Un===2)&&(Un=4),Zn===null||!(vl&268435455)&&!(Dg&268435455)||To(Zn,or)}function kp(t,e){var n=vt;vt|=2;var r=SC();(Zn!==t||or!==e)&&(bi=null,ll(t,e));do try{kU();break}catch(s){TC(t,s)}while(!0);if(L0(),vt=n,Rp.current=r,xn!==null)throw Error(le(261));return Zn=null,or=0,Un}function kU(){for(;xn!==null;)bC(xn)}function DU(){for(;xn!==null&&!rF();)bC(xn)}function bC(t){var e=RC(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,e===null?AC(t):xn=e,G0.current=null}function AC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bU(n,e),n!==null){n.flags&=32767,xn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,xn=null;return}}else if(n=SU(n,e,Qr),n!==null){xn=n;return}if(e=e.sibling,e!==null){xn=e;return}xn=e=t}while(e!==null);Un===0&&(Un=5)}function Va(t,e,n){var r=At,s=ps.transition;try{ps.transition=null,At=1,NU(t,e,n,r)}finally{ps.transition=s,At=r}return null}function NU(t,e,n,r){do Mc();while(Vo!==null);if(vt&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fF(t,i),t===Zn&&(xn=Zn=null,or=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nm||(nm=!0,PC(hp,function(){return Mc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var o=At;At=1;var a=vt;vt|=4,G0.current=null,xU(t,n),wC(n,t),ZF(A_),mp=!!b_,A_=b_=null,t.current=n,RU(n),sF(),vt=a,At=o,ps.transition=i}else t.current=n;if(nm&&(nm=!1,Vo=t,Cp=s),i=t.pendingLanes,i===0&&(Go=null),aF(n.stateNode),qr(t,gn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pp)throw Pp=!1,t=H_,H_=null,t;return Cp&1&&t.tag!==0&&Mc(),i=t.pendingLanes,i&1?t===K_?Yd++:(Yd=0,K_=t):Yd=0,va(),null}function Mc(){if(Vo!==null){var t=o1(Cp),e=ps.transition,n=At;try{if(ps.transition=null,At=16>t?16:t,Vo===null)var r=!1;else{if(t=Vo,Vo=null,Cp=0,vt&6)throw Error(le(331));var s=vt;for(vt|=4,Ae=t.current;Ae!==null;){var i=Ae,o=i.child;if(Ae.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ae=c;Ae!==null;){var d=Ae;switch(d.tag){case 0:case 11:case 15:Gd(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ae=h;else for(;Ae!==null;){d=Ae;var f=d.sibling,m=d.return;if(yC(d),d===c){Ae=null;break}if(f!==null){f.return=m,Ae=f;break}Ae=m}}}var E=i.alternate;if(E!==null){var p=E.child;if(p!==null){E.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}Ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ae=o;else e:for(;Ae!==null;){if(i=Ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gd(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Ae=w;break e}Ae=i.return}}var _=t.current;for(Ae=_;Ae!==null;){o=Ae;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Ae=I;else e:for(o=_;Ae!==null;){if(a=Ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kg(9,a)}}catch(P){pn(a,a.return,P)}if(a===o){Ae=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ae=x;break e}Ae=a.return}}if(vt=s,va(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(Tg,t)}catch{}r=!0}return r}finally{At=n,ps.transition=e}}return!1}function eb(t,e,n){e=au(n,e),e=oC(t,e,1),t=Ko(t,e,1),e=Ar(),t!==null&&(nf(t,1,e),qr(t,e))}function pn(t,e,n){if(t.tag===3)eb(t,t,n);else for(;e!==null;){if(e.tag===3){eb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Go===null||!Go.has(r))){t=au(n,t),t=aC(e,t,1),e=Ko(e,t,1),t=Ar(),e!==null&&(nf(e,1,t),qr(e,t));break}}e=e.return}}function OU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ar(),t.pingedLanes|=t.suspendedLanes&n,Zn===t&&(or&n)===n&&(Un===4||Un===3&&(or&130023424)===or&&500>gn()-Y0?ll(t,0):Q0|=n),qr(t,e)}function xC(t,e){e===0&&(t.mode&1?(e=Hf,Hf<<=1,!(Hf&130023424)&&(Hf=4194304)):e=1);var n=Ar();t=$i(t,e),t!==null&&(nf(t,e,n),qr(t,n))}function LU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xC(t,n)}function MU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),xC(t,n)}var RC;RC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zr.current)Fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fr=!1,TU(t,e,n);Fr=!!(t.flags&131072)}else Fr=!1,Kt&&e.flags&1048576&&D1(e,Ep,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mm(t,e),t=e.pendingProps;var s=ru(e,vr.current);Lc(e,n),s=z0(null,e,r,t,s,n);var i=W0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(r)?(i=!0,_p(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,F0(e),s.updater=Cg,e.stateNode=s,s._reactInternals=e,L_(e,r,t,n),e=F_(null,e,r,!0,i,n)):(e.tag=0,Kt&&i&&k0(e),Tr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mm(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=FU(r),t=Is(r,t),s){case 0:e=V_(null,e,r,t,n);break e;case 1:e=WS(null,e,r,t,n);break e;case 11:e=BS(null,e,r,t,n);break e;case 14:e=zS(null,e,r,Is(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),V_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),WS(t,e,r,s,n);case 3:e:{if(dC(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,F1(t,e),Sp(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=au(Error(le(423)),e),e=qS(t,e,r,n,s);break e}else if(r!==s){s=au(Error(le(424)),e),e=qS(t,e,r,n,s);break e}else for(Zr=Ho(e.stateNode.containerInfo.firstChild),ts=e,Kt=!0,xs=null,n=M1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(su(),r===s){e=Bi(t,e,n);break e}Tr(t,e,r,n)}e=e.child}return e;case 5:return U1(e),t===null&&D_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,x_(r,s)?o=null:i!==null&&x_(r,i)&&(e.flags|=32),uC(t,e),Tr(t,e,o,n),e.child;case 6:return t===null&&D_(e),null;case 13:return hC(t,e,n);case 4:return U0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=iu(e,null,r,n):Tr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),BS(t,e,r,s,n);case 7:return Tr(t,e,e.pendingProps,n),e.child;case 8:return Tr(t,e,e.pendingProps.children,n),e.child;case 12:return Tr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Mt(Ip,r._currentValue),r._currentValue=o,i!==null)if(Os(i.value,o)){if(i.children===s.children&&!zr.current){e=Bi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Mi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),N_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),N_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Lc(e,n),s=ys(s),r=r(s),e.flags|=1,Tr(t,e,r,n),e.child;case 14:return r=e.type,s=Is(r,e.pendingProps),s=Is(r.type,s),zS(t,e,r,s,n);case 15:return lC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),Mm(t,e),e.tag=1,Wr(r)?(t=!0,_p(e)):t=!1,Lc(e,n),iC(e,r,s),L_(e,r,s,n),F_(null,e,r,!0,t,n);case 19:return fC(t,e,n);case 22:return cC(t,e,n)}throw Error(le(156,e.tag))};function PC(t,e){return n1(t,e)}function VU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(t,e,n,r){return new VU(t,e,n,r)}function eE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FU(t){if(typeof t=="function")return eE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_0)return 11;if(t===w0)return 14}return 2}function Yo(t,e){var n=t.alternate;return n===null?(n=ms(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Um(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")eE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fc:return cl(n.children,s,i,e);case v0:o=8,s|=8;break;case i_:return t=ms(12,n,e,s|2),t.elementType=i_,t.lanes=i,t;case o_:return t=ms(13,n,e,s),t.elementType=o_,t.lanes=i,t;case a_:return t=ms(19,n,e,s),t.elementType=a_,t.lanes=i,t;case UP:return Ng(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VP:o=10;break e;case FP:o=9;break e;case _0:o=11;break e;case w0:o=14;break e;case _o:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=ms(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function cl(t,e,n,r){return t=ms(7,t,r,e),t.lanes=n,t}function Ng(t,e,n,r){return t=ms(22,t,r,e),t.elementType=UP,t.lanes=n,t.stateNode={isHidden:!1},t}function hv(t,e,n){return t=ms(6,t,null,e),t.lanes=n,t}function fv(t,e,n){return e=ms(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UU(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ky(0),this.expirationTimes=Ky(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ky(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tE(t,e,n,r,s,i,o,a,l){return t=new UU(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ms(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},F0(i),t}function jU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function CC(t){if(!t)return ia;t=t._reactInternals;e:{if(Ml(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Wr(n))return C1(t,n,e)}return e}function kC(t,e,n,r,s,i,o,a,l){return t=tE(n,r,!0,t,s,i,o,a,l),t.context=CC(null),n=t.current,r=Ar(),s=Qo(n),i=Mi(r,s),i.callback=e??null,Ko(n,i,s),t.current.lanes=s,nf(t,s,r),qr(t,r),t}function Og(t,e,n,r){var s=e.current,i=Ar(),o=Qo(s);return n=CC(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ko(s,e,o),t!==null&&(ks(t,s,o,i),Nm(t,s,o)),o}function Dp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nE(t,e){tb(t,e),(t=t.alternate)&&tb(t,e)}function $U(){return null}var DC=typeof reportError=="function"?reportError:function(t){console.error(t)};function rE(t){this._internalRoot=t}Lg.prototype.render=rE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Og(t,e,null,null)};Lg.prototype.unmount=rE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_l(function(){Og(null,t,null,null)}),e[ji]=null}};function Lg(t){this._internalRoot=t}Lg.prototype.unstable_scheduleHydration=function(t){if(t){var e=c1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Io.length&&e!==0&&e<Io[n].priority;n++);Io.splice(n,0,t),n===0&&d1(t)}};function sE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nb(){}function BU(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Dp(o);i.call(c)}}var o=kC(e,r,t,0,null,!1,!1,"",nb);return t._reactRootContainer=o,t[ji]=o.current,wh(t.nodeType===8?t.parentNode:t),_l(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Dp(l);a.call(c)}}var l=tE(t,0,!1,null,null,!1,!1,"",nb);return t._reactRootContainer=l,t[ji]=l.current,wh(t.nodeType===8?t.parentNode:t),_l(function(){Og(e,l,n,r)}),l}function Vg(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Dp(o);a.call(l)}}Og(e,o,t,s)}else o=BU(n,e,t,s,r);return Dp(o)}a1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dd(e.pendingLanes);n!==0&&(T0(e,n|1),qr(e,gn()),!(vt&6)&&(lu=gn()+500,va()))}break;case 13:_l(function(){var r=$i(t,1);if(r!==null){var s=Ar();ks(r,t,1,s)}}),nE(t,1)}};S0=function(t){if(t.tag===13){var e=$i(t,134217728);if(e!==null){var n=Ar();ks(e,t,134217728,n)}nE(t,134217728)}};l1=function(t){if(t.tag===13){var e=Qo(t),n=$i(t,e);if(n!==null){var r=Ar();ks(n,t,e,r)}nE(t,e)}};c1=function(){return At};u1=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};y_=function(t,e,n){switch(e){case"input":if(u_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xg(r);if(!s)throw Error(le(90));$P(r),u_(r,s)}}}break;case"textarea":zP(t,n);break;case"select":e=n.value,e!=null&&kc(t,!!n.multiple,e,!1)}};YP=J0;JP=_l;var zU={usingClientEntryPoint:!1,Events:[sf,yc,xg,GP,QP,J0]},Ed={findFiberByHostInstance:Ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WU={bundleType:Ed.bundleType,version:Ed.version,rendererPackageName:Ed.rendererPackageName,rendererConfig:Ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=e1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ed.findFiberByHostInstance||$U,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rm.isDisabled&&rm.supportsFiber)try{Tg=rm.inject(WU),ai=rm}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zU;as.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sE(e))throw Error(le(200));return jU(t,e,null,n)};as.createRoot=function(t,e){if(!sE(t))throw Error(le(299));var n=!1,r="",s=DC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tE(t,1,!1,null,null,n,!1,r,s),t[ji]=e.current,wh(t.nodeType===8?t.parentNode:t),new rE(e)};as.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=e1(e),t=t===null?null:t.stateNode,t};as.flushSync=function(t){return _l(t)};as.hydrate=function(t,e,n){if(!Mg(e))throw Error(le(200));return Vg(null,t,e,!0,n)};as.hydrateRoot=function(t,e,n){if(!sE(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=DC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kC(e,null,t,1,n??null,s,!1,i,o),t[ji]=e.current,wh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Lg(e)};as.render=function(t,e,n){if(!Mg(e))throw Error(le(200));return Vg(null,t,e,!1,n)};as.unmountComponentAtNode=function(t){if(!Mg(t))throw Error(le(40));return t._reactRootContainer?(_l(function(){Vg(null,null,t,!1,function(){t._reactRootContainer=null,t[ji]=null})}),!0):!1};as.unstable_batchedUpdates=J0;as.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mg(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Vg(t,e,n,!1,r)};as.version="18.3.1-next-f1338f8080-20240426";function NC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NC)}catch(t){console.error(t)}}NC(),NP.exports=as;var af=NP.exports;const OC=EP(af);var LC,rb=af;LC=rb.createRoot,rb.hydrateRoot;const qU="modulepreload",HU=function(t,e){return new URL(t,e).href},sb={},ne=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=HU(c,r),c in sb)return;sb[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const p=o[E];if(p.href===c&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":qU,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((E,p)=>{m.addEventListener("load",E),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},KU=1,GU=1e6;let mv=0;function QU(){return mv=(mv+1)%Number.MAX_SAFE_INTEGER,mv.toString()}const pv=new Map,ib=t=>{if(pv.has(t))return;const e=setTimeout(()=>{pv.delete(t),Jd({type:"REMOVE_TOAST",toastId:t})},GU);pv.set(t,e)},YU=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,KU)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?ib(n):t.toasts.forEach(r=>{ib(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},jm=[];let $m={toasts:[]};function Jd(t){$m=YU($m,t),jm.forEach(e=>{e($m)})}function JU({...t}){const e=QU(),n=s=>Jd({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Jd({type:"DISMISS_TOAST",toastId:e});return Jd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function iE(){const[t,e]=S.useState($m);return S.useEffect(()=>(jm.push(e),()=>{const n=jm.indexOf(e);n>-1&&jm.splice(n,1)}),[t]),{...t,toast:JU,dismiss:n=>Jd({type:"DISMISS_TOAST",toastId:n})}}function Lt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function ob(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function MC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=ob(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():ob(t[s],null)}}}}function lr(...t){return S.useCallback(MC(...t),t)}function XU(t,e){const n=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return v.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function ju(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:f,children:m,...E}=h,p=((w=f==null?void 0:f[t])==null?void 0:w[l])||a,y=S.useMemo(()=>E,Object.values(E));return v.jsx(p.Provider,{value:y,children:m})};c.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[l])||a,E=S.useContext(m);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,ZU(s,...e)]}function ZU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ph(t){const e=t4(t),n=S.forwardRef((r,s)=>{const{children:i,...o}=r,a=S.Children.toArray(i),l=a.find(r4);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return v.jsx(e,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return v.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var e4=Ph("Slot");function t4(t){const e=S.forwardRef((n,r)=>{const{children:s,...i}=n;if(S.isValidElement(s)){const o=i4(s),a=s4(i,s.props);return s.type!==S.Fragment&&(a.ref=r?MC(r,o):o),S.cloneElement(s,a)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var VC=Symbol("radix.slottable");function n4(t){const e=({children:n})=>v.jsx(v.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=VC,e}function r4(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===VC}function s4(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function i4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function o4(t){const e=t+"CollectionProvider",[n,r]=ju(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:w}=p,_=F.useRef(null),I=F.useRef(new Map).current;return v.jsx(s,{scope:y,itemMap:I,collectionRef:_,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=Ph(a),c=F.forwardRef((p,y)=>{const{scope:w,children:_}=p,I=i(a,w),x=lr(y,I.collectionRef);return v.jsx(l,{ref:x,children:_})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Ph(d),m=F.forwardRef((p,y)=>{const{scope:w,children:_,...I}=p,x=F.useRef(null),P=lr(y,x),L=i(d,w);return F.useEffect(()=>(L.itemMap.set(x,{ref:x,...I}),()=>void L.itemMap.delete(x))),v.jsx(f,{[h]:"",ref:P,children:_})});m.displayName=d;function E(p){const y=i(t+"CollectionConsumer",p);return F.useCallback(()=>{const _=y.collectionRef.current;if(!_)return[];const I=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((L,A)=>I.indexOf(L.ref.current)-I.indexOf(A.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},E,r]}var a4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jt=a4.reduce((t,e)=>{const n=Ph(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function FC(t,e){t&&af.flushSync(()=>t.dispatchEvent(e))}function pi(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function l4(t,e=globalThis==null?void 0:globalThis.document){const n=pi(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var c4="DismissableLayer",Y_="dismissableLayer.update",u4="dismissableLayer.pointerDownOutside",d4="dismissableLayer.focusOutside",ab,UC=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fg=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(UC),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=S.useState({}),E=lr(e,A=>h(A)),p=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(y),_=d?p.indexOf(d):-1,I=c.layersWithOutsidePointerEventsDisabled.size>0,x=_>=w,P=f4(A=>{const T=A.target,R=[...c.branches].some(C=>C.contains(T));!x||R||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},f),L=m4(A=>{const T=A.target;[...c.branches].some(C=>C.contains(T))||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},f);return l4(A=>{_===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ab=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),lb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ab)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),lb())},[d,c]),S.useEffect(()=>{const A=()=>m({});return document.addEventListener(Y_,A),()=>document.removeEventListener(Y_,A)},[]),v.jsx(Jt.div,{...l,ref:E,style:{pointerEvents:I?x?"auto":"none":void 0,...t.style},onFocusCapture:Lt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Lt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Lt(t.onPointerDownCapture,P.onPointerDownCapture)})});Fg.displayName=c4;var h4="DismissableLayerBranch",jC=S.forwardRef((t,e)=>{const n=S.useContext(UC),r=S.useRef(null),s=lr(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),v.jsx(Jt.div,{...t,ref:s})});jC.displayName=h4;function f4(t,e=globalThis==null?void 0:globalThis.document){const n=pi(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){$C(u4,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function m4(t,e=globalThis==null?void 0:globalThis.document){const n=pi(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&$C(d4,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lb(){const t=new CustomEvent(Y_);document.dispatchEvent(t)}function $C(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?FC(s,i):s.dispatchEvent(i)}var p4=Fg,g4=jC,zi=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},y4="Portal",oE=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);zi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?OC.createPortal(v.jsx(Jt.div,{...r,ref:e}),o):null});oE.displayName=y4;function v4(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var Vl=t=>{const{present:e,children:n}=t,r=_4(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=lr(r.ref,w4(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};Vl.displayName="Presence";function _4(t){const[e,n]=S.useState(),r=S.useRef(null),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=v4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=sm(r.current);i.current=a==="mounted"?c:"none"},[a]),zi(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=sm(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),zi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const p=sm(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&p&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(i.current=sm(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function sm(t){return(t==null?void 0:t.animationName)||"none"}function w4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var E4=m0[" useInsertionEffect ".trim().toString()]||zi;function aE({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=I4({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const f=T4(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function I4({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),s=S.useRef(n),i=S.useRef(e);return E4(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function T4(t){return typeof t=="function"}var S4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),b4="VisuallyHidden",Ug=S.forwardRef((t,e)=>v.jsx(Jt.span,{...t,ref:e,style:{...S4,...t.style}}));Ug.displayName=b4;var A4=Ug,lE="ToastProvider",[cE,x4,R4]=o4("Toast"),[BC]=ju("Toast",[R4]),[P4,jg]=BC(lE),zC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=S.useState(null),[c,d]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${lE}\`. Expected non-empty \`string\`.`),v.jsx(cE.Provider,{scope:e,children:v.jsx(P4,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>d(m=>m+1),[]),onToastRemove:S.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};zC.displayName=lE;var WC="ToastViewport",C4=["F8"],J_="toast.viewportPause",X_="toast.viewportResume",qC=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=C4,label:s="Notifications ({hotkey})",...i}=t,o=jg(WC,n),a=x4(n),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=lr(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;S.useEffect(()=>{const y=w=>{var I;r.length!==0&&r.every(x=>w[x]||w.code===x)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),S.useEffect(()=>{const y=l.current,w=h.current;if(E&&y&&w){const _=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(J_);w.dispatchEvent(L),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(X_);w.dispatchEvent(L),o.isClosePausedRef.current=!1}},x=L=>{!y.contains(L.relatedTarget)&&I()},P=()=>{y.contains(document.activeElement)||I()};return y.addEventListener("focusin",_),y.addEventListener("focusout",x),y.addEventListener("pointermove",_),y.addEventListener("pointerleave",P),window.addEventListener("blur",_),window.addEventListener("focus",I),()=>{y.removeEventListener("focusin",_),y.removeEventListener("focusout",x),y.removeEventListener("pointermove",_),y.removeEventListener("pointerleave",P),window.removeEventListener("blur",_),window.removeEventListener("focus",I)}}},[E,o.isClosePausedRef]);const p=S.useCallback(({tabbingDirection:y})=>{const _=a().map(I=>{const x=I.ref.current,P=[x,...z4(x)];return y==="forwards"?P:P.reverse()});return(y==="forwards"?_.reverse():_).flat()},[a]);return S.useEffect(()=>{const y=h.current;if(y){const w=_=>{var P,L,A;const I=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!I){const T=document.activeElement,R=_.shiftKey;if(_.target===y&&R){(P=c.current)==null||P.focus();return}const O=p({tabbingDirection:R?"backwards":"forwards"}),k=O.findIndex(B=>B===T);gv(O.slice(k+1))?_.preventDefault():R?(L=c.current)==null||L.focus():(A=d.current)==null||A.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[a,p]),v.jsxs(g4,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&v.jsx(Z_,{ref:c,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});gv(y)}}),v.jsx(cE.Slot,{scope:n,children:v.jsx(Jt.ol,{tabIndex:-1,...i,ref:f})}),E&&v.jsx(Z_,{ref:d,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});gv(y)}})]})});qC.displayName=WC;var HC="ToastFocusProxy",Z_=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=jg(HC,n);return v.jsx(Ug,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Z_.displayName=HC;var lf="Toast",k4="toast.swipeStart",D4="toast.swipeMove",N4="toast.swipeCancel",O4="toast.swipeEnd",KC=S.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=aE({prop:r,defaultProp:s??!0,onChange:i,caller:lf});return v.jsx(Vl,{present:n||a,children:v.jsx(V4,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:pi(t.onPause),onResume:pi(t.onResume),onSwipeStart:Lt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Lt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Lt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Lt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});KC.displayName=lf;var[L4,M4]=BC(lf,{onClose(){}}),V4=S.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...E}=t,p=jg(lf,n),[y,w]=S.useState(null),_=lr(e,B=>w(B)),I=S.useRef(null),x=S.useRef(null),P=s||p.duration,L=S.useRef(0),A=S.useRef(P),T=S.useRef(0),{onToastAdd:R,onToastRemove:C}=p,N=pi(()=>{var ce;(y==null?void 0:y.contains(document.activeElement))&&((ce=p.viewport)==null||ce.focus()),o()}),O=S.useCallback(B=>{!B||B===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(N,B))},[N]);S.useEffect(()=>{const B=p.viewport;if(B){const ce=()=>{O(A.current),c==null||c()},he=()=>{const Se=new Date().getTime()-L.current;A.current=A.current-Se,window.clearTimeout(T.current),l==null||l()};return B.addEventListener(J_,he),B.addEventListener(X_,ce),()=>{B.removeEventListener(J_,he),B.removeEventListener(X_,ce)}}},[p.viewport,P,l,c,O]),S.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(P)},[i,P,p.isClosePausedRef,O]),S.useEffect(()=>(R(),()=>C()),[R,C]);const k=S.useMemo(()=>y?ek(y):null,[y]);return p.viewport?v.jsxs(v.Fragment,{children:[k&&v.jsx(F4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:k}),v.jsx(L4,{scope:n,onClose:N,children:af.createPortal(v.jsx(cE.ItemSlot,{scope:n,children:v.jsx(p4,{asChild:!0,onEscapeKeyDown:Lt(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||N(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:v.jsx(Jt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...E,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Lt(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Lt(t.onPointerDown,B=>{B.button===0&&(I.current={x:B.clientX,y:B.clientY})}),onPointerMove:Lt(t.onPointerMove,B=>{if(!I.current)return;const ce=B.clientX-I.current.x,he=B.clientY-I.current.y,Se=!!x.current,$=["left","right"].includes(p.swipeDirection),q=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,X=$?q(0,ce):0,we=$?0:q(0,he),Ee=B.pointerType==="touch"?10:2,re={x:X,y:we},ve={originalEvent:B,delta:re};Se?(x.current=re,im(D4,h,ve,{discrete:!1})):cb(re,p.swipeDirection,Ee)?(x.current=re,im(k4,d,ve,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(ce)>Ee||Math.abs(he)>Ee)&&(I.current=null)}),onPointerUp:Lt(t.onPointerUp,B=>{const ce=x.current,he=B.target;if(he.hasPointerCapture(B.pointerId)&&he.releasePointerCapture(B.pointerId),x.current=null,I.current=null,ce){const Se=B.currentTarget,$={originalEvent:B,delta:ce};cb(ce,p.swipeDirection,p.swipeThreshold)?im(O4,m,$,{discrete:!0}):im(N4,f,$,{discrete:!0}),Se.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),F4=t=>{const{__scopeToast:e,children:n,...r}=t,s=jg(lf,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return $4(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:v.jsx(oE,{asChild:!0,children:v.jsx(Ug,{...r,children:i&&v.jsxs(v.Fragment,{children:[s.label," ",n]})})})},U4="ToastTitle",GC=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return v.jsx(Jt.div,{...r,ref:e})});GC.displayName=U4;var j4="ToastDescription",QC=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return v.jsx(Jt.div,{...r,ref:e})});QC.displayName=j4;var YC="ToastAction",JC=S.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?v.jsx(ZC,{altText:n,asChild:!0,children:v.jsx(uE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${YC}\`. Expected non-empty \`string\`.`),null)});JC.displayName=YC;var XC="ToastClose",uE=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=M4(XC,n);return v.jsx(ZC,{asChild:!0,children:v.jsx(Jt.button,{type:"button",...r,ref:e,onClick:Lt(t.onClick,s.onClose)})})});uE.displayName=XC;var ZC=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return v.jsx(Jt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function ek(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),B4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...ek(r))}}),e}function im(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?FC(s,i):s.dispatchEvent(i)}var cb=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function $4(t=()=>{}){const e=pi(t);zi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function B4(t){return t.nodeType===t.ELEMENT_NODE}function z4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function gv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var W4=zC,tk=qC,nk=KC,rk=GC,sk=QC,ik=JC,ok=uE;function ak(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ak(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function lk(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ak(t))&&(r&&(r+=" "),r+=e);return r}const ub=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,db=lk,dE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return db(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=ub(d)||ub(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(E=>{let[p,y]=E;return Array.isArray(y)?y.includes({...i,...a}[p]):{...i,...a}[p]===y})?[...c,h,f]:c},[]);return db(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),H4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),hb=t=>{const e=H4(t);return e.charAt(0).toUpperCase()+e.slice(1)},ck=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),K4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...G4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ck("lucide",s),...!i&&!K4(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(t,e)=>{const n=S.forwardRef(({className:r,...s},i)=>S.createElement(Q4,{ref:i,iconNode:e,className:ck(`lucide-${q4(hb(t))}`,`lucide-${t}`,r),...s}));return n.displayName=hb(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],J4=Ct("arrow-down",Y4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uk=Ct("arrow-right",X4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ej=Ct("arrow-up-down",Z4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],nj=Ct("badge-percent",tj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sj=Ct("check",rj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oj=Ct("clock",ij);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lj=Ct("credit-card",aj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dk=Ct("eye-off",cj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hk=Ct("eye",uj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hj=Ct("file-text",dj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],mj=Ct("house",fj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fk=Ct("lock",pj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fb=Ct("log-out",gj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ew=Ct("mail",yj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],_j=Ct("message-circle",vj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ej=Ct("minus",wj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mb=Ct("plus",Ij);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],pb=Ct("receipt",Tj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],hE=Ct("refresh-ccw",Sj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gb=Ct("settings",bj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mk=Ct("shield",Aj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Rj=Ct("square",xj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Cj=Ct("store",Pj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yb=Ct("trending-up",kj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pk=Ct("triangle-alert",Dj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Oj=Ct("user",Nj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Mj=Ct("wrench",Lj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fE=Ct("x",Vj),mE="-",Fj=t=>{const e=jj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(mE);return a[0]===""&&a.length!==1&&a.shift(),gk(a,e)||Uj(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},gk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?gk(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(mE);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},vb=/^\[(.+)\]$/,Uj=t=>{if(vb.test(t)){const e=vb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},jj=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Bj(Object.entries(t.classGroups),n).forEach(([i,o])=>{tw(o,r,i,e)}),r},tw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:_b(e,s);i.classGroupId=n;return}if(typeof s=="function"){if($j(s)){tw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{tw(o,_b(e,i),n,r)})})},_b=(t,e)=>{let n=t;return e.split(mE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$j=t=>t.isThemeGetter,Bj=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,zj=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},yk="!",Wj=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let y=0;y<a.length;y++){let w=a[y];if(c===0){if(w===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(d,y)),d=y+i;continue}if(w==="/"){h=y;continue}}w==="["?c++:w==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(yk),E=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:E,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:o}):o},qj=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Hj=t=>({cache:zj(t.cacheSize),parseClassName:Wj(t),...Fj(t)}),Kj=/\s+/,Gj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(Kj);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let E=!!m,p=r(E?f.substring(0,m):f);if(!p){if(!E){a=c+(a.length>0?" "+a:a);continue}if(p=r(f),!p){a=c+(a.length>0?" "+a:a);continue}E=!1}const y=qj(d).join(":"),w=h?y+yk:y,_=w+p;if(i.includes(_))continue;i.push(_);const I=s(p,E);for(let x=0;x<I.length;++x){const P=I[x];i.push(w+P)}a=c+(a.length>0?" "+a:a)}return a};function Qj(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=vk(e))&&(r&&(r+=" "),r+=n);return r}const vk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=vk(t[r]))&&(n&&(n+=" "),n+=e);return n};function Yj(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=Hj(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=Gj(l,n);return s(l,d),d}return function(){return i(Qj.apply(null,arguments))}}const Ft=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},_k=/^\[(?:([a-z-]+):)?(.+)\]$/i,Jj=/^\d+\/\d+$/,Xj=new Set(["px","full","screen"]),Zj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,n$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,r$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ti=t=>Vc(t)||Xj.has(t)||Jj.test(t),uo=t=>$u(t,"length",d$),Vc=t=>!!t&&!Number.isNaN(Number(t)),yv=t=>$u(t,"number",Vc),Id=t=>!!t&&Number.isInteger(Number(t)),s$=t=>t.endsWith("%")&&Vc(t.slice(0,-1)),Xe=t=>_k.test(t),ho=t=>Zj.test(t),i$=new Set(["length","size","percentage"]),o$=t=>$u(t,i$,wk),a$=t=>$u(t,"position",wk),l$=new Set(["image","url"]),c$=t=>$u(t,l$,f$),u$=t=>$u(t,"",h$),Td=()=>!0,$u=(t,e,n)=>{const r=_k.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},d$=t=>e$.test(t)&&!t$.test(t),wk=()=>!1,h$=t=>n$.test(t),f$=t=>r$.test(t),m$=()=>{const t=Ft("colors"),e=Ft("spacing"),n=Ft("blur"),r=Ft("brightness"),s=Ft("borderColor"),i=Ft("borderRadius"),o=Ft("borderSpacing"),a=Ft("borderWidth"),l=Ft("contrast"),c=Ft("grayscale"),d=Ft("hueRotate"),h=Ft("invert"),f=Ft("gap"),m=Ft("gradientColorStops"),E=Ft("gradientColorStopPositions"),p=Ft("inset"),y=Ft("margin"),w=Ft("opacity"),_=Ft("padding"),I=Ft("saturate"),x=Ft("scale"),P=Ft("sepia"),L=Ft("skew"),A=Ft("space"),T=Ft("translate"),R=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Xe,e],O=()=>[Xe,e],k=()=>["",Ti,uo],B=()=>["auto",Vc,Xe],ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],he=()=>["solid","dashed","dotted","double","none"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",Xe],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[Vc,Xe];return{cacheSize:500,separator:":",theme:{colors:[Td],spacing:[Ti,uo],blur:["none","",ho,Xe],brightness:we(),borderColor:[t],borderRadius:["none","","full",ho,Xe],borderSpacing:O(),borderWidth:k(),contrast:we(),grayscale:q(),hueRotate:we(),invert:q(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[s$,uo],inset:N(),margin:N(),opacity:we(),padding:O(),saturate:we(),scale:we(),sepia:q(),skew:we(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[ho]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ce(),Xe]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Id,Xe]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",Id,Xe]}],"grid-cols":[{"grid-cols":[Td]}],"col-start-end":[{col:["auto",{span:["full",Id,Xe]},Xe]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Td]}],"row-start-end":[{row:["auto",{span:[Id,Xe]},Xe]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,e]}],"min-w":[{"min-w":[Xe,e,"min","max","fit"]}],"max-w":[{"max-w":[Xe,e,"none","full","min","max","fit","prose",{screen:[ho]},ho]}],h:[{h:[Xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ho,uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yv]}],"font-family":[{font:[Td]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",Vc,yv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ti,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ti,uo]}],"underline-offset":[{"underline-offset":["auto",Ti,Xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ce(),a$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",o$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...he(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:he()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...he()]}],"outline-offset":[{"outline-offset":[Ti,Xe]}],"outline-w":[{outline:[Ti,uo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ti,uo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ho,u$]}],"shadow-color":[{shadow:[Td]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ho,Xe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Id,Xe]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ti,uo,yv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},p$=Yj(m$);function Yt(...t){return p$(lk(t))}const g$=W4,Ek=S.forwardRef(({className:t,...e},n)=>v.jsx(tk,{ref:n,className:Yt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Ek.displayName=tk.displayName;const y$=dE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ik=S.forwardRef(({className:t,variant:e,...n},r)=>v.jsx(nk,{ref:r,className:Yt(y$({variant:e}),t),...n}));Ik.displayName=nk.displayName;const v$=S.forwardRef(({className:t,...e},n)=>v.jsx(ik,{ref:n,className:Yt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));v$.displayName=ik.displayName;const Tk=S.forwardRef(({className:t,...e},n)=>v.jsx(ok,{ref:n,className:Yt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:v.jsx(fE,{className:"h-4 w-4"})}));Tk.displayName=ok.displayName;const Sk=S.forwardRef(({className:t,...e},n)=>v.jsx(rk,{ref:n,className:Yt("text-sm font-semibold",t),...e}));Sk.displayName=rk.displayName;const bk=S.forwardRef(({className:t,...e},n)=>v.jsx(sk,{ref:n,className:Yt("text-sm opacity-90",t),...e}));bk.displayName=sk.displayName;function _$(){const{toasts:t}=iE();return v.jsxs(g$,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return v.jsxs(Ik,{...i,children:[v.jsxs("div",{className:"grid gap-1",children:[n&&v.jsx(Sk,{children:n}),r&&v.jsx(bk,{children:r})]}),s,v.jsx(Tk,{})]},e)}),v.jsx(Ek,{})]})}var Np=["light","dark"],pE="(prefers-color-scheme: dark)",w$=typeof window>"u",gE=S.createContext(void 0),E$={setTheme:t=>{},themes:[]},Ak=()=>{var t;return(t=S.useContext(gE))!=null?t:E$},I$=t=>S.useContext(gE)?t.children:S.createElement(S$,{...t}),T$=["light","dark"],S$=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=T$,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=S.useState(()=>wb(s,o)),[m,E]=S.useState(()=>wb(s)),p=l?Object.values(l):i,y=S.useCallback(x=>{let P=x;if(!P)return;x==="system"&&n&&(P=Eb());let L=l?l[P]:P,A=e?A$():null,T=document.documentElement;if(a==="class"?(T.classList.remove(...p),L&&T.classList.add(L)):L?T.setAttribute(a,L):T.removeAttribute(a),r){let R=Np.includes(o)?o:null,C=Np.includes(P)?P:R;T.style.colorScheme=C}A==null||A()},[]),w=S.useCallback(x=>{let P=typeof x=="function"?x(x):x;f(P);try{localStorage.setItem(s,P)}catch{}},[t]),_=S.useCallback(x=>{let P=Eb(x);E(P),h==="system"&&n&&!t&&y("system")},[h,t]);S.useEffect(()=>{let x=window.matchMedia(pE);return x.addListener(_),_(x),()=>x.removeListener(_)},[_]),S.useEffect(()=>{let x=P=>{if(P.key!==s)return;let L=P.newValue||o;w(L)};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[w]),S.useEffect(()=>{y(t??h)},[t,h]);let I=S.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,w,t,m,n,i]);return S.createElement(gE.Provider,{value:I},S.createElement(b$,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:p,nonce:d}),c)},b$=S.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Np.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(E,p=!1,y=!0)=>{let w=o?o[E]:E,_=p?E+"|| ''":`'${w}'`,I="";return s&&y&&!p&&Np.includes(E)&&(I+=`d.style.colorScheme = '${E}';`),n==="class"?p||w?I+=`c.add(${_})`:I+="null":w&&(I+=`d[s](n,${_})`),I},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${pE}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),wb=(t,e)=>{if(w$)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},A$=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},Eb=t=>(t||(t=window.matchMedia(pE)),t.matches?"dark":"light"),x$=t=>{switch(t){case"success":return C$;case"info":return D$;case"warning":return k$;case"error":return N$;default:return null}},R$=Array(12).fill(0),P$=({visible:t,className:e})=>F.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},F.createElement("div",{className:"sonner-spinner"},R$.map((n,r)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),C$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),k$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),D$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),N$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),O$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),L$=()=>{let[t,e]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},nw=1,M$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:nw++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],F.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(F$(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||nw++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Nr=new M$,V$=(t,e)=>{let n=(e==null?void 0:e.id)||nw++;return Nr.addToast({title:t,...e,id:n}),n},F$=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",U$=V$,j$=()=>Nr.toasts,$$=()=>Nr.getActiveToasts(),Et=Object.assign(U$,{success:Nr.success,info:Nr.info,warning:Nr.warning,error:Nr.error,custom:Nr.custom,message:Nr.message,promise:Nr.promise,dismiss:Nr.dismiss,loading:Nr.loading},{getHistory:j$,getToasts:$$});function B$(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}B$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function om(t){return t.label!==void 0}var z$=3,W$="32px",q$="16px",Ib=4e3,H$=356,K$=14,G$=20,Q$=200;function Es(...t){return t.filter(Boolean).join(" ")}function Y$(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var J$=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:E,interacting:p,setHeights:y,visibleToasts:w,heights:_,index:I,toasts:x,expanded:P,removeToast:L,defaultRichColors:A,closeButton:T,style:R,cancelButtonStyle:C,actionButtonStyle:N,className:O="",descriptionClassName:k="",duration:B,position:ce,gap:he,loadingIcon:Se,expandByDefault:$,classNames:q,icons:X,closeButtonAriaLabel:we="Close toast",pauseWhenPageIsHidden:Ee}=t,[re,ve]=F.useState(null),[j,Ge]=F.useState(null),[Fe,Pn]=F.useState(!1),[zn,En]=F.useState(!1),[In,Cn]=F.useState(!1),[kt,ft]=F.useState(!1),[at,cr]=F.useState(!1),[_r,Wn]=F.useState(0),[mt,Zt]=F.useState(0),wr=F.useRef(m.duration||B||Ib),no=F.useRef(null),Pr=F.useRef(null),Pa=I===0,_s=I+1<=w,kn=m.type,cs=m.dismissible!==!1,Ca=m.className||"",ro=m.descriptionClassName||"",en=F.useMemo(()=>_.findIndex(Q=>Q.toastId===m.id)||0,[_,m.id]),ka=F.useMemo(()=>{var Q;return(Q=m.closeButton)!=null?Q:T},[m.closeButton,T]),so=F.useMemo(()=>m.duration||B||Ib,[m.duration,B]),Cr=F.useRef(0),us=F.useRef(0),Ii=F.useRef(0),tr=F.useRef(null),[K,z]=ce.split("-"),H=F.useMemo(()=>_.reduce((Q,oe,se)=>se>=en?Q:Q+oe.height,0),[_,en]),ie=L$(),Z=m.invert||f,te=kn==="loading";us.current=F.useMemo(()=>en*he+H,[en,H]),F.useEffect(()=>{wr.current=so},[so]),F.useEffect(()=>{Pn(!0)},[]),F.useEffect(()=>{let Q=Pr.current;if(Q){let oe=Q.getBoundingClientRect().height;return Zt(oe),y(se=>[{toastId:m.id,height:oe,position:m.position},...se]),()=>y(se=>se.filter(ae=>ae.toastId!==m.id))}},[y,m.id]),F.useLayoutEffect(()=>{if(!Fe)return;let Q=Pr.current,oe=Q.style.height;Q.style.height="auto";let se=Q.getBoundingClientRect().height;Q.style.height=oe,Zt(se),y(ae=>ae.find(ue=>ue.toastId===m.id)?ae.map(ue=>ue.toastId===m.id?{...ue,height:se}:ue):[{toastId:m.id,height:se,position:m.position},...ae])},[Fe,m.title,m.description,y,m.id]);let de=F.useCallback(()=>{En(!0),Wn(us.current),y(Q=>Q.filter(oe=>oe.toastId!==m.id)),setTimeout(()=>{L(m)},Q$)},[m,L,y,us]);F.useEffect(()=>{if(m.promise&&kn==="loading"||m.duration===1/0||m.type==="loading")return;let Q;return P||p||Ee&&ie?(()=>{if(Ii.current<Cr.current){let oe=new Date().getTime()-Cr.current;wr.current=wr.current-oe}Ii.current=new Date().getTime()})():wr.current!==1/0&&(Cr.current=new Date().getTime(),Q=setTimeout(()=>{var oe;(oe=m.onAutoClose)==null||oe.call(m,m),de()},wr.current)),()=>clearTimeout(Q)},[P,p,m,kn,Ee,ie,de]),F.useEffect(()=>{m.delete&&de()},[de,m.delete]);function ye(){var Q,oe,se;return X!=null&&X.loading?F.createElement("div",{className:Es(q==null?void 0:q.loader,(Q=m==null?void 0:m.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":kn==="loading"},X.loading):Se?F.createElement("div",{className:Es(q==null?void 0:q.loader,(oe=m==null?void 0:m.classNames)==null?void 0:oe.loader,"sonner-loader"),"data-visible":kn==="loading"},Se):F.createElement(P$,{className:Es(q==null?void 0:q.loader,(se=m==null?void 0:m.classNames)==null?void 0:se.loader),visible:kn==="loading"})}return F.createElement("li",{tabIndex:0,ref:Pr,className:Es(O,Ca,q==null?void 0:q.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[kn],(n=m==null?void 0:m.classNames)==null?void 0:n[kn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:A,"data-styled":!(m.jsx||m.unstyled||E),"data-mounted":Fe,"data-promise":!!m.promise,"data-swiped":at,"data-removed":zn,"data-visible":_s,"data-y-position":K,"data-x-position":z,"data-index":I,"data-front":Pa,"data-swiping":In,"data-dismissible":cs,"data-type":kn,"data-invert":Z,"data-swipe-out":kt,"data-swipe-direction":j,"data-expanded":!!(P||$&&Fe),style:{"--index":I,"--toasts-before":I,"--z-index":x.length-I,"--offset":`${zn?_r:us.current}px`,"--initial-height":$?"auto":`${mt}px`,...R,...m.style},onDragEnd:()=>{Cn(!1),ve(null),tr.current=null},onPointerDown:Q=>{te||!cs||(no.current=new Date,Wn(us.current),Q.target.setPointerCapture(Q.pointerId),Q.target.tagName!=="BUTTON"&&(Cn(!0),tr.current={x:Q.clientX,y:Q.clientY}))},onPointerUp:()=>{var Q,oe,se,ae;if(kt||!cs)return;tr.current=null;let ue=Number(((Q=Pr.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),_e=Number(((oe=Pr.current)==null?void 0:oe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),me=new Date().getTime()-((se=no.current)==null?void 0:se.getTime()),Me=re==="x"?ue:_e,ze=Math.abs(Me)/me;if(Math.abs(Me)>=G$||ze>.11){Wn(us.current),(ae=m.onDismiss)==null||ae.call(m,m),Ge(re==="x"?ue>0?"right":"left":_e>0?"down":"up"),de(),ft(!0),cr(!1);return}Cn(!1),ve(null)},onPointerMove:Q=>{var oe,se,ae,ue;if(!tr.current||!cs||((oe=window.getSelection())==null?void 0:oe.toString().length)>0)return;let _e=Q.clientY-tr.current.y,me=Q.clientX-tr.current.x,Me=(se=t.swipeDirections)!=null?se:Y$(ce);!re&&(Math.abs(me)>1||Math.abs(_e)>1)&&ve(Math.abs(me)>Math.abs(_e)?"x":"y");let ze={x:0,y:0};re==="y"?(Me.includes("top")||Me.includes("bottom"))&&(Me.includes("top")&&_e<0||Me.includes("bottom")&&_e>0)&&(ze.y=_e):re==="x"&&(Me.includes("left")||Me.includes("right"))&&(Me.includes("left")&&me<0||Me.includes("right")&&me>0)&&(ze.x=me),(Math.abs(ze.x)>0||Math.abs(ze.y)>0)&&cr(!0),(ae=Pr.current)==null||ae.style.setProperty("--swipe-amount-x",`${ze.x}px`),(ue=Pr.current)==null||ue.style.setProperty("--swipe-amount-y",`${ze.y}px`)}},ka&&!m.jsx?F.createElement("button",{"aria-label":we,"data-disabled":te,"data-close-button":!0,onClick:te||!cs?()=>{}:()=>{var Q;de(),(Q=m.onDismiss)==null||Q.call(m,m)},className:Es(q==null?void 0:q.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=X==null?void 0:X.close)!=null?i:O$):null,m.jsx||S.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:F.createElement(F.Fragment,null,kn||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:Es(q==null?void 0:q.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ye():null,m.type!=="loading"?m.icon||(X==null?void 0:X[kn])||x$(kn):null):null,F.createElement("div",{"data-content":"",className:Es(q==null?void 0:q.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},F.createElement("div",{"data-title":"",className:Es(q==null?void 0:q.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?F.createElement("div",{"data-description":"",className:Es(k,ro,q==null?void 0:q.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),S.isValidElement(m.cancel)?m.cancel:m.cancel&&om(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||C,onClick:Q=>{var oe,se;om(m.cancel)&&cs&&((se=(oe=m.cancel).onClick)==null||se.call(oe,Q),de())},className:Es(q==null?void 0:q.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,S.isValidElement(m.action)?m.action:m.action&&om(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||N,onClick:Q=>{var oe,se;om(m.action)&&((se=(oe=m.action).onClick)==null||se.call(oe,Q),!Q.defaultPrevented&&de())},className:Es(q==null?void 0:q.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function Tb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function X$(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?q$:W$;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var Z$=S.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:E=z$,toastOptions:p,dir:y=Tb(),gap:w=K$,loadingIcon:_,icons:I,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:P}=t,[L,A]=F.useState([]),T=F.useMemo(()=>Array.from(new Set([r].concat(L.filter(Ee=>Ee.position).map(Ee=>Ee.position)))),[L,r]),[R,C]=F.useState([]),[N,O]=F.useState(!1),[k,B]=F.useState(!1),[ce,he]=F.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Se=F.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=F.useRef(null),X=F.useRef(!1),we=F.useCallback(Ee=>{A(re=>{var ve;return(ve=re.find(j=>j.id===Ee.id))!=null&&ve.delete||Nr.dismiss(Ee.id),re.filter(({id:j})=>j!==Ee.id)})},[]);return F.useEffect(()=>Nr.subscribe(Ee=>{if(Ee.dismiss){A(re=>re.map(ve=>ve.id===Ee.id?{...ve,delete:!0}:ve));return}setTimeout(()=>{OC.flushSync(()=>{A(re=>{let ve=re.findIndex(j=>j.id===Ee.id);return ve!==-1?[...re.slice(0,ve),{...re[ve],...Ee},...re.slice(ve+1)]:[Ee,...re]})})})}),[]),F.useEffect(()=>{if(d!=="system"){he(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?he("dark"):he("light")),typeof window>"u")return;let Ee=window.matchMedia("(prefers-color-scheme: dark)");try{Ee.addEventListener("change",({matches:re})=>{he(re?"dark":"light")})}catch{Ee.addListener(({matches:ve})=>{try{he(ve?"dark":"light")}catch(j){console.error(j)}})}},[d]),F.useEffect(()=>{L.length<=1&&O(!1)},[L]),F.useEffect(()=>{let Ee=re=>{var ve,j;s.every(Ge=>re[Ge]||re.code===Ge)&&(O(!0),(ve=Se.current)==null||ve.focus()),re.code==="Escape"&&(document.activeElement===Se.current||(j=Se.current)!=null&&j.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",Ee),()=>document.removeEventListener("keydown",Ee)},[s]),F.useEffect(()=>{if(Se.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,X.current=!1)}},[Se.current]),F.createElement("section",{ref:e,"aria-label":`${x} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((Ee,re)=>{var ve;let[j,Ge]=Ee.split("-");return L.length?F.createElement("ol",{key:Ee,dir:y==="auto"?Tb():y,tabIndex:-1,ref:Se,className:a,"data-sonner-toaster":!0,"data-theme":ce,"data-y-position":j,"data-lifted":N&&L.length>1&&!i,"data-x-position":Ge,style:{"--front-toast-height":`${((ve=R[0])==null?void 0:ve.height)||0}px`,"--width":`${H$}px`,"--gap":`${w}px`,...m,...X$(l,c)},onBlur:Fe=>{X.current&&!Fe.currentTarget.contains(Fe.relatedTarget)&&(X.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:Fe=>{Fe.target instanceof HTMLElement&&Fe.target.dataset.dismissible==="false"||X.current||(X.current=!0,q.current=Fe.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{k||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Fe=>{Fe.target instanceof HTMLElement&&Fe.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},L.filter(Fe=>!Fe.position&&re===0||Fe.position===Ee).map((Fe,Pn)=>{var zn,En;return F.createElement(J$,{key:Fe.id,icons:I,index:Pn,toast:Fe,defaultRichColors:h,duration:(zn=p==null?void 0:p.duration)!=null?zn:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:E,closeButton:(En=p==null?void 0:p.closeButton)!=null?En:o,interacting:k,position:Ee,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:we,toasts:L.filter(In=>In.position==Fe.position),heights:R.filter(In=>In.position==Fe.position),setHeights:C,expandByDefault:i,gap:w,loadingIcon:_,expanded:N,pauseWhenPageIsHidden:P,swipeDirections:t.swipeDirections})})):null}))});const e3=({...t})=>{const{theme:e="system"}=Ak();return v.jsx(Z$,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var t3=m0[" useId ".trim().toString()]||(()=>{}),n3=0;function vv(t){const[e,n]=S.useState(t3());return zi(()=>{n(r=>r??String(n3++))},[t]),t||(e?`radix-${e}`:"")}const r3=["top","right","bottom","left"],oa=Math.min,Jr=Math.max,Op=Math.round,am=Math.floor,ci=t=>({x:t,y:t}),s3={left:"right",right:"left",bottom:"top",top:"bottom"},i3={start:"end",end:"start"};function rw(t,e,n){return Jr(t,oa(e,n))}function Wi(t,e){return typeof t=="function"?t(e):t}function qi(t){return t.split("-")[0]}function Bu(t){return t.split("-")[1]}function yE(t){return t==="x"?"y":"x"}function vE(t){return t==="y"?"height":"width"}const o3=new Set(["top","bottom"]);function ni(t){return o3.has(qi(t))?"y":"x"}function _E(t){return yE(ni(t))}function a3(t,e,n){n===void 0&&(n=!1);const r=Bu(t),s=_E(t),i=vE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Lp(o)),[o,Lp(o)]}function l3(t){const e=Lp(t);return[sw(t),e,sw(e)]}function sw(t){return t.replace(/start|end/g,e=>i3[e])}const Sb=["left","right"],bb=["right","left"],c3=["top","bottom"],u3=["bottom","top"];function d3(t,e,n){switch(t){case"top":case"bottom":return n?e?bb:Sb:e?Sb:bb;case"left":case"right":return e?c3:u3;default:return[]}}function h3(t,e,n,r){const s=Bu(t);let i=d3(qi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(sw)))),i}function Lp(t){return t.replace(/left|right|bottom|top/g,e=>s3[e])}function f3(t){return{top:0,right:0,bottom:0,left:0,...t}}function xk(t){return typeof t!="number"?f3(t):{top:t,right:t,bottom:t,left:t}}function Mp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Ab(t,e,n){let{reference:r,floating:s}=t;const i=ni(e),o=_E(e),a=vE(o),l=qi(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Bu(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const m3=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Ab(c,r,l),f=r,m={},E=0;for(let p=0;p<a.length;p++){const{name:y,fn:w}=a[p],{x:_,y:I,data:x,reset:P}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=_??d,h=I??h,m={...m,[y]:{...m[y],...x}},P&&E<=50&&(E++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:d,y:h}=Ab(c,f,l)),p=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Ch(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Wi(e,t),E=xk(m),y=a[f?h==="floating"?"reference":"floating":h],w=Mp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},P=Mp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:I,strategy:l}):_);return{top:(w.top-P.top+E.top)/x.y,bottom:(P.bottom-w.bottom+E.bottom)/x.y,left:(w.left-P.left+E.left)/x.x,right:(P.right-w.right+E.right)/x.x}}const p3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Wi(t,e)||{};if(c==null)return{};const h=xk(d),f={x:n,y:r},m=_E(s),E=vE(m),p=await o.getDimensions(c),y=m==="y",w=y?"top":"left",_=y?"bottom":"right",I=y?"clientHeight":"clientWidth",x=i.reference[E]+i.reference[m]-f[m]-i.floating[E],P=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=L?L[I]:0;(!A||!await(o.isElement==null?void 0:o.isElement(L)))&&(A=a.floating[I]||i.floating[E]);const T=x/2-P/2,R=A/2-p[E]/2-1,C=oa(h[w],R),N=oa(h[_],R),O=C,k=A-p[E]-N,B=A/2-p[E]/2+T,ce=rw(O,B,k),he=!l.arrow&&Bu(s)!=null&&B!==ce&&i.reference[E]/2-(B<O?C:N)-p[E]/2<0,Se=he?B<O?B-O:B-k:0;return{[m]:f[m]+Se,data:{[m]:ce,centerOffset:B-ce-Se,...he&&{alignmentOffset:Se}},reset:he}}}),g3=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:p=!0,...y}=Wi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=qi(s),_=ni(a),I=qi(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=f||(I||!p?[Lp(a)]:l3(a)),L=E!=="none";!f&&L&&P.push(...h3(a,p,E,x));const A=[a,...P],T=await Ch(e,y),R=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&R.push(T[w]),h){const B=a3(s,o,x);R.push(T[B[0]],T[B[1]])}if(C=[...C,{placement:s,overflows:R}],!R.every(B=>B<=0)){var N,O;const B=(((N=i.flip)==null?void 0:N.index)||0)+1,ce=A[B];if(ce&&(!(h==="alignment"?_!==ni(ce):!1)||C.every($=>ni($.placement)===_?$.overflows[0]>0:!0)))return{data:{index:B,overflows:C},reset:{placement:ce}};let he=(O=C.filter(Se=>Se.overflows[0]<=0).sort((Se,$)=>Se.overflows[1]-$.overflows[1])[0])==null?void 0:O.placement;if(!he)switch(m){case"bestFit":{var k;const Se=(k=C.filter($=>{if(L){const q=ni($.placement);return q===_||q==="y"}return!0}).map($=>[$.placement,$.overflows.filter(q=>q>0).reduce((q,X)=>q+X,0)]).sort(($,q)=>$[1]-q[1])[0])==null?void 0:k[0];Se&&(he=Se);break}case"initialPlacement":he=a;break}if(s!==he)return{reset:{placement:he}}}return{}}}};function xb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Rb(t){return r3.some(e=>t[e]>=0)}const y3=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Wi(t,e);switch(r){case"referenceHidden":{const i=await Ch(e,{...s,elementContext:"reference"}),o=xb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Rb(o)}}}case"escaped":{const i=await Ch(e,{...s,altBoundary:!0}),o=xb(i,n.floating);return{data:{escapedOffsets:o,escaped:Rb(o)}}}default:return{}}}}},Rk=new Set(["left","top"]);async function v3(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=qi(n),a=Bu(n),l=ni(n)==="y",c=Rk.has(o)?-1:1,d=i&&l?-1:1,h=Wi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(m=a==="end"?E*-1:E),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const _3=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await v3(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},w3=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:w,y:_}=y;return{x:w,y:_}}},...l}=Wi(t,e),c={x:n,y:r},d=await Ch(e,l),h=ni(qi(s)),f=yE(h);let m=c[f],E=c[h];if(i){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",_=m+d[y],I=m-d[w];m=rw(_,m,I)}if(o){const y=h==="y"?"top":"left",w=h==="y"?"bottom":"right",_=E+d[y],I=E-d[w];E=rw(_,E,I)}const p=a.fn({...e,[f]:m,[h]:E});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:i,[h]:o}}}}}},E3=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Wi(t,e),d={x:n,y:r},h=ni(s),f=yE(h);let m=d[f],E=d[h];const p=Wi(a,e),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const I=f==="y"?"height":"width",x=i.reference[f]-i.floating[I]+y.mainAxis,P=i.reference[f]+i.reference[I]-y.mainAxis;m<x?m=x:m>P&&(m=P)}if(c){var w,_;const I=f==="y"?"width":"height",x=Rk.has(qi(s)),P=i.reference[h]-i.floating[I]+(x&&((w=o.offset)==null?void 0:w[h])||0)+(x?0:y.crossAxis),L=i.reference[h]+i.reference[I]+(x?0:((_=o.offset)==null?void 0:_[h])||0)-(x?y.crossAxis:0);E<P?E=P:E>L&&(E=L)}return{[f]:m,[h]:E}}}},I3=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Wi(t,e),d=await Ch(e,c),h=qi(s),f=Bu(s),m=ni(s)==="y",{width:E,height:p}=i.floating;let y,w;h==="top"||h==="bottom"?(y=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,y=f==="end"?"top":"bottom");const _=p-d.top-d.bottom,I=E-d.left-d.right,x=oa(p-d[y],_),P=oa(E-d[w],I),L=!e.middlewareData.shift;let A=x,T=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=_),L&&!f){const C=Jr(d.left,0),N=Jr(d.right,0),O=Jr(d.top,0),k=Jr(d.bottom,0);m?T=E-2*(C!==0||N!==0?C+N:Jr(d.left,d.right)):A=p-2*(O!==0||k!==0?O+k:Jr(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:A});const R=await o.getDimensions(a.floating);return E!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function $g(){return typeof window<"u"}function zu(t){return Pk(t)?(t.nodeName||"").toLowerCase():"#document"}function ns(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _i(t){var e;return(e=(Pk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Pk(t){return $g()?t instanceof Node||t instanceof ns(t).Node:!1}function Ls(t){return $g()?t instanceof Element||t instanceof ns(t).Element:!1}function gi(t){return $g()?t instanceof HTMLElement||t instanceof ns(t).HTMLElement:!1}function Pb(t){return!$g()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ns(t).ShadowRoot}const T3=new Set(["inline","contents"]);function cf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ms(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!T3.has(s)}const S3=new Set(["table","td","th"]);function b3(t){return S3.has(zu(t))}const A3=[":popover-open",":modal"];function Bg(t){return A3.some(e=>{try{return t.matches(e)}catch{return!1}})}const x3=["transform","translate","scale","rotate","perspective"],R3=["transform","translate","scale","rotate","perspective","filter"],P3=["paint","layout","strict","content"];function wE(t){const e=EE(),n=Ls(t)?Ms(t):t;return x3.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||R3.some(r=>(n.willChange||"").includes(r))||P3.some(r=>(n.contain||"").includes(r))}function C3(t){let e=aa(t);for(;gi(e)&&!cu(e);){if(wE(e))return e;if(Bg(e))return null;e=aa(e)}return null}function EE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const k3=new Set(["html","body","#document"]);function cu(t){return k3.has(zu(t))}function Ms(t){return ns(t).getComputedStyle(t)}function zg(t){return Ls(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function aa(t){if(zu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Pb(t)&&t.host||_i(t);return Pb(e)?e.host:e}function Ck(t){const e=aa(t);return cu(e)?t.ownerDocument?t.ownerDocument.body:t.body:gi(e)&&cf(e)?e:Ck(e)}function kh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Ck(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=ns(s);if(i){const a=iw(o);return e.concat(o,o.visualViewport||[],cf(s)?s:[],a&&n?kh(a):[])}return e.concat(s,kh(s,[],n))}function iw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kk(t){const e=Ms(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=gi(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Op(n)!==i||Op(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function IE(t){return Ls(t)?t:t.contextElement}function Fc(t){const e=IE(t);if(!gi(e))return ci(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=kk(e);let o=(i?Op(n.width):n.width)/r,a=(i?Op(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const D3=ci(0);function Dk(t){const e=ns(t);return!EE()||!e.visualViewport?D3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function N3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ns(t)?!1:e}function wl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=IE(t);let o=ci(1);e&&(r?Ls(r)&&(o=Fc(r)):o=Fc(t));const a=N3(i,n,r)?Dk(i):ci(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=ns(i),m=r&&Ls(r)?ns(r):r;let E=f,p=iw(E);for(;p&&r&&m!==E;){const y=Fc(p),w=p.getBoundingClientRect(),_=Ms(p),I=w.left+(p.clientLeft+parseFloat(_.paddingLeft))*y.x,x=w.top+(p.clientTop+parseFloat(_.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,h*=y.y,l+=I,c+=x,E=ns(p),p=iw(E)}}return Mp({width:d,height:h,x:l,y:c})}function Wg(t,e){const n=zg(t).scrollLeft;return e?e.left+n:wl(_i(t)).left+n}function Nk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Wg(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function O3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=_i(r),a=e?Bg(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ci(1);const d=ci(0),h=gi(r);if((h||!h&&!i)&&((zu(r)!=="body"||cf(o))&&(l=zg(r)),gi(r))){const m=wl(r);c=Fc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?Nk(o,l):ci(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function L3(t){return Array.from(t.getClientRects())}function M3(t){const e=_i(t),n=zg(t),r=t.ownerDocument.body,s=Jr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Jr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Wg(t);const a=-n.scrollTop;return Ms(r).direction==="rtl"&&(o+=Jr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const Cb=25;function V3(t,e){const n=ns(t),r=_i(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=EE();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Wg(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,E=Math.abs(r.clientWidth-h.clientWidth-m);E<=Cb&&(i-=E)}else c<=Cb&&(i+=c);return{width:i,height:o,x:a,y:l}}const F3=new Set(["absolute","fixed"]);function U3(t,e){const n=wl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=gi(t)?Fc(t):ci(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function kb(t,e,n){let r;if(e==="viewport")r=V3(t,n);else if(e==="document")r=M3(_i(t));else if(Ls(e))r=U3(e,n);else{const s=Dk(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Mp(r)}function Ok(t,e){const n=aa(t);return n===e||!Ls(n)||cu(n)?!1:Ms(n).position==="fixed"||Ok(n,e)}function j3(t,e){const n=e.get(t);if(n)return n;let r=kh(t,[],!1).filter(a=>Ls(a)&&zu(a)!=="body"),s=null;const i=Ms(t).position==="fixed";let o=i?aa(t):t;for(;Ls(o)&&!cu(o);){const a=Ms(o),l=wE(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&F3.has(s.position)||cf(o)&&!l&&Ok(t,o))?r=r.filter(d=>d!==o):s=a,o=aa(o)}return e.set(t,r),r}function $3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Bg(e)?[]:j3(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=kb(e,d,s);return c.top=Jr(h.top,c.top),c.right=oa(h.right,c.right),c.bottom=oa(h.bottom,c.bottom),c.left=Jr(h.left,c.left),c},kb(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function B3(t){const{width:e,height:n}=kk(t);return{width:e,height:n}}function z3(t,e,n){const r=gi(e),s=_i(e),i=n==="fixed",o=wl(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ci(0);function c(){l.x=Wg(s)}if(r||!r&&!i)if((zu(e)!=="body"||cf(s))&&(a=zg(e)),r){const m=wl(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?Nk(s,a):ci(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function _v(t){return Ms(t).position==="static"}function Db(t,e){if(!gi(t)||Ms(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _i(t)===n&&(n=n.ownerDocument.body),n}function Lk(t,e){const n=ns(t);if(Bg(t))return n;if(!gi(t)){let s=aa(t);for(;s&&!cu(s);){if(Ls(s)&&!_v(s))return s;s=aa(s)}return n}let r=Db(t,e);for(;r&&b3(r)&&_v(r);)r=Db(r,e);return r&&cu(r)&&_v(r)&&!wE(r)?n:r||C3(t)||n}const W3=async function(t){const e=this.getOffsetParent||Lk,n=this.getDimensions,r=await n(t.floating);return{reference:z3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function q3(t){return Ms(t).direction==="rtl"}const H3={convertOffsetParentRelativeRectToViewportRelativeRect:O3,getDocumentElement:_i,getClippingRect:$3,getOffsetParent:Lk,getElementRects:W3,getClientRects:L3,getDimensions:B3,getScale:Fc,isElement:Ls,isRTL:q3};function Mk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function K3(t,e){let n=null,r;const s=_i(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const E=am(h),p=am(s.clientWidth-(d+f)),y=am(s.clientHeight-(h+m)),w=am(d),I={rootMargin:-E+"px "+-p+"px "+-y+"px "+-w+"px",threshold:Jr(0,oa(1,l))||1};let x=!0;function P(L){const A=L[0].intersectionRatio;if(A!==l){if(!x)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!Mk(c,t.getBoundingClientRect())&&o(),x=!1}try{n=new IntersectionObserver(P,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,I)}n.observe(t)}return o(!0),i}function G3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=IE(t),d=s||i?[...c?kh(c):[],...kh(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?K3(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[_]=w;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var I;(I=m)==null||I.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let E,p=l?wl(t):null;l&&y();function y(){const w=wl(t);p&&!Mk(p,w)&&n(),p=w,E=requestAnimationFrame(y)}return n(),()=>{var w;d.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(E)}}const Q3=_3,Y3=w3,J3=g3,X3=I3,Z3=y3,Nb=p3,eB=E3,tB=(t,e,n)=>{const r=new Map,s={platform:H3,...n},i={...s.platform,_c:r};return m3(t,e,{...s,platform:i})};var nB=typeof document<"u",rB=function(){},Bm=nB?S.useLayoutEffect:rB;function Vp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Vp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Vp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Vk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ob(t,e){const n=Vk(t);return Math.round(e*n)/n}function wv(t){const e=S.useRef(t);return Bm(()=>{e.current=t}),e}function sB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=S.useState(r);Vp(f,r)||m(r);const[E,p]=S.useState(null),[y,w]=S.useState(null),_=S.useCallback($=>{$!==L.current&&(L.current=$,p($))},[]),I=S.useCallback($=>{$!==A.current&&(A.current=$,w($))},[]),x=i||E,P=o||y,L=S.useRef(null),A=S.useRef(null),T=S.useRef(d),R=l!=null,C=wv(l),N=wv(s),O=wv(c),k=S.useCallback(()=>{if(!L.current||!A.current)return;const $={placement:e,strategy:n,middleware:f};N.current&&($.platform=N.current),tB(L.current,A.current,$).then(q=>{const X={...q,isPositioned:O.current!==!1};B.current&&!Vp(T.current,X)&&(T.current=X,af.flushSync(()=>{h(X)}))})},[f,e,n,N,O]);Bm(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[c]);const B=S.useRef(!1);Bm(()=>(B.current=!0,()=>{B.current=!1}),[]),Bm(()=>{if(x&&(L.current=x),P&&(A.current=P),x&&P){if(C.current)return C.current(x,P,k);k()}},[x,P,k,C,R]);const ce=S.useMemo(()=>({reference:L,floating:A,setReference:_,setFloating:I}),[_,I]),he=S.useMemo(()=>({reference:x,floating:P}),[x,P]),Se=S.useMemo(()=>{const $={position:n,left:0,top:0};if(!he.floating)return $;const q=Ob(he.floating,d.x),X=Ob(he.floating,d.y);return a?{...$,transform:"translate("+q+"px, "+X+"px)",...Vk(he.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:X}},[n,a,he.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:k,refs:ce,elements:he,floatingStyles:Se}),[d,k,ce,he,Se])}const iB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Nb({element:r.current,padding:s}).fn(n):{}:r?Nb({element:r,padding:s}).fn(n):{}}}},oB=(t,e)=>({...Q3(t),options:[t,e]}),aB=(t,e)=>({...Y3(t),options:[t,e]}),lB=(t,e)=>({...eB(t),options:[t,e]}),cB=(t,e)=>({...J3(t),options:[t,e]}),uB=(t,e)=>({...X3(t),options:[t,e]}),dB=(t,e)=>({...Z3(t),options:[t,e]}),hB=(t,e)=>({...iB(t),options:[t,e]});var fB="Arrow",Fk=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return v.jsx(Jt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fk.displayName=fB;var mB=Fk;function Uk(t){const[e,n]=S.useState(void 0);return zi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var TE="Popper",[jk,$k]=ju(TE),[pB,Bk]=jk(TE),zk=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return v.jsx(pB,{scope:e,anchor:r,onAnchorChange:s,children:n})};zk.displayName=TE;var Wk="PopperAnchor",qk=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Bk(Wk,n),o=S.useRef(null),a=lr(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:v.jsx(Jt.div,{...s,ref:a})});qk.displayName=Wk;var SE="PopperContent",[gB,yB]=jk(SE),Hk=S.forwardRef((t,e)=>{var Fe,Pn,zn,En,In,Cn;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:E,...p}=t,y=Bk(SE,n),[w,_]=S.useState(null),I=lr(e,kt=>_(kt)),[x,P]=S.useState(null),L=Uk(x),A=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,R=r+(i!=="center"?"-"+i:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(c)?c:[c],O=N.length>0,k={padding:C,boundary:N.filter(_B),altBoundary:O},{refs:B,floatingStyles:ce,placement:he,isPositioned:Se,middlewareData:$}=sB({strategy:"fixed",placement:R,whileElementsMounted:(...kt)=>G3(...kt,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[oB({mainAxis:s+T,alignmentAxis:o}),l&&aB({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?lB():void 0,...k}),l&&cB({...k}),uB({...k,apply:({elements:kt,rects:ft,availableWidth:at,availableHeight:cr})=>{const{width:_r,height:Wn}=ft.reference,mt=kt.floating.style;mt.setProperty("--radix-popper-available-width",`${at}px`),mt.setProperty("--radix-popper-available-height",`${cr}px`),mt.setProperty("--radix-popper-anchor-width",`${_r}px`),mt.setProperty("--radix-popper-anchor-height",`${Wn}px`)}}),x&&hB({element:x,padding:a}),wB({arrowWidth:A,arrowHeight:T}),f&&dB({strategy:"referenceHidden",...k})]}),[q,X]=Qk(he),we=pi(E);zi(()=>{Se&&(we==null||we())},[Se,we]);const Ee=(Fe=$.arrow)==null?void 0:Fe.x,re=(Pn=$.arrow)==null?void 0:Pn.y,ve=((zn=$.arrow)==null?void 0:zn.centerOffset)!==0,[j,Ge]=S.useState();return zi(()=>{w&&Ge(window.getComputedStyle(w).zIndex)},[w]),v.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:Se?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j,"--radix-popper-transform-origin":[(En=$.transformOrigin)==null?void 0:En.x,(In=$.transformOrigin)==null?void 0:In.y].join(" "),...((Cn=$.hide)==null?void 0:Cn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:v.jsx(gB,{scope:n,placedSide:q,onArrowChange:P,arrowX:Ee,arrowY:re,shouldHideArrow:ve,children:v.jsx(Jt.div,{"data-side":q,"data-align":X,...p,ref:I,style:{...p.style,animation:Se?void 0:"none"}})})})});Hk.displayName=SE;var Kk="PopperArrow",vB={top:"bottom",right:"left",bottom:"top",left:"right"},Gk=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=yB(Kk,r),o=vB[i.placedSide];return v.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:v.jsx(mB,{...s,ref:n,style:{...s.style,display:"block"}})})});Gk.displayName=Kk;function _B(t){return t!==null}var wB=t=>({name:"transformOrigin",options:t,fn(e){var y,w,_;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=Qk(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,m=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let E="",p="";return c==="bottom"?(E=o?h:`${f}px`,p=`${-l}px`):c==="top"?(E=o?h:`${f}px`,p=`${r.floating.height+l}px`):c==="right"?(E=`${-l}px`,p=o?h:`${m}px`):c==="left"&&(E=`${r.floating.width+l}px`,p=o?h:`${m}px`),{data:{x:E,y:p}}}});function Qk(t){const[e,n="center"]=t.split("-");return[e,n]}var HX=zk,EB=qk,IB=Hk,TB=Gk,[qg]=ju("Tooltip",[$k]),bE=$k(),Yk="TooltipProvider",SB=700,Lb="tooltip.open",[bB,Jk]=qg(Yk),Xk=t=>{const{__scopeTooltip:e,delayDuration:n=SB,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),v.jsx(bB,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};Xk.displayName=Yk;var Zk="Tooltip",[KX,Hg]=qg(Zk),ow="TooltipTrigger",AB=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Hg(ow,n),i=Jk(ow,n),o=bE(n),a=S.useRef(null),l=lr(e,a,s.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),v.jsx(EB,{asChild:!0,...o,children:v.jsx(Jt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Lt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Lt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Lt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Lt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Lt(t.onBlur,s.onClose),onClick:Lt(t.onClick,s.onClose)})})});AB.displayName=ow;var xB="TooltipPortal",[GX,RB]=qg(xB,{forceMount:void 0}),uu="TooltipContent",eD=S.forwardRef((t,e)=>{const n=RB(uu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Hg(uu,t.__scopeTooltip);return v.jsx(Vl,{present:r||o.open,children:o.disableHoverableContent?v.jsx(tD,{side:s,...i,ref:e}):v.jsx(PB,{side:s,...i,ref:e})})}),PB=S.forwardRef((t,e)=>{const n=Hg(uu,t.__scopeTooltip),r=Jk(uu,t.__scopeTooltip),s=S.useRef(null),i=lr(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=S.useCallback(()=>{a(null),h(!1)},[h]),m=S.useCallback((E,p)=>{const y=E.currentTarget,w={x:E.clientX,y:E.clientY},_=OB(w,y.getBoundingClientRect()),I=LB(w,_),x=MB(p.getBoundingClientRect()),P=FB([...I,...x]);a(P),h(!0)},[h]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&d){const E=y=>m(y,d),p=y=>m(y,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",p)}}},[l,d,m,f]),S.useEffect(()=>{if(o){const E=p=>{const y=p.target,w={x:p.clientX,y:p.clientY},_=(l==null?void 0:l.contains(y))||(d==null?void 0:d.contains(y)),I=!VB(w,o);_?f():I&&(f(),c())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,c,f]),v.jsx(tD,{...t,ref:i})}),[CB,kB]=qg(Zk,{isInside:!1}),DB=n4("TooltipContent"),tD=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Hg(uu,n),c=bE(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(Lb,d),()=>document.removeEventListener(Lb,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),v.jsx(Fg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:v.jsxs(IB,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[v.jsx(DB,{children:r}),v.jsx(CB,{scope:n,isInside:!0,children:v.jsx(A4,{id:l.contentId,role:"tooltip",children:s||r})})]})})});eD.displayName=uu;var nD="TooltipArrow",NB=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=bE(n);return kB(nD,n).isInside?null:v.jsx(TB,{...s,...r,ref:e})});NB.displayName=nD;function OB(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function LB(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function MB(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function VB(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function FB(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),UB(e)}function UB(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var jB=Xk,rD=eD;const $B=jB,BB=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>v.jsx(rD,{ref:r,sideOffset:e,className:Yt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));BB.displayName=rD.displayName;var Kg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zB={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Co,c0,eP,WB=(eP=class{constructor(){pt(this,Co,zB);pt(this,c0,!1)}setTimeoutProvider(t){qe(this,Co,t)}setTimeout(t,e){return Y(this,Co).setTimeout(t,e)}clearTimeout(t){Y(this,Co).clearTimeout(t)}setInterval(t,e){return Y(this,Co).setInterval(t,e)}clearInterval(t){Y(this,Co).clearInterval(t)}},Co=new WeakMap,c0=new WeakMap,eP),Fp=new WB;function qB(t){setTimeout(t,0)}var Gg=typeof window>"u"||"Deno"in globalThis;function Sr(){}function HB(t,e){return typeof t=="function"?t(e):t}function KB(t){return typeof t=="number"&&t>=0&&t!==1/0}function GB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function aw(t,e){return typeof t=="function"?t(e):t}function QB(t,e){return typeof t=="function"?t(e):t}function Mb(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==AE(o,e.options))return!1}else if(!Nh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Vb(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Dh(e.options.mutationKey)!==Dh(i))return!1}else if(!Nh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function AE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Dh)(t)}function Dh(t){return JSON.stringify(t,(e,n)=>lw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Nh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Nh(t[n],e[n])):!1}var YB=Object.prototype.hasOwnProperty;function sD(t,e){if(t===e)return t;const n=Fb(t)&&Fb(e);if(!n&&!(lw(t)&&lw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:YB.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=sD(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function QX(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Fb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function lw(t){if(!Ub(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ub(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ub(t){return Object.prototype.toString.call(t)==="[object Object]"}function JB(t){return new Promise(e=>{Fp.setTimeout(e,t)})}function XB(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?sD(t,e):e}function ZB(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function e6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var xE=Symbol();function iD(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===xE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function YX(t,e){return typeof t=="function"?t(...e):!!t}var nl,ko,Gc,tP,t6=(tP=class extends Kg{constructor(){super();pt(this,nl);pt(this,ko);pt(this,Gc);qe(this,Gc,e=>{if(!Gg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Y(this,ko)||this.setEventListener(Y(this,Gc))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,ko))==null||e.call(this),qe(this,ko,void 0))}setEventListener(e){var n;qe(this,Gc,e),(n=Y(this,ko))==null||n.call(this),qe(this,ko,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Y(this,nl)!==e&&(qe(this,nl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Y(this,nl)=="boolean"?Y(this,nl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},nl=new WeakMap,ko=new WeakMap,Gc=new WeakMap,tP),oD=new t6;function n6(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function r6(t){var n;let e;if((n=t.then(r=>(e=r,r),Sr))==null||n.catch(Sr),e!==void 0)return{data:e}}function aD(t){return t}function s6(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function i6(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(Sr),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function o6(t){return t.state.isPaused}function a6(t){return t.state.status==="success"}function l6(t){return!0}function c6(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??o6,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[s6(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??a6,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??l6,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??aD,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[i6(f,o,i)]:[]);return{mutations:r,queries:a}}function u6(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??aD,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:m,promise:E,dehydratedAt:p})=>{var L,A;const y=E?r6(E):void 0,w=h.data===void 0?y==null?void 0:y.data:h.data,_=w===void 0?w:i(w);let I=s.get(f);const x=(I==null?void 0:I.state.status)==="pending",P=(I==null?void 0:I.state.fetchStatus)==="fetching";if(I){const T=y&&p!==void 0&&p>I.state.dataUpdatedAt;if(h.dataUpdatedAt>I.state.dataUpdatedAt||T){const{fetchStatus:R,...C}=h;I.setState({...C,data:_})}}else I=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(A=n==null?void 0:n.defaultOptions)==null?void 0:A.queries,queryKey:d,queryHash:f,meta:m},{...h,data:_,fetchStatus:"idle",status:_!==void 0?"success":h.status});E&&!x&&!P&&(p===void 0||p>I.state.dataUpdatedAt)&&I.fetch(void 0,{initialPromise:Promise.resolve(E).then(i)}).catch(Sr)})}var d6=qB;function h6(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=d6;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var br=h6(),Qc,Do,Yc,nP,f6=(nP=class extends Kg{constructor(){super();pt(this,Qc,!0);pt(this,Do);pt(this,Yc);qe(this,Yc,e=>{if(!Gg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,Do)||this.setEventListener(Y(this,Yc))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,Do))==null||e.call(this),qe(this,Do,void 0))}setEventListener(e){var n;qe(this,Yc,e),(n=Y(this,Do))==null||n.call(this),qe(this,Do,e(this.setOnline.bind(this)))}setOnline(e){Y(this,Qc)!==e&&(qe(this,Qc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Y(this,Qc)}},Qc=new WeakMap,Do=new WeakMap,Yc=new WeakMap,nP),Up=new f6;function m6(t){return Math.min(1e3*2**t,3e4)}function lD(t){return(t??"online")==="online"?Up.isOnline():!0}var cw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function cD(t){let e=!1,n=0,r;const s=n6(),i=()=>s.status!=="pending",o=p=>{var y;if(!i()){const w=new cw(p);f(w),(y=t.onCancel)==null||y.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>oD.isFocused()&&(t.networkMode==="always"||Up.isOnline())&&t.canRun(),d=()=>lD(t.networkMode)&&t.canRun(),h=p=>{i()||(r==null||r(),s.resolve(p))},f=p=>{i()||(r==null||r(),s.reject(p))},m=()=>new Promise(p=>{var y;r=w=>{(i()||c())&&p(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),E=()=>{if(i())return;let p;const y=n===0?t.initialPromise:void 0;try{p=y??t.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(h).catch(w=>{var L;if(i())return;const _=t.retry??(Gg?0:3),I=t.retryDelay??m6,x=typeof I=="function"?I(n,w):I,P=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,w);if(e||!P){f(w);return}n++,(L=t.onFail)==null||L.call(t,n,w),JB(x).then(()=>c()?void 0:m()).then(()=>{e?f(w):E()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():m().then(E),s)}}var rl,rP,uD=(rP=class{constructor(){pt(this,rl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KB(this.gcTime)&&qe(this,rl,Fp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Gg?1/0:5*60*1e3))}clearGcTimeout(){Y(this,rl)&&(Fp.clearTimeout(Y(this,rl)),qe(this,rl,void 0))}},rl=new WeakMap,rP),sl,Jc,ds,il,Kn,Xh,ol,Ts,Si,sP,p6=(sP=class extends uD{constructor(n){super();pt(this,Ts);pt(this,sl);pt(this,Jc);pt(this,ds);pt(this,il);pt(this,Kn);pt(this,Xh);pt(this,ol);qe(this,ol,!1),qe(this,Xh,n.defaultOptions),this.setOptions(n.options),this.observers=[],qe(this,il,n.client),qe(this,ds,Y(this,il).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,qe(this,sl,$b(this.options)),this.state=n.state??Y(this,sl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Y(this,Kn))==null?void 0:n.promise}setOptions(n){if(this.options={...Y(this,Xh),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=$b(this.options);r.data!==void 0&&(this.setState(jb(r.data,r.dataUpdatedAt)),qe(this,sl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,ds).remove(this)}setData(n,r){const s=XB(this.state.data,n,this.options);return ur(this,Ts,Si).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){ur(this,Ts,Si).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Y(this,Kn))==null?void 0:s.promise;return(i=Y(this,Kn))==null||i.cancel(n),r?r.then(Sr).catch(Sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,sl))}isActive(){return this.observers.some(n=>QB(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>aw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!GB(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,Kn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,Kn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Y(this,ds).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Y(this,Kn)&&(Y(this,ol)?Y(this,Kn).cancel({revert:!0}):Y(this,Kn).cancelRetry()),this.scheduleGc()),Y(this,ds).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ur(this,Ts,Si).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,E,p,y,w,_,I,x;if(this.state.fetchStatus!=="idle"&&((c=Y(this,Kn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Y(this,Kn))return Y(this,Kn).continueRetry(),Y(this,Kn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const P=this.observers.find(L=>L.options.queryFn);P&&this.setOptions(P.options)}const s=new AbortController,i=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(qe(this,ol,!0),s.signal)})},o=()=>{const P=iD(this.options,r),A=(()=>{const T={client:Y(this,il),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return qe(this,ol,!1),this.options.persister?this.options.persister(P,A,this):P(A)},l=(()=>{const P={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Y(this,il),state:this.state,fetchFn:o};return i(P),P})();(d=this.options.behavior)==null||d.onFetch(l,this),qe(this,Jc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ur(this,Ts,Si).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),qe(this,Kn,cD({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:P=>{P instanceof cw&&P.revert&&this.setState({...Y(this,Jc),fetchStatus:"idle"}),s.abort()},onFail:(P,L)=>{ur(this,Ts,Si).call(this,{type:"failed",failureCount:P,error:L})},onPause:()=>{ur(this,Ts,Si).call(this,{type:"pause"})},onContinue:()=>{ur(this,Ts,Si).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const P=await Y(this,Kn).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(E=(m=Y(this,ds).config).onSuccess)==null||E.call(m,P,this),(y=(p=Y(this,ds).config).onSettled)==null||y.call(p,P,this.state.error,this),P}catch(P){if(P instanceof cw){if(P.silent)return Y(this,Kn).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw ur(this,Ts,Si).call(this,{type:"error",error:P}),(_=(w=Y(this,ds).config).onError)==null||_.call(w,P,this),(x=(I=Y(this,ds).config).onSettled)==null||x.call(I,this.state.data,P,this),P}finally{this.scheduleGc()}}},sl=new WeakMap,Jc=new WeakMap,ds=new WeakMap,il=new WeakMap,Kn=new WeakMap,Xh=new WeakMap,ol=new WeakMap,Ts=new WeakSet,Si=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...g6(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...jb(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return qe(this,Jc,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),br.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Y(this,ds).notify({query:this,type:"updated",action:n})})},sP);function g6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lD(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function jb(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function $b(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function Bb(t){return{onFetch:(e,n)=>{var d,h,f,m,E;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const y=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},w=iD(e.options,e.fetchOptions),_=async(I,x,P)=>{if(p)return Promise.reject();if(x==null&&I.pages.length)return Promise.resolve(I);const A=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:x,direction:P?"backward":"forward",meta:e.options.meta};return y(N),N})(),T=await w(A),{maxPages:R}=e.options,C=P?e6:ZB;return{pages:C(I.pages,T,R),pageParams:C(I.pageParams,x,R)}};if(s&&i.length){const I=s==="backward",x=I?y6:zb,P={pages:i,pageParams:o},L=x(r,P);a=await _(P,L,I)}else{const I=t??i.length;do{const x=l===0?o[0]??r.initialPageParam:zb(r,a);if(l>0&&x==null)break;a=await _(a,x),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var p,y;return(y=(p=e.options).persister)==null?void 0:y.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function zb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function y6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Zh,Ys,Ir,al,Js,yo,iP,v6=(iP=class extends uD{constructor(n){super();pt(this,Js);pt(this,Zh);pt(this,Ys);pt(this,Ir);pt(this,al);qe(this,Zh,n.client),this.mutationId=n.mutationId,qe(this,Ir,n.mutationCache),qe(this,Ys,[]),this.state=n.state||_6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Y(this,Ys).includes(n)||(Y(this,Ys).push(n),this.clearGcTimeout(),Y(this,Ir).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){qe(this,Ys,Y(this,Ys).filter(r=>r!==n)),this.scheduleGc(),Y(this,Ir).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Y(this,Ys).length||(this.state.status==="pending"?this.scheduleGc():Y(this,Ir).remove(this))}continue(){var n;return((n=Y(this,al))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,E,p,y,w,_,I,x,P,L,A,T,R,C;const r=()=>{ur(this,Js,yo).call(this,{type:"continue"})},s={client:Y(this,Zh),meta:this.options.meta,mutationKey:this.options.mutationKey};qe(this,al,cD({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(N,O)=>{ur(this,Js,yo).call(this,{type:"failed",failureCount:N,error:O})},onPause:()=>{ur(this,Js,yo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,Ir).canRun(this)}));const i=this.state.status==="pending",o=!Y(this,al).canStart();try{if(i)r();else{ur(this,Js,yo).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=Y(this,Ir).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&ur(this,Js,yo).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const N=await Y(this,al).start();return await((f=(h=Y(this,Ir).config).onSuccess)==null?void 0:f.call(h,N,n,this.state.context,this,s)),await((E=(m=this.options).onSuccess)==null?void 0:E.call(m,N,n,this.state.context,s)),await((y=(p=Y(this,Ir).config).onSettled)==null?void 0:y.call(p,N,null,this.state.variables,this.state.context,this,s)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,N,null,n,this.state.context,s)),ur(this,Js,yo).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(I=Y(this,Ir).config).onError)==null?void 0:x.call(I,N,n,this.state.context,this,s)),await((L=(P=this.options).onError)==null?void 0:L.call(P,N,n,this.state.context,s)),await((T=(A=Y(this,Ir).config).onSettled)==null?void 0:T.call(A,void 0,N,this.state.variables,this.state.context,this,s)),await((C=(R=this.options).onSettled)==null?void 0:C.call(R,void 0,N,n,this.state.context,s)),N}finally{ur(this,Js,yo).call(this,{type:"error",error:N})}}finally{Y(this,Ir).runNext(this)}}},Zh=new WeakMap,Ys=new WeakMap,Ir=new WeakMap,al=new WeakMap,Js=new WeakSet,yo=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),br.batch(()=>{Y(this,Ys).forEach(s=>{s.onMutationUpdate(n)}),Y(this,Ir).notify({mutation:this,type:"updated",action:n})})},iP);function _6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xi,Ss,ef,oP,w6=(oP=class extends Kg{constructor(e={}){super();pt(this,xi);pt(this,Ss);pt(this,ef);this.config=e,qe(this,xi,new Set),qe(this,Ss,new Map),qe(this,ef,0)}build(e,n,r){const s=new v6({client:e,mutationCache:this,mutationId:++jf(this,ef)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Y(this,xi).add(e);const n=lm(e);if(typeof n=="string"){const r=Y(this,Ss).get(n);r?r.push(e):Y(this,Ss).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Y(this,xi).delete(e)){const n=lm(e);if(typeof n=="string"){const r=Y(this,Ss).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Y(this,Ss).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=lm(e);if(typeof n=="string"){const r=Y(this,Ss).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=lm(e);if(typeof n=="string"){const s=(r=Y(this,Ss).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){br.batch(()=>{Y(this,xi).forEach(e=>{this.notify({type:"removed",mutation:e})}),Y(this,xi).clear(),Y(this,Ss).clear()})}getAll(){return Array.from(Y(this,xi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Vb(n,r))}findAll(e={}){return this.getAll().filter(n=>Vb(e,n))}notify(e){br.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return br.batch(()=>Promise.all(e.map(n=>n.continue().catch(Sr))))}},xi=new WeakMap,Ss=new WeakMap,ef=new WeakMap,oP);function lm(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Xs,aP,E6=(aP=class extends Kg{constructor(e={}){super();pt(this,Xs);this.config=e,qe(this,Xs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??AE(s,n);let o=this.get(i);return o||(o=new p6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Y(this,Xs).has(e.queryHash)||(Y(this,Xs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Y(this,Xs).get(e.queryHash);n&&(e.destroy(),n===e&&Y(this,Xs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){br.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Y(this,Xs).get(e)}getAll(){return[...Y(this,Xs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Mb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Mb(e,r)):n}notify(e){br.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){br.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){br.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xs=new WeakMap,aP),mn,No,Oo,Xc,Zc,Lo,eu,tu,lP,I6=(lP=class{constructor(t={}){pt(this,mn);pt(this,No);pt(this,Oo);pt(this,Xc);pt(this,Zc);pt(this,Lo);pt(this,eu);pt(this,tu);qe(this,mn,t.queryCache||new E6),qe(this,No,t.mutationCache||new w6),qe(this,Oo,t.defaultOptions||{}),qe(this,Xc,new Map),qe(this,Zc,new Map),qe(this,Lo,0)}mount(){jf(this,Lo)._++,Y(this,Lo)===1&&(qe(this,eu,oD.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,mn).onFocus())})),qe(this,tu,Up.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,mn).onOnline())})))}unmount(){var t,e;jf(this,Lo)._--,Y(this,Lo)===0&&((t=Y(this,eu))==null||t.call(this),qe(this,eu,void 0),(e=Y(this,tu))==null||e.call(this),qe(this,tu,void 0))}isFetching(t){return Y(this,mn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Y(this,No).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,mn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Y(this,mn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(aw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Y(this,mn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Y(this,mn).get(r.queryHash),i=s==null?void 0:s.state.data,o=HB(e,i);if(o!==void 0)return Y(this,mn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return br.batch(()=>Y(this,mn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,mn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Y(this,mn);br.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Y(this,mn);return br.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=br.batch(()=>Y(this,mn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Sr).catch(Sr)}invalidateQueries(t,e={}){return br.batch(()=>(Y(this,mn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=br.batch(()=>Y(this,mn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Sr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Sr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Y(this,mn).build(this,e);return n.isStaleByTime(aw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Sr).catch(Sr)}fetchInfiniteQuery(t){return t.behavior=Bb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Sr).catch(Sr)}ensureInfiniteQueryData(t){return t.behavior=Bb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Up.isOnline()?Y(this,No).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,mn)}getMutationCache(){return Y(this,No)}getDefaultOptions(){return Y(this,Oo)}setDefaultOptions(t){qe(this,Oo,t)}setQueryDefaults(t,e){Y(this,Xc).set(Dh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Y(this,Xc).values()],n={};return e.forEach(r=>{Nh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Y(this,Zc).set(Dh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Y(this,Zc).values()],n={};return e.forEach(r=>{Nh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Y(this,Oo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=AE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===xE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Y(this,Oo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Y(this,mn).clear(),Y(this,No).clear()}},mn=new WeakMap,No=new WeakMap,Oo=new WeakMap,Xc=new WeakMap,Zc=new WeakMap,Lo=new WeakMap,eu=new WeakMap,tu=new WeakMap,lP),dD=S.createContext(void 0),ZX=t=>{const e=S.useContext(dD);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},T6=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),v.jsx(dD.Provider,{value:t,children:e})),S6=["added","removed","updated"];function Wb(t){return S6.includes(t)}async function b6({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();u6(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function qb({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:c6(t,r)};await e.persistClient(s)}function A6(t){const e=t.queryClient.getQueryCache().subscribe(r=>{Wb(r.type)&&qb(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{Wb(r.type)&&qb(t)});return()=>{e(),n()}}function x6(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=b6(t).then(()=>{e||(n=A6(t))});return[r,s]}function Ev(){}function R6({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:P6(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Ev,restoreClient:Ev,removeClient:Ev}}function P6(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Fp.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oh(){return Oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oh.apply(this,arguments)}var Fo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fo||(Fo={}));const Hb="popstate";function C6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return jp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Lh(s)}return hD(e,n,null,t)}function k6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Fl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),jp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Lh(i))}function r(s,i){RE(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return hD(e,n,r,t)}function vn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function RE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D6(){return Math.random().toString(36).substr(2,8)}function Kb(t,e){return{usr:t.state,key:t.key,idx:e}}function jp(t,e,n,r){return n===void 0&&(n=null),Oh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fl(e):e,{state:n,key:e&&e.key||r||D6()})}function Lh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hD(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Fo.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Oh({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Fo.Pop;let y=d(),w=y==null?null:y-c;c=y,l&&l({action:a,location:p.location,delta:w})}function f(y,w){a=Fo.Push;let _=jp(p.location,y,w);n&&n(_,y),c=d()+1;let I=Kb(_,c),x=p.createHref(_);try{o.pushState(I,"",x)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(x)}i&&l&&l({action:a,location:p.location,delta:1})}function m(y,w){a=Fo.Replace;let _=jp(p.location,y,w);n&&n(_,y),c=d();let I=Kb(_,c),x=p.createHref(_);o.replaceState(I,"",x),i&&l&&l({action:a,location:p.location,delta:0})}function E(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof y=="string"?y:Lh(y);return _=_.replace(/ $/,"%20"),vn(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let p={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Hb,h),l=y,()=>{s.removeEventListener(Hb,h),l=null}},createHref(y){return e(s,y)},createURL:E,encodeLocation(y){let w=E(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(y){return o.go(y)}};return p}var Gb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gb||(Gb={}));function N6(t,e,n){return n===void 0&&(n="/"),O6(t,e,n)}function O6(t,e,n,r){let s=typeof e=="string"?Fl(e):e,i=PE(s.pathname||"/",n);if(i==null)return null;let o=fD(t);L6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=K6(i);a=W6(o[l],c)}return a}function fD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(vn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Jo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(vn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),fD(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:B6(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of mD(i.path))s(i,o,l)}),e}function mD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=mD(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function L6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:z6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const M6=/^:[\w-]+$/,V6=3,F6=2,U6=1,j6=10,$6=-2,Qb=t=>t==="*";function B6(t,e){let n=t.split("/"),r=n.length;return n.some(Qb)&&(r+=$6),e&&(r+=F6),n.filter(s=>!Qb(s)).reduce((s,i)=>s+(M6.test(i)?V6:i===""?U6:j6),r)}function z6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function W6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=q6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Jo([i,h.pathname]),pathnameBase:J6(Jo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Jo([i,h.pathnameBase]))}return o}function q6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=H6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const E=a[h];return m&&!E?c[f]=void 0:c[f]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function H6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),RE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function K6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return RE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function PE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function G6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fl(t):t;return{pathname:n?n.startsWith("/")?n:Q6(n,e):e,search:X6(r),hash:Z6(s)}}function Q6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Iv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function CE(t,e){let n=Y6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Fl(t):(s=Oh({},t),vn(!s.pathname||!s.pathname.includes("?"),Iv("?","pathname","search",s)),vn(!s.pathname||!s.pathname.includes("#"),Iv("#","pathname","hash",s)),vn(!s.search||!s.search.includes("#"),Iv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=G6(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Jo=t=>t.join("/").replace(/\/\/+/g,"/"),J6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function e5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pD=["post","put","patch","delete"];new Set(pD);const t5=["get",...pD];new Set(t5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mh.apply(this,arguments)}const DE=S.createContext(null),n5=S.createContext(null),_a=S.createContext(null),Qg=S.createContext(null),Ji=S.createContext({outlet:null,matches:[],isDataRoute:!1}),gD=S.createContext(null);function r5(t,e){let{relative:n}=e===void 0?{}:e;Wu()||vn(!1);let{basename:r,navigator:s}=S.useContext(_a),{hash:i,pathname:o,search:a}=vD(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Jo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Wu(){return S.useContext(Qg)!=null}function wi(){return Wu()||vn(!1),S.useContext(Qg).location}function yD(t){S.useContext(_a).static||S.useLayoutEffect(t)}function Ul(){let{isDataRoute:t}=S.useContext(Ji);return t?g5():s5()}function s5(){Wu()||vn(!1);let t=S.useContext(DE),{basename:e,future:n,navigator:r}=S.useContext(_a),{matches:s}=S.useContext(Ji),{pathname:i}=wi(),o=JSON.stringify(CE(s,n.v7_relativeSplatPath)),a=S.useRef(!1);return yD(()=>{a.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=kE(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Jo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function eZ(){let{matches:t}=S.useContext(Ji),e=t[t.length-1];return e?e.params:{}}function vD(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(_a),{matches:s}=S.useContext(Ji),{pathname:i}=wi(),o=JSON.stringify(CE(s,r.v7_relativeSplatPath));return S.useMemo(()=>kE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function i5(t,e){return o5(t,e)}function o5(t,e,n,r){Wu()||vn(!1);let{navigator:s}=S.useContext(_a),{matches:i}=S.useContext(Ji),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=wi(),d;if(e){var h;let y=typeof e=="string"?Fl(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||vn(!1),d=y}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let E=N6(t,{pathname:m}),p=d5(E&&E.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Jo([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Jo([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&p?S.createElement(Qg.Provider,{value:{location:Mh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Fo.Pop}},p):p}function a5(){let t=p5(),e=e5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const l5=S.createElement(a5,null);class c5 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ji.Provider,{value:this.props.routeContext},S.createElement(gD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u5(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(DE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ji.Provider,{value:e},r)}function d5(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||vn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,E=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,E=!1,p=null,y=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||l5,l&&(c<0&&f===0?(y5("route-fallback"),E=!0,y=null):c===f&&(E=!0,y=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),_=()=>{let I;return m?I=p:E?I=y:h.route.Component?I=S.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,S.createElement(u5,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(c5,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var _D=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_D||{}),wD=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wD||{});function h5(t){let e=S.useContext(DE);return e||vn(!1),e}function f5(t){let e=S.useContext(n5);return e||vn(!1),e}function m5(t){let e=S.useContext(Ji);return e||vn(!1),e}function ED(t){let e=m5(),n=e.matches[e.matches.length-1];return n.route.id||vn(!1),n.route.id}function p5(){var t;let e=S.useContext(gD),n=f5(),r=ED();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function g5(){let{router:t}=h5(_D.UseNavigateStable),e=ED(wD.UseNavigateStable),n=S.useRef(!1);return yD(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Mh({fromRouteId:e},i)))},[t,e])}const Yb={};function y5(t,e,n){Yb[t]||(Yb[t]=!0)}function ID(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function tZ(t){let{to:e,replace:n,state:r,relative:s}=t;Wu()||vn(!1);let{future:i,static:o}=S.useContext(_a),{matches:a}=S.useContext(Ji),{pathname:l}=wi(),c=Ul(),d=kE(e,CE(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Pe(t){vn(!1)}function TD(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Fo.Pop,navigator:i,static:o=!1,future:a}=t;Wu()&&vn(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Mh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Fl(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:E="default"}=r,p=S.useMemo(()=>{let y=PE(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:E},navigationType:s}},[l,d,h,f,m,E,s]);return p==null?null:S.createElement(_a.Provider,{value:c},S.createElement(Qg.Provider,{children:n,value:p}))}function Jb(t){let{children:e,location:n}=t;return i5(uw(e),n)}new Promise(()=>{});function uw(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,uw(r.props.children,i));return}r.type!==Pe&&vn(!1),!r.props.index||!r.props.children||vn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dw(){return dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dw.apply(this,arguments)}function v5(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function _5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function w5(t,e){return t.button===0&&(!e||e==="_self")&&!_5(t)}function hw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function E5(t,e){let n=hw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const I5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T5="6";try{window.__reactRouterVersion=T5}catch{}const S5="startTransition",$p=m0[S5];function b5(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=C6({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&$p?$p(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>ID(r),[r]),S.createElement(TD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function A5(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=k6({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&$p?$p(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>ID(r),[r]),S.createElement(TD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const x5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fw=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=v5(e,I5),{basename:m}=S.useContext(_a),E,p=!1;if(typeof c=="string"&&R5.test(c)&&(E=c,x5))try{let I=new URL(window.location.href),x=c.startsWith("//")?new URL(I.protocol+c):new URL(c),P=PE(x.pathname,m);x.origin===I.origin&&P!=null?c=P+x.search+x.hash:p=!0}catch{}let y=r5(c,{relative:s}),w=P5(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function _(I){r&&r(I),I.defaultPrevented||w(I)}return S.createElement("a",dw({},f,{href:E||y,onClick:p||i?r:_,ref:n,target:l}))});var Xb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Xb||(Xb={}));var Zb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zb||(Zb={}));function P5(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ul(),c=wi(),d=vD(t,{relative:o});return S.useCallback(h=>{if(w5(h,n)){h.preventDefault();let f=r!==void 0?r:Lh(c)===Lh(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function nZ(t){let e=S.useRef(hw(t)),n=S.useRef(!1),r=wi(),s=S.useMemo(()=>E5(r.search,n.current?null:e.current),[r.search]),i=Ul(),o=S.useCallback((a,l)=>{const c=hw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const SD=S.createContext(void 0),C5=({children:t})=>{const[e,n]=S.useState("medium"),[r,s]=S.useState(!1),[i,o]=S.useState(!1);S.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),S.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),S.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),S.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return v.jsx(SD.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},rZ=()=>{const t=S.useContext(SD);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},k5=dE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),Vn=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?e4:"button";return v.jsx(o,{className:Yt(k5({variant:e,size:n,className:t})),ref:i,...s})});Vn.displayName="Button";const ri=S.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),v.jsx("input",{type:e,className:Yt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});ri.displayName="Input";const D5=()=>{};var eA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},N5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},NE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):N5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new O5;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L5=function(t){const e=bD(t);return NE.encodeByteArray(e,!0)},Bp=function(t){return L5(t).replace(/\./g,"")},AD=function(t){try{return NE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=()=>xD().__FIREBASE_DEFAULTS__,V5=()=>{if(typeof process>"u"||typeof eA>"u")return;const t=eA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},F5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AD(t[1]);return e&&JSON.parse(e)},Yg=()=>{try{return D5()||M5()||V5()||F5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RD=t=>{var e,n;return(n=(e=Yg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OE=t=>{const e=RD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PD=()=>{var t;return(t=Yg())==null?void 0:t.config},CD=t=>{var e;return(e=Yg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bp(JSON.stringify(n)),Bp(JSON.stringify(o)),""].join(".")}const Xd={};function U5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xd))Xd[e]?t.emulator.push(e):t.prod.push(e);return t}function j5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tA=!1;function Jg(t,e){if(typeof window>"u"||typeof document>"u"||!$s(window.location.host)||Xd[t]===e||Xd[t]||tA)return;Xd[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=U5().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{tA=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=j5(r),m=n("text"),E=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),y=document.getElementById(p)||document.createElement("a"),w=n("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;a(I),d(y,p);const x=c();l(_,w),I.append(_,E,y,x),document.body.appendChild(I)}i?(E.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function DD(){var e;const t=(e=Yg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function W5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q5(){const t=jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ND(){return!DD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OD(){return!DD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function LE(){try{return typeof indexedDB=="object"}catch{return!1}}function H5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5="FirebaseError";class Bs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=K5,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qu.prototype.create)}}class qu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?G5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Bs(s,a,r)}}function G5(t,e){return t.replace(Q5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Q5=/\{\$([^}]+)}/g;function Y5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(nA(i)&&nA(o)){if(!Vs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Od(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ld(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function J5(t,e){const n=new X5(t,e);return n.subscribe.bind(n)}class X5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Z5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Tv),s.error===void 0&&(s.error=Tv),s.complete===void 0&&(s.complete=Tv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sZ=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n9(e))try{this.getOrInitializeService({instanceIdentifier:Fa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fa){return this.instances.has(e)}getOptions(e=Fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fa){return this.component?this.component.multipleInstances?e:Fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t9(t){return t===Fa?void 0:t}function n9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(dt||(dt={}));const s9={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},i9=dt.INFO,o9={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},a9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=o9[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xg{constructor(e){this.name=e,this._logLevel=i9,this._logHandler=a9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const l9=(t,e)=>e.some(n=>t instanceof n);let rA,sA;function c9(){return rA||(rA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u9(){return sA||(sA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LD=new WeakMap,pw=new WeakMap,MD=new WeakMap,Sv=new WeakMap,ME=new WeakMap;function d9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&LD.set(n,t)}).catch(()=>{}),ME.set(e,t),e}function h9(t){if(pw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pw.set(t,e)}let gw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f9(t){gw=t(gw)}function m9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bv(this),e,...n);return MD.set(r,e.sort?e.sort():[e]),Xo(r)}:u9().includes(t)?function(...e){return t.apply(bv(this),e),Xo(LD.get(this))}:function(...e){return Xo(t.apply(bv(this),e))}}function p9(t){return typeof t=="function"?m9(t):(t instanceof IDBTransaction&&h9(t),l9(t,c9())?new Proxy(t,gw):t)}function Xo(t){if(t instanceof IDBRequest)return d9(t);if(Sv.has(t))return Sv.get(t);const e=p9(t);return e!==t&&(Sv.set(t,e),ME.set(e,t)),e}const bv=t=>ME.get(t);function g9(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Xo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xo(o.result),l.oldVersion,l.newVersion,Xo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const y9=["get","getKey","getAll","getAllKeys","count"],v9=["put","add","delete","clear"],Av=new Map;function iA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Av.get(e))return Av.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=v9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||y9.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Av.set(e,i),i}f9(t=>({...t,get:(e,n,r)=>iA(e,n)||t.get(e,n,r),has:(e,n)=>!!iA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yw="@firebase/app",oA="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Xg("@firebase/app"),E9="@firebase/app-compat",I9="@firebase/analytics-compat",T9="@firebase/analytics",S9="@firebase/app-check-compat",b9="@firebase/app-check",A9="@firebase/auth",x9="@firebase/auth-compat",R9="@firebase/database",P9="@firebase/data-connect",C9="@firebase/database-compat",k9="@firebase/functions",D9="@firebase/functions-compat",N9="@firebase/installations",O9="@firebase/installations-compat",L9="@firebase/messaging",M9="@firebase/messaging-compat",V9="@firebase/performance",F9="@firebase/performance-compat",U9="@firebase/remote-config",j9="@firebase/remote-config-compat",$9="@firebase/storage",B9="@firebase/storage-compat",z9="@firebase/firestore",W9="@firebase/ai",q9="@firebase/firestore-compat",H9="firebase",K9="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="[DEFAULT]",G9={[yw]:"fire-core",[E9]:"fire-core-compat",[T9]:"fire-analytics",[I9]:"fire-analytics-compat",[b9]:"fire-app-check",[S9]:"fire-app-check-compat",[A9]:"fire-auth",[x9]:"fire-auth-compat",[R9]:"fire-rtdb",[P9]:"fire-data-connect",[C9]:"fire-rtdb-compat",[k9]:"fire-fn",[D9]:"fire-fn-compat",[N9]:"fire-iid",[O9]:"fire-iid-compat",[L9]:"fire-fcm",[M9]:"fire-fcm-compat",[V9]:"fire-perf",[F9]:"fire-perf-compat",[U9]:"fire-rc",[j9]:"fire-rc-compat",[$9]:"fire-gcs",[B9]:"fire-gcs-compat",[z9]:"fire-fst",[q9]:"fire-fst-compat",[W9]:"fire-vertex","fire-js":"fire-js",[H9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new Map,vw=new Map,_w=new Map;function aA(t,e){try{t.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yi(t){const e=t.name;if(_w.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;_w.set(e,t);for(const n of du.values())aA(n,t);for(const n of vw.values())aA(n,t);return!0}function jl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Q9(t,e,n=zp){jl(t,e).clearInstance(n)}function Mr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zo=new qu("app","Firebase",Y9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=K9;function VD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:zp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zo.create("bad-app-name",{appName:String(s)});if(n||(n=PD()),!n)throw Zo.create("no-options");const i=du.get(s);if(i){if(Vs(n,i.options)&&Vs(r,i.config))return i;throw Zo.create("duplicate-app",{appName:s})}const o=new r9(s);for(const l of _w.values())o.addComponent(l);const a=new J9(n,r,o);return du.set(s,a),a}function Zg(t=zp){const e=du.get(t);if(!e&&t===zp&&PD())return VD();if(!e)throw Zo.create("no-app",{appName:t});return e}async function iZ(t){let e=!1;const n=t.name;du.has(n)?(e=!0,du.delete(n)):vw.has(n)&&t.decRefCount()<=0&&(vw.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function rs(t,e,n){let r=G9[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(o.join(" "));return}yi(new Fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="firebase-heartbeat-database",Z9=1,Vh="firebase-heartbeat-store";let xv=null;function FD(){return xv||(xv=g9(X9,Z9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zo.create("idb-open",{originalErrorMessage:t.message})})),xv}async function ez(t){try{const n=(await FD()).transaction(Vh),r=await n.objectStore(Vh).get(UD(t));return await n.done,r}catch(e){if(e instanceof Bs)Hi.warn(e.message);else{const n=Zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(n.message)}}}async function lA(t,e){try{const r=(await FD()).transaction(Vh,"readwrite");await r.objectStore(Vh).put(e,UD(t)),await r.done}catch(n){if(n instanceof Bs)Hi.warn(n.message);else{const r=Zo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(r.message)}}}function UD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=1024,nz=30;class rz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>nz){const o=oz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cA(),{heartbeatsToSend:r,unsentEntries:s}=sz(this._heartbeatsCache.heartbeats),i=Bp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hi.warn(n),""}}}function cA(){return new Date().toISOString().substring(0,10)}function sz(t,e=tz){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),uA(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LE()?H5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ez(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return lA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return lA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function uA(t){return Bp(JSON.stringify({version:2,heartbeats:t})).length}function oz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(t){yi(new Fs("platform-logger",e=>new _9(e),"PRIVATE")),yi(new Fs("heartbeat",e=>new rz(e),"PRIVATE")),rs(yw,oA,t),rs(yw,oA,"esm2020"),rs("fire-js","")}az("");function jD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lz=jD,$D=new qu("auth","Firebase",jD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=new Xg("@firebase/auth");function cz(t,...e){Wp.logLevel<=dt.WARN&&Wp.warn(`Auth (${$l}): ${t}`,...e)}function zm(t,...e){Wp.logLevel<=dt.ERROR&&Wp.error(`Auth (${$l}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t,...e){throw VE(t,...e)}function ui(t,...e){return VE(t,...e)}function BD(t,e,n){const r={...lz(),[e]:n};return new qu("auth","Firebase",r).create(e,{appName:t.name})}function Vi(t){return BD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $D.create(t,...e)}function Ue(t,e,...n){if(!t)throw VE(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zm(e),new Error(e)}function Ki(t,e){t||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function zD(){return dA()==="http:"||dA()==="https:"}function dA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zD()||z5()||"connection"in navigator)?navigator.onLine:!0}function dz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ki(n>e,"Short delay should be less than long delay!"),this.isMobile=$5()||W5()}get(){return uz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e){Ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mz=new hf(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zs(t,e,n,r,s={}){return qD(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=df({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return B5()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&$s(t.emulatorConfig.host)&&(c.credentials="include"),WD.fetch()(await HD(t,t.config.apiHost,n,a),c)})}async function qD(t,e,n){t._canInitEmulator=!1;const r={...hz,...e};try{const s=new gz(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw cm(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cm(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cm(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw cm(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw BD(t,d,c);Us(t,d)}}catch(s){if(s instanceof Bs)throw s;Us(t,"network-request-failed",{message:String(s)})}}async function ff(t,e,n,r,s={}){const i=await zs(t,e,n,r,s);return"mfaPendingCredential"in i&&Us(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function HD(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?FE(t.config,s):`${t.config.apiScheme}://${s}`;return fz.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function pz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ui(this.auth,"network-request-failed")),mz.get())})}}function cm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ui(t,e,r);return s.customData._tokenResponse=n,s}function hA(t){return t!==void 0&&t.enterprise!==void 0}class yz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vz(t,e){return zs(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _z(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function Hp(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wz(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=UE(r);Ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zd(Rv(s.auth_time)),issuedAtTime:Zd(Rv(s.iat)),expirationTime:Zd(Rv(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Rv(t){return Number(t)*1e3}function UE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zm("JWT malformed, contained fewer than 3 sections"),null;try{const s=AD(n);return s?JSON.parse(s):(zm("Failed to decode base64 JWT payload"),null)}catch(s){return zm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fA(t){const e=UE(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bs&&Ez(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Ez({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zd(this.lastLoginAt),this.creationTime=Zd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await hu(t,Hp(e,{idToken:n}));Ue(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?KD(s.providerUserInfo):[],o=Sz(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ww(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Tz(t){const e=tt(t);await Kp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sz(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function KD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bz(t,e){const n=await qD(t,{},async()=>{const r=df({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await HD(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&$s(t.emulatorConfig.host)&&(l.credentials="include"),WD.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Az(t,e){return zs(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=fA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bz(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Uc;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uc,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ps{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Iz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ww(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wz(this,e)}reload(){return Tz(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ps({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject(Vi(this.auth));const e=await this.getIdToken();return await hu(this,_z(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:E,stsTokenManager:p}=n;Ue(h&&p,e,"internal-error");const y=Uc.fromJSON(this.name,p);Ue(typeof h=="string",e,"internal-error"),fo(r,e.name),fo(s,e.name),Ue(typeof f=="boolean",e,"internal-error"),Ue(typeof m=="boolean",e,"internal-error"),fo(i,e.name),fo(o,e.name),fo(a,e.name),fo(l,e.name),fo(c,e.name),fo(d,e.name);const w=new Ps({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:y,createdAt:c,lastLoginAt:d});return E&&Array.isArray(E)&&(w.providerData=E.map(_=>({..._}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Uc;s.updateFromServerResponse(n);const i=new Ps({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Kp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?KD(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Uc;a.updateFromIdToken(r);const l=new Ps({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ww(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new Map;function Di(t){Ki(t instanceof Function,"Expected a class definition");let e=mA.get(t);return e?(Ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GD.type="NONE";const Ew=GD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t,e,n){return`firebase:${t}:${e}:${n}`}class jc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Wm(this.userKey,s.apiKey,i),this.fullPersistenceKey=Wm("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hp(this.auth,{idToken:e}).catch(()=>{});return n?Ps._fromGetAccountInfoResponse(this.auth,n,e):null}return Ps._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jc(Di(Ew),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Di(Ew);const o=Wm(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Hp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Ps._fromGetAccountInfoResponse(e,f,d)}else h=Ps._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new jc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new jc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eN(e))return"Blackberry";if(tN(e))return"Webos";if(YD(e))return"Safari";if((e.includes("chrome/")||JD(e))&&!e.includes("edge/"))return"Chrome";if(ZD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QD(t=jn()){return/firefox\//i.test(t)}function YD(t=jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JD(t=jn()){return/crios\//i.test(t)}function XD(t=jn()){return/iemobile/i.test(t)}function ZD(t=jn()){return/android/i.test(t)}function eN(t=jn()){return/blackberry/i.test(t)}function tN(t=jn()){return/webos/i.test(t)}function jE(t=jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xz(t=jn()){var e;return jE(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Rz(){return q5()&&document.documentMode===10}function nN(t=jn()){return jE(t)||ZD(t)||tN(t)||eN(t)||/windows phone/i.test(t)||XD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t,e=[]){let n;switch(t){case"Browser":n=pA(jn());break;case"Worker":n=`${pA(jn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$l}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(t,e={}){return zs(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=6;class Dz{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gA(this),this.idTokenSubscription=new gA(this),this.beforeStateQueue=new Pz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$D,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await jc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hp(this,{idToken:e}),r=await Ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject(Vi(this));const n=e?tt(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cz(this),n=new Dz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Az(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Di(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await jc.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&cz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wa(t){return tt(t)}class gA{constructor(e){this.auth=e,this.observer=null,this.addObserver=J5(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ey={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oz(t){ey=t}function sN(t){return ey.loadJS(t)}function Lz(){return ey.recaptchaEnterpriseScript}function Mz(){return ey.gapiScript}function Vz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Fz{constructor(){this.enterprise=new Uz}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Uz{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jz="recaptcha-enterprise",iN="NO_RECAPTCHA";class $z{constructor(e){this.type=jz,this.auth=wa(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{vz(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new yz(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;hA(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(iN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Fz().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&hA(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Lz();l.length!==0&&(l+=a),sN(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function yA(t,e,n,r=!1,s=!1){const i=new $z(t);let o;if(s)o=iN;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Gp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await yA(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await yA(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){const n=jl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Vs(i,e??{}))return s;Us(s,"already-initialized")}return n.initialize({options:e})}function Bz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zz(t,e,n){const r=wa(t);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=aN(e),{host:o,port:a}=Wz(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(Vs(c,r.config.emulator)&&Vs(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,$s(o)?(uf(`${i}//${o}${l}`),Jg("Auth",!0)):qz()}function aN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Wz(t){const e=aN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:vA(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:vA(o)}}}function vA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function Hz(t,e){return zs(t,"POST","/v1/accounts:update",e)}async function Kz(t,e){return zs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(t,e){return ff(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}async function Qz(t,e){return zs(t,"POST","/v1/accounts:sendOobCode",Ei(t,e))}async function Yz(t,e){return Qz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(t,e){return ff(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function Xz(t,e){return ff(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends $E{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Fh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,n,"signInWithPassword",Gz);case"emailLink":return Jz(e,{email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,r,"signUpPassword",Kz);case"emailLink":return Xz(e,{idToken:n,email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t,e){return ff(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz="http://localhost";class El extends $E{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new El(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new El(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $c(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$c(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$c(e,n)}buildRequest(){const e={requestUri:Zz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=df(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tW(t){const e=Od(Ld(t)).link,n=e?Od(Ld(e)).deep_link_id:null,r=Od(Ld(t)).deep_link_id;return(r?Od(Ld(r)).link:null)||r||n||e||t}class BE{constructor(e){const n=Od(Ld(e)),r=n.apiKey??null,s=n.oobCode??null,i=eW(n.mode??null);Ue(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tW(e);try{return new BE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this.providerId=Hu.PROVIDER_ID}static credential(e,n){return Fh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=BE.parseLink(n);return Ue(r,"argument-error"),Fh._fromEmailAndCode(e,r.code,r.tenantId)}}Hu.PROVIDER_ID="password";Hu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends lN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends mf{constructor(){super("facebook.com")}static credential(e){return El._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return So.credential(e.oauthAccessToken)}catch{return null}}}So.FACEBOOK_SIGN_IN_METHOD="facebook.com";So.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends mf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return El._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bo.credential(n,r)}catch{return null}}}bo.GOOGLE_SIGN_IN_METHOD="google.com";bo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends mf{constructor(){super("github.com")}static credential(e){return El._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ao.credential(e.oauthAccessToken)}catch{return null}}}Ao.GITHUB_SIGN_IN_METHOD="github.com";Ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends mf{constructor(){super("twitter.com")}static credential(e,n){return El._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xo.credential(n,r)}catch{return null}}}xo.TWITTER_SIGN_IN_METHOD="twitter.com";xo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nW(t,e){return ff(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ps._fromIdTokenResponse(e,r,s),o=_A(r);return new Il({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_A(r);return new Il({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _A(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends Bs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qp(e,n,r,s)}}function cN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qp._fromErrorAndOperation(t,i,e,r):i})}async function rW(t,e,n=!1){const r=await hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Il._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e,n=!1){const{auth:r}=t;if(Mr(r.app))return Promise.reject(Vi(r));const s="reauthenticate";try{const i=await hu(t,cN(r,s,e,t),n);Ue(i.idToken,r,"internal-error");const o=UE(i.idToken);Ue(o,r,"internal-error");const{sub:a}=o;return Ue(t.uid===a,r,"user-mismatch"),Il._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Us(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e,n=!1){if(Mr(t.app))return Promise.reject(Vi(t));const r="signIn",s=await cN(t,r,e),i=await Il._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function sW(t,e){return dN(wa(t),e)}async function oZ(t,e){return uN(tt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(t){const e=wa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iW(t,e,n){const r=wa(t);await Gp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Yz)}async function wA(t,e,n){if(Mr(t.app))return Promise.reject(Vi(t));const r=wa(t),o=await Gp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nW).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&hN(t),l}),a=await Il._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function oW(t,e,n){return Mr(t.app)?Promise.reject(Vi(t)):sW(tt(t),Hu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t,e){return zs(t,"POST","/v1/accounts:createAuthUri",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lW(t,e){const n=zD()?qp():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await aW(tt(t),r);return s||[]}function aZ(t,e){return cW(tt(t),null,e)}async function cW(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await hu(t,Hz(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(t,e){return tt(t).setPersistence(e)}function dW(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function hW(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function fW(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function EA(t){return tt(t).signOut()}const Yp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yp,"1"),this.storage.removeItem(Yp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW=1e3,pW=10;class mN extends fN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Rz()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pW):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mN.type="LOCAL";const zE=mN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN extends fN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pN.type="SESSION";const WE=pN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ty(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await gW(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ty.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=qE("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function vW(t){di().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function _W(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function EW(){return gN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firebaseLocalStorageDb",IW=1,Jp="firebaseLocalStorage",vN="fbase_key";class pf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ny(t,e){return t.transaction([Jp],e?"readwrite":"readonly").objectStore(Jp)}function TW(){const t=indexedDB.deleteDatabase(yN);return new pf(t).toPromise()}function Iw(){const t=indexedDB.open(yN,IW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jp,{keyPath:vN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jp)?e(r):(r.close(),await TW(),e(await Iw()))})})}async function IA(t,e,n){const r=ny(t,!0).put({[vN]:e,value:n});return new pf(r).toPromise()}async function SW(t,e){const n=ny(t,!1).get(e),r=await new pf(n).toPromise();return r===void 0?null:r.value}function TA(t,e){const n=ny(t,!0).delete(e);return new pf(n).toPromise()}const bW=800,AW=3;class _N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Iw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>AW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ty._getInstance(EW()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await _W(),!this.activeServiceWorker)return;this.sender=new yW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Iw();return await IA(e,Yp,"1"),await TA(e,Yp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>SW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>TA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ny(s,!1).getAll();return new pf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_N.type="LOCAL";const xW=_N;new hf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(t,e){return e?Di(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends $E{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $c(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $c(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $c(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PW(t){return dN(t.auth,new HE(t),t.bypassAuthState)}function CW(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),uN(n,new HE(t),t.bypassAuthState)}async function kW(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),rW(n,new HE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PW;case"linkViaPopup":case"linkViaRedirect":return kW;case"reauthViaPopup":case"reauthViaRedirect":return CW;default:Us(this.auth,"internal-error")}}resolve(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW=new hf(2e3,1e4);class Sc extends wN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Sc.currentPopupAction&&Sc.currentPopupAction.cancel(),Sc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const e=qE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DW.get())};e()}}Sc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="pendingRedirect",qm=new Map;class OW extends wN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qm.get(this.auth._key());if(!e){try{const r=await LW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qm.set(this.auth._key(),e)}return this.bypassAuthState||qm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LW(t,e){const n=FW(e),r=VW(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function MW(t,e){qm.set(t._key(),e)}function VW(t){return Di(t._redirectPersistence)}function FW(t){return Wm(NW,t.config.apiKey,t.name)}async function UW(t,e,n=!1){if(Mr(t.app))return Promise.reject(Vi(t));const r=wa(t),s=RW(r,e),o=await new OW(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW=10*60*1e3;class $W{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!EN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ui(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jW&&this.cachedEventUids.clear(),this.cachedEventUids.has(SA(e))}saveEventToCache(e){this.cachedEventUids.add(SA(e)),this.lastProcessedEventTime=Date.now()}}function SA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zW(t,e={}){return zs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qW=/^https?/;async function HW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zW(t);for(const n of e)try{if(KW(n))return}catch{}Us(t,"unauthorized-domain")}function KW(t){const e=qp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!qW.test(n))return!1;if(WW.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=new hf(3e4,6e4);function bA(){const t=di().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QW(t){return new Promise((e,n)=>{var s,i,o;function r(){bA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bA(),n(ui(t,"network-request-failed"))},timeout:GW.get()})}if((i=(s=di().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=di().gapi)!=null&&o.load)r();else{const a=Vz("iframefcb");return di()[a]=()=>{gapi.load?r():n(ui(t,"network-request-failed"))},sN(`${Mz()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Hm=null,e})}let Hm=null;function YW(t){return Hm=Hm||QW(t),Hm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW=new hf(5e3,15e3),XW="__/auth/iframe",ZW="emulator/auth/iframe",eq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nq(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?FE(e,ZW):`https://${t.config.authDomain}/${XW}`,r={apiKey:e.apiKey,appName:t.name,v:$l},s=tq.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${df(r).slice(1)}`}async function rq(t){const e=await YW(t),n=di().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:nq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eq,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ui(t,"network-request-failed"),a=di().setTimeout(()=>{i(o)},JW.get());function l(){di().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iq=500,oq=600,aq="_blank",lq="http://localhost";class AA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cq(t,e,n,r=iq,s=oq){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...sq,width:r.toString(),height:s.toString(),top:i,left:o},c=jn().toLowerCase();n&&(a=JD(c)?aq:n),QD(c)&&(e=e||lq,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,E])=>`${f}${m}=${E},`,"");if(xz(c)&&a!=="_self")return uq(e||"",a),new AA(null);const h=window.open(e||"",a,d);Ue(h,t,"popup-blocked");try{h.focus()}catch{}return new AA(h)}function uq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq="__/auth/handler",hq="emulator/auth/handler",fq=encodeURIComponent("fac");async function xA(t,e,n,r,s,i){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$l,eventId:s};if(e instanceof lN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Y5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof mf){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${fq}=${encodeURIComponent(l)}`:"";return`${mq(t)}?${df(a).slice(1)}${c}`}function mq({config:t}){return t.emulator?FE(t,hq):`https://${t.authDomain}/${dq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="webStorageSupport";class pq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WE,this._completeRedirectFn=UW,this._overrideRedirectResult=MW}async _openPopup(e,n,r,s){var o;Ki((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await xA(e,n,r,qp(),s);return cq(e,i,qE())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await xA(e,n,r,qp(),s);return vW(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ki(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rq(e),r=new $W(e);return n.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pv,{type:Pv},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Pv];i!==void 0&&n(!!i),Us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nN()||YD()||jE()}}const gq=pq;var RA="@firebase/auth",PA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _q(t){yi(new Fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rN(t)},c=new Nz(r,s,i,l);return Bz(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yi(new Fs("auth-internal",e=>{const n=wa(e.getProvider("auth").getImmediate());return(r=>new yq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(RA,PA,vq(t)),rs(RA,PA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq=5*60,Eq=CD("authIdTokenMaxAge")||wq;let CA=null;const Iq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Eq)return;const s=n==null?void 0:n.token;CA!==s&&(CA=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lZ(t=Zg()){const e=jl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oN(t,{popupRedirectResolver:gq,persistence:[xW,zE,WE]}),r=CD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Iq(i.toString());hW(n,o,()=>o(n.currentUser)),dW(n,a=>o(a))}}const s=RD("auth");return s&&zz(n,`http://${s}`),n}function Tq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Oz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ui("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Tq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_q("Browser");var Sq="firebase",bq="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(Sq,bq,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq=new Map,xq={activated:!1,tokenObservers:[]},Rq={initialized:!1,enabled:!1};function js(t){return Aq.get(t)||{...xq}}function IN(){return Rq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq="https://content-firebaseappcheck.googleapis.com/v1";const Cq="exchangeDebugToken",kA={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},cZ=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new mw,this.pending.promise.catch(n=>{}),await Dq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new mw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Dq(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Uo=new qu("appCheck","AppCheck",Nq);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){if(!js(t).activated)throw Uo.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw Uo.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw Uo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Uo.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Uo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function bN(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Pq}/projects/${n}/apps/${r}:${Cq}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq="firebase-app-check-database",Lq=1,Tw="firebase-app-check-store";let um=null;function Mq(){return um||(um=new Promise((t,e)=>{try{const n=indexedDB.open(Oq,Lq);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Uo.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Tw,{keyPath:"compositeKey"})}}}catch(n){e(Uo.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),um)}function Vq(t,e){return Fq(Uq(t),e)}async function Fq(t,e){const r=(await Mq()).transaction(Tw,"readwrite"),i=r.objectStore(Tw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Uo.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function Uq(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Xg("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t,e){return LE()?Vq(t,e).catch(n=>{Md.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){return IN().enabled}async function xN(){const t=IN();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq={error:"UNKNOWN_ERROR"};function $q(t){return NE.encodeString(JSON.stringify(t),!1)}async function Sw(t,e=!1,n=!1){const r=t.app;TN(r);const s=js(r);let i=s.token,o;if(i&&!Vd(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Vd(c)?i=c:await Cv(r,void 0))}if(!e&&i&&Vd(i))return{token:i.token};let a=!1;if(AN())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=SN(bN(r,await xN()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Cv(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Md.warn(c.message):n&&Md.error(c),kv(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await js(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Md.warn(c.message):n&&Md.error(c),o=c}let l;return i?o?Vd(i)?l={token:i.token,internalError:o}:l=kv(o):(l={token:i.token},s.token=i,await Cv(r,i)):l=kv(o),a&&qq(r,l),l}async function Bq(t){const e=t.app;TN(e);const{provider:n}=js(e);if(AN()){const r=await xN(),{token:s}=await SN(bN(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function zq(t,e,n,r){const{app:s}=t,i=js(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Vd(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),DA(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>DA(t))}function RN(t,e){const n=js(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function DA(t){const{app:e}=t,n=js(e);let r=n.tokenRefresher;r||(r=Wq(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Wq(t){const{app:e}=t;return new kq(async()=>{const n=js(e);let r;if(n.token?r=await Sw(t,!0):r=await Sw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=js(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},kA.RETRIAL_MIN_WAIT,kA.RETRIAL_MAX_WAIT)}function qq(t,e){const n=js(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vd(t){return t.expireTimeMillis-Date.now()>0}function kv(t){return{token:$q(jq),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=js(this.app);for(const n of e)RN(this.app,n.next);return Promise.resolve()}}function Kq(t,e){return new Hq(t,e)}function Gq(t){return{getToken:e=>Sw(t,e),getLimitedUseToken:()=>Bq(t),addTokenListener:e=>zq(t,"INTERNAL",e),removeTokenListener:e=>RN(t.app,e)}}const Qq="@firebase/app-check",Yq="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq="app-check",NA="app-check-internal";function Xq(){yi(new Fs(Jq,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Kq(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(NA).initialize()})),yi(new Fs(NA,t=>{const e=t.getProvider("app-check").getImmediate();return Gq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),rs(Qq,Yq)}Xq();var OA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ea,PN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function R(){}R.prototype=T.prototype,A.F=T.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(C,N,O){for(var k=Array(arguments.length-2),B=2;B<arguments.length;B++)k[B-2]=arguments[B];return T.prototype[N].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,R){R||(R=0);const C=Array(16);if(typeof T=="string")for(var N=0;N<16;++N)C[N]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(N=0;N<16;++N)C[N]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=A.g[0],R=A.g[1],N=A.g[2];let O=A.g[3],k;k=T+(O^R&(N^O))+C[0]+3614090360&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(N^T&(R^N))+C[1]+3905402710&4294967295,O=T+(k<<12&4294967295|k>>>20),k=N+(R^O&(T^R))+C[2]+606105819&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(T^N&(O^T))+C[3]+3250441966&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+(O^R&(N^O))+C[4]+4118548399&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(N^T&(R^N))+C[5]+1200080426&4294967295,O=T+(k<<12&4294967295|k>>>20),k=N+(R^O&(T^R))+C[6]+2821735955&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(T^N&(O^T))+C[7]+4249261313&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+(O^R&(N^O))+C[8]+1770035416&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(N^T&(R^N))+C[9]+2336552879&4294967295,O=T+(k<<12&4294967295|k>>>20),k=N+(R^O&(T^R))+C[10]+4294925233&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(T^N&(O^T))+C[11]+2304563134&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+(O^R&(N^O))+C[12]+1804603682&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(N^T&(R^N))+C[13]+4254626195&4294967295,O=T+(k<<12&4294967295|k>>>20),k=N+(R^O&(T^R))+C[14]+2792965006&4294967295,N=O+(k<<17&4294967295|k>>>15),k=R+(T^N&(O^T))+C[15]+1236535329&4294967295,R=N+(k<<22&4294967295|k>>>10),k=T+(N^O&(R^N))+C[1]+4129170786&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(T^R))+C[6]+3225465664&4294967295,O=T+(k<<9&4294967295|k>>>23),k=N+(T^R&(O^T))+C[11]+643717713&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(N^O))+C[0]+3921069994&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(N^O&(R^N))+C[5]+3593408605&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(T^R))+C[10]+38016083&4294967295,O=T+(k<<9&4294967295|k>>>23),k=N+(T^R&(O^T))+C[15]+3634488961&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(N^O))+C[4]+3889429448&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(N^O&(R^N))+C[9]+568446438&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(T^R))+C[14]+3275163606&4294967295,O=T+(k<<9&4294967295|k>>>23),k=N+(T^R&(O^T))+C[3]+4107603335&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(N^O))+C[8]+1163531501&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(N^O&(R^N))+C[13]+2850285829&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^N&(T^R))+C[2]+4243563512&4294967295,O=T+(k<<9&4294967295|k>>>23),k=N+(T^R&(O^T))+C[7]+1735328473&4294967295,N=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(N^O))+C[12]+2368359562&4294967295,R=N+(k<<20&4294967295|k>>>12),k=T+(R^N^O)+C[5]+4294588738&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^N)+C[8]+2272392833&4294967295,O=T+(k<<11&4294967295|k>>>21),k=N+(O^T^R)+C[11]+1839030562&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^T)+C[14]+4259657740&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(R^N^O)+C[1]+2763975236&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^N)+C[4]+1272893353&4294967295,O=T+(k<<11&4294967295|k>>>21),k=N+(O^T^R)+C[7]+4139469664&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^T)+C[10]+3200236656&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(R^N^O)+C[13]+681279174&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^N)+C[0]+3936430074&4294967295,O=T+(k<<11&4294967295|k>>>21),k=N+(O^T^R)+C[3]+3572445317&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^T)+C[6]+76029189&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(R^N^O)+C[9]+3654602809&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^N)+C[12]+3873151461&4294967295,O=T+(k<<11&4294967295|k>>>21),k=N+(O^T^R)+C[15]+530742520&4294967295,N=O+(k<<16&4294967295|k>>>16),k=R+(N^O^T)+C[2]+3299628645&4294967295,R=N+(k<<23&4294967295|k>>>9),k=T+(N^(R|~O))+C[0]+4096336452&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~N))+C[7]+1126891415&4294967295,O=T+(k<<10&4294967295|k>>>22),k=N+(T^(O|~R))+C[14]+2878612391&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~T))+C[5]+4237533241&4294967295,R=N+(k<<21&4294967295|k>>>11),k=T+(N^(R|~O))+C[12]+1700485571&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~N))+C[3]+2399980690&4294967295,O=T+(k<<10&4294967295|k>>>22),k=N+(T^(O|~R))+C[10]+4293915773&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~T))+C[1]+2240044497&4294967295,R=N+(k<<21&4294967295|k>>>11),k=T+(N^(R|~O))+C[8]+1873313359&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~N))+C[15]+4264355552&4294967295,O=T+(k<<10&4294967295|k>>>22),k=N+(T^(O|~R))+C[6]+2734768916&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~T))+C[13]+1309151649&4294967295,R=N+(k<<21&4294967295|k>>>11),k=T+(N^(R|~O))+C[4]+4149444226&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~N))+C[11]+3174756917&4294967295,O=T+(k<<10&4294967295|k>>>22),k=N+(T^(O|~R))+C[2]+718787259&4294967295,N=O+(k<<15&4294967295|k>>>17),k=R+(O^(N|~T))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+O&4294967295}r.prototype.v=function(A,T){T===void 0&&(T=A.length);const R=T-this.blockSize,C=this.C;let N=this.h,O=0;for(;O<T;){if(N==0)for(;O<=R;)s(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<T;)if(C[N++]=A.charCodeAt(O++),N==this.blockSize){s(this,C),N=0;break}}else for(;O<T;)if(C[N++]=A[O++],N==this.blockSize){s(this,C),N=0;break}}this.h=N,this.o+=T},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)A[T++]=this.g[R]>>>C&255;return A};function i(A,T){var R=a;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=T(A)}function o(A,T){this.h=T;const R=[];let C=!0;for(let N=A.length-1;N>=0;N--){const O=A[N]|0;C&&O==T||(R[N]=O,C=!1)}this.g=R}var a={};function l(A){return-128<=A&&A<128?i(A,function(T){return new o([T|0],T<0?-1:0)}):new o([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(A<0)return y(c(-A));const T=[];let R=1;for(let C=0;A>=R;C++)T[C]=A/R|0,R*=4294967296;return new o(T,0)}function d(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return y(d(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(T,8));let C=h;for(let O=0;O<A.length;O+=8){var N=Math.min(8,A.length-O);const k=parseInt(A.substring(O,O+N),T);N<8?(N=c(Math.pow(T,N)),C=C.j(N).add(c(k))):(C=C.j(R),C=C.add(c(k)))}return C}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(p(this))return-y(this).m();let A=0,T=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);A+=(C>=0?C:4294967296+C)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(E(this))return"0";if(p(this))return"-"+y(this).toString(A);const T=c(Math.pow(A,6));var R=this;let C="";for(;;){const N=x(R,T).g;R=w(R,N.j(T));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=N,E(R))return O+C;for(;O.length<6;)O="0"+O;C=O+C}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function E(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function p(A){return A.h==-1}t.l=function(A){return A=w(this,A),p(A)?-1:E(A)?0:1};function y(A){const T=A.g.length,R=[];for(let C=0;C<T;C++)R[C]=~A.g[C];return new o(R,~A.h).add(f)}t.abs=function(){return p(this)?y(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),R=[];let C=0;for(let N=0;N<=T;N++){let O=C+(this.i(N)&65535)+(A.i(N)&65535),k=(O>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);C=k>>>16,O&=65535,k&=65535,R[N]=k<<16|O}return new o(R,R[R.length-1]&-2147483648?-1:0)};function w(A,T){return A.add(y(T))}t.j=function(A){if(E(this)||E(A))return h;if(p(this))return p(A)?y(this).j(y(A)):y(y(this).j(A));if(p(A))return y(this.j(y(A)));if(this.l(m)<0&&A.l(m)<0)return c(this.m()*A.m());const T=this.g.length+A.g.length,R=[];for(var C=0;C<2*T;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let N=0;N<A.g.length;N++){const O=this.i(C)>>>16,k=this.i(C)&65535,B=A.i(N)>>>16,ce=A.i(N)&65535;R[2*C+2*N]+=k*ce,_(R,2*C+2*N),R[2*C+2*N+1]+=O*ce,_(R,2*C+2*N+1),R[2*C+2*N+1]+=k*B,_(R,2*C+2*N+1),R[2*C+2*N+2]+=O*B,_(R,2*C+2*N+2)}for(A=0;A<T;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=T;A<2*T;A++)R[A]=0;return new o(R,0)};function _(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function I(A,T){this.g=A,this.h=T}function x(A,T){if(E(T))throw Error("division by zero");if(E(A))return new I(h,h);if(p(A))return T=x(y(A),T),new I(y(T.g),y(T.h));if(p(T))return T=x(A,y(T)),new I(y(T.g),T.h);if(A.g.length>30){if(p(A)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=T;C.l(A)<=0;)R=P(R),C=P(C);var N=L(R,1),O=L(C,1);for(C=L(C,2),R=L(R,2);!E(C);){var k=O.add(C);k.l(A)<=0&&(N=N.add(R),O=k),C=L(C,1),R=L(R,1)}return T=w(A,N.j(T)),new I(N,T)}for(N=h;A.l(T)>=0;){for(R=Math.max(1,Math.floor(A.m()/T.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),O=c(R),k=O.j(T);p(k)||k.l(A)>0;)R-=C,O=c(R),k=O.j(T);E(O)&&(O=f),N=N.add(O),A=w(A,k)}return new I(N,A)}t.B=function(A){return x(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)&A.i(C);return new o(R,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)|A.i(C);return new o(R,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)^A.i(C);return new o(R,this.h^A.h)};function P(A){const T=A.g.length+1,R=[];for(let C=0;C<T;C++)R[C]=A.i(C)<<1|A.i(C-1)>>>31;return new o(R,A.h)}function L(A,T){const R=T>>5;T%=32;const C=A.g.length-R,N=[];for(let O=0;O<C;O++)N[O]=T>0?A.i(O+R)>>>T|A.i(O+R+1)<<32-T:A.i(O+R);return new o(N,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ea=o}).apply(typeof OA<"u"?OA:typeof self<"u"?self:typeof window<"u"?window:{});var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CN,Fd,kN,Km,bw,DN,NN,ON;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dm=="object"&&dm];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var b=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var V=u[D];if(!(V in b))break e;b=b[V]}u=u[u.length-1],D=b[u],g=g(D),g!=D&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var b=[],D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&b.push([D,g[D]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,b){return u.call.apply(u.bind,arguments)}function c(u,g,b){return c=l,c.apply(null,arguments)}function d(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var D=b.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function h(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(D,V,W){for(var ge=Array(arguments.length-2),et=2;et<arguments.length;et++)ge[et-2]=arguments[et];return g.prototype[V].apply(D,ge)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const b=Array(g);for(let D=0;D<g;D++)b[D]=u[D];return b}return[]}function E(u,g){for(let D=1;D<arguments.length;D++){const V=arguments[D];var b=typeof V;if(b=b!="object"?b:V?Array.isArray(V)?"array":b:"null",b=="array"||b=="object"&&typeof V.length=="number"){b=u.length||0;const W=V.length||0;u.length=b+W;for(let ge=0;ge<W;ge++)u[b+ge]=V[ge]}else u.push(V)}}class p{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function y(u){o.setTimeout(()=>{throw u},0)}function w(){var u=A;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class _{constructor(){this.h=this.g=null}add(g,b){const D=I.get();D.set(g,b),this.h?this.h.next=D:this.g=D,this.h=D}}var I=new p(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let P,L=!1,A=new _,T=()=>{const u=Promise.resolve(void 0);P=()=>{u.then(R)}};function R(){for(var u;u=w();){try{u.h.call(u.g)}catch(b){y(b)}var g=I;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};o.addEventListener("test",b,g),o.removeEventListener("test",b,g)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function B(u,g){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(B,N),B.prototype.init=function(u,g){const b=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),he=0;function Se(u,g,b,D,V){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!D,this.ha=V,this.key=++he,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u,g,b){for(const D in u)g.call(b,u[D],D,u)}function X(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function we(u){const g={};for(const b in u)g[b]=u[b];return g}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(u,g){let b,D;for(let V=1;V<arguments.length;V++){D=arguments[V];for(b in D)u[b]=D[b];for(let W=0;W<Ee.length;W++)b=Ee[W],Object.prototype.hasOwnProperty.call(D,b)&&(u[b]=D[b])}}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,g,b,D,V){const W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);const ge=Ge(u,g,D,V);return ge>-1?(g=u[ge],b||(g.fa=!1)):(g=new Se(g,this.src,W,!!D,V),g.fa=b,u.push(g)),g};function j(u,g){const b=g.type;if(b in u.g){var D=u.g[b],V=Array.prototype.indexOf.call(D,g,void 0),W;(W=V>=0)&&Array.prototype.splice.call(D,V,1),W&&($(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Ge(u,g,b,D){for(let V=0;V<u.length;++V){const W=u[V];if(!W.da&&W.listener==g&&W.capture==!!b&&W.ha==D)return V}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Pn={};function zn(u,g,b,D,V){if(Array.isArray(g)){for(let W=0;W<g.length;W++)zn(u,g[W],b,D,V);return null}return b=Wn(b),u&&u[ce]?u.J(g,b,a(D)?!!D.capture:!1,V):En(u,g,b,!1,D,V)}function En(u,g,b,D,V,W){if(!g)throw Error("Invalid event type");const ge=a(V)?!!V.capture:!!V;let et=cr(u);if(et||(u[Fe]=et=new ve(u)),b=et.add(g,b,D,ge,W),b.proxy)return b;if(D=In(),b.proxy=D,D.src=u,D.listener=b,u.addEventListener)O||(V=ge),V===void 0&&(V=!1),u.addEventListener(g.toString(),D,V);else if(u.attachEvent)u.attachEvent(ft(g.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return b}function In(){function u(b){return g.call(u.src,u.listener,b)}const g=at;return u}function Cn(u,g,b,D,V){if(Array.isArray(g))for(var W=0;W<g.length;W++)Cn(u,g[W],b,D,V);else D=a(D)?!!D.capture:!!D,b=Wn(b),u&&u[ce]?(u=u.i,W=String(g).toString(),W in u.g&&(g=u.g[W],b=Ge(g,b,D,V),b>-1&&($(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[W],u.h--)))):u&&(u=cr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ge(g,b,D,V)),(b=u>-1?g[u]:null)&&kt(b))}function kt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ce])j(g.i,u);else{var b=u.type,D=u.proxy;g.removeEventListener?g.removeEventListener(b,D,u.capture):g.detachEvent?g.detachEvent(ft(b),D):g.addListener&&g.removeListener&&g.removeListener(D),(b=cr(g))?(j(b,u),b.h==0&&(b.src=null,g[Fe]=null)):$(u)}}}function ft(u){return u in Pn?Pn[u]:Pn[u]="on"+u}function at(u,g){if(u.da)u=!0;else{g=new B(g,this);const b=u.listener,D=u.ha||u.src;u.fa&&kt(u),u=b.call(D,g)}return u}function cr(u){return u=u[Fe],u instanceof ve?u:null}var _r="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wn(u){return typeof u=="function"?u:(u[_r]||(u[_r]=function(g){return u.handleEvent(g)}),u[_r])}function mt(){C.call(this),this.i=new ve(this),this.M=this,this.G=null}h(mt,C),mt.prototype[ce]=!0,mt.prototype.removeEventListener=function(u,g,b,D){Cn(this,u,g,b,D)};function Zt(u,g){var b,D=u.G;if(D)for(b=[];D;D=D.G)b.push(D);if(u=u.M,D=g.type||g,typeof g=="string")g=new N(g,u);else if(g instanceof N)g.target=g.target||u;else{var V=g;g=new N(D,u),re(g,V)}V=!0;let W,ge;if(b)for(ge=b.length-1;ge>=0;ge--)W=g.g=b[ge],V=wr(W,D,!0,g)&&V;if(W=g.g=u,V=wr(W,D,!0,g)&&V,V=wr(W,D,!1,g)&&V,b)for(ge=0;ge<b.length;ge++)W=g.g=b[ge],V=wr(W,D,!1,g)&&V}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let D=0;D<b.length;D++)$(b[D]);delete u.g[g],u.h--}}this.G=null},mt.prototype.J=function(u,g,b,D){return this.i.add(String(u),g,!1,b,D)},mt.prototype.K=function(u,g,b,D){return this.i.add(String(u),g,!0,b,D)};function wr(u,g,b,D){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let W=0;W<g.length;++W){const ge=g[W];if(ge&&!ge.da&&ge.capture==b){const et=ge.listener,Ln=ge.ha||ge.src;ge.fa&&j(u.i,ge),V=et.call(Ln,D)!==!1&&V}}return V&&!D.defaultPrevented}function no(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Pr(u){u.g=no(()=>{u.g=null,u.i&&(u.i=!1,Pr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Pa extends C{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(u){C.call(this),this.h=u,this.g={}}h(_s,C);var kn=[];function cs(u){q(u.g,function(g,b){this.g.hasOwnProperty(b)&&kt(g)},u),u.g={}}_s.prototype.N=function(){_s.Z.N.call(this),cs(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ca=o.JSON.stringify,ro=o.JSON.parse,en=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ka(){}function so(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function us(){N.call(this,"d")}h(us,N);function Ii(){N.call(this,"c")}h(Ii,N);var tr={},K=null;function z(){return K=K||new mt}tr.Ia="serverreachability";function H(u){N.call(this,tr.Ia,u)}h(H,N);function ie(u){const g=z();Zt(g,new H(g))}tr.STAT_EVENT="statevent";function Z(u,g){N.call(this,tr.STAT_EVENT,u),this.stat=g}h(Z,N);function te(u){const g=z();Zt(g,new Z(g,u))}tr.Ja="timingevent";function de(u,g){N.call(this,tr.Ja,u),this.size=g}h(de,N);function ye(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Q(){this.g=!0}Q.prototype.ua=function(){this.g=!1};function oe(u,g,b,D,V,W){u.info(function(){if(u.g)if(W){var ge="",et=W.split("&");for(let Nt=0;Nt<et.length;Nt++){var Ln=et[Nt].split("=");if(Ln.length>1){const Hn=Ln[0];Ln=Ln[1];const Hs=Hn.split("_");ge=Hs.length>=2&&Hs[1]=="type"?ge+(Hn+"="+Ln+"&"):ge+(Hn+"=redacted&")}}}else ge=null;else ge=W;return"XMLHTTP REQ ("+D+") [attempt "+V+"]: "+g+`
`+b+`
`+ge})}function se(u,g,b,D,V,W,ge){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+V+"]: "+g+`
`+b+`
`+W+" "+ge})}function ae(u,g,b,D){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+_e(u,b)+(D?" "+D:"")})}function ue(u,g){u.info(function(){return"TIMEOUT: "+g})}Q.prototype.info=function(){};function _e(u,g){if(!u.g)return g;if(!g)return null;try{const W=JSON.parse(g);if(W){for(u=0;u<W.length;u++)if(Array.isArray(W[u])){var b=W[u];if(!(b.length<2)){var D=b[1];if(Array.isArray(D)&&!(D.length<1)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(let ge=1;ge<D.length;ge++)D[ge]=""}}}}return Ca(W)}catch{return g}}var me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Me={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ze;function Tn(){}h(Tn,ka),Tn.prototype.g=function(){return new XMLHttpRequest},ze=new Tn;function Dn(u){return encodeURIComponent(String(u))}function nt(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function $e(u,g,b,D){this.j=u,this.i=g,this.l=b,this.S=D||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}var nr={},yt={};function Rt(u,g,b){u.M=1,u.A=Ze(hn(g)),u.u=b,u.R=!0,Tt(u,null)}function Tt(u,g){u.F=Date.now(),lt(u),u.B=hn(u.A);var b=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),AT(b.i,"t",D),u.C=0,b=u.j.L,u.h=new De,u.g=WT(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Pa(c(u.Y,u,u.g),u.P)),g=u.V,b=u.g,D=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(kn[0]=V.toString()),V=kn);for(let W=0;W<V.length;W++){const ge=zn(b,V[W],D||g.handleEvent,!1,g.h||g);if(!ge)break;g.g[ge.key]=ge}g=u.J?we(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ie(),oe(u.i,u.v,u.B,u.l,u.S,u.u)}$e.prototype.ba=function(u){u=u.target;const g=this.O;g&&oo(u)==3?g.j():this.Y(u)},$e.prototype.Y=function(u){try{if(u==this.g)e:{const et=oo(this.g),Ln=this.g.ya(),Nt=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||NT(this.g)))){this.K||et!=4||Ln==7||(Ln==8||Nt<=0?ie(3):ie(2)),Wt(this);var g=this.g.ca();this.X=g;var b=He(this);if(this.o=g==200,se(this.i,this.v,this.B,this.l,this.S,et,g),this.o){if(this.U&&!this.L){t:{if(this.g){var D,V=this.g;if((D=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(D)){var W=D;break t}}W=null}if(u=W)ae(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,be(this,u);else{this.o=!1,this.m=3,te(12),Sn(this),Dt(this);break e}}if(this.R){u=!0;let Hn;for(;!this.K&&this.C<b.length;)if(Hn=xe(this,b),Hn==yt){et==4&&(this.m=4,te(14),u=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==nr){this.m=4,te(15),ae(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else ae(this.i,this.l,Hn,null),be(this,Hn);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||b.length!=0||this.h.h||(this.m=1,te(16),u=!1),this.o=this.o&&u,!u)ae(this.i,this.l,b,"[Invalid Chunked Response]"),Sn(this),Dt(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Uy(ge),ge.P=!0,te(11))}}else ae(this.i,this.l,b,null),be(this,b);et==4&&Sn(this),this.o&&!this.K&&(et==4?jT(this.j,this):(this.o=!1,lt(this)))}else pV(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,te(12)):(this.m=0,te(13)),Sn(this),Dt(this)}}}catch{}finally{}};function He(u){if(!rt(u))return u.g.la();const g=NT(u.g);if(g==="")return"";let b="";const D=g.length,V=oo(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Sn(u),Dt(u),"";u.h.i=new o.TextDecoder}for(let W=0;W<D;W++)u.h.h=!0,b+=u.h.i.decode(g[W],{stream:!(V&&W==D-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function rt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function xe(u,g){var b=u.C,D=g.indexOf(`
`,b);return D==-1?yt:(b=Number(g.substring(b,D)),isNaN(b)?nr:(D+=1,D+b>g.length?yt:(g=g.slice(D,D+b),u.C=D+b,g)))}$e.prototype.cancel=function(){this.K=!0,Sn(this)};function lt(u){u.T=Date.now()+u.H,tn(u,u.H)}function tn(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ye(c(u.aa,u),g)}function Wt(u){u.D&&(o.clearTimeout(u.D),u.D=null)}$e.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ue(this.i,this.B),this.M!=2&&(ie(),te(17)),Sn(this),this.m=2,Dt(this)):tn(this,this.T-u)};function Dt(u){u.j.I==0||u.K||jT(u.j,u)}function Sn(u){Wt(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,cs(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function be(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||We(b.h,u))){if(!u.L&&We(b.h,u)&&b.I==3){try{var D=b.Ba.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var V=D;if(V[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Vf(b),Lf(b);else break e;Fy(b),te(18)}}else b.xa=V[1],0<b.xa-b.K&&V[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ye(c(b.Va,b),6e3));wt(b.h)<=1&&b.ta&&(b.ta=void 0)}else Na(b,11)}else if((u.L||b.g==u)&&Vf(b),!k(g))for(V=b.Ba.g.parse(g),g=0;g<V.length;g++){let Nt=V[g];const Hn=Nt[0];if(!(Hn<=b.K))if(b.K=Hn,Nt=Nt[1],b.I==2)if(Nt[0]=="c"){b.M=Nt[1],b.ba=Nt[2];const Hs=Nt[3];Hs!=null&&(b.ka=Hs,b.j.info("VER="+b.ka));const Oa=Nt[4];Oa!=null&&(b.za=Oa,b.j.info("SVER="+b.za));const ao=Nt[5];ao!=null&&typeof ao=="number"&&ao>0&&(D=1.5*ao,b.O=D,b.j.info("backChannelRequestTimeoutMs_="+D)),D=b;const lo=u.g;if(lo){const Uf=lo.g?lo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uf){var W=D.h;W.g||Uf.indexOf("spdy")==-1&&Uf.indexOf("quic")==-1&&Uf.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(dn(W,W.h),W.h=null))}if(D.G){const jy=lo.g?lo.g.getResponseHeader("X-HTTP-Session-Id"):null;jy&&(D.wa=jy,ut(D.J,D.G,jy))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),D=b;var ge=u;if(D.na=zT(D,D.L?D.ba:null,D.W),ge.L){Nn(D.h,ge);var et=ge,Ln=D.O;Ln&&(et.H=Ln),et.D&&(Wt(et),lt(et)),D.g=ge}else FT(D);b.i.length>0&&Mf(b)}else Nt[0]!="stop"&&Nt[0]!="close"||Na(b,7);else b.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Na(b,7):Vy(b):Nt[0]!="noop"&&b.l&&b.l.qa(Nt),b.A=0)}}ie(4)}catch{}}var Qe=class{constructor(u,g){this.g=u,this.map=g}};function Ye(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function It(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wt(u){return u.h?1:u.g?u.g.size:0}function We(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function dn(u,g){u.g?u.g.add(g):u.h=g}function Nn(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ye.prototype.cancel=function(){if(this.i=qn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function qn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return m(u.i)}var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nn(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const D=u[b].indexOf("=");let V,W=null;D>=0?(V=u[b].substring(0,D),W=u[b].substring(D+1)):V=u[b],g(V,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function rn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof rn?(this.l=u.l,kr(this,u.j),this.o=u.o,this.g=u.g,On(this,u.u),this.h=u.h,bn(this,xT(u.i)),this.m=u.m):u&&(g=String(u).match(Je))?(this.l=!1,kr(this,g[1]||"",!0),this.o=Dr(g[2]||""),this.g=Dr(g[3]||"",!0),On(this,g[4]),this.h=Dr(g[5]||"",!0),bn(this,g[6]||"",!0),this.m=Dr(g[7]||"")):(this.l=!1,this.i=new ld(null,this.l))}rn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(ad(g,IT,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ad(g,IT,!0),"@"),u.push(Dn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(ad(b,b.charAt(0)=="/"?oV:iV,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",ad(b,lV)),u.join("")},rn.prototype.resolve=function(u){const g=hn(this);let b=!!u.j;b?kr(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var D=u.h;if(b)On(g,u.u);else if(b=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var V=g.h.lastIndexOf("/");V!=-1&&(D=g.h.slice(0,V+1)+D)}if(V=D,V==".."||V==".")D="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){D=V.lastIndexOf("/",0)==0,V=V.split("/");const W=[];for(let ge=0;ge<V.length;){const et=V[ge++];et=="."?D&&ge==V.length&&W.push(""):et==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),D&&ge==V.length&&W.push("")):(W.push(et),D=!0)}D=W.join("/")}else D=V}return b?g.h=D:b=u.i.toString()!=="",b?bn(g,xT(u.i)):b=!!u.m,b&&(g.m=u.m),g};function hn(u){return new rn(u)}function kr(u,g,b){u.j=b?Dr(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function On(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function bn(u,g,b){g instanceof ld?(u.i=g,cV(u.i,u.l)):(b||(g=ad(g,aV)),u.i=new ld(g,u.l))}function ut(u,g,b){u.i.set(g,b)}function Ze(u){return ut(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Dr(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ad(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,sV),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sV(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var IT=/[#\/\?@]/g,iV=/[#\?:]/g,oV=/[#\?]/g,aV=/[#\?@]/g,lV=/#/g;function ld(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Da(u){u.g||(u.g=new Map,u.h=0,u.i&&nn(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=ld.prototype,t.add=function(u,g){Da(this),this.i=null,u=Kl(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function TT(u,g){Da(u),g=Kl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function ST(u,g){return Da(u),g=Kl(u,g),u.g.has(g)}t.forEach=function(u,g){Da(this),this.g.forEach(function(b,D){b.forEach(function(V){u.call(g,V,D,this)},this)},this)};function bT(u,g){Da(u);let b=[];if(typeof g=="string")ST(u,g)&&(b=b.concat(u.g.get(Kl(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}t.set=function(u,g){return Da(this),this.i=null,u=Kl(this,u),ST(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=bT(this,u),u.length>0?String(u[0]):g):g};function AT(u,g,b){TT(u,g),b.length>0&&(u.i=null,u.g.set(Kl(u,g),m(b)),u.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let D=0;D<g.length;D++){var b=g[D];const V=Dn(b);b=bT(this,b);for(let W=0;W<b.length;W++){let ge=V;b[W]!==""&&(ge+="="+Dn(b[W])),u.push(ge)}}return this.i=u.join("&")};function xT(u){const g=new ld;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Kl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function cV(u,g){g&&!u.j&&(Da(u),u.i=null,u.g.forEach(function(b,D){const V=D.toLowerCase();D!=V&&(TT(this,D),AT(this,V,b))},u)),u.j=g}function uV(u,g){const b=new Q;if(o.Image){const D=new Image;D.onload=d(io,b,"TestLoadImage: loaded",!0,g,D),D.onerror=d(io,b,"TestLoadImage: error",!1,g,D),D.onabort=d(io,b,"TestLoadImage: abort",!1,g,D),D.ontimeout=d(io,b,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else g(!1)}function dV(u,g){const b=new Q,D=new AbortController,V=setTimeout(()=>{D.abort(),io(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:D.signal}).then(W=>{clearTimeout(V),W.ok?io(b,"TestPingServer: ok",!0,g):io(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),io(b,"TestPingServer: error",!1,g)})}function io(u,g,b,D,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),D(b)}catch{}}function hV(){this.g=new en}function Ly(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Ly,ka),Ly.prototype.g=function(){return new Nf(this.i,this.h)};function Nf(u,g){mt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Nf,mt),t=Nf.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,ud(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cd(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ud(this)),this.g&&(this.readyState=3,ud(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;RT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function RT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?cd(this):ud(this),this.readyState==3&&RT(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,cd(this))},t.Na=function(u){this.g&&(this.response=u,cd(this))},t.ga=function(){this.g&&cd(this)};function cd(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ud(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function ud(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function PT(u){let g="";return q(u,function(b,D){g+=D,g+=":",g+=b,g+=`\r
`}),g}function My(u,g,b){e:{for(D in b){var D=!1;break e}D=!0}D||(b=PT(b),typeof u=="string"?b!=null&&Dn(b):ut(u,g,b))}function fn(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(fn,mt);var fV=/^https?$/i,mV=["POST","PUT"];t=fn.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,b,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ze.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(W){CT(this,W);return}if(u=b||"",b=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var V in D)b.set(V,D[V]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const W of D.keys())b.set(W,D.get(W));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),V=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(mV,g,void 0)>=0)||D||V||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ge]of b)this.g.setRequestHeader(W,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(W){CT(this,W)}};function CT(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,kT(u),Of(u)}function kT(u){u.A||(u.A=!0,Zt(u,"complete"),Zt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Zt(this,"complete"),Zt(this,"abort"),Of(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Of(this,!0)),fn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?DT(this):this.Xa())},t.Xa=function(){DT(this)};function DT(u){if(u.h&&typeof i<"u"){if(u.v&&oo(u)==4)setTimeout(u.Ca.bind(u),0);else if(Zt(u,"readystatechange"),oo(u)==4){u.h=!1;try{const W=u.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var D;if(D=W===0){let ge=String(u.D).match(Je)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),D=!fV.test(ge?ge.toLowerCase():"")}b=D}if(b)Zt(u,"complete"),Zt(u,"success");else{u.o=6;try{var V=oo(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",kT(u)}}finally{Of(u)}}}}function Of(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||Zt(u,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function oo(u){return u.g?u.g.readyState:0}t.ca=function(){try{return oo(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ro(g)}};function NT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pV(u){const g={};u=(u.g&&oo(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(k(u[D]))continue;var b=nt(u[D]);const V=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=g[V]||[];g[V]=W,W.push(b)}X(g,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function dd(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function OT(u){this.za=0,this.i=[],this.j=new Q,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=dd("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=dd("baseRetryDelayMs",5e3,u),this.Za=dd("retryDelaySeedMs",1e4,u),this.Ta=dd("forwardChannelMaxRetries",2,u),this.va=dd("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ye(u&&u.concurrentRequestLimit),this.Ba=new hV,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=OT.prototype,t.ka=8,t.I=1,t.connect=function(u,g,b,D){te(0),this.W=u,this.H=g||{},b&&D!==void 0&&(this.H.OSID=b,this.H.OAID=D),this.F=this.X,this.J=zT(this,null,this.W),Mf(this)};function Vy(u){if(LT(u),u.I==3){var g=u.V++,b=hn(u.J);if(ut(b,"SID",u.M),ut(b,"RID",g),ut(b,"TYPE","terminate"),hd(u,b),g=new $e(u,u.j,g),g.M=2,g.A=Ze(hn(b)),b=!1,o.navigator&&o.navigator.sendBeacon)try{b=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&o.Image&&(new Image().src=g.A,b=!0),b||(g.g=WT(g.j,null),g.g.ea(g.A)),g.F=Date.now(),lt(g)}BT(u)}function Lf(u){u.g&&(Uy(u),u.g.cancel(),u.g=null)}function LT(u){Lf(u),u.v&&(o.clearTimeout(u.v),u.v=null),Vf(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Mf(u){if(!It(u.h)&&!u.m){u.m=!0;var g=u.Ea;P||T(),L||(P(),L=!0),A.add(g,u),u.D=0}}function gV(u,g){return wt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ye(c(u.Ea,u,g),$T(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new $e(this,this.j,u);let W=this.o;if(this.U&&(W?(W=we(W),re(W,this.U)):W=this.U),this.u!==null||this.R||(V.J=W,W=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var D=this.i[b];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=VT(this,V,g),b=hn(this.J),ut(b,"RID",u),ut(b,"CVER",22),this.G&&ut(b,"X-HTTP-Session-Id",this.G),hd(this,b),W&&(this.R?g="headers="+Dn(PT(W))+"&"+g:this.u&&My(b,this.u,W)),dn(this.h,V),this.Ra&&ut(b,"TYPE","init"),this.S?(ut(b,"$req",g),ut(b,"SID","null"),V.U=!0,Rt(V,b,null)):Rt(V,b,g),this.I=2}}else this.I==3&&(u?MT(this,u):this.i.length==0||It(this.h)||MT(this))};function MT(u,g){var b;g?b=g.l:b=u.V++;const D=hn(u.J);ut(D,"SID",u.M),ut(D,"RID",b),ut(D,"AID",u.K),hd(u,D),u.u&&u.o&&My(D,u.u,u.o),b=new $e(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=VT(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),dn(u.h,b),Rt(b,D,g)}function hd(u,g){u.H&&q(u.H,function(b,D){ut(g,D,b)}),u.l&&q({},function(b,D){ut(g,D,b)})}function VT(u,g,b){b=Math.min(u.i.length,b);const D=u.l?c(u.l.Ka,u.l,u):null;e:{var V=u.i;let et=-1;for(;;){const Ln=["count="+b];et==-1?b>0?(et=V[0].g,Ln.push("ofs="+et)):et=0:Ln.push("ofs="+et);let Nt=!0;for(let Hn=0;Hn<b;Hn++){var W=V[Hn].g;const Hs=V[Hn].map;if(W-=et,W<0)et=Math.max(0,V[Hn].g-100),Nt=!1;else try{W="req"+W+"_"||"";try{var ge=Hs instanceof Map?Hs:Object.entries(Hs);for(const[Oa,ao]of ge){let lo=ao;a(ao)&&(lo=Ca(ao)),Ln.push(W+Oa+"="+encodeURIComponent(lo))}}catch(Oa){throw Ln.push(W+"type="+encodeURIComponent("_badmap")),Oa}}catch{D&&D(Hs)}}if(Nt){ge=Ln.join("&");break e}}ge=void 0}return u=u.i.splice(0,b),g.G=u,ge}function FT(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;P||T(),L||(P(),L=!0),A.add(g,u),u.A=0}}function Fy(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ye(c(u.Da,u),$T(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,UT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ye(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,te(10),Lf(this),UT(this))};function Uy(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function UT(u){u.g=new $e(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=hn(u.na);ut(g,"RID","rpc"),ut(g,"SID",u.M),ut(g,"AID",u.K),ut(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ut(g,"TO",u.ia),ut(g,"TYPE","xmlhttp"),hd(u,g),u.u&&u.o&&My(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Ze(hn(g)),b.u=null,b.R=!0,Tt(b,u)}t.Va=function(){this.C!=null&&(this.C=null,Lf(this),Fy(this),te(19))};function Vf(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function jT(u,g){var b=null;if(u.g==g){Vf(u),Uy(u),u.g=null;var D=2}else if(We(u.h,g))b=g.G,Nn(u.h,g),D=1;else return;if(u.I!=0){if(g.o)if(D==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var V=u.D;D=z(),Zt(D,new de(D,b)),Mf(u)}else FT(u);else if(V=g.m,V==3||V==0&&g.X>0||!(D==1&&gV(u,g)||D==2&&Fy(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),V){case 1:Na(u,5);break;case 4:Na(u,10);break;case 3:Na(u,6);break;default:Na(u,2)}}}function $T(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Na(u,g){if(u.j.info("Error code "+g),g==2){var b=c(u.bb,u),D=u.Ua;const V=!D;D=new rn(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||kr(D,"https"),Ze(D),V?uV(D.toString(),b):dV(D.toString(),b)}else te(2);u.I=0,u.l&&u.l.pa(g),BT(u),LT(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),te(2)):(this.j.info("Failed to ping google.com"),te(1))};function BT(u){if(u.I=0,u.ja=[],u.l){const g=qn(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ja,g),E(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function zT(u,g,b){var D=b instanceof rn?hn(b):new rn(b);if(D.g!="")g&&(D.g=g+"."+D.g),On(D,D.u);else{var V=o.location;D=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const W=new rn(null);D&&kr(W,D),g&&(W.g=g),V&&On(W,V),b&&(W.h=b),D=W}return b=u.G,g=u.wa,b&&g&&ut(D,b,g),ut(D,"VER",u.ka),hd(u,D),D}function WT(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new fn(new Ly({ab:b})):new fn(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qT(){}t=qT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ff(){}Ff.prototype.g=function(u,g){return new Gr(u,g)};function Gr(u,g){mt.call(this),this.g=new OT(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Gl(this)}h(Gr,mt),Gr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gr.prototype.close=function(){Vy(this.g)},Gr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Ca(u),u=b);g.i.push(new Qe(g.Ya++,u)),g.I==3&&Mf(g)},Gr.prototype.N=function(){this.g.l=null,delete this.j,Vy(this.g),delete this.g,Gr.Z.N.call(this)};function HT(u){us.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(HT,us);function KT(){Ii.call(this),this.status=1}h(KT,Ii);function Gl(u){this.g=u}h(Gl,qT),Gl.prototype.ra=function(){Zt(this.g,"a")},Gl.prototype.qa=function(u){Zt(this.g,new HT(u))},Gl.prototype.pa=function(u){Zt(this.g,new KT)},Gl.prototype.oa=function(){Zt(this.g,"b")},Ff.prototype.createWebChannel=Ff.prototype.g,Gr.prototype.send=Gr.prototype.o,Gr.prototype.open=Gr.prototype.m,Gr.prototype.close=Gr.prototype.close,ON=function(){return new Ff},NN=function(){return z()},DN=tr,bw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,Km=me,Me.COMPLETE="complete",kN=Me,so.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Fd=so,fn.prototype.listenOnce=fn.prototype.K,fn.prototype.getLastError=fn.prototype.Ha,fn.prototype.getLastErrorCode=fn.prototype.ya,fn.prototype.getStatus=fn.prototype.ca,fn.prototype.getResponseJson=fn.prototype.La,fn.prototype.getResponseText=fn.prototype.la,fn.prototype.send=fn.prototype.ea,fn.prototype.setWithCredentials=fn.prototype.Fa,CN=fn}).apply(typeof dm<"u"?dm:typeof self<"u"?self:typeof window<"u"?window:{});const LA="@firebase/firestore",MA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new Xg("@firebase/firestore");function ac(){return la.logLevel}function LN(t){la.setLogLevel(t)}function ee(t,...e){if(la.logLevel<=dt.DEBUG){const n=e.map(KE);la.debug(`Firestore (${Ku}): ${t}`,...n)}}function yn(t,...e){if(la.logLevel<=dt.ERROR){const n=e.map(KE);la.error(`Firestore (${Ku}): ${t}`,...n)}}function is(t,...e){if(la.logLevel<=dt.WARN){const n=e.map(KE);la.warn(`Firestore (${Ku}): ${t}`,...n)}}function KE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,MN(t,r,n)}function MN(t,e,n){let r=`FIRESTORE (${Ku}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw yn(r),new Error(r)}function Re(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||MN(e,s,r)}function Zq(t,e){t||Te(57014,e)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jn.UNAUTHENTICATED))}shutdown(){}}class e8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class t8{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new er,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new VN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class n8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class r8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new n8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Aw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Re(this.o===void 0,3512);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Aw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Aw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class i8{getToken(){return Promise.resolve(new Aw(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=o8(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function xw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Dv(s)===Dv(i)?je(s,i):Dv(s)?1:-1}return je(t.length,e.length)}const a8=55296,l8=57343;function Dv(t){const e=t.charCodeAt(0);return e>=a8&&e<=l8}function fu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function UN(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="__name__";class Qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Qs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return je(e.length,n.length)}static compareSegments(e,n){const r=Qs.isNumericId(e),s=Qs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Qs.extractNumericId(e).compare(Qs.extractNumericId(n)):xw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class it extends Qs{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new it(n)}static emptyPath(){return new it([])}}const c8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Qs{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return c8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rw}static keyField(){return new $t([Rw])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new J(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new J(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(it.fromString(e))}static fromName(e){return new fe(it.fromString(e).popFirst(5))}static empty(){return new fe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e,n){if(!n)throw new J(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jN(t,e,n,r){if(e===!0&&r===!0)throw new J(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VA(t){if(!fe.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FA(t){if(fe.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $N(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sy(t);throw new J(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BN(t,e){if(e<=0)throw new J(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Bl(t,e){if(!$N(t))throw new J(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new J(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=-62135596800,jA=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jA);return new _t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<UA)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jA}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bl(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Rn("string",_t._jsonSchemaVersion),seconds:Rn("number"),nanoseconds:Rn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new _t(0,0))}static max(){return new Ne(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;class pu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Pw(t){return t.fields.find(e=>e.kind===2)}function Ua(t){return t.fields.filter(e=>e.kind!==2)}function u8(t,e){let n=je(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=d8(t.fields[r],e.fields[r]),n!==0)return n;return je(t.fields.length,e.fields.length)}pu.UNKNOWN_ID=-1;class ul{constructor(e,n){this.fieldPath=e,this.kind=n}}function d8(t,e){const n=$t.comparator(t.fieldPath,e.fieldPath);return n!==0?n:je(t.kind,e.kind)}class gu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new gu(0,os.min())}}function zN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new os(s,fe.empty(),e)}function WN(t){return new os(t.readTime,t.key,mu)}class os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new os(Ne.min(),fe.empty(),mu)}static max(){return new os(Ne.max(),fe.empty(),mu)}}function QE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==qN)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="SimpleDb";class iy{static open(e,n,r,s){try{return new iy(n,e.transaction(s,r))}catch(i){throw new eh(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new er,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new eh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=YE(r.target.error);this.S.reject(new eh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new f8(n)}}class hi{static delete(e){return ee(Yr,"Removing database:",e),Ba(xD().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!LE())return!1;if(hi.F())return!0;const e=jn(),n=hi.M(e),r=0<n&&n<10,s=KN(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,hi.M(jn())===12.2&&yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Yr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new eh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new J(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new J(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new eh(e,o))},s.onupgradeneeded=i=>{ee(Yr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{ee(Yr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=iy.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ee(Yr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function KN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class h8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ba(this.U.delete())}}class eh extends J{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ia(t){return t.name==="IndexedDbTransactionError"}class f8{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ee(Yr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee(Yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ba(r)}add(e){return ee(Yr,"ADD",this.store.name,e,e),Ba(this.store.add(e))}get(e){return Ba(this.store.get(e)).next(n=>(n===void 0&&(n=null),ee(Yr,"GET",this.store.name,e,n),n))}delete(e){return ee(Yr,"DELETE",this.store.name,e),Ba(this.store.delete(e))}count(){return ee(Yr,"COUNT",this.store.name),Ba(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){ee(Yr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=YE(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new h8(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ba(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=YE(r.target.error);n(s)}})}let $A=!1;function YE(t){const e=hi.M(jn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $A||($A=!0,setTimeout(()=>{throw r},0)),r}}return t}const th="IndexBackfiller";class m8{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(th,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();ee(th,`Documents written: ${n}`)}catch(n){Ia(n)?ee(th,"Ignoring IndexedDB error during index backfill: ",n):await Ea(n)}await this.re(6e4)})}}class p8{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return ee(th,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(ee(th,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=WN(i);QE(o,r)>0&&(r=o)}),new os(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ur.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=-1;function gf(t){return t==null}function Uh(t){return t===0&&1/t==-1/0}function GN(t){return typeof t=="number"&&Number.isInteger(t)&&!Uh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="";function gr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=BA(e)),e=g8(t.get(n),e);return BA(e)}function g8(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Xp:n+="";break;default:n+=i}}return n}function BA(t){return t+Xp+""}function si(t){const e=t.length;if(Re(e>=2,64408,{path:t}),e===2)return Re(t.charAt(0)===Xp&&t.charAt(1)==="",56145,{path:t}),it.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Xp,i);switch((o<0||o>n)&&Te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Te(61167,{path:t})}i=o+2}return new it(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="remoteDocuments",yf="owner",Yl="owner",jh="mutationQueues",y8="userId",As="mutations",zA="batchId",el="userMutationsIndex",WA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){return[t,gr(e)]}function QN(t,e,n){return[t,gr(e),n]}const v8={},yu="documentMutations",Zp="remoteDocumentsV14",_8=["prefixPath","collectionGroup","readTime","documentId"],Qm="documentKeyIndex",w8=["prefixPath","collectionGroup","documentId"],YN="collectionGroupIndex",E8=["collectionGroup","readTime","prefixPath","documentId"],$h="remoteDocumentGlobal",Cw="remoteDocumentGlobalKey",vu="targets",JN="queryTargetsIndex",I8=["canonicalId","targetId"],_u="targetDocuments",T8=["targetId","path"],JE="documentTargetsIndex",S8=["path","targetId"],eg="targetGlobalKey",dl="targetGlobal",Bh="collectionParents",b8=["collectionId","parent"],wu="clientMetadata",A8="clientId",oy="bundles",x8="bundleId",ay="namedQueries",R8="name",XE="indexConfiguration",P8="indexId",kw="collectionGroupIndex",C8="collectionGroup",nh="indexState",k8=["indexId","uid"],XN="sequenceNumberIndex",D8=["uid","sequenceNumber"],rh="indexEntries",N8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZN="documentKeyIndex",O8=["indexId","uid","orderedDocumentKey"],ly="documentOverlays",L8=["userId","collectionPath","documentId"],Dw="collectionPathOverlayIndex",M8=["userId","collectionPath","largestBatchId"],eO="collectionGroupOverlayIndex",V8=["userId","collectionGroup","largestBatchId"],ZE="globals",F8="name",tO=[jh,As,yu,ja,vu,yf,dl,_u,wu,$h,Bh,oy,ay],U8=[...tO,ly],nO=[jh,As,yu,Zp,vu,yf,dl,_u,wu,$h,Bh,oy,ay,ly],rO=nO,eI=[...rO,XE,nh,rh],j8=eI,sO=[...eI,ZE],$8=sO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends HN{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Bn(t,e){const n=pe(t);return hi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iO(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function oO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.comparator=e,this.root=n||sr.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hm(this.root,e,this.comparator,!1)}getReverseIterator(){return new hm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hm(this.root,e,this.comparator,!0)}}class hm{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??sr.RED,this.left=s??sr.EMPTY,this.right=i??sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new sr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return sr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new HA(this.data.getIterator())}getIteratorFrom(e){return new HA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class HA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new jr([])}unionWith(e){let n=new xt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aO("Invalid base64 string: "+i):i}}(e);return new cn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const z8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(Re(!!t,39018),typeof t=="string"){let e=0;const n=z8.exec(t);if(Re(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qi(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="server_timestamp",cO="__type__",uO="__previous_value__",dO="__local_write_time__";function cy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cO])==null?void 0:r.stringValue)===lO}function uy(t){const e=t.mapValue.fields[uO];return cy(e)?uy(e):e}function zh(t){const e=Gi(t.mapValue.fields[dO].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Wh="(default)";class ca{constructor(e,n){this.projectId=e,this.database=n||Wh}static empty(){return new ca("","")}get isDefaultDatabase(){return this.database===Wh}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="__type__",hO="__max__",jo={mapValue:{fields:{__type__:{stringValue:hO}}}},nI="__vector__",Eu="value",Ym={nullValue:"NULL_VALUE"};function ua(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cy(t)?4:fO(t)?9007199254740991:dy(t)?10:11:Te(28295,{value:t})}function vi(t,e){if(t===e)return!0;const n=ua(t);if(n!==ua(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zh(t).isEqual(zh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Gi(s.timestampValue),a=Gi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qi(s.bytesValue).isEqual(Qi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ht(s.geoPointValue.latitude)===Ht(i.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ht(s.integerValue)===Ht(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ht(s.doubleValue),a=Ht(i.doubleValue);return o===a?Uh(o)===Uh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fu(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(qA(o)!==qA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vi(o[l],a[l])))return!1;return!0}(t,e);default:return Te(52216,{left:t})}}function qh(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function da(t,e){if(t===e)return 0;const n=ua(t),r=ua(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ht(i.integerValue||i.doubleValue),l=Ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return KA(t.timestampValue,e.timestampValue);case 4:return KA(zh(t),zh(e));case 5:return xw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Qi(i),l=Qi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=je(a[c],l[c]);if(d!==0)return d}return je(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=je(Ht(i.latitude),Ht(o.latitude));return a!==0?a:je(Ht(i.longitude),Ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return GA(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,E,p;const a=i.fields||{},l=o.fields||{},c=(f=a[Eu])==null?void 0:f.arrayValue,d=(m=l[Eu])==null?void 0:m.arrayValue,h=je(((E=c==null?void 0:c.values)==null?void 0:E.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:GA(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===jo.mapValue&&o===jo.mapValue)return 0;if(i===jo.mapValue)return 1;if(o===jo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=xw(l[h],d[h]);if(f!==0)return f;const m=da(a[l[h]],c[d[h]]);if(m!==0)return m}return je(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function KA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Gi(t),r=Gi(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function GA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=da(n[s],r[s]);if(i)return i}return je(n.length,r.length)}function Iu(t){return Ow(t)}function Ow(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ow(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ow(n.fields[o])}`;return s+"}"}(t.mapValue):Te(61005,{value:t})}function Jm(t){switch(ua(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uy(t);return e?16+Jm(e):16;case 5:return 2*t.stringValue.length;case 6:return Qi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Jm(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ta(r.fields,(i,o)=>{s+=i.length+Jm(o)}),s}(t.mapValue);default:throw Te(13486,{value:t})}}function Tl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lw(t){return!!t&&"integerValue"in t}function Hh(t){return!!t&&"arrayValue"in t}function QA(t){return!!t&&"nullValue"in t}function YA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xm(t){return!!t&&"mapValue"in t}function dy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tI])==null?void 0:r.stringValue)===nI}function sh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ta(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sh(t.arrayValue.values[n]);return e}return{...t}}function fO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hO}const mO={mapValue:{fields:{[tI]:{stringValue:nI},[Eu]:{arrayValue:{}}}}};function q8(t){return"nullValue"in t?Ym:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Tl(ca.empty(),fe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?dy(t)?mO:{mapValue:{}}:Te(35942,{value:t})}function H8(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Tl(ca.empty(),fe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?mO:"mapValue"in t?dy(t)?{mapValue:{}}:jo:Te(61959,{value:t})}function JA(t,e){const n=da(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function XA(t,e){const n=da(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(n)}setAll(e){let n=$t.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=sh(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Xm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ta(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ir(sh(this.value))}}function pO(t){const e=[];return Ta(t.fields,(n,r)=>{const s=new $t([n]);if(Xm(r)){const i=pO(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,Ne.min(),Ne.min(),Ne.min(),ir.empty(),0)}static newFoundDocument(e,n,r,s){return new jt(e,1,n,Ne.min(),r,s,0)}static newNoDocument(e,n){return new jt(e,2,n,Ne.min(),Ne.min(),ir.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,Ne.min(),Ne.min(),ir.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.position=e,this.inclusive=n}}function ZA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=da(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ex(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n="asc"){this.field=e,this.dir=n}}function K8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{}class ht extends gO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new G8(e,n,r):n==="array-contains"?new J8(e,r):n==="in"?new IO(e,r):n==="not-in"?new X8(e,r):n==="array-contains-any"?new Z8(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Q8(e,r):new Y8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(da(n,this.value)):n!==null&&ua(this.value)===ua(n)&&this.matchesComparison(da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends gO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new St(e,n)}matches(e){return Tu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tu(t){return t.op==="and"}function Mw(t){return t.op==="or"}function rI(t){return yO(t)&&Tu(t)}function yO(t){for(const e of t.filters)if(e instanceof St)return!1;return!0}function Vw(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Iu(t.value);if(rI(t))return t.filters.map(e=>Vw(e)).join(",");{const e=t.filters.map(n=>Vw(n)).join(",");return`${t.op}(${e})`}}function vO(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&vi(r.value,s.value)}(t,e):t instanceof St?function(r,s){return s instanceof St&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&vO(o,s.filters[a]),!0):!1}(t,e):void Te(19439)}function _O(t,e){const n=t.filters.concat(e);return St.create(n,t.op)}function wO(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Iu(n.value)}`}(t):t instanceof St?function(n){return n.op.toString()+" {"+n.getFilters().map(wO).join(" ,")+"}"}(t):"Filter"}class G8 extends ht{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Q8 extends ht{constructor(e,n){super(e,"in",n),this.keys=EO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Y8 extends ht{constructor(e,n){super(e,"not-in",n),this.keys=EO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function EO(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class J8 extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hh(n)&&qh(n.arrayValue,this.value)}}class IO extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qh(this.value.arrayValue,n)}}class X8 extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qh(this.value.arrayValue,n)}}class Z8 extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Fw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new e7(t,e,n,r,s,i,o)}function Sl(t){const e=pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Iu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Iu(r)).join(",")),e.Te=n}return e.Te}function vf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ex(t.startAt,e.startAt)&&ex(t.endAt,e.endAt)}function tg(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ng(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function tx(t,e,n){let r=Ym,s=!0;for(const i of ng(t,e)){let o=Ym,a=!0;switch(i.op){case"<":case"<=":o=q8(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Ym}JA({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];JA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function nx(t,e,n){let r=jo,s=!0;for(const i of ng(t,e)){let o=jo,a=!0;switch(i.op){case">=":case">":o=H8(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=jo}XA({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];XA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TO(t,e,n,r,s,i,o,a){return new Xi(t,e,n,r,s,i,o,a)}function Gu(t){return new Xi(t)}function rx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sI(t){return t.collectionGroup!==null}function Bc(t){const e=pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt($t.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Kh(i,r))}),n.has($t.keyField().canonicalString())||e.Ie.push(new Kh($t.keyField(),r))}return e.Ie}function yr(t){const e=pe(t);return e.Ee||(e.Ee=bO(e,Bc(t))),e.Ee}function SO(t){const e=pe(t);return e.de||(e.de=bO(e,t.explicitOrderBy)),e.de}function bO(t,e){if(t.limitType==="F")return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Kh(s.field,i)});const n=t.endAt?new ha(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ha(t.startAt.position,t.startAt.inclusive):null;return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uw(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rg(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _f(t,e){return vf(yr(t),yr(e))&&t.limitType===e.limitType}function AO(t){return`${Sl(yr(t))}|lt:${t.limitType}`}function lc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>wO(s)).join(", ")}]`),gf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Iu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Iu(s)).join(",")),`Target(${r})`}(yr(t))}; limitType=${t.limitType})`}function wf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ZA(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Bc(r),s)||r.endAt&&!function(o,a,l){const c=ZA(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Bc(r),s))}(t,e)}function xO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RO(t){return(e,n)=>{let r=!1;for(const s of Bc(t)){const i=t7(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function t7(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?da(l,c):Te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return oO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7=new Vt(fe.comparator);function $r(){return n7}const PO=new Vt(fe.comparator);function Ud(...t){let e=PO;for(const n of t)e=e.insert(n.key,n);return e}function CO(t){let e=PO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ii(){return ih()}function kO(){return ih()}function ih(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const r7=new Vt(fe.comparator),s7=new xt(fe.comparator);function Ke(...t){let e=s7;for(const n of t)e=e.add(n);return e}const i7=new xt(je);function iI(){return i7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function DO(t){return{integerValue:""+t}}function NO(t,e){return GN(e)?DO(e):oI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this._=void 0}}function o7(t,e,n){return t instanceof Su?function(s,i){const o={fields:{[cO]:{stringValue:lO},[dO]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cy(i)&&(i=uy(i)),i&&(o.fields[uO]=i),{mapValue:o}}(n,e):t instanceof bl?LO(t,e):t instanceof Al?MO(t,e):function(s,i){const o=OO(s,i),a=sx(o)+sx(s.Ae);return Lw(o)&&Lw(s.Ae)?DO(a):oI(s.serializer,a)}(t,e)}function a7(t,e,n){return t instanceof bl?LO(t,e):t instanceof Al?MO(t,e):n}function OO(t,e){return t instanceof bu?function(r){return Lw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Su extends hy{}class bl extends hy{constructor(e){super(),this.elements=e}}function LO(t,e){const n=VO(e);for(const r of t.elements)n.some(s=>vi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Al extends hy{constructor(e){super(),this.elements=e}}function MO(t,e){let n=VO(e);for(const r of t.elements)n=n.filter(s=>!vi(s,r));return{arrayValue:{values:n}}}class bu extends hy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function sx(t){return Ht(t.integerValue||t.doubleValue)}function VO(t){return Hh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.field=e,this.transform=n}}function l7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof bl&&s instanceof bl||r instanceof Al&&s instanceof Al?fu(r.elements,s.elements,vi):r instanceof bu&&s instanceof bu?vi(r.Ae,s.Ae):r instanceof Su&&s instanceof Su}(t.transform,e.transform)}class c7{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fy{}function FO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yu(t.key,Gt.none()):new Qu(t.key,t.data,Gt.none());{const n=t.data,r=ir.empty();let s=new xt($t.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new eo(t.key,r,new jr(s.toArray()),Gt.none())}}function u7(t,e,n){t instanceof Qu?function(s,i,o){const a=s.value.clone(),l=ox(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof eo?function(s,i,o){if(!Zm(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ox(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(UO(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oh(t,e,n,r){return t instanceof Qu?function(i,o,a,l){if(!Zm(i.precondition,o))return a;const c=i.value.clone(),d=ax(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof eo?function(i,o,a,l){if(!Zm(i.precondition,o))return a;const c=ax(i.fieldTransforms,l,o),d=o.data;return d.setAll(UO(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Zm(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function d7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=OO(r.transform,s||null);i!=null&&(n===null&&(n=ir.empty()),n.set(r.field,i))}return n||null}function ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&fu(r,s,(i,o)=>l7(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qu extends fy{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class eo extends fy{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function UO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ox(t,e,n){const r=new Map;Re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,a7(o,a,n[s]))}return r}function ax(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,o7(i,o,e))}return r}class Yu extends fy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aI extends fy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&u7(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kO();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=FO(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,(n,r)=>ix(n,r))&&fu(this.baseMutations,e.baseMutations,(n,r)=>ix(n,r))}}class cI{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return r7}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cI(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,gt;function $O(t){switch(t){case U.OK:return Te(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function BO(t){if(t===void 0)return yn("GRPC error has no .code"),U.UNKNOWN;switch(t){case An.OK:return U.OK;case An.CANCELLED:return U.CANCELLED;case An.UNKNOWN:return U.UNKNOWN;case An.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case An.INTERNAL:return U.INTERNAL;case An.UNAVAILABLE:return U.UNAVAILABLE;case An.UNAUTHENTICATED:return U.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case An.NOT_FOUND:return U.NOT_FOUND;case An.ALREADY_EXISTS:return U.ALREADY_EXISTS;case An.PERMISSION_DENIED:return U.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case An.ABORTED:return U.ABORTED;case An.OUT_OF_RANGE:return U.OUT_OF_RANGE;case An.UNIMPLEMENTED:return U.UNIMPLEMENTED;case An.DATA_LOSS:return U.DATA_LOSS;default:return Te(39323,{code:t})}}(gt=An||(An={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new ea([4294967295,4294967295],0);function lx(t){const e=zO().encode(t),n=new PN;return n.update(e),new Uint8Array(n.digest())}function cx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ea([n,r],0),new ea([s,i],0)]}class dI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jd(`Invalid padding: ${n}`);if(r<0)throw new jd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ea.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ea.fromNumber(r)));return s.compare(f7)===1&&(s=new ea([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lx(e),[r,s]=cx(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dI(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=lx(e),[r,s]=cx(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class jd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Tf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new If(Ne.min(),s,new Vt(je),$r(),Ke())}}class Tf{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tf(r,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class WO{constructor(e,n){this.targetId=e,this.Ce=n}}class qO{constructor(e,n,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ux{constructor(){this.ve=0,this.Fe=dx(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),n=Ke(),r=Ke();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:i})}}),new Tf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=dx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class m7{constructor(e){this.Ge=e,this.ze=new Map,this.je=$r(),this.Je=fm(),this.He=fm(),this.Ye=new Vt(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(tg(i))if(r===0){const o=new fe(i.path);this.et(n,o,jt.newNoDocument(o,Ne.min()))}else Re(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}ah==null||ah.lt(function(d,h,f,m,E){var w,_,I;const p={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},y=h.unchangedNames;return y&&(p.bloomFilter={applied:E===0,hashCount:(y==null?void 0:y.hashCount)??0,bitmapLength:((_=(w=y==null?void 0:y.bits)==null?void 0:w.bitmap)==null?void 0:_.length)??0,padding:((I=y==null?void 0:y.bits)==null?void 0:I.padding)??0,mightContain:x=>(m==null?void 0:m.mightContain(x))??!1}),p}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Qi(r).toUint8Array()}catch(l){if(l instanceof aO)return is("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new dI(o,s,i)}catch(l){return is(l instanceof jd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&tg(a.target)){const l=new fe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,jt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ke();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new If(e,n,this.Ye,this.je,r);return this.je=$r(),this.Je=fm(),this.He=fm(),this.Ye=new Vt(je),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ux,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ux),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fm(){return new Vt(fe.comparator)}function dx(){return new Vt(fe.comparator)}const p7={asc:"ASCENDING",desc:"DESCENDING"},g7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y7={and:"AND",or:"OR"};class v7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jw(t,e){return t.useProto3Json||gf(e)?e:{value:e}}function Au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _7(t,e){return Au(t,e.toTimestamp())}function _n(t){return Re(!!t,49232),Ne.fromTimestamp(function(n){const r=Gi(n);return new _t(r.seconds,r.nanos)}(t))}function hI(t,e){return $w(t,e).canonicalString()}function $w(t,e){const n=function(s){return new it(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KO(t){const e=it.fromString(t);return Re(n2(e),10190,{key:e.toString()}),e}function Gh(t,e){return hI(t.databaseId,e.path)}function fi(t,e){const n=KO(e);if(n.get(1)!==t.databaseId.projectId)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(YO(n))}function GO(t,e){return hI(t.databaseId,e)}function QO(t){const e=KO(t);return e.length===4?it.emptyPath():YO(e)}function Bw(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YO(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hx(t,e,n){return{name:Gh(t,e),fields:n.value.mapValue.fields}}function my(t,e,n){const r=fi(t,e.name),s=_n(e.updateTime),i=e.createTime?_n(e.createTime):Ne.min(),o=new ir({mapValue:{fields:e.fields}}),a=jt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function w7(t,e){return"found"in e?function(r,s){Re(!!s.found,43571),s.found.name,s.found.updateTime;const i=fi(r,s.found.name),o=_n(s.found.updateTime),a=s.found.createTime?_n(s.found.createTime):Ne.min(),l=new ir({mapValue:{fields:s.found.fields}});return jt.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){Re(!!s.missing,3894),Re(!!s.readTime,22933);const i=fi(r,s.missing),o=_n(s.readTime);return jt.newNoDocument(i,o)}(t,e):Te(7234,{result:e})}function E7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Re(d===void 0||typeof d=="string",58123),cn.fromBase64String(d||"")):(Re(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),cn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?U.UNKNOWN:BO(c.code);return new J(d,c.message||"")}(o);n=new qO(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fi(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):Ne.min(),a=new ir({mapValue:{fields:r.document.fields}}),l=jt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ep(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fi(t,r.document),i=r.readTime?_n(r.readTime):Ne.min(),o=jt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ep([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fi(t,r.document),i=r.removedTargetIds||[];n=new ep([],i,s,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new h7(s,i),a=r.targetId;n=new WO(a,o)}}return n}function Qh(t,e){let n;if(e instanceof Qu)n={update:hx(t,e.key,e.value)};else if(e instanceof Yu)n={delete:Gh(t,e.key)};else if(e instanceof eo)n={update:hx(t,e.key,e.data),updateMask:x7(e.fieldMask)};else{if(!(e instanceof aI))return Te(16599,{Vt:e.type});n={verify:Gh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Su)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:_7(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Te(27497)}(t,e.precondition)),n}function zw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Gt.updateTime(_n(i.updateTime)):i.exists!==void 0?Gt.exists(i.exists):Gt.none()}(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Re(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Su;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new bl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Al(d)}else"increment"in a?l=new bu(o,a.increment):Te(16584,{proto:a});const c=$t.fromServerFormat(a.fieldPath);return new Ef(c,l)}(t,s)):[];if(e.update){e.update.name;const s=fi(t,e.update.name),i=new ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new jr(c.map(d=>$t.fromServerFormat(d)))}(e.updateMask);return new eo(s,i,o,n,r)}return new Qu(s,i,n,r)}if(e.delete){const s=fi(t,e.delete);return new Yu(s,n)}if(e.verify){const s=fi(t,e.verify);return new aI(s,n)}return Te(1463,{proto:e})}function I7(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?_n(s.updateTime):_n(i);return o.isEqual(Ne.min())&&(o=_n(i)),new c7(o,s.transformResults||[])}(n,e))):[]}function JO(t,e){return{documents:[GO(t,e.path)]}}function py(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GO(t,s);const i=function(c){if(c.length!==0)return t2(St.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ro(f.field),direction:S7(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function XO(t,e,n,r){const{ft:s,parent:i}=py(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Ro(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Ro(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function ZO(t){let e=QO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=e2(h);return f instanceof St&&rI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Kh(cc(E.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,gf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new ha(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new ha(m,f)}(n.endAt)),TO(e,s,o,i,a,"F",l,c)}function T7(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function e2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cc(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=cc(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cc(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cc(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(cc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return St.create(n.compositeFilter.filters.map(r=>e2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(t):Te(30097,{filter:t})}function S7(t){return p7[t]}function b7(t){return g7[t]}function A7(t){return y7[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function cc(t){return $t.fromServerFormat(t.fieldPath)}function t2(t){return t instanceof ht?function(n){if(n.op==="=="){if(YA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(QA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(QA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:b7(n.op),value:n.value}}}(t):t instanceof St?function(n){const r=n.getFilters().map(s=>t2(s));return r.length===1?r[0]:{compositeFilter:{op:A7(n.op),filters:r}}}(t):Te(54877,{filter:t})}function x7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function n2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,r,s,i=Ne.min(),o=Ne.min(),a=cn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.yt=e}}function R7(t,e){let n;if(e.document)n=my(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),s=Rl(e.noDocument.readTime);n=jt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const r=fe.fromSegments(e.unknownDocument.path),s=Rl(e.unknownDocument.version);n=jt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new _t(s[0],s[1]);return Ne.fromTimestamp(i)}(e.readTime)),n}function fx(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Gh(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Au(i,o.version.toTimestamp()),createTime:Au(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:xl(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:xl(e.version)}}return r}function sg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function xl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rl(t){const e=new _t(t.seconds,t.nanoseconds);return Ne.fromTimestamp(e)}function za(t,e){const n=(e.baseMutations||[]).map(i=>zw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>zw(t.yt,i)),s=_t.fromMillis(e.localWriteTimeMs);return new lI(e.batchId,s,n,r)}function $d(t){const e=Rl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Rl(t.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Re(o===1,1966,{count:o}),yr(Gu(QO(i.documents[0])))}(t.query):function(i){return yr(ZO(i))}(t.query),new Ni(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,cn.fromBase64String(t.resumeToken))}function s2(t,e){const n=xl(e.snapshotVersion),r=xl(e.lastLimboFreeSnapshotVersion);let s;s=tg(e.target)?JO(t.yt,e.target):py(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sl(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function gy(t){const e=ZO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rg(e,e.limit,"L"):e}function Nv(t,e){return new uI(e.largestBatchId,zw(t.yt,e.overlayMutation))}function mx(t,e){const n=e.path.lastSegment();return[t,gr(e.path.popLast()),n]}function px(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:xl(r.readTime),documentKey:gr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{getBundleMetadata(e,n){return gx(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Rl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return gx(e).put(function(s){return{bundleId:s.id,createTime:xl(_n(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return yx(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:gy(i.bundledQuery),readTime:Rl(i.readTime)}}(r)})}saveNamedQuery(e,n){return yx(e).put(function(s){return{name:s.name,readTime:xl(_n(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function gx(t){return Bn(t,oy)}function yx(t){return Bn(t,ay)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new yy(e,r)}getOverlay(e,n){return Sd(e).get(mx(this.userId,n)).next(r=>r?Nv(this.serializer,r):null)}getOverlays(e,n){const r=ii();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new uI(n,o);s.push(this.St(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(gr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Sd(e).Z(Dw,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=ii(),i=gr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Sd(e).J(Dw,o).next(a=>{for(const l of a){const c=Nv(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=ii();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Sd(e).ee({index:eO,range:a},(l,c,d)=>{const h=Nv(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return Sd(e).put(function(s,i,o){const[a,l,c]=mx(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Qh(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Sd(t){return Bn(t,ly)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{bt(e){return Bn(e,ZE)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?cn.fromUint8Array(r):cn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ht(e.integerValue));else if("doubleValue"in e){const r=Ht(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Uh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Gi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Qi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?fO(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):dy(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Eu,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ht(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),fe.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Wa.Kt=new Wa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=255;function k7(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function vx(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=k7(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class D7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=vx(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=vx(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Xl),this.sn(255)}_n(){this.an(Xl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Xl?(this.sn(Xl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Xl?(this.an(Xl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class N7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class O7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class bd{constructor(){this.cn=new D7,this.ln=new N7(this.cn),this.hn=new O7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new qa(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:tp(this.En),directionalValue:tp(this.dn),orderedDocumentKey:tp(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function mo(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=_x(t.En,e.En),n!==0?n:(n=_x(t.dn,e.dn),n!==0?n:fe.comparator(t.In,e.In)))}function _x(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function tp(t){return OD()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function wx(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class Ex{constructor(e){this.mn=new xt((n,r)=>$t.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Pw(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ua(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt($t.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ul(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ul(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ul(r.field,r.dir==="asc"?0:1)));return new pu(pu.UNKNOWN_ID,this.collectionId,n,gu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){var n,r;if(Re(t instanceof ht||t instanceof St,20012),t instanceof ht){if(t instanceof IO){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ht.create(t.field,"==",i)))||[];return St.create(s,"or")}return t}const e=t.filters.map(s=>i2(s));return St.create(e,t.op)}function L7(t){if(t.getFilters().length===0)return[];const e=Hw(i2(t));return Re(o2(e),7391),Ww(e)||qw(e)?[e]:e.getFilters()}function Ww(t){return t instanceof ht}function qw(t){return t instanceof St&&rI(t)}function o2(t){return Ww(t)||qw(t)||function(n){if(n instanceof St&&Mw(n)){for(const r of n.getFilters())if(!Ww(r)&&!qw(r))return!1;return!0}return!1}(t)}function Hw(t){if(Re(t instanceof ht||t instanceof St,34018),t instanceof ht)return t;if(t.filters.length===1)return Hw(t.filters[0]);const e=t.filters.map(r=>Hw(r));let n=St.create(e,t.op);return n=ig(n),o2(n)?n:(Re(n instanceof St,64498),Re(Tu(n),40251),Re(n.filters.length>1,57927),n.filters.reduce((r,s)=>fI(r,s)))}function fI(t,e){let n;return Re(t instanceof ht||t instanceof St,38388),Re(e instanceof ht||e instanceof St,25473),n=t instanceof ht?e instanceof ht?function(s,i){return St.create([s,i],"and")}(t,e):Ix(t,e):e instanceof ht?Ix(e,t):function(s,i){if(Re(s.filters.length>0&&i.filters.length>0,48005),Tu(s)&&Tu(i))return _O(s,i.getFilters());const o=Mw(s)?s:i,a=Mw(s)?i:s,l=o.filters.map(c=>fI(c,a));return St.create(l,"or")}(t,e),ig(n)}function Ix(t,e){if(Tu(e))return _O(e,t.getFilters());{const n=e.filters.map(r=>fI(t,r));return St.create(n,"or")}}function ig(t){if(Re(t instanceof ht||t instanceof St,11850),t instanceof ht)return t;const e=t.getFilters();if(e.length===1)return ig(e[0]);if(yO(t))return t;const n=e.map(s=>ig(s)),r=[];return n.forEach(s=>{s instanceof ht?r.push(s):s instanceof St&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:St.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(){this.Cn=new mI}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(os.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class mI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(it.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="IndexedDbIndexManager",mm=new Uint8Array(0);class V7{constructor(e,n){this.databaseId=n,this.vn=new mI,this.Fn=new Zi(r=>Sl(r),(r,s)=>vf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:gr(s)};return Sx(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[UN(n),""],!1,!0);return Sx(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(si(o.parent))}return r})}addFieldIndex(e,n){const r=Ad(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ec(e);return i.next(a=>{o.put(px(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Ad(e),s=ec(e),i=Zl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ad(e),r=Zl(e),s=ec(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Ex(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Zl(e);let s=!0;const i=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ke();const a=[];return M.forEach(i,(l,c)=>{ee(Tx,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${Sl(n)}`);const d=function(I,x){const P=Pw(x);if(P===void 0)return null;for(const L of ng(I,P.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(I,x){const P=new Map;for(const L of Ua(x))for(const A of ng(I,L.fieldPath))switch(A.op){case"==":case"in":P.set(L.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return P.set(L.fieldPath.canonicalString(),A.value),Array.from(P.values())}return null}(c,l),f=function(I,x){const P=[];let L=!0;for(const A of Ua(x)){const T=A.kind===0?tx(I,A.fieldPath,I.startAt):nx(I,A.fieldPath,I.startAt);P.push(T.value),L&&(L=T.inclusive)}return new ha(P,L)}(c,l),m=function(I,x){const P=[];let L=!0;for(const A of Ua(x)){const T=A.kind===0?nx(I,A.fieldPath,I.endAt):tx(I,A.fieldPath,I.endAt);P.push(T.value),L&&(L=T.inclusive)}return new ha(P,L)}(c,l),E=this.On(l,c,f),p=this.On(l,c,m),y=this.Nn(l,c,h),w=this.Bn(l.indexId,d,E,f.inclusive,p,m.inclusive,y);return M.forEach(w,_=>r.Y(_,n.limit).next(I=>{I.forEach(x=>{const P=fe.fromSegments(x.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=L7(St.create(e.filters,"and")).map(r=>Fw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):mm,m=this.kn(e,f,r[h%c],s),E=this.qn(e,f,i[h%c],o),p=a.map(y=>this.kn(e,f,y,!0));d.push(...this.createRange(m,E,p))}return d}kn(e,n,r,s){const i=new qa(e,fe.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new qa(e,fe.empty(),n,r);return s?i.An():i}xn(e,n){const r=new Ex(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return M.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new xt($t.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new bd;for(const s of Ua(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Wa.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new bd;return Wa.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new bd;return Wa.Kt.Dt(Tl(this.databaseId,n),r.Pn(function(i){const o=Ua(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new bd);let i=0;for(const o of Ua(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Hh(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);Wa.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new bd;l.seed(a.un()),Wa.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ad(e),s=ec(e);return(n?r.J(kw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new gu(h.sequenceNumber,new os(Rl(h.readTime),new fe(si(h.documentKey)),h.largestBatchId)):gu.empty(),m=d.fields.map(([E,p])=>new ul($t.fromServerFormat(E),p));return new pu(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:je(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Ad(e),i=ec(e);return this.Gn(e).next(o=>s.J(kw,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(px(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?M.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Zl(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Zl(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Zl(e);let i=new xt(mo);return s.ee({index:ZN,range:IDBKeyRange.only([r.indexId,this.uid,tp(this.$n(r,n))])},(o,a)=>{i=i.add(new qa(r.indexId,n,wx(a.arrayValue),wx(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new xt(mo);const s=this.Qn(n,e);if(s==null)return r;const i=Pw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Hh(o))for(const a of o.arrayValue.values||[])r=r.add(new qa(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new qa(n.indexId,e.key,mm,s));return r}Jn(e,n,r,s,i){ee(Tx,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),E=c.getIterator();let p=Jl(m),y=Jl(E);for(;p||y;){let w=!1,_=!1;if(p&&y){const I=d(p,y);I<0?_=!0:I>0&&(w=!0)}else p!=null?_=!0:w=!0;w?(h(y),y=Jl(E)):_?(f(p),p=Jl(m)):(p=Jl(m),y=Jl(E))}}(s,i,mo,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return ec(e).ee({index:XN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>mo(o,a)).filter((o,a,l)=>!a||mo(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=mo(o,e),l=mo(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,mm,fe.empty()),l=s[o+1].Vn(this.uid,mm,fe.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return mo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bx)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Te(44426))).next(bx)}}function Sx(t){return Bn(t,Bh)}function Zl(t){return Bn(t,rh)}function Ad(t){return Bn(t,XE)}function ec(t){return Bn(t,nh)}function bx(t){Re(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;QE(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new os(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a2=41943040;class mr{static withCacheSize(e){return new mr(e,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t,e,n){const r=t.store(As),s=t.store(yu),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Re(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=QN(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return M.waitFor(i).next(()=>c)}function og(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(a2,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);class vy{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Re(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new vy(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return po(e).ee({index:el,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=uc(e),o=po(e);return o.add({}).next(a=>{Re(typeof a=="number",49019);const l=new lI(a,n,r,s),c=function(m,E,p){const y=p.baseMutations.map(_=>Qh(m.yt,_)),w=p.mutations.map(_=>Qh(m.yt,_));return{userId:E,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:y,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new xt((f,m)=>je(f.canonicalString(),m.canonicalString()));for(const f of s){const m=QN(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,v8))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return po(e).get(n).next(r=>r?(Re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),za(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return po(e).ee({index:el,range:s},(o,a,l)=>{a.userId===this.userId&&(Re(a.batchId>=r,47524,{tr:r}),i=za(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ta;return po(e).ee({index:el,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ta],[this.userId,Number.POSITIVE_INFINITY]);return po(e).J(el,n).next(r=>r.map(s=>za(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gm(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return uc(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=si(d);if(c===this.userId&&n.path.isEqual(f))return po(e).get(h).next(m=>{if(!m)throw Te(61480,{nr:o,batchId:h});Re(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(za(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(je);const s=[];return n.forEach(i=>{const o=Gm(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=uc(e).ee({range:a},(c,d,h)=>{const[f,m,E]=c,p=si(m);f===this.userId&&i.path.isEqual(p)?r=r.add(E):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Gm(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new xt(je);return uc(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,E=si(f);h===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(po(e).get(i).next(o=>{if(o===null)throw Te(35274,{batchId:i});Re(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(za(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return l2(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return uc(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=si(i[1]);s.push(l)}else a.done()}).next(()=>{Re(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return c2(e,this.userId,n)}_r(e){return u2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:ta,lastStreamToken:""})}}function c2(t,e,n){const r=Gm(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return uc(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function po(t){return Bn(t,As)}function uc(t){return Bn(t,yu)}function u2(t){return Bn(t,jh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pl(0)}static cr(){return new Pl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Pl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Ne.fromTimestamp(new _t(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>tc(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Re(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return tc(e).ee((o,a)=>{const l=$d(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return tc(e).ee((r,s)=>{const i=$d(s);n(i)})}lr(e){return xx(e).get(eg).next(n=>(Re(n!==null,2888),n))}hr(e,n){return xx(e).put(eg,n)}Pr(e,n){return tc(e).put(s2(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Sl(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return tc(e).ee({range:s,index:JN},(o,a,l)=>{const c=$d(a);vf(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Po(e);return n.forEach(o=>{const a=gr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Po(e);return M.forEach(n,i=>{const o=gr(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Po(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Po(e);let i=Ke();return s.ee({range:r,X:!0},(o,a,l)=>{const c=si(o[1]),d=new fe(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=gr(n.path),s=IDBKeyRange.bound([r],[UN(r)],!1,!0);let i=0;return Po(e).ee({index:JE,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return tc(e).get(n).next(r=>r?$d(r):null)}}function tc(t){return Bn(t,vu)}function xx(t){return Bn(t,dl)}function Po(t){return Bn(t,_u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="LruGarbageCollector",d2=1048576;function Px([t,e],[n,r]){const s=je(t,n);return s===0?je(e,r):s}class U7{constructor(e){this.Ir=e,this.buffer=new xt(Px),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Px(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class h2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(Rx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ia(n)?ee(Rx,"Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Vr(3e5)})}}class j7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Ur.ce);const r=new U7(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Ax)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ax):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ac()<=dt.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function f2(t,e){return new j7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,n){this.db=e,this.garbageCollector=f2(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return pm(e,r)}removeReference(e,n,r){return pm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pm(e,n)}br(e,n){return function(s,i){let o=!1;return u2(s).te(a=>c2(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ne.min()),Po(e).delete(function(h){return[0,gr(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pm(e,n)}Sr(e,n){const r=Po(e);let s,i=Ur.ce;return r.ee({index:JE},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Ur.ce&&n(new fe(si(s)),i),i=c,s=l):i=Ur.ce}).next(()=>{i!==Ur.ce&&n(new fe(si(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pm(t,e){return Po(t).put(function(r,s){return{targetId:0,path:gr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.changes=new Zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return La(e).put(r)}removeEntry(e,n,r){return La(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=jt.newInvalidDocument(n);return La(e).ee({index:Qm,range:IDBKeyRange.only(xd(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:jt.newInvalidDocument(n)};return La(e).ee({index:Qm,range:IDBKeyRange.only(xd(n))},(s,i)=>{r={document:this.Cr(n,i),size:og(i)}}).next(()=>r)}getEntries(e,n){let r=$r();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=$r(),s=new Vt(fe.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,og(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let s=new xt(Dx);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(xd(s.first()),xd(s.last())),o=s.getIterator();let a=o.getNext();return La(e).ee({index:Qm,range:i},(l,c,d)=>{const h=fe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Dx(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(xd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),sg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return La(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=$r();for(const h of c){const f=this.Cr(fe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(wf(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=$r();const o=kx(n,r),a=kx(n,os.max());return La(e).ee({index:YN,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(fe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new z7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Cx(e).get(Cw).next(n=>(Re(!!n,20021),n))}Dr(e,n){return Cx(e).put(Cw,n)}Cr(e,n){if(n){const r=R7(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return jt.newInvalidDocument(e)}}function p2(t){return new B7(t)}class z7 extends m2{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Zi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new xt((i,o)=>je(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=fx(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=og(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=fx(this.Nr.serializer,o.convertToNoDocument(Ne.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Cx(t){return Bn(t,$h)}function La(t){return Bn(t,Zp)}function xd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kx(t,e){const n=e.documentKey.path.toArray();return[t,sg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Dx(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=je(n[i],r[i]),s)return s;return s=je(n.length,r.length),s||(s=je(n[n.length-2],r[r.length-2]),s||je(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&oh(r.mutation,s,jr.empty(),_t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const s=ii();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ud();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=$r();const o=ih(),a=function(){return ih()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof eo)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),oh(d.mutation,c,d.mutation.getFieldMask(),_t.now())):o.set(c.key,jr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new W7(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ih();let s=new Vt((o,a)=>o-a),i=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||jr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ke()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=kO();d.forEach(f=>{if(!i.has(f)){const m=FO(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(ii());let a=mu,l=i;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ke())).next(d=>({batchId:a,changes:CO(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=Ud();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ud();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,f){return new Xi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,jt.newInvalidDocument(d)))});let a=Ud();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&oh(d.mutation,c,jr.empty(),_t.now()),wf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:gy(s.bundledQuery),readTime:_n(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.overlays=new Vt(fe.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ii();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=ii(),i=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Vt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ii(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ii(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uI(n,r));let i=this.qr.get(n);i===void 0&&(i=Ke(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.Qr=new xt(Qn.$r),this.Ur=new xt(Qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Qn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new fe(new it([])),r=new Qn(n,e),s=new Qn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new fe(new it([])),r=new Qn(n,e),s=new Qn(n,e+1);let i=Ke();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return fe.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Qn.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lI(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Qn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ta:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qn(n,0),s=new Qn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(je);return n.forEach(s=>{const i=new Qn(s,0),o=new Qn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new Qn(new fe(i),0);let a=new xt(je);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new Qn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Qn(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e){this.ri=e,this.docs=function(){return new Vt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():jt.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$r();const o=n.path,a=new fe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||QE(WN(d),r)<=0||(s.has(d.key)||wf(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Te(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Y7(this)}getSize(e){return M.resolve(this.size)}}class Y7 extends m2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.persistence=e,this.si=new Zi(n=>Sl(n),vf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new pI,this.targetCount=0,this.ai=Pl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ur(0),this.li=!1,this.li=!0,this.hi=new K7,this.referenceDelegate=e(this),this.Pi=new J7(this),this.indexManager=new M7,this.remoteDocumentCache=function(s){return new Q7(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new r2(n),this.Ii=new q7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new G7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new X7(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class X7 extends HN{constructor(e){super(),this.currentSequenceNumber=e}}class _y{constructor(e){this.persistence=e,this.Ri=new pI,this.Vi=null}static mi(e){return new _y(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=fe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ag{constructor(e,n){this.persistence=e,this.pi=new Zi(r=>gr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=f2(this,n)}static mi(e,n){return new ag(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jm(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.serializer=e}k(e,n,r,s){const i=new iy("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(yf)}(e),function(l){l.createObjectStore(jh,{keyPath:y8}),l.createObjectStore(As,{keyPath:zA,autoIncrement:!0}).createIndex(el,WA,{unique:!0}),l.createObjectStore(yu)}(e),Nx(e),function(l){l.createObjectStore(ja)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(_u),l.deleteObjectStore(vu),l.deleteObjectStore(dl)}(e),Nx(e)),o=o.next(()=>function(l){const c=l.store(dl),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return c.put(eg,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(As).J().next(h=>{l.deleteObjectStore(As),l.createObjectStore(As,{keyPath:zA,autoIncrement:!0}).createIndex(el,WA,{unique:!0});const f=c.store(As),m=h.map(E=>f.put(E));return M.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(wu,{keyPath:A8})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore($h)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(oy,{keyPath:x8})})(e),function(l){l.createObjectStore(ay,{keyPath:R8})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(ly,{keyPath:L8});c.createIndex(Dw,M8,{unique:!1}),c.createIndex(eO,V8,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Zp,{keyPath:_8});c.createIndex(Qm,w8),c.createIndex(YN,E8)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ja))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(XE,{keyPath:P8,autoIncrement:!0}).createIndex(kw,C8,{unique:!1}),l.createObjectStore(nh,{keyPath:k8}).createIndex(XN,D8,{unique:!1}),l.createObjectStore(rh,{keyPath:N8}).createIndex(ZN,O8,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(nh).clear()}).next(()=>{n.objectStore(rh).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(ZE,{keyPath:F8})})(e)})),r<18&&s>=18&&OD()&&(o=o.next(()=>{n.objectStore(nh).clear()}).next(()=>{n.objectStore(rh).clear()})),o}wi(e){let n=0;return e.store(ja).ee((r,s)=>{n+=og(s)}).next(()=>{const r={byteSize:n};return e.store($h).put(Cw,r)})}yi(e){const n=e.store(jh),r=e.store(As);return n.J().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,ta],[i.userId,i.lastAcknowledgedBatchId]);return r.J(el,o).next(a=>M.forEach(a,l=>{Re(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=za(this.serializer,l);return l2(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(_u),r=e.store(ja);return e.store(dl).get(eg).next(s=>{const i=[];return r.ee((o,a)=>{const l=new it(o),c=function(h){return[0,gr(h)]}(l);i.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:gr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}bi(e,n){e.createObjectStore(Bh,{keyPath:b8});const r=n.store(Bh),s=new mI,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:gr(l)})}};return n.store(ja).ee({X:!0},(o,a)=>{const l=new it(o);return i(l.popLast())}).next(()=>n.store(yu).ee({X:!0},([o,a,l],c)=>{const d=si(a);return i(d.popLast())}))}Di(e){const n=e.store(vu);return n.ee((r,s)=>{const i=$d(s),o=s2(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ja),s=[];return r.ee((i,o)=>{const a=n.store(Zp),l=function(h){return h.document?new fe(it.fromString(h.document.name).popFirst(5)):h.noDocument?fe.fromSegments(h.noDocument.path):h.unknownDocument?fe.fromSegments(h.unknownDocument.path):Te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Fi(e,n){const r=n.store(As),s=p2(this.serializer),i=new gI(_y.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ke();za(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),M.forEach(a,(l,c)=>{const d=new Jn(c),h=yy.wt(this.serializer,d),f=i.getIndexManager(d),m=vy.wt(d,this.serializer,f,i.referenceDelegate);return new g2(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Nw(n,Ur.ce),l).next()})})}}function Nx(t){t.createObjectStore(_u,{keyPath:T8}).createIndex(JE,S8,{unique:!0}),t.createObjectStore(vu,{keyPath:"targetId"}).createIndex(JN,I8,{unique:!0}),t.createObjectStore(dl)}const go="IndexedDbPersistence",Ov=18e5,Lv=5e3,Mv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",y2="main";class yI{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!yI.v())throw new J(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $7(this,s),this.$i=n+y2,this.serializer=new r2(l),this.Ui=new hi(this.$i,this.Ni,new Z7(this.serializer)),this.hi=new C7,this.Pi=new F7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=p2(this.serializer),this.Ii=new P7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&yn(go,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(U.FAILED_PRECONDITION,Mv);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ur(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ia(e))return ee(go,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(go,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Rd(e).get(Yl).next(n=>M.resolve(this.es(n)))}ts(e){return gm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ov)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Bn(n,wu);return r.J().next(s=>{const i=this.ss(s,Ov),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):Rd(e).get(Yl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Lv)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new J(U.FAILED_PRECONDITION,Mv);return!1}}return!(!this.networkEnabled||!this.inForeground)||gm(e).J().next(r=>this.ss(r,Lv).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ee(go,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[yf,wu],e=>{const n=new Nw(e,Ur.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>gm(e).J().next(n=>this.ss(n,Ov).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return vy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new V7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return yy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee(go,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?$8:l===17?sO:l===16?j8:l===15?eI:l===14?rO:l===13?nO:l===12?U8:l===11?tO:void Te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Nw(a,this.ci?this.ci.next():Ur.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new J(U.FAILED_PRECONDITION,qN);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Rd(e).get(Yl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Lv)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(U.FAILED_PRECONDITION,Mv)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rd(e).put(Yl,n)}static v(){return hi.v()}Zi(e){const n=Rd(e);return n.get(Yl).next(r=>this.es(r)?(ee(go,"Releasing primary lease."),n.delete(Yl)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(yn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;ND()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ee(go,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yn(go,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){yn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rd(t){return Bn(t,yf)}function gm(t){return Bn(t,wu)}function vI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ke(),s=Ke();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _I(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ND()?8:KN(jn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new eH;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ac()<=dt.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",lc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(ac()<=dt.DEBUG&&ee("QueryEngine","Query:",lc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ac()<=dt.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",lc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):M.resolve())}ys(e,n){if(rx(n))return M.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rg(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ke(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,rg(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return rx(n)||s.isEqual(Ne.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(ac()<=dt.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),lc(n)),this.vs(e,o,n,zN(s,mu)).next(a=>a))})}Ds(e,n){let r=new xt(RO(e));return n.forEach((s,i)=>{wf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ac()<=dt.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",lc(n)),this.ps.getDocumentsMatchingQuery(e,n,os.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="LocalStore",tH=3e8;class nH{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Vt(je),this.xs=new Zi(i=>Sl(i),vf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function _2(t,e,n,r){return new nH(t,e,n,r)}async function w2(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ke();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function rH(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(E=>{m=m.next(()=>d.getEntry(l,E)).next(p=>{const y=c.docVersions.get(E);Re(y!==null,48541),p.version.compareTo(y)<0&&(h.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),d.addEntry(p)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function E2(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function sH(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(cn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(p,y,w){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=tH?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=$r(),c=Ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(I2(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Ne.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function I2(t,e,n){let r=Ke(),s=Ke();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=$r();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee(wI,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function iH(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ta),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xu(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ni(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ru(t,e,n){const r=pe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ia(o))throw o;ee(wI,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function lg(t,e,n){const r=pe(t);let s=Ne.min(),i=Ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=pe(l),f=h.xs.get(d);return f!==void 0?M.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,yr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ne.min(),n?i:Ke())).next(a=>(b2(r,xO(e),a),{documents:a,Qs:i})))}function T2(t,e){const n=pe(t),r=pe(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function S2(t,e){const n=pe(t),r=n.Os.get(e)||Ne.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,zN(r,mu),Number.MAX_SAFE_INTEGER)).then(s=>(b2(n,e,s),s))}function b2(t,e,n){let r=t.Os.get(e)||Ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}async function oH(t,e,n,r){const s=pe(t);let i=Ke(),o=$r();for(const c of n){const d=e.$s(c.metadata.name);c.document&&(i=i.add(d));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(d,h)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),l=await xu(s,function(d){return yr(Gu(it.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>I2(c,a,o).next(d=>(a.apply(c),d)).next(d=>s.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Pi.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.ks,d.qs)).next(()=>d.ks)))}async function aH(t,e,n=Ke()){const r=await xu(t,yr(gy(e.bundledQuery))),s=pe(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=_n(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const a=r.withResumeToken(cn.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(i,a).next(()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Pi.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ii.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="firestore_clients";function Ox(t,e){return`${A2}_${t}_${e}`}const x2="firestore_mutations";function Lx(t,e,n){let r=`${x2}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const R2="firestore_targets";function Vv(t,e){return`${R2}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="SharedClientState";class cg{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new J(s.error.code,s.error.message))),o?new cg(e,n,s.state,i):(yn(Zs,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new J(r.error.code,r.error.message))),i?new lh(e,r.state,s):(yn(Zs,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ug{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=iI();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=GN(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new ug(e,i):(yn(Zs,`Failed to parse client data for instance '${e}': ${n}`),null)}}class EI{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new EI(n.clientId,n.onlineState):(yn(Zs,`Failed to parse online state: ${e}`),null)}}class Kw{constructor(){this.activeTargetIds=iI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fv{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Vt(je),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Ox(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Kw),this.ro=new RegExp(`^${A2}_${o}_([^_]*)$`),this.io=new RegExp(`^${x2}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${R2}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Ox(this.persistenceKey,r));if(s){const i=ug.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Vv(this.persistenceKey,e));if(s){const i=lh.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vv(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee(Zs,"READ",e,n),n}setItem(e,n){ee(Zs,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee(Zs,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ee(Zs,"EVENT",n.key,n.newValue),n.key===this.eo)return void yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Ur.ce;if(i!=null)try{const a=JSON.parse(i);Re(typeof a=="number",30636,{So:i}),o=a}catch(a){yn(Zs,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Ur.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new cg(this.currentUser,e,n,r),i=Lx(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Lx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Vv(this.persistenceKey,e),i=new lh(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return ug.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return cg.Ws(new Jn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return lh.Ws(s,n)}uo(e){return EI.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ee(Zs,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=iI();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class P2{constructor(){this.Mo=new Kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="ConnectivityMonitor";class Vx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(Mx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(Mx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym=null;function Gw(){return ym===null?ym=function(){return 268435456+Math.round(2147483648*Math.random())}():ym++,"0x"+ym.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="RestConnection",cH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uH{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Wh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Gw(),a=this.zo(e,n.toUriEncodedString());ee(Uv,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=$s(c);return this.Jo(e,a,l,r,d).then(h=>(ee(Uv,`Received RPC '${e}' ${o}: `,h),h),h=>{throw is(Uv,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ku}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=cH[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="WebChannelConnection";class hH extends uH{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Gw();return new Promise((a,l)=>{const c=new CN;c.setWithCredentials(!0),c.listenOnce(kN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Km.NO_ERROR:const h=c.getResponseJson();ee(fr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Km.TIMEOUT:ee(fr,`RPC '${e}' ${o} timed out`),l(new J(U.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:const f=c.getStatus();if(ee(fr,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const p=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_)>=0?_:U.UNKNOWN}(E.status);l(new J(p,E.message))}else l(new J(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new J(U.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ee(fr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ee(fr,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Gw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ON(),a=NN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ee(fr,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const E=new dH({Yo:y=>{m?ee(fr,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(ee(fr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ee(fr,`RPC '${e}' stream ${s} sending:`,y),h.send(y))},Zo:()=>h.close()}),p=(y,w,_)=>{y.listen(w,I=>{try{_(I)}catch(x){setTimeout(()=>{throw x},0)}})};return p(h,Fd.EventType.OPEN,()=>{m||(ee(fr,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),p(h,Fd.EventType.CLOSE,()=>{m||(m=!0,ee(fr,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(h))}),p(h,Fd.EventType.ERROR,y=>{m||(m=!0,is(fr,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),E.a_(new J(U.UNAVAILABLE,"The operation could not be completed")))}),p(h,Fd.EventType.MESSAGE,y=>{var w;if(!m){const _=y.data[0];Re(!!_,16349);const I=_,x=(I==null?void 0:I.error)||((w=I[0])==null?void 0:w.error);if(x){ee(fr,`RPC '${e}' stream ${s} received error:`,x);const P=x.status;let L=function(R){const C=An[R];if(C!==void 0)return BO(C)}(P),A=x.message;L===void 0&&(L=U.INTERNAL,A="Unknown error status: "+P+" with message "+x.message),m=!0,E.a_(new J(L,A)),h.close()}else ee(fr,`RPC '${e}' stream ${s} received:`,_),E.u_(_)}}),p(a,DN.STAT_EVENT,y=>{y.stat===bw.PROXY?ee(fr,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===bw.NOPROXY&&ee(fr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return typeof window<"u"?window:null}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){return new v7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="PersistentStream";class k2{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new II(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(yn(n.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new J(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(Fx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ee(Fx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fH extends k2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=E7(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?_n(o.readTime):Ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=tg(l)?{documents:JO(i,l)}:{query:py(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HO(i,o.resumeToken);const c=jw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=Au(i,o.snapshotVersion.toTimestamp());const c=jw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=T7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bw(this.serializer),n.removeTarget=e,this.q_(n)}}class mH extends k2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=I7(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Qh(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{}class gH extends pH{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,$w(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,$w(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class yH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yn(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="RemoteStore";class vH{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Sa(this)&&(ee(Cl,"Restarting streams for network reachability change."),await async function(l){const c=pe(l);c.Ea.add(4),await Ju(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Sf(c)}(this))})}),this.Ra=new yH(r,s)}}async function Sf(t){if(Sa(t))for(const e of t.da)await e(!0)}async function Ju(t){for(const e of t.da)await e(!1)}function wy(t,e){const n=pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bI(n)?SI(n):Zu(n).O_()&&TI(n,e))}function Pu(t,e){const n=pe(t),r=Zu(n);n.Ia.delete(e),r.O_()&&D2(n,e),n.Ia.size===0&&(r.O_()?r.L_():Sa(n)&&n.Ra.set("Unknown"))}function TI(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zu(t).Y_(e)}function D2(t,e){t.Va.Ue(e),Zu(t).Z_(e)}function SI(t){t.Va=new m7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zu(t).start(),t.Ra.ua()}function bI(t){return Sa(t)&&!Zu(t).x_()&&t.Ia.size>0}function Sa(t){return pe(t).Ea.size===0}function N2(t){t.Va=void 0}async function _H(t){t.Ra.set("Online")}async function wH(t){t.Ia.forEach((e,n)=>{TI(t,e)})}async function EH(t,e){N2(t),bI(t)?(t.Ra.ha(e),SI(t)):t.Ra.set("Unknown")}async function IH(t,e,n){if(t.Ra.set("Online"),e instanceof qO&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){ee(Cl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dg(t,r)}else if(e instanceof ep?t.Va.Ze(e):e instanceof WO?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ne.min()))try{const r=await E2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(cn.EMPTY_BYTE_STRING,d.snapshotVersion)),D2(i,l);const h=new Ni(d.target,l,c,d.sequenceNumber);TI(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee(Cl,"Failed to raise snapshot:",r),await dg(t,r)}}async function dg(t,e,n){if(!Ia(e))throw e;t.Ea.add(1),await Ju(t),t.Ra.set("Offline"),n||(n=()=>E2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(Cl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Sf(t)})}function O2(t,e){return e().catch(n=>dg(t,n,e))}async function Xu(t){const e=pe(t),n=fa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ta;for(;TH(e);)try{const s=await iH(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,SH(e,s)}catch(s){await dg(e,s)}L2(e)&&M2(e)}function TH(t){return Sa(t)&&t.Ta.length<10}function SH(t,e){t.Ta.push(e);const n=fa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function L2(t){return Sa(t)&&!fa(t).x_()&&t.Ta.length>0}function M2(t){fa(t).start()}async function bH(t){fa(t).ra()}async function AH(t){const e=fa(t);for(const n of t.Ta)e.ea(n.mutations)}async function xH(t,e,n){const r=t.Ta.shift(),s=cI.from(r,e,n);await O2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xu(t)}async function RH(t,e){e&&fa(t).X_&&await async function(r,s){if(function(o){return $O(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();fa(r).B_(),await O2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Xu(r)}}(t,e),L2(t)&&M2(t)}async function Ux(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),ee(Cl,"RemoteStore received new credentials");const r=Sa(n);n.Ea.add(3),await Ju(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sf(n)}async function Qw(t,e){const n=pe(t);e?(n.Ea.delete(2),await Sf(n)):e||(n.Ea.add(2),await Ju(n),n.Ra.set("Unknown"))}function Zu(t){return t.ma||(t.ma=function(n,r,s){const i=pe(n);return i.sa(),new fH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:_H.bind(null,t),t_:wH.bind(null,t),r_:EH.bind(null,t),H_:IH.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),bI(t)?SI(t):t.Ra.set("Unknown")):(await t.ma.stop(),N2(t))})),t.ma}function fa(t){return t.fa||(t.fa=function(n,r,s){const i=pe(n);return i.sa(),new mH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:bH.bind(null,t),r_:RH.bind(null,t),ta:AH.bind(null,t),na:xH.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Xu(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(Cl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new AI(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ed(t,e){if(yn("AsyncQueue",`${e}: ${t}`),Ia(t))return new J(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{static emptySet(e){return new hl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Ud(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.ga=new Vt(fe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class kl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new kl(e,n,hl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class CH{constructor(){this.queries=$x(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=pe(n),i=s.queries;s.queries=$x(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new J(U.ABORTED,"Firestore shutting down"))}}function $x(){return new Zi(t=>AO(t),_f)}async function xI(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new PH,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ed(o,`Initialization of query '${lc(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&PI(n)}async function RI(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kH(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&PI(n)}function DH(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function PI(t){t.Ca.forEach(e=>{e.next()})}var Yw,Bx;(Bx=Yw||(Yw={})).Ma="default",Bx.Cache="cache";class CI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.serializer=e}$s(e){return fi(this.serializer,e)}Us(e){return e.metadata.exists?my(this.serializer,e.document,!1):jt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return _n(e)}}class kI{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=F2(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=it.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new zx(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Ke()).add(i);n.set(o,a)}}return n}async ja(e){const n=await oH(e,new zx(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await aH(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function F2(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.key=e}}class j2{constructor(e){this.key=e}}class $2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=RO(e),this.tu=new hl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new jx,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=wf(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?E!==p&&(r.track({type:3,doc:m}),y=!0):this.su(f,m)||(r.track({type:2,doc:m}),y=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),y=!0):f&&!m&&(r.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(m?(o=o.add(m),i=p?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,E){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:y})}};return p(m)-p(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new kl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new j2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new U2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return kl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ba="SyncEngine";class NH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OH{constructor(e){this.key=e,this.hu=!1}}class LH{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zi(a=>AO(a),_f),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(fe.comparator),this.Au=new Map,this.Ru=new pI,this.Vu={},this.mu=new Map,this.fu=Pl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MH(t,e,n=!0){const r=Ey(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await B2(r,e,n,!0),s}async function VH(t,e){const n=Ey(t);await B2(n,e,!0,!1)}async function B2(t,e,n,r){const s=await xu(t.localStore,yr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await DI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&wy(t.remoteStore,s),a}async function DI(t,e,n,r,s){t.pu=(h,f,m)=>async function(p,y,w,_){let I=y.view.ru(w);I.Cs&&(I=await lg(p.localStore,y.query,!1).then(({documents:A})=>y.view.ru(A,I)));const x=_&&_.targetChanges.get(y.targetId),P=_&&_.targetMismatches.get(y.targetId)!=null,L=y.view.applyChanges(I,p.isPrimaryClient,x,P);return Jw(p,y.targetId,L.au),L.snapshot}(t,h,f,m);const i=await lg(t.localStore,e,!0),o=new $2(e,i.Qs),a=o.ru(i.documents),l=Tf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Jw(t,n,c.au);const d=new NH(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function FH(t,e,n){const r=pe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!_f(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ru(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Pu(r.remoteStore,s.targetId),Cu(r,s.targetId)}).catch(Ea)):(Cu(r,s.targetId),await Ru(r.localStore,s.targetId,!0))}async function UH(t,e){const n=pe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pu(n.remoteStore,r.targetId))}async function jH(t,e,n){const r=MI(t);try{const s=await function(o,a){const l=pe(o),c=_t.now(),d=a.reduce((m,E)=>m.add(E.key),Ke());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=$r(),p=Ke();return l.Ns.getEntries(m,d).next(y=>{E=y,E.forEach((w,_)=>{_.isValidDocument()||(p=p.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(y=>{h=y;const w=[];for(const _ of a){const I=d7(_,h.get(_.key).overlayedDocument);I!=null&&w.push(new eo(_.key,I,pO(I.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(y=>{f=y;const w=y.applyToLocalDocumentSet(h,p);return l.documentOverlayCache.saveOverlays(m,y.batchId,w)})}).then(()=>({batchId:f.batchId,changes:CO(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Vt(je)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await to(r,s.changes),await Xu(r.remoteStore)}catch(s){const i=ed(s,"Failed to persist write");n.reject(i)}}async function z2(t,e){const n=pe(t);try{const r=await sH(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Re(o.hu,14607):s.removedDocuments.size>0&&(Re(o.hu,42227),o.hu=!1))}),await to(n,r,e)}catch(r){await Ea(r)}}function Wx(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&PI(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $H(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Vt(fe.comparator);o=o.insert(i,jt.newNoDocument(i,Ne.min()));const a=Ke().add(i),l=new If(Ne.min(),new Map,new Vt(je),o,a);await z2(r,l),r.du=r.du.remove(i),r.Au.delete(e),LI(r)}else await Ru(r.localStore,e,!1).then(()=>Cu(r,e,n)).catch(Ea)}async function BH(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await rH(n.localStore,e);OI(n,r,null),NI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await to(n,s)}catch(s){await Ea(s)}}async function zH(t,e,n){const r=pe(t);try{const s=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Re(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);OI(r,e,n),NI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await to(r,s)}catch(s){await Ea(s)}}async function WH(t,e){const n=pe(t);Sa(n.remoteStore)||ee(ba,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=pe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===ta)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=ed(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function NI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function OI(t,e,n){const r=pe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Cu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||W2(t,r)})}function W2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Pu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),LI(t))}function Jw(t,e,n){for(const r of n)r instanceof U2?(t.Ru.addReference(r.key,e),qH(t,r)):r instanceof j2?(ee(ba,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||W2(t,r.key)):Te(19791,{wu:r})}function qH(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ee(ba,"New document in limbo: "+n),t.Eu.add(r),LI(t))}function LI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new fe(it.fromString(e)),r=t.fu.next();t.Au.set(r,new OH(n)),t.du=t.du.insert(n,r),wy(t.remoteStore,new Ni(yr(Gu(n.path)),r,"TargetPurposeLimboResolution",Ur.ce))}}async function to(t,e,n){const r=pe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=_I.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=pe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Ia(h))throw h;ee(wI,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),E=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(f,p)}}}(r.localStore,i))}async function HH(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){ee(ba,"User change. New user:",e.toKey());const r=await w2(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new J(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await to(n,r.Ls)}}function KH(t,e){const n=pe(t),r=n.Au.get(e);if(r&&r.hu)return Ke().add(r.key);{let s=Ke();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function GH(t,e){const n=pe(t),r=await lg(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Jw(n,e.targetId,s.au),s}async function QH(t,e){const n=pe(t);return S2(n.localStore,e).then(r=>to(n,r))}async function YH(t,e,n,r){const s=pe(t),i=await function(a,l){const c=pe(a),d=pe(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Xu(s.remoteStore):n==="acknowledged"||n==="rejected"?(OI(s,e,r||null),NI(s,e),function(a,l){pe(pe(a).mutationQueue).ir(l)}(s.localStore,e)):Te(6720,"Unknown batchState",{Su:n}),await to(s,i)):ee(ba,"Cannot apply mutation batch with id: "+e)}async function JH(t,e){const n=pe(t);if(Ey(n),MI(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await qx(n,r.toArray());n.gu=!0,await Qw(n.remoteStore,!0);for(const i of s)wy(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Cu(n,o),Ru(n.localStore,o,!0))),Pu(n.remoteStore,o)}),await s,await qx(n,r),function(o){const a=pe(o);a.Au.forEach((l,c)=>{Pu(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Vt(fe.comparator)}(n),n.gu=!1,await Qw(n.remoteStore,!1)}}async function qx(t,e,n){const r=pe(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await xu(r.localStore,yr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await GH(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await T2(r.localStore,o);a=await xu(r.localStore,c),await DI(r,q2(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function q2(t){return TO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function XH(t){return function(n){return pe(pe(n).persistence).Ts()}(pe(t).localStore)}async function ZH(t,e,n,r){const s=pe(t);if(s.gu)return void ee(ba,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await S2(s.localStore,xO(i[0])),a=If.createSynthesizedRemoteEventForCurrentChange(e,n==="current",cn.EMPTY_BYTE_STRING);await to(s,o,a);break}case"rejected":await Ru(s.localStore,e,!0),Cu(s,e,r);break;default:Te(64155,n)}}async function eK(t,e,n){const r=Ey(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ee(ba,"Adding an already active target "+s);continue}const i=await T2(r.localStore,s),o=await xu(r.localStore,i);await DI(r,q2(i),o.targetId,!1,o.resumeToken),wy(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Ru(r.localStore,s,!1).then(()=>{Pu(r.remoteStore,s),Cu(r,s)}).catch(Ea)}}function Ey(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=z2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$H.bind(null,e),e.Pu.H_=kH.bind(null,e.eventManager),e.Pu.yu=DH.bind(null,e.eventManager),e}function MI(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zH.bind(null,e),e}function tK(t,e,n){const r=pe(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(m,E){const p=pe(m),y=_n(E.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",w=>p.Ii.getBundleMetadata(w,E.id)).then(w=>!!w&&w.createTime.compareTo(y)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(F2(l));const c=new kI(l,o.serializer);let d=await o.bu();for(;d;){const f=await c.Ga(d);f&&a._updateProgress(f),d=await o.bu()}const h=await c.ja(i.localStore);return await to(i,h.Ha,void 0),await function(m,E){const p=pe(m);return p.persistence.runTransaction("Save bundle","readwrite",y=>p.Ii.saveBundleMetadata(y,E))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return is(ba,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class ku{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _2(this.persistence,new v2,e.initialUser,this.serializer)}Cu(e){return new gI(_y.mi,this.serializer)}Du(e){return new P2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ku.provider={build:()=>new ku};class VI extends ku{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Re(this.persistence.referenceDelegate instanceof ag,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new h2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new gI(r=>ag.mi(r,n),this.serializer)}}class FI extends ku{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await MI(this.xu.syncEngine),await Xu(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return _2(this.persistence,new v2,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new h2(r,e.asyncQueue,n)}Mu(e,n){const r=new p8(n,this.persistence);return new m8(e.asyncQueue,r)}Cu(e){const n=vI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new yI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,C2(),np(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new P2}}class H2 extends FI{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Fv&&(this.sharedClientState.syncEngine={Co:YH.bind(null,n),vo:ZH.bind(null,n),Fo:eK.bind(null,n),Ts:XH.bind(null,n),Do:QH.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await JH(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=C2();if(!Fv.v(n))throw new J(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fv(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ma{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HH.bind(null,this.syncEngine),await Qw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CH}()}createDatastore(e){const n=zl(e.databaseInfo.databaseId),r=function(i){return new hH(i)}(e.databaseInfo);return function(i,o,a,l){return new gH(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new vH(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Wx(this.syncEngine,n,0),function(){return Vx.v()?new Vx:new lH}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new LH(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=pe(s);ee(Cl,"RemoteStore shutting down."),i.Ea.add(5),await Ju(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ma.provider={build:()=>new ma};function Hx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new er,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const s=await this.$u(r);return new V2(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new V2(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new J(U.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=pe(s),a={documents:i.map(h=>Gh(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,it.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const f=w7(o.serializer,h);c.set(f.key.toString(),f)});const d=[];return i.forEach(h=>{const f=c.get(h.toString());Re(!!f,55234,{key:h}),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=fe.fromPath(r);this.mutations.push(new aI(s,this.precondition(s)))}),await async function(r,s){const i=pe(r),o={writes:s.map(a=>Qh(i.serializer,a))};await i.Go("Commit",i.serializer.databaseId,it.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});n=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ne.min())?Gt.exists(!1):Gt.updateTime(n):Gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ne.min()))throw new J(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gt.updateTime(n)}return Gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new II(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new sK(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Yu(s)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!gf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!$O(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class oK{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jn.UNAUTHENTICATED,this.clientId=ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ee(pa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee(pa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ed(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jv(t,e){t.asyncQueue.verifyOperationInProgress(),ee(pa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await w2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UI(t);ee(pa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ux(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ux(e.remoteStore,s)),t._onlineComponents=e}async function UI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(pa,"Using user provided OfflineComponentProvider");try{await jv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;is("Error using user provided cache. Falling back to memory cache: "+n),await jv(t,new ku)}}else ee(pa,"Using default OfflineComponentProvider"),await jv(t,new VI(void 0));return t._offlineComponents}async function Ty(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(pa,"Using user provided OnlineComponentProvider"),await Kx(t,t._uninitializedComponentsProvider._online)):(ee(pa,"Using default OnlineComponentProvider"),await Kx(t,new ma))),t._onlineComponents}function K2(t){return UI(t).then(e=>e.persistence)}function td(t){return UI(t).then(e=>e.localStore)}function G2(t){return Ty(t).then(e=>e.remoteStore)}function jI(t){return Ty(t).then(e=>e.syncEngine)}function Q2(t){return Ty(t).then(e=>e.datastore)}async function Du(t){const e=await Ty(t),n=e.eventManager;return n.onListen=MH.bind(null,e.syncEngine),n.onUnlisten=FH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UH.bind(null,e.syncEngine),n}function aK(t){return t.asyncQueue.enqueue(async()=>{const e=await K2(t),n=await G2(t);return e.setNetworkEnabled(!0),function(s){const i=pe(s);return i.Ea.delete(0),Sf(i)}(n)})}function lK(t){return t.asyncQueue.enqueue(async()=>{const e=await K2(t),n=await G2(t);return e.setNetworkEnabled(!1),async function(s){const i=pe(s);i.Ea.add(0),await Ju(i),i.Ra.set("Offline")}(n)})}function cK(t,e){const n=new er;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=pe(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new J(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=ed(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await td(t),e,n)),n.promise}function Y2(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Iy({next:f=>{d.Nu(),o.enqueueAndForget(()=>RI(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new J(U.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new J(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new CI(Gu(a.path),d,{includeMetadataChanges:!0,qa:!0});return xI(i,h)}(await Du(t),t.asyncQueue,e,n,r)),r.promise}function uK(t,e){const n=new er;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await lg(s,i,!0),l=new $2(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=ed(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await td(t),e,n)),n.promise}function J2(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Iy({next:f=>{d.Nu(),o.enqueueAndForget(()=>RI(i,h)),f.fromCache&&l.source==="server"?c.reject(new J(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new CI(a,d,{includeMetadataChanges:!0,qa:!0});return xI(i,h)}(await Du(t),t.asyncQueue,e,n,r)),r.promise}function dK(t,e,n){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await Q2(t);r.resolve(async function(o,a,l){var p;const c=pe(o),{request:d,gt:h,parent:f}=XO(c.serializer,SO(a),l);c.connection.$o||delete d.parent;const m=(await c.Ho("RunAggregationQuery",c.serializer.databaseId,f,d,1)).filter(y=>!!y.result);Re(m.length===1,64727);const E=(p=m[0].result)==null?void 0:p.aggregateFields;return Object.keys(E).reduce((y,w)=>(y[h[w]]=E[w],y),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function hK(t,e){const n=new Iy(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){pe(s).Ca.add(i),i.next()}(await Du(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){pe(s).Ca.delete(i)}(await Du(t),n))}}function fK(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?zO().encode(o):o,function(d,h){return new nK(d,h)}(function(d,h){if(d instanceof Uint8Array)return Hx(d,h);if(d instanceof ArrayBuffer)return Hx(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,zl(e));t.asyncQueue.enqueueAndForget(async()=>{tK(await jI(t),s,r)})}function mK(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=pe(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ii.getNamedQuery(o,s))}(await td(t),e))}function X2(t,e){return function(r,s){return new rK(r,s)}(t,e)}function pK(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=pe(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,f,m,E,p){h=[...h],f=[...f],h.sort(m),f.sort(m);const y=h.length,w=f.length;let _=0,I=0;for(;_<w&&I<y;){const x=m(h[I],f[_]);x<0?p(h[I++]):x>0?E(f[_++]):(_++,I++)}for(;_<w;)E(f[_++]);for(;I<y;)p(h[I++])}(c,s,u8,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>M.waitFor(a)))}(await td(t),e))}function gK(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){pe(r).Fs.Vs=s}(await td(t),e))}function yK(t){return t.asyncQueue.enqueue(async()=>function(n){const r=pe(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await td(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="firestore.googleapis.com",Qx=!0;class Yx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eL,this.ssl=Qx}else this.host=e.host,this.ssl=e.ssl??Qx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d2)throw new J(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FN;switch(r.type){case"firstParty":return new r8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gx.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Gx.delete(n),r.terminate())}(this),Promise.resolve()}}function tL(t,e,n,r={}){var c;t=ot(t,bf);const s=$s(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(uf(`https://${a}`),Jg("Firestore",!0)),i.host!==eL&&i.host!==a&&is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Vs(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Jn.MOCK_USER;else{d=kD(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new J(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Jn(f)}t._authCredentials=new e8(new VN(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $n(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Bl(n,bt._jsonSchema))return new bt(e,r||null,new fe(it.fromString(n.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:Rn("string",bt._jsonSchemaVersion),referencePath:Rn("string")};class Ds extends $n{constructor(e,n,r){super(e,n,Gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new fe(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function ke(t,e,...n){if(t=tt(t),GE("collection","path",e),t instanceof bf){const r=it.fromString(e,...n);return FA(r),new Ds(t,null,r)}{if(!(t instanceof bt||t instanceof Ds))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return FA(r),new Ds(t.firestore,null,r)}}function vK(t,e){if(t=ot(t,bf),GE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $n(t,null,function(r){return new Xi(it.emptyPath(),r)}(e))}function Ce(t,e,...n){if(t=tt(t),arguments.length===1&&(e=ry.newId()),GE("doc","path",e),t instanceof bf){const r=it.fromString(e,...n);return VA(r),new bt(t,null,new fe(r))}{if(!(t instanceof bt||t instanceof Ds))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return VA(r),new bt(t.firestore,t instanceof Ds?t.converter:null,new fe(r))}}function _K(t,e){return t=tt(t),e=tt(e),(t instanceof bt||t instanceof Ds)&&(e instanceof bt||e instanceof Ds)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $I(t,e){return t=tt(t),e=tt(e),t instanceof $n&&e instanceof $n&&t.firestore===e.firestore&&_f(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="AsyncQueue";class Xx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new II(this,"async_queue_retry"),this._c=()=>{const r=np();r&&ee(Jx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=np();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=np();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new er;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ia(e))throw e;ee(Jx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,yn("INTERNAL UNHANDLED ERROR: ",Zx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=AI.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:Zx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Zx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class nL{constructor(){this._progressObserver={},this._taskCompletionResolver=new er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wK=-1;class Pt extends bf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xx(e),this._firestoreClient=void 0,await e}}}function rL(t,e,n){n||(n=Wh);const r=jl(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Vs(i,e))return s;throw new J(U.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new J(U.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d2)throw new J(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&$s(e.host)&&uf(e.host),r.initialize({options:e,instanceIdentifier:n})}function EK(t,e){const n=typeof t=="object"?t:Zg(),r=typeof t=="string"?t:e||Wh,s=jl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=OE("firestore");i&&tL(s,...i)}return s}function Xt(t){if(t._terminated)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sL(t),t._firestoreClient}function sL(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new W8(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Z2(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new oK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function IK(t,e){is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return iL(t,ma.provider,{build:r=>new FI(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function TK(t){is("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();iL(t,ma.provider,{build:n=>new H2(n,e.cacheSizeBytes)})}function iL(t,e,n){if((t=ot(t,Pt))._firestoreClient||t._terminated)throw new J(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new J(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},sL(t)}function SK(t){if(t._initialized&&!t._terminated)throw new J(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new er;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!hi.v())return Promise.resolve();const s=r+y2;await hi.delete(s)}(vI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function bK(t){return function(n){const r=new er;return n.asyncQueue.enqueueAndForget(async()=>WH(await jI(n),r)),r.promise}(Xt(t=ot(t,Pt)))}function BI(t){return aK(Xt(t=ot(t,Pt)))}function zI(t){return lK(Xt(t=ot(t,Pt)))}function AK(t){return Q9(t.app,"firestore",t._databaseId.database),t._delete()}function Xw(t,e){const n=Xt(t=ot(t,Pt)),r=new nL;return fK(n,t._databaseId,e,r),r}function oL(t,e){return mK(Xt(t=ot(t,Pt)),e).then(n=>n?new $n(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class aL{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(cn.fromBase64String(e))}catch(n){throw new J(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vr(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bl(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:Rn("string",Vr._jsonSchemaVersion),bytes:Rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function xK(){return new Aa(Rw)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ns._jsonSchemaVersion}}static fromJSON(e){if(Bl(e,Ns._jsonSchema))return new Ns(e.latitude,e.longitude)}}Ns._jsonSchemaVersion="firestore/geoPoint/1.0",Ns._jsonSchema={type:Rn("string",Ns._jsonSchemaVersion),latitude:Rn("number"),longitude:Rn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bl(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gs(e.vectorValues);throw new J(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:Rn("string",gs._jsonSchemaVersion),vectorValues:Rn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=/^__.*__$/;class PK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qu(e,this.data,n,this.fieldTransforms)}}class lL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new eo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:t})}}class Sy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cL(this.Ac)&&RK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zl(e)}Cc(e,n,r,s=!1){return new Sy({Ac:e,methodName:n,Dc:r,path:$t.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wl(t){const e=t._freezeSettings(),n=zl(t._databaseId);return new CK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function by(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);YI("Data must be an object, but it was:",o,r);const a=hL(r,o);let l,c;if(i.merge)l=new jr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Yh(e,h,n);if(!o.contains(f))throw new J(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);mL(d,f)||d.push(f)}l=new jr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new PK(new ir(a),l,c)}class Af extends xa{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Af}}function uL(t,e,n){return new Sy({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class WI extends xa{_toFieldTransform(e){return new Ef(e.path,new Su)}isEqual(e){return e instanceof WI}}class qI extends xa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=uL(this,e,!0),r=this.vc.map(i=>ql(i,n)),s=new bl(r);return new Ef(e.path,s)}isEqual(e){return e instanceof qI&&Vs(this.vc,e.vc)}}class HI extends xa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=uL(this,e,!0),r=this.vc.map(i=>ql(i,n)),s=new Al(r);return new Ef(e.path,s)}isEqual(e){return e instanceof HI&&Vs(this.vc,e.vc)}}class KI extends xa{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new bu(e.serializer,NO(e.serializer,this.Fc));return new Ef(e.path,n)}isEqual(e){return e instanceof KI&&this.Fc===e.Fc}}function GI(t,e,n,r){const s=t.Cc(1,e,n);YI("Data must be an object, but it was:",s,r);const i=[],o=ir.empty();Ta(r,(l,c)=>{const d=Ay(e,l,n);c=tt(c);const h=s.yc(d);if(c instanceof Af)i.push(d);else{const f=ql(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new jr(i);return new lL(o,a,s.fieldTransforms)}function QI(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Yh(e,r,n)],l=[s];if(i.length%2!=0)throw new J(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Yh(e,i[f])),l.push(i[f+1]);const c=[],d=ir.empty();for(let f=a.length-1;f>=0;--f)if(!mL(c,a[f])){const m=a[f];let E=l[f];E=tt(E);const p=o.yc(m);if(E instanceof Af)c.push(m);else{const y=ql(E,p);y!=null&&(c.push(m),d.set(m,y))}}const h=new jr(c);return new lL(d,h,o.fieldTransforms)}function dL(t,e,n,r=!1){return ql(n,t.Cc(r?4:3,e))}function ql(t,e){if(fL(t=tt(t)))return YI("Unsupported field value:",e,t),hL(t,e);if(t instanceof xa)return function(r,s){if(!cL(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ql(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_t.fromDate(r);return{timestampValue:Au(s.serializer,i)}}if(r instanceof _t){const i=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Au(s.serializer,i)}}if(r instanceof Ns)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:HO(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hI(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gs)return function(o,a){return{mapValue:{fields:{[tI]:{stringValue:nI},[Eu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return oI(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${sy(r)}`)}(t,e)}function hL(t,e){const n={};return oO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(t,(r,s)=>{const i=ql(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function fL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Ns||t instanceof Vr||t instanceof bt||t instanceof xa||t instanceof gs)}function YI(t,e,n){if(!fL(n)||!$N(n)){const r=sy(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Yh(t,e,n){if((e=tt(e))instanceof Aa)return e._internalPath;if(typeof e=="string")return Ay(t,e);throw hg("Field path arguments must be of type string or ",t,!1,void 0,n)}const kK=new RegExp("[~\\*/\\[\\]]");function Ay(t,e,n){if(e.search(kK)>=0)throw hg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Aa(...e.split("."))._internalPath}catch{throw hg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hg(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new J(U.INVALID_ARGUMENT,a+t+l)}function mL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DK extends Jh{data(){return super.data()}}function xy(t,e){return typeof e=="string"?Ay(t,e):e instanceof Aa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JI{}class nd extends JI{}function Ve(t,e,...n){let r=[];e instanceof JI&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Hl).length,a=i.filter(l=>l instanceof rd).length;if(o>1||o>0&&a>0)throw new J(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class rd extends nd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rd(e,n,r)}_apply(e){const n=this._parse(e);return yL(e._query,n),new $n(e.firestore,e.converter,Uw(e._query,n))}_parse(e){const n=Wl(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){tR(h,d);const E=[];for(const p of h)E.push(eR(l,i,p));f={arrayValue:{values:E}}}else f=eR(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||tR(h,d),f=dL(a,o,h,d==="in"||d==="not-in");return ht.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Oe(t,e,n){const r=e,s=xy("where",t);return rd._create(s,r,n)}class Hl extends JI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hl(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:St.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)yL(o,l),o=Uw(o,l)}(e._query,n),new $n(e.firestore,e.converter,Uw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function NK(...t){return t.forEach(e=>vL("or",e)),Hl._create("or",t)}function OK(...t){return t.forEach(e=>vL("and",e)),Hl._create("and",t)}class Ry extends nd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ry(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kh(i,o)}(e._query,this._field,this._direction);return new $n(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function na(t,e="asc"){const n=e,r=xy("orderBy",t);return Ry._create(r,n)}class xf extends nd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xf(e,n,r)}_apply(e){return new $n(e.firestore,e.converter,rg(e._query,this._limit,this._limitType))}}function sd(t){return BN("limit",t),xf._create("limit",t,"F")}function LK(t){return BN("limitToLast",t),xf._create("limitToLast",t,"L")}class Rf extends nd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Rf(e,n,r)}_apply(e){const n=gL(e,this.type,this._docOrFields,this._inclusive);return new $n(e.firestore,e.converter,function(s,i){return new Xi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function MK(...t){return Rf._create("startAt",t,!0)}function VK(...t){return Rf._create("startAfter",t,!1)}class Pf extends nd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Pf(e,n,r)}_apply(e){const n=gL(e,this.type,this._docOrFields,this._inclusive);return new $n(e.firestore,e.converter,function(s,i){return new Xi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function FK(...t){return Pf._create("endBefore",t,!1)}function UK(...t){return Pf._create("endAt",t,!0)}function gL(t,e,n,r){if(n[0]=tt(n[0]),n[0]instanceof Jh)return function(i,o,a,l,c){if(!l)throw new J(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Bc(i))if(h.field.isKeyField())d.push(Tl(o,l.key));else{const f=l.data.field(h.field);if(cy(f))throw new J(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new J(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new ha(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Wl(t.firestore);return function(o,a,l,c,d,h){const f=o.explicitOrderBy;if(d.length>f.length)throw new J(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let E=0;E<d.length;E++){const p=d[E];if(f[E].field.isKeyField()){if(typeof p!="string")throw new J(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof p}`);if(!sI(o)&&p.indexOf("/")!==-1)throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${p}' contains a slash.`);const y=o.path.child(it.fromString(p));if(!fe.isDocumentKey(y))throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const w=new fe(y);m.push(Tl(a,w))}else{const y=dL(l,c,p);m.push(y)}}return new ha(m,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function eR(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new J(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sI(e)&&n.indexOf("/")!==-1)throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!fe.isDocumentKey(r))throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tl(t,new fe(r))}if(n instanceof bt)return Tl(t,n._key);throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sy(n)}.`)}function tR(t,e){if(!Array.isArray(t)||t.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yL(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function vL(t,e){if(!(e instanceof rd||e instanceof Hl))throw new J(U.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class XI{convertValue(e,n="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ta(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Eu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ht(o.doubleValue));return new gs(n)}convertGeoPoint(e){return new Ns(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=uy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zh(e));default:return null}}convertTimestamp(e){const n=Gi(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Re(n2(r),9688,{name:e});const s=new ca(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||yn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ZI extends XI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(t){return new Nu("sum",Yh("sum",t))}function $K(t){return new Nu("avg",Yh("average",t))}function _L(){return new Nu("count")}function BK(t,e){var n,r;return t instanceof Nu&&e instanceof Nu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function zK(t,e){return $I(t.query,e.query)&&Vs(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="NOT SUPPORTED";class Oi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hr extends Jh{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function WK(t,e,n){if(Bl(e,Hr._jsonSchema)){if(e.bundle===wL)throw new J(U.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=zl(t._databaseId),s=X2(e.bundle,r),i=s.Wu(),o=new kI(s.getMetadata(),r);for(const d of i)o.Ga(d);const a=o.documents;if(a.length!==1)throw new J(U.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=my(r,a[0].document),c=new fe(it.fromString(e.bundleName));return new Hr(t,new ZI(t),c,l,new Oi(!1,!1),n||null)}}Hr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hr._jsonSchema={type:Rn("string",Hr._jsonSchemaVersion),bundleSource:Rn("string","DocumentSnapshot"),bundleName:Rn("string"),bundle:Rn("string")};class ch extends Hr{data(e={}){return super.data(e)}}class Kr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Oi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ch(this._firestore,this._userDataWriter,r.key,r,new Oi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ch(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ch(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:HK(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qK(t,e,n){if(Bl(e,Kr._jsonSchema)){if(e.bundle===wL)throw new J(U.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=zl(t._databaseId),s=X2(e.bundle,r),i=s.Wu(),o=new kI(s.getMetadata(),r);for(const f of i)o.Ga(f);if(o.queries.length!==1)throw new J(U.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=gy(o.queries[0].bundledQuery),l=o.documents;let c=new hl;l.map(f=>{const m=my(r,f.document);c=c.add(m)});const d=kl.fromInitialDocuments(a,c,Ke(),!1,!1),h=new $n(t,n||null,a);return new Kr(t,new ZI(t),h,d)}}function HK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}function KK(t,e){return t instanceof Hr&&e instanceof Hr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Kr&&e instanceof Kr&&t._firestore===e._firestore&&$I(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t){t=ot(t,bt);const e=ot(t.firestore,Pt);return Y2(Xt(e),t._key).then(n=>eT(e,t,n))}Kr._jsonSchemaVersion="firestore/querySnapshot/1.0",Kr._jsonSchema={type:Rn("string",Kr._jsonSchemaVersion),bundleSource:Rn("string","QuerySnapshot"),bundleName:Rn("string"),bundle:Rn("string")};class Ra extends XI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function GK(t){t=ot(t,bt);const e=ot(t.firestore,Pt),n=Xt(e),r=new Ra(e);return cK(n,t._key).then(s=>new Hr(e,r,t._key,s,new Oi(s!==null&&s.hasLocalMutations,!0),t.converter))}function QK(t){t=ot(t,bt);const e=ot(t.firestore,Pt);return Y2(Xt(e),t._key,{source:"server"}).then(n=>eT(e,t,n))}function Be(t){t=ot(t,$n);const e=ot(t.firestore,Pt),n=Xt(e),r=new Ra(e);return pL(t._query),J2(n,t._query).then(s=>new Kr(e,r,t,s))}function YK(t){t=ot(t,$n);const e=ot(t.firestore,Pt),n=Xt(e),r=new Ra(e);return uK(n,t._query).then(s=>new Kr(e,r,t,s))}function JK(t){t=ot(t,$n);const e=ot(t.firestore,Pt),n=Xt(e),r=new Ra(e);return J2(n,t._query,{source:"server"}).then(s=>new Kr(e,r,t,s))}function on(t,e,n){t=ot(t,bt);const r=ot(t.firestore,Pt),s=Py(t.converter,e,n);return id(r,[by(Wl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gt.none())])}function wn(t,e,n,...r){t=ot(t,bt);const s=ot(t.firestore,Pt),i=Wl(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof Aa?QI(i,"updateDoc",t._key,e,n,r):GI(i,"updateDoc",t._key,e),id(s,[o.toMutation(t._key,Gt.exists(!0))])}function Xn(t){return id(ot(t.firestore,Pt),[new Yu(t._key,Gt.none())])}function mi(t,e){const n=ot(t.firestore,Pt),r=Ce(t),s=Py(t.converter,e);return id(n,[by(Wl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function Zw(t,...e){var l,c,d;t=tt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||zc(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(zc(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof bt)o=ot(t.firestore,Pt),a=Gu(t._key.path),i={next:h=>{e[r]&&e[r](eT(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=ot(t,$n);o=ot(h.firestore,Pt),a=h._query;const f=new Ra(o);i={next:m=>{e[r]&&e[r](new Kr(o,f,h,m))},error:e[r+1],complete:e[r+2]},pL(t._query)}return function(f,m,E,p){const y=new Iy(p),w=new CI(m,y,E);return f.asyncQueue.enqueueAndForget(async()=>xI(await Du(f),w)),()=>{y.Nu(),f.asyncQueue.enqueueAndForget(async()=>RI(await Du(f),w))}}(Xt(o),a,s,i)}function XK(t,e,...n){const r=tt(t),s=function(l){const c={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const h of d){if(!(h in l)){c.error=`snapshotJson missing required field: ${h}`;break}const f=l[h];if(typeof f!="string"){c.error=`snapshotJson field '${h}' must be a string.`;break}if(f.length===0){c.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?c.bundle=f:h==="bundleName"?c.bundleName=f:h==="bundleSource"&&(c.bundleSource=f)}return c}(e);if(s.error)throw new J(U.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||zc(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&zc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,f,m){let E,p=!1;return Xw(c,d.bundle).then(()=>oL(c,d.bundleName)).then(w=>{w&&!p&&(m&&w.withConverter(m),E=Zw(w,h||{},f))}).catch(w=>(f.error&&f.error(w),()=>{})),()=>{p||(p=!0,E&&E())}}(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&zc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,f,m){let E,p=!1;return Xw(c,d.bundle).then(()=>{if(!p){const w=new bt(c,m||null,fe.fromPath(d.bundleName));E=Zw(w,h||{},f)}}).catch(w=>(f.error&&f.error(w),()=>{})),()=>{p||(p=!0,E&&E())}}(r,s,i,a,n[o])}throw new J(U.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function ZK(t,e){return hK(Xt(t=ot(t,Pt)),zc(e)?e:{next:e})}function id(t,e){return function(r,s){const i=new er;return r.asyncQueue.enqueueAndForget(async()=>jH(await jI(r),s,i)),i.promise}(Xt(t),e)}function eT(t,e,n){const r=n.docs.get(e._key),s=new Ra(t);return new Hr(t,s,e._key,r,new Oi(n.hasPendingWrites,n.fromCache),e.converter)}function EL(t){return IL(t,{count:_L()})}function IL(t,e){const n=ot(t.firestore,Pt),r=Xt(n),s=iO(e,(i,o)=>new jO(o,i.aggregateType,i._internalFieldPath));return dK(r,t._query,s).then(i=>function(a,l,c){const d=new Ra(a);return new aL(l,d,c)}(n,t,i))}class eG{constructor(e){this.kind="memory",this._onlineComponentProvider=ma.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new VI(void 0)}}toJSON(){return{kind:this.kind}}}class tG{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=TL(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class nG{constructor(){this.kind="memoryEager",this._offlineComponentProvider=ku.provider}toJSON(){return{kind:this.kind}}}class rG{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new VI(e)}}toJSON(){return{kind:this.kind}}}function sG(){return new nG}function iG(t){return new rG(t==null?void 0:t.cacheSizeBytes)}function oG(t){return new eG(t)}function aG(t){return new tG(t)}class lG{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ma.provider,this._offlineComponentProvider={build:n=>new FI(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class cG{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ma.provider,this._offlineComponentProvider={build:n=>new H2(n,e==null?void 0:e.cacheSizeBytes)}}}function TL(t){return new lG(t==null?void 0:t.forceOwnership)}function uG(){return new cG}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wl(e)}set(e,n,r){this._verifyNotCommitted();const s=$o(e,this._firestore),i=Py(s.converter,n,r),o=by(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Gt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=$o(e,this._firestore);let o;return o=typeof(n=tt(n))=="string"||n instanceof Aa?QI(this._dataReader,"WriteBatch.update",i._key,n,r,s):GI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$o(e,this._firestore);return this._mutations=this._mutations.concat(new Yu(n._key,Gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $o(t,e){if((t=tt(t)).firestore!==e)throw new J(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Wl(e)}get(e){const n=$o(e,this._firestore),r=new ZI(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Te(24041);const i=s[0];if(i.isFoundDocument())return new Jh(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Jh(this._firestore,r,n._key,null,n.converter);throw Te(18433,{doc:i})})}set(e,n,r){const s=$o(e,this._firestore),i=Py(s.converter,n,r),o=by(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=$o(e,this._firestore);let o;return o=typeof(n=tt(n))=="string"||n instanceof Aa?QI(this._dataReader,"Transaction.update",i._key,n,r,s):GI(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=$o(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL extends hG{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$o(e,this._firestore),r=new Ra(this._firestore);return super.get(e).then(s=>new Hr(this._firestore,r,n._key,s._document,new Oi(!1,!1),n.converter))}}function fG(t,e,n){t=ot(t,Pt);const r={...dG,...n};return function(i){if(i.maxAttempts<1)throw new J(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new er;return i.asyncQueue.enqueueAndForget(async()=>{const c=await Q2(i);new iK(i.asyncQueue,c,a,o,l).ju()}),l.promise}(Xt(t),s=>e(new bL(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(){return new Af("deleteField")}function Le(){return new WI("serverTimestamp")}function pG(...t){return new qI("arrayUnion",t)}function gG(...t){return new HI("arrayRemove",t)}function yG(t){return new KI("increment",t)}function vG(t){return new gs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t){return Xt(t=ot(t,Pt)),new SL(t,e=>id(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _G(t,e){const n=Xt(t=ot(t,Pt));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return is("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new J(U.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=nR(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const f=Ay("setIndexConfiguration",nR(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new ul(f,2)):h.order==="ASCENDING"?d.push(new ul(f,0)):h.order==="DESCENDING"&&d.push(new ul(f,1))}a.push(new pu(pu.UNKNOWN_ID,c,d,gu.empty()))}return a}(e);return pK(n,r)}function nR(t,e){if(typeof t[e]!="string")throw new J(U.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function wG(t){var s;t=ot(t,Pt);const e=rR.get(t);if(e)return e;if(((s=Xt(t)._uninitializedComponentsProvider)==null?void 0:s._offline.kind)!=="persistent")return null;const r=new AL(t);return rR.set(t,r),r}function EG(t){xL(t,!0)}function IG(t){xL(t,!1)}function TG(t){yK(Xt(t._firestore)).then(e=>ee("deleting all persistent cache indexes succeeded")).catch(e=>is("deleting all persistent cache indexes failed",e))}function xL(t,e){gK(Xt(t._firestore),e).then(n=>ee(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>is(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const rR=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SG(t){var r;const e=Xt(ot(t.firestore,Pt)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:py(n,yr(t._query)).ft}function bG(t,e){var i;const n=iO(e,(o,a)=>new jO(a,o.aggregateType,o._internalFieldPath)),r=Xt(ot(t.firestore,Pt)),s=(i=r._onlineComponents)==null?void 0:i.datastore.serializer;return s===void 0?null:XO(s,SO(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return nT.instance.onExistenceFilterMismatch(e)}}class nT{constructor(){this.Mc=new Map}static get instance(){return vm||(vm=new nT,function(n){if(ah)throw new Error("a TestingHooksSpi instance is already set");ah=n}(vm)),vm}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let vm=null;(function(e,n=!0){(function(s){Ku=s})($l),yi(new Fs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Pt(new t8(r.getProvider("auth-internal")),new s8(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),rs(LA,MA,e),rs(LA,MA,"esm2020")})();const Mn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:XI,AggregateField:Nu,AggregateQuerySnapshot:aL,Bytes:Vr,CACHE_SIZE_UNLIMITED:wK,CollectionReference:Ds,DocumentReference:bt,DocumentSnapshot:Hr,FieldPath:Aa,FieldValue:xa,Firestore:Pt,FirestoreError:J,GeoPoint:Ns,LoadBundleTask:nL,PersistentCacheIndexManager:AL,Query:$n,QueryCompositeFilterConstraint:Hl,QueryConstraint:nd,QueryDocumentSnapshot:ch,QueryEndAtConstraint:Pf,QueryFieldFilterConstraint:rd,QueryLimitConstraint:xf,QueryOrderByConstraint:Ry,QuerySnapshot:Kr,QueryStartAtConstraint:Rf,SnapshotMetadata:Oi,Timestamp:_t,Transaction:bL,VectorValue:gs,WriteBatch:SL,_AutoId:ry,_ByteString:cn,_DatabaseId:ca,_DocumentKey:fe,_EmptyAppCheckTokenProvider:i8,_EmptyAuthCredentialsProvider:FN,_FieldPath:$t,_TestingHooks:AG,_cast:ot,_debugAssert:Zq,_internalAggregationQueryToProtoRunAggregationQueryRequest:bG,_internalQueryToProtoQueryTarget:SG,_isBase64Available:B8,_logWarn:is,_validateIsNotUsedTogether:jN,addDoc:mi,aggregateFieldEqual:BK,aggregateQuerySnapshotEqual:zK,and:OK,arrayRemove:gG,arrayUnion:pG,average:$K,clearIndexedDbPersistence:SK,collection:ke,collectionGroup:vK,connectFirestoreEmulator:tL,count:_L,deleteAllPersistentCacheIndexes:TG,deleteDoc:Xn,deleteField:mG,disableNetwork:zI,disablePersistentCacheIndexAutoCreation:IG,doc:Ce,documentId:xK,documentSnapshotFromJSON:WK,enableIndexedDbPersistence:IK,enableMultiTabIndexedDbPersistence:TK,enableNetwork:BI,enablePersistentCacheIndexAutoCreation:EG,endAt:UK,endBefore:FK,ensureFirestoreConfigured:Xt,executeWrite:id,getAggregateFromServer:IL,getCountFromServer:EL,getDoc:Qt,getDocFromCache:GK,getDocFromServer:QK,getDocs:Be,getDocsFromCache:YK,getDocsFromServer:JK,getFirestore:EK,getPersistentCacheIndexManager:wG,increment:yG,initializeFirestore:rL,limit:sd,limitToLast:LK,loadBundle:Xw,memoryEagerGarbageCollector:sG,memoryLocalCache:oG,memoryLruGarbageCollector:iG,namedQuery:oL,onSnapshot:Zw,onSnapshotResume:XK,onSnapshotsInSync:ZK,or:NK,orderBy:na,persistentLocalCache:aG,persistentMultipleTabManager:uG,persistentSingleTabManager:TL,query:Ve,queryEqual:$I,querySnapshotFromJSON:qK,refEqual:_K,runTransaction:fG,serverTimestamp:Le,setDoc:on,setIndexConfiguration:_G,setLogLevel:LN,snapshotEqual:KK,startAfter:VK,startAt:MK,sum:jK,terminate:AK,updateDoc:wn,vector:vG,waitForPendingWrites:bK,where:Oe,writeBatch:tT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xG="type.googleapis.com/google.protobuf.Int64Value",RG="type.googleapis.com/google.protobuf.UInt64Value";function RL(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function fg(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>fg(e));if(typeof t=="function"||typeof t=="object")return RL(t,e=>fg(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ou(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case xG:case RG:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ou(e)):typeof t=="function"||typeof t=="object"?RL(t,e=>Ou(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Br extends Bs{constructor(e,n,r){super(`${rT}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Br.prototype)}}function PG(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mg(t,e){let n=PG(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!sR[o])return new Br("internal","internal");n=sR[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Ou(s))}}catch{}return n==="ok"?null:new Br(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Mr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="us-central1",kG=/^data: (.*?)(?:\n|$)/;function DG(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Br("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class NG{constructor(e,n,r,s,i=e0,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new CG(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=e0}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function OG(t,e,n){const r=$s(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(uf(t.emulatorOrigin+"/backends"),Jg("Functions",!0))}function LG(t,e,n){const r=s=>VG(t,e,s,{});return r.stream=(s,i)=>UG(t,e,s,i),r}function PL(t){return t.emulatorOrigin&&$s(t.emulatorOrigin)?"include":void 0}async function MG(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:PL(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function CL(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function VG(t,e,n,r){const s=t._url(e);return FG(t,s,n,r)}async function FG(t,e,n,r){n=fg(n);const s={data:n},i=await CL(t,r),o=r.timeout||7e4,a=DG(o),l=await Promise.race([MG(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Br("cancelled","Firebase Functions instance was deleted.");const c=mg(l.status,l.json);if(c)throw c;if(!l.json)throw new Br("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Br("internal","Response is missing data field.");return{data:Ou(d)}}function UG(t,e,n,r){const s=t._url(e);return jG(t,s,n,r||{})}async function jG(t,e,n,r){var f;n=fg(n);const s={data:n},i=await CL(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:PL(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new Br("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const E=mg(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const c=new Promise((m,E)=>{a=m,l=E});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Br("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=$G(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:E,done:p}=await m.read();return{value:E,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function $G(t,e,n,r){const s=(o,a)=>{const l=o.match(kG);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Ou(d.result));return}if("message"in d){a.enqueue(Ou(d.message));return}if("error"in d){const h=mg(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Br){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Br("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Br("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Br?c:mg(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const iR="@firebase/functions",oR="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG="auth-internal",zG="app-check-internal",WG="messaging-internal";function qG(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(BG),o=n.getProvider(WG),a=n.getProvider(zG);return new NG(s,i,o,a,r)};yi(new Fs(rT,e,"PUBLIC").setMultipleInstances(!0)),rs(iR,oR,t),rs(iR,oR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HG(t=Zg(),e=e0){const r=jl(tt(t),rT).getImmediate({identifier:e}),s=OE("functions");return s&&KG(r,...s),r}function KG(t,e,n){OG(tt(t),e,n)}function GG(t,e,n){return LG(tt(t),e)}qG();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="firebasestorage.googleapis.com",DL="storageBucket",QG=2*60*1e3,YG=10*60*1e3,JG=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends Bs{constructor(e,n,r=0){super($v(e),`Firebase Storage: ${n} (${$v(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $v(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zt||(zt={}));function $v(t){return"storage/"+t}function sT(){const t="An unknown error occurred, please check the error payload for server response.";return new un(zt.UNKNOWN,t)}function XG(t){return new un(zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ZG(t){return new un(zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eQ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(zt.UNAUTHENTICATED,t)}function tQ(){return new un(zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nQ(t){return new un(zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function NL(){return new un(zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OL(){return new un(zt.CANCELED,"User canceled the upload/download.")}function rQ(t){return new un(zt.INVALID_URL,"Invalid URL '"+t+"'.")}function sQ(t){return new un(zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iQ(){return new un(zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DL+"' property when initializing the app?")}function LL(){return new un(zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oQ(){return new un(zt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function aQ(){return new un(zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lQ(t){return new un(zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function t0(t){return new un(zt.INVALID_ARGUMENT,t)}function ML(){return new un(zt.APP_DELETED,"The Firebase app was deleted.")}function cQ(t){return new un(zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uh(t,e){return new un(zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Pd(t){throw new un(zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=es.makeFromUrl(e,n)}catch{return new es(e,"")}if(r.path==="")return r;throw sQ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),E={bucket:1,path:3},p=n===kL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",w=new RegExp(`^https?://${p}/${s}/${y}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:m,indices:E,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<I.length;x++){const P=I[x],L=P.regex.exec(e);if(L){const A=L[P.indices.bucket];let T=L[P.indices.path];T||(T=""),r=new es(A,T),P.postModify(r);break}}if(r==null)throw rQ(e);return r}}class uQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...y){c||(c=!0,e.apply(null,y))}function h(y){s=setTimeout(()=>{s=null,t(m,l())},y)}function f(){i&&clearTimeout(i)}function m(y,...w){if(c){f();return}if(y){f(),d.call(null,y,...w);return}if(l()||o){f(),d.call(null,y,...w);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let E=!1;function p(y){E||(E=!0,f(),!c&&(s!==null?(y||(a=2),clearTimeout(s),h(0)):y||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}function hQ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fQ(t){return t!==void 0}function mQ(t){return typeof t=="function"}function pQ(t){return typeof t=="object"&&!Array.isArray(t)}function Cy(t){return typeof t=="string"||t instanceof String}function aR(t){return iT()&&t instanceof Blob}function iT(){return typeof Blob<"u"}function lR(t,e,n,r){if(r<e)throw t0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw t0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VL(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var fl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fl||(fl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQ{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,p)=>{this.resolve_=E,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new _m(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===fl.NO_ERROR,l=i.getStatus();if(!a||FL(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===fl.ABORT;r(!1,new _m(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new _m(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());fQ(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=sT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?ML():OL();o(l)}else{const l=NL();o(l)}};this.canceled_?n(!1,new _m(!1,null,!0)):this.backoffId_=dQ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _m{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function yQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function vQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _Q(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function EQ(t,e,n,r,s,i,o=!0,a=!1){const l=VL(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return _Q(d,e),yQ(d,n),vQ(d,i),wQ(d,r),new gQ(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function TQ(...t){const e=IQ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(iT())return new Blob(t);throw new un(zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SQ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(t){if(typeof atob>"u")throw lQ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bv{constructor(e,n){this.data=e,this.contentType=n||null}}function AQ(t,e){switch(t){case oi.RAW:return new Bv(UL(e));case oi.BASE64:case oi.BASE64URL:return new Bv(jL(t,e));case oi.DATA_URL:return new Bv(RQ(e),PQ(e))}throw sT()}function UL(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function xQ(t){let e;try{e=decodeURIComponent(t)}catch{throw uh(oi.DATA_URL,"Malformed data URL.")}return UL(e)}function jL(t,e){switch(t){case oi.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw uh(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case oi.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw uh(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=bQ(e)}catch(s){throw s.message.includes("polyfill")?s:uh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class $L{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw uh(oi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=CQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function RQ(t){const e=new $L(t);return e.base64?jL(oi.BASE64,e.rest):xQ(e.rest)}function PQ(t){return new $L(t).contentType}function CQ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){let r=0,s="";aR(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(aR(this.data_)){const r=this.data_,s=SQ(r,e,n);return s===null?null:new Ri(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ri(r,!0)}}static getBlob(...e){if(iT()){const n=e.map(r=>r instanceof Ri?r.data_:r);return new Ri(TQ.apply(null,n))}else{const n=e.map(o=>Cy(o)?AQ(oi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ri(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){let e;try{e=JSON.parse(t)}catch{return null}return pQ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function DQ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function zL(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(t,e){return e}class Er{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||NQ}}let wm=null;function OQ(t){return!Cy(t)||t.length<2?t:zL(t)}function oT(){if(wm)return wm;const t=[];t.push(new Er("bucket")),t.push(new Er("generation")),t.push(new Er("metageneration")),t.push(new Er("name","fullPath",!0));function e(i,o){return OQ(o)}const n=new Er("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Er("size");return s.xform=r,t.push(s),t.push(new Er("timeCreated")),t.push(new Er("updated")),t.push(new Er("md5Hash",null,!0)),t.push(new Er("cacheControl",null,!0)),t.push(new Er("contentDisposition",null,!0)),t.push(new Er("contentEncoding",null,!0)),t.push(new Er("contentLanguage",null,!0)),t.push(new Er("contentType",null,!0)),t.push(new Er("metadata","customMetadata",!0)),wm=t,wm}function LQ(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new es(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function MQ(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return LQ(r,t),r}function WL(t,e,n){const r=BL(e);return r===null?null:MQ(t,r,n)}function VQ(t,e,n,r){const s=BL(e);if(s===null||!Cy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=Cf(f,n,r),E=VL({alt:"media",token:c});return m+E})[0]}function qL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class od{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(!t)throw sT()}function aT(t,e){function n(r,s){const i=WL(t,s,e);return Fi(i!==null),i}return n}function FQ(t,e){function n(r,s){const i=WL(t,s,e);return Fi(i!==null),VQ(i,s,t.host,t._protocol)}return n}function kf(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=tQ():s=eQ():n.getStatus()===402?s=ZG(t.bucket):n.getStatus()===403?s=nQ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function HL(t){const e=kf(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=XG(t.path)),i.serverResponse=s.serverResponse,i}return n}function UQ(t,e,n){const r=e.fullServerUrl(),s=Cf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new od(s,i,aT(t,n),o);return a.errorHandler=HL(e),a}function jQ(t,e,n){const r=e.fullServerUrl(),s=Cf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new od(s,i,FQ(t,n),o);return a.errorHandler=HL(e),a}function $Q(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function KL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=$Q(null,e)),r}function GL(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let x=0;x<2;x++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=KL(e,r,s),d=qL(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Ri.getBlob(h,r,f);if(m===null)throw LL();const E={name:c.fullPath},p=Cf(i,t.host,t._protocol),y="POST",w=t.maxUploadRetryTime,_=new od(p,y,aT(t,n),w);return _.urlParams=E,_.headers=o,_.body=m.uploadData(),_.errorHandler=kf(e),_}class pg{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function lT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Fi(!1)}return Fi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function BQ(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=KL(e,r,s),a={name:o.fullPath},l=Cf(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=qL(o,n),f=t.maxUploadRetryTime;function m(p){lT(p);let y;try{y=p.getResponseHeader("X-Goog-Upload-URL")}catch{Fi(!1)}return Fi(Cy(y)),y}const E=new od(l,c,m,f);return E.urlParams=a,E.headers=d,E.body=h,E.errorHandler=kf(e),E}function zQ(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=lT(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fi(!1)}h||Fi(!1);const f=Number(h);return Fi(!isNaN(f)),new pg(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new od(n,o,i,a);return l.headers=s,l.errorHandler=kf(e),l}const cR=256*1024;function WQ(t,e,n,r,s,i,o,a){const l=new pg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw oQ();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const E={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,f);if(p===null)throw LL();function y(x,P){const L=lT(x,["active","final"]),A=l.current+d,T=r.size();let R;return L==="final"?R=aT(e,i)(x,P):R=null,new pg(A,T,L==="final",R)}const w="POST",_=e.maxUploadRetryTime,I=new od(n,w,y,_);return I.headers=E,I.body=p.uploadData(),I.progressCallback=a||null,I.errorHandler=kf(t),I}const Or={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zv(t){switch(t){case"running":case"pausing":case"canceling":return Or.RUNNING;case"paused":return Or.PAUSED;case"success":return Or.SUCCESS;case"canceled":return Or.CANCELED;case"error":return Or.ERROR;default:return Or.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e,n,r){if(mQ(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class HQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Pd("cannot .send() more than once");if($s(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class KQ extends HQ{initXhr(){this.xhr_.responseType="text"}}function Ha(){return new KQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=oT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(zt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(FL(s.status,[]))if(i)s=NL();else{this.sleepTime=Math.max(this.sleepTime*2,JG),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(zt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=BQ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ha,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=zQ(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Ha,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=cR*this._chunkMultiplier,n=new pg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=WQ(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ha,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){cR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=UQ(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ha,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=GL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ha,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=OL(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=zv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new qQ(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(zv(this._state)){case Or.SUCCESS:nc(this._resolve.bind(null,this.snapshot))();break;case Or.CANCELED:case Or.ERROR:const n=this._reject;nc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(zv(this._state)){case Or.RUNNING:case Or.PAUSED:e.next&&nc(e.next.bind(e,this.snapshot))();break;case Or.SUCCESS:e.complete&&nc(e.complete.bind(e))();break;case Or.CANCELED:case Or.ERROR:e.error&&nc(e.error.bind(e,this._error))();break;default:e.error&&nc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this._service=e,n instanceof es?this._location=n:this._location=es.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Dl(e,n)}get root(){const e=new es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zL(this._location.path)}get storage(){return this._service}get parent(){const e=kQ(this._location.path);if(e===null)return null;const n=new es(this._location.bucket,e);return new Dl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cQ(e)}}function QQ(t,e,n){t._throwIfRoot("uploadBytes");const r=GL(t.storage,t._location,oT(),new Ri(e,!0),n);return t.storage.makeRequestWithTokens(r,Ha).then(s=>({metadata:s,ref:t}))}function YQ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new GQ(t,new Ri(e),n)}function JQ(t){t._throwIfRoot("getDownloadURL");const e=jQ(t.storage,t._location,oT());return t.storage.makeRequestWithTokens(e,Ha).then(n=>{if(n===null)throw aQ();return n})}function XQ(t,e){const n=DQ(t._location.path,e),r=new es(t._location.bucket,n);return new Dl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZQ(t){return/^[A-Za-z]+:\/\//.test(t)}function eY(t,e){return new Dl(t,e)}function QL(t,e){if(t instanceof cT){const n=t;if(n._bucket==null)throw iQ();const r=new Dl(n,n._bucket);return e!=null?QL(r,e):r}else return e!==void 0?XQ(t,e):t}function tY(t,e){if(e&&ZQ(e)){if(t instanceof cT)return eY(t,e);throw t0("To use ref(service, url), the first argument must be a Storage instance.")}else return QL(t,e)}function uR(t,e){const n=e==null?void 0:e[DL];return n==null?null:es.makeFromBucketSpec(n,t)}function nY(t,e,n,r={}){t.host=`${e}:${n}`;const s=$s(e);s&&(uf(`https://${t.host}/b`),Jg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:kD(i,t.app.options.projectId))}class cT{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=kL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QG,this._maxUploadRetryTime=YG,this._requests=new Set,s!=null?this._bucket=es.makeFromBucketSpec(s,this._host):this._bucket=uR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=es.makeFromBucketSpec(this._url,e):this._bucket=uR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new uQ(ML());{const o=EQ(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const dR="@firebase/storage",hR="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="storage";function hZ(t,e,n){return t=tt(t),QQ(t,e,n)}function rY(t,e,n){return t=tt(t),YQ(t,e,n)}function sY(t){return t=tt(t),JQ(t)}function iY(t,e){return t=tt(t),tY(t,e)}function JL(t=Zg(),e){t=tt(t);const r=jl(t,YL).getImmediate({identifier:e}),s=OE("storage");return s&&oY(r,...s),r}function oY(t,e,n,r={}){nY(t,e,n,r)}function aY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new cT(n,r,s,e,$l)}function lY(){yi(new Fs(YL,aY,"PUBLIC").setMultipleInstances(!0)),rs(dR,hR,""),rs(dR,hR,"esm2020")}lY();const cY={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},gg={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:gg.projectId,authDomain:gg.authDomain,emulatorMode:!1});const ky=VD(gg);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Ot=oN(ky,{persistence:[zE,Ew]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const G=rL(ky,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{LN("error")}catch{}const XL=HG(ky,"us-central1");JL(ky);console.log(" Firebase initialized successfully");const uY=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(uY,100);let $a=0;const Wv=3,dY=1e3,ZL=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&$a<Wv){$a++;const r=Math.min(dY*Math.pow(2,$a-1),1e4);console.log(` Attempting to reconnect (${$a}/${Wv}) in ${r}ms...`);try{await zI(G),await new Promise(s=>setTimeout(s,r)),await BI(G),console.log(" Firestore reconnected successfully"),$a=0}catch(s){console.error(" Failed to reconnect:",s),$a>=Wv&&(console.error(" Maximum reconnection attempts reached."),hY())}}},hY=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await BI(G),$a=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await zI(G),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(ZL(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const qt=Object.freeze(Object.defineProperty({__proto__:null,auth:Ot,db:G,firebaseConfig:gg,functions:XL,handleFirestoreError:ZL},Symbol.toStringTag,{value:"Module"})),st=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},fY=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Nl=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Nl(n)).filter(n=>n!==void 0);if(t instanceof Date||!fY(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Nl(r);s!==void 0&&(e[n]=s)}return e},rp={async create(t){await on(Ce(G,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Le()})},async getById(t){const e=Ce(G,"profiles",t),n=await Qt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:st(r.createdAt)}}return null},async update(t,e){const n=Ce(G,"profiles",t);await wn(n,{...e,updatedAt:Le()})},async getByShopId(t){const e=Ve(ke(G,"profiles"),Oe("shopId","==",t));return(await Be(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:st(s.createdAt)}})}},n0={async create(t){return(await mi(ke(G,"referrals"),{...t,createdAt:Le(),updatedAt:Le()})).id},async getByReferrerId(t){try{const e=Ve(ke(G,"referrals"),Oe("referrerId","==",t),na("createdAt","desc"));return(await Be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt),updatedAt:st(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Ve(ke(G,"referrals"),Oe("referrerId","==",t));return(await Be(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:st(i.data().createdAt),updatedAt:st(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Ve(ke(G,"referrals"),Oe("referralCode","==",t),sd(1)),n=await Be(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:st(r.data().createdAt),updatedAt:st(r.data().updatedAt)}},async updateStatus(t,e){await wn(Ce(G,"referrals",t),{status:e,updatedAt:Le()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},eM={async getByUserId(t){const e=Ve(ke(G,"profiles"),Oe("userId","==",t)),n=await Be(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:st(s.createdAt),updatedAt:st(s.updatedAt)}}return null},async update(t,e){const n=Ve(ke(G,"profiles"),Oe("userId","==",t)),r=await Be(n);if(!r.empty){const s=Ce(G,"profiles",r.docs[0].id);await wn(s,{...e,updatedAt:Le()})}}},Bo={async create(t){return(await mi(ke(G,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Le(),updatedAt:Le()})).id},async getByMerchantId(t){const e=Ve(ke(G,"merchantWallets"),Oe("merchantUserId","==",t)),r=(await Be(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Ve(ke(G,"wallets"),Oe("userId","==",t));return(await Be(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=Ce(G,"merchantWallets",t),n=await Qt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:st(r.createdAt),updatedAt:st(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=Ve(ke(G,"merchantWallets"),Oe("iccid","==",t)),n=await Be(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:st(s.createdAt),updatedAt:st(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=Ve(ke(G,"merchantWallets"),Oe("msisdn","==",t)),r=await Be(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}}const s=Ve(ke(G,"merchantWallets")),i=await Be(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Ce(G,"merchantWallets",t);await wn(n,{...e,updatedAt:Le()})},async updateUsage(t,e,n){const r=Ce(G,"merchantWallets",t),s={updatedAt:Le()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await wn(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Ve(ke(G,"merchantWallets"),Oe("msisdn","in",o)),c=(await Be(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await wn(d.ref,{merchantUserId:e,updatedAt:Le()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Ce(G,"merchantWallets",t);await Xn(e)}},uT={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await ne(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>tl);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Le(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await mi(ke(G,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await ne(async()=>{const{ProfitService:d}=await import("./profitService-Bwg-yNfl.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await Bo.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),m=Number(t.amount||0),E=String((t==null?void 0:t.originType)||"").trim()==="withdraw",p=String(t.txnType||"")==="receive";E||p?await Bo.updateUsage(c,void 0,f+m):await Bo.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const p=await Bo.getById(h);m=String((p==null?void 0:p.msisdn)||(p==null?void 0:p.label)||h).trim()}catch{}let E="";f==="withdraw"?E=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?E=`   ${c}   ${m||" "}   ${d||""}    ${r}`:E=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Ve(ke(G,"transactions"),Oe("shopId","==",t),na("createdAt","desc"));return(await Be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt),confirmedAt:r.data().confirmedAt?st(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Ve(ke(G,"transactions"),Oe("merchantUserId","==",t),na("createdAt","desc"));return(await Be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt),confirmedAt:r.data().confirmedAt?st(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Ve(ke(G,"transactions"),Oe("merchantUserId","==",t)),n=Ve(ke(G,"transactions"),Oe("userId","==",t)),[r,s]=await Promise.all([Be(e),Be(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:st(c.createdAt),confirmedAt:c.confirmedAt?st(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=Ce(G,"transactions",t);await wn(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function mY(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await uT.create(e);try{const{calculateCommission:r}=await ne(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>tl);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Xr.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await ne(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>tl);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Xr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Xr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await ne(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>l0);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const pY="https://summer-cake-5149.alkaptin2030.workers.dev",tM={async getTelegramWorkerUrl(){var t;try{const e=Ce(G,"systemSettings","core"),n=await Qt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Ce(G,"systemSettings","core");await on(e,{telegramWorkerUrl:t,updatedAt:Le()},{merge:!0})}},gY={async send(t,e){try{const n=await Xr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await tM.getTelegramWorkerUrl()||pY).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},yY={async log(t,e,n,r,s){await mi(ke(G,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Le()})},async getLogs(t=100){const e=Ve(ke(G,"auditLogs"),na("createdAt","desc"),sd(t));return(await Be(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Ve(ke(G,"deletedTransactions"),na("deletedAt","desc"));return(await Be(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:st(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Ve(ke(G,"deletedTransactions"),Oe("userId","==",t),na("deletedAt","desc"));return(await Be(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:st(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Ve(ke(G,"deletedTransactions"),Oe("userId","==",t));return(await Be(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:st(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Le(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await mi(ke(G,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Ve(ke(G,"deletedTransactions"),Oe("originalTransactionId","==",t),Oe("userId","==",e)),r=await Be(n);r.empty?await mi(ke(G,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Le()}):await Promise.all(r.docs.map(s=>wn(s.ref,{permanent:!0,deletedAt:Le()}))),console.log("    :",t);try{const s=Ve(ke(G,"userTransactions"),Oe("userId","==",e)),o=(await Be(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Xn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Ce(G,"transactions",t);(await Qt(s)).exists()&&(console.log("     transactions  "),await Xn(s));const o=Ve(ke(G,"transactions"),Oe("transactionId","==",t)),a=await Be(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Xn(d.ref))));const l=Ve(ke(G,"transactions"),Oe("originalTransactionId","==",t)),c=await Be(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Xn(d.ref))));try{const d=Ve(ke(G,"deletedTransactions"),Oe("userId","==",e),Oe("originalTransactionId","==",t)),h=await Be(d),f=h.docs.map(E=>{var p;return String(((p=E.data())==null?void 0:p.reference)||"")}).filter(Boolean),m=h.docs.map(E=>{var p;return String(((p=E.data())==null?void 0:p.transactionId)||"")}).filter(Boolean);for(const E of f){const p=Ve(ke(G,"transactions"),Oe("reference","==",E)),y=await Be(p);y.empty||(console.log(`  ${y.size}   transactions  reference=${E}`),await Promise.all(y.docs.map(w=>Xn(w.ref))))}for(const E of m){try{const w=Ce(G,"transactions",E);(await Qt(w)).exists()&&(console.log("     transactions  :",E),await Xn(w))}catch{}const p=Ve(ke(G,"transactions"),Oe("transactionId","==",E)),y=await Be(p);y.empty||(console.log(`  ${y.size}   transactions  transactionId=${E}`),await Promise.all(y.docs.map(w=>Xn(w.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},nM={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=Ce(G,"daily_reports_archive",e);return await on(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Le()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=Ve(ke(G,"daily_reports_archive"),Oe("userId","==",t),sd(e)),a=await Be(o);let l=[];try{l=(await Be(Ve(ke(G,"deletedDailyArchives"),Oe("userId","==",t)))).docs.map(E=>{var p,y;return{id:E.id,reportDate:String(((p=E.data())==null?void 0:p.reportDate)||""),archiveId:String(((y=E.data())==null?void 0:y.archiveId)||"")}})}catch{}const c=(m,E)=>l.some(p=>p.archiveId&&p.archiveId===m||p.reportDate&&p.reportDate===E),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:st(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const E=h.get(m.reportDate);(!E||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=E.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,E)=>m.reportDate<E.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Ve(ke(G,"daily_reports_archive"),Oe("userId","==",t)),s=await Be(r);let i=0;for(const o of s.docs){const a=st(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Xn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Ve(ke(G,"daily_reports_archive"),Oe("userId","==",t)),s=(await Be(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:st(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Xn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=Ve(ke(G,"daily_reports_archive"),Oe("userId","==",t)),n=await Be(e);let r=0;for(const s of n.docs)try{await Xn(s.ref),r++}catch{const o=s.data();try{await mi(ke(G,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Le()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Xr={async getUserData(t){try{console.log("     :",{userId:t});const e=Ce(G,"users",t),n=await Qt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:st(r.createdAt),updatedAt:st(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},async syncDeletedTransactionsLocal(t){try{const e=Ve(ke(G,"deletedTransactions"),Oe("userId","==",t));(await Be(e)).docs.forEach(r=>{const s=r.data();if(!((s==null?void 0:s.permanent)===!0))return;const o=String((s==null?void 0:s.originalTransactionId)||""),a=String((s==null?void 0:s.transactionId)||""),l=String((s==null?void 0:s.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch(e){console.warn("syncDeletedTransactionsLocal failed:",e)}},async saveUserData(t,e){try{const n=Ce(G,"users",t),r=Nl(e);await on(n,{...r||{},updatedAt:Le()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Ce(G,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Nl(r);let i={};try{const l=await Qt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Le()};console.log("   :",o);let a=3;for(;a>0;)try{await on(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=Ve(ke(G,"userTransactions"),Oe("userId","==",t),na("createdAt","desc"),sd(200));e=await Be(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=Ve(ke(G,"userTransactions"),Oe("userId","==",t));e=await Be(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:st(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=Ve(ke(G,"deletedTransactions"),Oe("userId","==",t),Oe("reference","==",o));if(!(await Be(a)).empty)return console.log("          ."),"skip-deleted"}{const a=Ve(ke(G,"deletedTransactions"),Oe("userId","==",t),Oe("permanent","==",!0)),l=await Be(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),m=String(f.originalTransactionId||f.transactionId||h.id||""),E=String(f.reference||"");return m&&c.includes(m)||E&&c.includes(E)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=Ve(ke(G,"userTransactions"),Oe("userId","==",t));if(s.transactionId){const a=Ve(ke(G,"userTransactions"),Oe("userId","==",t),Oe("transactionId","==",s.transactionId)),l=await Be(a);if(!l.empty){const c=l.docs[0];return await wn(Ce(G,"userTransactions",c.id),{...s,uploadedAt:Le()}),c.id}}if(s.reference){const a=Ve(ke(G,"userTransactions"),Oe("userId","==",t),Oe("reference","==",s.reference)),l=await Be(a);if(!l.empty){const c=l.docs[0];return await wn(Ce(G,"userTransactions",c.id),{...s,uploadedAt:Le()}),c.id}}}catch(o){console.warn("      saveUserTransaction  :",o)}return(await mi(ke(G,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Le(),uploadedAt:Le()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Ce(G,"userTransactions",e),a=await Qt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Xn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=Ve(ke(G,"userTransactions"),Oe("userId","==",t)),r=await Be(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[Ve(ke(G,"userTransactions"),Oe("merchantUserId","==",t)),Ve(ke(G,"userTransactions"),Oe("createdBy","==",t))];for(const o of i)try{const l=(await Be(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Xn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Ce(G,"transactions",e);if((await Qt(a)).exists())console.log("     transactions   "),await Xn(a);else{const c=Ve(ke(G,"transactions"),Oe("transactionId","==",e)),d=await Be(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Xn(m.ref))));const h=Ve(ke(G,"transactions"),Oe("originalTransactionId","==",e)),f=await Be(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Xn(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},r0={async getToday(t){const e=Ce(G,"dailyStats",t,"today","data"),n=await Qt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Ce(G,"dailyStats",t,"today","data");await on(n,{...Nl(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Ce(G,"dailyStats",t,"history",e);await on(r,Nl(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},vY={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Le()};return(await mi(ke(G,"installments"),n)).id},async getByUser(t){try{const e=Ve(ke(G,"installments"),Oe("userId","==",t));return(await Be(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("installments fetch error",e),[]}},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await wn(Ce(G,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Xn(Ce(G,"installments",t)),!0}},rc=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:vY,auditLogService:yY,dailyReportsArchiveService:nM,dailyStatsService:r0,merchantWalletService:Bo,profileService:rp,profileServiceExtra:eM,recordAutoTransaction:mY,referralService:n0,sanitizeFirestoreData:Nl,systemSettingsService:tM,telegramNotifier:gY,transactionService:uT,userDataService:Xr},Symbol.toStringTag,{value:"Module"}));var Ka=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t.BRANCH="branch",t))(Ka||{});const ml=t=>{if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();if(t.seconds!==void 0&&typeof t.seconds=="number")return new Date(t.seconds*1e3);const e=new Date(t);return isNaN(e.getTime())?null:e},_Y=(t,e=new Date)=>{const n=ml(e)||new Date;switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},fR=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const r=new Date,s=ml(t.activatedAt);return s&&r.getTime()-s.getTime()<4*60*60*1e3,!0}const e=new Date,n=ml(t.endDate);if(!n){const r=ml(t.activatedAt);return r&&e.getTime()-r.getTime()<4*60*60*1e3,!0}return e<=n},wY=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=ml(t.endDate);if(!n)return null;const r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},fZ=async(t,e,n,r)=>{try{const s=new Date,i=_Y(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Ce(G,"users",t);await wn(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});try{const l=await Qt(a);if(l.exists()){const c=l.data();if(c.ownerId){const d=c.ownerId;try{const h=Ce(G,"users",d,"branches",t);await wn(h,{isActive:!0,updatedAt:new Date})}catch(h){console.warn("Could not update branch reference in parent subcollection",h)}}}}catch(l){console.warn("Error syncing branch status to parent:",l)}if(console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},mZ=async t=>{try{const e=tT(G),n=Ce(G,"users",t);e.update(n,{"subscription.isActive":!1,isActive:!1,"branchPackage.status":"canceled","branchPackage.canceledAt":new Date,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});const r=Ve(ke(G,"users"),Oe("ownerId","==",t)),s=await Be(r);s.forEach(i=>{e.update(i.ref,{isActive:!1,"subscription.isActive":!1,updatedAt:new Date})}),await e.commit(),console.log(`      ${t}   (${s.size})`)}catch(e){throw console.error("     :",e),new Error("    ")}},EY=async t=>{try{const e=tT(G),n=Ce(G,"users",t);e.update(n,{"branchPackage.status":"expired","branchPackage.expiredAt":new Date,updatedAt:new Date});const r=Ve(ke(G,"users"),Oe("ownerId","==",t));(await Be(r)).forEach(i=>{e.update(i.ref,{isActive:!1,updatedAt:new Date})}),await e.commit(),console.log(` Branch package expired for user ${t}`)}catch(e){console.error("Failed to expire branch package:",e)}},IY=async(t,e)=>{if((e==null?void 0:e.status)!=="active"||!e.endDate)return;const n=ml(e.endDate);n&&new Date>n&&(console.log(`Branch package expired for user ${t}. Deactivating...`),await EY(t))},TY=async t=>{try{const e=Ce(G,"users",t),n=await Qt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},pZ=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";case"branch":return" ";default:return" "}},gZ=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=wY(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},yZ=t=>{const e=ml(t);return e?e.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" "};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Lu;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Lu||(Lu={}));class qv extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const SY=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},bY=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:SY(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const E=s(),p=a(h);let y;const w=async()=>(!y&&E in f?y=typeof f[E]=="function"?y=await f[E]():y=f[E]:e!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),_=(T,R)=>{var C,N;if(p){const O=p==null?void 0:p.methods.find(k=>R===k.name);if(O)return O.rtype==="promise"?k=>n.nativePromise(h,R.toString(),k):(k,B)=>n.nativeCallback(h,R.toString(),k,B);if(T)return(C=T[R])===null||C===void 0?void 0:C.bind(T)}else{if(T)return(N=T[R])===null||N===void 0?void 0:N.bind(T);throw new qv(`"${h}" plugin is not implemented on ${E}`,Lu.Unimplemented)}},I=T=>{let R;const C=(...N)=>{const O=w().then(k=>{const B=_(k,T);if(B){const ce=B(...N);return R=ce==null?void 0:ce.remove,ce}else throw new qv(`"${h}.${T}()" is not implemented on ${E}`,Lu.Unimplemented)});return T==="addListener"&&(O.remove=async()=>R()),O};return C.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:T,writable:!1,configurable:!1}),C},x=I("addListener"),P=I("removeListener"),L=(T,R)=>{const C=x({eventName:T},R),N=async()=>{const k=await C;P({eventName:T,callbackId:k},R)},O=new Promise(k=>C.then(()=>k({remove:N})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},O},A=new Proxy({},{get(T,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?L:x;case"removeListener":return P;default:return I(R)}}});return r[h]=A,c.set(h,{name:h,proxy:A,platforms:new Set([...Object.keys(f),...p?[E]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=qv,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},AY=t=>t.Capacitor=bY(t),Ie=AY(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Df=Ie.registerPlugin;class rM{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Ie.Exception(e,Lu.Unimplemented)}unavailable(e="not available"){return new Ie.Exception(e,Lu.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const mR=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),pR=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class xY extends rM{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=pR(s).trim(),i=pR(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=mR(e.key),r=mR(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Df("CapacitorCookies",{web:()=>new xY});const RY=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),PY=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},CY=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,kY=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=PY(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class DY extends rM{async request(e){const n=kY(e,e.webFetchExtra),r=CY(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await RY(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Df("CapacitorHttp",{web:()=>new DY});const Ga=Df("Preferences",{web:()=>ne(()=>import("./web-CMBZ5lFq.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Hv=Object.freeze(Object.defineProperty({__proto__:null,Preferences:Ga},Symbol.toStringTag,{value:"Module"})),NY={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},sM=S.createContext(void 0);function Ws(){const t=S.useContext(sM);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const OY=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(null),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,d]=S.useState(!0),h=S.useRef(null);S.useEffect(()=>{const T=()=>{console.log(" Received userSubscriptionUpdated event - Refreshing profile..."),e&&(f(e.uid,!0),I())};return window.addEventListener("userSubscriptionUpdated",T),()=>{window.removeEventListener("userSubscriptionUpdated",T)}},[e]);const f=async(T,R=!1)=>{var C,N,O,k,B,ce,he,Se;try{const $=Ce(G,"profiles",T),q=`profile_cache_v2_${T}`,X=Date.now(),we=1e3*60*60*24;if(!R)try{const re=localStorage.getItem(q);if(re){const{data:ve,timestamp:j}=JSON.parse(re);if(X-j<we&&(s(ve),d(!1),console.log(" Profile loaded from cache (valid)"),!(X-j>1e3*60*60)))return}}catch(re){console.warn("Cache parse error:",re)}const Ee=await Qt($);if(Ee.exists()){const re=Ee.data(),ve={userId:Ee.id,shopId:re.shopId,role:re.role,fullName:re.fullName,phone:re.phone,sim1Number:re.sim1Number||null,sim2Number:re.sim2Number||null,shopName:re.shopName||null,approved:re.approved,avatarId:re.avatarId,bridgeLink:re.bridgeLink||null,bridgeDeviceId:re.bridgeDeviceId||null,showWithdrawNote:re.showWithdrawNote!==void 0?!!re.showWithdrawNote:!0,isReceiptNoteEnabled:re.isReceiptNoteEnabled!==void 0?!!re.isReceiptNoteEnabled:!0,smsReadingEnabled:re.smsReadingEnabled!==void 0?!!re.smsReadingEnabled:!1,smsAutoRegisterEnabled:re.smsAutoRegisterEnabled!==void 0?!!re.smsAutoRegisterEnabled:!1,createdAt:((N=(C=re.createdAt)==null?void 0:C.toDate)==null?void 0:N.call(C))||new Date,updatedAt:((k=(O=re.updatedAt)==null?void 0:O.toDate)==null?void 0:k.call(O))||new Date,trialStarted:re.trialStarted||!1,trialStartDate:(ce=(B=re.trialStartDate)==null?void 0:B.toDate)==null?void 0:ce.call(B),trialEndDate:(Se=(he=re.trialEndDate)==null?void 0:he.toDate)==null?void 0:Se.call(he),trialExpired:re.trialExpired||!1,referralCode:re.referralCode||null,referredBy:re.referredBy||null};s(ve);try{localStorage.setItem(q,JSON.stringify({data:ve,timestamp:X})),ve.shopId&&localStorage.setItem("shopId",ve.shopId)}catch{}}else try{const re=await eM.getByUserId(T);if(re){const ve={userId:T,shopId:re.shopId,role:re.role||"user",fullName:re.fullName||null,phone:re.phone||null,shopName:re.shopName||null,approved:re.approved??!1,avatarId:re.avatarId||void 0,bridgeLink:re.bridgeLink||null,bridgeDeviceId:re.bridgeDeviceId||null,createdAt:Le(),updatedAt:Le()};await on(Ce(G,"profiles",T),ve,{merge:!0}),s({...re,userId:T})}else await E(T)}catch(re){console.error("Profile migration error:",re)}d(!1)}catch($){console.error("Error fetching profile:",$),d(!1)}},m=async T=>{try{const R=Ce(G,"users",T.uid);(await Qt(R)).exists()?(await wn(R,{lastLogin:Le(),updatedAt:Le()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",T.uid)):(await on(R,{email:T.email||"",displayName:T.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Le(),updatedAt:Le(),lastLogin:Le()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",T.uid))}catch(R){console.error(" ensureAdminUserDoc error:",R)}},E=async(T,R,C,N,O)=>{var k,B;try{console.log("Creating default profile for user:",T);const ce=n0.generateReferralCode(T);let he=null;const Se={userId:T,shopId:"default-shop",role:"user",fullName:R||" ",phone:C||null,shopName:N||null,approved:!1,referralCode:ce,referredBy:O||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(Se),console.log("Created temporary profile:",Se);try{const{doc:$,setDoc:q,serverTimestamp:X}=await ne(async()=>{const{doc:ve,setDoc:j,serverTimestamp:Ge}=await Promise.resolve().then(()=>Mn);return{doc:ve,setDoc:j,serverTimestamp:Ge}},void 0,import.meta.url),{db:we}=await ne(async()=>{const{db:ve}=await Promise.resolve().then(()=>qt);return{db:ve}},void 0,import.meta.url),Ee={email:((k=Ot.currentUser)==null?void 0:k.email)||"",displayName:R||" ",phone:C||null,shopName:N||null,isActive:!1,referralCode:ce,referredBy:O||null,createdAt:X(),lastLogin:null,updatedAt:X()};if(console.log("Attempting to add user to admin collection with data:",Ee),await q($(we,"users",T),Ee,{merge:!0}),console.log(" User successfully added to admin collection:",Ee),O)try{const{query:ve,collection:j,where:Ge,limit:Fe,getDocs:Pn}=await ne(async()=>{const{query:Cn,collection:kt,where:ft,limit:at,getDocs:cr}=await Promise.resolve().then(()=>Mn);return{query:Cn,collection:kt,where:ft,limit:at,getDocs:cr}},void 0,import.meta.url),{db:zn}=await ne(async()=>{const{db:Cn}=await Promise.resolve().then(()=>qt);return{db:Cn}},void 0,import.meta.url),En=ve(j(zn,"users"),Ge("referralCode","==",O),Fe(1)),In=await Pn(En);In.empty?console.log(" Referral code not found in users collection:",O):(he=In.docs[0].id,await n0.create({referrerId:he,referredUserId:T,referredUserEmail:((B=Ot.currentUser)==null?void 0:B.email)||"",referralCode:O,status:"completed"}),console.log(" Referral record created successfully for referrer:",he))}catch(ve){console.error(" Error creating referral record:",ve)}const re=await Qt($(we,"users",T));re.exists()?console.log(" User document verified in Firestore:",re.data()):console.log(" User document not found after creation")}catch($){console.error(" Error adding user to admin collection:",$)}try{const{addDoc:$,collection:q,serverTimestamp:X}=await ne(async()=>{const{addDoc:j,collection:Ge,serverTimestamp:Fe}=await Promise.resolve().then(()=>Mn);return{addDoc:j,collection:Ge,serverTimestamp:Fe}},void 0,import.meta.url),{db:we}=await ne(async()=>{const{db:j}=await Promise.resolve().then(()=>qt);return{db:j}},void 0,import.meta.url),re=(await $(q(we,"shops"),{name:N||" ",ownerId:T,createdAt:X(),updatedAt:X(),isActive:!0})).id;await rp.create({userId:T,shopId:re,role:"user",fullName:" ",phone:null});try{await rp.update(T,{referralCode:ce,referredBy:he||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(j){console.warn(" Failed to update profile with referral fields:",j)}const ve=await rp.getById(T);ve&&(s(ve),console.log("Updated with Firebase profile:",ve))}catch($){console.error("Error creating profile:",$),console.log("Using local profile - Firebase unavailable")}}catch(ce){console.error("Error creating default profile:",ce)}};S.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const T=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const R=localStorage.getItem("demoUser"),C=localStorage.getItem("demoProfile");if(R&&C){console.log(" Found demo user in localStorage");try{const O=JSON.parse(R),k=JSON.parse(C);n(O),s(k),clearTimeout(T),d(!1);return}catch(O){console.error("Error parsing demo user data:",O),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const N=fW(Ot,async O=>{if(console.log(" Auth state changed:",{uid:O==null?void 0:O.uid,email:O==null?void 0:O.email,emailVerified:O==null?void 0:O.emailVerified,timestamp:new Date().toISOString()}),n(O),O){console.log(" User authenticated, starting profile hydration for:",O.uid);try{await Ga.set({key:"current_user_id",value:O.uid}),console.log(" Synced current_user_id to Native:",O.uid)}catch(k){console.error("Failed to sync user ID to native:",k)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}f(O.uid),I(),m(O)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await Ga.remove({key:"current_user_id"}),await Ga.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(T)});return()=>{clearTimeout(T),N()}},[]),S.useEffect(()=>{const T=async()=>{try{await x(),await I(!0)}catch{}};try{window.addEventListener("app:softRefresh",T)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",T)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{const T=()=>{try{I(!0)}catch{}};try{window.addEventListener("userSubscriptionUpdated",T),window.addEventListener("subscriptionActivated",T)}catch{}return()=>{try{window.removeEventListener("userSubscriptionUpdated",T),window.removeEventListener("subscriptionActivated",T)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{e!=null&&e.uid&&Xr.syncDeletedTransactionsLocal(e.uid)},[e==null?void 0:e.uid]);const p=async(T,R,C,N,O,k)=>{try{const B=(T||"").trim().toLowerCase(),ce=(R||"").trim();console.log(" Attempting to sign up user:",B);const he=await wA(Ot,B,ce);console.log(" Sign up successful:",he.user.uid),await E(he.user.uid,C,N,O,k),await m(he.user);try{await f(he.user.uid),await I()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(B){console.error(" Sign up error:",B);let ce="    ";return B.code==="auth/email-already-in-use"?ce="    ":B.code==="auth/weak-password"?ce="   ":B.code==="auth/invalid-email"&&(ce="   "),{error:{...B,message:ce}}}},y=async(T,R)=>{var O;const C=(T||"").trim().toLowerCase(),N=(R||"").trim();try{const k=X=>X.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),B=X=>X.replace(/[-]/g,we=>String("0123456789"["".indexOf(we)])).replace(/[-]/g,we=>String("0123456789"["".indexOf(we)])),ce=X=>X.replace(/[0-9]/g,we=>""[Number(we)]),he=X=>B(k(X));if(console.log(" Attempting to sign in user:",C),C==="test@example.com"&&N==="123456"){console.log(" Demo user login detected");const X={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},we={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(X)),localStorage.setItem("demoProfile",JSON.stringify(we)),n(X),s(we),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Se;const $=[he(N),k(N),ce(k(N))];let q=null;for(const X of $)try{X!==N&&console.log(" Trying password variant"),Se=await oW(Ot,C,X);break}catch(we){if(q=we,(we==null?void 0:we.code)!=="auth/wrong-password"&&(we==null?void 0:we.code)!=="auth/invalid-credential")throw we}if(!Se)throw q||new Error("auth/invalid-credential");console.log(" Sign in successful:",Se.user.uid);try{if((await Qt(Ce(G,"deletedUsers",Se.user.uid))).exists())return console.log(" User is deleted, signing out"),await EA(Ot),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(X){console.error("Error checking deleted users:",X)}await m(Se.user);try{await f(Se.user.uid),await I()}catch{}return{error:null}}catch(k){if(console.error(" Sign in error:",k),C==="test@example.com"&&k.code==="auth/user-not-found"){console.log(" Creating test user...");try{const he=await wA(Ot,C,N);return console.log(" Test user created:",he.user.uid),await E(he.user.uid," ","01000000000"," "),{error:null}}catch(he){return console.error(" Error creating test user:",he),{error:he}}}let B="    ",ce=k==null?void 0:k.code;if(ce==="auth/invalid-credential")try{const he=await lW(Ot,((O=k==null?void 0:k.customData)==null?void 0:O.email)||"");Array.isArray(he)&&he.length===0?(ce="auth/user-not-found",B="     "):(ce="auth/wrong-password",B="   ")}catch{B="      "}else ce==="auth/invalid-email"?B="    ":ce==="auth/user-not-found"?B="     ":ce==="auth/wrong-password"?B="   ":ce==="auth/too-many-requests"&&(B="      ");return{error:{...k,code:ce,message:B}}}},w=async()=>{try{const T=e==null?void 0:e.uid;localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await EA(Ot),T&&(localStorage.removeItem(`sub_cache_${T}`),localStorage.removeItem(`profile_cache_v2_${T}`),console.log(" Cleared user caches for:",T));try{await Ga.remove({key:"selected_wallet_id"}),await Ga.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const N=(()=>{try{const O=typeof window<"u"?window:null,k=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),B=typeof window<"u"&&window.location.protocol==="file:",ce=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return k||B||ce||typeof import.meta<"u"&&NY&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(N)}catch{window.location.href=N}}catch(T){console.error("Sign out error:",T)}},_=async T=>{try{return await iW(Ot,T),{error:null}}catch(R){console.error("Reset password error:",R);let C="        ";return R.code==="auth/user-not-found"?C="     ":R.code==="auth/invalid-email"&&(C="   "),{error:{...R,message:C}}}},I=async(T=!1)=>{var O,k,B,ce,he,Se,$,q,X,we,Ee,re,ve,j,Ge,Fe,Pn,zn,En,In,Cn;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}h.current&&(h.current(),h.current=null),console.log("Checking subscription status for user:",e.uid,{force:T});const R=`sub_cache_${e.uid}`,C=Date.now(),N=1e3*60*60*24;if(!T)try{const kt=localStorage.getItem(R);if(kt){const{data:ft,timestamp:at}=JSON.parse(kt);if(C-at<N){const cr={...ft,subscription:ft.subscription?{...ft.subscription,activatedAt:ft.subscription.activatedAt?{toDate:()=>new Date(ft.subscription.activatedAt)}:null,endDate:ft.subscription.endDate?{toDate:()=>new Date(ft.subscription.endDate)}:null}:null,branchPackage:ft.branchPackage?{...ft.branchPackage,activatedAt:ft.branchPackage.activatedAt?{toDate:()=>new Date(ft.branchPackage.activatedAt)}:null,endDate:ft.branchPackage.endDate?{toDate:()=>new Date(ft.branchPackage.endDate)}:null}:null,freeTrialStartDate:ft.freeTrialStartDate?{toDate:()=>new Date(ft.freeTrialStartDate)}:null,freeTrialEndDate:ft.freeTrialEndDate?{toDate:()=>new Date(ft.freeTrialEndDate)}:null};o(cr);const _r=((O=ft==null?void 0:ft.branchPackage)==null?void 0:O.status)==="active";let Wn=!1;if(_r)Wn=!0;else{const mt=cr.subscription;Wn=fR(mt)}l(Wn),console.log(" Subscription loaded from cache (Client-side validity check applied)");return}}}catch(kt){console.warn("Subscription Cache parse error:",kt)}try{const kt=Ce(G,"users",e.uid),ft=await Qt(kt);if(ft.exists()){const at=ft.data();o(at);try{const mt={...at,subscription:at.subscription?{...at.subscription,activatedAt:((ce=(B=(k=at.subscription.activatedAt)==null?void 0:k.toDate)==null?void 0:B.call(k))==null?void 0:ce.toISOString())||at.subscription.activatedAt,endDate:(($=(Se=(he=at.subscription.endDate)==null?void 0:he.toDate)==null?void 0:Se.call(he))==null?void 0:$.toISOString())||at.subscription.endDate}:null,branchPackage:at.branchPackage?{...at.branchPackage,activatedAt:((we=(X=(q=at.branchPackage.activatedAt)==null?void 0:q.toDate)==null?void 0:X.call(q))==null?void 0:we.toISOString())||at.branchPackage.activatedAt,endDate:((ve=(re=(Ee=at.branchPackage.endDate)==null?void 0:Ee.toDate)==null?void 0:re.call(Ee))==null?void 0:ve.toISOString())||at.branchPackage.endDate}:null,freeTrialStartDate:((Fe=(Ge=(j=at.freeTrialStartDate)==null?void 0:j.toDate)==null?void 0:Ge.call(j))==null?void 0:Fe.toISOString())||at.freeTrialStartDate,freeTrialEndDate:((En=(zn=(Pn=at.freeTrialEndDate)==null?void 0:Pn.toDate)==null?void 0:zn.call(Pn))==null?void 0:En.toISOString())||at.freeTrialEndDate};localStorage.setItem(R,JSON.stringify({data:mt,timestamp:C}))}catch{}console.log(" Subscription Data Details (Fetched):",{userId:e.uid,isActive:(In=at.subscription)==null?void 0:In.isActive});const cr=((Cn=at==null?void 0:at.branchPackage)==null?void 0:Cn.status)==="active";let _r=!1;if(cr){const mt=at.branchPackage;let Zt=!1;if(mt.endDate){const wr=mt.endDate.toDate?mt.endDate.toDate():new Date(mt.endDate);!isNaN(wr.getTime())&&new Date>wr&&(Zt=!0,IY(e.uid,mt).catch(console.error))}_r=!Zt}const Wn=_r||fR(at.subscription);l(Wn)}}catch(kt){console.error("Error checking subscription status:",kt)}},x=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await f(e.uid,!0),await I(!0)}catch(T){console.error("Error refreshing profile:",T)}},A={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:p,signIn:y,signOut:w,resetPassword:_,updateUserProfile:async T=>{if(e)try{const R={updatedAt:Le()};if(T.fullName!==void 0&&(R.fullName=T.fullName),T.phone!==void 0&&(R.phone=T.phone),T.sim1Number!==void 0){const C=(T.sim1Number||"").trim();R.sim1Number=C.length?C:null}if(T.sim2Number!==void 0){const C=(T.sim2Number||"").trim();R.sim2Number=C.length?C:null}if(T.bridgeLink!==void 0){const C=(T.bridgeLink||"").trim();R.bridgeLink=C.length?C:null}if(T.bridgeDeviceId!==void 0){const C=(T.bridgeDeviceId||"").trim();R.bridgeDeviceId=C.length?C:null}T.showWithdrawNote!==void 0&&(R.showWithdrawNote=!!T.showWithdrawNote),T.isReceiptNoteEnabled!==void 0&&(R.isReceiptNoteEnabled=!!T.isReceiptNoteEnabled),T.smsReadingEnabled!==void 0&&(R.smsReadingEnabled=!!T.smsReadingEnabled),T.smsAutoRegisterEnabled!==void 0&&(R.smsAutoRegisterEnabled=!!T.smsAutoRegisterEnabled),await wn(Ce(G,"profiles",e.uid),R),await f(e.uid,!0)}catch(R){console.error("Error updating user profile:",R)}},updateAvatarId:async T=>{if(e)try{await wn(Ce(G,"profiles",e.uid),{avatarId:T,updatedAt:Le()}),await f(e.uid)}catch(R){console.error("Error updating avatarId:",R)}},refreshProfile:x,checkSubscriptionStatus:I};return v.jsx(sM.Provider,{value:A,children:t})};function LY(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Dy="Checkbox",[MY]=ju(Dy),[VY,dT]=MY(Dy);function FY(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,m]=aE({prop:n,defaultProp:s??!1,onChange:l,caller:Dy}),[E,p]=S.useState(null),[y,w]=S.useState(null),_=S.useRef(!1),I=E?!!o||!!E.closest("form"):!0,x={checked:f,disabled:i,setChecked:m,control:E,setControl:p,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:_,required:c,defaultChecked:ra(s)?!1:s,isFormControl:I,bubbleInput:y,setBubbleInput:w};return v.jsx(VY,{scope:e,...x,children:UY(h)?h(x):r})}var iM="CheckboxTrigger",oM=S.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:E}=dT(iM,t),p=lr(s,d),y=S.useRef(l);return S.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const _=()=>h(y.current);return w.addEventListener("reset",_),()=>w.removeEventListener("reset",_)}},[i,h]),v.jsx(Jt.button,{type:"button",role:"checkbox","aria-checked":ra(l)?"mixed":l,"aria-required":c,"data-state":dM(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:p,onKeyDown:Lt(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Lt(n,w=>{h(_=>ra(_)?!0:!_),E&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});oM.displayName=iM;var hT=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return v.jsx(FY,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>v.jsxs(v.Fragment,{children:[v.jsx(oM,{...h,ref:e,__scopeCheckbox:n}),f&&v.jsx(uM,{__scopeCheckbox:n})]})})});hT.displayName=Dy;var aM="CheckboxIndicator",lM=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=dT(aM,n);return v.jsx(Vl,{present:r||ra(i.checked)||i.checked===!0,children:v.jsx(Jt.span,{"data-state":dM(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});lM.displayName=aM;var cM="CheckboxBubbleInput",uM=S.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:m}=dT(cM,t),E=lr(n,m),p=LY(i),y=Uk(r);S.useEffect(()=>{const _=f;if(!_)return;const I=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(I,"checked").set,L=!s.current;if(p!==i&&P){const A=new Event("click",{bubbles:L});_.indeterminate=ra(i),P.call(_,ra(i)?!1:i),_.dispatchEvent(A)}},[f,p,i,s]);const w=S.useRef(ra(i)?!1:i);return v.jsx(Jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:E,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});uM.displayName=cM;function UY(t){return typeof t=="function"}function ra(t){return t==="indeterminate"}function dM(t){return ra(t)?"indeterminate":t?"checked":"unchecked"}const hM=S.forwardRef(({className:t,...e},n)=>v.jsx(hT,{ref:n,className:Yt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:v.jsx(lM,{className:Yt("flex items-center justify-center text-current"),children:v.jsx(sj,{className:"h-4 w-4"})})}));hM.displayName=hT.displayName;const yg=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(typeof navigator<"u"?!navigator.onLine:!1);S.useEffect(()=>{const x=()=>c(!navigator.onLine);return window.addEventListener("online",x),window.addEventListener("offline",x),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",x)}},[]);const[d,h]=S.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:E,loading:p}=Ws(),y=Ul();S.useEffect(()=>{try{m&&!p&&y("/user/dashboard")}catch{}},[m,p,y]),S.useEffect(()=>{try{const x=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;x&&e(x)}catch{}try{const x=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;x==="true"?h(!0):x==="false"&&h(!1)}catch{}(async()=>{var x,P;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const L=await((P=(x=navigator.credentials).get)==null?void 0:P.call(x,{password:!0,mediation:"optional"}));L&&L.type==="password"&&(L.id&&e(L.id),L.password&&r(L.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const L=sessionStorage.getItem("cashy:rememberedPassword");L&&!n&&r(L)}catch{}}catch{}})()},[]);const w=async x=>{if(x.preventDefault(),o){Et.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Et.error("   .      .");return}const P=(t||"").trim().toLowerCase(),L=(n||"").trim();if(console.log("    :",{email:P,password:"***"}),!t||!n){Et.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(P)){Et.error("    ");return}a(!0);try{try{await uW(Ot,d?zE:WE);try{window.localStorage.setItem("cashy:rememberLogin",d?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:A}=await f(P,L);if(console.log(" SignIn result:",{error:A}),A){console.error("    :",A);const T=A==null?void 0:A.code;T==="auth/user-not-found"?Et.error("     "):T==="auth/wrong-password"?Et.error("   "):T==="auth/invalid-credential"?Et.error("      "):T==="auth/too-many-requests"?Et.error("      "):Et.error((A==null?void 0:A.message)||"    ")}else{console.log("    !"),Et.success("   !");try{if(d&&navigator.credentials&&window.PasswordCredential){const T=new window.PasswordCredential({id:P,name:P,password:L});await navigator.credentials.store(T)}if(d)try{sessionStorage.setItem("cashy:rememberedPassword",L)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(A){console.error("   :",A),Et.error("   ")}finally{a(!1)}},_=x=>{if(o){x.preventDefault(),x.stopPropagation(),Et.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){x.preventDefault(),x.stopPropagation(),Et.error("   .      .");return}t||Et.error("   "),n||Et.error("   ");const P=(t||"").trim().toLowerCase();P&&!/^\S+@\S+\.\S+$/.test(P)&&Et.error("    ")},I=()=>{y("/user/forgot-password")};return S.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const x=document.documentElement,P=document.body,L=x.style.overflow,A=P.style.overflow,T=x.style.overscrollBehaviorY,R=P.style.overscrollBehaviorY;return x.style.overflow="hidden",P.style.overflow="hidden",x.style.overscrollBehaviorY="none",P.style.overscrollBehaviorY="none",()=>{x.style.overflow=L||"",P.style.overflow=A||"",x.style.overscrollBehaviorY=T||"",P.style.overscrollBehaviorY=R||""}},[]),v.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&v.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:v.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:v.jsx(Oj,{className:"w-10 h-10 text-white"})}),v.jsx("div",{className:"flex items-center justify-center mb-2",children:v.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),v.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),v.jsx("p",{className:"text-white/80",children:"    "})]}),v.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[v.jsxs("form",{onSubmit:w,className:"space-y-6",autoComplete:"on",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),v.jsxs("div",{className:"relative",children:[v.jsx(ew,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),v.jsx(ri,{id:"username",type:"email",placeholder:"  ",value:t,onChange:x=>{const P=x.target.value;e(P);try{window.localStorage.setItem("cashy:lastEmail",P)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),v.jsxs("div",{className:"relative",children:[v.jsx(fk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),v.jsx(ri,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:x=>r(x.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),v.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?v.jsx(dk,{className:"w-5 h-5"}):v.jsx(hk,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[v.jsx(hM,{id:"rememberLogin",checked:d,onCheckedChange:x=>h(!!x)}),v.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),v.jsx("div",{className:"flex justify-end",children:v.jsxs(Vn,{type:"button",variant:"ghost",size:"sm",onClick:I,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[v.jsx(ew,{className:"w-4 h-4 ml-1"}),"  "]})}),v.jsx("button",{type:"submit",onClick:_,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?v.jsxs("div",{className:"flex items-center justify-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):v.jsxs("div",{className:"flex items-center justify-center",children:[v.jsx(uk,{className:"w-5 h-5 ml-2"})," "]})})]}),v.jsxs("div",{className:"mt-6 text-center space-y-3",children:[v.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",v.jsx(fw,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),v.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",v.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",v.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},jY=Object.freeze(Object.defineProperty({__proto__:null,default:yg},Symbol.toStringTag,{value:"Module"})),fT=S.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:Yt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));fT.displayName="Card";const mT=S.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:Yt("flex flex-col space-y-1.5 p-6",t),...e}));mT.displayName="CardHeader";const pT=S.forwardRef(({className:t,...e},n)=>v.jsx("h3",{ref:n,className:Yt("text-2xl font-semibold leading-none tracking-tight",t),...e}));pT.displayName="CardTitle";const fM=S.forwardRef(({className:t,...e},n)=>v.jsx("p",{ref:n,className:Yt("text-sm text-muted-foreground",t),...e}));fM.displayName="CardDescription";const gT=S.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:Yt("p-6 pt-0",t),...e}));gT.displayName="CardContent";const $Y=S.forwardRef(({className:t,...e},n)=>v.jsx("div",{ref:n,className:Yt("flex items-center p-6 pt-0",t),...e}));$Y.displayName="CardFooter";var BY="Label",mM=S.forwardRef((t,e)=>v.jsx(Jt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));mM.displayName=BY;var pM=mM;const zY=dE("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Li=S.forwardRef(({className:t,...e},n)=>v.jsx(pM,{ref:n,className:Yt(zY(),t),...e}));Li.displayName=pM.displayName;var Kv="focusScope.autoFocusOnMount",Gv="focusScope.autoFocusOnUnmount",gR={bubbles:!1,cancelable:!0},WY="FocusScope",gM=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=pi(s),d=pi(i),h=S.useRef(null),f=lr(e,p=>l(p)),m=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let p=function(I){if(m.paused||!a)return;const x=I.target;a.contains(x)?h.current=x:vo(h.current,{select:!0})},y=function(I){if(m.paused||!a)return;const x=I.relatedTarget;x!==null&&(a.contains(x)||vo(h.current,{select:!0}))},w=function(I){if(document.activeElement===document.body)for(const P of I)P.removedNodes.length>0&&vo(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const _=new MutationObserver(w);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),_.disconnect()}}},[r,a,m.paused]),S.useEffect(()=>{if(a){vR.add(m);const p=document.activeElement;if(!a.contains(p)){const w=new CustomEvent(Kv,gR);a.addEventListener(Kv,c),a.dispatchEvent(w),w.defaultPrevented||(qY(YY(yM(a)),{select:!0}),document.activeElement===p&&vo(a))}return()=>{a.removeEventListener(Kv,c),setTimeout(()=>{const w=new CustomEvent(Gv,gR);a.addEventListener(Gv,d),a.dispatchEvent(w),w.defaultPrevented||vo(p??document.body,{select:!0}),a.removeEventListener(Gv,d),vR.remove(m)},0)}}},[a,c,d,m]);const E=S.useCallback(p=>{if(!n&&!r||m.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(y&&w){const _=p.currentTarget,[I,x]=HY(_);I&&x?!p.shiftKey&&w===x?(p.preventDefault(),n&&vo(I,{select:!0})):p.shiftKey&&w===I&&(p.preventDefault(),n&&vo(x,{select:!0})):w===_&&p.preventDefault()}},[n,r,m.paused]);return v.jsx(Jt.div,{tabIndex:-1,...o,ref:f,onKeyDown:E})});gM.displayName=WY;function qY(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vo(r,{select:e}),document.activeElement!==n)return}function HY(t){const e=yM(t),n=yR(e,t),r=yR(e.reverse(),t);return[n,r]}function yM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yR(t,e){for(const n of t)if(!KY(n,{upTo:e}))return n}function KY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function GY(t){return t instanceof HTMLInputElement&&"select"in t}function vo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&GY(t)&&e&&t.select()}}var vR=QY();function QY(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=_R(t,e),t.unshift(e)},remove(e){var n;t=_R(t,e),(n=t[0])==null||n.resume()}}}function _R(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function YY(t){return t.filter(e=>e.tagName!=="A")}var Qv=0;function JY(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wR()),document.body.insertAdjacentElement("beforeend",t[1]??wR()),Qv++,()=>{Qv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Qv--}},[])}function wR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ti=function(){return ti=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ti.apply(this,arguments)};function vM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function XY(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var sp="right-scroll-bar-position",ip="width-before-scroll-bar",ZY="with-scroll-bars-hidden",eJ="--removed-body-scroll-bar-size";function Yv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function tJ(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var nJ=typeof window<"u"?S.useLayoutEffect:S.useEffect,ER=new WeakMap;function rJ(t,e){var n=tJ(null,function(r){return t.forEach(function(s){return Yv(s,r)})});return nJ(function(){var r=ER.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Yv(a,null)}),i.forEach(function(a){s.has(a)||Yv(a,o)})}ER.set(n,t)},[t]),n}function sJ(t){return t}function iJ(t,e){e===void 0&&(e=sJ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function oJ(t){t===void 0&&(t={});var e=iJ(null);return e.options=ti({async:!0,ssr:!1},t),e}var _M=function(t){var e=t.sideCar,n=vM(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,ti({},n))};_M.isSideCarExport=!0;function aJ(t,e){return t.useMedium(e),_M}var wM=oJ(),Jv=function(){},Ny=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:Jv,onWheelCapture:Jv,onTouchMoveCapture:Jv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,E=t.noIsolation,p=t.inert,y=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,I=t.gapMode,x=vM(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=f,L=rJ([n,e]),A=ti(ti({},x),s);return S.createElement(S.Fragment,null,d&&S.createElement(P,{sideCar:wM,removeScrollBar:c,shards:h,noRelative:m,noIsolation:E,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:I}),o?S.cloneElement(S.Children.only(a),ti(ti({},A),{ref:L})):S.createElement(_,ti({},A,{className:l,ref:L}),a))});Ny.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ny.classNames={fullWidth:ip,zeroRight:sp};var lJ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cJ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=lJ();return e&&t.setAttribute("nonce",e),t}function uJ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function dJ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var hJ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=cJ())&&(uJ(e,n),dJ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fJ=function(){var t=hJ();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},EM=function(){var t=fJ(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},mJ={left:0,top:0,right:0,gap:0},Xv=function(t){return parseInt(t||"",10)||0},pJ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Xv(n),Xv(r),Xv(s)]},gJ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mJ;var e=pJ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},yJ=EM(),Wc="data-scroll-locked",vJ=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(ZY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Wc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ip,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(sp," .").concat(sp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ip," .").concat(ip,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Wc,`] {
    `).concat(eJ,": ").concat(a,`px;
  }
`)},IR=function(){var t=parseInt(document.body.getAttribute(Wc)||"0",10);return isFinite(t)?t:0},_J=function(){S.useEffect(function(){return document.body.setAttribute(Wc,(IR()+1).toString()),function(){var t=IR()-1;t<=0?document.body.removeAttribute(Wc):document.body.setAttribute(Wc,t.toString())}},[])},wJ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;_J();var i=S.useMemo(function(){return gJ(s)},[s]);return S.createElement(yJ,{styles:vJ(i,!e,s,n?"":"!important")})},s0=!1;if(typeof window<"u")try{var Em=Object.defineProperty({},"passive",{get:function(){return s0=!0,!0}});window.addEventListener("test",Em,Em),window.removeEventListener("test",Em,Em)}catch{s0=!1}var sc=s0?{passive:!1}:!1,EJ=function(t){return t.tagName==="TEXTAREA"},IM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!EJ(t)&&n[e]==="visible")},IJ=function(t){return IM(t,"overflowY")},TJ=function(t){return IM(t,"overflowX")},TR=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=TM(t,r);if(s){var i=SM(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SJ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},bJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},TM=function(t,e){return t==="v"?IJ(e):TJ(e)},SM=function(t,e){return t==="v"?SJ(e):bJ(e)},AJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},xJ=function(t,e,n,r,s){var i=AJ(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=SM(t,a),E=m[0],p=m[1],y=m[2],w=p-y-i*E;(E||w)&&TM(t,a)&&(h+=w,f+=E);var _=a.parentNode;a=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},Im=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},SR=function(t){return[t.deltaX,t.deltaY]},bR=function(t){return t&&"current"in t?t.current:t},RJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},PJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},CJ=0,ic=[];function kJ(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(CJ++)[0],i=S.useState(EM)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=XY([t.lockRef.current],(t.shards||[]).map(bR),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var w=Im(p),_=n.current,I="deltaX"in p?p.deltaX:_[0]-w[0],x="deltaY"in p?p.deltaY:_[1]-w[1],P,L=p.target,A=Math.abs(I)>Math.abs(x)?"h":"v";if("touches"in p&&A==="h"&&L.type==="range")return!1;var T=TR(A,L);if(!T)return!0;if(T?P=A:(P=A==="v"?"h":"v",T=TR(A,L)),!T)return!1;if(!r.current&&"changedTouches"in p&&(I||x)&&(r.current=P),!P)return!0;var R=r.current||P;return xJ(R,y,p,R==="h"?I:x)},[]),l=S.useCallback(function(p){var y=p;if(!(!ic.length||ic[ic.length-1]!==i)){var w="deltaY"in y?SR(y):Im(y),_=e.current.filter(function(P){return P.name===y.type&&(P.target===y.target||y.target===P.shadowParent)&&RJ(P.delta,w)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var I=(o.current.shards||[]).map(bR).filter(Boolean).filter(function(P){return P.contains(y.target)}),x=I.length>0?a(y,I[0]):!o.current.noIsolation;x&&y.cancelable&&y.preventDefault()}}},[]),c=S.useCallback(function(p,y,w,_){var I={name:p,delta:y,target:w,should:_,shadowParent:DJ(w)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(x){return x!==I})},1)},[]),d=S.useCallback(function(p){n.current=Im(p),r.current=void 0},[]),h=S.useCallback(function(p){c(p.type,SR(p),p.target,a(p,t.lockRef.current))},[]),f=S.useCallback(function(p){c(p.type,Im(p),p.target,a(p,t.lockRef.current))},[]);S.useEffect(function(){return ic.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,sc),document.addEventListener("touchmove",l,sc),document.addEventListener("touchstart",d,sc),function(){ic=ic.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,sc),document.removeEventListener("touchmove",l,sc),document.removeEventListener("touchstart",d,sc)}},[]);var m=t.removeScrollBar,E=t.inert;return S.createElement(S.Fragment,null,E?S.createElement(i,{styles:PJ(s)}):null,m?S.createElement(wJ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function DJ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const NJ=aJ(wM,kJ);var bM=S.forwardRef(function(t,e){return S.createElement(Ny,ti({},t,{ref:e,sideCar:NJ}))});bM.classNames=Ny.classNames;var OJ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},oc=new WeakMap,Tm=new WeakMap,Sm={},Zv=0,AM=function(t){return t&&(t.host||AM(t.parentNode))},LJ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=AM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},MJ=function(t,e,n,r){var s=LJ(e,Array.isArray(t)?t:[t]);Sm[n]||(Sm[n]=new WeakMap);var i=Sm[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),E=m!==null&&m!=="false",p=(oc.get(f)||0)+1,y=(i.get(f)||0)+1;oc.set(f,p),i.set(f,y),o.push(f),p===1&&E&&Tm.set(f,!0),y===1&&f.setAttribute(n,"true"),E||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),a.clear(),Zv++,function(){o.forEach(function(h){var f=oc.get(h)-1,m=i.get(h)-1;oc.set(h,f),i.set(h,m),f||(Tm.has(h)||h.removeAttribute(r),Tm.delete(h)),m||h.removeAttribute(n)}),Zv--,Zv||(oc=new WeakMap,oc=new WeakMap,Tm=new WeakMap,Sm={})}},VJ=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=OJ(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),MJ(r,s,n,"aria-hidden")):function(){return null}},Oy="Dialog",[xM,vZ]=ju(Oy),[FJ,qs]=xM(Oy),RM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=aE({prop:r,defaultProp:s??!1,onChange:i,caller:Oy});return v.jsx(FJ,{scope:e,triggerRef:a,contentRef:l,contentId:vv(),titleId:vv(),descriptionId:vv(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};RM.displayName=Oy;var PM="DialogTrigger",CM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(PM,n),i=lr(e,s.triggerRef);return v.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_T(s.open),...r,ref:i,onClick:Lt(t.onClick,s.onOpenToggle)})});CM.displayName=PM;var yT="DialogPortal",[UJ,kM]=xM(yT,{forceMount:void 0}),DM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=qs(yT,e);return v.jsx(UJ,{scope:e,forceMount:n,children:S.Children.map(r,o=>v.jsx(Vl,{present:n||i.open,children:v.jsx(oE,{asChild:!0,container:s,children:o})}))})};DM.displayName=yT;var vg="DialogOverlay",NM=S.forwardRef((t,e)=>{const n=kM(vg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qs(vg,t.__scopeDialog);return i.modal?v.jsx(Vl,{present:r||i.open,children:v.jsx($J,{...s,ref:e})}):null});NM.displayName=vg;var jJ=Ph("DialogOverlay.RemoveScroll"),$J=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(vg,n);return v.jsx(bM,{as:jJ,allowPinchZoom:!0,shards:[s.contentRef],children:v.jsx(Jt.div,{"data-state":_T(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ol="DialogContent",OM=S.forwardRef((t,e)=>{const n=kM(Ol,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qs(Ol,t.__scopeDialog);return v.jsx(Vl,{present:r||i.open,children:i.modal?v.jsx(BJ,{...s,ref:e}):v.jsx(zJ,{...s,ref:e})})});OM.displayName=Ol;var BJ=S.forwardRef((t,e)=>{const n=qs(Ol,t.__scopeDialog),r=S.useRef(null),s=lr(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return VJ(i)},[]),v.jsx(LM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Lt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Lt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Lt(t.onFocusOutside,i=>i.preventDefault())})}),zJ=S.forwardRef((t,e)=>{const n=qs(Ol,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return v.jsx(LM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),LM=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=qs(Ol,n),l=S.useRef(null),c=lr(e,l);return JY(),v.jsxs(v.Fragment,{children:[v.jsx(gM,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:v.jsx(Fg,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":_T(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(WJ,{titleId:a.titleId}),v.jsx(HJ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),vT="DialogTitle",MM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(vT,n);return v.jsx(Jt.h2,{id:s.titleId,...r,ref:e})});MM.displayName=vT;var VM="DialogDescription",FM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(VM,n);return v.jsx(Jt.p,{id:s.descriptionId,...r,ref:e})});FM.displayName=VM;var UM="DialogClose",jM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(UM,n);return v.jsx(Jt.button,{type:"button",...r,ref:e,onClick:Lt(t.onClick,()=>s.onOpenChange(!1))})});jM.displayName=UM;function _T(t){return t?"open":"closed"}var $M="DialogTitleWarning",[_Z,BM]=XU($M,{contentName:Ol,titleName:vT,docsSlug:"dialog"}),WJ=({titleId:t})=>{const e=BM($M),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},qJ="DialogDescriptionWarning",HJ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BM(qJ).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},KJ=RM,GJ=CM,QJ=DM,zM=NM,WM=OM,qM=MM,HM=FM,YJ=jM;const dh=KJ,wZ=GJ,JJ=QJ,KM=S.forwardRef(({className:t,...e},n)=>v.jsx(zM,{ref:n,className:Yt("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));KM.displayName=zM.displayName;const qc=S.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>v.jsxs(JJ,{children:[v.jsx(KM,{}),v.jsxs(WM,{ref:o,className:Yt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&v.jsxs(YJ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[v.jsx(fE,{className:"h-4 w-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qc.displayName=WM.displayName;const Hc=({className:t,...e})=>v.jsx("div",{className:Yt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Hc.displayName="DialogHeader";const wT=({className:t,...e})=>v.jsx("div",{className:Yt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});wT.displayName="DialogFooter";const Kc=S.forwardRef(({className:t,...e},n)=>v.jsx(qM,{ref:n,className:Yt("text-lg font-semibold leading-none tracking-tight",t),...e}));Kc.displayName=qM.displayName;const i0=S.forwardRef(({className:t,...e},n)=>v.jsx(HM,{ref:n,className:Yt("text-sm text-muted-foreground",t),...e}));i0.displayName=HM.displayName;function XJ({open:t,onOpenChange:e,onSuccess:n}){const{user:r,userSubscription:s}=Ws(),[i,o]=S.useState("1"),[a,l]=S.useState("basic"),[c,d]=S.useState(!1),[h,f]=S.useState(null),m=async()=>{var E;if(r){d(!0),f(null);try{const p=((E=s==null?void 0:s.branchPackage)==null?void 0:E.limit)||0;await wn(Ce(G,"users",r.uid),{branchPackage:{status:"pending",requested:!0,limit:p+parseInt(i),packageType:a,requestedAt:new Date().toISOString()}}),f("       ."),window.dispatchEvent(new Event("userSubscriptionUpdated")),setTimeout(()=>{e(!1),n&&n()},1500)}catch(p){f("  : "+p.message)}finally{d(!1)}}};return v.jsx(dh,{open:t,onOpenChange:e,children:v.jsxs(qc,{children:[v.jsx(Hc,{children:v.jsx(Kc,{children:" "})}),v.jsxs("div",{className:"grid gap-4 py-2",children:[v.jsxs("div",{className:"grid gap-2",children:[v.jsx(Li,{children:"   "}),v.jsx(ri,{type:"number",min:"1",value:i,onChange:E=>o(E.target.value),placeholder:"   "})]}),v.jsxs("div",{className:"grid gap-2",children:[v.jsx(Li,{children:" "}),v.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a,onChange:E=>l(E.target.value),children:[v.jsx("option",{value:"basic",children:"  ()"}),v.jsx("option",{value:"quarterly",children:"   (3 )"}),v.jsx("option",{value:"pro",children:"  ()"}),v.jsx("option",{value:"enterprise",children:"  ( )"})]})]}),h&&v.jsx("p",{className:`text-sm ${h.includes("")?"text-green-600":"text-red-600"}`,children:h})]}),v.jsxs(wT,{children:[v.jsx(Vn,{variant:"outline",onClick:()=>e(!1),children:""}),v.jsx(Vn,{onClick:m,disabled:c,className:"bg-black text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200",children:c?" ...":" "})]})]})})}function AR(){var C,N,O,k;const{user:t,profile:e,isSubscriptionActive:n,userSubscription:r}=Ws(),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(""),[d,h]=S.useState(""),[f,m]=S.useState(""),[E,p]=S.useState(""),[y,w]=S.useState(!1),[_,I]=S.useState(null),[x,P]=S.useState(0),L=((C=r==null?void 0:r.branchPackage)==null?void 0:C.status)==="active",A=((N=r==null?void 0:r.branchPackage)==null?void 0:N.limit)||0;F.useEffect(()=>{t&&(async()=>{try{const ce=Ve(ke(G,"shops"),Oe("ownerId","==",t.uid)),he=await EL(ce);P(he.data().count)}catch(ce){console.error("Error fetching shops count:",ce)}})()},[t]),(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="merchant"||n||L&&x<A;const T=()=>{c(""),h(""),m(""),p("")},R=async()=>{I(null);const B=l.trim(),ce=d.trim(),he=f.trim(),Se=E;if(L&&x>=A&&(e==null?void 0:e.role)!=="admin"&&(e==null?void 0:e.role)!=="merchant"){I(`        (${A}).   .`);return}if(!B||!ce||!he||!Se){I("    .");return}try{w(!0);const q=await GG(XL,"createShopAndManager")({shopName:B,managerName:ce,email:he,password:Se,branchCode:null}),X=q==null?void 0:q.data;X!=null&&X.success?(I(`   (${X.shopId})   .`),T(),i(!1)):I("     .")}catch($){const q=($==null?void 0:$.message)||"     ";I(q)}finally{w(!1)}};return v.jsxs("div",{className:"container mx-auto p-4",children:[v.jsxs(fT,{children:[v.jsx(mT,{children:v.jsx(pT,{children:"  (CPanel)"})}),v.jsxs(gT,{children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{children:v.jsx("p",{className:"text-sm text-muted-foreground",children:"           ."})}),v.jsxs("div",{className:"flex gap-2",children:[!L&&((O=r==null?void 0:r.branchPackage)==null?void 0:O.status)!=="pending"&&v.jsx(Vn,{onClick:()=>a(!0),variant:"outline",children:"  "}),((k=r==null?void 0:r.branchPackage)==null?void 0:k.status)==="pending"&&v.jsx(Vn,{disabled:!0,variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50",children:"  "}),v.jsx(Vn,{onClick:()=>i(!0),disabled:!1,children:" "})]})]}),!t&&v.jsx("p",{className:"mt-3 text-sm text-red-600",children:"      ."}),L&&v.jsxs("p",{className:"mt-3 text-sm text-green-600 font-medium",children:["  :  ",x,"   ",A," ."]}),t&&!1]})]}),v.jsx(dh,{open:s,onOpenChange:i,children:v.jsxs(qc,{children:[v.jsx(Hc,{children:v.jsx(Kc,{children:"  "})}),v.jsxs("div",{className:"grid gap-4 py-2",children:[v.jsxs("div",{className:"grid gap-2",children:[v.jsx(Li,{htmlFor:"shopName",children:" "}),v.jsx(ri,{id:"shopName",value:l,onChange:B=>c(B.target.value),placeholder:":  "})]}),v.jsxs("div",{className:"grid gap-2",children:[v.jsx(Li,{htmlFor:"managerName",children:" "}),v.jsx(ri,{id:"managerName",value:d,onChange:B=>h(B.target.value),placeholder:":  "})]}),v.jsxs("div",{className:"grid gap-2",children:[v.jsx(Li,{htmlFor:"email",children:""}),v.jsx(ri,{id:"email",type:"email",value:f,onChange:B=>m(B.target.value),placeholder:"example@mail.com"})]}),v.jsxs("div",{className:"grid gap-2",children:[v.jsx(Li,{htmlFor:"password",children:""}),v.jsx(ri,{id:"password",type:"password",value:E,onChange:B=>p(B.target.value),placeholder:""})]}),_&&v.jsx("p",{className:"text-sm text-muted-foreground",children:_})]}),v.jsxs(wT,{children:[v.jsx(Vn,{variant:"outline",onClick:()=>i(!1),disabled:y,children:""}),v.jsx(Vn,{onClick:R,disabled:y||!1,children:y?" ...":" "})]})]})}),v.jsx(XJ,{open:o,onOpenChange:a})]})}const xR=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),{signIn:l}=Ws(),c=Ul();S.useEffect(()=>{try{const h=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;h&&e(h)}catch{}},[]);const d=async h=>{var f;if(h.preventDefault(),o){Et.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Et.error("   .      .");return}if(!t||!n){Et.error("     ");return}a(!0);try{const{error:m}=await l(t,n);if(m){const E=m==null?void 0:m.code;E==="auth/invalid-email"?Et.error("    "):E==="auth/user-not-found"?Et.error("     "):E==="auth/wrong-password"?Et.error("   "):E==="auth/invalid-credential"?Et.error("      "):E==="auth/too-many-requests"?Et.error("      "):Et.error((m==null?void 0:m.message)||"    ");return}try{const E=(f=Ot.currentUser)==null?void 0:f.uid;E&&await on(Ce(G,"users",E),{branchPackage:{requested:!0,status:"pending",requestedAt:Le()},updatedAt:Le()},{merge:!0})}catch(E){console.warn("    :",E)}Et.success("   "),c("/cpanel")}catch(m){Et.error((m==null?void 0:m.message)||"     ")}finally{a(!1)}};return v.jsx("div",{className:"min-h-screen bg-background px-4 py-8 flex items-center justify-center",children:v.jsxs(fT,{className:"w-full max-w-md",children:[v.jsxs(mT,{children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(mk,{className:"w-6 h-6"}),v.jsx(pT,{children:"   "})]}),v.jsx(fM,{children:"     "})]}),v.jsx(gT,{children:v.jsxs("form",{onSubmit:d,className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{htmlFor:"email",children:" "}),v.jsxs("div",{className:"relative",children:[v.jsx(ew,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),v.jsx(ri,{id:"email",type:"email",value:t,onChange:h=>{const f=h.target.value;e(f);try{window.localStorage.setItem("cashy:lastEmail",f)}catch{}},placeholder:"example@mail.com",className:"pr-10"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{htmlFor:"password",children:" "}),v.jsxs("div",{className:"relative",children:[v.jsx(fk,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),v.jsx(ri,{id:"password",type:s?"text":"password",value:n,onChange:h=>r(h.target.value),placeholder:"",className:"pr-10"}),v.jsx("button",{type:"button",onClick:()=>i(h=>!h),className:"absolute left-3 top-2.5 text-muted-foreground","aria-label":s?"  ":"  ",children:s?v.jsx(dk,{className:"w-5 h-5"}):v.jsx(hk,{className:"w-5 h-5"})})]})]}),v.jsx("button",{type:"submit",onClick:h=>{o?(h.preventDefault(),h.stopPropagation(),Et.info("     ...")):typeof navigator<"u"&&navigator.onLine===!1?(h.preventDefault(),h.stopPropagation(),Et.error("   .      .")):(t||Et.error("   "),n||Et.error("   "))},className:"w-full inline-flex items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-white hover:opacity-90",children:o?v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):v.jsxs("div",{className:"flex items-center justify-center",children:[v.jsx(uk,{className:"w-5 h-5 ml-2"})," "]})}),v.jsxs("div",{className:"mt-4 text-center space-y-3",children:[v.jsx("p",{className:"text-sm text-muted-foreground",children:"  "}),v.jsxs("div",{className:"flex items-center justify-center gap-2",children:[v.jsx(fw,{to:"/user/forgot-password",className:"text-primary text-sm",children:"   "}),v.jsx("span",{className:"text-muted-foreground",children:""}),v.jsx(fw,{to:"/auth?mode=signup",className:"text-primary text-sm",children:"  "})]})]})]})})]})})},ZJ=()=>{const t=Ul(),e=wi(),{signOut:n,user:r,userSubscription:s}=Ws(),{toast:i}=iE(),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=[{id:"home",label:"",icon:mj,path:"/user/dashboard",action:()=>{if(e.pathname==="/user/dashboard"&&(!e.state||Object.keys(e.state).length===0)){window.scrollTo({top:0,behavior:"smooth"});return}t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:hj,path:"/debts",action:()=>{var y;(y=e.state)!=null&&y.openDebtDialog||t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:ej,path:"/transfer",action:()=>{var y,w;(y=e.state)!=null&&y.openTransactionSection&&((w=e.state)==null?void 0:w.transactionType)==="transfer"||t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:mb,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:J4,path:"/withdraw",action:()=>{var y,w;(y=e.state)!=null&&y.openTransactionSection&&((w=e.state)==null?void 0:w.transactionType)==="withdraw"||t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"sales",label:"",icon:yb,path:"/user/dashboard",action:()=>{var y;(y=e.state)!=null&&y.openSalesDialog||t("/user/dashboard",{state:{openSalesDialog:!0}})}},{id:"settings",label:"",icon:gb,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:nj,action:()=>{var w,_;a(!1);const y=(w=s==null?void 0:s.subscription)==null?void 0:w.planType;if(y===Ka.TAHWEELA||y===Ka.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}(_=e.state)!=null&&_.openInstallment||t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:Mj,action:()=>{var y;a(!1),!((y=e.state)!=null&&y.openMaintenanceDialog)&&t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:lj,action:()=>{var y;a(!1),!((y=e.state)!=null&&y.openCreditCardsDialog)&&t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:yb,action:()=>{var y;a(!1),!((y=e.state)!=null&&y.openSalesDialog)&&t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:pb,action:()=>{var y;a(!1),!((y=e.state)!=null&&y.openShopExpensesDialog)&&t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:pk,action:()=>{var y;a(!1),!((y=e.state)!=null&&y.openDeficienciesDialog)&&t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"branch-management",label:" ",icon:Cj,action:()=>{var y;a(!1),!((y=e.state)!=null&&y.openBranchManagement)&&t("/user/dashboard",{state:{openBranchManagement:!0}})},color:"#14b8a6"},{id:"add-wallet",label:" ",icon:mb,action:()=>{a(!1),e.pathname!=="/user/add-wallet"&&t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:oj,action:()=>{var y;a(!1),!((y=e.state)!=null&&y.openCashierShiftModal)&&t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:_j,action:()=>{a(!1);const w=`   
  : ${(r==null?void 0:r.email)||" "}`,_=encodeURIComponent(w);window.open(`https://wa.me/201000392539?text=${_}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:fb,action:async()=>{a(!1);try{await n()}catch(y){console.error("Logout error:",y)}},color:"#EF4444"}],m=[{id:"shop-expenses-settings",label:" ",icon:pb,action:()=>{var y;c(!1),!((y=e.state)!=null&&y.openShopExpensesDialog)&&t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:gb,action:()=>{c(!1),e.pathname!=="/profile-settings"&&t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:fb,action:async()=>{c(!1);try{await n()}catch(y){console.error("Logout error:",y)}},color:"#EF4444"}],E=(y,w,_,I)=>{var T;const P=((T=s==null?void 0:s.subscription)==null?void 0:T.planType)===Ka.TAHWEELA,L=R=>["/user/dashboard","/profile-settings"].includes(R),A=R=>R==="debts";if(_){if(P&&!A(I)&&!L(y)){i({title:"  ",description:"      .",variant:"destructive"});return}_()}else if(w&&y==="/add"){if(P){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!w){if(P&&!L(y)){i({title:"  ",description:"      .",variant:"destructive"});return}if(e.pathname===y&&!_)return;t(y)}},p=y=>e.pathname===y;return v.jsxs("div",{className:"mobile-bottom-nav",children:[o&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),v.jsx("div",{className:"quick-actions-bottomsheet",children:v.jsx("div",{className:"quick-actions-grid",children:f.map((y,w)=>v.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var I;if(((I=s==null?void 0:s.subscription)==null?void 0:I.planType)===Ka.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),y.action()},style:{"--action-color":y.color,"--animation-delay":"0s"},children:[v.jsx("div",{className:"quick-action-icon",children:v.jsx(y.icon,{className:"action-icon"})}),v.jsx("span",{className:"quick-action-label",children:y.label})]},y.id))})})]}),l&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),v.jsx("div",{className:"quick-actions-bottomsheet",children:v.jsx("div",{className:"quick-actions-grid",children:m.map((y,w)=>v.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var x;const _=(x=s==null?void 0:s.subscription)==null?void 0:x.planType,I=new Set(["logout","profile-settings"]);if(_===Ka.TAHWEELA&&!I.has(y.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),y.action()},style:{"--action-color":y.color,"--animation-delay":`${w*.06}s`},children:[v.jsx("div",{className:"quick-action-icon",children:v.jsx(y.icon,{className:"action-icon"})}),v.jsx("span",{className:"quick-action-label",children:y.label})]},y.id))})})]}),v.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(y=>{const w=y.icon,_=p(y.path);return v.jsxs("button",{onClick:()=>E(y.path,y.isSpecial,y.action,y.id),className:`mobile-nav-item ${_?"active":""} ${y.isSpecial?"special":""}`,type:"button","aria-label":y.label,style:{backgroundColor:"transparent"},children:[v.jsx("div",{className:`nav-icon-container ${y.isSpecial?"special-icon":""} ${y.isSpecial&&y.id==="add"&&o?"special-open":""}`,children:v.jsx(w,{className:`nav-icon ${_?"active-icon":""} ${y.isSpecial?"special-icon-svg":""} ${y.isSpecial&&y.id==="settings"&&l?"rotated":""}`})}),!y.isSpecial&&v.jsx("span",{className:`nav-label ${_?"active-label":""}`,children:y.label})]},y.id)})})]})};var cP,uP;const bc=(uP=(cP=import.meta)==null?void 0:cP.env)==null?void 0:uP.VITE_ANDROID_DOWNLOAD_URL;var dP,hP;const Ac=(hP=(dP=import.meta)==null?void 0:dP.env)==null?void 0:hP.VITE_PC_DOWNLOAD_URL;var fP,mP;const xc=(mP=(fP=import.meta)==null?void 0:fP.env)==null?void 0:mP.VITE_PC32_DOWNLOAD_URL;var pP,gP;const Rc=(gP=(pP=import.meta)==null?void 0:pP.env)==null?void 0:gP.VITE_ANDROID_VERSION;var yP,vP;const Pc=(vP=(yP=import.meta)==null?void 0:yP.env)==null?void 0:vP.VITE_PC_VERSION;var _P,wP;const Cc=(wP=(_P=import.meta)==null?void 0:_P.env)==null?void 0:wP.VITE_PC32_VERSION;function Gn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function eX(t){if(t&&op(t)!==void 0)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Mu=["siteContent","appDownloads"],_g=["siteContent","desktop_updates"],wg=["siteContent","android_updates"],dc="appDownloadsCache",tX=6*60*60*1e3,nX=["1LMXQdSVB3-gIW-89fwWoq113IIEelhxR"];function op(t){if(t){for(const e of nX)if(t.includes(e))return;return t}}function Qa(t){return{...t,androidUrl:op(t.androidUrl),pcUrl:op(t.pcUrl),pc32Url:op(t.pc32Url)}}function rX(){try{const e=localStorage.getItem(dc);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||bc,pcUrl:(n==null?void 0:n.pcUrl)||Ac,pc32Url:(n==null?void 0:n.pc32Url)||xc,androidVersion:(n==null?void 0:n.androidVersion)||Rc,pcVersion:(n==null?void 0:n.pcVersion)||Pc,pc32Version:(n==null?void 0:n.pc32Version)||Cc,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=Gn(r.pcUrl)),r.androidVersion||(r.androidVersion=Gn(r.androidUrl)),r.pc32Version||(r.pc32Version=Gn(r.pc32Url)),Qa(r)}}catch{}const t={androidUrl:bc,pcUrl:Ac,pc32Url:xc,androidVersion:Rc,pcVersion:Pc,pc32Version:Cc};return t.pcVersion||(t.pcVersion=Gn(t.pcUrl)),t.androidVersion||(t.androidVersion=Gn(t.androidUrl)),t.pc32Version||(t.pc32Version=Gn(t.pc32Url)),Qa(t)}async function GM(t=!1){try{if(!t)try{const r=localStorage.getItem(dc),s=localStorage.getItem(dc+"_ts");if(r&&s&&Date.now()-Number(s)<tX){const o=JSON.parse(r);return Qa(o)}}catch{}const e=await Qt(Ce(G,Mu[0],Mu[1]));if(e.exists()){const r=e.data();try{localStorage.setItem(dc,JSON.stringify(r)),localStorage.setItem(dc+"_ts",String(Date.now()))}catch{}const s={androidUrl:(r==null?void 0:r.androidUrl)||bc,pcUrl:(r==null?void 0:r.pcUrl)||Ac,pc32Url:(r==null?void 0:r.pc32Url)||xc,androidVersion:(r==null?void 0:r.androidVersion)||Rc,pcVersion:(r==null?void 0:r.pcVersion)||Pc,pc32Version:(r==null?void 0:r.pc32Version)||Cc,updatedAt:r==null?void 0:r.updatedAt,updatedBy:r==null?void 0:r.updatedBy};return s.pcVersion||(s.pcVersion=Gn(s.pcUrl)),s.androidVersion||(s.androidVersion=Gn(s.androidUrl)),s.pc32Version||(s.pc32Version=Gn(s.pc32Url)),Qa(s)}const n={androidUrl:bc,pcUrl:Ac,pc32Url:xc,androidVersion:Rc,pcVersion:Pc,pc32Version:Cc};return n.pcVersion||(n.pcVersion=Gn(n.pcUrl)),n.androidVersion||(n.androidVersion=Gn(n.androidUrl)),n.pc32Version||(n.pc32Version=Gn(n.pc32Url)),Qa(n)}catch(e){const n=(e==null?void 0:e.message)||"";((e==null?void 0:e.code)||"")==="permission-denied"||n.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",e):console.error(" Error loading app downloads:",e);try{const i=localStorage.getItem(dc);if(i){const o=JSON.parse(i),a={androidUrl:(o==null?void 0:o.androidUrl)||bc,pcUrl:(o==null?void 0:o.pcUrl)||Ac,pc32Url:(o==null?void 0:o.pc32Url)||xc,androidVersion:(o==null?void 0:o.androidVersion)||Rc,pcVersion:(o==null?void 0:o.pcVersion)||Pc,pc32Version:(o==null?void 0:o.pc32Version)||Cc,updatedAt:o==null?void 0:o.updatedAt,updatedBy:o==null?void 0:o.updatedBy};return a.pcVersion||(a.pcVersion=Gn(a.pcUrl)),a.androidVersion||(a.androidVersion=Gn(a.androidUrl)),a.pc32Version||(a.pc32Version=Gn(a.pc32Url)),Qa(a)}}catch{}const s={androidUrl:bc,pcUrl:Ac,pc32Url:xc,androidVersion:Rc,pcVersion:Pc,pc32Version:Cc};return s.pcVersion||(s.pcVersion=Gn(s.pcUrl)),s.androidVersion||(s.androidVersion=Gn(s.androidUrl)),s.pc32Version||(s.pc32Version=Gn(s.pc32Url)),Qa(s)}}function sX(t){return GM().then(t),()=>{}}async function iX(t,e,n,r,s,i=12e4){const o=JL(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=iY(o,l);return new Promise((d,h)=>{const f=rY(c,t);let m=!1;const E=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",p=>{const y=Math.round(p.bytesTransferred/p.totalBytes*100);s&&s(y)},p=>{clearTimeout(E),h(p)},async()=>{try{if(clearTimeout(E),m)return;const p=await sY(c),y={updatedAt:Le(),updatedBy:n||"admin"};e==="android"?(y.androidUrl=p,r&&(y.androidVersion=r)):e==="pc"?(y.pcUrl=p,r&&(y.pcVersion=r)):(y.pc32Url=p,r&&(y.pc32Version=r));const w=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),_=on(Ce(G,Mu[0],Mu[1]),y,{merge:!0});let I=!1;const x=new Promise(P=>setTimeout(()=>{I=!0,P()},w));try{await Promise.race([_,x])}catch(P){console.warn(" Firestore write error, proceeding with URL only:",P)}I&&console.warn(" Firestore update timed out;             ."),d(p)}catch(p){h(p)}})})}async function oX(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Le(),updatedBy:e||"admin"};await on(Ce(G,Mu[0],Mu[1]),r,{merge:!0})}async function aX(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Le(),updatedBy:e||"admin"};await on(Ce(G,_g[0],_g[1]),r,{merge:!0})}async function QM(){try{try{const s=localStorage.getItem("desktop_update_cache");if(s){const i=JSON.parse(s)}}catch{}const t=Ce(G,_g[0],_g[1]),e=await Qt(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,downloadURL_64:n!=null&&n.downloadURL_64?String(n.downloadURL_64):void 0,downloadURL_32:n!=null&&n.downloadURL_32?String(n.downloadURL_32):void 0,notes:n!=null&&n.notes?String(n.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching desktop updates:",t);try{const e=localStorage.getItem("desktop_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function YM(t){return QM().then(t),()=>{}}function JM(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function lX(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Le(),updatedBy:e||"admin"};await on(Ce(G,wg[0],wg[1]),r,{merge:!0})}async function XM(){try{const t=Ce(G,wg[0],wg[1]),e=await Qt(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,url:n!=null&&n.url?String(n.url):void 0,notes:n!=null&&n.notes?String(n.notes):void 0,force:!!(n!=null&&n.force),code:typeof(n==null?void 0:n.code)=="number"?n.code:typeof(n==null?void 0:n.versionCode)=="number"?n.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching android updates:",t);try{const e=localStorage.getItem("android_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function cX(t){return XM().then(t),()=>{}}const uX=Object.freeze(Object.defineProperty({__proto__:null,fetchAndroidUpdates:XM,fetchDesktopUpdates:QM,getAppDownloads:GM,getCachedOrEnvAppDownloads:rX,listenAndroidUpdates:cX,listenAppDownloads:sX,listenDesktopUpdates:YM,resolveDownloadUrl:eX,selectDesktopUrl:JM,setAndroidUpdateInfo:lX,setAppDownloadLinks:oX,setDesktopUpdateInfo:aX,uploadAppBinaryResumable:iX},Symbol.toStringTag,{value:"Module"})),dX=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=F.useState(!1),[s,i]=F.useState(!1),[o,a]=F.useState(!1),[l,c]=F.useState(0),[d,h]=F.useState(""),[f,m]=F.useState(!1),E=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(P){console.warn("failed to minimize",P)}},p=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(P){console.warn("failed to close",P)}},y=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(P){console.warn("failed to soft refresh",P),m(!1)}}};if(F.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(P=>{const L=(P==null?void 0:P.percent)==null?0:Number(P.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(P){console.warn("update init failed",P)}},[e,t]),F.useEffect(()=>{const P=YM(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const T=JM({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(T)}});return()=>{try{P()}catch{}}},[]),!e)return null;const[_,I]=F.useState(!1),x=async()=>{try{if(!t)return;_?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),I(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),I(!0))}catch(P){console.warn("window toggle failed",P)}};return v.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[v.jsx("button",{type:"button","aria-label":"",title:"",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:v.jsx(fE,{className:"w-5 h-5"})}),v.jsx("button",{type:"button","aria-label":"",title:" ",onClick:y,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:v.jsx(hE,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),v.jsx("button",{type:"button","aria-label":"",title:"",onClick:E,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:v.jsx(Ej,{className:"w-5 h-5"})}),v.jsx("button",{type:"button","aria-label":"/",title:_?"  ":"   ",onClick:x,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:v.jsx(Rj,{className:"w-5 h-5"})})]})},o0=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=S.useState(`${n}logo.svg`),[i,o]=S.useState(0),a=S.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return v.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:v.jsxs("div",{className:"flex flex-col items-center justify-center",children:[v.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),v.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},hX=Df("SplashScreen",{web:()=>ne(()=>import("./web-WULI_Ezz.js"),[],import.meta.url).then(t=>new t.SplashScreenWeb)}),RR=Df("AppLauncher",{web:()=>ne(()=>import("./web-19ZEeuyC.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function fX(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Ie&&Ie.getPlatform()!=="web"&&(RR.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Ie&&Ie.getPlatform()!=="web"&&RR.openUrl({url:n})}catch{}}}function ZM(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function mX(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?ZM(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function EZ(t,e,n){const r=ZM(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function pX(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function gX(t){const e=pX(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function IZ(t,e,n){const r=mX(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=gX(t||e);fX(r,s)}async function yX(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function ET(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function vX(t,e,n=0){const r=ET(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const tl=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:ET,calculateProfit:vX},Symbol.toStringTag,{value:"Module"})),_X=t=>t==="withdraw"||t==="receive"?"receive":"send",wX=async t=>{if(!t)return null;const e=Ve(ke(G,"transactions"),Oe("reference","==",t),sd(1)),n=await Be(e);return n.empty?null:n.docs[0].id},EX=async t=>{var e;try{const n=await Ga.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return bX(t||((e=Ot.currentUser)==null?void 0:e.uid)||"")||null},e_=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await Bo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},eV=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await wX(t.reference);if(e)return{id:e,duplicate:!0};const n=_X(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await e_(t.receiverMsisdn);if(o||(o=await e_(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await e_(a))}r=o||await EX(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await uT.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await yX(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=ET(t.amount,n);await Xr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},ap=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},a0=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Ot.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(p=>ap(p)).filter(p=>!!p):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=p=>String(p||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:ap(String((p==null?void 0:p.phone)||(p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn):[],d=new Map;for(const p of s){const y=l(p);for(const w of c){const _=l(w.msisdn);if(w.msisdn===p){d.set(w.walletId,w.msisdn);continue}if(_.slice(-5)===y.slice(-5)){d.set(w.walletId,w.msisdn);continue}}}if(d.size===1){const[p,y]=Array.from(d.entries())[0];return{walletId:p,msisdn:y}}const f=(await Bo.getByMerchantId(r)||[]).map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:ap(String((p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn),m=[...c,...f],E=new Map;for(const p of s){const y=l(p);for(const w of m){const _=l(w.msisdn);if(w.msisdn===p){E.set(w.walletId,w.msisdn);continue}if(_.slice(-5)===y.slice(-5)){E.set(w.walletId,w.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",E.size)}catch{}if(E.size===1){const[p,y]=Array.from(E.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:p,msisdn:y})}catch{}return{walletId:p,msisdn:y}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function IX(t,e){try{const n=i=>ap(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function TX(t){var e;try{const n=t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await a0(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");if(a&&o[a]&&o[a].walletId)return{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")};if(l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId)return{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")};if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";if(t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||""),c){const d=await a0([c],n);if(d)return d}}return null}catch{return null}}function SX(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const bX=t=>{var e,n;try{const r=t||((e=Ot.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function tV(){return typeof window>"u"?()=>{}:()=>{}}const Eo=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:SX,detectWalletFromSim:IX,identifyWalletBySim:a0,initMobileSmsBridge:tV,processMobileTransactionNotification:eV,resolveWalletBySimOrSlot:TX},Symbol.toStringTag,{value:"Module"})),AX=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},xX=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},RX=()=>{var t,e;try{const n=((t=Ot.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},PX=()=>{var t;try{const e=((t=Ot.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},t_=async(t,e)=>{var I;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=AX(n),d=xX(n);if(!c||c<=0)return;const h=((I=Ot.currentUser)==null?void 0:I.uid)||"",f=RX()||void 0,m=PX()||"",E=f||"default-line";if(!h||!f||!m)return;try{const x=await TY(h);if((x==null?void 0:x.planType)===Ka.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const p=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,y=`VF-${btoa(unescape(encodeURIComponent(p))).slice(0,24)}`,w=a?"withdraw":l?"transfer":"withdraw",_={type:w,amount:c,provider:"vodafone_cash",shopId:m,lineId:E,walletId:f,senderMsisdn:w==="transfer"&&d||void 0,receiverMsisdn:w==="withdraw"&&d||void 0,reference:y,createdBy:h,merchantUserId:h,note:"  "};try{await eV(_)}catch{}},Rs={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Xr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Xr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Xr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=Rs.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=Rs.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Xr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=Rs.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=Rs.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=Rs.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Xr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},CX=Rs,TZ=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:CX,reportsService:Rs},Symbol.toStringTag,{value:"Module"})),Eg={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Ce(G,"walletLimits",t),s={updatedAt:Le(),ownerId:(n=Ot.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await on(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Ce(G,"walletLimits",t);let r;try{r=await Qt(n)}catch(i){return console.error("     (     ):",i),null}if(r.exists()){const i=r.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||_t.now()}}const s={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:_t.now()};return await on(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Le(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid}),s}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Ce(G,"walletLimits",t);return await on(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Le(),updatedAt:Le(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Ce(G,"walletLimits",t);return await on(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Le(),updatedAt:Le(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Ce(G,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Le()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await on(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n,r){try{const s=Ce(G,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Le()},a=new Date,l=r?new Date(r):a,c=l.getDate()===a.getDate()&&l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear(),d=l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear();return n==="transfer"?(c&&(o.dailyTransferUsed=Math.max(0,(i.dailyTransferUsed||0)-e)),d&&(o.monthlyTransferUsed=Math.max(0,(i.monthlyTransferUsed||0)-e))):(c&&(o.dailyWithdrawUsed=Math.max(0,(i.dailyWithdrawUsed||0)-e)),d&&(o.monthlyWithdrawUsed=Math.max(0,(i.monthlyWithdrawUsed||0)-e))),Object.keys(o).length<=1?i:(await on(s,{...o},{merge:!0}),await this.getWalletLimits(t))}catch(s){throw console.error("      :",s),s}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Ce(G,"walletLimits",t);return await on(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Le(),lastMonthlyReset:Le(),updatedAt:Le(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},l0=Object.freeze(Object.defineProperty({__proto__:null,default:Eg,walletDailyLimitsService:Eg},Symbol.toStringTag,{value:"Module"}));class kX{constructor(){fd(this,"intervalId",null);fd(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Ot.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await r0.getToday(n);await r0.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await Rs.syncReportsDataFromFirebase(e);const n=Rs.getReportsData(e);if(!n.lastDailyResetDate||!Rs.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Xr.getUserTransactions(e),l=_=>{const I=String(_||"").toLowerCase();return["completed","confirmed","success"].includes(I)?"completed":["failed","error"].includes(I)?"failed":["cancelled","canceled"].includes(I)?"cancelled":"pending"},c=(a||[]).filter(_=>{var x,P;const I=(x=_==null?void 0:_.createdAt)!=null&&x.toDate?_.createdAt.toDate():(_==null?void 0:_.createdAt)instanceof Date?_.createdAt:new Date(_==null?void 0:_.createdAt);return((P=I==null?void 0:I.toDateString)==null?void 0:P.call(I))===o&&l(_==null?void 0:_.status)==="completed"}),d=c.length,h=c.reduce((_,I)=>_+Number(I.amount||0),0),f=_=>{const I=String(((_==null?void 0:_.type)??(_==null?void 0:_.txnType))||"").toLowerCase();return I==="withdraw"||I==="withdrawal"||I==="receive"},m=_=>{const I=String(((_==null?void 0:_.type)??(_==null?void 0:_.txnType))||"").toLowerCase();return I==="send"||I==="transfer"},E=c.filter(f).reduce((_,I)=>{const x=I.withdrawnAmount!==void 0?Number(I.withdrawnAmount):Number(I.amount||0);return _+x},0),p=c.filter(m).reduce((_,I)=>{const x=I.sentAmount!==void 0?Number(I.sentAmount):Number(I.amount||0);return _+x},0),y=c.reduce((_,I)=>_+Number(Rs.calculateTransactionProfit(I)||0),0),w=new Date(i).toISOString().slice(0,10);await nM.add({userId:e,reportDate:w,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(E.toFixed(2)),totalSent:Number(p.toFixed(2)),profit:Number(y.toFixed(2)),walletId:null}),console.log("    :",w)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await Bo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await Eg.resetDailyLimits(i)}catch{}if(r)try{await Eg.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const PR=new kX,n_=768;function DX(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${n_-1}px)`),r=()=>{e(window.innerWidth<n_)};return n.addEventListener("change",r),e(window.innerWidth<n_),()=>n.removeEventListener("change",r)},[]),!!t}function NX(){const[t,e]=S.useState("default"),[n,r]=S.useState(!1);return S.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const nV=S.createContext(void 0);function OX({children:t}){const{profile:e,user:n,loading:r}=Ws(),[s,i]=S.useState(null),[o,a]=S.useState(null),[l,c]=S.useState(!0);S.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),S.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const E=localStorage.getItem(m);i(E||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const E=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==E))try{const p=localStorage.getItem(E);i(p||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return v.jsx(nV.Provider,{value:d,children:t})}function LX(){const t=S.useContext(nV);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}const MX={},CR=F.lazy(()=>ne(()=>import("./Index-huAbCABE.js"),[],import.meta.url)),bm=F.lazy(()=>ne(()=>import("./LandingPage-wkVsOBXE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),kR=F.lazy(()=>ne(()=>import("./SubscriptionsPage-CQv9BENB.js"),__vite__mapDeps([10,3,11]),import.meta.url)),DR=F.lazy(()=>ne(()=>import("./AuthPage-3D0EiTAi.js"),__vite__mapDeps([12,1,2,7]),import.meta.url)),Am=F.lazy(()=>ne(()=>import("./TopUpPage-DfpE2DzQ.js"),__vite__mapDeps([13,14]),import.meta.url)),NR=F.lazy(()=>ne(()=>import("./AdminTopupsPage-D6IN3fkp.js"),__vite__mapDeps([15,14]),import.meta.url)),OR=F.lazy(()=>ne(()=>import("./AdminNotificationsPage-R0GPM2FQ.js"),__vite__mapDeps([16,17,18,19]),import.meta.url)),xm=F.lazy(()=>ne(()=>import("./UserRegisterPage-Ci_MpPbz.js"),__vite__mapDeps([20,21,22,23,24]),import.meta.url)),LR=F.lazy(()=>ne(()=>import("./UserAccountSetupPage-CWbYBpnr.js"),__vite__mapDeps([25,21,24,9]),import.meta.url)),MR=F.lazy(()=>ne(()=>import("./ForgotPasswordCodePage-CM2lB7DL.js"),[],import.meta.url)),VR=F.lazy(()=>ne(()=>import("./DashboardLoginPage-YuVCExnl.js"),[],import.meta.url)),FR=F.lazy(()=>ne(()=>import("./ProtectedDashboard-CxaSgm0F.js"),__vite__mapDeps([26,14,27,28,29,30,22,31]),import.meta.url)),lp=F.lazy(()=>ne(()=>import("./ProtectedUserDashboard-bA7Qlo2m.js"),__vite__mapDeps([32,33,19,27,28]),import.meta.url)),UR=F.lazy(()=>ne(()=>import("./MerchantDashboard-hA5mXqCH.js"),__vite__mapDeps([34,35,14,36,37,38,39,40,41]),import.meta.url)),jR=F.lazy(()=>ne(()=>import("./PendingApprovalPage-Ds7YdPKy.js"),__vite__mapDeps([42,43]),import.meta.url)),$R=F.lazy(()=>ne(()=>import("./AdminLogin-7iLc75xG.js"),[],import.meta.url)),BR=F.lazy(()=>ne(()=>import("./ProtectedAdminDashboard-vqkKGJFA.js"),__vite__mapDeps([44,11,45,35,14,36,27,28,46,43,17,21,37,47,3,48,24,49,50,33,18,8,6,9,40,41,51,2,7,52]),import.meta.url)),zR=F.lazy(()=>ne(()=>import("./AuthTestPage-CezOR0o2.js"),[],import.meta.url)),WR=F.lazy(()=>ne(()=>import("./ProfileSettingsPage-BZg2Qs-H.js"),__vite__mapDeps([53,46,54,27,28,40,17,14,30,51,52,41,9,4,49,6,48]),import.meta.url)),qR=F.lazy(()=>ne(()=>import("./TransactionsPage-BUl9Bn7R.js"),__vite__mapDeps([55,14,37,47,36,56,27,28,3,41,9,7,39,29,48,30,31,4,52]),import.meta.url)),HR=F.lazy(()=>ne(()=>import("./WalletAdditionPage-C51prc-Z.js"),__vite__mapDeps([57,14,4,22,24,28]),import.meta.url)),KR=F.lazy(()=>ne(()=>import("./ReferralsPage-DMggTOgV.js"),__vite__mapDeps([58,37,21,23,19,9,50,51,52]),import.meta.url)),GR=F.lazy(()=>ne(()=>import("./NotFound-DYDV0W6F.js"),[],import.meta.url)),QR=F.lazy(()=>ne(()=>import("./PrivacyPolicyPage-dr25LlI1.js"),[],import.meta.url)),Ya=new I6({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=R6({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});x6({queryClient:Ya,persister:t,maxAge:24*60*60*1e3})}catch{}const VX=()=>{if(!((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return v.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:v.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:v.jsx(hE,{className:"w-5 h-5"})})})},YR=()=>{const t=wi(),{user:e,loading:n}=Ws(),r=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?v.jsx(ZJ,{}):null},FX=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},r_=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await ne(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>Eo);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},UX=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await ne(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>Eo);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},JR=()=>{var tr;const t=DX(),e=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",{profile:n,user:r}=Ws(),{shopId:s}=LX(),i=wi(),o=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"&&i.pathname==="/"&&!!r;F.useEffect(()=>{const K=window.electronAPI;if(K){try{const z=localStorage.getItem("adbSmsReadingEnabled")==="true";K.toggleAdbSms&&K.toggleAdbSms(z)}catch{}K.onAdbSmsReceived&&K.onAdbSmsReceived(z=>{console.log("[App] ADB SMS Received:",z);const H={text:z.text,sender:z.sender,msisdn:z.sender,receivedAt:Date.now()};window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:H}))})}},[]);const a=i.pathname.startsWith("/user/login")||i.pathname.startsWith("/auth")||i.pathname.startsWith("/landing")||i.pathname==="/"&&!o&&!r,l=!!r&&!a||i.pathname.startsWith("/user/dashboard")||o;F.useEffect(()=>{r&&console.log("Dashboard State Check:",{path:i.pathname,isUserDashboard:l,isAuthOrLanding:a,userUid:r.uid})},[i.pathname,l,r]);const c=Ul(),{toast:d}=iE(),[h,f]=F.useState(!1),[m,E]=F.useState(null),[p,y]=F.useState(!1),[w,_]=F.useState(null),[I,x]=F.useState(!1),[P,L]=F.useState(""),[A,T]=F.useState(""),[R,C]=F.useState(null),[N,O]=F.useState(null),k=F.useRef(null),B=F.useRef(null),ce=F.useRef(!1),he=F.useRef(null),Se=F.useRef(""),$=F.useRef(""),q=F.useRef(new Set);F.useEffect(()=>{try{const K=localStorage.getItem("sms_suppressed_ids")||"[]",z=Array.isArray(JSON.parse(K))?JSON.parse(K):[];q.current=new Set(z.map(H=>String(H||"")))}catch{}},[]);const[X,we]=F.useState(!1),Ee=F.useRef(n);F.useEffect(()=>{Ee.current=n},[n]),NX(),F.useEffect(()=>{(async()=>{if(e)try{localStorage.getItem("hasCheckedNotificationPermission_v1")||localStorage.setItem("hasCheckedNotificationPermission_v1","true")}catch{}})();const z=H=>{};return window.addEventListener("notificationListenerStatus",z),()=>window.removeEventListener("notificationListenerStatus",z)},[d,e]),F.useEffect(()=>{if(!r)return;let K;return(async()=>{try{const{collection:H,query:ie,where:Z,onSnapshot:te}=await ne(async()=>{const{collection:Q,query:oe,where:se,onSnapshot:ae}=await Promise.resolve().then(()=>Mn);return{collection:Q,query:oe,where:se,onSnapshot:ae}},void 0,import.meta.url),{db:de}=await ne(async()=>{const{db:Q}=await Promise.resolve().then(()=>qt);return{db:Q}},void 0,import.meta.url),ye=ie(H(de,"pendingSmsPopups"),Z("userId","==",r.uid),Z("status","==","pending"));K=te(ye,Q=>{Q.docChanges().forEach(oe=>{var se,ae;if(oe.type==="added"){if(oe.doc.metadata.hasPendingWrites)return;const ue=oe.doc.data(),_e=((ae=(se=ue.createdAt)==null?void 0:se.toMillis)==null?void 0:ae.call(se))||Date.now();if(Date.now()-_e>5*60*1e3)return;const me=ue.payload;if(me){if(me.popupId&&q.current.has(me.popupId))return;Ge({...me,popupId:oe.doc.id}),ve(!0);try{ro()}catch{}}}else oe.type==="modified"?oe.doc.data().status!=="pending"&&Ge(_e=>(_e==null?void 0:_e.popupId)===oe.doc.id?(ve(!1),null):_e):oe.type==="removed"&&Ge(ue=>(ue==null?void 0:ue.popupId)===oe.doc.id?(ve(!1),null):ue)})})}catch(H){console.error("Error setting up popup listener:",H)}})(),()=>{K&&K()}},[r]);const[re,ve]=F.useState(!1),[j,Ge]=F.useState(null),[Fe,Pn]=F.useState(""),[zn,En]=F.useState(!1),[In,Cn]=F.useState(!1),[kt,ft]=F.useState(""),[at,cr]=F.useState(""),[_r,Wn]=F.useState(!1),[mt,Zt]=F.useState(0),[wr,no]=F.useState(!1),[Pr,Pa]=F.useState(""),[_s,kn]=F.useState("");F.useEffect(()=>{try{const K=(r==null?void 0:r.uid)||"default",z=localStorage.getItem(`sim1Number_${K}`)??localStorage.getItem("sim1Number")??"",H=localStorage.getItem(`sim2Number_${K}`)??localStorage.getItem("sim2Number")??"";Pa(z),kn(H),Se.current=z,$.current=H}catch{}},[r==null?void 0:r.uid]);const cs=async(K,z)=>{if(!(!K||!j))try{const{resolveWalletBySimOrSlot:H,merchantWalletService:ie,detectWalletFromSim:Z}=await ne(async()=>{const{resolveWalletBySimOrSlot:ye,merchantWalletService:Q,detectWalletFromSim:oe}=await Promise.resolve().then(()=>Eo);return{resolveWalletBySimOrSlot:ye,merchantWalletService:Q,detectWalletFromSim:oe}},void 0,import.meta.url),te=(r==null?void 0:r.uid)||"";Ge(ye=>ye?{...ye,simNumber:K,simLabel:z}:null);let de=await H({simNumbers:[K],userId:te});if(!de||!de.walletId)try{const ye=await ie.getByMerchantId(te),Q=localStorage.getItem(`wallets_${te}`),oe=Q?JSON.parse(Q):[],se=(Array.isArray(oe)?oe:[]).map(me=>({id:String((me==null?void 0:me.id)||""),phone:String((me==null?void 0:me.phone)||(me==null?void 0:me.msisdn)||""),isDefault:!!(me!=null&&me.isDefault)})),ae=(Array.isArray(ye)?ye:[]).map(me=>({id:String((me==null?void 0:me.id)||""),msisdn:String((me==null?void 0:me.msisdn)||""),isDefault:!!(me!=null&&me.isDefault)})),ue=[...se,...ae],_e=await Z([K],ue);_e&&_e.walletId&&(de={walletId:_e.walletId,msisdn:_e.msisdn})}catch{}if(de&&de.walletId){Ge(ye=>ye?{...ye,walletMsisdn:de.msisdn}:null),localStorage.setItem(`selectedWallet_${te}`,de.walletId);try{localStorage.setItem(`selectedWallet_${te}_${s||""}`,de.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:de.walletId}}))}catch{}try{const{Preferences:ye}=await ne(async()=>{const{Preferences:Q}=await Promise.resolve().then(()=>Hv);return{Preferences:Q}},void 0,import.meta.url);await ye.set({key:"selected_wallet_id",value:de.walletId})}catch{}}}catch{}},Ca=F.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}no(!1);try{c("/user/login")}catch{}},[c]);F.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&no(!0)}catch{!r&&e&&no(!0)}},[r,e]);const ro=F.useCallback(()=>{try{const K=window.AudioContext||window.webkitAudioContext;if(!K)return;const z=new K,H=z.createOscillator(),ie=z.createGain();H.type="sine",ie.gain.setValueAtTime(0,z.currentTime),H.connect(ie),ie.connect(z.destination);const Z=z.currentTime;H.frequency.setValueAtTime(800,Z),ie.gain.linearRampToValueAtTime(.15,Z+.02),H.start(Z),H.frequency.exponentialRampToValueAtTime(1200,Z+.08),ie.gain.exponentialRampToValueAtTime(1e-5,Z+.32),H.stop(Z+.35)}catch{}},[]),en=K=>{try{const z=String(K||"").replace(/[^0-9+]/g,"");if(!z)return"";if(z.startsWith("+20")){const H=z.slice(3);return H.startsWith("1")?"0"+H:H}if(z.startsWith("0020")){const H=z.slice(4);return H.startsWith("1")?"0"+H:H}if(z.startsWith("20")){const H=z.slice(2);return H.startsWith("1")?"0"+H:H}return z.startsWith("0")?z:/^(10|11|12|15)/.test(z)?"0"+z:z}catch{return""}},ka=K=>{try{const z=String(K||""),H=z.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let ie=H?parseFloat(String(H[1]).replace(",",".")):0;const Z=z.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let te=Z?en(Z[1]):void 0;const de=z.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),ye=z.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),Q=de?String(de[1]).trim():ye?String(ye[1]).trim():void 0,oe=z.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),se=z.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),ae=z.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!ie||ie<=0){const _e=z.match(/Received\s*EGP\s*([0-9.,]+)/i)||z.match(/Received\s*EGP([0-9.,]+)/i);_e&&(ie=parseFloat(String(_e[1]).replace(/,/g,"")))}if(!te){const _e=z.match(/from\s+([0-9+]+)/i);_e&&(te=en(_e[1]))}const ue=oe?String(oe[1]).trim():se?String(se[1]).trim():ae?String(ae[1]).trim():void 0;return{amount:ie,sender:te,senderName:Q,reference:ue}}catch{return{amount:0}}};F.useEffect(()=>{(async()=>{var K;try{if(!re||!j){En(!1);return}const{auth:z}=await ne(async()=>{const{auth:te}=await Promise.resolve().then(()=>qt);return{auth:te}},void 0,import.meta.url),H=((K=z.currentUser)==null?void 0:K.uid)||"",ie=H?`selectedWallet_${H}`:"selectedWallet_default",Z=localStorage.getItem(ie)||"";if(!Z){En(!0);return}try{const{merchantWalletService:te}=await ne(async()=>{const{merchantWalletService:Q}=await Promise.resolve().then(()=>rc);return{merchantWalletService:Q}},void 0,import.meta.url),de=await te.getById(Z),ye=de&&de.defaultWithdrawCommission!=null;En(!ye)}catch{En(!0)}}catch{En(!0)}})()},[re,j]);const so=async K=>{try{const{merchantWalletService:z,detectWalletFromSim:H}=await ne(async()=>{const{merchantWalletService:se,detectWalletFromSim:ae}=await Promise.resolve().then(()=>Eo);return{merchantWalletService:se,detectWalletFromSim:ae}},void 0,import.meta.url),ie=(r==null?void 0:r.uid)||"";if(!ie)return;const Z=`wallets_${ie}`,te=typeof localStorage<"u"?localStorage.getItem(Z):null,de=te?JSON.parse(te):[],ye=await z.getByMerchantId(ie),Q=[...(Array.isArray(de)?de:[]).map(se=>({id:String((se==null?void 0:se.id)||""),phone:String((se==null?void 0:se.phone)||(se==null?void 0:se.msisdn)||""),isDefault:!!(se!=null&&se.isDefault)})),...(Array.isArray(ye)?ye:[]).map(se=>({id:String((se==null?void 0:se.id)||""),msisdn:String((se==null?void 0:se.msisdn)||""),isDefault:!!(se!=null&&se.isDefault)}))],oe=await H(K||[],Q);if(oe&&oe.walletId)try{localStorage.setItem(`selectedWallet_${ie}`,oe.walletId)}catch{}}catch{}};S.useEffect(()=>{const K=async z=>{var H;try{const ie=(z==null?void 0:z.detail)||{},Z=String(ie.text||"").trim(),te=String(ie.title||"").trim();if(!Z)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*|instapay|received\s*egp|transaction/i.test(`${te} ${Z}`)){try{t_(ie,{toast:d})}catch{}return}const{auth:ye}=await ne(async()=>{const{auth:He}=await Promise.resolve().then(()=>qt);return{auth:He}},void 0,import.meta.url),Q=((H=ye.currentUser)==null?void 0:H.uid)||"";let oe=s||"";if(!Q){try{d({title:"  ",description:"   "})}catch{}return}if(!oe)try{const{doc:He,getDoc:rt}=await ne(async()=>{const{doc:tn,getDoc:Wt}=await Promise.resolve().then(()=>Mn);return{doc:tn,getDoc:Wt}},void 0,import.meta.url),{db:xe}=await ne(async()=>{const{db:tn}=await Promise.resolve().then(()=>qt);return{db:tn}},void 0,import.meta.url),lt=await rt(He(xe,"profiles",Q));if(lt.exists()){const tn=lt.data(),Wt=String((tn==null?void 0:tn.shopId)||"").trim();Wt&&(oe=Wt)}}catch{}let se="",ae="",ue=!1;try{const He=Q||"default";se=(localStorage.getItem(`sim1Number_${He}`)??localStorage.getItem("sim1Number")??"").trim(),ae=(localStorage.getItem(`sim2Number_${He}`)??localStorage.getItem("sim2Number")??"").trim(),ue=(localStorage.getItem(`smsAutoRegisterEnabled_${He}`)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"}catch{}try{const{Preferences:He}=await ne(async()=>{const{Preferences:lt}=await Promise.resolve().then(()=>Hv);return{Preferences:lt}},void 0,import.meta.url),rt=await He.get({key:"sim1_number"}),xe=await He.get({key:"sim2_number"});!se&&(rt!=null&&rt.value)&&(se=String(rt.value).trim()),!ae&&(xe!=null&&xe.value)&&(ae=String(xe.value).trim()),!se&&Se.current&&(se=Se.current),!ae&&$.current&&(ae=$.current)}catch{}let _e=[];const me=Array.isArray(((z==null?void 0:z.detail)||{}).activeSimMsisdns)?z.detail.activeSimMsisdns.map(He=>String(He||"")):[];me.length>0?_e=me:_e=[se,ae].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(_e))}catch{}let Me="";try{const He=localStorage.getItem("lastSmsSimMsisdn")||"";He&&_e.includes(He)&&(Me=He)}catch{}if(Me||(Me=_e[0]||""),Me)try{localStorage.setItem("lastSmsSimMsisdn",Me)}catch{}const{resolveWalletBySimOrSlot:ze,bindSlotWalletMapping:Tn,merchantWalletService:Dn}=await ne(async()=>{const{resolveWalletBySimOrSlot:He,bindSlotWalletMapping:rt,merchantWalletService:xe}=await Promise.resolve().then(()=>Eo);return{resolveWalletBySimOrSlot:He,bindSlotWalletMapping:rt,merchantWalletService:xe}},void 0,import.meta.url),nt=Q;let $e=await ze({simNumbers:_e,userId:nt});if(!$e&&_e.length>0){try{await so(_e)}catch{}const He=localStorage.getItem(`selectedWallet_${nt}`)||"";if(He)try{const rt=await Dn.getById(He);$e={walletId:He,msisdn:String((rt==null?void 0:rt.msisdn)||"")}}catch{}}if($e&&$e.walletId){try{localStorage.setItem(`selectedWallet_${nt}`,$e.walletId)}catch{}try{Tn({userId:nt,walletId:$e.walletId,msisdn:$e.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:$e.walletId}}))}catch{}try{const He=String($e.msisdn||"").trim();He&&(Me=He,localStorage.setItem("lastSmsSimMsisdn",He))}catch{}}const De=ka(Z),nr=Number(De.amount||0);if(!nr||nr<=0){try{t_(ie,{toast:d})}catch{}return}const yt=($e==null?void 0:$e.msisdn)||await r_(Q),Rt=De.reference||`VF-${Date.now()}`,Tt={amount:nr,sender:String(De.sender||""),senderName:De.senderName,text:Z,simNumber:Me};if(ue)try{await Cr({...Tt,reference:Rt,walletMsisdn:yt})}catch{}else{try{const{addDoc:He,collection:rt,serverTimestamp:xe}=await ne(async()=>{const{addDoc:Dt,collection:Sn,serverTimestamp:be}=await Promise.resolve().then(()=>Mn);return{addDoc:Dt,collection:Sn,serverTimestamp:be}},void 0,import.meta.url),{db:lt}=await ne(async()=>{const{db:Dt}=await Promise.resolve().then(()=>qt);return{db:Dt}},void 0,import.meta.url),tn=await He(rt(lt,"pendingSmsPopups"),{userId:Q,shopId:oe,payload:{...Tt,reference:Rt,walletMsisdn:yt,sim1Number:se,sim2Number:ae},status:"pending",createdAt:xe()}),Wt=/Received\s*EGP/i.test(String(Z))?"InstaPay":"VF-Cash";Ge({...Tt,reference:Rt,providerLabel:Wt,walletMsisdn:yt,popupId:tn.id})}catch{const He=/Received\s*EGP/i.test(String(Z))?"InstaPay":"VF-Cash";Ge({...Tt,reference:Rt,providerLabel:He,walletMsisdn:yt})}ve(!0);try{ro()}catch{}}}catch{try{t_((z==null?void 0:z.detail)||{},{toast:d})}catch{}}};try{window.addEventListener("vfNotificationReceived",K)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",K)}catch{}}},[d,s]),S.useEffect(()=>{const K=window.electronAPI;K&&typeof K.onAdbSmsReceived=="function"&&K.onAdbSmsReceived(z=>{const H={sender:z.sender,text:z.text,msisdn:z.sender,deviceId:z.deviceId,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:H}))})},[]),S.useEffect(()=>{const K=async z=>{try{const H=(z==null?void 0:z.detail)||{},ie=String(H.text||"");if(!ie)return;const Z=(n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true",te=localStorage.getItem("adbSmsReadingEnabled")==="true";if(!Z&&!te)return;const de=/Received\s*EGP/i.test(ie),ye=FX(ie,String(H.sender||H.msisdn||""));if(!de&&!ye)return;const Q=(r==null?void 0:r.uid)||"";if(!Q)return;let oe=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const se=Ee.current;let ae=(se==null?void 0:se.sim1Number)||"",ue=(se==null?void 0:se.sim2Number)||"";ae||(ae=localStorage.getItem(`sim1Number_${Q}`)||localStorage.getItem("sim1Number")||""),ue||(ue=localStorage.getItem(`sim2Number_${Q}`)||localStorage.getItem("sim2Number")||""),!ae&&Se.current&&(ae=Se.current),!ue&&$.current&&(ue=$.current),ae=String(ae).trim(),ue=String(ue).trim();const _e=String(H.msisdn||H.sender||""),me=en(_e),Me=ka(ie);let ze=Number(Me.amount||0),Tn=Me.sender||me||String(H.sender||""),Dn=Me.senderName,nt=Me.reference||"";if(de){const xe=String(ie).match(/Received\s*EGP\s*([0-9.,]+)/i);xe&&(ze=parseFloat(String(xe[1]).replace(/,/g,"")));const lt=String(ie).match(/from\s+([0-9+]+)/i);lt&&(Tn=en(lt[1]));const tn=String(ie).match(/Ref:\s*([A-Za-z0-9\-]+)/i);tn&&(nt=String(tn[1]).trim())}if(!ze||ze<=0)return;let $e="",De="";const nr=[ae,ue].filter(Boolean).map(xe=>en(xe));if(me&&nr.includes(me)&&($e=me,$e===en(ae)?De="SIM 1":$e===en(ue)&&(De="SIM 2")),!De){const xe=H==null?void 0:H.slot,lt=xe!=null?Number(xe):-1;lt===0?(De="SIM 1",$e=ae?en(ae):""):lt===1&&(De="SIM 2",$e=ue?en(ue):"")}!De&&$e&&($e===en(ae)?De="SIM 1":$e===en(ue)&&(De="SIM 2"));const yt=de?"InstaPay":"VF-Cash",Rt={amount:ze,sender:Tn,senderName:Dn,text:ie,simNumber:$e,simLabel:De},Tt=Q?`smsAutoRegisterEnabled_${Q}`:"smsAutoRegisterEnabled",rt=(localStorage.getItem(Tt)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!rt){Ge({...Rt,reference:nt,providerLabel:yt,walletMsisdn:""}),ve(!0);try{ro()}catch{}}(async()=>{try{const{resolveWalletBySimOrSlot:xe,bindSlotWalletMapping:lt,merchantWalletService:tn}=await ne(async()=>{const{resolveWalletBySimOrSlot:be,bindSlotWalletMapping:Qe,merchantWalletService:Ye}=await Promise.resolve().then(()=>Eo);return{resolveWalletBySimOrSlot:be,bindSlotWalletMapping:Qe,merchantWalletService:Ye}},void 0,import.meta.url);let Wt=Array.isArray(H.activeSimMsisdns)&&H.activeSimMsisdns.length>0?H.activeSimMsisdns.map(be=>en(String(be||""))):me?[me]:[];Wt.length===0&&(Wt=[en(ae),en(ue)].filter(Boolean));let Dt=await xe({simNumbers:Wt,subId:Number((H==null?void 0:H.subId)||-1),slotIndex:Number((H==null?void 0:H.slot)||-1),userId:Q});if(!Dt&&Wt.length>0){try{await so(Wt)}catch{}const be=localStorage.getItem(`selectedWallet_${Q}`)||"";if(be)try{const Qe=await tn.getById(be);Dt={walletId:be,msisdn:String((Qe==null?void 0:Qe.msisdn)||"")}}catch{}}if(Dt&&Dt.walletId){try{localStorage.setItem(`selectedWallet_${Q}`,Dt.walletId)}catch{}try{lt({userId:Q,subId:Number((H==null?void 0:H.subId)||-1),slotIndex:Number((H==null?void 0:H.slot)||-1),walletId:Dt.walletId,msisdn:Dt.msisdn})}catch{}}const Sn=(Dt==null?void 0:Dt.msisdn)||(Q?await r_(Q):"");if(Ge(be=>be?{...be,walletMsisdn:Sn}:null),rt)try{await Cr({...Rt,reference:nt,walletMsisdn:Sn})}catch{}else try{const{addDoc:be,collection:Qe,serverTimestamp:Ye}=await ne(async()=>{const{addDoc:We,collection:dn,serverTimestamp:Nn}=await Promise.resolve().then(()=>Mn);return{addDoc:We,collection:dn,serverTimestamp:Nn}},void 0,import.meta.url),{db:It}=await ne(async()=>{const{db:We}=await Promise.resolve().then(()=>qt);return{db:We}},void 0,import.meta.url),wt=await be(Qe(It,"pendingSmsPopups"),{userId:Q,shopId:oe,payload:{...Rt,reference:nt,walletMsisdn:Sn,sim1Number:ae,sim2Number:ue},status:"pending",createdAt:Ye()});Ge(We=>We?{...We,popupId:wt.id}:null)}catch{}}catch(xe){console.error("Background SMS processing error",xe)}})()}catch(H){console.error("SMS Handler Error",H)}};try{window.addEventListener("mobileSmsReceived",K)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",K)}catch{}}},[d,s,n,r]),S.useEffect(()=>{},[d,s]),S.useEffect(()=>{},[d,s]);const Cr=async K=>{var z,H,ie;try{const Z=K||j;if(!Z)return;const{amount:te,sender:de,text:ye,simNumber:Q,senderName:oe}=Z,se=String(ye||"");let ae=Number(te||0);const ue=typeof(K==null?void 0:K.deferredMode)=="boolean"?K.deferredMode:In,_e=(K==null?void 0:K.debtorName)??kt,me=(K==null?void 0:K.debtorNote)??at;try{ve(!1)}catch{}try{}catch{}const Me=/Received\s*EGP/i.test(se)?"instapay":"vodafone_cash";if(!ae||ae<=0){const be=se.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(be&&(ae=parseFloat(String(be[1]).replace(",","."))),!ae||ae<=0){const Qe=se.match(/Received\s*EGP\s*([0-9.,]+)/i)||se.match(/Received\s*EGP([0-9.,]+)/i);Qe&&(ae=parseFloat(String(Qe[1]).replace(/,/g,"")))}}let ze=String(de||"").trim();if(!ze){const be=se.match(/\s+\s+(\d+)/i);ze=be?en(be[1]):""}let Tn=String((Z==null?void 0:Z.reference)||"").trim();if(!Tn){const be=se.match(/\s*\s*([\d\.]+)/i);Tn=be?String(be[1]).trim():String(Date.now())}if(!ae||ae<=0){try{d({title:"      ",variant:"destructive"})}catch{}return}const{auth:Dn}=await ne(async()=>{const{auth:be}=await Promise.resolve().then(()=>qt);return{auth:be}},void 0,import.meta.url),nt=((z=Dn.currentUser)==null?void 0:z.uid)||"";let $e=s||"";if(!nt){try{d({title:"  ",description:"   "})}catch{}return}if(!$e)try{const{doc:be,getDoc:Qe}=await ne(async()=>{const{doc:wt,getDoc:We}=await Promise.resolve().then(()=>Mn);return{doc:wt,getDoc:We}},void 0,import.meta.url),{db:Ye}=await ne(async()=>{const{db:wt}=await Promise.resolve().then(()=>qt);return{db:wt}},void 0,import.meta.url),It=await Qe(be(Ye,"profiles",nt));if(It.exists()){const wt=It.data(),We=String((wt==null?void 0:wt.shopId)||"").trim();We&&($e=We)}}catch{}if(!$e){try{d({title:"  ",description:"   "})}catch{}return}let De="";if(Q)try{const{detectWalletFromSim:be}=await ne(async()=>{const{detectWalletFromSim:Je}=await Promise.resolve().then(()=>Eo);return{detectWalletFromSim:Je}},void 0,import.meta.url),{merchantWalletService:Qe}=await ne(async()=>{const{merchantWalletService:Je}=await Promise.resolve().then(()=>rc);return{merchantWalletService:Je}},void 0,import.meta.url),Ye=await Qe.getByMerchantId(nt),It=localStorage.getItem(`wallets_${nt}`),wt=It?JSON.parse(It):[],We=(Array.isArray(wt)?wt:[]).map(Je=>({id:String((Je==null?void 0:Je.id)||""),phone:String((Je==null?void 0:Je.phone)||(Je==null?void 0:Je.msisdn)||""),isDefault:!!(Je!=null&&Je.isDefault)})),dn=(Array.isArray(Ye)?Ye:[]).map(Je=>({id:String((Je==null?void 0:Je.id)||""),msisdn:String((Je==null?void 0:Je.msisdn)||""),isDefault:!!(Je!=null&&Je.isDefault)})),Nn=[...We,...dn],qn=await be([Q],Nn);qn&&qn.walletId&&(De=qn.walletId)}catch{}if(De||(De=await UX(nt)),!De)try{const{doc:be,getDoc:Qe}=await ne(async()=>{const{doc:Ze,getDoc:Dr}=await Promise.resolve().then(()=>Mn);return{doc:Ze,getDoc:Dr}},void 0,import.meta.url),{db:Ye}=await ne(async()=>{const{db:Ze}=await Promise.resolve().then(()=>qt);return{db:Ze}},void 0,import.meta.url);let It="",wt="";try{const Ze=await Qe(be(Ye,"profiles",nt));if(Ze.exists()){const Dr=Ze.data();It=String((Dr==null?void 0:Dr.sim1Number)||"").trim(),wt=String((Dr==null?void 0:Dr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:We}=await ne(async()=>{const{detectWalletFromSim:Ze}=await Promise.resolve().then(()=>Eo);return{detectWalletFromSim:Ze}},void 0,import.meta.url),{merchantWalletService:dn}=await ne(async()=>{const{merchantWalletService:Ze}=await Promise.resolve().then(()=>rc);return{merchantWalletService:Ze}},void 0,import.meta.url),Nn=`wallets_${nt}`,qn=localStorage.getItem(Nn),Je=qn?JSON.parse(qn):[],nn=await dn.getByMerchantId(nt),rn=(Array.isArray(Je)?Je:[]).map(Ze=>({id:String((Ze==null?void 0:Ze.id)||""),phone:String((Ze==null?void 0:Ze.phone)||(Ze==null?void 0:Ze.msisdn)||""),isDefault:!!(Ze!=null&&Ze.isDefault)})),hn=(Array.isArray(nn)?nn:[]).map(Ze=>({id:String((Ze==null?void 0:Ze.id)||""),msisdn:String((Ze==null?void 0:Ze.msisdn)||""),isDefault:!!(Ze!=null&&Ze.isDefault)})),kr=[...rn,...hn],On=Q||String(localStorage.getItem("lastSmsSimMsisdn")||"");let bn=(On?[On]:[]).filter(Boolean);bn.length===0&&(bn=[It,wt].filter(Boolean));const ut=await We(bn,kr);if(ut&&ut.walletId){De=ut.walletId;try{localStorage.setItem(`selectedWallet_${nt}`,De)}catch{}}}catch{}if(!De){try{d({title:"   ",description:"       "})}catch{}return}try{const be=nt;try{localStorage.setItem(`selectedWallet_${be}`,De)}catch{}try{localStorage.setItem(`selectedWallet_${be}_${$e}`,De)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:De}}))}catch{}try{const{Preferences:Qe}=await ne(async()=>{const{Preferences:Ye}=await Promise.resolve().then(()=>Hv);return{Preferences:Ye}},void 0,import.meta.url);await Qe.set({key:"selected_wallet_id",value:De}),await Qe.set({key:"current_user_id",value:be})}catch{}}catch{}const{recordAutoTransaction:nr,userDataService:yt}=await ne(async()=>{const{recordAutoTransaction:be,userDataService:Qe}=await Promise.resolve().then(()=>rc);return{recordAutoTransaction:be,userDataService:Qe}},void 0,import.meta.url),Rt=Fe&&Fe.trim()!==""?Math.max(0,parseFloat(Fe)):null;let Tt=0;if(Rt!=null)Tt=Rt;else try{const{merchantWalletService:be}=await ne(async()=>{const{merchantWalletService:It}=await Promise.resolve().then(()=>rc);return{merchantWalletService:It}},void 0,import.meta.url),Qe=await be.getById(String(De)),Ye=Qe&&Qe.defaultWithdrawCommission;if(Ye!=null)Tt=Math.round((Number(Ye)||0)*Number(ae)/1e3*100)/100;else{const{calculateCommission:It}=await ne(async()=>{const{calculateCommission:wt}=await Promise.resolve().then(()=>tl);return{calculateCommission:wt}},void 0,import.meta.url);Tt=It(Number(ae),"receive")}}catch{const{calculateCommission:be}=await ne(async()=>{const{calculateCommission:Qe}=await Promise.resolve().then(()=>tl);return{calculateCommission:Qe}},void 0,import.meta.url);Tt=be(Number(ae),"receive")}try{const{walletDailyLimitsService:be}=await ne(async()=>{const{walletDailyLimitsService:Ye}=await Promise.resolve().then(()=>l0);return{walletDailyLimitsService:Ye}},void 0,import.meta.url),Qe=await be.canPerformOperation(String(De),Math.max(0,Number(ae||0)),"withdraw");if(!Qe.canPerform)try{d({title:"  ",description:String(Qe.message||"      "),variant:"destructive"})}catch{}}catch{}const He=Tn||`${se}|${Date.now()}`,rt=Q||String(localStorage.getItem("lastSmsSimMsisdn")||""),lt=String((Z==null?void 0:Z.walletMsisdn)||"").trim()||rt||await r_(nt)||"",tn=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(ue)try{const be=await yt.getUserData(nt),Qe=Array.isArray(be==null?void 0:be.debts)?be.debts:[],Ye=tn==="add"?Number(ae)+Number(Tt):Number(ae),It={id:`DEBT-${Date.now()}`,debtorName:_e||oe||ze||"",amount:Math.round(Number(Ye)*100)/100,reason:me||"  VodafoneCash",customerId:void 0,mobile:ze,status:"pending",createdAt:new Date},wt=[It,...Qe];await yt.updateUserData(nt,{debts:wt});try{const We=Tt;await yt.saveUserTransaction(nt,{type:"withdraw",amount:ae,withdrawnAmount:ae,commission:We,status:"pending",createdAt:new Date,senderMsisdn:ze,receiverMsisdn:lt,senderName:oe,walletId:De,fromWallet:De,lineId:lt,provider:Me,reference:He,transactionId:`DEFER-${Date.now()}`,linkedDebtId:It.id})}catch{}try{const We=(K==null?void 0:K.popupId)||(j==null?void 0:j.popupId)||"";if(We){const{doc:dn,updateDoc:Nn,serverTimestamp:qn}=await ne(async()=>{const{doc:nn,updateDoc:rn,serverTimestamp:hn}=await Promise.resolve().then(()=>Mn);return{doc:nn,updateDoc:rn,serverTimestamp:hn}},void 0,import.meta.url),{db:Je}=await ne(async()=>{const{db:nn}=await Promise.resolve().then(()=>qt);return{db:nn}},void 0,import.meta.url);try{await Nn(dn(Je,"pendingSmsPopups",We),{status:"confirmed",confirmedAt:qn()})}catch{}try{(ie=(H=q.current)==null?void 0:H.add)==null||ie.call(H,We);const nn=Array.from(q.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(nn))}catch{}}}catch{}try{d({title:"  ",description:"      "})}catch{}return}catch{}ve(!1),Ge(null);try{d({title:"  ..."})}catch{}const Wt=`TX-${Date.now()}`,Dt=Math.max(0,Number(ae||0)),Sn=Math.max(0,Tt);try{const be=`cashBalance_${nt}_${$e||"main"}`,Qe=`walletBalances_${nt}_${$e||"main"}`,Ye=localStorage.getItem(be),It=localStorage.getItem(Qe);let wt=Ye?parseFloat(Ye):0,We=It?JSON.parse(It):{};We[De]=(Number(We[De])||0)+Dt,wt=wt-Dt+Sn;const dn={id:Wt,type:"withdraw",senderPhone:ze,receiverPhone:lt,amount:ae,status:"completed",createdAt:new Date,withdrawnAmount:ae,commission:Sn,fromWallet:De,senderName:oe,provider:Me,reference:He,shopName:"  ()"};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{delta:{amount:Dt,commission:Sn,walletId:De,type:"withdraw"},limitUpdate:{walletId:De,amount:Dt,type:"withdraw"}}}))}catch(be){console.error("Optimistic update failed",be)}(async()=>{var Qe,Ye,It,wt;let be="";try{be=await nr({shopId:$e,lineId:lt,walletId:De,amount:ae,note:"SMS-ManualConfirm",provider:Me,createdBy:nt,senderMsisdn:ze,senderName:oe,reference:He,text:se});try{const We=(K==null?void 0:K.popupId)||(j==null?void 0:j.popupId)||"";if(We){const{doc:dn,updateDoc:Nn,serverTimestamp:qn}=await ne(async()=>{const{doc:nn,updateDoc:rn,serverTimestamp:hn}=await Promise.resolve().then(()=>Mn);return{doc:nn,updateDoc:rn,serverTimestamp:hn}},void 0,import.meta.url),{db:Je}=await ne(async()=>{const{db:nn}=await Promise.resolve().then(()=>qt);return{db:nn}},void 0,import.meta.url);try{await Nn(dn(Je,"pendingSmsPopups",We),{status:"confirmed",confirmedAt:qn()})}catch{}try{(Ye=(Qe=q.current)==null?void 0:Qe.add)==null||Ye.call(Qe,We);const nn=Array.from(q.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(nn))}catch{}}}catch{}}catch(We){console.error(We)}try{const We=Math.max(0,Number(ae||0)),{doc:dn,getDoc:Nn,updateDoc:qn}=await ne(async()=>{const{doc:bn,getDoc:ut,updateDoc:Ze}=await Promise.resolve().then(()=>Mn);return{doc:bn,getDoc:ut,updateDoc:Ze}},void 0,import.meta.url),{db:Je}=await ne(async()=>{const{db:bn}=await Promise.resolve().then(()=>qt);return{db:bn}},void 0,import.meta.url),nn=dn(Je,"dashboardData",$e),rn=await Nn(nn);let hn=rn.exists()?Number(((It=rn.data())==null?void 0:It.cashBalance)||0):0;const kr=rn.exists()?((wt=rn.data())==null?void 0:wt.walletBalances)||{}:{},On=Number(kr[De]||0);kr[De]=On+We,hn=hn-We+Math.max(0,Tt),await qn(nn,{cashBalance:hn,walletBalances:kr,lastUpdated:new Date().toISOString()});try{const bn={id:be||`TX-${Date.now()}`,type:"withdraw",senderPhone:ze,receiverPhone:lt,amount:ae,status:"completed",createdAt:new Date,withdrawnAmount:ae,commission:Tt,fromWallet:De,senderName:oe,provider:Me,reference:He,shopName:" "};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{}}))}catch{}try{const{walletDailyLimitsService:bn}=await ne(async()=>{const{walletDailyLimitsService:ut}=await Promise.resolve().then(()=>l0);return{walletDailyLimitsService:ut}},void 0,import.meta.url);await bn.updateUsage(String(De),We,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(De)}}))}catch{}}catch{}}catch{}(async()=>{try{const We=Tt;await yt.saveUserTransaction(nt,{type:"withdraw",amount:ae,withdrawnAmount:ae,commission:We,status:"completed",createdAt:new Date,senderMsisdn:ze,receiverMsisdn:lt,senderName:oe,walletId:De,fromWallet:De,lineId:lt,provider:Me,reference:He,transactionId:be||Wt});try{window.dispatchEvent(new CustomEvent("transaction-created"))}catch{}}catch{}})(),Ya.invalidateQueries({queryKey:["dashboardData"]}),Ya.invalidateQueries({queryKey:["transactions"]}),Ya.invalidateQueries({queryKey:["walletDailyLimits"]}),Ya.invalidateQueries({queryKey:["wallets"]}),Ya.invalidateQueries({queryKey:["user-stats"]});try{d({title:`     ${be||Wt}`})}catch{}})()}catch(Z){try{d({title:String((Z==null?void 0:Z.message)||"  "),variant:"destructive"})}catch{}}};S.useEffect(()=>{try{PR.start()}catch{}return()=>{try{PR.stop()}catch{}}},[]),S.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const K=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),z=String(localStorage.getItem("android_installed_version")||"").trim(),H=localStorage.getItem("android_last_ack_code"),ie=localStorage.getItem("android_installed_code"),Z=H?Number(H):null,te=ie?Number(ie):null,de=K||z,ye=Z??te??null;de&&L(de),ye&&O(ye);const{doc:Q,getDoc:oe}=await ne(async()=>{const{doc:ue,getDoc:_e}=await Promise.resolve().then(()=>Mn);return{doc:ue,getDoc:_e}},void 0,import.meta.url),{db:se}=await ne(async()=>{const{db:ue}=await Promise.resolve().then(()=>qt);return{db:ue}},void 0,import.meta.url),ae=await oe(Q(se,"profiles",r.uid));if(ae.exists()){const ue=ae.data(),_e=String((ue==null?void 0:ue.lastAckAndroidVersion)||(ue==null?void 0:ue.androidInstalledVersion)||(ue==null?void 0:ue.lastAckUpdateId)||"").trim(),me=typeof(ue==null?void 0:ue.lastAckAndroidCode)=="number"?ue.lastAckAndroidCode:typeof(ue==null?void 0:ue.androidInstalledCode)=="number"?ue.androidInstalledCode:null,Me=(Tn,Dn)=>{const nt=String(Tn||"").replace(/^v/i,"").split(".").map(De=>parseInt(De,10)||0),$e=String(Dn||"").replace(/^v/i,"").split(".").map(De=>parseInt(De,10)||0);for(let De=0;De<Math.max(nt.length,$e.length);De++){const nr=nt[De]||0,yt=$e[De]||0;if(nr>yt)return 1;if(nr<yt)return-1}return 0};let ze=!1;if(typeof me=="number"&&typeof ye=="number"?ze=me>ye:typeof me=="number"&&ye==null?ze=!0:_e&&de?ze=Me(_e,de)>0:_e&&!de&&(ze=!0),ze){if(_e){try{localStorage.setItem("android_installed_version",_e)}catch{}L(_e)}if(typeof me=="number"){try{localStorage.setItem("android_installed_code",String(me))}catch{}O(me)}}else if(typeof me=="number"&&ye==null){try{localStorage.setItem("android_installed_code",String(me))}catch{}O(me)}}}catch{}})()},[r==null?void 0:r.uid]),S.useEffect(()=>{try{const z=String((window==null?void 0:window.__nativeAppVersion)||"").trim();z&&T(z);const H=window==null?void 0:window.__nativeAppVersionCode;if(typeof H=="number"){C(H);try{localStorage.setItem("android_installed_code",String(H))}catch{}}try{z&&localStorage.setItem("android_installed_version",z)}catch{}}catch{}const K=z=>{var H,ie;try{const Z=String((((H=z==null?void 0:z.detail)==null?void 0:H.version)??"")||"").trim(),te=(ie=z==null?void 0:z.detail)==null?void 0:ie.code;Z&&T(Z);try{Z&&localStorage.setItem("android_installed_version",Z)}catch{}typeof te=="number"&&C(te)}catch{}};try{window.addEventListener("native-app-version",K)}catch{}return()=>{try{window.removeEventListener("native-app-version",K)}catch{}}},[]),S.useEffect(()=>{try{const K=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",z=String(A||"").trim();if(!K||!z||!(r!=null&&r.uid))return;(async()=>{try{const{doc:H,setDoc:ie,serverTimestamp:Z}=await ne(async()=>{const{doc:de,setDoc:ye,serverTimestamp:Q}=await Promise.resolve().then(()=>Mn);return{doc:de,setDoc:ye,serverTimestamp:Q}},void 0,import.meta.url),{db:te}=await ne(async()=>{const{db:de}=await Promise.resolve().then(()=>qt);return{db:de}},void 0,import.meta.url);await ie(H(te,"profiles",r.uid),{androidInstalledVersion:z,androidInstalledAt:Z()},{merge:!0});try{localStorage.setItem("android_installed_version",z)}catch{}}catch{}})()}catch{}},[A,r==null?void 0:r.uid]),S.useEffect(()=>{Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"&&(async()=>{try{await ne(()=>import("./ProtectedUserDashboard-bA7Qlo2m.js"),__vite__mapDeps([32,33,19,27,28]),import.meta.url),await ne(()=>import("./UserDashboardPage-1AkkOoGQ.js"),__vite__mapDeps([59,37,14,27,28,22,5,40,41,24,4,39,47,36,30,45,35,46,43,52,9,56,3,7,29,48,33,18,31,38,54,6]),import.meta.url),await ne(()=>Promise.resolve().then(()=>jY),void 0,import.meta.url),await ne(()=>import("./ProfileSettingsPage-BZg2Qs-H.js"),__vite__mapDeps([53,46,54,27,28,40,17,14,30,51,52,41,9,4,49,6,48]),import.meta.url),await ne(()=>import("./TransactionsPage-BUl9Bn7R.js"),__vite__mapDeps([55,14,37,47,36,56,27,28,3,41,9,7,39,29,48,30,31,4,52]),import.meta.url)}catch{}})()},[]),S.useEffect(()=>{if(!t)return;const K=document.createElement("style");K.setAttribute("data-disable-pull-to-refresh","true"),K.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(K);let z=0,H=null;const ie=te=>{var de,ye;z=((ye=(de=te.touches)==null?void 0:de[0])==null?void 0:ye.clientY)||0,H=te.target},Z=te=>{var ue,_e;const de=((_e=(ue=te.touches)==null?void 0:ue[0])==null?void 0:_e.clientY)||0,ye=document.scrollingElement||document.documentElement,Q=ye.scrollTop||window.scrollY||0,oe=ye.scrollHeight-ye.clientHeight||0,se=H||null,ae=(()=>{let me=se;for(;me&&me!==document.body;){const ze=window.getComputedStyle(me).overflowY;if((ze==="auto"||ze==="scroll")&&me.scrollHeight>me.clientHeight)return!0;me=me.parentElement}return!1})();!ae&&Q<=0&&de>z&&te.cancelable&&te.preventDefault(),!ae&&Q>=oe&&de<z&&te.cancelable&&te.preventDefault()};return document.addEventListener("touchstart",ie,{passive:!0}),document.addEventListener("touchmove",Z,{passive:!1}),()=>{document.removeEventListener("touchstart",ie),document.removeEventListener("touchmove",Z);try{document.head.removeChild(K)}catch{}}},[t]),S.useEffect(()=>{if(!((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"))return;try{const ie=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=ie,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const ie=(window.location.assign||(Z=>{})).bind(window.location);window.__originalAssign=ie,window.location.assign=Z=>{try{if(String(Z||"").startsWith("/user/dashboard")){c("/user/dashboard");return}}catch{}try{ie(Z)}catch{}}}catch{}let z=null,H=!1;return(async()=>{try{const{listenAndroidUpdates:ie}=await ne(async()=>{const{listenAndroidUpdates:Z}=await Promise.resolve().then(()=>uX);return{listenAndroidUpdates:Z}},void 0,import.meta.url);z=ie(Z=>{if(H)return;const te=String((Z==null?void 0:Z.version)||"").trim(),de=String((Z==null?void 0:Z.url)||"").trim(),ye=String((Z==null?void 0:Z.notes)||"").trim(),Q=!!(Z!=null&&Z.force),oe=typeof(Z==null?void 0:Z.code)=="number"?Z.code:void 0,se=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),ae=String(P||se||"").trim(),ue=(yt,Rt)=>{const Tt=String(yt||"").replace(/^v/i,"").split(".").map(rt=>parseInt(rt,10)||0),He=String(Rt||"").replace(/^v/i,"").split(".").map(rt=>parseInt(rt,10)||0);for(let rt=0;rt<Math.max(Tt.length,He.length);rt++){const xe=Tt[rt]||0,lt=He[rt]||0;if(xe>lt)return 1;if(xe<lt)return-1}return 0},_e=String(A||"").trim(),me=String(localStorage.getItem("android_installed_version")||"").trim(),Me=localStorage.getItem("android_installed_code"),ze=Me?Number(Me):null,Tn=[R,N,ze].filter(yt=>typeof yt=="number").reduce((yt,Rt)=>yt===void 0?Rt:Math.max(yt,Rt),void 0),Dn=typeof oe=="number"&&typeof Tn=="number"?oe>Tn:void 0,nt=(()=>{const yt=[_e,ae,me].filter(Boolean);return yt.length===0?"":yt.reduce((Rt,Tt)=>ue(Tt,Rt)>0?Tt:Rt)})(),$e=ue(te,nt)>0;if(!!de&&(!!te||typeof oe=="number")&&(Dn!==void 0?Dn:$e)){const yt="   ",Rt=`${ye?ye+`
`:""} : ${te}`;E({title:yt,message:Rt,apkUrl:de,force:Q,versionId:te,versionCode:oe}),f(!0)}else try{f(!1)}catch{}})}catch{}})(),()=>{H=!0;try{typeof z=="function"&&z()}catch{}}},[P,A]),S.useEffect(()=>{const K=H=>{const ie=(H==null?void 0:H.detail)||{};try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{B.current&&(clearInterval(B.current),B.current=null)}catch{}y(!0),_({percent:ie.percent??null,downloaded:ie.downloaded??0,total:ie.total??0})},z=()=>{try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{B.current&&(clearInterval(B.current),B.current=null)}catch{}y(!1),x(!0),_({percent:100,downloaded:((w==null?void 0:w.total)??(w==null?void 0:w.downloaded)??0)||0,total:(w==null?void 0:w.total)??0});try{const H=String((m==null?void 0:m.versionId)||"").trim();if(H){try{localStorage.setItem("android_last_ack_version_id",H)}catch{}try{localStorage.setItem("android_installed_version",H)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:ie,setDoc:Z,serverTimestamp:te}=await ne(async()=>{const{doc:ye,setDoc:Q,serverTimestamp:oe}=await Promise.resolve().then(()=>Mn);return{doc:ye,setDoc:Q,serverTimestamp:oe}},void 0,import.meta.url),{db:de}=await ne(async()=>{const{db:ye}=await Promise.resolve().then(()=>qt);return{db:ye}},void 0,import.meta.url);await Z(ie(de,"profiles",r.uid),{lastAckAndroidVersion:H,androidInstalledVersion:H,lastAckAt:te(),androidInstalledAt:te()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",K),window.addEventListener("androidUpdateDownloaded",z),()=>{window.removeEventListener("androidUpdateProgress",K),window.removeEventListener("androidUpdateDownloaded",z)}},[]),S.useEffect(()=>{let K=!0;return(async()=>{var z;try{const{auth:H}=await ne(async()=>{const{auth:ue}=await Promise.resolve().then(()=>qt);return{auth:ue}},void 0,import.meta.url),ie=((z=H.currentUser)==null?void 0:z.uid)||"";if(!ie)return;const{db:Z}=await ne(async()=>{const{db:ue}=await Promise.resolve().then(()=>qt);return{db:ue}},void 0,import.meta.url),{collection:te,query:de,where:ye,onSnapshot:Q,deleteDoc:oe}=await ne(async()=>{const{collection:ue,query:_e,where:me,onSnapshot:Me,deleteDoc:ze}=await Promise.resolve().then(()=>Mn);return{collection:ue,query:_e,where:me,onSnapshot:Me,deleteDoc:ze}},void 0,import.meta.url),se=de(te(Z,"pendingSmsPopups"),ye("userId","==",ie),ye("status","==","pending"),limit(20)),ae=Q(se,ue=>{var _e,me,Me,ze,Tn,Dn,nt,$e,De,nr,yt,Rt,Tt;if(K)try{const He=typeof ue.docChanges=="function"?ue.docChanges():[];console.log("Web Popup: Snapshot received",He.length,"changes");for(const rt of He){if(rt.type==="added"){const xe=rt.doc.data()||{},lt=rt.doc.id;console.log("Web Popup: Received document",lt,xe),(me=(_e=q.current)==null?void 0:_e.has)!=null&&me.call(_e,lt)&&console.log("Web Popup: ID is in suppressed list",lt);try{const On=xe.createdAt||xe.timestamp||(xe.payload||{}).createdAt||(xe.payload||{}).timestamp,bn=On&&typeof On.toMillis=="function"?On.toMillis():typeof xe.createdAtMs=="number"?xe.createdAtMs:typeof(xe.payload||{}).createdAtMs=="number"?(xe.payload||{}).createdAtMs:null;if(typeof bn=="number"&&bn<Date.now()-36e5){console.log("Web Popup: Cleaning up old popup",lt),oe(rt.doc.ref).catch(()=>{});continue}}catch{}let tn=xe.amount??((Me=xe.payload)==null?void 0:Me.amount)??null,Wt=xe.sender??((ze=xe.payload)==null?void 0:ze.sender)??"";const Dt=xe.senderName??((Tn=xe.payload)==null?void 0:Tn.senderName)??"";let Sn=xe.reference??((Dn=xe.payload)==null?void 0:Dn.reference)??"";const be=xe.text??((nt=xe.payload)==null?void 0:nt.text)??"";let Qe=xe.simNumber??(($e=xe.payload)==null?void 0:$e.simNumber)??"",Ye=xe.simSlot??((De=xe.payload)==null?void 0:De.simSlot);Ye==null&&(Ye=xe.slot??((nr=xe.payload)==null?void 0:nr.slot)),Ye==null&&(Ye=xe.sim_slot??((yt=xe.payload)==null?void 0:yt.sim_slot)),Ye==null&&(Ye=xe.lineId??((Rt=xe.payload)==null?void 0:Rt.lineId));const It=Ye!=null?String(Ye):"",wt=(r==null?void 0:r.uid)||"default";let We=localStorage.getItem(`sim1Number_${wt}`)??localStorage.getItem("sim1Number")??"",dn=localStorage.getItem(`sim2Number_${wt}`)??localStorage.getItem("sim2Number")??"";const Nn=xe.payload||{},qn=Nn.sim1Number||Nn.sim1||xe.sim1Number||"",Je=Nn.sim2Number||Nn.sim2||xe.sim2Number||"";qn&&(We=String(qn).trim(),Pa(We)),Je&&(dn=String(Je).trim(),kn(dn));let nn=Qe,rn="";It==="1"?(rn="SIM 2",dn&&(nn=dn)):(It==="0"||!It)&&(rn="SIM 1",We&&(nn=We));const hn=xe.walletMsisdn??((Tt=xe.payload)==null?void 0:Tt.walletMsisdn)??"";let kr="VF-Cash";if(/Received\s*EGP/i.test(String(be))){kr="InstaPay";const On=String(be).match(/Received\s*EGP\s*([0-9.,]+)/i);On&&(tn=parseFloat(String(On[1]).replace(/,/g,"")));const bn=String(be).match(/from\s+([0-9+]+)/i);bn&&(Wt=en(bn[1]));const ut=String(be).match(/Ref:\s*([A-Za-z0-9\-]+)/i);ut&&(Sn=String(ut[1]).trim())}if(K){console.log("Web Popup: Opening modal for",lt),Ge({amount:Number(tn||0),sender:String(Wt||""),senderName:Dt,reference:String(Sn||""),text:be,simNumber:nn,simLabel:rn,walletMsisdn:hn,providerLabel:kr,popupId:lt,sim1Number:We,sim2Number:dn}),ve(!0);try{d({title:" ",description:`   ${tn}  ${Wt}`})}catch{}try{ro()}catch(On){console.error("PlayBell failed",On)}}}rt.type}}catch{}});he.current=ae}catch{}})(),()=>{K=!1;try{const z=he.current;typeof z=="function"&&z()}catch{}}},[r==null?void 0:r.uid]),S.useEffect(()=>{const K=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"||/android/i.test(navigator.userAgent.toLowerCase()),z=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(K||z)return;let H=!1;return(async()=>{try{const ie="0.0.0",Z=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!Z.ok)return;const te=await Z.json(),de=String((te==null?void 0:te.version)||"0.0.0"),ye=!!(te!=null&&te.force);if(!H&&((oe,se)=>{const ae=String(oe).split(".").map(_e=>parseInt(_e,10)||0),ue=String(se).split(".").map(_e=>parseInt(_e,10)||0);for(let _e=0;_e<Math.max(ae.length,ue.length);_e++){const me=ae[_e]||0,Me=ue[_e]||0;if(me>Me)return 1;if(me<Me)return-1}return 0})(de,ie)>0){if(ye){try{window.location.reload()}catch{}return}try{d({title:"  ",description:` ${de}      `})}catch{}}}catch{}})(),()=>{H=!0}},[]),S.useEffect(()=>{if(re)try{const K=(r==null?void 0:r.uid)||"default",z=localStorage.getItem(`sim1Number_${K}`)??localStorage.getItem("sim1Number")??"",H=localStorage.getItem(`sim2Number_${K}`)??localStorage.getItem("sim2Number")??"";Pa(z),kn(H)}catch{}},[re,r==null?void 0:r.uid]);const us=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),Ii=(()=>{const K=(H,ie)=>{const Z=String(H||"").replace(/^v/i,"").split(".").map(de=>parseInt(de,10)||0),te=String(ie||"").replace(/^v/i,"").split(".").map(de=>parseInt(de,10)||0);for(let de=0;de<Math.max(Z.length,te.length);de++){const ye=Z[de]||0,Q=te[de]||0;if(ye>Q)return 1;if(ye<Q)return-1}return 0},z=[A,P,us].filter(Boolean);return z.length===0?"":z.reduce((H,ie)=>K(ie,H)>0?ie:H)})();return v.jsxs(v.Fragment,{children:[v.jsx(dh,{open:wr,onOpenChange:()=>{},children:v.jsxs(qc,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:K=>{try{K.preventDefault()}catch{}},onEscapeKeyDown:K=>{try{K.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[v.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),v.jsx(Hc,{className:"text-center",children:v.jsxs("div",{className:"flex items-center justify-center gap-3",children:[v.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:v.jsx(mk,{className:"w-6 h-6"})}),v.jsx(Kc,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),v.jsx("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:v.jsxs("div",{className:"mt-4 text-center text-gray-700 leading-relaxed",children:[v.jsx("p",{children:"   .                    ."}),v.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"        ."})]})}),v.jsx("div",{className:"mt-4",children:v.jsx(Vn,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Ca,children:"  "})})]})}),(()=>{try{const K=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",z=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),X&&(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"&&v.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[v.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:v.jsx("span",{className:"text-2xl",children:"!"})}),v.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),v.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),v.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:v.jsx(Vn,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),h&&m&&v.jsx(dh,{open:h,onOpenChange:K=>{m!=null&&m.force||f(K)},children:v.jsxs(qc,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[v.jsxs(Hc,{className:"text-center",children:[v.jsx(Kc,{className:"text-base md:text-lg font-bold text-gray-900",children:m.title}),v.jsx(i0,{className:"text-sm text-gray-700 whitespace-pre-line",children:m.message}),v.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:Ii?`  : v${Ii}`:""})]}),v.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!m.force&&!p&&!I&&v.jsx(Vn,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>f(!1),children:""}),!I&&v.jsx(Vn,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const K=String((m==null?void 0:m.versionId)||"").trim(),z=m==null?void 0:m.versionCode;if(K)try{localStorage.setItem("android_last_ack_version_id",K)}catch{}if(typeof z=="number")try{localStorage.setItem("android_last_ack_code",String(z))}catch{}if((async()=>{try{if(r!=null&&r.uid&&K){const{doc:ie,setDoc:Z,serverTimestamp:te}=await ne(async()=>{const{doc:Q,setDoc:oe,serverTimestamp:se}=await Promise.resolve().then(()=>Mn);return{doc:Q,setDoc:oe,serverTimestamp:se}},void 0,import.meta.url),{db:de}=await ne(async()=>{const{db:Q}=await Promise.resolve().then(()=>qt);return{db:Q}},void 0,import.meta.url),ye={lastAckAndroidVersion:K,lastAckAt:te()};typeof z=="number"&&(ye.lastAckAndroidCode=z),await Z(ie(de,"profiles",r.uid),ye,{merge:!0})}}catch{}})(),(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"){const ie=m.apkUrl,Z=`cashy://update?url=${encodeURIComponent(ie)}`;y(!0),_({percent:0,downloaded:0,total:0});try{B.current&&clearInterval(B.current),B.current=setInterval(()=>{_(te=>{const de=typeof(te==null?void 0:te.percent)=="number"?te.percent:0,ye=ce.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(de+ye))),downloaded:(te==null?void 0:te.downloaded)??0,total:(te==null?void 0:te.total)??0}})},600)}catch{}window.location.href=Z;try{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{try{ce.current=!1}catch{}try{k.current=null}catch{}},8e3)}catch{}}else{const ie=m.apkUrl;try{window.open(ie,"_blank")}catch{}}}catch{}},children:p?" ...":" "}),I&&v.jsx(Vn,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"){f(!1);try{const z=String((m==null?void 0:m.versionId)||"").trim();if(z){try{localStorage.setItem("android_last_ack_version_id",z)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:H,setDoc:ie,serverTimestamp:Z}=await ne(async()=>{const{doc:Q,setDoc:oe,serverTimestamp:se}=await Promise.resolve().then(()=>Mn);return{doc:Q,setDoc:oe,serverTimestamp:se}},void 0,import.meta.url),{db:te}=await ne(async()=>{const{db:Q}=await Promise.resolve().then(()=>qt);return{db:Q}},void 0,import.meta.url),de={lastAckAndroidVersion:z,androidInstalledVersion:z,lastAckAt:Z(),androidInstalledAt:Z()},ye=m==null?void 0:m.versionCode;if(typeof ye=="number"){de.lastAckAndroidCode=ye,de.androidInstalledCode=ye;try{localStorage.setItem("android_installed_code",String(ye)),localStorage.setItem("android_last_ack_code",String(ye))}catch{}}await ie(H(te,"profiles",r.uid),de,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),p&&v.jsxs("div",{className:"mt-3 text-center",children:[v.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:v.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((w==null?void 0:w.percent)||0)))}%`}})}),v.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((w==null?void 0:w.percent)||0),"%"]})]})]})}),!!r&&re&&v.jsx(dh,{open:re,onOpenChange:async K=>{K&&ve(!0)},children:v.jsxs(qc,{className:"sm:max-w-[420px] rounded-2xl shadow-xl z-[9999]",onInteractOutside:K=>{K.preventDefault()},onEscapeKeyDown:K=>{K.preventDefault()},hideClose:!0,children:[v.jsxs("div",{className:"absolute left-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground cursor-pointer z-50",onClick:async()=>{if(ve(!1),j!=null&&j.popupId)try{const{db:K}=await ne(async()=>{const{db:Z}=await Promise.resolve().then(()=>qt);return{db:Z}},void 0,import.meta.url),{doc:z,updateDoc:H,serverTimestamp:ie}=await ne(async()=>{const{doc:Z,updateDoc:te,serverTimestamp:de}=await Promise.resolve().then(()=>Mn);return{doc:Z,updateDoc:te,serverTimestamp:de}},void 0,import.meta.url);await H(z(K,"pendingSmsPopups",j.popupId),{status:"dismissed",dismissedAt:ie()})}catch{}},children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",children:[v.jsx("path",{d:"M18 6 6 18"}),v.jsx("path",{d:"m6 6 12 12"})]}),v.jsx("span",{className:"sr-only",children:"Close"})]}),v.jsxs(Hc,{children:[v.jsx(Kc,{children:j!=null&&j.providerLabel?v.jsxs(v.Fragment,{children:["   ",v.jsx("span",{className:"text-red-600",children:j.providerLabel})]}):"   "}),v.jsx(i0,{})]}),v.jsxs("div",{className:"text-sm",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[v.jsx(Vn,{variant:(j==null?void 0:j.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(j==null?void 0:j.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>cs((j==null?void 0:j.sim1Number)||Pr,"SIM 1"),disabled:!(j!=null&&j.sim1Number||Pr),children:(j==null?void 0:j.sim1Number)||Pr||" "}),v.jsx(Vn,{variant:(j==null?void 0:j.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(j==null?void 0:j.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>cs((j==null?void 0:j.sim2Number)||_s,"SIM 2"),disabled:!(j!=null&&j.sim2Number||_s),children:(j==null?void 0:j.sim2Number)||_s||" "})]}),v.jsx("div",{className:"border rounded-lg p-3",children:v.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"font-bold",children:[" ",(tr=j==null?void 0:j.amount)==null?void 0:tr.toLocaleString()]}),v.jsx("div",{className:"font-mono",children:(j==null?void 0:j.sender)||""}),v.jsxs("div",{className:"font-mono",children:[(j==null?void 0:j.simLabel)&&v.jsx("span",{className:`inline-flex items-center justify-center rounded-md px-1.5 py-0.5 text-xs font-bold mr-2 ${j.simLabel==="SIM 1"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:j.simLabel}),(j==null?void 0:j.simNumber)||"-"]}),(j==null?void 0:j.senderName)&&v.jsx("div",{children:j==null?void 0:j.senderName}),(j==null?void 0:j.reference)&&v.jsx("div",{className:"font-mono",children:j==null?void 0:j.reference}),(j==null?void 0:j.walletMsisdn)&&v.jsx("div",{className:"font-mono",children:j==null?void 0:j.walletMsisdn})]}),v.jsxs("div",{className:"space-y-2 text-right",children:[v.jsx("div",{children:"  "}),v.jsx("div",{children:" "}),v.jsx("div",{children:" "}),(j==null?void 0:j.senderName)&&v.jsx("div",{children:"  "}),(j==null?void 0:j.reference)&&v.jsx("div",{children:"  "}),(j==null?void 0:j.walletMsisdn)&&v.jsx("div",{children:"  "})]})]})}),zn&&v.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[v.jsx("span",{className:"flex-1",children:"  ()"}),v.jsx("input",{type:"number",step:"0.01",min:"0",value:Fe,onChange:K=>Pn(K.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),_r&&v.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"text-sm",children:" "}),v.jsxs("div",{className:"font-bold",children:[" ",mt.toLocaleString()]})]}),v.jsx("div",{className:"mt-3",children:v.jsx("input",{type:"text",value:kt,onChange:K=>ft(K.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),v.jsx("div",{className:"mt-3",children:v.jsx(Vn,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Cn(!0),Wn(!1)},children:""})})]}),In&&!_r&&v.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),v.jsx("div",{className:"pt-2",children:v.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var K;try{const H=String((j==null?void 0:j.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),ie=H?parseFloat(String(H[1]).replace(",",".")):Number((j==null?void 0:j.amount)||0),{auth:Z}=await ne(async()=>{const{auth:ue}=await Promise.resolve().then(()=>qt);return{auth:ue}},void 0,import.meta.url),te=((K=Z.currentUser)==null?void 0:K.uid)||"",de=te?`selectedWallet_${te}`:"selectedWallet_default",ye=localStorage.getItem(de)||"",Q=Fe&&Fe.trim()!==""?Math.max(0,parseFloat(Fe)):null;let oe=0;if(Q!=null)oe=Q;else try{const{merchantWalletService:ue}=await ne(async()=>{const{merchantWalletService:Me}=await Promise.resolve().then(()=>rc);return{merchantWalletService:Me}},void 0,import.meta.url),_e=await ue.getById(String(ye)),me=_e&&_e.defaultWithdrawCommission;if(me!=null)oe=Math.round((Number(me)||0)*Number(ie)/1e3*100)/100;else{const{calculateCommission:Me}=await ne(async()=>{const{calculateCommission:ze}=await Promise.resolve().then(()=>tl);return{calculateCommission:ze}},void 0,import.meta.url);oe=Me(Number(ie),"receive")}}catch{const{calculateCommission:ue}=await ne(async()=>{const{calculateCommission:_e}=await Promise.resolve().then(()=>tl);return{calculateCommission:_e}},void 0,import.meta.url);oe=ue(Number(ie),"receive")}const ae=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(ie)+Number(oe):Number(ie);Zt(Math.round(ae*100)/100),Wn(!0)}catch{Wn(!0)}},children:""})})]}),v.jsx("div",{className:"pt-3",children:v.jsx(Vn,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const K=String((j==null?void 0:j.text)||""),z=K.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),H=z?parseFloat(String(z[1]).replace(",",".")):Number((j==null?void 0:j.amount)||0),ie=K.match(/\s+\s+(\d+)/i),Z=String((j==null?void 0:j.sender)||(ie?ie[1]:"")||""),te=K.match(/\s*\s*([\d\.]+)/i),de=String((j==null?void 0:j.reference)||(te?te[1]:String(Date.now())));Cr({...j,amount:H,sender:Z,reference:de,deferredMode:In,debtorName:kt,debtorNote:at})}catch{Cr()}},children:" "})})]})})]})},XR=()=>{const t=wi(),{user:e}=Ws(),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login")||t.pathname==="/"||t.pathname.startsWith("/landing");return e&&!n?v.jsxs(v.Fragment,{children:[v.jsx(_$,{}),v.jsx(e3,{})]}):null},ZR=()=>{const{user:t,loading:e}=Ws();return e?v.jsx(o0,{}):t?v.jsx(lp,{}):v.jsx(yg,{})},jX=()=>(S.useEffect(()=>{const t=async()=>{try{await hX.hide()}catch(n){console.warn("Error hiding splash screen:",n)}},e=document.getElementById("app-loading-screen");e&&(e.style.opacity="0",e.style.transition="opacity 0.2s ease",setTimeout(()=>e.remove(),200)),t()},[]),v.jsx(T6,{client:Ya,children:v.jsx(C5,{children:v.jsxs($B,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android")&&v.jsx(dX,{}),v.jsx(VX,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&MX||Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android")?v.jsxs(A5,{children:[v.jsx(JR,{}),v.jsx(XR,{}),v.jsx(S.Suspense,{fallback:v.jsx(o0,{}),children:v.jsxs(Jb,{children:[v.jsx(Pe,{path:"/",element:Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"?v.jsx(ZR,{}):v.jsx(bm,{})}),v.jsx(Pe,{path:"/dashboard-redirect",element:v.jsx(CR,{})}),v.jsx(Pe,{path:"/landing",element:v.jsx(bm,{})}),v.jsx(Pe,{path:"/subscriptions",element:v.jsx(kR,{})}),v.jsx(Pe,{path:"/auth",element:v.jsx(DR,{})}),v.jsx(Pe,{path:"/user/login",element:v.jsx(yg,{})}),v.jsx(Pe,{path:"/user/forgot-password",element:v.jsx(MR,{})}),v.jsx(Pe,{path:"/user/register",element:v.jsx(xm,{})}),v.jsx(Pe,{path:"/register",element:v.jsx(xm,{})}),v.jsx(Pe,{path:"/user/account-setup",element:v.jsx(LR,{})}),v.jsx(Pe,{path:"/user/pending-approval",element:v.jsx(jR,{})}),v.jsx(Pe,{path:"/user/dashboard",element:v.jsx(lp,{})}),v.jsx(Pe,{path:"/branch/:shopId/dashboard",element:v.jsx(lp,{})}),v.jsx(Pe,{path:"/user/add-wallet",element:v.jsx(HR,{})}),v.jsx(Pe,{path:"/admin/login",element:v.jsx($R,{})}),v.jsx(Pe,{path:"/admin/dashboard",element:v.jsx(BR,{})}),v.jsx(Pe,{path:"/admin/topups",element:v.jsx(NR,{})}),v.jsx(Pe,{path:"/admin/notifications",element:v.jsx(OR,{})}),v.jsx(Pe,{path:"/profile-settings",element:v.jsx(WR,{})}),v.jsx(Pe,{path:"/transactions",element:v.jsx(qR,{})}),v.jsx(Pe,{path:"/referrals",element:v.jsx(KR,{})}),v.jsx(Pe,{path:"/privacy-policy",element:v.jsx(QR,{})}),v.jsx(Pe,{path:"/cpanel",element:v.jsx(AR,{})}),v.jsx(Pe,{path:"/cpanel/login",element:v.jsx(xR,{})}),v.jsx(Pe,{path:"/auth-test",element:v.jsx(zR,{})}),v.jsx(Pe,{path:"/topup",element:v.jsx(Am,{})}),v.jsx(Pe,{path:"/recharge",element:v.jsx(Am,{})}),v.jsx(Pe,{path:"/merchant/*",element:v.jsx(UR,{})}),v.jsx(Pe,{path:"/dashboard/login",element:v.jsx(VR,{})}),v.jsx(Pe,{path:"/dashboard",element:v.jsx(FR,{})}),v.jsx(Pe,{path:"*",element:v.jsx(GR,{})})]})}),v.jsx(YR,{})]}):v.jsxs(b5,{children:[v.jsx(JR,{}),v.jsx(XR,{}),v.jsx(S.Suspense,{fallback:v.jsx(o0,{}),children:v.jsxs(Jb,{children:[v.jsx(Pe,{path:"/",element:Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"?v.jsx(ZR,{}):v.jsx(bm,{})}),v.jsx(Pe,{path:"/dashboard-redirect",element:v.jsx(CR,{})}),v.jsx(Pe,{path:"/landing",element:v.jsx(bm,{})}),v.jsx(Pe,{path:"/subscriptions",element:v.jsx(kR,{})}),v.jsx(Pe,{path:"/auth",element:v.jsx(DR,{})}),v.jsx(Pe,{path:"/user/login",element:v.jsx(yg,{})}),v.jsx(Pe,{path:"/user/forgot-password",element:v.jsx(MR,{})}),v.jsx(Pe,{path:"/user/register",element:v.jsx(xm,{})}),v.jsx(Pe,{path:"/register",element:v.jsx(xm,{})}),v.jsx(Pe,{path:"/user/account-setup",element:v.jsx(LR,{})}),v.jsx(Pe,{path:"/user/pending-approval",element:v.jsx(jR,{})}),v.jsx(Pe,{path:"/user/dashboard",element:v.jsx(lp,{})}),v.jsx(Pe,{path:"/user/add-wallet",element:v.jsx(HR,{})}),v.jsx(Pe,{path:"/admin/login",element:v.jsx($R,{})}),v.jsx(Pe,{path:"/admin/dashboard",element:v.jsx(BR,{})}),v.jsx(Pe,{path:"/admin/topups",element:v.jsx(NR,{})}),v.jsx(Pe,{path:"/admin/notifications",element:v.jsx(OR,{})}),v.jsx(Pe,{path:"/profile-settings",element:v.jsx(WR,{})}),v.jsx(Pe,{path:"/transactions",element:v.jsx(qR,{})}),v.jsx(Pe,{path:"/referrals",element:v.jsx(KR,{})}),v.jsx(Pe,{path:"/privacy-policy",element:v.jsx(QR,{})}),v.jsx(Pe,{path:"/cpanel",element:v.jsx(AR,{})}),v.jsx(Pe,{path:"/cpanel/login",element:v.jsx(xR,{})}),v.jsx(Pe,{path:"/auth-test",element:v.jsx(zR,{})}),v.jsx(Pe,{path:"/topup",element:v.jsx(Am,{})}),v.jsx(Pe,{path:"/recharge",element:v.jsx(Am,{})}),v.jsx(Pe,{path:"/merchant/*",element:v.jsx(UR,{})}),v.jsx(Pe,{path:"/dashboard/login",element:v.jsx(VR,{})}),v.jsx(Pe,{path:"/dashboard",element:v.jsx(FR,{})}),v.jsx(Pe,{path:"*",element:v.jsx(GR,{})})]})}),v.jsx(YR,{})]})]})})})),rV=S.createContext(void 0),$X=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!1),[i,o]=S.useState(null),{profile:a,user:l}=Ws();S.useEffect(()=>{try{const m=localStorage.getItem("cashier_shift_user"),E=localStorage.getItem("cashier_shift_active"),p=localStorage.getItem("cashier_shift_start_at");m&&n(JSON.parse(m)),E&&s(E==="true"),p&&o(Number(p))}catch{}},[]);const c=async()=>{if(a!=null&&a.shopId)try{const m=Ce(G,"cashierShift",a.shopId),E=await Qt(m);if(E.exists()){const p=E.data(),y=(p==null?void 0:p.shiftUser)||null,w=!!(p!=null&&p.isShiftActive),_=(p==null?void 0:p.shiftStartAt)??null;let I=y;if(!I)try{const x=localStorage.getItem("cashier_shift_user"),P=x?JSON.parse(x):null;P&&(I=P)}catch{}n(I),s(w),o(typeof _=="number"?_:_?Number(_):null);try{I?localStorage.setItem("cashier_shift_user",JSON.stringify(I)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",w?"true":"false"),_!=null&&localStorage.setItem("cashier_shift_start_at",String(_))}catch{}}else await on(m,{isShiftActive:!1,shiftStartAt:null,shiftUser:null})}catch(m){console.warn("Failed to refresh shift status:",m)}};S.useEffect(()=>{c()},[a==null?void 0:a.shopId]);const d=m=>{n(m);try{m?localStorage.setItem("cashier_shift_user",JSON.stringify(m)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const E=Ce(G,"cashierShift",a.shopId);wn(E,{shiftUser:m||null})}}catch{}},h=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const m=Date.now();o(m);try{localStorage.setItem("cashier_shift_start_at",String(m))}catch{}try{if(a!=null&&a.shopId){const E=Ce(G,"cashierShift",a.shopId);wn(E,{isShiftActive:!0,shiftStartAt:m})}}catch{}try{const p=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,w=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let _=localStorage.getItem(p);if(_==null){const x=localStorage.getItem(y);if(x!=null){_=x;try{localStorage.setItem(p,x),localStorage.removeItem(y)}catch{}}}if(_==null&&(l!=null&&l.uid)){const x=localStorage.getItem("cashBalance"),P=localStorage.getItem("userCashBalance");if(x!=null){try{localStorage.setItem(p,x),localStorage.removeItem("cashBalance")}catch{}_=x}else if(P!=null){try{localStorage.setItem(p,P),localStorage.removeItem("userCashBalance")}catch{}_=P}}const I=localStorage.getItem(w);_?localStorage.setItem("shiftStartDrawerFunds",_):localStorage.setItem("shiftStartDrawerFunds","0"),I?localStorage.setItem("shiftStartWalletBalances",I):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const E=Ce(G,"dashboardData",a.shopId),p=await Qt(E);if(p.exists()){const y=p.data(),w=Number((y==null?void 0:y.cashBalance)??0),_=(y==null?void 0:y.walletBalances)??{};try{const I=localStorage.getItem("shiftStartDrawerFunds"),x=localStorage.getItem("shiftStartWalletBalances"),P=I?parseFloat(I):0,L=x?JSON.parse(x):{},A=!I||!Number.isFinite(P)||P===0,T=!x||Object.keys(L||{}).length===0;A&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(w)?w:0)),T&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(E){console.warn("Shift start Firebase read failed:",E)}})()}catch{}},f=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const m=Ce(G,"cashierShift",a.shopId);wn(m,{isShiftActive:!1})}}catch{}};return v.jsx(rV.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:d,startShift:h,endShift:f,refreshShiftStatus:c},children:t})},SZ=()=>{const t=S.useContext(rV);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class BX extends S.Component{constructor(){super(...arguments);fd(this,"state",{hasError:!1,error:null});fd(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return v.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:v.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[v.jsx("div",{className:"flex justify-center",children:v.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:v.jsx(pk,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),v.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,v.jsxs(Vn,{onClick:this.handleReload,className:"w-full gap-2",children:[v.jsx(hE,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{tV()}catch{}const zX=()=>{const{theme:t="system"}=Ak();return S.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};LC(document.getElementById("root")).render(v.jsx(BX,{children:v.jsx(I$,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:v.jsx(OY,{children:v.jsx($X,{children:v.jsxs(OX,{children:[v.jsx(jX,{}),v.jsx(zX,{})]})})})})}));export{oj as $,fk as A,Vn as B,fT as C,hk as D,dk as E,uk as F,iW as G,Zw as H,ri as I,Ce as J,fR as K,fw as L,ew as M,tZ as N,mk as O,EA as P,Et as Q,F as R,Cj as S,oW as T,Oj as U,on as V,Ct as W,Qt as X,wn as Y,Yt as Z,n0 as _,Ul as a,bM as a$,dE as a0,wi as a1,Rs as a2,Xr as a3,ju as a4,o4 as a5,vv as a6,Jt as a7,Lt as a8,lr as a9,fE as aA,pG as aB,dh as aC,qc as aD,Hc as aE,Kc as aF,i0 as aG,wT as aH,Hu as aI,oZ as aJ,JU as aK,LX as aL,yY as aM,nj as aN,hj as aO,Mj as aP,sj as aQ,LY as aR,Uk as aS,$k as aT,HX as aU,EB as aV,Vl as aW,oE as aX,VJ as aY,FC as aZ,JY as a_,aE as aa,pi as ab,rM as ac,sX as ad,yb as ae,ne as af,rp as ag,SZ as ah,DX as ai,Ie as aj,fb as ak,ej as al,GK as am,ET as an,o0 as ao,gb as ap,XJ as aq,Jb as ar,Pe as as,Bo as at,mb as au,lj as av,Ka as aw,TY as ax,Eg as ay,Oe as az,mT as b,Kg as b$,Ph as b0,gM as b1,Fg as b2,IB as b3,TB as b4,MC as b5,wZ as b6,pk as b7,VD as b8,gg as b9,lX as bA,mZ as bB,aX as bC,uT as bD,vX as bE,pb as bF,_t as bG,gY as bH,vZ as bI,KJ as bJ,QJ as bK,_Z as bL,WM as bM,n4 as bN,qM as bO,HM as bP,YJ as bQ,zM as bR,GJ as bS,k5 as bT,eZ as bU,ZX as bV,nM as bW,Ga as bX,tT as bY,mX as bZ,IZ as b_,lZ as ba,EK as bb,wA as bc,iZ as bd,Xn as be,rZ as bf,Ak as bg,ZM as bh,Ej as bi,pZ as bj,gZ as bk,yZ as bl,wY as bm,EZ as bn,fX as bo,zi as bp,S4 as bq,af as br,aZ as bs,YM as bt,JM as bu,_j as bv,ml as bw,_Y as bx,cX as by,fZ as bz,pT as c,n6 as c0,QB as c1,QX as c2,aw as c3,Sr as c4,Gg as c5,KB as c6,GB as c7,Fp as c8,oD as c9,g6 as ca,XB as cb,br as cc,YX as cd,JL as ce,iY as cf,hZ as cg,sY as ch,vY as ci,J4 as cj,Mn as ck,qt as cl,rc as cm,Hv as cn,uX as co,TZ as cp,l0 as cq,fM as d,gT as e,$Y as f,nZ as g,rX as h,iE as i,v as j,GM as k,eX as l,Ot as m,ke as n,G as o,na as p,Ve as q,S as r,sd as s,Be as t,Ws as u,Li as v,GG as w,XL as x,mi as y,Le as z};
//# sourceMappingURL=index-DCCNgGPW.js.map
