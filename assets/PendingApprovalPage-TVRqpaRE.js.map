{"version":3,"file":"PendingApprovalPage-TVRqpaRE.js","sources":["../../src/pages/user/PendingApprovalPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { AlertTriangle, Clock, AlertCircle, Shield, Gift, CheckCircle, RefreshCw, Lock } from 'lucide-react';\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\nimport { signOut as firebaseSignOut } from 'firebase/auth';\nimport { auth, db } from '@/firebase';\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport { toast } from 'sonner';\nimport { FreeTrialService } from '@/utils/freeTrialService';\nimport { isSubscriptionValid, activateUserSubscription, SubscriptionPlan } from '@/utils/subscriptionService'\nimport { createSubscriptionWhatsAppLink } from '@/utils/whatsappService';\n\nexport default function PendingApprovalPage() {\n  const { user, signOut, userSubscription, isSubscriptionActive, checkSubscriptionStatus } = useFirebaseAuth();\n  const navigate = useNavigate();\n  const [isActivatingTrial, setIsActivatingTrial] = useState(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [hasUsedTrial, setHasUsedTrial] = useState(false);\n  const [isOnFreeTrial, setIsOnFreeTrial] = useState(false);\n  const [trialDurationHours, setTrialDurationHours] = useState<number>(24);\n  \n  // ÿ™ŸÉŸàŸäŸÜ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿ®ŸÜŸÅÿ≥ ÿ™ÿµŸÖŸäŸÖ ÿßŸÑŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ©\n  const PLANS = [\n    {\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',\n      price: 200,\n      features: ['ÿØÿπŸÖ ŸÖÿ¨ÿßŸÜŸä ŸÉÿßŸÖŸÑ', 'ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸÖÿ≥ÿ™ŸÖÿ±ÿ©', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', '20 ŸÖÿ≠ŸÅÿ∏ÿ©'],\n      bg: 'from-blue-50 to-indigo-50',\n    },\n    {\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ±ÿ®ÿπ ÿ≥ŸÜŸàŸäÿ©',\n      price: 450,\n      features: ['ÿØÿπŸÖ ŸÖŸÖŸäÿ≤', 'ÿ≠ÿ™Ÿâ 30 ŸÖÿ≠ŸÅÿ∏ÿ©', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\n      bg: 'from-emerald-50 to-green-50',\n    },\n    {\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÜÿµŸÅ ÿ≥ŸÜŸàŸäÿ©',\n      price: 750,\n      features: ['ÿØÿπŸÖ ŸÖŸÖÿ™ÿßÿ≤', 'ÿπÿØÿØ ŸÖÿ≠ÿßŸÅÿ∏ ŸÖŸÅÿ™Ÿàÿ≠', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿßŸàÿ™ŸàŸÖÿ™ŸäŸÉ'],\n      bg: 'from-orange-50 to-amber-50',\n    },\n    {\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ≥ŸÜŸàŸäÿ©',\n      price: 1450,\n      features: ['ÿØÿπŸÖ ŸÖŸÖÿ™ÿßÿ≤', 'ÿπÿØÿØ ŸÖÿ≠ÿßŸÅÿ∏ ŸÖŸÅÿ™Ÿàÿ≠', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\n      bg: 'from-purple-50 to-pink-50',\n    },\n    {\n      title: 'ÿ®ÿßŸÇÿ© ŸÖÿØŸâ ÿßŸÑÿ≠Ÿäÿßÿ©',\n      price: 4000,\n      features: ['ÿØÿπŸÖ ŸÖŸÖÿ™ÿßÿ≤', 'ÿπÿØÿØ ŸÖÿ≠ÿßŸÅÿ∏ ŸÖŸÅÿ™Ÿàÿ≠', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\n      bg: 'from-orange-50 to-amber-50',\n    },\n  ];\n\n  // ÿßÿ≥ÿ™ŸÖÿßÿπ ŸÅŸàÿ±Ÿä ŸÑÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä Firestore\n  useEffect(() => {\n    if (!user?.uid) return;\n\n    // ÿßÿ≥ÿ™ŸÖÿßÿπ ŸÖÿ®ÿßÿ¥ÿ± ŸÑŸÑÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿπŸÑŸâ Ÿàÿ´ŸäŸÇÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\n    const unsubscribe = onSnapshot(doc(db, 'users', user.uid), (snapshot) => {\n      if (snapshot.exists()) {\n        const data = snapshot.data();\n        const accountActive = data.isActive !== false;\n        \n        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\n        const sub = data.subscription;\n        const subActive = sub?.isActive === true && isSubscriptionValid(sub);\n        \n        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ®ÿßŸÇÿ© ÿßŸÑŸÅÿ±Ÿàÿπ\n        const branchActive = data.branchPackage?.status === 'active';\n        \n        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÉŸàŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÅÿ±ÿπÿßŸã (Branch User)\n        const isBranchUser = data.isBranch === true && data.isActive === true;\n\n        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©\n        const trialActive = data.isOnFreeTrial === true;\n        \n         // ÿ•ÿ∞ÿß ÿ£ÿµÿ®ÿ≠ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÜÿ¥ÿ∑ÿßŸã ÿ®ÿ£Ÿä ÿ∑ÿ±ŸäŸÇÿ©ÿå ŸÜŸàÿ¨ŸáŸá ŸÅŸàÿ±ÿßŸã\n         if (accountActive && (subActive || branchActive || trialActive || isBranchUser)) {\n           console.log('‚úÖ PendingApprovalPage (Realtime): User activated, redirecting...');\n           sessionStorage.removeItem('dashboard_kick_signature');\n           try { localStorage.removeItem(`sub_cache_${user?.uid}`); } catch {}\n           try { window.dispatchEvent(new Event('app:softRefresh')); } catch {}\n           navigate('/user/dashboard', { replace: true });\n         }\n       }\n    });\n\n    return () => unsubscribe();\n  }, [user?.uid, navigate]);\n\n  // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Context (ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä)\n  useEffect(() => {\n    if (!user?.uid) return;\n    // ŸÜŸÜÿ™ÿ∏ÿ± ÿ≠ÿ™Ÿâ ÿ™ÿ™ŸàŸÅÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\n    if (!userSubscription) return;\n\n    console.log('üîç PendingApprovalPage: Checking subscription via Context:', user.uid);\n\n    const userData = userSubscription as any;\n\n    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿπÿßŸÖÿ© ÿ£ŸàŸÑÿßŸã\n    if (userData.isActive === false) {\n      console.log('‚õî PendingApprovalPage: User account is deactivated (isActive=false), staying on page.');\n      sessionStorage.removeItem('dashboard_kick_signature');\n      return;\n    }\n\n    // ÿØÿßŸÑÿ© ŸÖÿ≥ÿßÿπÿØÿ© ŸÑÿ™ŸàŸÑŸäÿØ ÿ™ŸàŸÇŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿ©\n    const generateStateSignature = (u: any) => {\n      if (!u) return 'null';\n      const sub = u.subscription;\n      const activatedAt = sub?.activatedAt ? (sub.activatedAt.toDate ? sub.activatedAt.toDate().toISOString() : new Date(sub.activatedAt).toISOString()) : 'null';\n      const plan = sub?.planType || 'null';\n      const isActive = u.isActive !== false;\n      const subActive = sub?.isActive === true;\n      const branchActive = u.branchPackage?.status === 'active';\n      const branchActivatedAt = u.branchPackage?.activatedAt ? (u.branchPackage.activatedAt.toDate ? u.branchPackage.activatedAt.toDate().toISOString() : new Date(u.branchPackage.activatedAt).toISOString()) : 'null';\n      return `${isActive}|${subActive}|${plan}|${activatedAt}|${branchActive}|${branchActivatedAt}`;\n    };\n\n    const currentSignature = generateStateSignature(userData);\n    const kickedSignature = sessionStorage.getItem('dashboard_kick_signature');\n\n    const accountActive = userData.isActive !== false;\n    const branchActive = userData.branchPackage?.status === 'active';\n    const sub = userData.subscription;\n    const valid = sub && sub.isActive === true && isSubscriptionValid(sub);\n    const trialActive = userData.isOnFreeTrial === true;\n\n    // ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑÿ≠ÿßŸÑÿ© ŸÜÿ¥ÿ∑ÿ©ÿå ŸÜŸÇŸàŸÖ ÿ®ÿßŸÑÿ™Ÿàÿ¨ŸäŸá\n    if (accountActive && (branchActive || valid || isSubscriptionActive || trialActive)) {\n      if (kickedSignature && currentSignature === kickedSignature) {\n        // Still in kicked state with same signature\n      } else {\n        sessionStorage.removeItem('dashboard_kick_signature');\n        navigate('/user/dashboard', { replace: true });\n      }\n    }\n  }, [user?.uid, userSubscription, isSubscriptionActive, navigate]);\n\n  // ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿ•ÿÆŸÅÿßÿ° ÿÆŸäÿßÿ± ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿ®ÿπÿØ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸáÿß\n  useEffect(() => {\n    const loadTrialState = async () => {\n      if (!user?.uid) return;\n      try {\n        const data = await FreeTrialService.getTrialData(user.uid);\n        setHasUsedTrial(data.hasUsedFreeTrial);\n        setIsOnFreeTrial(data.isOnFreeTrial);\n      } catch (e) {\n        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©:', e);\n      }\n    };\n    loadTrialState();\n  }, [user?.uid]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const hours = await FreeTrialService.getTrialDurationHours();\n        setTrialDurationHours(hours);\n      } catch (e) {\n        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿØÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©:', e);\n      }\n    })();\n  }, []);\n\n  const handleSignOut = async () => {\n    try {\n      await firebaseSignOut(auth);\n      // ŸÖÿ≥ÿ≠ ÿ®ÿπÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸäÿØŸàŸäÿßŸã ŸÑÿ∂ŸÖÿßŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ© ŸÜÿ∏ŸäŸÅÿ©\n      try {\n        localStorage.removeItem(`sub_cache_${user?.uid}`);\n        localStorage.removeItem(`profile_cache_v2_${user?.uid}`);\n      } catch {}\n      // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ window.location ŸÑŸÅÿ±ÿ∂ ÿßŸÑÿ™Ÿàÿ¨ŸäŸá Ÿàÿ™ÿ¨ÿßŸàÿ≤ ÿ£Ÿä ÿ≠ÿßŸÑÿßÿ™ ÿ™ÿØÿßÿÆŸÑ\n      window.location.href = '/user/login';\n    } catch (error) {\n      console.error('Logout error:', error);\n      // ÿ≠ÿ™Ÿâ ŸÑŸà ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ÿå ŸÜŸàÿ¨Ÿá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\n      window.location.href = '/user/login';\n    }\n  };\n\n  const handleActivateZeroPlan = async () => {\n    if (!user?.uid) return;\n\n    setIsActivatingTrial(true);\n    try {\n      await activateUserSubscription(user.uid, SubscriptionPlan.ZERO, user.uid);\n      toast.success('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà! ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...');\n      setTimeout(() => {\n        try { navigate('/user/dashboard', { replace: true }); } catch {}\n      }, 1200);\n    } catch (error) {\n      console.error('Error activating zero plan:', error);\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà');\n    } finally {\n      setIsActivatingTrial(false);\n    }\n  };\n\n  const handleActivateTrial = async () => {\n    if (!user?.uid) return;\n    \n    setIsActivatingTrial(true);\n    try {\n      const result = await FreeTrialService.startFreeTrial(user.uid);\n      if (result.success) {\n        toast.success(result.message || `ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ŸÑŸÖÿØÿ© ${trialDurationHours} ${trialDurationHours >= 3 && trialDurationHours <= 10 ? 'ÿ≥ÿßÿπÿßÿ™' : trialDurationHours === 2 ? 'ÿ≥ÿßÿπÿ™ŸäŸÜ' : 'ÿ≥ÿßÿπÿ©'}! ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...`);\n        // ÿ™Ÿàÿ¨ŸäŸá ŸÅŸàÿ±Ÿä ÿ®ÿØŸàŸÜ ÿ™ÿ£ÿÆŸäÿ±\n        try { localStorage.removeItem(`sub_cache_${user?.uid}`); } catch {}\n        try { window.dispatchEvent(new Event('app:softRefresh')); } catch {}\n        navigate('/user/dashboard', { replace: true });\n      } else {\n        toast.error(result.message);\n      }\n    } catch (error) {\n      console.error('Error activating trial:', error);\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©');\n    } finally {\n      setIsActivatingTrial(false);\n    }\n  };\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    console.log('üîÑ PendingApprovalPage: Manual refresh triggered');\n    \n    try {\n      // ŸÖÿ≥ÿ≠ ÿπŸÑÿßŸÖÿ© ÿßŸÑÿ∑ÿ±ÿØ ŸÑÿ•ÿ¨ÿ®ÿßÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ\n      sessionStorage.removeItem('dashboard_kick_signature');\n      \n      // ÿ•ÿπÿßÿØÿ© ŸÅÿ≠ÿµ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\n      await checkSubscriptionStatus();\n      \n      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ Ÿäÿ¨ÿ® ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ¢ŸÜ\n      if (user?.uid) {\n        // ŸÜÿ≥ÿ™ÿÆÿØŸÖ import ÿØŸäŸÜÿßŸÖŸäŸÉŸä ŸÑÿ™ÿ¨ŸÜÿ® ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑÿ™ÿ®ÿπŸäÿßÿ™ ÿßŸÑÿØÿßÿ¶ÿ±Ÿäÿ© ÿ•ŸÜ Ÿàÿ¨ÿØÿ™ÿå ŸàŸÑÿ∂ŸÖÿßŸÜ ŸÜÿ≥ÿÆÿ© ÿ¨ÿØŸäÿØÿ©\n        const { getDoc, doc } = await import('firebase/firestore');\n        const { db } = await import('@/firebase');\n        const userDoc = await getDoc(doc(db, 'users', user.uid));\n        \n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          const accountActive = userData.isActive !== false;\n          const subActive = userData.subscription?.isActive === true;\n          const branchActive = userData.branchPackage?.status === 'active';\n          \n          if (accountActive && (subActive || branchActive)) {\n             toast.success('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿå ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...');\n             setTimeout(() => {\n                navigate('/user/dashboard', { replace: true });\n             }, 500);\n             return;\n          }\n        }\n      }\n      \n      toast.success('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™');\n    } catch (error) {\n      console.error('‚ùå Error during manual refresh:', error);\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´');\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  const openWhatsApp = (plan: string, price: number, features: string[]) => {\n    try {\n      const text = encodeURIComponent(\n        `ÿ£ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ${plan} ÿ®ÿ≥ÿπÿ± ${price} ÿ¨\\nÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™:\\n- ${features.join('\\n- ')}`\n      );\n      window.open(`https://wa.me/201000392539?text=${text}`, '_blank');\n    } catch {}\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-5xl bg-white rounded-2xl shadow-lg border border-gray-200 dark:border-gray-800 p-4 sm:p-6\">\n        <div className=\"text-center\">\n          <div className=\"flex justify-center mb-2\">\n            <div className=\"relative\">\n              <div \n                className=\"absolute inset-0 rounded-full\"\n                style={{ background: 'linear-gradient(135deg, #f59e0b, #d97706)', filter: 'blur(8px)', opacity: 0.3 }}\n              />\n              <div className=\"relative bg-gradient-to-br from-orange-400 to-orange-600 p-2 rounded-full\">\n                <Shield className=\"h-10 w-10 text-white\" />\n              </div>\n            </div>\n          </div>\n          <h2 className=\"text-xl font-bold text-gray-800\">ŸÖÿ∑ŸÑŸàÿ® ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®</h2>\n          <p className=\"text-gray-700 text-sm mt-1\">ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© Ÿàÿßÿ∂ÿ∫ÿ∑ ÿ≤ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ® ŸÑŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑŸÅŸàÿ±Ÿä.</p>\n          \n          {/* ÿ™ŸÖ ÿ•ÿÆŸÅÿßÿ° ÿ≤ÿ± ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸäÿØŸàŸä ŸÑÿ£ŸÜ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ£ÿµÿ®ÿ≠ ŸÅŸàÿ±ŸäÿßŸã\n          <div className=\"mt-4 flex justify-center\">\n             <Button \n               variant=\"outline\" \n               size=\"sm\" \n               onClick={handleRefresh} \n               disabled={isRefreshing}\n               className=\"flex items-center gap-2 text-blue-600 border-blue-200 hover:bg-blue-50\"\n             >\n               <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\n               {isRefreshing ? 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...' : 'ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ'}\n             </Button>\n          </div>\n          */}\n        </div>\n\n        <div className=\"pt-4\">\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 items-stretch\">\n            {PLANS.map((p) => (\n              <div key={p.title} className={`h-full rounded-lg p-2 border shadow-sm bg-gradient-to-br ${p.bg} dark:from-gray-800 dark:to-gray-700 dark:border-gray-700`}>\n                <div className=\"font-bold text-sm text-gray-800 dark:text-gray-100 mb-1\">{p.title}</div>\n                <div className=\"text-lg font-extrabold text-gray-900 dark:text-gray-100 mb-2\">{p.price} ÿ¨</div>\n                <ul className=\"text-[10px] text-gray-700 dark:text-gray-200 text-right space-y-1 mb-2\">\n                  {p.features.map((f) => (\n                    <li key={f}>‚Ä¢ {f}</li>\n                  ))}\n                </ul>\n                <Button size=\"sm\" className=\"w-full bg-green-600 hover:bg-green-700 text-xs py-1 h-8\" onClick={() => openWhatsApp(p.title, p.price, p.features)}>\n                  ÿ™ŸàÿßÿµŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®\n                </Button>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"pt-3\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-2\">\n              {/* ÿ™ŸÖ ÿ•ÿÆŸÅÿßÿ° ÿ≤ÿ± ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ */}\n              {/*\n            <Button size=\"sm\" className=\"w-full bg-emerald-600 hover:bg-emerald-700\" onClick={handleActivateZeroPlan} disabled={isActivatingTrial}>\n              ÿ¨ÿ±ÿ® ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà\n            </Button>\n            */}\n              {!hasUsedTrial && !isOnFreeTrial && (\n                <Button size=\"sm\" className=\"w-full bg-blue-600 hover:bg-blue-700\" onClick={handleActivateTrial} disabled={isActivatingTrial}>\n                  {`ÿ¨ÿ±ÿ® ÿßŸÑÿ®ÿ±ŸÜÿßŸÖÿ¨ 24 ÿ≥ÿßÿπÿ©`}\n                </Button>\n              )}\n              <Button \n                size=\"sm\" \n                className=\"w-full bg-red-600 hover:bg-red-700\" \n                onClick={() => window.open('https://www.youtube.com/@cashylink', '_blank')}\n              >\n                ÿ¥ÿ±ÿ≠ ÿßŸÑÿ®ÿ±ŸÜÿßŸÖÿ¨\n              </Button>\n             </div>\n          <Button variant=\"outline\" className=\"border-2 border-gray-300 hover:border-gray-400 text-gray-700 hover:text-gray-800 px-5 py-2 rounded-lg font-semibold text-xs transition-all duration-300\" onClick={signOut}>\n            ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["PendingApprovalPage","user","signOut","userSubscription","isSubscriptionActive","checkSubscriptionStatus","useFirebaseAuth","navigate","useNavigate","isActivatingTrial","setIsActivatingTrial","useState","isRefreshing","setIsRefreshing","hasUsedTrial","setHasUsedTrial","isOnFreeTrial","setIsOnFreeTrial","trialDurationHours","setTrialDurationHours","PLANS","useEffect","unsubscribe","onSnapshot","doc","db","snapshot","data","accountActive","sub","subActive","isSubscriptionValid","branchActive","_a","isBranchUser","trialActive","userData","currentSignature","u","activatedAt","plan","isActive","branchActivatedAt","_b","kickedSignature","valid","FreeTrialService","e","hours","handleActivateTrial","result","toast","error","openWhatsApp","price","features","text","jsxs","jsx","Shield","p","f","Button"],"mappings":"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"}