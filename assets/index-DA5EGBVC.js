const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-VDU7oQaX.js","./card-BDAHS7kE.js","./BrandLogo-BcRDrytv.js","./smartphone-DBOP6ugT.js","./whatsappService-DQcCuiwn.js","./arrow-left-DthGIAIu.js","./star-Ck9eli2r.js","./crown-CqXB_1jY.js","./download-BSxes68N.js","./zap-Dk0QGJEU.js","./circle-check-big-HJ3q8vm4.js","./SubscriptionsPage-Cwkmi5DB.js","./contentService-De2_5DuP.js","./AuthPage-9Wq3-daA.js","./TopUpPage-Cx45LUXS.js","./select-D-ueobad.js","./AdminTopupsPage-DliQ6p4Q.js","./AdminNotificationsPage-DNu8ANjS.js","./label-DGcgSfhx.js","./textarea-Cq06RRRe.js","./link-Deo-1WKw.js","./UserRegisterPage-DqcaRABp.js","./alert-Cnro_acT.js","./wallet-FJyN6gHk.js","./user-plus-oND4d47H.js","./phone-BPnjQDX1.js","./store-B6E9c70J.js","./UserAccountSetupPage-DUIFtKqs.js","./DashboardLoginPage-B3PHylEz.js","./ProtectedDashboard-b540T6xZ.js","./MasterPinDialog-BLejEjf9.js","./circle-alert-CRivym9p.js","./profitService-CQSlHJ0c.js","./dollar-sign-B2riGpcX.js","./ProtectedUserDashboard-BRy5uAh3.js","./broadcastService--y5MBKLO.js","./MerchantDashboard-D68ainoi.js","./dropdown-menu-D24DgyTC.js","./index-CPuDqvZm.js","./badge-C7RoQRV3.js","./WalletsManagement-boHxi1vH.js","./progress-DQPJPvXg.js","./square-pen-BlBi0wqZ.js","./PendingApprovalPage-3RLHjHtC.js","./freeTrialService-C0LuPwO4.js","./refresh-cw-Cl57Ej0r.js","./ProtectedAdminDashboard-DOWw26v9.js","./ProfileIcon-B58wAJLW.js","./switch-CtqW1fNM.js","./separator-DidRjMgH.js","./save-gjfK8oxa.js","./users-BU3QzDGg.js","./circle-x-7MF1caut.js","./AuthTestPage-CWMrZNdM.js","./ProfileSettingsPage-BGzDJM0G.js","./walletSelectionPinService-BWin8Wb1.js","./TransactionsPage-C4c_NVIq.js","./MaintenanceDialog-OCrzmwZQ.js","./WalletAdditionPage-EIasHO-V.js","./ReferralsPage-DN-UuFHu.js","./CPanelPage-58ac396k.js","./CPanelLoginPage-B1bg6uq4.js","./UserDashboardPage-DaSIDDiO.js"])))=>i.map(i=>d[i]);
var J2=Object.defineProperty;var RI=t=>{throw TypeError(t)};var X2=(t,e,n)=>e in t?J2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _u=(t,e,n)=>X2(t,typeof e!="symbol"?e+"":e,n),Wg=(t,e,n)=>e.has(t)||RI("Cannot "+n);var K=(t,e,n)=>(Wg(t,e,"read from private field"),n?n.call(t):e.get(t)),at=(t,e,n)=>e.has(t)?RI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ze=(t,e,n,r)=>(Wg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gn=(t,e,n)=>(Wg(t,e,"access private method"),n);var zh=(t,e,n,r)=>({set _(s){ze(t,e,s,n)},get _(){return K(t,e,r)}});function Z2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function qx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hx={exports:{}},Pp={},Kx={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh=Symbol.for("react.element"),eL=Symbol.for("react.portal"),tL=Symbol.for("react.fragment"),nL=Symbol.for("react.strict_mode"),rL=Symbol.for("react.profiler"),sL=Symbol.for("react.provider"),iL=Symbol.for("react.context"),oL=Symbol.for("react.forward_ref"),aL=Symbol.for("react.suspense"),lL=Symbol.for("react.memo"),cL=Symbol.for("react.lazy"),PI=Symbol.iterator;function uL(t){return t===null||typeof t!="object"?null:(t=PI&&t[PI]||t["@@iterator"],typeof t=="function"?t:null)}var Gx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qx=Object.assign,Yx={};function Bc(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Gx}Bc.prototype.isReactComponent={};Bc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jx(){}Jx.prototype=Bc.prototype;function h_(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Gx}var f_=h_.prototype=new Jx;f_.constructor=h_;Qx(f_,Bc.prototype);f_.isPureReactComponent=!0;var CI=Array.isArray,Xx=Object.prototype.hasOwnProperty,m_={current:null},Zx={key:!0,ref:!0,__self:!0,__source:!0};function eR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Xx.call(e,r)&&!Zx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:dh,type:t,key:i,ref:o,props:s,_owner:m_.current}}function dL(t,e){return{$$typeof:dh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function p_(t){return typeof t=="object"&&t!==null&&t.$$typeof===dh}function hL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kI=/\/+/g;function qg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hL(""+t.key):e.toString(36)}function Nf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dh:case eL:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+qg(o,0):r,CI(s)?(n="",t!=null&&(n=t.replace(kI,"$&/")+"/"),Nf(s,e,n,"",function(c){return c})):s!=null&&(p_(s)&&(s=dL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(kI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",CI(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+qg(i,a);o+=Nf(i,e,n,l,s)}else if(l=uL(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+qg(i,a++),o+=Nf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wh(t,e,n){if(t==null)return t;var r=[],s=0;return Nf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gr={current:null},Df={transition:null},mL={ReactCurrentDispatcher:gr,ReactCurrentBatchConfig:Df,ReactCurrentOwner:m_};function tR(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Wh,forEach:function(t,e,n){Wh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wh(t,function(){e++}),e},toArray:function(t){return Wh(t,function(e){return e})||[]},only:function(t){if(!p_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=Bc;nt.Fragment=tL;nt.Profiler=rL;nt.PureComponent=h_;nt.StrictMode=nL;nt.Suspense=aL;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mL;nt.act=tR;nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=m_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xx.call(e,l)&&!Zx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dh,type:t.type,key:s,ref:i,props:r,_owner:o}};nt.createContext=function(t){return t={$$typeof:iL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sL,_context:t},t.Consumer=t};nt.createElement=eR;nt.createFactory=function(t){var e=eR.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:oL,render:t}};nt.isValidElement=p_;nt.lazy=function(t){return{$$typeof:cL,_payload:{_status:-1,_result:t},_init:fL}};nt.memo=function(t,e){return{$$typeof:lL,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Df.transition;Df.transition={};try{t()}finally{Df.transition=e}};nt.unstable_act=tR;nt.useCallback=function(t,e){return gr.current.useCallback(t,e)};nt.useContext=function(t){return gr.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return gr.current.useDeferredValue(t)};nt.useEffect=function(t,e){return gr.current.useEffect(t,e)};nt.useId=function(){return gr.current.useId()};nt.useImperativeHandle=function(t,e,n){return gr.current.useImperativeHandle(t,e,n)};nt.useInsertionEffect=function(t,e){return gr.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return gr.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return gr.current.useMemo(t,e)};nt.useReducer=function(t,e,n){return gr.current.useReducer(t,e,n)};nt.useRef=function(t){return gr.current.useRef(t)};nt.useState=function(t){return gr.current.useState(t)};nt.useSyncExternalStore=function(t,e,n){return gr.current.useSyncExternalStore(t,e,n)};nt.useTransition=function(){return gr.current.useTransition()};nt.version="18.3.1";Kx.exports=nt;var b=Kx.exports;const U=qx(b),g_=Z2({__proto__:null,default:U},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pL=b,gL=Symbol.for("react.element"),yL=Symbol.for("react.fragment"),vL=Object.prototype.hasOwnProperty,wL=pL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_L={key:!0,ref:!0,__self:!0,__source:!0};function nR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vL.call(e,r)&&!_L.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gL,type:t,key:i,ref:o,props:s,_owner:wL.current}}Pp.Fragment=yL;Pp.jsx=nR;Pp.jsxs=nR;Hx.exports=Pp;var E=Hx.exports,rR={exports:{}},Xr={},sR={exports:{}},iR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,H){var Z=B.length;B.push(H);e:for(;0<Z;){var J=Z-1>>>1,we=B[J];if(0<s(we,H))B[J]=H,B[Z]=we,Z=J;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],Z=B.pop();if(Z!==H){B[0]=Z;e:for(var J=0,we=B.length,M=we>>>1;J<M;){var ye=2*(J+1)-1,Fe=B[ye],$e=ye+1,Be=B[$e];if(0>s(Fe,Z))$e<we&&0>s(Be,Fe)?(B[J]=Be,B[$e]=Z,J=$e):(B[J]=Fe,B[ye]=Z,J=ye);else if($e<we&&0>s(Be,Z))B[J]=Be,B[$e]=Z,J=$e;else break e}}return H}function s(B,H){var Z=B.sortIndex-H.sortIndex;return Z!==0?Z:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,I=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=B)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function x(B){if(p=!1,w(B),!I)if(n(l)!==null)I=!0,de(P);else{var H=n(c);H!==null&&_e(x,H.startTime-B)}}function P(B,H){I=!1,p&&(p=!1,_(T),T=-1),m=!0;var Z=f;try{for(w(H),h=n(l);h!==null&&(!(h.expirationTime>H)||B&&!D());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var we=J(h.expirationTime<=H);H=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&r(l),w(H)}else r(l);h=n(l)}if(h!==null)var M=!0;else{var ye=n(c);ye!==null&&_e(x,ye.startTime-H),M=!1}return M}finally{h=null,f=Z,m=!1}}var L=!1,A=null,T=-1,R=5,C=-1;function D(){return!(t.unstable_now()-C<R)}function O(){if(A!==null){var B=t.unstable_now();C=B;var H=!0;try{H=A(!0,B)}finally{H?k():(L=!1,A=null)}}else L=!1}var k;if(typeof y=="function")k=function(){y(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,re=z.port2;z.port1.onmessage=O,k=function(){re.postMessage(null)}}else k=function(){v(O,0)};function de(B){A=B,L||(L=!0,k())}function _e(B,H){T=v(function(){B(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){I||m||(I=!0,de(P))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var Z=f;f=H;try{return B()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=f;f=B;try{return H()}finally{f=Z}},t.unstable_scheduleCallback=function(B,H,Z){var J=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?J+Z:J):Z=J,B){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Z+we,B={id:d++,callback:H,priorityLevel:B,startTime:Z,expirationTime:we,sortIndex:-1},Z>J?(B.sortIndex=Z,e(c,B),n(l)===null&&B===n(c)&&(p?(_(T),T=-1):p=!0,_e(x,Z-J))):(B.sortIndex=we,e(l,B),I||m||(I=!0,de(P))),B},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(B){var H=f;return function(){var Z=f;f=H;try{return B.apply(this,arguments)}finally{f=Z}}}})(iR);sR.exports=iR;var EL=sR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IL=b,Yr=EL;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oR=new Set,_d={};function cl(t,e){hc(t,e),hc(t+"Capture",e)}function hc(t,e){for(_d[t]=e,t=0;t<e.length;t++)oR.add(e[t])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uv=Object.prototype.hasOwnProperty,SL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NI={},DI={};function TL(t){return uv.call(DI,t)?!0:uv.call(NI,t)?!1:SL.test(t)?DI[t]=!0:(NI[t]=!0,!1)}function bL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AL(t,e,n,r){if(e===null||typeof e>"u"||bL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new yr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new yr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new yr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new yr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new yr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new yr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new yr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new yr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new yr(t,5,!1,t.toLowerCase(),null,!1,!1)});var y_=/[\-:]([a-z])/g;function v_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(y_,v_);Wn[e]=new yr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(y_,v_);Wn[e]=new yr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(y_,v_);Wn[e]=new yr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new yr(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new yr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new yr(t,1,!1,t.toLowerCase(),null,!0,!0)});function w_(t,e,n,r){var s=Wn.hasOwnProperty(e)?Wn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AL(e,n,s,r)&&(n=null),r||s===null?TL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Li=IL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qh=Symbol.for("react.element"),Ol=Symbol.for("react.portal"),Ll=Symbol.for("react.fragment"),__=Symbol.for("react.strict_mode"),dv=Symbol.for("react.profiler"),aR=Symbol.for("react.provider"),lR=Symbol.for("react.context"),E_=Symbol.for("react.forward_ref"),hv=Symbol.for("react.suspense"),fv=Symbol.for("react.suspense_list"),I_=Symbol.for("react.memo"),to=Symbol.for("react.lazy"),cR=Symbol.for("react.offscreen"),OI=Symbol.iterator;function Eu(t){return t===null||typeof t!="object"?null:(t=OI&&t[OI]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,Hg;function Fu(t){if(Hg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hg=e&&e[1]||""}return`
`+Hg+t}var Kg=!1;function Gg(t,e){if(!t||Kg)return"";Kg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Kg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fu(t):""}function xL(t){switch(t.tag){case 5:return Fu(t.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 2:case 15:return t=Gg(t.type,!1),t;case 11:return t=Gg(t.type.render,!1),t;case 1:return t=Gg(t.type,!0),t;default:return""}}function mv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ll:return"Fragment";case Ol:return"Portal";case dv:return"Profiler";case __:return"StrictMode";case hv:return"Suspense";case fv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lR:return(t.displayName||"Context")+".Consumer";case aR:return(t._context.displayName||"Context")+".Provider";case E_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I_:return e=t.displayName||null,e!==null?e:mv(t.type)||"Memo";case to:e=t._payload,t=t._init;try{return mv(t(e))}catch{}}return null}function RL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mv(e);case 8:return e===__?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PL(t){var e=uR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hh(t){t._valueTracker||(t._valueTracker=PL(t))}function dR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pv(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function LI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hR(t,e){e=e.checked,e!=null&&w_(t,"checked",e,!1)}function gv(t,e){hR(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yv(t,e.type,n):e.hasOwnProperty("defaultValue")&&yv(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function VI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yv(t,e,n){(e!=="number"||fm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uu=Array.isArray;function Hl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Uu(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function fR(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function FI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kh,pR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kh=Kh||document.createElement("div"),Kh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CL=["Webkit","ms","Moz","O"];Object.keys(Yu).forEach(function(t){CL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yu[e]=Yu[t]})});function gR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yu.hasOwnProperty(t)&&Yu[t]?(""+e).trim():e+"px"}function yR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kL=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _v(t,e){if(e){if(kL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Ev(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iv=null;function S_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sv=null,Kl=null,Gl=null;function UI(t){if(t=mh(t)){if(typeof Sv!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Op(e),Sv(t.stateNode,t.type,e))}}function vR(t){Kl?Gl?Gl.push(t):Gl=[t]:Kl=t}function wR(){if(Kl){var t=Kl,e=Gl;if(Gl=Kl=null,UI(t),e)for(t=0;t<e.length;t++)UI(e[t])}}function _R(t,e){return t(e)}function ER(){}var Qg=!1;function IR(t,e,n){if(Qg)return t(e,n);Qg=!0;try{return _R(t,e,n)}finally{Qg=!1,(Kl!==null||Gl!==null)&&(ER(),wR())}}function Id(t,e){var n=t.stateNode;if(n===null)return null;var r=Op(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Tv=!1;if(Ti)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){Tv=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{Tv=!1}function NL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ju=!1,mm=null,pm=!1,bv=null,DL={onError:function(t){Ju=!0,mm=t}};function OL(t,e,n,r,s,i,o,a,l){Ju=!1,mm=null,NL.apply(DL,arguments)}function LL(t,e,n,r,s,i,o,a,l){if(OL.apply(this,arguments),Ju){if(Ju){var c=mm;Ju=!1,mm=null}else throw Error(ae(198));pm||(pm=!0,bv=c)}}function ul(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function SR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jI(t){if(ul(t)!==t)throw Error(ae(188))}function VL(t){var e=t.alternate;if(!e){if(e=ul(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return jI(s),t;if(i===r)return jI(s),e;i=i.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function TR(t){return t=VL(t),t!==null?bR(t):null}function bR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bR(t);if(e!==null)return e;t=t.sibling}return null}var AR=Yr.unstable_scheduleCallback,$I=Yr.unstable_cancelCallback,ML=Yr.unstable_shouldYield,FL=Yr.unstable_requestPaint,fn=Yr.unstable_now,UL=Yr.unstable_getCurrentPriorityLevel,T_=Yr.unstable_ImmediatePriority,xR=Yr.unstable_UserBlockingPriority,gm=Yr.unstable_NormalPriority,jL=Yr.unstable_LowPriority,RR=Yr.unstable_IdlePriority,Cp=null,Gs=null;function $L(t){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Cp,t,void 0,(t.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:WL,BL=Math.log,zL=Math.LN2;function WL(t){return t>>>=0,t===0?32:31-(BL(t)/zL|0)|0}var Gh=64,Qh=4194304;function ju(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ym(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ju(a):(i&=o,i!==0&&(r=ju(i)))}else o=n&~s,o!==0?r=ju(o):i!==0&&(r=ju(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Es(e),s=1<<n,r|=t[n],e&=~s;return r}function qL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Es(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=qL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Av(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function PR(){var t=Gh;return Gh<<=1,!(Gh&4194240)&&(Gh=64),t}function Yg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Es(e),t[e]=n}function KL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Es(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function b_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Es(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Et=0;function CR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kR,A_,NR,DR,OR,xv=!1,Yh=[],wo=null,_o=null,Eo=null,Sd=new Map,Td=new Map,ro=[],GL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BI(t,e){switch(t){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Sd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function Su(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=mh(e),e!==null&&A_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QL(t,e,n,r,s){switch(e){case"focusin":return wo=Su(wo,t,e,n,r,s),!0;case"dragenter":return _o=Su(_o,t,e,n,r,s),!0;case"mouseover":return Eo=Su(Eo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sd.set(i,Su(Sd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Td.set(i,Su(Td.get(i)||null,t,e,n,r,s)),!0}return!1}function LR(t){var e=Ia(t.target);if(e!==null){var n=ul(e);if(n!==null){if(e=n.tag,e===13){if(e=SR(n),e!==null){t.blockedOn=e,OR(t.priority,function(){NR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Of(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Iv=r,n.target.dispatchEvent(r),Iv=null}else return e=mh(n),e!==null&&A_(e),t.blockedOn=n,!1;e.shift()}return!0}function zI(t,e,n){Of(t)&&n.delete(e)}function YL(){xv=!1,wo!==null&&Of(wo)&&(wo=null),_o!==null&&Of(_o)&&(_o=null),Eo!==null&&Of(Eo)&&(Eo=null),Sd.forEach(zI),Td.forEach(zI)}function Tu(t,e){t.blockedOn===e&&(t.blockedOn=null,xv||(xv=!0,Yr.unstable_scheduleCallback(Yr.unstable_NormalPriority,YL)))}function bd(t){function e(s){return Tu(s,t)}if(0<Yh.length){Tu(Yh[0],t);for(var n=1;n<Yh.length;n++){var r=Yh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wo!==null&&Tu(wo,t),_o!==null&&Tu(_o,t),Eo!==null&&Tu(Eo,t),Sd.forEach(e),Td.forEach(e),n=0;n<ro.length;n++)r=ro[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ro.length&&(n=ro[0],n.blockedOn===null);)LR(n),n.blockedOn===null&&ro.shift()}var Ql=Li.ReactCurrentBatchConfig,vm=!0;function JL(t,e,n,r){var s=Et,i=Ql.transition;Ql.transition=null;try{Et=1,x_(t,e,n,r)}finally{Et=s,Ql.transition=i}}function XL(t,e,n,r){var s=Et,i=Ql.transition;Ql.transition=null;try{Et=4,x_(t,e,n,r)}finally{Et=s,Ql.transition=i}}function x_(t,e,n,r){if(vm){var s=Rv(t,e,n,r);if(s===null)oy(t,e,r,wm,n),BI(t,r);else if(QL(s,t,e,n,r))r.stopPropagation();else if(BI(t,r),e&4&&-1<GL.indexOf(t)){for(;s!==null;){var i=mh(s);if(i!==null&&kR(i),i=Rv(t,e,n,r),i===null&&oy(t,e,r,wm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else oy(t,e,r,null,n)}}var wm=null;function Rv(t,e,n,r){if(wm=null,t=S_(r),t=Ia(t),t!==null)if(e=ul(t),e===null)t=null;else if(n=e.tag,n===13){if(t=SR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wm=t,null}function VR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UL()){case T_:return 1;case xR:return 4;case gm:case jL:return 16;case RR:return 536870912;default:return 16}default:return 16}}var fo=null,R_=null,Lf=null;function MR(){if(Lf)return Lf;var t,e=R_,n=e.length,r,s="value"in fo?fo.value:fo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Lf=s.slice(t,1<r?1-r:void 0)}function Vf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jh(){return!0}function WI(){return!1}function Zr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jh:WI,this.isPropagationStopped=WI,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jh)},persist:function(){},isPersistent:Jh}),e}var zc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P_=Zr(zc),fh=Xt({},zc,{view:0,detail:0}),ZL=Zr(fh),Jg,Xg,bu,kp=Xt({},fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bu&&(bu&&t.type==="mousemove"?(Jg=t.screenX-bu.screenX,Xg=t.screenY-bu.screenY):Xg=Jg=0,bu=t),Jg)},movementY:function(t){return"movementY"in t?t.movementY:Xg}}),qI=Zr(kp),eV=Xt({},kp,{dataTransfer:0}),tV=Zr(eV),nV=Xt({},fh,{relatedTarget:0}),Zg=Zr(nV),rV=Xt({},zc,{animationName:0,elapsedTime:0,pseudoElement:0}),sV=Zr(rV),iV=Xt({},zc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oV=Zr(iV),aV=Xt({},zc,{data:0}),HI=Zr(aV),lV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uV[t])?!!e[t]:!1}function C_(){return dV}var hV=Xt({},fh,{key:function(t){if(t.key){var e=lV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C_,charCode:function(t){return t.type==="keypress"?Vf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fV=Zr(hV),mV=Xt({},kp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KI=Zr(mV),pV=Xt({},fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C_}),gV=Zr(pV),yV=Xt({},zc,{propertyName:0,elapsedTime:0,pseudoElement:0}),vV=Zr(yV),wV=Xt({},kp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_V=Zr(wV),EV=[9,13,27,32],k_=Ti&&"CompositionEvent"in window,Xu=null;Ti&&"documentMode"in document&&(Xu=document.documentMode);var IV=Ti&&"TextEvent"in window&&!Xu,FR=Ti&&(!k_||Xu&&8<Xu&&11>=Xu),GI=" ",QI=!1;function UR(t,e){switch(t){case"keyup":return EV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vl=!1;function SV(t,e){switch(t){case"compositionend":return jR(e);case"keypress":return e.which!==32?null:(QI=!0,GI);case"textInput":return t=e.data,t===GI&&QI?null:t;default:return null}}function TV(t,e){if(Vl)return t==="compositionend"||!k_&&UR(t,e)?(t=MR(),Lf=R_=fo=null,Vl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FR&&e.locale!=="ko"?null:e.data;default:return null}}var bV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bV[t.type]:e==="textarea"}function $R(t,e,n,r){vR(r),e=_m(e,"onChange"),0<e.length&&(n=new P_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zu=null,Ad=null;function AV(t){XR(t,0)}function Np(t){var e=Ul(t);if(dR(e))return t}function xV(t,e){if(t==="change")return e}var BR=!1;if(Ti){var ey;if(Ti){var ty="oninput"in document;if(!ty){var JI=document.createElement("div");JI.setAttribute("oninput","return;"),ty=typeof JI.oninput=="function"}ey=ty}else ey=!1;BR=ey&&(!document.documentMode||9<document.documentMode)}function XI(){Zu&&(Zu.detachEvent("onpropertychange",zR),Ad=Zu=null)}function zR(t){if(t.propertyName==="value"&&Np(Ad)){var e=[];$R(e,Ad,t,S_(t)),IR(AV,e)}}function RV(t,e,n){t==="focusin"?(XI(),Zu=e,Ad=n,Zu.attachEvent("onpropertychange",zR)):t==="focusout"&&XI()}function PV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Np(Ad)}function CV(t,e){if(t==="click")return Np(e)}function kV(t,e){if(t==="input"||t==="change")return Np(e)}function NV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:NV;function xd(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uv.call(e,s)||!bs(t[s],e[s]))return!1}return!0}function ZI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eS(t,e){var n=ZI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZI(n)}}function WR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qR(){for(var t=window,e=fm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fm(t.document)}return e}function N_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DV(t){var e=qR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WR(n.ownerDocument.documentElement,n)){if(r!==null&&N_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=eS(n,i);var o=eS(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OV=Ti&&"documentMode"in document&&11>=document.documentMode,Ml=null,Pv=null,ed=null,Cv=!1;function tS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cv||Ml==null||Ml!==fm(r)||(r=Ml,"selectionStart"in r&&N_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ed&&xd(ed,r)||(ed=r,r=_m(Pv,"onSelect"),0<r.length&&(e=new P_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ml)))}function Xh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fl={animationend:Xh("Animation","AnimationEnd"),animationiteration:Xh("Animation","AnimationIteration"),animationstart:Xh("Animation","AnimationStart"),transitionend:Xh("Transition","TransitionEnd")},ny={},HR={};Ti&&(HR=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function Dp(t){if(ny[t])return ny[t];if(!Fl[t])return t;var e=Fl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in HR)return ny[t]=e[n];return t}var KR=Dp("animationend"),GR=Dp("animationiteration"),QR=Dp("animationstart"),YR=Dp("transitionend"),JR=new Map,nS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(t,e){JR.set(t,e),cl(e,[t])}for(var ry=0;ry<nS.length;ry++){var sy=nS[ry],LV=sy.toLowerCase(),VV=sy[0].toUpperCase()+sy.slice(1);Ko(LV,"on"+VV)}Ko(KR,"onAnimationEnd");Ko(GR,"onAnimationIteration");Ko(QR,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(YR,"onTransitionEnd");hc("onMouseEnter",["mouseout","mouseover"]);hc("onMouseLeave",["mouseout","mouseover"]);hc("onPointerEnter",["pointerout","pointerover"]);hc("onPointerLeave",["pointerout","pointerover"]);cl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cl("onBeforeInput",["compositionend","keypress","textInput","paste"]);cl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MV=new Set("cancel close invalid load scroll toggle".split(" ").concat($u));function rS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LL(r,e,void 0,t),t.currentTarget=null}function XR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;rS(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;rS(s,a,c),i=l}}}if(pm)throw t=bv,pm=!1,bv=null,t}function Mt(t,e){var n=e[Lv];n===void 0&&(n=e[Lv]=new Set);var r=t+"__bubble";n.has(r)||(ZR(e,t,2,!1),n.add(r))}function iy(t,e,n){var r=0;e&&(r|=4),ZR(n,t,r,e)}var Zh="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[Zh]){t[Zh]=!0,oR.forEach(function(n){n!=="selectionchange"&&(MV.has(n)||iy(n,!1,t),iy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zh]||(e[Zh]=!0,iy("selectionchange",!1,e))}}function ZR(t,e,n,r){switch(VR(e)){case 1:var s=JL;break;case 4:s=XL;break;default:s=x_}n=s.bind(null,e,n,t),s=void 0,!Tv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function oy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ia(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}IR(function(){var c=i,d=S_(n),h=[];e:{var f=JR.get(t);if(f!==void 0){var m=P_,I=t;switch(t){case"keypress":if(Vf(n)===0)break e;case"keydown":case"keyup":m=fV;break;case"focusin":I="focus",m=Zg;break;case"focusout":I="blur",m=Zg;break;case"beforeblur":case"afterblur":m=Zg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=qI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=tV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=gV;break;case KR:case GR:case QR:m=sV;break;case YR:m=vV;break;case"scroll":m=ZL;break;case"wheel":m=_V;break;case"copy":case"cut":case"paste":m=oV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=KI}var p=(e&4)!==0,v=!p&&t==="scroll",_=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,_!==null&&(x=Id(y,_),x!=null&&p.push(Pd(y,x,w)))),v)break;y=y.return}0<p.length&&(f=new m(f,I,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Iv&&(I=n.relatedTarget||n.fromElement)&&(Ia(I)||I[bi]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(I=n.relatedTarget||n.toElement,m=c,I=I?Ia(I):null,I!==null&&(v=ul(I),I!==v||I.tag!==5&&I.tag!==6)&&(I=null)):(m=null,I=c),m!==I)){if(p=qI,x="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=KI,x="onPointerLeave",_="onPointerEnter",y="pointer"),v=m==null?f:Ul(m),w=I==null?f:Ul(I),f=new p(x,y+"leave",m,n,d),f.target=v,f.relatedTarget=w,x=null,Ia(d)===c&&(p=new p(_,y+"enter",I,n,d),p.target=w,p.relatedTarget=v,x=p),v=x,m&&I)t:{for(p=m,_=I,y=0,w=p;w;w=vl(w))y++;for(w=0,x=_;x;x=vl(x))w++;for(;0<y-w;)p=vl(p),y--;for(;0<w-y;)_=vl(_),w--;for(;y--;){if(p===_||_!==null&&p===_.alternate)break t;p=vl(p),_=vl(_)}p=null}else p=null;m!==null&&sS(h,f,m,p,!1),I!==null&&v!==null&&sS(h,v,I,p,!0)}}e:{if(f=c?Ul(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=xV;else if(YI(f))if(BR)P=kV;else{P=PV;var L=RV}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=CV);if(P&&(P=P(t,c))){$R(h,P,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&yv(f,"number",f.value)}switch(L=c?Ul(c):window,t){case"focusin":(YI(L)||L.contentEditable==="true")&&(Ml=L,Pv=c,ed=null);break;case"focusout":ed=Pv=Ml=null;break;case"mousedown":Cv=!0;break;case"contextmenu":case"mouseup":case"dragend":Cv=!1,tS(h,n,d);break;case"selectionchange":if(OV)break;case"keydown":case"keyup":tS(h,n,d)}var A;if(k_)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Vl?UR(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(FR&&n.locale!=="ko"&&(Vl||T!=="onCompositionStart"?T==="onCompositionEnd"&&Vl&&(A=MR()):(fo=d,R_="value"in fo?fo.value:fo.textContent,Vl=!0)),L=_m(c,T),0<L.length&&(T=new HI(T,t,null,n,d),h.push({event:T,listeners:L}),A?T.data=A:(A=jR(n),A!==null&&(T.data=A)))),(A=IV?SV(t,n):TV(t,n))&&(c=_m(c,"onBeforeInput"),0<c.length&&(d=new HI("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=A))}XR(h,e)})}function Pd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _m(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Id(t,n),i!=null&&r.unshift(Pd(t,i,s)),i=Id(t,e),i!=null&&r.push(Pd(t,i,s))),t=t.return}return r}function vl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sS(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Id(n,i),l!=null&&o.unshift(Pd(n,l,a))):s||(l=Id(n,i),l!=null&&o.push(Pd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FV=/\r\n?/g,UV=/\u0000|\uFFFD/g;function iS(t){return(typeof t=="string"?t:""+t).replace(FV,`
`).replace(UV,"")}function ef(t,e,n){if(e=iS(e),iS(t)!==e&&n)throw Error(ae(425))}function Em(){}var kv=null,Nv=null;function Dv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ov=typeof setTimeout=="function"?setTimeout:void 0,jV=typeof clearTimeout=="function"?clearTimeout:void 0,oS=typeof Promise=="function"?Promise:void 0,$V=typeof queueMicrotask=="function"?queueMicrotask:typeof oS<"u"?function(t){return oS.resolve(null).then(t).catch(BV)}:Ov;function BV(t){setTimeout(function(){throw t})}function ay(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),bd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bd(e)}function Io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),Bs="__reactFiber$"+Wc,Cd="__reactProps$"+Wc,bi="__reactContainer$"+Wc,Lv="__reactEvents$"+Wc,zV="__reactListeners$"+Wc,WV="__reactHandles$"+Wc;function Ia(t){var e=t[Bs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bi]||n[Bs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aS(t);t!==null;){if(n=t[Bs])return n;t=aS(t)}return e}t=n,n=t.parentNode}return null}function mh(t){return t=t[Bs]||t[bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ul(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Op(t){return t[Cd]||null}var Vv=[],jl=-1;function Go(t){return{current:t}}function Ft(t){0>jl||(t.current=Vv[jl],Vv[jl]=null,jl--)}function kt(t,e){jl++,Vv[jl]=t.current,t.current=e}var Vo={},sr=Go(Vo),Cr=Go(!1),Ka=Vo;function fc(t,e){var n=t.type.contextTypes;if(!n)return Vo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kr(t){return t=t.childContextTypes,t!=null}function Im(){Ft(Cr),Ft(sr)}function lS(t,e,n){if(sr.current!==Vo)throw Error(ae(168));kt(sr,e),kt(Cr,n)}function e1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,RL(t)||"Unknown",s));return Xt({},n,r)}function Sm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vo,Ka=sr.current,kt(sr,t),kt(Cr,Cr.current),!0}function cS(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=e1(t,e,Ka),r.__reactInternalMemoizedMergedChildContext=t,Ft(Cr),Ft(sr),kt(sr,t)):Ft(Cr),kt(Cr,n)}var hi=null,Lp=!1,ly=!1;function t1(t){hi===null?hi=[t]:hi.push(t)}function qV(t){Lp=!0,t1(t)}function Qo(){if(!ly&&hi!==null){ly=!0;var t=0,e=Et;try{var n=hi;for(Et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hi=null,Lp=!1}catch(s){throw hi!==null&&(hi=hi.slice(t+1)),AR(T_,Qo),s}finally{Et=e,ly=!1}}return null}var $l=[],Bl=0,Tm=null,bm=0,rs=[],ss=0,Ga=null,pi=1,gi="";function la(t,e){$l[Bl++]=bm,$l[Bl++]=Tm,Tm=t,bm=e}function n1(t,e,n){rs[ss++]=pi,rs[ss++]=gi,rs[ss++]=Ga,Ga=t;var r=pi;t=gi;var s=32-Es(r)-1;r&=~(1<<s),n+=1;var i=32-Es(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pi=1<<32-Es(e)+s|n<<s|r,gi=i+t}else pi=1<<i|n<<s|r,gi=t}function D_(t){t.return!==null&&(la(t,1),n1(t,1,0))}function O_(t){for(;t===Tm;)Tm=$l[--Bl],$l[Bl]=null,bm=$l[--Bl],$l[Bl]=null;for(;t===Ga;)Ga=rs[--ss],rs[ss]=null,gi=rs[--ss],rs[ss]=null,pi=rs[--ss],rs[ss]=null}var Hr=null,zr=null,Bt=!1,vs=null;function r1(t,e){var n=is(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hr=t,zr=Io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hr=t,zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ga!==null?{id:pi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=is(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hr=t,zr=null,!0):!1;default:return!1}}function Mv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fv(t){if(Bt){var e=zr;if(e){var n=e;if(!uS(t,e)){if(Mv(t))throw Error(ae(418));e=Io(n.nextSibling);var r=Hr;e&&uS(t,e)?r1(r,n):(t.flags=t.flags&-4097|2,Bt=!1,Hr=t)}}else{if(Mv(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Bt=!1,Hr=t}}}function dS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hr=t}function tf(t){if(t!==Hr)return!1;if(!Bt)return dS(t),Bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dv(t.type,t.memoizedProps)),e&&(e=zr)){if(Mv(t))throw s1(),Error(ae(418));for(;e;)r1(t,e),e=Io(e.nextSibling)}if(dS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zr=Io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zr=null}}else zr=Hr?Io(t.stateNode.nextSibling):null;return!0}function s1(){for(var t=zr;t;)t=Io(t.nextSibling)}function mc(){zr=Hr=null,Bt=!1}function L_(t){vs===null?vs=[t]:vs.push(t)}var HV=Li.ReactCurrentBatchConfig;function Au(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function nf(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hS(t){var e=t._init;return e(t._payload)}function i1(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Ao(_,y),_.index=0,_.sibling=null,_}function i(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,x){return y===null||y.tag!==6?(y=py(w,_.mode,x),y.return=_,y):(y=s(y,w),y.return=_,y)}function l(_,y,w,x){var P=w.type;return P===Ll?d(_,y,w.props.children,x,w.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===to&&hS(P)===y.type)?(x=s(y,w.props),x.ref=Au(_,y,w),x.return=_,x):(x=zf(w.type,w.key,w.props,null,_.mode,x),x.ref=Au(_,y,w),x.return=_,x)}function c(_,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=gy(w,_.mode,x),y.return=_,y):(y=s(y,w.children||[]),y.return=_,y)}function d(_,y,w,x,P){return y===null||y.tag!==7?(y=Ba(w,_.mode,x,P),y.return=_,y):(y=s(y,w),y.return=_,y)}function h(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=py(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case qh:return w=zf(y.type,y.key,y.props,null,_.mode,w),w.ref=Au(_,null,y),w.return=_,w;case Ol:return y=gy(y,_.mode,w),y.return=_,y;case to:var x=y._init;return h(_,x(y._payload),w)}if(Uu(y)||Eu(y))return y=Ba(y,_.mode,w,null),y.return=_,y;nf(_,y)}return null}function f(_,y,w,x){var P=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(_,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qh:return w.key===P?l(_,y,w,x):null;case Ol:return w.key===P?c(_,y,w,x):null;case to:return P=w._init,f(_,y,P(w._payload),x)}if(Uu(w)||Eu(w))return P!==null?null:d(_,y,w,x,null);nf(_,w)}return null}function m(_,y,w,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return _=_.get(w)||null,a(y,_,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qh:return _=_.get(x.key===null?w:x.key)||null,l(y,_,x,P);case Ol:return _=_.get(x.key===null?w:x.key)||null,c(y,_,x,P);case to:var L=x._init;return m(_,y,w,L(x._payload),P)}if(Uu(x)||Eu(x))return _=_.get(w)||null,d(y,_,x,P,null);nf(y,x)}return null}function I(_,y,w,x){for(var P=null,L=null,A=y,T=y=0,R=null;A!==null&&T<w.length;T++){A.index>T?(R=A,A=null):R=A.sibling;var C=f(_,A,w[T],x);if(C===null){A===null&&(A=R);break}t&&A&&C.alternate===null&&e(_,A),y=i(C,y,T),L===null?P=C:L.sibling=C,L=C,A=R}if(T===w.length)return n(_,A),Bt&&la(_,T),P;if(A===null){for(;T<w.length;T++)A=h(_,w[T],x),A!==null&&(y=i(A,y,T),L===null?P=A:L.sibling=A,L=A);return Bt&&la(_,T),P}for(A=r(_,A);T<w.length;T++)R=m(A,_,T,w[T],x),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?T:R.key),y=i(R,y,T),L===null?P=R:L.sibling=R,L=R);return t&&A.forEach(function(D){return e(_,D)}),Bt&&la(_,T),P}function p(_,y,w,x){var P=Eu(w);if(typeof P!="function")throw Error(ae(150));if(w=P.call(w),w==null)throw Error(ae(151));for(var L=P=null,A=y,T=y=0,R=null,C=w.next();A!==null&&!C.done;T++,C=w.next()){A.index>T?(R=A,A=null):R=A.sibling;var D=f(_,A,C.value,x);if(D===null){A===null&&(A=R);break}t&&A&&D.alternate===null&&e(_,A),y=i(D,y,T),L===null?P=D:L.sibling=D,L=D,A=R}if(C.done)return n(_,A),Bt&&la(_,T),P;if(A===null){for(;!C.done;T++,C=w.next())C=h(_,C.value,x),C!==null&&(y=i(C,y,T),L===null?P=C:L.sibling=C,L=C);return Bt&&la(_,T),P}for(A=r(_,A);!C.done;T++,C=w.next())C=m(A,_,T,C.value,x),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?T:C.key),y=i(C,y,T),L===null?P=C:L.sibling=C,L=C);return t&&A.forEach(function(O){return e(_,O)}),Bt&&la(_,T),P}function v(_,y,w,x){if(typeof w=="object"&&w!==null&&w.type===Ll&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case qh:e:{for(var P=w.key,L=y;L!==null;){if(L.key===P){if(P=w.type,P===Ll){if(L.tag===7){n(_,L.sibling),y=s(L,w.props.children),y.return=_,_=y;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===to&&hS(P)===L.type){n(_,L.sibling),y=s(L,w.props),y.ref=Au(_,L,w),y.return=_,_=y;break e}n(_,L);break}else e(_,L);L=L.sibling}w.type===Ll?(y=Ba(w.props.children,_.mode,x,w.key),y.return=_,_=y):(x=zf(w.type,w.key,w.props,null,_.mode,x),x.ref=Au(_,y,w),x.return=_,_=x)}return o(_);case Ol:e:{for(L=w.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=s(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=gy(w,_.mode,x),y.return=_,_=y}return o(_);case to:return L=w._init,v(_,y,L(w._payload),x)}if(Uu(w))return I(_,y,w,x);if(Eu(w))return p(_,y,w,x);nf(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,w),y.return=_,_=y):(n(_,y),y=py(w,_.mode,x),y.return=_,_=y),o(_)):n(_,y)}return v}var pc=i1(!0),o1=i1(!1),Am=Go(null),xm=null,zl=null,V_=null;function M_(){V_=zl=xm=null}function F_(t){var e=Am.current;Ft(Am),t._currentValue=e}function Uv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yl(t,e){xm=t,V_=zl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ar=!0),t.firstContext=null)}function ls(t){var e=t._currentValue;if(V_!==t)if(t={context:t,memoizedValue:e,next:null},zl===null){if(xm===null)throw Error(ae(308));zl=t,xm.dependencies={lanes:0,firstContext:t}}else zl=zl.next=t;return e}var Sa=null;function U_(t){Sa===null?Sa=[t]:Sa.push(t)}function a1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,U_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ai(t,r)}function Ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var no=!1;function j_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function So(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ct&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ai(t,n)}return s=r.interleaved,s===null?(e.next=e,U_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ai(t,n)}function Mf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}function fS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rm(t,e,n,r){var s=t.updateQueue;no=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,p=a;switch(f=e,m=n,p.tag){case 1:if(I=p.payload,typeof I=="function"){h=I.call(m,h,f);break e}h=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=p.payload,f=typeof I=="function"?I.call(m,h,f):I,f==null)break e;h=Xt({},h,f);break e;case 2:no=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ya|=o,t.lanes=o,t.memoizedState=h}}function mS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var ph={},Qs=Go(ph),kd=Go(ph),Nd=Go(ph);function Ta(t){if(t===ph)throw Error(ae(174));return t}function $_(t,e){switch(kt(Nd,e),kt(kd,t),kt(Qs,ph),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wv(e,t)}Ft(Qs),kt(Qs,e)}function gc(){Ft(Qs),Ft(kd),Ft(Nd)}function c1(t){Ta(Nd.current);var e=Ta(Qs.current),n=wv(e,t.type);e!==n&&(kt(kd,t),kt(Qs,n))}function B_(t){kd.current===t&&(Ft(Qs),Ft(kd))}var Qt=Go(0);function Pm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cy=[];function z_(){for(var t=0;t<cy.length;t++)cy[t]._workInProgressVersionPrimary=null;cy.length=0}var Ff=Li.ReactCurrentDispatcher,uy=Li.ReactCurrentBatchConfig,Qa=0,Jt=null,An=null,Vn=null,Cm=!1,td=!1,Dd=0,KV=0;function Qn(){throw Error(ae(321))}function W_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function q_(t,e,n,r,s,i){if(Qa=i,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ff.current=t===null||t.memoizedState===null?JV:XV,t=n(r,s),td){i=0;do{if(td=!1,Dd=0,25<=i)throw Error(ae(301));i+=1,Vn=An=null,e.updateQueue=null,Ff.current=ZV,t=n(r,s)}while(td)}if(Ff.current=km,e=An!==null&&An.next!==null,Qa=0,Vn=An=Jt=null,Cm=!1,e)throw Error(ae(300));return t}function H_(){var t=Dd!==0;return Dd=0,t}function Vs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Jt.memoizedState=Vn=t:Vn=Vn.next=t,Vn}function cs(){if(An===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var e=Vn===null?Jt.memoizedState:Vn.next;if(e!==null)Vn=e,An=t;else{if(t===null)throw Error(ae(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Vn===null?Jt.memoizedState=Vn=t:Vn=Vn.next=t}return Vn}function Od(t,e){return typeof e=="function"?e(t):e}function dy(t){var e=cs(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=An,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Qa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Jt.lanes|=d,Ya|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,bs(r,e.memoizedState)||(Ar=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Jt.lanes|=i,Ya|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hy(t){var e=cs(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bs(i,e.memoizedState)||(Ar=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function u1(){}function d1(t,e){var n=Jt,r=cs(),s=e(),i=!bs(r.memoizedState,s);if(i&&(r.memoizedState=s,Ar=!0),r=r.queue,K_(m1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Vn!==null&&Vn.memoizedState.tag&1){if(n.flags|=2048,Ld(9,f1.bind(null,n,r,s,e),void 0,null),Fn===null)throw Error(ae(349));Qa&30||h1(n,e,s)}return s}function h1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f1(t,e,n,r){e.value=n,e.getSnapshot=r,p1(e)&&g1(t)}function m1(t,e,n){return n(function(){p1(e)&&g1(t)})}function p1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function g1(t){var e=Ai(t,1);e!==null&&Is(e,t,1,-1)}function pS(t){var e=Vs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:t},e.queue=t,t=t.dispatch=YV.bind(null,Jt,t),[e.memoizedState,t]}function Ld(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y1(){return cs().memoizedState}function Uf(t,e,n,r){var s=Vs();Jt.flags|=t,s.memoizedState=Ld(1|e,n,void 0,r===void 0?null:r)}function Vp(t,e,n,r){var s=cs();r=r===void 0?null:r;var i=void 0;if(An!==null){var o=An.memoizedState;if(i=o.destroy,r!==null&&W_(r,o.deps)){s.memoizedState=Ld(e,n,i,r);return}}Jt.flags|=t,s.memoizedState=Ld(1|e,n,i,r)}function gS(t,e){return Uf(8390656,8,t,e)}function K_(t,e){return Vp(2048,8,t,e)}function v1(t,e){return Vp(4,2,t,e)}function w1(t,e){return Vp(4,4,t,e)}function _1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E1(t,e,n){return n=n!=null?n.concat([t]):null,Vp(4,4,_1.bind(null,e,t),n)}function G_(){}function I1(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function S1(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function T1(t,e,n){return Qa&21?(bs(n,e)||(n=PR(),Jt.lanes|=n,Ya|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ar=!0),t.memoizedState=n)}function GV(t,e){var n=Et;Et=n!==0&&4>n?n:4,t(!0);var r=uy.transition;uy.transition={};try{t(!1),e()}finally{Et=n,uy.transition=r}}function b1(){return cs().memoizedState}function QV(t,e,n){var r=bo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A1(t))x1(e,n);else if(n=a1(t,e,n,r),n!==null){var s=mr();Is(n,t,r,s),R1(n,e,r)}}function YV(t,e,n){var r=bo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A1(t))x1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,bs(a,o)){var l=e.interleaved;l===null?(s.next=s,U_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=a1(t,e,s,r),n!==null&&(s=mr(),Is(n,t,r,s),R1(n,e,r))}}function A1(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function x1(t,e){td=Cm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function R1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}var km={readContext:ls,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},JV={readContext:ls,useCallback:function(t,e){return Vs().memoizedState=[t,e===void 0?null:e],t},useContext:ls,useEffect:gS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uf(4194308,4,_1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uf(4,2,t,e)},useMemo:function(t,e){var n=Vs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QV.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=Vs();return t={current:t},e.memoizedState=t},useState:pS,useDebugValue:G_,useDeferredValue:function(t){return Vs().memoizedState=t},useTransition:function(){var t=pS(!1),e=t[0];return t=GV.bind(null,t[1]),Vs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,s=Vs();if(Bt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Fn===null)throw Error(ae(349));Qa&30||h1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,gS(m1.bind(null,r,i,t),[t]),r.flags|=2048,Ld(9,f1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Vs(),e=Fn.identifierPrefix;if(Bt){var n=gi,r=pi;n=(r&~(1<<32-Es(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XV={readContext:ls,useCallback:I1,useContext:ls,useEffect:K_,useImperativeHandle:E1,useInsertionEffect:v1,useLayoutEffect:w1,useMemo:S1,useReducer:dy,useRef:y1,useState:function(){return dy(Od)},useDebugValue:G_,useDeferredValue:function(t){var e=cs();return T1(e,An.memoizedState,t)},useTransition:function(){var t=dy(Od)[0],e=cs().memoizedState;return[t,e]},useMutableSource:u1,useSyncExternalStore:d1,useId:b1,unstable_isNewReconciler:!1},ZV={readContext:ls,useCallback:I1,useContext:ls,useEffect:K_,useImperativeHandle:E1,useInsertionEffect:v1,useLayoutEffect:w1,useMemo:S1,useReducer:hy,useRef:y1,useState:function(){return hy(Od)},useDebugValue:G_,useDeferredValue:function(t){var e=cs();return An===null?e.memoizedState=t:T1(e,An.memoizedState,t)},useTransition:function(){var t=hy(Od)[0],e=cs().memoizedState;return[t,e]},useMutableSource:u1,useSyncExternalStore:d1,useId:b1,unstable_isNewReconciler:!1};function fs(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mp={isMounted:function(t){return(t=t._reactInternals)?ul(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mr(),s=bo(t),i=wi(r,s);i.payload=e,n!=null&&(i.callback=n),e=So(t,i,s),e!==null&&(Is(e,t,s,r),Mf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mr(),s=bo(t),i=wi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=So(t,i,s),e!==null&&(Is(e,t,s,r),Mf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mr(),r=bo(t),s=wi(n,r);s.tag=2,e!=null&&(s.callback=e),e=So(t,s,r),e!==null&&(Is(e,t,r,n),Mf(e,t,r))}};function yS(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xd(n,r)||!xd(s,i):!0}function P1(t,e,n){var r=!1,s=Vo,i=e.contextType;return typeof i=="object"&&i!==null?i=ls(i):(s=kr(e)?Ka:sr.current,r=e.contextTypes,i=(r=r!=null)?fc(t,s):Vo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function vS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Mp.enqueueReplaceState(e,e.state,null)}function $v(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},j_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ls(i):(i=kr(e)?Ka:sr.current,s.context=fc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Mp.enqueueReplaceState(s,s.state,null),Rm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yc(t,e){try{var n="",r=e;do n+=xL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function fy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eM=typeof WeakMap=="function"?WeakMap:Map;function C1(t,e,n){n=wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dm||(Dm=!0,Xv=r),Bv(t,e)},n}function k1(t,e,n){n=wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Bv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bv(t,e),typeof r!="function"&&(To===null?To=new Set([this]):To.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mM.bind(null,t,e,n),e.then(t,t))}function _S(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ES(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wi(-1,1),e.tag=2,So(n,e,1))),n.lanes|=1),t)}var tM=Li.ReactCurrentOwner,Ar=!1;function dr(t,e,n,r){e.child=t===null?o1(e,null,n,r):pc(e,t.child,n,r)}function IS(t,e,n,r,s){n=n.render;var i=e.ref;return Yl(e,s),r=q_(t,e,n,r,i,s),n=H_(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xi(t,e,s)):(Bt&&n&&D_(e),e.flags|=1,dr(t,e,r,s),e.child)}function SS(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!n0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,N1(t,e,i,r,s)):(t=zf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xd,n(o,r)&&t.ref===e.ref)return xi(t,e,s)}return e.flags|=1,t=Ao(i,r),t.ref=e.ref,t.return=e,e.child=t}function N1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xd(i,r)&&t.ref===e.ref)if(Ar=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ar=!0);else return e.lanes=t.lanes,xi(t,e,s)}return zv(t,e,n,r,s)}function D1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(ql,Mr),Mr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(ql,Mr),Mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,kt(ql,Mr),Mr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,kt(ql,Mr),Mr|=r;return dr(t,e,s,n),e.child}function O1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zv(t,e,n,r,s){var i=kr(n)?Ka:sr.current;return i=fc(e,i),Yl(e,s),n=q_(t,e,n,r,i,s),r=H_(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xi(t,e,s)):(Bt&&r&&D_(e),e.flags|=1,dr(t,e,n,s),e.child)}function TS(t,e,n,r,s){if(kr(n)){var i=!0;Sm(e)}else i=!1;if(Yl(e,s),e.stateNode===null)jf(t,e),P1(e,n,r),$v(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ls(c):(c=kr(n)?Ka:sr.current,c=fc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&vS(e,o,r,c),no=!1;var f=e.memoizedState;o.state=f,Rm(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Cr.current||no?(typeof d=="function"&&(jv(e,n,d,r),l=e.memoizedState),(a=no||yS(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fs(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ls(l):(l=kr(n)?Ka:sr.current,l=fc(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&vS(e,o,r,l),no=!1,f=e.memoizedState,o.state=f,Rm(e,r,o,s);var I=e.memoizedState;a!==h||f!==I||Cr.current||no?(typeof m=="function"&&(jv(e,n,m,r),I=e.memoizedState),(c=no||yS(e,n,c,r,f,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wv(t,e,n,r,i,s)}function Wv(t,e,n,r,s,i){O1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&cS(e,n,!1),xi(t,e,i);r=e.stateNode,tM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pc(e,t.child,null,i),e.child=pc(e,null,a,i)):dr(t,e,a,i),e.memoizedState=r.state,s&&cS(e,n,!0),e.child}function L1(t){var e=t.stateNode;e.pendingContext?lS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lS(t,e.context,!1),$_(t,e.containerInfo)}function bS(t,e,n,r,s){return mc(),L_(s),e.flags|=256,dr(t,e,n,r),e.child}var qv={dehydrated:null,treeContext:null,retryLane:0};function Hv(t){return{baseLanes:t,cachePool:null,transitions:null}}function V1(t,e,n){var r=e.pendingProps,s=Qt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(Qt,s&1),t===null)return Fv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jp(o,r,0,null),t=Ba(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Hv(n),e.memoizedState=qv,t):Q_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return nM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ao(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ao(a,i):(i=Ba(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Hv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=qv,r}return i=t.child,t=i.sibling,r=Ao(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Q_(t,e){return e=jp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rf(t,e,n,r){return r!==null&&L_(r),pc(e,t.child,null,n),t=Q_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=fy(Error(ae(422))),rf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jp({mode:"visible",children:r.children},s,0,null),i=Ba(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&pc(e,t.child,null,o),e.child.memoizedState=Hv(o),e.memoizedState=qv,i);if(!(e.mode&1))return rf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ae(419)),r=fy(i,r,void 0),rf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ar||a){if(r=Fn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ai(t,s),Is(r,t,s,-1))}return t0(),r=fy(Error(ae(421))),rf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zr=Io(s.nextSibling),Hr=e,Bt=!0,vs=null,t!==null&&(rs[ss++]=pi,rs[ss++]=gi,rs[ss++]=Ga,pi=t.id,gi=t.overflow,Ga=e),e=Q_(e,r.children),e.flags|=4096,e)}function AS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uv(t.return,e,n)}function my(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function M1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dr(t,e,r.children,n),r=Qt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AS(t,n,e);else if(t.tag===19)AS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt(Qt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),my(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}my(e,!0,n,null,i);break;case"together":my(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ya|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ao(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ao(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rM(t,e,n){switch(e.tag){case 3:L1(e),mc();break;case 5:c1(e);break;case 1:kr(e.type)&&Sm(e);break;case 4:$_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;kt(Am,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kt(Qt,Qt.current&1),e.flags|=128,null):n&e.child.childLanes?V1(t,e,n):(kt(Qt,Qt.current&1),t=xi(t,e,n),t!==null?t.sibling:null);kt(Qt,Qt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(Qt,Qt.current),r)break;return null;case 22:case 23:return e.lanes=0,D1(t,e,n)}return xi(t,e,n)}var F1,Kv,U1,j1;F1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kv=function(){};U1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ta(Qs.current);var i=null;switch(n){case"input":s=pv(t,s),r=pv(t,r),i=[];break;case"select":s=Xt({},s,{value:void 0}),r=Xt({},r,{value:void 0}),i=[];break;case"textarea":s=vv(t,s),r=vv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Em)}_v(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_d.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_d.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Mt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};j1=function(t,e,n,r){n!==r&&(e.flags|=4)};function xu(t,e){if(!Bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sM(t,e,n){var r=e.pendingProps;switch(O_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return kr(e.type)&&Im(),Yn(e),null;case 3:return r=e.stateNode,gc(),Ft(Cr),Ft(sr),z_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vs!==null&&(tw(vs),vs=null))),Kv(t,e),Yn(e),null;case 5:B_(e);var s=Ta(Nd.current);if(n=e.type,t!==null&&e.stateNode!=null)U1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Yn(e),null}if(t=Ta(Qs.current),tf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bs]=e,r[Cd]=i,t=(e.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(s=0;s<$u.length;s++)Mt($u[s],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":LI(r,i),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Mt("invalid",r);break;case"textarea":MI(r,i),Mt("invalid",r)}_v(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ef(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ef(r.textContent,a,t),s=["children",""+a]):_d.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",r)}switch(n){case"input":Hh(r),VI(r,i,!0);break;case"textarea":Hh(r),FI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Em)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bs]=e,t[Cd]=r,F1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ev(n,r),n){case"dialog":Mt("cancel",t),Mt("close",t),s=r;break;case"iframe":case"object":case"embed":Mt("load",t),s=r;break;case"video":case"audio":for(s=0;s<$u.length;s++)Mt($u[s],t);s=r;break;case"source":Mt("error",t),s=r;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),s=r;break;case"details":Mt("toggle",t),s=r;break;case"input":LI(t,r),s=pv(t,r),Mt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Xt({},r,{value:void 0}),Mt("invalid",t);break;case"textarea":MI(t,r),s=vv(t,r),Mt("invalid",t);break;default:s=r}_v(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?yR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pR(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ed(t,l):typeof l=="number"&&Ed(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_d.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Mt("scroll",t):l!=null&&w_(t,i,l,o))}switch(n){case"input":Hh(t),VI(t,r,!1);break;case"textarea":Hh(t),FI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Em)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)j1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Ta(Nd.current),Ta(Qs.current),tf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bs]=e,(i=r.nodeValue!==n)&&(t=Hr,t!==null))switch(t.tag){case 3:ef(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ef(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bs]=e,e.stateNode=r}return Yn(e),null;case 13:if(Ft(Qt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&zr!==null&&e.mode&1&&!(e.flags&128))s1(),mc(),e.flags|=98560,i=!1;else if(i=tf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[Bs]=e}else mc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),i=!1}else vs!==null&&(tw(vs),vs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qt.current&1?xn===0&&(xn=3):t0())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return gc(),Kv(t,e),t===null&&Rd(e.stateNode.containerInfo),Yn(e),null;case 10:return F_(e.type._context),Yn(e),null;case 17:return kr(e.type)&&Im(),Yn(e),null;case 19:if(Ft(Qt),i=e.memoizedState,i===null)return Yn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)xu(i,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pm(t),o!==null){for(e.flags|=128,xu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Qt,Qt.current&1|2),e.child}t=t.sibling}i.tail!==null&&fn()>vc&&(e.flags|=128,r=!0,xu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Bt)return Yn(e),null}else 2*fn()-i.renderingStartTime>vc&&n!==1073741824&&(e.flags|=128,r=!0,xu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fn(),e.sibling=null,n=Qt.current,kt(Qt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return e0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mr&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function iM(t,e){switch(O_(e),e.tag){case 1:return kr(e.type)&&Im(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gc(),Ft(Cr),Ft(sr),z_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return B_(e),null;case 13:if(Ft(Qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));mc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Qt),null;case 4:return gc(),null;case 10:return F_(e.type._context),null;case 22:case 23:return e0(),null;case 24:return null;default:return null}}var sf=!1,tr=!1,oM=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Wl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){an(t,e,r)}else n.current=null}function Gv(t,e,n){try{n()}catch(r){an(t,e,r)}}var xS=!1;function aM(t,e){if(kv=vm,t=qR(),N_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nv={focusedElem:t,selectionRange:n},vm=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var p=I.memoizedProps,v=I.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?p:fs(e.type,p),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(x){an(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return I=xS,xS=!1,I}function nd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Gv(e,n,i)}s=s.next}while(s!==r)}}function Fp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $1(t){var e=t.alternate;e!==null&&(t.alternate=null,$1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bs],delete e[Cd],delete e[Lv],delete e[zV],delete e[WV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function B1(t){return t.tag===5||t.tag===3||t.tag===4}function RS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||B1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Em));else if(r!==4&&(t=t.child,t!==null))for(Yv(t,e,n),t=t.sibling;t!==null;)Yv(t,e,n),t=t.sibling}function Jv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jv(t,e,n),t=t.sibling;t!==null;)Jv(t,e,n),t=t.sibling}var $n=null,gs=!1;function Hi(t,e,n){for(n=n.child;n!==null;)z1(t,e,n),n=n.sibling}function z1(t,e,n){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Cp,n)}catch{}switch(n.tag){case 5:tr||Wl(n,e);case 6:var r=$n,s=gs;$n=null,Hi(t,e,n),$n=r,gs=s,$n!==null&&(gs?(t=$n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$n.removeChild(n.stateNode));break;case 18:$n!==null&&(gs?(t=$n,n=n.stateNode,t.nodeType===8?ay(t.parentNode,n):t.nodeType===1&&ay(t,n),bd(t)):ay($n,n.stateNode));break;case 4:r=$n,s=gs,$n=n.stateNode.containerInfo,gs=!0,Hi(t,e,n),$n=r,gs=s;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Gv(n,e,o),s=s.next}while(s!==r)}Hi(t,e,n);break;case 1:if(!tr&&(Wl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){an(n,e,a)}Hi(t,e,n);break;case 21:Hi(t,e,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Hi(t,e,n),tr=r):Hi(t,e,n);break;default:Hi(t,e,n)}}function PS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oM),e.forEach(function(r){var s=gM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ds(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$n=a.stateNode,gs=!1;break e;case 3:$n=a.stateNode.containerInfo,gs=!0;break e;case 4:$n=a.stateNode.containerInfo,gs=!0;break e}a=a.return}if($n===null)throw Error(ae(160));z1(i,o,s),$n=null,gs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){an(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)W1(e,t),e=e.sibling}function W1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ds(e,t),Ls(t),r&4){try{nd(3,t,t.return),Fp(3,t)}catch(p){an(t,t.return,p)}try{nd(5,t,t.return)}catch(p){an(t,t.return,p)}}break;case 1:ds(e,t),Ls(t),r&512&&n!==null&&Wl(n,n.return);break;case 5:if(ds(e,t),Ls(t),r&512&&n!==null&&Wl(n,n.return),t.flags&32){var s=t.stateNode;try{Ed(s,"")}catch(p){an(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&hR(s,i),Ev(a,o);var c=Ev(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?yR(s,h):d==="dangerouslySetInnerHTML"?pR(s,h):d==="children"?Ed(s,h):w_(s,d,h,c)}switch(a){case"input":gv(s,i);break;case"textarea":fR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Hl(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Hl(s,!!i.multiple,i.defaultValue,!0):Hl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cd]=i}catch(p){an(t,t.return,p)}}break;case 6:if(ds(e,t),Ls(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){an(t,t.return,p)}}break;case 3:if(ds(e,t),Ls(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(p){an(t,t.return,p)}break;case 4:ds(e,t),Ls(t);break;case 13:ds(e,t),Ls(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(X_=fn())),r&4&&PS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(c=tr)||d,ds(e,t),tr=c):ds(e,t),Ls(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ie=t,d=t.child;d!==null;){for(h=Ie=d;Ie!==null;){switch(f=Ie,m=f.child,f.tag){case 0:case 11:case 14:case 15:nd(4,f,f.return);break;case 1:Wl(f,f.return);var I=f.stateNode;if(typeof I.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(p){an(r,n,p)}}break;case 5:Wl(f,f.return);break;case 22:if(f.memoizedState!==null){kS(h);continue}}m!==null?(m.return=f,Ie=m):kS(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gR("display",o))}catch(p){an(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){an(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ds(e,t),Ls(t),r&4&&PS(t);break;case 21:break;default:ds(e,t),Ls(t)}}function Ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(B1(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ed(s,""),r.flags&=-33);var i=RS(t);Jv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=RS(t);Yv(t,a,o);break;default:throw Error(ae(161))}}catch(l){an(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lM(t,e,n){Ie=t,q1(t)}function q1(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||sf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tr;a=sf;var c=tr;if(sf=o,(tr=l)&&!c)for(Ie=s;Ie!==null;)o=Ie,l=o.child,o.tag===22&&o.memoizedState!==null?NS(s):l!==null?(l.return=o,Ie=l):NS(s);for(;i!==null;)Ie=i,q1(i),i=i.sibling;Ie=s,sf=a,tr=c}CS(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):CS(t)}}function CS(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||Fp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&mS(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&bd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}tr||e.flags&512&&Qv(e)}catch(f){an(e,e.return,f)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function kS(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function NS(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fp(4,e)}catch(l){an(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){an(e,s,l)}}var i=e.return;try{Qv(e)}catch(l){an(e,i,l)}break;case 5:var o=e.return;try{Qv(e)}catch(l){an(e,o,l)}}}catch(l){an(e,e.return,l)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var cM=Math.ceil,Nm=Li.ReactCurrentDispatcher,Y_=Li.ReactCurrentOwner,os=Li.ReactCurrentBatchConfig,ct=0,Fn=null,_n=null,zn=0,Mr=0,ql=Go(0),xn=0,Vd=null,Ya=0,Up=0,J_=0,rd=null,br=null,X_=0,vc=1/0,di=null,Dm=!1,Xv=null,To=null,of=!1,mo=null,Om=0,sd=0,Zv=null,$f=-1,Bf=0;function mr(){return ct&6?fn():$f!==-1?$f:$f=fn()}function bo(t){return t.mode&1?ct&2&&zn!==0?zn&-zn:HV.transition!==null?(Bf===0&&(Bf=PR()),Bf):(t=Et,t!==0||(t=window.event,t=t===void 0?16:VR(t.type)),t):1}function Is(t,e,n,r){if(50<sd)throw sd=0,Zv=null,Error(ae(185));hh(t,n,r),(!(ct&2)||t!==Fn)&&(t===Fn&&(!(ct&2)&&(Up|=n),xn===4&&so(t,zn)),Nr(t,r),n===1&&ct===0&&!(e.mode&1)&&(vc=fn()+500,Lp&&Qo()))}function Nr(t,e){var n=t.callbackNode;HL(t,e);var r=ym(t,t===Fn?zn:0);if(r===0)n!==null&&$I(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$I(n),e===1)t.tag===0?qV(DS.bind(null,t)):t1(DS.bind(null,t)),$V(function(){!(ct&6)&&Qo()}),n=null;else{switch(CR(r)){case 1:n=T_;break;case 4:n=xR;break;case 16:n=gm;break;case 536870912:n=RR;break;default:n=gm}n=Z1(n,H1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H1(t,e){if($f=-1,Bf=0,ct&6)throw Error(ae(327));var n=t.callbackNode;if(Jl()&&t.callbackNode!==n)return null;var r=ym(t,t===Fn?zn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lm(t,r);else{e=r;var s=ct;ct|=2;var i=G1();(Fn!==t||zn!==e)&&(di=null,vc=fn()+500,$a(t,e));do try{hM();break}catch(a){K1(t,a)}while(!0);M_(),Nm.current=i,ct=s,_n!==null?e=0:(Fn=null,zn=0,e=xn)}if(e!==0){if(e===2&&(s=Av(t),s!==0&&(r=s,e=ew(t,s))),e===1)throw n=Vd,$a(t,0),so(t,r),Nr(t,fn()),n;if(e===6)so(t,r);else{if(s=t.current.alternate,!(r&30)&&!uM(s)&&(e=Lm(t,r),e===2&&(i=Av(t),i!==0&&(r=i,e=ew(t,i))),e===1))throw n=Vd,$a(t,0),so(t,r),Nr(t,fn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:ca(t,br,di);break;case 3:if(so(t,r),(r&130023424)===r&&(e=X_+500-fn(),10<e)){if(ym(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ov(ca.bind(null,t,br,di),e);break}ca(t,br,di);break;case 4:if(so(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Es(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cM(r/1960))-r,10<r){t.timeoutHandle=Ov(ca.bind(null,t,br,di),r);break}ca(t,br,di);break;case 5:ca(t,br,di);break;default:throw Error(ae(329))}}}return Nr(t,fn()),t.callbackNode===n?H1.bind(null,t):null}function ew(t,e){var n=rd;return t.current.memoizedState.isDehydrated&&($a(t,e).flags|=256),t=Lm(t,e),t!==2&&(e=br,br=n,e!==null&&tw(e)),t}function tw(t){br===null?br=t:br.push.apply(br,t)}function uM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function so(t,e){for(e&=~J_,e&=~Up,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Es(e),r=1<<n;t[n]=-1,e&=~r}}function DS(t){if(ct&6)throw Error(ae(327));Jl();var e=ym(t,0);if(!(e&1))return Nr(t,fn()),null;var n=Lm(t,e);if(t.tag!==0&&n===2){var r=Av(t);r!==0&&(e=r,n=ew(t,r))}if(n===1)throw n=Vd,$a(t,0),so(t,e),Nr(t,fn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ca(t,br,di),Nr(t,fn()),null}function Z_(t,e){var n=ct;ct|=1;try{return t(e)}finally{ct=n,ct===0&&(vc=fn()+500,Lp&&Qo())}}function Ja(t){mo!==null&&mo.tag===0&&!(ct&6)&&Jl();var e=ct;ct|=1;var n=os.transition,r=Et;try{if(os.transition=null,Et=1,t)return t()}finally{Et=r,os.transition=n,ct=e,!(ct&6)&&Qo()}}function e0(){Mr=ql.current,Ft(ql)}function $a(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jV(n)),_n!==null)for(n=_n.return;n!==null;){var r=n;switch(O_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Im();break;case 3:gc(),Ft(Cr),Ft(sr),z_();break;case 5:B_(r);break;case 4:gc();break;case 13:Ft(Qt);break;case 19:Ft(Qt);break;case 10:F_(r.type._context);break;case 22:case 23:e0()}n=n.return}if(Fn=t,_n=t=Ao(t.current,null),zn=Mr=e,xn=0,Vd=null,J_=Up=Ya=0,br=rd=null,Sa!==null){for(e=0;e<Sa.length;e++)if(n=Sa[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sa=null}return t}function K1(t,e){do{var n=_n;try{if(M_(),Ff.current=km,Cm){for(var r=Jt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cm=!1}if(Qa=0,Vn=An=Jt=null,td=!1,Dd=0,Y_.current=null,n===null||n.return===null){xn=1,Vd=e,_n=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=zn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=_S(o);if(m!==null){m.flags&=-257,ES(m,o,a,i,e),m.mode&1&&wS(i,c,e),e=m,l=c;var I=e.updateQueue;if(I===null){var p=new Set;p.add(l),e.updateQueue=p}else I.add(l);break e}else{if(!(e&1)){wS(i,c,e),t0();break e}l=Error(ae(426))}}else if(Bt&&a.mode&1){var v=_S(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ES(v,o,a,i,e),L_(yc(l,a));break e}}i=l=yc(l,a),xn!==4&&(xn=2),rd===null?rd=[i]:rd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=C1(i,l,e);fS(i,_);break e;case 1:a=l;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(To===null||!To.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=k1(i,a,e);fS(i,x);break e}}i=i.return}while(i!==null)}Y1(n)}catch(P){e=P,_n===n&&n!==null&&(_n=n=n.return);continue}break}while(!0)}function G1(){var t=Nm.current;return Nm.current=km,t===null?km:t}function t0(){(xn===0||xn===3||xn===2)&&(xn=4),Fn===null||!(Ya&268435455)&&!(Up&268435455)||so(Fn,zn)}function Lm(t,e){var n=ct;ct|=2;var r=G1();(Fn!==t||zn!==e)&&(di=null,$a(t,e));do try{dM();break}catch(s){K1(t,s)}while(!0);if(M_(),ct=n,Nm.current=r,_n!==null)throw Error(ae(261));return Fn=null,zn=0,xn}function dM(){for(;_n!==null;)Q1(_n)}function hM(){for(;_n!==null&&!ML();)Q1(_n)}function Q1(t){var e=X1(t.alternate,t,Mr);t.memoizedProps=t.pendingProps,e===null?Y1(t):_n=e,Y_.current=null}function Y1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iM(n,e),n!==null){n.flags&=32767,_n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,_n=null;return}}else if(n=sM(n,e,Mr),n!==null){_n=n;return}if(e=e.sibling,e!==null){_n=e;return}_n=e=t}while(e!==null);xn===0&&(xn=5)}function ca(t,e,n){var r=Et,s=os.transition;try{os.transition=null,Et=1,fM(t,e,n,r)}finally{os.transition=s,Et=r}return null}function fM(t,e,n,r){do Jl();while(mo!==null);if(ct&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KL(t,i),t===Fn&&(_n=Fn=null,zn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||of||(of=!0,Z1(gm,function(){return Jl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=os.transition,os.transition=null;var o=Et;Et=1;var a=ct;ct|=4,Y_.current=null,aM(t,n),W1(n,t),DV(Nv),vm=!!kv,Nv=kv=null,t.current=n,lM(n),FL(),ct=a,Et=o,os.transition=i}else t.current=n;if(of&&(of=!1,mo=t,Om=s),i=t.pendingLanes,i===0&&(To=null),$L(n.stateNode),Nr(t,fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dm)throw Dm=!1,t=Xv,Xv=null,t;return Om&1&&t.tag!==0&&Jl(),i=t.pendingLanes,i&1?t===Zv?sd++:(sd=0,Zv=t):sd=0,Qo(),null}function Jl(){if(mo!==null){var t=CR(Om),e=os.transition,n=Et;try{if(os.transition=null,Et=16>t?16:t,mo===null)var r=!1;else{if(t=mo,mo=null,Om=0,ct&6)throw Error(ae(331));var s=ct;for(ct|=4,Ie=t.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ie=c;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:nd(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ie=h;else for(;Ie!==null;){d=Ie;var f=d.sibling,m=d.return;if($1(d),d===c){Ie=null;break}if(f!==null){f.return=m,Ie=f;break}Ie=m}}}var I=i.alternate;if(I!==null){var p=I.child;if(p!==null){I.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nd(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,Ie=_;break e}Ie=i.return}}var y=t.current;for(Ie=y;Ie!==null;){o=Ie;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ie=w;else e:for(o=y;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fp(9,a)}}catch(P){an(a,a.return,P)}if(a===o){Ie=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ie=x;break e}Ie=a.return}}if(ct=s,Qo(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Cp,t)}catch{}r=!0}return r}finally{Et=n,os.transition=e}}return!1}function OS(t,e,n){e=yc(n,e),e=C1(t,e,1),t=So(t,e,1),e=mr(),t!==null&&(hh(t,1,e),Nr(t,e))}function an(t,e,n){if(t.tag===3)OS(t,t,n);else for(;e!==null;){if(e.tag===3){OS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(To===null||!To.has(r))){t=yc(n,t),t=k1(e,t,1),e=So(e,t,1),t=mr(),e!==null&&(hh(e,1,t),Nr(e,t));break}}e=e.return}}function mM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mr(),t.pingedLanes|=t.suspendedLanes&n,Fn===t&&(zn&n)===n&&(xn===4||xn===3&&(zn&130023424)===zn&&500>fn()-X_?$a(t,0):J_|=n),Nr(t,e)}function J1(t,e){e===0&&(t.mode&1?(e=Qh,Qh<<=1,!(Qh&130023424)&&(Qh=4194304)):e=1);var n=mr();t=Ai(t,e),t!==null&&(hh(t,e,n),Nr(t,n))}function pM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J1(t,n)}function gM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),J1(t,n)}var X1;X1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cr.current)Ar=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ar=!1,rM(t,e,n);Ar=!!(t.flags&131072)}else Ar=!1,Bt&&e.flags&1048576&&n1(e,bm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jf(t,e),t=e.pendingProps;var s=fc(e,sr.current);Yl(e,n),s=q_(null,e,r,t,s,n);var i=H_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(i=!0,Sm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,j_(e),s.updater=Mp,e.stateNode=s,s._reactInternals=e,$v(e,r,t,n),e=Wv(null,e,r,!0,i,n)):(e.tag=0,Bt&&i&&D_(e),dr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vM(r),t=fs(r,t),s){case 0:e=zv(null,e,r,t,n);break e;case 1:e=TS(null,e,r,t,n);break e;case 11:e=IS(null,e,r,t,n);break e;case 14:e=SS(null,e,r,fs(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),zv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),TS(t,e,r,s,n);case 3:e:{if(L1(e),t===null)throw Error(ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,l1(t,e),Rm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yc(Error(ae(423)),e),e=bS(t,e,r,n,s);break e}else if(r!==s){s=yc(Error(ae(424)),e),e=bS(t,e,r,n,s);break e}else for(zr=Io(e.stateNode.containerInfo.firstChild),Hr=e,Bt=!0,vs=null,n=o1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mc(),r===s){e=xi(t,e,n);break e}dr(t,e,r,n)}e=e.child}return e;case 5:return c1(e),t===null&&Fv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Dv(r,s)?o=null:i!==null&&Dv(r,i)&&(e.flags|=32),O1(t,e),dr(t,e,o,n),e.child;case 6:return t===null&&Fv(e),null;case 13:return V1(t,e,n);case 4:return $_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pc(e,null,r,n):dr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),IS(t,e,r,s,n);case 7:return dr(t,e,e.pendingProps,n),e.child;case 8:return dr(t,e,e.pendingProps.children,n),e.child;case 12:return dr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,kt(Am,r._currentValue),r._currentValue=o,i!==null)if(bs(i.value,o)){if(i.children===s.children&&!Cr.current){e=xi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Uv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Uv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Yl(e,n),s=ls(s),r=r(s),e.flags|=1,dr(t,e,r,n),e.child;case 14:return r=e.type,s=fs(r,e.pendingProps),s=fs(r.type,s),SS(t,e,r,s,n);case 15:return N1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),jf(t,e),e.tag=1,kr(r)?(t=!0,Sm(e)):t=!1,Yl(e,n),P1(e,r,s),$v(e,r,s,n),Wv(null,e,r,!0,t,n);case 19:return M1(t,e,n);case 22:return D1(t,e,n)}throw Error(ae(156,e.tag))};function Z1(t,e){return AR(t,e)}function yM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(t,e,n,r){return new yM(t,e,n,r)}function n0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vM(t){if(typeof t=="function")return n0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E_)return 11;if(t===I_)return 14}return 2}function Ao(t,e){var n=t.alternate;return n===null?(n=is(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")n0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ll:return Ba(n.children,s,i,e);case __:o=8,s|=8;break;case dv:return t=is(12,n,e,s|2),t.elementType=dv,t.lanes=i,t;case hv:return t=is(13,n,e,s),t.elementType=hv,t.lanes=i,t;case fv:return t=is(19,n,e,s),t.elementType=fv,t.lanes=i,t;case cR:return jp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aR:o=10;break e;case lR:o=9;break e;case E_:o=11;break e;case I_:o=14;break e;case to:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=is(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ba(t,e,n,r){return t=is(7,t,r,e),t.lanes=n,t}function jp(t,e,n,r){return t=is(22,t,r,e),t.elementType=cR,t.lanes=n,t.stateNode={isHidden:!1},t}function py(t,e,n){return t=is(6,t,null,e),t.lanes=n,t}function gy(t,e,n){return e=is(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yg(0),this.expirationTimes=Yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function r0(t,e,n,r,s,i,o,a,l){return t=new wM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=is(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},j_(i),t}function _M(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ol,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eP(t){if(!t)return Vo;t=t._reactInternals;e:{if(ul(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(kr(n))return e1(t,n,e)}return e}function tP(t,e,n,r,s,i,o,a,l){return t=r0(n,r,!0,t,s,i,o,a,l),t.context=eP(null),n=t.current,r=mr(),s=bo(n),i=wi(r,s),i.callback=e??null,So(n,i,s),t.current.lanes=s,hh(t,s,r),Nr(t,r),t}function $p(t,e,n,r){var s=e.current,i=mr(),o=bo(s);return n=eP(n),e.context===null?e.context=n:e.pendingContext=n,e=wi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=So(s,e,o),t!==null&&(Is(t,s,o,i),Mf(t,s,o)),o}function Vm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function LS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function s0(t,e){LS(t,e),(t=t.alternate)&&LS(t,e)}function EM(){return null}var nP=typeof reportError=="function"?reportError:function(t){console.error(t)};function i0(t){this._internalRoot=t}Bp.prototype.render=i0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));$p(t,e,null,null)};Bp.prototype.unmount=i0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ja(function(){$p(null,t,null,null)}),e[bi]=null}};function Bp(t){this._internalRoot=t}Bp.prototype.unstable_scheduleHydration=function(t){if(t){var e=DR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ro.length&&e!==0&&e<ro[n].priority;n++);ro.splice(n,0,t),n===0&&LR(t)}};function o0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function VS(){}function IM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Vm(o);i.call(c)}}var o=tP(e,r,t,0,null,!1,!1,"",VS);return t._reactRootContainer=o,t[bi]=o.current,Rd(t.nodeType===8?t.parentNode:t),Ja(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Vm(l);a.call(c)}}var l=r0(t,0,!1,null,null,!1,!1,"",VS);return t._reactRootContainer=l,t[bi]=l.current,Rd(t.nodeType===8?t.parentNode:t),Ja(function(){$p(e,l,n,r)}),l}function Wp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Vm(o);a.call(l)}}$p(e,o,t,s)}else o=IM(n,e,t,s,r);return Vm(o)}kR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ju(e.pendingLanes);n!==0&&(b_(e,n|1),Nr(e,fn()),!(ct&6)&&(vc=fn()+500,Qo()))}break;case 13:Ja(function(){var r=Ai(t,1);if(r!==null){var s=mr();Is(r,t,1,s)}}),s0(t,1)}};A_=function(t){if(t.tag===13){var e=Ai(t,134217728);if(e!==null){var n=mr();Is(e,t,134217728,n)}s0(t,134217728)}};NR=function(t){if(t.tag===13){var e=bo(t),n=Ai(t,e);if(n!==null){var r=mr();Is(n,t,e,r)}s0(t,e)}};DR=function(){return Et};OR=function(t,e){var n=Et;try{return Et=t,e()}finally{Et=n}};Sv=function(t,e,n){switch(e){case"input":if(gv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Op(r);if(!s)throw Error(ae(90));dR(r),gv(r,s)}}}break;case"textarea":fR(t,n);break;case"select":e=n.value,e!=null&&Hl(t,!!n.multiple,e,!1)}};_R=Z_;ER=Ja;var SM={usingClientEntryPoint:!1,Events:[mh,Ul,Op,vR,wR,Z_]},Ru={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TM={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TR(t),t===null?null:t.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||EM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{Cp=af.inject(TM),Gs=af}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SM;Xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o0(e))throw Error(ae(200));return _M(t,e,null,n)};Xr.createRoot=function(t,e){if(!o0(t))throw Error(ae(299));var n=!1,r="",s=nP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=r0(t,1,!1,null,null,n,!1,r,s),t[bi]=e.current,Rd(t.nodeType===8?t.parentNode:t),new i0(e)};Xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=TR(e),t=t===null?null:t.stateNode,t};Xr.flushSync=function(t){return Ja(t)};Xr.hydrate=function(t,e,n){if(!zp(e))throw Error(ae(200));return Wp(null,t,e,!0,n)};Xr.hydrateRoot=function(t,e,n){if(!o0(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=nP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tP(e,null,t,1,n??null,s,!1,i,o),t[bi]=e.current,Rd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bp(e)};Xr.render=function(t,e,n){if(!zp(e))throw Error(ae(200));return Wp(null,t,e,!1,n)};Xr.unmountComponentAtNode=function(t){if(!zp(t))throw Error(ae(40));return t._reactRootContainer?(Ja(function(){Wp(null,null,t,!1,function(){t._reactRootContainer=null,t[bi]=null})}),!0):!1};Xr.unstable_batchedUpdates=Z_;Xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zp(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Wp(t,e,n,!1,r)};Xr.version="18.3.1-next-f1338f8080-20240426";function rP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rP)}catch(t){console.error(t)}}rP(),rR.exports=Xr;var gh=rR.exports;const sP=qx(gh);var iP,MS=gh;iP=MS.createRoot,MS.hydrateRoot;const bM="modulepreload",AM=function(t,e){return new URL(t,e).href},FS={},te=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=AM(c,r),c in FS)return;FS[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let I=o.length-1;I>=0;I--){const p=o[I];if(p.href===c&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":bM,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((I,p)=>{m.addEventListener("load",I),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},xM=1,RM=1e6;let yy=0;function PM(){return yy=(yy+1)%Number.MAX_SAFE_INTEGER,yy.toString()}const vy=new Map,US=t=>{if(vy.has(t))return;const e=setTimeout(()=>{vy.delete(t),id({type:"REMOVE_TOAST",toastId:t})},RM);vy.set(t,e)},CM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,xM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?US(n):t.toasts.forEach(r=>{US(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Wf=[];let qf={toasts:[]};function id(t){qf=CM(qf,t),Wf.forEach(e=>{e(qf)})}function kM({...t}){const e=PM(),n=s=>id({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>id({type:"DISMISS_TOAST",toastId:e});return id({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function a0(){const[t,e]=b.useState(qf);return b.useEffect(()=>(Wf.push(e),()=>{const n=Wf.indexOf(e);n>-1&&Wf.splice(n,1)}),[t]),{...t,toast:kM,dismiss:n=>id({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function jS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=jS(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():jS(t[s],null)}}}}function qn(...t){return b.useCallback(oP(...t),t)}function NM(t,e){const n=b.createContext(e),r=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return E.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function qc(t,e=[]){let n=[];function r(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=h=>{var _;const{scope:f,children:m,...I}=h,p=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,v=b.useMemo(()=>I,Object.values(I));return E.jsx(p.Provider,{value:v,children:m})};c.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[l])||a,I=b.useContext(m);if(I)return I;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,DM(s,...e)]}function DM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Md(t){const e=LM(t),n=b.forwardRef((r,s)=>{const{children:i,...o}=r,a=b.Children.toArray(i),l=a.find(MM);if(l){const c=l.props.children,d=a.map(h=>h===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:h);return E.jsx(e,{...o,ref:s,children:b.isValidElement(c)?b.cloneElement(c,void 0,d):null})}return E.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var OM=Md("Slot");function LM(t){const e=b.forwardRef((n,r)=>{const{children:s,...i}=n;if(b.isValidElement(s)){const o=UM(s),a=FM(i,s.props);return s.type!==b.Fragment&&(a.ref=r?oP(r,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aP=Symbol("radix.slottable");function VM(t){const e=({children:n})=>E.jsx(E.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=aP,e}function MM(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aP}function FM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function UM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function jM(t){const e=t+"CollectionProvider",[n,r]=qc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:_}=p,y=U.useRef(null),w=U.useRef(new Map).current;return E.jsx(s,{scope:v,itemMap:w,collectionRef:y,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=Md(a),c=U.forwardRef((p,v)=>{const{scope:_,children:y}=p,w=i(a,_),x=qn(v,w.collectionRef);return E.jsx(l,{ref:x,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Md(d),m=U.forwardRef((p,v)=>{const{scope:_,children:y,...w}=p,x=U.useRef(null),P=qn(v,x),L=i(d,_);return U.useEffect(()=>(L.itemMap.set(x,{ref:x,...w}),()=>void L.itemMap.delete(x))),E.jsx(f,{[h]:"",ref:P,children:y})});m.displayName=d;function I(p){const v=i(t+"CollectionConsumer",p);return U.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((L,A)=>w.indexOf(L.ref.current)-w.indexOf(A.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},I,r]}var $M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zt=$M.reduce((t,e)=>{const n=Md(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function lP(t,e){t&&gh.flushSync(()=>t.dispatchEvent(e))}function Xs(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function BM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var zM="DismissableLayer",nw="dismissableLayer.update",WM="dismissableLayer.pointerDownOutside",qM="dismissableLayer.focusOutside",$S,cP=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qp=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(cP),[d,h]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),I=qn(e,A=>h(A)),p=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=p.indexOf(v),y=d?p.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,x=y>=_,P=KM(A=>{const T=A.target,R=[...c.branches].some(C=>C.contains(T));!x||R||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},f),L=GM(A=>{const T=A.target;[...c.branches].some(C=>C.contains(T))||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},f);return BM(A=>{y===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},f),b.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&($S=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),BS(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=$S)}},[d,f,n,c]),b.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),BS())},[d,c]),b.useEffect(()=>{const A=()=>m({});return document.addEventListener(nw,A),()=>document.removeEventListener(nw,A)},[]),E.jsx(Zt.div,{...l,ref:I,style:{pointerEvents:w?x?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,P.onPointerDownCapture)})});qp.displayName=zM;var HM="DismissableLayerBranch",uP=b.forwardRef((t,e)=>{const n=b.useContext(cP),r=b.useRef(null),s=qn(e,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),E.jsx(Zt.div,{...t,ref:s})});uP.displayName=HM;function KM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){dP(WM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&dP(qM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function BS(){const t=new CustomEvent(nw);document.dispatchEvent(t)}function dP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?lP(s,i):s.dispatchEvent(i)}var QM=qp,YM=uP,Ri=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},JM="Portal",l0=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=b.useState(!1);Ri(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sP.createPortal(E.jsx(Zt.div,{...r,ref:e}),o):null});l0.displayName=JM;function XM(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var dl=t=>{const{present:e,children:n}=t,r=ZM(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=qn(r.ref,eF(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};dl.displayName="Presence";function ZM(t){const[e,n]=b.useState(),r=b.useRef(null),s=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=XM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=lf(r.current);i.current=a==="mounted"?c:"none"},[a]),Ri(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=lf(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ri(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const p=lf(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&p&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=m=>{m.target===e&&(i.current=lf(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function lf(t){return(t==null?void 0:t.animationName)||"none"}function eF(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tF=g_[" useInsertionEffect ".trim().toString()]||Ri;function c0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=nF({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=b.useCallback(d=>{var h;if(a){const f=rF(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function nF({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),s=b.useRef(n),i=b.useRef(e);return tF(()=>{i.current=e},[e]),b.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function rF(t){return typeof t=="function"}var sF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iF="VisuallyHidden",Hp=b.forwardRef((t,e)=>E.jsx(Zt.span,{...t,ref:e,style:{...sF,...t.style}}));Hp.displayName=iF;var oF=Hp,u0="ToastProvider",[d0,aF,lF]=jM("Toast"),[hP]=qc("Toast",[lF]),[cF,Kp]=hP(u0),fP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=b.useState(null),[c,d]=b.useState(0),h=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${u0}\`. Expected non-empty \`string\`.`),E.jsx(d0.Provider,{scope:e,children:E.jsx(cF,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};fP.displayName=u0;var mP="ToastViewport",uF=["F8"],rw="toast.viewportPause",sw="toast.viewportResume",pP=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=uF,label:s="Notifications ({hotkey})",...i}=t,o=Kp(mP,n),a=aF(n),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),f=qn(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=o.toastCount>0;b.useEffect(()=>{const v=_=>{var w;r.length!==0&&r.every(x=>_[x]||_.code===x)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),b.useEffect(()=>{const v=l.current,_=h.current;if(I&&v&&_){const y=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(rw);_.dispatchEvent(L),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(sw);_.dispatchEvent(L),o.isClosePausedRef.current=!1}},x=L=>{!v.contains(L.relatedTarget)&&w()},P=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",y),v.addEventListener("focusout",x),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",P),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",x),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",P),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[I,o.isClosePausedRef]);const p=b.useCallback(({tabbingDirection:v})=>{const y=a().map(w=>{const x=w.ref.current,P=[x,...SF(x)];return v==="forwards"?P:P.reverse()});return(v==="forwards"?y.reverse():y).flat()},[a]);return b.useEffect(()=>{const v=h.current;if(v){const _=y=>{var P,L,A;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const T=document.activeElement,R=y.shiftKey;if(y.target===v&&R){(P=c.current)==null||P.focus();return}const O=p({tabbingDirection:R?"backwards":"forwards"}),k=O.findIndex(z=>z===T);wy(O.slice(k+1))?y.preventDefault():R?(L=c.current)==null||L.focus():(A=d.current)==null||A.focus()}};return v.addEventListener("keydown",_),()=>v.removeEventListener("keydown",_)}},[a,p]),E.jsxs(YM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:I?void 0:"none"},children:[I&&E.jsx(iw,{ref:c,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});wy(v)}}),E.jsx(d0.Slot,{scope:n,children:E.jsx(Zt.ol,{tabIndex:-1,...i,ref:f})}),I&&E.jsx(iw,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});wy(v)}})]})});pP.displayName=mP;var gP="ToastFocusProxy",iw=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Kp(gP,n);return E.jsx(Hp,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});iw.displayName=gP;var yh="Toast",dF="toast.swipeStart",hF="toast.swipeMove",fF="toast.swipeCancel",mF="toast.swipeEnd",yP=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=c0({prop:r,defaultProp:s??!0,onChange:i,caller:yh});return E.jsx(dl,{present:n||a,children:E.jsx(yF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Xs(t.onPause),onResume:Xs(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});yP.displayName=yh;var[pF,gF]=hP(yh,{onClose(){}}),yF=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...I}=t,p=Kp(yh,n),[v,_]=b.useState(null),y=qn(e,z=>_(z)),w=b.useRef(null),x=b.useRef(null),P=s||p.duration,L=b.useRef(0),A=b.useRef(P),T=b.useRef(0),{onToastAdd:R,onToastRemove:C}=p,D=Xs(()=>{var re;(v==null?void 0:v.contains(document.activeElement))&&((re=p.viewport)==null||re.focus()),o()}),O=b.useCallback(z=>{!z||z===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(D,z))},[D]);b.useEffect(()=>{const z=p.viewport;if(z){const re=()=>{O(A.current),c==null||c()},de=()=>{const _e=new Date().getTime()-L.current;A.current=A.current-_e,window.clearTimeout(T.current),l==null||l()};return z.addEventListener(rw,de),z.addEventListener(sw,re),()=>{z.removeEventListener(rw,de),z.removeEventListener(sw,re)}}},[p.viewport,P,l,c,O]),b.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(P)},[i,P,p.isClosePausedRef,O]),b.useEffect(()=>(R(),()=>C()),[R,C]);const k=b.useMemo(()=>v?TP(v):null,[v]);return p.viewport?E.jsxs(E.Fragment,{children:[k&&E.jsx(vF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:k}),E.jsx(pF,{scope:n,onClose:D,children:gh.createPortal(E.jsx(d0.ItemSlot,{scope:n,children:E.jsx(QM,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||D(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:E.jsx(Zt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...I,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Ct(t.onPointerDown,z=>{z.button===0&&(w.current={x:z.clientX,y:z.clientY})}),onPointerMove:Ct(t.onPointerMove,z=>{if(!w.current)return;const re=z.clientX-w.current.x,de=z.clientY-w.current.y,_e=!!x.current,B=["left","right"].includes(p.swipeDirection),H=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Z=B?H(0,re):0,J=B?0:H(0,de),we=z.pointerType==="touch"?10:2,M={x:Z,y:J},ye={originalEvent:z,delta:M};_e?(x.current=M,cf(hF,h,ye,{discrete:!1})):zS(M,p.swipeDirection,we)?(x.current=M,cf(dF,d,ye,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(re)>we||Math.abs(de)>we)&&(w.current=null)}),onPointerUp:Ct(t.onPointerUp,z=>{const re=x.current,de=z.target;if(de.hasPointerCapture(z.pointerId)&&de.releasePointerCapture(z.pointerId),x.current=null,w.current=null,re){const _e=z.currentTarget,B={originalEvent:z,delta:re};zS(re,p.swipeDirection,p.swipeThreshold)?cf(mF,m,B,{discrete:!0}):cf(fF,f,B,{discrete:!0}),_e.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),vF=t=>{const{__scopeToast:e,children:n,...r}=t,s=Kp(yh,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return EF(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:E.jsx(l0,{asChild:!0,children:E.jsx(Hp,{...r,children:i&&E.jsxs(E.Fragment,{children:[s.label," ",n]})})})},wF="ToastTitle",vP=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return E.jsx(Zt.div,{...r,ref:e})});vP.displayName=wF;var _F="ToastDescription",wP=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return E.jsx(Zt.div,{...r,ref:e})});wP.displayName=_F;var _P="ToastAction",EP=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?E.jsx(SP,{altText:n,asChild:!0,children:E.jsx(h0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${_P}\`. Expected non-empty \`string\`.`),null)});EP.displayName=_P;var IP="ToastClose",h0=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=gF(IP,n);return E.jsx(SP,{asChild:!0,children:E.jsx(Zt.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});h0.displayName=IP;var SP=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return E.jsx(Zt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function TP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),IF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...TP(r))}}),e}function cf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?lP(s,i):s.dispatchEvent(i)}var zS=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function EF(t=()=>{}){const e=Xs(t);Ri(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function IF(t){return t.nodeType===t.ELEMENT_NODE}function SF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function wy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var TF=fP,bP=pP,AP=yP,xP=vP,RP=wP,PP=EP,CP=h0;function kP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=kP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function NP(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=kP(t))&&(r&&(r+=" "),r+=e);return r}const WS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,qS=NP,DP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return qS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=WS(d)||WS(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(I=>{let[p,v]=I;return Array.isArray(v)?v.includes({...i,...a}[p]):{...i,...a}[p]===v})?[...c,h,f]:c},[]);return qS(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),HS=t=>{const e=AF(t);return e.charAt(0).toUpperCase()+e.slice(1)},OP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),xF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...RF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OP("lucide",s),...!i&&!xF(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>b.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(PF,{ref:i,iconNode:e,className:OP(`lucide-${bF(HS(t))}`,`lucide-${t}`,r),...s}));return n.displayName=HS(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],kF=At("arrow-down",CF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],DF=At("arrow-right",NF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],LF=At("arrow-up-down",OF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],MF=At("badge-percent",VF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],UF=At("check",FF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$F=At("clock",jF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],zF=At("credit-card",BF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qF=At("eye-off",WF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KF=At("eye",HF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],QF=At("file-text",GF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],JF=At("house",YF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ZF=At("lock",XF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KS=At("log-out",eU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],GS=At("mail",tU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],rU=At("message-circle",nU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M5 12h14",key:"1ays0h"}]],iU=At("minus",sU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],QS=At("plus",oU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],_y=At("receipt",aU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],f0=At("refresh-ccw",lU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YS=At("settings",cU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],dU=At("shield",uU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],fU=At("square",hU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pU=At("trending-up",mU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],LP=At("triangle-alert",gU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vU=At("user",yU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],_U=At("wrench",wU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],m0=At("x",EU),p0="-",IU=t=>{const e=TU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(p0);return a[0]===""&&a.length!==1&&a.shift(),VP(a,e)||SU(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},VP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?VP(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(p0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},JS=/^\[(.+)\]$/,SU=t=>{if(JS.test(t)){const e=JS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},TU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return AU(Object.entries(t.classGroups),n).forEach(([i,o])=>{ow(o,r,i,e)}),r},ow=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:XS(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(bU(s)){ow(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ow(o,XS(e,i),n,r)})})},XS=(t,e)=>{let n=t;return e.split(p0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},bU=t=>t.isThemeGetter,AU=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,xU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},MP="!",RU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let _=a[v];if(c===0){if(_===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(_==="/"){h=v;continue}}_==="["?c++:_==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(MP),I=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:I,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:o}):o},PU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},CU=t=>({cache:xU(t.cacheSize),parseClassName:RU(t),...IU(t)}),kU=/\s+/,NU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(kU);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let I=!!m,p=r(I?f.substring(0,m):f);if(!p){if(!I){a=c+(a.length>0?" "+a:a);continue}if(p=r(f),!p){a=c+(a.length>0?" "+a:a);continue}I=!1}const v=PU(d).join(":"),_=h?v+MP:v,y=_+p;if(i.includes(y))continue;i.push(y);const w=s(p,I);for(let x=0;x<w.length;++x){const P=w[x];i.push(_+P)}a=c+(a.length>0?" "+a:a)}return a};function DU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=FP(e))&&(r&&(r+=" "),r+=n);return r}const FP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=FP(t[r]))&&(n&&(n+=" "),n+=e);return n};function OU(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=CU(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=NU(l,n);return s(l,d),d}return function(){return i(DU.apply(null,arguments))}}const Vt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},UP=/^\[(?:([a-z-]+):)?(.+)\]$/i,LU=/^\d+\/\d+$/,VU=new Set(["px","full","screen"]),MU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$U=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ci=t=>Xl(t)||VU.has(t)||LU.test(t),Ki=t=>Hc(t,"length",QU),Xl=t=>!!t&&!Number.isNaN(Number(t)),Ey=t=>Hc(t,"number",Xl),Pu=t=>!!t&&Number.isInteger(Number(t)),BU=t=>t.endsWith("%")&&Xl(t.slice(0,-1)),Je=t=>UP.test(t),Gi=t=>MU.test(t),zU=new Set(["length","size","percentage"]),WU=t=>Hc(t,zU,jP),qU=t=>Hc(t,"position",jP),HU=new Set(["image","url"]),KU=t=>Hc(t,HU,JU),GU=t=>Hc(t,"",YU),Cu=()=>!0,Hc=(t,e,n)=>{const r=UP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},QU=t=>FU.test(t)&&!UU.test(t),jP=()=>!1,YU=t=>jU.test(t),JU=t=>$U.test(t),XU=()=>{const t=Vt("colors"),e=Vt("spacing"),n=Vt("blur"),r=Vt("brightness"),s=Vt("borderColor"),i=Vt("borderRadius"),o=Vt("borderSpacing"),a=Vt("borderWidth"),l=Vt("contrast"),c=Vt("grayscale"),d=Vt("hueRotate"),h=Vt("invert"),f=Vt("gap"),m=Vt("gradientColorStops"),I=Vt("gradientColorStopPositions"),p=Vt("inset"),v=Vt("margin"),_=Vt("opacity"),y=Vt("padding"),w=Vt("saturate"),x=Vt("scale"),P=Vt("sepia"),L=Vt("skew"),A=Vt("space"),T=Vt("translate"),R=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Je,e],O=()=>[Je,e],k=()=>["",ci,Ki],z=()=>["auto",Xl,Je],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["solid","dashed","dotted","double","none"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Je],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[Xl,Je];return{cacheSize:500,separator:":",theme:{colors:[Cu],spacing:[ci,Ki],blur:["none","",Gi,Je],brightness:J(),borderColor:[t],borderRadius:["none","","full",Gi,Je],borderSpacing:O(),borderWidth:k(),contrast:J(),grayscale:H(),hueRotate:J(),invert:H(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[BU,Ki],inset:D(),margin:D(),opacity:J(),padding:O(),saturate:J(),scale:J(),sepia:H(),skew:J(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[Gi]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),Je]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pu,Je]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Pu,Je]}],"grid-cols":[{"grid-cols":[Cu]}],"col-start-end":[{col:["auto",{span:["full",Pu,Je]},Je]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Cu]}],"row-start-end":[{row:["auto",{span:[Pu,Je]},Je]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,e]}],"min-w":[{"min-w":[Je,e,"min","max","fit"]}],"max-w":[{"max-w":[Je,e,"none","full","min","max","fit","prose",{screen:[Gi]},Gi]}],h:[{h:[Je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Gi,Ki]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ey]}],"font-family":[{font:[Cu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",Xl,Ey]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ci,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ci,Ki]}],"underline-offset":[{"underline-offset":["auto",ci,Je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),qU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",WU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},KU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...de(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:de()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...de()]}],"outline-offset":[{"outline-offset":[ci,Je]}],"outline-w":[{outline:[ci,Ki]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[ci,Ki]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Gi,GU]}],"shadow-color":[{shadow:[Cu]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[..._e(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":_e()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Gi,Je]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Pu,Je]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ci,Ki,Ey]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ZU=OU(XU);function Hn(...t){return ZU(NP(t))}const e4=TF,$P=b.forwardRef(({className:t,...e},n)=>E.jsx(bP,{ref:n,className:Hn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$P.displayName=bP.displayName;const t4=DP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),BP=b.forwardRef(({className:t,variant:e,...n},r)=>E.jsx(AP,{ref:r,className:Hn(t4({variant:e}),t),...n}));BP.displayName=AP.displayName;const zP=b.forwardRef(({className:t,...e},n)=>E.jsx(PP,{ref:n,className:Hn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));zP.displayName=PP.displayName;const WP=b.forwardRef(({className:t,...e},n)=>E.jsx(CP,{ref:n,className:Hn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:E.jsx(m0,{className:"h-4 w-4"})}));WP.displayName=CP.displayName;const qP=b.forwardRef(({className:t,...e},n)=>E.jsx(xP,{ref:n,className:Hn("text-sm font-semibold",t),...e}));qP.displayName=xP.displayName;const HP=b.forwardRef(({className:t,...e},n)=>E.jsx(RP,{ref:n,className:Hn("text-sm opacity-90",t),...e}));HP.displayName=RP.displayName;function n4(){const{toasts:t}=a0();return E.jsxs(e4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return E.jsxs(BP,{...i,children:[E.jsxs("div",{className:"grid gap-1",children:[n&&E.jsx(qP,{children:n}),r&&E.jsx(HP,{children:r})]}),s,E.jsx(WP,{})]},e)}),E.jsx($P,{})]})}var Mm=["light","dark"],g0="(prefers-color-scheme: dark)",r4=typeof window>"u",y0=b.createContext(void 0),s4={setTheme:t=>{},themes:[]},KP=()=>{var t;return(t=b.useContext(y0))!=null?t:s4},i4=t=>b.useContext(y0)?t.children:b.createElement(a4,{...t}),o4=["light","dark"],a4=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=o4,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=b.useState(()=>ZS(s,o)),[m,I]=b.useState(()=>ZS(s)),p=l?Object.values(l):i,v=b.useCallback(x=>{let P=x;if(!P)return;x==="system"&&n&&(P=eT());let L=l?l[P]:P,A=e?c4():null,T=document.documentElement;if(a==="class"?(T.classList.remove(...p),L&&T.classList.add(L)):L?T.setAttribute(a,L):T.removeAttribute(a),r){let R=Mm.includes(o)?o:null,C=Mm.includes(P)?P:R;T.style.colorScheme=C}A==null||A()},[]),_=b.useCallback(x=>{let P=typeof x=="function"?x(x):x;f(P);try{localStorage.setItem(s,P)}catch{}},[t]),y=b.useCallback(x=>{let P=eT(x);I(P),h==="system"&&n&&!t&&v("system")},[h,t]);b.useEffect(()=>{let x=window.matchMedia(g0);return x.addListener(y),y(x),()=>x.removeListener(y)},[y]),b.useEffect(()=>{let x=P=>{if(P.key!==s)return;let L=P.newValue||o;_(L)};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[_]),b.useEffect(()=>{v(t??h)},[t,h]);let w=b.useMemo(()=>({theme:h,setTheme:_,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,_,t,m,n,i]);return b.createElement(y0.Provider,{value:w},b.createElement(l4,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:p,nonce:d}),c)},l4=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(I=>`'${I}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Mm.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(I,p=!1,v=!0)=>{let _=o?o[I]:I,y=p?I+"|| ''":`'${_}'`,w="";return s&&v&&!p&&Mm.includes(I)&&(w+=`d.style.colorScheme = '${I}';`),n==="class"?p||_?w+=`c.add(${y})`:w+="null":_&&(w+=`d[s](n,${y})`),w},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${g0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),ZS=(t,e)=>{if(r4)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},c4=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},eT=t=>(t||(t=window.matchMedia(g0)),t.matches?"dark":"light"),u4=t=>{switch(t){case"success":return f4;case"info":return p4;case"warning":return m4;case"error":return g4;default:return null}},d4=Array(12).fill(0),h4=({visible:t,className:e})=>U.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},U.createElement("div",{className:"sonner-spinner"},d4.map((n,r)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),f4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),m4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),p4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),g4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),y4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),v4=()=>{let[t,e]=U.useState(document.hidden);return U.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},aw=1,w4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:aw++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],U.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(E4(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||aw++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Sr=new w4,_4=(t,e)=>{let n=(e==null?void 0:e.id)||aw++;return Sr.addToast({title:t,...e,id:n}),n},E4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",I4=_4,S4=()=>Sr.toasts,T4=()=>Sr.getActiveToasts(),Jn=Object.assign(I4,{success:Sr.success,info:Sr.info,warning:Sr.warning,error:Sr.error,custom:Sr.custom,message:Sr.message,promise:Sr.promise,dismiss:Sr.dismiss,loading:Sr.loading},{getHistory:S4,getToasts:T4});function b4(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}b4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function uf(t){return t.label!==void 0}var A4=3,x4="32px",R4="16px",tT=4e3,P4=356,C4=14,k4=20,N4=200;function hs(...t){return t.filter(Boolean).join(" ")}function D4(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var O4=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:I,interacting:p,setHeights:v,visibleToasts:_,heights:y,index:w,toasts:x,expanded:P,removeToast:L,defaultRichColors:A,closeButton:T,style:R,cancelButtonStyle:C,actionButtonStyle:D,className:O="",descriptionClassName:k="",duration:z,position:re,gap:de,loadingIcon:_e,expandByDefault:B,classNames:H,icons:Z,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:we}=t,[M,ye]=U.useState(null),[Fe,$e]=U.useState(null),[Be,He]=U.useState(!1),[Oe,qe]=U.useState(!1),[Dt,gn]=U.useState(!1),[tn,vr]=U.useState(!1),[or,Cn]=U.useState(!1),[Le,yn]=U.useState(0),[Ot,nn]=U.useState(0),wr=U.useRef(m.duration||z||tT),$i=U.useRef(null),_r=U.useRef(null),ta=w===0,Ds=w+1<=_,Un=m.type,Dr=m.dismissible!==!1,rn=m.className||"",pl=m.descriptionClassName||"",oi=U.useMemo(()=>y.findIndex(G=>G.toastId===m.id)||0,[y,m.id]),ai=U.useMemo(()=>{var G;return(G=m.closeButton)!=null?G:T},[m.closeButton,T]),na=U.useMemo(()=>m.duration||z||tT,[m.duration,z]),es=U.useRef(0),Or=U.useRef(0),Y=U.useRef(0),j=U.useRef(null),[q,ne]=re.split("-"),oe=U.useMemo(()=>y.reduce((G,ce,he)=>he>=oi?G:G+ce.height,0),[y,oi]),se=v4(),pe=m.invert||f,X=Un==="loading";Or.current=U.useMemo(()=>oi*de+oe,[oi,oe]),U.useEffect(()=>{wr.current=na},[na]),U.useEffect(()=>{He(!0)},[]),U.useEffect(()=>{let G=_r.current;if(G){let ce=G.getBoundingClientRect().height;return nn(ce),v(he=>[{toastId:m.id,height:ce,position:m.position},...he]),()=>v(he=>he.filter(ue=>ue.toastId!==m.id))}},[v,m.id]),U.useLayoutEffect(()=>{if(!Be)return;let G=_r.current,ce=G.style.height;G.style.height="auto";let he=G.getBoundingClientRect().height;G.style.height=ce,nn(he),v(ue=>ue.find(le=>le.toastId===m.id)?ue.map(le=>le.toastId===m.id?{...le,height:he}:le):[{toastId:m.id,height:he,position:m.position},...ue])},[Be,m.title,m.description,v,m.id]);let ve=U.useCallback(()=>{qe(!0),yn(Or.current),v(G=>G.filter(ce=>ce.toastId!==m.id)),setTimeout(()=>{L(m)},N4)},[m,L,v,Or]);U.useEffect(()=>{if(m.promise&&Un==="loading"||m.duration===1/0||m.type==="loading")return;let G;return P||p||we&&se?(()=>{if(Y.current<es.current){let ce=new Date().getTime()-es.current;wr.current=wr.current-ce}Y.current=new Date().getTime()})():wr.current!==1/0&&(es.current=new Date().getTime(),G=setTimeout(()=>{var ce;(ce=m.onAutoClose)==null||ce.call(m,m),ve()},wr.current)),()=>clearTimeout(G)},[P,p,m,Un,we,se,ve]),U.useEffect(()=>{m.delete&&ve()},[ve,m.delete]);function xe(){var G,ce,he;return Z!=null&&Z.loading?U.createElement("div",{className:hs(H==null?void 0:H.loader,(G=m==null?void 0:m.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":Un==="loading"},Z.loading):_e?U.createElement("div",{className:hs(H==null?void 0:H.loader,(ce=m==null?void 0:m.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":Un==="loading"},_e):U.createElement(h4,{className:hs(H==null?void 0:H.loader,(he=m==null?void 0:m.classNames)==null?void 0:he.loader),visible:Un==="loading"})}return U.createElement("li",{tabIndex:0,ref:_r,className:hs(O,rn,H==null?void 0:H.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,H==null?void 0:H.default,H==null?void 0:H[Un],(n=m==null?void 0:m.classNames)==null?void 0:n[Un]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:A,"data-styled":!(m.jsx||m.unstyled||I),"data-mounted":Be,"data-promise":!!m.promise,"data-swiped":or,"data-removed":Oe,"data-visible":Ds,"data-y-position":q,"data-x-position":ne,"data-index":w,"data-front":ta,"data-swiping":Dt,"data-dismissible":Dr,"data-type":Un,"data-invert":pe,"data-swipe-out":tn,"data-swipe-direction":Fe,"data-expanded":!!(P||B&&Be),style:{"--index":w,"--toasts-before":w,"--z-index":x.length-w,"--offset":`${Oe?Le:Or.current}px`,"--initial-height":B?"auto":`${Ot}px`,...R,...m.style},onDragEnd:()=>{gn(!1),ye(null),j.current=null},onPointerDown:G=>{X||!Dr||($i.current=new Date,yn(Or.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(gn(!0),j.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,ce,he,ue;if(tn||!Dr)return;j.current=null;let le=Number(((G=_r.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Re=Number(((ce=_r.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ot=new Date().getTime()-((he=$i.current)==null?void 0:he.getTime()),St=M==="x"?le:Re,Tt=Math.abs(St)/ot;if(Math.abs(St)>=k4||Tt>.11){yn(Or.current),(ue=m.onDismiss)==null||ue.call(m,m),$e(M==="x"?le>0?"right":"left":Re>0?"down":"up"),ve(),vr(!0),Cn(!1);return}gn(!1),ye(null)},onPointerMove:G=>{var ce,he,ue,le;if(!j.current||!Dr||((ce=window.getSelection())==null?void 0:ce.toString().length)>0)return;let Re=G.clientY-j.current.y,ot=G.clientX-j.current.x,St=(he=t.swipeDirections)!=null?he:D4(re);!M&&(Math.abs(ot)>1||Math.abs(Re)>1)&&ye(Math.abs(ot)>Math.abs(Re)?"x":"y");let Tt={x:0,y:0};M==="y"?(St.includes("top")||St.includes("bottom"))&&(St.includes("top")&&Re<0||St.includes("bottom")&&Re>0)&&(Tt.y=Re):M==="x"&&(St.includes("left")||St.includes("right"))&&(St.includes("left")&&ot<0||St.includes("right")&&ot>0)&&(Tt.x=ot),(Math.abs(Tt.x)>0||Math.abs(Tt.y)>0)&&Cn(!0),(ue=_r.current)==null||ue.style.setProperty("--swipe-amount-x",`${Tt.x}px`),(le=_r.current)==null||le.style.setProperty("--swipe-amount-y",`${Tt.y}px`)}},ai&&!m.jsx?U.createElement("button",{"aria-label":J,"data-disabled":X,"data-close-button":!0,onClick:X||!Dr?()=>{}:()=>{var G;ve(),(G=m.onDismiss)==null||G.call(m,m)},className:hs(H==null?void 0:H.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=Z==null?void 0:Z.close)!=null?i:y4):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:U.createElement(U.Fragment,null,Un||m.icon||m.promise?U.createElement("div",{"data-icon":"",className:hs(H==null?void 0:H.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||xe():null,m.type!=="loading"?m.icon||(Z==null?void 0:Z[Un])||u4(Un):null):null,U.createElement("div",{"data-content":"",className:hs(H==null?void 0:H.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},U.createElement("div",{"data-title":"",className:hs(H==null?void 0:H.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?U.createElement("div",{"data-description":"",className:hs(k,pl,H==null?void 0:H.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&uf(m.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||C,onClick:G=>{var ce,he;uf(m.cancel)&&Dr&&((he=(ce=m.cancel).onClick)==null||he.call(ce,G),ve())},className:hs(H==null?void 0:H.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&uf(m.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||D,onClick:G=>{var ce,he;uf(m.action)&&((he=(ce=m.action).onClick)==null||he.call(ce,G),!G.defaultPrevented&&ve())},className:hs(H==null?void 0:H.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function nT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function L4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?R4:x4;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var V4=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:I=A4,toastOptions:p,dir:v=nT(),gap:_=C4,loadingIcon:y,icons:w,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:P}=t,[L,A]=U.useState([]),T=U.useMemo(()=>Array.from(new Set([r].concat(L.filter(we=>we.position).map(we=>we.position)))),[L,r]),[R,C]=U.useState([]),[D,O]=U.useState(!1),[k,z]=U.useState(!1),[re,de]=U.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),_e=U.useRef(null),B=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=U.useRef(null),Z=U.useRef(!1),J=U.useCallback(we=>{A(M=>{var ye;return(ye=M.find(Fe=>Fe.id===we.id))!=null&&ye.delete||Sr.dismiss(we.id),M.filter(({id:Fe})=>Fe!==we.id)})},[]);return U.useEffect(()=>Sr.subscribe(we=>{if(we.dismiss){A(M=>M.map(ye=>ye.id===we.id?{...ye,delete:!0}:ye));return}setTimeout(()=>{sP.flushSync(()=>{A(M=>{let ye=M.findIndex(Fe=>Fe.id===we.id);return ye!==-1?[...M.slice(0,ye),{...M[ye],...we},...M.slice(ye+1)]:[we,...M]})})})}),[]),U.useEffect(()=>{if(d!=="system"){de(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?de("dark"):de("light")),typeof window>"u")return;let we=window.matchMedia("(prefers-color-scheme: dark)");try{we.addEventListener("change",({matches:M})=>{de(M?"dark":"light")})}catch{we.addListener(({matches:ye})=>{try{de(ye?"dark":"light")}catch(Fe){console.error(Fe)}})}},[d]),U.useEffect(()=>{L.length<=1&&O(!1)},[L]),U.useEffect(()=>{let we=M=>{var ye,Fe;s.every($e=>M[$e]||M.code===$e)&&(O(!0),(ye=_e.current)==null||ye.focus()),M.code==="Escape"&&(document.activeElement===_e.current||(Fe=_e.current)!=null&&Fe.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",we),()=>document.removeEventListener("keydown",we)},[s]),U.useEffect(()=>{if(_e.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,Z.current=!1)}},[_e.current]),U.createElement("section",{ref:e,"aria-label":`${x} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((we,M)=>{var ye;let[Fe,$e]=we.split("-");return L.length?U.createElement("ol",{key:we,dir:v==="auto"?nT():v,tabIndex:-1,ref:_e,className:a,"data-sonner-toaster":!0,"data-theme":re,"data-y-position":Fe,"data-lifted":D&&L.length>1&&!i,"data-x-position":$e,style:{"--front-toast-height":`${((ye=R[0])==null?void 0:ye.height)||0}px`,"--width":`${P4}px`,"--gap":`${_}px`,...m,...L4(l,c)},onBlur:Be=>{Z.current&&!Be.currentTarget.contains(Be.relatedTarget)&&(Z.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:Be=>{Be.target instanceof HTMLElement&&Be.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,H.current=Be.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{k||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Be=>{Be.target instanceof HTMLElement&&Be.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},L.filter(Be=>!Be.position&&M===0||Be.position===we).map((Be,He)=>{var Oe,qe;return U.createElement(O4,{key:Be.id,icons:w,index:He,toast:Be,defaultRichColors:h,duration:(Oe=p==null?void 0:p.duration)!=null?Oe:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:I,closeButton:(qe=p==null?void 0:p.closeButton)!=null?qe:o,interacting:k,position:we,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:J,toasts:L.filter(Dt=>Dt.position==Be.position),heights:R.filter(Dt=>Dt.position==Be.position),setHeights:C,expandByDefault:i,gap:_,loadingIcon:y,expanded:D,pauseWhenPageIsHidden:P,swipeDirections:t.swipeDirections})})):null}))});const M4=({...t})=>{const{theme:e="system"}=KP();return E.jsx(V4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var F4=g_[" useId ".trim().toString()]||(()=>{}),U4=0;function Iy(t){const[e,n]=b.useState(F4());return Ri(()=>{n(r=>r??String(U4++))},[t]),t||(e?`radix-${e}`:"")}const j4=["top","right","bottom","left"],Mo=Math.min,Ur=Math.max,Fm=Math.round,df=Math.floor,Ys=t=>({x:t,y:t}),$4={left:"right",right:"left",bottom:"top",top:"bottom"},B4={start:"end",end:"start"};function lw(t,e,n){return Ur(t,Mo(e,n))}function Pi(t,e){return typeof t=="function"?t(e):t}function Ci(t){return t.split("-")[0]}function Kc(t){return t.split("-")[1]}function v0(t){return t==="x"?"y":"x"}function w0(t){return t==="y"?"height":"width"}const z4=new Set(["top","bottom"]);function Ws(t){return z4.has(Ci(t))?"y":"x"}function _0(t){return v0(Ws(t))}function W4(t,e,n){n===void 0&&(n=!1);const r=Kc(t),s=_0(t),i=w0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Um(o)),[o,Um(o)]}function q4(t){const e=Um(t);return[cw(t),e,cw(e)]}function cw(t){return t.replace(/start|end/g,e=>B4[e])}const rT=["left","right"],sT=["right","left"],H4=["top","bottom"],K4=["bottom","top"];function G4(t,e,n){switch(t){case"top":case"bottom":return n?e?sT:rT:e?rT:sT;case"left":case"right":return e?H4:K4;default:return[]}}function Q4(t,e,n,r){const s=Kc(t);let i=G4(Ci(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(cw)))),i}function Um(t){return t.replace(/left|right|bottom|top/g,e=>$4[e])}function Y4(t){return{top:0,right:0,bottom:0,left:0,...t}}function GP(t){return typeof t!="number"?Y4(t):{top:t,right:t,bottom:t,left:t}}function jm(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function iT(t,e,n){let{reference:r,floating:s}=t;const i=Ws(e),o=_0(e),a=w0(o),l=Ci(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Kc(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const J4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=iT(c,r,l),f=r,m={},I=0;for(let p=0;p<a.length;p++){const{name:v,fn:_}=a[p],{x:y,y:w,data:x,reset:P}=await _({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=y??d,h=w??h,m={...m,[v]:{...m[v],...x}},P&&I<=50&&(I++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:d,y:h}=iT(c,f,l)),p=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Fd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Pi(e,t),I=GP(m),v=a[f?h==="floating"?"reference":"floating":h],_=jm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},P=jm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(_.top-P.top+I.top)/x.y,bottom:(P.bottom-_.bottom+I.bottom)/x.y,left:(_.left-P.left+I.left)/x.x,right:(P.right-_.right+I.right)/x.x}}const X4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Pi(t,e)||{};if(c==null)return{};const h=GP(d),f={x:n,y:r},m=_0(s),I=w0(m),p=await o.getDimensions(c),v=m==="y",_=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",x=i.reference[I]+i.reference[m]-f[m]-i.floating[I],P=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=L?L[w]:0;(!A||!await(o.isElement==null?void 0:o.isElement(L)))&&(A=a.floating[w]||i.floating[I]);const T=x/2-P/2,R=A/2-p[I]/2-1,C=Mo(h[_],R),D=Mo(h[y],R),O=C,k=A-p[I]-D,z=A/2-p[I]/2+T,re=lw(O,z,k),de=!l.arrow&&Kc(s)!=null&&z!==re&&i.reference[I]/2-(z<O?C:D)-p[I]/2<0,_e=de?z<O?z-O:z-k:0;return{[m]:f[m]+_e,data:{[m]:re,centerOffset:z-re-_e,...de&&{alignmentOffset:_e}},reset:de}}}),Z4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:p=!0,...v}=Pi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Ci(s),y=Ws(a),w=Ci(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=f||(w||!p?[Um(a)]:q4(a)),L=I!=="none";!f&&L&&P.push(...Q4(a,p,I,x));const A=[a,...P],T=await Fd(e,v),R=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&R.push(T[_]),h){const z=W4(s,o,x);R.push(T[z[0]],T[z[1]])}if(C=[...C,{placement:s,overflows:R}],!R.every(z=>z<=0)){var D,O;const z=(((D=i.flip)==null?void 0:D.index)||0)+1,re=A[z];if(re&&(!(h==="alignment"?y!==Ws(re):!1)||C.every(B=>Ws(B.placement)===y?B.overflows[0]>0:!0)))return{data:{index:z,overflows:C},reset:{placement:re}};let de=(O=C.filter(_e=>_e.overflows[0]<=0).sort((_e,B)=>_e.overflows[1]-B.overflows[1])[0])==null?void 0:O.placement;if(!de)switch(m){case"bestFit":{var k;const _e=(k=C.filter(B=>{if(L){const H=Ws(B.placement);return H===y||H==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(H=>H>0).reduce((H,Z)=>H+Z,0)]).sort((B,H)=>B[1]-H[1])[0])==null?void 0:k[0];_e&&(de=_e);break}case"initialPlacement":de=a;break}if(s!==de)return{reset:{placement:de}}}return{}}}};function oT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function aT(t){return j4.some(e=>t[e]>=0)}const ej=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Pi(t,e);switch(r){case"referenceHidden":{const i=await Fd(e,{...s,elementContext:"reference"}),o=oT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aT(o)}}}case"escaped":{const i=await Fd(e,{...s,altBoundary:!0}),o=oT(i,n.floating);return{data:{escapedOffsets:o,escaped:aT(o)}}}default:return{}}}}},QP=new Set(["left","top"]);async function tj(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ci(n),a=Kc(n),l=Ws(n)==="y",c=QP.has(o)?-1:1,d=i&&l?-1:1,h=Pi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:I}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof I=="number"&&(m=a==="end"?I*-1:I),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const nj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await tj(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},rj=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:_,y}=v;return{x:_,y}}},...l}=Pi(t,e),c={x:n,y:r},d=await Fd(e,l),h=Ws(Ci(s)),f=v0(h);let m=c[f],I=c[h];if(i){const v=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=m+d[v],w=m-d[_];m=lw(y,m,w)}if(o){const v=h==="y"?"top":"left",_=h==="y"?"bottom":"right",y=I+d[v],w=I-d[_];I=lw(y,I,w)}const p=a.fn({...e,[f]:m,[h]:I});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:i,[h]:o}}}}}},sj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Pi(t,e),d={x:n,y:r},h=Ws(s),f=v0(h);let m=d[f],I=d[h];const p=Pi(a,e),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const w=f==="y"?"height":"width",x=i.reference[f]-i.floating[w]+v.mainAxis,P=i.reference[f]+i.reference[w]-v.mainAxis;m<x?m=x:m>P&&(m=P)}if(c){var _,y;const w=f==="y"?"width":"height",x=QP.has(Ci(s)),P=i.reference[h]-i.floating[w]+(x&&((_=o.offset)==null?void 0:_[h])||0)+(x?0:v.crossAxis),L=i.reference[h]+i.reference[w]+(x?0:((y=o.offset)==null?void 0:y[h])||0)-(x?v.crossAxis:0);I<P?I=P:I>L&&(I=L)}return{[f]:m,[h]:I}}}},ij=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Pi(t,e),d=await Fd(e,c),h=Ci(s),f=Kc(s),m=Ws(s)==="y",{width:I,height:p}=i.floating;let v,_;h==="top"||h==="bottom"?(v=h,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,v=f==="end"?"top":"bottom");const y=p-d.top-d.bottom,w=I-d.left-d.right,x=Mo(p-d[v],y),P=Mo(I-d[_],w),L=!e.middlewareData.shift;let A=x,T=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=y),L&&!f){const C=Ur(d.left,0),D=Ur(d.right,0),O=Ur(d.top,0),k=Ur(d.bottom,0);m?T=I-2*(C!==0||D!==0?C+D:Ur(d.left,d.right)):A=p-2*(O!==0||k!==0?O+k:Ur(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:A});const R=await o.getDimensions(a.floating);return I!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function Gp(){return typeof window<"u"}function Gc(t){return YP(t)?(t.nodeName||"").toLowerCase():"#document"}function Kr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ni(t){var e;return(e=(YP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function YP(t){return Gp()?t instanceof Node||t instanceof Kr(t).Node:!1}function As(t){return Gp()?t instanceof Element||t instanceof Kr(t).Element:!1}function Zs(t){return Gp()?t instanceof HTMLElement||t instanceof Kr(t).HTMLElement:!1}function lT(t){return!Gp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Kr(t).ShadowRoot}const oj=new Set(["inline","contents"]);function vh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=xs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!oj.has(s)}const aj=new Set(["table","td","th"]);function lj(t){return aj.has(Gc(t))}const cj=[":popover-open",":modal"];function Qp(t){return cj.some(e=>{try{return t.matches(e)}catch{return!1}})}const uj=["transform","translate","scale","rotate","perspective"],dj=["transform","translate","scale","rotate","perspective","filter"],hj=["paint","layout","strict","content"];function E0(t){const e=I0(),n=As(t)?xs(t):t;return uj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||dj.some(r=>(n.willChange||"").includes(r))||hj.some(r=>(n.contain||"").includes(r))}function fj(t){let e=Fo(t);for(;Zs(e)&&!wc(e);){if(E0(e))return e;if(Qp(e))return null;e=Fo(e)}return null}function I0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mj=new Set(["html","body","#document"]);function wc(t){return mj.has(Gc(t))}function xs(t){return Kr(t).getComputedStyle(t)}function Yp(t){return As(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Fo(t){if(Gc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||lT(t)&&t.host||ni(t);return lT(e)?e.host:e}function JP(t){const e=Fo(t);return wc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zs(e)&&vh(e)?e:JP(e)}function Ud(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=JP(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Kr(s);if(i){const a=uw(o);return e.concat(o,o.visualViewport||[],vh(s)?s:[],a&&n?Ud(a):[])}return e.concat(s,Ud(s,[],n))}function uw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function XP(t){const e=xs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Zs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Fm(n)!==i||Fm(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function S0(t){return As(t)?t:t.contextElement}function Zl(t){const e=S0(t);if(!Zs(e))return Ys(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=XP(e);let o=(i?Fm(n.width):n.width)/r,a=(i?Fm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const pj=Ys(0);function ZP(t){const e=Kr(t);return!I0()||!e.visualViewport?pj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Kr(t)?!1:e}function Xa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=S0(t);let o=Ys(1);e&&(r?As(r)&&(o=Zl(r)):o=Zl(t));const a=gj(i,n,r)?ZP(i):Ys(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Kr(i),m=r&&As(r)?Kr(r):r;let I=f,p=uw(I);for(;p&&r&&m!==I;){const v=Zl(p),_=p.getBoundingClientRect(),y=xs(p),w=_.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,x=_.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=w,c+=x,I=Kr(p),p=uw(I)}}return jm({width:d,height:h,x:l,y:c})}function Jp(t,e){const n=Yp(t).scrollLeft;return e?e.left+n:Xa(ni(t)).left+n}function eC(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Jp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function yj(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ni(r),a=e?Qp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Ys(1);const d=Ys(0),h=Zs(r);if((h||!h&&!i)&&((Gc(r)!=="body"||vh(o))&&(l=Yp(r)),Zs(r))){const m=Xa(r);c=Zl(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?eC(o,l):Ys(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function vj(t){return Array.from(t.getClientRects())}function wj(t){const e=ni(t),n=Yp(t),r=t.ownerDocument.body,s=Ur(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ur(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Jp(t);const a=-n.scrollTop;return xs(r).direction==="rtl"&&(o+=Ur(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const cT=25;function _j(t,e){const n=Kr(t),r=ni(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=I0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Jp(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,I=Math.abs(r.clientWidth-h.clientWidth-m);I<=cT&&(i-=I)}else c<=cT&&(i+=c);return{width:i,height:o,x:a,y:l}}const Ej=new Set(["absolute","fixed"]);function Ij(t,e){const n=Xa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Zs(t)?Zl(t):Ys(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function uT(t,e,n){let r;if(e==="viewport")r=_j(t,n);else if(e==="document")r=wj(ni(t));else if(As(e))r=Ij(e,n);else{const s=ZP(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return jm(r)}function tC(t,e){const n=Fo(t);return n===e||!As(n)||wc(n)?!1:xs(n).position==="fixed"||tC(n,e)}function Sj(t,e){const n=e.get(t);if(n)return n;let r=Ud(t,[],!1).filter(a=>As(a)&&Gc(a)!=="body"),s=null;const i=xs(t).position==="fixed";let o=i?Fo(t):t;for(;As(o)&&!wc(o);){const a=xs(o),l=E0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&Ej.has(s.position)||vh(o)&&!l&&tC(t,o))?r=r.filter(d=>d!==o):s=a,o=Fo(o)}return e.set(t,r),r}function Tj(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Qp(e)?[]:Sj(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=uT(e,d,s);return c.top=Ur(h.top,c.top),c.right=Mo(h.right,c.right),c.bottom=Mo(h.bottom,c.bottom),c.left=Ur(h.left,c.left),c},uT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function bj(t){const{width:e,height:n}=XP(t);return{width:e,height:n}}function Aj(t,e,n){const r=Zs(e),s=ni(e),i=n==="fixed",o=Xa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ys(0);function c(){l.x=Jp(s)}if(r||!r&&!i)if((Gc(e)!=="body"||vh(s))&&(a=Yp(e)),r){const m=Xa(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?eC(s,a):Ys(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Sy(t){return xs(t).position==="static"}function dT(t,e){if(!Zs(t)||xs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ni(t)===n&&(n=n.ownerDocument.body),n}function nC(t,e){const n=Kr(t);if(Qp(t))return n;if(!Zs(t)){let s=Fo(t);for(;s&&!wc(s);){if(As(s)&&!Sy(s))return s;s=Fo(s)}return n}let r=dT(t,e);for(;r&&lj(r)&&Sy(r);)r=dT(r,e);return r&&wc(r)&&Sy(r)&&!E0(r)?n:r||fj(t)||n}const xj=async function(t){const e=this.getOffsetParent||nC,n=this.getDimensions,r=await n(t.floating);return{reference:Aj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rj(t){return xs(t).direction==="rtl"}const Pj={convertOffsetParentRelativeRectToViewportRelativeRect:yj,getDocumentElement:ni,getClippingRect:Tj,getOffsetParent:nC,getElementRects:xj,getClientRects:vj,getDimensions:bj,getScale:Zl,isElement:As,isRTL:Rj};function rC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Cj(t,e){let n=null,r;const s=ni(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const I=df(h),p=df(s.clientWidth-(d+f)),v=df(s.clientHeight-(h+m)),_=df(d),w={rootMargin:-I+"px "+-p+"px "+-v+"px "+-_+"px",threshold:Ur(0,Mo(1,l))||1};let x=!0;function P(L){const A=L[0].intersectionRatio;if(A!==l){if(!x)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!rC(c,t.getBoundingClientRect())&&o(),x=!1}try{n=new IntersectionObserver(P,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,w)}n.observe(t)}return o(!0),i}function kj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=S0(t),d=s||i?[...c?Ud(c):[],...Ud(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=c&&a?Cj(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(_=>{let[y]=_;y&&y.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let I,p=l?Xa(t):null;l&&v();function v(){const _=Xa(t);p&&!rC(p,_)&&n(),p=_,I=requestAnimationFrame(v)}return n(),()=>{var _;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(I)}}const Nj=nj,Dj=rj,Oj=Z4,Lj=ij,Vj=ej,hT=X4,Mj=sj,Fj=(t,e,n)=>{const r=new Map,s={platform:Pj,...n},i={...s.platform,_c:r};return J4(t,e,{...s,platform:i})};var Uj=typeof document<"u",jj=function(){},Hf=Uj?b.useLayoutEffect:jj;function $m(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!$m(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!$m(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function sC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function fT(t,e){const n=sC(t);return Math.round(e*n)/n}function Ty(t){const e=b.useRef(t);return Hf(()=>{e.current=t}),e}function $j(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=b.useState(r);$m(f,r)||m(r);const[I,p]=b.useState(null),[v,_]=b.useState(null),y=b.useCallback(B=>{B!==L.current&&(L.current=B,p(B))},[]),w=b.useCallback(B=>{B!==A.current&&(A.current=B,_(B))},[]),x=i||I,P=o||v,L=b.useRef(null),A=b.useRef(null),T=b.useRef(d),R=l!=null,C=Ty(l),D=Ty(s),O=Ty(c),k=b.useCallback(()=>{if(!L.current||!A.current)return;const B={placement:e,strategy:n,middleware:f};D.current&&(B.platform=D.current),Fj(L.current,A.current,B).then(H=>{const Z={...H,isPositioned:O.current!==!1};z.current&&!$m(T.current,Z)&&(T.current=Z,gh.flushSync(()=>{h(Z)}))})},[f,e,n,D,O]);Hf(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[c]);const z=b.useRef(!1);Hf(()=>(z.current=!0,()=>{z.current=!1}),[]),Hf(()=>{if(x&&(L.current=x),P&&(A.current=P),x&&P){if(C.current)return C.current(x,P,k);k()}},[x,P,k,C,R]);const re=b.useMemo(()=>({reference:L,floating:A,setReference:y,setFloating:w}),[y,w]),de=b.useMemo(()=>({reference:x,floating:P}),[x,P]),_e=b.useMemo(()=>{const B={position:n,left:0,top:0};if(!de.floating)return B;const H=fT(de.floating,d.x),Z=fT(de.floating,d.y);return a?{...B,transform:"translate("+H+"px, "+Z+"px)",...sC(de.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:Z}},[n,a,de.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:k,refs:re,elements:de,floatingStyles:_e}),[d,k,re,de,_e])}const Bj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?hT({element:r.current,padding:s}).fn(n):{}:r?hT({element:r,padding:s}).fn(n):{}}}},zj=(t,e)=>({...Nj(t),options:[t,e]}),Wj=(t,e)=>({...Dj(t),options:[t,e]}),qj=(t,e)=>({...Mj(t),options:[t,e]}),Hj=(t,e)=>({...Oj(t),options:[t,e]}),Kj=(t,e)=>({...Lj(t),options:[t,e]}),Gj=(t,e)=>({...Vj(t),options:[t,e]}),Qj=(t,e)=>({...Bj(t),options:[t,e]});var Yj="Arrow",iC=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return E.jsx(Zt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:E.jsx("polygon",{points:"0,0 30,0 15,10"})})});iC.displayName=Yj;var Jj=iC;function oC(t){const[e,n]=b.useState(void 0);return Ri(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var T0="Popper",[aC,lC]=qc(T0),[Xj,cC]=aC(T0),uC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return E.jsx(Xj,{scope:e,anchor:r,onAnchorChange:s,children:n})};uC.displayName=T0;var dC="PopperAnchor",hC=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=cC(dC,n),o=b.useRef(null),a=qn(e,o),l=b.useRef(null);return b.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:E.jsx(Zt.div,{...s,ref:a})});hC.displayName=dC;var b0="PopperContent",[Zj,e3]=aC(b0),fC=b.forwardRef((t,e)=>{var Be,He,Oe,qe,Dt,gn;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:I,...p}=t,v=cC(b0,n),[_,y]=b.useState(null),w=qn(e,tn=>y(tn)),[x,P]=b.useState(null),L=oC(x),A=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,R=r+(i!=="center"?"-"+i:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(c)?c:[c],O=D.length>0,k={padding:C,boundary:D.filter(n3),altBoundary:O},{refs:z,floatingStyles:re,placement:de,isPositioned:_e,middlewareData:B}=$j({strategy:"fixed",placement:R,whileElementsMounted:(...tn)=>kj(...tn,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[zj({mainAxis:s+T,alignmentAxis:o}),l&&Wj({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?qj():void 0,...k}),l&&Hj({...k}),Kj({...k,apply:({elements:tn,rects:vr,availableWidth:or,availableHeight:Cn})=>{const{width:Le,height:yn}=vr.reference,Ot=tn.floating.style;Ot.setProperty("--radix-popper-available-width",`${or}px`),Ot.setProperty("--radix-popper-available-height",`${Cn}px`),Ot.setProperty("--radix-popper-anchor-width",`${Le}px`),Ot.setProperty("--radix-popper-anchor-height",`${yn}px`)}}),x&&Qj({element:x,padding:a}),r3({arrowWidth:A,arrowHeight:T}),f&&Gj({strategy:"referenceHidden",...k})]}),[H,Z]=gC(de),J=Xs(I);Ri(()=>{_e&&(J==null||J())},[_e,J]);const we=(Be=B.arrow)==null?void 0:Be.x,M=(He=B.arrow)==null?void 0:He.y,ye=((Oe=B.arrow)==null?void 0:Oe.centerOffset)!==0,[Fe,$e]=b.useState();return Ri(()=>{_&&$e(window.getComputedStyle(_).zIndex)},[_]),E.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:_e?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Fe,"--radix-popper-transform-origin":[(qe=B.transformOrigin)==null?void 0:qe.x,(Dt=B.transformOrigin)==null?void 0:Dt.y].join(" "),...((gn=B.hide)==null?void 0:gn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:E.jsx(Zj,{scope:n,placedSide:H,onArrowChange:P,arrowX:we,arrowY:M,shouldHideArrow:ye,children:E.jsx(Zt.div,{"data-side":H,"data-align":Z,...p,ref:w,style:{...p.style,animation:_e?void 0:"none"}})})})});fC.displayName=b0;var mC="PopperArrow",t3={top:"bottom",right:"left",bottom:"top",left:"right"},pC=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=e3(mC,r),o=t3[i.placedSide];return E.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:E.jsx(Jj,{...s,ref:n,style:{...s.style,display:"block"}})})});pC.displayName=mC;function n3(t){return t!==null}var r3=t=>({name:"transformOrigin",options:t,fn(e){var v,_,y;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=gC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,m=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let I="",p="";return c==="bottom"?(I=o?h:`${f}px`,p=`${-l}px`):c==="top"?(I=o?h:`${f}px`,p=`${r.floating.height+l}px`):c==="right"?(I=`${-l}px`,p=o?h:`${m}px`):c==="left"&&(I=`${r.floating.width+l}px`,p=o?h:`${m}px`),{data:{x:I,y:p}}}});function gC(t){const[e,n="center"]=t.split("-");return[e,n]}var SG=uC,s3=hC,i3=fC,o3=pC,[Xp]=qc("Tooltip",[lC]),A0=lC(),yC="TooltipProvider",a3=700,mT="tooltip.open",[l3,vC]=Xp(yC),wC=t=>{const{__scopeTooltip:e,delayDuration:n=a3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),E.jsx(l3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};wC.displayName=yC;var _C="Tooltip",[TG,Zp]=Xp(_C),dw="TooltipTrigger",c3=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Zp(dw,n),i=vC(dw,n),o=A0(n),a=b.useRef(null),l=qn(e,a,s.onTriggerChange),c=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),E.jsx(s3,{asChild:!0,...o,children:E.jsx(Zt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});c3.displayName=dw;var u3="TooltipPortal",[bG,d3]=Xp(u3,{forceMount:void 0}),_c="TooltipContent",EC=b.forwardRef((t,e)=>{const n=d3(_c,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Zp(_c,t.__scopeTooltip);return E.jsx(dl,{present:r||o.open,children:o.disableHoverableContent?E.jsx(IC,{side:s,...i,ref:e}):E.jsx(h3,{side:s,...i,ref:e})})}),h3=b.forwardRef((t,e)=>{const n=Zp(_c,t.__scopeTooltip),r=vC(_c,t.__scopeTooltip),s=b.useRef(null),i=qn(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=b.useCallback(()=>{a(null),h(!1)},[h]),m=b.useCallback((I,p)=>{const v=I.currentTarget,_={x:I.clientX,y:I.clientY},y=y3(_,v.getBoundingClientRect()),w=v3(_,y),x=w3(p.getBoundingClientRect()),P=E3([...w,...x]);a(P),h(!0)},[h]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(l&&d){const I=v=>m(v,d),p=v=>m(v,l);return l.addEventListener("pointerleave",I),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",I),d.removeEventListener("pointerleave",p)}}},[l,d,m,f]),b.useEffect(()=>{if(o){const I=p=>{const v=p.target,_={x:p.clientX,y:p.clientY},y=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),w=!_3(_,o);y?f():w&&(f(),c())};return document.addEventListener("pointermove",I),()=>document.removeEventListener("pointermove",I)}},[l,d,o,c,f]),E.jsx(IC,{...t,ref:i})}),[f3,m3]=Xp(_C,{isInside:!1}),p3=VM("TooltipContent"),IC=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Zp(_c,n),c=A0(n),{onClose:d}=l;return b.useEffect(()=>(document.addEventListener(mT,d),()=>document.removeEventListener(mT,d)),[d]),b.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),E.jsx(qp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:E.jsxs(i3,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[E.jsx(p3,{children:r}),E.jsx(f3,{scope:n,isInside:!0,children:E.jsx(oF,{id:l.contentId,role:"tooltip",children:s||r})})]})})});EC.displayName=_c;var SC="TooltipArrow",g3=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=A0(n);return m3(SC,n).isInside?null:E.jsx(o3,{...s,...r,ref:e})});g3.displayName=SC;function y3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function v3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function w3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function _3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function E3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),I3(e)}function I3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var S3=wC,TC=EC;const T3=S3,b3=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>E.jsx(TC,{ref:r,sideOffset:e,className:Hn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));b3.displayName=TC.displayName;var eg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},A3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},oo,d_,Tx,x3=(Tx=class{constructor(){at(this,oo,A3);at(this,d_,!1)}setTimeoutProvider(t){ze(this,oo,t)}setTimeout(t,e){return K(this,oo).setTimeout(t,e)}clearTimeout(t){K(this,oo).clearTimeout(t)}setInterval(t,e){return K(this,oo).setInterval(t,e)}clearInterval(t){K(this,oo).clearInterval(t)}},oo=new WeakMap,d_=new WeakMap,Tx),Bm=new x3;function R3(t){setTimeout(t,0)}var tg=typeof window>"u"||"Deno"in globalThis;function hr(){}function P3(t,e){return typeof t=="function"?t(e):t}function C3(t){return typeof t=="number"&&t>=0&&t!==1/0}function k3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function hw(t,e){return typeof t=="function"?t(e):t}function N3(t,e){return typeof t=="function"?t(e):t}function pT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==x0(o,e.options))return!1}else if(!$d(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function gT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(jd(e.options.mutationKey)!==jd(i))return!1}else if(!$d(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function x0(t,e){return((e==null?void 0:e.queryKeyHashFn)||jd)(t)}function jd(t){return JSON.stringify(t,(e,n)=>fw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function $d(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>$d(t[n],e[n])):!1}var D3=Object.prototype.hasOwnProperty;function bC(t,e){if(t===e)return t;const n=yT(t)&&yT(e);if(!n&&!(fw(t)&&fw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:D3.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=bC(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function AG(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function yT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function fw(t){if(!vT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!vT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vT(t){return Object.prototype.toString.call(t)==="[object Object]"}function O3(t){return new Promise(e=>{Bm.setTimeout(e,t)})}function L3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?bC(t,e):e}function V3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function M3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var R0=Symbol();function AC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===R0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function xG(t,e){return typeof t=="function"?t(...e):!!t}var La,ao,sc,bx,F3=(bx=class extends eg{constructor(){super();at(this,La);at(this,ao);at(this,sc);ze(this,sc,e=>{if(!tg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,ao)||this.setEventListener(K(this,sc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ao))==null||e.call(this),ze(this,ao,void 0))}setEventListener(e){var n;ze(this,sc,e),(n=K(this,ao))==null||n.call(this),ze(this,ao,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,La)!==e&&(ze(this,La,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,La)=="boolean"?K(this,La):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},La=new WeakMap,ao=new WeakMap,sc=new WeakMap,bx),xC=new F3;function U3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function j3(t){var n;let e;if((n=t.then(r=>(e=r,r),hr))==null||n.catch(hr),e!==void 0)return{data:e}}function RC(t){return t}function $3(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function B3(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(hr),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function z3(t){return t.state.isPaused}function W3(t){return t.state.status==="success"}function q3(t){return!0}function H3(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??z3,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[$3(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??W3,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??q3,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??RC,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[B3(f,o,i)]:[]);return{mutations:r,queries:a}}function K3(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??RC,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:m,promise:I,dehydratedAt:p})=>{var L,A;const v=I?j3(I):void 0,_=h.data===void 0?v==null?void 0:v.data:h.data,y=_===void 0?_:i(_);let w=s.get(f);const x=(w==null?void 0:w.state.status)==="pending",P=(w==null?void 0:w.state.fetchStatus)==="fetching";if(w){const T=v&&p!==void 0&&p>w.state.dataUpdatedAt;if(h.dataUpdatedAt>w.state.dataUpdatedAt||T){const{fetchStatus:R,...C}=h;w.setState({...C,data:y})}}else w=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(A=n==null?void 0:n.defaultOptions)==null?void 0:A.queries,queryKey:d,queryHash:f,meta:m},{...h,data:y,fetchStatus:"idle",status:y!==void 0?"success":h.status});I&&!x&&!P&&(p===void 0||p>w.state.dataUpdatedAt)&&w.fetch(void 0,{initialPromise:Promise.resolve(I).then(i)}).catch(hr)})}var G3=R3;function Q3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=G3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var fr=Q3(),ic,lo,oc,Ax,Y3=(Ax=class extends eg{constructor(){super();at(this,ic,!0);at(this,lo);at(this,oc);ze(this,oc,e=>{if(!tg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,lo)||this.setEventListener(K(this,oc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,lo))==null||e.call(this),ze(this,lo,void 0))}setEventListener(e){var n;ze(this,oc,e),(n=K(this,lo))==null||n.call(this),ze(this,lo,e(this.setOnline.bind(this)))}setOnline(e){K(this,ic)!==e&&(ze(this,ic,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,ic)}},ic=new WeakMap,lo=new WeakMap,oc=new WeakMap,Ax),zm=new Y3;function J3(t){return Math.min(1e3*2**t,3e4)}function PC(t){return(t??"online")==="online"?zm.isOnline():!0}var mw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function CC(t){let e=!1,n=0,r;const s=U3(),i=()=>s.status!=="pending",o=p=>{var v;if(!i()){const _=new mw(p);f(_),(v=t.onCancel)==null||v.call(t,_)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>xC.isFocused()&&(t.networkMode==="always"||zm.isOnline())&&t.canRun(),d=()=>PC(t.networkMode)&&t.canRun(),h=p=>{i()||(r==null||r(),s.resolve(p))},f=p=>{i()||(r==null||r(),s.reject(p))},m=()=>new Promise(p=>{var v;r=_=>{(i()||c())&&p(_)},(v=t.onPause)==null||v.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),I=()=>{if(i())return;let p;const v=n===0?t.initialPromise:void 0;try{p=v??t.fn()}catch(_){p=Promise.reject(_)}Promise.resolve(p).then(h).catch(_=>{var L;if(i())return;const y=t.retry??(tg?0:3),w=t.retryDelay??J3,x=typeof w=="function"?w(n,_):w,P=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,_);if(e||!P){f(_);return}n++,(L=t.onFail)==null||L.call(t,n,_),O3(x).then(()=>c()?void 0:m()).then(()=>{e?f(_):I()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?I():m().then(I),s)}}var Va,xx,kC=(xx=class{constructor(){at(this,Va)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),C3(this.gcTime)&&ze(this,Va,Bm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(tg?1/0:5*60*1e3))}clearGcTimeout(){K(this,Va)&&(Bm.clearTimeout(K(this,Va)),ze(this,Va,void 0))}},Va=new WeakMap,xx),Ma,ac,ns,Fa,On,lh,Ua,ms,ui,Rx,X3=(Rx=class extends kC{constructor(n){super();at(this,ms);at(this,Ma);at(this,ac);at(this,ns);at(this,Fa);at(this,On);at(this,lh);at(this,Ua);ze(this,Ua,!1),ze(this,lh,n.defaultOptions),this.setOptions(n.options),this.observers=[],ze(this,Fa,n.client),ze(this,ns,K(this,Fa).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ze(this,Ma,_T(this.options)),this.state=n.state??K(this,Ma),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,On))==null?void 0:n.promise}setOptions(n){if(this.options={...K(this,lh),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_T(this.options);r.data!==void 0&&(this.setState(wT(r.data,r.dataUpdatedAt)),ze(this,Ma,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,ns).remove(this)}setData(n,r){const s=L3(this.state.data,n,this.options);return Gn(this,ms,ui).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gn(this,ms,ui).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,On))==null?void 0:s.promise;return(i=K(this,On))==null||i.cancel(n),r?r.then(hr).catch(hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,Ma))}isActive(){return this.observers.some(n=>N3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===R0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>hw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!k3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,On))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,On))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,ns).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,On)&&(K(this,Ua)?K(this,On).cancel({revert:!0}):K(this,On).cancelRetry()),this.scheduleGc()),K(this,ns).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gn(this,ms,ui).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,I,p,v,_,y,w,x;if(this.state.fetchStatus!=="idle"&&((c=K(this,On))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,On))return K(this,On).continueRetry(),K(this,On).promise}if(n&&this.setOptions(n),!this.options.queryFn){const P=this.observers.find(L=>L.options.queryFn);P&&this.setOptions(P.options)}const s=new AbortController,i=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(ze(this,Ua,!0),s.signal)})},o=()=>{const P=AC(this.options,r),A=(()=>{const T={client:K(this,Fa),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return ze(this,Ua,!1),this.options.persister?this.options.persister(P,A,this):P(A)},l=(()=>{const P={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:K(this,Fa),state:this.state,fetchFn:o};return i(P),P})();(d=this.options.behavior)==null||d.onFetch(l,this),ze(this,ac,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gn(this,ms,ui).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ze(this,On,CC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:P=>{P instanceof mw&&P.revert&&this.setState({...K(this,ac),fetchStatus:"idle"}),s.abort()},onFail:(P,L)=>{Gn(this,ms,ui).call(this,{type:"failed",failureCount:P,error:L})},onPause:()=>{Gn(this,ms,ui).call(this,{type:"pause"})},onContinue:()=>{Gn(this,ms,ui).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const P=await K(this,On).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(I=(m=K(this,ns).config).onSuccess)==null||I.call(m,P,this),(v=(p=K(this,ns).config).onSettled)==null||v.call(p,P,this.state.error,this),P}catch(P){if(P instanceof mw){if(P.silent)return K(this,On).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw Gn(this,ms,ui).call(this,{type:"error",error:P}),(y=(_=K(this,ns).config).onError)==null||y.call(_,P,this),(x=(w=K(this,ns).config).onSettled)==null||x.call(w,this.state.data,P,this),P}finally{this.scheduleGc()}}},Ma=new WeakMap,ac=new WeakMap,ns=new WeakMap,Fa=new WeakMap,On=new WeakMap,lh=new WeakMap,Ua=new WeakMap,ms=new WeakSet,ui=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Z3(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...wT(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ze(this,ac,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),fr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,ns).notify({query:this,type:"updated",action:n})})},Rx);function Z3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function wT(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _T(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function ET(t){return{onFetch:(e,n)=>{var d,h,f,m,I;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((I=e.state.data)==null?void 0:I.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},_=AC(e.options,e.fetchOptions),y=async(w,x,P)=>{if(p)return Promise.reject();if(x==null&&w.pages.length)return Promise.resolve(w);const A=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:x,direction:P?"backward":"forward",meta:e.options.meta};return v(D),D})(),T=await _(A),{maxPages:R}=e.options,C=P?M3:V3;return{pages:C(w.pages,T,R),pageParams:C(w.pageParams,x,R)}};if(s&&i.length){const w=s==="backward",x=w?e6:IT,P={pages:i,pageParams:o},L=x(r,P);a=await y(P,L,w)}else{const w=t??i.length;do{const x=l===0?o[0]??r.initialPageParam:IT(r,a);if(l>0&&x==null)break;a=await y(a,x),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var p,v;return(v=(p=e.options).persister)==null?void 0:v.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function IT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function e6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ch,Fs,ur,ja,Us,Zi,Px,t6=(Px=class extends kC{constructor(n){super();at(this,Us);at(this,ch);at(this,Fs);at(this,ur);at(this,ja);ze(this,ch,n.client),this.mutationId=n.mutationId,ze(this,ur,n.mutationCache),ze(this,Fs,[]),this.state=n.state||n6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Fs).includes(n)||(K(this,Fs).push(n),this.clearGcTimeout(),K(this,ur).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ze(this,Fs,K(this,Fs).filter(r=>r!==n)),this.scheduleGc(),K(this,ur).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Fs).length||(this.state.status==="pending"?this.scheduleGc():K(this,ur).remove(this))}continue(){var n;return((n=K(this,ja))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,I,p,v,_,y,w,x,P,L,A,T,R,C;const r=()=>{Gn(this,Us,Zi).call(this,{type:"continue"})},s={client:K(this,ch),meta:this.options.meta,mutationKey:this.options.mutationKey};ze(this,ja,CC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,O)=>{Gn(this,Us,Zi).call(this,{type:"failed",failureCount:D,error:O})},onPause:()=>{Gn(this,Us,Zi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,ur).canRun(this)}));const i=this.state.status==="pending",o=!K(this,ja).canStart();try{if(i)r();else{Gn(this,Us,Zi).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=K(this,ur).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&Gn(this,Us,Zi).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const D=await K(this,ja).start();return await((f=(h=K(this,ur).config).onSuccess)==null?void 0:f.call(h,D,n,this.state.context,this,s)),await((I=(m=this.options).onSuccess)==null?void 0:I.call(m,D,n,this.state.context,s)),await((v=(p=K(this,ur).config).onSettled)==null?void 0:v.call(p,D,null,this.state.variables,this.state.context,this,s)),await((y=(_=this.options).onSettled)==null?void 0:y.call(_,D,null,n,this.state.context,s)),Gn(this,Us,Zi).call(this,{type:"success",data:D}),D}catch(D){try{throw await((x=(w=K(this,ur).config).onError)==null?void 0:x.call(w,D,n,this.state.context,this,s)),await((L=(P=this.options).onError)==null?void 0:L.call(P,D,n,this.state.context,s)),await((T=(A=K(this,ur).config).onSettled)==null?void 0:T.call(A,void 0,D,this.state.variables,this.state.context,this,s)),await((C=(R=this.options).onSettled)==null?void 0:C.call(R,void 0,D,n,this.state.context,s)),D}finally{Gn(this,Us,Zi).call(this,{type:"error",error:D})}}finally{K(this,ur).runNext(this)}}},ch=new WeakMap,Fs=new WeakMap,ur=new WeakMap,ja=new WeakMap,Us=new WeakSet,Zi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),fr.batch(()=>{K(this,Fs).forEach(s=>{s.onMutationUpdate(n)}),K(this,ur).notify({mutation:this,type:"updated",action:n})})},Px);function n6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fi,ps,uh,Cx,r6=(Cx=class extends eg{constructor(e={}){super();at(this,fi);at(this,ps);at(this,uh);this.config=e,ze(this,fi,new Set),ze(this,ps,new Map),ze(this,uh,0)}build(e,n,r){const s=new t6({client:e,mutationCache:this,mutationId:++zh(this,uh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){K(this,fi).add(e);const n=hf(e);if(typeof n=="string"){const r=K(this,ps).get(n);r?r.push(e):K(this,ps).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(K(this,fi).delete(e)){const n=hf(e);if(typeof n=="string"){const r=K(this,ps).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&K(this,ps).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=hf(e);if(typeof n=="string"){const r=K(this,ps).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=hf(e);if(typeof n=="string"){const s=(r=K(this,ps).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){fr.batch(()=>{K(this,fi).forEach(e=>{this.notify({type:"removed",mutation:e})}),K(this,fi).clear(),K(this,ps).clear()})}getAll(){return Array.from(K(this,fi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gT(n,r))}findAll(e={}){return this.getAll().filter(n=>gT(e,n))}notify(e){fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return fr.batch(()=>Promise.all(e.map(n=>n.continue().catch(hr))))}},fi=new WeakMap,ps=new WeakMap,uh=new WeakMap,Cx);function hf(t){var e;return(e=t.options.scope)==null?void 0:e.id}var js,kx,s6=(kx=class extends eg{constructor(e={}){super();at(this,js);this.config=e,ze(this,js,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??x0(s,n);let o=this.get(i);return o||(o=new X3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,js).has(e.queryHash)||(K(this,js).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,js).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,js).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,js).get(e)}getAll(){return[...K(this,js).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>pT(e,r)):n}notify(e){fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},js=new WeakMap,kx),on,co,uo,lc,cc,ho,uc,dc,Nx,i6=(Nx=class{constructor(t={}){at(this,on);at(this,co);at(this,uo);at(this,lc);at(this,cc);at(this,ho);at(this,uc);at(this,dc);ze(this,on,t.queryCache||new s6),ze(this,co,t.mutationCache||new r6),ze(this,uo,t.defaultOptions||{}),ze(this,lc,new Map),ze(this,cc,new Map),ze(this,ho,0)}mount(){zh(this,ho)._++,K(this,ho)===1&&(ze(this,uc,xC.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,on).onFocus())})),ze(this,dc,zm.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,on).onOnline())})))}unmount(){var t,e;zh(this,ho)._--,K(this,ho)===0&&((t=K(this,uc))==null||t.call(this),ze(this,uc,void 0),(e=K(this,dc))==null||e.call(this),ze(this,dc,void 0))}isFetching(t){return K(this,on).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,co).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,on).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=K(this,on).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(hw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return K(this,on).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,on).get(r.queryHash),i=s==null?void 0:s.state.data,o=P3(e,i);if(o!==void 0)return K(this,on).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return fr.batch(()=>K(this,on).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,on).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,on);fr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,on);return fr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=fr.batch(()=>K(this,on).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(hr).catch(hr)}invalidateQueries(t,e={}){return fr.batch(()=>(K(this,on).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=fr.batch(()=>K(this,on).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(hr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(hr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,on).build(this,e);return n.isStaleByTime(hw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hr).catch(hr)}fetchInfiniteQuery(t){return t.behavior=ET(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hr).catch(hr)}ensureInfiniteQueryData(t){return t.behavior=ET(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zm.isOnline()?K(this,co).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,on)}getMutationCache(){return K(this,co)}getDefaultOptions(){return K(this,uo)}setDefaultOptions(t){ze(this,uo,t)}setQueryDefaults(t,e){K(this,lc).set(jd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,lc).values()],n={};return e.forEach(r=>{$d(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){K(this,cc).set(jd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,cc).values()],n={};return e.forEach(r=>{$d(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=x0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===R0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,on).clear(),K(this,co).clear()}},on=new WeakMap,co=new WeakMap,uo=new WeakMap,lc=new WeakMap,cc=new WeakMap,ho=new WeakMap,uc=new WeakMap,dc=new WeakMap,Nx),NC=b.createContext(void 0),CG=t=>{const e=b.useContext(NC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},o6=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.jsx(NC.Provider,{value:t,children:e})),a6=["added","removed","updated"];function ST(t){return a6.includes(t)}async function l6({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();K3(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function TT({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:H3(t,r)};await e.persistClient(s)}function c6(t){const e=t.queryClient.getQueryCache().subscribe(r=>{ST(r.type)&&TT(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{ST(r.type)&&TT(t)});return()=>{e(),n()}}function u6(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=l6(t).then(()=>{e||(n=c6(t))});return[r,s]}function by(){}function d6({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:h6(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:by,restoreClient:by,removeClient:by}}function h6(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Bm.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bd(){return Bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bd.apply(this,arguments)}var po;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(po||(po={}));const bT="popstate";function f6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Wm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zd(s)}return DC(e,n,null,t)}function m6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=hl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Wm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:zd(i))}function r(s,i){P0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return DC(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function P0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p6(){return Math.random().toString(36).substr(2,8)}function AT(t,e){return{usr:t.state,key:t.key,idx:e}}function Wm(t,e,n,r){return n===void 0&&(n=null),Bd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hl(e):e,{state:n,key:e&&e.key||r||p6()})}function zd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function DC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=po.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Bd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=po.Pop;let v=d(),_=v==null?null:v-c;c=v,l&&l({action:a,location:p.location,delta:_})}function f(v,_){a=po.Push;let y=Wm(p.location,v,_);n&&n(y,v),c=d()+1;let w=AT(y,c),x=p.createHref(y);try{o.pushState(w,"",x)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(x)}i&&l&&l({action:a,location:p.location,delta:1})}function m(v,_){a=po.Replace;let y=Wm(p.location,v,_);n&&n(y,v),c=d();let w=AT(y,c),x=p.createHref(y);o.replaceState(w,"",x),i&&l&&l({action:a,location:p.location,delta:0})}function I(v){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:zd(v);return y=y.replace(/ $/,"%20"),pn(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let p={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(bT,h),l=v,()=>{s.removeEventListener(bT,h),l=null}},createHref(v){return e(s,v)},createURL:I,encodeLocation(v){let _=I(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(v){return o.go(v)}};return p}var xT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xT||(xT={}));function g6(t,e,n){return n===void 0&&(n="/"),y6(t,e,n)}function y6(t,e,n,r){let s=typeof e=="string"?hl(e):e,i=C0(s.pathname||"/",n);if(i==null)return null;let o=OC(t);v6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=C6(i);a=x6(o[l],c)}return a}function OC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=xo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(pn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),OC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:b6(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of LC(i.path))s(i,o,l)}),e}function LC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=LC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function v6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:A6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const w6=/^:[\w-]+$/,_6=3,E6=2,I6=1,S6=10,T6=-2,RT=t=>t==="*";function b6(t,e){let n=t.split("/"),r=n.length;return n.some(RT)&&(r+=T6),e&&(r+=E6),n.filter(s=>!RT(s)).reduce((s,i)=>s+(w6.test(i)?_6:i===""?I6:S6),r)}function A6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function x6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=R6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:xo([i,h.pathname]),pathnameBase:O6(xo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=xo([i,h.pathnameBase]))}return o}function R6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=P6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const I=a[h];return m&&!I?c[f]=void 0:c[f]=(I||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function P6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),P0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function C6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return P0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function C0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function k6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?hl(t):t;return{pathname:n?n.startsWith("/")?n:N6(n,e):e,search:L6(r),hash:V6(s)}}function N6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ay(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function k0(t,e){let n=D6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function N0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=hl(t):(s=Bd({},t),pn(!s.pathname||!s.pathname.includes("?"),Ay("?","pathname","search",s)),pn(!s.pathname||!s.pathname.includes("#"),Ay("#","pathname","hash",s)),pn(!s.search||!s.search.includes("#"),Ay("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=k6(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const xo=t=>t.join("/").replace(/\/\/+/g,"/"),O6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,V6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function M6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VC=["post","put","patch","delete"];new Set(VC);const F6=["get",...VC];new Set(F6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wd.apply(this,arguments)}const D0=b.createContext(null),U6=b.createContext(null),Yo=b.createContext(null),ng=b.createContext(null),Vi=b.createContext({outlet:null,matches:[],isDataRoute:!1}),MC=b.createContext(null);function j6(t,e){let{relative:n}=e===void 0?{}:e;Qc()||pn(!1);let{basename:r,navigator:s}=b.useContext(Yo),{hash:i,pathname:o,search:a}=UC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:xo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Qc(){return b.useContext(ng)!=null}function ri(){return Qc()||pn(!1),b.useContext(ng).location}function FC(t){b.useContext(Yo).static||b.useLayoutEffect(t)}function Yc(){let{isDataRoute:t}=b.useContext(Vi);return t?Z6():$6()}function $6(){Qc()||pn(!1);let t=b.useContext(D0),{basename:e,future:n,navigator:r}=b.useContext(Yo),{matches:s}=b.useContext(Vi),{pathname:i}=ri(),o=JSON.stringify(k0(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return FC(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=N0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:xo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function kG(){let{matches:t}=b.useContext(Vi),e=t[t.length-1];return e?e.params:{}}function UC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Yo),{matches:s}=b.useContext(Vi),{pathname:i}=ri(),o=JSON.stringify(k0(s,r.v7_relativeSplatPath));return b.useMemo(()=>N0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function B6(t,e){return z6(t,e)}function z6(t,e,n,r){Qc()||pn(!1);let{navigator:s}=b.useContext(Yo),{matches:i}=b.useContext(Vi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ri(),d;if(e){var h;let v=typeof e=="string"?hl(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||pn(!1),d=v}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let I=g6(t,{pathname:m}),p=G6(I&&I.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:xo([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:xo([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&p?b.createElement(ng.Provider,{value:{location:Wd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:po.Pop}},p):p}function W6(){let t=X6(),e=M6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const q6=b.createElement(W6,null);class H6 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Vi.Provider,{value:this.props.routeContext},b.createElement(MC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function K6(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(D0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Vi.Provider,{value:e},r)}function G6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||pn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,I=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||I){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,I=!1,p=null,v=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||q6,l&&(c<0&&f===0?(e$("route-fallback"),I=!0,v=null):c===f&&(I=!0,v=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),y=()=>{let w;return m?w=p:I?w=v:h.route.Component?w=b.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,b.createElement(K6,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(H6,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var jC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jC||{}),$C=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($C||{});function Q6(t){let e=b.useContext(D0);return e||pn(!1),e}function Y6(t){let e=b.useContext(U6);return e||pn(!1),e}function J6(t){let e=b.useContext(Vi);return e||pn(!1),e}function BC(t){let e=J6(),n=e.matches[e.matches.length-1];return n.route.id||pn(!1),n.route.id}function X6(){var t;let e=b.useContext(MC),n=Y6(),r=BC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Z6(){let{router:t}=Q6(jC.UseNavigateStable),e=BC($C.UseNavigateStable),n=b.useRef(!1);return FC(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Wd({fromRouteId:e},i)))},[t,e])}const PT={};function e$(t,e,n){PT[t]||(PT[t]=!0)}function zC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function NG(t){let{to:e,replace:n,state:r,relative:s}=t;Qc()||pn(!1);let{future:i,static:o}=b.useContext(Yo),{matches:a}=b.useContext(Vi),{pathname:l}=ri(),c=Yc(),d=N0(e,k0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Ae(t){pn(!1)}function WC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=po.Pop,navigator:i,static:o=!1,future:a}=t;Qc()&&pn(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Wd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=hl(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:I="default"}=r,p=b.useMemo(()=>{let v=C0(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:I},navigationType:s}},[l,d,h,f,m,I,s]);return p==null?null:b.createElement(Yo.Provider,{value:c},b.createElement(ng.Provider,{children:n,value:p}))}function CT(t){let{children:e,location:n}=t;return B6(pw(e),n)}new Promise(()=>{});function pw(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,pw(r.props.children,i));return}r.type!==Ae&&pn(!1),!r.props.index||!r.props.children||pn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=pw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gw(){return gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gw.apply(this,arguments)}function t$(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function n$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function r$(t,e){return t.button===0&&(!e||e==="_self")&&!n$(t)}function yw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function s$(t,e){let n=yw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const i$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],o$="6";try{window.__reactRouterVersion=o$}catch{}const a$="startTransition",qm=g_[a$];function l$(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=f6({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&qm?qm(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>zC(r),[r]),b.createElement(WC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function c$(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=m6({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(h=>{c&&qm?qm(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>zC(r),[r]),b.createElement(WC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const u$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h$=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=t$(e,i$),{basename:m}=b.useContext(Yo),I,p=!1;if(typeof c=="string"&&d$.test(c)&&(I=c,u$))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),P=C0(x.pathname,m);x.origin===w.origin&&P!=null?c=P+x.search+x.hash:p=!0}catch{}let v=j6(c,{relative:s}),_=f$(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(w){r&&r(w),w.defaultPrevented||_(w)}return b.createElement("a",gw({},f,{href:I||v,onClick:p||i?r:y,ref:n,target:l}))});var kT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kT||(kT={}));var NT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(NT||(NT={}));function f$(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Yc(),c=ri(),d=UC(t,{relative:o});return b.useCallback(h=>{if(r$(h,n)){h.preventDefault();let f=r!==void 0?r:zd(c)===zd(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function DG(t){let e=b.useRef(yw(t)),n=b.useRef(!1),r=ri(),s=b.useMemo(()=>s$(r.search,n.current?null:e.current),[r.search]),i=Yc(),o=b.useCallback((a,l)=>{const c=yw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const qC=b.createContext(void 0),m$=({children:t})=>{const[e,n]=b.useState("medium"),[r,s]=b.useState(!1),[i,o]=b.useState(!1);b.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),b.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),b.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return E.jsx(qC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},OG=()=>{const t=b.useContext(qC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},p$=DP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),ts=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?OM:"button";return E.jsx(o,{className:Hn(p$({variant:e,size:n,className:t})),ref:i,...s})});ts.displayName="Button";const vw=b.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),E.jsx("input",{type:e,className:Hn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});vw.displayName="Input";const g$=()=>{};var DT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},y$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new v$;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const I=c<<6&192|h;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class v$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w$=function(t){const e=HC(t);return O0.encodeByteArray(e,!0)},Hm=function(t){return w$(t).replace(/\./g,"")},KC=function(t){try{return O0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$=()=>GC().__FIREBASE_DEFAULTS__,E$=()=>{if(typeof process>"u"||typeof DT>"u")return;const t=DT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KC(t[1]);return e&&JSON.parse(e)},rg=()=>{try{return g$()||_$()||E$()||I$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S$=t=>{var e,n;return(n=(e=rg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QC=t=>{const e=S$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YC=()=>{var t;return(t=rg())==null?void 0:t.config},T$=t=>{var e;return(e=rg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hm(JSON.stringify(n)),Hm(JSON.stringify(o)),""].join(".")}const od={};function A$(){const t={prod:[],emulator:[]};for(const e of Object.keys(od))od[e]?t.emulator.push(e):t.prod.push(e);return t}function x$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let OT=!1;function JC(t,e){if(typeof window>"u"||typeof document>"u"||!Mi(window.location.host)||od[t]===e||od[t]||OT)return;od[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=A$().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{OT=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=x$(r),m=n("text"),I=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),v=document.getElementById(p)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),d(v,p);const x=c();l(y,_),w.append(y,I,v,x),document.body.appendChild(w)}i?(I.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function XC(){var e;const t=(e=rg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function k$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N$(){const t=Kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZC(){return!XC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ek(){return!XC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function V0(){try{return typeof indexedDB=="object"}catch{return!1}}function D$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="FirebaseError";class Cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=O$,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jc.prototype.create)}}class Jc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?L$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Cs(s,a,r)}}function L$(t,e){return t.replace(V$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const V$=/\{\$([^}]+)}/g;function Ec(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(LT(i)&&LT(o)){if(!Ec(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function LT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function M$(t,e){const n=new F$(t,e);return n.subscribe.bind(n)}class F${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");U$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xy),s.error===void 0&&(s.error=xy),s.complete===void 0&&(s.complete=xy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LG=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ww;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B$(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $$(t){return t===ua?void 0:t}function B$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const W$={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},q$=rt.INFO,H$={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},K$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=H$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sg{constructor(e){this.name=e,this._logLevel=q$,this._logHandler=K$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const G$=(t,e)=>e.some(n=>t instanceof n);let VT,MT;function Q$(){return VT||(VT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y$(){return MT||(MT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nk=new WeakMap,_w=new WeakMap,rk=new WeakMap,Ry=new WeakMap,M0=new WeakMap;function J$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ro(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nk.set(n,t)}).catch(()=>{}),M0.set(e,t),e}function X$(t){if(_w.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_w.set(t,e)}let Ew={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _w.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ro(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z$(t){Ew=t(Ew)}function e5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Py(this),e,...n);return rk.set(r,e.sort?e.sort():[e]),Ro(r)}:Y$().includes(t)?function(...e){return t.apply(Py(this),e),Ro(nk.get(this))}:function(...e){return Ro(t.apply(Py(this),e))}}function t5(t){return typeof t=="function"?e5(t):(t instanceof IDBTransaction&&X$(t),G$(t,Q$())?new Proxy(t,Ew):t)}function Ro(t){if(t instanceof IDBRequest)return J$(t);if(Ry.has(t))return Ry.get(t);const e=t5(t);return e!==t&&(Ry.set(t,e),M0.set(e,t)),e}const Py=t=>M0.get(t);function n5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ro(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ro(o.result),l.oldVersion,l.newVersion,Ro(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const r5=["get","getKey","getAll","getAllKeys","count"],s5=["put","add","delete","clear"],Cy=new Map;function FT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cy.get(e))return Cy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=s5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||r5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Cy.set(e,i),i}Z$(t=>({...t,get:(e,n,r)=>FT(e,n)||t.get(e,n,r),has:(e,n)=>!!FT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iw="@firebase/app",UT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new sg("@firebase/app"),a5="@firebase/app-compat",l5="@firebase/analytics-compat",c5="@firebase/analytics",u5="@firebase/app-check-compat",d5="@firebase/app-check",h5="@firebase/auth",f5="@firebase/auth-compat",m5="@firebase/database",p5="@firebase/data-connect",g5="@firebase/database-compat",y5="@firebase/functions",v5="@firebase/functions-compat",w5="@firebase/installations",_5="@firebase/installations-compat",E5="@firebase/messaging",I5="@firebase/messaging-compat",S5="@firebase/performance",T5="@firebase/performance-compat",b5="@firebase/remote-config",A5="@firebase/remote-config-compat",x5="@firebase/storage",R5="@firebase/storage-compat",P5="@firebase/firestore",C5="@firebase/ai",k5="@firebase/firestore-compat",N5="firebase",D5="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="[DEFAULT]",O5={[Iw]:"fire-core",[a5]:"fire-core-compat",[c5]:"fire-analytics",[l5]:"fire-analytics-compat",[d5]:"fire-app-check",[u5]:"fire-app-check-compat",[h5]:"fire-auth",[f5]:"fire-auth-compat",[m5]:"fire-rtdb",[p5]:"fire-data-connect",[g5]:"fire-rtdb-compat",[y5]:"fire-fn",[v5]:"fire-fn-compat",[w5]:"fire-iid",[_5]:"fire-iid-compat",[E5]:"fire-fcm",[I5]:"fire-fcm-compat",[S5]:"fire-perf",[T5]:"fire-perf-compat",[b5]:"fire-rc",[A5]:"fire-rc-compat",[x5]:"fire-gcs",[R5]:"fire-gcs-compat",[P5]:"fire-fst",[k5]:"fire-fst-compat",[C5]:"fire-vertex","fire-js":"fire-js",[N5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new Map,L5=new Map,Tw=new Map;function jT(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Tw.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Tw.set(e,t);for(const n of Km.values())jT(n,t);for(const n of L5.values())jT(n,t);return!0}function ig(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new Jc("app","Firebase",V5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=D5;function sk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Sw,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Po.create("bad-app-name",{appName:String(s)});if(n||(n=YC()),!n)throw Po.create("no-options");const i=Km.get(s);if(i){if(Ec(n,i.options)&&Ec(r,i.config))return i;throw Po.create("duplicate-app",{appName:s})}const o=new z$(s);for(const l of Tw.values())o.addComponent(l);const a=new M5(n,r,o);return Km.set(s,a),a}function ik(t=Sw){const e=Km.get(t);if(!e&&t===Sw&&YC())return sk();if(!e)throw Po.create("no-app",{appName:t});return e}function Gr(t,e,n){let r=O5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(o.join(" "));return}ei(new Rs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="firebase-heartbeat-database",U5=1,qd="firebase-heartbeat-store";let ky=null;function ok(){return ky||(ky=n5(F5,U5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Po.create("idb-open",{originalErrorMessage:t.message})})),ky}async function j5(t){try{const n=(await ok()).transaction(qd),r=await n.objectStore(qd).get(ak(t));return await n.done,r}catch(e){if(e instanceof Cs)ki.warn(e.message);else{const n=Po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function $T(t,e){try{const r=(await ok()).transaction(qd,"readwrite");await r.objectStore(qd).put(e,ak(t)),await r.done}catch(n){if(n instanceof Cs)ki.warn(n.message);else{const r=Po.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(r.message)}}}function ak(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=1024,B5=30;class z5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=BT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>B5){const o=H5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ki.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BT(),{heartbeatsToSend:r,unsentEntries:s}=W5(this._heartbeatsCache.heartbeats),i=Hm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ki.warn(n),""}}}function BT(){return new Date().toISOString().substring(0,10)}function W5(t,e=$5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),zT(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V0()?D$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await j5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $T(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $T(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zT(t){return Hm(JSON.stringify({version:2,heartbeats:t})).length}function H5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t){ei(new Rs("platform-logger",e=>new i5(e),"PRIVATE")),ei(new Rs("heartbeat",e=>new z5(e),"PRIVATE")),Gr(Iw,UT,t),Gr(Iw,UT,"esm2020"),Gr("fire-js","")}K5("");function lk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G5=lk,ck=new Jc("auth","Firebase",lk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new sg("@firebase/auth");function Q5(t,...e){Gm.logLevel<=rt.WARN&&Gm.warn(`Auth (${wh}): ${t}`,...e)}function Kf(t,...e){Gm.logLevel<=rt.ERROR&&Gm.error(`Auth (${wh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,...e){throw U0(t,...e)}function F0(t,...e){return U0(t,...e)}function uk(t,e,n){const r={...G5(),[e]:n};return new Jc("auth","Firebase",r).create(e,{appName:t.name})}function Co(t){return uk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ck.create(t,...e)}function st(t,e,...n){if(!t)throw U0(e,...n)}function yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kf(e),new Error(e)}function Qm(t,e){t||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function dk(){return WT()==="http:"||WT()==="https:"}function WT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dk()||C$()||"connection"in navigator)?navigator.onLine:!0}function X5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qm(n>e,"Short delay should be less than long delay!"),this.isMobile=R$()||k$()}get(){return J5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t,e){Qm(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nB=new _h(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function si(t,e,n,r,s={}){return fk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=tk({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return P$()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Mi(t.emulatorConfig.host)&&(c.credentials="include"),hk.fetch()(await mk(t,t.config.apiHost,n,a),c)})}async function fk(t,e,n){t._canInitEmulator=!1;const r={...eB,...e};try{const s=new sB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ff(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ff(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ff(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uk(t,d,c);Za(t,d)}}catch(s){if(s instanceof Cs)throw s;Za(t,"network-request-failed",{message:String(s)})}}async function og(t,e,n,r,s={}){const i=await si(t,e,n,r,s);return"mfaPendingCredential"in i&&Za(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function mk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Z5(t.config,s):`${t.config.apiScheme}://${s}`;return tB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(F0(this.auth,"network-request-failed")),nB.get())})}}function ff(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=F0(t,e,r);return s.customData._tokenResponse=n,s}function qT(t){return t!==void 0&&t.enterprise!==void 0}class iB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oB(t,e){return si(t,"GET","/v2/recaptchaConfig",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aB(t,e){return si(t,"POST","/v1/accounts:delete",e)}async function Ym(t,e){return si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lB(t,e=!1){const n=mt(t),r=await n.getIdToken(e),s=j0(r);st(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ad(Ny(s.auth_time)),issuedAtTime:ad(Ny(s.iat)),expirationTime:ad(Ny(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ny(t){return Number(t)*1e3}function j0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{const s=KC(n);return s?JSON.parse(s):(Kf("Failed to decode base64 JWT payload"),null)}catch(s){return Kf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function HT(t){const e=j0(t);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cs&&cB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jm(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Hd(t,Ym(e,{idToken:n}));st(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?pk(s.providerUserInfo):[],o=hB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new bw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function dB(t){const e=mt(t);await Jm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e){const n=await fk(t,{},async()=>{const r=tk({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await mk(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Mi(t.emulatorConfig.host)&&(l.credentials="include"),hk.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mB(t,e){return si(t,"POST","/v2/accounts:revokeToken",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){st(e.length!==0,"internal-error");const n=HT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ec;return r&&(st(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(st(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(st(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){st(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _s{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new uB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hd(this,this.stsTokenManager.getToken(this.auth,e));return st(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lB(this,e)}reload(){return dB(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await Hd(this,aB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:I,stsTokenManager:p}=n;st(h&&p,e,"internal-error");const v=ec.fromJSON(this.name,p);st(typeof h=="string",e,"internal-error"),Qi(r,e.name),Qi(s,e.name),st(typeof f=="boolean",e,"internal-error"),st(typeof m=="boolean",e,"internal-error"),Qi(i,e.name),Qi(o,e.name),Qi(a,e.name),Qi(l,e.name),Qi(c,e.name),Qi(d,e.name);const _=new _s({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return I&&Array.isArray(I)&&(_.providerData=I.map(y=>({...y}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new ec;s.updateFromServerResponse(n);const i=new _s({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Jm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];st(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?pk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ec;a.updateFromIdToken(r);const l=new _s({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new bw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new Map;function ba(t){Qm(t instanceof Function,"Expected a class definition");let e=KT.get(t);return e?(Qm(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gk.type="NONE";const Aw=gk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e,n){return`firebase:${t}:${e}:${n}`}class tc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Dy(this.userKey,s.apiKey,i),this.fullPersistenceKey=Dy("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ym(this.auth,{idToken:e}).catch(()=>{});return n?_s._fromGetAccountInfoResponse(this.auth,n,e):null}return _s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tc(ba(Aw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ba(Aw);const o=Dy(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Ym(e,{idToken:d}).catch(()=>{});if(!f)break;h=await _s._fromGetAccountInfoResponse(e,f,d)}else h=_s._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new tc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new tc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wk(e))return"Blackberry";if(_k(e))return"Webos";if(gB(e))return"Safari";if((e.includes("chrome/")||yB(e))&&!e.includes("edge/"))return"Chrome";if(vk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pB(t=Kn()){return/firefox\//i.test(t)}function gB(t=Kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yB(t=Kn()){return/crios\//i.test(t)}function yk(t=Kn()){return/iemobile/i.test(t)}function vk(t=Kn()){return/android/i.test(t)}function wk(t=Kn()){return/blackberry/i.test(t)}function _k(t=Kn()){return/webos/i.test(t)}function vB(t=Kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wB(){return N$()&&document.documentMode===10}function _B(t=Kn()){return vB(t)||vk(t)||_k(t)||wk(t)||/windows phone/i.test(t)||yk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t,e=[]){let n;switch(t){case"Browser":n=GT(Kn());break;case"Worker":n=`${GT(Kn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e={}){return si(t,"GET","/v2/passwordPolicy",Fi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=6;class TB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??SB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QT(this),this.idTokenSubscription=new QT(this),this.beforeStateQueue=new EB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ck,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ba(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ym(this,{idToken:e}),r=await _s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(jr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(Co(this));const n=e?mt(e):null;return n&&st(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IB(this),n=new TB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ba(e)||this._popupRedirectResolver;st(n,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[ba(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ek(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Q5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xc(t){return mt(t)}class QT{constructor(e){this.auth=e,this.observer=null,this.addObserver=M$(n=>this.observer=n)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AB(t){$0=t}function xB(t){return $0.loadJS(t)}function RB(){return $0.recaptchaEnterpriseScript}class PB{constructor(){this.enterprise=new CB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kB="recaptcha-enterprise",Ik="NO_RECAPTCHA";class NB{constructor(e){this.type=kB,this.auth=Xc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{oB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new iB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;qT(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(Ik)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&qT(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=RB();l.length!==0&&(l+=a),xB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function YT(t,e,n,r=!1,s=!1){const i=new NB(t);let o;if(s)o=Ik;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xm(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await YT(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await YT(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(t,e){const n=ig(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ec(i,e??{}))return s;Za(s,"already-initialized")}return n.initialize({options:e})}function OB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ba);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function VB(t,e){return si(t,"POST","/v1/accounts:update",e)}async function MB(t,e){return si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,e){return og(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))}async function UB(t,e){return si(t,"POST","/v1/accounts:sendOobCode",Fi(t,e))}async function jB(t,e){return UB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){return og(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}async function BB(t,e){return og(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends LB{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Kd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,n,"signInWithPassword",FB);case"emailLink":return $B(e,{email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,r,"signUpPassword",MB);case"emailLink":return BB(e,{idToken:n,email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WB(t){const e=Bu(zu(t)).link,n=e?Bu(zu(e)).deep_link_id:null,r=Bu(zu(t)).deep_link_id;return(r?Bu(zu(r)).link:null)||r||n||e||t}class B0{constructor(e){const n=Bu(zu(e)),r=n.apiKey??null,s=n.oobCode??null,i=zB(n.mode??null);st(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=WB(e);try{return new B0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.providerId=Zc.PROVIDER_ID}static credential(e,n){return Kd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=B0.parseLink(n);return st(r,"argument-error"),Kd._fromEmailAndCode(e,r.code,r.tenantId)}}Zc.PROVIDER_ID="password";Zc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e){return og(t,"POST","/v1/accounts:signUp",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await _s._fromIdTokenResponse(e,r,s),o=JT(r);return new Ic({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=JT(r);return new Ic({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function JT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends Cs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zm(e,n,r,s)}}function Sk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zm._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(t,e,n=!1){const{auth:r}=t;if(jr(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const i=await Hd(t,Sk(r,s,e,t),n);st(i.idToken,r,"internal-error");const o=j0(i.idToken);st(o,r,"internal-error");const{sub:a}=o;return st(t.uid===a,r,"user-mismatch"),Ic._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Za(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e,n=!1){if(jr(t.app))return Promise.reject(Co(t));const r="signIn",s=await Sk(t,r,e),i=await Ic._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function GB(t,e){return KB(Xc(t),e)}async function VG(t,e){return HB(mt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t){const e=Xc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QB(t,e,n){const r=Xc(t);await Xm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jB)}async function XT(t,e,n){if(jr(t.app))return Promise.reject(Co(t));const r=Xc(t),o=await Xm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Tk(t),l}),a=await Ic._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YB(t,e,n){return jr(t.app)?Promise.reject(Co(t)):GB(mt(t),Zc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Tk(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JB(t,e){return si(t,"POST","/v1/accounts:createAuthUri",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(t,e){const n=dk()?Y5():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await JB(mt(t),r);return s||[]}function MG(t,e){return ZB(mt(t),null,e)}async function ZB(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Hd(t,VB(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t,e){return mt(t).setPersistence(e)}function t9(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function ZT(t){return mt(t).signOut()}const eb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eb,"1"),this.storage.removeItem(eb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=1e3,r9=10;class Ak extends bk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_B(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);wB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,r9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},n9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ak.type="LOCAL";const xk=Ak;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk extends bk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Rk.type="SESSION";const s9=Rk;new _h(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _h(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _h(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _h(5e3,15e3);var tb="@firebase/auth",nb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a9(t){ei(new Rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;st(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ek(t)},c=new bB(r,s,i,l);return OB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new Rs("auth-internal",e=>{const n=Xc(e.getProvider("auth").getImmediate());return(r=>new i9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gr(tb,nb,o9(t)),Gr(tb,nb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=5*60;T$("authIdTokenMaxAge");function c9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}AB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=F0("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",c9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a9("Browser");var u9="firebase",d9="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr(u9,d9,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=new Map,f9={activated:!1,tokenObservers:[]},m9={initialized:!1,enabled:!1};function Ps(t){return h9.get(t)||{...f9}}function Pk(){return m9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="https://content-firebaseappcheck.googleapis.com/v1";const g9="exchangeDebugToken",rb={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},FG=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ww,this.pending.promise.catch(n=>{}),await v9(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ww,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function v9(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},go=new Jc("appCheck","AppCheck",w9);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){if(!Ps(t).activated)throw go.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw go.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw go.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw go.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw go.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function Nk(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${p9}/projects/${n}/apps/${r}:${g9}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="firebase-app-check-database",E9=1,xw="firebase-app-check-store";let mf=null;function I9(){return mf||(mf=new Promise((t,e)=>{try{const n=indexedDB.open(_9,E9);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(go.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(xw,{keyPath:"compositeKey"})}}}catch(n){e(go.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),mf)}function S9(t,e){return T9(b9(t),e)}async function T9(t,e){const r=(await I9()).transaction(xw,"readwrite"),i=r.objectStore(xw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(go.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function b9(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new sg("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){return V0()?S9(t,e).catch(n=>{Wu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){return Pk().enabled}async function Ok(){const t=Pk();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9={error:"UNKNOWN_ERROR"};function x9(t){return O0.encodeString(JSON.stringify(t),!1)}async function Rw(t,e=!1,n=!1){const r=t.app;Ck(r);const s=Ps(r);let i=s.token,o;if(i&&!qu(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(qu(c)?i=c:await Oy(r,void 0))}if(!e&&i&&qu(i))return{token:i.token};let a=!1;if(Dk())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=kk(Nk(r,await Ok()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Oy(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Wu.warn(c.message):n&&Wu.error(c),Ly(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Ps(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Wu.warn(c.message):n&&Wu.error(c),o=c}let l;return i?o?qu(i)?l={token:i.token,internalError:o}:l=Ly(o):(l={token:i.token},s.token=i,await Oy(r,i)):l=Ly(o),a&&k9(r,l),l}async function R9(t){const e=t.app;Ck(e);const{provider:n}=Ps(e);if(Dk()){const r=await Ok(),{token:s}=await kk(Nk(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function P9(t,e,n,r){const{app:s}=t,i=Ps(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&qu(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),sb(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>sb(t))}function Lk(t,e){const n=Ps(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function sb(t){const{app:e}=t,n=Ps(e);let r=n.tokenRefresher;r||(r=C9(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function C9(t){const{app:e}=t;return new y9(async()=>{const n=Ps(e);let r;if(n.token?r=await Rw(t,!0):r=await Rw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ps(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},rb.RETRIAL_MIN_WAIT,rb.RETRIAL_MAX_WAIT)}function k9(t,e){const n=Ps(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qu(t){return t.expireTimeMillis-Date.now()>0}function Ly(t){return{token:x9(A9),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ps(this.app);for(const n of e)Lk(this.app,n.next);return Promise.resolve()}}function D9(t,e){return new N9(t,e)}function O9(t){return{getToken:e=>Rw(t,e),getLimitedUseToken:()=>R9(t),addTokenListener:e=>P9(t,"INTERNAL",e),removeTokenListener:e=>Lk(t.app,e)}}const L9="@firebase/app-check",V9="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="app-check",ib="app-check-internal";function F9(){ei(new Rs(M9,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return D9(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(ib).initialize()})),ei(new Rs(ib,t=>{const e=t.getProvider("app-check").getImmediate();return O9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gr(L9,V9)}F9();var ob=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,Vk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function R(){}R.prototype=T.prototype,A.F=T.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(C,D,O){for(var k=Array(arguments.length-2),z=2;z<arguments.length;z++)k[z-2]=arguments[z];return T.prototype[D].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,R){R||(R=0);const C=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)C[D]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(D=0;D<16;++D)C[D]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=A.g[0],R=A.g[1],D=A.g[2];let O=A.g[3],k;k=T+(O^R&(D^O))+C[0]+3614090360&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[1]+3905402710&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[2]+606105819&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[3]+3250441966&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(O^R&(D^O))+C[4]+4118548399&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[5]+1200080426&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[6]+2821735955&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[7]+4249261313&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(O^R&(D^O))+C[8]+1770035416&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[9]+2336552879&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[10]+4294925233&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[11]+2304563134&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(O^R&(D^O))+C[12]+1804603682&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[13]+4254626195&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[14]+2792965006&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[15]+1236535329&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(D^O&(R^D))+C[1]+4129170786&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[6]+3225465664&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[11]+643717713&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[0]+3921069994&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(D^O&(R^D))+C[5]+3593408605&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[10]+38016083&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[15]+3634488961&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[4]+3889429448&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(D^O&(R^D))+C[9]+568446438&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[14]+3275163606&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[3]+4107603335&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[8]+1163531501&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(D^O&(R^D))+C[13]+2850285829&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[2]+4243563512&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[7]+1735328473&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[12]+2368359562&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(R^D^O)+C[5]+4294588738&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[8]+2272392833&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[11]+1839030562&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[14]+4259657740&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(R^D^O)+C[1]+2763975236&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[4]+1272893353&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[7]+4139469664&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[10]+3200236656&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(R^D^O)+C[13]+681279174&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[0]+3936430074&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[3]+3572445317&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[6]+76029189&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(R^D^O)+C[9]+3654602809&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[12]+3873151461&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[15]+530742520&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[2]+3299628645&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(D^(R|~O))+C[0]+4096336452&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[7]+1126891415&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[14]+2878612391&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[5]+4237533241&4294967295,R=D+(k<<21&4294967295|k>>>11),k=T+(D^(R|~O))+C[12]+1700485571&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[3]+2399980690&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[10]+4293915773&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[1]+2240044497&4294967295,R=D+(k<<21&4294967295|k>>>11),k=T+(D^(R|~O))+C[8]+1873313359&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[15]+4264355552&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[6]+2734768916&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[13]+1309151649&4294967295,R=D+(k<<21&4294967295|k>>>11),k=T+(D^(R|~O))+C[4]+4149444226&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[11]+3174756917&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[2]+718787259&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+O&4294967295}r.prototype.v=function(A,T){T===void 0&&(T=A.length);const R=T-this.blockSize,C=this.C;let D=this.h,O=0;for(;O<T;){if(D==0)for(;O<=R;)s(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<T;)if(C[D++]=A.charCodeAt(O++),D==this.blockSize){s(this,C),D=0;break}}else for(;O<T;)if(C[D++]=A[O++],D==this.blockSize){s(this,C),D=0;break}}this.h=D,this.o+=T},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)A[T++]=this.g[R]>>>C&255;return A};function i(A,T){var R=a;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=T(A)}function o(A,T){this.h=T;const R=[];let C=!0;for(let D=A.length-1;D>=0;D--){const O=A[D]|0;C&&O==T||(R[D]=O,C=!1)}this.g=R}var a={};function l(A){return-128<=A&&A<128?i(A,function(T){return new o([T|0],T<0?-1:0)}):new o([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(A<0)return v(c(-A));const T=[];let R=1;for(let C=0;A>=R;C++)T[C]=A/R|0,R*=4294967296;return new o(T,0)}function d(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return v(d(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(T,8));let C=h;for(let O=0;O<A.length;O+=8){var D=Math.min(8,A.length-O);const k=parseInt(A.substring(O,O+D),T);D<8?(D=c(Math.pow(T,D)),C=C.j(D).add(c(k))):(C=C.j(R),C=C.add(c(k)))}return C}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(p(this))return-v(this).m();let A=0,T=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);A+=(C>=0?C:4294967296+C)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I(this))return"0";if(p(this))return"-"+v(this).toString(A);const T=c(Math.pow(A,6));var R=this;let C="";for(;;){const D=x(R,T).g;R=_(R,D.j(T));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=D,I(R))return O+C;for(;O.length<6;)O="0"+O;C=O+C}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function I(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function p(A){return A.h==-1}t.l=function(A){return A=_(this,A),p(A)?-1:I(A)?0:1};function v(A){const T=A.g.length,R=[];for(let C=0;C<T;C++)R[C]=~A.g[C];return new o(R,~A.h).add(f)}t.abs=function(){return p(this)?v(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),R=[];let C=0;for(let D=0;D<=T;D++){let O=C+(this.i(D)&65535)+(A.i(D)&65535),k=(O>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);C=k>>>16,O&=65535,k&=65535,R[D]=k<<16|O}return new o(R,R[R.length-1]&-2147483648?-1:0)};function _(A,T){return A.add(v(T))}t.j=function(A){if(I(this)||I(A))return h;if(p(this))return p(A)?v(this).j(v(A)):v(v(this).j(A));if(p(A))return v(this.j(v(A)));if(this.l(m)<0&&A.l(m)<0)return c(this.m()*A.m());const T=this.g.length+A.g.length,R=[];for(var C=0;C<2*T;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let D=0;D<A.g.length;D++){const O=this.i(C)>>>16,k=this.i(C)&65535,z=A.i(D)>>>16,re=A.i(D)&65535;R[2*C+2*D]+=k*re,y(R,2*C+2*D),R[2*C+2*D+1]+=O*re,y(R,2*C+2*D+1),R[2*C+2*D+1]+=k*z,y(R,2*C+2*D+1),R[2*C+2*D+2]+=O*z,y(R,2*C+2*D+2)}for(A=0;A<T;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=T;A<2*T;A++)R[A]=0;return new o(R,0)};function y(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function w(A,T){this.g=A,this.h=T}function x(A,T){if(I(T))throw Error("division by zero");if(I(A))return new w(h,h);if(p(A))return T=x(v(A),T),new w(v(T.g),v(T.h));if(p(T))return T=x(A,v(T)),new w(v(T.g),T.h);if(A.g.length>30){if(p(A)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=T;C.l(A)<=0;)R=P(R),C=P(C);var D=L(R,1),O=L(C,1);for(C=L(C,2),R=L(R,2);!I(C);){var k=O.add(C);k.l(A)<=0&&(D=D.add(R),O=k),C=L(C,1),R=L(R,1)}return T=_(A,D.j(T)),new w(D,T)}for(D=h;A.l(T)>=0;){for(R=Math.max(1,Math.floor(A.m()/T.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),O=c(R),k=O.j(T);p(k)||k.l(A)>0;)R-=C,O=c(R),k=O.j(T);I(O)&&(O=f),D=D.add(O),A=_(A,k)}return new w(D,A)}t.B=function(A){return x(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)&A.i(C);return new o(R,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)|A.i(C);return new o(R,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)^A.i(C);return new o(R,this.h^A.h)};function P(A){const T=A.g.length+1,R=[];for(let C=0;C<T;C++)R[C]=A.i(C)<<1|A.i(C-1)>>>31;return new o(R,A.h)}function L(A,T){const R=T>>5;T%=32;const C=A.g.length-R,D=[];for(let O=0;O<C;O++)D[O]=T>0?A.i(O+R)>>>T|A.i(O+R+1)<<32-T:A.i(O+R);return new o(D,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Vk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ko=o}).apply(typeof ob<"u"?ob:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mk,Hu,Fk,Gf,Pw,Uk,jk,$k;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var g=0;g<u.length;++g){var S=u[g];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var S=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var F=u[N];if(!(F in S))break e;S=S[F]}u=u[u.length-1],N=S[u],g=g(N),g!=N&&g!=null&&e(S,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var S=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&S.push([N,g[N]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,S){return u.call.apply(u.bind,arguments)}function c(u,g,S){return c=l,c.apply(null,arguments)}function d(u,g){var S=Array.prototype.slice.call(arguments,1);return function(){var N=S.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,g){function S(){}S.prototype=g.prototype,u.Z=g.prototype,u.prototype=new S,u.prototype.constructor=u,u.Ob=function(N,F,$){for(var me=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)me[Xe-2]=arguments[Xe];return g.prototype[F].apply(N,me)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const S=Array(g);for(let N=0;N<g;N++)S[N]=u[N];return S}return[]}function I(u,g){for(let N=1;N<arguments.length;N++){const F=arguments[N];var S=typeof F;if(S=S!="object"?S:F?Array.isArray(F)?"array":S:"null",S=="array"||S=="object"&&typeof F.length=="number"){S=u.length||0;const $=F.length||0;u.length=S+$;for(let me=0;me<$;me++)u[S+me]=F[me]}else u.push(F)}}class p{constructor(g,S){this.i=g,this.j=S,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){o.setTimeout(()=>{throw u},0)}function _(){var u=A;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class y{constructor(){this.h=this.g=null}add(g,S){const N=w.get();N.set(g,S),this.h?this.h.next=N:this.g=N,this.h=N}}var w=new p(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(g,S){this.h=g,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let P,L=!1,A=new y,T=()=>{const u=Promise.resolve(void 0);P=()=>{u.then(R)}};function R(){for(var u;u=_();){try{u.h.call(u.g)}catch(S){v(S)}var g=w;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const S=()=>{};o.addEventListener("test",S,g),o.removeEventListener("test",S,g)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function z(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(z,D),z.prototype.init=function(u,g){const S=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(S=="mouseover"?g=u.fromElement:S=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),de=0;function _e(u,g,S,N,F){this.listener=u,this.proxy=null,this.src=g,this.type=S,this.capture=!!N,this.ha=F,this.key=++de,this.da=this.fa=!1}function B(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function H(u,g,S){for(const N in u)g.call(S,u[N],N,u)}function Z(u,g){for(const S in u)g.call(void 0,u[S],S,u)}function J(u){const g={};for(const S in u)g[S]=u[S];return g}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,g){let S,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(S in N)u[S]=N[S];for(let $=0;$<we.length;$++)S=we[$],Object.prototype.hasOwnProperty.call(N,S)&&(u[S]=N[S])}}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,g,S,N,F){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const me=$e(u,g,N,F);return me>-1?(g=u[me],S||(g.fa=!1)):(g=new _e(g,this.src,$,!!N,F),g.fa=S,u.push(g)),g};function Fe(u,g){const S=g.type;if(S in u.g){var N=u.g[S],F=Array.prototype.indexOf.call(N,g,void 0),$;($=F>=0)&&Array.prototype.splice.call(N,F,1),$&&(B(g),u.g[S].length==0&&(delete u.g[S],u.h--))}}function $e(u,g,S,N){for(let F=0;F<u.length;++F){const $=u[F];if(!$.da&&$.listener==g&&$.capture==!!S&&$.ha==N)return F}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),He={};function Oe(u,g,S,N,F){if(Array.isArray(g)){for(let $=0;$<g.length;$++)Oe(u,g[$],S,N,F);return null}return S=yn(S),u&&u[re]?u.J(g,S,a(N)?!!N.capture:!1,F):qe(u,g,S,!1,N,F)}function qe(u,g,S,N,F,$){if(!g)throw Error("Invalid event type");const me=a(F)?!!F.capture:!!F;let Xe=Cn(u);if(Xe||(u[Be]=Xe=new ye(u)),S=Xe.add(g,S,N,me,$),S.proxy)return S;if(N=Dt(),S.proxy=N,N.src=u,N.listener=S,u.addEventListener)O||(F=me),F===void 0&&(F=!1),u.addEventListener(g.toString(),N,F);else if(u.attachEvent)u.attachEvent(vr(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Dt(){function u(S){return g.call(u.src,u.listener,S)}const g=or;return u}function gn(u,g,S,N,F){if(Array.isArray(g))for(var $=0;$<g.length;$++)gn(u,g[$],S,N,F);else N=a(N)?!!N.capture:!!N,S=yn(S),u&&u[re]?(u=u.i,$=String(g).toString(),$ in u.g&&(g=u.g[$],S=$e(g,S,N,F),S>-1&&(B(g[S]),Array.prototype.splice.call(g,S,1),g.length==0&&(delete u.g[$],u.h--)))):u&&(u=Cn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=$e(g,S,N,F)),(S=u>-1?g[u]:null)&&tn(S))}function tn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[re])Fe(g.i,u);else{var S=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(S,N,u.capture):g.detachEvent?g.detachEvent(vr(S),N):g.addListener&&g.removeListener&&g.removeListener(N),(S=Cn(g))?(Fe(S,u),S.h==0&&(S.src=null,g[Be]=null)):B(u)}}}function vr(u){return u in He?He[u]:He[u]="on"+u}function or(u,g){if(u.da)u=!0;else{g=new z(g,this);const S=u.listener,N=u.ha||u.src;u.fa&&tn(u),u=S.call(N,g)}return u}function Cn(u){return u=u[Be],u instanceof ye?u:null}var Le="__closure_events_fn_"+(Math.random()*1e9>>>0);function yn(u){return typeof u=="function"?u:(u[Le]||(u[Le]=function(g){return u.handleEvent(g)}),u[Le])}function Ot(){C.call(this),this.i=new ye(this),this.M=this,this.G=null}h(Ot,C),Ot.prototype[re]=!0,Ot.prototype.removeEventListener=function(u,g,S,N){gn(this,u,g,S,N)};function nn(u,g){var S,N=u.G;if(N)for(S=[];N;N=N.G)S.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var F=g;g=new D(N,u),M(g,F)}F=!0;let $,me;if(S)for(me=S.length-1;me>=0;me--)$=g.g=S[me],F=wr($,N,!0,g)&&F;if($=g.g=u,F=wr($,N,!0,g)&&F,F=wr($,N,!1,g)&&F,S)for(me=0;me<S.length;me++)$=g.g=S[me],F=wr($,N,!1,g)&&F}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const S=u.g[g];for(let N=0;N<S.length;N++)B(S[N]);delete u.g[g],u.h--}}this.G=null},Ot.prototype.J=function(u,g,S,N){return this.i.add(String(u),g,!1,S,N)},Ot.prototype.K=function(u,g,S,N){return this.i.add(String(u),g,!0,S,N)};function wr(u,g,S,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let $=0;$<g.length;++$){const me=g[$];if(me&&!me.da&&me.capture==S){const Xe=me.listener,bn=me.ha||me.src;me.fa&&Fe(u.i,me),F=Xe.call(bn,N)!==!1&&F}}return F&&!N.defaultPrevented}function $i(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function _r(u){u.g=$i(()=>{u.g=null,u.i&&(u.i=!1,_r(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ta extends C{constructor(g,S){super(),this.m=g,this.l=S,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(u){C.call(this),this.h=u,this.g={}}h(Ds,C);var Un=[];function Dr(u){H(u.g,function(g,S){this.g.hasOwnProperty(S)&&tn(g)},u),u.g={}}Ds.prototype.N=function(){Ds.Z.N.call(this),Dr(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rn=o.JSON.stringify,pl=o.JSON.parse,oi=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ai(){}function na(){}var es={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Or(){D.call(this,"d")}h(Or,D);function Y(){D.call(this,"c")}h(Y,D);var j={},q=null;function ne(){return q=q||new Ot}j.Ia="serverreachability";function oe(u){D.call(this,j.Ia,u)}h(oe,D);function se(u){const g=ne();nn(g,new oe(g))}j.STAT_EVENT="statevent";function pe(u,g){D.call(this,j.STAT_EVENT,u),this.stat=g}h(pe,D);function X(u){const g=ne();nn(g,new pe(g,u))}j.Ja="timingevent";function ve(u,g){D.call(this,j.Ja,u),this.size=g}h(ve,D);function xe(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function G(){this.g=!0}G.prototype.ua=function(){this.g=!1};function ce(u,g,S,N,F,$){u.info(function(){if(u.g)if($){var me="",Xe=$.split("&");for(let bt=0;bt<Xe.length;bt++){var bn=Xe[bt].split("=");if(bn.length>1){const Nn=bn[0];bn=bn[1];const Os=Nn.split("_");me=Os.length>=2&&Os[1]=="type"?me+(Nn+"="+bn+"&"):me+(Nn+"=redacted&")}}}else me=null;else me=$;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+g+`
`+S+`
`+me})}function he(u,g,S,N,F,$,me){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+g+`
`+S+`
`+$+" "+me})}function ue(u,g,S,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Re(u,S)+(N?" "+N:"")})}function le(u,g){u.info(function(){return"TIMEOUT: "+g})}G.prototype.info=function(){};function Re(u,g){if(!u.g)return g;if(!g)return null;try{const $=JSON.parse(g);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var S=$[u];if(!(S.length<2)){var N=S[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let me=1;me<N.length;me++)N[me]=""}}}}return rn($)}catch{return g}}var ot={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},St={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tt;function pt(){}h(pt,ai),pt.prototype.g=function(){return new XMLHttpRequest},Tt=new pt;function Ke(u){return encodeURIComponent(String(u))}function Lt(u){var g=1;u=u.split(":");const S=[];for(;g>0&&u.length;)S.push(u.shift()),g--;return u.length&&S.push(u.join(":")),S}function qt(u,g,S,N){this.j=u,this.i=g,this.l=S,this.S=N||1,this.V=new Ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}var yt={},tt={};function Ue(u,g,S){u.M=1,u.A=Lr(vn(g)),u.u=S,u.R=!0,fe(u,null)}function fe(u,g){u.F=Date.now(),xt(u),u.B=vn(u.A);var S=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),oI(S.i,"t",N),u.C=0,S=u.j.L,u.h=new Ge,u.g=TI(u.j,S?g:null,!u.u),u.P>0&&(u.O=new ta(c(u.Y,u,u.g),u.P)),g=u.V,S=u.g,N=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Un[0]=F.toString()),F=Un);for(let $=0;$<F.length;$++){const me=Oe(S,F[$],N||g.handleEvent,!1,g.h||g);if(!me)break;g.g[me.key]=me}g=u.J?J(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),se(),ce(u.i,u.v,u.B,u.l,u.S,u.u)}qt.prototype.ba=function(u){u=u.target;const g=this.O;g&&zi(u)==3?g.j():this.Y(u)},qt.prototype.Y=function(u){try{if(u==this.g)e:{const Xe=zi(this.g),bn=this.g.ya(),bt=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||fI(this.g)))){this.K||Xe!=4||bn==7||(bn==8||bt<=0?se(3):se(2)),gt(this);var g=this.g.ca();this.X=g;var S=ut(this);if(this.o=g==200,he(this.i,this.v,this.B,this.l,this.S,Xe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(N)){var $=N;break t}}$=null}if(u=$)ue(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ye(this,u);else{this.o=!1,this.m=3,X(12),be(this),Sn(this);break e}}if(this.R){u=!0;let Nn;for(;!this.K&&this.C<S.length;)if(Nn=jt(this,S),Nn==tt){Xe==4&&(this.m=4,X(14),u=!1),ue(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==yt){this.m=4,X(15),ue(this.i,this.l,S,"[Invalid Chunk]"),u=!1;break}else ue(this.i,this.l,Nn,null),Ye(this,Nn);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||S.length!=0||this.h.h||(this.m=1,X(16),u=!1),this.o=this.o&&u,!u)ue(this.i,this.l,S,"[Invalid Chunked Response]"),be(this),Sn(this);else if(S.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Bg(me),me.P=!0,X(11))}}else ue(this.i,this.l,S,null),Ye(this,S);Xe==4&&be(this),this.o&&!this.K&&(Xe==4?_I(this.j,this):(this.o=!1,xt(this)))}else Q2(this.g),g==400&&S.indexOf("Unknown SID")>0?(this.m=3,X(12)):(this.m=0,X(13)),be(this),Sn(this)}}}catch{}finally{}};function ut(u){if(!vt(u))return u.g.la();const g=fI(u.g);if(g==="")return"";let S="";const N=g.length,F=zi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return be(u),Sn(u),"";u.h.i=new o.TextDecoder}for(let $=0;$<N;$++)u.h.h=!0,S+=u.h.i.decode(g[$],{stream:!(F&&$==N-1)});return g.length=0,u.h.g+=S,u.C=0,u.h.g}function vt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jt(u,g){var S=u.C,N=g.indexOf(`
`,S);return N==-1?tt:(S=Number(g.substring(S,N)),isNaN(S)?yt:(N+=1,N+S>g.length?tt:(g=g.slice(N,N+S),u.C=N+S,g)))}qt.prototype.cancel=function(){this.K=!0,be(this)};function xt(u){u.T=Date.now()+u.H,Er(u,u.H)}function Er(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=xe(c(u.aa,u),g)}function gt(u){u.D&&(o.clearTimeout(u.D),u.D=null)}qt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(le(this.i,this.B),this.M!=2&&(se(),X(17)),be(this),this.m=2,Sn(this)):Er(this,this.T-u)};function Sn(u){u.j.I==0||u.K||_I(u.j,u)}function be(u){gt(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Dr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ye(u,g){try{var S=u.j;if(S.I!=0&&(S.g==u||Tn(S.h,u))){if(!u.L&&Tn(S.h,u)&&S.I==3){try{var N=S.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<u.F)jh(S),Fh(S);else break e;$g(S),X(18)}}else S.xa=F[1],0<S.xa-S.K&&F[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=xe(c(S.Va,S),6e3));Rt(S.h)<=1&&S.ta&&(S.ta=void 0)}else ia(S,11)}else if((u.L||S.g==u)&&jh(S),!k(g))for(F=S.Ba.g.parse(g),g=0;g<F.length;g++){let bt=F[g];const Nn=bt[0];if(!(Nn<=S.K))if(S.K=Nn,bt=bt[1],S.I==2)if(bt[0]=="c"){S.M=bt[1],S.ba=bt[2];const Os=bt[3];Os!=null&&(S.ka=Os,S.j.info("VER="+S.ka));const oa=bt[4];oa!=null&&(S.za=oa,S.j.info("SVER="+S.za));const Wi=bt[5];Wi!=null&&typeof Wi=="number"&&Wi>0&&(N=1.5*Wi,S.O=N,S.j.info("backChannelRequestTimeoutMs_="+N)),N=S;const qi=u.g;if(qi){const Bh=qi.g?qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bh){var $=N.h;$.g||Bh.indexOf("spdy")==-1&&Bh.indexOf("quic")==-1&&Bh.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(jn($,$.h),$.h=null))}if(N.G){const zg=qi.g?qi.g.getResponseHeader("X-HTTP-Session-Id"):null;zg&&(N.wa=zg,Ce(N.J,N.G,zg))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-u.F,S.j.info("Handshake RTT: "+S.T+"ms")),N=S;var me=u;if(N.na=SI(N,N.L?N.ba:null,N.W),me.L){kn(N.h,me);var Xe=me,bn=N.O;bn&&(Xe.H=bn),Xe.D&&(gt(Xe),xt(Xe)),N.g=me}else vI(N);S.i.length>0&&Uh(S)}else bt[0]!="stop"&&bt[0]!="close"||ia(S,7);else S.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?ia(S,7):jg(S):bt[0]!="noop"&&S.l&&S.l.qa(bt),S.A=0)}}se(4)}catch{}}var Ht=class{constructor(u,g){this.g=u,this.map=g}};function dt(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Rt(u){return u.h?1:u.g?u.g.size:0}function Tn(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function jn(u,g){u.g?u.g.add(g):u.h=g}function kn(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}dt.prototype.cancel=function(){if(this.i=ar(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ar(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const S of u.g.values())g=g.concat(S.G);return g}return m(u.i)}var lr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ir(u,g){if(u){u=u.split("&");for(let S=0;S<u.length;S++){const N=u[S].indexOf("=");let F,$=null;N>=0?(F=u[S].substring(0,N),$=u[S].substring(N+1)):F=u[S],g(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Kt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Kt?(this.l=u.l,us(this,u.j),this.o=u.o,this.g=u.g,li(this,u.u),this.h=u.h,ra(this,aI(u.i)),this.m=u.m):u&&(g=String(u).match(lr))?(this.l=!1,us(this,g[1]||"",!0),this.o=fu(g[2]||""),this.g=fu(g[3]||"",!0),li(this,g[4]),this.h=fu(g[5]||"",!0),ra(this,g[6]||"",!0),this.m=fu(g[7]||"")):(this.l=!1,this.i=new pu(null,this.l))}Kt.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(mu(g,nI,!0),":");var S=this.g;return(S||g=="file")&&(u.push("//"),(g=this.o)&&u.push(mu(g,nI,!0),"@"),u.push(Ke(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&u.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&u.push("/"),u.push(mu(S,S.charAt(0)=="/"?j2:U2,!0))),(S=this.i.toString())&&u.push("?",S),(S=this.m)&&u.push("#",mu(S,B2)),u.join("")},Kt.prototype.resolve=function(u){const g=vn(this);let S=!!u.j;S?us(g,u.j):S=!!u.o,S?g.o=u.o:S=!!u.g,S?g.g=u.g:S=u.u!=null;var N=u.h;if(S)li(g,u.u);else if(S=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=g.h.lastIndexOf("/");F!=-1&&(N=g.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let me=0;me<F.length;){const Xe=F[me++];Xe=="."?N&&me==F.length&&$.push(""):Xe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),N&&me==F.length&&$.push("")):($.push(Xe),N=!0)}N=$.join("/")}else N=F}return S?g.h=N:S=u.i.toString()!=="",S?ra(g,aI(u.i)):S=!!u.m,S&&(g.m=u.m),g};function vn(u){return new Kt(u)}function us(u,g,S){u.j=S?fu(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function li(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ra(u,g,S){g instanceof pu?(u.i=g,z2(u.i,u.l)):(S||(g=mu(g,$2)),u.i=new pu(g,u.l))}function Ce(u,g,S){u.i.set(g,S)}function Lr(u){return Ce(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function fu(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function mu(u,g,S){return typeof u=="string"?(u=encodeURI(u).replace(g,F2),S&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function F2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nI=/[#\/\?@]/g,U2=/[#\?:]/g,j2=/[#\?]/g,$2=/[#\?@]/g,B2=/#/g;function pu(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function sa(u){u.g||(u.g=new Map,u.h=0,u.i&&Ir(u.i,function(g,S){u.add(decodeURIComponent(g.replace(/\+/g," ")),S)}))}t=pu.prototype,t.add=function(u,g){sa(this),this.i=null,u=gl(this,u);let S=this.g.get(u);return S||this.g.set(u,S=[]),S.push(g),this.h+=1,this};function rI(u,g){sa(u),g=gl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function sI(u,g){return sa(u),g=gl(u,g),u.g.has(g)}t.forEach=function(u,g){sa(this),this.g.forEach(function(S,N){S.forEach(function(F){u.call(g,F,N,this)},this)},this)};function iI(u,g){sa(u);let S=[];if(typeof g=="string")sI(u,g)&&(S=S.concat(u.g.get(gl(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)S=S.concat(u[g]);return S}t.set=function(u,g){return sa(this),this.i=null,u=gl(this,u),sI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=iI(this,u),u.length>0?String(u[0]):g):g};function oI(u,g,S){rI(u,g),S.length>0&&(u.i=null,u.g.set(gl(u,g),m(S)),u.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var S=g[N];const F=Ke(S);S=iI(this,S);for(let $=0;$<S.length;$++){let me=F;S[$]!==""&&(me+="="+Ke(S[$])),u.push(me)}}return this.i=u.join("&")};function aI(u){const g=new pu;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function gl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function z2(u,g){g&&!u.j&&(sa(u),u.i=null,u.g.forEach(function(S,N){const F=N.toLowerCase();N!=F&&(rI(this,N),oI(this,F,S))},u)),u.j=g}function W2(u,g){const S=new G;if(o.Image){const N=new Image;N.onload=d(Bi,S,"TestLoadImage: loaded",!0,g,N),N.onerror=d(Bi,S,"TestLoadImage: error",!1,g,N),N.onabort=d(Bi,S,"TestLoadImage: abort",!1,g,N),N.ontimeout=d(Bi,S,"TestLoadImage: timeout",!1,g,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function q2(u,g){const S=new G,N=new AbortController,F=setTimeout(()=>{N.abort(),Bi(S,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then($=>{clearTimeout(F),$.ok?Bi(S,"TestPingServer: ok",!0,g):Bi(S,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Bi(S,"TestPingServer: error",!1,g)})}function Bi(u,g,S,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(S)}catch{}}function H2(){this.g=new oi}function Fg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Fg,ai),Fg.prototype.g=function(){return new Vh(this.i,this.h)};function Vh(u,g){Ot.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Vh,Ot),t=Vh.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,yu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gu(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yu(this)),this.g&&(this.readyState=3,yu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lI(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function lI(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?gu(this):yu(this),this.readyState==3&&lI(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,gu(this))},t.Na=function(u){this.g&&(this.response=u,gu(this))},t.ga=function(){this.g&&gu(this)};function gu(u){u.readyState=4,u.l=null,u.j=null,u.B=null,yu(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var S=g.next();!S.done;)S=S.value,u.push(S[0]+": "+S[1]),S=g.next();return u.join(`\r
`)};function yu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function cI(u){let g="";return H(u,function(S,N){g+=N,g+=":",g+=S,g+=`\r
`}),g}function Ug(u,g,S){e:{for(N in S){var N=!1;break e}N=!0}N||(S=cI(S),typeof u=="string"?S!=null&&Ke(S):Ce(u,g,S))}function sn(u){Ot.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(sn,Ot);var K2=/^https?$/i,G2=["POST","PUT"];t=sn.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,S,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tt.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch($){uI(this,$);return}if(u=S||"",S=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)S.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const $ of N.keys())S.set($,N.get($));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(S.keys()).find($=>$.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(G2,g,void 0)>=0)||N||F||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,me]of S)this.g.setRequestHeader($,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){uI(this,$)}};function uI(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,dI(u),Mh(u)}function dI(u){u.A||(u.A=!0,nn(u,"complete"),nn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,nn(this,"complete"),nn(this,"abort"),Mh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mh(this,!0)),sn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?hI(this):this.Xa())},t.Xa=function(){hI(this)};function hI(u){if(u.h&&typeof i<"u"){if(u.v&&zi(u)==4)setTimeout(u.Ca.bind(u),0);else if(nn(u,"readystatechange"),zi(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var S;if(!(S=g)){var N;if(N=$===0){let me=String(u.D).match(lr)[1]||null;!me&&o.self&&o.self.location&&(me=o.self.location.protocol.slice(0,-1)),N=!K2.test(me?me.toLowerCase():"")}S=N}if(S)nn(u,"complete"),nn(u,"success");else{u.o=6;try{var F=zi(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",dI(u)}}finally{Mh(u)}}}}function Mh(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const S=u.g;u.g=null,g||nn(u,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zi(u){return u.g?u.g.readyState:0}t.ca=function(){try{return zi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),pl(g)}};function fI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Q2(u){const g={};u=(u.g&&zi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(k(u[N]))continue;var S=Lt(u[N]);const F=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const $=g[F]||[];g[F]=$,$.push(S)}Z(g,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vu(u,g,S){return S&&S.internalChannelParams&&S.internalChannelParams[u]||g}function mI(u){this.za=0,this.i=[],this.j=new G,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vu("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vu("baseRetryDelayMs",5e3,u),this.Za=vu("retryDelaySeedMs",1e4,u),this.Ta=vu("forwardChannelMaxRetries",2,u),this.va=vu("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new dt(u&&u.concurrentRequestLimit),this.Ba=new H2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=mI.prototype,t.ka=8,t.I=1,t.connect=function(u,g,S,N){X(0),this.W=u,this.H=g||{},S&&N!==void 0&&(this.H.OSID=S,this.H.OAID=N),this.F=this.X,this.J=SI(this,null,this.W),Uh(this)};function jg(u){if(pI(u),u.I==3){var g=u.V++,S=vn(u.J);if(Ce(S,"SID",u.M),Ce(S,"RID",g),Ce(S,"TYPE","terminate"),wu(u,S),g=new qt(u,u.j,g),g.M=2,g.A=Lr(vn(S)),S=!1,o.navigator&&o.navigator.sendBeacon)try{S=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!S&&o.Image&&(new Image().src=g.A,S=!0),S||(g.g=TI(g.j,null),g.g.ea(g.A)),g.F=Date.now(),xt(g)}II(u)}function Fh(u){u.g&&(Bg(u),u.g.cancel(),u.g=null)}function pI(u){Fh(u),u.v&&(o.clearTimeout(u.v),u.v=null),jh(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Uh(u){if(!wt(u.h)&&!u.m){u.m=!0;var g=u.Ea;P||T(),L||(P(),L=!0),A.add(g,u),u.D=0}}function Y2(u,g){return Rt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=xe(c(u.Ea,u,g),EI(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new qt(this,this.j,u);let $=this.o;if(this.U&&($?($=J($),M($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var g=0,S=0;S<this.i.length;S++){t:{var N=this.i[S];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=S;break e}if(g===4096||S===this.i.length-1){g=S+1;break e}}g=1e3}else g=1e3;g=yI(this,F,g),S=vn(this.J),Ce(S,"RID",u),Ce(S,"CVER",22),this.G&&Ce(S,"X-HTTP-Session-Id",this.G),wu(this,S),$&&(this.R?g="headers="+Ke(cI($))+"&"+g:this.u&&Ug(S,this.u,$)),jn(this.h,F),this.Ra&&Ce(S,"TYPE","init"),this.S?(Ce(S,"$req",g),Ce(S,"SID","null"),F.U=!0,Ue(F,S,null)):Ue(F,S,g),this.I=2}}else this.I==3&&(u?gI(this,u):this.i.length==0||wt(this.h)||gI(this))};function gI(u,g){var S;g?S=g.l:S=u.V++;const N=vn(u.J);Ce(N,"SID",u.M),Ce(N,"RID",S),Ce(N,"AID",u.K),wu(u,N),u.u&&u.o&&Ug(N,u.u,u.o),S=new qt(u,u.j,S,u.D+1),u.u===null&&(S.J=u.o),g&&(u.i=g.G.concat(u.i)),g=yI(u,S,1e3),S.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),jn(u.h,S),Ue(S,N,g)}function wu(u,g){u.H&&H(u.H,function(S,N){Ce(g,N,S)}),u.l&&H({},function(S,N){Ce(g,N,S)})}function yI(u,g,S){S=Math.min(u.i.length,S);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var F=u.i;let Xe=-1;for(;;){const bn=["count="+S];Xe==-1?S>0?(Xe=F[0].g,bn.push("ofs="+Xe)):Xe=0:bn.push("ofs="+Xe);let bt=!0;for(let Nn=0;Nn<S;Nn++){var $=F[Nn].g;const Os=F[Nn].map;if($-=Xe,$<0)Xe=Math.max(0,F[Nn].g-100),bt=!1;else try{$="req"+$+"_"||"";try{var me=Os instanceof Map?Os:Object.entries(Os);for(const[oa,Wi]of me){let qi=Wi;a(Wi)&&(qi=rn(Wi)),bn.push($+oa+"="+encodeURIComponent(qi))}}catch(oa){throw bn.push($+"type="+encodeURIComponent("_badmap")),oa}}catch{N&&N(Os)}}if(bt){me=bn.join("&");break e}}me=void 0}return u=u.i.splice(0,S),g.G=u,me}function vI(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;P||T(),L||(P(),L=!0),A.add(g,u),u.A=0}}function $g(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=xe(c(u.Da,u),EI(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,wI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=xe(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,X(10),Fh(this),wI(this))};function Bg(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function wI(u){u.g=new qt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=vn(u.na);Ce(g,"RID","rpc"),Ce(g,"SID",u.M),Ce(g,"AID",u.K),Ce(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ce(g,"TO",u.ia),Ce(g,"TYPE","xmlhttp"),wu(u,g),u.u&&u.o&&Ug(g,u.u,u.o),u.O&&(u.g.H=u.O);var S=u.g;u=u.ba,S.M=1,S.A=Lr(vn(g)),S.u=null,S.R=!0,fe(S,u)}t.Va=function(){this.C!=null&&(this.C=null,Fh(this),$g(this),X(19))};function jh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function _I(u,g){var S=null;if(u.g==g){jh(u),Bg(u),u.g=null;var N=2}else if(Tn(u.h,g))S=g.G,kn(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){S=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;N=ne(),nn(N,new ve(N,S)),Uh(u)}else vI(u);else if(F=g.m,F==3||F==0&&g.X>0||!(N==1&&Y2(u,g)||N==2&&$g(u)))switch(S&&S.length>0&&(g=u.h,g.i=g.i.concat(S)),F){case 1:ia(u,5);break;case 4:ia(u,10);break;case 3:ia(u,6);break;default:ia(u,2)}}}function EI(u,g){let S=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(S*=2),S*g}function ia(u,g){if(u.j.info("Error code "+g),g==2){var S=c(u.bb,u),N=u.Ua;const F=!N;N=new Kt(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||us(N,"https"),Lr(N),F?W2(N.toString(),S):q2(N.toString(),S)}else X(2);u.I=0,u.l&&u.l.pa(g),II(u),pI(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),X(2)):(this.j.info("Failed to ping google.com"),X(1))};function II(u){if(u.I=0,u.ja=[],u.l){const g=ar(u.h);(g.length!=0||u.i.length!=0)&&(I(u.ja,g),I(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function SI(u,g,S){var N=S instanceof Kt?vn(S):new Kt(S);if(N.g!="")g&&(N.g=g+"."+N.g),li(N,N.u);else{var F=o.location;N=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const $=new Kt(null);N&&us($,N),g&&($.g=g),F&&li($,F),S&&($.h=S),N=$}return S=u.G,g=u.wa,S&&g&&Ce(N,S,g),Ce(N,"VER",u.ka),wu(u,N),N}function TI(u,g,S){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new sn(new Fg({ab:S})):new sn(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bI(){}t=bI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $h(){}$h.prototype.g=function(u,g){return new Vr(u,g)};function Vr(u,g){Ot.call(this),this.g=new mI(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new yl(this)}h(Vr,Ot),Vr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){jg(this.g)},Vr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var S={};S.__data__=u,u=S}else this.v&&(S={},S.__data__=rn(u),u=S);g.i.push(new Ht(g.Ya++,u)),g.I==3&&Uh(g)},Vr.prototype.N=function(){this.g.l=null,delete this.j,jg(this.g),delete this.g,Vr.Z.N.call(this)};function AI(u){Or.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const S in g){u=S;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(AI,Or);function xI(){Y.call(this),this.status=1}h(xI,Y);function yl(u){this.g=u}h(yl,bI),yl.prototype.ra=function(){nn(this.g,"a")},yl.prototype.qa=function(u){nn(this.g,new AI(u))},yl.prototype.pa=function(u){nn(this.g,new xI)},yl.prototype.oa=function(){nn(this.g,"b")},$h.prototype.createWebChannel=$h.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,$k=function(){return new $h},jk=function(){return ne()},Uk=j,Pw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,Gf=ot,St.COMPLETE="complete",Fk=St,na.EventType=es,es.OPEN="a",es.CLOSE="b",es.ERROR="c",es.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Hu=na,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,Mk=sn}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const ab="@firebase/firestore",lb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new sg("@firebase/firestore");function Pl(){return Uo.logLevel}function Bk(t){Uo.setLogLevel(t)}function ee(t,...e){if(Uo.logLevel<=rt.DEBUG){const n=e.map(z0);Uo.debug(`Firestore (${eu}): ${t}`,...n)}}function mn(t,...e){if(Uo.logLevel<=rt.ERROR){const n=e.map(z0);Uo.error(`Firestore (${eu}): ${t}`,...n)}}function jo(t,...e){if(Uo.logLevel<=rt.WARN){const n=e.map(z0);Uo.warn(`Firestore (${eu}): ${t}`,...n)}}function z0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zk(t,r,n)}function zk(t,e,n){let r=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mn(r),new Error(r)}function ke(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||zk(e,s,r)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zn.UNAUTHENTICATED))}shutdown(){}}class j9{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new as;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new as,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new as)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new U9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class $9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ke(this.o===void 0,3512);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=W9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function Cw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Vy(s)===Vy(i)?We(s,i):Vy(s)?1:-1}return We(t.length,e.length)}const q9=55296,H9=57343;function Vy(t){const e=t.charCodeAt(0);return e>=q9&&e<=H9}function Sc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function qk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ms.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return We(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),s=Ms.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):Cw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class ft extends Ms{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const K9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Ms{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return K9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ub}static keyField(){return new zt([ub])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ft.fromString(e))}static fromName(e){return new ge(ft.fromString(e).popFirst(5))}static empty(){return new ge(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(t,e,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kk(t,e,n,r){if(e===!0&&r===!0)throw new ie(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function db(t){if(!ge.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hb(t){if(ge.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se(12329,{type:typeof t})}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lg(t);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function G9(t,e){if(e<=0)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,e){const n={typeString:t};return e&&(n.value=e),n}function Eh(t,e){if(!Gk(t))throw new ie(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ie(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=-62135596800,mb=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*mb);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fb)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mb}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eh(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:En("string",ht._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new ht(0,0))}static max(){return new De(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=-1;class ep{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function kw(t){return t.fields.find(e=>e.kind===2)}function da(t){return t.fields.filter(e=>e.kind!==2)}ep.UNKNOWN_ID=-1;class Qf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Gd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Gd(0,Jr.min())}}function Qk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new Jr(s,ge.empty(),e)}function Yk(t){return new Jr(t.readTime,t.key,Tc)}class Jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jr(De.min(),ge.empty(),Tc)}static max(){return new Jr(De.max(),ge.empty(),Tc)}}function W0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==Jk)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="SimpleDb";class cg{static open(e,n,r,s){try{return new cg(n,e.transaction(s,r))}catch(i){throw new ld(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new as,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ld(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=q0(r.target.error);this.S.reject(new ld(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Fr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Y9(n)}}class No{static delete(e){return ee(Fr,"Removing database:",e),ma(GC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!V0())return!1;if(No.F())return!0;const e=Kn(),n=No.M(e),r=0<n&&n<10,s=Zk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,No.M(Kn())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Fr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ld(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ie(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ie(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ld(e,o))},s.onupgradeneeded=i=>{ee(Fr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{ee(Fr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=cg.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ee(Fr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Zk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Q9{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ma(this.U.delete())}}class ld extends ie{constructor(e,n){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xo(t){return t.name==="IndexedDbTransactionError"}class Y9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ee(Fr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee(Fr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ma(r)}add(e){return ee(Fr,"ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next(n=>(n===void 0&&(n=null),ee(Fr,"GET",this.store.name,e,n),n))}delete(e){return ee(Fr,"DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return ee(Fr,"COUNT",this.store.name),ma(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){ee(Fr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=q0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new Q9(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ma(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=q0(r.target.error);n(s)}})}let pb=!1;function q0(t){const e=No.M(Kn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pb||(pb=!0,setTimeout(()=>{throw r},0)),r}}return t}const cd="IndexBackfiller";class J9{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(cd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();ee(cd,`Documents written: ${n}`)}catch(n){Xo(n)?ee(cd,"Ignoring IndexedDB error during index backfill: ",n):await Jo(n)}await this.re(6e4)})}}class X9{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return ee(cd,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(ee(cd,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Yk(i);W0(o,r)>0&&(r=o)}),new Jr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=-1;function ug(t){return t==null}function Qd(t){return t===0&&1/t==-1/0}function eN(t){return typeof t=="number"&&Number.isInteger(t)&&!Qd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="";function rr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gb(e)),e=Z9(t.get(n),e);return gb(e)}function Z9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case tp:n+="";break;default:n+=i}}return n}function gb(t){return t+tp+""}function qs(t){const e=t.length;if(ke(e>=2,64408,{path:t}),e===2)return ke(t.charAt(0)===tp&&t.charAt(1)==="",56145,{path:t}),ft.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(tp,i);switch((o<0||o>n)&&Se(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Se(61167,{path:t})}i=o+2}return new ft(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="remoteDocuments",Ih="owner",wl="owner",Yd="mutationQueues",ez="userId",ys="mutations",yb="batchId",Aa="userMutationsIndex",vb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e){return[t,rr(e)]}function tN(t,e,n){return[t,rr(e),n]}const tz={},bc="documentMutations",np="remoteDocumentsV14",nz=["prefixPath","collectionGroup","readTime","documentId"],Jf="documentKeyIndex",rz=["prefixPath","collectionGroup","documentId"],nN="collectionGroupIndex",sz=["collectionGroup","readTime","prefixPath","documentId"],Jd="remoteDocumentGlobal",Nw="remoteDocumentGlobalKey",Ac="targets",rN="queryTargetsIndex",iz=["canonicalId","targetId"],xc="targetDocuments",oz=["targetId","path"],H0="documentTargetsIndex",az=["path","targetId"],rp="targetGlobalKey",Wa="targetGlobal",Xd="collectionParents",lz=["collectionId","parent"],Rc="clientMetadata",cz="clientId",dg="bundles",uz="bundleId",hg="namedQueries",dz="name",K0="indexConfiguration",hz="indexId",Dw="collectionGroupIndex",fz="collectionGroup",ud="indexState",mz=["indexId","uid"],sN="sequenceNumberIndex",pz=["uid","sequenceNumber"],dd="indexEntries",gz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iN="documentKeyIndex",yz=["indexId","uid","orderedDocumentKey"],fg="documentOverlays",vz=["userId","collectionPath","documentId"],Ow="collectionPathOverlayIndex",wz=["userId","collectionPath","largestBatchId"],oN="collectionGroupOverlayIndex",_z=["userId","collectionGroup","largestBatchId"],G0="globals",Ez="name",aN=[Yd,ys,bc,ha,Ac,Ih,Wa,xc,Rc,Jd,Xd,dg,hg],Iz=[...aN,fg],lN=[Yd,ys,bc,np,Ac,Ih,Wa,xc,Rc,Jd,Xd,dg,hg,fg],cN=lN,Q0=[...cN,K0,ud,dd],Sz=Q0,uN=[...Q0,G0],Tz=uN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Xk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Pn(t,e){const n=Te(t);return No.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gf(this.root,e,this.comparator,!0)}}class gf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Bn.RED,this.left=s??Bn.EMPTY,this.right=i??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Bn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _b(this.data.getIterator())}getIteratorFrom(e){return new _b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class _b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _l(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Rr([])}unionWith(e){let n=new It(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hN("Invalid base64 string: "+i):i}}(e);return new dn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const bz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(t){if(ke(!!t,39018),typeof t=="string"){let e=0;const n=bz.exec(t);if(ke(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Di(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="server_timestamp",mN="__type__",pN="__previous_value__",gN="__local_write_time__";function Y0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mN])==null?void 0:r.stringValue)===fN}function mg(t){const e=t.mapValue.fields[pN];return Y0(e)?mg(e):e}function Zd(t){const e=Ni(t.mapValue.fields[gN].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const sp="(default)";class $o{constructor(e,n){this.projectId=e,this.database=n||sp}static empty(){return new $o("","")}get isDefaultDatabase(){return this.database===sp}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__type__",yN="__max__",yo={mapValue:{fields:{__type__:{stringValue:yN}}}},X0="__vector__",Pc="value",Xf={nullValue:"NULL_VALUE"};function Bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Y0(t)?4:vN(t)?9007199254740991:pg(t)?10:11:Se(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=Bo(t);if(n!==Bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zd(t).isEqual(Zd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ni(s.timestampValue),a=Ni(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Di(s.bytesValue).isEqual(Di(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $t(s.geoPointValue.latitude)===$t(i.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $t(s.integerValue)===$t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$t(s.doubleValue),a=$t(i.doubleValue);return o===a?Qd(o)===Qd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Sc(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(wb(o)!==wb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return Se(52216,{left:t})}}function eh(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function zo(t,e){if(t===e)return 0;const n=Bo(t),r=Bo(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=$t(i.integerValue||i.doubleValue),l=$t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Eb(t.timestampValue,e.timestampValue);case 4:return Eb(Zd(t),Zd(e));case 5:return Cw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Di(i),l=Di(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=We(a[c],l[c]);if(d!==0)return d}return We(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=We($t(i.latitude),$t(o.latitude));return a!==0?a:We($t(i.longitude),$t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ib(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,I,p;const a=i.fields||{},l=o.fields||{},c=(f=a[Pc])==null?void 0:f.arrayValue,d=(m=l[Pc])==null?void 0:m.arrayValue,h=We(((I=c==null?void 0:c.values)==null?void 0:I.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:Ib(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===yo.mapValue&&o===yo.mapValue)return 0;if(i===yo.mapValue)return 1;if(o===yo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Cw(l[h],d[h]);if(f!==0)return f;const m=zo(a[l[h]],c[d[h]]);if(m!==0)return m}return We(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function Eb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=Ni(t),r=Ni(e),s=We(n.seconds,r.seconds);return s!==0?s:We(n.nanos,r.nanos)}function Ib(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=zo(n[s],r[s]);if(i)return i}return We(n.length,r.length)}function Cc(t){return Vw(t)}function Vw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Di(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vw(n.fields[o])}`;return s+"}"}(t.mapValue):Se(61005,{value:t})}function Zf(t){switch(Bo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mg(t);return e?16+Zf(e):16;case 5:return 2*t.stringValue.length;case 6:return Di(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Zf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Zo(r.fields,(i,o)=>{s+=i.length+Zf(o)}),s}(t.mapValue);default:throw Se(13486,{value:t})}}function th(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mw(t){return!!t&&"integerValue"in t}function nh(t){return!!t&&"arrayValue"in t}function Sb(t){return!!t&&"nullValue"in t}function Tb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function em(t){return!!t&&"mapValue"in t}function pg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[J0])==null?void 0:r.stringValue)===X0}function hd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hd(t.arrayValue.values[n]);return e}return{...t}}function vN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yN}const wN={mapValue:{fields:{[J0]:{stringValue:X0},[Pc]:{arrayValue:{}}}}};function xz(t){return"nullValue"in t?Xf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?th($o.empty(),ge.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?pg(t)?wN:{mapValue:{}}:Se(35942,{value:t})}function Rz(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?th($o.empty(),ge.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?wN:"mapValue"in t?pg(t)?{mapValue:{}}:yo:Se(61959,{value:t})}function bb(t,e){const n=zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Ab(t,e){const n=zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!em(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hd(n)}setAll(e){let n=zt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=hd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());em(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];em(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new nr(hd(this.value))}}function _N(t){const e=[];return Zo(t.fields,(n,r)=>{const s=new zt([n]);if(em(r)){const i=_N(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,De.min(),De.min(),De.min(),nr.empty(),0)}static newFoundDocument(e,n,r,s){return new cn(e,1,n,De.min(),r,s,0)}static newNoDocument(e,n){return new cn(e,2,n,De.min(),De.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,De.min(),De.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.position=e,this.inclusive=n}}function xb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ge.comparator(ge.fromName(o.referenceValue),n.key):r=zo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Pz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{}class it extends EN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Cz(e,n,r):n==="array-contains"?new Dz(e,r):n==="in"?new xN(e,r):n==="not-in"?new Oz(e,r):n==="array-contains-any"?new Lz(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kz(e,r):new Nz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&Bo(this.value)===Bo(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _t extends EN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _t(e,n)}matches(e){return Nc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nc(t){return t.op==="and"}function Fw(t){return t.op==="or"}function Z0(t){return IN(t)&&Nc(t)}function IN(t){for(const e of t.filters)if(e instanceof _t)return!1;return!0}function Uw(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Cc(t.value);if(Z0(t))return t.filters.map(e=>Uw(e)).join(",");{const e=t.filters.map(n=>Uw(n)).join(",");return`${t.op}(${e})`}}function SN(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&ti(r.value,s.value)}(t,e):t instanceof _t?function(r,s){return s instanceof _t&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&SN(o,s.filters[a]),!0):!1}(t,e):void Se(19439)}function TN(t,e){const n=t.filters.concat(e);return _t.create(n,t.op)}function bN(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Cc(n.value)}`}(t):t instanceof _t?function(n){return n.op.toString()+" {"+n.getFilters().map(bN).join(" ,")+"}"}(t):"Filter"}class Cz extends it{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class kz extends it{constructor(e,n){super(e,"in",n),this.keys=AN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Nz extends it{constructor(e,n){super(e,"not-in",n),this.keys=AN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class Dz extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nh(n)&&eh(n.arrayValue,this.value)}}class xN extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eh(this.value.arrayValue,n)}}class Oz extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eh(this.value.arrayValue,n)}}class Lz extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function jw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Vz(t,e,n,r,s,i,o)}function el(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ug(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cc(r)).join(",")),e.Te=n}return e.Te}function Sh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rb(t.startAt,e.startAt)&&Rb(t.endAt,e.endAt)}function ip(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function op(t,e){return t.filters.filter(n=>n instanceof it&&n.field.isEqual(e))}function Pb(t,e,n){let r=Xf,s=!0;for(const i of op(t,e)){let o=Xf,a=!0;switch(i.op){case"<":case"<=":o=xz(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Xf}bb({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];bb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Cb(t,e,n){let r=yo,s=!0;for(const i of op(t,e)){let o=yo,a=!0;switch(i.op){case">=":case">":o=Rz(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=yo}Ab({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Ab({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RN(t,e,n,r,s,i,o,a){return new tu(t,e,n,r,s,i,o,a)}function Th(t){return new tu(t)}function kb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PN(t){return t.collectionGroup!==null}function fd(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(zt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new rh(i,r))}),n.has(zt.keyField().canonicalString())||e.Ie.push(new rh(zt.keyField(),r))}return e.Ie}function Qr(t){const e=Te(t);return e.Ee||(e.Ee=Mz(e,fd(t))),e.Ee}function Mz(t,e){if(t.limitType==="F")return jw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new rh(s.field,i)});const n=t.endAt?new kc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kc(t.startAt.position,t.startAt.inclusive):null;return jw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $w(t,e){const n=t.filters.concat([e]);return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ap(t,e,n){return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gg(t,e){return Sh(Qr(t),Qr(e))&&t.limitType===e.limitType}function CN(t){return`${el(Qr(t))}|lt:${t.limitType}`}function Cl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>bN(s)).join(", ")}]`),ug(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Cc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Cc(s)).join(",")),`Target(${r})`}(Qr(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ge.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fd(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=xb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,fd(r),s)||r.endAt&&!function(o,a,l){const c=xb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,fd(r),s))}(t,e)}function kN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NN(t){return(e,n)=>{let r=!1;for(const s of fd(t)){const i=Fz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Fz(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?zo(l,c):Se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=new Nt(ge.comparator);function Wr(){return Uz}const DN=new Nt(ge.comparator);function Ku(...t){let e=DN;for(const n of t)e=e.insert(n.key,n);return e}function ON(t){let e=DN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hs(){return md()}function LN(){return md()}function md(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const jz=new Nt(ge.comparator),$z=new It(ge.comparator);function Ze(...t){let e=$z;for(const n of t)e=e.add(n);return e}const Bz=new It(We);function eE(){return Bz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function VN(t){return{integerValue:""+t}}function zz(t,e){return eN(e)?VN(e):tE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this._=void 0}}function Wz(t,e,n){return t instanceof Dc?function(s,i){const o={fields:{[mN]:{stringValue:fN},[gN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Y0(i)&&(i=mg(i)),i&&(o.fields[pN]=i),{mapValue:o}}(n,e):t instanceof tl?FN(t,e):t instanceof Oc?UN(t,e):function(s,i){const o=MN(s,i),a=Nb(o)+Nb(s.Ae);return Mw(o)&&Mw(s.Ae)?VN(a):tE(s.serializer,a)}(t,e)}function qz(t,e,n){return t instanceof tl?FN(t,e):t instanceof Oc?UN(t,e):n}function MN(t,e){return t instanceof sh?function(r){return Mw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Dc extends yg{}class tl extends yg{constructor(e){super(),this.elements=e}}function FN(t,e){const n=jN(e);for(const r of t.elements)n.some(s=>ti(s,r))||n.push(r);return{arrayValue:{values:n}}}class Oc extends yg{constructor(e){super(),this.elements=e}}function UN(t,e){let n=jN(e);for(const r of t.elements)n=n.filter(s=>!ti(s,r));return{arrayValue:{values:n}}}class sh extends yg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Nb(t){return $t(t.integerValue||t.doubleValue)}function jN(t){return nh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.field=e,this.transform=n}}function Hz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof tl&&s instanceof tl||r instanceof Oc&&s instanceof Oc?Sc(r.elements,s.elements,ti):r instanceof sh&&s instanceof sh?ti(r.Ae,s.Ae):r instanceof Dc&&s instanceof Dc}(t.transform,e.transform)}class Kz{constructor(e,n){this.version=e,this.transformResults=n}}class Rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vg{}function $N(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ah(t.key,Rn.none()):new nu(t.key,t.data,Rn.none());{const n=t.data,r=nr.empty();let s=new It(zt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ji(t.key,r,new Rr(s.toArray()),Rn.none())}}function Gz(t,e,n){t instanceof nu?function(s,i,o){const a=s.value.clone(),l=Ob(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(s,i,o){if(!tm(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ob(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(BN(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pd(t,e,n,r){return t instanceof nu?function(i,o,a,l){if(!tm(i.precondition,o))return a;const c=i.value.clone(),d=Lb(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(i,o,a,l){if(!tm(i.precondition,o))return a;const c=Lb(i.fieldTransforms,l,o),d=o.data;return d.setAll(BN(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return tm(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Qz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=MN(r.transform,s||null);i!=null&&(n===null&&(n=nr.empty()),n.set(r.field,i))}return n||null}function Db(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Sc(r,s,(i,o)=>Hz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nu extends vg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ji extends vg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function BN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ob(t,e,n){const r=new Map;ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,qz(o,a,n[s]))}return r}function Lb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Wz(i,o,e))}return r}class Ah extends vg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zN extends vg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Gz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=$N(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,(n,r)=>Db(n,r))&&Sc(this.baseMutations,e.baseMutations,(n,r)=>Db(n,r))}}class sE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return jz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new sE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,lt;function Jz(t){switch(t){case W.OK:return Se(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Se(15467,{code:t})}}function WN(t){if(t===void 0)return mn("GRPC error has no .code"),W.UNKNOWN;switch(t){case wn.OK:return W.OK;case wn.CANCELLED:return W.CANCELLED;case wn.UNKNOWN:return W.UNKNOWN;case wn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case wn.INTERNAL:return W.INTERNAL;case wn.UNAVAILABLE:return W.UNAVAILABLE;case wn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case wn.NOT_FOUND:return W.NOT_FOUND;case wn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case wn.ABORTED:return W.ABORTED;case wn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case wn.DATA_LOSS:return W.DATA_LOSS;default:return Se(39323,{code:t})}}(lt=wn||(wn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=new ko([4294967295,4294967295],0);function Vb(t){const e=Xz().encode(t),n=new Vk;return n.update(e),new Uint8Array(n.digest())}function Mb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ko([n,r],0),new ko([s,i],0)]}class oE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gu(`Invalid padding: ${n}`);if(r<0)throw new Gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ko.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ko.fromNumber(r)));return s.compare(Zz)===1&&(s=new ko([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Vb(e),[r,s]=Mb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new oE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Vb(e),[r,s]=Mb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Rh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xh(De.min(),s,new Nt(We),Wr(),Ze())}}class Rh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rh(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class qN{constructor(e,n){this.targetId=e,this.Ce=n}}class HN{constructor(e,n,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Fb{constructor(){this.ve=0,this.Fe=Ub(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),r=Ze();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Se(38017,{changeType:i})}}),new Rh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ub()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eW{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wr(),this.Je=yf(),this.He=yf(),this.Ye=new Nt(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ip(i))if(r===0){const o=new ge(i.path);this.et(n,o,cn.newNoDocument(o,De.min()))}else ke(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Di(r).toUint8Array()}catch(l){if(l instanceof hN)return jo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new oE(o,s,i)}catch(l){return jo(l instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&ip(a.target)){const l=new ge(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,cn.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ze();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new xh(e,n,this.Ye,this.je,r);return this.je=Wr(),this.Je=yf(),this.He=yf(),this.Ye=new Nt(We),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Fb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yf(){return new Nt(ge.comparator)}function Ub(){return new Nt(ge.comparator)}const tW={asc:"ASCENDING",desc:"DESCENDING"},nW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rW={and:"AND",or:"OR"};class sW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bw(t,e){return t.useProto3Json||ug(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iW(t,e){return Lc(t,e.toTimestamp())}function pr(t){return ke(!!t,49232),De.fromTimestamp(function(n){const r=Ni(n);return new ht(r.seconds,r.nanos)}(t))}function aE(t,e){return zw(t,e).canonicalString()}function zw(t,e){const n=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GN(t){const e=ft.fromString(t);return ke(rD(e),10190,{key:e.toString()}),e}function lp(t,e){return aE(t.databaseId,e.path)}function qa(t,e){const n=GN(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(JN(n))}function QN(t,e){return aE(t.databaseId,e)}function YN(t){const e=GN(t);return e.length===4?ft.emptyPath():JN(e)}function Ww(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JN(t){return ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jb(t,e,n){return{name:lp(t,e),fields:n.value.mapValue.fields}}function oW(t,e,n){const r=qa(t,e.name),s=pr(e.updateTime),i=e.createTime?pr(e.createTime):De.min(),o=new nr({mapValue:{fields:e.fields}}),a=cn.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function aW(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Se(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ke(d===void 0||typeof d=="string",58123),dn.fromBase64String(d||"")):(ke(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),dn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?W.UNKNOWN:WN(c.code);return new ie(d,c.message||"")}(o);n=new HN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qa(t,r.document.name),i=pr(r.document.updateTime),o=r.document.createTime?pr(r.document.createTime):De.min(),a=new nr({mapValue:{fields:r.document.fields}}),l=cn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new nm(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qa(t,r.document),i=r.readTime?pr(r.readTime):De.min(),o=cn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new nm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qa(t,r.document),i=r.removedTargetIds||[];n=new nm([],i,s,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Yz(s,i),a=r.targetId;n=new qN(a,o)}}return n}function cp(t,e){let n;if(e instanceof nu)n={update:jb(t,e.key,e.value)};else if(e instanceof Ah)n={delete:lp(t,e.key)};else if(e instanceof ji)n={update:jb(t,e.key,e.data),updateMask:fW(e.fieldMask)};else{if(!(e instanceof zN))return Se(16599,{Vt:e.type});n={verify:lp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Oc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iW(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se(27497)}(t,e.precondition)),n}function qw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Rn.updateTime(pr(i.updateTime)):i.exists!==void 0?Rn.exists(i.exists):Rn.none()}(e.currentDocument):Rn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ke(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Dc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new tl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Oc(d)}else"increment"in a?l=new sh(o,a.increment):Se(16584,{proto:a});const c=zt.fromServerFormat(a.fieldPath);return new nE(c,l)}(t,s)):[];if(e.update){e.update.name;const s=qa(t,e.update.name),i=new nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Rr(c.map(d=>zt.fromServerFormat(d)))}(e.updateMask);return new ji(s,i,o,n,r)}return new nu(s,i,n,r)}if(e.delete){const s=qa(t,e.delete);return new Ah(s,n)}if(e.verify){const s=qa(t,e.verify);return new zN(s,n)}return Se(1463,{proto:e})}function lW(t,e){return t&&t.length>0?(ke(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?pr(s.updateTime):pr(i);return o.isEqual(De.min())&&(o=pr(i)),new Kz(o,s.transformResults||[])}(n,e))):[]}function XN(t,e){return{documents:[QN(t,e.path)]}}function ZN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QN(t,s);const i=function(c){if(c.length!==0)return nD(_t.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:kl(f.field),direction:uW(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function eD(t){let e=YN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ke(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=tD(h);return f instanceof _t&&Z0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(I){return new rh(Nl(I.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,ug(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new kc(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new kc(m,f)}(n.endAt)),RN(e,s,o,i,a,"F",l,c)}function cW(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nl(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Nl(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Nl(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nl(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(t):t.fieldFilter!==void 0?function(n){return it.create(Nl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _t.create(n.compositeFilter.filters.map(r=>tD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(n.compositeFilter.op))}(t):Se(30097,{filter:t})}function uW(t){return tW[t]}function dW(t){return nW[t]}function hW(t){return rW[t]}function kl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return zt.fromServerFormat(t.fieldPath)}function nD(t){return t instanceof it?function(n){if(n.op==="=="){if(Tb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NAN"}};if(Sb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NAN"}};if(Sb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(n.field),op:dW(n.op),value:n.value}}}(t):t instanceof _t?function(n){const r=n.getFilters().map(s=>nD(s));return r.length===1?r[0]:{compositeFilter:{op:hW(n.op),filters:r}}}(t):Se(54877,{filter:t})}function fW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,s,i=De.min(),o=De.min(),a=dn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.yt=e}}function mW(t,e){let n;if(e.document)n=oW(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ge.fromSegments(e.noDocument.path),s=rl(e.noDocument.readTime);n=cn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const r=ge.fromSegments(e.unknownDocument.path),s=rl(e.unknownDocument.version);n=cn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ht(s[0],s[1]);return De.fromTimestamp(i)}(e.readTime)),n}function $b(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:up(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:lp(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Lc(i,o.version.toTimestamp()),createTime:Lc(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nl(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:nl(e.version)}}return r}function up(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(t){const e=new ht(t.seconds,t.nanoseconds);return De.fromTimestamp(e)}function pa(t,e){const n=(e.baseMutations||[]).map(i=>qw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>qw(t.yt,i)),s=ht.fromMillis(e.localWriteTimeMs);return new rE(e.batchId,s,n,r)}function Qu(t){const e=rl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?rl(t.lastLimboFreeSnapshotVersion):De.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return ke(o===1,1966,{count:o}),Qr(Th(YN(i.documents[0])))}(t.query):function(i){return Qr(eD(i))}(t.query),new vi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dn.fromBase64String(t.resumeToken))}function iD(t,e){const n=nl(e.snapshotVersion),r=nl(e.lastLimboFreeSnapshotVersion);let s;s=ip(e.target)?XN(t.yt,e.target):ZN(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function oD(t){const e=eD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ap(e,e.limit,"L"):e}function My(t,e){return new iE(e.largestBatchId,qw(t.yt,e.overlayMutation))}function Bb(t,e){const n=e.path.lastSegment();return[t,rr(e.path.popLast()),n]}function zb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:nl(r.readTime),documentKey:rr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{getBundleMetadata(e,n){return Wb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:rl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return Wb(e).put(function(s){return{bundleId:s.id,createTime:nl(pr(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return qb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:oD(i.bundledQuery),readTime:rl(i.readTime)}}(r)})}saveNamedQuery(e,n){return qb(e).put(function(s){return{name:s.name,readTime:nl(pr(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function Wb(t){return Pn(t,dg)}function qb(t){return Pn(t,hg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new wg(e,r)}getOverlay(e,n){return ku(e).get(Bb(this.userId,n)).next(r=>r?My(this.serializer,r):null)}getOverlays(e,n){const r=Hs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new iE(n,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(rr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(ku(e).Z(Ow,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hs(),i=rr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ku(e).J(Ow,o).next(a=>{for(const l of a){const c=My(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ku(e).ee({index:oN,range:a},(l,c,d)=>{const h=My(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return ku(e).put(function(s,i,o){const[a,l,c]=Bb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function ku(t){return Pn(t,fg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{bt(e){return Pn(e,G0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?dn.fromUint8Array(r):dn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt($t(e.integerValue));else if("doubleValue"in e){const r=$t(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Qd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ni(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Di(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?vN(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):pg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Se(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Pc,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt($t(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ge.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ga.Kt=new ga;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=255;function yW(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Hb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=yW(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class vW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=Hb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=Hb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(El),this.sn(255)}_n(){this.an(El),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===El?(this.sn(El),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===El?(this.an(El),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class wW{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class _W{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Nu{constructor(){this.cn=new vW,this.ln=new wW(this.cn),this.hn=new _W(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ya(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:rm(this.En),directionalValue:rm(this.dn),orderedDocumentKey:rm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Yi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Kb(t.En,e.En),n!==0?n:(n=Kb(t.dn,e.dn),n!==0?n:ge.comparator(t.In,e.In)))}function Kb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function rm(t){return ek()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function Gb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class Qb{constructor(e){this.mn=new It((n,r)=>zt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=kw(e);if(n!==void 0&&!this.wn(n))return!1;const r=da(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new It(zt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Qf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Qf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Qf(r.field,r.dir==="asc"?0:1)));return new ep(ep.UNKNOWN_ID,this.collectionId,n,Gd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){var n,r;if(ke(t instanceof it||t instanceof _t,20012),t instanceof it){if(t instanceof xN){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>it.create(t.field,"==",i)))||[];return _t.create(s,"or")}return t}const e=t.filters.map(s=>aD(s));return _t.create(e,t.op)}function EW(t){if(t.getFilters().length===0)return[];const e=Gw(aD(t));return ke(lD(e),7391),Hw(e)||Kw(e)?[e]:e.getFilters()}function Hw(t){return t instanceof it}function Kw(t){return t instanceof _t&&Z0(t)}function lD(t){return Hw(t)||Kw(t)||function(n){if(n instanceof _t&&Fw(n)){for(const r of n.getFilters())if(!Hw(r)&&!Kw(r))return!1;return!0}return!1}(t)}function Gw(t){if(ke(t instanceof it||t instanceof _t,34018),t instanceof it)return t;if(t.filters.length===1)return Gw(t.filters[0]);const e=t.filters.map(r=>Gw(r));let n=_t.create(e,t.op);return n=dp(n),lD(n)?n:(ke(n instanceof _t,64498),ke(Nc(n),40251),ke(n.filters.length>1,57927),n.filters.reduce((r,s)=>lE(r,s)))}function lE(t,e){let n;return ke(t instanceof it||t instanceof _t,38388),ke(e instanceof it||e instanceof _t,25473),n=t instanceof it?e instanceof it?function(s,i){return _t.create([s,i],"and")}(t,e):Yb(t,e):e instanceof it?Yb(e,t):function(s,i){if(ke(s.filters.length>0&&i.filters.length>0,48005),Nc(s)&&Nc(i))return TN(s,i.getFilters());const o=Fw(s)?s:i,a=Fw(s)?i:s,l=o.filters.map(c=>lE(c,a));return _t.create(l,"or")}(t,e),dp(n)}function Yb(t,e){if(Nc(e))return TN(e,t.getFilters());{const n=e.filters.map(r=>lE(t,r));return _t.create(n,"or")}}function dp(t){if(ke(t instanceof it||t instanceof _t,11850),t instanceof it)return t;const e=t.getFilters();if(e.length===1)return dp(e[0]);if(IN(t))return t;const n=e.map(s=>dp(s)),r=[];return n.forEach(s=>{s instanceof it?r.push(s):s instanceof _t&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:_t.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(){this.Cn=new cE}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Jr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class cE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(ft.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="IndexedDbIndexManager",vf=new Uint8Array(0);class SW{constructor(e,n){this.databaseId=n,this.vn=new cE,this.Fn=new Ui(r=>el(r),(r,s)=>Sh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:rr(s)};return Xb(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[qk(n),""],!1,!0);return Xb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(qs(o.parent))}return r})}addFieldIndex(e,n){const r=Du(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Sl(e);return i.next(a=>{o.put(zb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Du(e),s=Sl(e),i=Il(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Du(e),r=Il(e),s=Sl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Qb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Il(e);let s=!0;const i=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ze();const a=[];return V.forEach(i,(l,c)=>{ee(Jb,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${el(n)}`);const d=function(w,x){const P=kw(x);if(P===void 0)return null;for(const L of op(w,P.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(w,x){const P=new Map;for(const L of da(x))for(const A of op(w,L.fieldPath))switch(A.op){case"==":case"in":P.set(L.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return P.set(L.fieldPath.canonicalString(),A.value),Array.from(P.values())}return null}(c,l),f=function(w,x){const P=[];let L=!0;for(const A of da(x)){const T=A.kind===0?Pb(w,A.fieldPath,w.startAt):Cb(w,A.fieldPath,w.startAt);P.push(T.value),L&&(L=T.inclusive)}return new kc(P,L)}(c,l),m=function(w,x){const P=[];let L=!0;for(const A of da(x)){const T=A.kind===0?Cb(w,A.fieldPath,w.endAt):Pb(w,A.fieldPath,w.endAt);P.push(T.value),L&&(L=T.inclusive)}return new kc(P,L)}(c,l),I=this.On(l,c,f),p=this.On(l,c,m),v=this.Nn(l,c,h),_=this.Bn(l.indexId,d,I,f.inclusive,p,m.inclusive,v);return V.forEach(_,y=>r.Y(y,n.limit).next(w=>{w.forEach(x=>{const P=ge.fromSegments(x.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=EW(_t.create(e.filters,"and")).map(r=>jw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):vf,m=this.kn(e,f,r[h%c],s),I=this.qn(e,f,i[h%c],o),p=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(m,I,p))}return d}kn(e,n,r,s){const i=new ya(e,ge.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new ya(e,ge.empty(),n,r);return s?i.An():i}xn(e,n){const r=new Qb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new It(zt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Nu;for(const s of da(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);ga.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Nu;return ga.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Nu;return ga.Kt.Dt(th(this.databaseId,n),r.Pn(function(i){const o=da(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Nu);let i=0;for(const o of da(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&nh(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);ga.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Nu;l.seed(a.un()),ga.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof it&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Du(e),s=Sl(e);return(n?r.J(Dw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new Gd(h.sequenceNumber,new Jr(rl(h.readTime),new ge(qs(h.documentKey)),h.largestBatchId)):Gd.empty(),m=d.fields.map(([I,p])=>new Qf(zt.fromServerFormat(I),p));return new ep(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:We(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Du(e),i=Sl(e);return this.Gn(e).next(o=>s.J(Dw,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(zb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?V.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Il(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Il(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Il(e);let i=new It(Yi);return s.ee({index:iN,range:IDBKeyRange.only([r.indexId,this.uid,rm(this.$n(r,n))])},(o,a)=>{i=i.add(new ya(r.indexId,n,Gb(a.arrayValue),Gb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new It(Yi);const s=this.Qn(n,e);if(s==null)return r;const i=kw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(nh(o))for(const a of o.arrayValue.values||[])r=r.add(new ya(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new ya(n.indexId,e.key,vf,s));return r}Jn(e,n,r,s,i){ee(Jb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),I=c.getIterator();let p=_l(m),v=_l(I);for(;p||v;){let _=!1,y=!1;if(p&&v){const w=d(p,v);w<0?y=!0:w>0&&(_=!0)}else p!=null?y=!0:_=!0;_?(h(v),v=_l(I)):y?(f(p),p=_l(m)):(p=_l(m),v=_l(I))}}(s,i,Yi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return Sl(e).ee({index:sN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Yi(o,a)).filter((o,a,l)=>!a||Yi(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Yi(o,e),l=Yi(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,vf,ge.empty()),l=s[o+1].Vn(this.uid,vf,ge.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Yi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Zb)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Se(44426))).next(Zb)}}function Xb(t){return Pn(t,Xd)}function Il(t){return Pn(t,dd)}function Du(t){return Pn(t,K0)}function Sl(t){return Pn(t,ud)}function Zb(t){ke(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;W0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Jr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cD=41943040;class er{static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e,n){const r=t.store(ys),s=t.store(bc),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{ke(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=tN(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return V.waitFor(i).next(()=>c)}function hp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Se(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(cD,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);class _g{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){ke(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new _g(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ji(e).ee({index:Aa,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Dl(e),o=Ji(e);return o.add({}).next(a=>{ke(typeof a=="number",49019);const l=new rE(a,n,r,s),c=function(m,I,p){const v=p.baseMutations.map(y=>cp(m.yt,y)),_=p.mutations.map(y=>cp(m.yt,y));return{userId:I,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:v,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new It((f,m)=>We(f.canonicalString(),m.canonicalString()));for(const f of s){const m=tN(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,tz))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ji(e).get(n).next(r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),pa(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ji(e).ee({index:Aa,range:s},(o,a,l)=>{a.userId===this.userId&&(ke(a.batchId>=r,47524,{tr:r}),i=pa(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=za;return Ji(e).ee({index:Aa,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,za],[this.userId,Number.POSITIVE_INFINITY]);return Ji(e).J(Aa,n).next(r=>r.map(s=>pa(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Yf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Dl(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=qs(d);if(c===this.userId&&n.path.isEqual(f))return Ji(e).get(h).next(m=>{if(!m)throw Se(61480,{nr:o,batchId:h});ke(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(pa(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(We);const s=[];return n.forEach(i=>{const o=Yf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Dl(e).ee({range:a},(c,d,h)=>{const[f,m,I]=c,p=qs(m);f===this.userId&&i.path.isEqual(p)?r=r.add(I):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Yf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new It(We);return Dl(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,I=qs(f);h===this.userId&&r.isPrefixOf(I)?I.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ji(e).get(i).next(o=>{if(o===null)throw Se(35274,{batchId:i});ke(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(pa(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return uD(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Dl(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=qs(i[1]);s.push(l)}else a.done()}).next(()=>{ke(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return dD(e,this.userId,n)}_r(e){return hD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:za,lastStreamToken:""})}}function dD(t,e,n){const r=Yf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Dl(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Ji(t){return Pn(t,ys)}function Dl(t){return Pn(t,bc)}function hD(t){return Pn(t,Yd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sl(0)}static cr(){return new sl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new sl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>De.fromTimestamp(new ht(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Tl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Tl(e).ee((o,a)=>{const l=Qu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Tl(e).ee((r,s)=>{const i=Qu(s);n(i)})}lr(e){return tA(e).get(rp).next(n=>(ke(n!==null,2888),n))}hr(e,n){return tA(e).put(rp,n)}Pr(e,n){return Tl(e).put(iD(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=el(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Tl(e).ee({range:s,index:rN},(o,a,l)=>{const c=Qu(a);Sh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=io(e);return n.forEach(o=>{const a=rr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=io(e);return V.forEach(n,i=>{const o=rr(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=io(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=io(e);let i=Ze();return s.ee({range:r,X:!0},(o,a,l)=>{const c=qs(o[1]),d=new ge(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=rr(n.path),s=IDBKeyRange.bound([r],[qk(r)],!1,!0);let i=0;return io(e).ee({index:H0,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return Tl(e).get(n).next(r=>r?Qu(r):null)}}function Tl(t){return Pn(t,Ac)}function tA(t){return Pn(t,Wa)}function io(t){return Pn(t,xc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="LruGarbageCollector",fD=1048576;function rA([t,e],[n,r]){const s=We(t,n);return s===0?We(e,r):s}class bW{constructor(e){this.Ir=e,this.buffer=new It(rA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(nA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xo(n)?ee(nA,"Ignoring IndexedDB error during garbage collection: ",n):await Jo(n)}await this.Vr(3e5)})}}class AW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(xr.ce);const r=new bW(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(eA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Pl()<=rt.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function pD(t,e){return new AW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(e,n){this.db=e,this.garbageCollector=pD(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return wf(e,r)}removeReference(e,n,r){return wf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return wf(e,n)}br(e,n){return function(s,i){let o=!1;return hD(s).te(a=>dD(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,De.min()),io(e).delete(function(h){return[0,rr(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return wf(e,n)}Sr(e,n){const r=io(e);let s,i=xr.ce;return r.ee({index:H0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==xr.ce&&n(new ge(qs(s)),i),i=c,s=l):i=xr.ce}).next(()=>{i!==xr.ce&&n(new ge(qs(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wf(t,e){return io(t).put(function(r,s){return{targetId:0,path:rr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return aa(e).put(r)}removeEntry(e,n,r){return aa(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],up(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=cn.newInvalidDocument(n);return aa(e).ee({index:Jf,range:IDBKeyRange.only(Ou(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:cn.newInvalidDocument(n)};return aa(e).ee({index:Jf,range:IDBKeyRange.only(Ou(n))},(s,i)=>{r={document:this.Cr(n,i),size:hp(i)}}).next(()=>r)}getEntries(e,n){let r=Wr();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Wr(),s=new Nt(ge.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,hp(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let s=new It(oA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ou(s.first()),Ou(s.last())),o=s.getIterator();let a=o.getNext();return aa(e).ee({index:Jf,range:i},(l,c,d)=>{const h=ge.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&oA(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ou(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),up(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return aa(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Wr();for(const h of c){const f=this.Cr(ge.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(bh(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Wr();const o=iA(n,r),a=iA(n,Jr.max());return aa(e).ee({index:nN,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(ge.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new PW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return sA(e).get(Nw).next(n=>(ke(!!n,20021),n))}Dr(e,n){return sA(e).put(Nw,n)}Cr(e,n){if(n){const r=mW(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(De.min())))return r}return cn.newInvalidDocument(e)}}function yD(t){return new RW(t)}class PW extends gD{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ui(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new It((i,o)=>We(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=$b(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=hp(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=$b(this.Nr.serializer,o.convertToNoDocument(De.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function sA(t){return Pn(t,Jd)}function aa(t){return Pn(t,np)}function Ou(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iA(t,e){const n=e.documentKey.path.toArray();return[t,up(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function oA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=We(n[i],r[i]),s)return s;return s=We(n.length,r.length),s||(s=We(n[n.length-2],r[r.length-2]),s||We(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&pd(r.mutation,s,Rr.empty(),ht.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const s=Hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ku();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Wr();const o=md(),a=function(){return md()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ji)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),pd(d.mutation,c,d.mutation.getFieldMask(),ht.now())):o.set(c.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new CW(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=md();let s=new Nt((o,a)=>o-a),i=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Rr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ze()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=LN();d.forEach(f=>{if(!i.has(f)){const m=$N(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Hs());let a=Tc,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ze())).next(d=>({batchId:a,changes:ON(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let s=Ku();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ku();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,f){return new tu(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,cn.newInvalidDocument(d)))});let a=Ku();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&pd(d.mutation,c,Rr.empty(),ht.now()),bh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pr(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:oD(s.bundledQuery),readTime:pr(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(){this.overlays=new Nt(ge.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Hs(),i=n.length+1,o=new ge(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Nt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iE(n,r));let i=this.qr.get(n);i===void 0&&(i=Ze(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Qr=new It(Ln.$r),this.Ur=new It(Ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ln(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ln(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ge(new ft([])),r=new Ln(n,e),s=new Ln(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new ft([])),r=new Ln(n,e),s=new Ln(n,e+1);let i=Ze();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ln(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ln{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Ln.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Ln(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?za:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ln(n,0),s=new Ln(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(We);return n.forEach(s=>{const i=new Ln(s,0),o=new Ln(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ge.isDocumentKey(i)||(i=i.child(""));const o=new Ln(new ge(i),0);let a=new It(We);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new Ln(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ln(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e){this.ri=e,this.docs=function(){return new Nt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():cn.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wr();const o=n.path,a=new ge(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||W0(Yk(d),r)<=0||(s.has(d.key)||bh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Se(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VW(this)}getSize(e){return V.resolve(this.size)}}class VW extends gD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e){this.persistence=e,this.si=new Ui(n=>el(n),Sh),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new uE,this.targetCount=0,this.ai=sl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new sl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.ui={},this.overlays={},this.ci=new xr(0),this.li=!1,this.li=!0,this.hi=new DW,this.referenceDelegate=e(this),this.Pi=new MW(this),this.indexManager=new IW,this.remoteDocumentCache=function(s){return new LW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new sD(n),this.Ii=new kW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new OW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new FW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class FW extends Xk{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new uE,this.Vi=null}static mi(e){return new Eg(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=ge.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,De.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class fp{constructor(e,n){this.persistence=e,this.pi=new Ui(r=>rr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=pD(this,n)}static mi(e,n){return new fp(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,De.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zf(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.serializer=e}k(e,n,r,s){const i=new cg("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Ih)}(e),function(l){l.createObjectStore(Yd,{keyPath:ez}),l.createObjectStore(ys,{keyPath:yb,autoIncrement:!0}).createIndex(Aa,vb,{unique:!0}),l.createObjectStore(bc)}(e),aA(e),function(l){l.createObjectStore(ha)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(xc),l.deleteObjectStore(Ac),l.deleteObjectStore(Wa)}(e),aA(e)),o=o.next(()=>function(l){const c=l.store(Wa),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return c.put(rp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(ys).J().next(h=>{l.deleteObjectStore(ys),l.createObjectStore(ys,{keyPath:yb,autoIncrement:!0}).createIndex(Aa,vb,{unique:!0});const f=c.store(ys),m=h.map(I=>f.put(I));return V.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Rc,{keyPath:cz})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Jd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(dg,{keyPath:uz})})(e),function(l){l.createObjectStore(hg,{keyPath:dz})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(fg,{keyPath:vz});c.createIndex(Ow,wz,{unique:!1}),c.createIndex(oN,_z,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(np,{keyPath:nz});c.createIndex(Jf,rz),c.createIndex(nN,sz)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ha))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(K0,{keyPath:hz,autoIncrement:!0}).createIndex(Dw,fz,{unique:!1}),l.createObjectStore(ud,{keyPath:mz}).createIndex(sN,pz,{unique:!1}),l.createObjectStore(dd,{keyPath:gz}).createIndex(iN,yz,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(ud).clear()}).next(()=>{n.objectStore(dd).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(G0,{keyPath:Ez})})(e)})),r<18&&s>=18&&ek()&&(o=o.next(()=>{n.objectStore(ud).clear()}).next(()=>{n.objectStore(dd).clear()})),o}wi(e){let n=0;return e.store(ha).ee((r,s)=>{n+=hp(s)}).next(()=>{const r={byteSize:n};return e.store(Jd).put(Nw,r)})}yi(e){const n=e.store(Yd),r=e.store(ys);return n.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,za],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Aa,o).next(a=>V.forEach(a,l=>{ke(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=pa(this.serializer,l);return uD(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(xc),r=e.store(ha);return e.store(Wa).get(rp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new ft(o),c=function(h){return[0,rr(h)]}(l);i.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:rr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,n){e.createObjectStore(Xd,{keyPath:lz});const r=n.store(Xd),s=new cE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rr(l)})}};return n.store(ha).ee({X:!0},(o,a)=>{const l=new ft(o);return i(l.popLast())}).next(()=>n.store(bc).ee({X:!0},([o,a,l],c)=>{const d=qs(a);return i(d.popLast())}))}Di(e){const n=e.store(Ac);return n.ee((r,s)=>{const i=Qu(s),o=iD(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ha),s=[];return r.ee((i,o)=>{const a=n.store(np),l=function(h){return h.document?new ge(ft.fromString(h.document.name).popFirst(5)):h.noDocument?ge.fromSegments(h.noDocument.path):h.unknownDocument?ge.fromSegments(h.unknownDocument.path):Se(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}Fi(e,n){const r=n.store(ys),s=yD(this.serializer),i=new dE(Eg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ze();pa(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const d=new Zn(c),h=wg.wt(this.serializer,d),f=i.getIndexManager(d),m=_g.wt(d,this.serializer,f,i.referenceDelegate);return new vD(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Lw(n,xr.ce),l).next()})})}}function aA(t){t.createObjectStore(xc,{keyPath:oz}).createIndex(H0,az,{unique:!0}),t.createObjectStore(Ac,{keyPath:"targetId"}).createIndex(rN,iz,{unique:!0}),t.createObjectStore(Wa)}const Xi="IndexedDbPersistence",Fy=18e5,Uy=5e3,jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jW="main";class hE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!hE.v())throw new ie(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xW(this,s),this.$i=n+jW,this.serializer=new sD(l),this.Ui=new No(this.$i,this.Ni,new UW(this.serializer)),this.hi=new gW,this.Pi=new TW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yD(this.serializer),this.Ii=new pW,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&mn(Xi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(W.FAILED_PRECONDITION,jy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new xr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Xo(e))return ee(Xi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(Xi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Lu(e).get(wl).next(n=>V.resolve(this.es(n)))}ts(e){return _f(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Fy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Pn(n,Rc);return r.J().next(s=>{const i=this.ss(s,Fy),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Lu(e).get(wl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Uy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ie(W.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||_f(e).J().next(r=>this.ss(r,Uy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ee(Xi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ih,Rc],e=>{const n=new Lw(e,xr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>_f(e).J().next(n=>this.ss(n,Fy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return _g.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SW(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return wg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee(Xi,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Tz:l===17?uN:l===16?Sz:l===15?Q0:l===14?cN:l===13?lN:l===12?Iz:l===11?aN:void Se(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Lw(a,this.ci?this.ci.next():xr.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ie(W.FAILED_PRECONDITION,Jk);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Lu(e).get(wl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Uy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ie(W.FAILED_PRECONDITION,jy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lu(e).put(wl,n)}static v(){return No.v()}Zi(e){const n=Lu(e);return n.get(wl).next(r=>this.es(r)?(ee(Xi,"Releasing primary lease."),n.delete(wl)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;ZC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ee(Xi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mn(Xi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lu(t){return Pn(t,Ih)}function _f(t){return Pn(t,Rc)}function wD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ze(),s=Ze();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new fE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ZC()?8:Zk(Kn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $W;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Pl()<=rt.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Pl()<=rt.DEBUG&&ee("QueryEngine","Query:",Cl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Pl()<=rt.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(n))):V.resolve())}ys(e,n){if(kb(n))return V.resolve(null);let r=Qr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ap(n,null,"F"),r=Qr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ze(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,ap(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return kb(n)||s.isEqual(De.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(Pl()<=rt.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cl(n)),this.vs(e,o,n,Qk(s,Tc)).next(a=>a))})}Ds(e,n){let r=new It(NN(e));return n.forEach((s,i)=>{bh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Pl()<=rt.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Cl(n)),this.ps.getDocumentsMatchingQuery(e,n,Jr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="LocalStore",BW=3e8;class zW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Nt(We),this.xs=new Ui(i=>el(i),Sh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ED(t,e,n,r){return new zW(t,e,n,r)}async function ID(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ze();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function WW(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=V.resolve();return f.forEach(I=>{m=m.next(()=>d.getEntry(l,I)).next(p=>{const v=c.docVersions.get(I);ke(v!==null,48541),p.version.compareTo(v)<0&&(h.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),d.addEntry(p)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ze();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function SD(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qW(t,e){const n=Te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(dn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(p,v,_){return p.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=BW?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=Wr(),c=Ze();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(HW(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(De.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function HW(t,e,n){let r=Ze(),s=Ze();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee(mE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function KW(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=za),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mp(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Vc(t,e,n){const r=Te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xo(o))throw o;ee(mE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function pp(t,e,n){const r=Te(t);let s=De.min(),i=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Te(l),f=h.xs.get(d);return f!==void 0?V.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,Qr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:De.min(),n?i:Ze())).next(a=>(AD(r,kN(e),a),{documents:a,Qs:i})))}function TD(t,e){const n=Te(t),r=Te(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function bD(t,e){const n=Te(t),r=n.Os.get(e)||De.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,Qk(r,Tc),Number.MAX_SAFE_INTEGER)).then(s=>(AD(n,e,s),s))}function AD(t,e,n){let r=t.Os.get(e)||De.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="firestore_clients";function lA(t,e){return`${xD}_${t}_${e}`}const RD="firestore_mutations";function cA(t,e,n){let r=`${RD}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const PD="firestore_targets";function $y(t,e){return`${PD}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="SharedClientState";class gp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ie(s.error.code,s.error.message))),o?new gp(e,n,s.state,i):(mn($s,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ie(r.error.code,r.error.message))),i?new gd(e,r.state,s):(mn($s,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=eE();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=eN(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new yp(e,i):(mn($s,`Failed to parse client data for instance '${e}': ${n}`),null)}}class pE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new pE(n.clientId,n.onlineState):(mn($s,`Failed to parse online state: ${e}`),null)}}class Qw{constructor(){this.activeTargetIds=eE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class By{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Nt(We),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=lA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Qw),this.ro=new RegExp(`^${xD}_${o}_([^_]*)$`),this.io=new RegExp(`^${RD}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${PD}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(lA(this.persistenceKey,r));if(s){const i=yp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem($y(this.persistenceKey,e));if(s){const i=gd.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($y(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee($s,"READ",e,n),n}setItem(e,n){ee($s,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee($s,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ee($s,"EVENT",n.key,n.newValue),n.key===this.eo)return void mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=xr.ce;if(i!=null)try{const a=JSON.parse(i);ke(typeof a=="number",30636,{So:i}),o=a}catch(a){mn($s,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==xr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new gp(this.currentUser,e,n,r),i=cA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=cA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=$y(this.persistenceKey,e),i=new gd(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return yp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return gp.Ws(new Zn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return gd.Ws(s,n)}uo(e){return pE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ee($s,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=eE();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class CD{constructor(){this.Mo=new Qw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Qw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="ConnectivityMonitor";class dA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(uA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(uA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef=null;function Yw(){return Ef===null?Ef=function(){return 268435456+Math.round(2147483648*Math.random())}():Ef++,"0x"+Ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="RestConnection",QW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===sp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Yw(),a=this.zo(e,n.toUriEncodedString());ee(zy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Mi(c);return this.Jo(e,a,l,r,d).then(h=>(ee(zy,`Received RPC '${e}' ${o}: `,h),h),h=>{throw jo(zy,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=QW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class XW extends YW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Yw();return new Promise((a,l)=>{const c=new Mk;c.setWithCredentials(!0),c.listenOnce(Fk.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Gf.NO_ERROR:const h=c.getResponseJson();ee(Xn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Gf.TIMEOUT:ee(Xn,`RPC '${e}' ${o} timed out`),l(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const f=c.getStatus();if(ee(Xn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const I=m==null?void 0:m.error;if(I&&I.status&&I.message){const p=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(y)>=0?y:W.UNKNOWN}(I.status);l(new ie(p,I.message))}else l(new ie(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ie(W.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ee(Xn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ee(Xn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Yw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$k(),a=jk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ee(Xn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const I=new JW({Yo:v=>{m?ee(Xn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(ee(Xn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ee(Xn,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),p=(v,_,y)=>{v.listen(_,w=>{try{y(w)}catch(x){setTimeout(()=>{throw x},0)}})};return p(h,Hu.EventType.OPEN,()=>{m||(ee(Xn,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),p(h,Hu.EventType.CLOSE,()=>{m||(m=!0,ee(Xn,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(h))}),p(h,Hu.EventType.ERROR,v=>{m||(m=!0,jo(Xn,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),I.a_(new ie(W.UNAVAILABLE,"The operation could not be completed")))}),p(h,Hu.EventType.MESSAGE,v=>{var _;if(!m){const y=v.data[0];ke(!!y,16349);const w=y,x=(w==null?void 0:w.error)||((_=w[0])==null?void 0:_.error);if(x){ee(Xn,`RPC '${e}' stream ${s} received error:`,x);const P=x.status;let L=function(R){const C=wn[R];if(C!==void 0)return WN(C)}(P),A=x.message;L===void 0&&(L=W.INTERNAL,A="Unknown error status: "+P+" with message "+x.message),m=!0,I.a_(new ie(L,A)),h.close()}else ee(Xn,`RPC '${e}' stream ${s} received:`,y),I.u_(y)}}),p(a,Uk.STAT_EVENT,v=>{v.stat===Pw.PROXY?ee(Xn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Pw.NOPROXY&&ee(Xn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(){return typeof window<"u"?window:null}function sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t){return new sW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="PersistentStream";class DD{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ND(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ie(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(hA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ee(hA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZW extends DD{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aW(this.serializer,e),r=function(i){if(!("targetChange"in i))return De.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?pr(o.readTime):De.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ww(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ip(l)?{documents:XN(i,l)}:{query:ZN(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KN(i,o.resumeToken);const c=Bw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Lc(i,o.snapshotVersion.toTimestamp());const c=Bw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=cW(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ww(this.serializer),n.removeTarget=e,this.q_(n)}}class e7 extends DD{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lW(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ww(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{}class n7 extends t7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,zw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(W.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,zw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="RemoteStore";class s7{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{fl(this)&&(ee(il,"Restarting streams for network reachability change."),await async function(l){const c=Te(l);c.Ea.add(4),await ru(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ph(c)}(this))})}),this.Ra=new r7(r,s)}}async function Ph(t){if(fl(t))for(const e of t.da)await e(!0)}async function ru(t){for(const e of t.da)await e(!1)}function Sg(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vE(n)?yE(n):iu(n).O_()&&gE(n,e))}function Mc(t,e){const n=Te(t),r=iu(n);n.Ia.delete(e),r.O_()&&OD(n,e),n.Ia.size===0&&(r.O_()?r.L_():fl(n)&&n.Ra.set("Unknown"))}function gE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}iu(t).Y_(e)}function OD(t,e){t.Va.Ue(e),iu(t).Z_(e)}function yE(t){t.Va=new eW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),iu(t).start(),t.Ra.ua()}function vE(t){return fl(t)&&!iu(t).x_()&&t.Ia.size>0}function fl(t){return Te(t).Ea.size===0}function LD(t){t.Va=void 0}async function i7(t){t.Ra.set("Online")}async function o7(t){t.Ia.forEach((e,n)=>{gE(t,e)})}async function a7(t,e){LD(t),vE(t)?(t.Ra.ha(e),yE(t)):t.Ra.set("Unknown")}async function l7(t,e,n){if(t.Ra.set("Online"),e instanceof HN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){ee(il,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vp(t,r)}else if(e instanceof nm?t.Va.Ze(e):e instanceof qN?t.Va.st(e):t.Va.tt(e),!n.isEqual(De.min()))try{const r=await SD(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(dn.EMPTY_BYTE_STRING,d.snapshotVersion)),OD(i,l);const h=new vi(d.target,l,c,d.sequenceNumber);gE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee(il,"Failed to raise snapshot:",r),await vp(t,r)}}async function vp(t,e,n){if(!Xo(e))throw e;t.Ea.add(1),await ru(t),t.Ra.set("Offline"),n||(n=()=>SD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(il,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ph(t)})}function VD(t,e){return e().catch(n=>vp(t,n,e))}async function su(t){const e=Te(t),n=Wo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:za;for(;c7(e);)try{const s=await KW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,u7(e,s)}catch(s){await vp(e,s)}MD(e)&&FD(e)}function c7(t){return fl(t)&&t.Ta.length<10}function u7(t,e){t.Ta.push(e);const n=Wo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function MD(t){return fl(t)&&!Wo(t).x_()&&t.Ta.length>0}function FD(t){Wo(t).start()}async function d7(t){Wo(t).ra()}async function h7(t){const e=Wo(t);for(const n of t.Ta)e.ea(n.mutations)}async function f7(t,e,n){const r=t.Ta.shift(),s=sE.from(r,e,n);await VD(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await su(t)}async function m7(t,e){e&&Wo(t).X_&&await async function(r,s){if(function(o){return Jz(o)&&o!==W.ABORTED}(s.code)){const i=r.Ta.shift();Wo(r).B_(),await VD(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await su(r)}}(t,e),MD(t)&&FD(t)}async function fA(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),ee(il,"RemoteStore received new credentials");const r=fl(n);n.Ea.add(3),await ru(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ph(n)}async function Jw(t,e){const n=Te(t);e?(n.Ea.delete(2),await Ph(n)):e||(n.Ea.add(2),await ru(n),n.Ra.set("Unknown"))}function iu(t){return t.ma||(t.ma=function(n,r,s){const i=Te(n);return i.sa(),new ZW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:i7.bind(null,t),t_:o7.bind(null,t),r_:a7.bind(null,t),H_:l7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),vE(t)?yE(t):t.Ra.set("Unknown")):(await t.ma.stop(),LD(t))})),t.ma}function Wo(t){return t.fa||(t.fa=function(n,r,s){const i=Te(n);return i.sa(),new e7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:d7.bind(null,t),r_:m7.bind(null,t),ta:h7.bind(null,t),na:f7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await su(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(il,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new wE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ch(t,e){if(mn("AsyncQueue",`${e}: ${t}`),Xo(t))return new ie(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{static emptySet(e){return new nc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=Ku(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.ga=new Nt(ge.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fc(e,n,nc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class g7{constructor(){this.queries=pA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Te(n),i=s.queries;s.queries=pA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function pA(){return new Ui(t=>CN(t),gg)}async function _E(t,e){const n=Te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new p7,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ch(o,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&IE(n)}async function EE(t,e){const n=Te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y7(t,e){const n=Te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&IE(n)}function v7(t,e,n){const r=Te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function IE(t){t.Ca.forEach(e=>{e.next()})}var Xw,gA;(gA=Xw||(Xw={})).Ma="default",gA.Cache="cache";class SE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.key=e}}class jD{constructor(e){this.key=e}}class $D{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=NN(e),this.tu=new nc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new mA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=bh(this.query,h)?h:null,I=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;f&&m?f.data.isEqual(m.data)?I!==p&&(r.track({type:3,doc:m}),v=!0):this.su(f,m)||(r.track({type:2,doc:m}),v=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),v=!0):f&&!m&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(m?(o=o.add(m),i=p?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,I){const p=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:v})}};return p(m)-p(I)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Fc(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new jD(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new UD(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ou="SyncEngine";class w7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _7{constructor(e){this.key=e,this.hu=!1}}class E7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ui(a=>CN(a),gg),this.Iu=new Map,this.Eu=new Set,this.du=new Nt(ge.comparator),this.Au=new Map,this.Ru=new uE,this.Vu={},this.mu=new Map,this.fu=sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I7(t,e,n=!0){const r=Tg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await BD(r,e,n,!0),s}async function S7(t,e){const n=Tg(t);await BD(n,e,!0,!1)}async function BD(t,e,n,r){const s=await mp(t.localStore,Qr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await TE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Sg(t.remoteStore,s),a}async function TE(t,e,n,r,s){t.pu=(h,f,m)=>async function(p,v,_,y){let w=v.view.ru(_);w.Cs&&(w=await pp(p.localStore,v.query,!1).then(({documents:A})=>v.view.ru(A,w)));const x=y&&y.targetChanges.get(v.targetId),P=y&&y.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(w,p.isPrimaryClient,x,P);return Zw(p,v.targetId,L.au),L.snapshot}(t,h,f,m);const i=await pp(t.localStore,e,!0),o=new $D(e,i.Qs),a=o.ru(i.documents),l=Rh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Zw(t,n,c.au);const d=new w7(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function T7(t,e,n){const r=Te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!gg(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mc(r.remoteStore,s.targetId),Uc(r,s.targetId)}).catch(Jo)):(Uc(r,s.targetId),await Vc(r.localStore,s.targetId,!0))}async function b7(t,e){const n=Te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mc(n.remoteStore,r.targetId))}async function A7(t,e,n){const r=RE(t);try{const s=await function(o,a){const l=Te(o),c=ht.now(),d=a.reduce((m,I)=>m.add(I.key),Ze());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let I=Wr(),p=Ze();return l.Ns.getEntries(m,d).next(v=>{I=v,I.forEach((_,y)=>{y.isValidDocument()||(p=p.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,I)).next(v=>{h=v;const _=[];for(const y of a){const w=Qz(y,h.get(y.key).overlayedDocument);w!=null&&_.push(new ji(y.key,w,_N(w.value.mapValue),Rn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)}).next(v=>{f=v;const _=v.applyToLocalDocumentSet(h,p);return l.documentOverlayCache.saveOverlays(m,v.batchId,_)})}).then(()=>({batchId:f.batchId,changes:ON(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Nt(We)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await ea(r,s.changes),await su(r.remoteStore)}catch(s){const i=Ch(s,"Failed to persist write");n.reject(i)}}async function zD(t,e){const n=Te(t);try{const r=await qW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ke(o.hu,14607):s.removedDocuments.size>0&&(ke(o.hu,42227),o.hu=!1))}),await ea(n,r,e)}catch(r){await Jo(r)}}function yA(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Te(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&IE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x7(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Nt(ge.comparator);o=o.insert(i,cn.newNoDocument(i,De.min()));const a=Ze().add(i),l=new xh(De.min(),new Map,new Nt(We),o,a);await zD(r,l),r.du=r.du.remove(i),r.Au.delete(e),xE(r)}else await Vc(r.localStore,e,!1).then(()=>Uc(r,e,n)).catch(Jo)}async function R7(t,e){const n=Te(t),r=e.batch.batchId;try{const s=await WW(n.localStore,e);AE(n,r,null),bE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ea(n,s)}catch(s){await Jo(s)}}async function P7(t,e,n){const r=Te(t);try{const s=await function(o,a){const l=Te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ke(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);AE(r,e,n),bE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ea(r,s)}catch(s){await Jo(s)}}function bE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function AE(t,e,n){const r=Te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||WD(t,r)})}function WD(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xE(t))}function Zw(t,e,n){for(const r of n)r instanceof UD?(t.Ru.addReference(r.key,e),C7(t,r)):r instanceof jD?(ee(ou,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||WD(t,r.key)):Se(19791,{wu:r})}function C7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ee(ou,"New document in limbo: "+n),t.Eu.add(r),xE(t))}function xE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ge(ft.fromString(e)),r=t.fu.next();t.Au.set(r,new _7(n)),t.du=t.du.insert(n,r),Sg(t.remoteStore,new vi(Qr(Th(n.path)),r,"TargetPurposeLimboResolution",xr.ce))}}async function ea(t,e,n){const r=Te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=fE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=Te(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>V.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Xo(h))throw h;ee(mE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),I=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(I);d.Ms=d.Ms.insert(f,p)}}}(r.localStore,i))}async function k7(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){ee(ou,"User change. New user:",e.toKey());const r=await ID(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new ie(W.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ea(n,r.Ls)}}function N7(t,e){const n=Te(t),r=n.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let s=Ze();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function D7(t,e){const n=Te(t),r=await pp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Zw(n,e.targetId,s.au),s}async function O7(t,e){const n=Te(t);return bD(n.localStore,e).then(r=>ea(n,r))}async function L7(t,e,n,r){const s=Te(t),i=await function(a,l){const c=Te(a),d=Te(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await su(s.remoteStore):n==="acknowledged"||n==="rejected"?(AE(s,e,r||null),bE(s,e),function(a,l){Te(Te(a).mutationQueue).ir(l)}(s.localStore,e)):Se(6720,"Unknown batchState",{Su:n}),await ea(s,i)):ee(ou,"Cannot apply mutation batch with id: "+e)}async function V7(t,e){const n=Te(t);if(Tg(n),RE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await vA(n,r.toArray());n.gu=!0,await Jw(n.remoteStore,!0);for(const i of s)Sg(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Uc(n,o),Vc(n.localStore,o,!0))),Mc(n.remoteStore,o)}),await s,await vA(n,r),function(o){const a=Te(o);a.Au.forEach((l,c)=>{Mc(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Nt(ge.comparator)}(n),n.gu=!1,await Jw(n.remoteStore,!1)}}async function vA(t,e,n){const r=Te(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await mp(r.localStore,Qr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await D7(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await TD(r.localStore,o);a=await mp(r.localStore,c),await TE(r,qD(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function qD(t){return RN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function M7(t){return function(n){return Te(Te(n).persistence).Ts()}(Te(t).localStore)}async function F7(t,e,n,r){const s=Te(t);if(s.gu)return void ee(ou,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await bD(s.localStore,kN(i[0])),a=xh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dn.EMPTY_BYTE_STRING);await ea(s,o,a);break}case"rejected":await Vc(s.localStore,e,!0),Uc(s,e,r);break;default:Se(64155,n)}}async function U7(t,e,n){const r=Tg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ee(ou,"Adding an already active target "+s);continue}const i=await TD(r.localStore,s),o=await mp(r.localStore,i);await TE(r,qD(i),o.targetId,!1,o.resumeToken),Sg(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Vc(r.localStore,s,!1).then(()=>{Mc(r.remoteStore,s),Uc(r,s)}).catch(Jo)}}function Tg(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x7.bind(null,e),e.Pu.H_=y7.bind(null,e.eventManager),e.Pu.yu=v7.bind(null,e.eventManager),e}function RE(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P7.bind(null,e),e}class ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ig(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ED(this.persistence,new _D,e.initialUser,this.serializer)}Cu(e){return new dE(Eg.mi,this.serializer)}Du(e){return new CD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ih.provider={build:()=>new ih};class j7 extends ih{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ke(this.persistence.referenceDelegate instanceof fp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new dE(r=>fp.mi(r,n),this.serializer)}}class HD extends ih{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await RE(this.xu.syncEngine),await su(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return ED(this.persistence,new _D,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new mD(r,e.asyncQueue,n)}Mu(e,n){const r=new X9(n,this.persistence);return new J9(e.asyncQueue,r)}Cu(e){const n=wD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new hE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,kD(),sm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new CD}}class $7 extends HD{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof By&&(this.sharedClientState.syncEngine={Co:L7.bind(null,n),vo:F7.bind(null,n),Fo:U7.bind(null,n),Ts:M7.bind(null,n),Do:O7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await V7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=kD();if(!By.v(n))throw new ie(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new By(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class oh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k7.bind(null,this.syncEngine),await Jw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g7}()}createDatastore(e){const n=Ig(e.databaseInfo.databaseId),r=function(i){return new XW(i)}(e.databaseInfo);return function(i,o,a,l){return new n7(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new s7(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>yA(this.syncEngine,n,0),function(){return dA.v()?new dA:new GW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new E7(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Te(s);ee(il,"RemoteStore shutting down."),i.Ea.add(5),await ru(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}oh.provider={build:()=>new oh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="FirestoreClient";class B7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Zn.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ee(qo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee(qo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ch(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress(),ee(qo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ID(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CE(t);ee(qo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>fA(e.remoteStore,s)),t._onlineComponents=e}async function CE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(qo,"Using user provided OfflineComponentProvider");try{await Wy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await Wy(t,new ih)}}else ee(qo,"Using default OfflineComponentProvider"),await Wy(t,new j7(void 0));return t._offlineComponents}async function kE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(qo,"Using user provided OnlineComponentProvider"),await wA(t,t._uninitializedComponentsProvider._online)):(ee(qo,"Using default OnlineComponentProvider"),await wA(t,new oh))),t._onlineComponents}function KD(t){return CE(t).then(e=>e.persistence)}function GD(t){return CE(t).then(e=>e.localStore)}function QD(t){return kE(t).then(e=>e.remoteStore)}function z7(t){return kE(t).then(e=>e.syncEngine)}async function wp(t){const e=await kE(t),n=e.eventManager;return n.onListen=I7.bind(null,e.syncEngine),n.onUnlisten=T7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b7.bind(null,e.syncEngine),n}function W7(t){return t.asyncQueue.enqueue(async()=>{const e=await KD(t),n=await QD(t);return e.setNetworkEnabled(!0),function(s){const i=Te(s);return i.Ea.delete(0),Ph(i)}(n)})}function q7(t){return t.asyncQueue.enqueue(async()=>{const e=await KD(t),n=await QD(t);return e.setNetworkEnabled(!1),async function(s){const i=Te(s);i.Ea.add(0),await ru(i),i.Ra.set("Offline")}(n)})}function H7(t,e){const n=new as;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=Te(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new ie(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ch(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await GD(t),e,n)),n.promise}function K7(t,e,n={}){const r=new as;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new PE({next:f=>{d.Nu(),o.enqueueAndForget(()=>EE(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new ie(W.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new SE(Th(a.path),d,{includeMetadataChanges:!0,qa:!0});return _E(i,h)}(await wp(t),t.asyncQueue,e,n,r)),r.promise}function G7(t,e){const n=new as;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await pp(s,i,!0),l=new $D(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ch(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await GD(t),e,n)),n.promise}function Q7(t,e,n={}){const r=new as;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new PE({next:f=>{d.Nu(),o.enqueueAndForget(()=>EE(i,h)),f.fromCache&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new SE(a,d,{includeMetadataChanges:!0,qa:!0});return _E(i,h)}(await wp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7="firestore.googleapis.com",EA=!0;class IA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y7,this.ssl=EA}else this.host=e.host,this.ssl=e.ssl??EA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fD)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YD(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Wk;switch(r.type){case"firstParty":return new B9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_A.get(n);r&&(ee("ComponentProvider","Removing Datastore"),_A.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Eh(n,Wt._jsonSchema))return new Wt(e,r||null,new ge(ft.fromString(n.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:En("string",Wt._jsonSchemaVersion),referencePath:En("string")};class _i extends ks{constructor(e,n,r){super(e,n,Th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new ge(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function Ne(t,e,...n){if(t=mt(t),Hk("collection","path",e),t instanceof NE){const r=ft.fromString(e,...n);return hb(r),new _i(t,null,r)}{if(!(t instanceof Wt||t instanceof _i))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return hb(r),new _i(t.firestore,null,r)}}function Pe(t,e,...n){if(t=mt(t),arguments.length===1&&(e=ag.newId()),Hk("doc","path",e),t instanceof NE){const r=ft.fromString(e,...n);return db(r),new Wt(t,null,new ge(r))}{if(!(t instanceof Wt||t instanceof _i))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return db(r),new Wt(t.firestore,t instanceof _i?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="AsyncQueue";class TA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ND(this,"async_queue_retry"),this._c=()=>{const r=sm();r&&ee(SA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new as;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xo(e))throw e;ee(SA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",bA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=wE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:bA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ir extends NE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new TA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TA(e),this._firestoreClient=void 0,await e}}}function JD(t,e,n){n||(n=sp);const r=ig(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Ec(i,e))return s;throw new ie(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fD)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Mi(e.host)&&L0(e.host),r.initialize({options:e,instanceIdentifier:n})}function ii(t){if(t._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XD(t),t._firestoreClient}function XD(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new Az(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,YD(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new B7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function J7(t,e){jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return ZD(t,oh.provider,{build:r=>new HD(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function X7(t){jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();ZD(t,oh.provider,{build:n=>new $7(n,e.cacheSizeBytes)})}function ZD(t,e,n){if((t=un(t,ir))._firestoreClient||t._terminated)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ie(W.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},XD(t)}function DE(t){return W7(ii(t=un(t,ir)))}function OE(t){return q7(ii(t=un(t,ir)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(dn.fromBase64String(e))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $r(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eh(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:En("string",$r._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(Eh(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:En("string",Ss._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eh(e,Ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ts(e.vectorValues);throw new ie(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ts._jsonSchemaVersion="firestore/vectorValue/1.0",Ts._jsonSchema={type:En("string",Ts._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=/^__.*__$/;class e8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new nu(e,this.data,n,this.fieldTransforms)}}class eO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:t})}}class bg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _p(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tO(this.Ac)&&Z7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ig(e)}Cc(e,n,r,s=!1){return new bg({Ac:e,methodName:n,Dc:r,path:zt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kh(t){const e=t._freezeSettings(),n=Ig(t._databaseId);return new t8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function LE(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);FE("Data must be an object, but it was:",o,r);const a=sO(r,o);let l,c;if(i.merge)l=new Rr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=e_(e,h,n);if(!o.contains(f))throw new ie(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);oO(d,f)||d.push(f)}l=new Rr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new e8(new nr(a),l,c)}class Ag extends lu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ag}}function n8(t,e,n){return new bg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class VE extends lu{_toFieldTransform(e){return new nE(e.path,new Dc)}isEqual(e){return e instanceof VE}}class ME extends lu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=n8(this,e,!0),r=this.vc.map(i=>cu(i,n)),s=new tl(r);return new nE(e.path,s)}isEqual(e){return e instanceof ME&&Ec(this.vc,e.vc)}}function nO(t,e,n,r){const s=t.Cc(1,e,n);FE("Data must be an object, but it was:",s,r);const i=[],o=nr.empty();Zo(r,(l,c)=>{const d=UE(e,l,n);c=mt(c);const h=s.yc(d);if(c instanceof Ag)i.push(d);else{const f=cu(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Rr(i);return new eO(o,a,s.fieldTransforms)}function rO(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[e_(e,r,n)],l=[s];if(i.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(e_(e,i[f])),l.push(i[f+1]);const c=[],d=nr.empty();for(let f=a.length-1;f>=0;--f)if(!oO(c,a[f])){const m=a[f];let I=l[f];I=mt(I);const p=o.yc(m);if(I instanceof Ag)c.push(m);else{const v=cu(I,p);v!=null&&(c.push(m),d.set(m,v))}}const h=new Rr(c);return new eO(d,h,o.fieldTransforms)}function r8(t,e,n,r=!1){return cu(n,t.Cc(r?4:3,e))}function cu(t,e){if(iO(t=mt(t)))return FE("Unsupported field value:",e,t),sO(t,e);if(t instanceof lu)return function(r,s){if(!tO(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=cu(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ht.fromDate(r);return{timestampValue:Lc(s.serializer,i)}}if(r instanceof ht){const i=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,i)}}if(r instanceof Ss)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $r)return{bytesValue:KN(s.serializer,r._byteString)};if(r instanceof Wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:aE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ts)return function(o,a){return{mapValue:{fields:{[J0]:{stringValue:X0},[Pc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return tE(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${lg(r)}`)}(t,e)}function sO(t,e){const n={};return dN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(t,(r,s)=>{const i=cu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof Ss||t instanceof $r||t instanceof Wt||t instanceof lu||t instanceof Ts)}function FE(t,e,n){if(!iO(n)||!Gk(n)){const r=lg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function e_(t,e,n){if((e=mt(e))instanceof au)return e._internalPath;if(typeof e=="string")return UE(t,e);throw _p("Field path arguments must be of type string or ",t,!1,void 0,n)}const s8=new RegExp("[~\\*/\\[\\]]");function UE(t,e,n){if(e.search(s8)>=0)throw _p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new au(...e.split("."))._internalPath}catch{throw _p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _p(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ie(W.INVALID_ARGUMENT,a+t+l)}function oO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i8 extends aO{data(){return super.data()}}function xg(t,e){return typeof e=="string"?UE(t,e):e instanceof au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jE{}class Rg extends jE{}function je(t,e,...n){let r=[];e instanceof jE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Pg).length,a=i.filter(l=>l instanceof Nh).length;if(o>1||o>0&&a>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Nh extends Rg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nh(e,n,r)}_apply(e){const n=this._parse(e);return cO(e._query,n),new ks(e.firestore,e.converter,$w(e._query,n))}_parse(e){const n=kh(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){RA(h,d);const I=[];for(const p of h)I.push(xA(l,i,p));f={arrayValue:{values:I}}}else f=xA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||RA(h,d),f=r8(a,o,h,d==="in"||d==="not-in");return it.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ve(t,e,n){const r=e,s=xg("where",t);return Nh._create(s,r,n)}class Pg extends jE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)cO(o,l),o=$w(o,l)}(e._query,n),new ks(e.firestore,e.converter,$w(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cg extends Rg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rh(i,o)}(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new tu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Do(t,e="asc"){const n=e,r=xg("orderBy",t);return Cg._create(r,n)}class kg extends Rg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kg(e,n,r)}_apply(e){return new ks(e.firestore,e.converter,ap(e._query,this._limit,this._limitType))}}function uu(t){return G9("limit",t),kg._create("limit",t,"F")}function xA(t,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PN(e)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!ge.isDocumentKey(r))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return th(t,new ge(r))}if(n instanceof Wt)return th(t,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lg(n)}.`)}function RA(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cO(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uO{convertValue(e,n="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Pc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>$t(o.doubleValue));return new Ts(n)}convertGeoPoint(e){return new Ss($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zd(e));default:return null}}convertTimestamp(e){const n=Ni(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);ke(rD(r),9688,{name:e});const s=new $o(r.get(1),r.get(3)),i=new ge(r.popFirst(5));return s.isEqual(n)||mn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ei extends aO{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ei._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:En("string",Ei._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class yd extends Ei{data(e={}){return super.data(e)}}class Ii{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new xa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yd(this._firestore,this._userDataWriter,r.key,r,new xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new yd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new yd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:o8(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ii._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){t=un(t,Wt);const e=un(t.firestore,ir);return K7(ii(e),t._key).then(n=>hO(e,t,n))}Ii._jsonSchemaVersion="firestore/querySnapshot/1.0",Ii._jsonSchema={type:En("string",Ii._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class Dh extends uO{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function dO(t){t=un(t,Wt);const e=un(t.firestore,ir),n=ii(e),r=new Dh(e);return H7(n,t._key).then(s=>new Ei(e,r,t._key,s,new xa(s!==null&&s.hasLocalMutations,!0),t.converter))}function Qe(t){t=un(t,ks);const e=un(t.firestore,ir),n=ii(e),r=new Dh(e);return lO(t._query),Q7(n,t._query).then(s=>new Ii(e,r,t,s))}function a8(t){t=un(t,ks);const e=un(t.firestore,ir),n=ii(e),r=new Dh(e);return G7(n,t._query).then(s=>new Ii(e,r,t,s))}function ln(t,e,n){t=un(t,Wt);const r=un(t.firestore,ir),s=$E(t.converter,e,n);return du(r,[LE(kh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Rn.none())])}function In(t,e,n,...r){t=un(t,Wt);const s=un(t.firestore,ir),i=kh(s);let o;return o=typeof(e=mt(e))=="string"||e instanceof au?rO(i,"updateDoc",t._key,e,n,r):nO(i,"updateDoc",t._key,e),du(s,[o.toMutation(t._key,Rn.exists(!0))])}function Mn(t){return du(un(t.firestore,ir),[new Ah(t._key,Rn.none())])}function Js(t,e){const n=un(t.firestore,ir),r=Pe(t),s=$E(t.converter,e);return du(n,[LE(kh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}function Oi(t,...e){var l,c,d;t=mt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||AA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(AA(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof Wt)o=un(t.firestore,ir),a=Th(t._key.path),i={next:h=>{e[r]&&e[r](hO(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=un(t,ks);o=un(h.firestore,ir),a=h._query;const f=new Dh(o);i={next:m=>{e[r]&&e[r](new Ii(o,f,h,m))},error:e[r+1],complete:e[r+2]},lO(t._query)}return function(f,m,I,p){const v=new PE(p),_=new SE(m,v,I);return f.asyncQueue.enqueueAndForget(async()=>_E(await wp(f),_)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>EE(await wp(f),_))}}(ii(o),a,s,i)}function du(t,e){return function(r,s){const i=new as;return r.asyncQueue.enqueueAndForget(async()=>A7(await z7(r),s,i)),i.promise}(ii(t),e)}function hO(t,e,n){const r=n.docs.get(e._key),s=new Dh(t);return new Ei(t,s,e._key,r,new xa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kh(e)}set(e,n,r){this._verifyNotCommitted();const s=qy(e,this._firestore),i=$E(s.converter,n,r),o=LE(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Rn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=qy(e,this._firestore);let o;return o=typeof(n=mt(n))=="string"||n instanceof au?rO(this._dataReader,"WriteBatch.update",i._key,n,r,s):nO(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qy(e,this._firestore);return this._mutations=this._mutations.concat(new Ah(n._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qy(t,e){if((t=mt(t)).firestore!==e)throw new ie(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Me(){return new VE("serverTimestamp")}function l8(...t){return new ME("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(t){return ii(t=un(t,ir)),new fO(t,e=>du(t,e))}(function(e,n=!0){(function(s){eu=s})(wh),ei(new Rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ir(new j9(r.getProvider("auth-internal")),new z9(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Gr(ab,lb,e),Gr(ab,lb,"esm2020")})();const Dn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:uO,Bytes:$r,CollectionReference:_i,DocumentReference:Wt,DocumentSnapshot:Ei,FieldPath:au,FieldValue:lu,Firestore:ir,FirestoreError:ie,GeoPoint:Ss,Query:ks,QueryCompositeFilterConstraint:Pg,QueryConstraint:Rg,QueryDocumentSnapshot:yd,QueryFieldFilterConstraint:Nh,QueryLimitConstraint:kg,QueryOrderByConstraint:Cg,QuerySnapshot:Ii,SnapshotMetadata:xa,Timestamp:ht,VectorValue:Ts,WriteBatch:fO,_AutoId:ag,_ByteString:dn,_DatabaseId:$o,_DocumentKey:ge,_EmptyAuthCredentialsProvider:Wk,_FieldPath:zt,_cast:un,_logWarn:jo,_validateIsNotUsedTogether:Kk,addDoc:Js,arrayUnion:l8,collection:Ne,deleteDoc:Mn,disableNetwork:OE,doc:Pe,enableIndexedDbPersistence:J7,enableMultiTabIndexedDbPersistence:X7,enableNetwork:DE,ensureFirestoreConfigured:ii,executeWrite:du,getDoc:Yt,getDocFromCache:dO,getDocs:Qe,getDocsFromCache:a8,initializeFirestore:JD,limit:uu,onSnapshot:Oi,orderBy:Do,query:je,serverTimestamp:Me,setDoc:ln,setLogLevel:Bk,updateDoc:In,where:Ve,writeBatch:c8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8="type.googleapis.com/google.protobuf.Int64Value",d8="type.googleapis.com/google.protobuf.UInt64Value";function mO(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Ep(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Ep(e));if(typeof t=="function"||typeof t=="object")return mO(t,e=>Ep(e));throw new Error("Data cannot be encoded in JSON: "+t)}function jc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case u8:case d8:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>jc(e)):typeof t=="function"||typeof t=="object"?mO(t,e=>jc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pr extends Cs{constructor(e,n,r){super(`${BE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Pr.prototype)}}function h8(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ip(t,e){let n=h8(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!PA[o])return new Pr("internal","internal");n=PA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=jc(s))}}catch{}return n==="ok"?null:new Pr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="us-central1",m8=/^data: (.*?)(?:\n|$)/;function p8(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Pr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class g8{constructor(e,n,r,s,i=t_,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new f8(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=t_}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function y8(t,e,n){const r=Mi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(L0(t.emulatorOrigin+"/backends"),JC("Functions",!0))}function v8(t,e,n){const r=s=>_8(t,e,s,{});return r.stream=(s,i)=>I8(t,e,s,i),r}function pO(t){return t.emulatorOrigin&&Mi(t.emulatorOrigin)?"include":void 0}async function w8(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:pO(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function gO(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function _8(t,e,n,r){const s=t._url(e);return E8(t,s,n,r)}async function E8(t,e,n,r){n=Ep(n);const s={data:n},i=await gO(t,r),o=r.timeout||7e4,a=p8(o),l=await Promise.race([w8(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Pr("cancelled","Firebase Functions instance was deleted.");const c=Ip(l.status,l.json);if(c)throw c;if(!l.json)throw new Pr("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Pr("internal","Response is missing data field.");return{data:jc(d)}}function I8(t,e,n,r){const s=t._url(e);return S8(t,s,n,r||{})}async function S8(t,e,n,r){var f;n=Ep(n);const s={data:n},i=await gO(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:pO(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new Pr("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const I=Ip(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let a,l;const c=new Promise((m,I)=>{a=m,l=I});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Pr("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=T8(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:I,done:p}=await m.read();return{value:I,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function T8(t,e,n,r){const s=(o,a)=>{const l=o.match(m8);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(jc(d.result));return}if("message"in d){a.enqueue(jc(d.message));return}if("error"in d){const h=Ip(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Pr){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Pr("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Pr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Pr?c:Ip(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const CA="@firebase/functions",kA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8="auth-internal",A8="app-check-internal",x8="messaging-internal";function R8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(b8),o=n.getProvider(x8),a=n.getProvider(A8);return new g8(s,i,o,a,r)};ei(new Rs(BE,e,"PUBLIC").setMultipleInstances(!0)),Gr(CA,kA,t),Gr(CA,kA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t=ik(),e=t_){const r=ig(mt(t),BE).getImmediate({identifier:e}),s=QC("functions");return s&&C8(r,...s),r}function C8(t,e,n){y8(mt(t),e,n)}function $G(t,e,n){return v8(mt(t),e)}R8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="firebasestorage.googleapis.com",vO="storageBucket",k8=2*60*1e3,N8=10*60*1e3,D8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en extends Cs{constructor(e,n,r=0){super(Hy(e),`Firebase Storage: ${n} (${Hy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,en.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ut||(Ut={}));function Hy(t){return"storage/"+t}function zE(){const t="An unknown error occurred, please check the error payload for server response.";return new en(Ut.UNKNOWN,t)}function O8(t){return new en(Ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function L8(t){return new en(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function V8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new en(Ut.UNAUTHENTICATED,t)}function M8(){return new en(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function F8(t){return new en(Ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wO(){return new en(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _O(){return new en(Ut.CANCELED,"User canceled the upload/download.")}function U8(t){return new en(Ut.INVALID_URL,"Invalid URL '"+t+"'.")}function j8(t){return new en(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $8(){return new en(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vO+"' property when initializing the app?")}function EO(){return new en(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function B8(){return new en(Ut.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function z8(){return new en(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function W8(t){return new en(Ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function n_(t){return new en(Ut.INVALID_ARGUMENT,t)}function IO(){return new en(Ut.APP_DELETED,"The Firebase app was deleted.")}function q8(t){return new en(Ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(t,e){return new en(Ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vu(t){throw new en(Ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qr.makeFromUrl(e,n)}catch{return new qr(e,"")}if(r.path==="")return r;throw j8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),I={bucket:1,path:3},p=n===yO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${p}/${s}/${v}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:I,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<w.length;x++){const P=w[x],L=P.regex.exec(e);if(L){const A=L[P.indices.bucket];let T=L[P.indices.path];T||(T=""),r=new qr(A,T),P.postModify(r);break}}if(r==null)throw U8(e);return r}}class H8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(m,l())},v)}function f(){i&&clearTimeout(i)}function m(v,..._){if(c){f();return}if(v){f(),d.call(null,v,..._);return}if(l()||o){f(),d.call(null,v,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let I=!1;function p(v){I||(I=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}function G8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){return t!==void 0}function Y8(t){return typeof t=="function"}function J8(t){return typeof t=="object"&&!Array.isArray(t)}function Ng(t){return typeof t=="string"||t instanceof String}function NA(t){return WE()&&t instanceof Blob}function WE(){return typeof Blob<"u"}function DA(t,e,n,r){if(r<e)throw n_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw n_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function SO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,p)=>{this.resolve_=I,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new If(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ha.NO_ERROR,l=i.getStatus();if(!a||TO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ha.ABORT;r(!1,new If(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new If(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Q8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=zE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?IO():_O();o(l)}else{const l=wO();o(l)}};this.canceled_?n(!1,new If(!1,null,!0)):this.backoffId_=K8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&G8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class If{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Z8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function rq(t,e,n,r,s,i,o=!0,a=!1){const l=SO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return tq(d,e),Z8(d,n),eq(d,i),nq(d,r),new X8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iq(...t){const e=sq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(WE())return new Blob(t);throw new en(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t){if(typeof atob>"u")throw W8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ky{constructor(e,n){this.data=e,this.contentType=n||null}}function lq(t,e){switch(t){case Ks.RAW:return new Ky(bO(e));case Ks.BASE64:case Ks.BASE64URL:return new Ky(AO(t,e));case Ks.DATA_URL:return new Ky(uq(e),dq(e))}throw zE()}function bO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function cq(t){let e;try{e=decodeURIComponent(t)}catch{throw vd(Ks.DATA_URL,"Malformed data URL.")}return bO(e)}function AO(t,e){switch(t){case Ks.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw vd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ks.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw vd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=aq(e)}catch(s){throw s.message.includes("polyfill")?s:vd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class xO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vd(Ks.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=hq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function uq(t){const e=new xO(t);return e.base64?AO(Ks.BASE64,e.rest):cq(e.rest)}function dq(t){return new xO(t).contentType}function hq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){let r=0,s="";NA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(NA(this.data_)){const r=this.data_,s=oq(r,e,n);return s===null?null:new mi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mi(r,!0)}}static getBlob(...e){if(WE()){const n=e.map(r=>r instanceof mi?r.data_:r);return new mi(iq.apply(null,n))}else{const n=e.map(o=>Ng(o)?lq(Ks.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new mi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){let e;try{e=JSON.parse(t)}catch{return null}return J8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t,e){return e}class cr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||pq}}let Sf=null;function gq(t){return!Ng(t)||t.length<2?t:PO(t)}function qE(){if(Sf)return Sf;const t=[];t.push(new cr("bucket")),t.push(new cr("generation")),t.push(new cr("metageneration")),t.push(new cr("name","fullPath",!0));function e(i,o){return gq(o)}const n=new cr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new cr("size");return s.xform=r,t.push(s),t.push(new cr("timeCreated")),t.push(new cr("updated")),t.push(new cr("md5Hash",null,!0)),t.push(new cr("cacheControl",null,!0)),t.push(new cr("contentDisposition",null,!0)),t.push(new cr("contentEncoding",null,!0)),t.push(new cr("contentLanguage",null,!0)),t.push(new cr("contentType",null,!0)),t.push(new cr("metadata","customMetadata",!0)),Sf=t,Sf}function yq(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new qr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function vq(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return yq(r,t),r}function CO(t,e,n){const r=RO(e);return r===null?null:vq(t,r,n)}function wq(t,e,n,r){const s=RO(e);if(s===null||!Ng(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=Oh(f,n,r),I=SO({alt:"media",token:c});return m+I})[0]}function kO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class hu{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){if(!t)throw zE()}function HE(t,e){function n(r,s){const i=CO(t,s,e);return Si(i!==null),i}return n}function _q(t,e){function n(r,s){const i=CO(t,s,e);return Si(i!==null),wq(i,s,t.host,t._protocol)}return n}function Lh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=M8():s=V8():n.getStatus()===402?s=L8(t.bucket):n.getStatus()===403?s=F8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function NO(t){const e=Lh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=O8(t.path)),i.serverResponse=s.serverResponse,i}return n}function Eq(t,e,n){const r=e.fullServerUrl(),s=Oh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hu(s,i,HE(t,n),o);return a.errorHandler=NO(e),a}function Iq(t,e,n){const r=e.fullServerUrl(),s=Oh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hu(s,i,_q(t,n),o);return a.errorHandler=NO(e),a}function Sq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function DO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Sq(null,e)),r}function OO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let x=0;x<2;x++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=DO(e,r,s),d=kO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=mi.getBlob(h,r,f);if(m===null)throw EO();const I={name:c.fullPath},p=Oh(i,t.host,t._protocol),v="POST",_=t.maxUploadRetryTime,y=new hu(p,v,HE(t,n),_);return y.urlParams=I,y.headers=o,y.body=m.uploadData(),y.errorHandler=Lh(e),y}class Sp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function KE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Si(!1)}return Si(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Tq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=DO(e,r,s),a={name:o.fullPath},l=Oh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=kO(o,n),f=t.maxUploadRetryTime;function m(p){KE(p);let v;try{v=p.getResponseHeader("X-Goog-Upload-URL")}catch{Si(!1)}return Si(Ng(v)),v}const I=new hu(l,c,m,f);return I.urlParams=a,I.headers=d,I.body=h,I.errorHandler=Lh(e),I}function bq(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=KE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Si(!1)}h||Si(!1);const f=Number(h);return Si(!isNaN(f)),new Sp(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new hu(n,o,i,a);return l.headers=s,l.errorHandler=Lh(e),l}const OA=256*1024;function Aq(t,e,n,r,s,i,o,a){const l=new Sp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw B8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const I={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,f);if(p===null)throw EO();function v(x,P){const L=KE(x,["active","final"]),A=l.current+d,T=r.size();let R;return L==="final"?R=HE(e,i)(x,P):R=null,new Sp(A,T,L==="final",R)}const _="POST",y=e.maxUploadRetryTime,w=new hu(n,_,v,y);return w.headers=I,w.body=p.uploadData(),w.progressCallback=a||null,w.errorHandler=Lh(t),w}const Tr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gy(t){switch(t){case"running":case"pausing":case"canceling":return Tr.RUNNING;case"paused":return Tr.PAUSED;case"success":return Tr.SUCCESS;case"canceled":return Tr.CANCELED;case"error":return Tr.ERROR;default:return Tr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e,n,r){if(Y8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Rq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Vu("cannot .send() more than once");if(Mi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Pq extends Rq{initXhr(){this.xhr_.responseType="text"}}function va(){return new Pq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=qE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ut.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(TO(s.status,[]))if(i)s=wO();else{this.sleepTime=Math.max(this.sleepTime*2,D8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ut.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Tq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=bq(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,va,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=OA*this._chunkMultiplier,n=new Sp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Aq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,va,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){OA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Eq(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=OO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=_O(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Gy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new xq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Gy(this._state)){case Tr.SUCCESS:bl(this._resolve.bind(null,this.snapshot))();break;case Tr.CANCELED:case Tr.ERROR:const n=this._reject;bl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Gy(this._state)){case Tr.RUNNING:case Tr.PAUSED:e.next&&bl(e.next.bind(e,this.snapshot))();break;case Tr.SUCCESS:e.complete&&bl(e.complete.bind(e))();break;case Tr.CANCELED:case Tr.ERROR:e.error&&bl(e.error.bind(e,this._error))();break;default:e.error&&bl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this._service=e,n instanceof qr?this._location=n:this._location=qr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ol(e,n)}get root(){const e=new qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PO(this._location.path)}get storage(){return this._service}get parent(){const e=fq(this._location.path);if(e===null)return null;const n=new qr(this._location.bucket,e);return new ol(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw q8(e)}}function kq(t,e,n){t._throwIfRoot("uploadBytes");const r=OO(t.storage,t._location,qE(),new mi(e,!0),n);return t.storage.makeRequestWithTokens(r,va).then(s=>({metadata:s,ref:t}))}function Nq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Cq(t,new mi(e),n)}function Dq(t){t._throwIfRoot("getDownloadURL");const e=Iq(t.storage,t._location,qE());return t.storage.makeRequestWithTokens(e,va).then(n=>{if(n===null)throw z8();return n})}function Oq(t,e){const n=mq(t._location.path,e),r=new qr(t._location.bucket,n);return new ol(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){return/^[A-Za-z]+:\/\//.test(t)}function Vq(t,e){return new ol(t,e)}function LO(t,e){if(t instanceof GE){const n=t;if(n._bucket==null)throw $8();const r=new ol(n,n._bucket);return e!=null?LO(r,e):r}else return e!==void 0?Oq(t,e):t}function Mq(t,e){if(e&&Lq(e)){if(t instanceof GE)return Vq(t,e);throw n_("To use ref(service, url), the first argument must be a Storage instance.")}else return LO(t,e)}function LA(t,e){const n=e==null?void 0:e[vO];return n==null?null:qr.makeFromBucketSpec(n,t)}function Fq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Mi(e);s&&(L0(`https://${t.host}/b`),JC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:b$(i,t.app.options.projectId))}class GE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=yO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=k8,this._maxUploadRetryTime=N8,this._requests=new Set,s!=null?this._bucket=qr.makeFromBucketSpec(s,this._host):this._bucket=LA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qr.makeFromBucketSpec(this._url,e):this._bucket=LA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ol(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new H8(IO());{const o=rq(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const VA="@firebase/storage",MA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="storage";function BG(t,e,n){return t=mt(t),kq(t,e,n)}function Uq(t,e,n){return t=mt(t),Nq(t,e,n)}function jq(t){return t=mt(t),Dq(t)}function $q(t,e){return t=mt(t),Mq(t,e)}function MO(t=ik(),e){t=mt(t);const r=ig(t,VO).getImmediate({identifier:e}),s=QC("storage");return s&&Bq(r,...s),r}function Bq(t,e,n,r={}){Fq(t,e,n,r)}function zq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new GE(n,r,s,e,wh)}function Wq(){ei(new Rs(VO,zq,"PUBLIC").setMultipleInstances(!0)),Gr(VA,MA,""),Gr(VA,MA,"esm2020")}Wq();const qq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},r_={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:r_.projectId,authDomain:r_.authDomain,emulatorMode:!1});const Dg=sk(r_);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Pt=DB(Dg,{persistence:[xk,Aw]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const Q=JD(Dg,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{Bk("error")}catch{}const Hq=P8(Dg,"us-central1");MO(Dg);console.log(" Firebase initialized successfully");const Kq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(Kq,100);let fa=0;const Qy=3,Gq=1e3,FO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&fa<Qy){fa++;const r=Math.min(Gq*Math.pow(2,fa-1),1e4);console.log(` Attempting to reconnect (${fa}/${Qy}) in ${r}ms...`);try{await OE(Q),await new Promise(s=>setTimeout(s,r)),await DE(Q),console.log(" Firestore reconnected successfully"),fa=0}catch(s){console.error(" Failed to reconnect:",s),fa>=Qy&&(console.error(" Maximum reconnection attempts reached."),Qq())}}},Qq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await DE(Q),fa=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await OE(Q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(FO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Gt=Object.freeze(Object.defineProperty({__proto__:null,auth:Pt,db:Q,functions:Hq,handleFirestoreError:FO},Symbol.toStringTag,{value:"Module"})),et=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Yq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},al=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>al(n)).filter(n=>n!==void 0);if(t instanceof Date||!Yq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=al(r);s!==void 0&&(e[n]=s)}return e},im={async create(t){await ln(Pe(Q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Me()})},async getById(t){const e=Pe(Q,"profiles",t),n=await Yt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:et(r.createdAt)}}return null},async update(t,e){const n=Pe(Q,"profiles",t);await In(n,{...e,updatedAt:Me()})},async getByShopId(t){const e=je(Ne(Q,"profiles"),Ve("shopId","==",t));return(await Qe(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:et(s.createdAt)}})}},s_={async create(t){return(await Js(Ne(Q,"referrals"),{...t,createdAt:Me(),updatedAt:Me()})).id},async getByReferrerId(t){try{const e=je(Ne(Q,"referrals"),Ve("referrerId","==",t),Do("createdAt","desc"));return(await Qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt),updatedAt:et(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=je(Ne(Q,"referrals"),Ve("referrerId","==",t));return(await Qe(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:et(i.data().createdAt),updatedAt:et(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=je(Ne(Q,"referrals"),Ve("referralCode","==",t),uu(1)),n=await Qe(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:et(r.data().createdAt),updatedAt:et(r.data().updatedAt)}},async updateStatus(t,e){await In(Pe(Q,"referrals",t),{status:e,updatedAt:Me()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},UO={async getByUserId(t){const e=je(Ne(Q,"profiles"),Ve("userId","==",t)),n=await Qe(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:et(s.createdAt),updatedAt:et(s.updatedAt)}}return null},async update(t,e){const n=je(Ne(Q,"profiles"),Ve("userId","==",t)),r=await Qe(n);if(!r.empty){const s=Pe(Q,"profiles",r.docs[0].id);await In(s,{...e,updatedAt:Me()})}}},vo={async create(t){return(await Js(Ne(Q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Me(),updatedAt:Me()})).id},async getByMerchantId(t){const e=je(Ne(Q,"merchantWallets"),Ve("merchantUserId","==",t)),r=(await Qe(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=je(Ne(Q,"wallets"),Ve("userId","==",t));return(await Qe(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=Pe(Q,"merchantWallets",t),n=await Yt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:et(r.createdAt),updatedAt:et(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=je(Ne(Q,"merchantWallets"),Ve("iccid","==",t)),n=await Qe(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:et(s.createdAt),updatedAt:et(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=je(Ne(Q,"merchantWallets"),Ve("msisdn","==",t)),r=await Qe(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}const s=je(Ne(Q,"merchantWallets")),i=await Qe(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Pe(Q,"merchantWallets",t);await In(n,{...e,updatedAt:Me()})},async updateUsage(t,e,n){const r=Pe(Q,"merchantWallets",t),s={updatedAt:Me()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await In(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=je(Ne(Q,"merchantWallets"),Ve("msisdn","in",o)),c=(await Qe(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await In(d.ref,{merchantUserId:e,updatedAt:Me()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Pe(Q,"merchantWallets",t);await Mn(e)}},QE={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await te(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>Oa);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Me(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Js(Ne(Q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await te(async()=>{const{ProfitService:d}=await import("./profitService-CQSlHJ0c.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await vo.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),m=Number(t.amount||0),I=String((t==null?void 0:t.originType)||"").trim()==="withdraw",p=String(t.txnType||"")==="receive";I||p?await vo.updateUsage(c,void 0,f+m):await vo.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const p=await vo.getById(h);m=String((p==null?void 0:p.msisdn)||(p==null?void 0:p.label)||h).trim()}catch{}let I="";f==="withdraw"?I=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?I=`   ${c}   ${m||" "}   ${d||""}    ${r}`:I=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=je(Ne(Q,"transactions"),Ve("shopId","==",t),Do("createdAt","desc"));return(await Qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt),confirmedAt:r.data().confirmedAt?et(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=je(Ne(Q,"transactions"),Ve("merchantUserId","==",t),Do("createdAt","desc"));return(await Qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt),confirmedAt:r.data().confirmedAt?et(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=je(Ne(Q,"transactions"),Ve("merchantUserId","==",t)),n=je(Ne(Q,"transactions"),Ve("userId","==",t)),[r,s]=await Promise.all([Qe(e),Qe(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:et(c.createdAt),confirmedAt:c.confirmedAt?et(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=Pe(Q,"transactions",t);await In(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function Jq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await QE.create(e);try{const{calculateCommission:r}=await te(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>Oa);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Br.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await te(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>Oa);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Br.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Br.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await te(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>l_);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const Xq="https://summer-cake-5149.alkaptin2030.workers.dev",jO={async getTelegramWorkerUrl(){var t;try{const e=Pe(Q,"systemSettings","core"),n=await Yt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Pe(Q,"systemSettings","core");await ln(e,{telegramWorkerUrl:t,updatedAt:Me()},{merge:!0})}},Zq={async send(t,e){try{const n=await Br.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await jO.getTelegramWorkerUrl()||Xq).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},eH={async log(t,e,n,r,s){await Js(Ne(Q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Me()})},async getLogs(t=100){const e=je(Ne(Q,"auditLogs"),Do("createdAt","desc"),uu(t));return(await Qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=je(Ne(Q,"deletedTransactions"),Do("deletedAt","desc"));return(await Qe(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:et(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=je(Ne(Q,"deletedTransactions"),Ve("userId","==",t),Do("deletedAt","desc"));return(await Qe(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:et(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=je(Ne(Q,"deletedTransactions"),Ve("userId","==",t));return(await Qe(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:et(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Me(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Js(Ne(Q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=je(Ne(Q,"deletedTransactions"),Ve("originalTransactionId","==",t),Ve("userId","==",e)),r=await Qe(n);r.empty?await Js(Ne(Q,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Me()}):await Promise.all(r.docs.map(s=>In(s.ref,{permanent:!0,deletedAt:Me()}))),console.log("    :",t);try{const s=je(Ne(Q,"userTransactions"),Ve("userId","==",e)),o=(await Qe(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Mn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Pe(Q,"transactions",t);(await Yt(s)).exists()&&(console.log("     transactions  "),await Mn(s));const o=je(Ne(Q,"transactions"),Ve("transactionId","==",t)),a=await Qe(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Mn(d.ref))));const l=je(Ne(Q,"transactions"),Ve("originalTransactionId","==",t)),c=await Qe(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Mn(d.ref))));try{const d=je(Ne(Q,"deletedTransactions"),Ve("userId","==",e),Ve("originalTransactionId","==",t)),h=await Qe(d),f=h.docs.map(I=>{var p;return String(((p=I.data())==null?void 0:p.reference)||"")}).filter(Boolean),m=h.docs.map(I=>{var p;return String(((p=I.data())==null?void 0:p.transactionId)||"")}).filter(Boolean);for(const I of f){const p=je(Ne(Q,"transactions"),Ve("reference","==",I)),v=await Qe(p);v.empty||(console.log(`  ${v.size}   transactions  reference=${I}`),await Promise.all(v.docs.map(_=>Mn(_.ref))))}for(const I of m){try{const _=Pe(Q,"transactions",I);(await Yt(_)).exists()&&(console.log("     transactions  :",I),await Mn(_))}catch{}const p=je(Ne(Q,"transactions"),Ve("transactionId","==",I)),v=await Qe(p);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${I}`),await Promise.all(v.docs.map(_=>Mn(_.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},$O={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=Pe(Q,"daily_reports_archive",e);return await ln(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Me()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=je(Ne(Q,"daily_reports_archive"),Ve("userId","==",t),uu(e)),a=await Qe(o);let l=[];try{l=(await Qe(je(Ne(Q,"deletedDailyArchives"),Ve("userId","==",t)))).docs.map(I=>{var p,v;return{id:I.id,reportDate:String(((p=I.data())==null?void 0:p.reportDate)||""),archiveId:String(((v=I.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(m,I)=>l.some(p=>p.archiveId&&p.archiveId===m||p.reportDate&&p.reportDate===I),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:et(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const I=h.get(m.reportDate);(!I||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=I.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,I)=>m.reportDate<I.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=je(Ne(Q,"daily_reports_archive"),Ve("userId","==",t)),s=await Qe(r);let i=0;for(const o of s.docs){const a=et(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Mn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=je(Ne(Q,"daily_reports_archive"),Ve("userId","==",t)),s=(await Qe(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:et(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Mn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=je(Ne(Q,"daily_reports_archive"),Ve("userId","==",t)),n=await Qe(e);let r=0;for(const s of n.docs)try{await Mn(s.ref),r++}catch{const o=s.data();try{await Js(Ne(Q,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Me()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Br={async getUserData(t){try{console.log("     :",{userId:t});const e=Pe(Q,"users",t),n=await Yt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:et(r.createdAt),updatedAt:et(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=je(Ne(Q,"deletedTransactions"),Ve("userId","==",t));return Oi(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data();if(!((i==null?void 0:i.permanent)===!0))return;const a=String((i==null?void 0:i.originalTransactionId)||""),l=String((i==null?void 0:i.transactionId)||""),c=String((i==null?void 0:i.reference)||"");a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptById(t,l),c&&this.removeLocalReceiptByRef(t,c)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=Pe(Q,"users",t),r=al(e);await ln(n,{...r||{},updatedAt:Me()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Pe(Q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=al(r);let i={};try{const l=await Yt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Me()};console.log("   :",o);let a=3;for(;a>0;)try{await ln(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=je(Ne(Q,"userTransactions"),Ve("userId","==",t),Do("createdAt","desc"),uu(200));e=await Qe(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=je(Ne(Q,"userTransactions"),Ve("userId","==",t));e=await Qe(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:et(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=je(Ne(Q,"deletedTransactions"),Ve("userId","==",t),Ve("reference","==",o));if(!(await Qe(a)).empty)return console.log("          ."),"skip-deleted"}{const a=je(Ne(Q,"deletedTransactions"),Ve("userId","==",t),Ve("permanent","==",!0)),l=await Qe(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),m=String(f.originalTransactionId||f.transactionId||h.id||""),I=String(f.reference||"");return m&&c.includes(m)||I&&c.includes(I)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=je(Ne(Q,"userTransactions"),Ve("userId","==",t));if(s.transactionId){const a=je(Ne(Q,"userTransactions"),Ve("userId","==",t),Ve("transactionId","==",s.transactionId)),l=await Qe(a);if(!l.empty){const c=l.docs[0];return await In(Pe(Q,"userTransactions",c.id),{...s,uploadedAt:Me()}),c.id}}if(s.reference){const a=je(Ne(Q,"userTransactions"),Ve("userId","==",t),Ve("reference","==",s.reference)),l=await Qe(a);if(!l.empty){const c=l.docs[0];return await In(Pe(Q,"userTransactions",c.id),{...s,uploadedAt:Me()}),c.id}}}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Js(Ne(Q,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Me(),uploadedAt:Me()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Pe(Q,"userTransactions",e),a=await Yt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Mn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=je(Ne(Q,"userTransactions"),Ve("userId","==",t)),r=await Qe(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[je(Ne(Q,"userTransactions"),Ve("merchantUserId","==",t)),je(Ne(Q,"userTransactions"),Ve("createdBy","==",t))];for(const o of i)try{const l=(await Qe(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Mn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Pe(Q,"transactions",e);if((await Yt(a)).exists())console.log("     transactions   "),await Mn(a);else{const c=je(Ne(Q,"transactions"),Ve("transactionId","==",e)),d=await Qe(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Mn(m.ref))));const h=je(Ne(Q,"transactions"),Ve("originalTransactionId","==",e)),f=await Qe(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Mn(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},i_={async getToday(t){const e=Pe(Q,"dailyStats",t,"today","data"),n=await Yt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Pe(Q,"dailyStats",t,"today","data");await ln(n,{...al(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Pe(Q,"dailyStats",t,"history",e);await ln(r,al(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},tH={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Me()};return(await Js(Ne(Q,"installments"),n)).id},listenByUser(t,e){const n=je(Ne(Q,"installments"),Ve("userId","==",t));return Oi(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await In(Pe(Q,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Mn(Pe(Q,"installments",t)),!0}},Mu=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:tH,auditLogService:eH,dailyReportsArchiveService:$O,dailyStatsService:i_,merchantWalletService:vo,profileService:im,profileServiceExtra:UO,recordAutoTransaction:Jq,referralService:s_,sanitizeFirestoreData:al,systemSettingsService:jO,telegramNotifier:Zq,transactionService:QE,userDataService:Br},Symbol.toStringTag,{value:"Module"}));var wa=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(wa||{});const wd=t=>{if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();if(t.seconds!==void 0&&typeof t.seconds=="number")return new Date(t.seconds*1e3);const e=new Date(t);return isNaN(e.getTime())?null:e},nH=(t,e=new Date)=>{const n=wd(e)||new Date;switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Tf=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const r=new Date,s=wd(t.activatedAt);return s&&r.getTime()-s.getTime()<4*60*60*1e3,!0}const e=new Date,n=wd(t.endDate);if(!n){const r=wd(t.activatedAt);return r&&e.getTime()-r.getTime()<4*60*60*1e3,!0}return e<=n},rH=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=wd(t.endDate);if(!n)return null;const r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},zG=async(t,e,n,r)=>{try{const s=new Date,i=nH(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Pe(Q,"users",t);if(await In(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},sH=async t=>{try{const e=Pe(Q,"users",t);await In(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},iH=async t=>{try{const e=Pe(Q,"users",t),n=await Yt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},WG=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},qG=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=rH(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},HG=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var $c;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})($c||($c={}));class Yy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const oH=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},aH=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:oH(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const I=s(),p=a(h);let v;const _=async()=>(!v&&I in f?v=typeof f[I]=="function"?v=await f[I]():v=f[I]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),y=(T,R)=>{var C,D;if(p){const O=p==null?void 0:p.methods.find(k=>R===k.name);if(O)return O.rtype==="promise"?k=>n.nativePromise(h,R.toString(),k):(k,z)=>n.nativeCallback(h,R.toString(),k,z);if(T)return(C=T[R])===null||C===void 0?void 0:C.bind(T)}else{if(T)return(D=T[R])===null||D===void 0?void 0:D.bind(T);throw new Yy(`"${h}" plugin is not implemented on ${I}`,$c.Unimplemented)}},w=T=>{let R;const C=(...D)=>{const O=_().then(k=>{const z=y(k,T);if(z){const re=z(...D);return R=re==null?void 0:re.remove,re}else throw new Yy(`"${h}.${T}()" is not implemented on ${I}`,$c.Unimplemented)});return T==="addListener"&&(O.remove=async()=>R()),O};return C.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:T,writable:!1,configurable:!1}),C},x=w("addListener"),P=w("removeListener"),L=(T,R)=>{const C=x({eventName:T},R),D=async()=>{const k=await C;P({eventName:T,callbackId:k},R)},O=new Promise(k=>C.then(()=>k({remove:D})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},O},A=new Proxy({},{get(T,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?L:x;case"removeListener":return P;default:return w(R)}}});return r[h]=A,c.set(h,{name:h,proxy:A,platforms:new Set([...Object.keys(f),...p?[I]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Yy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},lH=t=>t.Capacitor=aH(t),Ee=lH(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Og=Ee.registerPlugin;class BO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Ee.Exception(e,$c.Unimplemented)}unavailable(e="not available"){return new Ee.Exception(e,$c.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const FA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),UA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class cH extends BO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=UA(s).trim(),i=UA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=FA(e.key),r=FA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Og("CapacitorCookies",{web:()=>new cH});const uH=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),dH=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},hH=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,fH=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=dH(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class mH extends BO{async request(e){const n=fH(e,e.webFetchExtra),r=hH(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await uH(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Og("CapacitorHttp",{web:()=>new mH});const _a=Og("Preferences",{web:()=>te(()=>import("./web-BK6Olry_.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Jy=Object.freeze(Object.defineProperty({__proto__:null,Preferences:_a},Symbol.toStringTag,{value:"Module"})),pH={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},zO=b.createContext(void 0);function ml(){const t=b.useContext(zO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const gH=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(null),[i,o]=b.useState(null),[a,l]=b.useState(!1),[c,d]=b.useState(!0),h=b.useRef(null),f=async T=>{var R,C,D,O,k,z,re,de,_e,B,H,Z,J,we,M,ye;try{const Fe=Pe(Q,"profiles",T);let $e=!1;try{const He=await dO(Fe);if(He.exists()){const Oe=He.data(),qe={userId:He.id,shopId:Oe.shopId,role:Oe.role,fullName:Oe.fullName,phone:Oe.phone,shopName:Oe.shopName||null,approved:Oe.approved,avatarId:Oe.avatarId,bridgeLink:Oe.bridgeLink||null,bridgeDeviceId:Oe.bridgeDeviceId||null,showWithdrawNote:Oe.showWithdrawNote!==void 0?!!Oe.showWithdrawNote:!0,isReceiptNoteEnabled:Oe.isReceiptNoteEnabled!==void 0?!!Oe.isReceiptNoteEnabled:!0,smsReadingEnabled:Oe.smsReadingEnabled!==void 0?!!Oe.smsReadingEnabled:!1,smsAutoRegisterEnabled:Oe.smsAutoRegisterEnabled!==void 0?!!Oe.smsAutoRegisterEnabled:!1,createdAt:((C=(R=Oe.createdAt)==null?void 0:R.toDate)==null?void 0:C.call(R))||new Date,updatedAt:((O=(D=Oe.updatedAt)==null?void 0:D.toDate)==null?void 0:O.call(D))||new Date,trialStarted:Oe.trialStarted||!1,trialStartDate:(z=(k=Oe.trialStartDate)==null?void 0:k.toDate)==null?void 0:z.call(k),trialEndDate:(de=(re=Oe.trialEndDate)==null?void 0:re.toDate)==null?void 0:de.call(re),trialExpired:Oe.trialExpired||!1};s(qe),$e=!0,d(!1)}}catch(He){console.log("Cache profile not available:",(He==null?void 0:He.code)||He)}try{if(!$e){const He=localStorage.getItem(`profile_cache_${T}`);if(He){const Oe=JSON.parse(He);s(Oe),$e=!0,d(!1)}}}catch{}if(!$e)for(let He=0;He<3;He++)try{const Oe=await Yt(Fe);if(Oe.exists()){const qe=Oe.data(),Dt={userId:Oe.id,shopId:qe.shopId,role:qe.role,fullName:qe.fullName,phone:qe.phone,sim1Number:qe.sim1Number||null,sim2Number:qe.sim2Number||null,shopName:qe.shopName||null,approved:qe.approved,avatarId:qe.avatarId,bridgeLink:qe.bridgeLink||null,bridgeDeviceId:qe.bridgeDeviceId||null,showWithdrawNote:qe.showWithdrawNote!==void 0?!!qe.showWithdrawNote:!0,isReceiptNoteEnabled:qe.isReceiptNoteEnabled!==void 0?!!qe.isReceiptNoteEnabled:!0,smsReadingEnabled:qe.smsReadingEnabled!==void 0?!!qe.smsReadingEnabled:!1,smsAutoRegisterEnabled:qe.smsAutoRegisterEnabled!==void 0?!!qe.smsAutoRegisterEnabled:!1,createdAt:((B=(_e=qe.createdAt)==null?void 0:_e.toDate)==null?void 0:B.call(_e))||new Date,updatedAt:((Z=(H=qe.updatedAt)==null?void 0:H.toDate)==null?void 0:Z.call(H))||new Date,trialStarted:qe.trialStarted||!1,trialStartDate:(we=(J=qe.trialStartDate)==null?void 0:J.toDate)==null?void 0:we.call(J),trialEndDate:(ye=(M=qe.trialEndDate)==null?void 0:M.toDate)==null?void 0:ye.call(M),trialExpired:qe.trialExpired||!1};s(Dt);try{localStorage.setItem(`profile_cache_${Oe.id}`,JSON.stringify(Dt))}catch{}$e=!0,d(!1);break}}catch{}return Oi(Fe,async He=>{var Oe,qe,Dt,gn,tn,vr,or,Cn;if(He.exists()){const Le=He.data(),yn={userId:He.id,shopId:Le.shopId,role:Le.role,fullName:Le.fullName,phone:Le.phone,sim1Number:Le.sim1Number||null,sim2Number:Le.sim2Number||null,shopName:Le.shopName||null,approved:Le.approved,avatarId:Le.avatarId,bridgeLink:Le.bridgeLink||null,bridgeDeviceId:Le.bridgeDeviceId||null,showWithdrawNote:Le.showWithdrawNote!==void 0?!!Le.showWithdrawNote:!0,isReceiptNoteEnabled:Le.isReceiptNoteEnabled!==void 0?!!Le.isReceiptNoteEnabled:!0,smsReadingEnabled:Le.smsReadingEnabled!==void 0?!!Le.smsReadingEnabled:!1,smsAutoRegisterEnabled:Le.smsAutoRegisterEnabled!==void 0?!!Le.smsAutoRegisterEnabled:!1,createdAt:((qe=(Oe=Le.createdAt)==null?void 0:Oe.toDate)==null?void 0:qe.call(Oe))||new Date,updatedAt:((gn=(Dt=Le.updatedAt)==null?void 0:Dt.toDate)==null?void 0:gn.call(Dt))||new Date,trialStarted:Le.trialStarted||!1,trialStartDate:(vr=(tn=Le.trialStartDate)==null?void 0:tn.toDate)==null?void 0:vr.call(tn),trialEndDate:(Cn=(or=Le.trialEndDate)==null?void 0:or.toDate)==null?void 0:Cn.call(or),trialExpired:Le.trialExpired||!1};s(yn);try{localStorage.setItem(`profile_cache_${He.id}`,JSON.stringify(yn)),yn.shopId&&localStorage.setItem("shopId",yn.shopId),localStorage.setItem(`smsReadingEnabled_${He.id}`,String(yn.smsReadingEnabled)),localStorage.setItem(`smsAutoRegisterEnabled_${He.id}`,String(yn.smsAutoRegisterEnabled))}catch{}$e||($e=!0,d(!1))}else if(!$e)try{const Le=await UO.getByUserId(T);if(Le){const yn={userId:T,shopId:Le.shopId,role:Le.role||"user",fullName:Le.fullName||null,phone:Le.phone||null,shopName:Le.shopName||null,approved:Le.approved??!1,avatarId:Le.avatarId||void 0,bridgeLink:Le.bridgeLink||null,bridgeDeviceId:Le.bridgeDeviceId||null,createdAt:Me(),updatedAt:Me()};await ln(Pe(Q,"profiles",T),yn,{merge:!0}),s({...Le,userId:T,createdAt:Le.createdAt||new Date,updatedAt:Le.updatedAt||new Date})}else await I(T)}catch(Le){console.error("Profile migration/create error:",Le)}finally{$e=!0,d(!1)}},He=>{console.error("Profile listener error:",He);try{d(!1)}catch{}})}catch(Fe){return console.error("Error setting up profile listener:",Fe),await I(T),d(!1),()=>{}}},m=async T=>{try{const R=Pe(Q,"users",T.uid);(await Yt(R)).exists()?(await In(R,{lastLogin:Me(),updatedAt:Me()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",T.uid)):(await ln(R,{email:T.email||"",displayName:T.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Me(),updatedAt:Me(),lastLogin:Me()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",T.uid))}catch(R){console.error(" ensureAdminUserDoc error:",R)}},I=async(T,R,C,D,O)=>{var k,z;try{console.log("Creating default profile for user:",T);const re=s_.generateReferralCode(T);let de=null;const _e={userId:T,shopId:"default-shop",role:"user",fullName:R||" ",phone:C||null,shopName:D||null,approved:!1,referralCode:re,referredBy:O||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(_e),console.log("Created temporary profile:",_e);try{const{doc:B,setDoc:H,serverTimestamp:Z}=await te(async()=>{const{doc:ye,setDoc:Fe,serverTimestamp:$e}=await Promise.resolve().then(()=>Dn);return{doc:ye,setDoc:Fe,serverTimestamp:$e}},void 0,import.meta.url),{db:J}=await te(async()=>{const{db:ye}=await Promise.resolve().then(()=>Gt);return{db:ye}},void 0,import.meta.url),we={email:((k=Pt.currentUser)==null?void 0:k.email)||"",displayName:R||" ",phone:C||null,shopName:D||null,isActive:!1,referralCode:re,referredBy:O||null,createdAt:Z(),lastLogin:null,updatedAt:Z()};if(console.log("Attempting to add user to admin collection with data:",we),await H(B(J,"users",T),we,{merge:!0}),console.log(" User successfully added to admin collection:",we),O)try{const{query:ye,collection:Fe,where:$e,limit:Be,getDocs:He}=await te(async()=>{const{query:gn,collection:tn,where:vr,limit:or,getDocs:Cn}=await Promise.resolve().then(()=>Dn);return{query:gn,collection:tn,where:vr,limit:or,getDocs:Cn}},void 0,import.meta.url),{db:Oe}=await te(async()=>{const{db:gn}=await Promise.resolve().then(()=>Gt);return{db:gn}},void 0,import.meta.url),qe=ye(Fe(Oe,"users"),$e("referralCode","==",O),Be(1)),Dt=await He(qe);Dt.empty?console.log(" Referral code not found in users collection:",O):(de=Dt.docs[0].id,await s_.create({referrerId:de,referredUserId:T,referredUserEmail:((z=Pt.currentUser)==null?void 0:z.email)||"",referralCode:O,status:"completed"}),console.log(" Referral record created successfully for referrer:",de))}catch(ye){console.error(" Error creating referral record:",ye)}const M=await Yt(B(J,"users",T));M.exists()?console.log(" User document verified in Firestore:",M.data()):console.log(" User document not found after creation")}catch(B){console.error(" Error adding user to admin collection:",B)}try{const{addDoc:B,collection:H,serverTimestamp:Z}=await te(async()=>{const{addDoc:Fe,collection:$e,serverTimestamp:Be}=await Promise.resolve().then(()=>Dn);return{addDoc:Fe,collection:$e,serverTimestamp:Be}},void 0,import.meta.url),{db:J}=await te(async()=>{const{db:Fe}=await Promise.resolve().then(()=>Gt);return{db:Fe}},void 0,import.meta.url),M=(await B(H(J,"shops"),{name:D||" ",ownerId:T,createdAt:Z(),updatedAt:Z(),isActive:!0})).id;await im.create({userId:T,shopId:M,role:"user",fullName:" ",phone:null});try{await im.update(T,{referralCode:re,referredBy:de||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(Fe){console.warn(" Failed to update profile with referral fields:",Fe)}const ye=await im.getById(T);ye&&(s(ye),console.log("Updated with Firebase profile:",ye))}catch(B){console.error("Error creating profile:",B),console.log("Using local profile - Firebase unavailable")}}catch(re){console.error("Error creating default profile:",re)}};b.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const T=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const R=localStorage.getItem("demoUser"),C=localStorage.getItem("demoProfile");if(R&&C){console.log(" Found demo user in localStorage");try{const O=JSON.parse(R),k=JSON.parse(C);n(O),s(k),clearTimeout(T),d(!1);return}catch(O){console.error("Error parsing demo user data:",O),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const D=t9(Pt,async O=>{if(console.log(" Auth state changed:",{uid:O==null?void 0:O.uid,email:O==null?void 0:O.email,emailVerified:O==null?void 0:O.emailVerified,timestamp:new Date().toISOString()}),n(O),O){console.log(" User authenticated, starting profile hydration for:",O.uid);try{await _a.set({key:"current_user_id",value:O.uid}),console.log(" Synced current_user_id to Native:",O.uid)}catch(k){console.error("Failed to sync user ID to native:",k)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}f(O.uid),w(),m(O)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await _a.remove({key:"current_user_id"}),await _a.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(T)});return()=>{clearTimeout(T),D()}},[]),b.useEffect(()=>{const T=async()=>{try{await x(),await w()}catch{}};try{window.addEventListener("app:softRefresh",T)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",T)}catch{}}},[e==null?void 0:e.uid]),b.useEffect(()=>{},[e==null?void 0:e.uid,i]),b.useEffect(()=>{if(!(e!=null&&e.uid))return;const T=Br.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{T==null||T()}catch{}}},[e==null?void 0:e.uid]);const p=async(T,R,C,D,O,k)=>{try{const z=(T||"").trim().toLowerCase(),re=(R||"").trim();console.log(" Attempting to sign up user:",z);const de=await XT(Pt,z,re);console.log(" Sign up successful:",de.user.uid),await I(de.user.uid,C,D,O,k),await m(de.user);try{await f(de.user.uid),await w()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(z){console.error(" Sign up error:",z);let re="    ";return z.code==="auth/email-already-in-use"?re="    ":z.code==="auth/weak-password"?re="   ":z.code==="auth/invalid-email"&&(re="   "),{error:{...z,message:re}}}},v=async(T,R)=>{var O;const C=(T||"").trim().toLowerCase(),D=(R||"").trim();try{const k=Z=>Z.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),z=Z=>Z.replace(/[-]/g,J=>String("0123456789"["".indexOf(J)])).replace(/[-]/g,J=>String("0123456789"["".indexOf(J)])),re=Z=>Z.replace(/[0-9]/g,J=>""[Number(J)]),de=Z=>z(k(Z));if(console.log(" Attempting to sign in user:",C),C==="test@example.com"&&D==="123456"){console.log(" Demo user login detected");const Z={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},J={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(Z)),localStorage.setItem("demoProfile",JSON.stringify(J)),n(Z),s(J),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let _e;const B=[de(D),k(D),re(k(D))];let H=null;for(const Z of B)try{Z!==D&&console.log(" Trying password variant"),_e=await YB(Pt,C,Z);break}catch(J){if(H=J,(J==null?void 0:J.code)!=="auth/wrong-password"&&(J==null?void 0:J.code)!=="auth/invalid-credential")throw J}if(!_e)throw H||new Error("auth/invalid-credential");console.log(" Sign in successful:",_e.user.uid);try{if((await Yt(Pe(Q,"deletedUsers",_e.user.uid))).exists())return console.log(" User is deleted, signing out"),await ZT(Pt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(Z){console.error("Error checking deleted users:",Z)}await m(_e.user);try{await f(_e.user.uid),await w()}catch{}return{error:null}}catch(k){if(console.error(" Sign in error:",k),C==="test@example.com"&&k.code==="auth/user-not-found"){console.log(" Creating test user...");try{const de=await XT(Pt,C,D);return console.log(" Test user created:",de.user.uid),await I(de.user.uid," ","01000000000"," "),{error:null}}catch(de){return console.error(" Error creating test user:",de),{error:de}}}let z="    ",re=k==null?void 0:k.code;if(re==="auth/invalid-credential")try{const de=await XB(Pt,((O=k==null?void 0:k.customData)==null?void 0:O.email)||"");Array.isArray(de)&&de.length===0?(re="auth/user-not-found",z="     "):(re="auth/wrong-password",z="   ")}catch{z="      "}else re==="auth/invalid-email"?z="    ":re==="auth/user-not-found"?z="     ":re==="auth/wrong-password"?z="   ":re==="auth/too-many-requests"&&(z="      ");return{error:{...k,code:re,message:z}}}},_=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await ZT(Pt);try{await _a.remove({key:"selected_wallet_id"}),await _a.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(D){console.error(" Failed to clear Preferences:",D)}const C=(()=>{try{const D=typeof window<"u"?window:null,O=!!(D&&D.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),k=typeof window<"u"&&window.location.protocol==="file:",z=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return O||k||z||typeof import.meta<"u"&&pH&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(C)}catch{window.location.href=C}}catch(T){console.error("Sign out error:",T)}},y=async T=>{try{return await QB(Pt,T),{error:null}}catch(R){console.error("Reset password error:",R);let C="        ";return R.code==="auth/user-not-found"?C="     ":R.code==="auth/invalid-email"&&(C="   "),{error:{...R,message:C}}}},w=async()=>{var T,R;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}h.current&&(h.current(),h.current=null),console.log("Checking subscription status for user:",e.uid);try{const C=Pe(Q,"users",e.uid);try{const O=await Yt(C);if(O.exists()){const k=O.data();o(k);const z=((T=k==null?void 0:k.branchPackage)==null?void 0:T.status)==="active";let re=!1;z?re=!0:re=Tf(k.subscription),l(re)}}catch{}const D=Oi(C,async O=>{var k,z,re,de,_e,B,H,Z;if(O.exists()){const J=O.data();o(J),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:J.subscription,subscriptionExists:!!J.subscription,planType:(k=J.subscription)==null?void 0:k.planType,isActive:(z=J.subscription)==null?void 0:z.isActive,startDate:(re=J.subscription)==null?void 0:re.startDate,endDate:(de=J.subscription)==null?void 0:de.endDate,activatedBy:(_e=J.subscription)==null?void 0:_e.activatedBy,activatedAt:(B=J.subscription)==null?void 0:B.activatedAt,isOnFreeTrial:J.isOnFreeTrial,freeTrialEndDate:J.freeTrialEndDate,branchPackageStatus:(H=J==null?void 0:J.branchPackage)==null?void 0:H.status});const we=((Z=J==null?void 0:J.branchPackage)==null?void 0:Z.status)==="active";let M=!1;we?(console.log(" Branch package is active, granting access"),M=!0):M=Tf(J.subscription),l(M),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:M,isOnFreeTrial:J.isOnFreeTrial,hasActiveBranchPackage:we,reason:we?"Branch package active":J.subscription?J.subscription.isActive?J.subscription.planType==="lifetime"?"Lifetime plan":J.subscription.endDate?new Date>new Date(J.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const ye=J.subscription,Fe=ye==null?void 0:ye.planType,$e=ye==null?void 0:ye.endDate,Be=$e!=null&&$e.toDate?$e.toDate():$e?new Date($e):null,He=new Date;ye&&ye.isActive===!0&&Be&&!isNaN(Be.getTime())&&He>Be&&(await sH(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:Fe,endDate:Be}))}catch(ye){console.warn("Failed to auto-deactivate expired subscription:",ye)}}},O=>{console.error(" Subscription listener error:",O),(async()=>{var k;try{const z=await Yt(C);if(z.exists()){const re=z.data();o(re);const de=((k=re==null?void 0:re.branchPackage)==null?void 0:k.status)==="active";let _e=!1;de?_e=!0:_e=Tf(re.subscription),l(_e)}}catch{}})()});return h.current=D,D}catch(C){console.error("Error setting up subscription listener:",C);try{const D=await Yt(Pe(Q,"users",e.uid));if(D.exists()){const O=D.data();o(O);const k=((R=O==null?void 0:O.branchPackage)==null?void 0:R.status)==="active";let z=!1;k?z=!0:z=Tf(O.subscription),l(z)}}catch{}}},x=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await f(e.uid),await w()}catch(T){console.error("Error refreshing profile:",T)}},A={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:p,signIn:v,signOut:_,resetPassword:y,updateUserProfile:async T=>{if(e)try{const R={updatedAt:Me()};if(T.fullName!==void 0&&(R.fullName=T.fullName),T.phone!==void 0&&(R.phone=T.phone),T.sim1Number!==void 0){const C=(T.sim1Number||"").trim();R.sim1Number=C.length?C:null}if(T.sim2Number!==void 0){const C=(T.sim2Number||"").trim();R.sim2Number=C.length?C:null}if(T.bridgeLink!==void 0){const C=(T.bridgeLink||"").trim();R.bridgeLink=C.length?C:null}if(T.bridgeDeviceId!==void 0){const C=(T.bridgeDeviceId||"").trim();R.bridgeDeviceId=C.length?C:null}T.showWithdrawNote!==void 0&&(R.showWithdrawNote=!!T.showWithdrawNote),T.isReceiptNoteEnabled!==void 0&&(R.isReceiptNoteEnabled=!!T.isReceiptNoteEnabled),T.smsReadingEnabled!==void 0&&(R.smsReadingEnabled=!!T.smsReadingEnabled),T.smsAutoRegisterEnabled!==void 0&&(R.smsAutoRegisterEnabled=!!T.smsAutoRegisterEnabled),await In(Pe(Q,"profiles",e.uid),R),await f(e.uid)}catch(R){console.error("Error updating user profile:",R)}},updateAvatarId:async T=>{if(e)try{await In(Pe(Q,"profiles",e.uid),{avatarId:T,updatedAt:Me()}),await f(e.uid)}catch(R){console.error("Error updating avatarId:",R)}},refreshProfile:x,checkSubscriptionStatus:w};return E.jsx(zO.Provider,{value:A,children:t})};function yH(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Lg="Checkbox",[vH]=qc(Lg),[wH,YE]=vH(Lg);function _H(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,m]=c0({prop:n,defaultProp:s??!1,onChange:l,caller:Lg}),[I,p]=b.useState(null),[v,_]=b.useState(null),y=b.useRef(!1),w=I?!!o||!!I.closest("form"):!0,x={checked:f,disabled:i,setChecked:m,control:I,setControl:p,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:Oo(s)?!1:s,isFormControl:w,bubbleInput:v,setBubbleInput:_};return E.jsx(wH,{scope:e,...x,children:EH(h)?h(x):r})}var WO="CheckboxTrigger",qO=b.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:I}=YE(WO,t),p=qn(s,d),v=b.useRef(l);return b.useEffect(()=>{const _=i==null?void 0:i.form;if(_){const y=()=>h(v.current);return _.addEventListener("reset",y),()=>_.removeEventListener("reset",y)}},[i,h]),E.jsx(Zt.button,{type:"button",role:"checkbox","aria-checked":Oo(l)?"mixed":l,"aria-required":c,"data-state":YO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:p,onKeyDown:Ct(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Ct(n,_=>{h(y=>Oo(y)?!0:!y),I&&m&&(f.current=_.isPropagationStopped(),f.current||_.stopPropagation())})})});qO.displayName=WO;var JE=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return E.jsx(_H,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>E.jsxs(E.Fragment,{children:[E.jsx(qO,{...h,ref:e,__scopeCheckbox:n}),f&&E.jsx(QO,{__scopeCheckbox:n})]})})});JE.displayName=Lg;var HO="CheckboxIndicator",KO=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=YE(HO,n);return E.jsx(dl,{present:r||Oo(i.checked)||i.checked===!0,children:E.jsx(Zt.span,{"data-state":YO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});KO.displayName=HO;var GO="CheckboxBubbleInput",QO=b.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:m}=YE(GO,t),I=qn(n,m),p=yH(i),v=oC(r);b.useEffect(()=>{const y=f;if(!y)return;const w=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(w,"checked").set,L=!s.current;if(p!==i&&P){const A=new Event("click",{bubbles:L});y.indeterminate=Oo(i),P.call(y,Oo(i)?!1:i),y.dispatchEvent(A)}},[f,p,i,s]);const _=b.useRef(Oo(i)?!1:i);return E.jsx(Zt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:I,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});QO.displayName=GO;function EH(t){return typeof t=="function"}function Oo(t){return t==="indeterminate"}function YO(t){return Oo(t)?"indeterminate":t?"checked":"unchecked"}const JO=b.forwardRef(({className:t,...e},n)=>E.jsx(JE,{ref:n,className:Hn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:E.jsx(KO,{className:Hn("flex items-center justify-center text-current"),children:E.jsx(UF,{className:"h-4 w-4"})})}));JO.displayName=JE.displayName;const Tp=()=>{const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(!1),[o,a]=b.useState(!1),[l,c]=b.useState(typeof navigator<"u"?!navigator.onLine:!1);b.useEffect(()=>{const x=()=>c(!navigator.onLine);return window.addEventListener("online",x),window.addEventListener("offline",x),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",x)}},[]);const[d,h]=b.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:I,loading:p}=ml(),v=Yc();b.useEffect(()=>{try{m&&!p&&v("/user/dashboard")}catch{}},[m,p,v]),b.useEffect(()=>{try{const x=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;x&&e(x)}catch{}try{const x=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;x==="true"?h(!0):x==="false"&&h(!1)}catch{}(async()=>{var x,P;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const L=await((P=(x=navigator.credentials).get)==null?void 0:P.call(x,{password:!0,mediation:"optional"}));L&&L.type==="password"&&(L.id&&e(L.id),L.password&&r(L.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const L=sessionStorage.getItem("cashy:rememberedPassword");L&&!n&&r(L)}catch{}}catch{}})()},[]);const _=async x=>{if(x.preventDefault(),o){Jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Jn.error("   .      .");return}const P=(t||"").trim().toLowerCase(),L=(n||"").trim();if(console.log("    :",{email:P,password:"***"}),!t||!n){Jn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(P)){Jn.error("    ");return}a(!0);try{try{await e9(Pt,d?xk:s9);try{window.localStorage.setItem("cashy:rememberLogin",d?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:A}=await f(P,L);if(console.log(" SignIn result:",{error:A}),A){console.error("    :",A);const T=A==null?void 0:A.code;T==="auth/user-not-found"?Jn.error("     "):T==="auth/wrong-password"?Jn.error("   "):T==="auth/invalid-credential"?Jn.error("      "):T==="auth/too-many-requests"?Jn.error("      "):Jn.error((A==null?void 0:A.message)||"    ")}else{console.log("    !"),Jn.success("   !");try{if(d&&navigator.credentials&&window.PasswordCredential){const T=new window.PasswordCredential({id:P,name:P,password:L});await navigator.credentials.store(T)}if(d)try{sessionStorage.setItem("cashy:rememberedPassword",L)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(A){console.error("   :",A),Jn.error("   ")}finally{a(!1)}},y=x=>{if(o){x.preventDefault(),x.stopPropagation(),Jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){x.preventDefault(),x.stopPropagation(),Jn.error("   .      .");return}t||Jn.error("   "),n||Jn.error("   ");const P=(t||"").trim().toLowerCase();P&&!/^\S+@\S+\.\S+$/.test(P)&&Jn.error("    ")},w=()=>{v("/user/forgot-password")};return b.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const x=document.documentElement,P=document.body,L=x.style.overflow,A=P.style.overflow,T=x.style.overscrollBehaviorY,R=P.style.overscrollBehaviorY;return x.style.overflow="hidden",P.style.overflow="hidden",x.style.overscrollBehaviorY="none",P.style.overscrollBehaviorY="none",()=>{x.style.overflow=L||"",P.style.overflow=A||"",x.style.overscrollBehaviorY=T||"",P.style.overscrollBehaviorY=R||""}},[]),E.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&E.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:E.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),E.jsx("div",{className:"absolute inset-0 bg-black/40"}),E.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:E.jsx(vU,{className:"w-10 h-10 text-white"})}),E.jsx("div",{className:"flex items-center justify-center mb-2",children:E.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),E.jsx("p",{className:"text-white/80",children:"    "})]}),E.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[E.jsxs("form",{onSubmit:_,className:"space-y-6",autoComplete:"on",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),E.jsxs("div",{className:"relative",children:[E.jsx(GS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),E.jsx(vw,{id:"username",type:"email",placeholder:"  ",value:t,onChange:x=>{const P=x.target.value;e(P);try{window.localStorage.setItem("cashy:lastEmail",P)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),E.jsxs("div",{className:"relative",children:[E.jsx(ZF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),E.jsx(vw,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:x=>r(x.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),E.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?E.jsx(qF,{className:"w-5 h-5"}):E.jsx(KF,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[E.jsx(JO,{id:"rememberLogin",checked:d,onCheckedChange:x=>h(!!x)}),E.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),E.jsx("div",{className:"flex justify-end",children:E.jsxs(ts,{type:"button",variant:"ghost",size:"sm",onClick:w,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[E.jsx(GS,{className:"w-4 h-4 ml-1"}),"  "]})}),E.jsx("button",{type:"submit",onClick:y,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?E.jsxs("div",{className:"flex items-center justify-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):E.jsxs("div",{className:"flex items-center justify-center",children:[E.jsx(DF,{className:"w-5 h-5 ml-2"})," "]})})]}),E.jsxs("div",{className:"mt-6 text-center space-y-3",children:[E.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",E.jsx(h$,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),E.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",E.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",E.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},IH=Object.freeze(Object.defineProperty({__proto__:null,default:Tp},Symbol.toStringTag,{value:"Module"})),SH=()=>{const t=Yc(),e=ri(),{signOut:n,user:r,userSubscription:s}=ml(),{toast:i}=a0(),[o,a]=b.useState(!1),[l,c]=b.useState(!1),d=[{id:"home",label:"",icon:JF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:QF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:LF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:QS,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:kF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:_y,path:"/transactions"},{id:"settings",label:"",icon:YS,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:MF,action:()=>{var _;a(!1);const v=(_=s==null?void 0:s.subscription)==null?void 0:_.planType;if(v===wa.TAHWEELA||v===wa.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:_U,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:zF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:pU,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:_y,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:LP,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:QS,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:$F,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:rU,action:()=>{a(!1);const _=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(_);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:KS,action:async()=>{a(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],m=[{id:"shop-expenses-settings",label:" ",icon:_y,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:YS,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:KS,action:async()=>{c(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],I=(v,_,y,w)=>{var T;const P=((T=s==null?void 0:s.subscription)==null?void 0:T.planType)===wa.TAHWEELA,L=R=>["/user/dashboard","/profile-settings"].includes(R),A=R=>R==="debts";if(y){if(P&&!A(w)&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}y()}else if(_&&v==="/add"){if(P){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!_){if(P&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}t(v)}},p=v=>e.pathname===v;return E.jsxs("div",{className:"mobile-bottom-nav",children:[o&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),E.jsx("div",{className:"quick-actions-bottomsheet",children:E.jsx("div",{className:"quick-actions-grid",children:f.map((v,_)=>E.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var w;if(((w=s==null?void 0:s.subscription)==null?void 0:w.planType)===wa.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":`${_*.06}s`},children:[E.jsx("div",{className:"quick-action-icon",children:E.jsx(v.icon,{className:"action-icon"})}),E.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),l&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),E.jsx("div",{className:"quick-actions-bottomsheet",children:E.jsx("div",{className:"quick-actions-grid",children:m.map((v,_)=>E.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var x;const y=(x=s==null?void 0:s.subscription)==null?void 0:x.planType,w=new Set(["logout","profile-settings"]);if(y===wa.TAHWEELA&&!w.has(v.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":`${_*.06}s`},children:[E.jsx("div",{className:"quick-action-icon",children:E.jsx(v.icon,{className:"action-icon"})}),E.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),E.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(v=>{const _=v.icon,y=p(v.path);return E.jsxs("button",{onClick:()=>I(v.path,v.isSpecial,v.action,v.id),className:`mobile-nav-item ${y?"active":""} ${v.isSpecial?"special":""}`,type:"button","aria-label":v.label,children:[E.jsx("div",{className:`nav-icon-container ${v.isSpecial?"special-icon":""} ${v.isSpecial&&v.id==="add"&&o?"special-open":""}`,children:E.jsx(_,{className:`nav-icon ${y?"active-icon":""} ${v.isSpecial?"special-icon-svg":""} ${v.isSpecial&&v.id==="settings"&&l?"rotated":""}`})}),!v.isSpecial&&E.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:v.label})]},v.id)})})]})};var Dx,Ox;const Ra=(Ox=(Dx=import.meta)==null?void 0:Dx.env)==null?void 0:Ox.VITE_ANDROID_DOWNLOAD_URL;var Lx,Vx;const Pa=(Vx=(Lx=import.meta)==null?void 0:Lx.env)==null?void 0:Vx.VITE_PC_DOWNLOAD_URL;var Mx,Fx;const Ca=(Fx=(Mx=import.meta)==null?void 0:Mx.env)==null?void 0:Fx.VITE_PC32_DOWNLOAD_URL;var Ux,jx;const ka=(jx=(Ux=import.meta)==null?void 0:Ux.env)==null?void 0:jx.VITE_ANDROID_VERSION;var $x,Bx;const Na=(Bx=($x=import.meta)==null?void 0:$x.env)==null?void 0:Bx.VITE_PC_VERSION;var zx,Wx;const Da=(Wx=(zx=import.meta)==null?void 0:zx.env)==null?void 0:Wx.VITE_PC32_VERSION;function hn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function TH(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Ho=["siteContent","appDownloads"],bp=["siteContent","desktop_updates"],Ap=["siteContent","android_updates"],ah="appDownloadsCache";function bH(){try{const e=localStorage.getItem(ah);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||Ra,pcUrl:(n==null?void 0:n.pcUrl)||Pa,pc32Url:(n==null?void 0:n.pc32Url)||Ca,androidVersion:(n==null?void 0:n.androidVersion)||ka,pcVersion:(n==null?void 0:n.pcVersion)||Na,pc32Version:(n==null?void 0:n.pc32Version)||Da,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}}catch{}const t={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:ka,pcVersion:Na,pc32Version:Da};return t.pcVersion||(t.pcVersion=hn(t.pcUrl)),t.androidVersion||(t.androidVersion=hn(t.androidUrl)),t.pc32Version||(t.pc32Version=hn(t.pc32Url)),t}async function AH(){try{const t=await Yt(Pe(Q,Ho[0],Ho[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(ah,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||Ra,pcUrl:(n==null?void 0:n.pcUrl)||Pa,pc32Url:(n==null?void 0:n.pc32Url)||Ca,androidVersion:(n==null?void 0:n.androidVersion)||ka,pcVersion:(n==null?void 0:n.pcVersion)||Na,pc32Version:(n==null?void 0:n.pc32Version)||Da,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}const e={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:ka,pcVersion:Na,pc32Version:Da};return e.pcVersion||(e.pcVersion=hn(e.pcUrl)),e.androidVersion||(e.androidVersion=hn(e.androidUrl)),e.pc32Version||(e.pc32Version=hn(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(ah);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||Ra,pcUrl:(i==null?void 0:i.pcUrl)||Pa,pc32Url:(i==null?void 0:i.pc32Url)||Ca,androidVersion:(i==null?void 0:i.androidVersion)||ka,pcVersion:(i==null?void 0:i.pcVersion)||Na,pc32Version:(i==null?void 0:i.pc32Version)||Da,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=hn(o.pcUrl)),o.androidVersion||(o.androidVersion=hn(o.androidUrl)),o.pc32Version||(o.pc32Version=hn(o.pc32Url)),o}}catch{}const r={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:ka,pcVersion:Na,pc32Version:Da};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}}function xH(t){try{const e=Pe(Q,Ho[0],Ho[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||Ra,pcUrl:(s==null?void 0:s.pcUrl)||Pa,pc32Url:(s==null?void 0:s.pc32Url)||Ca,androidVersion:(s==null?void 0:s.androidVersion)||ka,pcVersion:(s==null?void 0:s.pcVersion)||Na,pc32Version:(s==null?void 0:s.pc32Version)||Da,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=hn(i.pcUrl)),i.androidVersion||(i.androidVersion=hn(i.androidUrl)),i.pc32Version||(i.pc32Version=hn(i.pc32Url));try{localStorage.setItem(ah,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(ah);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function RH(t,e,n,r,s,i=12e4){const o=MO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=$q(o,l);return new Promise((d,h)=>{const f=Uq(c,t);let m=!1;const I=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",p=>{const v=Math.round(p.bytesTransferred/p.totalBytes*100);s&&s(v)},p=>{clearTimeout(I),h(p)},async()=>{try{if(clearTimeout(I),m)return;const p=await jq(c),v={updatedAt:Me(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=p,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=p,r&&(v.pcVersion=r)):(v.pc32Url=p,r&&(v.pc32Version=r));const _=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=ln(Pe(Q,Ho[0],Ho[1]),v,{merge:!0});let w=!1;const x=new Promise(P=>setTimeout(()=>{w=!0,P()},_));try{await Promise.race([y,x])}catch(P){console.warn(" Firestore write error, proceeding with URL only:",P)}w&&console.warn(" Firestore update timed out;             ."),d(p)}catch(p){h(p)}})})}async function PH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Me(),updatedBy:e||"admin"};await ln(Pe(Q,Ho[0],Ho[1]),r,{merge:!0})}async function CH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Me(),updatedBy:e||"admin"};await ln(Pe(Q,bp[0],bp[1]),r,{merge:!0})}function XO(t){try{const e=Pe(Q,bp[0],bp[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function ZO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function kH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Me(),updatedBy:e||"admin"};await ln(Pe(Q,Ap[0],Ap[1]),r,{merge:!0})}function NH(t){try{const e=Pe(Q,Ap[0],Ap[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const DH=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:AH,getCachedOrEnvAppDownloads:bH,listenAndroidUpdates:NH,listenAppDownloads:xH,listenDesktopUpdates:XO,resolveDownloadUrl:TH,selectDesktopUrl:ZO,setAndroidUpdateInfo:kH,setAppDownloadLinks:PH,setDesktopUpdateInfo:CH,uploadAppBinaryResumable:RH},Symbol.toStringTag,{value:"Module"})),OH=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=U.useState(!1),[s,i]=U.useState(!1),[o,a]=U.useState(!1),[l,c]=U.useState(0),[d,h]=U.useState(""),[f,m]=U.useState(!1),I=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(P){console.warn("failed to minimize",P)}},p=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(P){console.warn("failed to close",P)}},v=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(P){console.warn("failed to soft refresh",P),m(!1)}}};if(U.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(P=>{const L=(P==null?void 0:P.percent)==null?0:Number(P.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(P){console.warn("update init failed",P)}},[e,t]),U.useEffect(()=>{const P=XO(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const T=ZO({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(T)}});return()=>{try{P()}catch{}}},[]),!e)return null;const[y,w]=U.useState(!1),x=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),w(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),w(!0))}catch(P){console.warn("window toggle failed",P)}};return E.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[E.jsx("button",{type:"button","aria-label":"",title:"",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:E.jsx(m0,{className:"w-5 h-5"})}),E.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:E.jsx(f0,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),E.jsx("button",{type:"button","aria-label":"",title:"",onClick:I,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:E.jsx(iU,{className:"w-5 h-5"})}),E.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:x,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:E.jsx(fU,{className:"w-5 h-5"})})]})},o_=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=b.useState(`${n}logo.svg`),[i,o]=b.useState(0),a=b.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return E.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:E.jsxs("div",{className:"flex flex-col items-center justify-center",children:[E.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),E.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},jA=Og("AppLauncher",{web:()=>te(()=>import("./web-D3F13_KI.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function LH(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Ee&&Ee.getPlatform()!=="web"&&(jA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Ee&&Ee.getPlatform()!=="web"&&jA.openUrl({url:n})}catch{}}}function e2(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function VH(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?e2(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function KG(t,e,n){const r=e2(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function MH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function FH(t){const e=MH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function GG(t,e,n){const r=VH(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=FH(t||e);LH(r,s)}async function UH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function XE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function jH(t,e,n=0){const r=XE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const Oa=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:XE,calculateProfit:jH},Symbol.toStringTag,{value:"Module"})),$H=t=>t==="withdraw"||t==="receive"?"receive":"send",BH=async t=>{if(!t)return null;const e=je(Ne(Q,"transactions"),Ve("reference","==",t),uu(1)),n=await Qe(e);return n.empty?null:n.docs[0].id},zH=async t=>{var e;try{const n=await _a.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return KH(t||((e=Pt.currentUser)==null?void 0:e.uid)||"")||null},Xy=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await vo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},t2=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await BH(t.reference);if(e)return{id:e,duplicate:!0};const n=$H(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Xy(t.receiverMsisdn);if(o||(o=await Xy(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Xy(a))}r=o||await zH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await QE.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await UH(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=XE(t.amount,n);await Br.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},om=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},a_=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Pt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(p=>om(p)).filter(p=>!!p):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=p=>String(p||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:om(String((p==null?void 0:p.phone)||(p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn):[],d=new Map;for(const p of s){const v=l(p);for(const _ of c){const y=l(_.msisdn);if(_.msisdn===p){d.set(_.walletId,_.msisdn);continue}if(y.slice(-5)===v.slice(-5)){d.set(_.walletId,_.msisdn);continue}}}if(d.size===1){const[p,v]=Array.from(d.entries())[0];return{walletId:p,msisdn:v}}const f=(await vo.getByMerchantId(r)||[]).map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:om(String((p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn),m=[...c,...f],I=new Map;for(const p of s){const v=l(p);for(const _ of m){const y=l(_.msisdn);if(_.msisdn===p){I.set(_.walletId,_.msisdn);continue}if(y.slice(-5)===v.slice(-5)){I.set(_.walletId,_.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",I.size)}catch{}if(I.size===1){const[p,v]=Array.from(I.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:p,msisdn:v})}catch{}return{walletId:p,msisdn:v}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function WH(t,e){try{const n=i=>om(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function qH(t){var e;try{const n=t.userId||((e=Pt.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await a_(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");if(a&&o[a]&&o[a].walletId)return{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")};if(l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId)return{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")};if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";if(t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||""),c){const d=await a_([c],n);if(d)return d}}return null}catch{return null}}function HH(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Pt.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const KH=t=>{var e,n;try{const r=t||((e=Pt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function n2(){return typeof window>"u"?()=>{}:()=>{}}const Ea=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:HH,detectWalletFromSim:WH,identifyWalletBySim:a_,initMobileSmsBridge:n2,processMobileTransactionNotification:t2,resolveWalletBySimOrSlot:qH},Symbol.toStringTag,{value:"Module"})),GH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},QH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},YH=()=>{var t,e;try{const n=((t=Pt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},JH=()=>{var t;try{const e=((t=Pt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Zy=async(t,e)=>{var w;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=GH(n),d=QH(n);if(!c||c<=0)return;const h=((w=Pt.currentUser)==null?void 0:w.uid)||"",f=YH()||void 0,m=JH()||"",I=f||"default-line";if(!h||!f||!m)return;try{const x=await iH(h);if((x==null?void 0:x.planType)===wa.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const p=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,v=`VF-${btoa(unescape(encodeURIComponent(p))).slice(0,24)}`,_=a?"withdraw":l?"transfer":"withdraw",y={type:_,amount:c,provider:"vodafone_cash",shopId:m,lineId:I,walletId:f,senderMsisdn:_==="transfer"&&d||void 0,receiverMsisdn:_==="withdraw"&&d||void 0,reference:v,createdBy:h,merchantUserId:h,note:"  "};try{await t2(y)}catch{}},ws={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Br.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Br.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Br.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=ws.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=ws.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Br.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=ws.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=ws.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=ws.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Br.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},XH=ws,QG=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:XH,reportsService:ws},Symbol.toStringTag,{value:"Module"})),xp={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Pe(Q,"walletLimits",t),s={updatedAt:Me(),ownerId:(n=Pt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await ln(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);try{const s=await Yt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||ht.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:ht.now()};return await ln(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Me(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Me(),updatedAt:Me(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);return await ln(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Me(),updatedAt:Me(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Pe(Q,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Me()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await ln(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=Pe(Q,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:Me()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await ln(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Me(),lastMonthlyReset:Me(),updatedAt:Me(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},l_=Object.freeze(Object.defineProperty({__proto__:null,default:xp,walletDailyLimitsService:xp},Symbol.toStringTag,{value:"Module"}));class ZH{constructor(){_u(this,"intervalId",null);_u(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Pt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await i_.getToday(n);await i_.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await ws.syncReportsDataFromFirebase(e);const n=ws.getReportsData(e);if(!n.lastDailyResetDate||!ws.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Br.getUserTransactions(e),l=y=>{const w=String(y||"").toLowerCase();return["completed","confirmed","success"].includes(w)?"completed":["failed","error"].includes(w)?"failed":["cancelled","canceled"].includes(w)?"cancelled":"pending"},c=(a||[]).filter(y=>{var x,P;const w=(x=y==null?void 0:y.createdAt)!=null&&x.toDate?y.createdAt.toDate():(y==null?void 0:y.createdAt)instanceof Date?y.createdAt:new Date(y==null?void 0:y.createdAt);return((P=w==null?void 0:w.toDateString)==null?void 0:P.call(w))===o&&l(y==null?void 0:y.status)==="completed"}),d=c.length,h=c.reduce((y,w)=>y+Number(w.amount||0),0),f=y=>{const w=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return w==="withdraw"||w==="withdrawal"||w==="receive"},m=y=>{const w=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return w==="send"||w==="transfer"},I=c.filter(f).reduce((y,w)=>{const x=w.withdrawnAmount!==void 0?Number(w.withdrawnAmount):Number(w.amount||0);return y+x},0),p=c.filter(m).reduce((y,w)=>{const x=w.sentAmount!==void 0?Number(w.sentAmount):Number(w.amount||0);return y+x},0),v=c.reduce((y,w)=>y+Number(ws.calculateTransactionProfit(w)||0),0),_=new Date(i).toISOString().slice(0,10);await $O.add({userId:e,reportDate:_,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(I.toFixed(2)),totalSent:Number(p.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",_)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await vo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await xp.resetDailyLimits(i)}catch{}if(r)try{await xp.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const $A=new ZH,ev=768;function eK(){const[t,e]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${ev-1}px)`),r=()=>{e(window.innerWidth<ev)};return n.addEventListener("change",r),e(window.innerWidth<ev),()=>n.removeEventListener("change",r)},[]),!!t}function tK(){const[t,e]=b.useState("default"),[n,r]=b.useState(!1);return b.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const r2=b.createContext(void 0);function nK({children:t}){const{profile:e,user:n,loading:r}=ml(),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(!0);b.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),b.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const I=localStorage.getItem(m);i(I||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const I=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==I))try{const p=localStorage.getItem(I);i(p||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return E.jsx(r2.Provider,{value:d,children:t})}function rK(){const t=b.useContext(r2);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var tv="focusScope.autoFocusOnMount",nv="focusScope.autoFocusOnUnmount",BA={bubbles:!1,cancelable:!0},sK="FocusScope",s2=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=b.useState(null),c=Xs(s),d=Xs(i),h=b.useRef(null),f=qn(e,p=>l(p)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let p=function(w){if(m.paused||!a)return;const x=w.target;a.contains(x)?h.current=x:eo(h.current,{select:!0})},v=function(w){if(m.paused||!a)return;const x=w.relatedTarget;x!==null&&(a.contains(x)||eo(h.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const P of w)P.removedNodes.length>0&&eo(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,m.paused]),b.useEffect(()=>{if(a){WA.add(m);const p=document.activeElement;if(!a.contains(p)){const _=new CustomEvent(tv,BA);a.addEventListener(tv,c),a.dispatchEvent(_),_.defaultPrevented||(iK(uK(i2(a)),{select:!0}),document.activeElement===p&&eo(a))}return()=>{a.removeEventListener(tv,c),setTimeout(()=>{const _=new CustomEvent(nv,BA);a.addEventListener(nv,d),a.dispatchEvent(_),_.defaultPrevented||eo(p??document.body,{select:!0}),a.removeEventListener(nv,d),WA.remove(m)},0)}}},[a,c,d,m]);const I=b.useCallback(p=>{if(!n&&!r||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,_=document.activeElement;if(v&&_){const y=p.currentTarget,[w,x]=oK(y);w&&x?!p.shiftKey&&_===x?(p.preventDefault(),n&&eo(w,{select:!0})):p.shiftKey&&_===w&&(p.preventDefault(),n&&eo(x,{select:!0})):_===y&&p.preventDefault()}},[n,r,m.paused]);return E.jsx(Zt.div,{tabIndex:-1,...o,ref:f,onKeyDown:I})});s2.displayName=sK;function iK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(eo(r,{select:e}),document.activeElement!==n)return}function oK(t){const e=i2(t),n=zA(e,t),r=zA(e.reverse(),t);return[n,r]}function i2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zA(t,e){for(const n of t)if(!aK(n,{upTo:e}))return n}function aK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lK(t){return t instanceof HTMLInputElement&&"select"in t}function eo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lK(t)&&e&&t.select()}}var WA=cK();function cK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=qA(t,e),t.unshift(e)},remove(e){var n;t=qA(t,e),(n=t[0])==null||n.resume()}}}function qA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function uK(t){return t.filter(e=>e.tagName!=="A")}var rv=0;function dK(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??HA()),document.body.insertAdjacentElement("beforeend",t[1]??HA()),rv++,()=>{rv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),rv--}},[])}function HA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var zs=function(){return zs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zs.apply(this,arguments)};function o2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function hK(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var am="right-scroll-bar-position",lm="width-before-scroll-bar",fK="with-scroll-bars-hidden",mK="--removed-body-scroll-bar-size";function sv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pK(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var gK=typeof window<"u"?b.useLayoutEffect:b.useEffect,KA=new WeakMap;function yK(t,e){var n=pK(null,function(r){return t.forEach(function(s){return sv(s,r)})});return gK(function(){var r=KA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||sv(a,null)}),i.forEach(function(a){s.has(a)||sv(a,o)})}KA.set(n,t)},[t]),n}function vK(t){return t}function wK(t,e){e===void 0&&(e=vK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function _K(t){t===void 0&&(t={});var e=wK(null);return e.options=zs({async:!0,ssr:!1},t),e}var a2=function(t){var e=t.sideCar,n=o2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,zs({},n))};a2.isSideCarExport=!0;function EK(t,e){return t.useMedium(e),a2}var l2=_K(),iv=function(){},Vg=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:iv,onWheelCapture:iv,onTouchMoveCapture:iv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,I=t.noIsolation,p=t.inert,v=t.allowPinchZoom,_=t.as,y=_===void 0?"div":_,w=t.gapMode,x=o2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=f,L=yK([n,e]),A=zs(zs({},x),s);return b.createElement(b.Fragment,null,d&&b.createElement(P,{sideCar:l2,removeScrollBar:c,shards:h,noRelative:m,noIsolation:I,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?b.cloneElement(b.Children.only(a),zs(zs({},A),{ref:L})):b.createElement(y,zs({},A,{className:l,ref:L}),a))});Vg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vg.classNames={fullWidth:lm,zeroRight:am};var IK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=IK();return e&&t.setAttribute("nonce",e),t}function TK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function bK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var AK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=SK())&&(TK(e,n),bK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},xK=function(){var t=AK();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},c2=function(){var t=xK(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},RK={left:0,top:0,right:0,gap:0},ov=function(t){return parseInt(t||"",10)||0},PK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[ov(n),ov(r),ov(s)]},CK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return RK;var e=PK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},kK=c2(),rc="data-scroll-locked",NK=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(fK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(rc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(am,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(lm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(am," .").concat(am,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(lm," .").concat(lm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rc,`] {
    `).concat(mK,": ").concat(a,`px;
  }
`)},GA=function(){var t=parseInt(document.body.getAttribute(rc)||"0",10);return isFinite(t)?t:0},DK=function(){b.useEffect(function(){return document.body.setAttribute(rc,(GA()+1).toString()),function(){var t=GA()-1;t<=0?document.body.removeAttribute(rc):document.body.setAttribute(rc,t.toString())}},[])},OK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;DK();var i=b.useMemo(function(){return CK(s)},[s]);return b.createElement(kK,{styles:NK(i,!e,s,n?"":"!important")})},c_=!1;if(typeof window<"u")try{var bf=Object.defineProperty({},"passive",{get:function(){return c_=!0,!0}});window.addEventListener("test",bf,bf),window.removeEventListener("test",bf,bf)}catch{c_=!1}var Al=c_?{passive:!1}:!1,LK=function(t){return t.tagName==="TEXTAREA"},u2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!LK(t)&&n[e]==="visible")},VK=function(t){return u2(t,"overflowY")},MK=function(t){return u2(t,"overflowX")},QA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=d2(t,r);if(s){var i=h2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},FK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},UK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},d2=function(t,e){return t==="v"?VK(e):MK(e)},h2=function(t,e){return t==="v"?FK(e):UK(e)},jK=function(t,e){return t==="h"&&e==="rtl"?-1:1},$K=function(t,e,n,r,s){var i=jK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=h2(t,a),I=m[0],p=m[1],v=m[2],_=p-v-i*I;(I||_)&&d2(t,a)&&(h+=_,f+=I);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},Af=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},YA=function(t){return[t.deltaX,t.deltaY]},JA=function(t){return t&&"current"in t?t.current:t},BK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},WK=0,xl=[];function qK(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),s=b.useState(WK++)[0],i=b.useState(c2)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=hK([t.lockRef.current],(t.shards||[]).map(JA),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var _=Af(p),y=n.current,w="deltaX"in p?p.deltaX:y[0]-_[0],x="deltaY"in p?p.deltaY:y[1]-_[1],P,L=p.target,A=Math.abs(w)>Math.abs(x)?"h":"v";if("touches"in p&&A==="h"&&L.type==="range")return!1;var T=QA(A,L);if(!T)return!0;if(T?P=A:(P=A==="v"?"h":"v",T=QA(A,L)),!T)return!1;if(!r.current&&"changedTouches"in p&&(w||x)&&(r.current=P),!P)return!0;var R=r.current||P;return $K(R,v,p,R==="h"?w:x)},[]),l=b.useCallback(function(p){var v=p;if(!(!xl.length||xl[xl.length-1]!==i)){var _="deltaY"in v?YA(v):Af(v),y=e.current.filter(function(P){return P.name===v.type&&(P.target===v.target||v.target===P.shadowParent)&&BK(P.delta,_)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(JA).filter(Boolean).filter(function(P){return P.contains(v.target)}),x=w.length>0?a(v,w[0]):!o.current.noIsolation;x&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(p,v,_,y){var w={name:p,delta:v,target:_,should:y,shadowParent:HK(_)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(x){return x!==w})},1)},[]),d=b.useCallback(function(p){n.current=Af(p),r.current=void 0},[]),h=b.useCallback(function(p){c(p.type,YA(p),p.target,a(p,t.lockRef.current))},[]),f=b.useCallback(function(p){c(p.type,Af(p),p.target,a(p,t.lockRef.current))},[]);b.useEffect(function(){return xl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Al),document.addEventListener("touchmove",l,Al),document.addEventListener("touchstart",d,Al),function(){xl=xl.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,Al),document.removeEventListener("touchmove",l,Al),document.removeEventListener("touchstart",d,Al)}},[]);var m=t.removeScrollBar,I=t.inert;return b.createElement(b.Fragment,null,I?b.createElement(i,{styles:zK(s)}):null,m?b.createElement(OK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function HK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const KK=EK(l2,qK);var f2=b.forwardRef(function(t,e){return b.createElement(Vg,zs({},t,{ref:e,sideCar:KK}))});f2.classNames=Vg.classNames;var GK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Rl=new WeakMap,xf=new WeakMap,Rf={},av=0,m2=function(t){return t&&(t.host||m2(t.parentNode))},QK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=m2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},YK=function(t,e,n,r){var s=QK(e,Array.isArray(t)?t:[t]);Rf[n]||(Rf[n]=new WeakMap);var i=Rf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),I=m!==null&&m!=="false",p=(Rl.get(f)||0)+1,v=(i.get(f)||0)+1;Rl.set(f,p),i.set(f,v),o.push(f),p===1&&I&&xf.set(f,!0),v===1&&f.setAttribute(n,"true"),I||f.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",f,_)}})};return d(e),a.clear(),av++,function(){o.forEach(function(h){var f=Rl.get(h)-1,m=i.get(h)-1;Rl.set(h,f),i.set(h,m),f||(xf.has(h)||h.removeAttribute(r),xf.delete(h)),m||h.removeAttribute(n)}),av--,av||(Rl=new WeakMap,Rl=new WeakMap,xf=new WeakMap,Rf={})}},JK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=GK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),YK(r,s,n,"aria-hidden")):function(){return null}},Mg="Dialog",[p2,YG]=qc(Mg),[XK,Ns]=p2(Mg),g2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=b.useRef(null),l=b.useRef(null),[c,d]=c0({prop:r,defaultProp:s??!1,onChange:i,caller:Mg});return E.jsx(XK,{scope:e,triggerRef:a,contentRef:l,contentId:Iy(),titleId:Iy(),descriptionId:Iy(),open:c,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};g2.displayName=Mg;var y2="DialogTrigger",v2=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(y2,n),i=qn(e,s.triggerRef);return E.jsx(Zt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tI(s.open),...r,ref:i,onClick:Ct(t.onClick,s.onOpenToggle)})});v2.displayName=y2;var ZE="DialogPortal",[ZK,w2]=p2(ZE,{forceMount:void 0}),_2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Ns(ZE,e);return E.jsx(ZK,{scope:e,forceMount:n,children:b.Children.map(r,o=>E.jsx(dl,{present:n||i.open,children:E.jsx(l0,{asChild:!0,container:s,children:o})}))})};_2.displayName=ZE;var Rp="DialogOverlay",E2=b.forwardRef((t,e)=>{const n=w2(Rp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ns(Rp,t.__scopeDialog);return i.modal?E.jsx(dl,{present:r||i.open,children:E.jsx(tG,{...s,ref:e})}):null});E2.displayName=Rp;var eG=Md("DialogOverlay.RemoveScroll"),tG=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(Rp,n);return E.jsx(f2,{as:eG,allowPinchZoom:!0,shards:[s.contentRef],children:E.jsx(Zt.div,{"data-state":tI(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ll="DialogContent",I2=b.forwardRef((t,e)=>{const n=w2(ll,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ns(ll,t.__scopeDialog);return E.jsx(dl,{present:r||i.open,children:i.modal?E.jsx(nG,{...s,ref:e}):E.jsx(rG,{...s,ref:e})})});I2.displayName=ll;var nG=b.forwardRef((t,e)=>{const n=Ns(ll,t.__scopeDialog),r=b.useRef(null),s=qn(e,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return JK(i)},[]),E.jsx(S2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ct(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ct(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ct(t.onFocusOutside,i=>i.preventDefault())})}),rG=b.forwardRef((t,e)=>{const n=Ns(ll,t.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return E.jsx(S2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),S2=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Ns(ll,n),l=b.useRef(null),c=qn(e,l);return dK(),E.jsxs(E.Fragment,{children:[E.jsx(s2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:E.jsx(qp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":tI(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),E.jsxs(E.Fragment,{children:[E.jsx(sG,{titleId:a.titleId}),E.jsx(oG,{contentRef:l,descriptionId:a.descriptionId})]})]})}),eI="DialogTitle",T2=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(eI,n);return E.jsx(Zt.h2,{id:s.titleId,...r,ref:e})});T2.displayName=eI;var b2="DialogDescription",A2=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(b2,n);return E.jsx(Zt.p,{id:s.descriptionId,...r,ref:e})});A2.displayName=b2;var x2="DialogClose",R2=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(x2,n);return E.jsx(Zt.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,()=>s.onOpenChange(!1))})});R2.displayName=x2;function tI(t){return t?"open":"closed"}var P2="DialogTitleWarning",[JG,C2]=NM(P2,{contentName:ll,titleName:eI,docsSlug:"dialog"}),sG=({titleId:t})=>{const e=C2(P2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},iG="DialogDescriptionWarning",oG=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${C2(iG).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},aG=g2,lG=v2,cG=_2,k2=E2,N2=I2,D2=T2,O2=A2,uG=R2;const lv=aG,XG=lG,dG=cG,L2=b.forwardRef(({className:t,...e},n)=>E.jsx(k2,{ref:n,className:Hn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));L2.displayName=k2.displayName;const cm=b.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>E.jsxs(dG,{children:[E.jsx(L2,{}),E.jsxs(N2,{ref:o,className:Hn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&E.jsxs(uG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[E.jsx(m0,{className:"h-4 w-4"}),E.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cm.displayName=N2.displayName;const um=({className:t,...e})=>E.jsx("div",{className:Hn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});um.displayName="DialogHeader";const hG=({className:t,...e})=>E.jsx("div",{className:Hn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});hG.displayName="DialogFooter";const dm=b.forwardRef(({className:t,...e},n)=>E.jsx(D2,{ref:n,className:Hn("text-lg font-semibold leading-none tracking-tight",t),...e}));dm.displayName=D2.displayName;const u_=b.forwardRef(({className:t,...e},n)=>E.jsx(O2,{ref:n,className:Hn("text-sm text-muted-foreground",t),...e}));u_.displayName=O2.displayName;const fG={},XA=U.lazy(()=>te(()=>import("./Index-DKXRItyW.js"),[],import.meta.url)),Pf=U.lazy(()=>te(()=>import("./LandingPage-VDU7oQaX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),ZA=U.lazy(()=>te(()=>import("./SubscriptionsPage-Cwkmi5DB.js"),__vite__mapDeps([11,1,4,12]),import.meta.url)),ex=U.lazy(()=>te(()=>import("./AuthPage-9Wq3-daA.js"),__vite__mapDeps([13,1,2,3,8]),import.meta.url)),Cf=U.lazy(()=>te(()=>import("./TopUpPage-Cx45LUXS.js"),__vite__mapDeps([14,1,15]),import.meta.url)),tx=U.lazy(()=>te(()=>import("./AdminTopupsPage-DliQ6p4Q.js"),__vite__mapDeps([16,15]),import.meta.url)),nx=U.lazy(()=>te(()=>import("./AdminNotificationsPage-DNu8ANjS.js"),__vite__mapDeps([17,1,18,19,20]),import.meta.url)),kf=U.lazy(()=>te(()=>import("./UserRegisterPage-DqcaRABp.js"),__vite__mapDeps([21,1,18,22,23,24,25,26]),import.meta.url)),rx=U.lazy(()=>te(()=>import("./UserAccountSetupPage-DUIFtKqs.js"),__vite__mapDeps([27,1,18,22,26,25,10]),import.meta.url)),sx=U.lazy(()=>te(()=>import("./ForgotPasswordCodePage-BbQcY_Zh.js"),[],import.meta.url)),ix=U.lazy(()=>te(()=>import("./DashboardLoginPage-B3PHylEz.js"),__vite__mapDeps([28,1]),import.meta.url)),ox=U.lazy(()=>te(()=>import("./ProtectedDashboard-b540T6xZ.js"),__vite__mapDeps([29,1,15,30,18,31,32,33,23]),import.meta.url)),hm=U.lazy(()=>te(()=>import("./ProtectedUserDashboard-BRy5uAh3.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url)),ax=U.lazy(()=>te(()=>import("./MerchantDashboard-D68ainoi.js"),__vite__mapDeps([36,37,15,38,39,40,1,41,18,42]),import.meta.url)),lx=U.lazy(()=>te(()=>import("./PendingApprovalPage-3RLHjHtC.js"),__vite__mapDeps([43,44,45]),import.meta.url)),cx=U.lazy(()=>te(()=>import("./AdminLogin-CKgOZNAg.js"),[],import.meta.url)),ux=U.lazy(()=>te(()=>import("./ProtectedAdminDashboard-DOWw26v9.js"),__vite__mapDeps([46,12,47,37,15,38,18,30,31,48,1,19,22,39,49,4,45,25,50,51,35,9,7,10,3,8,52]),import.meta.url)),dx=U.lazy(()=>te(()=>import("./AuthTestPage-CWMrZNdM.js"),__vite__mapDeps([53,1,18]),import.meta.url)),hx=U.lazy(()=>te(()=>import("./ProfileSettingsPage-BGzDJM0G.js"),__vite__mapDeps([54,1,18,48,55,30,31,42,5,50,7,45]),import.meta.url)),fx=U.lazy(()=>te(()=>import("./TransactionsPage-C4c_NVIq.js"),__vite__mapDeps([56,1,15,39,38,57,49,30,18,31,4,41,10,8,32,33,5,52]),import.meta.url)),mx=U.lazy(()=>te(()=>import("./WalletAdditionPage-EIasHO-V.js"),__vite__mapDeps([58,1,18,15,5,23,25,31]),import.meta.url)),px=U.lazy(()=>te(()=>import("./ReferralsPage-DN-UuFHu.js"),__vite__mapDeps([59,1,39,22,24,20,10,51,52]),import.meta.url)),gx=U.lazy(()=>te(()=>import("./CPanelPage-58ac396k.js"),__vite__mapDeps([60,1,18]),import.meta.url)),yx=U.lazy(()=>te(()=>import("./CPanelLoginPage-B1bg6uq4.js"),__vite__mapDeps([61,18,1]),import.meta.url)),vx=U.lazy(()=>te(()=>import("./NotFound-D8pYYZqJ.js"),[],import.meta.url)),wx=U.lazy(()=>te(()=>import("./PrivacyPolicyPage-DXrsVXwS.js"),[],import.meta.url)),V2=new i6({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=d6({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});u6({queryClient:V2,persister:t,maxAge:24*60*60*1e3})}catch{}const mG=()=>{if(!((Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return E.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:E.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:E.jsx(f0,{className:"w-5 h-5"})})})},_x=()=>{const t=ri(),{user:e,loading:n}=ml(),r=(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?E.jsx(SH,{}):null},Ex=()=>{var Or;const t=eK(),e=(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android",{profile:n,user:r}=ml(),{shopId:s}=rK(),o=ri().pathname.startsWith("/user/dashboard"),a=Yc(),{toast:l}=a0(),[c,d]=U.useState(!1),[h,f]=U.useState(null),[m,I]=U.useState(!1),[p,v]=U.useState(null),[_,y]=U.useState(!1),[w,x]=U.useState(""),[P,L]=U.useState(""),[A,T]=U.useState(null),[R,C]=U.useState(null),D=U.useRef(null),O=U.useRef(null),k=U.useRef(!1),z=U.useRef(null),re=U.useRef(""),de=U.useRef(""),_e=U.useRef(()=>{try{const Y=localStorage.getItem("sms_suppressed_ids")||"[]",j=Array.isArray(JSON.parse(Y))?JSON.parse(Y):[];return new Set(j.map(q=>String(q||"")))}catch{return new Set}}),[B,H]=U.useState(!1),Z=U.useRef(n);U.useEffect(()=>{Z.current=n},[n]),tK(),U.useEffect(()=>{const Y=j=>{j.detail&&typeof j.detail.enabled=="boolean"&&!j.detail.enabled&&r!=null&&r.uid&&l({title:"  ",description:"        ",action:E.jsx(zP,{altText:"",onClick:()=>{try{window.location.href="cashy://openNotificationSettings"}catch{}},children:""}),duration:1e4})};if(window.addEventListener("notificationListenerStatus",Y),r!=null&&r.uid&&e){const j=setTimeout(()=>{try{window.location.href="cashy://checkNotificationStatus"}catch{}},2e3);return()=>{window.removeEventListener("notificationListenerStatus",Y),clearTimeout(j)}}return()=>window.removeEventListener("notificationListenerStatus",Y)},[r==null?void 0:r.uid,l,e]);const[J,we]=U.useState(!1),[M,ye]=U.useState(null),[Fe,$e]=U.useState(""),[Be,He]=U.useState(!1),[Oe,qe]=U.useState(!1),[Dt,gn]=U.useState(""),[tn,vr]=U.useState(""),[or,Cn]=U.useState(!1),[Le,yn]=U.useState(0),[Ot,nn]=U.useState(!1),[wr,$i]=U.useState(""),[_r,ta]=U.useState("");U.useEffect(()=>{try{const Y=(r==null?void 0:r.uid)||"default",j=localStorage.getItem(`sim1Number_${Y}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${Y}`)??localStorage.getItem("sim2Number")??"";$i(j),ta(q),re.current=j,de.current=q}catch{}},[r==null?void 0:r.uid]);const Ds=async(Y,j)=>{if(!(!Y||!M))try{const{resolveWalletBySimOrSlot:q,merchantWalletService:ne,detectWalletFromSim:oe}=await te(async()=>{const{resolveWalletBySimOrSlot:X,merchantWalletService:ve,detectWalletFromSim:xe}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:X,merchantWalletService:ve,detectWalletFromSim:xe}},void 0,import.meta.url),se=(r==null?void 0:r.uid)||"";ye(X=>X?{...X,simNumber:Y,simLabel:j}:null);let pe=await q({simNumbers:[Y],userId:se});if(!pe||!pe.walletId)try{const X=await ne.getByMerchantId(se),ve=localStorage.getItem(`wallets_${se}`),xe=ve?JSON.parse(ve):[],G=(Array.isArray(xe)?xe:[]).map(le=>({id:String((le==null?void 0:le.id)||""),phone:String((le==null?void 0:le.phone)||(le==null?void 0:le.msisdn)||""),isDefault:!!(le!=null&&le.isDefault)})),ce=(Array.isArray(X)?X:[]).map(le=>({id:String((le==null?void 0:le.id)||""),msisdn:String((le==null?void 0:le.msisdn)||""),isDefault:!!(le!=null&&le.isDefault)})),he=[...G,...ce],ue=await oe([Y],he);ue&&ue.walletId&&(pe={walletId:ue.walletId,msisdn:ue.msisdn})}catch{}if(pe&&pe.walletId){ye(X=>X?{...X,walletMsisdn:pe.msisdn}:null),localStorage.setItem(`selectedWallet_${se}`,pe.walletId);try{localStorage.setItem(`selectedWallet_${se}_${s||""}`,pe.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:pe.walletId}}))}catch{}try{const{Preferences:X}=await te(async()=>{const{Preferences:ve}=await Promise.resolve().then(()=>Jy);return{Preferences:ve}},void 0,import.meta.url);await X.set({key:"selected_wallet_id",value:pe.walletId})}catch{}}}catch{}},Un=U.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}nn(!1);try{a("/user/login")}catch{}},[a]);U.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&nn(!0)}catch{!r&&e&&nn(!0)}},[r,e]);const Dr=U.useCallback(()=>{try{const Y=window.AudioContext||window.webkitAudioContext;if(!Y)return;const j=new Y,q=j.createOscillator(),ne=j.createGain();q.type="sine",ne.gain.setValueAtTime(0,j.currentTime),q.connect(ne),ne.connect(j.destination);const oe=j.currentTime;q.frequency.setValueAtTime(800,oe),ne.gain.linearRampToValueAtTime(.15,oe+.02),q.start(oe),q.frequency.exponentialRampToValueAtTime(1200,oe+.08),ne.gain.exponentialRampToValueAtTime(1e-5,oe+.32),q.stop(oe+.35)}catch{}},[]),rn=Y=>{try{const j=String(Y||"").replace(/[^0-9+]/g,"");if(!j)return"";if(j.startsWith("+20")){const q=j.slice(3);return q.startsWith("1")?"0"+q:q}if(j.startsWith("0020")){const q=j.slice(4);return q.startsWith("1")?"0"+q:q}if(j.startsWith("20")){const q=j.slice(2);return q.startsWith("1")?"0"+q:q}return j.startsWith("0")?j:/^(10|11|12|15)/.test(j)?"0"+j:j}catch{return""}},pl=Y=>{try{const j=String(Y||""),q=j.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let ne=q?parseFloat(String(q[1]).replace(",",".")):0;const oe=j.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let se=oe?rn(oe[1]):void 0;const pe=j.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),X=j.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),ve=pe?String(pe[1]).trim():X?String(X[1]).trim():void 0,xe=j.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),G=j.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),ce=j.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!ne||ne<=0){const ue=j.match(/Received\s*EGP\s*([0-9.,]+)/i)||j.match(/Received\s*EGP([0-9.,]+)/i);ue&&(ne=parseFloat(String(ue[1]).replace(/,/g,"")))}if(!se){const ue=j.match(/from\s+([0-9+]+)/i);ue&&(se=rn(ue[1]))}const he=xe?String(xe[1]).trim():G?String(G[1]).trim():ce?String(ce[1]).trim():void 0;return{amount:ne,sender:se,senderName:ve,reference:he}}catch{return{amount:0}}};U.useEffect(()=>{(async()=>{var Y;try{if(!J||!M){He(!1);return}const{auth:j}=await te(async()=>{const{auth:se}=await Promise.resolve().then(()=>Gt);return{auth:se}},void 0,import.meta.url),q=((Y=j.currentUser)==null?void 0:Y.uid)||"",ne=q?`selectedWallet_${q}`:"selectedWallet_default",oe=localStorage.getItem(ne)||"";if(!oe){He(!0);return}try{const{merchantWalletService:se}=await te(async()=>{const{merchantWalletService:ve}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:ve}},void 0,import.meta.url),pe=await se.getById(oe),X=pe&&pe.defaultWithdrawCommission!=null;He(!X)}catch{He(!0)}}catch{He(!0)}})()},[J,M]);const oi=async Y=>{try{const{merchantWalletService:j,detectWalletFromSim:q}=await te(async()=>{const{merchantWalletService:G,detectWalletFromSim:ce}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:G,detectWalletFromSim:ce}},void 0,import.meta.url),ne=(r==null?void 0:r.uid)||"";if(!ne)return;const oe=`wallets_${ne}`,se=typeof localStorage<"u"?localStorage.getItem(oe):null,pe=se?JSON.parse(se):[],X=await j.getByMerchantId(ne),ve=[...(Array.isArray(pe)?pe:[]).map(G=>({id:String((G==null?void 0:G.id)||""),phone:String((G==null?void 0:G.phone)||(G==null?void 0:G.msisdn)||""),isDefault:!!(G!=null&&G.isDefault)})),...(Array.isArray(X)?X:[]).map(G=>({id:String((G==null?void 0:G.id)||""),msisdn:String((G==null?void 0:G.msisdn)||""),isDefault:!!(G!=null&&G.isDefault)}))],xe=await q(Y||[],ve);if(xe&&xe.walletId)try{localStorage.setItem(`selectedWallet_${ne}`,xe.walletId)}catch{}}catch{}};b.useEffect(()=>{const Y=async j=>{var q;try{const ne=(j==null?void 0:j.detail)||{},oe=String(ne.text||"").trim(),se=String(ne.title||"").trim();if(!oe)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*|instapay|received\s*egp|transaction/i.test(`${se} ${oe}`)){try{Zy(ne,{toast:l})}catch{}return}const{auth:X}=await te(async()=>{const{auth:Ue}=await Promise.resolve().then(()=>Gt);return{auth:Ue}},void 0,import.meta.url),ve=((q=X.currentUser)==null?void 0:q.uid)||"";let xe=s||"";if(!ve){try{l({title:"  ",description:"   "})}catch{}return}if(!xe)try{const{doc:Ue,getDoc:fe}=await te(async()=>{const{doc:jt,getDoc:xt}=await Promise.resolve().then(()=>Dn);return{doc:jt,getDoc:xt}},void 0,import.meta.url),{db:ut}=await te(async()=>{const{db:jt}=await Promise.resolve().then(()=>Gt);return{db:jt}},void 0,import.meta.url),vt=await fe(Ue(ut,"profiles",ve));if(vt.exists()){const jt=vt.data(),xt=String((jt==null?void 0:jt.shopId)||"").trim();xt&&(xe=xt)}}catch{}let G="",ce="",he=!1;try{const Ue=ve||"default";G=(localStorage.getItem(`sim1Number_${Ue}`)??localStorage.getItem("sim1Number")??"").trim(),ce=(localStorage.getItem(`sim2Number_${Ue}`)??localStorage.getItem("sim2Number")??"").trim(),he=(localStorage.getItem(`smsAutoRegisterEnabled_${Ue}`)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"}catch{}try{const{Preferences:Ue}=await te(async()=>{const{Preferences:vt}=await Promise.resolve().then(()=>Jy);return{Preferences:vt}},void 0,import.meta.url),fe=await Ue.get({key:"sim1_number"}),ut=await Ue.get({key:"sim2_number"});!G&&(fe!=null&&fe.value)&&(G=String(fe.value).trim()),!ce&&(ut!=null&&ut.value)&&(ce=String(ut.value).trim()),!G&&re.current&&(G=re.current),!ce&&de.current&&(ce=de.current)}catch{}let ue=[];const le=Array.isArray(((j==null?void 0:j.detail)||{}).activeSimMsisdns)?j.detail.activeSimMsisdns.map(Ue=>String(Ue||"")):[];le.length>0?ue=le:ue=[G,ce].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(ue))}catch{}let Re="";try{const Ue=localStorage.getItem("lastSmsSimMsisdn")||"";Ue&&ue.includes(Ue)&&(Re=Ue)}catch{}if(Re||(Re=ue[0]||""),Re)try{localStorage.setItem("lastSmsSimMsisdn",Re)}catch{}const{resolveWalletBySimOrSlot:ot,bindSlotWalletMapping:St,merchantWalletService:Tt}=await te(async()=>{const{resolveWalletBySimOrSlot:Ue,bindSlotWalletMapping:fe,merchantWalletService:ut}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:Ue,bindSlotWalletMapping:fe,merchantWalletService:ut}},void 0,import.meta.url),pt=ve;let Ke=await ot({simNumbers:ue,userId:pt});if(!Ke&&ue.length>0){try{await oi(ue)}catch{}const Ue=localStorage.getItem(`selectedWallet_${pt}`)||"";if(Ue)try{const fe=await Tt.getById(Ue);Ke={walletId:Ue,msisdn:String((fe==null?void 0:fe.msisdn)||"")}}catch{}}if(Ke&&Ke.walletId){try{localStorage.setItem(`selectedWallet_${pt}`,Ke.walletId)}catch{}try{St({userId:pt,walletId:Ke.walletId,msisdn:Ke.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ke.walletId}}))}catch{}try{const Ue=String(Ke.msisdn||"").trim();Ue&&(Re=Ue,localStorage.setItem("lastSmsSimMsisdn",Ue))}catch{}}const Lt=pl(oe),qt=Number(Lt.amount||0);if(!qt||qt<=0){try{Zy(ne,{toast:l})}catch{}return}const Ge=(Ke==null?void 0:Ke.msisdn)||await cv(ve),yt=Lt.reference||`VF-${Date.now()}`,tt={amount:qt,sender:String(Lt.sender||""),senderName:Lt.senderName,text:oe,simNumber:Re};if(he)try{await ai({...tt,reference:yt,walletMsisdn:Ge})}catch{}else{try{const{addDoc:Ue,collection:fe,serverTimestamp:ut}=await te(async()=>{const{addDoc:Er,collection:gt,serverTimestamp:Sn}=await Promise.resolve().then(()=>Dn);return{addDoc:Er,collection:gt,serverTimestamp:Sn}},void 0,import.meta.url),{db:vt}=await te(async()=>{const{db:Er}=await Promise.resolve().then(()=>Gt);return{db:Er}},void 0,import.meta.url),jt=await Ue(fe(vt,"pendingSmsPopups"),{userId:ve,shopId:xe,payload:{...tt,reference:yt,walletMsisdn:Ge,sim1Number:G,sim2Number:ce},status:"pending",createdAt:ut()}),xt=/Received\s*EGP/i.test(String(oe))?"InstaPay":"VF-Cash";ye({...tt,reference:yt,providerLabel:xt,walletMsisdn:Ge,popupId:jt.id})}catch{const Ue=/Received\s*EGP/i.test(String(oe))?"InstaPay":"VF-Cash";ye({...tt,reference:yt,providerLabel:Ue,walletMsisdn:Ge})}we(!0);try{Dr()}catch{}}}catch{try{Zy((j==null?void 0:j.detail)||{},{toast:l})}catch{}}};try{window.addEventListener("vfNotificationReceived",Y)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",Y)}catch{}}},[l,s]),b.useEffect(()=>{const Y=async j=>{try{const q=(j==null?void 0:j.detail)||{},ne=String(q.text||"");if(!ne||!((n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true"))return;const se=/Received\s*EGP/i.test(ne),pe=gG(ne,String(q.sender||q.msisdn||""));if(!se&&!pe)return;const X=(r==null?void 0:r.uid)||"";if(!X)return;let ve=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const xe=Z.current;let G=(xe==null?void 0:xe.sim1Number)||"",ce=(xe==null?void 0:xe.sim2Number)||"";G||(G=localStorage.getItem(`sim1Number_${X}`)||localStorage.getItem("sim1Number")||""),ce||(ce=localStorage.getItem(`sim2Number_${X}`)||localStorage.getItem("sim2Number")||""),!G&&re.current&&(G=re.current),!ce&&de.current&&(ce=de.current),G=String(G).trim(),ce=String(ce).trim();const he=String(q.msisdn||q.sender||""),ue=rn(he),le=pl(ne);let Re=Number(le.amount||0),ot=le.sender||ue||String(q.sender||""),St=le.senderName,Tt=le.reference||"";if(se){const fe=String(ne).match(/Received\s*EGP\s*([0-9.,]+)/i);fe&&(Re=parseFloat(String(fe[1]).replace(/,/g,"")));const ut=String(ne).match(/from\s+([0-9+]+)/i);ut&&(ot=rn(ut[1]));const vt=String(ne).match(/Ref:\s*([A-Za-z0-9\-]+)/i);vt&&(Tt=String(vt[1]).trim())}if(!Re||Re<=0)return;let pt="",Ke="";const Lt=[G,ce].filter(Boolean).map(fe=>rn(fe));if(ue&&Lt.includes(ue)&&(pt=ue,pt===rn(G)?Ke="SIM 1":pt===rn(ce)&&(Ke="SIM 2")),!Ke){const fe=q==null?void 0:q.slot,ut=fe!=null?Number(fe):-1;ut===0?(Ke="SIM 1",pt=G?rn(G):""):ut===1&&(Ke="SIM 2",pt=ce?rn(ce):"")}!Ke&&pt&&(pt===rn(G)?Ke="SIM 1":pt===rn(ce)&&(Ke="SIM 2"));const qt=se?"InstaPay":"VF-Cash",Ge={amount:Re,sender:ot,senderName:St,text:ne,simNumber:pt,simLabel:Ke},yt=X?`smsAutoRegisterEnabled_${X}`:"smsAutoRegisterEnabled",Ue=(localStorage.getItem(yt)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!Ue){ye({...Ge,reference:Tt,providerLabel:qt,walletMsisdn:""}),we(!0);try{Dr()}catch{}}(async()=>{try{const{resolveWalletBySimOrSlot:fe,bindSlotWalletMapping:ut,merchantWalletService:vt}=await te(async()=>{const{resolveWalletBySimOrSlot:gt,bindSlotWalletMapping:Sn,merchantWalletService:be}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:gt,bindSlotWalletMapping:Sn,merchantWalletService:be}},void 0,import.meta.url);let jt=Array.isArray(q.activeSimMsisdns)&&q.activeSimMsisdns.length>0?q.activeSimMsisdns.map(gt=>rn(String(gt||""))):ue?[ue]:[];jt.length===0&&(jt=[rn(G),rn(ce)].filter(Boolean));let xt=await fe({simNumbers:jt,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),userId:X});if(!xt&&jt.length>0){try{await oi(jt)}catch{}const gt=localStorage.getItem(`selectedWallet_${X}`)||"";if(gt)try{const Sn=await vt.getById(gt);xt={walletId:gt,msisdn:String((Sn==null?void 0:Sn.msisdn)||"")}}catch{}}if(xt&&xt.walletId){try{localStorage.setItem(`selectedWallet_${X}`,xt.walletId)}catch{}try{ut({userId:X,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),walletId:xt.walletId,msisdn:xt.msisdn})}catch{}}const Er=(xt==null?void 0:xt.msisdn)||(X?await cv(X):"");if(ye(gt=>gt?{...gt,walletMsisdn:Er}:null),Ue)try{await ai({...Ge,reference:Tt,walletMsisdn:Er})}catch{}else try{const{addDoc:gt,collection:Sn,serverTimestamp:be}=await te(async()=>{const{addDoc:dt,collection:wt,serverTimestamp:Rt}=await Promise.resolve().then(()=>Dn);return{addDoc:dt,collection:wt,serverTimestamp:Rt}},void 0,import.meta.url),{db:Ye}=await te(async()=>{const{db:dt}=await Promise.resolve().then(()=>Gt);return{db:dt}},void 0,import.meta.url),Ht=await gt(Sn(Ye,"pendingSmsPopups"),{userId:X,shopId:ve,payload:{...Ge,reference:Tt,walletMsisdn:Er,sim1Number:G,sim2Number:ce},status:"pending",createdAt:be()});ye(dt=>dt?{...dt,popupId:Ht.id}:null)}catch{}}catch(fe){console.error("Background SMS processing error",fe)}})()}catch(q){console.error("SMS Handler Error",q)}};try{window.addEventListener("mobileSmsReceived",Y)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",Y)}catch{}}},[l,s,n,r]),b.useEffect(()=>{},[l,s]),b.useEffect(()=>{},[l,s]);const ai=async Y=>{var j,q,ne,oe,se,pe,X;try{const ve=Y||M;if(!ve)return;const{amount:xe,sender:G,text:ce,simNumber:he,senderName:ue}=ve,le=String(ce||"");let Re=Number(xe||0);const ot=typeof(Y==null?void 0:Y.deferredMode)=="boolean"?Y.deferredMode:Oe,St=(Y==null?void 0:Y.debtorName)??Dt,Tt=(Y==null?void 0:Y.debtorNote)??tn;try{we(!1)}catch{}try{}catch{}const pt=/Received\s*EGP/i.test(le)?"instapay":"vodafone_cash";if(!Re||Re<=0){const be=le.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(be&&(Re=parseFloat(String(be[1]).replace(",","."))),!Re||Re<=0){const Ye=le.match(/Received\s*EGP\s*([0-9.,]+)/i)||le.match(/Received\s*EGP([0-9.,]+)/i);Ye&&(Re=parseFloat(String(Ye[1]).replace(/,/g,"")))}}let Ke=String(G||"").trim();if(!Ke){const be=le.match(/\s+\s+(\d+)/i);Ke=be?rn(be[1]):""}let Lt=String((ve==null?void 0:ve.reference)||"").trim();if(!Lt){const be=le.match(/\s*\s*([\d\.]+)/i);Lt=be?String(be[1]).trim():String(Date.now())}if(!Re||Re<=0){try{l({title:"      ",variant:"destructive"})}catch{}return}const{auth:qt}=await te(async()=>{const{auth:be}=await Promise.resolve().then(()=>Gt);return{auth:be}},void 0,import.meta.url),Ge=((j=qt.currentUser)==null?void 0:j.uid)||"";let yt=s||"";if(!Ge){try{l({title:"  ",description:"   "})}catch{}return}if(!yt)try{const{doc:be,getDoc:Ye}=await te(async()=>{const{doc:wt,getDoc:Rt}=await Promise.resolve().then(()=>Dn);return{doc:wt,getDoc:Rt}},void 0,import.meta.url),{db:Ht}=await te(async()=>{const{db:wt}=await Promise.resolve().then(()=>Gt);return{db:wt}},void 0,import.meta.url),dt=await Ye(be(Ht,"profiles",Ge));if(dt.exists()){const wt=dt.data(),Rt=String((wt==null?void 0:wt.shopId)||"").trim();Rt&&(yt=Rt)}}catch{}if(!yt){try{l({title:"  ",description:"   "})}catch{}return}let tt=await yG(Ge);if(!tt)try{const{doc:be,getDoc:Ye}=await te(async()=>{const{doc:Ce,getDoc:Lr}=await Promise.resolve().then(()=>Dn);return{doc:Ce,getDoc:Lr}},void 0,import.meta.url),{db:Ht}=await te(async()=>{const{db:Ce}=await Promise.resolve().then(()=>Gt);return{db:Ce}},void 0,import.meta.url);let dt="",wt="";try{const Ce=await Ye(be(Ht,"profiles",Ge));if(Ce.exists()){const Lr=Ce.data();dt=String((Lr==null?void 0:Lr.sim1Number)||"").trim(),wt=String((Lr==null?void 0:Lr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:Rt}=await te(async()=>{const{detectWalletFromSim:Ce}=await Promise.resolve().then(()=>Ea);return{detectWalletFromSim:Ce}},void 0,import.meta.url),{merchantWalletService:Tn}=await te(async()=>{const{merchantWalletService:Ce}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:Ce}},void 0,import.meta.url),jn=`wallets_${Ge}`,kn=localStorage.getItem(jn),ar=kn?JSON.parse(kn):[],lr=await Tn.getByMerchantId(Ge),Ir=(Array.isArray(ar)?ar:[]).map(Ce=>({id:String((Ce==null?void 0:Ce.id)||""),phone:String((Ce==null?void 0:Ce.phone)||(Ce==null?void 0:Ce.msisdn)||""),isDefault:!!(Ce!=null&&Ce.isDefault)})),Kt=(Array.isArray(lr)?lr:[]).map(Ce=>({id:String((Ce==null?void 0:Ce.id)||""),msisdn:String((Ce==null?void 0:Ce.msisdn)||""),isDefault:!!(Ce!=null&&Ce.isDefault)})),vn=[...Ir,...Kt],us=he||String(localStorage.getItem("lastSmsSimMsisdn")||"");let li=(us?[us]:[]).filter(Boolean);li.length===0&&(li=[dt,wt].filter(Boolean));const ra=await Rt(li,vn);if(ra&&ra.walletId){tt=ra.walletId;try{localStorage.setItem(`selectedWallet_${Ge}`,tt)}catch{}}}catch{}if(!tt){try{l({title:"   ",description:"       "})}catch{}return}try{const be=Ge;try{localStorage.setItem(`selectedWallet_${be}`,tt)}catch{}try{localStorage.setItem(`selectedWallet_${be}_${yt}`,tt)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:tt}}))}catch{}try{const{Preferences:Ye}=await te(async()=>{const{Preferences:Ht}=await Promise.resolve().then(()=>Jy);return{Preferences:Ht}},void 0,import.meta.url);await Ye.set({key:"selected_wallet_id",value:tt}),await Ye.set({key:"current_user_id",value:be})}catch{}}catch{}const{recordAutoTransaction:Ue,userDataService:fe}=await te(async()=>{const{recordAutoTransaction:be,userDataService:Ye}=await Promise.resolve().then(()=>Mu);return{recordAutoTransaction:be,userDataService:Ye}},void 0,import.meta.url),ut=Fe&&Fe.trim()!==""?Math.max(0,parseFloat(Fe)):null;let vt=0;if(ut!=null)vt=ut;else try{const{merchantWalletService:be}=await te(async()=>{const{merchantWalletService:dt}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:dt}},void 0,import.meta.url),Ye=await be.getById(String(tt)),Ht=Ye&&Ye.defaultWithdrawCommission;if(Ht!=null)vt=Math.round((Number(Ht)||0)*Number(Re)/1e3*100)/100;else{const{calculateCommission:dt}=await te(async()=>{const{calculateCommission:wt}=await Promise.resolve().then(()=>Oa);return{calculateCommission:wt}},void 0,import.meta.url);vt=dt(Number(Re),"receive")}}catch{const{calculateCommission:be}=await te(async()=>{const{calculateCommission:Ye}=await Promise.resolve().then(()=>Oa);return{calculateCommission:Ye}},void 0,import.meta.url);vt=be(Number(Re),"receive")}try{const{walletDailyLimitsService:be}=await te(async()=>{const{walletDailyLimitsService:Ht}=await Promise.resolve().then(()=>l_);return{walletDailyLimitsService:Ht}},void 0,import.meta.url),Ye=await be.canPerformOperation(String(tt),Math.max(0,Number(Re||0)),"withdraw");if(!Ye.canPerform)try{l({title:"  ",description:String(Ye.message||"      "),variant:"destructive"})}catch{}}catch{}const jt=Lt||`${le}|${Date.now()}`,xt=he||String(localStorage.getItem("lastSmsSimMsisdn")||""),gt=String((ve==null?void 0:ve.walletMsisdn)||"").trim()||xt||await cv(Ge)||"",Sn=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(ot)try{const be=await fe.getUserData(Ge),Ye=Array.isArray(be==null?void 0:be.debts)?be.debts:[],Ht=Sn==="add"?Number(Re)+Number(vt):Number(Re),dt={id:`DEBT-${Date.now()}`,debtorName:St||ue||Ke||"",amount:Math.round(Number(Ht)*100)/100,reason:Tt||"  VodafoneCash",customerId:void 0,mobile:Ke,status:"pending",createdAt:new Date},wt=[dt,...Ye];await fe.updateUserData(Ge,{debts:wt});try{const Rt=vt;await fe.saveUserTransaction(Ge,{type:"withdraw",amount:Re,withdrawnAmount:Re,commission:Rt,status:"pending",createdAt:new Date,senderMsisdn:Ke,receiverMsisdn:gt,senderName:ue,walletId:tt,fromWallet:tt,lineId:gt,provider:pt,reference:jt,transactionId:`DEFER-${Date.now()}`,linkedDebtId:dt.id})}catch{}try{const Rt=(Y==null?void 0:Y.popupId)||(M==null?void 0:M.popupId)||"";if(Rt){const{doc:Tn,updateDoc:jn,serverTimestamp:kn}=await te(async()=>{const{doc:lr,updateDoc:Ir,serverTimestamp:Kt}=await Promise.resolve().then(()=>Dn);return{doc:lr,updateDoc:Ir,serverTimestamp:Kt}},void 0,import.meta.url),{db:ar}=await te(async()=>{const{db:lr}=await Promise.resolve().then(()=>Gt);return{db:lr}},void 0,import.meta.url);try{await jn(Tn(ar,"pendingSmsPopups",Rt),{status:"confirmed",confirmedAt:kn()})}catch{}try{(ne=(q=_e.current)==null?void 0:q.add)==null||ne.call(q,Rt);const lr=Array.from(_e.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(lr))}catch{}}}catch{}try{l({title:"  ",description:"      "})}catch{}return}catch{}try{const be=await Ue({shopId:yt,lineId:gt,walletId:tt,amount:Re,note:"SMS-ManualConfirm",provider:pt,createdBy:Ge,senderMsisdn:Ke,senderName:ue,reference:jt,text:le});try{const Ye=(Y==null?void 0:Y.popupId)||(M==null?void 0:M.popupId)||"";if(Ye){const{doc:Ht,updateDoc:dt,serverTimestamp:wt}=await te(async()=>{const{doc:Tn,updateDoc:jn,serverTimestamp:kn}=await Promise.resolve().then(()=>Dn);return{doc:Tn,updateDoc:jn,serverTimestamp:kn}},void 0,import.meta.url),{db:Rt}=await te(async()=>{const{db:Tn}=await Promise.resolve().then(()=>Gt);return{db:Tn}},void 0,import.meta.url);try{await dt(Ht(Rt,"pendingSmsPopups",Ye),{status:"confirmed",confirmedAt:wt()})}catch{}try{(se=(oe=_e.current)==null?void 0:oe.add)==null||se.call(oe,Ye);const Tn=Array.from(_e.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Tn))}catch{}}}catch{}try{const Ye=Math.max(0,Number(Re||0)),{doc:Ht,getDoc:dt,updateDoc:wt}=await te(async()=>{const{doc:Ir,getDoc:Kt,updateDoc:vn}=await Promise.resolve().then(()=>Dn);return{doc:Ir,getDoc:Kt,updateDoc:vn}},void 0,import.meta.url),{db:Rt}=await te(async()=>{const{db:Ir}=await Promise.resolve().then(()=>Gt);return{db:Ir}},void 0,import.meta.url),Tn=Ht(Rt,"dashboardData",yt),jn=await dt(Tn);let kn=jn.exists()?Number(((pe=jn.data())==null?void 0:pe.cashBalance)||0):0;const ar=jn.exists()?((X=jn.data())==null?void 0:X.walletBalances)||{}:{},lr=Number(ar[tt]||0);ar[tt]=lr+Ye,kn=kn-Ye+Math.max(0,vt),await wt(Tn,{cashBalance:kn,walletBalances:ar,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:kn}}))}catch{}try{const{walletDailyLimitsService:Ir}=await te(async()=>{const{walletDailyLimitsService:Kt}=await Promise.resolve().then(()=>l_);return{walletDailyLimitsService:Kt}},void 0,import.meta.url);await Ir.updateUsage(String(tt),Ye,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(tt)}}))}catch{}}catch{}}catch{}(async()=>{try{const Ye=vt;await fe.saveUserTransaction(Ge,{type:"withdraw",amount:Re,withdrawnAmount:Re,commission:Ye,status:"completed",createdAt:new Date,senderMsisdn:Ke,receiverMsisdn:gt,senderName:ue,walletId:tt,fromWallet:tt,lineId:gt,provider:pt,reference:jt,transactionId:be})}catch{}})(),we(!1),ye(null);try{l({title:`     ${be}`})}catch{}}catch(be){try{l({title:String((be==null?void 0:be.message)||"  "),variant:"destructive"})}catch{}}}catch{}};b.useEffect(()=>{try{$A.start()}catch{}return()=>{try{$A.stop()}catch{}}},[]),b.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const Y=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),j=String(localStorage.getItem("android_installed_version")||"").trim(),q=localStorage.getItem("android_last_ack_code"),ne=localStorage.getItem("android_installed_code"),oe=q?Number(q):null,se=ne?Number(ne):null,pe=Y||j,X=oe??se??null;pe&&x(pe),X&&C(X);const{doc:ve,getDoc:xe}=await te(async()=>{const{doc:he,getDoc:ue}=await Promise.resolve().then(()=>Dn);return{doc:he,getDoc:ue}},void 0,import.meta.url),{db:G}=await te(async()=>{const{db:he}=await Promise.resolve().then(()=>Gt);return{db:he}},void 0,import.meta.url),ce=await xe(ve(G,"profiles",r.uid));if(ce.exists()){const he=ce.data(),ue=String((he==null?void 0:he.lastAckAndroidVersion)||(he==null?void 0:he.androidInstalledVersion)||(he==null?void 0:he.lastAckUpdateId)||"").trim(),le=typeof(he==null?void 0:he.lastAckAndroidCode)=="number"?he.lastAckAndroidCode:typeof(he==null?void 0:he.androidInstalledCode)=="number"?he.androidInstalledCode:null,Re=(St,Tt)=>{const pt=String(St||"").replace(/^v/i,"").split(".").map(Lt=>parseInt(Lt,10)||0),Ke=String(Tt||"").replace(/^v/i,"").split(".").map(Lt=>parseInt(Lt,10)||0);for(let Lt=0;Lt<Math.max(pt.length,Ke.length);Lt++){const qt=pt[Lt]||0,Ge=Ke[Lt]||0;if(qt>Ge)return 1;if(qt<Ge)return-1}return 0};let ot=!1;if(typeof le=="number"&&typeof X=="number"?ot=le>X:typeof le=="number"&&X==null?ot=!0:ue&&pe?ot=Re(ue,pe)>0:ue&&!pe&&(ot=!0),ot){if(ue){try{localStorage.setItem("android_installed_version",ue)}catch{}x(ue)}if(typeof le=="number"){try{localStorage.setItem("android_installed_code",String(le))}catch{}C(le)}}else if(typeof le=="number"&&X==null){try{localStorage.setItem("android_installed_code",String(le))}catch{}C(le)}}}catch{}})()},[r==null?void 0:r.uid]),b.useEffect(()=>{try{const j=String((window==null?void 0:window.__nativeAppVersion)||"").trim();j&&L(j);const q=window==null?void 0:window.__nativeAppVersionCode;if(typeof q=="number"){T(q);try{localStorage.setItem("android_installed_code",String(q))}catch{}}try{j&&localStorage.setItem("android_installed_version",j)}catch{}}catch{}const Y=j=>{var q,ne;try{const oe=String((((q=j==null?void 0:j.detail)==null?void 0:q.version)??"")||"").trim(),se=(ne=j==null?void 0:j.detail)==null?void 0:ne.code;oe&&L(oe);try{oe&&localStorage.setItem("android_installed_version",oe)}catch{}typeof se=="number"&&T(se)}catch{}};try{window.addEventListener("native-app-version",Y)}catch{}return()=>{try{window.removeEventListener("native-app-version",Y)}catch{}}},[]),b.useEffect(()=>{try{const Y=(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android",j=String(P||"").trim();if(!Y||!j||!(r!=null&&r.uid))return;(async()=>{try{const{doc:q,setDoc:ne,serverTimestamp:oe}=await te(async()=>{const{doc:pe,setDoc:X,serverTimestamp:ve}=await Promise.resolve().then(()=>Dn);return{doc:pe,setDoc:X,serverTimestamp:ve}},void 0,import.meta.url),{db:se}=await te(async()=>{const{db:pe}=await Promise.resolve().then(()=>Gt);return{db:pe}},void 0,import.meta.url);await ne(q(se,"profiles",r.uid),{androidInstalledVersion:j,androidInstalledAt:oe()},{merge:!0});try{localStorage.setItem("android_installed_version",j)}catch{}}catch{}})()}catch{}},[P,r==null?void 0:r.uid]),b.useEffect(()=>{Ee!=null&&Ee.isNativePlatform&&Ee.getPlatform()==="android"&&(async()=>{try{await te(()=>import("./ProtectedUserDashboard-BRy5uAh3.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url),await te(()=>import("./UserDashboardPage-DaSIDDiO.js"),__vite__mapDeps([62,1,39,15,18,30,31,23,6,42,41,25,5,49,33,47,37,38,48,52,10,57,4,8,32,26,35,19,40,44,55,7,45]),import.meta.url),await te(()=>Promise.resolve().then(()=>IH),void 0,import.meta.url),await te(()=>import("./ProfileSettingsPage-BGzDJM0G.js"),__vite__mapDeps([54,1,18,48,55,30,31,42,5,50,7,45]),import.meta.url),await te(()=>import("./TransactionsPage-C4c_NVIq.js"),__vite__mapDeps([56,1,15,39,38,57,49,30,18,31,4,41,10,8,32,33,5,52]),import.meta.url)}catch{}})()},[]),b.useEffect(()=>{if(!t)return;const Y=document.createElement("style");Y.setAttribute("data-disable-pull-to-refresh","true"),Y.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(Y);let j=0,q=null;const ne=se=>{var pe,X;j=((X=(pe=se.touches)==null?void 0:pe[0])==null?void 0:X.clientY)||0,q=se.target},oe=se=>{var he,ue;const pe=((ue=(he=se.touches)==null?void 0:he[0])==null?void 0:ue.clientY)||0,X=document.scrollingElement||document.documentElement,ve=X.scrollTop||window.scrollY||0,xe=X.scrollHeight-X.clientHeight||0,G=q||null,ce=(()=>{let le=G;for(;le&&le!==document.body;){const ot=window.getComputedStyle(le).overflowY;if((ot==="auto"||ot==="scroll")&&le.scrollHeight>le.clientHeight)return!0;le=le.parentElement}return!1})();!ce&&ve<=0&&pe>j&&se.cancelable&&se.preventDefault(),!ce&&ve>=xe&&pe<j&&se.cancelable&&se.preventDefault()};return document.addEventListener("touchstart",ne,{passive:!0}),document.addEventListener("touchmove",oe,{passive:!1}),()=>{document.removeEventListener("touchstart",ne),document.removeEventListener("touchmove",oe);try{document.head.removeChild(Y)}catch{}}},[t]),b.useEffect(()=>{if(!((Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android"))return;try{const ne=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=ne,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const ne=(window.location.assign||(oe=>{})).bind(window.location);window.__originalAssign=ne,window.location.assign=oe=>{try{if(String(oe||"").startsWith("/user/dashboard")){a("/user/dashboard");return}}catch{}try{ne(oe)}catch{}}}catch{}let j=null,q=!1;return(async()=>{try{const{listenAndroidUpdates:ne}=await te(async()=>{const{listenAndroidUpdates:oe}=await Promise.resolve().then(()=>DH);return{listenAndroidUpdates:oe}},void 0,import.meta.url);j=ne(oe=>{if(q)return;const se=String((oe==null?void 0:oe.version)||"").trim(),pe=String((oe==null?void 0:oe.url)||"").trim(),X=String((oe==null?void 0:oe.notes)||"").trim(),ve=!!(oe!=null&&oe.force),xe=typeof(oe==null?void 0:oe.code)=="number"?oe.code:void 0,G=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),ce=String(w||G||"").trim(),he=(Ge,yt)=>{const tt=String(Ge||"").replace(/^v/i,"").split(".").map(fe=>parseInt(fe,10)||0),Ue=String(yt||"").replace(/^v/i,"").split(".").map(fe=>parseInt(fe,10)||0);for(let fe=0;fe<Math.max(tt.length,Ue.length);fe++){const ut=tt[fe]||0,vt=Ue[fe]||0;if(ut>vt)return 1;if(ut<vt)return-1}return 0},ue=String(P||"").trim(),le=String(localStorage.getItem("android_installed_version")||"").trim(),Re=localStorage.getItem("android_installed_code"),ot=Re?Number(Re):null,St=[A,R,ot].filter(Ge=>typeof Ge=="number").reduce((Ge,yt)=>Ge===void 0?yt:Math.max(Ge,yt),void 0),Tt=typeof xe=="number"&&typeof St=="number"?xe>St:void 0,pt=(()=>{const Ge=[ue,ce,le].filter(Boolean);return Ge.length===0?"":Ge.reduce((yt,tt)=>he(tt,yt)>0?tt:yt)})(),Ke=he(se,pt)>0;if(!!pe&&(!!se||typeof xe=="number")&&(Tt!==void 0?Tt:Ke)){const Ge="   ",yt=`${X?X+`
`:""} : ${se}`;f({title:Ge,message:yt,apkUrl:pe,force:ve,versionId:se,versionCode:xe}),d(!0)}else try{d(!1)}catch{}})}catch{}})(),()=>{q=!0;try{typeof j=="function"&&j()}catch{}}},[w,P]),b.useEffect(()=>{const Y=q=>{const ne=(q==null?void 0:q.detail)||{};try{D.current&&(clearTimeout(D.current),D.current=null)}catch{}try{O.current&&(clearInterval(O.current),O.current=null)}catch{}I(!0),v({percent:ne.percent??null,downloaded:ne.downloaded??0,total:ne.total??0})},j=()=>{try{D.current&&(clearTimeout(D.current),D.current=null)}catch{}try{O.current&&(clearInterval(O.current),O.current=null)}catch{}I(!1),y(!0),v({percent:100,downloaded:((p==null?void 0:p.total)??(p==null?void 0:p.downloaded)??0)||0,total:(p==null?void 0:p.total)??0});try{const q=String((h==null?void 0:h.versionId)||"").trim();if(q){try{localStorage.setItem("android_last_ack_version_id",q)}catch{}try{localStorage.setItem("android_installed_version",q)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:ne,setDoc:oe,serverTimestamp:se}=await te(async()=>{const{doc:X,setDoc:ve,serverTimestamp:xe}=await Promise.resolve().then(()=>Dn);return{doc:X,setDoc:ve,serverTimestamp:xe}},void 0,import.meta.url),{db:pe}=await te(async()=>{const{db:X}=await Promise.resolve().then(()=>Gt);return{db:X}},void 0,import.meta.url);await oe(ne(pe,"profiles",r.uid),{lastAckAndroidVersion:q,androidInstalledVersion:q,lastAckAt:se(),androidInstalledAt:se()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",Y),window.addEventListener("androidUpdateDownloaded",j),()=>{window.removeEventListener("androidUpdateProgress",Y),window.removeEventListener("androidUpdateDownloaded",j)}},[]),b.useEffect(()=>((async()=>{var Y;try{const{auth:j}=await te(async()=>{const{auth:ce}=await Promise.resolve().then(()=>Gt);return{auth:ce}},void 0,import.meta.url),q=((Y=j.currentUser)==null?void 0:Y.uid)||"";if(!q)return;const{db:ne}=await te(async()=>{const{db:ce}=await Promise.resolve().then(()=>Gt);return{db:ce}},void 0,import.meta.url),{collection:oe,query:se,where:pe,onSnapshot:X}=await te(async()=>{const{collection:ce,query:he,where:ue,onSnapshot:le}=await Promise.resolve().then(()=>Dn);return{collection:ce,query:he,where:ue,onSnapshot:le}},void 0,import.meta.url),ve=se(oe(ne,"pendingSmsPopups"),pe("userId","==",q),pe("status","==","pending")),xe=Date.now(),G=X(ve,ce=>{var he,ue,le,Re,ot,St,Tt,pt,Ke,Lt,qt,Ge,yt;try{const tt=typeof ce.docChanges=="function"?ce.docChanges():[];for(const Ue of tt){if(Ue.type==="added"){const fe=Ue.doc.data()||{},ut=Ue.doc.id;if((ue=(he=_e.current)==null?void 0:he.has)!=null&&ue.call(he,ut))continue;try{const Kt=fe.createdAt||fe.timestamp||(fe.payload||{}).createdAt||(fe.payload||{}).timestamp,vn=Kt&&typeof Kt.toMillis=="function"?Kt.toMillis():typeof fe.createdAtMs=="number"?fe.createdAtMs:typeof(fe.payload||{}).createdAtMs=="number"?(fe.payload||{}).createdAtMs:null;if(typeof vn=="number"&&vn<xe)continue}catch{}let vt=fe.amount??((le=fe.payload)==null?void 0:le.amount)??null,jt=fe.sender??((Re=fe.payload)==null?void 0:Re.sender)??"";const xt=fe.senderName??((ot=fe.payload)==null?void 0:ot.senderName)??"";let Er=fe.reference??((St=fe.payload)==null?void 0:St.reference)??"";const gt=fe.text??((Tt=fe.payload)==null?void 0:Tt.text)??"";let Sn=fe.simNumber??((pt=fe.payload)==null?void 0:pt.simNumber)??"",be=fe.simSlot??((Ke=fe.payload)==null?void 0:Ke.simSlot);be==null&&(be=fe.slot??((Lt=fe.payload)==null?void 0:Lt.slot)),be==null&&(be=fe.sim_slot??((qt=fe.payload)==null?void 0:qt.sim_slot)),be==null&&(be=fe.lineId??((Ge=fe.payload)==null?void 0:Ge.lineId));const Ye=be!=null?String(be):"",Ht=(r==null?void 0:r.uid)||"default";let dt=localStorage.getItem(`sim1Number_${Ht}`)??localStorage.getItem("sim1Number")??"",wt=localStorage.getItem(`sim2Number_${Ht}`)??localStorage.getItem("sim2Number")??"";const Rt=fe.payload||{},Tn=Rt.sim1Number||Rt.sim1||fe.sim1Number||"",jn=Rt.sim2Number||Rt.sim2||fe.sim2Number||"";Tn&&(dt=String(Tn).trim(),$i(dt)),jn&&(wt=String(jn).trim(),ta(wt));let kn=Sn,ar="";Ye==="1"?(ar="SIM 2",wt&&(kn=wt)):(Ye==="0"||!Ye)&&(ar="SIM 1",dt&&(kn=dt));const lr=fe.walletMsisdn??((yt=fe.payload)==null?void 0:yt.walletMsisdn)??"";let Ir="VF-Cash";if(/Received\s*EGP/i.test(String(gt))){Ir="InstaPay";const Kt=String(gt).match(/Received\s*EGP\s*([0-9.,]+)/i);Kt&&(vt=parseFloat(String(Kt[1]).replace(/,/g,"")));const vn=String(gt).match(/from\s+([0-9+]+)/i);vn&&(jt=rn(vn[1]));const us=String(gt).match(/Ref:\s*([A-Za-z0-9\-]+)/i);us&&(Er=String(us[1]).trim())}ye({amount:Number(vt||0),sender:String(jt||""),senderName:xt,reference:String(Er||""),text:gt,simNumber:kn,simLabel:ar,walletMsisdn:lr,providerLabel:Ir,popupId:ut,sim1Number:dt,sim2Number:wt}),we(!0);try{Dr()}catch{}}if(Ue.type==="removed"){const fe=Ue.doc.id,ut=(M==null?void 0:M.popupId)||"";ut&&ut===fe&&(we(!1),ye(null))}}}catch{}});z.current=G}catch{}})(),()=>{try{const Y=z.current;typeof Y=="function"&&Y()}catch{}}),[r==null?void 0:r.uid]),b.useEffect(()=>{const Y=(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android",j=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(Y||j)return;let q=!1;return(async()=>{try{const ne="0.0.0",oe=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!oe.ok)return;const se=await oe.json(),pe=String((se==null?void 0:se.version)||"0.0.0"),X=!!(se!=null&&se.force);if(!q&&((xe,G)=>{const ce=String(xe).split(".").map(ue=>parseInt(ue,10)||0),he=String(G).split(".").map(ue=>parseInt(ue,10)||0);for(let ue=0;ue<Math.max(ce.length,he.length);ue++){const le=ce[ue]||0,Re=he[ue]||0;if(le>Re)return 1;if(le<Re)return-1}return 0})(pe,ne)>0){if(X){try{window.location.reload()}catch{}return}try{l({title:"  ",description:` ${pe}      `})}catch{}}}catch{}})(),()=>{q=!0}},[]),b.useEffect(()=>{if(J)try{const Y=(r==null?void 0:r.uid)||"default",j=localStorage.getItem(`sim1Number_${Y}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${Y}`)??localStorage.getItem("sim2Number")??"";$i(j),ta(q)}catch{}},[J,r==null?void 0:r.uid]);const na=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),es=(()=>{const Y=(q,ne)=>{const oe=String(q||"").replace(/^v/i,"").split(".").map(pe=>parseInt(pe,10)||0),se=String(ne||"").replace(/^v/i,"").split(".").map(pe=>parseInt(pe,10)||0);for(let pe=0;pe<Math.max(oe.length,se.length);pe++){const X=oe[pe]||0,ve=se[pe]||0;if(X>ve)return 1;if(X<ve)return-1}return 0},j=[P,w,na].filter(Boolean);return j.length===0?"":j.reduce((q,ne)=>Y(ne,q)>0?ne:q)})();return E.jsxs(E.Fragment,{children:[E.jsx(lv,{open:Ot,onOpenChange:()=>{},children:E.jsxs(cm,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:Y=>{try{Y.preventDefault()}catch{}},onEscapeKeyDown:Y=>{try{Y.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[E.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),E.jsx(um,{className:"text-center",children:E.jsxs("div",{className:"flex items-center justify-center gap-3",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:E.jsx(dU,{className:"w-6 h-6"})}),E.jsx(dm,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),E.jsxs("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:[E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"1"}),E.jsx("div",{children:"  ( )                        ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"2"}),E.jsx("div",{children:"                         ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"3"}),E.jsx("div",{children:"       (   )        ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"4"}),E.jsx("div",{children:"                    ."})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"5"}),E.jsx("div",{children:"               ."})]})]}),E.jsx("div",{className:"mt-4",children:E.jsx(ts,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Un,children:"  "})})]})}),U.useEffect(()=>{try{const Y=(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android",j=(r==null?void 0:r.uid)||"";if(!Y||!j)return;const q=`androidPermsRequested_${j}`;localStorage.getItem(q)==="true"||(localStorage.setItem(q,"true"),setTimeout(()=>{try{window.location.href="cashy://requestPerms"}catch{}},300))}catch{}},[r==null?void 0:r.uid]),(()=>{try{const Y=(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android",j=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),B&&(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android"&&E.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:E.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:E.jsx("span",{className:"text-2xl",children:"!"})}),E.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),E.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),E.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:E.jsx(ts,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),c&&h&&E.jsx(lv,{open:c,onOpenChange:Y=>{h!=null&&h.force||d(Y)},children:E.jsxs(cm,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[E.jsxs(um,{className:"text-center",children:[E.jsx(dm,{className:"text-base md:text-lg font-bold text-gray-900",children:h.title}),E.jsx(u_,{className:"text-sm text-gray-700 whitespace-pre-line",children:h.message}),E.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:es?`  : v${es}`:""})]}),E.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!h.force&&!m&&!_&&E.jsx(ts,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>d(!1),children:""}),!_&&E.jsx(ts,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const Y=String((h==null?void 0:h.versionId)||"").trim(),j=h==null?void 0:h.versionCode;if(Y)try{localStorage.setItem("android_last_ack_version_id",Y)}catch{}if(typeof j=="number")try{localStorage.setItem("android_last_ack_code",String(j))}catch{}if((async()=>{try{if(r!=null&&r.uid&&Y){const{doc:ne,setDoc:oe,serverTimestamp:se}=await te(async()=>{const{doc:ve,setDoc:xe,serverTimestamp:G}=await Promise.resolve().then(()=>Dn);return{doc:ve,setDoc:xe,serverTimestamp:G}},void 0,import.meta.url),{db:pe}=await te(async()=>{const{db:ve}=await Promise.resolve().then(()=>Gt);return{db:ve}},void 0,import.meta.url),X={lastAckAndroidVersion:Y,lastAckAt:se()};typeof j=="number"&&(X.lastAckAndroidCode=j),await oe(ne(pe,"profiles",r.uid),X,{merge:!0})}}catch{}})(),(Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android"){const ne=h.apkUrl,oe=`cashy://update?url=${encodeURIComponent(ne)}`;I(!0),v({percent:0,downloaded:0,total:0});try{O.current&&clearInterval(O.current),O.current=setInterval(()=>{v(se=>{const pe=typeof(se==null?void 0:se.percent)=="number"?se.percent:0,X=k.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(pe+X))),downloaded:(se==null?void 0:se.downloaded)??0,total:(se==null?void 0:se.total)??0}})},600)}catch{}window.location.href=oe;try{D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{try{k.current=!1}catch{}try{D.current=null}catch{}},8e3)}catch{}}else{const ne=h.apkUrl;try{window.open(ne,"_blank")}catch{}}}catch{}},children:m?" ...":" "}),_&&E.jsx(ts,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((Ee==null?void 0:Ee.isNativePlatform)&&Ee.getPlatform()==="android"){d(!1);try{const j=String((h==null?void 0:h.versionId)||"").trim();if(j){try{localStorage.setItem("android_last_ack_version_id",j)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:q,setDoc:ne,serverTimestamp:oe}=await te(async()=>{const{doc:ve,setDoc:xe,serverTimestamp:G}=await Promise.resolve().then(()=>Dn);return{doc:ve,setDoc:xe,serverTimestamp:G}},void 0,import.meta.url),{db:se}=await te(async()=>{const{db:ve}=await Promise.resolve().then(()=>Gt);return{db:ve}},void 0,import.meta.url),pe={lastAckAndroidVersion:j,androidInstalledVersion:j,lastAckAt:oe(),androidInstalledAt:oe()},X=h==null?void 0:h.versionCode;if(typeof X=="number"){pe.lastAckAndroidCode=X,pe.androidInstalledCode=X;try{localStorage.setItem("android_installed_code",String(X)),localStorage.setItem("android_last_ack_code",String(X))}catch{}}await ne(q(se,"profiles",r.uid),pe,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),m&&E.jsxs("div",{className:"mt-3 text-center",children:[E.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:E.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((p==null?void 0:p.percent)||0)))}%`}})}),E.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((p==null?void 0:p.percent)||0),"%"]})]})]})}),o&&E.jsx(lv,{open:J,onOpenChange:async Y=>{var j,q;if(we(Y),!Y){try{const ne=(M==null?void 0:M.popupId)||"";if(ne){const{db:oe}=await te(async()=>{const{db:ve}=await Promise.resolve().then(()=>Gt);return{db:ve}},void 0,import.meta.url),{doc:se,updateDoc:pe,serverTimestamp:X}=await te(async()=>{const{doc:ve,updateDoc:xe,serverTimestamp:G}=await Promise.resolve().then(()=>Dn);return{doc:ve,updateDoc:xe,serverTimestamp:G}},void 0,import.meta.url);try{await pe(se(oe,"pendingSmsPopups",ne),{status:"dismissed",dismissedAt:X()})}catch{}try{(q=(j=_e.current)==null?void 0:j.add)==null||q.call(j,ne);const ve=Array.from(_e.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(ve))}catch{}}}catch{}qe(!1),$e(""),gn(""),vr(""),Cn(!1),yn(0)}},children:E.jsxs(cm,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[E.jsxs(um,{children:[E.jsx(dm,{children:M!=null&&M.providerLabel?E.jsxs(E.Fragment,{children:["   ",E.jsx("span",{className:"text-red-600",children:M.providerLabel})]}):"   "}),E.jsx(u_,{})]}),E.jsxs("div",{className:"text-sm",children:[E.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[E.jsx(ts,{variant:(M==null?void 0:M.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(M==null?void 0:M.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Ds((M==null?void 0:M.sim1Number)||wr,"SIM 1"),disabled:!(M!=null&&M.sim1Number||wr),children:(M==null?void 0:M.sim1Number)||wr||" "}),E.jsx(ts,{variant:(M==null?void 0:M.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(M==null?void 0:M.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Ds((M==null?void 0:M.sim2Number)||_r,"SIM 2"),disabled:!(M!=null&&M.sim2Number||_r),children:(M==null?void 0:M.sim2Number)||_r||" "})]}),E.jsx("div",{className:"border rounded-lg p-3",children:E.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"font-bold",children:[" ",(Or=M==null?void 0:M.amount)==null?void 0:Or.toLocaleString()]}),E.jsx("div",{className:"font-mono",children:(M==null?void 0:M.sender)||""}),E.jsxs("div",{className:"font-mono",children:[(M==null?void 0:M.simLabel)&&E.jsx("span",{className:`inline-flex items-center justify-center rounded-md px-1.5 py-0.5 text-xs font-bold mr-2 ${M.simLabel==="SIM 1"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:M.simLabel}),(M==null?void 0:M.simNumber)||"-"]}),(M==null?void 0:M.senderName)&&E.jsx("div",{children:M==null?void 0:M.senderName}),(M==null?void 0:M.reference)&&E.jsx("div",{className:"font-mono",children:M==null?void 0:M.reference}),(M==null?void 0:M.walletMsisdn)&&E.jsx("div",{className:"font-mono",children:M==null?void 0:M.walletMsisdn})]}),E.jsxs("div",{className:"space-y-2 text-right",children:[E.jsx("div",{children:"  "}),E.jsx("div",{children:" "}),E.jsx("div",{children:" "}),(M==null?void 0:M.senderName)&&E.jsx("div",{children:"  "}),(M==null?void 0:M.reference)&&E.jsx("div",{children:"  "}),(M==null?void 0:M.walletMsisdn)&&E.jsx("div",{children:"  "})]})]})}),Be&&E.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[E.jsx("span",{className:"flex-1",children:"  ()"}),E.jsx("input",{type:"number",step:"0.01",min:"0",value:Fe,onChange:Y=>$e(Y.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),or&&E.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"text-sm",children:" "}),E.jsxs("div",{className:"font-bold",children:[" ",Le.toLocaleString()]})]}),E.jsx("div",{className:"mt-3",children:E.jsx("input",{type:"text",value:Dt,onChange:Y=>gn(Y.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),E.jsx("div",{className:"mt-3",children:E.jsx(ts,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{qe(!0),Cn(!1)},children:""})})]}),Oe&&!or&&E.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),E.jsx("div",{className:"pt-2",children:E.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var Y;try{const q=String((M==null?void 0:M.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),ne=q?parseFloat(String(q[1]).replace(",",".")):Number((M==null?void 0:M.amount)||0),{auth:oe}=await te(async()=>{const{auth:he}=await Promise.resolve().then(()=>Gt);return{auth:he}},void 0,import.meta.url),se=((Y=oe.currentUser)==null?void 0:Y.uid)||"",pe=se?`selectedWallet_${se}`:"selectedWallet_default",X=localStorage.getItem(pe)||"",ve=Fe&&Fe.trim()!==""?Math.max(0,parseFloat(Fe)):null;let xe=0;if(ve!=null)xe=ve;else try{const{merchantWalletService:he}=await te(async()=>{const{merchantWalletService:Re}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:Re}},void 0,import.meta.url),ue=await he.getById(String(X)),le=ue&&ue.defaultWithdrawCommission;if(le!=null)xe=Math.round((Number(le)||0)*Number(ne)/1e3*100)/100;else{const{calculateCommission:Re}=await te(async()=>{const{calculateCommission:ot}=await Promise.resolve().then(()=>Oa);return{calculateCommission:ot}},void 0,import.meta.url);xe=Re(Number(ne),"receive")}}catch{const{calculateCommission:he}=await te(async()=>{const{calculateCommission:ue}=await Promise.resolve().then(()=>Oa);return{calculateCommission:ue}},void 0,import.meta.url);xe=he(Number(ne),"receive")}const ce=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(ne)+Number(xe):Number(ne);yn(Math.round(ce*100)/100),Cn(!0)}catch{Cn(!0)}},children:""})})]}),E.jsx("div",{className:"pt-3",children:E.jsx(ts,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const Y=String((M==null?void 0:M.text)||""),j=Y.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),q=j?parseFloat(String(j[1]).replace(",",".")):Number((M==null?void 0:M.amount)||0),ne=Y.match(/\s+\s+(\d+)/i),oe=String((M==null?void 0:M.sender)||(ne?ne[1]:"")||""),se=Y.match(/\s*\s*([\d\.]+)/i),pe=String((M==null?void 0:M.reference)||(se?se[1]:String(Date.now())));ai({...M,amount:q,sender:oe,reference:pe,deferredMode:Oe,debtorName:Dt,debtorNote:tn})}catch{ai()}},children:" "})})]})})]})},Ix=()=>{const t=ri(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?E.jsxs(E.Fragment,{children:[E.jsx(n4,{}),E.jsx(M4,{})]}):null},Sx=()=>{const{user:t,loading:e}=ml();return e?E.jsx(o_,{}):t?E.jsx(hm,{}):E.jsx(Tp,{})},pG=()=>E.jsx(o6,{client:V2,children:E.jsx(m$,{children:E.jsxs(T3,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Ee!=null&&Ee.isNativePlatform&&Ee.getPlatform()==="android")&&E.jsx(OH,{}),E.jsx(mG,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&fG||Ee!=null&&Ee.isNativePlatform&&Ee.getPlatform()==="android")?E.jsxs(c$,{children:[E.jsx(Ex,{}),E.jsx(Ix,{}),E.jsx(b.Suspense,{fallback:E.jsx(o_,{}),children:E.jsxs(CT,{children:[E.jsx(Ae,{path:"/",element:Ee!=null&&Ee.isNativePlatform&&Ee.getPlatform()==="android"?E.jsx(Sx,{}):E.jsx(Pf,{})}),E.jsx(Ae,{path:"/dashboard-redirect",element:E.jsx(XA,{})}),E.jsx(Ae,{path:"/landing",element:E.jsx(Pf,{})}),E.jsx(Ae,{path:"/subscriptions",element:E.jsx(ZA,{})}),E.jsx(Ae,{path:"/auth",element:E.jsx(ex,{})}),E.jsx(Ae,{path:"/user/login",element:E.jsx(Tp,{})}),E.jsx(Ae,{path:"/user/forgot-password",element:E.jsx(sx,{})}),E.jsx(Ae,{path:"/user/register",element:E.jsx(kf,{})}),E.jsx(Ae,{path:"/register",element:E.jsx(kf,{})}),E.jsx(Ae,{path:"/user/account-setup",element:E.jsx(rx,{})}),E.jsx(Ae,{path:"/user/pending-approval",element:E.jsx(lx,{})}),E.jsx(Ae,{path:"/user/dashboard",element:E.jsx(hm,{})}),E.jsx(Ae,{path:"/branch/:shopId/dashboard",element:E.jsx(hm,{})}),E.jsx(Ae,{path:"/user/add-wallet",element:E.jsx(mx,{})}),E.jsx(Ae,{path:"/admin/login",element:E.jsx(cx,{})}),E.jsx(Ae,{path:"/admin/dashboard",element:E.jsx(ux,{})}),E.jsx(Ae,{path:"/admin/topups",element:E.jsx(tx,{})}),E.jsx(Ae,{path:"/admin/notifications",element:E.jsx(nx,{})}),E.jsx(Ae,{path:"/profile-settings",element:E.jsx(hx,{})}),E.jsx(Ae,{path:"/transactions",element:E.jsx(fx,{})}),E.jsx(Ae,{path:"/referrals",element:E.jsx(px,{})}),E.jsx(Ae,{path:"/privacy-policy",element:E.jsx(wx,{})}),E.jsx(Ae,{path:"/cpanel",element:E.jsx(gx,{})}),E.jsx(Ae,{path:"/cpanel/login",element:E.jsx(yx,{})}),E.jsx(Ae,{path:"/auth-test",element:E.jsx(dx,{})}),E.jsx(Ae,{path:"/topup",element:E.jsx(Cf,{})}),E.jsx(Ae,{path:"/recharge",element:E.jsx(Cf,{})}),E.jsx(Ae,{path:"/merchant/*",element:E.jsx(ax,{})}),E.jsx(Ae,{path:"/dashboard/login",element:E.jsx(ix,{})}),E.jsx(Ae,{path:"/dashboard",element:E.jsx(ox,{})}),E.jsx(Ae,{path:"*",element:E.jsx(vx,{})})]})}),E.jsx(_x,{})]}):E.jsxs(l$,{children:[E.jsx(Ex,{}),E.jsx(Ix,{}),E.jsx(b.Suspense,{fallback:E.jsx(o_,{}),children:E.jsxs(CT,{children:[E.jsx(Ae,{path:"/",element:Ee!=null&&Ee.isNativePlatform&&Ee.getPlatform()==="android"?E.jsx(Sx,{}):E.jsx(Pf,{})}),E.jsx(Ae,{path:"/dashboard-redirect",element:E.jsx(XA,{})}),E.jsx(Ae,{path:"/landing",element:E.jsx(Pf,{})}),E.jsx(Ae,{path:"/subscriptions",element:E.jsx(ZA,{})}),E.jsx(Ae,{path:"/auth",element:E.jsx(ex,{})}),E.jsx(Ae,{path:"/user/login",element:E.jsx(Tp,{})}),E.jsx(Ae,{path:"/user/forgot-password",element:E.jsx(sx,{})}),E.jsx(Ae,{path:"/user/register",element:E.jsx(kf,{})}),E.jsx(Ae,{path:"/register",element:E.jsx(kf,{})}),E.jsx(Ae,{path:"/user/account-setup",element:E.jsx(rx,{})}),E.jsx(Ae,{path:"/user/pending-approval",element:E.jsx(lx,{})}),E.jsx(Ae,{path:"/user/dashboard",element:E.jsx(hm,{})}),E.jsx(Ae,{path:"/user/add-wallet",element:E.jsx(mx,{})}),E.jsx(Ae,{path:"/admin/login",element:E.jsx(cx,{})}),E.jsx(Ae,{path:"/admin/dashboard",element:E.jsx(ux,{})}),E.jsx(Ae,{path:"/admin/topups",element:E.jsx(tx,{})}),E.jsx(Ae,{path:"/admin/notifications",element:E.jsx(nx,{})}),E.jsx(Ae,{path:"/profile-settings",element:E.jsx(hx,{})}),E.jsx(Ae,{path:"/transactions",element:E.jsx(fx,{})}),E.jsx(Ae,{path:"/referrals",element:E.jsx(px,{})}),E.jsx(Ae,{path:"/privacy-policy",element:E.jsx(wx,{})}),E.jsx(Ae,{path:"/cpanel",element:E.jsx(gx,{})}),E.jsx(Ae,{path:"/cpanel/login",element:E.jsx(yx,{})}),E.jsx(Ae,{path:"/auth-test",element:E.jsx(dx,{})}),E.jsx(Ae,{path:"/topup",element:E.jsx(Cf,{})}),E.jsx(Ae,{path:"/recharge",element:E.jsx(Cf,{})}),E.jsx(Ae,{path:"/merchant/*",element:E.jsx(ax,{})}),E.jsx(Ae,{path:"/dashboard/login",element:E.jsx(ix,{})}),E.jsx(Ae,{path:"/dashboard",element:E.jsx(ox,{})}),E.jsx(Ae,{path:"*",element:E.jsx(vx,{})})]})}),E.jsx(_x,{})]})]})})}),gG=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},cv=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await te(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},yG=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await te(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},M2=b.createContext(void 0),vG=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!1),[i,o]=b.useState(null),{profile:a,user:l}=ml();b.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),I=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),m&&s(m==="true"),I&&o(Number(I))}catch{}},[]),b.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=Pe(Q,"cashierShift",a.shopId);let m=null;return(async()=>{try{(await Yt(f)).exists()||await ln(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),m=Oi(f,p=>{if(p.exists()){const v=p.data(),_=(v==null?void 0:v.shiftUser)||null,y=!!(v!=null&&v.isShiftActive),w=(v==null?void 0:v.shiftStartAt)??null;let x=_;if(!x)try{const P=localStorage.getItem("cashier_shift_user"),L=P?JSON.parse(P):null;L&&(x=L)}catch{}n(x),s(y),o(typeof w=="number"?w:w?Number(w):null);try{x?localStorage.setItem("cashier_shift_user",JSON.stringify(x)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",y?"true":"false"),w!=null&&localStorage.setItem("cashier_shift_start_at",String(w))}catch{}}},p=>{console.warn("cashierShift snapshot error:",p)})}catch(I){console.warn("Failed to init cashierShift doc:",I)}})(),()=>{m&&m()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const m=Pe(Q,"cashierShift",a.shopId);In(m,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const m=Pe(Q,"cashierShift",a.shopId);In(m,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const I=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,p=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let _=localStorage.getItem(I);if(_==null){const w=localStorage.getItem(p);if(w!=null){_=w;try{localStorage.setItem(I,w),localStorage.removeItem(p)}catch{}}}if(_==null&&(l!=null&&l.uid)){const w=localStorage.getItem("cashBalance"),x=localStorage.getItem("userCashBalance");if(w!=null){try{localStorage.setItem(I,w),localStorage.removeItem("cashBalance")}catch{}_=w}else if(x!=null){try{localStorage.setItem(I,x),localStorage.removeItem("userCashBalance")}catch{}_=x}}const y=localStorage.getItem(v);_?localStorage.setItem("shiftStartDrawerFunds",_):localStorage.setItem("shiftStartDrawerFunds","0"),y?localStorage.setItem("shiftStartWalletBalances",y):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=Pe(Q,"dashboardData",a.shopId),I=await Yt(m);if(I.exists()){const p=I.data(),v=Number((p==null?void 0:p.cashBalance)??0),_=(p==null?void 0:p.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),w=localStorage.getItem("shiftStartWalletBalances"),x=y?parseFloat(y):0,P=w?JSON.parse(w):{},L=!y||!Number.isFinite(x)||x===0,A=!w||Object.keys(P||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),A&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=Pe(Q,"cashierShift",a.shopId);In(f,{isShiftActive:!1})}}catch{}};return E.jsx(M2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},ZG=()=>{const t=b.useContext(M2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class wG extends b.Component{constructor(){super(...arguments);_u(this,"state",{hasError:!1,error:null});_u(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:E.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[E.jsx("div",{className:"flex justify-center",children:E.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:E.jsx(LP,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),E.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),E.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,E.jsxs(ts,{onClick:this.handleReload,className:"w-full gap-2",children:[E.jsx(f0,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{n2()}catch{}const _G=()=>{const{theme:t="system"}=KP();return b.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};iP(document.getElementById("root")).render(E.jsx(wG,{children:E.jsx(i4,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:E.jsx(gH,{children:E.jsx(vG,{children:E.jsxs(nK,{children:[E.jsx(pG,{}),E.jsx(_G,{})]})})})})}));export{ri as $,DF as A,ts as B,Jn as C,YB as D,qF as E,ln as F,Pe as G,At as H,vw as I,Yt as J,In as K,h$ as L,GS as M,NG as N,s_ as O,$F as P,Hn as Q,U as R,dU as S,DP as T,vU as U,lv as V,cm as W,um as X,dm as Y,hG as Z,te as _,Yc as a,KG as a$,ws as a0,Br as a1,qc as a2,jM as a3,Iy as a4,Zt as a5,Ct as a6,qn as a7,c0 as a8,Xs as a9,VG as aA,yH as aB,oC as aC,lC as aD,SG as aE,s3 as aF,dl as aG,l0 as aH,JK as aI,lP as aJ,dK as aK,f2 as aL,Md as aM,s2 as aN,qp as aO,i3 as aP,o3 as aQ,oP as aR,UF as aS,OG as aT,KP as aU,e2 as aV,iU as aW,WG as aX,qG as aY,HG as aZ,rH as a_,BO as aa,xH as ab,pU as ac,im as ad,ZG as ae,eK as af,Ee as ag,KS as ah,LF as ai,dO as aj,Oi as ak,XE as al,o_ as am,YS as an,CT as ao,Ae as ap,vo as aq,QS as ar,zF as as,iH as at,xp as au,Ve as av,m0 as aw,l8 as ax,u_ as ay,Zc as az,DG as b,$q as b$,LH as b0,kM as b1,rK as b2,a8 as b3,eH as b4,MF as b5,QF as b6,_U as b7,Ri as b8,sF as b9,xG as bA,CG as bB,QE as bC,jH as bD,_y as bE,ht as bF,XG as bG,Zq as bH,YG as bI,aG as bJ,cG as bK,JG as bL,N2 as bM,VM as bN,D2 as bO,O2 as bP,uG as bQ,k2 as bR,lG as bS,p$ as bT,kG as bU,$O as bV,_a as bW,c8 as bX,VH as bY,GG as bZ,MO as b_,gh as ba,MG as bb,XO as bc,ZO as bd,rU as be,LP as bf,wd as bg,NH as bh,kH as bi,Mn as bj,sH as bk,CH as bl,eg as bm,U3 as bn,N3 as bo,AG as bp,hw as bq,hr as br,tg as bs,C3 as bt,k3 as bu,Bm as bv,xC as bw,Z3 as bx,L3 as by,fr as bz,a0 as c,BG as c0,jq as c1,tH as c2,kF as c3,Dn as c4,Gt as c5,Mu as c6,Jy as c7,DH as c8,QG as c9,l_ as ca,AH as d,TH as e,Pt as f,bH as g,Ne as h,Q as i,E as j,Qe as k,uu as l,$G as m,Hq as n,Do as o,Js as p,je as q,b as r,Me as s,ZF as t,ml as u,KF as v,QB as w,Tf as x,zG as y,wa as z};
//# sourceMappingURL=index-DA5EGBVC.js.map
